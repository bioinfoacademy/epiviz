(function(a,b){function c(a){var b=cb[a]={};v.each(a.split(ya),function(a,c){b[c]=!0});return b}function e(a,c,d){if(d===b&&1===a.nodeType)if(d="data-"+c.replace(Na,"-$1").toLowerCase(),d=a.getAttribute(d),"string"===typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:+d+""===d?+d:Wa.test(d)?v.parseJSON(d):d}catch(g){}v.data(a,c,d)}else d=b;return d}function d(a){for(var b in a)if(("data"!==b||!v.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function f(){return!1}function n(){return!0}
function h(a){return!a||!a.parentNode||11===a.parentNode.nodeType}function g(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function l(a,b,c){b=b||0;if(v.isFunction(b))return v.grep(a,function(a,d){return!!b.call(a,d,a)===c});if(b.nodeType)return v.grep(a,function(a,d){return a===b===c});if("string"===typeof b){var d=v.grep(a,function(a){return 1===a.nodeType});if(da.test(b))return v.filter(b,d,!c);b=v.filter(b,d)}return v.grep(a,function(a,d){return 0<=v.inArray(a,b)===c})}function m(a){var b=
va.split("|");a=a.createDocumentFragment();if(a.createElement)for(;b.length;)a.createElement(b.pop());return a}function p(a,b){return a.getElementsByTagName(b)[0]||a.appendChild(a.ownerDocument.createElement(b))}function t(a,b){if(1===b.nodeType&&v.hasData(a)){var c,d,g;d=v._data(a);var e=v._data(b,d),f=d.events;if(f)for(c in delete e.handle,e.events={},f)for(d=0,g=f[c].length;d<g;d++)v.event.add(b,c,f[c][d]);e.data&&(e.data=v.extend({},e.data))}}function r(a,b){var c;1===b.nodeType&&(b.clearAttributes&&
b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),v.support.html5Clone&&a.innerHTML&&!v.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&Sb.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.selected=a.defaultSelected:"input"===c||"textarea"===c?b.defaultValue=a.defaultValue:"script"===c&&b.text!==a.text&&(b.text=a.text),b.removeAttribute(v.expando))}
function q(a){return"undefined"!==typeof a.getElementsByTagName?a.getElementsByTagName("*"):"undefined"!==typeof a.querySelectorAll?a.querySelectorAll("*"):[]}function w(a){Sb.test(a.type)&&(a.defaultChecked=a.checked)}function u(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,g=yd.length;g--;)if(b=yd[g]+c,b in a)return b;return d}function x(a,b){a=b||a;return"none"===v.css(a,"display")||!v.contains(a.ownerDocument,a)}function z(a,b){for(var c,d,g=[],e=0,f=a.length;e<f;e++)c=
a[e],c.style&&(g[e]=v._data(c,"olddisplay"),b?(g[e]||"none"!==c.style.display||(c.style.display=""),""===c.style.display&&x(c)&&(g[e]=v._data(c,"olddisplay",C(c.nodeName)))):(d=tb(c,"display"),g[e]||"none"===d||v._data(c,"olddisplay",d)));for(e=0;e<f;e++)c=a[e],!c.style||b&&"none"!==c.style.display&&""!==c.style.display||(c.style.display=b?g[e]||"":"none");return a}function y(a,b,c){return(a=zd.exec(b))?Math.max(0,a[1]-(c||0))+(a[2]||"px"):b}function B(a,b,c,d){b=c===(d?"border":"content")?4:"width"===
b?1:0;for(var e=0;4>b;b+=2)"margin"===c&&(e+=v.css(a,c+Db[b],!0)),d?("content"===c&&(e-=parseFloat(tb(a,"padding"+Db[b]))||0),"margin"!==c&&(e-=parseFloat(tb(a,"border"+Db[b]+"Width"))||0)):(e+=parseFloat(tb(a,"padding"+Db[b]))||0,"padding"!==c&&(e+=parseFloat(tb(a,"border"+Db[b]+"Width"))||0));return e}function A(a,b,c){var d="width"===b?a.offsetWidth:a.offsetHeight,e=!0,g=v.support.boxSizing&&"border-box"===v.css(a,"boxSizing");if(0>=d||null==d){d=tb(a,b);if(0>d||null==d)d=a.style[b];if(mc.test(d))return d;
e=g&&(v.support.boxSizingReliable||d===a.style[b]);d=parseFloat(d)||0}return d+B(a,b,c||(g?"border":"content"),e)+"px"}function C(a){if(nc[a])return nc[a];var b=v("<"+a+">").appendTo(K.body),c=b.css("display");b.remove();if("none"===c||""===c)Mb=K.body.appendChild(Mb||v.extend(K.createElement("iframe"),{frameBorder:0,width:0,height:0})),ac&&Mb.createElement||(ac=(Mb.contentWindow||Mb.contentDocument).document,ac.write("<!doctype html><html><body>"),ac.close()),b=ac.body.appendChild(ac.createElement(a)),
c=tb(b,"display"),K.body.removeChild(Mb);return nc[a]=c}function D(a,b,c,d){var e;if(v.isArray(b))v.each(b,function(b,e){c||Yd.test(a)?d(a,e):D(a+"["+("object"===typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==v.type(b))d(a,b);else for(e in b)D(a+"["+e+"]",b[e],c,d)}function H(a){return function(b,c){"string"!==typeof b&&(c=b,b="*");var d,e,g=b.toLowerCase().split(ya),f=0,h=g.length;if(v.isFunction(c))for(;f<h;f++)d=g[f],(e=/^\+/.test(d))&&(d=d.substr(1)||"*"),d=a[d]=a[d]||[],d[e?"unshift":"push"](c)}}
function G(a,c,d,e,g,f){g=g||c.dataTypes[0];f=f||{};f[g]=!0;var h;g=a[g];for(var l=0,m=g?g.length:0,p=a===hd;l<m&&(p||!h);l++)h=g[l](c,d,e),"string"===typeof h&&(!p||f[h]?h=b:(c.dataTypes.unshift(h),h=G(a,c,d,e,h,f)));!p&&h||f["*"]||(h=G(a,c,d,e,"*",f));return h}function L(a,c){var d,e,g=v.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((g[d]?a:e||(e={}))[d]=c[d]);e&&v.extend(!0,a,e)}function J(){try{return new a.XMLHttpRequest}catch(b){}}function M(){setTimeout(function(){Ec=b},0);return Ec=v.now()}
function V(a,b){v.each(b,function(b,c){for(var d=(Tc[b]||[]).concat(Tc["*"]),e=0,g=d.length;e<g&&!d[e].call(a,b,c);e++);})}function T(a,b,c){var d=0,e=Pb.length,g=v.Deferred().always(function(){delete f.elem}),f=function(){for(var b=Ec||M(),b=Math.max(0,h.startTime+h.duration-b),c=1-(b/h.duration||0),d=0,e=h.tweens.length;d<e;d++)h.tweens[d].run(c);g.notifyWith(a,[h,c,b]);if(1>c&&e)return b;g.resolveWith(a,[h]);return!1},h=g.promise({elem:a,props:v.extend({},b),opts:v.extend(!0,{specialEasing:{}},
c),originalProperties:b,originalOptions:c,startTime:Ec||M(),duration:c.duration,tweens:[],createTween:function(b,c,d){b=v.Tween(a,h.opts,b,c,h.opts.specialEasing[b]||h.opts.easing);h.tweens.push(b);return b},stop:function(b){for(var c=0,d=b?h.tweens.length:0;c<d;c++)h.tweens[c].run(1);b?g.resolveWith(a,[h,b]):g.rejectWith(a,[h,b]);return this}});c=h.props;for(O(c,h.opts.specialEasing);d<e;d++)if(b=Pb[d].call(h,a,c,h.opts))return b;V(h,c);v.isFunction(h.opts.start)&&h.opts.start.call(a,h);v.fx.timer(v.extend(f,
{anim:h,queue:h.opts.queue,elem:a}));return h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always)}function O(a,b){var c,d,e,g,f;for(c in a)if(d=v.camelCase(c),e=b[d],g=a[c],v.isArray(g)&&(e=g[1],g=a[c]=g[0]),c!==d&&(a[d]=g,delete a[c]),(f=v.cssHooks[d])&&"expand"in f)for(c in g=f.expand(g),delete a[d],g)c in a||(a[c]=g[c],b[c]=e);else b[d]=e}function N(a,b,c,d,e){return new N.prototype.init(a,b,c,d,e)}function Z(a,b){var c,d={height:a},e=0;for(b=b?1:
0;4>e;e+=2-b)c=Db[e],d["margin"+c]=d["padding"+c]=a;b&&(d.opacity=d.width=a);return d}function X(a){return v.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var P,R,K=a.document,U=a.location,Q=a.navigator,ma=a.jQuery,S=a.$,W=Array.prototype.push,la=Array.prototype.slice,sa=Array.prototype.indexOf,aa=Object.prototype.toString,ea=Object.prototype.hasOwnProperty,Ia=String.prototype.trim,v=function(a,b){return new v.fn.init(a,b,P)},Ea=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,pa=/\S/,
ya=/\s+/,ib=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Ka=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,Fa=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Oa=/^[\],:{}\s]*$/,pb=/(?:^|:|,)(?:\s*\[)+/g,qb=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,Xa=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,Ca=/^-ms-/,Ra=/-([\da-z])/gi,Va=function(a,b){return(b+"").toUpperCase()},sb=function(){K.addEventListener?(K.removeEventListener("DOMContentLoaded",sb,!1),v.ready()):"complete"===K.readyState&&(K.detachEvent("onreadystatechange",
sb),v.ready())},Ya={};v.fn=v.prototype={constructor:v,init:function(a,c,d){var e;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if("string"===typeof a){e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&3<=a.length?[null,a,null]:Ka.exec(a);if(!e||!e[1]&&c)return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a);if(e[1])return a=(c=c instanceof v?c[0]:c)&&c.nodeType?c.ownerDocument||c:K,a=v.parseHTML(e[1],a,!0),Fa.test(e[1])&&v.isPlainObject(c)&&this.attr.call(a,
c,!0),v.merge(this,a);if((c=K.getElementById(e[2]))&&c.parentNode){if(c.id!==e[2])return d.find(a);this.length=1;this[0]=c}this.context=K;this.selector=a;return this}if(v.isFunction(a))return d.ready(a);a.selector!==b&&(this.selector=a.selector,this.context=a.context);return v.makeArray(a,this)},selector:"",jquery:"1.8.2",length:0,size:function(){return this.length},toArray:function(){return la.call(this)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a,
b,c){a=v.merge(this.constructor(),a);a.prevObject=this;a.context=this.context;"find"===b?a.selector=this.selector+(this.selector?" ":"")+c:b&&(a.selector=this.selector+"."+b+"("+c+")");return a},each:function(a,b){return v.each(this,a,b)},ready:function(a){v.ready.promise().done(a);return this},eq:function(a){a=+a;return-1===a?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(la.apply(this,arguments),"slice",
la.call(arguments).join(","))},map:function(a){return this.pushStack(v.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:W,sort:[].sort,splice:[].splice};v.fn.init.prototype=v.fn;v.extend=v.fn.extend=function(){var a,c,d,e,g,f=arguments[0]||{},h=1,l=arguments.length,m=!1;"boolean"===typeof f&&(m=f,f=arguments[1]||{},h=2);"object"===typeof f||v.isFunction(f)||(f={});l===h&&(f=this,--h);for(;h<l;h++)if(null!=(a=arguments[h]))for(c in a)d=
f[c],e=a[c],f!==e&&(m&&e&&(v.isPlainObject(e)||(g=v.isArray(e)))?(g?(g=!1,d=d&&v.isArray(d)?d:[]):d=d&&v.isPlainObject(d)?d:{},f[c]=v.extend(m,d,e)):e!==b&&(f[c]=e));return f};v.extend({noConflict:function(b){a.$===v&&(a.$=S);b&&a.jQuery===v&&(a.jQuery=ma);return v},isReady:!1,readyWait:1,holdReady:function(a){a?v.readyWait++:v.ready(!0)},ready:function(a){if(!0===a?!--v.readyWait:!v.isReady){if(!K.body)return setTimeout(v.ready,1);v.isReady=!0;!0!==a&&0<--v.readyWait||(R.resolveWith(K,[v]),v.fn.trigger&&
v(K).trigger("ready").off("ready"))}},isFunction:function(a){return"function"===v.type(a)},isArray:Array.isArray||function(a){return"array"===v.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):Ya[aa.call(a)]||"object"},isPlainObject:function(a){if(!a||"object"!==v.type(a)||a.nodeType||v.isWindow(a))return!1;try{if(a.constructor&&!ea.call(a,"constructor")&&!ea.call(a.constructor.prototype,
"isPrototypeOf"))return!1}catch(c){return!1}for(var d in a);return d===b||ea.call(a,d)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw Error(a);},parseHTML:function(a,b,c){var d;if(!a||"string"!==typeof a)return null;"boolean"===typeof b&&(c=b,b=0);b=b||K;if(d=Fa.exec(a))return[b.createElement(d[1])];d=v.buildFragment([a],b,c?null:[]);return v.merge([],(d.cacheable?v.clone(d.fragment):d.fragment).childNodes)},parseJSON:function(b){if(!b||"string"!==typeof b)return null;
b=v.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(Oa.test(b.replace(qb,"@").replace(Xa,"]").replace(pb,"")))return(new Function("return "+b))();v.error("Invalid JSON: "+b)},parseXML:function(c){var d,e;if(!c||"string"!==typeof c)return null;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(g){d=b}d&&d.documentElement&&!d.getElementsByTagName("parsererror").length||v.error("Invalid XML: "+c);
return d},noop:function(){},globalEval:function(b){b&&pa.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(Ca,"ms-").replace(Ra,Va)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,c,d){var e,g=0,f=a.length,h=f===b||v.isFunction(a);if(d)if(h)for(e in a){if(!1===c.apply(a[e],d))break}else for(;g<f&&!1!==c.apply(a[g++],d););else if(h)for(e in a){if(!1===c.call(a[e],e,a[e]))break}else for(;g<f&&!1!==
c.call(a[g],g,a[g++]););return a},trim:Ia&&!Ia.call("\ufeff\u00a0")?function(a){return null==a?"":Ia.call(a)}:function(a){return null==a?"":(a+"").replace(ib,"")},makeArray:function(a,b){var c,d=b||[];null!=a&&(c=v.type(a),null==a.length||"string"===c||"function"===c||"regexp"===c||v.isWindow(a)?W.call(d,a):v.merge(d,a));return d},inArray:function(a,b,c){var d;if(b){if(sa)return sa.call(b,a,c);d=b.length;for(c=c?0>c?Math.max(0,d+c):c:0;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,
c){var d=c.length,e=a.length,g=0;if("number"===typeof d)for(;g<d;g++)a[e++]=c[g];else for(;c[g]!==b;)a[e++]=c[g++];a.length=e;return a},grep:function(a,b,c){var d,e=[],g=0,f=a.length;for(c=!!c;g<f;g++)d=!!b(a[g],g),c!==d&&e.push(a[g]);return e},map:function(a,c,d){var e,g,f=[],h=0,l=a.length;if(a instanceof v||l!==b&&"number"===typeof l&&(0<l&&a[0]&&a[l-1]||0===l||v.isArray(a)))for(;h<l;h++)e=c(a[h],h,d),null!=e&&(f[f.length]=e);else for(g in a)e=c(a[g],g,d),null!=e&&(f[f.length]=e);return f.concat.apply([],
f)},guid:1,proxy:function(a,c){var d,e;"string"===typeof c&&(d=a[c],c=a,a=d);if(!v.isFunction(a))return b;e=la.call(arguments,2);d=function(){return a.apply(c,e.concat(la.call(arguments)))};d.guid=a.guid=a.guid||v.guid++;return d},access:function(a,c,d,e,g,f,h){var l,m=null==d,p=0,n=a.length;if(d&&"object"===typeof d){for(p in d)v.access(a,c,p,d[p],1,f,e);g=1}else if(e!==b){l=h===b&&v.isFunction(e);m&&(l?(l=c,c=function(a,b,c){return l.call(v(a),c)}):(c.call(a,e),c=null));if(c)for(;p<n;p++)c(a[p],
d,l?e.call(a[p],p,c(a[p],d)):e,h);g=1}return g?a:m?c.call(a):n?c(a[0],d):f},now:function(){return(new Date).getTime()}});v.ready.promise=function(b){if(!R)if(R=v.Deferred(),"complete"===K.readyState)setTimeout(v.ready,1);else if(K.addEventListener)K.addEventListener("DOMContentLoaded",sb,!1),a.addEventListener("load",v.ready,!1);else{K.attachEvent("onreadystatechange",sb);a.attachEvent("onload",v.ready);var c=!1;try{c=null==a.frameElement&&K.documentElement}catch(d){}c&&c.doScroll&&function Sc(){if(!v.isReady){try{c.doScroll("left")}catch(a){return setTimeout(Sc,
50)}v.ready()}}()}return R.promise(b)};v.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){Ya["[object "+b+"]"]=b.toLowerCase()});P=v(K);var cb={};v.Callbacks=function(a){a="string"===typeof a?cb[a]||c(a):v.extend({},a);var d,e,g,f,h,l,m=[],p=!a.once&&[],n=function(b){d=a.memory&&b;e=!0;l=f||0;f=0;h=m.length;for(g=!0;m&&l<h;l++)if(!1===m[l].apply(b[0],b[1])&&a.stopOnFalse){d=!1;break}g=!1;m&&(p?p.length&&n(p.shift()):d?m=[]:q.disable())},q={add:function(){if(m){var b=
m.length;(function $d(b){v.each(b,function(b,c){var d=v.type(c);"function"!==d||a.unique&&q.has(c)?c&&c.length&&"string"!==d&&$d(c):m.push(c)})})(arguments);g?h=m.length:d&&(f=b,n(d))}return this},remove:function(){m&&v.each(arguments,function(a,b){for(var c;-1<(c=v.inArray(b,m,c));)m.splice(c,1),g&&(c<=h&&h--,c<=l&&l--)});return this},has:function(a){return-1<v.inArray(a,m)},empty:function(){m=[];return this},disable:function(){m=p=d=b;return this},disabled:function(){return!m},lock:function(){p=
b;d||q.disable();return this},locked:function(){return!p},fireWith:function(a,b){b=b||[];b=[a,b.slice?b.slice():b];!m||e&&!p||(g?p.push(b):n(b));return this},fire:function(){q.fireWith(this,arguments);return this},fired:function(){return!!e}};return q};v.extend({Deferred:function(a){var b=[["resolve","done",v.Callbacks("once memory"),"resolved"],["reject","fail",v.Callbacks("once memory"),"rejected"],["notify","progress",v.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){e.done(arguments).fail(arguments);
return this},then:function(){var a=arguments;return v.Deferred(function(c){v.each(b,function(b,d){var g=d[0],f=a[b];e[d[1]](v.isFunction(f)?function(){var a=f.apply(this,arguments);if(a&&v.isFunction(a.promise))a.promise().done(c.resolve).fail(c.reject).progress(c.notify);else c[g+"With"](this===e?c:this,[a])}:c[g])});a=null}).promise()},promise:function(a){return null!=a?v.extend(a,d):d}},e={};d.pipe=d.then;v.each(b,function(a,g){var f=g[2],h=g[3];d[g[1]]=f.add;h&&f.add(function(){c=h},b[a^1][2].disable,
b[2][2].lock);e[g[0]]=f.fire;e[g[0]+"With"]=f.fireWith});d.promise(e);a&&a.call(e,e);return e},when:function(a){var b=0,c=la.call(arguments),d=c.length,e=1!==d||a&&v.isFunction(a.promise)?d:0,g=1===e?a:v.Deferred(),f=function(a,b,c){return function(d){b[a]=this;c[a]=1<arguments.length?la.call(arguments):d;c===h?g.notifyWith(b,c):--e||g.resolveWith(b,c)}},h,l,m;if(1<d)for(h=Array(d),l=Array(d),m=Array(d);b<d;b++)c[b]&&v.isFunction(c[b].promise)?c[b].promise().done(f(b,m,c)).fail(g.reject).progress(f(b,
l,h)):--e;e||g.resolveWith(m,c);return g.promise()}});v.support=function(){var b,c,d,e,g,f,h,l=K.createElement("div");l.setAttribute("className","t");l.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";c=l.getElementsByTagName("*");d=l.getElementsByTagName("a")[0];d.style.cssText="top:1px;float:left;opacity:.5";if(!c||!c.length)return{};e=K.createElement("select");g=e.appendChild(K.createElement("option"));c=l.getElementsByTagName("input")[0];b={leadingWhitespace:3===
l.firstChild.nodeType,tbody:!l.getElementsByTagName("tbody").length,htmlSerialize:!!l.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:"/a"===d.getAttribute("href"),opacity:/^0.5/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:"on"===c.value,optSelected:g.selected,getSetAttribute:"t"!==l.className,enctype:!!K.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==K.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===K.compatMode,
submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1};c.checked=!0;b.noCloneChecked=c.cloneNode(!0).checked;e.disabled=!0;b.optDisabled=!g.disabled;try{delete l.test}catch(m){b.deleteExpando=!1}!l.addEventListener&&l.attachEvent&&l.fireEvent&&(l.attachEvent("onclick",d=function(){b.noCloneEvent=!1}),l.cloneNode(!0).fireEvent("onclick"),l.detachEvent("onclick",
d));c=K.createElement("input");c.value="t";c.setAttribute("type","radio");b.radioValue="t"===c.value;c.setAttribute("checked","checked");c.setAttribute("name","t");l.appendChild(c);d=K.createDocumentFragment();d.appendChild(l.lastChild);b.checkClone=d.cloneNode(!0).cloneNode(!0).lastChild.checked;b.appendChecked=c.checked;d.removeChild(c);d.appendChild(l);if(l.attachEvent)for(f in{submit:!0,change:!0,focusin:!0})c="on"+f,h=c in l,h||(l.setAttribute(c,"return;"),h="function"===typeof l[c]),b[f+"Bubbles"]=
h;v(function(){var c,d,e,g=K.getElementsByTagName("body")[0];g&&(c=K.createElement("div"),c.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",g.insertBefore(c,g.firstChild),d=K.createElement("div"),c.appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",e=d.getElementsByTagName("td"),e[0].style.cssText="padding:0;margin:0;border:0;display:none",h=0===e[0].offsetHeight,e[0].style.display="",e[1].style.display="none",b.reliableHiddenOffsets=
h&&0===e[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",b.boxSizing=4===d.offsetWidth,b.doesNotIncludeMarginInBodyOffset=1!==g.offsetTop,a.getComputedStyle&&(b.pixelPosition="1%"!==(a.getComputedStyle(d,null)||{}).top,b.boxSizingReliable="4px"===(a.getComputedStyle(d,null)||{width:"4px"}).width,e=K.createElement("div"),e.style.cssText=
d.style.cssText="padding:0;margin:0;border:0;display:block;overflow:hidden;",e.style.marginRight=e.style.width="0",d.style.width="1px",d.appendChild(e),b.reliableMarginRight=!parseFloat((a.getComputedStyle(e,null)||{}).marginRight)),"undefined"!==typeof d.style.zoom&&(d.innerHTML="",d.style.cssText="padding:0;margin:0;border:0;display:block;overflow:hidden;width:1px;padding:1px;display:inline;zoom:1",b.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.style.overflow="visible",d.innerHTML=
"<div></div>",d.firstChild.style.width="5px",b.shrinkWrapBlocks=3!==d.offsetWidth,c.style.zoom=1),g.removeChild(c))});d.removeChild(l);c=d=e=g=c=d=l=null;return b}();var Wa=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Na=/([A-Z])/g;v.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(v.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?v.cache[a[v.expando]]:a[v.expando];return!!a&&!d(a)},data:function(a,
c,d,e){if(v.acceptData(a)){var g=v.expando,f="string"===typeof c,h=a.nodeType,l=h?v.cache:a,m=h?a[g]:a[g]&&g;if(m&&l[m]&&(e||l[m].data)||!f||d!==b){m||(h?a[g]=m=v.deletedIds.pop()||v.guid++:m=g);l[m]||(l[m]={},h||(l[m].toJSON=v.noop));if("object"===typeof c||"function"===typeof c)e?l[m]=v.extend(l[m],c):l[m].data=v.extend(l[m].data,c);a=l[m];e||(a.data||(a.data={}),a=a.data);d!==b&&(a[v.camelCase(c)]=d);f?(d=a[c],null==d&&(d=a[v.camelCase(c)])):d=a;return d}}},removeData:function(a,b,c){if(v.acceptData(a)){var e,
g,f,h=a.nodeType,l=h?v.cache:a,m=h?a[v.expando]:v.expando;if(l[m]){if(b&&(e=c?l[m]:l[m].data)){v.isArray(b)||(b in e?b=[b]:(b=v.camelCase(b),b=b in e?[b]:b.split(" ")));g=0;for(f=b.length;g<f;g++)delete e[b[g]];if(!(c?d:v.isEmptyObject)(e))return}if(!c&&(delete l[m].data,!d(l[m])))return;h?v.cleanData([a],!0):v.support.deleteExpando||l!=l.window?delete l[m]:l[m]=null}}},_data:function(a,b,c){return v.data(a,b,c,!0)},acceptData:function(a){var b=a.nodeName&&v.noData[a.nodeName.toLowerCase()];return!b||
!0!==b&&a.getAttribute("classid")===b}});v.fn.extend({data:function(a,c){var d,g,f,h,l,m=this[0],p=0,n=null;if(a===b){if(this.length&&(n=v.data(m),1===m.nodeType&&!v._data(m,"parsedAttrs"))){f=m.attributes;for(l=f.length;p<l;p++)h=f[p].name,h.indexOf("data-")||(h=v.camelCase(h.substring(5)),e(m,h,n[h]));v._data(m,"parsedAttrs",!0)}return n}if("object"===typeof a)return this.each(function(){v.data(this,a)});d=a.split(".",2);d[1]=d[1]?"."+d[1]:"";g=d[1]+"!";return v.access(this,function(c){if(c===b)return n=
this.triggerHandler("getData"+g,[d[0]]),n===b&&m&&(n=v.data(m,a),n=e(m,a,n)),n===b&&d[1]?this.data(d[0]):n;d[1]=c;this.each(function(){var b=v(this);b.triggerHandler("setData"+g,d);v.data(this,a,c);b.triggerHandler("changeData"+g,d)})},null,c,1<arguments.length,null,!1)},removeData:function(a){return this.each(function(){v.removeData(this,a)})}});v.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=v._data(a,b),c&&(!d||v.isArray(c)?d=v._data(a,b,v.makeArray(c)):d.push(c)),d||[]},
dequeue:function(a,b){b=b||"fx";var c=v.queue(a,b),d=c.length,e=c.shift(),g=v._queueHooks(a,b),f=function(){v.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--);e&&("fx"===b&&c.unshift("inprogress"),delete g.stop,e.call(a,f,g));!d&&g&&g.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return v._data(a,c)||v._data(a,c,{empty:v.Callbacks("once memory").add(function(){v.removeData(a,b+"queue",!0);v.removeData(a,c,!0)})})}});v.fn.extend({queue:function(a,c){var d=2;"string"!==typeof a&&(c=
a,a="fx",d--);return arguments.length<d?v.queue(this[0],a):c===b?this:this.each(function(){var b=v.queue(this,a,c);v._queueHooks(this,a);"fx"===a&&"inprogress"!==b[0]&&v.dequeue(this,a)})},dequeue:function(a){return this.each(function(){v.dequeue(this,a)})},delay:function(a,b){a=v.fx?v.fx.speeds[a]||a:a;return this.queue(b||"fx",function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var d,e=1,g=v.Deferred(),
f=this,h=this.length,l=function(){--e||g.resolveWith(f,[f])};"string"!==typeof a&&(c=a,a=b);for(a=a||"fx";h--;)(d=v._data(f[h],a+"queueHooks"))&&d.empty&&(e++,d.empty.add(l));l();return g.promise(c)}});var na,Aa,db,Ma=/[\t\r\n]/g,Pa=/\r/g,qa=/^(?:button|input)$/i,Kb=/^(?:button|input|object|select|textarea)$/i,eb=/^a(?:rea|)$/i,jb=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,mb=v.support.getSetAttribute;v.fn.extend({attr:function(a,
b){return v.access(this,v.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){v.removeAttr(this,a)})},prop:function(a,b){return v.access(this,v.prop,a,b,1<arguments.length)},removeProp:function(a){a=v.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,g,f,h;if(v.isFunction(a))return this.each(function(b){v(this).addClass(a.call(this,b,this.className))});if(a&&"string"===typeof a)for(b=a.split(ya),c=0,d=
this.length;c<d;c++)if(e=this[c],1===e.nodeType)if(e.className||1!==b.length){g=" "+e.className+" ";f=0;for(h=b.length;f<h;f++)0>g.indexOf(" "+b[f]+" ")&&(g+=b[f]+" ");e.className=v.trim(g)}else e.className=a;return this},removeClass:function(a){var c,d,e,g,f,h,l;if(v.isFunction(a))return this.each(function(b){v(this).removeClass(a.call(this,b,this.className))});if(a&&"string"===typeof a||a===b)for(c=(a||"").split(ya),h=0,l=this.length;h<l;h++)if(e=this[h],1===e.nodeType&&e.className){d=(" "+e.className+
" ").replace(Ma," ");g=0;for(f=c.length;g<f;g++)for(;0<=d.indexOf(" "+c[g]+" ");)d=d.replace(" "+c[g]+" "," ");e.className=a?v.trim(d):""}return this},toggleClass:function(a,b){var c=typeof a,d="boolean"===typeof b;return v.isFunction(a)?this.each(function(c){v(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var e,g=0,f=v(this),h=b,l=a.split(ya);e=l[g++];)h=d?h:!f.hasClass(e),f[h?"addClass":"removeClass"](e);else if("undefined"===c||"boolean"===c)this.className&&
v._data(this,"__className__",this.className),this.className=this.className||!1===a?"":v._data(this,"__className__")||""})},hasClass:function(a){a=" "+a+" ";for(var b=0,c=this.length;b<c;b++)if(1===this[b].nodeType&&0<=(" "+this[b].className+" ").replace(Ma," ").indexOf(a))return!0;return!1},val:function(a){var c,d,e,g=this[0];if(arguments.length)return e=v.isFunction(a),this.each(function(d){var g=v(this);1===this.nodeType&&(d=e?a.call(this,d,g.val()):a,null==d?d="":"number"===typeof d?d+="":v.isArray(d)&&
(d=v.map(d,function(a){return null==a?"":a+""})),c=v.valHooks[this.type]||v.valHooks[this.nodeName.toLowerCase()],c&&"set"in c&&c.set(this,d,"value")!==b||(this.value=d))});if(g){if((c=v.valHooks[g.type]||v.valHooks[g.nodeName.toLowerCase()])&&"get"in c&&(d=c.get(g,"value"))!==b)return d;d=g.value;return"string"===typeof d?d.replace(Pa,""):null==d?"":d}}});v.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d=
a.selectedIndex,e=[],g=a.options,f="select-one"===a.type;if(0>d)return null;a=f?d:0;for(c=f?d+1:g.length;a<c;a++)if(b=g[a],!(!b.selected||(v.support.optDisabled?b.disabled:null!==b.getAttribute("disabled"))||b.parentNode.disabled&&v.nodeName(b.parentNode,"optgroup"))){b=v(b).val();if(f)return b;e.push(b)}return f&&!e.length&&g.length?v(g[d]).val():e},set:function(a,b){var c=v.makeArray(b);v(a).find("option").each(function(){this.selected=0<=v.inArray(v(this).val(),c)});c.length||(a.selectedIndex=
-1);return c}}},attrFn:{},attr:function(a,c,d,e){var g,f,h=a.nodeType;if(a&&3!==h&&8!==h&&2!==h){if(e&&v.isFunction(v.fn[c]))return v(a)[c](d);if("undefined"===typeof a.getAttribute)return v.prop(a,c,d);if(e=1!==h||!v.isXMLDoc(a))c=c.toLowerCase(),f=v.attrHooks[c]||(jb.test(c)?Aa:na);if(d!==b)if(null===d)v.removeAttr(a,c);else{if(f&&"set"in f&&e&&(g=f.set(a,d,c))!==b)return g;a.setAttribute(c,d+"");return d}else{if(f&&"get"in f&&e&&null!==(g=f.get(a,c)))return g;g=a.getAttribute(c);return null===
g?b:g}}},removeAttr:function(a,b){var c,d,e,g,f=0;if(b&&1===a.nodeType)for(d=b.split(ya);f<d.length;f++)if(e=d[f])c=v.propFix[e]||e,(g=jb.test(e))||v.attr(a,e,""),a.removeAttribute(mb?e:c),g&&c in a&&(a[c]=!1)},attrHooks:{type:{set:function(a,b){if(qa.test(a.nodeName)&&a.parentNode)v.error("type property can't be changed");else if(!v.support.radioValue&&"radio"===b&&v.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b);c&&(a.value=c);return b}}},value:{get:function(a,b){return na&&v.nodeName(a,
"button")?na.get(a,b):b in a?a.value:null},set:function(a,b,c){if(na&&v.nodeName(a,"button"))return na.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,g,f;f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f){if(f=1!==f||!v.isXMLDoc(a))c=v.propFix[c]||
c,g=v.propHooks[c];return d!==b?g&&"set"in g&&(e=g.set(a,d,c))!==b?e:a[c]=d:g&&"get"in g&&null!==(e=g.get(a,c))?e:a[c]}},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):Kb.test(a.nodeName)||eb.test(a.nodeName)&&a.href?0:b}}}});Aa={get:function(a,c){var d,e=v.prop(a,c);return!0===e||"boolean"!==typeof e&&(d=a.getAttributeNode(c))&&!1!==d.nodeValue?c.toLowerCase():b},set:function(a,b,c){!1===b?v.removeAttr(a,c):(b=v.propFix[c]||c,
b in a&&(a[b]=!0),a.setAttribute(c,c.toLowerCase()));return c}};mb||(db={name:!0,id:!0,coords:!0},na=v.valHooks.button={get:function(a,c){var d;return(d=a.getAttributeNode(c))&&(db[c]?""!==d.value:d.specified)?d.value:b},set:function(a,b,c){var d=a.getAttributeNode(c);d||(d=K.createAttribute(c),a.setAttributeNode(d));return d.value=b+""}},v.each(["width","height"],function(a,b){v.attrHooks[b]=v.extend(v.attrHooks[b],{set:function(a,c){if(""===c)return a.setAttribute(b,"auto"),c}})}),v.attrHooks.contenteditable=
{get:na.get,set:function(a,b,c){""===b&&(b="false");na.set(a,b,c)}});v.support.hrefNormalized||v.each(["href","src","width","height"],function(a,c){v.attrHooks[c]=v.extend(v.attrHooks[c],{get:function(a){a=a.getAttribute(c,2);return null===a?b:a}})});v.support.style||(v.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=b+""}});v.support.optSelected||(v.propHooks.selected=v.extend(v.propHooks.selected,{get:function(a){if(a=a.parentNode)a.selectedIndex,
a.parentNode&&a.parentNode.selectedIndex;return null}}));v.support.enctype||(v.propFix.enctype="encoding");v.support.checkOn||v.each(["radio","checkbox"],function(){v.valHooks[this]={get:function(a){return null===a.getAttribute("value")?"on":a.value}}});v.each(["radio","checkbox"],function(){v.valHooks[this]=v.extend(v.valHooks[this],{set:function(a,b){if(v.isArray(b))return a.checked=0<=v.inArray(v(a).val(),b)}})});var ka=/^(?:textarea|input|select)$/i,Za=/^([^\.]*|)(?:\.(.+)|)$/,xa=/(?:^|\s)hover(\.\S+|)\b/,
ub=/^key/,Eb=/^(?:mouse|contextmenu)|click/,Ja=/^(?:focusinfocus|focusoutblur)$/,oa=function(a){return v.event.special.hover?a:a.replace(xa,"mouseenter$1 mouseleave$1")};v.event={add:function(a,c,d,e,g){var f,h,l,m,p,n,q,r,t;if(3!==a.nodeType&&8!==a.nodeType&&c&&d&&(f=v._data(a))){d.handler&&(q=d,d=q.handler,g=q.selector);d.guid||(d.guid=v.guid++);l=f.events;l||(f.events=l={});h=f.handle;h||(f.handle=h=function(a){return"undefined"===typeof v||a&&v.event.triggered===a.type?b:v.event.dispatch.apply(h.elem,
arguments)},h.elem=a);c=v.trim(oa(c)).split(" ");for(f=0;f<c.length;f++)m=Za.exec(c[f])||[],p=m[1],n=(m[2]||"").split(".").sort(),t=v.event.special[p]||{},p=(g?t.delegateType:t.bindType)||p,t=v.event.special[p]||{},m=v.extend({type:p,origType:m[1],data:e,handler:d,guid:d.guid,selector:g,needsContext:g&&v.expr.match.needsContext.test(g),namespace:n.join(".")},q),r=l[p],r||(r=l[p]=[],r.delegateCount=0,t.setup&&!1!==t.setup.call(a,e,n,h)||(a.addEventListener?a.addEventListener(p,h,!1):a.attachEvent&&
a.attachEvent("on"+p,h))),t.add&&(t.add.call(a,m),m.handler.guid||(m.handler.guid=d.guid)),g?r.splice(r.delegateCount++,0,m):r.push(m),v.event.global[p]=!0;a=null}},global:{},remove:function(a,b,c,d,e){var g,f,h,l,m,p,n,q,r,t,u=v.hasData(a)&&v._data(a);if(u&&(n=u.events)){b=v.trim(oa(b||"")).split(" ");for(g=0;g<b.length;g++)if(f=Za.exec(b[g])||[],h=l=f[1],f=f[2],h){q=v.event.special[h]||{};h=(d?q.delegateType:q.bindType)||h;r=n[h]||[];m=r.length;f=f?new RegExp("(^|\\.)"+f.split(".").sort().join("\\.(?:.*\\.|)")+
"(\\.|$)"):null;for(p=0;p<r.length;p++)t=r[p],!e&&l!==t.origType||c&&c.guid!==t.guid||f&&!f.test(t.namespace)||d&&d!==t.selector&&("**"!==d||!t.selector)||(r.splice(p--,1),t.selector&&r.delegateCount--,q.remove&&q.remove.call(a,t));0===r.length&&m!==r.length&&(q.teardown&&!1!==q.teardown.call(a,f,u.handle)||v.removeEvent(a,h,u.handle),delete n[h])}else for(h in n)v.event.remove(a,h+b[g],c,d,!0);v.isEmptyObject(n)&&(delete u.handle,v.removeData(a,"events",!0))}},customEvent:{getData:!0,setData:!0,
changeData:!0},trigger:function(c,d,e,g){if(!e||3!==e.nodeType&&8!==e.nodeType){var f,h,l,m,p,n,q=c.type||c;l=[];if(!Ja.test(q+v.event.triggered)&&(0<=q.indexOf("!")&&(q=q.slice(0,-1),f=!0),0<=q.indexOf(".")&&(l=q.split("."),q=l.shift(),l.sort()),e&&!v.event.customEvent[q]||v.event.global[q]))if(c="object"===typeof c?c[v.expando]?c:new v.Event(q,c):new v.Event(q),c.type=q,c.isTrigger=!0,c.exclusive=f,c.namespace=l.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+l.join("\\.(?:.*\\.|)")+"(\\.|$)"):
null,l=0>q.indexOf(":")?"on"+q:"",e){if(c.result=b,c.target||(c.target=e),d=null!=d?v.makeArray(d):[],d.unshift(c),m=v.event.special[q]||{},!m.trigger||!1!==m.trigger.apply(e,d)){n=[[e,m.bindType||q]];if(!g&&!m.noBubble&&!v.isWindow(e)){p=m.delegateType||q;f=Ja.test(p+q)?e:e.parentNode;for(h=e;f;f=f.parentNode)n.push([f,p]),h=f;h===(e.ownerDocument||K)&&n.push([h.defaultView||h.parentWindow||a,p])}for(h=0;h<n.length&&!c.isPropagationStopped();h++)f=n[h][0],c.type=n[h][1],(p=(v._data(f,"events")||
{})[c.type]&&v._data(f,"handle"))&&p.apply(f,d),(p=l&&f[l])&&v.acceptData(f)&&p.apply&&!1===p.apply(f,d)&&c.preventDefault();c.type=q;g||c.isDefaultPrevented()||m._default&&!1!==m._default.apply(e.ownerDocument,d)||"click"===q&&v.nodeName(e,"a")||!v.acceptData(e)||!l||!e[q]||("focus"===q||"blur"===q)&&0===c.target.offsetWidth||v.isWindow(e)||((h=e[l])&&(e[l]=null),v.event.triggered=q,e[q](),v.event.triggered=b,h&&(e[l]=h));return c.result}}else for(h in e=v.cache,e)e[h].events&&e[h].events[q]&&v.event.trigger(c,
d,e[h].handle.elem,!0)}},dispatch:function(c){c=v.event.fix(c||a.event);var d,e,g,f,h,l,m=(v._data(this,"events")||{})[c.type]||[],p=m.delegateCount,n=la.call(arguments),q=!c.exclusive&&!c.namespace,r=v.event.special[c.type]||{},t=[];n[0]=c;c.delegateTarget=this;if(!r.preDispatch||!1!==r.preDispatch.call(this,c)){if(p&&(!c.button||"click"!==c.type))for(e=c.target;e!=this;e=e.parentNode||this)if(!0!==e.disabled||"click"!==c.type){f={};h=[];for(d=0;d<p;d++)g=m[d],l=g.selector,f[l]===b&&(f[l]=g.needsContext?
0<=v(l,this).index(e):v.find(l,this,null,[e]).length),f[l]&&h.push(g);h.length&&t.push({elem:e,matches:h})}m.length>p&&t.push({elem:this,matches:m.slice(p)});for(d=0;d<t.length&&!c.isPropagationStopped();d++)for(f=t[d],c.currentTarget=f.elem,e=0;e<f.matches.length&&!c.isImmediatePropagationStopped();e++)if(g=f.matches[e],q||!c.namespace&&!g.namespace||c.namespace_re&&c.namespace_re.test(g.namespace))c.data=g.data,c.handleObj=g,g=((v.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,n),
g!==b&&(c.result=g,!1===g&&(c.preventDefault(),c.stopPropagation()));r.postDispatch&&r.postDispatch.call(this,c);return c.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,b){null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
filter:function(a,c){var d,e,g=c.button,f=c.fromElement;null==a.pageX&&null!=c.clientX&&(d=a.target.ownerDocument||K,e=d.documentElement,d=d.body,a.pageX=c.clientX+(e&&e.scrollLeft||d&&d.scrollLeft||0)-(e&&e.clientLeft||d&&d.clientLeft||0),a.pageY=c.clientY+(e&&e.scrollTop||d&&d.scrollTop||0)-(e&&e.clientTop||d&&d.clientTop||0));!a.relatedTarget&&f&&(a.relatedTarget=f===a.target?c.toElement:f);a.which||g===b||(a.which=g&1?1:g&2?3:g&4?2:0);return a}},fix:function(a){if(a[v.expando])return a;var b,
c,d=a,e=v.event.fixHooks[a.type]||{},g=e.props?this.props.concat(e.props):this.props;a=v.Event(d);for(b=g.length;b;)c=g[--b],a[c]=d[c];a.target||(a.target=d.srcElement||K);3===a.target.nodeType&&(a.target=a.target.parentNode);a.metaKey=!!a.metaKey;return e.filter?e.filter(a,d):a},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){v.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=
null)}}},simulate:function(a,b,c,d){a=v.extend(new v.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?v.event.trigger(a,null,b):v.event.dispatch.call(b,a);a.isDefaultPrevented()&&c.preventDefault()}};v.event.handle=v.event.dispatch;v.removeEvent=K.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){b="on"+b;a.detachEvent&&("undefined"===typeof a[b]&&(a[b]=null),a.detachEvent(b,c))};v.Event=function(a,b){if(!(this instanceof v.Event))return new v.Event(a,
b);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||!1===a.returnValue||a.getPreventDefault&&a.getPreventDefault()?n:f):this.type=a;b&&v.extend(this,b);this.timeStamp=a&&a.timeStamp||v.now();this[v.expando]=!0};v.Event.prototype={preventDefault:function(){this.isDefaultPrevented=n;var a=this.originalEvent;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=n;var a=this.originalEvent;a&&(a.stopPropagation&&
a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=n;this.stopPropagation()},isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f};v.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){v.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=a.relatedTarget,e=a.handleObj;if(!d||d!==this&&!v.contains(this,d))a.type=e.origType,c=e.handler.apply(this,arguments),a.type=b;return c}}});v.support.submitBubbles||
(v.event.special.submit={setup:function(){if(v.nodeName(this,"form"))return!1;v.event.add(this,"click._submit keypress._submit",function(a){a=a.target;(a=v.nodeName(a,"input")||v.nodeName(a,"button")?a.form:b)&&!v._data(a,"_submit_attached")&&(v.event.add(a,"submit._submit",function(a){a._submit_bubble=!0}),v._data(a,"_submit_attached",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&v.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(v.nodeName(this,
"form"))return!1;v.event.remove(this,"._submit")}});v.support.changeBubbles||(v.event.special.change={setup:function(){if(ka.test(this.nodeName)){if("checkbox"===this.type||"radio"===this.type)v.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),v.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1);v.event.simulate("change",this,a,!0)});return!1}v.event.add(this,"beforeactivate._change",
function(a){a=a.target;ka.test(a.nodeName)&&!v._data(a,"_change_attached")&&(v.event.add(a,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||v.event.simulate("change",this.parentNode,a,!0)}),v._data(a,"_change_attached",!0))})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type)return a.handleObj.handler.apply(this,arguments)},teardown:function(){v.event.remove(this,"._change");return!ka.test(this.nodeName)}});
v.support.focusinBubbles||v.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){v.event.simulate(b,a.target,v.event.fix(a),!0)};v.event.special[b]={setup:function(){0===c++&&K.addEventListener(a,d,!0)},teardown:function(){0===--c&&K.removeEventListener(a,d,!0)}}});v.fn.extend({on:function(a,c,d,e,g){var h,l;if("object"===typeof a){"string"!==typeof c&&(d=d||c,c=b);for(l in a)this.on(l,c,d,a[l],g);return this}null==d&&null==e?(e=c,d=c=b):null==e&&("string"===typeof c?(e=d,d=
b):(e=d,d=c,c=b));if(!1===e)e=f;else if(!e)return this;1===g&&(h=e,e=function(a){v().off(a);return h.apply(this,arguments)},e.guid=h.guid||(h.guid=v.guid++));return this.each(function(){v.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){var e;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,v(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"===typeof a){for(e in a)this.off(e,c,a[e]);
return this}if(!1===c||"function"===typeof c)d=c,c=b;!1===d&&(d=f);return this.each(function(){v.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){v(this.context).on(a,this.selector,b,c);return this},die:function(a,b){v(this.context).off(a,this.selector||"**",b);return this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,
a||"**",c)},trigger:function(a,b){return this.each(function(){v.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0])return v.event.trigger(a,b,this[0],!0)},toggle:function(a){var b=arguments,c=a.guid||v.guid++,d=0,e=function(c){var e=(v._data(this,"lastToggle"+a.guid)||0)%d;v._data(this,"lastToggle"+a.guid,e+1);c.preventDefault();return b[e].apply(this,arguments)||!1};for(e.guid=c;d<b.length;)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||
a)}});v.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){v.fn[b]=function(a,c){null==c&&(c=a,a=null);return 0<arguments.length?this.on(b,null,a,c):this.trigger(b)};ub.test(b)&&(v.event.fixHooks[b]=v.event.keyHooks);Eb.test(b)&&(v.event.fixHooks[b]=v.event.mouseHooks)});(function(a,b){function c(a,b,d,e){d=d||[];b=b||
Ua;var g,f,h,l,m=b.nodeType;if(!a||"string"!==typeof a)return d;if(1!==m&&9!==m)return[];h=B(b);if(!h&&!e&&(g=xa.exec(a)))if(l=g[1])if(9===m)if((f=b.getElementById(l))&&f.parentNode){if(f.id===l)return d.push(f),d}else return d;else{if(b.ownerDocument&&(f=b.ownerDocument.getElementById(l))&&A(b,f)&&f.id===l)return d.push(f),d}else{if(g[2])return T.apply(d,Sb.call(b.getElementsByTagName(a),0)),d;if((l=g[3])&&U&&b.getElementsByClassName)return T.apply(d,Sb.call(b.getElementsByClassName(l),0)),d}return t(a.replace(P,
"$1"),b,d,e,h)}function d(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}}function e(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function g(a){return zb(function(b){b=+b;return zb(function(c,d){for(var e,g=a([],c.length,b),f=g.length;f--;)c[e=g[f]]&&(c[e]=!(d[e]=c[e]))})})}function f(a,b,c){if(a===b)return c;for(a=a.nextSibling;a;){if(a===b)return-1;a=a.nextSibling}return 1}function h(a,b){var d,e,g,f,l,m,p;if(l=Z[Ba][a])return b?
0:l.slice(0);l=a;m=[];for(p=w.preFilter;l;){if(!d||(e=aa.exec(l)))e&&(l=l.slice(e[0].length)),m.push(g=[]);d=!1;if(e=X.exec(l))g.push(d=new J(e.shift())),l=l.slice(d.length),d.type=e[0].replace(P," ");for(f in w.filter)!(e=ob[f].exec(l))||p[f]&&!(e=p[f](e,Ua,!0))||(g.push(d=new J(e.shift())),l=l.slice(d.length),d.type=f,d.matches=e);if(!d)break}return b?l.length:l?c.error(a):Z(a,m).slice(0)}function l(a,b,c){var d=b.dir,e=c&&"parentNode"===b.dir,g=V++;return b.first?function(b,c,g){for(;b=b[d];)if(e||
1===b.nodeType)return a(b,c,g)}:function(b,c,f){if(!f)for(var h,l=M+" "+g+" ",m=l+y;b=b[d];){if(e||1===b.nodeType){if((h=b[Ba])===m)return b.sizset;if("string"===typeof h&&0===h.indexOf(l)){if(b.sizset)return b}else{b[Ba]=m;if(a(b,c,f))return b.sizset=!0,b;b.sizset=!1}}}else for(;b=b[d];)if((e||1===b.nodeType)&&a(b,c,f))return b}}function m(a){return 1<a.length?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function p(a,b,c,d,e){for(var g,f=[],h=0,l=a.length,m=null!=
b;h<l;h++)if(g=a[h])if(!c||c(g,d,e))f.push(g),m&&b.push(h);return f}function n(a,b,d,e,g,f){e&&!e[Ba]&&(e=n(e));g&&!g[Ba]&&(g=n(g,f));return zb(function(f,h,l,m){if(!f||!g){var n,q,r=[],t=[],u=h.length;if(!(q=f)){q=b||"*";var y=l.nodeType?[l]:l,x=[];n=0;for(var w=y.length;n<w;n++)c(q,y[n],x,f);q=x}y=!a||!f&&b?q:p(q,r,a,l,m);x=d?g||(f?a:u||e)?[]:h:y;d&&d(y,x,l,m);if(e)for(q=p(x,t),e(q,[],l,m),l=q.length;l--;)if(n=q[l])x[t[l]]=!(y[t[l]]=n);if(f)for(l=a&&x.length;l--;){if(n=x[l])f[r[l]]=!(h[r[l]]=n)}else x=
p(x===h?x.splice(u,x.length):x),g?g(null,h,x,m):T.apply(h,x)}})}function q(a){var b,c,d,e=a.length,g=w.relative[a[0].type];c=g||w.relative[" "];for(var f=g?1:0,h=l(function(a){return a===b},c,!0),p=l(function(a){return-1<gc.call(b,a)},c,!0),r=[function(a,c,d){return!g&&(d||c!==D)||((b=c).nodeType?h(a,c,d):p(a,c,d))}];f<e;f++)if(c=w.relative[a[f].type])r=[l(m(r),c)];else{c=w.filter[a[f].type].apply(null,a[f].matches);if(c[Ba]){for(d=++f;d<e&&!w.relative[a[d].type];d++);return n(1<f&&m(r),1<f&&a.slice(0,
f-1).join("").replace(P,"$1"),c,f<d&&q(a.slice(f,d)),d<e&&q(a=a.slice(d)),d<e&&a.join(""))}r.push(c)}return m(r)}function r(a,b){var d=0<b.length,e=0<a.length,g=function(f,h,l,m,n){var q,r,t=[],u=0,x="0",z=f&&[],B=null!=n,A=D,Y=f||e&&w.find.TAG("*",n&&h.parentNode||h),G=M+=null==A?1:Math.E;B&&(D=h!==Ua&&h,y=g.el);for(;null!=(n=Y[x]);x++){if(e&&n){for(q=0;r=a[q];q++)if(r(n,h,l)){m.push(n);break}B&&(M=G,y=++g.el)}d&&((n=!r&&n)&&u--,f&&z.push(n))}u+=x;if(d&&x!==u){for(q=0;r=b[q];q++)r(z,t,h,l);if(f){if(0<
u)for(;x--;)z[x]||t[x]||(t[x]=H.call(m));t=p(t)}T.apply(m,t);B&&!f&&0<t.length&&1<u+b.length&&c.uniqueSort(m)}B&&(M=G,D=A);return z};g.el=0;return d?zb(g):g}function t(a,b,c,d,e){var g,f,l,m,p=h(a);if(!d&&1===p.length){f=p[0]=p[0].slice(0);if(2<f.length&&"ID"===(l=f[0]).type&&9===b.nodeType&&!e&&w.relative[f[1].type]){b=w.find.ID(l.matches[0].replace(ea,""),b,e)[0];if(!b)return c;a=a.slice(f.shift().length)}for(g=ob.POS.test(a)?-1:f.length-1;0<=g;g--){l=f[g];if(w.relative[m=l.type])break;if(m=w.find[m])if(d=
m(l.matches[0].replace(ea,""),pc.test(f[0].type)&&b.parentNode||b,e)){f.splice(g,1);a=d.length&&f.join("");if(!a)return T.apply(c,Sb.call(d,0)),c;break}}}Y(a,p)(d,b,e,c,pc.test(a));return c}function u(){}var y,x,w,z,B,A,Y,G,C,D,L=!0,Ba=("sizcache"+Math.random()).replace(".",""),J=String,Ua=a.document,nb=Ua.documentElement,M=0,V=0,H=[].pop,T=[].push,Sb=[].slice,gc=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1},zb=function(a,b){a[Ba]=null==b||b;return a},
O=function(){var a={},b=[];return zb(function(c,d){b.push(c)>w.cacheLength&&delete a[b.shift()];return a[c]=d},a)},N=O(),Z=O(),Ub=O(),O="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[-\\w]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+"(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+".replace("w","w#")+")|)|)[\\x20\\t\\r\\n\\f]*\\]",sa=":((?:\\\\.|[-\\w]|[^\\x00-\\xa0])+)(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+O+")|[^:]|\\\\.)*|.*))\\)|)",P=
RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),aa=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,X=/^[\x20\t\r\n\f]*([\x20\t\r\n\f>+~])[\x20\t\r\n\f]*/,R=new RegExp(sa),xa=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,pc=/[\x20\t\r\n\f]*[+~]/,$a=/h\d/i,K=/input|select|textarea|button/i,ea=/\\(?!\\)/g,ob={ID:/^#((?:\\.|[-\w]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[-\w]|[^\x00-\xa0])+)/,NAME:/^\[name=['"]?((?:\\.|[-\w]|[^\x00-\xa0])+)['"]?\]/,TAG:new RegExp("^("+"(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+".replace("w",
"w*")+")"),ATTR:new RegExp("^"+O),PSEUDO:new RegExp("^"+sa),POS:/:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i,CHILD:/^:(only|nth|first|last)-child(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},Oa=function(a){var b=Ua.createElement("div");try{return a(b)}catch(c){return!1}finally{}},
O=Oa(function(a){a.appendChild(Ua.createComment(""));return!a.getElementsByTagName("*").length}),S=Oa(function(a){a.innerHTML="<a href='#'></a>";return a.firstChild&&"undefined"!==typeof a.firstChild.getAttribute&&"#"===a.firstChild.getAttribute("href")}),Q=Oa(function(a){a.innerHTML="<select></select>";a=typeof a.lastChild.getAttribute("multiple");return"boolean"!==a&&"string"!==a}),U=Oa(function(a){a.innerHTML="<div class='hidden e'></div><div class='hidden'></div>";if(!a.getElementsByClassName||
!a.getElementsByClassName("e").length)return!1;a.lastChild.className="e";return 2===a.getElementsByClassName("e").length}),pb=Oa(function(a){a.id=Ba+0;a.innerHTML="<a name='"+Ba+"'></a><div name='"+Ba+"'></div>";nb.insertBefore(a,nb.firstChild);var b=Ua.getElementsByName&&Ua.getElementsByName(Ba).length===2+Ua.getElementsByName(Ba+0).length;x=!Ua.getElementById(Ba);nb.removeChild(a);return b});try{Sb.call(nb.childNodes,0)[0].nodeType}catch(Ia){Sb=function(a){for(var b,c=[];b=this[a];a++)c.push(b);
return c}}c.matches=function(a,b){return c(a,null,null,b)};c.matchesSelector=function(a,b){return 0<c(b,null,null,[a]).length};z=c.getText=function(a){var b,c="",d=0;if(b=a.nodeType)if(1===b||9===b||11===b){if("string"===typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=z(a)}else{if(3===b||4===b)return a.nodeValue}else for(;b=a[d];d++)c+=z(b);return c};B=c.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1};A=c.contains=nb.contains?
function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!!(d&&1===d.nodeType&&c.contains&&c.contains(d))}:nb.compareDocumentPosition?function(a,b){return b&&!!(a.compareDocumentPosition(b)&16)}:function(a,b){for(;b=b.parentNode;)if(b===a)return!0;return!1};c.attr=function(a,b){var c,d=B(a);d||(b=b.toLowerCase());return(c=w.attrHandle[b])?c(a):d||Q?a.getAttribute(b):(c=a.getAttributeNode(b))?"boolean"===typeof a[b]?a[b]?b:null:c.specified?c.value:null:null};w=c.selectors=
{cacheLength:50,createPseudo:zb,match:ob,attrHandle:S?{}:{href:function(a){return a.getAttribute("href",2)},type:function(a){return a.getAttribute("type")}},find:{ID:x?function(a,b,c){if("undefined"!==typeof b.getElementById&&!c)return(a=b.getElementById(a))&&a.parentNode?[a]:[]}:function(a,c,d){if("undefined"!==typeof c.getElementById&&!d)return(c=c.getElementById(a))?c.id===a||"undefined"!==typeof c.getAttributeNode&&c.getAttributeNode("id").value===a?[c]:b:[]},TAG:O?function(a,b){if("undefined"!==
typeof b.getElementsByTagName)return b.getElementsByTagName(a)}:function(a,b){var c=b.getElementsByTagName(a);if("*"===a){for(var d,e=[],g=0;d=c[g];g++)1===d.nodeType&&e.push(d);return e}return c},NAME:pb&&function(a,b){if("undefined"!==typeof b.getElementsByName)return b.getElementsByName(name)},CLASS:U&&function(a,b,c){if("undefined"!==typeof b.getElementsByClassName&&!c)return b.getElementsByClassName(a)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",
first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){a[1]=a[1].replace(ea,"");a[3]=(a[4]||a[5]||"").replace(ea,"");"~="===a[2]&&(a[3]=" "+a[3]+" ");return a.slice(0,4)},CHILD:function(a){a[1]=a[1].toLowerCase();"nth"===a[1]?(a[2]||c.error(a[0]),a[3]=+(a[3]?a[4]+(a[5]||1):2*("even"===a[2]||"odd"===a[2])),a[4]=+(a[6]+a[7]||"odd"===a[2])):a[2]&&c.error(a[0]);return a},PSEUDO:function(a){var b,c;if(ob.CHILD.test(a[0]))return null;if(a[3])a[2]=a[3];else if(b=a[4])R.test(b)&&(c=h(b,!0))&&
(c=b.indexOf(")",b.length-c)-b.length)&&(b=b.slice(0,c),a[0]=a[0].slice(0,c)),a[2]=b;return a.slice(0,3)}},filter:{ID:x?function(a){a=a.replace(ea,"");return function(b){return b.getAttribute("id")===a}}:function(a){a=a.replace(ea,"");return function(b){return(b="undefined"!==typeof b.getAttributeNode&&b.getAttributeNode("id"))&&b.value===a}},TAG:function(a){if("*"===a)return function(){return!0};a=a.replace(ea,"").toLowerCase();return function(b){return b.nodeName&&b.nodeName.toLowerCase()===a}},
CLASS:function(a){var b=N[Ba][a];b||(b=N(a,new RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)")));return function(a){return b.test(a.className||"undefined"!==typeof a.getAttribute&&a.getAttribute("class")||"")}},ATTR:function(a,b,d){return function(e,g){var f=c.attr(e,a);if(null==f)return"!="===b;if(!b)return!0;f+="";return"="===b?f===d:"!="===b?f!==d:"^="===b?d&&0===f.indexOf(d):"*="===b?d&&-1<f.indexOf(d):"$="===b?d&&f.substr(f.length-d.length)===d:"~="===b?-1<(" "+f+" ").indexOf(d):
"|="===b?f===d||f.substr(0,d.length+1)===d+"-":!1}},CHILD:function(a,b,c,d){return"nth"===a?function(a){var b,e;b=a.parentNode;if(1===c&&0===d)return!0;if(b)for(e=0,b=b.firstChild;b&&(1!==b.nodeType||(e++,a!==b));b=b.nextSibling);e-=d;return e===c||0===e%c&&0<=e/c}:function(b){var c=b;switch(a){case "only":case "first":for(;c=c.previousSibling;)if(1===c.nodeType)return!1;if("first"===a)return!0;c=b;case "last":for(;c=c.nextSibling;)if(1===c.nodeType)return!1;return!0}}},PSEUDO:function(a,b){var d,
e=w.pseudos[a]||w.setFilters[a.toLowerCase()]||c.error("unsupported pseudo: "+a);return e[Ba]?e(b):1<e.length?(d=[a,a,"",b],w.setFilters.hasOwnProperty(a.toLowerCase())?zb(function(a,c){for(var d,g=e(a,b),f=g.length;f--;)d=gc.call(a,g[f]),a[d]=!(c[d]=g[f])}):function(a){return e(a,0,d)}):e}},pseudos:{not:zb(function(a){var b=[],c=[],d=Y(a.replace(P,"$1"));return d[Ba]?zb(function(a,b,c,e){e=d(a,null,e,[]);for(var g=a.length;g--;)if(c=e[g])a[g]=!(b[g]=c)}):function(a,e,g){b[0]=a;d(b,null,g,c);return!c.pop()}}),
has:zb(function(a){return function(b){return 0<c(a,b).length}}),contains:zb(function(a){return function(b){return-1<(b.textContent||b.innerText||z(b)).indexOf(a)}}),enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},parent:function(a){return!w.pseudos.empty(a)},empty:function(a){var b;
for(a=a.firstChild;a;){if("@"<a.nodeName||3===(b=a.nodeType)||4===b)return!1;a=a.nextSibling}return!0},header:function(a){return $a.test(a.nodeName)},text:function(a){var b,c;return"input"===a.nodeName.toLowerCase()&&"text"===(b=a.type)&&(null==(c=a.getAttribute("type"))||c.toLowerCase()===b)},radio:d("radio"),checkbox:d("checkbox"),file:d("file"),password:d("password"),image:d("image"),submit:e("submit"),reset:e("reset"),button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===
a.type||"button"===b},input:function(a){return K.test(a.nodeName)},focus:function(a){var b=a.ownerDocument;return a===b.activeElement&&(!b.hasFocus||b.hasFocus())&&!(!a.type&&!a.href)},active:function(a){return a===a.ownerDocument.activeElement},first:g(function(a,b,c){return[0]}),last:g(function(a,b,c){return[b-1]}),eq:g(function(a,b,c){return[0>c?c+b:c]}),even:g(function(a,b,c){for(c=0;c<b;c+=2)a.push(c);return a}),odd:g(function(a,b,c){for(c=1;c<b;c+=2)a.push(c);return a}),lt:g(function(a,b,c){for(b=
0>c?c+b:c;0<=--b;)a.push(b);return a}),gt:g(function(a,b,c){for(c=0>c?c+b:c;++c<b;)a.push(c);return a})}};G=nb.compareDocumentPosition?function(a,b){return a===b?(C=!0,0):(a.compareDocumentPosition&&b.compareDocumentPosition?a.compareDocumentPosition(b)&4:a.compareDocumentPosition)?-1:1}:function(a,b){if(a===b)return C=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],g=[];c=a.parentNode;d=b.parentNode;var h=c;if(c===d)return f(a,b);if(!c)return-1;if(!d)return 1;
for(;h;)e.unshift(h),h=h.parentNode;for(h=d;h;)g.unshift(h),h=h.parentNode;c=e.length;d=g.length;for(h=0;h<c&&h<d;h++)if(e[h]!==g[h])return f(e[h],g[h]);return h===c?f(a,g[h],-1):f(e[h],b,1)};[0,0].sort(G);L=!C;c.uniqueSort=function(a){var b,c=1;C=L;a.sort(G);if(C)for(;b=a[c];c++)b===a[c-1]&&a.splice(c--,1);return a};c.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};Y=c.compile=function(a,b){var c,d=[],e=[],g=Ub[Ba][a];if(!g){b||(b=h(a));for(c=b.length;c--;)g=q(b[c]),
g[Ba]?d.push(g):e.push(g);g=Ub(a,r(e,d))}return g};Ua.querySelectorAll&&function(){var a,b=t,d=/'|\\/g,e=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,g=[":focus"],f=[":active",":focus"],l=nb.matchesSelector||nb.mozMatchesSelector||nb.webkitMatchesSelector||nb.oMatchesSelector||nb.msMatchesSelector;Oa(function(a){a.innerHTML="<select><option selected=''></option></select>";a.querySelectorAll("[selected]").length||g.push("\\[[\\x20\\t\\r\\n\\f]*(?:checked|disabled|ismap|multiple|readonly|selected|value)");
a.querySelectorAll(":checked").length||g.push(":checked")});Oa(function(a){a.innerHTML="<p test=''></p>";a.querySelectorAll("[test^='']").length&&g.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:\"\"|'')");a.innerHTML="<input type='hidden'/>";a.querySelectorAll(":enabled").length||g.push(":enabled",":disabled")});g=new RegExp(g.join("|"));t=function(a,c,e,f,l){if(!(f||l||g&&g.test(a))){var m,p,n=!0,q=Ba;p=c;m=9===c.nodeType&&a;if(1===c.nodeType&&"object"!==c.nodeName.toLowerCase()){m=h(a);(n=c.getAttribute("id"))?
q=n.replace(d,"\\$&"):c.setAttribute("id",q);q="[id='"+q+"'] ";for(p=m.length;p--;)m[p]=q+m[p].join("");p=pc.test(a)&&c.parentNode||c;m=m.join(",")}if(m)try{return T.apply(e,Sb.call(p.querySelectorAll(m),0)),e}catch(r){}finally{n||c.removeAttribute("id")}}return b(a,c,e,f,l)};l&&(Oa(function(b){a=l.call(b,"div");try{l.call(b,"[test!='']:sizzle"),f.push("!=",sa)}catch(c){}}),f=new RegExp(f.join("|")),c.matchesSelector=function(b,d){d=d.replace(e,"='$1']");if(!(B(b)||f.test(d)||g&&g.test(d)))try{var h=
l.call(b,d);if(h||a||b.document&&11!==b.document.nodeType)return h}catch(m){}return 0<c(d,null,null,[b]).length})}();w.pseudos.nth=w.pseudos.eq;w.filters=u.prototype=w.pseudos;w.setFilters=new u;c.attr=v.attr;v.find=c;v.expr=c.selectors;v.expr[":"]=v.expr.pseudos;v.unique=c.uniqueSort;v.text=c.getText;v.isXMLDoc=c.isXML;v.contains=c.contains})(a);var Cb=/Until$/,Nb=/^(?:parents|prev(?:Until|All))/,da=/^.[^:#\[\.,]*$/,ca=v.expr.match.needsContext,ab={children:!0,contents:!0,next:!0,prev:!0};v.fn.extend({find:function(a){var b,
c,d,e,g,f,h=this;if("string"!==typeof a)return v(a).filter(function(){b=0;for(c=h.length;b<c;b++)if(v.contains(h[b],this))return!0});f=this.pushStack("","find",a);b=0;for(c=this.length;b<c;b++)if(d=f.length,v.find(a,this[b],f),0<b)for(e=d;e<f.length;e++)for(g=0;g<d;g++)if(f[g]===f[e]){f.splice(e--,1);break}return f},has:function(a){var b,c=v(a,this),d=c.length;return this.filter(function(){for(b=0;b<d;b++)if(v.contains(this,c[b]))return!0})},not:function(a){return this.pushStack(l(this,a,!1),"not",
a)},filter:function(a){return this.pushStack(l(this,a,!0),"filter",a)},is:function(a){return!!a&&("string"===typeof a?ca.test(a)?0<=v(a,this.context).index(this[0]):0<v.filter(a,this).length:0<this.filter(a).length)},closest:function(a,b){for(var c,d=0,e=this.length,g=[],f=ca.test(a)||"string"!==typeof a?v(a,b||this.context):0;d<e;d++)for(c=this[d];c&&c.ownerDocument&&c!==b&&11!==c.nodeType;){if(f?-1<f.index(c):v.find.matchesSelector(c,a)){g.push(c);break}c=c.parentNode}g=1<g.length?v.unique(g):g;
return this.pushStack(g,"closest",a)},index:function(a){return a?"string"===typeof a?v.inArray(this[0],v(a)):v.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(a,b){var c="string"===typeof a?v(a,b):v.makeArray(a&&a.nodeType?[a]:a),d=v.merge(this.get(),c);return this.pushStack(h(c[0])||h(d[0])?d:v.unique(d))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});v.fn.andSelf=v.fn.addBack;v.each({parent:function(a){return(a=
a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return v.dir(a,"parentNode")},parentsUntil:function(a,b,c){return v.dir(a,"parentNode",c)},next:function(a){return g(a,"nextSibling")},prev:function(a){return g(a,"previousSibling")},nextAll:function(a){return v.dir(a,"nextSibling")},prevAll:function(a){return v.dir(a,"previousSibling")},nextUntil:function(a,b,c){return v.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return v.dir(a,"previousSibling",c)},siblings:function(a){return v.sibling((a.parentNode||
{}).firstChild,a)},children:function(a){return v.sibling(a.firstChild)},contents:function(a){return v.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:v.merge([],a.childNodes)}},function(a,b){v.fn[a]=function(c,d){var e=v.map(this,b,c);Cb.test(a)||(d=c);d&&"string"===typeof d&&(e=v.filter(d,e));e=1<this.length&&!ab[a]?v.unique(e):e;1<this.length&&Nb.test(a)&&(e=e.reverse());return this.pushStack(e,a,la.call(arguments).join(","))}});v.extend({filter:function(a,b,c){c&&(a=":not("+a+
")");return 1===b.length?v.find.matchesSelector(b[0],a)?[b[0]]:[]:v.find.matches(a,b)},dir:function(a,c,d){var e=[];for(a=a[c];a&&9!==a.nodeType&&(d===b||1!==a.nodeType||!v(a).is(d));)1===a.nodeType&&e.push(a),a=a[c];return e},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var va="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Da=/ jQuery\d+="(?:null|\d+)"/g,
Ta=/^\s+/,ja=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Sa=/<([\w:]+)/,Y=/<tbody/i,Ba=/<|&#?\w+;/,Ua=/<(?:script|style|link)/i,nb=/<(?:script|object|embed|option|style)/i,gc=new RegExp("<(?:"+va+")[\\s/>]","i"),Sb=/^(?:checkbox|radio)$/,zb=/checked\s*(?:[^=]|=\s*.checked.)/i,Ub=/\/(java|ecma)script/i,pc=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,$a={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],
tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},ob=m(K),Xc=ob.appendChild(K.createElement("div"));$a.optgroup=$a.option;$a.tbody=$a.tfoot=$a.colgroup=$a.caption=$a.thead;$a.th=$a.td;v.support.htmlSerialize||($a._default=[1,"X<div>","</div>"]);v.fn.extend({text:function(a){return v.access(this,function(a){return a===b?v.text(this):this.empty().append((this[0]&&
this[0].ownerDocument||K).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(v.isFunction(a))return this.each(function(b){v(this).wrapAll(a.call(this,b))});if(this[0]){var b=v(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]);b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return v.isFunction(a)?this.each(function(b){v(this).wrapInner(a.call(this,
b))}):this.each(function(){var b=v(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=v.isFunction(a);return this.each(function(c){v(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){v.nodeName(this,"body")||v(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){1!==this.nodeType&&11!==this.nodeType||this.appendChild(a)})},prepend:function(){return this.domManip(arguments,
!0,function(a){1!==this.nodeType&&11!==this.nodeType||this.insertBefore(a,this.firstChild)})},before:function(){if(!h(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)});if(arguments.length){var a=v.clean(arguments);return this.pushStack(v.merge(a,this),"before",this.selector)}},after:function(){if(!h(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=v.clean(arguments);return this.pushStack(v.merge(this,
a),"after",this.selector)}},remove:function(a,b){for(var c,d=0;null!=(c=this[d]);d++)if(!a||v.filter(a,[c]).length)b||1!==c.nodeType||(v.cleanData(c.getElementsByTagName("*")),v.cleanData([c])),c.parentNode&&c.parentNode.removeChild(c);return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)for(1===a.nodeType&&v.cleanData(a.getElementsByTagName("*"));a.firstChild;)a.removeChild(a.firstChild);return this},clone:function(a,b){a=null==a?!1:a;b=null==b?a:b;return this.map(function(){return v.clone(this,
a,b)})},html:function(a){return v.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return 1===c.nodeType?c.innerHTML.replace(Da,""):b;if(!("string"!==typeof a||Ua.test(a)||!v.support.htmlSerialize&&gc.test(a)||!v.support.leadingWhitespace&&Ta.test(a)||$a[(Sa.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(ja,"<$1></$2>");try{for(;d<e;d++)c=this[d]||{},1===c.nodeType&&(v.cleanData(c.getElementsByTagName("*")),c.innerHTML=a);c=0}catch(g){}}c&&this.empty().append(a)},null,a,arguments.length)},
replaceWith:function(a){if(!h(this[0])){if(v.isFunction(a))return this.each(function(b){var c=v(this),d=c.html();c.replaceWith(a.call(this,b,d))});"string"!==typeof a&&(a=v(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;v(this).remove();b?v(b).before(a):v(c).append(a)})}return this.length?this.pushStack(v(v.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){a=[].concat.apply([],a);var e,g,f,h=0,l=a[0],
m=[],n=this.length;if(!v.support.checkClone&&1<n&&"string"===typeof l&&zb.test(l))return this.each(function(){v(this).domManip(a,c,d)});if(v.isFunction(l))return this.each(function(e){var g=v(this);a[0]=l.call(this,e,c?g.html():b);g.domManip(a,c,d)});if(this[0]){e=v.buildFragment(a,this,m);f=e.fragment;g=f.firstChild;1===f.childNodes.length&&(f=g);if(g)for(c=c&&v.nodeName(g,"tr"),e=e.cacheable||n-1;h<n;h++)d.call(c&&v.nodeName(this[h],"table")?p(this[h],"tbody"):this[h],h===e?f:v.clone(f,!0,!0));
f=g=null;m.length&&v.each(m,function(a,b){b.src?v.ajax?v.ajax({url:b.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):v.error("no ajax"):v.globalEval((b.text||b.textContent||b.innerHTML||"").replace(pc,""));b.parentNode&&b.parentNode.removeChild(b)})}return this}});v.buildFragment=function(a,c,d){var e,g,f,h=a[0];c=c||K;c=!c.nodeType&&c[0]||c;c=c.ownerDocument||c;!(1===a.length&&"string"===typeof h&&512>h.length&&c===K&&"<"===h.charAt(0))||nb.test(h)||!v.support.checkClone&&zb.test(h)||
!v.support.html5Clone&&gc.test(h)||(g=!0,e=v.fragments[h],f=e!==b);e||(e=c.createDocumentFragment(),v.clean(a,c,e,d),g&&(v.fragments[h]=f&&e));return{fragment:e,cacheable:g}};v.fragments={};v.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){v.fn[a]=function(c){var d,e=0,g=[];c=v(c);var f=c.length;d=1===this.length&&this[0].parentNode;if((null==d||d&&11===d.nodeType&&1===d.childNodes.length)&&1===f)return c[b](this[0]),this;
for(;e<f;e++)d=(0<e?this.clone(!0):this).get(),v(c[e])[b](d),g=g.concat(d);return this.pushStack(g,a,c.selector)}});v.extend({clone:function(a,b,c){var d,e,g,f;v.support.html5Clone||v.isXMLDoc(a)||!gc.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(Xc.innerHTML=a.outerHTML,Xc.removeChild(f=Xc.firstChild));if(!(v.support.noCloneEvent&&v.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||v.isXMLDoc(a)))for(r(a,f),d=q(a),e=q(f),g=0;d[g];++g)e[g]&&r(d[g],e[g]);if(b&&(t(a,f),c))for(d=q(a),e=q(f),g=0;d[g];++g)t(d[g],
e[g]);return f},clean:function(a,b,c,d){var e,g,f,h,l,p,n=b===K&&ob,q=[];b&&"undefined"!==typeof b.createDocumentFragment||(b=K);for(e=0;null!=(f=a[e]);e++)if("number"===typeof f&&(f+=""),f){if("string"===typeof f)if(Ba.test(f)){n=n||m(b);p=b.createElement("div");n.appendChild(p);f=f.replace(ja,"<$1></$2>");g=(Sa.exec(f)||["",""])[1].toLowerCase();h=$a[g]||$a._default;l=h[0];for(p.innerHTML=h[1]+f+h[2];l--;)p=p.lastChild;if(!v.support.tbody)for(l=Y.test(f),h="table"!==g||l?"<table>"!==h[1]||l?[]:
p.childNodes:p.firstChild&&p.firstChild.childNodes,g=h.length-1;0<=g;--g)v.nodeName(h[g],"tbody")&&!h[g].childNodes.length&&h[g].parentNode.removeChild(h[g]);!v.support.leadingWhitespace&&Ta.test(f)&&p.insertBefore(b.createTextNode(Ta.exec(f)[0]),p.firstChild);f=p.childNodes;p.parentNode.removeChild(p)}else f=b.createTextNode(f);f.nodeType?q.push(f):v.merge(q,f)}p&&(f=p=n=null);if(!v.support.appendChecked)for(e=0;null!=(f=q[e]);e++)v.nodeName(f,"input")?w(f):"undefined"!==typeof f.getElementsByTagName&&
v.grep(f.getElementsByTagName("input"),w);if(c)for(a=function(a){if(!a.type||Ub.test(a.type))return d?d.push(a.parentNode?a.parentNode.removeChild(a):a):c.appendChild(a)},e=0;null!=(f=q[e]);e++)v.nodeName(f,"script")&&a(f)||(c.appendChild(f),"undefined"!==typeof f.getElementsByTagName&&(f=v.grep(v.merge([],f.getElementsByTagName("script")),a),q.splice.apply(q,[e+1,0].concat(f)),e+=f.length));return q},cleanData:function(a,b){for(var c,d,e,g,f=0,h=v.expando,l=v.cache,m=v.support.deleteExpando,p=v.event.special;null!=
(e=a[f]);f++)if(b||v.acceptData(e))if(c=(d=e[h])&&l[d]){if(c.events)for(g in c.events)p[g]?v.event.remove(e,g):v.removeEvent(e,g,c.handle);l[d]&&(delete l[d],m?delete e[h]:e.removeAttribute?e.removeAttribute(h):e[h]=null,v.deletedIds.push(d))}}});(function(){var a,b;v.uaMatch=function(a){a=a.toLowerCase();a=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||0>a.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||
[];return{browser:a[1]||"",version:a[2]||"0"}};a=v.uaMatch(Q.userAgent);b={};a.browser&&(b[a.browser]=!0,b.version=a.version);b.chrome?b.webkit=!0:b.webkit&&(b.safari=!0);v.browser=b;v.sub=function(){function a(b,c){return new a.fn.init(b,c)}v.extend(!0,a,this);a.superclass=this;a.fn=a.prototype=this();a.fn.constructor=a;a.sub=this.sub;a.fn.init=function(c,d){d&&d instanceof v&&!(d instanceof a)&&(d=a(d));return v.fn.init.call(this,c,d,b)};a.fn.init.prototype=a.fn;var b=a(K);return a}})();var tb,
Mb,ac,Hb=/alpha\([^)]*\)/i,qc=/opacity=([^)]*)/,kd=/^(top|right|bottom|left)$/,Ed=/^(none|table(?!-c[ea]).+)/,ld=/^margin/,zd=new RegExp("^("+Ea+")(.*)$","i"),mc=new RegExp("^("+Ea+")(?!px)[a-z%]+$","i"),md=new RegExp("^([-+])=("+Ea+")","i"),nc={},Kc={position:"absolute",visibility:"hidden",display:"block"},je={letterSpacing:0,fontWeight:400},Db=["Top","Right","Bottom","Left"],yd=["Webkit","O","Moz","ms"],ke=v.fn.toggle;v.fn.extend({css:function(a,c){return v.access(this,function(a,c,d){return d!==
b?v.style(a,c,d):v.css(a,c)},a,c,1<arguments.length)},show:function(){return z(this,!0)},hide:function(){return z(this)},toggle:function(a,b){var c="boolean"===typeof a;return v.isFunction(a)&&v.isFunction(b)?ke.apply(this,arguments):this.each(function(){(c?a:x(this))?v(this).show():v(this).hide()})}});v.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=tb(a,"opacity");return""===c?"1":c}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},
cssProps:{"float":v.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var g,f,h,l=v.camelCase(c),m=a.style;c=v.cssProps[l]||(v.cssProps[l]=u(m,l));h=v.cssHooks[c]||v.cssHooks[l];if(d!==b){if(f=typeof d,"string"===f&&(g=md.exec(d))&&(d=(g[1]+1)*g[2]+parseFloat(v.css(a,c)),f="number"),!(null==d||"number"===f&&isNaN(d)||("number"!==f||v.cssNumber[l]||(d+="px"),h&&"set"in h&&(d=h.set(a,d,e))===b)))try{m[c]=d}catch(p){}}else return h&&"get"in
h&&(g=h.get(a,!1,e))!==b?g:m[c]}},css:function(a,c,d,e){var g,f;f=v.camelCase(c);c=v.cssProps[f]||(v.cssProps[f]=u(a.style,f));(f=v.cssHooks[c]||v.cssHooks[f])&&"get"in f&&(g=f.get(a,!0,e));g===b&&(g=tb(a,c));"normal"===g&&c in je&&(g=je[c]);return d||e!==b?(a=parseFloat(g),d||v.isNumeric(a)?a||0:g):g},swap:function(a,b,c){var d,e={};for(d in b)e[d]=a.style[d],a.style[d]=b[d];c=c.call(a);for(d in b)a.style[d]=e[d];return c}});a.getComputedStyle?tb=function(b,c){var d,e,g,f,h=a.getComputedStyle(b,
null),l=b.style;h&&(d=h[c],""!==d||v.contains(b.ownerDocument,b)||(d=v.style(b,c)),mc.test(d)&&ld.test(c)&&(e=l.width,g=l.minWidth,f=l.maxWidth,l.minWidth=l.maxWidth=l.width=d,d=h.width,l.width=e,l.minWidth=g,l.maxWidth=f));return d}:K.documentElement.currentStyle&&(tb=function(a,b){var c,d,e=a.currentStyle&&a.currentStyle[b],g=a.style;null==e&&g&&g[b]&&(e=g[b]);if(mc.test(e)&&!kd.test(b)){c=g.left;if(d=a.runtimeStyle&&a.runtimeStyle.left)a.runtimeStyle.left=a.currentStyle.left;g.left="fontSize"===
b?"1em":e;e=g.pixelLeft+"px";g.left=c;d&&(a.runtimeStyle.left=d)}return""===e?"auto":e});v.each(["height","width"],function(a,b){v.cssHooks[b]={get:function(a,c,d){if(c)return 0===a.offsetWidth&&Ed.test(tb(a,"display"))?v.swap(a,Kc,function(){return A(a,b,d)}):A(a,b,d)},set:function(a,c,d){return y(a,c,d?B(a,b,d,v.support.boxSizing&&"border-box"===v.css(a,"boxSizing")):0)}}});v.support.opacity||(v.cssHooks.opacity={get:function(a,b){return qc.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||
"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=v.isNumeric(b)?"alpha(opacity="+100*b+")":"",g=d&&d.filter||c.filter||"";c.zoom=1;if(1<=b&&""===v.trim(g.replace(Hb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),d&&!d.filter))return;c.filter=Hb.test(g)?g.replace(Hb,e):g+" "+e}});v(function(){v.support.reliableMarginRight||(v.cssHooks.marginRight={get:function(a,b){return v.swap(a,{display:"inline-block"},function(){if(b)return tb(a,"marginRight")})}});
!v.support.pixelPosition&&v.fn.position&&v.each(["top","left"],function(a,b){v.cssHooks[b]={get:function(a,c){if(c){var d=tb(a,b);return mc.test(d)?v(a).position()[b]+"px":d}}}})});v.expr&&v.expr.filters&&(v.expr.filters.hidden=function(a){return 0===a.offsetWidth&&0===a.offsetHeight||!v.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||tb(a,"display"))},v.expr.filters.visible=function(a){return!v.expr.filters.hidden(a)});v.each({margin:"",padding:"",border:"Width"},function(a,b){v.cssHooks[a+
b]={expand:function(c){var d="string"===typeof c?c.split(" "):[c],e={};for(c=0;4>c;c++)e[a+Db[c]+b]=d[c]||d[c-2]||d[0];return e}};ld.test(a)||(v.cssHooks[a+b].set=y)});var Fd=/%20/g,Yd=/\[\]$/,Pe=/\r?\n/g,le=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Qe=/^(?:select|textarea)/i;v.fn.extend({serialize:function(){return v.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?v.makeArray(this.elements):
this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Qe.test(this.nodeName)||le.test(this.type))}).map(function(a,b){var c=v(this).val();return null==c?null:v.isArray(c)?v.map(c,function(a,c){return{name:b.name,value:a.replace(Pe,"\r\n")}}):{name:b.name,value:c.replace(Pe,"\r\n")}}).get()}});v.param=function(a,c){var d,e=[],g=function(a,b){b=v.isFunction(b)?b():null==b?"":b;e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=v.ajaxSettings&&v.ajaxSettings.traditional);
if(v.isArray(a)||a.jquery&&!v.isPlainObject(a))v.each(a,function(){g(this.name,this.value)});else for(d in a)D(d,a[d],c,g);return e.join("&").replace(Fd,"+")};var rc,Qb,me=/#.*$/,Re=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Gd=/^(?:GET|HEAD)$/,Hd=/^\/\//,ne=/\?/,Se=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Lc=/([?&])_=[^&]*/,hc=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Yc=v.fn.load,hd={},Zc={},Te=["*/"]+["*"];try{Qb=U.href}catch(Id){Qb=K.createElement("a"),Qb.href="",Qb=Qb.href}rc=hc.exec(Qb.toLowerCase())||
[];v.fn.load=function(a,c,d){if("string"!==typeof a&&Yc)return Yc.apply(this,arguments);if(!this.length)return this;var e,g,f,h=this,l=a.indexOf(" ");0<=l&&(e=a.slice(l,a.length),a=a.slice(0,l));v.isFunction(c)?(d=c,c=b):c&&"object"===typeof c&&(g="POST");v.ajax({url:a,type:g,dataType:"html",data:c,complete:function(a,b){d&&h.each(d,f||[a.responseText,b,a])}}).done(function(a){f=arguments;h.html(e?v("<div>").append(a.replace(Se,"")).find(e):a)});return this};v.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),
function(a,b){v.fn[b]=function(a){return this.on(b,a)}});v.each(["get","post"],function(a,c){v[c]=function(a,d,e,g){v.isFunction(d)&&(g=g||e,e=d,d=b);return v.ajax({type:c,url:a,data:d,success:e,dataType:g})}});v.extend({getScript:function(a,c){return v.get(a,b,c,"script")},getJSON:function(a,b,c){return v.get(a,b,c,"json")},ajaxSetup:function(a,b){b?L(a,v.ajaxSettings):(b=a,a=v.ajaxSettings);L(a,b);return a},ajaxSettings:{url:Qb,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(rc[1]),
global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Te},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":v.parseJSON,"text xml":v.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:H(hd),ajaxTransport:H(Zc),ajax:function(a,
c){function d(a,c,f,m){var n,w,z,A,G=c;if(2!==B){B=2;l&&clearTimeout(l);h=b;g=m||"";Y.readyState=0<a?4:0;if(f){A=q;m=Y;var C,D,Ba,L,J=A.contents,Ua=A.dataTypes,nb=A.responseFields;for(D in nb)D in f&&(m[nb[D]]=f[D]);for(;"*"===Ua[0];)Ua.shift(),C===b&&(C=A.mimeType||m.getResponseHeader("content-type"));if(C)for(D in J)if(J[D]&&J[D].test(C)){Ua.unshift(D);break}if(Ua[0]in f)Ba=Ua[0];else{for(D in f){if(!Ua[0]||A.converters[D+" "+Ua[0]]){Ba=D;break}L||(L=D)}Ba=Ba||L}Ba?(Ba!==Ua[0]&&Ua.unshift(Ba),A=
f[Ba]):A=void 0}if(200<=a&&300>a||304===a)if(q.ifModified&&((f=Y.getResponseHeader("Last-Modified"))&&(v.lastModified[e]=f),(f=Y.getResponseHeader("Etag"))&&(v.etag[e]=f)),304===a)G="notmodified",n=!0;else{a:{w=q;z=A;var M,V,G=w.dataTypes.slice();C=G[0];D={};Ba=0;w.dataFilter&&(z=w.dataFilter(z,w.dataType));if(G[1])for(M in w.converters)D[M.toLowerCase()]=w.converters[M];for(;f=G[++Ba];)if("*"!==f){if("*"!==C&&C!==f){M=D[C+" "+f]||D["* "+f];if(!M)for(V in D)if(n=V.split(" "),n[1]===f&&(M=D[C+" "+
n[0]]||D["* "+n[0]])){!0===M?M=D[V]:!0!==D[V]&&(f=n[0],G.splice(Ba--,0,f));break}if(!0!==M)if(M&&w["throws"])z=M(z);else try{z=M(z)}catch(H){n={state:"parsererror",error:M?H:"No conversion from "+C+" to "+f};break a}}C=f}n={state:"success",data:z}}G=n.state;w=n.data;z=n.error;n=!z}else if(z=G,!G||a)G="error",0>a&&(a=0);Y.status=a;Y.statusText=(c||G)+"";n?u.resolveWith(r,[w,G,Y]):u.rejectWith(r,[Y,G,z]);Y.statusCode(y);y=b;p&&t.trigger("ajax"+(n?"Success":"Error"),[Y,q,n?w:z]);x.fireWith(r,[Y,G]);
p&&(t.trigger("ajaxComplete",[Y,q]),--v.active||v.event.trigger("ajaxStop"))}}"object"===typeof a&&(c=a,a=b);c=c||{};var e,g,f,h,l,m,p,n,q=v.ajaxSetup({},c),r=q.context||q,t=r!==q&&(r.nodeType||r instanceof v)?v(r):v.event,u=v.Deferred(),x=v.Callbacks("once memory"),y=q.statusCode||{},w={},z={},B=0,A="canceled",Y={readyState:0,setRequestHeader:function(a,b){if(!B){var c=a.toLowerCase();a=z[c]=z[c]||a;w[a]=b}return this},getAllResponseHeaders:function(){return 2===B?g:null},getResponseHeader:function(a){var c;
if(2===B){if(!f)for(f={};c=Re.exec(g);)f[c[1].toLowerCase()]=c[2];c=f[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){B||(q.mimeType=a);return this},abort:function(a){a=a||A;h&&h.abort(a);d(0,a);return this}};u.promise(Y);Y.success=Y.done;Y.error=Y.fail;Y.complete=x.add;Y.statusCode=function(a){if(a){var b;if(2>B)for(b in a)y[b]=[y[b],a[b]];else b=a[Y.status],Y.always(b)}return this};q.url=((a||q.url)+"").replace(me,"").replace(Hd,rc[1]+"//");q.dataTypes=v.trim(q.dataType||"*").toLowerCase().split(ya);
null==q.crossDomain&&(m=hc.exec(q.url.toLowerCase())||!1,q.crossDomain=m&&m.join(":")+(m[3]?"":"http:"===m[1]?80:443)!==rc.join(":")+(rc[3]?"":"http:"===rc[1]?80:443));q.data&&q.processData&&"string"!==typeof q.data&&(q.data=v.param(q.data,q.traditional));G(hd,q,c,Y);if(2===B)return Y;p=q.global;q.type=q.type.toUpperCase();q.hasContent=!Gd.test(q.type);p&&0===v.active++&&v.event.trigger("ajaxStart");if(!q.hasContent&&(q.data&&(q.url+=(ne.test(q.url)?"&":"?")+q.data,delete q.data),e=q.url,!1===q.cache)){m=
v.now();var C=q.url.replace(Lc,"$1_="+m);q.url=C+(C===q.url?(ne.test(q.url)?"&":"?")+"_="+m:"")}(q.data&&q.hasContent&&!1!==q.contentType||c.contentType)&&Y.setRequestHeader("Content-Type",q.contentType);q.ifModified&&(e=e||q.url,v.lastModified[e]&&Y.setRequestHeader("If-Modified-Since",v.lastModified[e]),v.etag[e]&&Y.setRequestHeader("If-None-Match",v.etag[e]));Y.setRequestHeader("Accept",q.dataTypes[0]&&q.accepts[q.dataTypes[0]]?q.accepts[q.dataTypes[0]]+("*"!==q.dataTypes[0]?", "+Te+"; q=0.01":
""):q.accepts["*"]);for(n in q.headers)Y.setRequestHeader(n,q.headers[n]);if(q.beforeSend&&(!1===q.beforeSend.call(r,Y,q)||2===B))return Y.abort();A="abort";for(n in{success:1,error:1,complete:1})Y[n](q[n]);if(h=G(Zc,q,c,Y)){Y.readyState=1;p&&t.trigger("ajaxSend",[Y,q]);q.async&&0<q.timeout&&(l=setTimeout(function(){Y.abort("timeout")},q.timeout));try{B=1,h.send(w,d)}catch(D){if(2>B)d(-1,D);else throw D;}}else d(-1,"No Transport");return Y},active:0,lastModified:{},etag:{}});var nd=[],od=/\?/,Vb=
/(=)\?(?=&|$)|\?\?/,Rb=v.now();v.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=nd.pop()||v.expando+"_"+Rb++;this[a]=!0;return a}});v.ajaxPrefilter("json jsonp",function(c,d,e){var g,f,h,l=c.data,m=c.url,p=!1!==c.jsonp,n=p&&Vb.test(m),q=p&&!n&&"string"===typeof l&&!(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&Vb.test(l);if("jsonp"===c.dataTypes[0]||n||q)return g=c.jsonpCallback=v.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,f=a[g],n?c.url=m.replace(Vb,
"$1"+g):q?c.data=l.replace(Vb,"$1"+g):p&&(c.url+=(od.test(m)?"&":"?")+c.jsonp+"="+g),c.converters["script json"]=function(){h||v.error(g+" was not called");return h[0]},c.dataTypes[0]="json",a[g]=function(){h=arguments},e.always(function(){a[g]=f;c[g]&&(c.jsonpCallback=d.jsonpCallback,nd.push(g));h&&v.isFunction(f)&&f(h[0]);h=f=b}),"script"});v.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},
converters:{"text script":function(a){v.globalEval(a);return a}}});v.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1);a.crossDomain&&(a.type="GET",a.global=!1)});v.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=K.head||K.getElementsByTagName("head")[0]||K.documentElement;return{send:function(e,g){c=K.createElement("script");c.async="async";a.scriptCharset&&(c.charset=a.scriptCharset);c.src=a.url;c.onload=c.onreadystatechange=function(a,e){if(e||!c.readyState||/loaded|complete/.test(c.readyState))c.onload=
c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=b,e||g(200,"success")};d.insertBefore(c,d.firstChild)},abort:function(){if(c)c.onload(0,1)}}}});var Ob,Mc=a.ActiveXObject?function(){for(var a in Ob)Ob[a](0,1)}:!1,Wb=0;v.ajaxSettings.xhr=a.ActiveXObject?function(){var b;if(!(b=!this.isLocal&&J()))a:{try{b=new a.ActiveXObject("Microsoft.XMLHTTP");break a}catch(c){}b=void 0}return b}:J;(function(a){v.extend(v.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})})(v.ajaxSettings.xhr());v.support.ajax&&
v.ajaxTransport(function(c){if(!c.crossDomain||v.support.cors){var d;return{send:function(e,g){var f,h,l=c.xhr();c.username?l.open(c.type,c.url,c.async,c.username,c.password):l.open(c.type,c.url,c.async);if(c.xhrFields)for(h in c.xhrFields)l[h]=c.xhrFields[h];c.mimeType&&l.overrideMimeType&&l.overrideMimeType(c.mimeType);c.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e)l.setRequestHeader(h,e[h])}catch(m){}l.send(c.hasContent&&c.data||null);d=function(a,
e){var h,m,p,n,q;try{if(d&&(e||4===l.readyState))if(d=b,f&&(l.onreadystatechange=v.noop,Mc&&delete Ob[f]),e)4!==l.readyState&&l.abort();else{h=l.status;p=l.getAllResponseHeaders();n={};(q=l.responseXML)&&q.documentElement&&(n.xml=q);try{n.text=l.responseText}catch(r){}try{m=l.statusText}catch(t){m=""}h||!c.isLocal||c.crossDomain?1223===h&&(h=204):h=n.text?200:404}}catch(u){e||g(-1,u)}n&&g(h,m,n,p)};c.async?4===l.readyState?setTimeout(d,0):(f=++Wb,Mc&&(Ob||(Ob={},v(a).unload(Mc)),Ob[f]=d),l.onreadystatechange=
d):d()},abort:function(){d&&d(0,1)}}}});var Ec,Nc,Jd=/^(?:toggle|show|hide)$/,za=new RegExp("^(?:([-+])=|)("+Ea+")([a-z%]*)$","i"),Kd=/queueHooks$/,Pb=[function(a,b,c){var d,e,g,f,h,l,m=this,p=a.style,n={},q=[],r=a.nodeType&&x(a);c.queue||(h=v._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,l=h.empty.fire,h.empty.fire=function(){h.unqueued||l()}),h.unqueued++,m.always(function(){m.always(function(){h.unqueued--;v.queue(a,"fx").length||h.empty.fire()})}));1===a.nodeType&&("height"in b||"width"in
b)&&(c.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===v.css(a,"display")&&"none"===v.css(a,"float")&&(v.support.inlineBlockNeedsLayout&&"inline"!==C(a.nodeName)?p.zoom=1:p.display="inline-block"));c.overflow&&(p.overflow="hidden",v.support.shrinkWrapBlocks||m.done(function(){p.overflow=c.overflow[0];p.overflowX=c.overflow[1];p.overflowY=c.overflow[2]}));for(d in b)e=b[d],Jd.exec(e)&&(delete b[d],e!==(r?"hide":"show")&&q.push(d));if(e=q.length)for(g=v._data(a,"fxshow")||v._data(a,"fxshow",
{}),r?v(a).show():m.done(function(){v(a).hide()}),m.done(function(){var b;v.removeData(a,"fxshow",!0);for(b in n)v.style(a,b,n[b])}),d=0;d<e;d++)b=q[d],f=m.createTween(b,r?g[b]:0),n[b]=g[b]||v.style(a,b),b in g||(g[b]=f.start,r&&(f.end=f.start,f.start="width"===b||"height"===b?1:0))}],Tc={"*":[function(a,b){var c,d,e=this.createTween(a,b),g=za.exec(b),f=e.cur(),h=+f||0,l=1,m=20;if(g){c=+g[2];d=g[3]||(v.cssNumber[a]?"":"px");if("px"!==d&&h){h=v.css(e.elem,a,!0)||c||1;do l=l||".5",h/=l,v.style(e.elem,
a,h+d);while(l!==(l=e.cur()/f)&&1!==l&&--m)}e.unit=d;e.start=h;e.end=g[1]?h+(g[1]+1)*c:c}return e}]};v.Animation=v.extend(T,{tweener:function(a,b){v.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;d<e;d++)c=a[d],Tc[c]=Tc[c]||[],Tc[c].unshift(b)},prefilter:function(a,b){b?Pb.unshift(a):Pb.push(a)}});v.Tween=N;N.prototype={constructor:N,init:function(a,b,c,d,e,g){this.elem=a;this.prop=c;this.easing=e||"swing";this.options=b;this.start=this.now=this.cur();this.end=d;this.unit=g||
(v.cssNumber[c]?"":"px")},cur:function(){var a=N.propHooks[this.prop];return a&&a.get?a.get(this):N.propHooks._default.get(this)},run:function(a){var b,c=N.propHooks[this.prop];this.pos=this.options.duration?b=v.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):b=a;this.now=(this.end-this.start)*b+this.start;this.options.step&&this.options.step.call(this.elem,this.now,this);c&&c.set?c.set(this):N.propHooks._default.set(this);return this}};N.prototype.init.prototype=N.prototype;
N.propHooks={_default:{get:function(a){return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(a=v.css(a.elem,a.prop,!1,""))&&"auto"!==a?a:0:a.elem[a.prop]},set:function(a){if(v.fx.step[a.prop])v.fx.step[a.prop](a);else a.elem.style&&(null!=a.elem.style[v.cssProps[a.prop]]||v.cssHooks[a.prop])?v.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}};N.propHooks.scrollTop=N.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}};v.each(["toggle",
"show","hide"],function(a,b){var c=v.fn[b];v.fn[b]=function(d,e,g){return null==d||"boolean"===typeof d||!a&&v.isFunction(d)&&v.isFunction(e)?c.apply(this,arguments):this.animate(Z(b,!0),d,e,g)}});v.fn.extend({fadeTo:function(a,b,c,d){return this.filter(x).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=v.isEmptyObject(a),g=v.speed(b,c,d);b=function(){var b=T(this,v.extend({},a),g);e&&b.stop(!0)};return e||!1===g.queue?this.each(b):this.queue(g.queue,b)},
stop:function(a,c,d){var e=function(a){var b=a.stop;delete a.stop;b(d)};"string"!==typeof a&&(d=c,c=a,a=b);c&&!1!==a&&this.queue(a||"fx",[]);return this.each(function(){var b=!0,c=null!=a&&a+"queueHooks",g=v.timers,f=v._data(this);if(c)f[c]&&f[c].stop&&e(f[c]);else for(c in f)f[c]&&f[c].stop&&Kd.test(c)&&e(f[c]);for(c=g.length;c--;)g[c].elem!==this||null!=a&&g[c].queue!==a||(g[c].anim.stop(d),b=!1,g.splice(c,1));!b&&d||v.dequeue(this,a)})}});v.each({slideDown:Z("show"),slideUp:Z("hide"),slideToggle:Z("toggle"),
fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){v.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}});v.speed=function(a,b,c){var d=a&&"object"===typeof a?v.extend({},a):{complete:c||!c&&b||v.isFunction(a)&&a,duration:a,easing:c&&b||b&&!v.isFunction(b)&&b};d.duration=v.fx.off?0:"number"===typeof d.duration?d.duration:d.duration in v.fx.speeds?v.fx.speeds[d.duration]:v.fx.speeds._default;if(null==d.queue||!0===d.queue)d.queue="fx";d.old=d.complete;d.complete=
function(){v.isFunction(d.old)&&d.old.call(this);d.queue&&v.dequeue(this,d.queue)};return d};v.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}};v.timers=[];v.fx=N.prototype.init;v.fx.tick=function(){for(var a,b=v.timers,c=0;c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||v.fx.stop()};v.fx.timer=function(a){a()&&v.timers.push(a)&&!Nc&&(Nc=setInterval(v.fx.tick,v.fx.interval))};v.fx.interval=13;v.fx.stop=function(){clearInterval(Nc);Nc=null};v.fx.speeds=
{slow:600,fast:200,_default:400};v.fx.step={};v.expr&&v.expr.filters&&(v.expr.filters.animated=function(a){return v.grep(v.timers,function(b){return a===b.elem}).length});var Ld=/^(?:body|html)$/i;v.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){v.offset.setOffset(this,a,b)});var c,d,e,g,f,h={top:0,left:0};if(e=(g=this[0])&&g.ownerDocument){if((d=e.body)===g)return v.offset.bodyOffset(g);c=e.documentElement;if(!v.contains(c,g))return h;"undefined"!==typeof g.getBoundingClientRect&&
(h=g.getBoundingClientRect());e=X(e);g=c.clientTop||d.clientTop||0;d=c.clientLeft||d.clientLeft||0;f=e.pageYOffset||c.scrollTop;c=e.pageXOffset||c.scrollLeft;return{top:h.top+f-g,left:h.left+c-d}}};v.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;v.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(v.css(a,"marginTop"))||0,c+=parseFloat(v.css(a,"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var d=v.css(a,"position");"static"===d&&(a.style.position="relative");
var e=v(a),g=e.offset(),f=v.css(a,"top"),h=v.css(a,"left"),l={},m={};("absolute"===d||"fixed"===d)&&-1<v.inArray("auto",[f,h])?(m=e.position(),d=m.top,h=m.left):(d=parseFloat(f)||0,h=parseFloat(h)||0);v.isFunction(b)&&(b=b.call(a,c,g));null!=b.top&&(l.top=b.top-g.top+d);null!=b.left&&(l.left=b.left-g.left+h);"using"in b?b.using.call(a,l):e.css(l)}};v.fn.extend({position:function(){if(this[0]){var a=this[0],b=this.offsetParent(),c=this.offset(),d=Ld.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=
parseFloat(v.css(a,"marginTop"))||0;c.left-=parseFloat(v.css(a,"marginLeft"))||0;d.top+=parseFloat(v.css(b[0],"borderTopWidth"))||0;d.left+=parseFloat(v.css(b[0],"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||K.body;a&&!Ld.test(a.nodeName)&&"static"===v.css(a,"position");)a=a.offsetParent;return a||K.body})}});v.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);
v.fn[a]=function(e){return v.access(this,function(a,e,g){var f=X(a);if(g===b)return f?c in f?f[c]:f.document.documentElement[e]:a[e];f?f.scrollTo(d?v(f).scrollLeft():g,d?g:v(f).scrollTop()):a[e]=g},a,e,arguments.length,null)}});v.each({Height:"height",Width:"width"},function(a,c){v.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,e){v.fn[e]=function(e,g){var f=arguments.length&&(d||"boolean"!==typeof e),h=d||(!0===e||!0===g?"margin":"border");return v.access(this,function(c,d,e){return v.isWindow(c)?
c.document.documentElement["client"+a]:9===c.nodeType?(d=c.documentElement,Math.max(c.body["scroll"+a],d["scroll"+a],c.body["offset"+a],d["offset"+a],d["client"+a])):e===b?v.css(c,d,e,h):v.style(c,d,e,h)},c,f?e:b,f,null)}})});a.jQuery=a.$=v;"function"===typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return v})})(window);
(function(a,b){function c(b,c){var d,f;d=b.nodeName.toLowerCase();if("area"===d){d=b.parentNode;f=d.name;if(!b.href||!f||"map"!==d.nodeName.toLowerCase())return!1;d=a("img[usemap=#"+f+"]")[0];return!!d&&e(d)}return(/input|select|textarea|button|object/.test(d)?!b.disabled:"a"===d?b.href||c:c)&&e(b)}function e(b){return a.expr.filters.visible(b)&&!a(b).parents().andSelf().filter(function(){return"hidden"===a.css(this,"visibility")}).length}var d=0,f=/^ui-id-\d+$/;a.ui=a.ui||{};a.ui.version||(a.extend(a.ui,
{version:"1.9.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({_focus:a.fn.focus,focus:function(b,c){return"number"===typeof b?this.each(function(){var d=this;setTimeout(function(){a(d).focus();c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;
b=a.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0);return/fixed/.test(this.css("position"))||!b.length?a(document):
b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length){c=a(this[0]);for(var d;c.length&&c[0]!==document;){d=c.css("position");if("absolute"===d||"relative"===d||"fixed"===d)if(d=parseInt(c.css("zIndex"),10),!isNaN(d)&&0!==d)return d;c=c.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++d)})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&a(this).removeAttr("id")})}}),a("<a>").outerWidth(1).jquery||a.each(["Width",
"Height"],function(c,d){function e(b,c,d,g){a.each(f,function(){c-=parseFloat(a.css(b,"padding"+this))||0;d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0);g&&(c-=parseFloat(a.css(b,"margin"+this))||0)});return c}var f="Width"===d?["Left","Right"]:["Top","Bottom"],m=d.toLowerCase(),p={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?p["inner"+d].call(this):this.each(function(){a(this).css(m,
e(this,c)+"px")})};a.fn["outer"+d]=function(b,c){return"number"!==typeof b?p["outer"+d].call(this,b):this.each(function(){a(this).css(m,e(this,b,!0,c)+"px")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||0<=d)&&c(b,!e)}}),a(function(){var b=document.body,
c=b.appendChild(c=document.createElement("div"));c.offsetHeight;a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});a.support.minHeight=100===c.offsetHeight;a.support.selectstart="onselectstart"in c;b.removeChild(c).style.display="none"}),function(){var b=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];a.ui.ie=b.length?!0:!1;a.ui.ie6=6===parseFloat(b[1],10)}(),a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+
".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e;b=a.ui[b].prototype;for(e in d)b.plugins[e]=b.plugins[e]||[],b.plugins[e].push([c,d[e]])},call:function(a,b,c){var d=a.plugins[b];if(d&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(b=0;b<d.length;b++)a.options[d[b][0]]&&d[b][1].apply(a.element,c)}},contains:a.contains,hasScroll:function(b,c){if("hidden"===
a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;if(0<b[d])return!0;b[d]=1;e=0<b[d];b[d]=0;return e},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(b,c,d,e,f,p){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,p)}}))})(jQuery);
(function(a,b){var c=0,e=Array.prototype.slice,d=a.cleanData;a.cleanData=function(b){for(var c=0,e;null!=(e=b[c]);c++)try{a(e).triggerHandler("remove")}catch(g){}d(b)};a.widget=function(b,c,d){var e,l,m,p,t=b.split(".")[0];b=b.split(".")[1];e=t+"-"+b;d||(d=c,c=a.Widget);a.expr[":"][e.toLowerCase()]=function(b){return!!a.data(b,e)};a[t]=a[t]||{};l=a[t][b];m=a[t][b]=function(a,b){if(!this._createWidget)return new m(a,b);arguments.length&&this._createWidget(a,b)};a.extend(m,l,{version:d.version,_proto:a.extend({},
d),_childConstructors:[]});p=new c;p.options=a.widget.extend({},p.options);a.each(d,function(b,e){a.isFunction(e)&&(d[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},d=function(a){return c.prototype[b].apply(this,a)};return function(){var b=this._super,c=this._superApply,g;this._super=a;this._superApply=d;g=e.apply(this,arguments);this._super=b;this._superApply=c;return g}}())});m.prototype=a.widget.extend(p,{widgetEventPrefix:p.widgetEventPrefix||b},d,{constructor:m,namespace:t,
widgetName:b,widgetBaseClass:e,widgetFullName:e});l?(a.each(l._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,m,c._proto)}),delete l._childConstructors):c._childConstructors.push(m);a.widget.bridge(b,m)};a.widget.extend=function(c){for(var d=e.call(arguments,1),h=0,g=d.length,l,m;h<g;h++)for(l in d[h])m=d[h][l],d[h].hasOwnProperty(l)&&m!==b&&(a.isPlainObject(m)?c[l]=a.isPlainObject(c[l])?a.widget.extend({},c[l],m):a.widget.extend({},m):c[l]=m);return c};a.widget.bridge=
function(c,d){var h=d.prototype.widgetFullName;a.fn[c]=function(g){var l="string"===typeof g,m=e.call(arguments,1),p=this;g=!l&&m.length?a.widget.extend.apply(null,[g].concat(m)):g;l?this.each(function(){var d,e=a.data(this,h);if(!e)return a.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+g+"'");if(!a.isFunction(e[g])||"_"===g.charAt(0))return a.error("no such method '"+g+"' for "+c+" widget instance");d=e[g].apply(e,m);if(d!==e&&d!==b)return p=d&&d.jquery?
p.pushStack(d.get()):d,!1}):this.each(function(){var b=a.data(this,h);b?b.option(g||{})._init():new d(g,this)});return p}};a.Widget=function(){};a.Widget._childConstructors=[];a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,d){d=a(d||this.defaultElement||this)[0];this.element=a(d);this.uuid=c++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=a.widget.extend({},this.options,this._getCreateOptions(),
b);this.bindings=a();this.hoverable=a();this.focusable=a();d!==this&&(a.data(d,this.widgetName,this),a.data(d,this.widgetFullName,this),this._on(this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow));this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,
destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},
option:function(c,d){var e=c,g,l,m;if(0===arguments.length)return a.widget.extend({},this.options);if("string"===typeof c)if(e={},g=c.split("."),c=g.shift(),g.length){l=e[c]=a.widget.extend({},this.options[c]);for(m=0;m<g.length-1;m++)l[g[m]]=l[g[m]]||{},l=l[g[m]];c=g.pop();if(d===b)return l[c]===b?null:l[c];l[c]=d}else{if(d===b)return this.options[c]===b?null:this.options[c];e[c]=d}this._setOptions(e);return this},_setOptions:function(a){for(var b in a)this._setOption(b,a[b]);return this},_setOption:function(a,
b){this.options[a]=b;"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"));return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(b,c){var d,e=this;c?(b=d=a(b),this.bindings=this.bindings.add(b)):(c=b,b=this.element,d=this.widget());a.each(c,function(c,m){function p(){if(!0!==
e.options.disabled&&!a(this).hasClass("ui-state-disabled"))return("string"===typeof m?e[m]:m).apply(e,arguments)}"string"!==typeof m&&(p.guid=m.guid=m.guid||p.guid||a.guid++);var n=c.match(/^(\w+)\s*(.*)$/),r=n[1]+e.eventNamespace;(n=n[2])?d.delegate(n,r,p):b.bind(r,p)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;a.unbind(b).undelegate(b)},_delay:function(a,b){var c=this;return setTimeout(function(){return("string"===typeof a?c[a]:a).apply(c,arguments)},
b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b);this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b);this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,l=this.options[b];d=d||{};c=a.Event(c);
c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase();c.target=this.element[0];if(b=c.originalEvent)for(e in b)e in c||(c[e]=b[e]);this.element.trigger(c,d);return!(a.isFunction(l)&&!1===l.apply(this.element[0],[c].concat(d))||c.isDefaultPrevented())}};a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,l){"string"===typeof e&&(e={effect:e});var m,p=e?!0===e||"number"===typeof e?c:e.effect||c:b;e=e||{};"number"===typeof e&&(e={duration:e});
m=!a.isEmptyObject(e);e.complete=l;e.delay&&d.delay(e.delay);if(m&&a.effects&&(a.effects.effect[p]||!1!==a.uiBackCompat&&a.effects[p]))d[b](e);else if(p!==b&&d[p])d[p](e.duration,e.easing,l);else d.queue(function(c){a(this)[b]();l&&l.call(d[0]);c()})}});!1!==a.uiBackCompat&&(a.Widget.prototype._getCreateOptions=function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]})})(jQuery);
(function(a,b){var c=!1;a(document).mouseup(function(a){c=!1});a.widget("ui.mouse",{version:"1.9.1",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){if(!0===a.data(c.target,b.widgetName+".preventClickEvent"))return a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1});this.started=
!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!c){this._mouseStarted&&this._mouseUp(b);this._mouseDownEvent=b;var d=this,f=1===b.which,n="string"===typeof this.options.cancel&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;if(!f||n||!this._mouseCapture(b))return!0;this.mouseDelayMet=
!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=!1!==this._mouseStart(b),!this._mouseStarted))return b.preventDefault(),!0;!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(a){return d._mouseMove(a)};this._mouseUpDelegate=function(a){return d._mouseUp(a)};
a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);b.preventDefault();return c=!0}},_mouseMove:function(b){if(a.ui.ie&&!(9<=document.documentMode)&&!b.button)return this._mouseUp(b);if(this._mouseStarted)return this._mouseDrag(b),b.preventDefault();this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,b))?this._mouseDrag(b):this._mouseUp(b));return!this._mouseStarted},
_mouseUp:function(b){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b));return!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(a){return this.mouseDelayMet},
_mouseStart:function(a){},_mouseDrag:function(a){},_mouseStop:function(a){},_mouseCapture:function(a){return!0}})})(jQuery);
(function(a,b){function c(a,b,c){return[parseInt(a[0],10)*(p.test(a[0])?b/100:1),parseInt(a[1],10)*(p.test(a[1])?c/100:1)]}a.ui=a.ui||{};var e,d=Math.max,f=Math.abs,n=Math.round,h=/left|center|right/,g=/top|center|bottom/,l=/[\+\-]\d+%?/,m=/^\w+/,p=/%$/,t=a.fn.position;a.position={scrollbarWidth:function(){if(e!==b)return e;var c,d,g=a("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>");d=g.children()[0];a("body").append(g);c=d.offsetWidth;
g.css("overflow","scroll");d=d.offsetWidth;c===d&&(d=g[0].clientWidth);g.remove();return e=c-d},getScrollInfo:function(b){var c=b.isWindow?"":b.element.css("overflow-x"),d=b.isWindow?"":b.element.css("overflow-y"),d="scroll"===d||"auto"===d&&b.height<b.element[0].scrollHeight;return{width:"scroll"===c||"auto"===c&&b.width<b.element[0].scrollWidth?a.position.scrollbarWidth():0,height:d?a.position.scrollbarWidth():0}},getWithinInfo:function(b){b=a(b||window);var c=a.isWindow(b[0]);return{element:b,
isWindow:c,offset:b.offset()||{left:0,top:0},scrollLeft:b.scrollLeft(),scrollTop:b.scrollTop(),width:c?b.width():b.outerWidth(),height:c?b.height():b.outerHeight()}}};a.fn.position=function(b){if(!b||!b.of)return t.apply(this,arguments);b=a.extend({},b);var e,p,u,x,z,y=a(b.of),B=a.position.getWithinInfo(b.within),A=a.position.getScrollInfo(B),C=y[0],D=(b.collision||"flip").split(" "),H={};9===C.nodeType?(p=y.width(),u=y.height(),x={top:0,left:0}):a.isWindow(C)?(p=y.width(),u=y.height(),x={top:y.scrollTop(),
left:y.scrollLeft()}):C.preventDefault?(b.at="left top",p=u=0,x={top:C.pageY,left:C.pageX}):(p=y.outerWidth(),u=y.outerHeight(),x=y.offset());z=a.extend({},x);a.each(["my","at"],function(){var a=(b[this]||"").split(" "),c,d;1===a.length&&(a=h.test(a[0])?a.concat(["center"]):g.test(a[0])?["center"].concat(a):["center","center"]);a[0]=h.test(a[0])?a[0]:"center";a[1]=g.test(a[1])?a[1]:"center";c=l.exec(a[0]);d=l.exec(a[1]);H[this]=[c?c[0]:0,d?d[0]:0];b[this]=[m.exec(a[0])[0],m.exec(a[1])[0]]});1===D.length&&
(D[1]=D[0]);"right"===b.at[0]?z.left+=p:"center"===b.at[0]&&(z.left+=p/2);"bottom"===b.at[1]?z.top+=u:"center"===b.at[1]&&(z.top+=u/2);e=c(H.at,p,u);z.left+=e[0];z.top+=e[1];return this.each(function(){var g,h,l=a(this),m=l.outerWidth(),t=l.outerHeight(),C=parseInt(a.css(this,"marginLeft"),10)||0,O=parseInt(a.css(this,"marginTop"),10)||0,N=m+C+(parseInt(a.css(this,"marginRight"),10)||0)+A.width,Z=t+O+(parseInt(a.css(this,"marginBottom"),10)||0)+A.height,X=a.extend({},z),P=c(H.my,l.outerWidth(),l.outerHeight());
"right"===b.my[0]?X.left-=m:"center"===b.my[0]&&(X.left-=m/2);"bottom"===b.my[1]?X.top-=t:"center"===b.my[1]&&(X.top-=t/2);X.left+=P[0];X.top+=P[1];a.support.offsetFractions||(X.left=n(X.left),X.top=n(X.top));g={marginLeft:C,marginTop:O};a.each(["left","top"],function(c,d){if(a.ui.position[D[c]])a.ui.position[D[c]][d](X,{targetWidth:p,targetHeight:u,elemWidth:m,elemHeight:t,collisionPosition:g,collisionWidth:N,collisionHeight:Z,offset:[e[0]+P[0],e[1]+P[1]],my:b.my,at:b.at,within:B,elem:l})});a.fn.bgiframe&&
l.bgiframe();b.using&&(h=function(a){var c=x.left-X.left,e=c+p-m,g=x.top-X.top,h=g+u-t,q={target:{element:y,left:x.left,top:x.top,width:p,height:u},element:{element:l,left:X.left,top:X.top,width:m,height:t},horizontal:0>e?"left":0<c?"right":"center",vertical:0>h?"top":0<g?"bottom":"middle"};p<m&&f(c+e)<p&&(q.horizontal="center");u<t&&f(g+h)<u&&(q.vertical="middle");d(f(c),f(e))>d(f(g),f(h))?q.important="horizontal":q.important="vertical";b.using.call(this,a,q)});l.offset(a.extend(X,{using:h}))})};
a.ui.position={fit:{left:function(a,b){var c=b.within,e=c.isWindow?c.scrollLeft:c.offset.left,g=c.width,f=a.left-b.collisionPosition.marginLeft,c=e-f,h=f+b.collisionWidth-g-e;b.collisionWidth>g?0<c&&0>=h?(e=a.left+c+b.collisionWidth-g-e,a.left+=c-e):a.left=0<h&&0>=c?e:c>h?e+g-b.collisionWidth:e:a.left=0<c?a.left+c:0<h?a.left-h:d(a.left-f,a.left)},top:function(a,b){var c=b.within,e=c.isWindow?c.scrollTop:c.offset.top,g=b.within.height,f=a.top-b.collisionPosition.marginTop,c=e-f,h=f+b.collisionHeight-
g-e;b.collisionHeight>g?0<c&&0>=h?(e=a.top+c+b.collisionHeight-g-e,a.top+=c-e):a.top=0<h&&0>=c?e:c>h?e+g-b.collisionHeight:e:a.top=0<c?a.top+c:0<h?a.top-h:d(a.top-f,a.top)}},flip:{left:function(a,b){var c=b.within,d=c.offset.left+c.scrollLeft,e=c.width,g=c.isWindow?c.scrollLeft:c.offset.left,h=a.left-b.collisionPosition.marginLeft,c=h-g,l=h+b.collisionWidth-e-g,h="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,m="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,p=-2*
b.offset[0];if(0>c){if(d=a.left+h+m+p+b.collisionWidth-e-d,0>d||d<f(c))a.left+=h+m+p}else 0<l&&(d=a.left-b.collisionPosition.marginLeft+h+m+p-g,0<d||f(d)<l)&&(a.left+=h+m+p)},top:function(a,b){var c=b.within,d=c.offset.top+c.scrollTop,e=c.height,g=c.isWindow?c.scrollTop:c.offset.top,h=a.top-b.collisionPosition.marginTop,c=h-g,l=h+b.collisionHeight-e-g,h="top"===b.my[1]?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,m="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,p=-2*b.offset[1];
0>c?(d=a.top+h+m+p+b.collisionHeight-e-d,a.top+h+m+p>c&&(0>d||d<f(c))&&(a.top+=h+m+p)):0<l&&(d=a.top-b.collisionPosition.marginTop+h+m+p-g,a.top+h+m+p>l&&(0<d||f(d)<l)&&(a.top+=h+m+p))}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments);a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments);a.ui.position.fit.top.apply(this,arguments)}}};(function(){var b,c,d,e,g=document.getElementsByTagName("body")[0];d=document.createElement("div");
b=document.createElement(g?"div":"body");c={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};g&&a.extend(c,{position:"absolute",left:"-1000px",top:"-1000px"});for(e in c)b.style[e]=c[e];b.appendChild(d);c=g||document.documentElement;c.insertBefore(b,c.firstChild);d.style.cssText="position: absolute; left: 10.7432222px;";d=a(d).offset().left;a.support.offsetFractions=10<d&&11>d;b.innerHTML="";c.removeChild(b)})();!1!==a.uiBackCompat&&function(a){var c=a.fn.position;a.fn.position=
function(d){if(!d||!d.offset)return c.call(this,d);var e=d.offset.split(" "),g=d.at.split(" ");1===e.length&&(e[1]=e[0]);/^\d/.test(e[0])&&(e[0]="+"+e[0]);/^\d/.test(e[1])&&(e[1]="+"+e[1]);1===g.length&&(/left|center|right/.test(g[0])?g[1]="center":(g[1]=g[0],g[0]="center"));return c.call(this,a.extend(d,{at:g[0]+e[0]+" "+g[1]+e[1],offset:b}))}}(jQuery)})(jQuery);
(function(a,b){a.widget("ui.draggable",a.ui.mouse,{version:"1.9.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"!=this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||
(this.element[0].style.position="relative");this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy()},_mouseCapture:function(b){var e=this.options;if(this.helper||e.disabled||a(b.target).is(".ui-resizable-handle"))return!1;this.handle=this._getHandle(b);if(!this.handle)return!1;a(!0===
e.iframeFix?"iframe":e.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(a(this).offset()).appendTo("body")});return!0},_mouseStart:function(b){var e=this.options;this.helper=this._createHelper(b);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();a.ui.ddmanager&&(a.ui.ddmanager.current=this);this._cacheMargins();
this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(b);this.originalPageX=b.pageX;this.originalPageY=b.pageY;
e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt);e.containment&&this._setContainment();if(!1===this._trigger("start",b))return this._clear(),!1;this._cacheHelperProportions();a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b);this._mouseDrag(b,!0);a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b);return!0},_mouseDrag:function(b,e){this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");if(!e){var d=this._uiHash();if(!1===this._trigger("drag",
b,d))return this._mouseUp({}),!1;this.position=d.position}this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px");this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");a.ui.ddmanager&&a.ui.ddmanager.drag(this,b);return!1},_mouseStop:function(b){var e=!1;a.ui.ddmanager&&!this.options.dropBehaviour&&(e=a.ui.ddmanager.drop(this,b));this.dropped&&(e=this.dropped,this.dropped=!1);for(var d=this.element[0],f=!1;d&&(d=d.parentNode);)d==
document&&(f=!0);if(!f&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!e||"valid"==this.options.revert&&e||!0===this.options.revert||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,e)){var n=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==n._trigger("stop",b)&&n._clear()})}else!1!==this._trigger("stop",b)&&this._clear();return!1},_mouseUp:function(b){a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});
a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b);return a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(b){var e=this.options.handle&&a(this.options.handle,this.element).length?!1:!0;a(this.options.handle,this.element).find("*").andSelf().each(function(){this==b.target&&(e=!0)});return e},_createHelper:function(b){var e=this.options;b=a.isFunction(e.helper)?a(e.helper.apply(this.element[0],
[b])):"clone"==e.helper?this.element.clone().removeAttr("id"):this.element;b.parents("body").length||b.appendTo("parent"==e.appendTo?this.element[0].parentNode:e.appendTo);b[0]==this.element[0]||/(fixed|absolute)/.test(b.css("position"))||b.css("position","absolute");return b},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" "));a.isArray(b)&&(b={left:+b[0],top:+b[1]||0});"left"in b&&(this.offset.click.left=b.left+this.margins.left);"right"in b&&(this.offset.click.left=this.helperProportions.width-
b.right+this.margins.left);"top"in b&&(this.offset.click.top=b.top+this.margins.top);"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==
document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||
0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;"parent"==b.containment&&
(b.containment=this.helper[0].parentNode);if("document"==b.containment||"window"==b.containment)this.containment=["document"==b.containment?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==b.containment?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==b.containment?0:a(window).scrollLeft())+a("document"==b.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==b.containment?0:a(window).scrollTop())+
(a("document"==b.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(/^(document|window|parent)$/.test(b.containment)||b.containment.constructor==Array)b.containment.constructor==Array&&(this.containment=b.containment);else{var b=a(b.containment),e=b[0];if(e){b.offset();var d="hidden"!=a(e).css("overflow");this.containment=[(parseInt(a(e).css("borderLeftWidth"),10)||0)+(parseInt(a(e).css("paddingLeft"),10)||0),(parseInt(a(e).css("borderTopWidth"),
10)||0)+(parseInt(a(e).css("paddingTop"),10)||0),(d?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(a(e).css("borderLeftWidth"),10)||0)-(parseInt(a(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(d?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(a(e).css("borderTopWidth"),10)||0)-(parseInt(a(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relative_container=b}}},
_convertPositionTo:function(b,e){e||(e=this.position);var d="absolute"==b?1:-1,f="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,n=/(html|body)/i.test(f[0].tagName);return{top:e.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():n?0:f.scrollTop())*d,left:e.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"==this.cssPosition?
-this.scrollParent.scrollLeft():n?0:f.scrollLeft())*d}},_generatePosition:function(b){var e=this.options,d="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(d[0].tagName),n=b.pageX,h=b.pageY;if(this.originalPosition){var g;this.containment&&(this.relative_container?(g=this.relative_container.offset(),g=[this.containment[0]+g.left,this.containment[1]+g.top,this.containment[2]+
g.left,this.containment[3]+g.top]):g=this.containment,b.pageX-this.offset.click.left<g[0]&&(n=g[0]+this.offset.click.left),b.pageY-this.offset.click.top<g[1]&&(h=g[1]+this.offset.click.top),b.pageX-this.offset.click.left>g[2]&&(n=g[2]+this.offset.click.left),b.pageY-this.offset.click.top>g[3]&&(h=g[3]+this.offset.click.top));e.grid&&(h=e.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/e.grid[1])*e.grid[1]:this.originalPageY,h=g?h-this.offset.click.top<g[1]||h-this.offset.click.top>g[3]?
h-this.offset.click.top<g[1]?h+e.grid[1]:h-e.grid[1]:h:h,n=e.grid[0]?this.originalPageX+Math.round((n-this.originalPageX)/e.grid[0])*e.grid[0]:this.originalPageX,n=g?n-this.offset.click.left<g[0]||n-this.offset.click.left>g[2]?n-this.offset.click.left<g[0]?n+e.grid[0]:n-e.grid[0]:n:n)}return{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():f?0:d.scrollTop()),left:n-this.offset.click.left-this.offset.relative.left-
this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():f?0:d.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]==this.element[0]||this.cancelHelperRemoval||this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1},_trigger:function(b,e,d){d=d||this._uiHash();a.ui.plugin.call(this,b,[e,d]);"drag"==b&&(this.positionAbs=this._convertPositionTo("absolute"));return a.Widget.prototype._trigger.call(this,b,e,d)},plugins:{},
_uiHash:function(a){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});a.ui.plugin.add("draggable","connectToSortable",{start:function(b,e){var d=a(this).data("draggable"),f=d.options,n=a.extend({},e,{item:d.element});d.sortables=[];a(f.connectToSortable).each(function(){var e=a.data(this,"sortable");e&&!e.options.disabled&&(d.sortables.push({instance:e,shouldRevert:e.options.revert}),e.refreshPositions(),e._trigger("activate",b,n))})},
stop:function(b,e){var d=a(this).data("draggable"),f=a.extend({},e,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"==d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",
b,f))})},drag:function(b,e){var d=a(this).data("draggable"),f=this;a.each(d.sortables,function(n){var h=!1,g=this;this.instance.positionAbs=d.positionAbs;this.instance.helperProportions=d.helperProportions;this.instance.offset.click=d.offset.click;this.instance._intersectsWith(this.instance.containerCache)&&(h=!0,a.each(d.sortables,function(){this.instance.positionAbs=d.positionAbs;this.instance.helperProportions=d.helperProportions;this.instance.offset.click=d.offset.click;this!=g&&this.instance._intersectsWith(this.instance.containerCache)&&
a.ui.contains(g.instance.element[0],this.instance.element[0])&&(h=!1);return h}));h?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(f).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return e.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=
d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=
!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}});a.ui.plugin.add("draggable","cursor",{start:function(b,e){var d=a("body"),f=a(this).data("draggable").options;d.css("cursor")&&(f._cursor=d.css("cursor"));d.css("cursor",f.cursor)},stop:function(b,
e){var d=a(this).data("draggable").options;d._cursor&&a("body").css("cursor",d._cursor)}});a.ui.plugin.add("draggable","opacity",{start:function(b,e){var d=a(e.helper),f=a(this).data("draggable").options;d.css("opacity")&&(f._opacity=d.css("opacity"));d.css("opacity",f.opacity)},stop:function(b,e){var d=a(this).data("draggable").options;d._opacity&&a(e.helper).css("opacity",d._opacity)}});a.ui.plugin.add("draggable","scroll",{start:function(b,e){var d=a(this).data("draggable");d.scrollParent[0]!=
document&&"HTML"!=d.scrollParent[0].tagName&&(d.overflowOffset=d.scrollParent.offset())},drag:function(b,e){var d=a(this).data("draggable"),f=d.options,n=!1;d.scrollParent[0]!=document&&"HTML"!=d.scrollParent[0].tagName?(f.axis&&"x"==f.axis||(d.overflowOffset.top+d.scrollParent[0].offsetHeight-b.pageY<f.scrollSensitivity?d.scrollParent[0].scrollTop=n=d.scrollParent[0].scrollTop+f.scrollSpeed:b.pageY-d.overflowOffset.top<f.scrollSensitivity&&(d.scrollParent[0].scrollTop=n=d.scrollParent[0].scrollTop-
f.scrollSpeed)),f.axis&&"y"==f.axis||(d.overflowOffset.left+d.scrollParent[0].offsetWidth-b.pageX<f.scrollSensitivity?d.scrollParent[0].scrollLeft=n=d.scrollParent[0].scrollLeft+f.scrollSpeed:b.pageX-d.overflowOffset.left<f.scrollSensitivity&&(d.scrollParent[0].scrollLeft=n=d.scrollParent[0].scrollLeft-f.scrollSpeed))):(f.axis&&"x"==f.axis||(b.pageY-a(document).scrollTop()<f.scrollSensitivity?n=a(document).scrollTop(a(document).scrollTop()-f.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<
f.scrollSensitivity&&(n=a(document).scrollTop(a(document).scrollTop()+f.scrollSpeed))),f.axis&&"y"==f.axis||(b.pageX-a(document).scrollLeft()<f.scrollSensitivity?n=a(document).scrollLeft(a(document).scrollLeft()-f.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<f.scrollSensitivity&&(n=a(document).scrollLeft(a(document).scrollLeft()+f.scrollSpeed))));!1!==n&&a.ui.ddmanager&&!f.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,b)}});a.ui.plugin.add("draggable","snap",{start:function(b,
e){var d=a(this).data("draggable"),f=d.options;d.snapElements=[];a(f.snap.constructor!=String?f.snap.items||":data(draggable)":f.snap).each(function(){var b=a(this),c=b.offset();this!=d.element[0]&&d.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:c.top,left:c.left})})},drag:function(b,e){for(var d=a(this).data("draggable"),f=d.options,n=f.snapTolerance,h=e.offset.left,g=h+d.helperProportions.width,l=e.offset.top,m=l+d.helperProportions.height,p=d.snapElements.length-
1;0<=p;p--){var t=d.snapElements[p].left,r=t+d.snapElements[p].width,q=d.snapElements[p].top,w=q+d.snapElements[p].height;if(t-n<h&&h<r+n&&q-n<l&&l<w+n||t-n<h&&h<r+n&&q-n<m&&m<w+n||t-n<g&&g<r+n&&q-n<l&&l<w+n||t-n<g&&g<r+n&&q-n<m&&m<w+n){if("inner"!=f.snapMode){var u=Math.abs(q-m)<=n,x=Math.abs(w-l)<=n,z=Math.abs(t-g)<=n,y=Math.abs(r-h)<=n;u&&(e.position.top=d._convertPositionTo("relative",{top:q-d.helperProportions.height,left:0}).top-d.margins.top);x&&(e.position.top=d._convertPositionTo("relative",
{top:w,left:0}).top-d.margins.top);z&&(e.position.left=d._convertPositionTo("relative",{top:0,left:t-d.helperProportions.width}).left-d.margins.left);y&&(e.position.left=d._convertPositionTo("relative",{top:0,left:r}).left-d.margins.left)}var B=u||x||z||y;"outer"!=f.snapMode&&(u=Math.abs(q-l)<=n,x=Math.abs(w-m)<=n,z=Math.abs(t-h)<=n,y=Math.abs(r-g)<=n,u&&(e.position.top=d._convertPositionTo("relative",{top:q,left:0}).top-d.margins.top),x&&(e.position.top=d._convertPositionTo("relative",{top:w-d.helperProportions.height,
left:0}).top-d.margins.top),z&&(e.position.left=d._convertPositionTo("relative",{top:0,left:t}).left-d.margins.left),y&&(e.position.left=d._convertPositionTo("relative",{top:0,left:r-d.helperProportions.width}).left-d.margins.left));!d.snapElements[p].snapping&&(u||x||z||y||B)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[p].item}));d.snapElements[p].snapping=u||x||z||y||B}else d.snapElements[p].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,
b,a.extend(d._uiHash(),{snapItem:d.snapElements[p].item})),d.snapElements[p].snapping=!1}}});a.ui.plugin.add("draggable","stack",{start:function(b,e){var d=a(this).data("draggable").options,d=a.makeArray(a(d.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});if(d.length){var f=parseInt(d[0].style.zIndex)||0;a(d).each(function(a){this.style.zIndex=f+a});this[0].style.zIndex=f+d.length}}});a.ui.plugin.add("draggable","zIndex",{start:function(b,
e){var d=a(e.helper),f=a(this).data("draggable").options;d.css("zIndex")&&(f._zIndex=d.css("zIndex"));d.css("zIndex",f.zIndex)},stop:function(b,e){var d=a(this).data("draggable").options;d._zIndex&&a(e.helper).css("zIndex",d._zIndex)}})})(jQuery);
(function(a,b){a.widget("ui.droppable",{version:"1.9.1",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var b=this.options,e=b.accept;this.isover=0;this.isout=1;this.accept=a.isFunction(e)?e:function(a){return a.is(e)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};a.ui.ddmanager.droppables[b.scope]=a.ui.ddmanager.droppables[b.scope]||[];a.ui.ddmanager.droppables[b.scope].push(this);
b.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var b=a.ui.ddmanager.droppables[this.options.scope],e=0;e<b.length;e++)b[e]==this&&b.splice(e,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(b,e){"accept"==b&&(this.accept=a.isFunction(e)?e:function(a){return a.is(e)});a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(b){var e=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass);
e&&this._trigger("activate",b,this.ui(e))},_deactivate:function(b){var e=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);e&&this._trigger("deactivate",b,this.ui(e))},_over:function(b){var e=a.ui.ddmanager.current;e&&(e.currentItem||e.element)[0]!=this.element[0]&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",b,this.ui(e)))},_out:function(b){var e=
a.ui.ddmanager.current;e&&(e.currentItem||e.element)[0]!=this.element[0]&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(e)))},_drop:function(b,e){var d=e||a.ui.ddmanager.current;if(!d||(d.currentItem||d.element)[0]==this.element[0])return!1;var f=!1;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var b=a.data(this,"droppable");if(b.options.greedy&&
!b.options.disabled&&b.options.scope==d.options.scope&&b.accept.call(b.element[0],d.currentItem||d.element)&&a.ui.intersect(d,a.extend(b,{offset:b.element.offset()}),b.options.tolerance))return f=!0,!1});return f?!1:this.accept.call(this.element[0],d.currentItem||d.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(d)),this.element):!1},ui:function(a){return{draggable:a.currentItem||
a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}});a.ui.intersect=function(b,e,d){if(!e.offset)return!1;var f=(b.positionAbs||b.position.absolute).left,n=f+b.helperProportions.width,h=(b.positionAbs||b.position.absolute).top,g=h+b.helperProportions.height,l=e.offset.left,m=l+e.proportions.width,p=e.offset.top,t=p+e.proportions.height;switch(d){case "fit":return l<=f&&n<=m&&p<=h&&g<=t;case "intersect":return l<f+b.helperProportions.width/2&&n-b.helperProportions.width/2<m&&p<h+
b.helperProportions.height/2&&g-b.helperProportions.height/2<t;case "pointer":return a.ui.isOver((b.positionAbs||b.position.absolute).top+(b.clickOffset||b.offset.click).top,(b.positionAbs||b.position.absolute).left+(b.clickOffset||b.offset.click).left,p,l,e.proportions.height,e.proportions.width);case "touch":return(h>=p&&h<=t||g>=p&&g<=t||h<p&&g>t)&&(f>=l&&f<=m||n>=l&&n<=m||f<l&&n>m);default:return!1}};a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,e){var d=a.ui.ddmanager.droppables[b.options.scope]||
[],f=e?e.type:null,n=(b.currentItem||b.element).find(":data(droppable)").andSelf(),h=0;a:for(;h<d.length;h++)if(!(d[h].options.disabled||b&&!d[h].accept.call(d[h].element[0],b.currentItem||b.element))){for(var g=0;g<n.length;g++)if(n[g]==d[h].element[0]){d[h].proportions.height=0;continue a}d[h].visible="none"!=d[h].element.css("display");d[h].visible&&("mousedown"==f&&d[h]._activate.call(d[h],e),d[h].offset=d[h].element.offset(),d[h].proportions={width:d[h].element[0].offsetWidth,height:d[h].element[0].offsetHeight})}},
drop:function(b,e){var d=!1;a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance)&&(d=this._drop.call(this,e)||d),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,e)))});return d},dragStart:function(b,e){b.element.parentsUntil("body").bind("scroll.droppable",function(){b.options.refreshPositions||
a.ui.ddmanager.prepareOffsets(b,e)})},drag:function(b,e){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,e);a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var d=a.ui.intersect(b,this,this.options.tolerance);if(d=d||1!=this.isover?d&&0==this.isover?"isover":null:"isout"){var f;if(this.options.greedy){var n=this.options.scope,h=this.element.parents(":data(droppable)").filter(function(){return a.data(this,"droppable").options.scope===
n});h.length&&(f=a.data(h[0],"droppable"),f.greedyChild="isover"==d?1:0)}f&&"isover"==d&&(f.isover=0,f.isout=1,f._out.call(f,e));this[d]=1;this["isout"==d?"isover":"isout"]=0;this["isover"==d?"_over":"_out"].call(this,e);f&&"isout"==d&&(f.isout=0,f.isover=1,f._over.call(f,e))}}})},dragStop:function(b,e){b.element.parentsUntil("body").unbind("scroll.droppable");b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,e)}}})(jQuery);
(function(a,b){a.widget("ui.resizable",a.ui.mouse,{version:"1.9.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1E3},_create:function(){var b=this,c=this.options;this.element.addClass("ui-resizable");a.extend(this,{_aspectRatio:!!c.aspectRatio,aspectRatio:c.aspectRatio,originalElement:this.element,
_proportionallyResizeElements:[],_helper:c.helper||c.ghost||c.animate?c.helper||"ui-resizable-helper":null});this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(a('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),
this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",
zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize());this.handles=c.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var e=this.handles.split(",");
this.handles={};for(var h=0;h<e.length;h++){var g=a.trim(e[h]),l=a('<div class="ui-resizable-handle ui-resizable-'+g+'"></div>');l.css({zIndex:c.zIndex});"se"==g&&l.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[g]=".ui-resizable-"+g;this.element.append(l)}}this._renderAxis=function(b){b=b||this.element;for(var c in this.handles){this.handles[c].constructor==String&&(this.handles[c]=a(this.handles[c],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var d=
a(this.handles[c],this.element),e=0,e=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth(),d=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join("");b.css(d,e);this._proportionallyResize()}a(this.handles[c])}};this._renderAxis(this.element);this._handles=a(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!b.resizing){if(this.className)var a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);b.axis=
a&&a[1]?a[1]:"se"}});c.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").mouseenter(function(){c.disabled||(a(this).removeClass("ui-resizable-autohide"),b._handles.show())}).mouseleave(function(){c.disabled||b.resizing||(a(this).addClass("ui-resizable-autohide"),b._handles.hide())}));this._mouseInit()},_destroy:function(){this._mouseDestroy();var b=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};
if(this.elementIsWrapper){b(this.element);var c=this.element;this.originalElement.css({position:c.css("position"),width:c.outerWidth(),height:c.outerHeight(),top:c.css("top"),left:c.css("left")}).insertAfter(c);c.remove()}this.originalElement.css("resize",this.originalResizeStyle);b(this.originalElement);return this},_mouseCapture:function(b){var c=!1,e;for(e in this.handles)a(this.handles[e])[0]==b.target&&(c=!0);return!this.options.disabled&&c},_mouseStart:function(b){var e=this.options,n=this.element.position(),
h=this.element;this.resizing=!0;this.documentScroll={top:a(document).scrollTop(),left:a(document).scrollLeft()};(h.is(".ui-draggable")||/absolute/.test(h.css("position")))&&h.css({position:"absolute",top:n.top,left:n.left});this._renderProxy();var n=c(this.helper.css("left")),g=c(this.helper.css("top"));e.containment&&(n+=a(e.containment).scrollLeft()||0,g+=a(e.containment).scrollTop()||0);this.offset=this.helper.offset();this.position={left:n,top:g};this.size=this._helper?{width:h.outerWidth(),height:h.outerHeight()}:
{width:h.width(),height:h.height()};this.originalSize=this._helper?{width:h.outerWidth(),height:h.outerHeight()}:{width:h.width(),height:h.height()};this.originalPosition={left:n,top:g};this.sizeDiff={width:h.outerWidth()-h.width(),height:h.outerHeight()-h.height()};this.originalMousePosition={left:b.pageX,top:b.pageY};this.aspectRatio="number"==typeof e.aspectRatio?e.aspectRatio:this.originalSize.width/this.originalSize.height||1;e=a(".ui-resizable-"+this.axis).css("cursor");a("body").css("cursor",
"auto"==e?this.axis+"-resize":e);h.addClass("ui-resizable-resizing");this._propagate("start",b);return!0},_mouseDrag:function(a){var b=this.helper,c=this.originalMousePosition,e=this._change[this.axis];if(!e)return!1;c=e.apply(this,[a,a.pageX-c.left||0,a.pageY-c.top||0]);this._updateVirtualBoundaries(a.shiftKey);if(this._aspectRatio||a.shiftKey)c=this._updateRatio(c,a);c=this._respectSize(c,a);this._propagate("resize",a);b.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+
"px",height:this.size.height+"px"});!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();this._updateCache(c);this._trigger("resize",a,this.ui());return!1},_mouseStop:function(b){this.resizing=!1;var c=this.options;if(this._helper){var e=this._proportionallyResizeElements,h=e.length&&/textarea/i.test(e[0].nodeName),e=h&&a.ui.hasScroll(e[0],"left")?0:this.sizeDiff.height,h=h?0:this.sizeDiff.width,h={width:this.helper.width()-h,height:this.helper.height()-e},e=parseInt(this.element.css("left"),
10)+(this.position.left-this.originalPosition.left)||null,g=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null;c.animate||this.element.css(a.extend(h,{top:g,left:e}));this.helper.height(this.size.height);this.helper.width(this.size.width);this._helper&&!c.animate&&this._proportionallyResize()}a("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",b);this._helper&&this.helper.remove();return!1},_updateVirtualBoundaries:function(a){var b=
this.options,c,h,g,b={minWidth:e(b.minWidth)?b.minWidth:0,maxWidth:e(b.maxWidth)?b.maxWidth:Infinity,minHeight:e(b.minHeight)?b.minHeight:0,maxHeight:e(b.maxHeight)?b.maxHeight:Infinity};if(this._aspectRatio||a)a=b.minHeight*this.aspectRatio,h=b.minWidth/this.aspectRatio,c=b.maxHeight*this.aspectRatio,g=b.maxWidth/this.aspectRatio,a>b.minWidth&&(b.minWidth=a),h>b.minHeight&&(b.minHeight=h),c<b.maxWidth&&(b.maxWidth=c),g<b.maxHeight&&(b.maxHeight=g);this._vBoundaries=b},_updateCache:function(a){this.offset=
this.helper.offset();e(a.left)&&(this.position.left=a.left);e(a.top)&&(this.position.top=a.top);e(a.height)&&(this.size.height=a.height);e(a.width)&&(this.size.width=a.width)},_updateRatio:function(a,b){var c=this.position,h=this.size,g=this.axis;e(a.height)?a.width=a.height*this.aspectRatio:e(a.width)&&(a.height=a.width/this.aspectRatio);"sw"==g&&(a.left=c.left+(h.width-a.width),a.top=null);"nw"==g&&(a.top=c.top+(h.height-a.height),a.left=c.left+(h.width-a.width));return a},_respectSize:function(a,
b){var c=this._vBoundaries,h=this.axis,g=e(a.width)&&c.maxWidth&&c.maxWidth<a.width,l=e(a.height)&&c.maxHeight&&c.maxHeight<a.height,m=e(a.width)&&c.minWidth&&c.minWidth>a.width,p=e(a.height)&&c.minHeight&&c.minHeight>a.height;m&&(a.width=c.minWidth);p&&(a.height=c.minHeight);g&&(a.width=c.maxWidth);l&&(a.height=c.maxHeight);var t=this.originalPosition.left+this.originalSize.width,r=this.position.top+this.size.height,q=/sw|nw|w/.test(h),h=/nw|ne|n/.test(h);m&&q&&(a.left=t-c.minWidth);g&&q&&(a.left=
t-c.maxWidth);p&&h&&(a.top=r-c.minHeight);l&&h&&(a.top=r-c.maxHeight);(c=!a.width&&!a.height)&&!a.left&&a.top?a.top=null:c&&!a.top&&a.left&&(a.left=null);return a},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var b=this.helper||this.element,c=0;c<this._proportionallyResizeElements.length;c++){var e=this._proportionallyResizeElements[c];if(!this.borderDif){var h=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],
g=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];this.borderDif=a.map(h,function(a,b){var c=parseInt(a,10)||0,d=parseInt(g[b],10)||0;return c+d})}e.css({height:b.height()-this.borderDif[0]-this.borderDif[2]||0,width:b.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var b=this.options;this.elementOffset=this.element.offset();if(this._helper){this.helper=this.helper||a('<div style="overflow:hidden;"></div>');var c=a.ui.ie6?1:0,e=a.ui.ie6?
2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+e,height:this.element.outerHeight()+e,position:"absolute",left:this.elementOffset.left-c+"px",top:this.elementOffset.top-c+"px",zIndex:++b.zIndex});this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(a,b,c){return{width:this.originalSize.width+b}},w:function(a,b,c){return{left:this.originalPosition.left+b,width:this.originalSize.width-b}},n:function(a,b,c){return{top:this.originalPosition.top+
c,height:this.originalSize.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,e){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,e]))},sw:function(b,c,e){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,e]))},ne:function(b,c,e){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,e]))},nw:function(b,c,e){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,
[b,c,e]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]);"resize"!=b&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});a.ui.plugin.add("resizable","alsoResize",{start:function(b,c){var e=a(this).data("resizable").options,h=function(b){a(b).each(function(){var b=a(this);b.data("resizable-alsoresize",
{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})};"object"!=typeof e.alsoResize||e.alsoResize.parentNode?h(e.alsoResize):e.alsoResize.length?(e.alsoResize=e.alsoResize[0],h(e.alsoResize)):a.each(e.alsoResize,function(a){h(a)})},resize:function(b,c){var e=a(this).data("resizable"),h=e.options,g=e.originalSize,l=e.originalPosition,m={height:e.size.height-g.height||0,width:e.size.width-g.width||0,top:e.position.top-l.top||
0,left:e.position.left-l.left||0},p=function(b,d){a(b).each(function(){var b=a(this),e=a(this).data("resizable-alsoresize"),g={},h=d&&d.length?d:b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(h,function(a,b){var c=(e[b]||0)+(m[b]||0);c&&0<=c&&(g[b]=c||null)});b.css(g)})};"object"!=typeof h.alsoResize||h.alsoResize.nodeType?p(h.alsoResize):a.each(h.alsoResize,function(a,b){p(a,b)})},stop:function(b,c){a(this).removeData("resizable-alsoresize")}});a.ui.plugin.add("resizable",
"animate",{stop:function(b,c){var e=a(this).data("resizable"),h=e.options,g=e._proportionallyResizeElements,l=g.length&&/textarea/i.test(g[0].nodeName),m=l&&a.ui.hasScroll(g[0],"left")?0:e.sizeDiff.height,l={width:e.size.width-(l?0:e.sizeDiff.width),height:e.size.height-m},m=parseInt(e.element.css("left"),10)+(e.position.left-e.originalPosition.left)||null,p=parseInt(e.element.css("top"),10)+(e.position.top-e.originalPosition.top)||null;e.element.animate(a.extend(l,p&&m?{top:p,left:m}:{}),{duration:h.animateDuration,
easing:h.animateEasing,step:function(){var c={width:parseInt(e.element.css("width"),10),height:parseInt(e.element.css("height"),10),top:parseInt(e.element.css("top"),10),left:parseInt(e.element.css("left"),10)};g&&g.length&&a(g[0]).css({width:c.width,height:c.height});e._updateCache(c);e._propagate("resize",b)}})}});a.ui.plugin.add("resizable","containment",{start:function(b,e){var n=a(this).data("resizable"),h=n.element,g=n.options.containment;if(h=g instanceof a?g.get(0):/parent/.test(g)?h.parent().get(0):
g)if(n.containerElement=a(h),/document/.test(g)||g==document)n.containerOffset={left:0,top:0},n.containerPosition={left:0,top:0},n.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight};else{var l=a(h),m=[];a(["Top","Right","Left","Bottom"]).each(function(a,b){m[a]=c(l.css("padding"+b))});n.containerOffset=l.offset();n.containerPosition=l.position();n.containerSize={height:l.innerHeight()-m[3],width:l.innerWidth()-
m[1]};var g=n.containerOffset,p=n.containerSize.height,t=n.containerSize.width,t=a.ui.hasScroll(h,"left")?h.scrollWidth:t,p=a.ui.hasScroll(h)?h.scrollHeight:p;n.parentData={element:h,left:g.left,top:g.top,width:t,height:p}}},resize:function(b,c){var e=a(this).data("resizable"),h=e.options,g=e.containerOffset,l=e.position,m=e._aspectRatio||b.shiftKey,p={top:0,left:0},t=e.containerElement;t[0]!=document&&/static/.test(t.css("position"))&&(p=g);l.left<(e._helper?g.left:0)&&(e.size.width+=e._helper?e.position.left-
g.left:e.position.left-p.left,m&&(e.size.height=e.size.width/e.aspectRatio),e.position.left=h.helper?g.left:0);l.top<(e._helper?g.top:0)&&(e.size.height+=e._helper?e.position.top-g.top:e.position.top,m&&(e.size.width=e.size.height*e.aspectRatio),e.position.top=e._helper?g.top:0);e.offset.left=e.parentData.left+e.position.left;e.offset.top=e.parentData.top+e.position.top;h=Math.abs(e.offset.left-p.left+e.sizeDiff.width);g=Math.abs((e._helper?e.offset.top-p.top:e.offset.top-g.top)+e.sizeDiff.height);
p=e.containerElement.get(0)==e.element.parent().get(0);l=/relative|absolute/.test(e.containerElement.css("position"));p&&l&&(h-=e.parentData.left);h+e.size.width>=e.parentData.width&&(e.size.width=e.parentData.width-h,m&&(e.size.height=e.size.width/e.aspectRatio));g+e.size.height>=e.parentData.height&&(e.size.height=e.parentData.height-g,m&&(e.size.width=e.size.height*e.aspectRatio))},stop:function(b,c){var e=a(this).data("resizable"),h=e.options,g=e.containerOffset,l=e.containerPosition,m=e.containerElement,
p=a(e.helper),t=p.offset(),r=p.outerWidth()-e.sizeDiff.width,p=p.outerHeight()-e.sizeDiff.height;e._helper&&!h.animate&&/relative/.test(m.css("position"))&&a(this).css({left:t.left-l.left-g.left,width:r,height:p});e._helper&&!h.animate&&/static/.test(m.css("position"))&&a(this).css({left:t.left-l.left-g.left,width:r,height:p})}});a.ui.plugin.add("resizable","ghost",{start:function(b,c){var e=a(this).data("resizable"),h=e.options,g=e.size;e.ghost=e.originalElement.clone();e.ghost.css({opacity:.25,
display:"block",position:"relative",height:g.height,width:g.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof h.ghost?h.ghost:"");e.ghost.appendTo(e.helper)},resize:function(b,c){var e=a(this).data("resizable");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(b,c){var e=a(this).data("resizable");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}});a.ui.plugin.add("resizable","grid",{resize:function(b,
c){var e=a(this).data("resizable"),h=e.options,g=e.size,l=e.originalSize,m=e.originalPosition,p=e.axis;h.grid="number"==typeof h.grid?[h.grid,h.grid]:h.grid;var t=Math.round((g.width-l.width)/(h.grid[0]||1))*(h.grid[0]||1),h=Math.round((g.height-l.height)/(h.grid[1]||1))*(h.grid[1]||1);/^(se|s|e)$/.test(p)?(e.size.width=l.width+t,e.size.height=l.height+h):/^(ne)$/.test(p)?(e.size.width=l.width+t,e.size.height=l.height+h,e.position.top=m.top-h):(/^(sw)$/.test(p)?(e.size.width=l.width+t,e.size.height=
l.height+h):(e.size.width=l.width+t,e.size.height=l.height+h,e.position.top=m.top-h),e.position.left=m.left-t)}});var c=function(a){return parseInt(a,10)||0},e=function(a){return!isNaN(parseInt(a,10))}})(jQuery);
(function(a,b){a.widget("ui.selectable",a.ui.mouse,{version:"1.9.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var b=this;this.element.addClass("ui-selectable");this.dragged=!1;var e;this.refresh=function(){e=a(b.options.filter,b.element[0]);e.addClass("ui-selectee");e.each(function(){var b=a(this),c=b.offset();a.data(this,"selectable-item",{element:this,$element:b,left:c.left,top:c.top,right:c.left+b.outerWidth(),bottom:c.top+b.outerHeight(),
startselected:!1,selected:b.hasClass("ui-selected"),selecting:b.hasClass("ui-selecting"),unselecting:b.hasClass("ui-unselecting")})})};this.refresh();this.selectees=e.addClass("ui-selectee");this._mouseInit();this.helper=a("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled");this._mouseDestroy()},_mouseStart:function(b){var e=this;this.opos=[b.pageX,
b.pageY];if(!this.options.disabled){var d=this.options;this.selectees=a(d.filter,this.element[0]);this._trigger("start",b);a(d.appendTo).append(this.helper);this.helper.css({left:b.clientX,top:b.clientY,width:0,height:0});d.autoRefresh&&this.refresh();this.selectees.filter(".ui-selected").each(function(){var d=a.data(this,"selectable-item");d.startselected=!0;b.metaKey||b.ctrlKey||(d.$element.removeClass("ui-selected"),d.selected=!1,d.$element.addClass("ui-unselecting"),d.unselecting=!0,e._trigger("unselecting",
b,{unselecting:d.element}))});a(b.target).parents().andSelf().each(function(){var d=a.data(this,"selectable-item");if(d){var n=!b.metaKey&&!b.ctrlKey||!d.$element.hasClass("ui-selected");d.$element.removeClass(n?"ui-unselecting":"ui-selected").addClass(n?"ui-selecting":"ui-unselecting");d.unselecting=!n;d.selecting=n;(d.selected=n)?e._trigger("selecting",b,{selecting:d.element}):e._trigger("unselecting",b,{unselecting:d.element});return!1}})}},_mouseDrag:function(b){var e=this;this.dragged=!0;if(!this.options.disabled){var d=
this.options,f=this.opos[0],n=this.opos[1],h=b.pageX,g=b.pageY;if(f>h)var l=h,h=f,f=l;n>g&&(l=g,g=n,n=l);this.helper.css({left:f,top:n,width:h-f,height:g-n});this.selectees.each(function(){var l=a.data(this,"selectable-item");if(l&&l.element!=e.element[0]){var p=!1;"touch"==d.tolerance?p=!(l.left>h||l.right<f||l.top>g||l.bottom<n):"fit"==d.tolerance&&(p=l.left>f&&l.right<h&&l.top>n&&l.bottom<g);p?(l.selected&&(l.$element.removeClass("ui-selected"),l.selected=!1),l.unselecting&&(l.$element.removeClass("ui-unselecting"),
l.unselecting=!1),l.selecting||(l.$element.addClass("ui-selecting"),l.selecting=!0,e._trigger("selecting",b,{selecting:l.element}))):(l.selecting&&((b.metaKey||b.ctrlKey)&&l.startselected?(l.$element.removeClass("ui-selecting"),l.selecting=!1,l.$element.addClass("ui-selected"),l.selected=!0):(l.$element.removeClass("ui-selecting"),l.selecting=!1,l.startselected&&(l.$element.addClass("ui-unselecting"),l.unselecting=!0),e._trigger("unselecting",b,{unselecting:l.element}))),!l.selected||b.metaKey||b.ctrlKey||
l.startselected||(l.$element.removeClass("ui-selected"),l.selected=!1,l.$element.addClass("ui-unselecting"),l.unselecting=!0,e._trigger("unselecting",b,{unselecting:l.element})))}});return!1}},_mouseStop:function(b){var e=this;this.dragged=!1;a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-unselecting");d.unselecting=!1;d.startselected=!1;e._trigger("unselected",b,{unselected:d.element})});a(".ui-selecting",this.element[0]).each(function(){var d=
a.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected");d.selecting=!1;d.selected=!0;d.startselected=!0;e._trigger("selected",b,{selected:d.element})});this._trigger("stop",b);this.helper.remove();return!1}})})(jQuery);
(function(a,b){a.widget("ui.sortable",a.ui.mouse,{version:"1.9.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3},_create:function(){var a=this.options;this.containerCache={};this.element.addClass("ui-sortable");
this.refresh();this.floating=this.items.length?"x"===a.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1;this.offset=this.element.offset();this._mouseInit();this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled");this._mouseDestroy();for(var a=this.items.length-1;0<=a;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_setOption:function(b,e){"disabled"===b?(this.options[b]=
e,this.widget().toggleClass("ui-sortable-disabled",!!e)):a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(b,e){var d=this;if(this.reverting||this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(b);var f=null;a(b.target).parents().each(function(){if(a.data(this,d.widgetName+"-item")==d)return f=a(this),!1});a.data(b.target,d.widgetName+"-item")==d&&(f=a(b.target));if(!f)return!1;if(this.options.handle&&!e){var n=!1;a(this.options.handle,f).find("*").andSelf().each(function(){this==
b.target&&(n=!0)});if(!n)return!1}this.currentItem=f;this._removeCurrentsFromItems();return!0},_mouseStart:function(b,e,d){e=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(b);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};a.extend(this.offset,{click:{left:b.pageX-this.offset.left,
top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(b);this.originalPageX=b.pageX;this.originalPageY=b.pageY;e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};this.helper[0]!=this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();
e.containment&&this._setContainment();e.cursor&&(a("body").css("cursor")&&(this._storedCursor=a("body").css("cursor")),a("body").css("cursor",e.cursor));e.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",e.opacity));e.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",e.zIndex));this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset());
this._trigger("start",b,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!d)for(d=this.containers.length-1;0<=d;d--)this.containers[d]._trigger("activate",b,this._uiHash(this));a.ui.ddmanager&&(a.ui.ddmanager.current=this);a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b);this.dragging=!0;this.helper.addClass("ui-sortable-helper");this._mouseDrag(b);return!0},_mouseDrag:function(b){this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");
this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var e=this.options,d=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<e.scrollSensitivity?this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop+e.scrollSpeed:b.pageY-this.overflowOffset.top<e.scrollSensitivity&&(this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop-e.scrollSpeed),this.overflowOffset.left+
this.scrollParent[0].offsetWidth-b.pageX<e.scrollSensitivity?this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft+e.scrollSpeed:b.pageX-this.overflowOffset.left<e.scrollSensitivity&&(this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft-e.scrollSpeed)):(b.pageY-a(document).scrollTop()<e.scrollSensitivity?d=a(document).scrollTop(a(document).scrollTop()-e.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<e.scrollSensitivity&&(d=a(document).scrollTop(a(document).scrollTop()+
e.scrollSpeed)),b.pageX-a(document).scrollLeft()<e.scrollSensitivity?d=a(document).scrollLeft(a(document).scrollLeft()-e.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<e.scrollSensitivity&&(d=a(document).scrollLeft(a(document).scrollLeft()+e.scrollSpeed)));!1!==d&&a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)}this.positionAbs=this._convertPositionTo("absolute");this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px");
this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(e=this.items.length-1;0<=e;e--){var d=this.items[e],f=d.item[0],n=this._intersectsWithPointer(d);if(n&&d.instance===this.currentContainer&&f!=this.currentItem[0]&&this.placeholder[1==n?"next":"prev"]()[0]!=f&&!a.contains(this.placeholder[0],f)&&("semi-dynamic"==this.options.type?!a.contains(this.element[0],f):1)){this.direction=1==n?"down":"up";if("pointer"==this.options.tolerance||this._intersectsWithSides(d))this._rearrange(b,
d);else break;this._trigger("change",b,this._uiHash());break}}this._contactContainers(b);a.ui.ddmanager&&a.ui.ddmanager.drag(this,b);this._trigger("sort",b,this._uiHash());this.lastPositionAbs=this.positionAbs;return!1},_mouseStop:function(b,e){if(b){a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b);if(this.options.revert){var d=this,f=this.placeholder.offset();this.reverting=!0;a(this.helper).animate({left:f.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==
document.body?0:this.offsetParent[0].scrollLeft),top:f.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){d._clear(b)})}else this._clear(b,e);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var b=this.containers.length-1;0<=b;b--)this.containers[b]._trigger("deactivate",
null,this._uiHash(this)),this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",null,this._uiHash(this)),this.containers[b].containerCache.over=0)}this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):
a(this.domPosition.parent).prepend(this.currentItem));return this},serialize:function(b){var e=this._getItemsAsjQuery(b&&b.connected),d=[];b=b||{};a(e).each(function(){var e=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[-=_](.+)/);e&&d.push((b.key||e[1]+"[]")+"="+(b.key&&b.expression?e[1]:e[2]))});!d.length&&b.key&&d.push(b.key+"=");return d.join("&")},toArray:function(b){var e=this._getItemsAsjQuery(b&&b.connected),d=[];b=b||{};e.each(function(){d.push(a(b.item||this).attr(b.attribute||
"id")||"")});return d},_intersectsWith:function(a){var b=this.positionAbs.left,d=b+this.helperProportions.width,f=this.positionAbs.top,n=f+this.helperProportions.height,h=a.left,g=h+a.width,l=a.top,m=l+a.height,p=this.offset.click.top,t=this.offset.click.left;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?f+p>l&&f+p<m&&b+t>h&&b+t<g:h<b+this.helperProportions.width/
2&&d-this.helperProportions.width/2<g&&l<f+this.helperProportions.height/2&&n-this.helperProportions.height/2<m},_intersectsWithPointer:function(b){var e="x"===this.options.axis||a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top,b.height);b="y"===this.options.axis||a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left,b.width);e=e&&b;b=this._getDragVerticalDirection();var d=this._getDragHorizontalDirection();return e?this.floating?d&&"right"==d||"down"==b?2:1:b&&("down"==
b?2:1):!1},_intersectsWithSides:function(b){var e=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top+b.height/2,b.height);b=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left+b.width/2,b.width);var d=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return this.floating&&f?"right"==f&&b||"left"==f&&!b:d&&("down"==d&&e||"up"==d&&!e)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!=a&&(0<a?"down":"up")},
_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!=a&&(0<a?"right":"left")},refresh:function(a){this._refreshItems(a);this.refreshPositions();return this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){var e=[],d=[],f=this._connectWith();if(f&&b)for(b=f.length-1;0<=b;b--)for(var n=a(f[b]),h=n.length-1;0<=h;h--){var g=a.data(n[h],this.widgetName);g&&
g!=this&&!g.options.disabled&&d.push([a.isFunction(g.options.items)?g.options.items.call(g.element):a(g.options.items,g.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),g])}d.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(b=d.length-1;0<=b;b--)d[b][0].each(function(){e.push(this)});return a(e)},_removeCurrentsFromItems:function(){var b=
this.currentItem.find(":data("+this.widgetName+"-item)");this.items=a.grep(this.items,function(a){for(var d=0;d<b.length;d++)if(b[d]==a.item[0])return!1;return!0})},_refreshItems:function(b){this.items=[];this.containers=[this];var e=this.items,d=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],f=this._connectWith();if(f&&this.ready)for(var n=f.length-1;0<=n;n--)for(var h=a(f[n]),g=h.length-1;0<=g;g--){var l=
a.data(h[g],this.widgetName);l&&l!=this&&!l.options.disabled&&(d.push([a.isFunction(l.options.items)?l.options.items.call(l.element[0],b,{item:this.currentItem}):a(l.options.items,l.element),l]),this.containers.push(l))}for(n=d.length-1;0<=n;n--)for(b=d[n][1],f=d[n][0],g=0,h=f.length;g<h;g++)l=a(f[g]),l.data(this.widgetName+"-item",b),e.push({item:l,instance:b,width:0,height:0,left:0,top:0})},refreshPositions:function(b){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());
for(var e=this.items.length-1;0<=e;e--){var d=this.items[e];if(d.instance==this.currentContainer||!this.currentContainer||d.item[0]==this.currentItem[0]){var f=this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item;b||(d.width=f.outerWidth(),d.height=f.outerHeight());f=f.offset();d.left=f.left;d.top=f.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(e=this.containers.length-1;0<=e;e--)f=this.containers[e].element.offset(),
this.containers[e].containerCache.left=f.left,this.containers[e].containerCache.top=f.top,this.containers[e].containerCache.width=this.containers[e].element.outerWidth(),this.containers[e].containerCache.height=this.containers[e].element.outerHeight();return this},_createPlaceholder:function(b){b=b||this;var e=b.options;if(!e.placeholder||e.placeholder.constructor==String){var d=e.placeholder;e.placeholder={element:function(){var e=a(document.createElement(b.currentItem[0].nodeName)).addClass(d||
b.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];d||(e.style.visibility="hidden");return e},update:function(a,n){if(!d||e.forcePlaceholderSize)n.height()||n.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10))}}}b.placeholder=a(e.placeholder.element.call(b.element,
b.currentItem));b.currentItem.after(b.placeholder);e.placeholder.update(b,b.placeholder)},_contactContainers:function(b){for(var e=null,d=null,f=this.containers.length-1;0<=f;f--)a.contains(this.currentItem[0],this.containers[f].element[0])||(this._intersectsWith(this.containers[f].containerCache)?e&&a.contains(this.containers[f].element[0],e.element[0])||(e=this.containers[f],d=f):this.containers[f].containerCache.over&&(this.containers[f]._trigger("out",b,this._uiHash(this)),this.containers[f].containerCache.over=
0));if(e)if(1===this.containers.length)this.containers[d]._trigger("over",b,this._uiHash(this)),this.containers[d].containerCache.over=1;else{for(var e=1E4,f=null,n=this.containers[d].floating?"left":"top",h=this.containers[d].floating?"width":"height",g=this.positionAbs[n]+this.offset.click[n],l=this.items.length-1;0<=l;l--)if(a.contains(this.containers[d].element[0],this.items[l].item[0])&&this.items[l].item[0]!=this.currentItem[0]){var m=this.items[l].item.offset()[n],p=!1;Math.abs(m-g)>Math.abs(m+
this.items[l][h]-g)&&(p=!0,m+=this.items[l][h]);Math.abs(m-g)<e&&(e=Math.abs(m-g),f=this.items[l],this.direction=p?"up":"down")}if(f||this.options.dropOnEmpty)this.currentContainer=this.containers[d],f?this._rearrange(b,f,null,!0):this._rearrange(b,null,this.containers[d].element,!0),this._trigger("change",b,this._uiHash()),this.containers[d]._trigger("change",b,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[d]._trigger("over",b,this._uiHash(this)),
this.containers[d].containerCache.over=1}},_createHelper:function(b){var e=this.options;b=a.isFunction(e.helper)?a(e.helper.apply(this.element[0],[b,this.currentItem])):"clone"==e.helper?this.currentItem.clone():this.currentItem;b.parents("body").length||a("parent"!=e.appendTo?e.appendTo:this.currentItem[0].parentNode)[0].appendChild(b[0]);b[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),
top:this.currentItem.css("top"),left:this.currentItem.css("left")});(""==b[0].style.width||e.forceHelperSize)&&b.width(this.currentItem.width());(""==b[0].style.height||e.forceHelperSize)&&b.height(this.currentItem.height());return b},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" "));a.isArray(b)&&(b={left:+b[0],top:+b[1]||0});"left"in b&&(this.offset.click.left=b.left+this.margins.left);"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left);
"top"in b&&(this.offset.click.top=b.top+this.margins.top);"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&
"html"==this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,
left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;"parent"==b.containment&&(b.containment=this.helper[0].parentNode);if("document"==b.containment||"window"==b.containment)this.containment=[0-this.offset.relative.left-this.offset.parent.left,
0-this.offset.relative.top-this.offset.parent.top,a("document"==b.containment?document:window).width()-this.helperProportions.width-this.margins.left,(a("document"==b.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)){var e=a(b.containment)[0],b=a(b.containment).offset(),d="hidden"!=a(e).css("overflow");this.containment=[b.left+(parseInt(a(e).css("borderLeftWidth"),10)||
0)+(parseInt(a(e).css("paddingLeft"),10)||0)-this.margins.left,b.top+(parseInt(a(e).css("borderTopWidth"),10)||0)+(parseInt(a(e).css("paddingTop"),10)||0)-this.margins.top,b.left+(d?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(a(e).css("borderLeftWidth"),10)||0)-(parseInt(a(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,b.top+(d?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(a(e).css("borderTopWidth"),10)||0)-(parseInt(a(e).css("paddingBottom"),
10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(b,e){e||(e=this.position);var d="absolute"==b?1:-1,f="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,n=/(html|body)/i.test(f[0].tagName);return{top:e.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():n?0:f.scrollTop())*d,left:e.left+this.offset.relative.left*
d+this.offset.parent.left*d-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():n?0:f.scrollLeft())*d}},_generatePosition:function(b){var e=this.options,d="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(d[0].tagName);"relative"!=this.cssPosition||this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());
var n=b.pageX,h=b.pageY;this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(n=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(h=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(n=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(h=this.containment[3]+this.offset.click.top)),e.grid&&(h=this.originalPageY+Math.round((h-
this.originalPageY)/e.grid[1])*e.grid[1],h=this.containment?h-this.offset.click.top<this.containment[1]||h-this.offset.click.top>this.containment[3]?h-this.offset.click.top<this.containment[1]?h+e.grid[1]:h-e.grid[1]:h:h,n=this.originalPageX+Math.round((n-this.originalPageX)/e.grid[0])*e.grid[0],n=this.containment?n-this.offset.click.left<this.containment[0]||n-this.offset.click.left>this.containment[2]?n-this.offset.click.left<this.containment[0]?n+e.grid[0]:n-e.grid[0]:n:n));return{top:h-this.offset.click.top-
this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():f?0:d.scrollTop()),left:n-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():f?0:d.scrollLeft())}},_rearrange:function(a,b,d,f){d?d[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?b.item[0]:b.item[0].nextSibling);var n=this.counter=this.counter?++this.counter:
1;this._delay(function(){n==this.counter&&this.refreshPositions(!f)})},_clear:function(b,e){this.reverting=!1;var d=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var f in this._storedCSS)if("auto"==this._storedCSS[f]||"static"==this._storedCSS[f])this._storedCSS[f]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&
!e&&d.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))});!this.fromOutside&&this.domPosition.prev==this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent==this.currentItem.parent()[0]||e||d.push(function(a){this._trigger("update",a,this._uiHash())});this===this.currentContainer||e||(d.push(function(a){this._trigger("remove",a,this._uiHash())}),d.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}}.call(this,this.currentContainer)),
d.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.currentContainer)));for(f=this.containers.length-1;0<=f;f--)e||d.push(function(a){return function(b){a._trigger("deactivate",b,this._uiHash(this))}}.call(this,this.containers[f])),this.containers[f].containerCache.over&&(d.push(function(a){return function(b){a._trigger("out",b,this._uiHash(this))}}.call(this,this.containers[f])),this.containers[f].containerCache.over=0);this._storedCursor&&a("body").css("cursor",
this._storedCursor);this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex);this.dragging=!1;if(this.cancelHelperRemoval){if(!e){this._trigger("beforeStop",b,this._uiHash());for(f=0;f<d.length;f++)d[f].call(this,b);this._trigger("stop",b,this._uiHash())}return this.fromOutside=!1}e||this._trigger("beforeStop",b,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.helper[0]!=
this.currentItem[0]&&this.helper.remove();this.helper=null;if(!e){for(f=0;f<d.length;f++)d[f].call(this,b);this._trigger("stop",b,this._uiHash())}this.fromOutside=!1;return!0},_trigger:function(){!1===a.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(b){var e=b||this;return{helper:e.helper,placeholder:e.placeholder||a([]),position:e.position,originalPosition:e.originalPosition,offset:e.positionAbs,item:e.currentItem,sender:b?b.element:null}}})})(jQuery);
(function(a,b){var c=0,e={},d={};e.height=e.paddingTop=e.paddingBottom=e.borderTopWidth=e.borderBottomWidth="hide";d.height=d.paddingTop=d.paddingBottom=d.borderTopWidth=d.borderBottomWidth="show";a.widget("ui.accordion",{version:"1.9.1",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var b=this.accordionId=
"ui-accordion-"+(this.element.attr("id")||++c),d=this.options;this.prevShow=this.prevHide=a();this.element.addClass("ui-accordion ui-widget ui-helper-reset");this.headers=this.element.find(d.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all");this._hoverable(this.headers);this._focusable(this.headers);this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").hide();d.collapsible||!1!==d.active&&null!=d.active||(d.active=
0);0>d.active&&(d.active+=this.headers.length);this.active=this._findActive(d.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top");this.active.next().addClass("ui-accordion-content-active").show();this._createIcons();this.refresh();this.element.attr("role","tablist");this.headers.attr("role","tab").each(function(c){var d=a(this),e=d.attr("id"),m=d.next(),p=m.attr("id");e||(e=b+"-header-"+c,d.attr("id",e));p||(p=b+"-panel-"+c,m.attr("id",p));d.attr("aria-controls",
p);m.attr("aria-labelledby",e)}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide();this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0);this._on(this.headers,{keydown:"_keydown"});this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._setupEvents(d.event)},
_getCreateEventData:function(){return{header:this.active,content:this.active.length?this.active.next():a()}},_createIcons:function(){var b=this.options.icons;b&&(a("<span>").addClass("ui-accordion-header-icon ui-icon "+b.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(b.header).addClass(b.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},
_destroy:function(){var a;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")});this._destroyIcons();a=this.headers.next().css("display",
"").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")});"content"!==this.options.heightStyle&&a.css("height","")},_setOption:function(a,b){"active"===a?this._activate(b):("event"===a&&(this.options.event&&this._off(this.headers,this.options.event),
this._setupEvents(b)),this._super(a,b),"collapsible"!==a||b||!1!==this.options.active||this._activate(0),"icons"===a&&(this._destroyIcons(),b&&this._createIcons()),"disabled"===a&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!b))},_keydown:function(b){if(!b.altKey&&!b.ctrlKey){var c=a.ui.keyCode,d=this.headers.length,e=this.headers.index(b.target),l=!1;switch(b.keyCode){case c.RIGHT:case c.DOWN:l=this.headers[(e+1)%d];break;case c.LEFT:case c.UP:l=this.headers[(e-1+d)%d];
break;case c.SPACE:case c.ENTER:this._eventHandler(b);break;case c.HOME:l=this.headers[0];break;case c.END:l=this.headers[d-1]}l&&(a(b.target).attr("tabIndex",-1),a(l).attr("tabIndex",0),l.focus(),b.preventDefault())}},_panelKeyDown:function(b){b.keyCode===a.ui.keyCode.UP&&b.ctrlKey&&a(b.currentTarget).prev().focus()},refresh:function(){var b,c,d=this.options.heightStyle,e=this.element.parent();"fill"===d?(a.support.minHeight||(c=e.css("overflow"),e.css("overflow","hidden")),b=e.height(),this.element.siblings(":visible").each(function(){var c=
a(this),d=c.css("position");"absolute"!==d&&"fixed"!==d&&(b-=c.outerHeight(!0))}),c&&e.css("overflow",c),this.headers.each(function(){b-=a(this).outerHeight(!0)}),this.headers.next().each(function(){a(this).height(Math.max(0,b-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")):"auto"===d&&(b=0,this.headers.next().each(function(){b=Math.max(b,a(this).height("").height())}).height(b))},_activate:function(b){b=this._findActive(b)[0];b!==this.active[0]&&(b=b||this.active[0],this._eventHandler({target:b,
currentTarget:b,preventDefault:a.noop}))},_findActive:function(b){return"number"===typeof b?this.headers.eq(b):a()},_setupEvents:function(b){var c={};b&&(a.each(b.split(" "),function(a,b){c[b]="_eventHandler"}),this._on(this.headers,c))},_eventHandler:function(b){var c=this.options,d=this.active,e=a(b.currentTarget),l=e[0]===d[0],m=l&&c.collapsible,p=m?a():e.next(),t=d.next(),p={oldHeader:d,oldPanel:t,newHeader:m?a():e,newPanel:p};b.preventDefault();l&&!c.collapsible||!1===this._trigger("beforeActivate",
b,p)||(c.active=m?!1:this.headers.index(e),this.active=l?a():e,this._toggle(p),d.removeClass("ui-accordion-header-active ui-state-active"),c.icons&&d.children(".ui-accordion-header-icon").removeClass(c.icons.activeHeader).addClass(c.icons.header),l||(e.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),c.icons&&e.children(".ui-accordion-header-icon").removeClass(c.icons.header).addClass(c.icons.activeHeader),e.next().addClass("ui-accordion-content-active")))},
_toggle:function(b){var c=b.newPanel,d=this.prevShow.length?this.prevShow:b.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0);this.prevShow=c;this.prevHide=d;this.options.animate?this._animate(c,d,b):(d.hide(),c.show(),this._toggleComplete(b));d.attr({"aria-expanded":"false","aria-hidden":"true"});d.prev().attr("aria-selected","false");c.length&&d.length?d.prev().attr("tabIndex",-1):c.length&&this.headers.filter(function(){return 0===a(this).attr("tabIndex")}).attr("tabIndex",-1);c.attr({"aria-expanded":"true",
"aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(a,b,c){var g,l,m,p=this,t=0,r=a.length&&(!b.length||a.index()<b.index()),q=this.options.animate||{},r=r&&q.down||q,w=function(){p._toggleComplete(c)};"number"===typeof r&&(m=r);"string"===typeof r&&(l=r);l=l||r.easing||q.easing;m=m||r.duration||q.duration;if(!b.length)return a.animate(d,m,l,w);if(!a.length)return b.animate(e,m,l,w);g=a.show().outerHeight();b.animate(e,{duration:m,easing:l,step:function(a,b){b.now=
Math.round(a)}});a.hide().animate(d,{duration:m,easing:l,complete:w,step:function(a,c){c.now=Math.round(a);"height"!==c.prop?t+=c.now:"content"!==p.options.heightStyle&&(c.now=Math.round(g-b.outerHeight()-t),t=0)}})},_toggleComplete:function(a){var b=a.oldPanel;b.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all");b.length&&(b.parent()[0].className=b.parent()[0].className);this._trigger("activate",null,a)}});!1!==a.uiBackCompat&&(function(a,b){a.extend(b.options,
{navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}});var c=b._create;b._create=function(){if(this.options.navigation){var b=this,d=this.element.find(this.options.header),e=d.next(),p=d.add(e).find("a").filter(this.options.navigationFilter)[0];p&&d.add(e).each(function(c){if(a.contains(this,p))return b.options.active=Math.floor(c/2),!1})}c.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(a,b){a.extend(b.options,{heightStyle:null,autoHeight:!0,
clearStyle:!1,fillSpace:!1});var c=b._create,d=b._setOption;a.extend(b,{_create:function(){this.options.heightStyle=this.options.heightStyle||this._mergeHeightStyle();c.call(this)},_setOption:function(a){if("autoHeight"===a||"clearStyle"===a||"fillSpace"===a)this.options.heightStyle=this._mergeHeightStyle();d.apply(this,arguments)},_mergeHeightStyle:function(){var a=this.options;if(a.fillSpace)return"fill";if(a.clearStyle)return"content";if(a.autoHeight)return"auto"}})}(jQuery,jQuery.ui.accordion.prototype),
function(a,b){a.extend(b.options.icons,{activeHeader:null,headerSelected:"ui-icon-triangle-1-s"});var c=b._createIcons;b._createIcons=function(){this.options.icons&&(this.options.icons.activeHeader=this.options.icons.activeHeader||this.options.icons.headerSelected);c.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(a,b){b.activate=b._activate;var c=b._findActive;b._findActive=function(a){-1===a&&(a=!1);a&&"number"!==typeof a&&(a=this.headers.index(this.headers.filter(a)),-1===a&&(a=!1));
return c.call(this,a)}}(jQuery,jQuery.ui.accordion.prototype),jQuery.ui.accordion.prototype.resize=jQuery.ui.accordion.prototype.refresh,function(a,b){a.extend(b.options,{change:null,changestart:null});var c=b._trigger;b._trigger=function(a,b,d){var e=c.apply(this,arguments);if(!e)return!1;"beforeActivate"===a?e=c.call(this,"changestart",b,{oldHeader:d.oldHeader,oldContent:d.oldPanel,newHeader:d.newHeader,newContent:d.newPanel}):"activate"===a&&(e=c.call(this,"change",b,{oldHeader:d.oldHeader,oldContent:d.oldPanel,
newHeader:d.newHeader,newContent:d.newPanel}));return e}}(jQuery,jQuery.ui.accordion.prototype),function(a,b){a.extend(b.options,{animate:null,animated:"slide"});var c=b._create;b._create=function(){var a=this.options;null===a.animate&&(a.animate=a.animated?"slide"===a.animated?300:"bounceslide"===a.animated?{duration:200,down:{easing:"easeOutBounce",duration:1E3}}:a.animated:!1);c.call(this)}}(jQuery,jQuery.ui.accordion.prototype))})(jQuery);
(function(a,b){var c=0;a.widget("ui.autocomplete",{version:"1.9.1",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var b,c,f;this.isMultiLine=this._isMultiLine();this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"];this.isNewMenu=!0;this.element.addClass("ui-autocomplete-input").attr("autocomplete",
"off");this._on(this.element,{keydown:function(n){if(this.element.prop("readOnly"))c=f=b=!0;else{c=f=b=!1;var h=a.ui.keyCode;switch(n.keyCode){case h.PAGE_UP:b=!0;this._move("previousPage",n);break;case h.PAGE_DOWN:b=!0;this._move("nextPage",n);break;case h.UP:b=!0;this._keyEvent("previous",n);break;case h.DOWN:b=!0;this._keyEvent("next",n);break;case h.ENTER:case h.NUMPAD_ENTER:this.menu.active&&(b=!0,n.preventDefault(),this.menu.select(n));break;case h.TAB:this.menu.active&&this.menu.select(n);
break;case h.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(n),n.preventDefault());break;default:c=!0,this._searchTimeout(n)}}},keypress:function(f){if(b)b=!1,f.preventDefault();else if(!c){var h=a.ui.keyCode;switch(f.keyCode){case h.PAGE_UP:this._move("previousPage",f);break;case h.PAGE_DOWN:this._move("nextPage",f);break;case h.UP:this._keyEvent("previous",f);break;case h.DOWN:this._keyEvent("next",f)}}},input:function(a){f?(f=!1,a.preventDefault()):this._searchTimeout(a)},
focus:function(){this.selectedItem=null;this.previous=this._value()},blur:function(a){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(a),this._change(a))}});this._initSource();this.menu=a("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:a(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu");this._on(this.menu.element,{mousedown:function(b){b.preventDefault();this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur});
var c=this.menu.element[0];a(b.target).closest(".ui-menu-item").length||this._delay(function(){var b=this;this.document.one("mousedown",function(d){d.target===b.element[0]||d.target===c||a.contains(c,d.target)||b.close()})})},menufocus:function(b,c){if(this.isNewMenu&&(this.isNewMenu=!1,b.originalEvent&&/^mouse/.test(b.originalEvent.type))){this.menu.blur();this.document.one("mousemove",function(){a(b.target).trigger(b.originalEvent)});return}var d=c.item.data("ui-autocomplete-item")||c.item.data("item.autocomplete");
!1!==this._trigger("focus",b,{item:d})?b.originalEvent&&/^key/.test(b.originalEvent.type)&&this._value(d.value):this.liveRegion.text(d.value)},menuselect:function(a,b){var c=b.item.data("ui-autocomplete-item")||b.item.data("item.autocomplete"),d=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=d,this._delay(function(){this.previous=d;this.selectedItem=c}));!1!==this._trigger("select",a,{item:c})&&this._value(c.value);this.term=this._value();this.close(a);
this.selectedItem=c}});this.liveRegion=a("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element);a.fn.bgiframe&&this.menu.element.bgiframe();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching);this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove()},_setOption:function(a,b){this._super(a,
b);"source"===a&&this._initSource();"appendTo"===a&&this.menu.element.appendTo(this.document.find(b||"body")[0]);"disabled"===a&&b&&this.xhr&&this.xhr.abort()},_isMultiLine:function(){return this.element.is("textarea")?!0:this.element.is("input")?!1:this.element.prop("isContentEditable")},_initSource:function(){var b,c,f=this;a.isArray(this.options.source)?(b=this.options.source,this.source=function(c,d){d(a.ui.autocomplete.filter(b,c.term))}):"string"===typeof this.options.source?(c=this.options.source,
this.source=function(b,e){f.xhr&&f.xhr.abort();f.xhr=a.ajax({url:c,data:b,dataType:"json",success:function(a){e(a)},error:function(){e([])}})}):this.source=this.options.source},_searchTimeout:function(a){clearTimeout(this.searching);this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,a))},this.options.delay)},search:function(a,b){a=null!=a?a:this._value();this.term=this._value();if(a.length<this.options.minLength)return this.close(b);if(!1!==this._trigger("search",
b))return this._search(a)},_search:function(a){this.pending++;this.element.addClass("ui-autocomplete-loading");this.cancelSearch=!1;this.source({term:a},this._response())},_response:function(){var a=this,b=++c;return function(f){b===c&&a.__response(f);a.pending--;a.pending||a.element.removeClass("ui-autocomplete-loading")}},__response:function(a){a&&(a=this._normalize(a));this._trigger("response",null,{content:a});!this.options.disabled&&a&&a.length&&!this.cancelSearch?(this._suggest(a),this._trigger("open")):
this._close()},close:function(a){this.cancelSearch=!0;this._close(a)},_close:function(a){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",a))},_change:function(a){this.previous!==this._value()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return"string"===typeof b?{label:b,value:b}:a.extend({label:b.label||b.value,value:b.value||b.label},b)})},
_suggest:function(b){var c=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(c,b);this.menu.refresh();c.show();this._resizeMenu();c.position(a.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var f=this;a.each(c,function(a,c){f._renderItemData(b,c)})},_renderItemData:function(a,b){return this._renderItem(a,
b).data("ui-autocomplete-item",b)},_renderItem:function(b,c){return a("<li>").append(a("<a>").text(c.label)).appendTo(b)},_move:function(a,b){if(this.menu.element.is(":visible"))if(this.menu.isFirstItem()&&/^previous/.test(a)||this.menu.isLastItem()&&/^next/.test(a))this._value(this.term),this.menu.blur();else this.menu[a](b);else this.search(null,b)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(a,b){if(!this.isMultiLine||
this.menu.element.is(":visible"))this._move(a,b),b.preventDefault()}});a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(b,c){var f=new RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return f.test(a.label||a.value||a)})}});a.widget("ui.autocomplete",a.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(a){return a+(1<a?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},
__response:function(a){var b;this._superApply(arguments);this.options.disabled||this.cancelSearch||(b=a&&a.length?this.options.messages.results(a.length):this.options.messages.noResults,this.liveRegion.text(b))}})})(jQuery);
(function(a,b){var c,e,d,f,n=function(){var b=a(this).find(":ui-button");setTimeout(function(){b.button("refresh")},1)},h=function(b){var c=b.name,d=b.form,e=a([]);c&&(e=d?a(d).find("[name='"+c+"']"):a("[name='"+c+"']",b.ownerDocument).filter(function(){return!this.form}));return e};a.widget("ui.button",{version:"1.9.1",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+
this.eventNamespace,n);"boolean"!==typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled);this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var b=this,l=this.options,m="checkbox"===this.type||"radio"===this.type,p="ui-state-hover"+(m?"":" ui-state-active");null===l.label&&(l.label="input"===this.type?this.buttonElement.val():this.buttonElement.html());this.buttonElement.addClass("ui-button ui-widget ui-state-default ui-corner-all").attr("role",
"button").bind("mouseenter"+this.eventNamespace,function(){l.disabled||(a(this).addClass("ui-state-hover"),this===c&&a(this).addClass("ui-state-active"))}).bind("mouseleave"+this.eventNamespace,function(){l.disabled||a(this).removeClass(p)}).bind("click"+this.eventNamespace,function(a){l.disabled&&(a.preventDefault(),a.stopImmediatePropagation())});this.element.bind("focus"+this.eventNamespace,function(){b.buttonElement.addClass("ui-state-focus")}).bind("blur"+this.eventNamespace,function(){b.buttonElement.removeClass("ui-state-focus")});
m&&(this.element.bind("change"+this.eventNamespace,function(){f||b.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(a){l.disabled||(f=!1,e=a.pageX,d=a.pageY)}).bind("mouseup"+this.eventNamespace,function(a){l.disabled||e===a.pageX&&d===a.pageY||(f=!0)}));"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(l.disabled||f)return!1;a(this).toggleClass("ui-state-active");b.buttonElement.attr("aria-pressed",b.element[0].checked)}):"radio"===
this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(l.disabled||f)return!1;a(this).addClass("ui-state-active");b.buttonElement.attr("aria-pressed","true");var c=b.element[0];h(c).not(c).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(l.disabled)return!1;a(this).addClass("ui-state-active");c=this;b.document.one("mouseup",function(){c=null})}).bind("mouseup"+
this.eventNamespace,function(){if(l.disabled)return!1;a(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(b){if(l.disabled)return!1;b.keyCode!==a.ui.keyCode.SPACE&&b.keyCode!==a.ui.keyCode.ENTER||a(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace,function(){a(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(b){b.keyCode===a.ui.keyCode.SPACE&&a(this).click()}));this._setOption("disabled",l.disabled);
this._resetButton()},_determineButtonType:function(){var a,b;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button";"checkbox"===this.type||"radio"===this.type?(a=this.element.parents().last(),b="label[for='"+this.element.attr("id")+"']",this.buttonElement=a.find(b),this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||
(this.buttonElement=a.find(b))),this.element.addClass("ui-helper-hidden-accessible"),(a=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",a)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-state-hover ui-state-active  ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());
this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(a,b){this._super(a,b);"disabled"===a?b?this.element.prop("disabled",!0):this.element.prop("disabled",!1):this._resetButton()},refresh:function(){var b=this.element.is(":disabled")||this.element.hasClass("ui-button-disabled");b!==this.options.disabled&&this._setOption("disabled",b);"radio"===this.type?h(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("ui-state-active").attr("aria-pressed",
"true"):a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)this.options.label&&this.element.val(this.options.label);else{var b=this.buttonElement.removeClass("ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only"),
c=a("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),d=this.options.icons,e=d.primary&&d.secondary,h=[];d.primary||d.secondary?(this.options.text&&h.push("ui-button-text-icon"+(e?"s":d.primary?"-primary":"-secondary")),d.primary&&b.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>"),d.secondary&&b.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>"),this.options.text||(h.push(e?"ui-button-icons-only":
"ui-button-icon-only"),this.hasTitle||b.attr("title",a.trim(c)))):h.push("ui-button-text-only");b.addClass(h.join(" "))}}});a.widget("ui.buttonset",{version:"1.9.1",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(a,b){"disabled"===a&&this.buttons.button("option",a,b);this._super(a,b)},refresh:function(){var b=
"rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(b?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})})(jQuery);
(function(a,b){function c(){this.debug=!1;this._curInst=null;this._keyEvent=!1;this._disabledInputs=[];this._inDialog=this._datepickerShowing=!1;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass=
"ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),
weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,
beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1};a.extend(this._defaults,this.regional[""]);this.dpDiv=e(a('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function e(b){return b.delegate("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a",
"mouseout",function(){a(this).removeClass("ui-state-hover");-1!=this.className.indexOf("ui-datepicker-prev")&&a(this).removeClass("ui-datepicker-prev-hover");-1!=this.className.indexOf("ui-datepicker-next")&&a(this).removeClass("ui-datepicker-next-hover")}).delegate("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a","mouseover",function(){a.datepicker._isDisabledDatepicker(n.inline?b.parent()[0]:n.input[0])||(a(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),
a(this).addClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&a(this).addClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&a(this).addClass("ui-datepicker-next-hover"))})}function d(c,d){a.extend(c,d);for(var e in d)if(null==d[e]||d[e]==b)c[e]=d[e];return c}a.extend(a.ui,{datepicker:{version:"1.9.1"}});var f=(new Date).getTime(),n;a.extend(c.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",
arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){d(this._defaults,a||{});return this},_attachDatepicker:function(b,c){var d=null,e;for(e in this._defaults){var f=b.getAttribute("date:"+e);if(f){d=d||{};try{d[e]=eval(f)}catch(n){d[e]=f}}}e=b.nodeName.toLowerCase();f="div"==e||"span"==e;b.id||(this.uuid+=1,b.id="dp"+this.uuid);var r=this._newInst(a(b),f);r.settings=a.extend({},c||{},d||{});"input"==e?this._connectDatepicker(b,r):f&&this._inlineDatepicker(b,r)},_newInst:function(b,
c){return{id:b[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:b,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:c,dpDiv:c?e(a('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(b,c){var d=a(b);c.append=a([]);c.trigger=a([]);d.hasClass(this.markerClassName)||(this._attachments(d,c),d.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",
function(a,b,d){c.settings[b]=d}).bind("getData.datepicker",function(a,b){return this._get(c,b)}),this._autoSize(c),a.data(b,"datepicker",c),c.settings.disabled&&this._disableDatepicker(b))},_attachments:function(b,c){var d=this._get(c,"appendText"),e=this._get(c,"isRTL");c.append&&c.append.remove();d&&(c.append=a('<span class="'+this._appendClass+'">'+d+"</span>"),b[e?"before":"after"](c.append));b.unbind("focus",this._showDatepicker);c.trigger&&c.trigger.remove();d=this._get(c,"showOn");"focus"!=
d&&"both"!=d||b.focus(this._showDatepicker);if("button"==d||"both"==d){var d=this._get(c,"buttonText"),f=this._get(c,"buttonImage");c.trigger=a(this._get(c,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:f,alt:d,title:d}):a('<button type="button"></button>').addClass(this._triggerClass).html(""==f?d:a("<img/>").attr({src:f,alt:d,title:d})));b[e?"before":"after"](c.trigger);c.trigger.click(function(){a.datepicker._datepickerShowing&&a.datepicker._lastInput==b[0]?a.datepicker._hideDatepicker():
(a.datepicker._datepickerShowing&&a.datepicker._lastInput!=b[0]&&a.datepicker._hideDatepicker(),a.datepicker._showDatepicker(b[0]));return!1})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var d=function(a){for(var b=0,c=0,d=0;d<a.length;d++)a[d].length>b&&(b=a[d].length,c=d);return c};b.setMonth(d(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort")));b.setDate(d(this._get(a,c.match(/DD/)?"dayNames":
"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(b,c){var d=a(b);d.hasClass(this.markerClassName)||(d.addClass(this.markerClassName).append(c.dpDiv).bind("setData.datepicker",function(a,b,d){c.settings[b]=d}).bind("getData.datepicker",function(a,b){return this._get(c,b)}),a.data(b,"datepicker",c),this._setDate(c,this._getDefaultDate(c),!0),this._updateDatepicker(c),this._updateAlternate(c),c.settings.disabled&&this._disableDatepicker(b),
c.dpDiv.css("display","block"))},_dialogDatepicker:function(b,c,e,f,p){b=this._dialogInst;b||(this.uuid+=1,this._dialogInput=a('<input type="text" id="dp'+this.uuid+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),a("body").append(this._dialogInput),b=this._dialogInst=this._newInst(this._dialogInput,!1),b.settings={},a.data(this._dialogInput[0],"datepicker",b));d(b.settings,f||{});c=c&&c.constructor==Date?this._formatDate(b,c):c;this._dialogInput.val(c);
this._pos=p?p.length?p:[p.pageX,p.pageY]:null;this._pos||(this._pos=[document.documentElement.clientWidth/2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)]);this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");b.settings.onSelect=e;this._inDialog=!0;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);a.blockUI&&a.blockUI(this.dpDiv);
a.data(this._dialogInput[0],"datepicker",b);return this},_destroyDatepicker:function(b){var c=a(b),d=a.data(b,"datepicker");if(c.hasClass(this.markerClassName)){var e=b.nodeName.toLowerCase();a.removeData(b,"datepicker");"input"==e?(d.append.remove(),d.trigger.remove(),c.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!=e&&"span"!=e||c.removeClass(this.markerClassName).empty()}},
_enableDatepicker:function(b){var c=a(b),d=a.data(b,"datepicker");if(c.hasClass(this.markerClassName)){var e=b.nodeName.toLowerCase();if("input"==e)b.disabled=!1,d.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==e||"span"==e)c=c.children("."+this._inlineClass),c.children().removeClass("ui-state-disabled"),c.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1);this._disabledInputs=a.map(this._disabledInputs,
function(a){return a==b?null:a})}},_disableDatepicker:function(b){var c=a(b),d=a.data(b,"datepicker");if(c.hasClass(this.markerClassName)){var e=b.nodeName.toLowerCase();if("input"==e)b.disabled=!0,d.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==e||"span"==e)c=c.children("."+this._inlineClass),c.children().addClass("ui-state-disabled"),c.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",
!0);this._disabledInputs=a.map(this._disabledInputs,function(a){return a==b?null:a});this._disabledInputs[this._disabledInputs.length]=b}},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]==a)return!0;return!1},_getInst:function(b){try{return a.data(b,"datepicker")}catch(c){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(c,e,f){var m=this._getInst(c);if(2==arguments.length&&"string"==typeof e)return"defaults"==
e?a.extend({},a.datepicker._defaults):m?"all"==e?a.extend({},m.settings):this._get(m,e):null;var p=e||{};"string"==typeof e&&(p={},p[e]=f);if(m){this._curInst==m&&this._hideDatepicker();var n=this._getDateDatepicker(c,!0),r=this._getMinMaxDate(m,"min"),q=this._getMinMaxDate(m,"max");d(m.settings,p);null!==r&&p.dateFormat!==b&&p.minDate===b&&(m.settings.minDate=this._formatDate(m,r));null!==q&&p.dateFormat!==b&&p.maxDate===b&&(m.settings.maxDate=this._formatDate(m,q));this._attachments(a(c),m);this._autoSize(m);
this._setDate(m,n);this._updateAlternate(m);this._updateDatepicker(m)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){(a=this._getInst(a))&&this._updateDatepicker(a)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);c&&!c.inline&&this._setDateFromField(c,b);return c?this._getDate(c):null},_doKeyDown:function(b){var c=
a.datepicker._getInst(b.target),d=!0,e=c.dpDiv.is(".ui-datepicker-rtl");c._keyEvent=!0;if(a.datepicker._datepickerShowing)switch(b.keyCode){case 9:a.datepicker._hideDatepicker();d=!1;break;case 13:return d=a("td."+a.datepicker._dayOverClass+":not(."+a.datepicker._currentClass+")",c.dpDiv),d[0]&&a.datepicker._selectDay(b.target,c.selectedMonth,c.selectedYear,d[0]),(b=a.datepicker._get(c,"onSelect"))?(d=a.datepicker._formatDate(c),b.apply(c.input?c.input[0]:null,[d,c])):a.datepicker._hideDatepicker(),
!1;case 27:a.datepicker._hideDatepicker();break;case 33:a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(c,"stepBigMonths"):-a.datepicker._get(c,"stepMonths"),"M");break;case 34:a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(c,"stepBigMonths"):+a.datepicker._get(c,"stepMonths"),"M");break;case 35:(b.ctrlKey||b.metaKey)&&a.datepicker._clearDate(b.target);d=b.ctrlKey||b.metaKey;break;case 36:(b.ctrlKey||b.metaKey)&&a.datepicker._gotoToday(b.target);d=b.ctrlKey||b.metaKey;
break;case 37:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,e?1:-1,"D");d=b.ctrlKey||b.metaKey;b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(c,"stepBigMonths"):-a.datepicker._get(c,"stepMonths"),"M");break;case 38:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,-7,"D");d=b.ctrlKey||b.metaKey;break;case 39:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,e?-1:1,"D");d=b.ctrlKey||b.metaKey;b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,
b.ctrlKey?+a.datepicker._get(c,"stepBigMonths"):+a.datepicker._get(c,"stepMonths"),"M");break;case 40:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,7,"D");d=b.ctrlKey||b.metaKey;break;default:d=!1}else 36==b.keyCode&&b.ctrlKey?a.datepicker._showDatepicker(this):d=!1;d&&(b.preventDefault(),b.stopPropagation())},_doKeyPress:function(c){var d=a.datepicker._getInst(c.target);if(a.datepicker._get(d,"constrainInput")){var d=a.datepicker._possibleChars(a.datepicker._get(d,"dateFormat")),e=String.fromCharCode(c.charCode==
b?c.keyCode:c.charCode);return c.ctrlKey||c.metaKey||" ">e||!d||-1<d.indexOf(e)}},_doKeyUp:function(b){b=a.datepicker._getInst(b.target);if(b.input.val()!=b.lastVal)try{a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),b.input?b.input.val():null,a.datepicker._getFormatConfig(b))&&(a.datepicker._setDateFromField(b),a.datepicker._updateAlternate(b),a.datepicker._updateDatepicker(b))}catch(c){a.datepicker.log(c)}return!0},_showDatepicker:function(b){b=b.target||b;"input"!=b.nodeName.toLowerCase()&&
(b=a("input",b.parentNode)[0]);if(!a.datepicker._isDisabledDatepicker(b)&&a.datepicker._lastInput!=b){var c=a.datepicker._getInst(b);a.datepicker._curInst&&a.datepicker._curInst!=c&&(a.datepicker._curInst.dpDiv.stop(!0,!0),c&&a.datepicker._datepickerShowing&&a.datepicker._hideDatepicker(a.datepicker._curInst.input[0]));var e=a.datepicker._get(c,"beforeShow"),e=e?e.apply(b,[b,c]):{};if(!1!==e){d(c.settings,e);c.lastVal=null;a.datepicker._lastInput=b;a.datepicker._setDateFromField(c);a.datepicker._inDialog&&
(b.value="");a.datepicker._pos||(a.datepicker._pos=a.datepicker._findPos(b),a.datepicker._pos[1]+=b.offsetHeight);var f=!1;a(b).parents().each(function(){f|="fixed"==a(this).css("position");return!f});e={left:a.datepicker._pos[0],top:a.datepicker._pos[1]};a.datepicker._pos=null;c.dpDiv.empty();c.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});a.datepicker._updateDatepicker(c);e=a.datepicker._checkOffset(c,e,f);c.dpDiv.css({position:a.datepicker._inDialog&&a.blockUI?"static":f?"fixed":
"absolute",display:"none",left:e.left+"px",top:e.top+"px"});if(!c.inline){var e=a.datepicker._get(c,"showAnim"),p=a.datepicker._get(c,"duration"),n=function(){var b=c.dpDiv.find("iframe.ui-datepicker-cover");if(b.length){var d=a.datepicker._getBorders(c.dpDiv);b.css({left:-d[0],top:-d[1],width:c.dpDiv.outerWidth(),height:c.dpDiv.outerHeight()})}};c.dpDiv.zIndex(a(b).zIndex()+1);a.datepicker._datepickerShowing=!0;if(a.effects&&(a.effects.effect[e]||a.effects[e]))c.dpDiv.show(e,a.datepicker._get(c,
"showOptions"),p,n);else c.dpDiv[e||"show"](e?p:null,n);e&&p||n();c.input.is(":visible")&&!c.input.is(":disabled")&&c.input.focus();a.datepicker._curInst=c}}}},_updateDatepicker:function(b){this.maxRows=4;var c=a.datepicker._getBorders(b.dpDiv);n=b;b.dpDiv.empty().append(this._generateHTML(b));this._attachHandlers(b);var d=b.dpDiv.find("iframe.ui-datepicker-cover");d.length&&d.css({left:-c[0],top:-c[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()});b.dpDiv.find("."+this._dayOverClass+" a").mouseover();
c=this._getNumberOfMonths(b);d=c[1];b.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");1<d&&b.dpDiv.addClass("ui-datepicker-multi-"+d).css("width",17*d+"em");b.dpDiv[(1!=c[0]||1!=c[1]?"add":"remove")+"Class"]("ui-datepicker-multi");b.dpDiv[(this._get(b,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");b==a.datepicker._curInst&&a.datepicker._datepickerShowing&&b.input&&b.input.is(":visible")&&!b.input.is(":disabled")&&b.input[0]!=document.activeElement&&
b.input.focus();if(b.yearshtml){var e=b.yearshtml;setTimeout(function(){e===b.yearshtml&&b.yearshtml&&b.dpDiv.find("select.ui-datepicker-year:first").replaceWith(b.yearshtml);e=b.yearshtml=null},0)}},_getBorders:function(a){var b=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(b,c,d){var e=b.dpDiv.outerWidth(),f=b.dpDiv.outerHeight(),n=b.input?b.input.outerWidth():0,r=b.input?b.input.outerHeight():
0,q=document.documentElement.clientWidth+(d?0:a(document).scrollLeft()),w=document.documentElement.clientHeight+(d?0:a(document).scrollTop());c.left-=this._get(b,"isRTL")?e-n:0;c.left-=d&&c.left==b.input.offset().left?a(document).scrollLeft():0;c.top-=d&&c.top==b.input.offset().top+r?a(document).scrollTop():0;c.left-=Math.min(c.left,c.left+e>q&&q>e?Math.abs(c.left+e-q):0);c.top-=Math.min(c.top,c.top+f>w&&w>f?Math.abs(f+r):0);return c},_findPos:function(b){for(var c=this._getInst(b),c=this._get(c,
"isRTL");b&&("hidden"==b.type||1!=b.nodeType||a.expr.filters.hidden(b));)b=b[c?"previousSibling":"nextSibling"];b=a(b).offset();return[b.left,b.top]},_hideDatepicker:function(b){var c=this._curInst;if(c&&(!b||c==a.data(b,"datepicker"))&&this._datepickerShowing){b=this._get(c,"showAnim");var d=this._get(c,"duration"),e=function(){a.datepicker._tidyDialog(c)};if(a.effects&&(a.effects.effect[b]||a.effects[b]))c.dpDiv.hide(b,a.datepicker._get(c,"showOptions"),d,e);else c.dpDiv["slideDown"==b?"slideUp":
"fadeIn"==b?"fadeOut":"hide"](b?d:null,e);b||e();this._datepickerShowing=!1;(b=this._get(c,"onClose"))&&b.apply(c.input?c.input[0]:null,[c.input?c.input.val():"",c]);this._lastInput=null;this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),a.blockUI&&(a.unblockUI(),a("body").append(this.dpDiv)));this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(b){if(a.datepicker._curInst){b=
a(b.target);var c=a.datepicker._getInst(b[0]);(!(b[0].id==a.datepicker._mainDivId||0!=b.parents("#"+a.datepicker._mainDivId).length||b.hasClass(a.datepicker.markerClassName)||b.closest("."+a.datepicker._triggerClass).length||!a.datepicker._datepickerShowing||a.datepicker._inDialog&&a.blockUI)||b.hasClass(a.datepicker.markerClassName)&&a.datepicker._curInst!=c)&&a.datepicker._hideDatepicker()}},_adjustDate:function(b,c,d){b=a(b);var e=this._getInst(b[0]);this._isDisabledDatepicker(b[0])||(this._adjustInstDate(e,
c+("M"==d?this._get(e,"showCurrentAtPos"):0),d),this._updateDatepicker(e))},_gotoToday:function(b){b=a(b);var c=this._getInst(b[0]);if(this._get(c,"gotoCurrent")&&c.currentDay)c.selectedDay=c.currentDay,c.drawMonth=c.selectedMonth=c.currentMonth,c.drawYear=c.selectedYear=c.currentYear;else{var d=new Date;c.selectedDay=d.getDate();c.drawMonth=c.selectedMonth=d.getMonth();c.drawYear=c.selectedYear=d.getFullYear()}this._notifyChange(c);this._adjustDate(b)},_selectMonthYear:function(b,c,d){b=a(b);var e=
this._getInst(b[0]);e["selected"+("M"==d?"Month":"Year")]=e["draw"+("M"==d?"Month":"Year")]=parseInt(c.options[c.selectedIndex].value,10);this._notifyChange(e);this._adjustDate(b)},_selectDay:function(b,c,d,e){var f=a(b);a(e).hasClass(this._unselectableClass)||this._isDisabledDatepicker(f[0])||(f=this._getInst(f[0]),f.selectedDay=f.currentDay=a("a",e).html(),f.selectedMonth=f.currentMonth=c,f.selectedYear=f.currentYear=d,this._selectDate(b,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear)))},
_clearDate:function(b){b=a(b);this._getInst(b[0]);this._selectDate(b,"")},_selectDate:function(b,c){var d=a(b),d=this._getInst(d[0]);c=null!=c?c:this._formatDate(d);d.input&&d.input.val(c);this._updateAlternate(d);var e=this._get(d,"onSelect");e?e.apply(d.input?d.input[0]:null,[c,d]):d.input&&d.input.trigger("change");d.inline?this._updateDatepicker(d):(this._hideDatepicker(),this._lastInput=d.input[0],"object"!=typeof d.input[0]&&d.input.focus(),this._lastInput=null)},_updateAlternate:function(b){var c=
this._get(b,"altField");if(c){var d=this._get(b,"altFormat")||this._get(b,"dateFormat"),e=this._getDate(b),f=this.formatDate(d,e,this._getFormatConfig(b));a(c).each(function(){a(this).val(f)})}},noWeekends:function(a){a=a.getDay();return[0<a&&6>a,""]},iso8601Week:function(a){a=new Date(a.getTime());a.setDate(a.getDate()+4-(a.getDay()||7));var b=a.getTime();a.setMonth(0);a.setDate(1);return Math.floor(Math.round((b-a)/864E5)/7)+1},parseDate:function(b,c,d){if(null==b||null==c)throw"Invalid arguments";
c="object"==typeof c?c.toString():c+"";if(""==c)return null;for(var e=(d?d.shortYearCutoff:null)||this._defaults.shortYearCutoff,e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),f=(d?d.dayNamesShort:null)||this._defaults.dayNamesShort,n=(d?d.dayNames:null)||this._defaults.dayNames,r=(d?d.monthNamesShort:null)||this._defaults.monthNamesShort,q=(d?d.monthNames:null)||this._defaults.monthNames,w=d=-1,u=-1,x=-1,z=!1,y=function(a){(a=H+1<b.length&&b.charAt(H+1)==a)&&H++;return a},B=function(a){var b=
y(a);a=new RegExp("^\\d{1,"+("@"==a?14:"!"==a?20:"y"==a&&b?4:"o"==a?3:2)+"}");a=c.substring(D).match(a);if(!a)throw"Missing number at position "+D;D+=a[0].length;return parseInt(a[0],10)},A=function(b,d,e){b=a.map(y(b)?e:d,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)});var f=-1;a.each(b,function(a,b){var d=b[1];if(c.substr(D,d.length).toLowerCase()==d.toLowerCase())return f=b[0],D+=d.length,!1});if(-1!=f)return f+1;throw"Unknown name at position "+D;},C=function(){if(c.charAt(D)!=
b.charAt(H))throw"Unexpected literal at position "+D;D++},D=0,H=0;H<b.length;H++)if(z)"'"!=b.charAt(H)||y("'")?C():z=!1;else switch(b.charAt(H)){case "d":u=B("d");break;case "D":A("D",f,n);break;case "o":x=B("o");break;case "m":w=B("m");break;case "M":w=A("M",r,q);break;case "y":d=B("y");break;case "@":var G=new Date(B("@"));d=G.getFullYear();w=G.getMonth()+1;u=G.getDate();break;case "!":G=new Date((B("!")-this._ticksTo1970)/1E4);d=G.getFullYear();w=G.getMonth()+1;u=G.getDate();break;case "'":y("'")?
C():z=!0;break;default:C()}if(D<c.length&&(f=c.substr(D),!/^\s+/.test(f)))throw"Extra/unparsed characters found in date: "+f;-1==d?d=(new Date).getFullYear():100>d&&(d+=(new Date).getFullYear()-(new Date).getFullYear()%100+(d<=e?0:-100));if(-1<x){w=1;u=x;do{e=this._getDaysInMonth(d,w-1);if(u<=e)break;w++;u-=e}while(1)}G=this._daylightSavingAdjust(new Date(d,w-1,u));if(G.getFullYear()!=d||G.getMonth()+1!=w||G.getDate()!=u)throw"Invalid date";return G},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",
RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864E9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(a,b,c){if(!b)return"";var d=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,e=(c?c.dayNames:null)||this._defaults.dayNames,f=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort;c=(c?c.monthNames:null)||this._defaults.monthNames;var r=
function(b){(b=z+1<a.length&&a.charAt(z+1)==b)&&z++;return b},q=function(a,b,c){b=""+b;if(r(a))for(;b.length<c;)b="0"+b;return b},n=function(a,b,c,d){return r(a)?d[b]:c[b]},u="",x=!1;if(b)for(var z=0;z<a.length;z++)if(x)"'"!=a.charAt(z)||r("'")?u+=a.charAt(z):x=!1;else switch(a.charAt(z)){case "d":u+=q("d",b.getDate(),2);break;case "D":u+=n("D",b.getDay(),d,e);break;case "o":u+=q("o",Math.round(((new Date(b.getFullYear(),b.getMonth(),b.getDate())).getTime()-(new Date(b.getFullYear(),0,0)).getTime())/
864E5),3);break;case "m":u+=q("m",b.getMonth()+1,2);break;case "M":u+=n("M",b.getMonth(),f,c);break;case "y":u+=r("y")?b.getFullYear():(10>b.getYear()%100?"0":"")+b.getYear()%100;break;case "@":u+=b.getTime();break;case "!":u+=1E4*b.getTime()+this._ticksTo1970;break;case "'":r("'")?u+="'":x=!0;break;default:u+=a.charAt(z)}return u},_possibleChars:function(a){for(var b="",c=!1,d=function(b){(b=e+1<a.length&&a.charAt(e+1)==b)&&e++;return b},e=0;e<a.length;e++)if(c)"'"!=a.charAt(e)||d("'")?b+=a.charAt(e):
c=!1;else switch(a.charAt(e)){case "d":case "m":case "y":case "@":b+="0123456789";break;case "D":case "M":return null;case "'":d("'")?b+="'":c=!0;break;default:b+=a.charAt(e)}return b},_get:function(a,c){return a.settings[c]!==b?a.settings[c]:this._defaults[c]},_setDateFromField:function(a,b){if(a.input.val()!=a.lastVal){var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,e,f;e=f=this._getDefaultDate(a);var r=this._getFormatConfig(a);try{e=this.parseDate(c,d,r)||f}catch(q){this.log(q),
d=b?"":d}a.selectedDay=e.getDate();a.drawMonth=a.selectedMonth=e.getMonth();a.drawYear=a.selectedYear=e.getFullYear();a.currentDay=d?e.getDate():0;a.currentMonth=d?e.getMonth():0;a.currentYear=d?e.getFullYear():0;this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(b,c,d){var e=function(a){var b=new Date;b.setDate(b.getDate()+a);return b},f=function(c){try{return a.datepicker.parseDate(a.datepicker._get(b,
"dateFormat"),c,a.datepicker._getFormatConfig(b))}catch(d){}for(var e=(c.toLowerCase().match(/^c/)?a.datepicker._getDate(b):null)||new Date,f=e.getFullYear(),g=e.getMonth(),e=e.getDate(),l=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,m=l.exec(c);m;){switch(m[2]||"d"){case "d":case "D":e+=parseInt(m[1],10);break;case "w":case "W":e+=7*parseInt(m[1],10);break;case "m":case "M":g+=parseInt(m[1],10);e=Math.min(e,a.datepicker._getDaysInMonth(f,g));break;case "y":case "Y":f+=parseInt(m[1],10),e=Math.min(e,a.datepicker._getDaysInMonth(f,
g))}m=l.exec(c)}return new Date(f,g,e)};if(c=(c=null==c||""===c?d:"string"==typeof c?f(c):"number"==typeof c?isNaN(c)?d:e(c):new Date(c.getTime()))&&"Invalid Date"==c.toString()?d:c)c.setHours(0),c.setMinutes(0),c.setSeconds(0),c.setMilliseconds(0);return this._daylightSavingAdjust(c)},_daylightSavingAdjust:function(a){if(!a)return null;a.setHours(12<a.getHours()?a.getHours()+2:0);return a},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear;b=this._restrictMinMax(a,this._determineDate(a,
b,new Date));a.selectedDay=a.currentDay=b.getDate();a.drawMonth=a.selectedMonth=a.currentMonth=b.getMonth();a.drawYear=a.selectedYear=a.currentYear=b.getFullYear();e==a.selectedMonth&&f==a.selectedYear||c||this._notifyChange(a);this._adjustInstDate(a);a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){return!a.currentYear||a.input&&""==a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay))},_attachHandlers:function(b){var c=this._get(b,
"stepMonths"),d="#"+b.id.replace(/\\\\/g,"\\");b.dpDiv.find("[data-handler]").map(function(){a(this).bind(this.getAttribute("data-event"),{prev:function(){window["DP_jQuery_"+f].datepicker._adjustDate(d,-c,"M")},next:function(){window["DP_jQuery_"+f].datepicker._adjustDate(d,+c,"M")},hide:function(){window["DP_jQuery_"+f].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+f].datepicker._gotoToday(d)},selectDay:function(){window["DP_jQuery_"+f].datepicker._selectDay(d,+this.getAttribute("data-month"),
+this.getAttribute("data-year"),this);return!1},selectMonth:function(){window["DP_jQuery_"+f].datepicker._selectMonthYear(d,this,"M");return!1},selectYear:function(){window["DP_jQuery_"+f].datepicker._selectMonthYear(d,this,"Y");return!1}}[this.getAttribute("data-handler")])})},_generateHTML:function(b){var c=new Date,c=this._daylightSavingAdjust(new Date(c.getFullYear(),c.getMonth(),c.getDate())),d=this._get(b,"isRTL"),e=this._get(b,"showButtonPanel"),f=this._get(b,"hideIfNoPrevNext"),n=this._get(b,
"navigationAsDateFormat"),r=this._getNumberOfMonths(b),q=this._get(b,"showCurrentAtPos"),w=this._get(b,"stepMonths"),u=1!=r[0]||1!=r[1],x=this._daylightSavingAdjust(b.currentDay?new Date(b.currentYear,b.currentMonth,b.currentDay):new Date(9999,9,9)),z=this._getMinMaxDate(b,"min"),y=this._getMinMaxDate(b,"max"),q=b.drawMonth-q,B=b.drawYear;0>q&&(q+=12,B--);if(y)for(var A=this._daylightSavingAdjust(new Date(y.getFullYear(),y.getMonth()-r[0]*r[1]+1,y.getDate())),A=z&&A<z?z:A;this._daylightSavingAdjust(new Date(B,
q,1))>A;)q--,0>q&&(q=11,B--);b.drawMonth=q;b.drawYear=B;var A=this._get(b,"prevText"),A=n?this.formatDate(A,this._daylightSavingAdjust(new Date(B,q-w,1)),this._getFormatConfig(b)):A,A=this._canAdjustMonth(b,-1,B,q)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+A+'"><span class="ui-icon ui-icon-circle-triangle-'+(d?"e":"w")+'">'+A+"</span></a>":f?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+A+'"><span class="ui-icon ui-icon-circle-triangle-'+
(d?"e":"w")+'">'+A+"</span></a>",C=this._get(b,"nextText"),C=n?this.formatDate(C,this._daylightSavingAdjust(new Date(B,q+w,1)),this._getFormatConfig(b)):C,f=this._canAdjustMonth(b,1,B,q)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+C+'"><span class="ui-icon ui-icon-circle-triangle-'+(d?"w":"e")+'">'+C+"</span></a>":f?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+C+'"><span class="ui-icon ui-icon-circle-triangle-'+(d?"w":
"e")+'">'+C+"</span></a>",w=this._get(b,"currentText"),C=this._get(b,"gotoCurrent")&&b.currentDay?x:c,w=n?this.formatDate(w,C,this._getFormatConfig(b)):w,n=b.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(b,"closeText")+"</button>",e=e?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(d?n:"")+(this._isInRange(b,C)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+
w+"</button>":"")+(d?"":n)+"</div>":"",n=parseInt(this._get(b,"firstDay"),10),n=isNaN(n)?0:n,w=this._get(b,"showWeek"),C=this._get(b,"dayNames");this._get(b,"dayNamesShort");var D=this._get(b,"dayNamesMin"),H=this._get(b,"monthNames"),G=this._get(b,"monthNamesShort"),L=this._get(b,"beforeShowDay"),J=this._get(b,"showOtherMonths"),M=this._get(b,"selectOtherMonths");this._get(b,"calculateWeek");for(var V=this._getDefaultDate(b),T="",O=0;O<r[0];O++){var N="";this.maxRows=4;for(var Z=0;Z<r[1];Z++){var X=
this._daylightSavingAdjust(new Date(B,q,b.selectedDay)),P=" ui-corner-all",R="";if(u){R+='<div class="ui-datepicker-group';if(1<r[1])switch(Z){case 0:R+=" ui-datepicker-group-first";P=" ui-corner-"+(d?"right":"left");break;case r[1]-1:R+=" ui-datepicker-group-last";P=" ui-corner-"+(d?"left":"right");break;default:R+=" ui-datepicker-group-middle",P=""}R+='">'}for(var R=R+('<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+P+'">'+(/all|left/.test(P)&&0==O?d?f:A:"")+(/all|right/.test(P)&&
0==O?d?A:f:"")+this._generateMonthYearHeader(b,q,B,z,y,0<O||0<Z,H,G)+'</div><table class="ui-datepicker-calendar"><thead><tr>'),K=w?'<th class="ui-datepicker-week-col">'+this._get(b,"weekHeader")+"</th>":"",P=0;7>P;P++)var U=(P+n)%7,K=K+("<th"+(5<=(P+n+6)%7?' class="ui-datepicker-week-end"':"")+'><span title="'+C[U]+'">'+D[U]+"</span></th>");R+=K+"</tr></thead><tbody>";K=this._getDaysInMonth(B,q);B==b.selectedYear&&q==b.selectedMonth&&(b.selectedDay=Math.min(b.selectedDay,K));P=(this._getFirstDayOfMonth(B,
q)-n+7)%7;K=Math.ceil((P+K)/7);this.maxRows=K=u?this.maxRows>K?this.maxRows:K:K;for(var U=this._daylightSavingAdjust(new Date(B,q,1-P)),Q=0;Q<K;Q++){for(var R=R+"<tr>",ma=w?'<td class="ui-datepicker-week-col">'+this._get(b,"calculateWeek")(U)+"</td>":"",P=0;7>P;P++){var S=L?L.apply(b.input?b.input[0]:null,[U]):[!0,""],W=U.getMonth()!=q,la=W&&!M||!S[0]||z&&U<z||y&&U>y,ma=ma+('<td class="'+(5<=(P+n+6)%7?" ui-datepicker-week-end":"")+(W?" ui-datepicker-other-month":"")+(U.getTime()==X.getTime()&&q==
b.selectedMonth&&b._keyEvent||V.getTime()==U.getTime()&&V.getTime()==X.getTime()?" "+this._dayOverClass:"")+(la?" "+this._unselectableClass+" ui-state-disabled":"")+(W&&!J?"":" "+S[1]+(U.getTime()==x.getTime()?" "+this._currentClass:"")+(U.getTime()==c.getTime()?" ui-datepicker-today":""))+'"'+(W&&!J||!S[2]?"":' title="'+S[2]+'"')+(la?"":' data-handler="selectDay" data-event="click" data-month="'+U.getMonth()+'" data-year="'+U.getFullYear()+'"')+">"+(W&&!J?"&#xa0;":la?'<span class="ui-state-default">'+
U.getDate()+"</span>":'<a class="ui-state-default'+(U.getTime()==c.getTime()?" ui-state-highlight":"")+(U.getTime()==x.getTime()?" ui-state-active":"")+(W?" ui-priority-secondary":"")+'" href="#">'+U.getDate()+"</a>")+"</td>");U.setDate(U.getDate()+1);U=this._daylightSavingAdjust(U)}R+=ma+"</tr>"}q++;11<q&&(q=0,B++);R+="</tbody></table>"+(u?"</div>"+(0<r[0]&&Z==r[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"");N+=R}T+=N}T+=e+(a.ui.ie6&&!b.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':
"");b._keyEvent=!1;return T},_generateMonthYearHeader:function(a,b,c,d,e,f,r,q){var n=this._get(a,"changeMonth"),u=this._get(a,"changeYear"),x=this._get(a,"showMonthAfterYear"),z='<div class="ui-datepicker-title">',y="";if(f||!n)y+='<span class="ui-datepicker-month">'+r[b]+"</span>";else{r=d&&d.getFullYear()==c;for(var B=e&&e.getFullYear()==c,y=y+'<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">',A=0;12>A;A++)(!r||A>=d.getMonth())&&(!B||A<=e.getMonth())&&(y+='<option value="'+
A+'"'+(A==b?' selected="selected"':"")+">"+q[A]+"</option>");y+="</select>"}x||(z+=y+(!f&&n&&u?"":"&#xa0;"));if(!a.yearshtml)if(a.yearshtml="",f||!u)z+='<span class="ui-datepicker-year">'+c+"</span>";else{q=this._get(a,"yearRange").split(":");var C=(new Date).getFullYear();r=function(a){a=a.match(/c[+-].*/)?c+parseInt(a.substring(1),10):a.match(/[+-].*/)?C+parseInt(a,10):parseInt(a,10);return isNaN(a)?C:a};b=r(q[0]);q=Math.max(b,r(q[1]||""));b=d?Math.max(b,d.getFullYear()):b;q=e?Math.min(q,e.getFullYear()):
q;for(a.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';b<=q;b++)a.yearshtml+='<option value="'+b+'"'+(b==c?' selected="selected"':"")+">"+b+"</option>";a.yearshtml+="</select>";z+=a.yearshtml;a.yearshtml=null}z+=this._get(a,"yearSuffix");x&&(z+=(!f&&n&&u?"":"&#xa0;")+y);return z+"</div>"},_adjustInstDate:function(a,b,c){var d=a.drawYear+("Y"==c?b:0),e=a.drawMonth+("M"==c?b:0);b=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+("D"==c?b:0);d=this._restrictMinMax(a,
this._daylightSavingAdjust(new Date(d,e,b)));a.selectedDay=d.getDate();a.drawMonth=a.selectedMonth=d.getMonth();a.drawYear=a.selectedYear=d.getFullYear();"M"!=c&&"Y"!=c||this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),c=c&&b<c?c:b;return d&&c>d?d:c},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){a=this._get(a,
"numberOfMonths");return null==a?[1,1]:"number"==typeof a?[1,a]:a},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a);c=this._daylightSavingAdjust(new Date(c,d+(0>b?b:e[0]*e[1]),1));0>b&&c.setDate(this._getDaysInMonth(c.getFullYear(),
c.getMonth()));return this._isInRange(a,c)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!d||b.getTime()<=d.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff"),b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10);return{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,
"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);b=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),b,this._getFormatConfig(a))}});a.fn.datepicker=function(b){if(!this.length)return this;a.datepicker.initialized||(a(document).mousedown(a.datepicker._checkExternalClick).find(document.body).append(a.datepicker.dpDiv),
a.datepicker.initialized=!0);var c=Array.prototype.slice.call(arguments,1);return"string"==typeof b&&("isDisabled"==b||"getDate"==b||"widget"==b)||"option"==b&&2==arguments.length&&"string"==typeof arguments[1]?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c)):this.each(function(){"string"==typeof b?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this].concat(c)):a.datepicker._attachDatepicker(this,b)})};a.datepicker=new c;a.datepicker.initialized=!1;a.datepicker.uuid=
(new Date).getTime();a.datepicker.version="1.9.1";window["DP_jQuery_"+f]=a})(jQuery);
(function(a,b){var c={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},e={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};a.widget("ui.dialog",{version:"1.9.1",options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(b){var c=a(this).css(b).offset().top;0>c&&a(this).css("top",
b.top-c)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1E3},_create:function(){this.originalTitle=this.element.attr("title");"string"!==typeof this.originalTitle&&(this.originalTitle="");this.oldPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};this.options.title=this.options.title||this.originalTitle;var b=this,c=this.options,e=c.title||"&#160;",h,g,l,m;h=(this.uiDialog=a("<div>")).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+
c.dialogClass).css({display:"none",outline:0,zIndex:c.zIndex}).attr("tabIndex",-1).keydown(function(e){c.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===a.ui.keyCode.ESCAPE&&(b.close(e),e.preventDefault())}).mousedown(function(a){b.moveToTop(!1,a)}).appendTo("body");this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(h);g=(this.uiDialogTitlebar=a("<div>")).addClass("ui-dialog-titlebar  ui-widget-header  ui-corner-all  ui-helper-clearfix").bind("mousedown",
function(){h.focus()}).prependTo(h);l=a("<a href='#'></a>").addClass("ui-dialog-titlebar-close  ui-corner-all").attr("role","button").click(function(a){a.preventDefault();b.close(a)}).appendTo(g);(this.uiDialogTitlebarCloseText=a("<span>")).addClass("ui-icon ui-icon-closethick").text(c.closeText).appendTo(l);e=a("<span>").uniqueId().addClass("ui-dialog-title").html(e).prependTo(g);m=(this.uiDialogButtonPane=a("<div>")).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");(this.uiButtonSet=
a("<div>")).addClass("ui-dialog-buttonset").appendTo(m);h.attr({role:"dialog","aria-labelledby":e.attr("id")});g.find("*").add(g).disableSelection();this._hoverable(l);this._focusable(l);c.draggable&&a.fn.draggable&&this._makeDraggable();c.resizable&&a.fn.resizable&&this._makeResizable();this._createButtons(c.buttons);this._isOpen=!1;a.fn.bgiframe&&h.bgiframe();this._on(h,{keydown:function(b){if(c.modal&&b.keyCode===a.ui.keyCode.TAB){var d=a(":tabbable",h),e=d.filter(":first"),d=d.filter(":last");
if(b.target===d[0]&&!b.shiftKey)return e.focus(1),!1;if(b.target===e[0]&&b.shiftKey)return d.focus(1),!1}}})},_init:function(){this.options.autoOpen&&this.open()},_destroy:function(){var a,b=this.oldPosition;this.overlay&&this.overlay.destroy();this.uiDialog.hide();this.element.removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");this.uiDialog.remove();this.originalTitle&&this.element.attr("title",this.originalTitle);a=b.parent.children().eq(b.index);a.length&&a[0]!==this.element[0]?
a.before(this.element):b.parent.append(this.element)},widget:function(){return this.uiDialog},close:function(b){var c=this,e,h;if(this._isOpen&&!1!==this._trigger("beforeClose",b))return this._isOpen=!1,this.overlay&&this.overlay.destroy(),this.options.hide?this._hide(this.uiDialog,this.options.hide,function(){c._trigger("close",b)}):(this.uiDialog.hide(),this._trigger("close",b)),a.ui.dialog.overlay.resize(),this.options.modal&&(e=0,a(".ui-dialog").each(function(){this!==c.uiDialog[0]&&(h=a(this).css("z-index"),
isNaN(h)||(e=Math.max(e,h)))}),a.ui.dialog.maxZ=e),this},isOpen:function(){return this._isOpen},moveToTop:function(b,c){var e=this.options;if(e.modal&&!b||!e.stack&&!e.modal)return this._trigger("focus",c);e.zIndex>a.ui.dialog.maxZ&&(a.ui.dialog.maxZ=e.zIndex);this.overlay&&(a.ui.dialog.maxZ+=1,a.ui.dialog.overlay.maxZ=a.ui.dialog.maxZ,this.overlay.$el.css("z-index",a.ui.dialog.overlay.maxZ));e={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()};a.ui.dialog.maxZ+=1;this.uiDialog.css("z-index",
a.ui.dialog.maxZ);this.element.attr(e);this._trigger("focus",c);return this},open:function(){if(!this._isOpen){var b;b=this.options;var c=this.uiDialog;this._size();this._position(b.position);c.show(b.show);this.overlay=b.modal?new a.ui.dialog.overlay(this):null;this.moveToTop(!0);b=this.element.find(":tabbable");b.length||(b=this.uiDialogButtonPane.find(":tabbable"),b.length||(b=c));b.eq(0).focus();this._isOpen=!0;this._trigger("open");return this}},_createButtons:function(b){var c=this,e=!1;this.uiDialogButtonPane.remove();
this.uiButtonSet.empty();"object"===typeof b&&null!==b&&a.each(b,function(){return!(e=!0)});e?(a.each(b,function(b,d){d=a.isFunction(d)?{click:d,text:b}:d;var e=a("<button type='button'></button>").attr(d,!0).unbind("click").click(function(){d.click.apply(c.element[0],arguments)}).appendTo(c.uiButtonSet);a.fn.button&&e.button()}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)):this.uiDialog.removeClass("ui-dialog-buttons")},_makeDraggable:function(){function b(a){return{position:a.position,
offset:a.offset}}var c=this,e=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(e,g){a(this).addClass("ui-dialog-dragging");c._trigger("dragStart",e,b(g))},drag:function(a,e){c._trigger("drag",a,b(e))},stop:function(h,g){e.position=[g.position.left-c.document.scrollLeft(),g.position.top-c.document.scrollTop()];a(this).removeClass("ui-dialog-dragging");c._trigger("dragStop",h,b(g));a.ui.dialog.overlay.resize()}})},
_makeResizable:function(c){function e(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}c=c===b?this.options.resizable:c;var n=this,h=this.options,g=this.uiDialog.css("position");c="string"===typeof c?c:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:h.maxWidth,maxHeight:h.maxHeight,minWidth:h.minWidth,minHeight:this._minHeight(),handles:c,start:function(b,c){a(this).addClass("ui-dialog-resizing");
n._trigger("resizeStart",b,e(c))},resize:function(a,b){n._trigger("resize",a,e(b))},stop:function(b,c){a(this).removeClass("ui-dialog-resizing");h.height=a(this).height();h.width=a(this).width();n._trigger("resizeStop",b,e(c));a.ui.dialog.overlay.resize()}}).css("position",g).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(b){var c=[],e=[0,0],h;if(b){if("string"===
typeof b||"object"===typeof b&&"0"in b)c=b.split?b.split(" "):[b[0],b[1]],1===c.length&&(c[1]=c[0]),a.each(["left","top"],function(a,b){+c[a]===c[a]&&(e[a]=c[a],c[a]=b)}),b={my:c[0]+(0>e[0]?e[0]:"+"+e[0])+" "+c[1]+(0>e[1]?e[1]:"+"+e[1]),at:c.join(" ")};b=a.extend({},a.ui.dialog.prototype.options.position,b)}else b=a.ui.dialog.prototype.options.position;(h=this.uiDialog.is(":visible"))||this.uiDialog.show();this.uiDialog.position(b);h||this.uiDialog.hide()},_setOptions:function(b){var f=this,n={},
h=!1;a.each(b,function(a,b){f._setOption(a,b);a in c&&(h=!0);a in e&&(n[a]=b)});h&&this._size();this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",n)},_setOption:function(b,c){var e,h=this.uiDialog;switch(b){case "buttons":this._createButtons(c);break;case "closeText":this.uiDialogTitlebarCloseText.text(""+c);break;case "dialogClass":h.removeClass(this.options.dialogClass).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+c);break;case "disabled":c?h.addClass("ui-dialog-disabled"):
h.removeClass("ui-dialog-disabled");break;case "draggable":(e=h.is(":data(draggable)"))&&!c&&h.draggable("destroy");!e&&c&&this._makeDraggable();break;case "position":this._position(c);break;case "resizable":(e=h.is(":data(resizable)"))&&!c&&h.resizable("destroy");e&&"string"===typeof c&&h.resizable("option","handles",c);e||!1===c||this._makeResizable(c);break;case "title":a(".ui-dialog-title",this.uiDialogTitlebar).html(""+(c||"&#160;"))}this._super(b,c)},_size:function(){var b,c,e=this.options,
h=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0});e.minWidth>e.width&&(e.width=e.minWidth);b=this.uiDialog.css({height:"auto",width:e.width}).outerHeight();c=Math.max(0,e.minHeight-b);"auto"===e.height?a.support.minHeight?this.element.css({minHeight:c,height:"auto"}):(this.uiDialog.show(),b=this.element.css("height","auto").height(),h||this.uiDialog.hide(),this.element.height(Math.max(b,c))):this.element.height(Math.max(e.height-b,0));this.uiDialog.is(":data(resizable)")&&
this.uiDialog.resizable("option","minHeight",this._minHeight())}});a.extend(a.ui.dialog,{uuid:0,maxZ:0,getTitleId:function(a){a=a.attr("id");a||(a=this.uuid+=1);return"ui-dialog-title-"+a},overlay:function(b){this.$el=a.ui.dialog.overlay.create(b)}});a.extend(a.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:a.map("focus mousedown mouseup keydown keypress click".split(" "),function(a){return a+".dialog-overlay"}).join(" "),create:function(b){0===this.instances.length&&(setTimeout(function(){a.ui.dialog.overlay.instances.length&&
a(document).bind(a.ui.dialog.overlay.events,function(b){if(a(b.target).zIndex()<a.ui.dialog.overlay.maxZ)return!1})},1),a(window).bind("resize.dialog-overlay",a.ui.dialog.overlay.resize));var c=this.oldInstances.pop()||a("<div>").addClass("ui-widget-overlay");a(document).bind("keydown.dialog-overlay",function(e){var h=a.ui.dialog.overlay.instances;0!==h.length&&h[h.length-1]===c&&b.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===a.ui.keyCode.ESCAPE&&(b.close(e),e.preventDefault())});
c.appendTo(document.body).css({width:this.width(),height:this.height()});a.fn.bgiframe&&c.bgiframe();this.instances.push(c);return c},destroy:function(b){var c=a.inArray(b,this.instances),e=0;-1!==c&&this.oldInstances.push(this.instances.splice(c,1)[0]);0===this.instances.length&&a([document,window]).unbind(".dialog-overlay");b.height(0).width(0).remove();a.each(this.instances,function(){e=Math.max(e,this.css("z-index"))});this.maxZ=e},height:function(){var b,c;return a.ui.ie?(b=Math.max(document.documentElement.scrollHeight,
document.body.scrollHeight),c=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),b<c?a(window).height()+"px":b+"px"):a(document).height()+"px"},width:function(){var b,c;return a.ui.ie?(b=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),c=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),b<c?a(window).width()+"px":b+"px"):a(document).width()+"px"},resize:function(){var b=a([]);a.each(a.ui.dialog.overlay.instances,function(){b=b.add(this)});
b.css({width:0,height:0}).css({width:a.ui.dialog.overlay.width(),height:a.ui.dialog.overlay.height()})}});a.extend(a.ui.dialog.overlay.prototype,{destroy:function(){a.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);
(function(a,b){var c=!1;a.widget("ui.menu",{version:"1.9.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,
a.proxy(function(a){this.options.disabled&&a.preventDefault()},this));this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true");this._on({"mousedown .ui-menu-item > a":function(a){a.preventDefault()},"click .ui-state-disabled > a":function(a){a.preventDefault()},"click .ui-menu-item:has(a)":function(b){var d=a(b.target).closest(".ui-menu-item");!c&&d.not(".ui-state-disabled").length&&(c=!0,this.select(b),d.has(".ui-menu").length?this.expand(b):this.element.is(":focus")||
(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(b){var c=a(b.currentTarget);c.siblings().children(".ui-state-active").removeClass("ui-state-active");this.focus(b,c)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(a,b){var c=this.active||this.element.children(".ui-menu-item").eq(0);b||this.focus(a,c)},blur:function(b){this._delay(function(){a.contains(this.element[0],
this.document[0].activeElement)||this.collapseAll(b)})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(b){a(b.target).closest(".ui-menu").length||this.collapseAll(b);c=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();
this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var b=a(this);b.data("ui-menu-submenu-carat")&&b.remove()});this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(b){function c(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,
"\\$&")}var f,n,h,g,l=!0;switch(b.keyCode){case a.ui.keyCode.PAGE_UP:this.previousPage(b);break;case a.ui.keyCode.PAGE_DOWN:this.nextPage(b);break;case a.ui.keyCode.HOME:this._move("first","first",b);break;case a.ui.keyCode.END:this._move("last","last",b);break;case a.ui.keyCode.UP:this.previous(b);break;case a.ui.keyCode.DOWN:this.next(b);break;case a.ui.keyCode.LEFT:this.collapse(b);break;case a.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(b);break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:this._activate(b);
break;case a.ui.keyCode.ESCAPE:this.collapse(b);break;default:l=!1,f=this.previousFilter||"",n=String.fromCharCode(b.keyCode),h=!1,clearTimeout(this.filterTimer),n===f?h=!0:n=f+n,g=new RegExp("^"+c(n),"i"),f=this.activeMenu.children(".ui-menu-item").filter(function(){return g.test(a(this).children("a").text())}),f=h&&-1!==f.index(this.active.next())?this.active.nextAll(".ui-menu-item"):f,f.length||(n=String.fromCharCode(b.keyCode),g=new RegExp("^"+c(n),"i"),f=this.activeMenu.children(".ui-menu-item").filter(function(){return g.test(a(this).children("a").text())})),
f.length?(this.focus(b,f),1<f.length?(this.previousFilter=n,this.filterTimer=this._delay(function(){delete this.previousFilter},1E3)):delete this.previousFilter):delete this.previousFilter}l&&b.preventDefault()},_activate:function(a){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(a):this.select(a))},refresh:function(){var b,c=this.options.icons.submenu,f=this.element.find(this.options.menus+":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,
"aria-hidden":"true","aria-expanded":"false"});b=f.add(this.element);b.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()});b.children(":not(.ui-menu-item)").each(function(){var b=a(this);/[^\-\u2014\u2013\s]/.test(b.text())||b.addClass("ui-widget-content ui-menu-divider")});b.children(".ui-state-disabled").attr("aria-disabled","true");f.each(function(){var b=a(this),
e=b.prev("a"),f=a("<span>").addClass("ui-menu-icon ui-icon "+c).data("ui-menu-submenu-carat",!0);e.attr("aria-haspopup","true").prepend(f);b.attr("aria-labelledby",e.attr("id"))});this.active&&!a.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(a,b){var c;this.blur(a,a&&"focus"===a.type);this._scrollIntoView(b);this.active=b.first();c=this.active.children("a").addClass("ui-state-focus");this.options.role&&
this.element.attr("aria-activedescendant",c.attr("id"));this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active");a&&"keydown"===a.type?this._close():this.timer=this._delay(function(){this._close()},this.delay);c=b.children(".ui-menu");c.length&&/^mouse/.test(a.type)&&this._startOpening(c);this.activeMenu=b.parent();this._trigger("focus",a,{item:b})},_scrollIntoView:function(b){var c,f,n;this._hasScroll()&&(c=parseFloat(a.css(this.activeMenu[0],"borderTopWidth"))||
0,f=parseFloat(a.css(this.activeMenu[0],"paddingTop"))||0,c=b.offset().top-this.activeMenu.offset().top-c-f,f=this.activeMenu.scrollTop(),n=this.activeMenu.height(),b=b.height(),0>c?this.activeMenu.scrollTop(f+c):c+b>n&&this.activeMenu.scrollTop(f+c-n+b))},blur:function(a,b){b||clearTimeout(this.timer);this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",a,{item:this.active}))},_startOpening:function(a){clearTimeout(this.timer);"true"===a.attr("aria-hidden")&&
(this.timer=this._delay(function(){this._close();this._open(a)},this.delay))},_open:function(b){var c=a.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(b.parents(".ui-menu")).hide().attr("aria-hidden","true");b.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(c)},collapseAll:function(b,c){clearTimeout(this.timer);this.timer=this._delay(function(){var f=c?this.element:a(b&&b.target).closest(this.element.find(".ui-menu"));
f.length||(f=this.element);this._close(f);this.blur(b);this.activeMenu=f},this.delay)},_close:function(a){a||(a=this.active?this.active.parent():this.element);a.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(a){var b=this.active&&this.active.parent().closest(".ui-menu-item",this.element);b&&b.length&&(this._close(),this.focus(a,b))},expand:function(a){var b=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();
b&&b.length&&(this._open(b.parent()),this._delay(function(){this.focus(a,b)}))},next:function(a){this._move("next","first",a)},previous:function(a){this._move("prev","last",a)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(a,b,c){var n;this.active&&(n="first"===a||"last"===a?this.active["first"===a?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[a+
"All"](".ui-menu-item").eq(0));n&&n.length&&this.active||(n=this.activeMenu.children(".ui-menu-item")[b]());this.focus(c,n)},nextPage:function(b){var c,f,n;this.active?this.isLastItem()||(this._hasScroll()?(f=this.active.offset().top,n=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){c=a(this);return 0>c.offset().top-f-n}),this.focus(b,c)):this.focus(b,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())):this.next(b)},previousPage:function(b){var c,f,
n;this.active?this.isFirstItem()||(this._hasScroll()?(f=this.active.offset().top,n=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){c=a(this);return 0<c.offset().top-f+n}),this.focus(b,c)):this.focus(b,this.activeMenu.children(".ui-menu-item").first())):this.next(b)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(b){this.active=this.active||a(b.target).closest(".ui-menu-item");var c={item:this.active};this.active.has(".ui-menu").length||
this.collapseAll(b,!0);this._trigger("select",b,c)}})})(jQuery);
(function(a,b){a.widget("ui.progressbar",{version:"1.9.1",options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()});this.valueDiv=a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);this.oldValue=this._value();this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");
this.valueDiv.remove()},value:function(a){if(a===b)return this._value();this._setOption("value",a);return this},_setOption:function(a,b){"value"===a&&(this.options.value=b,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete"));this._super(a,b)},_value:function(){var a=this.options.value;"number"!==typeof a&&(a=0);return Math.min(this.options.max,Math.max(this.min,a))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var a=this.value(),
b=this._percentage();this.oldValue!==a&&(this.oldValue=a,this._trigger("change"));this.valueDiv.toggle(a>this.min).toggleClass("ui-corner-right",a===this.options.max).width(b.toFixed(0)+"%");this.element.attr("aria-valuenow",a)}})})(jQuery);
(function(a,b){a.widget("ui.slider",a.ui.mouse,{version:"1.9.1",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var b,e,d=this.options,f=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),n=[];this._mouseSliding=this._keySliding=!1;this._animateOff=!0;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+
" ui-widget ui-widget-content ui-corner-all"+(d.disabled?" ui-slider-disabled ui-disabled":""));this.range=a([]);d.range&&(!0===d.range&&(d.values||(d.values=[this._valueMin(),this._valueMin()]),d.values.length&&2!==d.values.length&&(d.values=[d.values[0],d.values[0]])),this.range=a("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===d.range||"max"===d.range?" ui-slider-range-"+d.range:"")));e=d.values&&d.values.length||1;for(b=f.length;b<e;b++)n.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");
this.handles=f.add(a(n.join("")).appendTo(this.element));this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(a){a.preventDefault()}).mouseenter(function(){d.disabled||a(this).addClass("ui-state-hover")}).mouseleave(function(){a(this).removeClass("ui-state-hover")}).focus(function(){d.disabled?a(this).blur():(a(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),a(this).addClass("ui-state-focus"))}).blur(function(){a(this).removeClass("ui-state-focus")});
this.handles.each(function(b){a(this).data("ui-slider-handle-index",b)});this._on(this.handles,{keydown:function(b){var c,d,e,f=a(b.target).data("ui-slider-handle-index");switch(b.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(b.preventDefault(),!this._keySliding&&(this._keySliding=!0,a(b.target).addClass("ui-state-active"),c=this._start(b,f),!1===
c))return}e=this.options.step;c=this.options.values&&this.options.values.length?d=this.values(f):d=this.value();switch(b.keyCode){case a.ui.keyCode.HOME:d=this._valueMin();break;case a.ui.keyCode.END:d=this._valueMax();break;case a.ui.keyCode.PAGE_UP:d=this._trimAlignValue(c+(this._valueMax()-this._valueMin())/5);break;case a.ui.keyCode.PAGE_DOWN:d=this._trimAlignValue(c-(this._valueMax()-this._valueMin())/5);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(c===this._valueMax())return;d=this._trimAlignValue(c+
e);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(c===this._valueMin())return;d=this._trimAlignValue(c-e)}this._slide(b,f,d)},keyup:function(b){var c=a(b.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(b,c),this._change(b,c),a(b.target).removeClass("ui-state-active"))}});this._refreshValue();this._animateOff=!1},_destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all");
this._mouseDestroy()},_mouseCapture:function(b){var e,d,f,n,h,g=this;h=this.options;if(h.disabled)return!1;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();e=this._normValueFromMouse({x:b.pageX,y:b.pageY});d=this._valueMax()-this._valueMin()+1;this.handles.each(function(b){var c=Math.abs(e-g.values(b));d>c&&(d=c,f=a(this),n=b)});!0===h.range&&this.values(1)===h.min&&(n+=1,f=a(this.handles[n]));if(!1===this._start(b,n))return!1;
this._mouseSliding=!0;this._handleIndex=n;f.addClass("ui-state-active").focus();h=f.offset();this._clickOffset=a(b.target).parents().andSelf().is(".ui-slider-handle")?{left:b.pageX-h.left-f.width()/2,top:b.pageY-h.top-f.height()/2-(parseInt(f.css("borderTopWidth"),10)||0)-(parseInt(f.css("borderBottomWidth"),10)||0)+(parseInt(f.css("marginTop"),10)||0)}:{left:0,top:0};this.handles.hasClass("ui-state-hover")||this._slide(b,n,e);return this._animateOff=!0},_mouseStart:function(){return!0},_mouseDrag:function(a){var b=
this._normValueFromMouse({x:a.pageX,y:a.pageY});this._slide(a,this._handleIndex,b);return!1},_mouseStop:function(a){this.handles.removeClass("ui-state-active");this._mouseSliding=!1;this._stop(a,this._handleIndex);this._change(a,this._handleIndex);this._clickOffset=this._handleIndex=null;return this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){var b;"horizontal"===this.orientation?(b=this.elementSize.width,
a=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,a=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0));b=a/b;1<b&&(b=1);0>b&&(b=0);"vertical"===this.orientation&&(b=1-b);a=this._valueMax()-this._valueMin();b=this._valueMin()+b*a;return this._trimAlignValue(b)},_start:function(a,b){var d={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(d.value=this.values(b),d.values=this.values());
return this._trigger("start",a,d)},_slide:function(a,b,d){var f;this.options.values&&this.options.values.length?(f=this.values(b?0:1),2===this.options.values.length&&!0===this.options.range&&(0===b&&d>f||1===b&&d<f)&&(d=f),d!==this.values(b)&&(f=this.values(),f[b]=d,a=this._trigger("slide",a,{handle:this.handles[b],value:d,values:f}),this.values(b?0:1),!1!==a&&this.values(b,d,!0))):d!==this.value()&&(a=this._trigger("slide",a,{handle:this.handles[b],value:d}),!1!==a&&this.value(d))},_stop:function(a,
b){var d={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(d.value=this.values(b),d.values=this.values());this._trigger("stop",a,d)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var d={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(d.value=this.values(b),d.values=this.values());this._trigger("change",a,d)}},value:function(a){if(arguments.length)this.options.value=this._trimAlignValue(a),this._refreshValue(),
this._change(null,0);else return this._value()},values:function(b,e){var d,f,n;if(1<arguments.length)this.options.values[b]=this._trimAlignValue(e),this._refreshValue(),this._change(null,b);else if(arguments.length)if(a.isArray(arguments[0])){d=this.options.values;f=arguments[0];for(n=0;n<d.length;n+=1)d[n]=this._trimAlignValue(f[n]),this._change(null,n);this._refreshValue()}else return this.options.values&&this.options.values.length?this._values(b):this.value();else return this._values()},_setOption:function(b,
e){var d,f=0;a.isArray(this.options.values)&&(f=this.options.values.length);a.Widget.prototype._setOption.apply(this,arguments);switch(b){case "disabled":e?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",!1),this.element.removeClass("ui-disabled"));break;case "orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+
this.orientation);this._refreshValue();break;case "value":this._animateOff=!0;this._refreshValue();this._change(null,0);this._animateOff=!1;break;case "values":this._animateOff=!0;this._refreshValue();for(d=0;d<f;d+=1)this._change(null,d);this._animateOff=!1;break;case "min":case "max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var b,d;if(arguments.length)return b=this.options.values[a],
b=this._trimAlignValue(b);b=this.options.values.slice();for(d=0;d<b.length;d+=1)b[d]=this._trimAlignValue(b[d]);return b},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=0<this.options.step?this.options.step:1,d=(a-this._valueMin())%b;a-=d;2*Math.abs(d)>=b&&(a+=0<d?b:-b);return parseFloat(a.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var b,
e,d,f,n,h=this.options.range,g=this.options,l=this,m=this._animateOff?!1:g.animate,p={};if(this.options.values&&this.options.values.length)this.handles.each(function(d){e=(l.values(d)-l._valueMin())/(l._valueMax()-l._valueMin())*100;p["horizontal"===l.orientation?"left":"bottom"]=e+"%";a(this).stop(1,1)[m?"animate":"css"](p,g.animate);if(!0===l.options.range)if("horizontal"===l.orientation){if(0===d)l.range.stop(1,1)[m?"animate":"css"]({left:e+"%"},g.animate);if(1===d)l.range[m?"animate":"css"]({width:e-
b+"%"},{queue:!1,duration:g.animate})}else{if(0===d)l.range.stop(1,1)[m?"animate":"css"]({bottom:e+"%"},g.animate);if(1===d)l.range[m?"animate":"css"]({height:e-b+"%"},{queue:!1,duration:g.animate})}b=e});else{d=this.value();f=this._valueMin();n=this._valueMax();e=n!==f?(d-f)/(n-f)*100:0;p["horizontal"===this.orientation?"left":"bottom"]=e+"%";this.handle.stop(1,1)[m?"animate":"css"](p,g.animate);if("min"===h&&"horizontal"===this.orientation)this.range.stop(1,1)[m?"animate":"css"]({width:e+"%"},g.animate);
if("max"===h&&"horizontal"===this.orientation)this.range[m?"animate":"css"]({width:100-e+"%"},{queue:!1,duration:g.animate});if("min"===h&&"vertical"===this.orientation)this.range.stop(1,1)[m?"animate":"css"]({height:e+"%"},g.animate);if("max"===h&&"vertical"===this.orientation)this.range[m?"animate":"css"]({height:100-e+"%"},{queue:!1,duration:g.animate})}}})})(jQuery);
(function(a){function b(a){return function(){var b=this.element.val();a.apply(this,arguments);this._refresh();b!==this.element.val()&&this._trigger("change")}}a.widget("ui.spinner",{version:"1.9.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max);
this._setOption("min",this.options.min);this._setOption("step",this.options.step);this._value(this.element.val(),!0);this._draw();this._on(this._events);this._refresh();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var b={},e=this.element;a.each(["min","max","step"],function(a,f){var n=e.attr(f);void 0!==n&&n.length&&(b[f]=n)});return b},_events:{keydown:function(a){this._start(a)&&this._keydown(a)&&a.preventDefault()},keyup:"_stop",
focus:function(){this.previous=this.element.val()},blur:function(a){this.cancelBlur?delete this.cancelBlur:(this._refresh(),this.previous!==this.element.val()&&this._trigger("change",a))},mousewheel:function(a,b){if(b){if(!this.spinning&&!this._start(a))return!1;this._spin((0<b?1:-1)*this.options.step,a);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(a)},100);a.preventDefault()}},"mousedown .ui-spinner-button":function(b){function e(){this.element[0]!==
this.document[0].activeElement&&(this.element.focus(),this.previous=d,this._delay(function(){this.previous=d}))}var d;d=this.element[0]===this.document[0].activeElement?this.previous:this.element.val();b.preventDefault();e.call(this);this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur;e.call(this)});!1!==this._start(b)&&this._repeat(null,a(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(b){if(a(b.currentTarget).hasClass("ui-state-active")){if(!1===
this._start(b))return!1;this._repeat(null,a(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b)}},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var a=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton");this.buttons=a.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all");this.buttons.height()>Math.ceil(.5*a.height())&&0<a.height()&&
a.height(a.height());this.options.disabled&&this.disable()},_keydown:function(b){var e=this.options,d=a.ui.keyCode;switch(b.keyCode){case d.UP:return this._repeat(null,1,b),!0;case d.DOWN:return this._repeat(null,-1,b),!0;case d.PAGE_UP:return this._repeat(null,e.page,b),!0;case d.PAGE_DOWN:return this._repeat(null,-e.page,b),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+
this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(a){if(!this.spinning&&!1===this._trigger("start",a))return!1;this.counter||(this.counter=1);return this.spinning=!0},_repeat:function(a,b,d){a=a||500;clearTimeout(this.timer);this.timer=this._delay(function(){this._repeat(40,b,d)},a);this._spin(b*this.options.step,d)},_spin:function(a,b){var d=this.value()||0;this.counter||
(this.counter=1);d=this._adjustValue(d+a*this._increment(this.counter));this.spinning&&!1===this._trigger("spin",b,{value:d})||(this._value(d),this.counter++)},_increment:function(b){var e=this.options.incremental;return e?a.isFunction(e)?e(b):Math.floor(b*b*b/5E4-b*b/500+17*b/200+1):1},_precision:function(){var a=this._precisionOf(this.options.step);null!==this.options.min&&(a=Math.max(a,this._precisionOf(this.options.min)));return a},_precisionOf:function(a){a=a.toString();var b=a.indexOf(".");
return-1===b?0:a.length-b-1},_adjustValue:function(a){var b,d=this.options;b=null!==d.min?d.min:0;a=Math.round((a-b)/d.step)*d.step;a=b+a;a=parseFloat(a.toFixed(this._precision()));return null!==d.max&&a>d.max?d.max:null!==d.min&&a<d.min?d.min:a},_stop:function(a){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",a))},_setOption:function(a,b){if("culture"===a||"numberFormat"===a){var d=this._parse(this.element.val());this.options[a]=
b;this.element.val(this._format(d))}else"max"!==a&&"min"!==a&&"step"!==a||"string"!==typeof b||(b=this._parse(b)),this._super(a,b),"disabled"===a&&(b?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:b(function(a){this._super(a);this._value(this.element.val())}),_parse:function(a){"string"===typeof a&&""!==a&&(a=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(a,10,this.options.culture):
+a);return""===a||isNaN(a)?null:a},_format:function(a){return""===a?"":window.Globalize&&this.options.numberFormat?Globalize.format(a,this.options.numberFormat,this.options.culture):a},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(a,b){var d;""!==a&&(d=this._parse(a),null!==d&&(b||(d=this._adjustValue(d)),a=this._format(d)));this.element.val(a);this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",
!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.uiSpinner.replaceWith(this.element)},stepUp:b(function(a){this._stepUp(a)}),_stepUp:function(a){this._spin((a||1)*this.options.step)},stepDown:b(function(a){this._stepDown(a)}),_stepDown:function(a){this._spin((a||1)*-this.options.step)},pageUp:b(function(a){this._stepUp((a||1)*this.options.page)}),pageDown:b(function(a){this._stepDown((a||1)*this.options.page)}),
value:function(a){if(!arguments.length)return this._parse(this.element.val());b(this._value).call(this,a)},widget:function(){return this.uiSpinner}})})(jQuery);
(function(a,b){function c(a){return 1<a.hash.length&&a.href.replace(d,"")===location.href.replace(d,"")}var e=0,d=/#.*$/;a.widget("ui.tabs",{version:"1.9.1",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var b=this,c=this.options,d=c.active,e=location.hash.substring(1);this.running=!1;this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",
c.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(b){a(this).is(".ui-state-disabled")&&b.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){a(this).closest("li").is(".ui-state-disabled")&&this.blur()});this._processTabs();null===d&&(e&&this.tabs.each(function(b,c){if(a(c).attr("aria-controls")===e)return d=b,!1}),null===d&&(d=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null===d||-1===d)&&(d=this.tabs.length?0:!1);!1!==
d&&(d=this.tabs.index(this.tabs.eq(d)),-1===d&&(d=c.collapsible?!1:0));c.active=d;!c.collapsible&&!1===c.active&&this.anchors.length&&(c.active=0);a.isArray(c.disabled)&&(c.disabled=a.unique(c.disabled.concat(a.map(this.tabs.filter(".ui-state-disabled"),function(a){return b.tabs.index(a)}))).sort());this.active=!1!==this.options.active&&this.anchors.length?this._findActive(this.options.active):a();this._refresh();this.active.length&&this.load(c.active)},_getCreateEventData:function(){return{tab:this.active,
panel:this.active.length?this._getPanelForTab(this.active):a()}},_tabKeydown:function(b){var c=a(this.document[0].activeElement).closest("li"),d=this.tabs.index(c),e=!0;if(!this._handlePageNav(b)){switch(b.keyCode){case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:d++;break;case a.ui.keyCode.UP:case a.ui.keyCode.LEFT:e=!1;d--;break;case a.ui.keyCode.END:d=this.anchors.length-1;break;case a.ui.keyCode.HOME:d=0;break;case a.ui.keyCode.SPACE:b.preventDefault();clearTimeout(this.activating);this._activate(d);
return;case a.ui.keyCode.ENTER:b.preventDefault();clearTimeout(this.activating);this._activate(d===this.options.active?!1:d);return;default:return}b.preventDefault();clearTimeout(this.activating);d=this._focusNextTab(d,e);b.ctrlKey||(c.attr("aria-selected","false"),this.tabs.eq(d).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",d)},this.delay))}},_panelKeydown:function(b){!this._handlePageNav(b)&&b.ctrlKey&&b.keyCode===a.ui.keyCode.UP&&(b.preventDefault(),
this.active.focus())},_handlePageNav:function(b){if(b.altKey&&b.keyCode===a.ui.keyCode.PAGE_UP)return this._activate(this._focusNextTab(this.options.active-1,!1)),!0;if(b.altKey&&b.keyCode===a.ui.keyCode.PAGE_DOWN)return this._activate(this._focusNextTab(this.options.active+1,!0)),!0},_findNextTab:function(b,c){function d(){b>e&&(b=0);0>b&&(b=e);return b}for(var e=this.tabs.length-1;-1!==a.inArray(d(),this.options.disabled);)b=c?b+1:b-1;return b},_focusNextTab:function(a,b){a=this._findNextTab(a,
b);this.tabs.eq(a).focus();return a},_setOption:function(a,b){"active"===a?this._activate(b):"disabled"===a?this._setupDisabled(b):(this._super(a,b),"collapsible"===a&&(this.element.toggleClass("ui-tabs-collapsible",b),b||!1!==this.options.active||this._activate(0)),"event"===a&&this._setupEvents(b),"heightStyle"===a&&this._setupHeightStyle(b))},_tabId:function(a){return a.attr("aria-controls")||"ui-tabs-"+ ++e},_sanitizeSelector:function(a){return a?a.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,
"\\$&"):""},refresh:function(){var b=this.options,c=this.tablist.children(":has(a[href])");b.disabled=a.map(c.filter(".ui-state-disabled"),function(a){return c.index(a)});this._processTabs();!1!==b.active&&this.anchors.length?this.active.length&&!a.contains(this.tablist[0],this.active[0])?this.tabs.length===b.disabled.length?(b.active=!1,this.active=a()):this._activate(this._findNextTab(Math.max(0,b.active-1),!1)):b.active=this.tabs.index(this.active):(b.active=!1,this.active=a());this._refresh()},
_refresh:function(){this._setupDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"});this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true",
"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var b=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist");this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1});this.anchors=this.tabs.map(function(){return a("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1});this.panels=
a();this.anchors.each(function(d,e){var g,l,m,p=a(e).uniqueId().attr("id"),t=a(e).closest("li"),r=t.attr("aria-controls");c(e)?(g=e.hash,l=b.element.find(b._sanitizeSelector(g))):(m=b._tabId(t),g="#"+m,l=b.element.find(g),l.length||(l=b._createPanel(m),l.insertAfter(b.panels[d-1]||b.tablist)),l.attr("aria-live","polite"));l.length&&(b.panels=b.panels.add(l));r&&t.data("ui-tabs-aria-controls",r);t.attr({"aria-controls":g.substring(1),"aria-labelledby":p});l.attr("aria-labelledby",p)});this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role",
"tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(b){return a("<div>").attr("id",b).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(b){a.isArray(b)&&(b.length?b.length===this.anchors.length&&(b=!0):b=!1);for(var c=0,d;d=this.tabs[c];c++)!0===b||-1!==a.inArray(c,b)?a(d).addClass("ui-state-disabled").attr("aria-disabled","true"):a(d).removeClass("ui-state-disabled").removeAttr("aria-disabled");
this.options.disabled=b},_setupEvents:function(b){var c={click:function(a){a.preventDefault()}};b&&a.each(b.split(" "),function(a,b){c[b]="_eventHandler"});this._off(this.anchors.add(this.tabs).add(this.panels));this._on(this.anchors,c);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_setupHeightStyle:function(b){var c,d,e=this.element.parent();"fill"===b?(a.support.minHeight||(d=e.css("overflow"),e.css("overflow",
"hidden")),c=e.height(),this.element.siblings(":visible").each(function(){var b=a(this),d=b.css("position");"absolute"!==d&&"fixed"!==d&&(c-=b.outerHeight(!0))}),d&&e.css("overflow",d),this.element.children().not(this.panels).each(function(){c-=a(this).outerHeight(!0)}),this.panels.each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")):"auto"===b&&(c=0,this.panels.each(function(){c=Math.max(c,a(this).height("").height())}).height(c))},_eventHandler:function(b){var c=
this.options,d=this.active,e=a(b.currentTarget).closest("li"),l=e[0]===d[0],m=l&&c.collapsible,p=m?a():this._getPanelForTab(e),t=d.length?this._getPanelForTab(d):a(),d={oldTab:d,oldPanel:t,newTab:m?a():e,newPanel:p};b.preventDefault();e.hasClass("ui-state-disabled")||e.hasClass("ui-tabs-loading")||this.running||l&&!c.collapsible||!1===this._trigger("beforeActivate",b,d)||(c.active=m?!1:this.tabs.index(e),this.active=l?a():e,this.xhr&&this.xhr.abort(),t.length||p.length||a.error("jQuery UI Tabs: Mismatching fragment identifier."),
p.length&&this.load(this.tabs.index(e),b),this._toggle(b,d))},_toggle:function(b,c){function d(){l.running=!1;l._trigger("activate",b,c)}function e(){c.newTab.closest("li").addClass("ui-tabs-active ui-state-active");m.length&&l.options.show?l._show(m,l.options.show,d):(m.show(),d())}var l=this,m=c.newPanel,p=c.oldPanel;this.running=!0;p.length&&this.options.hide?this._hide(p,this.options.hide,function(){c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");e()}):(c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),
p.hide(),e());p.attr({"aria-expanded":"false","aria-hidden":"true"});c.oldTab.attr("aria-selected","false");m.length&&p.length?c.oldTab.attr("tabIndex",-1):m.length&&this.tabs.filter(function(){return 0===a(this).attr("tabIndex")}).attr("tabIndex",-1);m.attr({"aria-expanded":"true","aria-hidden":"false"});c.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(b){b=this._findActive(b);b[0]!==this.active[0]&&(b.length||(b=this.active),b=b.find(".ui-tabs-anchor")[0],this._eventHandler({target:b,
currentTarget:b,preventDefault:a.noop}))},_findActive:function(b){return!1===b?a():this.tabs.eq(b)},_getIndex:function(a){"string"===typeof a&&(a=this.anchors.index(this.anchors.filter("[href$='"+a+"']")));return a},_destroy:function(){this.xhr&&this.xhr.abort();this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible");this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role");this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeData("href.tabs").removeData("load.tabs").removeUniqueId();
this.tabs.add(this.panels).each(function(){a.data(this,"ui-tabs-destroy")?a(this).remove():a(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")});this.tabs.each(function(){var b=a(this),c=b.data("ui-tabs-aria-controls");
c?b.attr("aria-controls",c):b.removeAttr("aria-controls")});"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(c){var d=this.options.disabled;!1!==d&&(c===b?d=!1:(c=this._getIndex(c),d=a.isArray(d)?a.map(d,function(a){return a!==c?a:null}):a.map(this.tabs,function(a,b){return b!==c?b:null})),this._setupDisabled(d))},disable:function(c){var d=this.options.disabled;if(!0!==d){if(c===b)d=!0;else{c=this._getIndex(c);if(-1!==a.inArray(c,d))return;d=a.isArray(d)?a.merge([c],
d).sort():[c]}this._setupDisabled(d)}},load:function(b,d){b=this._getIndex(b);var e=this,g=this.tabs.eq(b),l=g.find(".ui-tabs-anchor"),m=this._getPanelForTab(g),p={tab:g,panel:m};c(l[0])||(this.xhr=a.ajax(this._ajaxSettings(l,d,p)))&&"canceled"!==this.xhr.statusText&&(g.addClass("ui-tabs-loading"),m.attr("aria-busy","true"),this.xhr.success(function(a){setTimeout(function(){m.html(a);e._trigger("load",d,p)},1)}).complete(function(a,b){setTimeout(function(){"abort"===b&&e.panels.stop(!1,!0);g.removeClass("ui-tabs-loading");
m.removeAttr("aria-busy");a===e.xhr&&delete e.xhr},1)}))},_ajaxSettings:function(b,c,d){var e=this;return{url:b.attr("href"),beforeSend:function(b,f){return e._trigger("beforeLoad",c,a.extend({jqXHR:b,ajaxSettings:f},d))}}},_getPanelForTab:function(b){b=a(b).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+b))}});!1!==a.uiBackCompat&&(a.ui.tabs.prototype._ui=function(a,b){return{tab:a,panel:b,index:this.anchors.index(a)}},a.widget("ui.tabs",a.ui.tabs,{url:function(a,b){this.anchors.eq(a).attr("href",
b)}}),a.widget("ui.tabs",a.ui.tabs,{options:{ajaxOptions:null,cache:!1},_create:function(){this._super();var b=this;this._on({tabsbeforeload:function(c,d){a.data(d.tab[0],"cache.tabs")?c.preventDefault():d.jqXHR.success(function(){b.options.cache&&a.data(d.tab[0],"cache.tabs",!0)})}})},_ajaxSettings:function(b,c,d){var e=this.options.ajaxOptions;return a.extend({},e,{error:function(a,b){try{e.error(a,b,d.tab.closest("li").index(),d.tab[0])}catch(c){}}},this._superApply(arguments))},_setOption:function(a,
b){"cache"===a&&!1===b&&this.anchors.removeData("cache.tabs");this._super(a,b)},_destroy:function(){this.anchors.removeData("cache.tabs");this._super()},url:function(a){this.anchors.eq(a).removeData("cache.tabs");this._superApply(arguments)}}),a.widget("ui.tabs",a.ui.tabs,{abort:function(){this.xhr&&this.xhr.abort()}}),a.widget("ui.tabs",a.ui.tabs,{options:{spinner:"<em>Loading&#8230;</em>"},_create:function(){this._super();this._on({tabsbeforeload:function(a,b){if(a.target===this.element[0]&&this.options.spinner){var c=
b.tab.find("span"),d=c.html();c.html(this.options.spinner);b.jqXHR.complete(function(){c.html(d)})}}})}}),a.widget("ui.tabs",a.ui.tabs,{options:{enable:null,disable:null},enable:function(b){var c=this.options,d;if(b&&!0===c.disabled||a.isArray(c.disabled)&&-1!==a.inArray(b,c.disabled))d=!0;this._superApply(arguments);d&&this._trigger("enable",null,this._ui(this.anchors[b],this.panels[b]))},disable:function(b){var c=this.options,d;if(b&&!1===c.disabled||a.isArray(c.disabled)&&-1===a.inArray(b,c.disabled))d=
!0;this._superApply(arguments);d&&this._trigger("disable",null,this._ui(this.anchors[b],this.panels[b]))}}),a.widget("ui.tabs",a.ui.tabs,{options:{add:null,remove:null,tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},add:function(c,d,e){e===b&&(e=this.anchors.length);var g,l=this.options;d=a(l.tabTemplate.replace(/#\{href\}/g,c).replace(/#\{label\}/g,d));var m=c.indexOf("#")?this._tabId(d):c.replace("#","");d.addClass("ui-state-default ui-corner-top").data("ui-tabs-destroy",!0);
d.attr("aria-controls",m);c=e>=this.tabs.length;g=this.element.find("#"+m);g.length||(g=this._createPanel(m),c?0<e?g.insertAfter(this.panels.eq(-1)):g.appendTo(this.element):g.insertBefore(this.panels[e]));g.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").hide();c?d.appendTo(this.tablist):d.insertBefore(this.tabs[e]);l.disabled=a.map(l.disabled,function(a){return a>=e?++a:a});this.refresh();1===this.tabs.length&&!1===l.active&&this.option("active",0);this._trigger("add",null,this._ui(this.anchors[e],
this.panels[e]));return this},remove:function(b){b=this._getIndex(b);var c=this.options,d=this.tabs.eq(b).remove(),e=this._getPanelForTab(d).remove();d.hasClass("ui-tabs-active")&&2<this.anchors.length&&this._activate(b+(b+1<this.anchors.length?1:-1));c.disabled=a.map(a.grep(c.disabled,function(a){return a!==b}),function(a){return a>=b?--a:a});this.refresh();this._trigger("remove",null,this._ui(d.find("a")[0],e[0]));return this}}),a.widget("ui.tabs",a.ui.tabs,{length:function(){return this.anchors.length}}),
a.widget("ui.tabs",a.ui.tabs,{options:{idPrefix:"ui-tabs-"},_tabId:function(b){b=b.is("li")?b.find("a[href]"):b;b=b[0];return a(b).closest("li").attr("aria-controls")||b.title&&b.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF\-]/g,"")||this.options.idPrefix+ ++e}}),a.widget("ui.tabs",a.ui.tabs,{options:{panelTemplate:"<div></div>"},_createPanel:function(b){return a(this.options.panelTemplate).attr("id",b).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)}}),
a.widget("ui.tabs",a.ui.tabs,{_create:function(){var a=this.options;null===a.active&&a.selected!==b&&(a.active=-1===a.selected?!1:a.selected);this._super();a.selected=a.active;!1===a.selected&&(a.selected=-1)},_setOption:function(a,b){if("selected"!==a)return this._super(a,b);var c=this.options;this._super("active",-1===b?!1:b);c.selected=c.active;!1===c.selected&&(c.selected=-1)},_eventHandler:function(){this._superApply(arguments);this.options.selected=this.options.active;!1===this.options.selected&&
(this.options.selected=-1)}}),a.widget("ui.tabs",a.ui.tabs,{options:{show:null,select:null},_create:function(){this._super();!1!==this.options.active&&this._trigger("show",null,this._ui(this.active.find(".ui-tabs-anchor")[0],this._getPanelForTab(this.active)[0]))},_trigger:function(a,b,c){var d=this._superApply(arguments);if(!d)return!1;"beforeActivate"===a&&c.newTab.length?d=this._super("select",b,{tab:c.newTab.find(".ui-tabs-anchor")[0],panel:c.newPanel[0],index:c.newTab.closest("li").index()}):
"activate"===a&&c.newTab.length&&(d=this._super("show",b,{tab:c.newTab.find(".ui-tabs-anchor")[0],panel:c.newPanel[0],index:c.newTab.closest("li").index()}));return d}}),a.widget("ui.tabs",a.ui.tabs,{select:function(a){a=this._getIndex(a);if(-1===a)if(this.options.collapsible&&-1!==this.options.selected)a=this.options.selected;else return;this.anchors.eq(a).trigger(this.options.event+this.eventNamespace)}}),function(){var b=0;a.widget("ui.tabs",a.ui.tabs,{options:{cookie:null},_create:function(){var a=
this.options,b;null==a.active&&a.cookie&&(b=parseInt(this._cookie(),10),-1===b&&(b=!1),a.active=b);this._super()},_cookie:function(c){var d=[this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++b)];arguments.length&&(d.push(!1===c?-1:c),d.push(this.options.cookie));return a.cookie.apply(null,d)},_refresh:function(){this._super();this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_eventHandler:function(){this._superApply(arguments);this.options.cookie&&this._cookie(this.options.active,
this.options.cookie)},_destroy:function(){this._super();this.options.cookie&&this._cookie(null,this.options.cookie)}})}(),a.widget("ui.tabs",a.ui.tabs,{_trigger:function(b,c,d){d=a.extend({},d);"load"===b&&(d.panel=d.panel[0],d.tab=d.tab.find(".ui-tabs-anchor")[0]);return this._super(b,c,d)}}),a.widget("ui.tabs",a.ui.tabs,{options:{fx:null},_getFx:function(){var b,c,d=this.options.fx;d&&(a.isArray(d)?(b=d[0],c=d[1]):b=c=d);return d?{show:c,hide:b}:null},_toggle:function(a,b){function c(){e.running=
!1;e._trigger("activate",a,b)}function d(){b.newTab.closest("li").addClass("ui-tabs-active ui-state-active");m.length&&t.show?m.animate(t.show,t.show.duration,function(){c()}):(m.show(),c())}var e=this,m=b.newPanel,p=b.oldPanel,t=this._getFx();if(!t)return this._super(a,b);e.running=!0;p.length&&t.hide?p.animate(t.hide,t.hide.duration,function(){b.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");d()}):(b.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),p.hide(),
d())}}))})(jQuery);
(function(a){function b(b,c){var e=(b.attr("aria-describedby")||"").split(/\s+/);e.push(c);b.data("ui-tooltip-id",c).attr("aria-describedby",a.trim(e.join(" ")))}function c(b){var c=b.data("ui-tooltip-id"),e=(b.attr("aria-describedby")||"").split(/\s+/),c=a.inArray(c,e);-1!==c&&e.splice(c,1);b.removeData("ui-tooltip-id");(e=a.trim(e.join(" ")))?b.attr("aria-describedby",e):b.removeAttr("aria-describedby")}var e=0;a.widget("ui.tooltip",{version:"1.9.1",options:{content:function(){return a(this).attr("title")},hide:!0,
items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flipfit"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={};this.parents={};this.options.disabled&&this._disable()},_setOption:function(b,c){var e=this;"disabled"===b?(this[c?"_disable":"_enable"](),this.options[b]=c):(this._super(b,c),"content"===b&&a.each(this.tooltips,function(a,b){e._updateContent(b)}))},_disable:function(){var b=
this;a.each(this.tooltips,function(c,e){var h=a.Event("blur");h.target=h.currentTarget=e[0];b.close(h,!0)});this.element.find(this.options.items).andSelf().each(function(){var b=a(this);b.is("[title]")&&b.data("ui-tooltip-title",b.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).andSelf().each(function(){var b=a(this);b.data("ui-tooltip-title")&&b.attr("title",b.data("ui-tooltip-title"))})},open:function(b){var c=this,e=a(b?b.target:this.element).closest(this.options.items);
e.length&&(this.options.track&&e.data("ui-tooltip-id")?(this._find(e).position(a.extend({of:e},this.options.position)),this._off(this.document,"mousemove")):(e.attr("title")&&e.data("ui-tooltip-title",e.attr("title")),e.data("tooltip-open",!0),b&&"mouseover"===b.type&&e.parents().each(function(){var b;a(this).data("tooltip-open")&&(b=a.Event("blur"),b.target=b.currentTarget=this,c.close(b,!0));this.title&&(a(this).uniqueId(),c.parents[this.id]={element:this,title:this.title},this.title="")}),this._updateContent(e,
b)))},_updateContent:function(a,b){var c;c=this.options.content;var e=this;if("string"===typeof c)return this._open(b,a,c);(c=c.call(a[0],function(c){a.data("tooltip-open")&&e._delay(function(){this._open(b,a,c)})}))&&this._open(b,a,c)},_open:function(c,e,n){function h(a){m.of=a;g.is(":hidden")||g.position(m)}var g,l,m=a.extend({},this.options.position);n&&(g=this._find(e),g.length?g.find(".ui-tooltip-content").html(n):(e.is("[title]")&&(c&&"mouseover"===c.type?e.attr("title",""):e.removeAttr("title")),
g=this._tooltip(e),b(e,g.attr("id")),g.find(".ui-tooltip-content").html(n),this.options.track&&c&&/^mouse/.test(c.originalEvent.type)?(this._on(this.document,{mousemove:h}),h(c)):g.position(a.extend({of:e},this.options.position)),g.hide(),this._show(g,this.options.show),this.options.show&&this.options.show.delay&&(l=setInterval(function(){g.is(":visible")&&(h(m.of),clearInterval(l))},a.fx.interval)),this._trigger("open",c,{tooltip:g}),n={keyup:function(b){b.keyCode===a.ui.keyCode.ESCAPE&&(b=a.Event(b),
b.currentTarget=e[0],this.close(b,!0))},remove:function(){this._removeTooltip(g)}},c&&"mouseover"!==c.type||(n.mouseleave="close"),c&&"focusin"!==c.type||(n.focusout="close"),this._on(e,n)))},close:function(b){var e=this,n=a(b?b.currentTarget:this.element),h=this._find(n);this.closing||(n.data("ui-tooltip-title")&&n.attr("title",n.data("ui-tooltip-title")),c(n),h.stop(!0),this._hide(h,this.options.hide,function(){e._removeTooltip(a(this))}),n.removeData("tooltip-open"),this._off(n,"mouseleave focusout keyup"),
n[0]!==this.element[0]&&this._off(n,"remove"),this._off(this.document,"mousemove"),b&&"mouseleave"===b.type&&a.each(this.parents,function(a,b){b.element.title=b.title;delete e.parents[a]}),this.closing=!0,this._trigger("close",b,{tooltip:h}),this.closing=!1)},_tooltip:function(b){var c="ui-tooltip-"+e++,n=a("<div>").attr({id:c,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));a("<div>").addClass("ui-tooltip-content").appendTo(n);n.appendTo(this.document[0].body);
a.fn.bgiframe&&n.bgiframe();this.tooltips[c]=b;return n},_find:function(b){return(b=b.data("ui-tooltip-id"))?a("#"+b):a()},_removeTooltip:function(a){a.remove();delete this.tooltips[a.attr("id")]},_destroy:function(){var b=this;a.each(this.tooltips,function(c,e){var h=a.Event("blur");h.target=h.currentTarget=e[0];b.close(h,!0);a("#"+c).remove();e.data("ui-tooltip-title")&&(e.attr("title",e.data("ui-tooltip-title")),e.removeData("ui-tooltip-title"))})}})})(jQuery);
jQuery.effects||function(a,b){var c=!1!==a.uiBackCompat;a.effects={effect:{}};(function(b,c){function f(a,b,c){var d=t[b.type]||{};if(null==a)return c||!b.def?null:b.def;a=d.floor?~~a:parseFloat(a);return isNaN(a)?b.def:d.mod?(a+d.mod)%d.mod:0>a?0:d.max<a?d.max:a}function n(a){var c=m(),d=c._rgba=[];a=a.toLowerCase();u(l,function(b,e){var g,f=e.re.exec(a);g=f&&e.parse(f);f=e.space||"rgba";if(g)return g=c[f](g),c[p[f].cache]=g[p[f].cache],d=c._rgba=g._rgba,!1});return d.length?("0,0,0,0"===d.join()&&
b.extend(d,w.transparent),c):w[a]}function h(a,b,c){c=(c+1)%1;return 1>6*c?a+(b-a)*c*6:1>2*c?b:2>3*c?a+(b-a)*(2/3-c)*6:a}var g=/^([\-+])=\s*(\d+\.?\d*)/,l=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,
parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],m=b.Color=function(a,c,d,g){return new b.Color.fn.parse(a,c,d,g)},p={rgba:{props:{red:{idx:0,type:"byte"},
green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},t={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},r=m.support={},q=b("<p>")[0],w,u=b.each;q.style.cssText="background-color:rgba(1,1,1,.5)";r.rgba=-1<q.style.backgroundColor.indexOf("rgba");u(p,function(a,b){b.cache="_"+a;b.props.alpha={idx:3,type:"percent",def:1}});m.fn=b.extend(m.prototype,{parse:function(g,l,h,
q){if(g===c)return this._rgba=[null,null,null,null],this;if(g.jquery||g.nodeType)g=b(g).css(l),l=c;var r=this,t=b.type(g),D=this._rgba=[];l!==c&&(g=[g,l,h,q],t="array");if("string"===t)return this.parse(n(g)||w._default);if("array"===t)return u(p.rgba.props,function(a,b){D[b.idx]=f(g[b.idx],b)}),this;if("object"===t)return g instanceof m?u(p,function(a,b){g[b.cache]&&(r[b.cache]=g[b.cache].slice())}):u(p,function(b,c){var d=c.cache;u(c.props,function(a,b){if(!r[d]&&c.to){if("alpha"===a||null==g[a])return;
r[d]=c.to(r._rgba)}r[d][b.idx]=f(g[a],b,!0)});r[d]&&0>a.inArray(null,r[d].slice(0,3))&&(r[d][3]=1,c.from&&(r._rgba=c.from(r[d])))}),this},is:function(a){var b=m(a),c=!0,d=this;u(p,function(a,e){var g,f=b[e.cache];f&&(g=d[e.cache]||e.to&&e.to(d._rgba)||[],u(e.props,function(a,b){if(null!=f[b.idx])return c=f[b.idx]===g[b.idx]}));return c});return c},_space:function(){var a=[],b=this;u(p,function(c,d){b[d.cache]&&a.push(c)});return a.pop()},transition:function(a,b){var c=m(a),d=c._space(),e=p[d],g=0===
this.alpha()?m("transparent"):this,l=g[e.cache]||e.to(g._rgba),h=l.slice(),c=c[e.cache];u(e.props,function(a,d){var e=d.idx,g=l[e],m=c[e],p=t[d.type]||{};null!==m&&(null===g?h[e]=m:(p.mod&&(m-g>p.mod/2?g+=p.mod:g-m>p.mod/2&&(g-=p.mod)),h[e]=f((m-g)*b+g,d)))});return this[d](h)},blend:function(a){if(1===this._rgba[3])return this;var c=this._rgba.slice(),d=c.pop(),g=m(a)._rgba;return m(b.map(c,function(a,b){return(1-d)*g[b]+d*a}))},toRgbaString:function(){var a="rgba(",c=b.map(this._rgba,function(a,
b){return null==a?2<b?1:0:a});1===c[3]&&(c.pop(),a="rgb(");return a+c.join()+")"},toHslaString:function(){var a="hsla(",c=b.map(this.hsla(),function(a,b){null==a&&(a=2<b?1:0);b&&3>b&&(a=Math.round(100*a)+"%");return a});1===c[3]&&(c.pop(),a="hsl(");return a+c.join()+")"},toHexString:function(a){var c=this._rgba.slice(),d=c.pop();a&&c.push(~~(255*d));return"#"+b.map(c,function(a){a=(a||0).toString(16);return 1===a.length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":
this.toRgbaString()}});m.fn.parse.prototype=m.fn;p.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/255,c=a[1]/255,d=a[2]/255;a=a[3];var e=Math.max(b,c,d),g=Math.min(b,c,d),f=e-g,l=e+g,h=.5*l,l=0===h||1===h?h:.5>=h?f/l:f/(2-l);return[Math.round(g===e?0:b===e?60*(c-d)/f+360:c===e?60*(d-b)/f+120:60*(b-c)/f+240)%360,l,h,null==a?1:a]};p.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/360,c=a[1],d=a[2];a=
a[3];c=.5>=d?d*(1+c):d+c-d*c;d=2*d-c;return[Math.round(255*h(d,c,b+1/3)),Math.round(255*h(d,c,b)),Math.round(255*h(d,c,b-1/3)),a]};u(p,function(a,l){var h=l.props,p=l.cache,q=l.to,r=l.from;m.fn[a]=function(a){q&&!this[p]&&(this[p]=q(this._rgba));if(a===c)return this[p].slice();var g,l=b.type(a),n="array"===l||"object"===l?a:arguments,t=this[p].slice();u(h,function(a,b){var c=n["object"===l?a:b.idx];null==c&&(c=t[b.idx]);t[b.idx]=f(c,b)});return r?(g=m(r(t)),g[p]=t,g):m(t)};u(h,function(c,d){m.fn[c]||
(m.fn[c]=function(f){var l=b.type(f),h="alpha"===c?this._hsla?"hsla":"rgba":a,m=this[h](),p=m[d.idx];if("undefined"===l)return p;"function"===l&&(f=f.call(this,p),l=b.type(f));if(null==f&&d.empty)return this;"string"===l&&(l=g.exec(f))&&(f=p+parseFloat(l[2])*("+"===l[1]?1:-1));m[d.idx]=f;return this[h](m)})})});u("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),function(a,c){b.cssHooks[c]=
{set:function(a,d){var g,f="";if("string"!==b.type(d)||(g=n(d))){d=m(g||d);if(!r.rgba&&1!==d._rgba[3]){for(g="backgroundColor"===c?a.parentNode:a;(""===f||"transparent"===f)&&g&&g.style;)try{f=b.css(g,"backgroundColor"),g=g.parentNode}catch(l){}d=d.blend(f&&"transparent"!==f?f:"_default")}d=d.toRgbaString()}try{a.style[c]=d}catch(h){}}};b.fx.step[c]=function(a){a.colorInit||(a.start=m(a.elem,c),a.end=m(a.end),a.colorInit=!0);b.cssHooks[c].set(a.elem,a.start.transition(a.end,a.pos))}});b.cssHooks.borderColor=
{expand:function(a){var b={};u(["Top","Right","Bottom","Left"],function(c,d){b["border"+d+"Color"]=a});return b}};w=b.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(jQuery);(function(){function c(){var b=this.ownerDocument.defaultView?
this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,d={},e,f;if(b&&b.length&&b[0]&&b[b[0]])for(f=b.length;f--;)e=b[f],"string"===typeof b[e]&&(d[a.camelCase(e)]=b[e]);else for(e in b)"string"===typeof b[e]&&(d[e]=b[e]);return d}var d=["add","remove","toggle"],f={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(b,c){a.fx.step[c]=
function(a){if("none"!==a.end&&!a.setAttr||1===a.pos&&!a.setAttr)jQuery.style(a.elem,c,a.end),a.setAttr=!0}});a.effects.animateClass=function(b,h,g,l){var m=a.speed(h,g,l);return this.queue(function(){var g=a(this),l=g.attr("class")||"",h,q=m.children?g.find("*").andSelf():g,q=q.map(function(){return{el:a(this),start:c.call(this)}});h=function(){a.each(d,function(a,c){if(b[c])g[c+"Class"](b[c])})};h();q=q.map(function(){this.end=c.call(this.el[0]);var b=this.start,d=this.end,g={},l,h;for(l in d)h=
d[l],b[l]===h||f[l]||!a.fx.step[l]&&isNaN(parseFloat(h))||(g[l]=h);this.diff=g;return this});g.attr("class",l);q=q.map(function(){var b=this,c=a.Deferred(),d=jQuery.extend({},m,{queue:!1,complete:function(){c.resolve(b)}});this.el.animate(this.diff,d);return c.promise()});a.when.apply(a,q.get()).done(function(){h();a.each(arguments,function(){var b=this.el;a.each(this.diff,function(a){b.css(a,"")})});m.complete.call(g[0])})})};a.fn.extend({_addClass:a.fn.addClass,addClass:function(b,c,d,e){return c?
a.effects.animateClass.call(this,{add:b},c,d,e):this._addClass(b)},_removeClass:a.fn.removeClass,removeClass:function(b,c,d,e){return c?a.effects.animateClass.call(this,{remove:b},c,d,e):this._removeClass(b)},_toggleClass:a.fn.toggleClass,toggleClass:function(c,d,e,f,m){return"boolean"===typeof d||d===b?e?a.effects.animateClass.call(this,d?{add:c}:{remove:c},e,f,m):this._toggleClass(c,d):a.effects.animateClass.call(this,{toggle:c},d,e,f)},switchClass:function(b,c,d,e,f){return a.effects.animateClass.call(this,
{add:c,remove:b},d,e,f)}})})();(function(){function e(b,c,d,e){a.isPlainObject(b)&&(c=b,b=b.effect);b={effect:b};null==c&&(c={});a.isFunction(c)&&(e=c,d=null,c={});if("number"===typeof c||a.fx.speeds[c])e=d,d=c,c={};a.isFunction(d)&&(e=d,d=null);c&&a.extend(b,c);d=d||c.duration;b.duration=a.fx.off?0:"number"===typeof d?d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default;b.complete=e||c.complete;return b}function d(b){return!b||"number"===typeof b||a.fx.speeds[b]?!0:"string"!==typeof b||a.effects.effect[b]?
!1:c&&a.effects[b]?!1:!0}a.extend(a.effects,{version:"1.9.1",save:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.data("ui-effects-"+b[c],a[0].style[b[c]])},restore:function(a,c){var d,e;for(e=0;e<c.length;e++)null!==c[e]&&(d=a.data("ui-effects-"+c[e]),d===b&&(d=""),a.css(c[e],d))},setMode:function(a,b){"toggle"===b&&(b=a.is(":hidden")?"show":"hide");return b},getBaseline:function(a,b){var c,d;switch(a[0]){case "top":c=0;break;case "middle":c=.5;break;case "bottom":c=1;break;default:c=a[0]/
b.height}switch(a[1]){case "left":d=0;break;case "center":d=.5;break;case "right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e={width:b.width(),height:b.height()},l=document.activeElement;try{l.id}catch(m){l=
document.body}b.wrap(d);(b[0]===l||a.contains(b[0],l))&&a(l).focus();d=b.parent();"static"===b.css("position")?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d);isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"}));b.css(e);return d.css(c).show()},removeWrapper:function(b){var c=document.activeElement;
b.parent().is(".ui-effects-wrapper")&&(b.parent().replaceWith(b),(b[0]===c||a.contains(b[0],c))&&a(c).focus());return b},setTransition:function(b,c,d,e){e=e||{};a.each(c,function(a,c){var p=b.cssUnit(c);0<p[0]&&(e[c]=p[0]*d+p[1])});return e}});a.fn.extend({effect:function(){function b(c){function e(){a.isFunction(f)&&f.call(g[0]);a.isFunction(c)&&c()}var g=a(this),f=d.complete,h=d.mode;(g.is(":hidden")?"hide"===h:"show"===h)?e():l.call(g[0],d,e)}var d=e.apply(this,arguments),h=d.mode,g=d.queue,l=
a.effects.effect[d.effect],m=!l&&c&&a.effects[d.effect];return a.fx.off||!l&&!m?h?this[h](d.duration,d.complete):this.each(function(){d.complete&&d.complete.call(this)}):l?!1===g?this.each(b):this.queue(g||"fx",b):m.call(this,{options:d,duration:d.duration,callback:d.complete,mode:d.mode})},_show:a.fn.show,show:function(a){if(d(a))return this._show.apply(this,arguments);var b=e.apply(this,arguments);b.mode="show";return this.effect.call(this,b)},_hide:a.fn.hide,hide:function(a){if(d(a))return this._hide.apply(this,
arguments);var b=e.apply(this,arguments);b.mode="hide";return this.effect.call(this,b)},__toggle:a.fn.toggle,toggle:function(b){if(d(b)||"boolean"===typeof b||a.isFunction(b))return this.__toggle.apply(this,arguments);var c=e.apply(this,arguments);c.mode="toggle";return this.effect.call(this,c)},cssUnit:function(b){var c=this.css(b),d=[];a.each(["em","px","%","pt"],function(a,b){0<c.indexOf(b)&&(d=[parseFloat(c),b])});return d}})})();(function(){var b={};a.each(["Quad","Cubic","Quart","Quint","Expo"],
function(a,c){b[c]=function(b){return Math.pow(b,a+2)}});a.extend(b,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var b,c=4;a<((b=Math.pow(2,--c))-1)/11;);return 1/Math.pow(4,3-c)-7.5625*Math.pow((3*b-2)/22-a,2)}});a.each(b,function(b,c){a.easing["easeIn"+b]=c;a.easing["easeOut"+b]=function(a){return 1-
c(1-a)};a.easing["easeInOut"+b]=function(a){return.5>a?c(2*a)/2:1-c(-2*a+2)/2}})})()}(jQuery);
(function(a,b){var c=/up|down|vertical/,e=/up|left|vertical|horizontal/;a.effects.effect.blind=function(b,f){var n=a(this),h="position top bottom left right height width".split(" "),g=a.effects.setMode(n,b.mode||"hide"),l=b.direction||"up",m=c.test(l),p=m?"height":"width",t=m?"top":"left",l=e.test(l),r={},q="show"===g,w,u,x;n.parent().is(".ui-effects-wrapper")?a.effects.save(n.parent(),h):a.effects.save(n,h);n.show();w=a.effects.createWrapper(n).css({overflow:"hidden"});u=w[p]();x=parseFloat(w.css(t))||
0;r[p]=q?u:0;l||(n.css(m?"bottom":"right",0).css(m?"top":"left","auto").css({position:"absolute"}),r[t]=q?x:u+x);q&&(w.css(p,0),l||w.css(t,x+u));w.animate(r,{duration:b.duration,easing:b.easing,queue:!1,complete:function(){"hide"===g&&n.hide();a.effects.restore(n,h);a.effects.removeWrapper(n);f()}})}})(jQuery);
(function(a,b){a.effects.effect.bounce=function(b,e){var d=a(this),f="position top bottom left right height width".split(" "),n=a.effects.setMode(d,b.mode||"effect"),h="hide"===n,g="show"===n,l=b.direction||"up",n=b.distance,m=b.times||5,p=2*m+(g||h?1:0),t=b.duration/p,r=b.easing,q="up"===l||"down"===l?"top":"left",l="up"===l||"left"===l,w,u,x=d.queue(),z=x.length;(g||h)&&f.push("opacity");a.effects.save(d,f);d.show();a.effects.createWrapper(d);n||(n=d["top"===q?"outerHeight":"outerWidth"]()/3);g&&
(u={opacity:1},u[q]=0,d.css("opacity",0).css(q,l?2*-n:2*n).animate(u,t,r));h&&(n/=Math.pow(2,m-1));u={};for(g=u[q]=0;g<m;g++)w={},w[q]=(l?"-=":"+=")+n,d.animate(w,t,r).animate(u,t,r),n=h?2*n:n/2;h&&(w={opacity:0},w[q]=(l?"-=":"+=")+n,d.animate(w,t,r));d.queue(function(){h&&d.hide();a.effects.restore(d,f);a.effects.removeWrapper(d);e()});1<z&&x.splice.apply(x,[1,0].concat(x.splice(z,p+1)));d.dequeue()}})(jQuery);
(function(a,b){a.effects.effect.clip=function(b,e){var d=a(this),f="position top bottom left right height width".split(" "),n="show"===a.effects.setMode(d,b.mode||"hide"),h="vertical"===(b.direction||"vertical"),g=h?"height":"width",h=h?"top":"left",l={},m,p;a.effects.save(d,f);d.show();m=a.effects.createWrapper(d).css({overflow:"hidden"});m="IMG"===d[0].tagName?m:d;p=m[g]();n&&(m.css(g,0),m.css(h,p/2));l[g]=n?p:0;l[h]=n?0:p/2;m.animate(l,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){n||
d.hide();a.effects.restore(d,f);a.effects.removeWrapper(d);e()}})}})(jQuery);
(function(a,b){a.effects.effect.drop=function(b,e){var d=a(this),f="position top bottom left right opacity height width".split(" "),n=a.effects.setMode(d,b.mode||"hide"),h="show"===n,g=b.direction||"left",l="up"===g||"down"===g?"top":"left",g="up"===g||"left"===g?"pos":"neg",m={opacity:h?1:0},p;a.effects.save(d,f);d.show();a.effects.createWrapper(d);p=b.distance||d["top"===l?"outerHeight":"outerWidth"](!0)/2;h&&d.css("opacity",0).css(l,"pos"===g?-p:p);m[l]=(h?"pos"===g?"+=":"-=":"pos"===g?"-=":"+=")+
p;d.animate(m,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===n&&d.hide();a.effects.restore(d,f);a.effects.removeWrapper(d);e()}})}})(jQuery);
(function(a,b){a.effects.effect.explode=function(b,e){function d(){t.push(this);t.length===f*n&&(h.css({visibility:"visible"}),a(t).remove(),g||h.hide(),e())}var f=b.pieces?Math.round(Math.sqrt(b.pieces)):3,n=f,h=a(this),g="show"===a.effects.setMode(h,b.mode||"hide"),l=h.show().css("visibility","hidden").offset(),m=Math.ceil(h.outerWidth()/n),p=Math.ceil(h.outerHeight()/f),t=[],r,q,w,u,x,z;for(r=0;r<f;r++)for(u=l.top+r*p,z=r-(f-1)/2,q=0;q<n;q++)w=l.left+q*m,x=q-(n-1)/2,h.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",
visibility:"visible",left:-q*m,top:-r*p}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:m,height:p,left:w+(g?x*m:0),top:u+(g?z*p:0),opacity:g?0:1}).animate({left:w+(g?0:x*m),top:u+(g?0:z*p),opacity:g?1:0},b.duration||500,b.easing,d)}})(jQuery);(function(a,b){a.effects.effect.fade=function(b,e){var d=a(this),f=a.effects.setMode(d,b.mode||"toggle");d.animate({opacity:f},{queue:!1,duration:b.duration,easing:b.easing,complete:e})}})(jQuery);
(function(a,b){a.effects.effect.fold=function(b,e){var d=a(this),f="position top bottom left right height width".split(" "),n=a.effects.setMode(d,b.mode||"hide"),h="show"===n,g="hide"===n,n=b.size||15,l=/([0-9]+)%/.exec(n),m=!!b.horizFirst,p=h!==m,t=p?["width","height"]:["height","width"],r=b.duration/2,q,w={},u={};a.effects.save(d,f);d.show();q=a.effects.createWrapper(d).css({overflow:"hidden"});p=p?[q.width(),q.height()]:[q.height(),q.width()];l&&(n=parseInt(l[1],10)/100*p[g?0:1]);h&&q.css(m?{height:0,
width:n}:{height:n,width:0});w[t[0]]=h?p[0]:n;u[t[1]]=h?p[1]:0;q.animate(w,r,b.easing).animate(u,r,b.easing,function(){g&&d.hide();a.effects.restore(d,f);a.effects.removeWrapper(d);e()})}})(jQuery);
(function(a,b){a.effects.effect.highlight=function(b,e){var d=a(this),f=["backgroundImage","backgroundColor","opacity"],n=a.effects.setMode(d,b.mode||"show"),h={backgroundColor:d.css("backgroundColor")};"hide"===n&&(h.opacity=0);a.effects.save(d,f);d.show().css({backgroundImage:"none",backgroundColor:b.color||"#ffff99"}).animate(h,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===n&&d.hide();a.effects.restore(d,f);e()}})}})(jQuery);
(function(a,b){a.effects.effect.pulsate=function(b,e){var d=a(this),f=a.effects.setMode(d,b.mode||"show"),n="show"===f,h="hide"===f,f=2*(b.times||5)+(n||"hide"===f?1:0),g=b.duration/f,l=0,m=d.queue(),p=m.length;if(n||!d.is(":visible"))d.css("opacity",0).show(),l=1;for(n=1;n<f;n++)d.animate({opacity:l},g,b.easing),l=1-l;d.animate({opacity:l},g,b.easing);d.queue(function(){h&&d.hide();e()});1<p&&m.splice.apply(m,[1,0].concat(m.splice(p,f+1)));d.dequeue()}})(jQuery);
(function(a,b){a.effects.effect.puff=function(b,e){var d=a(this),f=a.effects.setMode(d,b.mode||"hide"),n="hide"===f,h=parseInt(b.percent,10)||150,g=h/100,l={height:d.height(),width:d.width()};a.extend(b,{effect:"scale",queue:!1,fade:!0,mode:f,complete:e,percent:n?h:100,from:n?l:{height:l.height*g,width:l.width*g}});d.effect(b)};a.effects.effect.scale=function(b,e){var d=a(this),f=a.extend(!0,{},b),n=a.effects.setMode(d,b.mode||"effect"),h=parseInt(b.percent,10)||(0===parseInt(b.percent,10)?0:"hide"===
n?0:100),g=b.direction||"both",l=b.origin,m={height:d.height(),width:d.width(),outerHeight:d.outerHeight(),outerWidth:d.outerWidth()},p="horizontal"!==g?h/100:1,h="vertical"!==g?h/100:1;f.effect="size";f.queue=!1;f.complete=e;"effect"!==n&&(f.origin=l||["middle","center"],f.restore=!0);f.from=b.from||("show"===n?{height:0,width:0}:m);f.to={height:m.height*p,width:m.width*h,outerHeight:m.outerHeight*p,outerWidth:m.outerWidth*h};f.fade&&("show"===n&&(f.from.opacity=0,f.to.opacity=1),"hide"===n&&(f.from.opacity=
1,f.to.opacity=0));d.effect(f)};a.effects.effect.size=function(b,e){var d,f,n,h,g,l,m=a(this),p="position top bottom left right width height overflow opacity".split(" ");g="position top bottom left right overflow opacity".split(" ");var t=["width","height","overflow"],r=["fontSize"],q=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],w=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],u=a.effects.setMode(m,b.mode||"effect"),x=b.restore||"effect"!==u,z=b.scale||
"both";l=b.origin||["middle","center"];var y=m.css("position"),B=x?p:g,A={height:0,width:0};"show"===u&&m.show();g={height:m.height(),width:m.width(),outerHeight:m.outerHeight(),outerWidth:m.outerWidth()};"toggle"===b.mode&&"show"===u?(m.from=b.to||A,m.to=b.from||g):(m.from=b.from||("show"===u?A:g),m.to=b.to||("hide"===u?A:g));n=m.from.height/g.height;h=m.from.width/g.width;d=m.to.height/g.height;f=m.to.width/g.width;if("box"===z||"both"===z)n!==d&&(B=B.concat(q),m.from=a.effects.setTransition(m,
q,n,m.from),m.to=a.effects.setTransition(m,q,d,m.to)),h!==f&&(B=B.concat(w),m.from=a.effects.setTransition(m,w,h,m.from),m.to=a.effects.setTransition(m,w,f,m.to));"content"!==z&&"both"!==z||n===d||(B=B.concat(r).concat(t),m.from=a.effects.setTransition(m,r,n,m.from),m.to=a.effects.setTransition(m,r,d,m.to));a.effects.save(m,B);m.show();a.effects.createWrapper(m);m.css("overflow","hidden").css(m.from);l&&(l=a.effects.getBaseline(l,g),m.from.top=(g.outerHeight-m.outerHeight())*l.y,m.from.left=(g.outerWidth-
m.outerWidth())*l.x,m.to.top=(g.outerHeight-m.to.outerHeight)*l.y,m.to.left=(g.outerWidth-m.to.outerWidth)*l.x);m.css(m.from);if("content"===z||"both"===z)q=q.concat(["marginTop","marginBottom"]).concat(r),w=w.concat(["marginLeft","marginRight"]),t=p.concat(q).concat(w),m.find("*[width]").each(function(){var e=a(this),g=e.height(),l=e.width();x&&a.effects.save(e,t);e.from={height:g*n,width:l*h};e.to={height:g*d,width:l*f};n!==d&&(e.from=a.effects.setTransition(e,q,n,e.from),e.to=a.effects.setTransition(e,
q,d,e.to));h!==f&&(e.from=a.effects.setTransition(e,w,h,e.from),e.to=a.effects.setTransition(e,w,f,e.to));e.css(e.from);e.animate(e.to,b.duration,b.easing,function(){x&&a.effects.restore(e,t)})});m.animate(m.to,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){0===m.to.opacity&&m.css("opacity",m.from.opacity);"hide"===u&&m.hide();a.effects.restore(m,B);x||("static"===y?m.css({position:"relative",top:m.to.top,left:m.to.left}):a.each(["top","left"],function(a,b){m.css(b,function(b,c){var d=
parseInt(c,10),e=a?m.to.left:m.to.top;return"auto"===c?e+"px":d+e+"px"})}));a.effects.removeWrapper(m);e()}})}})(jQuery);
(function(a,b){a.effects.effect.shake=function(b,e){var d=a(this),f="position top bottom left right height width".split(" "),n=a.effects.setMode(d,b.mode||"effect"),h=b.direction||"left",g=b.distance||20,l=b.times||3,m=2*l+1,p=Math.round(b.duration/m),t="up"===h||"down"===h?"top":"left",r="up"===h||"left"===h,h={},q={},w={},u=d.queue(),x=u.length;a.effects.save(d,f);d.show();a.effects.createWrapper(d);h[t]=(r?"-=":"+=")+g;q[t]=(r?"+=":"-=")+2*g;w[t]=(r?"-=":"+=")+2*g;d.animate(h,p,b.easing);for(g=
1;g<l;g++)d.animate(q,p,b.easing).animate(w,p,b.easing);d.animate(q,p,b.easing).animate(h,p/2,b.easing).queue(function(){"hide"===n&&d.hide();a.effects.restore(d,f);a.effects.removeWrapper(d);e()});1<x&&u.splice.apply(u,[1,0].concat(u.splice(x,m+1)));d.dequeue()}})(jQuery);
(function(a,b){a.effects.effect.slide=function(b,e){var d=a(this),f="position top bottom left right width height".split(" "),n=a.effects.setMode(d,b.mode||"show"),h="show"===n,g=b.direction||"left",l="up"===g||"down"===g?"top":"left",g="up"===g||"left"===g,m,p={};a.effects.save(d,f);d.show();m=b.distance||d["top"===l?"outerHeight":"outerWidth"](!0);a.effects.createWrapper(d).css({overflow:"hidden"});h&&d.css(l,g?isNaN(m)?"-"+m:-m:m);p[l]=(h?g?"+=":"-=":g?"-=":"+=")+m;d.animate(p,{queue:!1,duration:b.duration,
easing:b.easing,complete:function(){"hide"===n&&d.hide();a.effects.restore(d,f);a.effects.removeWrapper(d);e()}})}})(jQuery);
(function(a,b){a.effects.effect.transfer=function(b,e){var d=a(this),f=a(b.to),n="fixed"===f.css("position"),h=a("body"),g=n?h.scrollTop():0,h=n?h.scrollLeft():0,l=f.offset(),f={top:l.top-g,left:l.left-h,height:f.innerHeight(),width:f.innerWidth()},l=d.offset(),m=a('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(b.className).css({top:l.top-g,left:l.left-h,height:d.innerHeight(),width:d.innerWidth(),position:n?"fixed":"absolute"}).animate(f,b.duration,b.easing,function(){m.remove();
e()})}})(jQuery);
(function(a){a.widget("ui.multiAccordion",{options:{active:0,showAll:null,hideAll:null,_classes:{accordion:"ui-accordion ui-widget ui-helper-reset ui-accordion-icons",h3:"ui-accordion-header ui-helper-reset ui-state-default ui-corner-all",div:"ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom",divActive:"ui-accordion-content-active",span:"ui-icon ui-icon-triangle-1-e",stateDefault:"ui-state-default",stateHover:"ui-state-hover"}},_create:function(){var b=this,c=b.options,e=b.element,
d=e.children("h3");e.children("div");e.addClass(c._classes.accordion);d.each(function(d){var e=a(this);e.addClass(c._classes.h3).prepend('<span class="{class}"></span>'.replace(/{class}/,c._classes.span));b._isActive(d)&&b._showTab(e)});e.children("div").each(function(b){a(this).addClass(c._classes.div)});d.bind("click",function(d){d.preventDefault();d=a(this);var e={tab:d,content:d.next("div")};b._trigger("click",null,e);d.hasClass(c._classes.stateDefault)?b._showTab(d):b._hideTab(d)});d.bind("mouseover",
function(){a(this).addClass(c._classes.stateHover)});d.bind("mouseout",function(){a(this).removeClass(c._classes.stateHover)});b._trigger("init",null,e)},destroy:function(){var a=this.element,c=a.children("h3"),e=a.children("div");a.children("span").remove();var d=this.options;a.children("h3").unbind("click mouseover mouseout");a.removeClass(d._classes.accordion);c.removeClass(d._classes.h3).removeClass("ui-state-default ui-corner-all ui-state-active ui-corner-top").children("span").remove();e.removeClass(d._classes.div+
" "+d._classes.divActive).show()},_showTab:function(a){var c=a.children("span.ui-icon"),e=a.next(),d=this.options;a.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top");c.removeClass("ui-icon-triangle-1-e").addClass("ui-icon-triangle-1-s");e.slideDown("fast",function(){e.addClass(d._classes.divActive)});a={tab:a,content:a.next("div")};this._trigger("tabShown",null,a)},_hideTab:function(a){var c=a.children("span.ui-icon"),e=a.next(),d=this.options;a.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all");
c.removeClass("ui-icon-triangle-1-s").addClass("ui-icon-triangle-1-e");e.slideUp("fast",function(){e.removeClass(d._classes.divActive)});a={tab:a,content:a.next("div")};this._trigger("tabHidden",null,a)},_isActive:function(a){var c=this.options;if("boolean"!=typeof c.active||c.active)if(void 0!=c.active.length)for(var e=0;e<c.active.length;e++){if(c.active[e]==a)return!0}else return c.active==a;return!1},_getActiveTabs:function(){var b=[];this.element.children("div").each(function(c){var e=a(this);
e.is(":visible")&&b.push({index:c,tab:e.prev("h3"),content:e})});return 0==b.length?void 0:b},getActiveTabs:function(){var b=[];this.element.children("div").each(function(c){a(this).is(":visible")&&b.push(c)});return 0==b.length?[-1]:b},_setActiveTabs:function(b){var c=this,e=this.element;"undefined"!=typeof b&&e.children("div").each(function(d){var e=a(this).prev("h3");b.hasObject(d)?c._showTab(e):c._hideTab(e)})},_generateTabsArrayFromOptions:function(b){var c=[],e=this.element,d=e.children("h3").size();
if("array"===a.type(b))return b;if("number"===a.type(b))return[b];if("string"===a.type(b))switch(b.toLowerCase()){case "all":d=e.children("h3").size();for(b=0;b<d;b++)c.push(b);return c;case "none":return c=[-1]}},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments);var e=this.element;switch(b){case "active":this._setActiveTabs(this._generateTabsArrayFromOptions(c));break;case "getActiveTabs":var e=this.element,d;e.children("div").each(function(b){a(this).is(":visible")&&(d=
d?d:[],d.push(b))});return 0==d.length?[-1]:d}}});Array.prototype.hasObject=Array.indexOf?function(a){return-1!==this.indexOf(a)}:function(a){for(var c=this.length+1;c-=1;)if(this[c-1]===a)return!0;return!1}})(jQuery);
(function(a){a.widget("ui.selectmenu",{options:{appendTo:"body",typeAhead:1E3,style:"dropdown",positionOptions:{my:"left top",at:"left bottom",offset:null},width:null,menuWidth:null,handleWidth:26,maxHeight:null,icons:null,format:null,escapeHtml:!1,bgImage:function(){}},_create:function(){var b=this,c=this.options,e=(this.element.attr("id")||"ui-selectmenu-"+Math.random().toString(16).slice(2,10)).replace(/(:|\.)/g,"");this.ids=[e,e+"-button",e+"-menu"];this._safemouseup=!0;this.isOpen=!1;this.newelement=
a("<a />",{"class":this.widgetBaseClass+" ui-widget ui-state-default ui-corner-all",id:this.ids[1],role:"button",href:"#nogo",tabindex:this.element.attr("disabled")?1:0,"aria-haspopup":!0,"aria-owns":this.ids[2]});this.newelementWrap=a("<span />").append(this.newelement).insertAfter(this.element);(e=this.element.attr("tabindex"))&&this.newelement.attr("tabindex",e);this.newelement.data("selectelement",this.element);this.selectmenuIcon=a('<span class="'+this.widgetBaseClass+'-icon ui-icon"></span>').prependTo(this.newelement);
this.newelement.prepend('<span class="'+b.widgetBaseClass+'-status" />');this.element.bind({"click.selectmenu":function(a){b.newelement.focus();a.preventDefault()}});this.newelement.bind("mousedown.selectmenu",function(a){b._toggle(a,!0);"popup"==c.style&&(b._safemouseup=!1,setTimeout(function(){b._safemouseup=!0},300));return!1}).bind("click.selectmenu",function(){return!1}).bind("keydown.selectmenu",function(c){var e=!1;switch(c.keyCode){case a.ui.keyCode.ENTER:e=!0;break;case a.ui.keyCode.SPACE:b._toggle(c);
break;case a.ui.keyCode.UP:c.altKey?b.open(c):b._moveSelection(-1);break;case a.ui.keyCode.DOWN:c.altKey?b.open(c):b._moveSelection(1);break;case a.ui.keyCode.LEFT:b._moveSelection(-1);break;case a.ui.keyCode.RIGHT:b._moveSelection(1);break;case a.ui.keyCode.TAB:e=!0;break;case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.HOME:b.index(0);break;case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.END:b.index(b._optionLis.length);break;default:e=!0}return e}).bind("keypress.selectmenu",function(a){0<a.which&&b._typeAhead(a.which,
"mouseup");return!0}).bind("mouseover.selectmenu",function(){c.disabled||a(this).addClass("ui-state-hover")}).bind("mouseout.selectmenu",function(){c.disabled||a(this).removeClass("ui-state-hover")}).bind("focus.selectmenu",function(){c.disabled||a(this).addClass("ui-state-focus")}).bind("blur.selectmenu",function(){c.disabled||a(this).removeClass("ui-state-focus")});a(document).bind("mousedown.selectmenu-"+this.ids[0],function(a){b.isOpen&&b.close(a)});this.element.bind("click.selectmenu",function(){b._refreshValue()}).bind("focus.selectmenu",
function(){b.newelement&&b.newelement[0].focus()});c.width||(c.width=this.element.outerWidth());this.newelement.width(c.width);this.element.hide();this.list=a("<ul />",{"class":"ui-widget ui-widget-content","aria-hidden":!0,role:"listbox","aria-labelledby":this.ids[1],id:this.ids[2]});this.listWrap=a("<div />",{"class":b.widgetBaseClass+"-menu"}).append(this.list).appendTo(c.appendTo);this.list.bind("keydown.selectmenu",function(c){var e=!1;switch(c.keyCode){case a.ui.keyCode.UP:c.altKey?b.close(c,
!0):b._moveFocus(-1);break;case a.ui.keyCode.DOWN:c.altKey?b.close(c,!0):b._moveFocus(1);break;case a.ui.keyCode.LEFT:b._moveFocus(-1);break;case a.ui.keyCode.RIGHT:b._moveFocus(1);break;case a.ui.keyCode.HOME:b._moveFocus(":first");break;case a.ui.keyCode.PAGE_UP:b._scrollPage("up");break;case a.ui.keyCode.PAGE_DOWN:b._scrollPage("down");break;case a.ui.keyCode.END:b._moveFocus(":last");break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:b.close(c,!0);a(c.target).parents("li:eq(0)").trigger("mouseup");
break;case a.ui.keyCode.TAB:e=!0;b.close(c,!0);a(c.target).parents("li:eq(0)").trigger("mouseup");break;case a.ui.keyCode.ESCAPE:b.close(c,!0);break;default:e=!0}return e}).bind("keypress.selectmenu",function(a){0<a.which&&b._typeAhead(a.which,"focus");return!0}).bind("mousedown.selectmenu mouseup.selectmenu",function(){return!1});a(window).bind("resize.selectmenu-"+this.ids[0],a.proxy(b.close,this))},_init:function(){var b=this,c=this.options,e=[];this.element.find("option").each(function(){var d=
a(this);e.push({value:d.attr("value"),text:b._formatText(d.text(),d),selected:d.attr("selected"),disabled:d.attr("disabled"),classes:d.attr("class"),typeahead:d.attr("typeahead"),parentOptGroup:d.parent("optgroup"),bgImage:c.bgImage.call(d)})});var d="popup"==b.options.style?" ui-state-active":"";this.list.html("");if(e.length)for(var f=0;f<e.length;f++){var n={role:"presentation"};e[f].disabled&&(n["class"]=this.namespace+"-state-disabled");var h={html:e[f].text||"&nbsp;",href:"#nogo",tabindex:-1,
role:"option","aria-selected":!1};e[f].disabled&&(h["aria-disabled"]=e[f].disabled);e[f].typeahead&&(h.typeahead=e[f].typeahead);h=a("<a/>",h).bind("focus.selectmenu",function(){a(this).parent().mouseover()}).bind("blur.selectmenu",function(){a(this).parent().mouseout()});n=a("<li/>",n).append(h).data("index",f).addClass(e[f].classes).data("optionClasses",e[f].classes||"").bind("mouseup.selectmenu",function(c){!b._safemouseup||b._disabled(c.currentTarget)||b._disabled(a(c.currentTarget).parents("ul>li."+
b.widgetBaseClass+"-group "))||(b.index(a(this).data("index")),b.select(c),b.close(c,!0));return!1}).bind("click.selectmenu",function(){return!1}).bind("mouseover.selectmenu",function(){a(this).hasClass(b.namespace+"-state-disabled")||a(this).parent("ul").parent("li").hasClass(b.namespace+"-state-disabled")||(b._selectedOptionLi().addClass(d),b._focusedOptionLi().removeClass(b.widgetBaseClass+"-item-focus ui-state-hover"),a(this).removeClass("ui-state-active").addClass(b.widgetBaseClass+"-item-focus ui-state-hover"))}).bind("mouseout.selectmenu",
function(){a(this).is(b._selectedOptionLi())&&a(this).addClass(d);a(this).removeClass(b.widgetBaseClass+"-item-focus ui-state-hover")});e[f].parentOptGroup.length?(h=b.widgetBaseClass+"-group-"+this.element.find("optgroup").index(e[f].parentOptGroup),this.list.find("li."+h).length?this.list.find("li."+h+":last ul").append(n):a(' <li role="presentation" class="'+b.widgetBaseClass+"-group "+h+(e[f].parentOptGroup.attr("disabled")?" "+this.namespace+'-state-disabled" aria-disabled="true"':'"')+'><span class="'+
b.widgetBaseClass+'-group-label">'+e[f].parentOptGroup.attr("label")+"</span><ul></ul></li> ").appendTo(this.list).find("ul").append(n)):n.appendTo(this.list);if(c.icons)for(var g in c.icons)n.is(c.icons[g].find)&&(n.data("optionClasses",e[f].classes+" "+b.widgetBaseClass+"-hasIcon").addClass(b.widgetBaseClass+"-hasIcon"),h=c.icons[g].icon||"",n.find("a:eq(0)").prepend('<span class="'+b.widgetBaseClass+"-item-icon ui-icon "+h+'"></span>'),e[f].bgImage&&n.find("span").css("background-image",e[f].bgImage))}else a('<li role="presentation"><a href="#nogo" tabindex="-1" role="option"></a></li>').appendTo(this.list);
f="dropdown"==c.style;this.newelement.toggleClass(b.widgetBaseClass+"-dropdown",f).toggleClass(b.widgetBaseClass+"-popup",!f);this.list.toggleClass(b.widgetBaseClass+"-menu-dropdown ui-corner-bottom",f).toggleClass(b.widgetBaseClass+"-menu-popup ui-corner-all",!f).find("li:first").toggleClass("ui-corner-top",!f).end().find("li:last").addClass("ui-corner-bottom");this.selectmenuIcon.toggleClass("ui-icon-triangle-1-s",f).toggleClass("ui-icon-triangle-2-n-s",!f);"dropdown"==c.style?this.list.width(c.menuWidth?
c.menuWidth:c.width):this.list.width(c.menuWidth?c.menuWidth:c.width-c.handleWidth);this.list.css("height","auto");f=this.listWrap.height();g=a(window).height();g=c.maxHeight?Math.min(c.maxHeight,g):g/3;f>g&&this.list.height(g);this._optionLis=this.list.find("li:not(."+b.widgetBaseClass+"-group)");this.element.attr("disabled")?this.disable():this.enable();this._refreshValue();this._selectedOptionLi().addClass(this.widgetBaseClass+"-item-focus");clearTimeout(this.refreshTimeout);this.refreshTimeout=
window.setTimeout(function(){b._refreshPosition()},200)},destroy:function(){this.element.removeData(this.widgetName).removeClass(this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled").removeAttr("aria-disabled").unbind(".selectmenu");a(window).unbind(".selectmenu-"+this.ids[0]);a(document).unbind(".selectmenu-"+this.ids[0]);this.newelementWrap.remove();this.listWrap.remove();this.element.unbind(".selectmenu").show();a.Widget.prototype.destroy.apply(this,arguments)},_typeAhead:function(a,
c){var e=this,d=String.fromCharCode(a).toLowerCase(),f=null,n=null;e._typeAhead_timer&&(window.clearTimeout(e._typeAhead_timer),e._typeAhead_timer=void 0);e._typeAhead_chars=(void 0===e._typeAhead_chars?"":e._typeAhead_chars).concat(d);2>e._typeAhead_chars.length||e._typeAhead_chars.substr(-2,1)===d&&e._typeAhead_cycling?(e._typeAhead_cycling=!0,f=d):(e._typeAhead_cycling=!1,f=e._typeAhead_chars);for(var d=("focus"!==c?this._selectedOptionLi().data("index"):this._focusedOptionLi().data("index"))||
0,h=0;h<this._optionLis.length;h++)if(this._optionLis.eq(h).text().substr(0,f.length).toLowerCase()===f)if(e._typeAhead_cycling){if(null===n&&(n=h),h>d){n=h;break}}else n=h;null!==n&&this._optionLis.eq(n).find("a").trigger(c);e._typeAhead_timer=window.setTimeout(function(){e._typeAhead_timer=void 0;e._typeAhead_chars=void 0;e._typeAhead_cycling=void 0},e.options.typeAhead)},_uiHash:function(){var b=this.index();return{index:b,option:a("option",this.element).get(b),value:this.element[0].value}},open:function(a){var c=
this.options;if("true"!=this.newelement.attr("aria-disabled")){this._closeOthers(a);this.newelement.addClass("ui-state-active");this.list.attr("aria-hidden",!1);this.listWrap.addClass(this.widgetBaseClass+"-open");var e=this._selectedOptionLi();"dropdown"==c.style?this.newelement.removeClass("ui-corner-all").addClass("ui-corner-top"):this.list.css("left",-5E3).scrollTop(this.list.scrollTop()+e.position().top-this.list.outerHeight()/2+e.outerHeight()/2).css("left","auto");this._refreshPosition();c=
e.find("a");c.length&&c[0].focus();this.isOpen=!0;this._trigger("open",a,this._uiHash())}},close:function(a,c){this.newelement.is(".ui-state-active")&&(this.newelement.removeClass("ui-state-active"),this.listWrap.removeClass(this.widgetBaseClass+"-open"),this.list.attr("aria-hidden",!0),"dropdown"==this.options.style&&this.newelement.removeClass("ui-corner-top").addClass("ui-corner-all"),c&&this.newelement.focus(),this.isOpen=!1,this._trigger("close",a,this._uiHash()))},change:function(a){this.element.trigger("change");
this._trigger("change",a,this._uiHash())},select:function(a){if(this._disabled(a.currentTarget))return!1;this._trigger("select",a,this._uiHash())},widget:function(){return this.listWrap.add(this.newelementWrap)},_closeOthers:function(b){a("."+this.widgetBaseClass+".ui-state-active").not(this.newelement).each(function(){a(this).data("selectelement").selectmenu("close",b)});a("."+this.widgetBaseClass+".ui-state-hover").trigger("mouseout")},_toggle:function(a,c){this.isOpen?this.close(a,c):this.open(a)},
_formatText:function(b,c){this.options.format?b=this.options.format(b,c):this.options.escapeHtml&&(b=a("<div />").text(b).html());return b},_selectedIndex:function(){return this.element[0].selectedIndex},_selectedOptionLi:function(){return this._optionLis.eq(this._selectedIndex())},_focusedOptionLi:function(){return this.list.find("."+this.widgetBaseClass+"-item-focus")},_moveSelection:function(a,c){if(!this.options.disabled){var e=parseInt(this._selectedOptionLi().data("index")||0,10)+a;0>e&&(e=
0);e>this._optionLis.size()-1&&(e=this._optionLis.size()-1);if(e===c)return!1;this._optionLis.eq(e).hasClass(this.namespace+"-state-disabled")?(0<a?++a:--a,this._moveSelection(a,e)):this._optionLis.eq(e).trigger("mouseover").trigger("mouseup")}},_moveFocus:function(a,c){var e=isNaN(a)?parseInt(this._optionLis.filter(a).data("index"),10):parseInt(this._focusedOptionLi().data("index")||0,10)+a;0>e&&(e=0);e>this._optionLis.size()-1&&(e=this._optionLis.size()-1);if(e===c)return!1;var d=this.widgetBaseClass+
"-item-"+Math.round(1E3*Math.random());this._focusedOptionLi().find("a:eq(0)").attr("id","");this._optionLis.eq(e).hasClass(this.namespace+"-state-disabled")?(0<a?++a:--a,this._moveFocus(a,e)):this._optionLis.eq(e).find("a:eq(0)").attr("id",d).focus();this.list.attr("aria-activedescendant",d)},_scrollPage:function(a){var c=Math.floor(this.list.outerHeight()/this._optionLis.first().outerHeight());this._moveFocus("up"==a?-c:c)},_setOption:function(a,c){this.options[a]=c;"disabled"==a&&(c&&this.close(),
this.element.add(this.newelement).add(this.list)[c?"addClass":"removeClass"](this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled").attr("aria-disabled",c))},disable:function(a,c){"undefined"==typeof a?this._setOption("disabled",!0):"optgroup"==c?this._disableOptgroup(a):this._disableOption(a)},enable:function(a,c){"undefined"==typeof a?this._setOption("disabled",!1):"optgroup"==c?this._enableOptgroup(a):this._enableOption(a)},_disabled:function(b){return a(b).hasClass(this.namespace+
"-state-disabled")},_disableOption:function(a){var c=this._optionLis.eq(a);c&&(c.addClass(this.namespace+"-state-disabled").find("a").attr("aria-disabled",!0),this.element.find("option").eq(a).attr("disabled","disabled"))},_enableOption:function(a){var c=this._optionLis.eq(a);c&&(c.removeClass(this.namespace+"-state-disabled").find("a").attr("aria-disabled",!1),this.element.find("option").eq(a).removeAttr("disabled"))},_disableOptgroup:function(a){var c=this.list.find("li."+this.widgetBaseClass+"-group-"+
a);c&&(c.addClass(this.namespace+"-state-disabled").attr("aria-disabled",!0),this.element.find("optgroup").eq(a).attr("disabled","disabled"))},_enableOptgroup:function(a){var c=this.list.find("li."+this.widgetBaseClass+"-group-"+a);c&&(c.removeClass(this.namespace+"-state-disabled").attr("aria-disabled",!1),this.element.find("optgroup").eq(a).removeAttr("disabled"))},index:function(b){if(arguments.length){if(this._disabled(a(this._optionLis[b]))||b==this._selectedIndex())return!1;this.element[0].selectedIndex=
b;this._refreshValue();this.change()}else return this._selectedIndex()},value:function(a){if(arguments.length&&a!=this.element[0].value)this.element[0].value=a,this._refreshValue(),this.change();else return this.element[0].value},_refreshValue:function(){var a="popup"==this.options.style?" ui-state-active":"",c=this.widgetBaseClass+"-item-"+Math.round(1E3*Math.random());this.list.find("."+this.widgetBaseClass+"-item-selected").removeClass(this.widgetBaseClass+"-item-selected"+a).find("a").attr("aria-selected",
"false").attr("id","");this._selectedOptionLi().addClass(this.widgetBaseClass+"-item-selected"+a).find("a").attr("aria-selected","true").attr("id",c);var a=this.newelement.data("optionClasses")?this.newelement.data("optionClasses"):"",e=this._selectedOptionLi().data("optionClasses")?this._selectedOptionLi().data("optionClasses"):"";this.newelement.removeClass(a).data("optionClasses",e).addClass(e).find("."+this.widgetBaseClass+"-status").html(this._selectedOptionLi().find("a:eq(0)").html());this.list.attr("aria-activedescendant",
c)},_refreshPosition:function(){var a=this.options;if("popup"==a.style&&!a.positionOptions.offset)var c=this._selectedOptionLi(),c="0 "+(this.list.offset().top-c.offset().top-(this.newelement.outerHeight()+c.outerHeight())/2);this.listWrap.removeAttr("style").zIndex(this.element.zIndex()+1).position({of:a.positionOptions.of||this.newelement,my:a.positionOptions.my,at:a.positionOptions.at,offset:a.positionOptions.offset||c,collision:a.positionOptions.collision||("popup"==a.style?"fit":"flip")})}})})(jQuery);
(function(a){a.widget("ui.panel",{options:{event:"click",collapsible:!0,collapseType:"default",collapsed:!1,accordion:!1,collapseSpeed:"fast",draggable:!1,trueVerticalText:!0,vHeight:"220px",stackable:!0,width:"auto",controls:!1,cookie:null,widgetClass:"ui-helper-reset ui-widget ui-panel",headerClass:"ui-helper-reset ui-widget-header ui-panel-header ui-corner-top",contentClass:"ui-helper-reset ui-widget-content ui-panel-content ui-corner-bottom",contentTextClass:"ui-panel-content-text",rightboxClass:"ui-panel-rightbox",
controlsClass:"ui-panel-controls",titleClass:"ui-panel-title",titleTextClass:"ui-panel-title-text",iconClass:"ui-icon",hoverClass:"ui-state-disabled",collapsePnlClass:"ui-panel-clps-pnl",headerIconClpsd:"ui-icon-triangle-1-e",headerIcon:"ui-icon-triangle-1-s",slideRIconClpsd:"ui-icon-arrowthickstop-1-w",slideRIcon:"ui-icon-arrowthickstop-1-e",slideLIconClpsd:"ui-icon-arrowthickstop-1-e",slideLIcon:"ui-icon-arrowthickstop-1-w"},_init:function(){this._panelize()},_panelize:function(){if(this.element.is("div")){var b=
this,c=this.options;this.panelBox=this.element;"auto"==c.width?c.width=this.panelBox.css("width"):this.panelBox.css("width",c.width);this.panelBox.attr("role","panel");c.id=this.panelBox.attr("id");this.headerBox=this.element.children(":first");this.contentBox=this.element.children().eq(1);c.content=this.contentBox.html();this.contentBox.wrapInner("<div/>");this.contentTextBox=this.contentBox.children(":first").addClass(c.contentTextClass);this.headerBox.wrapInner("<div><span/></div>");this.titleBox=
this.headerBox.children(":first");this.titleTextBox=this.titleBox.children(":first");this.titleText=this.titleTextBox.html();this.headerBox.prepend("<span/>");this.rightBox=this.headerBox.children(":first").addClass(c.rightboxClass);0!=c.controls?(this.rightBox.append("<span/>"),this.controlsBox=this.rightBox.children(":first").addClass(c.controlsClass).html(c.controls)):this.controlsBox=null;this.panelBox.addClass(c.widgetClass);this.headerBox.addClass(c.headerClass);this.titleBox.addClass(c.titleClass);
this.titleTextBox.addClass(c.titleTextClass);this.contentBox.addClass(c.contentClass);if(c.collapsible){switch(c.collapseType){case "slide-right":var e=0;c.controls&&(e=1);this.rightBox.append("<span><span/></span>");this.collapsePanel=this.rightBox.children().eq(e).addClass(c.collapsePnlClass);this.collapseButton=this.collapsePanel.children(":first").addClass(c.slideRIcon);this.iconBtnClpsd=c.slideRIconClpsd;this.iconBtn=c.slideRIcon;this.ctrlBox=this.controlsBox;break;case "slide-left":this.headerBox.prepend("<span><span/></span>");
this.collapsePanel=this.headerBox.children(":first").addClass(c.collapsePnlClass);this.collapseButton=this.collapsePanel.children(":first").addClass(c.slideLIcon);this.iconBtnClpsd=c.slideLIconClpsd;this.iconBtn=c.slideLIcon;this.ctrlBox=this.rightBox;break;default:this.headerBox.prepend("<span><span/></span>"),this.collapseButton=this.headerBox.children(":first").addClass(c.headerIcon),this.iconBtnClpsd=c.headerIconClpsd,this.iconBtn=c.headerIcon,this.ctrlBox=this.controlsBox}this._buttonHover(this.collapseButton);
this.collapseButton.addClass(c.iconClass);c.event&&(this.collapseButton.bind(c.event+".panel",function(a){return b._clickHandler.call(b,a,this)}),this.titleTextBox.bind(c.event+".panel",function(a){return b._clickHandler.call(b,a,this)}));c.accordion&&(c.collapsed=!0,c.trueVerticalText=!1);c.cookie&&(0==b._cookie()?c.collapsed=!1:c.collapsed=!0);this.panelBox.data("collapsed",c.collapsed);c.stackable&&-1<a.inArray(c.collapseType,["slide-right","slide-left"])&&(this.panelDock=this.panelBox.siblings("div[role=panelDock]:first"),
this.panelFrame=this.panelBox.siblings("div[role=panelFrame]:first"),0==this.panelDock.length&&(this.panelDock=this.panelBox.parent(0).prepend("<div>").children(":first"),this.panelFrame=this.panelDock.after("<div>").next(":first"),this.panelDock.attr("role","panelDock").css("float","slide-left"==c.collapseType?"left":"right"),this.panelFrame.attr("role","panelFrame").css({"float":"slide-left"==c.collapseType?"left":"right",overflow:"hidden"})),c.collapsed?this.panelDock.append(this.panelBox):this.panelFrame.append(this.panelBox));
c.collapsed&&b.toggle(0,!0)}else this.titleTextBox.css("cursor","default");!c.accordion&&c.draggable&&a.fn.draggable&&this._makeDraggable();this.panelBox.show()}},_cookie:function(){var b=this.cookie||(this.cookie=this.options.cookie.name||"ui-panel-"+this.options.id);return a.cookie.apply(null,[b].concat(a.makeArray(arguments)))},_makeDraggable:function(){this.panelBox.draggable({containment:"document",handle:".ui-panel-header",cancel:".ui-panel-content",cursor:"move"})},_clickHandler:function(a,
c){var e=this.options;if(e.disabled)return!1;this.toggle(e.collapseSpeed);return!1},toggle:function(b,c){var e=this.options,d=this.panelBox,f=this.contentBox,n=this.headerBox,h=this.titleTextBox,g=this.titleText,l=this.ctrlBox,m=this.panelDock,p="";jQuery.support.leadingWhitespace||(p="-ie");"none"==f.css("display")?this._trigger("unfold"):this._trigger("fold");l&&l.toggle(0);"default"==e.collapseType?0==b?(l&&l.hide(),f.hide()):f.slideToggle(b):(0==b?(e.collapsed=!1,l&&l.hide(),f.hide()):f.toggle(),
0==e.collapsed?(e.trueVerticalText?(n.toggleClass("ui-panel-vtitle").css("height",e.vHeight),""==p&&(f="height:"+(parseInt(e.vHeight)-50)+"px;width:100%;position:absolute;bottom:0;left:0;",h.empty().append('<div style="'+f+'z-index:3;"></div><object style="'+f+'z-index:2;" type="image/svg+xml" data="data:image/svg+xml;charset=utf-8,<svg xmlns=\'http://www.w3.org/2000/svg\'><text x=\'-'+(parseInt(e.vHeight)-60)+"px' y='16px' style='font-weight:"+h.css("font-weight")+";font-family:"+h.css("font-family").replace(/"/g,
"")+";font-size:"+h.css("font-size")+";fill:"+h.css("color")+";' transform='rotate(-90)' text-rendering='optimizeSpeed'>"+g+'</text></svg>"></object>').css("height",e.vHeight)),h.toggleClass("ui-panel-vtext"+p)):(n.attr("align","center"),h.html(h.text().replace(/(.)/g,"$1<BR>"))),e.stackable&&(c?m.append(d):m.prepend(d))):(e.stackable&&this.panelFrame.append(d),e.trueVerticalText?(n.toggleClass("ui-panel-vtitle").css("height","auto"),h.empty().append(g),h.toggleClass("ui-panel-vtext"+p)):(n.attr("align",
"left"),h.html(h.text().replace(/<BR>/g," ")))));if((0!=b||e.trueVerticalText)&&null==e.cookie||!c&&null!=e.cookie)e.collapsed=!e.collapsed;this.panelBox.data("collapsed",e.collapsed);c||(e.cookie&&this._cookie(Number(e.collapsed),e.cookie),e.accordion&&a("."+e.accordion+"[role='panel'][id!='"+e.id+"']:not(:data(collapsed))").panel("toggle",b,!0));this.collapseButton.toggleClass(this.iconBtnClpsd).toggleClass(this.iconBtn);n.toggleClass("ui-corner-all")},content:function(a){this.contentTextBox.html(a)},
destroy:function(){var b=this.options;this.headerBox.html(this.titleText).removeAttr("align").removeAttr("style").removeClass("ui-panel-vtitle ui-corner-all "+b.headerClass);this.contentBox.removeClass(b.contentClass).removeAttr("style").html(b.content);this.panelBox.removeAttr("role").removeAttr("style").removeData("collapsed").unbind(".panel").removeClass(b.widgetClass);b.stackable&&-1<a.inArray(b.collapseType,["slide-right","slide-left"])&&(this.panelDock.before(this.panelBox),0==this.panelDock.children("div[role=panel]").length&&
0==this.panelFrame.children("div[role=panel]").length&&(this.panelDock.remove(),this.panelFrame.remove()));b.cookie&&this._cookie(null,b.cookie);return this},_buttonHover:function(b){var c=this.options;b.bind({mouseover:function(){a(this).addClass(c.hoverClass)},mouseout:function(){a(this).removeClass(c.hoverClass)}})}});a.extend(a.ui.panel,{version:"0.6"})})(jQuery);
(function(a){a.widget("ui.multiselect",{options:{sortable:!0,searchable:!0,doubleClickable:!0,animated:"fast",show:"slideDown",hide:"slideUp",dividerLocation:.6,availableFirst:!1,nodeComparator:function(a,c){var e=a.text(),d=c.text();return e==d?0:e<d?-1:1}},_create:function(){this.element.hide();this.id=this.element.attr("id");this.container=a('<div class="ui-multiselect ui-helper-clearfix ui-widget"></div>').insertAfter(this.element);this.count=0;this.selectedContainer=a('<div class="selected"></div>').appendTo(this.container);
this.availableContainer=a('<div class="available"></div>')[this.options.availableFirst?"prependTo":"appendTo"](this.container);this.selectedActions=a('<div class="actions ui-widget-header ui-helper-clearfix"><span class="count">0 '+a.ui.multiselect.locale.itemsCount+'</span><a href="#" class="remove-all">'+a.ui.multiselect.locale.removeAll+"</a></div>").appendTo(this.selectedContainer);this.availableActions=a('<div class="actions ui-widget-header ui-helper-clearfix"><input type="text" class="search empty ui-widget-content ui-corner-all"/><a href="#" class="add-all">'+
a.ui.multiselect.locale.addAll+"</a></div>").appendTo(this.availableContainer);this.selectedList=a('<ul class="selected connected-list"><li class="ui-helper-hidden-accessible"></li></ul>').bind("selectstart",function(){return!1}).appendTo(this.selectedContainer);this.availableList=a('<ul class="available connected-list"><li class="ui-helper-hidden-accessible"></li></ul>').bind("selectstart",function(){return!1}).appendTo(this.availableContainer);var b=this;this.container.width(this.element.width()+
1);this.selectedContainer.width(Math.floor(this.element.width()*this.options.dividerLocation));this.availableContainer.width(Math.floor(this.element.width()*(1-this.options.dividerLocation)));this.selectedList.height(Math.max(this.element.height()-this.selectedActions.height(),1));this.availableList.height(Math.max(this.element.height()-this.availableActions.height(),1));this.options.animated||(this.options.show="show",this.options.hide="hide");this._populateLists(this.element.find("option"));this.options.sortable&&
this.selectedList.sortable({placeholder:"ui-state-highlight",axis:"y",update:function(c,e){b.selectedList.find("li").each(function(){a(this).data("optionLink")&&a(this).data("optionLink").remove().appendTo(b.element)})},receive:function(c,e){e.item.data("optionLink").attr("selected",!0);b.count+=1;b._updateCount();b.selectedList.children(".ui-draggable").each(function(){a(this).removeClass("ui-draggable");a(this).data("optionLink",e.item.data("optionLink"));a(this).data("idx",e.item.data("idx"));
b._applyItemState(a(this),!0)});setTimeout(function(){e.item.remove()},1)}});this.options.searchable?this._registerSearchEvents(this.availableContainer.find("input.search")):a(".search").hide();this.container.find(".remove-all").click(function(){b._populateLists(b.element.find("option").removeAttr("selected"));return!1});this.container.find(".add-all").click(function(){var c=b.element.find("option").not(":selected");1<b.availableList.children("li:hidden").length?b.availableList.children("li").each(function(b){a(this).is(":visible")&&
a(c[b-1]).attr("selected","selected")}):c.attr("selected","selected");b._populateLists(b.element.find("option"));return!1})},destroy:function(){this.element.show();this.container.remove();a.Widget.prototype.destroy.apply(this,arguments)},_populateLists:function(b){this.selectedList.children(".ui-element").remove();this.availableList.children(".ui-element").remove();this.count=0;var c=this;a(b.map(function(a){var b=c._getOptionNode(this).appendTo(this.selected?c.selectedList:c.availableList).show();
this.selected&&(c.count+=1);c._applyItemState(b,this.selected);b.data("idx",a);return b[0]}));this._updateCount();c._order.apply(this.availableContainer.find("input.search"),[c.availableList])},_updateCount:function(){this.element.trigger("change");this.selectedContainer.find("span.count").text(this.count+" "+a.ui.multiselect.locale.itemsCount)},_getOptionNode:function(b){b=a(b);var c=a('<li class="ui-state-default ui-element" title="'+b.text()+'"><span class="ui-icon"/>'+b.text()+'<a href="#" class="action"><span class="ui-corner-all ui-icon"/></a></li>').hide();
c.data("optionLink",b);return c},_cloneWithData:function(a){var c=a.clone(!1,!1);c.data("optionLink",a.data("optionLink"));c.data("idx",a.data("idx"));return c},_setSelected:function(b,c){b.data("optionLink").attr("selected",c);if(c){var e=this._cloneWithData(b);b[this.options.hide](this.options.animated,function(){a(this).remove()});e.appendTo(this.selectedList).hide()[this.options.show](this.options.animated);this._applyItemState(e,!0);return e}var d=this.availableList.find("li"),f=this.options.nodeComparator,
e=null,n=b.data("idx"),h=f(b,a(d[n]));if(h)for(;0<=n&&n<d.length;){if(0<h?n++:n--,h!=f(b,a(d[n]))){e=d[0<h?n:n+1];break}}else e=d[n];d=this._cloneWithData(b);e?d.insertBefore(a(e)):d.appendTo(this.availableList);b[this.options.hide](this.options.animated,function(){a(this).remove()});d.hide()[this.options.show](this.options.animated);this._applyItemState(d,!1);return d},_applyItemState:function(a,c){c?(this.options.sortable?a.children("span").addClass("ui-icon-arrowthick-2-n-s").removeClass("ui-helper-hidden").addClass("ui-icon"):
a.children("span").removeClass("ui-icon-arrowthick-2-n-s").addClass("ui-helper-hidden").removeClass("ui-icon"),a.find("a.action span").addClass("ui-icon-minus").removeClass("ui-icon-plus"),this._registerRemoveEvents(a.find("a.action"))):(a.children("span").removeClass("ui-icon-arrowthick-2-n-s").addClass("ui-helper-hidden").removeClass("ui-icon"),a.find("a.action span").addClass("ui-icon-plus").removeClass("ui-icon-minus"),this._registerAddEvents(a.find("a.action")));this._registerDoubleClickEvents(a);
this._registerHoverEvents(a)},_order:function(b){var c=a(this),e=b.children("li");b=e.map(function(){return a(this).text().toLowerCase()});var d=a.trim(c.val().toLowerCase()),f=[];d?(e.hide(),b.each(function(a){-1<this.indexOf(d)&&f.push(a)}),a.each(f,function(){a(e[this]).show()})):e.show()},_registerDoubleClickEvents:function(b){this.options.doubleClickable&&b.dblclick(function(c){0===a(c.target).closest(".action").length&&b.find("a.action").click()})},_registerHoverEvents:function(b){b.removeClass("ui-state-hover");
b.mouseover(function(){a(this).addClass("ui-state-hover")});b.mouseout(function(){a(this).removeClass("ui-state-hover")})},_registerAddEvents:function(b){var c=this;b.click(function(){c._setSelected(a(this).parent(),!0);c.count+=1;c._updateCount();return!1});this.options.sortable&&b.each(function(){a(this).parent().draggable({connectToSortable:c.selectedList,helper:function(){var b=c._cloneWithData(a(this)).width(a(this).width()-50);b.width(a(this).width());return b},appendTo:c.container,containment:c.container,
revert:"invalid"})})},_registerRemoveEvents:function(b){var c=this;b.click(function(){c._setSelected(a(this).parent(),!1);c.count-=1;c._updateCount();return!1})},_registerSearchEvents:function(b){var c=this;b.focus(function(){a(this).addClass("ui-state-active")}).blur(function(){a(this).removeClass("ui-state-active")}).keypress(function(a){if(13==a.keyCode)return!1}).keyup(function(){c._order.apply(this,[c.availableList])})},selectedValues:function(){var b=[];this.selectedList.find("li").each(function(c,
e){var d=a(e).data("optionLink");d&&b.push(d.val())});return b}});a.extend(a.ui.multiselect,{locale:{addAll:"Add all",removeAll:"Remove all",itemsCount:"items selected"}})})(jQuery);
(function(a,b,c){var e=/\r/g,d=/^(button|checkbox|hidden|image|radio|range|reset|submit)$/i,f=["Page_ClientValidate"],n=!1,h="placeholder"in document.createElement("input");a.watermark=a.watermark||{version:"3.1.4",runOnce:!0,options:{className:"watermark",useNative:!0,hideBeforeUnload:!0},hide:function(b){a(b).filter("input:data(watermark),textarea:data(watermark)").each(function(){a.watermark._hide(a(this))})},_hide:function(a,c){var d=a[0],f=(d.value||"").replace(e,""),h=a.data("watermarkText")||
"",r=a.data("watermarkMaxLength")||0,q=a.data("watermarkClass"),n,u;h.length&&f==h&&(d.value="",a.data("watermarkPassword")&&"text"===(a.attr("type")||"")&&(n=a.data("watermarkPassword")||[],u=a.parent()||[],n.length&&u.length&&(u[0].removeChild(a[0]),u[0].appendChild(n[0]),a=n)),r&&(a.attr("maxLength",r),a.removeData("watermarkMaxLength")),c&&(a.attr("autocomplete","off"),b.setTimeout(function(){a.select()},1)));q&&a.removeClass(q)},show:function(b){a(b).filter("input:data(watermark),textarea:data(watermark)").each(function(){a.watermark._show(a(this))})},
_show:function(b){var c=b[0],d=(c.value||"").replace(e,""),f=b.data("watermarkText")||"",h=b.attr("type")||"",r=b.data("watermarkClass"),q,w,u;0!=d.length&&d!=f||b.data("watermarkFocus")?a.watermark._hide(b):(n=!0,b.data("watermarkPassword")&&"password"===h&&(q=b.data("watermarkPassword")||[],w=b.parent()||[],q.length&&w.length&&(w[0].removeChild(b[0]),w[0].appendChild(q[0]),b=q,b.attr("maxLength",f.length),c=b[0])),("text"===h||"search"===h)&&(u=b.attr("maxLength")||0,0<u&&f.length>u&&(b.data("watermarkMaxLength",
u),b.attr("maxLength",f.length))),r&&b.addClass(r),c.value=f)},hideAll:function(){n&&(a.watermark.hide(":watermarkable"),n=!1)},showAll:function(){a.watermark.show(":watermarkable")}};a.fn.watermark=a.fn.watermark||function(c,d){if(!this.length)return this;var f=!1,p="string"==typeof c;return p&&(c=c.replace(e,"")),"object"==typeof d?(f="string"==typeof d.className,d=a.extend({},a.watermark.options,d)):"string"==typeof d?(f=!0,d=a.extend({},a.watermark.options,{className:d})):d=a.watermark.options,
"function"!=typeof d.useNative&&(d.useNative=d.useNative?function(){return!0}:function(){return!1}),this.each(function(){var t=a(this),r,q,n,u;if(t.is(":watermarkable")){if(t.data("watermark"))(p||f)&&(a.watermark._hide(t),p&&t.data("watermarkText",c),f&&t.data("watermarkClass",d.className));else{if(h&&d.useNative.call(this,t)&&"TEXTAREA"!==(t.attr("tagName")||"")){p&&t.attr("placeholder",c);return}t.data("watermarkText",p?c:"");t.data("watermarkClass",d.className);t.data("watermark",1);"password"===
(t.attr("type")||"")?(r=t.wrap("<span>").parent(),q=a(r.html().replace(/type=["']?password["']?/i,'type="text"')),q.data("watermarkText",t.data("watermarkText")),q.data("watermarkClass",t.data("watermarkClass")),q.data("watermark",1),q.attr("maxLength",c.length),q.focus(function(){a.watermark._hide(q,!0)}).bind("dragenter",function(){a.watermark._hide(q)}).bind("dragend",function(){b.setTimeout(function(){q.blur()},1)}),t.blur(function(){a.watermark._show(t)}).bind("dragleave",function(){a.watermark._show(t)}),
q.data("watermarkPassword",t),t.data("watermarkPassword",q)):t.focus(function(){t.data("watermarkFocus",1);a.watermark._hide(t,!0)}).blur(function(){t.data("watermarkFocus",0);a.watermark._show(t)}).bind("dragenter",function(){a.watermark._hide(t)}).bind("dragleave",function(){a.watermark._show(t)}).bind("dragend",function(){b.setTimeout(function(){a.watermark._show(t)},1)}).bind("drop",function(a){var b=t[0];a=a.originalEvent.dataTransfer.getData("Text");(b.value||"").replace(e,"").replace(a,"")===
t.data("watermarkText")&&(b.value=a);t.focus()});this.form&&(n=this.form,u=a(n),u.data("watermarkSubmit")||(u.submit(a.watermark.hideAll),n.submit?(u.data("watermarkSubmit",n.submit),n.submit=function(b,c){return function(){var d=c.data("watermarkSubmit");a.watermark.hideAll();d.apply?d.apply(b,Array.prototype.slice.call(arguments)):d()}}(n,u)):(u.data("watermarkSubmit",1),n.submit=function(b){return function(){a.watermark.hideAll();delete b.submit;b.submit()}}(n))))}a.watermark._show(t)}})};a.watermark.runOnce&&
(a.watermark.runOnce=!1,a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},watermarkable:function(a){var b,c=a.nodeName;return"TEXTAREA"===c?!0:"INPUT"!==c?!1:(b=a.getAttribute("type"),!b||!d.test(b))}}),function(b){a.fn.val=function(){var d=Array.prototype.slice.call(arguments),f;return this.length?d.length?(b.apply(this,d),a.watermark.show(this),this):this.data("watermark")?(f=(this[0].value||
"").replace(e,""),f===(this.data("watermarkText")||"")?"":f):b.apply(this):d.length?this:c}}(a.fn.val),f.length&&a(function(){for(var c,d,e=f.length-1;0<=e;e--)c=f[e],d=b[c],"function"==typeof d&&(b[c]=function(b){return function(){return a.watermark.hideAll(),b.apply(null,Array.prototype.slice.call(arguments))}}(d))}),a(b).bind("beforeunload",function(){a.watermark.options.hideBeforeUnload&&a.watermark.hideAll()}))})(jQuery,window);
(function(a){var b=Math.min,c=Math.max,e=Math.floor,d=function(b){return"string"===a.type(b)},f=function(b,c){if(a.isArray(c))for(var e=0,g=c.length;e<g;e++){var f=c[e];try{d(f)&&(f=eval(f)),a.isFunction(f)&&f(b)}catch(h){}}};a.layout={version:"1.3.rc30.79",revision:.033007,browser:{},effects:{slide:{all:{duration:"fast"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},drop:{all:{duration:"slow"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},
west:{direction:"left"}},scale:{all:{duration:"fast"}},blind:{},clip:{},explode:{},fade:{},fold:{},puff:{},size:{all:{easing:"swing"}}},config:{optionRootKeys:"effects panes north south west east center".split(" "),allPanes:["north","south","west","east","center"],borderPanes:["north","south","west","east"],oppositeEdge:{north:"south",south:"north",east:"west",west:"east"},offscreenCSS:{left:"-99999px",right:"auto"},offscreenReset:"offscreenReset",hidden:{visibility:"hidden"},visible:{visibility:"visible"},
resizers:{cssReq:{position:"absolute",padding:0,margin:0,fontSize:"1px",textAlign:"left",overflow:"hidden"},cssDemo:{background:"#DDD",border:"none"}},togglers:{cssReq:{position:"absolute",display:"block",padding:0,margin:0,overflow:"hidden",textAlign:"center",fontSize:"1px",cursor:"pointer",zIndex:1},cssDemo:{background:"#AAA"}},content:{cssReq:{position:"relative"},cssDemo:{overflow:"auto",padding:"10px"},cssDemoPane:{overflow:"hidden",padding:0}},panes:{cssReq:{position:"absolute",margin:0},cssDemo:{padding:"10px",
background:"#FFF",border:"1px solid #BBB",overflow:"auto"}},north:{side:"top",sizeType:"Height",dir:"horz",cssReq:{top:0,bottom:"auto",left:0,right:0,width:"auto"}},south:{side:"bottom",sizeType:"Height",dir:"horz",cssReq:{top:"auto",bottom:0,left:0,right:0,width:"auto"}},east:{side:"right",sizeType:"Width",dir:"vert",cssReq:{left:"auto",right:0,top:"auto",bottom:"auto",height:"auto"}},west:{side:"left",sizeType:"Width",dir:"vert",cssReq:{left:0,right:"auto",top:"auto",bottom:"auto",height:"auto"}},
center:{dir:"center",cssReq:{left:"auto",right:"auto",top:"auto",bottom:"auto",height:"auto",width:"auto"}}},callbacks:{},getParentPaneElem:function(b){b=a(b);if(b=b.data("layout")||b.data("parentLayout")){b=b.container;if(b.data("layoutPane"))return b;b=b.closest("."+a.layout.defaults.panes.paneClass);if(b.data("layoutPane"))return b}return null},getParentPaneInstance:function(b){return(b=a.layout.getParentPaneElem(b))?b.data("layoutPane"):null},getParentLayoutInstance:function(b){return(b=a.layout.getParentPaneElem(b))?
b.data("parentLayout"):null},getEventObject:function(a){return"object"===typeof a&&a.stopPropagation?a:null},parsePaneName:function(b){var c=a.layout.getEventObject(b);c&&(c.stopPropagation(),b=a(this).data("layoutEdge"));b&&!/^(west|east|north|south|center)$/.test(b)&&(a.layout.msg('LAYOUT ERROR - Invalid pane-name: "'+b+'"'),b="error");return b},plugins:{draggable:!!a.fn.draggable,effects:{core:!!a.effects,slide:a.effects&&(a.effects.slide||a.effects.effect&&a.effects.effect.slide)}},onCreate:[],
onLoad:[],onReady:[],onDestroy:[],onUnload:[],afterOpen:[],afterClose:[],scrollbarWidth:function(){return window.scrollbarWidth||a.layout.getScrollbarSize("width")},scrollbarHeight:function(){return window.scrollbarHeight||a.layout.getScrollbarSize("height")},getScrollbarSize:function(b){var c=a('<div style="position: absolute; top: -10000px; left: -10000px; width: 100px; height: 100px; overflow: scroll;"></div>').appendTo("body"),d={width:c.css("width")-c[0].clientWidth,height:c.height()-c[0].clientHeight};
c.remove();window.scrollbarWidth=d.width;window.scrollbarHeight=d.height;return b.match(/^(width|height)$/)?d[b]:d},showInvisibly:function(a,b){if(a&&a.length&&(b||"none"===a.css("display"))){var c=a[0].style,c={display:c.display||"",visibility:c.visibility||""};a.css({display:"block",visibility:"hidden"});return c}return{}},getElementDimensions:function(b,d){var e={css:{},inset:{}},g=e.css,f={bottom:0},h=a.layout.cssNum,n=b.offset(),u,x,z;e.offsetLeft=n.left;e.offsetTop=n.top;d||(d={});a.each(["Left",
"Right","Top","Bottom"],function(c,h){u=g["border"+h]=a.layout.borderWidth(b,h);x=g["padding"+h]=a.layout.cssNum(b,"padding"+h);z=h.toLowerCase();e.inset[z]=0<=d[z]?d[z]:x;f[z]=e.inset[z]+u});g.width=b.width();g.height=b.height();g.top=h(b,"top",!0);g.bottom=h(b,"bottom",!0);g.left=h(b,"left",!0);g.right=h(b,"right",!0);e.outerWidth=b.outerWidth();e.outerHeight=b.outerHeight();e.innerWidth=c(0,e.outerWidth-f.left-f.right);e.innerHeight=c(0,e.outerHeight-f.top-f.bottom);e.layoutWidth=b.innerWidth();
e.layoutHeight=b.innerHeight();return e},getElementStyles:function(a,b){var c={},d=a[0].style,e=b.split(","),g=["Top","Bottom","Left","Right"],f=["Color","Style","Width"],h,n,z,y,B,A;for(y=0;y<e.length;y++)if(h=e[y],h.match(/(border|padding|margin)$/))for(B=0;4>B;B++)if(n=g[B],"border"===h)for(A=0;3>A;A++)z=f[A],c[h+n+z]=d[h+n+z];else c[h+n]=d[h+n];else c[h]=d[h];return c},cssWidth:function(b,d){if(0>=d)return 0;var e=a.layout.browser.boxModel?a.support.boxSizing?b.css("boxSizing"):"content-box":
"border-box",g=a.layout.borderWidth,f=a.layout.cssNum,h=d;"border-box"!==e&&(h-=g(b,"Left")+g(b,"Right"));"content-box"===e&&(h-=f(b,"paddingLeft")+f(b,"paddingRight"));return c(0,h)},cssHeight:function(b,d){if(0>=d)return 0;var e=a.layout.browser.boxModel?a.support.boxSizing?b.css("boxSizing"):"content-box":"border-box",g=a.layout.borderWidth,f=a.layout.cssNum,h=d;"border-box"!==e&&(h-=g(b,"Top")+g(b,"Bottom"));"content-box"===e&&(h-=f(b,"paddingTop")+f(b,"paddingBottom"));return c(0,h)},cssNum:function(b,
c,d){b.jquery||(b=a(b));var e=a.layout.showInvisibly(b);c=a.css(b[0],c,!0);d=d&&"auto"==c?c:Math.round(parseFloat(c)||0);b.css(e);return d},borderWidth:function(b,c){b.jquery&&(b=b[0]);var d="border"+c.substr(0,1).toUpperCase()+c.substr(1);return"none"===a.css(b,d+"Style",!0)?0:Math.round(parseFloat(a.css(b,d+"Width",!0))||0)},isMouseOverElem:function(b,c){var d=a(c||this),e=d.offset(),g=e.top,e=e.left,f=e+d.outerWidth(),d=g+d.outerHeight(),h=b.pageX,n=b.pageY;return a.layout.browser.msie&&0>h&&0>
n||h>=e&&h<=f&&n>=g&&n<=d},msg:function(b,c,d,e){a.isPlainObject(b)&&window.debugData?("string"===typeof c?(e=d,d=c):"object"===typeof d&&(e=d,d=null),d=d||"log( <object> )",e=a.extend({sort:!1,returnHTML:!1,display:!1},e),!0===c||e.display?debugData(b,d,e):window.console&&console.log(debugData(b,d,e))):c?alert(b):window.console?console.log(b):(c=a("#layoutLogger"),c.length||(c=a('<div id="layoutLogger" style="position: '+(a.support.fixedPosition?"fixed":"absolute")+'; top: 5px; z-index: 999999; max-width: 25%; overflow: hidden; border: 1px solid #000; border-radius: 5px; background: #FBFBFB; box-shadow: 0 2px 10px rgba(0,0,0,0.3);"><div style="font-size: 13px; font-weight: bold; padding: 5px 10px; background: #F6F6F6; border-radius: 5px 5px 0 0; cursor: move;"><span style="float: right; padding-left: 7px; cursor: pointer;" title="Remove Console" onclick="$(this).closest(\'#layoutLogger\').remove()">X</span>Layout console.log</div><ul style="font-size: 13px; font-weight: none; list-style: none; margin: 0; padding: 0 0 2px;"></ul></div>').appendTo("body"),
c.css("left",a(window).width()-c.outerWidth()-5),a.ui.draggable&&c.draggable({handle:":first-child"})),c.children("ul").append('<li style="padding: 4px 10px; margin: 0; border-top: 1px solid #CCC;">'+b.replace(/\</g,"&lt;").replace(/\>/g,"&gt;")+"</li>"))}};var n=navigator.userAgent.toLowerCase(),h=/(chrome)[ \/]([\w.]+)/.exec(n)||/(webkit)[ \/]([\w.]+)/.exec(n)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(n)||/(msie) ([\w.]+)/.exec(n)||0>n.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(n)||
[],n=h[1]||"",h=h[2]||0,g="msie"===n;a.layout.browser={version:h,safari:"webkit"===n,webkit:"chrome"===n,msie:g,isIE6:g&&6==h,boxModel:!g||!1!==a.support.boxModel};n&&(a.layout.browser[n]=!0);g&&a(function(){a.layout.browser.boxModel=a.support.boxModel});a.layout.defaults={name:"",containerClass:"ui-layout-container",inset:null,scrollToBookmarkOnLoad:!0,resizeWithWindow:!0,resizeWithWindowDelay:200,resizeWithWindowMaxDelay:0,maskPanesEarly:!1,onresizeall_start:null,onresizeall_end:null,onload_start:null,
onload_end:null,onunload_start:null,onunload_end:null,initPanes:!0,showErrorMessages:!0,showDebugMessages:!1,zIndex:null,zIndexes:{pane_normal:0,content_mask:1,resizer_normal:0,pane_sliding:100,pane_animate:1E3,resizer_drag:1E4},errors:{pane:"pane",selector:"selector",addButtonError:"Error Adding Button\nInvalid ",containerMissing:"UI Layout Initialization Error\nThe specified layout-container does not exist.",centerPaneMissing:"UI Layout Initialization Error\nThe center-pane element does not exist.\nThe center-pane is a required element.",
noContainerHeight:"UI Layout Initialization Warning\nThe layout-container \"CONTAINER\" has no height.\nTherefore the layout is 0-height and hence 'invisible'!",callbackError:"UI Layout Callback Error\nThe EVENT callback is not a valid function."},panes:{applyDemoStyles:!1,closable:!0,resizable:!0,slidable:!0,initClosed:!1,initHidden:!1,contentSelector:".ui-layout-content",contentIgnoreSelector:".ui-layout-ignore",findNestedContent:!1,paneClass:"ui-layout-pane",resizerClass:"ui-layout-resizer",togglerClass:"ui-layout-toggler",
buttonClass:"ui-layout-button",minSize:0,maxSize:0,spacing_open:6,spacing_closed:6,togglerLength_open:50,togglerLength_closed:50,togglerAlign_open:"center",togglerAlign_closed:"center",togglerContent_open:"",togglerContent_closed:"",resizerDblClickToggle:!0,autoResize:!0,autoReopen:!0,resizerDragOpacity:1,maskContents:!1,maskObjects:!1,maskZindex:null,resizingGrid:!1,livePaneResizing:!1,liveContentResizing:!1,liveResizingTolerance:1,sliderCursor:"pointer",slideTrigger_open:"click",slideTrigger_close:"mouseleave",
slideDelay_open:300,slideDelay_close:300,hideTogglerOnSlide:!1,preventQuickSlideClose:a.layout.browser.webkit,preventPrematureSlideClose:!1,tips:{Open:"Open",Close:"Close",Resize:"Resize",Slide:"Slide Open",Pin:"Pin",Unpin:"Un-Pin",noRoomToOpen:"Not enough room to show this panel.",minSizeWarning:"Panel has reached its minimum size",maxSizeWarning:"Panel has reached its maximum size"},showOverflowOnHover:!1,enableCursorHotkey:!0,customHotkeyModifier:"SHIFT",fxName:"slide",fxSpeed:null,fxSettings:{},
fxOpacityFix:!0,animatePaneSizing:!1,children:null,containerSelector:"",initChildren:!0,destroyChildren:!0,resizeChildren:!0,triggerEventsOnLoad:!1,triggerEventsDuringLiveResize:!0,onshow_start:null,onshow_end:null,onhide_start:null,onhide_end:null,onopen_start:null,onopen_end:null,onclose_start:null,onclose_end:null,onresize_start:null,onresize_end:null,onsizecontent_start:null,onsizecontent_end:null,onswap_start:null,onswap_end:null,ondrag_start:null,ondrag_end:null},north:{paneSelector:".ui-layout-north",
size:"auto",resizerCursor:"n-resize",customHotkey:""},south:{paneSelector:".ui-layout-south",size:"auto",resizerCursor:"s-resize",customHotkey:""},east:{paneSelector:".ui-layout-east",size:200,resizerCursor:"e-resize",customHotkey:""},west:{paneSelector:".ui-layout-west",size:200,resizerCursor:"w-resize",customHotkey:""},center:{paneSelector:".ui-layout-center",minWidth:0,minHeight:0}};a.layout.optionsMap={layout:"name instanceKey stateManagement effects inset zIndexes errors zIndex scrollToBookmarkOnLoad showErrorMessages maskPanesEarly outset resizeWithWindow resizeWithWindowDelay resizeWithWindowMaxDelay onresizeall onresizeall_start onresizeall_end onload onload_start onload_end onunload onunload_start onunload_end".split(" "),
center:"paneClass contentSelector contentIgnoreSelector findNestedContent applyDemoStyles triggerEventsOnLoad showOverflowOnHover maskContents maskObjects liveContentResizing containerSelector children initChildren resizeChildren destroyChildren onresize onresize_start onresize_end onsizecontent onsizecontent_start onsizecontent_end".split(" "),noDefault:["paneSelector","resizerCursor","customHotkey"]};a.layout.transformData=function(b,c){var d=c?{panes:{},center:{}}:{},e,g,f,h,n,x,z;if("object"!==
typeof b)return d;for(g in b)for(e=d,n=b[g],f=g.split("__"),z=f.length-1,x=0;x<=z;x++)h=f[x],x===z?a.isPlainObject(n)?e[h]=a.layout.transformData(n):e[h]=n:(e[h]||(e[h]={}),e=e[h]);return d};a.layout.backwardCompatibility={map:{applyDefaultStyles:"applyDemoStyles",childOptions:"children",initChildLayout:"initChildren",destroyChildLayout:"destroyChildren",resizeChildLayout:"resizeChildren",resizeNestedLayout:"resizeChildren",resizeWhileDragging:"livePaneResizing",resizeContentWhileDragging:"liveContentResizing",
triggerEventsWhileDragging:"triggerEventsDuringLiveResize",maskIframesOnResize:"maskContents",useStateCookie:"stateManagement.enabled","cookie.autoLoad":"stateManagement.autoLoad","cookie.autoSave":"stateManagement.autoSave","cookie.keys":"stateManagement.stateKeys","cookie.name":"stateManagement.cookie.name","cookie.domain":"stateManagement.cookie.domain","cookie.path":"stateManagement.cookie.path","cookie.expires":"stateManagement.cookie.expires","cookie.secure":"stateManagement.cookie.secure",
noRoomToOpenTip:"tips.noRoomToOpen",togglerTip_open:"tips.Close",togglerTip_closed:"tips.Open",resizerTip:"tips.Resize",sliderTip:"tips.Slide"},renameOptions:function(b){function c(a,d){for(var e=a.split("."),g=e.length-1,f={branch:b,key:e[g]},h=0,m;h<g;h++)m=e[h],f.branch=void 0==f.branch[m]?d?f.branch[m]={}:{}:f.branch[m];return f}var d=a.layout.backwardCompatibility.map,e,g,f,h;for(h in d)e=c(h),f=e.branch[e.key],void 0!==f&&(g=c(d[h],!0),g.branch[g.key]=f,delete e.branch[e.key])},renameAllOptions:function(b){var c=
a.layout.backwardCompatibility.renameOptions;c(b);b.defaults&&("object"!==typeof b.panes&&(b.panes={}),a.extend(!0,b.panes,b.defaults),delete b.defaults);b.panes&&c(b.panes);a.each(a.layout.config.allPanes,function(a,d){b[d]&&c(b[d])});return b}};a.fn.layout=function(g){function h(b){if(!b)return!0;var c=b.keyCode;if(33>c)return!0;var d={38:"north",40:"south",37:"west",39:"east"},e=b.shiftKey,g=b.ctrlKey,f,l,m,p;g&&37<=c&&40>=c&&A[d[c]].enableCursorHotkey?p=d[c]:(g||e)&&a.each(q.borderPanes,function(a,
b){f=A[b];l=f.customHotkey;m=f.customHotkeyModifier;if((e&&"SHIFT"==m||g&&"CTRL"==m||g&&e)&&l&&c===(isNaN(l)||9>=l?l.toUpperCase().charCodeAt(0):l))return p=b,!1});if(!p||!ca[p]||!A[p].closable||C[p].isHidden)return!0;Wa(p);b.stopPropagation();return b.returnValue=!1}function p(b){if(U()){this&&this.tagName&&(b=this);var c;d(b)?c=ca[b]:a(b).data("layoutRole")?c=a(b):a(b).parents().each(function(){if(a(this).data("layoutRole"))return c=a(this),!1});if(c&&c.length){var e=c.data("layoutEdge");b=C[e];
b.cssSaved&&n(e);if(b.isSliding||b.isResizing||b.isClosed)b.cssSaved=!1;else{var g={zIndex:A.zIndexes.resizer_normal+1},f={},h=c.css("overflow"),l=c.css("overflowX"),m=c.css("overflowY");"visible"!=h&&(f.overflow=h,g.overflow="visible");l&&!l.match(/(visible|auto)/)&&(f.overflowX=l,g.overflowX="visible");m&&!m.match(/(visible|auto)/)&&(f.overflowY=l,g.overflowY="visible");b.cssSaved=f;c.css(g);a.each(q.allPanes,function(a,b){b!=e&&n(b)})}}}}function n(b){if(U()){this&&this.tagName&&(b=this);var c;
d(b)?c=ca[b]:a(b).data("layoutRole")?c=a(b):a(b).parents().each(function(){if(a(this).data("layoutRole"))return c=a(this),!1});if(c&&c.length){b=c.data("layoutEdge");b=C[b];var e=b.cssSaved||{};b.isSliding||b.isResizing||c.css("zIndex",A.zIndexes.pane_normal);c.css(e);b.cssSaved=!1}}}var r=a.layout.browser,q=a.layout.config,w=a.layout.cssWidth,u=a.layout.cssHeight,x=a.layout.getElementDimensions,z=a.layout.getElementStyles,y=a.layout.getEventObject,B=a.layout.parsePaneName,A=a.extend(!0,{},a.layout.defaults);
A.effects=a.extend(!0,{},a.layout.effects);var C={id:"layout"+a.now(),initialized:!1,paneResizing:!1,panesSliding:{},container:{innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0,layoutWidth:0,layoutHeight:0},north:{childIdx:0},south:{childIdx:0},east:{childIdx:0},west:{childIdx:0},center:{childIdx:0}},D={north:null,south:null,east:null,west:null,center:null},H={data:{},set:function(a,b,c){H.clear(a);H.data[a]=setTimeout(b,c)},clear:function(a){var b=H.data;b[a]&&(clearTimeout(b[a]),delete b[a])}},
G=function(b,c,d){var e=A;(e.showErrorMessages&&!d||d&&e.showDebugMessages)&&a.layout.msg(e.name+" / "+b,!1!==c);return!1},L=function(b,c,e){var g=c&&d(c),f=g?C[c]:C,h=g?A[c]:A,l=A.name,m=b+(b.match(/_/)?"":"_end"),p=m.match(/_end$/)?m.substr(0,m.length-4):"",q=h[m]||h[p],r="NC",n=[];g||"boolean"!==a.type(c)||(e=c,c="");if(q)try{d(q)&&(q.match(/,/)?(n=q.split(","),q=eval(n[0])):q=eval(q)),a.isFunction(q)&&(r=n.length?q(n[1]):g?q(c,ca[c],f,h,l):q(Y,f,h,l))}catch(t){G(A.errors.callbackError.replace(/EVENT/,
a.trim((c||"")+" "+m)),!1),"string"===a.type(t)&&string.length&&G("Exception:  "+t,!1)}e||!1===r||(g?(e=ca[c],h=A[c],f=C[c],e.triggerHandler("layoutpane"+m,[c,e,f,h,l]),p&&e.triggerHandler("layoutpane"+p,[c,e,f,h,l])):(da.triggerHandler("layout"+m,[Y,f,h,l]),p&&da.triggerHandler("layout"+p,[Y,f,h,l])));g&&"onresize_end"===b&&Eb(c+"",!0);return r},J=function(a){if(!r.mozilla){var b=ca[a];"IFRAME"===C[a].tagName?b.css(q.hidden).css(q.visible):b.find("IFRAME").css(q.hidden).css(q.visible)}},M=function(a){var b=
ca[a];a=q[a].dir;b={minWidth:1001-w(b,1E3),minHeight:1001-u(b,1E3)};"horz"===a&&(b.minSize=b.minHeight);"vert"===a&&(b.minSize=b.minWidth);return b},V=function(b,c,e){var g=b;d(b)?g=ca[b]:b.jquery||(g=a(b));b=u(g,c);g.css({height:b,visibility:"visible"});0<b&&0<g.innerWidth()?e&&g.data("autoHidden")&&(g.show().data("autoHidden",!1),r.mozilla||g.css(q.hidden).css(q.visible)):e&&!g.data("autoHidden")&&g.hide().data("autoHidden",!0)},T=function(b,c,g){g||(g=q[b].dir);d(c)&&c.match(/%/)&&(c="100%"===
c?-1:parseInt(c,10)/100);if(0===c)return 0;if(1<=c)return parseInt(c,10);var f=A,h=0;"horz"==g?h=ja.innerHeight-(ca.north?f.north.spacing_open:0)-(ca.south?f.south.spacing_open:0):"vert"==g&&(h=ja.innerWidth-(ca.west?f.west.spacing_open:0)-(ca.east?f.east.spacing_open:0));if(-1===c)return h;if(0<c)return e(h*c);if("center"==b)return 0;g="horz"===g?"height":"width";f=ca[b];b="height"===g?ab[b]:!1;var h=a.layout.showInvisibly(f),l=f.css(g),m=b?b.css(g):0;f.css(g,"auto");b&&b.css(g,"auto");c="height"===
g?f.outerHeight():f.outerWidth();f.css(g,l).css(h);b&&b.css(g,m);return c},O=function(a,b){var c=ca[a],d=A[a],e=C[a],g=b?d.spacing_open:0,d=b?d.spacing_closed:0;return!c||e.isHidden?0:e.isClosed||e.isSliding&&b?d:"horz"===q[a].dir?c.outerHeight()+g:c.outerWidth()+g},N=function(a,d){if(U()){var e=A[a],g=C[a],f=q[a],h=f.dir;f.sizeType.toLowerCase();var f=void 0!=d?d:g.isSliding,l=e.spacing_open,m=q.oppositeEdge[a],p=C[m],r=ca[m],n=!r||!1===p.isVisible||p.isSliding?0:"horz"==h?r.outerHeight():r.outerWidth(),
m=(!r||p.isHidden?0:A[m][!1!==p.isClosed?"spacing_closed":"spacing_open"])||0,p="horz"==h?ja.innerHeight:ja.innerWidth,r=M("center"),r="horz"==h?c(A.center.minHeight,r.minHeight):c(A.center.minWidth,r.minWidth),f=p-l-(f?0:T("center",r,h)+n+m),h=g.minSize=c(T(a,e.minSize),M(a).minSize),f=g.maxSize=b(e.maxSize?T(a,e.maxSize):1E5,f),g=g.resizerPosition={},l=ja.inset.top,n=ja.inset.left,m=ja.innerWidth,p=ja.innerHeight,e=e.spacing_open;switch(a){case "north":g.min=l+h;g.max=l+f;break;case "west":g.min=
n+h;g.max=n+f;break;case "south":g.min=l+p-f-e;g.max=l+p-h-e;break;case "east":g.min=n+m-f-e,g.max=n+m-h-e}}},Z=function(b,c){var d=a(b),e=d.data("layoutRole"),g=d.data("layoutEdge"),f=A[g][e+"Class"],g="-"+g,h=d.hasClass(f+"-closed")?"-closed":"-open",l="-closed"===h?"-open":"-closed",h=f+"-hover "+(f+g+"-hover ")+(f+h+"-hover ")+(f+g+h+"-hover ");c&&(h+=f+l+"-hover "+(f+g+l+"-hover "));"resizer"==e&&d.hasClass(f+"-sliding")&&(h+=f+"-sliding-hover "+(f+g+"-sliding-hover "));return a.trim(h)},X=function(b,
c){var d=a(c||this);b&&"toggler"===d.data("layoutRole")&&b.stopPropagation();d.addClass(Z(d))},P=function(b,c){var d=a(c||this);d.removeClass(Z(d,!0))},R=function(b){b=a(this).data("layoutEdge");var c=C[b];c.isClosed||c.isResizing||C.paneResizing||(a.fn.disableSelection&&a("body").disableSelection(),A.maskPanesEarly&&qb(b,{resizing:!0}))},K=function(b,c){var d=c||this,e=a(d).data("layoutEdge"),g=e+"ResizerLeave";H.clear(e+"_openSlider");H.clear(g);c?C.paneResizing||(a.fn.enableSelection&&a("body").enableSelection(),
A.maskPanesEarly&&Xa()):H.set(g,function(){K(b,d)},200)},U=function(){return C.initialized||C.creatingLayout?!0:Q()},Q=function(b){var c=A;if(!da.is(":visible"))return!b&&r.webkit&&"BODY"===da[0].tagName&&setTimeout(function(){Q(!0)},50),!1;if(!v("center").length)return G(c.errors.centerPaneMissing);C.creatingLayout=!0;a.extend(ja,x(da,c.inset));Ea();c.scrollToBookmarkOnLoad&&(b=self.location,b.hash&&b.replace(b.hash));Y.hasParentLayout?c.resizeWithWindow=!1:c.resizeWithWindow&&a(window).bind("resize."+
Sa,la);delete C.creatingLayout;C.initialized=!0;f(Y,a.layout.onReady);L("onload_end");return!0},ma=function(b,c){var d=B.call(this,b),e=ca[d];if(e){var g=ab[d],f=C[d],h=A[d],l=A.stateManagement||{},h=c?h.children=c:h.children;if(a.isPlainObject(h))h=[h];else if(!h||!a.isArray(h))return;a.each(h,function(b,c){a.isPlainObject(c)&&(c.containerSelector?e.find(c.containerSelector):g||e).each(function(){var b=a(this),e=b.data("layout");if(!e){S({container:b,options:c},f);if(l.includeChildren&&C.stateData[d]){var e=
(C.stateData[d].children||{})[c.instanceKey],g=c.stateManagement||(c.stateManagement={autoLoad:!0});!0===g.autoLoad&&e&&(g.autoSave=!1,g.includeChildren=!0,g.autoLoad=a.extend(!0,{},e))}(e=b.layout(c))&&W(d,e)}})})}},S=function(a,b){var c=a.container,d=a.options,e=d.stateManagement,g=d.instanceKey||c.data("layoutInstanceKey");g||(g=(e&&e.cookie?e.cookie.name:"")||d.name);g=g?g.replace(/[^\w-]/gi,"_").replace(/_{2,}/g,"_"):"layout"+ ++b.childIdx;d.instanceKey=g;c.data("layoutInstanceKey",g);return g},
W=function(b,c){var d=ca[b],e=D[b],g=C[b];a.isPlainObject(e)&&(a.each(e,function(a,b){b.destroyed&&delete e[a]}),a.isEmptyObject(e)&&(e=D[b]=null));c||e||(c=d.data("layout"));c&&(c.hasParentLayout=!0,d=c.options,S(c,g),e||(e=D[b]={}),e[d.instanceKey]=c.container.data("layout"));Y[b].children=D[b];c||ma(b)},la=function(){var a=A,b=Number(a.resizeWithWindowDelay);10>b&&(b=100);H.clear("winResize");H.set("winResize",function(){H.clear("winResize");H.clear("winResizeRepeater");var b=x(da,a.inset);b.innerWidth===
ja.innerWidth&&b.innerHeight===ja.innerHeight||ub()},b);H.data.winResizeRepeater||sa()},sa=function(){var a=Number(A.resizeWithWindowMaxDelay);0<a&&H.set("winResizeRepeater",function(){sa();ub()},a)},aa=function(){L("onunload_start");f(Y,a.layout.onUnload);L("onunload_end")},ea=function(b){b=b?b.split(","):q.borderPanes;a.each(b,function(b,c){var d=A[c];if(d.enableCursorHotkey||d.customHotkey)return a(document).bind("keydown."+Sa,h),!1})},Ia=function(){function b(c){var d=A[c],e=A.panes;d.fxSettings||
(d.fxSettings={});e.fxSettings||(e.fxSettings={});a.each(["_open","_close","_size"],function(b,g){var f="fxName"+g,h="fxSpeed"+g,l="fxSettings"+g,m=d[f]=d[f]||e[f]||d.fxName||e.fxName||"none",p=a.effects&&(a.effects[m]||a.effects.effect&&a.effects.effect[m]);"none"!==m&&A.effects[m]&&p||(m=d[f]="none");m=A.effects[m]||{};f=m.all||null;m=m[c]||null;d[h]=d[h]||e[h]||d.fxSpeed||e.fxSpeed||null;d[l]=a.extend(!0,{},f,m,e.fxSettings,d.fxSettings,e[l],d[l])});delete d.fxName;delete d.fxSpeed;delete d.fxSettings}
var d,e,f,h,m,p;g=a.layout.transformData(g,!0);g=a.layout.backwardCompatibility.renameAllOptions(g);if(!a.isEmptyObject(g.panes)){d=a.layout.optionsMap.noDefault;h=0;for(m=d.length;h<m;h++)f=d[h],delete g.panes[f];d=a.layout.optionsMap.layout;h=0;for(m=d.length;h<m;h++)f=d[h],delete g.panes[f]}d=a.layout.optionsMap.layout;var r=a.layout.config.optionRootKeys;for(f in g)h=g[f],0>a.inArray(f,r)&&0>a.inArray(f,d)&&(g.panes[f]||(g.panes[f]=a.isPlainObject(h)?a.extend(!0,{},h):h),delete g[f]);a.extend(!0,
A,g);a.each(q.allPanes,function(c,h){q[h]=a.extend(!0,{},q.panes,q[h]);e=A.panes;p=A[h];if("center"===h)for(d=a.layout.optionsMap.center,c=0,m=d.length;c<m;c++)f=d[c],g.center[f]||!g.panes[f]&&p[f]||(p[f]=e[f]);else p=A[h]=a.extend(!0,{},e,p),b(h),p.resizerClass||(p.resizerClass="ui-layout-resizer"),p.togglerClass||(p.togglerClass="ui-layout-toggler");p.paneClass||(p.paneClass="ui-layout-pane")});h=g.zIndex;r=A.zIndexes;0<h&&(r.pane_normal=h,r.content_mask=c(h+1,r.content_mask),r.resizer_normal=c(h+
2,r.resizer_normal));delete A.panes},v=function(a){a=A[a].paneSelector;if("#"===a.substr(0,1))return da.find(a).eq(0);var b=da.children(a).eq(0);return b.length?b:da.children("form:first").children(a).eq(0)},Ea=function(b){B(b);a.each(q.allPanes,function(a,b){pa(b,!0)});Ka();a.each(q.borderPanes,function(a,b){ca[b]&&C[b].isVisible&&(N(b),mb(b))});xa("center");a.each(q.allPanes,function(a,b){ya(b)})},pa=function(a,d){if(d||U()){var e=A[a],g=C[a],f=q[a],h=f.dir,l="center"===a,m={},r=ca[a],y,x;r?Ra(a,
!1,!0,!1):ab[a]=!1;r=ca[a]=v(a);if(r.length){r.data("layoutCSS")||r.data("layoutCSS",z(r,"position,top,left,bottom,right,width,height,overflow,zIndex,display,backgroundColor,padding,margin,border"));Y[a]={name:a,pane:ca[a],content:ab[a],options:A[a],state:C[a],children:D[a]};r.data({parentLayout:Y,layoutPane:Y[a],layoutEdge:a,layoutRole:"pane"}).css(f.cssReq).css("zIndex",A.zIndexes.pane_normal).css(e.applyDemoStyles?f.cssDemo:{}).addClass(e.paneClass+" "+e.paneClass+"-"+a).bind("mouseenter."+Sa,
X).bind("mouseleave."+Sa,P);f={hide:"",show:"",toggle:"",close:"",open:"",slideOpen:"",slideClose:"",slideToggle:"",size:"sizePane",sizePane:"sizePane",sizeContent:"",sizeHandles:"",enableClosable:"",disableClosable:"",enableSlideable:"",disableSlideable:"",enableResizable:"",disableResizable:"",swapPanes:"swapPanes",swap:"swapPanes",move:"swapPanes",removePane:"removePane",remove:"removePane",createChildren:"",resizeChildren:"",resizeAll:"resizeAll",resizeLayout:"resizeAll"};for(x in f)r.bind("layoutpane"+
x.toLowerCase()+"."+Sa,Y[f[x]||x]);Fa(a,!1);l||(y=g.size=T(a,e.size),l=T(a,e.minSize)||1,x=T(a,e.maxSize)||1E5,0<y&&(y=c(b(y,x),l)),g.autoResize=e.autoResize,g.isClosed=!1,g.isSliding=!1,g.isResizing=!1,g.isHidden=!1,g.pins||(g.pins=[]));g.tagName=r[0].tagName;g.edge=a;g.noRoom=!1;g.isVisible=!0;ib(a);"horz"===h?m.height=u(r,y):"vert"===h&&(m.width=w(r,y));r.css(m);"horz"!=h&&xa(a,!0);C.initialized&&(Ka(a),ea(a));e.initClosed&&e.closable&&!e.initHidden?na(a,!0,!0):e.initHidden||e.initClosed?Ya(a):
g.noRoom||r.css("display","block");r.css("visibility","visible");e.showOverflowOnHover&&r.hover(p,n);C.initialized&&ya(a)}else ca[a]=!1}},ya=function(a){var b=ca[a],c=C[a],d=A[a];b&&(b.data("layout")&&W(a,b.data("layout")),c.isVisible&&(C.initialized?ub():Ja(a),d.triggerEventsOnLoad?L("onresize_end",a):Eb(a,!0)),d.initChildren&&d.children&&ma(a))},ib=function(b){b=b?b.split(","):q.borderPanes;a.each(b,function(a,b){var c=ca[b],d=va[b],e=C[b],g=q[b].side,f={};if(c){switch(b){case "north":f.top=ja.inset.top;
f.left=ja.inset.left;f.right=ja.inset.right;break;case "south":f.bottom=ja.inset.bottom;f.left=ja.inset.left;f.right=ja.inset.right;break;case "west":f.left=ja.inset.left;break;case "east":f.right=ja.inset.right}c.css(f);d&&e.isClosed?d.css(g,ja.inset[g]):d&&!e.isHidden&&d.css(g,ja.inset[g]+O(b))}})},Ka=function(b){b=b?b.split(","):q.borderPanes;a.each(b,function(b,c){var d=ca[c];va[c]=!1;Da[c]=!1;if(d){var d=A[c],e=C[c],g="#"===d.paneSelector.substr(0,1)?d.paneSelector.substr(1):"",f=d.resizerClass,
h=d.togglerClass,l="-"+c,m=Y[c],p=m.resizer=va[c]=a("<div></div>"),m=m.toggler=d.closable?Da[c]=a("<div></div>"):!1;!e.isVisible&&d.slidable&&p.attr("title",d.tips.Slide).css("cursor",d.sliderCursor);p.attr("id",g?g+"-resizer":"").data({parentLayout:Y,layoutPane:Y[c],layoutEdge:c,layoutRole:"resizer"}).css(q.resizers.cssReq).css("zIndex",A.zIndexes.resizer_normal).css(d.applyDemoStyles?q.resizers.cssDemo:{}).addClass(f+" "+f+l).hover(X,P).hover(R,K).appendTo(da);d.resizerDblClickToggle&&p.bind("dblclick."+
Sa,Wa);m&&(m.attr("id",g?g+"-toggler":"").data({parentLayout:Y,layoutPane:Y[c],layoutEdge:c,layoutRole:"toggler"}).css(q.togglers.cssReq).css(d.applyDemoStyles?q.togglers.cssDemo:{}).addClass(h+" "+h+l).hover(X,P).bind("mouseenter",R).appendTo(p),d.togglerContent_open&&a("<span>"+d.togglerContent_open+"</span>").data({layoutEdge:c,layoutRole:"togglerContent"}).data("layoutRole","togglerContent").data("layoutEdge",c).addClass("content content-open").css("display","none").appendTo(m),d.togglerContent_closed&&
a("<span>"+d.togglerContent_closed+"</span>").data({layoutEdge:c,layoutRole:"togglerContent"}).addClass("content content-closed").css("display","none").appendTo(m),Cb(c));Oa(c);e.isVisible?Ma(c):(Aa(c),eb(c,!0))}});oa()},Fa=function(a,b){if(U()){var c=A[a],d=c.contentSelector,e=Y[a],g=ca[a],f;d&&(f=e.content=ab[a]=c.findNestedContent?g.find(d).eq(0):g.children(d).eq(0));f&&f.length?(f.data("layoutRole","content"),f.data("layoutCSS")||f.data("layoutCSS",z(f,"height")),f.css(q.content.cssReq),c.applyDemoStyles&&
(f.css(q.content.cssDemo),g.css(q.content.cssDemoPane)),g.css("overflowX").match(/(scroll|auto)/)&&g.css("overflow","hidden"),C[a].content={},!1!==b&&Ja(a)):e.content=ab[a]=!1}},Oa=function(b){var c=a.layout.plugins.draggable;b=b?b.split(","):q.borderPanes;a.each(b,function(b,e){var g=A[e];if(!c||!ca[e]||!g.resizable)return g.resizable=!1,!0;var f=C[e],h=A.zIndexes,l=q[e],m="horz"==l.dir?"top":"left",p=va[e],r=g.resizerClass,n=0,t,u,y=r+"-drag",w=r+"-"+e+"-drag",x=r+"-dragging",z=r+"-"+e+"-dragging",
Y=r+"-dragging-limit",B=r+"-"+e+"-dragging-limit",G=!1;f.isClosed||p.attr("title",g.tips.Resize).css("cursor",g.resizerCursor);p.draggable({containment:da[0],axis:"horz"==l.dir?"y":"x",delay:0,distance:1,grid:g.resizingGrid,helper:"clone",opacity:g.resizerDragOpacity,addClasses:!1,zIndex:h.resizer_drag,start:function(b,c){g=A[e];f=C[e];u=g.livePaneResizing;if(!1===L("ondrag_start",e))return!1;f.isResizing=!0;C.paneResizing=e;H.clear(e+"_closeSlider");N(e);t=f.resizerPosition;n=c.position[m];p.addClass(y+
" "+w);G=!1;a("body").disableSelection();qb(e,{resizing:!0})},drag:function(a,b){G||(b.helper.addClass(x+" "+z).css({right:"auto",bottom:"auto"}).children().css("visibility","hidden"),G=!0,f.isSliding&&ca[e].css("zIndex",h.pane_sliding));var c=0;b.position[m]<t.min?(b.position[m]=t.min,c=-1):b.position[m]>t.max&&(b.position[m]=t.max,c=1);c?(b.helper.addClass(Y+" "+B),window.defaultStatus=0<c&&e.match(/(north|west)/)||0>c&&e.match(/(south|east)/)?g.tips.maxSizeWarning:g.tips.minSizeWarning):(b.helper.removeClass(Y+
" "+B),window.defaultStatus="");u&&Math.abs(b.position[m]-n)>=g.liveResizingTolerance&&(n=b.position[m],d(a,b,e))},stop:function(b,c){a("body").enableSelection();window.defaultStatus="";p.removeClass(y+" "+w);f.isResizing=!1;C.paneResizing=!1;d(b,c,e,!0)}})});var d=function(a,b,c,d){var e=b.position,g=q[c];a=A[c];b=C[c];var f;switch(c){case "north":f=e.top;break;case "west":f=e.left;break;case "south":f=ja.layoutHeight-e.top-a.spacing_open;break;case "east":f=ja.layoutWidth-e.left-a.spacing_open}f-=
ja.inset[g.side];d?(!1!==L("ondrag_end",c)&&ka(c,f,!1,!0),Xa(!0),b.isSliding&&qb(c,{resizing:!0})):Math.abs(f-b.size)<a.liveResizingTolerance||(ka(c,f,!1,!0),Ta.each(pb))}},pb=function(){var b=a(this),c=b.data("layoutMask"),c=C[c];"IFRAME"==c.tagName&&c.isVisible&&b.css({top:c.offsetTop,left:c.offsetLeft,width:c.outerWidth,height:c.outerHeight})},qb=function(b,c){var d=q[b],e=["center"],g=A.zIndexes,f=a.extend({objectsOnly:!1,animation:!1,resizing:!0,sliding:C[b].isSliding},c),h,l;f.resizing&&e.push(b);
f.sliding&&e.push(q.oppositeEdge[b]);"horz"===d.dir&&(e.push("west"),e.push("east"));a.each(e,function(a,b){l=C[b];h=A[b];l.isVisible&&(h.maskObjects||!f.objectsOnly&&h.maskContents)&&Ca(b).each(function(){pb.call(this);this.style.zIndex=l.isSliding?g.pane_sliding+1:g.pane_normal+1;this.style.display="block"})})},Xa=function(b){if(b||!C.paneResizing)Ta.hide();else if(!b&&!a.isEmptyObject(C.panesSliding)){b=Ta.length-1;for(var c,d;0<=b;b--)d=Ta.eq(b),c=d.data("layoutMask"),A[c].maskObjects||d.hide()}},
Ca=function(b){for(var c=a([]),d,e=0,g=Ta.length;e<g;e++)d=Ta.eq(e),d.data("layoutMask")===b&&(c=c.add(d));if(c.length)return c;c=ca[b];d=C[b];var e=A[b],g=A.zIndexes,f=a([]),h,l,m,p,q;if(e.maskContents||e.maskObjects)for(q=0;q<(e.maskObjects?2:1);q++)h=e.maskObjects&&0==q,l=document.createElement(h?"iframe":"div"),m=a(l).data("layoutMask",b),l.className="ui-layout-mask ui-layout-mask-"+b,p=l.style,p.display="block",p.position="absolute",p.background="#FFF",h&&(l.frameborder=0,l.src="about:blank",
p.opacity=0,p.filter="Alpha(Opacity='0')",p.border=0),"IFRAME"==d.tagName?(p.zIndex=g.pane_normal+1,da.append(l)):(m.addClass("ui-layout-mask-inside-pane"),p.zIndex=e.maskZindex||g.content_mask,p.top=0,p.left=0,p.width="100%",p.height="100%",c.append(l)),f=f.add(l),Ta=Ta.add(l);return f},Ra=function(b,c,d,e){if(U()){b=B.call(this,b);var g=ca[b],f=ab[b],h=va[b],l=Da[b];g&&a.isEmptyObject(g.data())&&(g=!1);f&&a.isEmptyObject(f.data())&&(f=!1);h&&a.isEmptyObject(h.data())&&(h=!1);l&&a.isEmptyObject(l.data())&&
(l=!1);g&&g.stop(!0,!0);var m=A[b],p=D[b],q=a.isPlainObject(p)&&!a.isEmptyObject(p);e=void 0!==e?e:m.destroyChildren;q&&e&&(a.each(p,function(a,b){b.destroyed||b.destroy(!0);b.destroyed&&delete p[a]}),a.isEmptyObject(p)&&(p=D[b]=null,q=!1));g&&c&&!q?g.remove():g&&g[0]&&(c=m.paneClass,e=c+"-"+b,c=[c,c+"-open",c+"-closed",c+"-sliding",e,e+"-open",e+"-closed",e+"-sliding"],a.merge(c,Z(g,!0)),g.removeClass(c.join(" ")).removeData("parentLayout").removeData("layoutPane").removeData("layoutRole").removeData("layoutEdge").removeData("autoHidden").unbind("."+
Sa),q&&f?(f.width(f.width()),a.each(p,function(a,b){b.resizeAll()})):f&&f.css(f.data("layoutCSS")).removeData("layoutCSS").removeData("layoutRole"),g.data("layout")||g.css(g.data("layoutCSS")).removeData("layoutCSS"));l&&l.remove();h&&h.remove();Y[b]=ca[b]=ab[b]=va[b]=Da[b]=!1;d||ub()}},Va=function(a){var b=ca[a],c=b[0].style;A[a].useOffscreenClose?(b.data(q.offscreenReset)||b.data(q.offscreenReset,{left:c.left,right:c.right}),b.css(q.offscreenCSS)):b.hide().removeData(q.offscreenReset)},sb=function(a){var b=
ca[a];a=A[a];var c=q.offscreenCSS,d=b.data(q.offscreenReset),e=b[0].style;b.show().removeData(q.offscreenReset);a.useOffscreenClose&&d&&(e.left==c.left&&(e.left=d.left),e.right==c.right&&(e.right=d.right))},Ya=function(a,b){if(U()){var c=B.call(this,a),d=A[c],e=C[c],g=va[c];!ca[c]||e.isHidden||C.initialized&&!1===L("onhide_start",c)||(e.isSliding=!1,delete C.panesSliding[c],g&&g.hide(),!C.initialized||e.isClosed?(e.isClosed=!0,e.isHidden=!0,e.isVisible=!1,C.initialized||Va(c),xa("horz"===q[c].dir?
"":"center"),(C.initialized||d.triggerEventsOnLoad)&&L("onhide_end",c)):(e.isHiding=!0,na(c,!1,b)))}},cb=function(a,b,c,d){if(U()){a=B.call(this,a);var e=C[a];ca[a]&&e.isHidden&&!1!==L("onshow_start",a)&&(e.isShowing=!0,e.isSliding=!1,delete C.panesSliding[a],!1===b?na(a,!0):db(a,!1,c,d))}},Wa=function(a,b){if(U()){var c=y(a),d=B.call(this,a),e=C[d];c&&c.stopImmediatePropagation();e.isHidden?cb(d):e.isClosed?db(d,!!b):na(d)}},Na=function(a,b){var c=C[a];Va(a);c.isClosed=!0;c.isVisible=!1;b&&Aa(a)},
na=function(a,b,c,d){function e(){l.isMoving=!1;eb(g,!0);var a=q.oppositeEdge[g];C[a].noRoom&&(N(a),mb(a));d||!C.initialized&&!h.triggerEventsOnLoad||(p||L("onclose_end",g),p&&L("onshow_end",g),r&&L("onhide_end",g))}var g=B.call(this,a);if(!C.initialized&&ca[g])Na(g,!0);else if(U()){var f=ca[g],h=A[g],l=C[g],m,p,r;da.queue(function(a){if(!f||!h.closable&&!l.isShowing&&!l.isHiding||!b&&l.isClosed&&!l.isShowing)return a();var d=!l.isShowing&&!1===L("onclose_start",g);p=l.isShowing;r=l.isHiding;delete l.isShowing;
delete l.isHiding;if(d)return a();m=!c&&!l.isClosed&&"none"!=h.fxName_close;l.isMoving=!0;l.isClosed=!0;l.isVisible=!1;r?l.isHidden=!0:p&&(l.isHidden=!1);l.isSliding?jb(g,!1):xa("horz"===q[g].dir?"":"center",!1);Aa(g);m?(Kb(g,!0),f.hide(h.fxName_close,h.fxSettings_close,h.fxSpeed_close,function(){Kb(g,!1);l.isClosed&&e();a()})):(Va(g),e(),a())})}},Aa=function(b){if(va[b]){var c=va[b],d=Da[b],e=A[b],g=q[b].side,f=e.resizerClass,h=e.togglerClass,l="-"+b;c.css(g,ja.inset[g]).removeClass(f+"-open "+f+
l+"-open").removeClass(f+"-sliding "+f+l+"-sliding").addClass(f+"-closed "+f+l+"-closed");e.resizable&&a.layout.plugins.draggable&&c.draggable("disable").removeClass("ui-state-disabled").css("cursor","default").attr("title","");d&&(d.removeClass(h+"-open "+h+l+"-open").addClass(h+"-closed "+h+l+"-closed").attr("title",e.tips.Open),d.children(".content-open").hide(),d.children(".content-closed").css("display","block"));Nb(b,!1);C.initialized&&oa()}},db=function(a,b,c,d){function e(){l.isMoving=!1;
J(g);l.isSliding||xa("vert"==q[g].dir?"center":"",!1);Ma(g)}if(U()){var g=B.call(this,a),f=ca[g],h=A[g],l=C[g],m,p;da.queue(function(a){if(!f||!h.resizable&&!h.closable&&!l.isShowing||l.isVisible&&!l.isSliding)return a();if(l.isHidden&&!l.isShowing)a(),cb(g,!0);else{l.autoResize&&l.size!=h.size?Za(g,h.size,!0,!0,!0):N(g,b);var q=L("onopen_start",g);if("abort"===q)return a();"NC"!==q&&N(g,b);if(l.minSize>l.maxSize)return Nb(g,!1),!d&&h.tips.noRoomToOpen&&alert(h.tips.noRoomToOpen),a();b?jb(g,!0):l.isSliding?
jb(g,!1):h.slidable&&eb(g,!1);l.noRoom=!1;mb(g);p=l.isShowing;delete l.isShowing;m=!c&&l.isClosed&&"none"!=h.fxName_open;l.isMoving=!0;l.isVisible=!0;l.isClosed=!1;p&&(l.isHidden=!1);m?(Kb(g,!0),f.show(h.fxName_open,h.fxSettings_open,h.fxSpeed_open,function(){Kb(g,!1);l.isVisible&&e();a()})):(sb(g),e(),a())}})}},Ma=function(b,c){var d=ca[b],e=va[b],g=Da[b],f=A[b],h=C[b],l=q[b].side,m=f.resizerClass,p=f.togglerClass,r="-"+b;e.css(l,ja.inset[l]+O(b)).removeClass(m+"-closed "+m+r+"-closed").addClass(m+
"-open "+m+r+"-open");h.isSliding?e.addClass(m+"-sliding "+m+r+"-sliding"):e.removeClass(m+"-sliding "+m+r+"-sliding");P(0,e);f.resizable&&a.layout.plugins.draggable?e.draggable("enable").css("cursor",f.resizerCursor).attr("title",f.tips.Resize):h.isSliding||e.css("cursor","default");g&&(g.removeClass(p+"-closed "+p+r+"-closed").addClass(p+"-open "+p+r+"-open").attr("title",f.tips.Close),P(0,g),g.children(".content-closed").hide(),g.children(".content-open").css("display","block"));Nb(b,!h.isSliding);
a.extend(h,x(d));C.initialized&&(oa(),Ja(b,!0));!c&&(C.initialized||f.triggerEventsOnLoad)&&d.is(":visible")&&(L("onopen_end",b),h.isShowing&&L("onshow_end",b),C.initialized&&L("onresize_end",b))},Pa=function(a){function b(){e.isClosed?e.isMoving||db(d,!0):jb(d,!0)}if(U()){var c=y(a),d=B.call(this,a),e=C[d];a=A[d].slideDelay_open;c&&c.stopImmediatePropagation();e.isClosed&&c&&"mouseenter"===c.type&&0<a?H.set(d+"_openSlider",b,a):b()}},qa=function(b){function d(){f.isClosed?jb(g,!1):f.isMoving||na(g)}
if(U()){var e=y(b),g=B.call(this,b);b=A[g];var f=C[g],h=f.isMoving?1E3:300;f.isClosed||f.isResizing||("click"===b.slideTrigger_close?d():b.preventQuickSlideClose&&f.isMoving||b.preventPrematureSlideClose&&e&&a.layout.isMouseOverElem(e,ca[g])||(e?H.set(g+"_closeSlider",d,c(b.slideDelay_close,h)):d()))}},Kb=function(a,b){var c=ca[a],d=C[a],e=A[a],g=A.zIndexes;b?(qb(a,{animation:!0,objectsOnly:!0}),c.css({zIndex:g.pane_animate}),"south"==a?c.css({top:ja.inset.top+ja.innerHeight-c.outerHeight()}):"east"==
a&&c.css({left:ja.inset.left+ja.innerWidth-c.outerWidth()})):(Xa(),c.css({zIndex:d.isSliding?g.pane_sliding:g.pane_normal}),"south"==a?c.css({top:"auto"}):"east"!=a||c.css("left").match(/\-99999/)||c.css({left:"auto"}),r.msie&&e.fxOpacityFix&&"slide"!=e.fxName_open&&c.css("filter")&&1==c.css("opacity")&&c[0].style.removeAttribute("filter"))},eb=function(a,b){var c=A[a],d=va[a],e=c.slideTrigger_open.toLowerCase();if(d&&(!b||c.slidable)){e.match(/mouseover/)?e=c.slideTrigger_open="mouseenter":e.match(/(click|dblclick|mouseenter)/)||
(e=c.slideTrigger_open="click");if(c.resizerDblClickToggle&&e.match(/click/))d[b?"unbind":"bind"]("dblclick."+Sa,Wa);d[b?"bind":"unbind"](e+"."+Sa,Pa).css("cursor",b?c.sliderCursor:"default").attr("title",b?c.tips.Slide:"")}},jb=function(a,b){function c(b){H.clear(a+"_closeSlider");b.stopPropagation()}var d=A[a],e=C[a],g=A.zIndexes,f=d.slideTrigger_close.toLowerCase(),h=b?"bind":"unbind",l=ca[a],m=va[a];H.clear(a+"_closeSlider");b?(e.isSliding=!0,C.panesSliding[a]=!0,eb(a,!1)):(e.isSliding=!1,delete C.panesSliding[a]);
l.css("zIndex",b?g.pane_sliding:g.pane_normal);m.css("zIndex",b?g.pane_sliding+2:g.resizer_normal);f.match(/(click|mouseleave)/)||(f=d.slideTrigger_close="mouseleave");m[h](f,qa);"mouseleave"===f&&(l[h]("mouseleave."+Sa,qa),m[h]("mouseenter."+Sa,c),l[h]("mouseenter."+Sa,c));b?"click"!==f||d.resizable||(m.css("cursor",b?d.sliderCursor:"default"),m.attr("title",b?d.tips.Close:"")):H.clear(a+"_closeSlider")},mb=function(b,c,d,e){c=A[b];var g=C[b],f=q[b],h=ca[b],l=va[b],m="vert"===f.dir,p=!1;if("center"===
b||m&&g.noVerticalRoom)(p=0<=g.maxHeight)&&g.noRoom?(sb(b),l&&l.show(),g.isVisible=!0,g.noRoom=!1,m&&(g.noVerticalRoom=!1),J(b)):p||g.noRoom||(Va(b),l&&l.hide(),g.isVisible=!1,g.noRoom=!0);"center"!==b&&(g.minSize<=g.maxSize?(g.size>g.maxSize?Za(b,g.maxSize,d,!0,e):g.size<g.minSize?Za(b,g.minSize,d,!0,e):l&&g.isVisible&&h.is(":visible")&&(d=g.size+ja.inset[f.side],a.layout.cssNum(l,f.side)!=d&&l.css(f.side,d)),g.noRoom&&(g.wasOpen&&c.closable?c.autoReopen?db(b,!1,!0,!0):g.noRoom=!1:cb(b,g.wasOpen,
!0,!0))):g.noRoom||(g.noRoom=!0,g.wasOpen=!g.isClosed&&!g.isSliding,g.isClosed||(c.closable?na(b,!0,!0):Ya(b,!0))))},ka=function(a,b,c,d,e){if(U()){a=B.call(this,a);var g=A[a],f=C[a];e=e||g.livePaneResizing&&!f.isResizing;f.autoResize=!1;Za(a,b,c,d,e)}},Za=function(d,e,g,f,h){function l(){for(var b="width"===z?n.outerWidth():n.outerHeight(),b=[{pane:m,count:1,target:e,actual:b,correct:e===b,attempt:e,cssSize:v}],d=b[0],f={},p="Inaccurate size after resizing the "+m+"-pane.";!d.correct;){f={pane:m,
count:d.count+1,target:e};f.attempt=d.actual>e?c(0,d.attempt-(d.actual-e)):c(0,d.attempt+(e-d.actual));f.cssSize=("horz"==q[m].dir?u:w)(ca[m],f.attempt);n.css(z,f.cssSize);f.actual="width"==z?n.outerWidth():n.outerHeight();f.correct=e===f.actual;1===b.length&&(G(p,!1,!0),G(d,!1,!0));G(f,!1,!0);if(3<b.length)break;b.push(f);d=b[b.length-1]}r.size=e;a.extend(r,x(n));r.isVisible&&n.is(":visible")&&(t&&t.css(y,e+ja.inset[y]),Ja(m));!g&&!Y&&C.initialized&&r.isVisible&&L("onresize_end",m);g||(r.isSliding||
xa("horz"==q[m].dir?"":"center",Y,h),oa());d=q.oppositeEdge[m];e<J&&C[d].noRoom&&(N(d),mb(d,!1,g));1<b.length&&G(p+"\nSee the Error Console for details.",!0,!0)}if(U()){var m=B.call(this,d),p=A[m],r=C[m],n=ca[m],t=va[m],y=q[m].side,z=q[m].sizeType.toLowerCase(),Y=r.isResizing&&!p.triggerEventsDuringLiveResize,D=!0!==f&&p.animatePaneSizing,J,v;da.queue(function(d){N(m);J=r.size;e=T(m,e);e=c(e,T(m,p.minSize));e=b(e,r.maxSize);if(e<r.minSize)d(),mb(m,!1,g);else{if(!h&&e===J)return d();r.newSize=e;!g&&
C.initialized&&r.isVisible&&L("onresize_start",m);v=("horz"==q[m].dir?u:w)(ca[m],e);if(D&&n.is(":visible")){var f=a.layout.effects.size[m]||a.layout.effects.size.all,f=p.fxSettings_size.easing||f.easing,t=A.zIndexes,y={};y[z]=v+"px";r.isMoving=!0;n.css({zIndex:t.pane_animate}).show().animate(y,p.fxSpeed_size,f,function(){n.css({zIndex:r.isSliding?t.pane_sliding:t.pane_normal});r.isMoving=!1;delete r.newSize;l();d()})}else n.css(z,v),delete r.newSize,n.is(":visible")?l():(r.size=e,a.extend(r,x(n))),
d()}})}},xa=function(b,d,e){b=(b?b:"east,west,center").split(",");a.each(b,function(b,g){if(ca[g]){var f=A[g],h=C[g],l=ca[g],m=!0,p={},q=a.layout.showInvisibly(l),n={top:O("north",!0),bottom:O("south",!0),left:O("west",!0),right:O("east",!0),width:0,height:0};n.width=ja.innerWidth-n.left-n.right;n.height=ja.innerHeight-n.bottom-n.top;n.top+=ja.inset.top;n.bottom+=ja.inset.bottom;n.left+=ja.inset.left;n.right+=ja.inset.right;a.extend(h,x(l));if("center"===g){if(!e&&h.isVisible&&n.width===h.outerWidth&&
n.height===h.outerHeight)return l.css(q),!0;a.extend(h,M(g),{maxWidth:n.width,maxHeight:n.height});p=n;h.newWidth=p.width;h.newHeight=p.height;p.width=w(l,p.width);p.height=u(l,p.height);m=0<=p.width&&0<=p.height;if(!C.initialized&&f.minWidth>n.width){var f=f.minWidth-h.outerWidth,n=A.east.minSize||0,t=A.west.minSize||0,y=C.east.size,z=C.west.size,Y=y,B=z;0<f&&C.east.isVisible&&y>n&&(Y=c(y-n,y-f),f-=y-Y);0<f&&C.west.isVisible&&z>t&&(B=c(z-t,z-f),f-=z-B);if(0===f){y&&y!=n&&Za("east",Y,!0,!0,e);z&&
z!=t&&Za("west",B,!0,!0,e);xa("center",d,e);l.css(q);return}}}else{h.isVisible&&!h.noVerticalRoom&&a.extend(h,x(l),M(g));if(!e&&!h.noVerticalRoom&&n.height===h.outerHeight)return l.css(q),!0;p.top=n.top;p.bottom=n.bottom;h.newSize=n.height;p.height=u(l,n.height);h.maxHeight=p.height;m=0<=h.maxHeight;m||(h.noVerticalRoom=!0)}m?(!d&&C.initialized&&L("onresize_start",g),l.css(p),"center"!==g&&oa(g),!h.noRoom||h.isClosed||h.isHidden||mb(g),h.isVisible&&(a.extend(h,x(l)),C.initialized&&Ja(g))):!h.noRoom&&
h.isVisible&&mb(g);l.css(q);delete h.newSize;delete h.newWidth;delete h.newHeight;if(!h.isVisible)return!0;"center"===g&&(h=r.isIE6||!r.boxModel,ca.north&&(h||"IFRAME"==C.north.tagName)&&ca.north.css("width",w(ca.north,ja.innerWidth)),ca.south&&(h||"IFRAME"==C.south.tagName)&&ca.south.css("width",w(ca.south,ja.innerWidth)));!d&&C.initialized&&L("onresize_end",g)}})},ub=function(b){B(b);if(da.is(":visible"))if(C.initialized){if(!0===b&&a.isPlainObject(A.outset)&&da.css(A.outset),a.extend(ja,x(da,A.inset)),
ja.outerHeight){!0===b&&ib();if(!1===L("onresizeall_start"))return!1;var c,d,e;a.each(["south","north","east","west"],function(a,b){ca[b]&&(d=A[b],e=C[b],e.autoResize&&e.size!=d.size?Za(b,d.size,!0,!0,!0):(N(b),mb(b,!1,!0,!0)))});xa("",!0,!0);oa();a.each(q.allPanes,function(a,b){(c=ca[b])&&C[b].isVisible&&L("onresize_end",b)});L("onresizeall_end")}}else Q()},Eb=function(b,c){var d=B.call(this,b);A[d].resizeChildren&&(c||W(d),d=D[d],a.isPlainObject(d)&&a.each(d,function(a,b){b.destroyed||b.resizeAll()}))},
Ja=function(b,d){if(U()){var e=B.call(this,b),e=e?e.split(","):q.allPanes;a.each(e,function(a,b){function e(a){return c(m.css.paddingBottom,parseInt(a.css("marginBottom"),10)||0)}function g(){var a=A[b].contentIgnoreSelector,a=h.nextAll().not(".ui-layout-mask").not(a||":lt(0)"),c=a.filter(":visible"),d=c.filter(":last");p={top:h[0].offsetTop,height:h.outerHeight(),numFooters:a.length,hiddenFooters:a.length-c.length,spaceBelow:0};p.spaceAbove=p.top;p.bottom=p.top+p.height;p.spaceBelow=d.length?d[0].offsetTop+
d.outerHeight()-p.bottom+e(d):e(h)}var f=ca[b],h=ab[b],l=A[b],m=C[b],p=m.content;if(!f||!h||!f.is(":visible"))return!0;if(!h.length&&(Fa(b,!1),!h))return;if(!1!==L("onsizecontent_start",b)){if(!m.isMoving&&!m.isResizing||l.liveContentResizing||d||void 0==p.top)g(),0<p.hiddenFooters&&"hidden"===f.css("overflow")&&(f.css("overflow","visible"),g(),f.css("overflow","hidden"));f=m.innerHeight-(p.spaceAbove-m.css.paddingTop)-(p.spaceBelow-m.css.paddingBottom);h.is(":visible")&&p.height==f||(V(h,f,!0),p.height=
f);C.initialized&&L("onsizecontent_end",b)}})}},oa=function(b){b=(b=B.call(this,b))?b.split(","):q.borderPanes;a.each(b,function(b,c){var g=A[c],f=C[c],h=ca[c],l=va[c],m=Da[c],p;if(h&&l){var r=q[c].dir,n=f.isClosed?"_closed":"_open",t=g["spacing"+n],y=g["togglerAlign"+n],n=g["togglerLength"+n],x;if(0===t)l.hide();else{f.noRoom||f.isHidden||l.show();"horz"===r?(x=ja.innerWidth,f.resizerLength=x,h=a.layout.cssNum(h,"left"),l.css({width:w(l,x),height:u(l,t),left:-9999<h?h:ja.inset.left})):(x=h.outerHeight(),
f.resizerLength=x,l.css({height:u(l,x),width:w(l,t),top:ja.inset.top+O("north",!0)}));P(g,l);if(m){if(0===n||f.isSliding&&g.hideTogglerOnSlide){m.hide();return}m.show();if(!(0<n)||"100%"===n||n>x)n=x,y=0;else if(d(y))switch(y){case "top":case "left":y=0;break;case "bottom":case "right":y=x-n;break;default:y=e((x-n)/2)}else h=parseInt(y,10),y=0<=y?h:x-n+h;if("horz"===r){var z=w(m,n);m.css({width:z,height:u(m,t),left:y,top:0});m.children(".content").each(function(){p=a(this);p.css("marginLeft",e((z-
p.outerWidth())/2))})}else{var Y=u(m,n);m.css({height:Y,width:w(m,t),top:y,left:0});m.children(".content").each(function(){p=a(this);p.css("marginTop",e((Y-p.outerHeight())/2))})}P(0,m)}C.initialized||!g.initHidden&&!f.isHidden||(l.hide(),m&&m.hide())}}})},Cb=function(a){if(U()){var b=B.call(this,a);a=Da[b];var c=A[b];a&&(c.closable=!0,a.bind("click."+Sa,function(a){a.stopPropagation();Wa(b)}).css("visibility","visible").css("cursor","pointer").attr("title",C[b].isClosed?c.tips.Open:c.tips.Close).show())}},
Nb=function(b,c){a.layout.plugins.buttons&&a.each(C[b].pins,function(d,e){a.layout.buttons.setPinState(Y,a(e),b,c)})},da=a(this).eq(0);if(!da.length)return G(A.errors.containerMissing);if(da.data("layoutContainer")&&da.data("layout"))return da.data("layout");var ca={},ab={},va={},Da={},Ta=a([]),ja=C.container,Sa=C.id,Y={options:A,state:C,container:da,panes:ca,contents:ab,resizers:va,togglers:Da,hide:Ya,show:cb,toggle:Wa,open:db,close:na,slideOpen:Pa,slideClose:qa,slideToggle:function(a){a=B.call(this,
a);Wa(a,!0)},setSizeLimits:N,_sizePane:Za,sizePane:ka,sizeContent:Ja,swapPanes:function(b,d){function e(b){var c=ca[b],d=ab[b];return c?{pane:b,P:c?c[0]:!1,C:d?d[0]:!1,state:a.extend(!0,{},C[b]),options:a.extend(!0,{},A[b])}:!1}function g(b,d){if(b){var e=b.P,f=b.C,h=b.pane,l=q[d],p=a.extend(!0,{},C[d]),r=A[d],n={resizerCursor:r.resizerCursor};a.each(["fxName","fxSpeed","fxSettings"],function(a,b){n[b+"_open"]=r[b+"_open"];n[b+"_close"]=r[b+"_close"];n[b+"_size"]=r[b+"_size"]});ca[d]=a(e).data({layoutPane:Y[d],
layoutEdge:d}).css(q.hidden).css(l.cssReq);ab[d]=f?a(f):!1;A[d]=a.extend(!0,{},b.options,n);C[d]=a.extend(!0,{},b.state);e.className=e.className.replace(new RegExp(r.paneClass+"-"+h,"g"),r.paneClass+"-"+d);Ka(d);l.dir!=q[h].dir?(e=m[d]||0,N(d),e=c(e,C[d].minSize),ka(d,e,!0,!0)):va[d].css(l.side,ja.inset[l.side]+(C[d].isVisible?O(d):0));b.state.isVisible&&!p.isVisible?Ma(d,!0):(Aa(d),eb(d,!0));b=null}}if(U()){var f=B.call(this,b);C[f].edge=d;C[d].edge=f;if(!1===L("onswap_start",f)||!1===L("onswap_start",
d))C[f].edge=f,C[d].edge=d;else{var h=e(f),l=e(d),m={};m[f]=h?h.state.size:0;m[d]=l?l.state.size:0;ca[f]=!1;ca[d]=!1;C[f]={};C[d]={};Da[f]&&Da[f].remove();Da[d]&&Da[d].remove();va[f]&&va[f].remove();va[d]&&va[d].remove();va[f]=va[d]=Da[f]=Da[d]=!1;g(h,d);g(l,f);h=l=m=null;ca[f]&&ca[f].css(q.visible);ca[d]&&ca[d].css(q.visible);ub();L("onswap_end",f);L("onswap_end",d)}}},showMasks:qb,hideMasks:Xa,initContent:Fa,addPane:pa,removePane:Ra,createChildren:ma,refreshChildren:W,enableClosable:Cb,disableClosable:function(a,
b){if(U()){var c=B.call(this,a),d=Da[c];d&&(A[c].closable=!1,C[c].isClosed&&db(c,!1,!0),d.unbind("."+Sa).css("visibility",b?"hidden":"visible").css("cursor","default").attr("title",""))}},enableSlidable:function(a){if(U()){a=B.call(this,a);var b=va[a];b&&b.data("draggable")&&(A[a].slidable=!0,C[a].isClosed&&eb(a,!0))}},disableSlidable:function(a){if(U()){a=B.call(this,a);var b=va[a];b&&(A[a].slidable=!1,C[a].isSliding?na(a,!1,!0):(eb(a,!1),b.css("cursor","default").attr("title",""),P(null,b[0])))}},
enableResizable:function(a){if(U()){a=B.call(this,a);var b=va[a],c=A[a];b&&b.data("draggable")&&(c.resizable=!0,b.draggable("enable"),C[a].isClosed||b.css("cursor",c.resizerCursor).attr("title",c.tips.Resize))}},disableResizable:function(a){if(U()){a=B.call(this,a);var b=va[a];b&&b.data("draggable")&&(A[a].resizable=!1,b.draggable("disable").css("cursor","default").attr("title",""),P(null,b[0]))}},allowOverflow:p,resetOverflow:n,destroy:function(b,c){a(window).unbind("."+Sa);a(document).unbind("."+
Sa);"object"===typeof b?B(b):c=b;da.clearQueue().removeData("layout").removeData("layoutContainer").removeClass(A.containerClass).unbind("."+Sa);Ta.remove();a.each(q.allPanes,function(a,b){Ra(b,!1,!0,c)});da.data("layoutCSS")&&!da.data("layoutRole")&&da.css(da.data("layoutCSS")).removeData("layoutCSS");"BODY"===ja.tagName&&(da=a("html")).data("layoutCSS")&&da.css(da.data("layoutCSS")).removeData("layoutCSS");f(Y,a.layout.onDestroy);aa();for(var d in Y)d.match(/^(container|options)$/)||delete Y[d];
Y.destroyed=!0;return Y},initPanes:U,resizeAll:ub,runCallbacks:L,hasParentLayout:!1,children:D,north:!1,south:!1,west:!1,east:!1,center:!1};return"cancel"===function(){Ia();var b=A,c=C;c.creatingLayout=!0;f(Y,a.layout.onCreate);if(!1===L("onload_start"))return"cancel";var d=da[0],e=a("html"),g=ja.tagName=d.tagName,h=ja.id=d.id,l=ja.className=d.className,d=A,m=d.name,p={},q=da.data("parentLayout"),n=da.data("layoutEdge"),t=q&&n,u=a.layout.cssNum,y;ja.selector=da.selector.split(".slice")[0];ja.ref=
(d.name?d.name+" layout / ":"")+g+(h?"#"+h:l?".["+l+"]":"");ja.isBody="BODY"===g;t||ja.isBody||(g=da.closest("."+a.layout.defaults.panes.paneClass),q=g.data("parentLayout"),n=g.data("layoutEdge"),t=q&&n);da.data({layout:Y,layoutContainer:Sa}).addClass(d.containerClass);g={destroy:"",initPanes:"",resizeAll:"resizeAll",resize:"resizeAll"};for(m in g)da.bind("layout"+m.toLowerCase()+"."+Sa,Y[g[m]||m]);t&&(Y.hasParentLayout=!0,q.refreshChildren(n,Y));da.data("layoutCSS")||(ja.isBody?(da.data("layoutCSS",
a.extend(z(da,"position,margin,padding,border"),{height:da.css("height"),overflow:da.css("overflow"),overflowX:da.css("overflowX"),overflowY:da.css("overflowY")})),e.data("layoutCSS",a.extend(z(e,"padding"),{height:"auto",overflow:e.css("overflow"),overflowX:e.css("overflowX"),overflowY:e.css("overflowY")}))):da.data("layoutCSS",z(da,"position,margin,padding,border,top,bottom,left,right,width,height,overflow,overflowX,overflowY")));try{p={overflow:"hidden",overflowX:"hidden",overflowY:"hidden"};da.css(p);
d.inset&&!a.isPlainObject(d.inset)&&(y=parseInt(d.inset,10)||0,d.inset={top:y,bottom:y,left:y,right:y});if(ja.isBody)d.outset?a.isPlainObject(d.outset)||(y=parseInt(d.outset,10)||0,d.outset={top:y,bottom:y,left:y,right:y}):d.outset={top:u(e,"paddingTop"),bottom:u(e,"paddingBottom"),left:u(e,"paddingLeft"),right:u(e,"paddingRight")},e.css(p).css({height:"100%",border:"none",padding:0,margin:0}),r.isIE6?(da.css({width:"100%",height:"100%",border:"none",padding:0,margin:0,position:"relative"}),d.inset||
(d.inset=x(da).inset)):(da.css({width:"auto",height:"auto",margin:0,position:"absolute"}),da.css(d.outset)),a.extend(ja,x(da,d.inset));else{var w=da.css("position");w&&w.match(/(fixed|absolute|relative)/)||da.css("position","relative");da.is(":visible")&&(a.extend(ja,x(da,d.inset)),1>ja.innerHeight&&G(d.errors.noContainerHeight.replace(/CONTAINER/,ja.ref)))}u(da,"minWidth")&&da.parent().css("overflowX","auto");u(da,"minHeight")&&da.parent().css("overflowY","auto")}catch(B){}ea();a(window).bind("unload."+
Sa,aa);f(Y,a.layout.onLoad);b.initPanes&&Q();delete c.creatingLayout;return C.initialized}()?null:Y}})(jQuery);
(function(a){a.ui||(a.ui={});a.ui.cookie={acceptsCookies:!!navigator.cookieEnabled,read:function(b){for(var c=document.cookie,c=c?c.split(";"):[],e,d=0,f=c.length;d<f;d++)if(e=a.trim(c[d]).split("="),e[0]==b)return decodeURIComponent(e[1]);return null},write:function(b,c,e){var d="",f="",n=!1;e=e||{};var h=e.expires||null,g=a.type(h);"date"===g?f=h:"string"===g&&0<h&&(h=parseInt(h,10),g="number");"number"===g&&(f=new Date,0<h?f.setDate(f.getDate()+h):(f.setFullYear(1970),n=!0));f&&(d+=";expires="+
f.toUTCString());e.path&&(d+=";path="+e.path);e.domain&&(d+=";domain="+e.domain);e.secure&&(d+=";secure");document.cookie=b+"="+(n?"":encodeURIComponent(c))+d},clear:function(b){a.ui.cookie.write(b,"",{expires:-1})}};a.cookie||(a.cookie=function(b,c,e){var d=a.ui.cookie;if(null===c)d.clear(b);else{if(void 0===c)return d.read(b);d.write(b,c,e)}});a.layout.plugins.stateManagement=!0;a.layout.config.optionRootKeys.push("stateManagement");a.layout.defaults.stateManagement={enabled:!1,autoSave:!0,autoLoad:!0,
animateLoad:!0,includeChildren:!0,stateKeys:"north.size,south.size,east.size,west.size,north.isClosed,south.isClosed,east.isClosed,west.isClosed,north.isHidden,south.isHidden,east.isHidden,west.isHidden",cookie:{name:"",domain:"",path:"",expires:"",secure:!1}};a.layout.optionsMap.layout.push("stateManagement");a.layout.state={saveCookie:function(b,c,e){var d=b.options,f=d.stateManagement;e=a.extend(!0,{},f.cookie,e||null);b=b.state.stateData=b.readState(c||f.stateKeys);a.ui.cookie.write(e.name||d.name||
"Layout",a.layout.state.encodeJSON(b),e);return a.extend(!0,{},b)},deleteCookie:function(b){b=b.options;a.ui.cookie.clear(b.stateManagement.cookie.name||b.name||"Layout")},readCookie:function(b){b=b.options;return(b=a.ui.cookie.read(b.stateManagement.cookie.name||b.name||"Layout"))?a.layout.state.decodeJSON(b):{}},loadCookie:function(b){var c=a.layout.state.readCookie(b);c&&(b.state.stateData=a.extend(!0,{},c),b.loadState(c));return c},loadState:function(b,c,e){if(a.isPlainObject(c)&&!a.isEmptyObject(c))if(c=
b.state.stateData=a.layout.transformData(c),e=a.extend({animateLoad:!1,includeChildren:b.options.stateManagement.includeChildren},e),b.state.initialized){var d=!e.animateLoad,f,n,h,g;a.each(a.layout.config.borderPanes,function(e,l){p=c[l];a.isPlainObject(p)&&(s=p.size,f=p.initClosed,n=p.initHidden,ar=p.autoResize,h=b.state[l],g=h.isVisible,ar&&(h.autoResize=ar),g||b._sizePane(l,s,!1,!1,!1),!0===n?b.hide(l,d):!0===f?b.close(l,!1,d):!1===f?b.open(l,!1,d):!1===n&&b.show(l,!1,d),g&&b._sizePane(l,s,!1,
!1,d))});if(e.includeChildren){var l,m;a.each(b.children,function(b,d){(l=c[b]?c[b].children:0)&&d&&a.each(d,function(a,b){m=l[a];b&&m&&b.loadState(m)})})}}else{var p=a.extend(!0,{},c);a.each(a.layout.config.allPanes,function(a,b){p[b]&&delete p[b].children});a.extend(!0,b.options,p)}},readState:function(b,c){"string"===a.type(c)&&(c={keys:c});c||(c={});var e=b.options.stateManagement,d=c.includeChildren,d=void 0!==d?d:e.includeChildren,e=c.stateKeys||e.stateKeys,f={isClosed:"initClosed",isHidden:"initHidden"},
n=b.state,h=a.layout.config.allPanes,g={},l,m,p,t,r,q;a.isArray(e)&&(e=e.join(","));for(var e=e.replace(/__/g,".").split(","),w=0,u=e.length;w<u;w++)l=e[w].split("."),m=l[0],l=l[1],0>a.inArray(m,h)||(p=n[m][l],void 0!=p&&("isClosed"==l&&n[m].isSliding&&(p=!0),(g[m]||(g[m]={}))[f[l]?f[l]:l]=p));d&&a.each(h,function(c,d){r=b.children[d];t=n.stateData[d];a.isPlainObject(r)&&!a.isEmptyObject(r)&&(q=g[d]||(g[d]={}),q.children||(q.children={}),a.each(r,function(b,c){c.state.initialized?q.children[b]=a.layout.state.readState(c):
t&&t.children&&t.children[b]&&(q.children[b]=a.extend(!0,{},t.children[b]))}))});return g},encodeJSON:function(b){function c(b){var d=[],f=0,n,h,g,l=a.isArray(b);for(n in b)h=b[n],g=typeof h,"string"==g?h='"'+h+'"':"object"==g&&(h=c(h)),d[f++]=(l?"":'"'+n+'":')+h;return(l?"[":"{")+d.join(",")+(l?"]":"}")}return c(b)},decodeJSON:function(b){try{return a.parseJSON?a.parseJSON(b):window.eval("("+b+")")||{}}catch(c){return{}}},_create:function(b){var c=a.layout.state,e=b.options.stateManagement;a.extend(b,
{readCookie:function(){return c.readCookie(b)},deleteCookie:function(){c.deleteCookie(b)},saveCookie:function(a,d){return c.saveCookie(b,a,d)},loadCookie:function(){return c.loadCookie(b)},loadState:function(a,d){c.loadState(b,a,d)},readState:function(a){return c.readState(b,a)},encodeJSON:c.encodeJSON,decodeJSON:c.decodeJSON});b.state.stateData={};if(e.autoLoad)if(a.isPlainObject(e.autoLoad))a.isEmptyObject(e.autoLoad)||b.loadState(e.autoLoad);else if(e.enabled)if(a.isFunction(e.autoLoad)){var d=
{};try{d=e.autoLoad(b,b.state,b.options,b.options.name||"")}catch(f){}d&&a.isPlainObject(d)&&!a.isEmptyObject(d)&&b.loadState(d)}else b.loadCookie()},_unload:function(b){var c=b.options.stateManagement;if(c.enabled&&c.autoSave)if(a.isFunction(c.autoSave))try{c.autoSave(b,b.state,b.options,b.options.name||"")}catch(e){}else b.saveCookie()}};a.layout.onCreate.push(a.layout.state._create);a.layout.onUnload.push(a.layout.state._unload);a.layout.plugins.buttons=!0;a.layout.defaults.autoBindCustomButtons=
!1;a.layout.optionsMap.layout.push("autoBindCustomButtons");a.layout.buttons={init:function(b){var c=b.options.name||"",e;a.each("toggle open close pin toggle-slide open-slide".split(" "),function(d,f){a.each(a.layout.config.borderPanes,function(d,h){a(".ui-layout-button-"+f+"-"+h).each(function(){e=a(this).data("layoutName")||a(this).attr("layoutName");void 0!=e&&e!==c||b.bindButton(this,f,h)})})})},get:function(b,c,e,d){var f=a(c);b=b.options;var n=b.errors.addButtonError;f.length?0>a.inArray(e,
a.layout.config.borderPanes)?(a.layout.msg(n+" "+b.errors.pane+": "+e,!0),f=a("")):(c=b[e].buttonClass+"-"+d,f.addClass(c+" "+c+"-"+e).data("layoutName",b.name)):a.layout.msg(n+" "+b.errors.selector+": "+c,!0);return f},bind:function(b,c,e,d){var f=a.layout.buttons;switch(e.toLowerCase()){case "toggle":f.addToggle(b,c,d);break;case "open":f.addOpen(b,c,d);break;case "close":f.addClose(b,c,d);break;case "pin":f.addPin(b,c,d);break;case "toggle-slide":f.addToggle(b,c,d,!0);break;case "open-slide":f.addOpen(b,
c,d,!0)}return b},addToggle:function(b,c,e,d){a.layout.buttons.get(b,c,e,"toggle").click(function(a){b.toggle(e,!!d);a.stopPropagation()});return b},addOpen:function(b,c,e,d){a.layout.buttons.get(b,c,e,"open").attr("title",b.options[e].tips.Open).click(function(a){b.open(e,!!d);a.stopPropagation()});return b},addClose:function(b,c,e){a.layout.buttons.get(b,c,e,"close").attr("title",b.options[e].tips.Close).click(function(a){b.close(e);a.stopPropagation()});return b},addPin:function(b,c,e){var d=a.layout.buttons,
f=d.get(b,c,e,"pin");if(f.length){var n=b.state[e];f.click(function(c){d.setPinState(b,a(this),e,n.isSliding||n.isClosed);n.isSliding||n.isClosed?b.open(e):b.close(e);c.stopPropagation()});d.setPinState(b,f,e,!n.isClosed&&!n.isSliding);n.pins.push(c)}return b},setPinState:function(a,c,e,d){var f=c.attr("pin");if(!f||d!==("down"==f)){a=a.options[e];var f=a.buttonClass+"-pin",n=f+"-"+e;e=f+"-up "+n+"-up";f=f+"-down "+n+"-down";c.attr("pin",d?"down":"up").attr("title",d?a.tips.Unpin:a.tips.Pin).removeClass(d?
e:f).addClass(d?f:e)}},syncPinBtns:function(b,c,e){a.each(b.state[c].pins,function(d,f){a.layout.buttons.setPinState(b,a(f),c,e)})},_load:function(b){var c=a.layout.buttons;a.extend(b,{bindButton:function(a,e,n){return c.bind(b,a,e,n)},addToggleBtn:function(a,e,n){return c.addToggle(b,a,e,n)},addOpenBtn:function(a,e,n){return c.addOpen(b,a,e,n)},addCloseBtn:function(a,e){return c.addClose(b,a,e)},addPinBtn:function(a,e){return c.addPin(b,a,e)}});for(var e=0;4>e;e++)b.state[a.layout.config.borderPanes[e]].pins=
[];b.options.autoBindCustomButtons&&c.init(b)},_unload:function(a){}};a.layout.onLoad.push(a.layout.buttons._load);a.layout.plugins.browserZoom=!0;a.layout.defaults.browserZoomCheckInterval=1E3;a.layout.optionsMap.layout.push("browserZoomCheckInterval");a.layout.browserZoom={_init:function(b){!1!==a.layout.browserZoom.ratio()&&a.layout.browserZoom._setTimer(b)},_setTimer:function(b){if(!b.destroyed){var c=b.options,e=b.state,d=b.hasParentLayout?5E3:Math.max(c.browserZoomCheckInterval,100);setTimeout(function(){if(!b.destroyed&&
c.resizeWithWindow){var d=a.layout.browserZoom.ratio();d!==e.browserZoom&&(e.browserZoom=d,b.resizeAll());a.layout.browserZoom._setTimer(b)}},d)}},ratio:function(){function b(a,b){return(parseInt(a,10)/parseInt(b,10)*100).toFixed()}var c=window,e=screen,d=document,f=d.documentElement||d.body,n=a.layout.browser,h=n.version,g,l,m;return n.msie&&8<h||!n.msie?!1:e.deviceXDPI&&e.systemXDPI?b(e.deviceXDPI,e.systemXDPI):n.webkit&&(g=d.body.getBoundingClientRect)?b(g.left-g.right,d.body.offsetWidth):n.webkit&&
(l=c.outerWidth)?b(l,c.innerWidth):(l=e.width)&&(m=f.clientWidth)?b(l,m):!1}};a.layout.onReady.push(a.layout.browserZoom._init)})(jQuery);
(function(a){function b(b,c){var d=document.createElementNS("http://www.w3.org/2000/svg",b||"svg");c&&a.each(c,function(a,b){d.setAttributeNS(null,a,b)});return a(d)}a.fn.activity=function(b){this.each(function(){var d=a(this),f=d.data("activity");f&&(clearInterval(f.data("interval")),f.remove(),d.removeData("activity"));if(!1!==b){b=a.extend({color:d.css("color")},a.fn.activity.defaults,b);var f=c(d,b).css("position","absolute").prependTo(b.outside?"body":d),m=d.outerHeight()-f.height(),p=d.outerWidth()-
f.width(),m="top"==b.valign?b.padding:"bottom"==b.valign?m-b.padding:Math.floor(m/2),p="left"==b.align?b.padding:"right"==b.align?p-b.padding:Math.floor(p/2),n=d.offset();b.outside?f.css({top:n.top+"px",left:n.left+"px"}):(m-=f.offset().top-n.top,p-=f.offset().left-n.left);f.css({marginTop:m+"px",marginLeft:p+"px"});e(f,b.segments,Math.round(10/b.speed)/10);d.data("activity",f)}});return this};a.fn.activity.defaults={segments:12,space:3,length:7,width:4,speed:1.2,align:"center",valign:"center",padding:4};
a.fn.activity.getOpacity=function(a,b){var c=a.steps||a.segments-1,d=void 0!==a.opacity?a.opacity:1/c;return 1-Math.min(b,c)*(1-d)/c};var c=function(){return a("<div>").addClass("busy")},e=function(){};if(document.createElementNS&&document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect)if(c=function(c,d){for(var e=2*d.width+d.space,f=e+d.length+Math.ceil(d.width/2)+1,p=b().width(2*f).height(2*f),n=b("g",{"stroke-width":d.width,"stroke-linecap":"round",stroke:d.color}).appendTo(b("g",
{transform:"translate("+f+","+f+")"}).appendTo(p)),r=0;r<d.segments;r++)n.append(b("line",{x1:0,y1:e,x2:0,y2:e+d.length,transform:"rotate("+360/d.segments*r+", 0, 0)",opacity:a.fn.activity.getOpacity(d,r)}));return a("<div>").append(p).width(2*f).height(2*f)},void 0!==document.createElement("div").style.WebkitAnimationName)var d={},e=function(a,b,c){if(!d[b]){for(var e="spin"+b,f="@-webkit-keyframes "+e+" {",n=0;n<b;n++)var r=Math.round(1E5/b*n)/1E3,q=Math.round(1E5/b*(n+1)-1)/1E3,w="% { -webkit-transform:rotate("+
Math.round(360/b*n)+"deg); }\n",f=f+(r+w+q+w);document.styleSheets[0].insertRule(f+"100% { -webkit-transform:rotate(100deg); }\n}");d[b]=e}a.css("-webkit-animation",d[b]+" "+c+"s linear infinite")};else e=function(a,b,c){var d=0,e=a.find("g g").get(0);a.data("interval",setInterval(function(){e.setAttributeNS(null,"transform","rotate("+ ++d%b*(360/b)+")")},1E3*c/b))};else{var f=a("<shape>").css("behavior","url(#default#VML)").appendTo("body");if(f.get(0).adj){var n=document.createStyleSheet();a.each(["group",
"shape","stroke"],function(){n.addRule(this,"behavior:url(#default#VML);")});c=function(b,c){for(var d=2*c.width+c.space,e=2*(d+c.length+Math.ceil(c.width/2)+1),f=-Math.ceil(e/2),f=a("<group>",{coordsize:e+" "+e,coordorigin:f+" "+f}).css({top:f,left:f,width:e,height:e}),n=0;n<c.segments;n++)f.append(a("<shape>",{path:"m "+d+",0  l "+(d+c.length)+",0"}).css({width:e,height:e,rotation:360/c.segments*n+"deg"}).append(a("<stroke>",{color:c.color,weight:c.width+"px",endcap:"round",opacity:a.fn.activity.getOpacity(c,
n)})));return a("<group>",{coordsize:e+" "+e}).css({width:e,height:e,overflow:"hidden"}).append(f)};e=function(a,b,c){var d=0,e=a.get(0);a.data("interval",setInterval(function(){e.style.rotation=++d%b*(360/b)},1E3*c/b))}}a(f).remove()}})(jQuery);jQuery.fn.farbtastic=function(a){$.farbtastic(this,a);return this};jQuery.farbtastic=function(a,b){a=$(a).get(0);return a.farbtastic||(a.farbtastic=new jQuery._farbtastic(a,b))};
jQuery._farbtastic=function(a,b){var c=this;$(a).html('<div class="farbtastic"><div class="color"></div><div class="wheel"></div><div class="overlay"></div><div class="h-marker marker"></div><div class="sl-marker marker"></div></div>');var e=$(".farbtastic",a);c.wheel=$(".wheel",a).get(0);c.radius=84;c.square=100;c.width=194;navigator.appVersion.match(/MSIE [0-6]\./)&&$("*",e).each(function(){if("none"!=this.currentStyle.backgroundImage){var a=this.currentStyle.backgroundImage,a=this.currentStyle.backgroundImage.substring(5,
a.length-2);$(this).css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='"+a+"')"})}});c.linkTo=function(a){"object"==typeof c.callback&&$(c.callback).unbind("keyup",c.updateValue);c.color=null;if("function"==typeof a)c.callback=a;else if("object"==typeof a||"string"==typeof a)c.callback=$(a),c.callback.bind("keyup",c.updateValue),c.callback.get(0).value&&c.setColor(c.callback.get(0).value);return this};c.updateValue=function(a){this.value&&
this.value!=c.color&&c.setColor(this.value)};c.setColor=function(a){var b=c.unpack(a);c.color!=a&&b&&(c.color=a,c.rgb=b,c.hsl=c.RGBToHSL(c.rgb),c.updateDisplay());return this};c.setHSL=function(a){c.hsl=a;c.rgb=c.HSLToRGB(a);c.color=c.pack(c.rgb);c.updateDisplay();return this};c.widgetCoords=function(a){var b,e,h=a.target||a.srcElement,g=c.wheel;if("undefined"!=typeof a.offsetX){var l={x:a.offsetX,y:a.offsetY};for(a=h;a;)a.mouseX=l.x,a.mouseY=l.y,l.x+=a.offsetLeft,l.y+=a.offsetTop,a=a.offsetParent;
a=g;for(l=g=0;a;){if("undefined"!=typeof a.mouseX){b=a.mouseX-g;e=a.mouseY-l;break}g+=a.offsetLeft;l+=a.offsetTop;a=a.offsetParent}for(a=h;a;)a.mouseX=void 0,a.mouseY=void 0,a=a.offsetParent}else l=c.absolutePosition(g),b=(a.pageX||0*(a.clientX+$("html").get(0).scrollLeft))-l.x,e=(a.pageY||0*(a.clientY+$("html").get(0).scrollTop))-l.y;return{x:b-c.width/2,y:e-c.width/2}};c.mousedown=function(a){document.dragging||($(document).bind("mousemove",c.mousemove).bind("mouseup",c.mouseup),document.dragging=
!0);var b=c.widgetCoords(a);c.circleDrag=2*Math.max(Math.abs(b.x),Math.abs(b.y))>c.square;c.mousemove(a);return!1};c.mousemove=function(a){var b=c.widgetCoords(a);c.circleDrag?(a=Math.atan2(b.x,-b.y)/6.28,0>a&&(a+=1),c.setHSL([a,c.hsl[1],c.hsl[2]])):(a=Math.max(0,Math.min(1,-(b.x/c.square)+.5)),b=Math.max(0,Math.min(1,-(b.y/c.square)+.5)),c.setHSL([c.hsl[0],a,b]));return!1};c.mouseup=function(){$(document).unbind("mousemove",c.mousemove);$(document).unbind("mouseup",c.mouseup);document.dragging=!1};
c.updateDisplay=function(){var a=6.28*c.hsl[0];$(".h-marker",e).css({left:Math.round(Math.sin(a)*c.radius+c.width/2)+"px",top:Math.round(-Math.cos(a)*c.radius+c.width/2)+"px"});$(".sl-marker",e).css({left:Math.round(c.square*(.5-c.hsl[1])+c.width/2)+"px",top:Math.round(c.square*(.5-c.hsl[2])+c.width/2)+"px"});$(".color",e).css("backgroundColor",c.pack(c.HSLToRGB([c.hsl[0],1,.5])));"object"==typeof c.callback?($(c.callback).css({backgroundColor:c.color,color:.5<c.hsl[2]?"#000":"#fff"}),$(c.callback).each(function(){this.value&&
this.value!=c.color&&(this.value=c.color)})):"function"==typeof c.callback&&c.callback.call(c,c.color)};c.absolutePosition=function(a){var b={x:a.offsetLeft,y:a.offsetTop};a.offsetParent&&(a=c.absolutePosition(a.offsetParent),b.x+=a.x,b.y+=a.y);return b};c.pack=function(a){var b=Math.round(255*a[0]),c=Math.round(255*a[1]);a=Math.round(255*a[2]);return"#"+(16>b?"0":"")+b.toString(16)+(16>c?"0":"")+c.toString(16)+(16>a?"0":"")+a.toString(16)};c.unpack=function(a){if(7==a.length)return[parseInt("0x"+
a.substring(1,3))/255,parseInt("0x"+a.substring(3,5))/255,parseInt("0x"+a.substring(5,7))/255];if(4==a.length)return[parseInt("0x"+a.substring(1,2))/15,parseInt("0x"+a.substring(2,3))/15,parseInt("0x"+a.substring(3,4))/15]};c.HSLToRGB=function(a){var b,c=a[0];b=a[1];a=a[2];b=.5>=a?a*(b+1):a+b-a*b;a=2*a-b;return[this.hueToRGB(a,b,c+.33333),this.hueToRGB(a,b,c),this.hueToRGB(a,b,c-.33333)]};c.hueToRGB=function(a,b,c){c=0>c?c+1:1<c?c-1:c;return 1>6*c?a+(b-a)*c*6:1>2*c?b:2>3*c?a+(b-a)*(.66666-c)*6:a};
c.RGBToHSL=function(a){var b,c,e,g,l=a[0],m=a[1],p=a[2];b=Math.min(l,Math.min(m,p));a=Math.max(l,Math.max(m,p));c=a-b;g=(b+a)/2;e=0;0<g&&1>g&&(e=c/(.5>g?2*g:2-2*g));b=0;0<c&&(a==l&&a!=m&&(b+=(m-p)/c),a==m&&a!=p&&(b+=2+(p-l)/c),a==p&&a!=l&&(b+=4+(l-m)/c),b/=6);return[b,e,g]};$("*",e).mousedown(c.mousedown);c.setColor("#000000");b&&c.linkTo(b)}(function(a,b,c){(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):jQuery&&!jQuery.fn.dataTable&&a(jQuery)})(function(e){var d=function(f){function n(a,
g){var f=d.defaults.columns,l=a.aoColumns.length,f=e.extend({},d.models.oColumn,f,{sSortingClass:a.oClasses.sSortable,sSortingClassJUI:a.oClasses.sSortJUI,nTh:g?g:b.createElement("th"),sTitle:f.sTitle?f.sTitle:g?g.innerHTML:"",aDataSort:f.aDataSort?f.aDataSort:[l],mData:f.mData?f.oDefaults:l});a.aoColumns.push(f);a.aoPreSearchCols[l]===c||null===a.aoPreSearchCols[l]?a.aoPreSearchCols[l]=e.extend({},d.models.oSearch):(f=a.aoPreSearchCols[l],f.bRegex===c&&(f.bRegex=!0),f.bSmart===c&&(f.bSmart=!0),f.bCaseInsensitive===
c&&(f.bCaseInsensitive=!0));h(a,l,null)}function h(a,b,d){var g=a.aoColumns[b];d!==c&&null!==d&&(d.mDataProp&&!d.mData&&(d.mData=d.mDataProp),d.sType!==c&&(g.sType=d.sType,g._bAutoType=!1),e.extend(g,d),oa(g,d,"sWidth","sWidthOrig"),d.iDataSort!==c&&(g.aDataSort=[d.iDataSort]),oa(g,d,"aDataSort"));var f=g.mRender?H(g.mRender):null,h=H(g.mData);g.fnGetData=function(a,b){var c=h(a,b);return g.mRender&&b&&""!==b?f(c,b,a):c};g.fnSetData=G(g.mData);a.oFeatures.bSort||(g.bSortable=!1);!g.bSortable||-1==
e.inArray("asc",g.asSorting)&&-1==e.inArray("desc",g.asSorting)?(g.sSortingClass=a.oClasses.sSortableNone,g.sSortingClassJUI=""):-1==e.inArray("asc",g.asSorting)&&-1==e.inArray("desc",g.asSorting)?(g.sSortingClass=a.oClasses.sSortable,g.sSortingClassJUI=a.oClasses.sSortJUI):-1!=e.inArray("asc",g.asSorting)&&-1==e.inArray("desc",g.asSorting)?(g.sSortingClass=a.oClasses.sSortableAsc,g.sSortingClassJUI=a.oClasses.sSortJUIAscAllowed):-1==e.inArray("asc",g.asSorting)&&-1!=e.inArray("desc",g.asSorting)&&
(g.sSortingClass=a.oClasses.sSortableDesc,g.sSortingClassJUI=a.oClasses.sSortJUIDescAllowed)}function g(a){if(!1===a.oFeatures.bAutoWidth)return!1;Aa(a);for(var b=0,c=a.aoColumns.length;b<c;b++)a.aoColumns[b].nTh.style.width=a.aoColumns[b].sWidth}function l(a,b){var c=t(a,"bVisible");return"number"===typeof c[b]?c[b]:null}function m(a,b){var c=t(a,"bVisible"),c=e.inArray(b,c);return-1!==c?c:null}function p(a){return t(a,"bVisible").length}function t(a,b){var c=[];e.map(a.aoColumns,function(a,d){a[b]&&
c.push(d)});return c}function r(a){for(var b=d.ext.aTypes,c=b.length,e=0;e<c;e++){var g=b[e](a);if(null!==g)return g}return"string"}function q(a,b){for(var c=b.split(","),d=[],e=0,g=a.aoColumns.length;e<g;e++)for(var f=0;f<g;f++)if(a.aoColumns[e].sName==c[f]){d.push(f);break}return d}function w(a){for(var b="",c=0,d=a.aoColumns.length;c<d;c++)b+=a.aoColumns[c].sName+",";return b.length==d?"":b.slice(0,-1)}function u(a,b,c,d){var g,f,h,l,m;if(b)for(g=b.length-1;0<=g;g--){var p=b[g].aTargets;e.isArray(p)||
Ja(a,1,"aTargets must be an array of targets, not a "+typeof p);f=0;for(h=p.length;f<h;f++)if("number"===typeof p[f]&&0<=p[f]){for(;a.aoColumns.length<=p[f];)n(a);d(p[f],b[g])}else if("number"===typeof p[f]&&0>p[f])d(a.aoColumns.length+p[f],b[g]);else if("string"===typeof p[f])for(l=0,m=a.aoColumns.length;l<m;l++)("_all"==p[f]||e(a.aoColumns[l].nTh).hasClass(p[f]))&&d(l,b[g])}if(c)for(g=0,a=c.length;g<a;g++)d(g,c[g])}function x(a,b){var c;c=e.isArray(b)?b.slice():e.extend(!0,{},b);var g=a.aoData.length,
f=e.extend(!0,{},d.models.oRow);f._aData=c;a.aoData.push(f);for(var h,f=0,l=a.aoColumns.length;f<l;f++)c=a.aoColumns[f],"function"===typeof c.fnRender&&c.bUseRendered&&null!==c.mData?D(a,g,f,V(a,g,f)):D(a,g,f,C(a,g,f)),c._bAutoType&&"string"!=c.sType&&(h=C(a,g,f,"type"),null!==h&&""!==h&&(h=r(h),null===c.sType?c.sType=h:c.sType!=h&&"html"!=c.sType&&(c.sType="string")));a.aiDisplayMaster.push(g);a.oFeatures.bDeferRender||T(a,g);return g}function z(a){var b,c,g,f,h,l,m;if(a.bDeferLoading||null===a.sAjaxSource)for(b=
a.nTBody.firstChild;b;){if("TR"==b.nodeName.toUpperCase())for(c=a.aoData.length,b._DT_RowIndex=c,a.aoData.push(e.extend(!0,{},d.models.oRow,{nTr:b})),a.aiDisplayMaster.push(c),h=b.firstChild,g=0;h;){l=h.nodeName.toUpperCase();if("TD"==l||"TH"==l)D(a,c,g,e.trim(h.innerHTML)),g++;h=h.nextSibling}b=b.nextSibling}f=ub(a);g=[];b=0;for(c=f.length;b<c;b++)for(h=f[b].firstChild;h;)l=h.nodeName.toUpperCase(),"TD"!=l&&"TH"!=l||g.push(h),h=h.nextSibling;c=0;for(f=a.aoColumns.length;c<f;c++){m=a.aoColumns[c];
null===m.sTitle&&(m.sTitle=m.nTh.innerHTML);var p=m._bAutoType,q="function"===typeof m.fnRender,n=null!==m.sClass,t=m.bVisible,u,y;if(p||q||n||!t)for(l=0,b=a.aoData.length;l<b;l++)h=a.aoData[l],u=g[l*f+c],p&&"string"!=m.sType&&(y=C(a,l,c,"type"),""!==y&&(y=r(y),null===m.sType?m.sType=y:m.sType!=y&&"html"!=m.sType&&(m.sType="string"))),m.mRender?u.innerHTML=C(a,l,c,"display"):m.mData!==c&&(u.innerHTML=C(a,l,c,"display")),q&&(y=V(a,l,c),u.innerHTML=y,m.bUseRendered&&D(a,l,c,y)),n&&(u.className+=" "+
m.sClass),t?h._anHidden[c]=null:(h._anHidden[c]=u,u.parentNode.removeChild(u)),m.fnCreatedCell&&m.fnCreatedCell.call(a.oInstance,u,C(a,l,c,"display"),h._aData,l,c)}if(0!==a.aoRowCreatedCallback.length)for(b=0,c=a.aoData.length;b<c;b++)h=a.aoData[b],ca(a,"aoRowCreatedCallback",null,[h.nTr,h._aData,b])}function y(a,b){return b._DT_RowIndex!==c?b._DT_RowIndex:null}function B(a,b,c){b=Eb(a,b);var d=0;for(a=a.aoColumns.length;d<a;d++)if(b[d]===c)return d;return-1}function A(a,b,c,d){for(var e=[],g=0,f=
d.length;g<f;g++)e.push(C(a,b,d[g],c));return e}function C(a,b,d,e){var g=a.aoColumns[d];if((d=g.fnGetData(a.aoData[b]._aData,e))===c)return a.iDrawError!=a.iDraw&&null===g.sDefaultContent&&(Ja(a,0,"Requested unknown parameter "+("function"==typeof g.mData?"{mData function}":"'"+g.mData+"'")+" from the data source for row "+b),a.iDrawError=a.iDraw),g.sDefaultContent;if(null===d&&null!==g.sDefaultContent)d=g.sDefaultContent;else if("function"===typeof d)return d();return"display"==e&&null===d?"":d}
function D(a,b,c,d){a.aoColumns[c].fnSetData(a.aoData[b]._aData,d)}function H(a){if(null===a)return function(a,b){return null};if("function"===typeof a)return function(b,c,d){return a(b,c,d)};if("string"!==typeof a||-1===a.indexOf(".")&&-1===a.indexOf("["))return function(b,c){return b[a]};var b=function(a,d,e){var g=e.split("."),f;if(""!==e){var h=0;for(f=g.length;h<f;h++){if(e=g[h].match(Da)){g[h]=g[h].replace(Da,"");""!==g[h]&&(a=a[g[h]]);f=[];g.splice(0,h+1);for(var g=g.join("."),h=0,l=a.length;h<
l;h++)f.push(b(a[h],d,g));a=e[0].substring(1,e[0].length-1);a=""===a?f:f.join(a);break}if(null===a||a[g[h]]===c)return c;a=a[g[h]]}}return a};return function(c,d){return b(c,d,a)}}function G(a){if(null===a)return function(a,b){};if("function"===typeof a)return function(b,c){a(b,"set",c)};if("string"!==typeof a||-1===a.indexOf(".")&&-1===a.indexOf("["))return function(b,c){b[a]=c};var b=function(a,d,e){e=e.split(".");var g,f,h=0;for(f=e.length-1;h<f;h++){if(g=e[h].match(Da)){e[h]=e[h].replace(Da,"");
a[e[h]]=[];g=e.slice();g.splice(0,h+1);f=g.join(".");for(var l=0,m=d.length;l<m;l++)g={},b(g,d[l],f),a[e[h]].push(g);return}if(null===a[e[h]]||a[e[h]]===c)a[e[h]]={};a=a[e[h]]}a[e[e.length-1].replace(Da,"")]=d};return function(c,d){return b(c,d,a)}}function L(a){for(var b=[],c=a.aoData.length,d=0;d<c;d++)b.push(a.aoData[d]._aData);return b}function J(a){a.aoData.splice(0,a.aoData.length);a.aiDisplayMaster.splice(0,a.aiDisplayMaster.length);a.aiDisplay.splice(0,a.aiDisplay.length);Ca(a)}function M(a,
b){for(var c=-1,d=0,e=a.length;d<e;d++)a[d]==b?c=d:a[d]>b&&a[d]--; -1!=c&&a.splice(c,1)}function V(a,b,c){var d=a.aoColumns[c];return d.fnRender({iDataRow:b,iDataColumn:c,oSettings:a,aData:a.aoData[b]._aData,mDataProp:d.mData},C(a,b,c,"display"))}function T(a,c){var d=a.aoData[c],e;if(null===d.nTr){d.nTr=b.createElement("tr");d.nTr._DT_RowIndex=c;d._aData.DT_RowId&&(d.nTr.id=d._aData.DT_RowId);d._aData.DT_RowClass&&(d.nTr.className=d._aData.DT_RowClass);for(var g=0,f=a.aoColumns.length;g<f;g++){var h=
a.aoColumns[g];e=b.createElement(h.sCellType);e.innerHTML="function"!==typeof h.fnRender||h.bUseRendered&&null!==h.mData?C(a,c,g,"display"):V(a,c,g);null!==h.sClass&&(e.className=h.sClass);h.bVisible?(d.nTr.appendChild(e),d._anHidden[g]=null):d._anHidden[g]=e;h.fnCreatedCell&&h.fnCreatedCell.call(a.oInstance,e,C(a,c,g,"display"),d._aData,c,g)}ca(a,"aoRowCreatedCallback",null,[d.nTr,d._aData,c])}}function O(a){var c,d,g;if(0!==e("th, td",a.nTHead).length)for(c=0,g=a.aoColumns.length;c<g;c++)d=a.aoColumns[c].nTh,
d.setAttribute("role","columnheader"),a.aoColumns[c].bSortable&&(d.setAttribute("tabindex",a.iTabIndex),d.setAttribute("aria-controls",a.sTableId)),null!==a.aoColumns[c].sClass&&e(d).addClass(a.aoColumns[c].sClass),a.aoColumns[c].sTitle!=d.innerHTML&&(d.innerHTML=a.aoColumns[c].sTitle);else{var f=b.createElement("tr");c=0;for(g=a.aoColumns.length;c<g;c++)d=a.aoColumns[c].nTh,d.innerHTML=a.aoColumns[c].sTitle,d.setAttribute("tabindex","0"),null!==a.aoColumns[c].sClass&&e(d).addClass(a.aoColumns[c].sClass),
f.appendChild(d);e(a.nTHead).html("")[0].appendChild(f);R(a.aoHeader,a.nTHead)}e(a.nTHead).children("tr").attr("role","row");if(a.bJUI)for(c=0,g=a.aoColumns.length;c<g;c++){d=a.aoColumns[c].nTh;f=b.createElement("div");f.className=a.oClasses.sSortJUIWrapper;e(d).contents().appendTo(f);var h=b.createElement("span");h.className=a.oClasses.sSortIcon;f.appendChild(h);d.appendChild(f)}if(a.oFeatures.bSort)for(c=0;c<a.aoColumns.length;c++)!1!==a.aoColumns[c].bSortable?jb(a,a.aoColumns[c].nTh,c):e(a.aoColumns[c].nTh).addClass(a.oClasses.sSortableNone);
""!==a.oClasses.sFooterTH&&e(a.nTFoot).children("tr").children("th").addClass(a.oClasses.sFooterTH);if(null!==a.nTFoot)for(d=K(a,null,a.aoFooter),c=0,g=a.aoColumns.length;c<g;c++)d[c]&&(a.aoColumns[c].nTf=d[c],a.aoColumns[c].sClass&&e(d[c]).addClass(a.aoColumns[c].sClass))}function N(a,b,d){var e,g,f,h=[],l=[],m=a.aoColumns.length,p;d===c&&(d=!1);e=0;for(g=b.length;e<g;e++){h[e]=b[e].slice();h[e].nTr=b[e].nTr;for(f=m-1;0<=f;f--)a.aoColumns[f].bVisible||d||h[e].splice(f,1);l.push([])}e=0;for(g=h.length;e<
g;e++){if(a=h[e].nTr)for(;f=a.firstChild;)a.removeChild(f);f=0;for(b=h[e].length;f<b;f++)if(p=m=1,l[e][f]===c){a.appendChild(h[e][f].cell);for(l[e][f]=1;h[e+m]!==c&&h[e][f].cell==h[e+m][f].cell;)l[e+m][f]=1,m++;for(;h[e][f+p]!==c&&h[e][f].cell==h[e][f+p].cell;){for(d=0;d<m;d++)l[e+d][f+p]=1;p++}h[e][f].cell.rowSpan=m;h[e][f].cell.colSpan=p}}}function Z(a){var d=ca(a,"aoPreDrawCallback","preDraw",[a]);if(-1!==e.inArray(!1,d))Ya(a,!1);else{var g,f,d=[],h=0,l=a.asStripeClasses.length;g=a.aoOpenRows.length;
a.bDrawing=!0;a.iInitDisplayStart!==c&&-1!=a.iInitDisplayStart&&(a._iDisplayStart=a.oFeatures.bServerSide?a.iInitDisplayStart:a.iInitDisplayStart>=a.fnRecordsDisplay()?0:a.iInitDisplayStart,a.iInitDisplayStart=-1,Ca(a));if(a.bDeferLoading)a.bDeferLoading=!1,a.iDraw++;else if(!a.oFeatures.bServerSide)a.iDraw++;else if(!a.bDestroying&&!U(a))return;if(0!==a.aiDisplay.length){var m=a._iDisplayStart;f=a._iDisplayEnd;a.oFeatures.bServerSide&&(m=0,f=a.aoData.length);for(;m<f;m++){var q=a.aoData[a.aiDisplay[m]];
null===q.nTr&&T(a,a.aiDisplay[m]);var r=q.nTr;if(0!==l){var n=a.asStripeClasses[h%l];q._sRowStripe!=n&&(e(r).removeClass(q._sRowStripe).addClass(n),q._sRowStripe=n)}ca(a,"aoRowCallback",null,[r,a.aoData[a.aiDisplay[m]]._aData,h,m]);d.push(r);h++;if(0!==g)for(q=0;q<g;q++)if(r==a.aoOpenRows[q].nParent){d.push(a.aoOpenRows[q].nTr);break}}}else d[0]=b.createElement("tr"),a.asStripeClasses[0]&&(d[0].className=a.asStripeClasses[0]),g=a.oLanguage,l=g.sZeroRecords,1!=a.iDraw||null===a.sAjaxSource||a.oFeatures.bServerSide?
g.sEmptyTable&&0===a.fnRecordsTotal()&&(l=g.sEmptyTable):l=g.sLoadingRecords,g=b.createElement("td"),g.setAttribute("valign","top"),g.colSpan=p(a),g.className=a.oClasses.sRowEmpty,g.innerHTML=Fa(a,l),d[h].appendChild(g);ca(a,"aoHeaderCallback","header",[e(a.nTHead).children("tr")[0],L(a),a._iDisplayStart,a.fnDisplayEnd(),a.aiDisplay]);ca(a,"aoFooterCallback","footer",[e(a.nTFoot).children("tr")[0],L(a),a._iDisplayStart,a.fnDisplayEnd(),a.aiDisplay]);h=b.createDocumentFragment();g=b.createDocumentFragment();
if(a.nTBody){l=a.nTBody.parentNode;g.appendChild(a.nTBody);if(!a.oScroll.bInfinite||!a._bInitComplete||a.bSorted||a.bFiltered)for(;g=a.nTBody.firstChild;)a.nTBody.removeChild(g);g=0;for(f=d.length;g<f;g++)h.appendChild(d[g]);a.nTBody.appendChild(h);null!==l&&l.appendChild(a.nTBody)}ca(a,"aoDrawCallback","draw",[a]);a.bSorted=!1;a.bFiltered=!1;a.bDrawing=!1;a.oFeatures.bServerSide&&(Ya(a,!1),a._bInitComplete||pb(a))}}function X(a){a.oFeatures.bSort?eb(a,a.oPreviousSearch):a.oFeatures.bFilter?la(a,
a.oPreviousSearch):(Ca(a),Z(a))}function P(a){var b=e("<div></div>")[0];a.nTable.parentNode.insertBefore(b,a.nTable);a.nTableWrapper=e('<div id="'+a.sTableId+'_wrapper" class="'+a.oClasses.sWrapper+'" role="grid"></div>')[0];a.nTableReinsertBefore=a.nTable.nextSibling;for(var c=a.nTableWrapper,g=a.sDom.split(""),f,h,l,m,p,q,r,n=0;n<g.length;n++){h=0;l=g[n];if("<"==l){m=e("<div></div>")[0];p=g[n+1];if("'"==p||'"'==p){q="";for(r=2;g[n+r]!=p;)q+=g[n+r],r++;"H"==q?q=a.oClasses.sJUIHeader:"F"==q&&(q=a.oClasses.sJUIFooter);
-1!=q.indexOf(".")?(p=q.split("."),m.id=p[0].substr(1,p[0].length-1),m.className=p[1]):"#"==q.charAt(0)?m.id=q.substr(1,q.length-1):m.className=q;n+=r}c.appendChild(m);c=m}else if(">"==l)c=c.parentNode;else if("l"==l&&a.oFeatures.bPaginate&&a.oFeatures.bLengthChange)f=Xa(a),h=1;else if("f"==l&&a.oFeatures.bFilter)f=W(a),h=1;else if("r"==l&&a.oFeatures.bProcessing)f=sb(a),h=1;else if("t"==l)f=cb(a),h=1;else if("i"==l&&a.oFeatures.bInfo)f=ib(a),h=1;else if("p"==l&&a.oFeatures.bPaginate)f=Ra(a),h=1;
else if(0!==d.ext.aoFeatures.length)for(m=d.ext.aoFeatures,r=0,p=m.length;r<p;r++)if(l==m[r].cFeature){(f=m[r].fnInit(a))&&(h=1);break}1==h&&null!==f&&("object"!==typeof a.aanFeatures[l]&&(a.aanFeatures[l]=[]),a.aanFeatures[l].push(f),c.appendChild(f))}b.parentNode.replaceChild(a.nTableWrapper,b)}function R(a,b){var c=e(b).children("tr"),d,g,f,h,l,m,p,q,r,n;a.splice(0,a.length);f=0;for(m=c.length;f<m;f++)a.push([]);f=0;for(m=c.length;f<m;f++)for(d=c[f],g=d.firstChild;g;){if("TD"==g.nodeName.toUpperCase()||
"TH"==g.nodeName.toUpperCase()){q=1*g.getAttribute("colspan");r=1*g.getAttribute("rowspan");q=q&&0!==q&&1!==q?q:1;r=r&&0!==r&&1!==r?r:1;h=0;for(l=a[f];l[h];)h++;p=h;n=1===q?!0:!1;for(l=0;l<q;l++)for(h=0;h<r;h++)a[f+h][p+l]={cell:g,unique:n},a[f+h].nTr=d}g=g.nextSibling}}function K(a,b,c){var d=[];c||(c=a.aoHeader,b&&(c=[],R(c,b)));b=0;for(var e=c.length;b<e;b++)for(var g=0,f=c[b].length;g<f;g++)!c[b][g].unique||d[g]&&a.bSortCellsTop||(d[g]=c[b][g].cell);return d}function U(a){if(a.bAjaxDataGet){a.iDraw++;
Ya(a,!0);var b=Q(a);ma(a,b);a.fnServerData.call(a.oInstance,a.sAjaxSource,b,function(b){S(a,b)},a);return!1}return!0}function Q(a){var b=a.aoColumns.length,c=[],d,e,g,f;c.push({name:"sEcho",value:a.iDraw});c.push({name:"iColumns",value:b});c.push({name:"sColumns",value:w(a)});c.push({name:"iDisplayStart",value:a._iDisplayStart});c.push({name:"iDisplayLength",value:!1!==a.oFeatures.bPaginate?a._iDisplayLength:-1});for(g=0;g<b;g++)d=a.aoColumns[g].mData,c.push({name:"mDataProp_"+g,value:"function"===
typeof d?"function":d});if(!1!==a.oFeatures.bFilter)for(c.push({name:"sSearch",value:a.oPreviousSearch.sSearch}),c.push({name:"bRegex",value:a.oPreviousSearch.bRegex}),g=0;g<b;g++)c.push({name:"sSearch_"+g,value:a.aoPreSearchCols[g].sSearch}),c.push({name:"bRegex_"+g,value:a.aoPreSearchCols[g].bRegex}),c.push({name:"bSearchable_"+g,value:a.aoColumns[g].bSearchable});if(!1!==a.oFeatures.bSort){var h=0;d=null!==a.aaSortingFixed?a.aaSortingFixed.concat(a.aaSorting):a.aaSorting.slice();for(g=0;g<d.length;g++)for(e=
a.aoColumns[d[g][0]].aDataSort,f=0;f<e.length;f++)c.push({name:"iSortCol_"+h,value:e[f]}),c.push({name:"sSortDir_"+h,value:d[g][1]}),h++;c.push({name:"iSortingCols",value:h});for(g=0;g<b;g++)c.push({name:"bSortable_"+g,value:a.aoColumns[g].bSortable})}return c}function ma(a,b){ca(a,"aoServerParams","serverParams",[b])}function S(a,b){if(b.sEcho!==c){if(1*b.sEcho<a.iDraw)return;a.iDraw=1*b.sEcho}(!a.oScroll.bInfinite||a.oScroll.bInfinite&&(a.bSorted||a.bFiltered))&&J(a);a._iRecordsTotal=parseInt(b.iTotalRecords,
10);a._iRecordsDisplay=parseInt(b.iTotalDisplayRecords,10);var d=w(a),d=b.sColumns!==c&&""!==d&&b.sColumns!=d,e;d&&(e=q(a,b.sColumns));for(var g=H(a.sAjaxDataProp)(b),f=0,h=g.length;f<h;f++)if(d){for(var l=[],m=0,p=a.aoColumns.length;m<p;m++)l.push(g[f][e[m]]);x(a,l)}else x(a,g[f]);a.aiDisplay=a.aiDisplayMaster.slice();a.bAjaxDataGet=!1;Z(a);a.bAjaxDataGet=!0;Ya(a,!1)}function W(a){var c=a.oPreviousSearch,d=a.oLanguage.sSearch,d=-1!==d.indexOf("_INPUT_")?d.replace("_INPUT_",'<input type="text" />'):
""===d?'<input type="text" />':d+' <input type="text" />',g=b.createElement("div");g.className=a.oClasses.sFilter;g.innerHTML="<label>"+d+"</label>";a.aanFeatures.f||(g.id=a.sTableId+"_order");d=e('input[type="text"]',g);g._DT_Input=d[0];d.val(c.sSearch.replace('"',"&quot;"));d.bind("keyup.DT",function(b){b=a.aanFeatures.f;for(var d=""===this.value?"":this.value,g=0,f=b.length;g<f;g++)b[g]!=e(this).parents("div.dataTables_filter")[0]&&e(b[g]._DT_Input).val(d);d!=c.sSearch&&la(a,{sSearch:d,bRegex:c.bRegex,
bSmart:c.bSmart,bCaseInsensitive:c.bCaseInsensitive})});d.attr("aria-controls",a.sTableId).bind("keypress.DT",function(a){if(13==a.keyCode)return!1});return g}function la(a,b,c){var d=a.oPreviousSearch,g=a.aoPreSearchCols,f=function(a){d.sSearch=a.sSearch;d.bRegex=a.bRegex;d.bSmart=a.bSmart;d.bCaseInsensitive=a.bCaseInsensitive};if(a.oFeatures.bServerSide)f(b);else{ea(a,b.sSearch,c,b.bRegex,b.bSmart,b.bCaseInsensitive);f(b);for(b=0;b<a.aoPreSearchCols.length;b++)aa(a,g[b].sSearch,b,g[b].bRegex,g[b].bSmart,
g[b].bCaseInsensitive);sa(a)}a.bFiltered=!0;e(a.oInstance).trigger("filter",a);a._iDisplayStart=0;Ca(a);Z(a);Ia(a,0)}function sa(a){for(var b=d.ext.afnFiltering,c=t(a,"bSearchable"),e=0,g=b.length;e<g;e++)for(var f=0,h=0,l=a.aiDisplay.length;h<l;h++){var m=a.aiDisplay[h-f];b[e](a,A(a,m,"filter",c),m)||(a.aiDisplay.splice(h-f,1),f++)}}function aa(a,b,c,d,e,g){if(""!==b){var f=0;b=Ea(b,d,e,g);for(d=a.aiDisplay.length-1;0<=d;d--)e=pa(C(a,a.aiDisplay[d],c,"filter"),a.aoColumns[c].sType),b.test(e)||(a.aiDisplay.splice(d,
1),f++)}}function ea(a,b,c,e,g,f){e=Ea(b,e,g,f);g=a.oPreviousSearch;c||(c=0);0!==d.ext.afnFiltering.length&&(c=1);if(0>=b.length)a.aiDisplay.splice(0,a.aiDisplay.length),a.aiDisplay=a.aiDisplayMaster.slice();else if(a.aiDisplay.length==a.aiDisplayMaster.length||g.sSearch.length>b.length||1==c||0!==b.indexOf(g.sSearch))for(a.aiDisplay.splice(0,a.aiDisplay.length),Ia(a,1),b=0;b<a.aiDisplayMaster.length;b++)e.test(a.asDataSearch[b])&&a.aiDisplay.push(a.aiDisplayMaster[b]);else for(b=c=0;b<a.asDataSearch.length;b++)e.test(a.asDataSearch[b])||
(a.aiDisplay.splice(b-c,1),c++)}function Ia(a,b){if(!a.oFeatures.bServerSide){a.asDataSearch=[];for(var c=t(a,"bSearchable"),d=1===b?a.aiDisplayMaster:a.aiDisplay,e=0,g=d.length;e<g;e++)a.asDataSearch[e]=v(a,A(a,d[e],"filter",c))}}function v(a,b){var c=b.join("  ");-1!==c.indexOf("&")&&(c=e("<div>").html(c).text());return c.replace(/[\n\r]/g," ")}function Ea(a,b,c,d){if(c){a=b?a.split(" "):ya(a).split(" ");a="^(?=.*?"+a.join(")(?=.*?")+").*$";try{return new RegExp(a,d?"i":"")}catch(e){return RegExp("")}}else return a=
b?a:ya(a),new RegExp(a,d?"i":"")}function pa(a,b){return"function"===typeof d.ext.ofnSearch[b]?d.ext.ofnSearch[b](a):null===a?"":"html"==b?a.replace(/[\r\n]/g," ").replace(/<.*?>/g,""):"string"===typeof a?a.replace(/[\r\n]/g," "):a}function ya(a){return a.replace(RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\|\\$|\\^|\\-)","g"),"\\$1")}function ib(a){var c=b.createElement("div");c.className=a.oClasses.sInfo;a.aanFeatures.i||(a.aoDrawCallback.push({fn:Ka,sName:"information"}),c.id=a.sTableId+
"_info");a.nTable.setAttribute("aria-describedby",a.sTableId+"_info");return c}function Ka(a){if(a.oFeatures.bInfo&&0!==a.aanFeatures.i.length){var b=a.oLanguage,c=a._iDisplayStart+1,d=a.fnDisplayEnd(),g=a.fnRecordsTotal(),f=a.fnRecordsDisplay(),h;h=0===f?b.sInfoEmpty:b.sInfo;f!=g&&(h+=" "+b.sInfoFiltered);h+=b.sInfoPostFix;h=Fa(a,h);null!==b.fnInfoCallback&&(h=b.fnInfoCallback.call(a.oInstance,a,c,d,g,f,h));a=a.aanFeatures.i;b=0;for(c=a.length;b<c;b++)e(a[b]).html(h)}}function Fa(a,b){var c=a.fnFormatNumber(a._iDisplayStart+
1),d=a.fnDisplayEnd(),d=a.fnFormatNumber(d),e=a.fnRecordsDisplay(),e=a.fnFormatNumber(e),g=a.fnRecordsTotal(),g=a.fnFormatNumber(g);a.oScroll.bInfinite&&(c=a.fnFormatNumber(1));return b.replace(/_START_/g,c).replace(/_END_/g,d).replace(/_TOTAL_/g,e).replace(/_MAX_/g,g)}function Oa(a){var b,c,d=a.iInitDisplayStart;if(!1===a.bInitialised)setTimeout(function(){Oa(a)},200);else{P(a);O(a);N(a,a.aoHeader);a.nTFoot&&N(a,a.aoFooter);Ya(a,!0);a.oFeatures.bAutoWidth&&Aa(a);b=0;for(c=a.aoColumns.length;b<c;b++)null!==
a.aoColumns[b].sWidth&&(a.aoColumns[b].nTh.style.width=qa(a.aoColumns[b].sWidth));a.oFeatures.bSort?eb(a):a.oFeatures.bFilter?la(a,a.oPreviousSearch):(a.aiDisplay=a.aiDisplayMaster.slice(),Ca(a),Z(a));null===a.sAjaxSource||a.oFeatures.bServerSide?a.oFeatures.bServerSide||(Ya(a,!1),pb(a)):(c=[],ma(a,c),a.fnServerData.call(a.oInstance,a.sAjaxSource,c,function(c){var e=""!==a.sAjaxDataProp?H(a.sAjaxDataProp)(c):c;for(b=0;b<e.length;b++)x(a,e[b]);a.iInitDisplayStart=d;a.oFeatures.bSort?eb(a):(a.aiDisplay=
a.aiDisplayMaster.slice(),Ca(a),Z(a));Ya(a,!1);pb(a,c)},a))}}function pb(a,b){a._bInitComplete=!0;ca(a,"aoInitComplete","init",[a,b])}function qb(a){var b=d.defaults.oLanguage;!a.sEmptyTable&&a.sZeroRecords&&"No data available in table"===b.sEmptyTable&&oa(a,a,"sZeroRecords","sEmptyTable");!a.sLoadingRecords&&a.sZeroRecords&&"Loading..."===b.sLoadingRecords&&oa(a,a,"sZeroRecords","sLoadingRecords")}function Xa(a){if(a.oScroll.bInfinite)return null;var c='<select size="1" '+('name="'+a.sTableId+'_length"')+
">",d,g,f=a.aLengthMenu;if(2==f.length&&"object"===typeof f[0]&&"object"===typeof f[1])for(d=0,g=f[0].length;d<g;d++)c+='<option value="'+f[0][d]+'">'+f[1][d]+"</option>";else for(d=0,g=f.length;d<g;d++)c+='<option value="'+f[d]+'">'+f[d]+"</option>";c+="</select>";f=b.createElement("div");a.aanFeatures.l||(f.id=a.sTableId+"_length");f.className=a.oClasses.sLength;f.innerHTML="<label>"+a.oLanguage.sLengthMenu.replace("_MENU_",c)+"</label>";e('select option[value="'+a._iDisplayLength+'"]',f).attr("selected",
!0);e("select",f).bind("change.DT",function(b){b=e(this).val();var c=a.aanFeatures.l;d=0;for(g=c.length;d<g;d++)c[d]!=this.parentNode&&e("select",c[d]).val(b);a._iDisplayLength=parseInt(b,10);Ca(a);a.fnDisplayEnd()==a.fnRecordsDisplay()&&(a._iDisplayStart=a.fnDisplayEnd()-a._iDisplayLength,0>a._iDisplayStart&&(a._iDisplayStart=0));-1==a._iDisplayLength&&(a._iDisplayStart=0);Z(a)});e("select",f).attr("aria-controls",a.sTableId);return f}function Ca(a){a._iDisplayEnd=!1===a.oFeatures.bPaginate?a.aiDisplay.length:
a._iDisplayStart+a._iDisplayLength>a.aiDisplay.length||-1==a._iDisplayLength?a.aiDisplay.length:a._iDisplayStart+a._iDisplayLength}function Ra(a){if(a.oScroll.bInfinite)return null;var c=b.createElement("div");c.className=a.oClasses.sPaging+a.sPaginationType;d.ext.oPagination[a.sPaginationType].fnInit(a,c,function(a){Ca(a);Z(a)});a.aanFeatures.p||a.aoDrawCallback.push({fn:function(a){d.ext.oPagination[a.sPaginationType].fnUpdate(a,function(a){Ca(a);Z(a)})},sName:"pagination"});return c}function Va(a,
b){var c=a._iDisplayStart;if("number"===typeof b)a._iDisplayStart=b*a._iDisplayLength,a._iDisplayStart>a.fnRecordsDisplay()&&(a._iDisplayStart=0);else if("first"==b)a._iDisplayStart=0;else if("previous"==b)a._iDisplayStart=0<=a._iDisplayLength?a._iDisplayStart-a._iDisplayLength:0,0>a._iDisplayStart&&(a._iDisplayStart=0);else if("next"==b)0<=a._iDisplayLength?a._iDisplayStart+a._iDisplayLength<a.fnRecordsDisplay()&&(a._iDisplayStart+=a._iDisplayLength):a._iDisplayStart=0;else if("last"==b)if(0<=a._iDisplayLength){var d=
parseInt((a.fnRecordsDisplay()-1)/a._iDisplayLength,10)+1;a._iDisplayStart=(d-1)*a._iDisplayLength}else a._iDisplayStart=0;else Ja(a,0,"Unknown paging action: "+b);e(a.oInstance).trigger("page",a);return c!=a._iDisplayStart}function sb(a){var c=b.createElement("div");a.aanFeatures.r||(c.id=a.sTableId+"_processing");c.innerHTML=a.oLanguage.sProcessing;c.className=a.oClasses.sProcessing;a.nTable.parentNode.insertBefore(c,a.nTable);return c}function Ya(a,b){if(a.oFeatures.bProcessing)for(var c=a.aanFeatures.r,
d=0,g=c.length;d<g;d++)c[d].style.visibility=b?"visible":"hidden";e(a.oInstance).trigger("processing",[a,b])}function cb(a){if(""===a.oScroll.sX&&""===a.oScroll.sY)return a.nTable;var c=b.createElement("div"),d=b.createElement("div"),g=b.createElement("div"),f=b.createElement("div"),h=b.createElement("div"),l=b.createElement("div"),m=a.nTable.cloneNode(!1),p=a.nTable.cloneNode(!1),q=a.nTable.getElementsByTagName("thead")[0],r=0===a.nTable.getElementsByTagName("tfoot").length?null:a.nTable.getElementsByTagName("tfoot")[0],
n=a.oClasses;d.appendChild(g);h.appendChild(l);f.appendChild(a.nTable);c.appendChild(d);c.appendChild(f);g.appendChild(m);m.appendChild(q);null!==r&&(c.appendChild(h),l.appendChild(p),p.appendChild(r));c.className=n.sScrollWrapper;d.className=n.sScrollHead;g.className=n.sScrollHeadInner;f.className=n.sScrollBody;h.className=n.sScrollFoot;l.className=n.sScrollFootInner;a.oScroll.bAutoCss&&(d.style.overflow="hidden",d.style.position="relative",h.style.overflow="hidden",f.style.overflow="auto");d.style.border=
"0";d.style.width="100%";h.style.border="0";g.style.width=""!==a.oScroll.sXInner?a.oScroll.sXInner:"100%";m.removeAttribute("id");m.style.marginLeft="0";a.nTable.style.marginLeft="0";null!==r&&(p.removeAttribute("id"),p.style.marginLeft="0");g=e(a.nTable).children("caption");0<g.length&&(g=g[0],"top"===g._captionSide?m.appendChild(g):"bottom"===g._captionSide&&r&&p.appendChild(g));""!==a.oScroll.sX&&(d.style.width=qa(a.oScroll.sX),f.style.width=qa(a.oScroll.sX),null!==r&&(h.style.width=qa(a.oScroll.sX)),
e(f).scroll(function(a){d.scrollLeft=this.scrollLeft;null!==r&&(h.scrollLeft=this.scrollLeft)}));""!==a.oScroll.sY&&(f.style.height=qa(a.oScroll.sY));a.aoDrawCallback.push({fn:Wa,sName:"scrolling"});a.oScroll.bInfinite&&e(f).scroll(function(){!a.bDrawing&&0!==e(this).scrollTop()&&e(this).scrollTop()+e(this).height()>e(a.nTable).height()-a.oScroll.iLoadGap&&a.fnDisplayEnd()<a.fnRecordsDisplay()&&(Va(a,"next"),Ca(a),Z(a))});a.nScrollHead=d;a.nScrollFoot=h;return c}function Wa(a){var b=a.nScrollHead.getElementsByTagName("div")[0],
c=b.getElementsByTagName("table")[0],d=a.nTable.parentNode,g,f,h,m,p,q,r,n,t=[],u=[],y=null!==a.nTFoot?a.nScrollFoot.getElementsByTagName("div")[0]:null,x=null!==a.nTFoot?y.getElementsByTagName("table")[0]:null,w=a.oBrowser.bScrollOversize,z=function(a){r=a.style;r.paddingTop="0";r.paddingBottom="0";r.borderTopWidth="0";r.borderBottomWidth="0";r.height=0};e(a.nTable).children("thead, tfoot").remove();g=e(a.nTHead).clone()[0];a.nTable.insertBefore(g,a.nTable.childNodes[0]);h=a.nTHead.getElementsByTagName("tr");
m=g.getElementsByTagName("tr");null!==a.nTFoot&&(p=e(a.nTFoot).clone()[0],a.nTable.insertBefore(p,a.nTable.childNodes[1]),q=a.nTFoot.getElementsByTagName("tr"),p=p.getElementsByTagName("tr"));""===a.oScroll.sX&&(d.style.width="100%",b.parentNode.style.width="100%");var B=K(a,g);g=0;for(f=B.length;g<f;g++)n=l(a,g),B[g].style.width=a.aoColumns[n].sWidth;null!==a.nTFoot&&Na(function(a){a.style.width=""},p);a.oScroll.bCollapse&&""!==a.oScroll.sY&&(d.style.height=d.offsetHeight+a.nTHead.offsetHeight+"px");
g=e(a.nTable).outerWidth();""===a.oScroll.sX?(a.nTable.style.width="100%",w&&(e("tbody",d).height()>d.offsetHeight||"scroll"==e(d).css("overflow-y"))&&(a.nTable.style.width=qa(e(a.nTable).outerWidth()-a.oScroll.iBarWidth))):""!==a.oScroll.sXInner?a.nTable.style.width=qa(a.oScroll.sXInner):g==e(d).width()&&e(d).height()<e(a.nTable).height()?(a.nTable.style.width=qa(g-a.oScroll.iBarWidth),e(a.nTable).outerWidth()>g-a.oScroll.iBarWidth&&(a.nTable.style.width=qa(g))):a.nTable.style.width=qa(g);g=e(a.nTable).outerWidth();
Na(z,m);Na(function(a){t.push(qa(e(a).width()))},m);Na(function(a,b){a.style.width=t[b]},h);e(m).height(0);null!==a.nTFoot&&(Na(z,p),Na(function(a){u.push(qa(e(a).width()))},p),Na(function(a,b){a.style.width=u[b]},q),e(p).height(0));Na(function(a,b){a.innerHTML="";a.style.width=t[b]},m);null!==a.nTFoot&&Na(function(a,b){a.innerHTML="";a.style.width=u[b]},p);e(a.nTable).outerWidth()<g?(h=d.scrollHeight>d.offsetHeight||"scroll"==e(d).css("overflow-y")?g+a.oScroll.iBarWidth:g,w&&(d.scrollHeight>d.offsetHeight||
"scroll"==e(d).css("overflow-y"))&&(a.nTable.style.width=qa(h-a.oScroll.iBarWidth)),d.style.width=qa(h),a.nScrollHead.style.width=qa(h),null!==a.nTFoot&&(a.nScrollFoot.style.width=qa(h)),""===a.oScroll.sX?Ja(a,1,"The table cannot fit into the current element which will cause column misalignment. The table has been drawn at its minimum possible width."):""!==a.oScroll.sXInner&&Ja(a,1,"The table cannot fit into the current element which will cause column misalignment. Increase the sScrollXInner value or remove it to allow automatic calculation")):
(d.style.width=qa("100%"),a.nScrollHead.style.width=qa("100%"),null!==a.nTFoot&&(a.nScrollFoot.style.width=qa("100%")));""===a.oScroll.sY&&w&&(d.style.height=qa(a.nTable.offsetHeight+a.oScroll.iBarWidth));""!==a.oScroll.sY&&a.oScroll.bCollapse&&(d.style.height=qa(a.oScroll.sY),w=""!==a.oScroll.sX&&a.nTable.offsetWidth>d.offsetWidth?a.oScroll.iBarWidth:0,a.nTable.offsetHeight<d.offsetHeight&&(d.style.height=qa(a.nTable.offsetHeight+w)));w=e(a.nTable).outerWidth();c.style.width=qa(w);b.style.width=
qa(w);c=e(a.nTable).height()>d.clientHeight||"scroll"==e(d).css("overflow-y");b.style.paddingRight=c?a.oScroll.iBarWidth+"px":"0px";null!==a.nTFoot&&(x.style.width=qa(w),y.style.width=qa(w),y.style.paddingRight=c?a.oScroll.iBarWidth+"px":"0px");e(d).scroll();if(a.bSorted||a.bFiltered)d.scrollTop=0}function Na(a,b,c){for(var d=0,e=0,g=b.length,f,h;e<g;){f=b[e].firstChild;for(h=c?c[e].firstChild:null;f;)1===f.nodeType&&(c?a(f,h,d):a(f,d),d++),f=f.nextSibling,h=c?h.nextSibling:null;e++}}function na(a,
c){if(!a||null===a||""===a)return 0;c||(c=b.body);var d,e=b.createElement("div");e.style.width=qa(a);c.appendChild(e);d=e.offsetWidth;c.removeChild(e);return d}function Aa(a){var c=0,d,g=0,f=a.aoColumns.length,h,l,m=e("th",a.nTHead),p=a.nTable.getAttribute("width");l=a.nTable.parentNode;for(h=0;h<f;h++)a.aoColumns[h].bVisible&&(g++,null!==a.aoColumns[h].sWidth&&(d=na(a.aoColumns[h].sWidthOrig,l),null!==d&&(a.aoColumns[h].sWidth=qa(d)),c++));if(f==m.length&&0===c&&g==f&&""===a.oScroll.sX&&""===a.oScroll.sY)for(h=
0;h<a.aoColumns.length;h++)d=e(m[h]).width(),null!==d&&(a.aoColumns[h].sWidth=qa(d));else{c=a.nTable.cloneNode(!1);h=a.nTHead.cloneNode(!0);g=b.createElement("tbody");d=b.createElement("tr");c.removeAttribute("id");c.appendChild(h);null!==a.nTFoot&&(c.appendChild(a.nTFoot.cloneNode(!0)),Na(function(a){a.style.width=""},c.getElementsByTagName("tr")));c.appendChild(g);g.appendChild(d);g=e("thead th",c);0===g.length&&(g=e("tbody tr:eq(0)>td",c));m=K(a,h);for(h=g=0;h<f;h++){var q=a.aoColumns[h];q.bVisible&&
null!==q.sWidthOrig&&""!==q.sWidthOrig?m[h-g].style.width=qa(q.sWidthOrig):q.bVisible?m[h-g].style.width="":g++}for(h=0;h<f;h++)a.aoColumns[h].bVisible&&(g=Ma(a,h),null!==g&&(g=g.cloneNode(!0),""!==a.aoColumns[h].sContentPadding&&(g.innerHTML+=a.aoColumns[h].sContentPadding),d.appendChild(g)));l.appendChild(c);""!==a.oScroll.sX&&""!==a.oScroll.sXInner?c.style.width=qa(a.oScroll.sXInner):""!==a.oScroll.sX?(c.style.width="",e(c).width()<l.offsetWidth&&(c.style.width=qa(l.offsetWidth))):""!==a.oScroll.sY?
c.style.width=qa(l.offsetWidth):p&&(c.style.width=qa(p));c.style.visibility="hidden";db(a,c);f=e("tbody tr:eq(0)",c).children();0===f.length&&(f=K(a,e("thead",c)[0]));if(""!==a.oScroll.sX){for(h=g=l=0;h<a.aoColumns.length;h++)a.aoColumns[h].bVisible&&(l=null===a.aoColumns[h].sWidthOrig?l+e(f[g]).outerWidth():l+(parseInt(a.aoColumns[h].sWidth.replace("px",""),10)+(e(f[g]).outerWidth()-e(f[g]).width())),g++);c.style.width=qa(l);a.nTable.style.width=qa(l)}for(h=g=0;h<a.aoColumns.length;h++)a.aoColumns[h].bVisible&&
(l=e(f[g]).width(),null!==l&&0<l&&(a.aoColumns[h].sWidth=qa(l)),g++);f=e(c).css("width");a.nTable.style.width=-1!==f.indexOf("%")?f:qa(e(c).outerWidth());c.parentNode.removeChild(c)}p&&(a.nTable.style.width=qa(p))}function db(a,b){""===a.oScroll.sX&&""!==a.oScroll.sY?(e(b).width(),b.style.width=qa(e(b).outerWidth()-a.oScroll.iBarWidth)):""!==a.oScroll.sX&&(b.style.width=qa(e(b).outerWidth()))}function Ma(a,c){var d=Pa(a,c);if(0>d)return null;if(null===a.aoData[d].nTr){var e=b.createElement("td");
e.innerHTML=C(a,d,c,"");return e}return Eb(a,d)[c]}function Pa(a,b){for(var c=-1,d=-1,e=0;e<a.aoData.length;e++){var g=C(a,e,b,"display")+"",g=g.replace(/<.*?>/g,"");g.length>c&&(c=g.length,d=e)}return d}function qa(a){if(null===a)return"0px";if("number"==typeof a)return 0>a?"0px":a+"px";var b=a.charCodeAt(a.length-1);return 48>b||57<b?a:a+"px"}function Kb(){var a=b.createElement("p"),c=a.style;c.width="100%";c.height="200px";c.padding="0px";var d=b.createElement("div"),c=d.style;c.position="absolute";
c.top="0px";c.left="0px";c.visibility="hidden";c.width="200px";c.height="150px";c.padding="0px";c.overflow="hidden";d.appendChild(a);b.body.appendChild(d);c=a.offsetWidth;d.style.overflow="scroll";a=a.offsetWidth;c==a&&(a=d.clientWidth);b.body.removeChild(d);return c-a}function eb(a,b){var g,f,h,l,p,q,r=[],n=[],t=d.ext.oSort,u=a.aoData,y=a.aoColumns,w=a.oLanguage.oAria;if(!a.oFeatures.bServerSide&&(0!==a.aaSorting.length||null!==a.aaSortingFixed)){r=null!==a.aaSortingFixed?a.aaSortingFixed.concat(a.aaSorting):
a.aaSorting.slice();for(g=0;g<r.length;g++)if(f=r[g][0],h=m(a,f),l=a.aoColumns[f].sSortDataType,d.ext.afnSortData[l])if(p=d.ext.afnSortData[l].call(a.oInstance,a,f,h),p.length===u.length)for(h=0,l=u.length;h<l;h++)D(a,h,f,p[h]);else Ja(a,0,"Returned data sort array (col "+f+") is the wrong length");g=0;for(f=a.aiDisplayMaster.length;g<f;g++)n[a.aiDisplayMaster[g]]=g;var x=r.length,z;g=0;for(f=u.length;g<f;g++)for(h=0;h<x;h++)for(z=y[r[h][0]].aDataSort,p=0,q=z.length;p<q;p++)l=y[z[p]].sType,l=t[(l?
l:"string")+"-pre"],u[g]._aSortData[z[p]]=l?l(C(a,g,z[p],"sort")):C(a,g,z[p],"sort");a.aiDisplayMaster.sort(function(a,b){var c,d,e,g,f;for(c=0;c<x;c++)for(f=y[r[c][0]].aDataSort,d=0,e=f.length;d<e;d++)if(g=y[f[d]].sType,g=t[(g?g:"string")+"-"+r[c][1]](u[a]._aSortData[f[d]],u[b]._aSortData[f[d]]),0!==g)return g;return t["numeric-asc"](n[a],n[b])})}b!==c&&!b||a.oFeatures.bDeferRender||mb(a);g=0;for(f=a.aoColumns.length;g<f;g++)l=y[g].sTitle.replace(/<.*?>/g,""),h=y[g].nTh,h.removeAttribute("aria-sort"),
h.removeAttribute("aria-label"),y[g].bSortable?0<r.length&&r[0][0]==g?(h.setAttribute("aria-sort","asc"==r[0][1]?"ascending":"descending"),h.setAttribute("aria-label",l+("asc"==(y[g].asSorting[r[0][2]+1]?y[g].asSorting[r[0][2]+1]:y[g].asSorting[0])?w.sSortAscending:w.sSortDescending))):h.setAttribute("aria-label",l+("asc"==y[g].asSorting[0]?w.sSortAscending:w.sSortDescending)):h.setAttribute("aria-label",l);a.bSorted=!0;e(a.oInstance).trigger("sort",a);a.oFeatures.bFilter?la(a,a.oPreviousSearch,1):
(a.aiDisplay=a.aiDisplayMaster.slice(),a._iDisplayStart=0,Ca(a),Z(a))}function jb(a,b,c,d){Nb(b,{},function(b){if(!1!==a.aoColumns[c].bSortable){var e=function(){var d,e;if(b.shiftKey){for(var g=!1,f=0;f<a.aaSorting.length;f++)if(a.aaSorting[f][0]==c){g=!0;d=a.aaSorting[f][0];e=a.aaSorting[f][2]+1;a.aoColumns[d].asSorting[e]?(a.aaSorting[f][1]=a.aoColumns[d].asSorting[e],a.aaSorting[f][2]=e):a.aaSorting.splice(f,1);break}!1===g&&a.aaSorting.push([c,a.aoColumns[c].asSorting[0],0])}else 1==a.aaSorting.length&&
a.aaSorting[0][0]==c?(d=a.aaSorting[0][0],e=a.aaSorting[0][2]+1,a.aoColumns[d].asSorting[e]||(e=0),a.aaSorting[0][1]=a.aoColumns[d].asSorting[e],a.aaSorting[0][2]=e):(a.aaSorting.splice(0,a.aaSorting.length),a.aaSorting.push([c,a.aoColumns[c].asSorting[0],0]));eb(a)};a.oFeatures.bProcessing?(Ya(a,!0),setTimeout(function(){e();a.oFeatures.bServerSide||Ya(a,!1)},0)):e();"function"==typeof d&&d(a)}})}function mb(a){var b,c,d,g,f,h=a.aoColumns.length,l=a.oClasses;for(b=0;b<h;b++)a.aoColumns[b].bSortable&&
e(a.aoColumns[b].nTh).removeClass(l.sSortAsc+" "+l.sSortDesc+" "+a.aoColumns[b].sSortingClass);c=null!==a.aaSortingFixed?a.aaSortingFixed.concat(a.aaSorting):a.aaSorting.slice();for(b=0;b<a.aoColumns.length;b++)if(a.aoColumns[b].bSortable){f=a.aoColumns[b].sSortingClass;g=-1;for(d=0;d<c.length;d++)if(c[d][0]==b){f="asc"==c[d][1]?l.sSortAsc:l.sSortDesc;g=d;break}e(a.aoColumns[b].nTh).addClass(f);a.bJUI&&(f=e("span."+l.sSortIcon,a.aoColumns[b].nTh),f.removeClass(l.sSortJUIAsc+" "+l.sSortJUIDesc+" "+
l.sSortJUI+" "+l.sSortJUIAscAllowed+" "+l.sSortJUIDescAllowed),f.addClass(-1==g?a.aoColumns[b].sSortingClassJUI:"asc"==c[g][1]?l.sSortJUIAsc:l.sSortJUIDesc))}else e(a.aoColumns[b].nTh).addClass(a.aoColumns[b].sSortingClass);f=l.sSortColumn;if(a.oFeatures.bSort&&a.oFeatures.bSortClasses){a=Eb(a);g=[];for(b=0;b<h;b++)g.push("");b=0;for(d=1;b<c.length;b++)l=parseInt(c[b][0],10),g[l]=f+d,3>d&&d++;f=new RegExp(f+"[123]");var m;b=0;for(c=a.length;b<c;b++)l=b%h,d=a[b].className,m=g[l],l=d.replace(f,m),l!=
d?a[b].className=e.trim(l):0<m.length&&-1==d.indexOf(m)&&(a[b].className=d+" "+m)}}function ka(a){if(a.oFeatures.bStateSave&&!a.bDestroying){var b,c;b=a.oScroll.bInfinite;var d={iCreate:(new Date).getTime(),iStart:b?0:a._iDisplayStart,iEnd:b?a._iDisplayLength:a._iDisplayEnd,iLength:a._iDisplayLength,aaSorting:e.extend(!0,[],a.aaSorting),oSearch:e.extend(!0,{},a.oPreviousSearch),aoSearchCols:e.extend(!0,[],a.aoPreSearchCols),abVisCols:[]};b=0;for(c=a.aoColumns.length;b<c;b++)d.abVisCols.push(a.aoColumns[b].bVisible);
ca(a,"aoStateSaveParams","stateSaveParams",[a,d]);a.fnStateSave.call(a.oInstance,a,d)}}function Za(a,b){if(a.oFeatures.bStateSave){var c=a.fnStateLoad.call(a.oInstance,a);if(c){var d=ca(a,"aoStateLoadParams","stateLoadParams",[a,c]);if(-1===e.inArray(!1,d)){a.oLoadedState=e.extend(!0,{},c);a._iDisplayStart=c.iStart;a.iInitDisplayStart=c.iStart;a._iDisplayEnd=c.iEnd;a._iDisplayLength=c.iLength;a.aaSorting=c.aaSorting.slice();a.saved_aaSorting=c.aaSorting.slice();e.extend(a.oPreviousSearch,c.oSearch);
e.extend(!0,a.aoPreSearchCols,c.aoSearchCols);b.saved_aoColumns=[];for(d=0;d<c.abVisCols.length;d++)b.saved_aoColumns[d]={},b.saved_aoColumns[d].bVisible=c.abVisCols[d];ca(a,"aoStateLoaded","stateLoaded",[a,c])}}}}function xa(a){for(var b=0;b<d.settings.length;b++)if(d.settings[b].nTable===a)return d.settings[b];return null}function ub(a){var b=[];a=a.aoData;for(var c=0,d=a.length;c<d;c++)null!==a[c].nTr&&b.push(a[c].nTr);return b}function Eb(a,b){var d=[],e,g,f,h,l,m;g=0;var p=a.aoData.length;b!==
c&&(g=b,p=b+1);for(f=g;f<p;f++)if(m=a.aoData[f],null!==m.nTr){g=[];for(e=m.nTr.firstChild;e;)h=e.nodeName.toLowerCase(),"td"!=h&&"th"!=h||g.push(e),e=e.nextSibling;h=e=0;for(l=a.aoColumns.length;h<l;h++)a.aoColumns[h].bVisible?d.push(g[h-e]):(d.push(m._anHidden[h]),e++)}return d}function Ja(b,c,e){b=null===b?"DataTables warning: "+e:"DataTables warning (table id = '"+b.sTableId+"'): "+e;if(0===c)if("alert"==d.ext.sErrMode)alert(b);else throw Error(b);else a.console&&console.log&&console.log(b)}function oa(a,
b,d,e){e===c&&(e=d);b[d]!==c&&(a[e]=b[d])}function Cb(a,b){var c,d;for(d in b)b.hasOwnProperty(d)&&(c=b[d],"object"===typeof f[d]&&null!==c&&!1===e.isArray(c)?e.extend(!0,a[d],c):a[d]=c);return a}function Nb(a,b,c){e(a).bind("click.DT",b,function(b){a.blur();c(b)}).bind("keypress.DT",b,function(a){13===a.which&&c(a)}).bind("selectstart.DT",function(){return!1})}function da(a,b,c,d){c&&a[b].push({fn:c,sName:d})}function ca(a,b,c,d){b=a[b];for(var g=[],f=b.length-1;0<=f;f--)g.push(b[f].fn.apply(a.oInstance,
d));null!==c&&e(a.oInstance).trigger(c,d);return g}function ab(a){var c=e('<div style="position:absolute; top:0; left:0; height:1px; width:1px; overflow:hidden"><div style="position:absolute; top:1px; left:1px; width:100px; overflow:scroll;"><div id="DT_BrowserTest" style="width:100%; height:10px;"></div></div></div>')[0];b.body.appendChild(c);a.oBrowser.bScrollOversize=100===e("#DT_BrowserTest",c)[0].offsetWidth?!0:!1;b.body.removeChild(c)}function va(a){return function(){var b=[xa(this[d.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));
return d.ext.oApi[a].apply(this,b)}}var Da=/\[.*?\]$/,Ta=a.JSON?JSON.stringify:function(a){var b=typeof a;if("object"!==b||null===a)return"string"===b&&(a='"'+a+'"'),a+"";var c,d,g=[],f=e.isArray(a);for(c in a)d=a[c],b=typeof d,"string"===b?d='"'+d+'"':"object"===b&&null!==d&&(d=Ta(d)),g.push((f?"":'"'+c+'":')+d);return(f?"[":"{")+g+(f?"]":"}")};this.$=function(a,b){var c,g,f=[],h;g=xa(this[d.ext.iApiIndex]);var l=g.aoData,m=g.aiDisplay,p=g.aiDisplayMaster;b||(b={});b=e.extend({},{filter:"none",order:"current",
page:"all"},b);if("current"==b.page)for(c=g._iDisplayStart,g=g.fnDisplayEnd();c<g;c++)(h=l[m[c]].nTr)&&f.push(h);else if("current"==b.order&&"none"==b.filter)for(c=0,g=p.length;c<g;c++)(h=l[p[c]].nTr)&&f.push(h);else if("current"==b.order&&"applied"==b.filter)for(c=0,g=m.length;c<g;c++)(h=l[m[c]].nTr)&&f.push(h);else if("original"==b.order&&"none"==b.filter)for(c=0,g=l.length;c<g;c++)(h=l[c].nTr)&&f.push(h);else if("original"==b.order&&"applied"==b.filter)for(c=0,g=l.length;c<g;c++)h=l[c].nTr,-1!==
e.inArray(c,m)&&h&&f.push(h);else Ja(g,1,"Unknown selection options");f=e(f);c=f.filter(a);f=f.find(a);return e([].concat(e.makeArray(c),e.makeArray(f)))};this._=function(a,b){var c=[],d,e,g=this.$(a,b);d=0;for(e=g.length;d<e;d++)c.push(this.fnGetData(g[d]));return c};this.fnAddData=function(a,b){if(0===a.length)return[];var e=[],g,f=xa(this[d.ext.iApiIndex]);if("object"===typeof a[0]&&null!==a[0])for(var h=0;h<a.length;h++){g=x(f,a[h]);if(-1==g)return e;e.push(g)}else{g=x(f,a);if(-1==g)return e;
e.push(g)}f.aiDisplay=f.aiDisplayMaster.slice();(b===c||b)&&X(f);return e};this.fnAdjustColumnSizing=function(a){var b=xa(this[d.ext.iApiIndex]);g(b);a===c||a?this.fnDraw(!1):""===b.oScroll.sX&&""===b.oScroll.sY||this.oApi._fnScrollDraw(b)};this.fnClearTable=function(a){var b=xa(this[d.ext.iApiIndex]);J(b);(a===c||a)&&Z(b)};this.fnClose=function(a){for(var b=xa(this[d.ext.iApiIndex]),c=0;c<b.aoOpenRows.length;c++)if(b.aoOpenRows[c].nParent==a)return(a=b.aoOpenRows[c].nTr.parentNode)&&a.removeChild(b.aoOpenRows[c].nTr),
b.aoOpenRows.splice(c,1),0;return 1};this.fnDeleteRow=function(a,b,g){var f=xa(this[d.ext.iApiIndex]),h,l;a="object"===typeof a?y(f,a):a;var m=f.aoData.splice(a,1);h=0;for(l=f.aoData.length;h<l;h++)null!==f.aoData[h].nTr&&(f.aoData[h].nTr._DT_RowIndex=h);h=e.inArray(a,f.aiDisplay);f.asDataSearch.splice(h,1);M(f.aiDisplayMaster,a);M(f.aiDisplay,a);"function"===typeof b&&b.call(this,f,m);f._iDisplayStart>=f.fnRecordsDisplay()&&(f._iDisplayStart-=f._iDisplayLength,0>f._iDisplayStart&&(f._iDisplayStart=
0));if(g===c||g)Ca(f),Z(f);return m};this.fnDestroy=function(a){var b=xa(this[d.ext.iApiIndex]),g=b.nTableWrapper.parentNode,h=b.nTBody,l,m;a=a===c?!1:a;b.bDestroying=!0;ca(b,"aoDestroyCallback","destroy",[b]);if(!a)for(l=0,m=b.aoColumns.length;l<m;l++)!1===b.aoColumns[l].bVisible&&this.fnSetColumnVis(l,!0);e(b.nTableWrapper).find("*").andSelf().unbind(".DT");e("tbody>tr>td."+b.oClasses.sRowEmpty,b.nTable).parent().remove();b.nTable!=b.nTHead.parentNode&&(e(b.nTable).children("thead").remove(),b.nTable.appendChild(b.nTHead));
b.nTFoot&&b.nTable!=b.nTFoot.parentNode&&(e(b.nTable).children("tfoot").remove(),b.nTable.appendChild(b.nTFoot));b.nTable.parentNode.removeChild(b.nTable);e(b.nTableWrapper).remove();b.aaSorting=[];b.aaSortingFixed=[];mb(b);e(ub(b)).removeClass(b.asStripeClasses.join(" "));e("th, td",b.nTHead).removeClass([b.oClasses.sSortable,b.oClasses.sSortableAsc,b.oClasses.sSortableDesc,b.oClasses.sSortableNone].join(" "));b.bJUI&&(e("th span."+b.oClasses.sSortIcon+", td span."+b.oClasses.sSortIcon,b.nTHead).remove(),
e("th, td",b.nTHead).each(function(){var a=e("div."+b.oClasses.sSortJUIWrapper,this),c=a.contents();e(this).append(c);a.remove()}));!a&&b.nTableReinsertBefore?g.insertBefore(b.nTable,b.nTableReinsertBefore):a||g.appendChild(b.nTable);l=0;for(m=b.aoData.length;l<m;l++)null!==b.aoData[l].nTr&&h.appendChild(b.aoData[l].nTr);!0===b.oFeatures.bAutoWidth&&(b.nTable.style.width=qa(b.sDestroyWidth));if(m=b.asDestroyStripes.length)for(a=e(h).children("tr"),l=0;l<m;l++)a.filter(":nth-child("+m+"n + "+l+")").addClass(b.asDestroyStripes[l]);
l=0;for(m=d.settings.length;l<m;l++)d.settings[l]==b&&d.settings.splice(l,1);f=b=null};this.fnDraw=function(a){var b=xa(this[d.ext.iApiIndex]);!1===a?(Ca(b),Z(b)):X(b)};this.fnFilter=function(a,g,f,h,l,m){var p=xa(this[d.ext.iApiIndex]);if(p.oFeatures.bFilter){if(f===c||null===f)f=!1;if(h===c||null===h)h=!0;if(l===c||null===l)l=!0;if(m===c||null===m)m=!0;if(g===c||null===g){if(la(p,{sSearch:a+"",bRegex:f,bSmart:h,bCaseInsensitive:m},1),l&&p.aanFeatures.f)for(g=p.aanFeatures.f,f=0,h=g.length;f<h;f++)try{g[f]._DT_Input!=
b.activeElement&&e(g[f]._DT_Input).val(a)}catch(q){e(g[f]._DT_Input).val(a)}}else e.extend(p.aoPreSearchCols[g],{sSearch:a+"",bRegex:f,bSmart:h,bCaseInsensitive:m}),la(p,p.oPreviousSearch,1)}};this.fnGetData=function(a,b){var e=xa(this[d.ext.iApiIndex]);if(a!==c){var g=a;if("object"===typeof a){var f=a.nodeName.toLowerCase();"tr"===f?g=y(e,a):"td"===f&&(g=y(e,a.parentNode),b=B(e,g,a))}return b!==c?C(e,g,b,""):e.aoData[g]!==c?e.aoData[g]._aData:null}return L(e)};this.fnGetNodes=function(a){var b=xa(this[d.ext.iApiIndex]);
return a!==c?b.aoData[a]!==c?b.aoData[a].nTr:null:ub(b)};this.fnGetPosition=function(a){var b=xa(this[d.ext.iApiIndex]),c=a.nodeName.toUpperCase();return"TR"==c?y(b,a):"TD"==c||"TH"==c?(c=y(b,a.parentNode),a=B(b,c,a),[c,m(b,a),a]):null};this.fnIsOpen=function(a){for(var b=xa(this[d.ext.iApiIndex]),c=0;c<b.aoOpenRows.length;c++)if(b.aoOpenRows[c].nParent==a)return!0;return!1};this.fnOpen=function(a,c,g){var f=xa(this[d.ext.iApiIndex]),h=ub(f);if(-1!==e.inArray(a,h)){this.fnClose(a);var h=b.createElement("tr"),
l=b.createElement("td");h.appendChild(l);l.className=g;l.colSpan=p(f);"string"===typeof c?l.innerHTML=c:e(l).html(c);c=e("tr",f.nTBody);-1!=e.inArray(a,c)&&e(h).insertAfter(a);f.aoOpenRows.push({nTr:h,nParent:a});return h}};this.fnPageChange=function(a,b){var e=xa(this[d.ext.iApiIndex]);Va(e,a);Ca(e);(b===c||b)&&Z(e)};this.fnSetColumnVis=function(a,b,e){var f=xa(this[d.ext.iApiIndex]),h,l,m=f.aoColumns,q=f.aoData,r,n;if(m[a].bVisible!=b){if(b){for(h=l=0;h<a;h++)m[h].bVisible&&l++;n=l>=p(f);if(!n)for(h=
a;h<m.length;h++)if(m[h].bVisible){r=h;break}h=0;for(l=q.length;h<l;h++)null!==q[h].nTr&&(n?q[h].nTr.appendChild(q[h]._anHidden[a]):q[h].nTr.insertBefore(q[h]._anHidden[a],Eb(f,h)[r]))}else for(h=0,l=q.length;h<l;h++)null!==q[h].nTr&&(r=Eb(f,h)[a],q[h]._anHidden[a]=r,r.parentNode.removeChild(r));m[a].bVisible=b;N(f,f.aoHeader);f.nTFoot&&N(f,f.aoFooter);h=0;for(l=f.aoOpenRows.length;h<l;h++)f.aoOpenRows[h].nTr.colSpan=p(f);if(e===c||e)g(f),Z(f);ka(f)}};this.fnSettings=function(){return xa(this[d.ext.iApiIndex])};
this.fnSort=function(a){var b=xa(this[d.ext.iApiIndex]);b.aaSorting=a;eb(b)};this.fnSortListener=function(a,b,c){jb(xa(this[d.ext.iApiIndex]),a,b,c)};this.fnUpdate=function(a,b,f,h,l){var m=xa(this[d.ext.iApiIndex]);b="object"===typeof b?y(m,b):b;if(e.isArray(a)&&f===c)for(m.aoData[b]._aData=a.slice(),f=0;f<m.aoColumns.length;f++)this.fnUpdate(C(m,b,f),b,f,!1,!1);else if(e.isPlainObject(a)&&f===c)for(m.aoData[b]._aData=e.extend(!0,{},a),f=0;f<m.aoColumns.length;f++)this.fnUpdate(C(m,b,f),b,f,!1,!1);
else{D(m,b,f,a);a=C(m,b,f,"display");var p=m.aoColumns[f];null!==p.fnRender&&(a=V(m,b,f),p.bUseRendered&&D(m,b,f,a));null!==m.aoData[b].nTr&&(Eb(m,b)[f].innerHTML=a)}f=e.inArray(b,m.aiDisplay);m.asDataSearch[f]=v(m,A(m,b,"filter",t(m,"bSearchable")));(l===c||l)&&g(m);(h===c||h)&&X(m);return 0};this.fnVersionCheck=d.ext.fnVersionCheck;this.oApi={_fnExternApiFunc:va,_fnInitialise:Oa,_fnInitComplete:pb,_fnLanguageCompat:qb,_fnAddColumn:n,_fnColumnOptions:h,_fnAddData:x,_fnCreateTr:T,_fnGatherData:z,
_fnBuildHead:O,_fnDrawHead:N,_fnDraw:Z,_fnReDraw:X,_fnAjaxUpdate:U,_fnAjaxParameters:Q,_fnAjaxUpdateDraw:S,_fnServerParams:ma,_fnAddOptionsHtml:P,_fnFeatureHtmlTable:cb,_fnScrollDraw:Wa,_fnAdjustColumnSizing:g,_fnFeatureHtmlFilter:W,_fnFilterComplete:la,_fnFilterCustom:sa,_fnFilterColumn:aa,_fnFilter:ea,_fnBuildSearchArray:Ia,_fnBuildSearchRow:v,_fnFilterCreateSearch:Ea,_fnDataToSearch:pa,_fnSort:eb,_fnSortAttachListener:jb,_fnSortingClasses:mb,_fnFeatureHtmlPaginate:Ra,_fnPageChange:Va,_fnFeatureHtmlInfo:ib,
_fnUpdateInfo:Ka,_fnFeatureHtmlLength:Xa,_fnFeatureHtmlProcessing:sb,_fnProcessingDisplay:Ya,_fnVisibleToColumnIndex:l,_fnColumnIndexToVisible:m,_fnNodeToDataIndex:y,_fnVisbleColumns:p,_fnCalculateEnd:Ca,_fnConvertToWidth:na,_fnCalculateColumnWidths:Aa,_fnScrollingWidthAdjust:db,_fnGetWidestNode:Ma,_fnGetMaxLenString:Pa,_fnStringToCss:qa,_fnDetectType:r,_fnSettingsFromNode:xa,_fnGetDataMaster:L,_fnGetTrNodes:ub,_fnGetTdNodes:Eb,_fnEscapeRegex:ya,_fnDeleteIndex:M,_fnReOrderIndex:q,_fnColumnOrdering:w,
_fnLog:Ja,_fnClearTable:J,_fnSaveState:ka,_fnLoadState:Za,_fnCreateCookie:function(c,d,g,f,h){var l=new Date;l.setTime(l.getTime()+1E3*g);g=a.location.pathname.split("/");c=c+"_"+g.pop().replace(/[\/:]/g,"").toLowerCase();var m;null!==h?(m="function"===typeof e.parseJSON?e.parseJSON(d):eval("("+d+")"),d=h(c,m,l.toGMTString(),g.join("/")+"/")):d=c+"="+encodeURIComponent(d)+"; expires="+l.toGMTString()+"; path="+g.join("/")+"/";c=b.cookie.split(";");h=d.split(";")[0].length;l=[];if(4096<h+b.cookie.length+
10){for(var p=0,q=c.length;p<q;p++)if(-1!=c[p].indexOf(f)){var r=c[p].split("=");try{(m=eval("("+decodeURIComponent(r[1])+")"))&&m.iCreate&&l.push({name:r[0],time:m.iCreate})}catch(n){}}for(l.sort(function(a,b){return b.time-a.time});4096<h+b.cookie.length+10;){if(0===l.length)return;f=l.pop();b.cookie=f.name+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path="+g.join("/")+"/"}}b.cookie=d},_fnReadCookie:function(c){var d=a.location.pathname.split("/");c=c+"_"+d[d.length-1].replace(/[\/:]/g,"").toLowerCase()+
"=";for(var d=b.cookie.split(";"),e=0;e<d.length;e++){for(var g=d[e];" "==g.charAt(0);)g=g.substring(1,g.length);if(0===g.indexOf(c))return decodeURIComponent(g.substring(c.length,g.length))}return null},_fnDetectHeader:R,_fnGetUniqueThs:K,_fnScrollBarWidth:Kb,_fnApplyToChildren:Na,_fnMap:oa,_fnGetRowData:A,_fnGetCellData:C,_fnSetCellData:D,_fnGetObjectDataFn:H,_fnSetObjectDataFn:G,_fnApplyColumnDefs:u,_fnBindAction:Nb,_fnExtend:Cb,_fnCallbackReg:da,_fnCallbackFire:ca,_fnJsonString:Ta,_fnRender:V,
_fnNodeToColumnIndex:B,_fnInfoMacros:Fa,_fnBrowserDetect:ab,_fnGetColumns:t};e.extend(d.ext.oApi,this.oApi);for(var ja in d.ext.oApi)ja&&(this[ja]=va(ja));var Sa=this;this.each(function(){var a=0,g,l,m;l=this.getAttribute("id");var p=!1,q=!1;if("table"!=this.nodeName.toLowerCase())Ja(null,0,"Attempted to initialise DataTables on a node which is not a table: "+this.nodeName);else{a=0;for(g=d.settings.length;a<g;a++){if(d.settings[a].nTable==this){if(f===c||f.bRetrieve)return d.settings[a].oInstance;
if(f.bDestroy){d.settings[a].oInstance.fnDestroy();break}else{Ja(d.settings[a],0,"Cannot reinitialise DataTable.\n\nTo retrieve the DataTables object for this table, pass no arguments or see the docs for bRetrieve and bDestroy");return}}if(d.settings[a].sTableId==this.id){d.settings.splice(a,1);break}}if(null===l||""===l)this.id=l="DataTables_Table_"+d.ext._oExternConfig.iNextUnique++;var r=e.extend(!0,{},d.models.oSettings,{nTable:this,oApi:Sa.oApi,oInit:f,sDestroyWidth:e(this).width(),sInstance:l,
sTableId:l});d.settings.push(r);r.oInstance=1===Sa.length?Sa:e(this).dataTable();f||(f={});f.oLanguage&&qb(f.oLanguage);f=Cb(e.extend(!0,{},d.defaults),f);oa(r.oFeatures,f,"bPaginate");oa(r.oFeatures,f,"bLengthChange");oa(r.oFeatures,f,"bFilter");oa(r.oFeatures,f,"bSort");oa(r.oFeatures,f,"bInfo");oa(r.oFeatures,f,"bProcessing");oa(r.oFeatures,f,"bAutoWidth");oa(r.oFeatures,f,"bSortClasses");oa(r.oFeatures,f,"bServerSide");oa(r.oFeatures,f,"bDeferRender");oa(r.oScroll,f,"sScrollX","sX");oa(r.oScroll,
f,"sScrollXInner","sXInner");oa(r.oScroll,f,"sScrollY","sY");oa(r.oScroll,f,"bScrollCollapse","bCollapse");oa(r.oScroll,f,"bScrollInfinite","bInfinite");oa(r.oScroll,f,"iScrollLoadGap","iLoadGap");oa(r.oScroll,f,"bScrollAutoCss","bAutoCss");oa(r,f,"asStripeClasses");oa(r,f,"asStripClasses","asStripeClasses");oa(r,f,"fnServerData");oa(r,f,"fnFormatNumber");oa(r,f,"sServerMethod");oa(r,f,"aaSorting");oa(r,f,"aaSortingFixed");oa(r,f,"aLengthMenu");oa(r,f,"sPaginationType");oa(r,f,"sAjaxSource");oa(r,
f,"sAjaxDataProp");oa(r,f,"iCookieDuration");oa(r,f,"sCookiePrefix");oa(r,f,"sDom");oa(r,f,"bSortCellsTop");oa(r,f,"iTabIndex");oa(r,f,"oSearch","oPreviousSearch");oa(r,f,"aoSearchCols","aoPreSearchCols");oa(r,f,"iDisplayLength","_iDisplayLength");oa(r,f,"bJQueryUI","bJUI");oa(r,f,"fnCookieCallback");oa(r,f,"fnStateLoad");oa(r,f,"fnStateSave");oa(r.oLanguage,f,"fnInfoCallback");da(r,"aoDrawCallback",f.fnDrawCallback,"user");da(r,"aoServerParams",f.fnServerParams,"user");da(r,"aoStateSaveParams",f.fnStateSaveParams,
"user");da(r,"aoStateLoadParams",f.fnStateLoadParams,"user");da(r,"aoStateLoaded",f.fnStateLoaded,"user");da(r,"aoRowCallback",f.fnRowCallback,"user");da(r,"aoRowCreatedCallback",f.fnCreatedRow,"user");da(r,"aoHeaderCallback",f.fnHeaderCallback,"user");da(r,"aoFooterCallback",f.fnFooterCallback,"user");da(r,"aoInitComplete",f.fnInitComplete,"user");da(r,"aoPreDrawCallback",f.fnPreDrawCallback,"user");r.oFeatures.bServerSide&&r.oFeatures.bSort&&r.oFeatures.bSortClasses?da(r,"aoDrawCallback",mb,"server_side_sort_classes"):
r.oFeatures.bDeferRender&&da(r,"aoDrawCallback",mb,"defer_sort_classes");f.bJQueryUI?(e.extend(r.oClasses,d.ext.oJUIClasses),f.sDom===d.defaults.sDom&&"lfrtip"===d.defaults.sDom&&(r.sDom='<"H"lfr>t<"F"ip>')):e.extend(r.oClasses,d.ext.oStdClasses);e(this).addClass(r.oClasses.sTable);if(""!==r.oScroll.sX||""!==r.oScroll.sY)r.oScroll.iBarWidth=Kb();r.iInitDisplayStart===c&&(r.iInitDisplayStart=f.iDisplayStart,r._iDisplayStart=f.iDisplayStart);f.bStateSave&&(r.oFeatures.bStateSave=!0,Za(r,f),da(r,"aoDrawCallback",
ka,"state_save"));null!==f.iDeferLoading&&(r.bDeferLoading=!0,a=e.isArray(f.iDeferLoading),r._iRecordsDisplay=a?f.iDeferLoading[0]:f.iDeferLoading,r._iRecordsTotal=a?f.iDeferLoading[1]:f.iDeferLoading);null!==f.aaData&&(q=!0);""!==f.oLanguage.sUrl?(r.oLanguage.sUrl=f.oLanguage.sUrl,e.getJSON(r.oLanguage.sUrl,null,function(a){qb(a);e.extend(!0,r.oLanguage,f.oLanguage,a);Oa(r)}),p=!0):e.extend(!0,r.oLanguage,f.oLanguage);null===f.asStripeClasses&&(r.asStripeClasses=[r.oClasses.sStripeOdd,r.oClasses.sStripeEven]);
g=r.asStripeClasses.length;r.asDestroyStripes=[];if(g){l=!1;m=e(this).children("tbody").children("tr:lt("+g+")");for(a=0;a<g;a++)m.hasClass(r.asStripeClasses[a])&&(l=!0,r.asDestroyStripes.push(r.asStripeClasses[a]));l&&m.removeClass(r.asStripeClasses.join(" "))}l=[];a=this.getElementsByTagName("thead");0!==a.length&&(R(r.aoHeader,a[0]),l=K(r));if(null===f.aoColumns)for(m=[],a=0,g=l.length;a<g;a++)m.push(null);else m=f.aoColumns;a=0;for(g=m.length;a<g;a++)f.saved_aoColumns!==c&&f.saved_aoColumns.length==
g&&(null===m[a]&&(m[a]={}),m[a].bVisible=f.saved_aoColumns[a].bVisible),n(r,l?l[a]:null);u(r,f.aoColumnDefs,m,function(a,b){h(r,a,b)});a=0;for(g=r.aaSorting.length;a<g;a++){r.aaSorting[a][0]>=r.aoColumns.length&&(r.aaSorting[a][0]=0);var t=r.aoColumns[r.aaSorting[a][0]];r.aaSorting[a][2]===c&&(r.aaSorting[a][2]=0);f.aaSorting===c&&r.saved_aaSorting===c&&(r.aaSorting[a][1]=t.asSorting[0]);l=0;for(m=t.asSorting.length;l<m;l++)if(r.aaSorting[a][1]==t.asSorting[l]){r.aaSorting[a][2]=l;break}}mb(r);ab(r);
a=e(this).children("caption").each(function(){this._captionSide=e(this).css("caption-side")});g=e(this).children("thead");0===g.length&&(g=[b.createElement("thead")],this.appendChild(g[0]));r.nTHead=g[0];g=e(this).children("tbody");0===g.length&&(g=[b.createElement("tbody")],this.appendChild(g[0]));r.nTBody=g[0];r.nTBody.setAttribute("role","alert");r.nTBody.setAttribute("aria-live","polite");r.nTBody.setAttribute("aria-relevant","all");g=e(this).children("tfoot");0===g.length&&0<a.length&&(""!==
r.oScroll.sX||""!==r.oScroll.sY)&&(g=[b.createElement("tfoot")],this.appendChild(g[0]));0<g.length&&(r.nTFoot=g[0],R(r.aoFooter,r.nTFoot));if(q)for(a=0;a<f.aaData.length;a++)x(r,f.aaData[a]);else z(r);r.aiDisplay=r.aiDisplayMaster.slice();r.bInitialised=!0;!1===p&&Oa(r)}});Sa=null;return this};d.fnVersionCheck=function(a){var b=function(a,b){for(;a.length<b;)a+="0";return a},c=d.ext.sVersion.split(".");a=a.split(".");for(var e="",l="",m=0,p=a.length;m<p;m++)e+=b(c[m],3),l+=b(a[m],3);return parseInt(e,
10)>=parseInt(l,10)};d.fnIsDataTable=function(a){for(var b=d.settings,c=0;c<b.length;c++)if(b[c].nTable===a||b[c].nScrollHead===a||b[c].nScrollFoot===a)return!0;return!1};d.fnTables=function(a){var b=[];jQuery.each(d.settings,function(c,d){(!a||!0===a&&e(d.nTable).is(":visible"))&&b.push(d.nTable)});return b};d.version="1.9.4";d.settings=[];d.models={};d.models.ext={afnFiltering:[],afnSortData:[],aoFeatures:[],aTypes:[],fnVersionCheck:d.fnVersionCheck,iApiIndex:0,ofnSearch:{},oApi:{},oStdClasses:{},
oJUIClasses:{},oPagination:{},oSort:{},sVersion:d.version,sErrMode:"alert",_oExternConfig:{iNextUnique:0}};d.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0};d.models.oRow={nTr:null,_aData:[],_aSortData:[],_anHidden:[],_sRowStripe:""};d.models.oColumn={aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bUseRendered:null,bVisible:null,_bAutoType:!0,fnCreatedCell:null,fnGetData:null,fnRender:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,
sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null};d.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollAutoCss:!0,bScrollCollapse:!1,bScrollInfinite:!1,bServerSide:!1,
bSort:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCookieCallback:null,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(a){if(1E3>a)return a;var b=a+"";a=b.split("");for(var c="",b=b.length,d=0;d<b;d++)0===d%3&&0!==d&&(c=this.oLanguage.sInfoThousands+c),c=a[b-d-1]+c;return c},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:function(a,b,c,d){d.jqXHR=e.ajax({url:a,data:b,success:function(a){a.sError&&
d.oApi._fnLog(d,0,a.sError);e(d.oInstance).trigger("xhr",[d,a]);c(a)},dataType:"json",cache:!1,type:d.sServerMethod,error:function(a,b,c){"parsererror"==b&&d.oApi._fnLog(d,0,"DataTables warning: JSON data from server could not be parsed. This is caused by a JSON formatting error.")}})},fnServerParams:null,fnStateLoad:function(a){a=this.oApi._fnReadCookie(a.sCookiePrefix+a.sInstance);var b;try{b="function"===typeof e.parseJSON?e.parseJSON(a):eval("("+a+")")}catch(c){b=null}return b},fnStateLoadParams:null,
fnStateLoaded:null,fnStateSave:function(a,b){this.oApi._fnCreateCookie(a.sCookiePrefix+a.sInstance,this.oApi._fnJsonString(b),a.iCookieDuration,a.sCookiePrefix,a.fnCookieCallback)},fnStateSaveParams:null,iCookieDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iScrollLoadGap:100,iTabIndex:0,oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},
sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sInfoThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sUrl:"",sZeroRecords:"No matching records found"},oSearch:e.extend({},d.models.oSearch),sAjaxDataProp:"aaData",sAjaxSource:null,sCookiePrefix:"SpryMedia_DataTables_",sDom:"lfrtip",
sPaginationType:"two_button",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET"};d.defaults.columns={aDataSort:null,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bUseRendered:!0,bVisible:!0,fnCreatedCell:null,fnRender:null,iDataSort:-1,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null};d.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,
bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortClasses:null,bStateSave:null},oScroll:{bAutoCss:null,bCollapse:null,bInfinite:null,iBarWidth:0,iLoadGap:null,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1},aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aoColumns:[],aoHeader:[],aoFooter:[],asDataSearch:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:null,asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,
aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,sPaginationType:"two_button",iCookieDuration:0,sCookiePrefix:"",fnCookieCallback:null,aoStateSave:[],aoStateLoad:[],oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,
bAjaxDataGet:!0,jqXHR:null,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iDisplayEnd:10,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return this.oFeatures.bServerSide?parseInt(this._iRecordsTotal,10):this.aiDisplayMaster.length},fnRecordsDisplay:function(){return this.oFeatures.bServerSide?
parseInt(this._iRecordsDisplay,10):this.aiDisplay.length},fnDisplayEnd:function(){return this.oFeatures.bServerSide?!1===this.oFeatures.bPaginate||-1==this._iDisplayLength?this._iDisplayStart+this.aiDisplay.length:Math.min(this._iDisplayStart+this._iDisplayLength,this._iRecordsDisplay):this._iDisplayEnd},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null};d.ext=e.extend(!0,{},d.models.ext);e.extend(d.ext.oStdClasses,{sTable:"dataTable",sPagePrevEnabled:"paginate_enabled_previous",
sPagePrevDisabled:"paginate_disabled_previous",sPageNextEnabled:"paginate_enabled_next",sPageNextDisabled:"paginate_disabled_next",sPageJUINext:"",sPageJUIPrev:"",sPageButton:"paginate_button",sPageButtonActive:"paginate_active",sPageButtonStaticDisabled:"paginate_button paginate_button_disabled",sPageFirst:"first",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",
sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",
sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:"",sJUIHeader:"",sJUIFooter:""});e.extend(d.ext.oJUIClasses,d.ext.oStdClasses,{sPagePrevEnabled:"fg-button ui-button ui-state-default ui-corner-left",sPagePrevDisabled:"fg-button ui-button ui-state-default ui-corner-left ui-state-disabled",sPageNextEnabled:"fg-button ui-button ui-state-default ui-corner-right",sPageNextDisabled:"fg-button ui-button ui-state-default ui-corner-right ui-state-disabled",
sPageJUINext:"ui-icon ui-icon-circle-arrow-e",sPageJUIPrev:"ui-icon ui-icon-circle-arrow-w",sPageButton:"fg-button ui-button ui-state-default",sPageButtonActive:"fg-button ui-button ui-state-default ui-state-disabled",sPageButtonStaticDisabled:"fg-button ui-button ui-state-default ui-state-disabled",sPageFirst:"first ui-corner-tl ui-corner-bl",sPageLast:"last ui-corner-tr ui-corner-br",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:"ui-state-default",
sSortDesc:"ui-state-default",sSortable:"ui-state-default",sSortableAsc:"ui-state-default",sSortableDesc:"ui-state-default",sSortableNone:"ui-state-default",sSortJUIAsc:"css_right ui-icon ui-icon-triangle-1-n",sSortJUIDesc:"css_right ui-icon ui-icon-triangle-1-s",sSortJUI:"css_right ui-icon ui-icon-carat-2-n-s",sSortJUIAscAllowed:"css_right ui-icon ui-icon-carat-1-n",sSortJUIDescAllowed:"css_right ui-icon ui-icon-carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",
sScrollHead:"dataTables_scrollHead ui-state-default",sScrollFoot:"dataTables_scrollFoot ui-state-default",sFooterTH:"ui-state-default",sJUIHeader:"fg-toolbar ui-toolbar ui-widget-header ui-corner-tl ui-corner-tr ui-helper-clearfix",sJUIFooter:"fg-toolbar ui-toolbar ui-widget-header ui-corner-bl ui-corner-br ui-helper-clearfix"});e.extend(d.ext.oPagination,{two_button:{fnInit:function(a,b,c){var d=a.oLanguage.oPaginate,l=function(b){a.oApi._fnPageChange(a,b.data.action)&&c(a)},d=a.bJUI?'<a class="'+
a.oClasses.sPagePrevDisabled+'" tabindex="'+a.iTabIndex+'" role="button"><span class="'+a.oClasses.sPageJUIPrev+'"></span></a><a class="'+a.oClasses.sPageNextDisabled+'" tabindex="'+a.iTabIndex+'" role="button"><span class="'+a.oClasses.sPageJUINext+'"></span></a>':'<a class="'+a.oClasses.sPagePrevDisabled+'" tabindex="'+a.iTabIndex+'" role="button">'+d.sPrevious+'</a><a class="'+a.oClasses.sPageNextDisabled+'" tabindex="'+a.iTabIndex+'" role="button">'+d.sNext+"</a>";e(b).append(d);var m=e("a",b),
d=m[0],m=m[1];a.oApi._fnBindAction(d,{action:"previous"},l);a.oApi._fnBindAction(m,{action:"next"},l);a.aanFeatures.p||(b.id=a.sTableId+"_paginate",d.id=a.sTableId+"_previous",m.id=a.sTableId+"_next",d.setAttribute("aria-controls",a.sTableId),m.setAttribute("aria-controls",a.sTableId))},fnUpdate:function(a,b){if(a.aanFeatures.p)for(var c=a.oClasses,d=a.aanFeatures.p,e,m=0,p=d.length;m<p;m++)if(e=d[m].firstChild)e.className=0===a._iDisplayStart?c.sPagePrevDisabled:c.sPagePrevEnabled,e=e.nextSibling,
e.className=a.fnDisplayEnd()==a.fnRecordsDisplay()?c.sPageNextDisabled:c.sPageNextEnabled}},iFullNumbersShowPages:5,full_numbers:{fnInit:function(a,b,c){var d=a.oLanguage.oPaginate,l=a.oClasses,m=function(b){a.oApi._fnPageChange(a,b.data.action)&&c(a)};e(b).append('<a  tabindex="'+a.iTabIndex+'" class="'+l.sPageButton+" "+l.sPageFirst+'">'+d.sFirst+'</a><a  tabindex="'+a.iTabIndex+'" class="'+l.sPageButton+" "+l.sPagePrevious+'">'+d.sPrevious+'</a><span></span><a tabindex="'+a.iTabIndex+'" class="'+
l.sPageButton+" "+l.sPageNext+'">'+d.sNext+'</a><a tabindex="'+a.iTabIndex+'" class="'+l.sPageButton+" "+l.sPageLast+'">'+d.sLast+"</a>");var p=e("a",b),d=p[0],l=p[1],t=p[2],p=p[3];a.oApi._fnBindAction(d,{action:"first"},m);a.oApi._fnBindAction(l,{action:"previous"},m);a.oApi._fnBindAction(t,{action:"next"},m);a.oApi._fnBindAction(p,{action:"last"},m);a.aanFeatures.p||(b.id=a.sTableId+"_paginate",d.id=a.sTableId+"_first",l.id=a.sTableId+"_previous",t.id=a.sTableId+"_next",p.id=a.sTableId+"_last")},
fnUpdate:function(a,b){if(a.aanFeatures.p){var c=d.ext.oPagination.iFullNumbersShowPages,g=Math.floor(c/2),l=Math.ceil(a.fnRecordsDisplay()/a._iDisplayLength),m=Math.ceil(a._iDisplayStart/a._iDisplayLength)+1,p="",t,r=a.oClasses,q,w=a.aanFeatures.p,u=function(c){a.oApi._fnBindAction(this,{page:c+t-1},function(c){a.oApi._fnPageChange(a,c.data.page);b(a);c.preventDefault()})};-1===a._iDisplayLength?m=g=t=1:l<c?(t=1,g=l):m<=g?(t=1,g=c):m>=l-g?(t=l-c+1,g=l):(t=m-Math.ceil(c/2)+1,g=t+c-1);for(c=t;c<=g;c++)p+=
m!==c?'<a tabindex="'+a.iTabIndex+'" class="'+r.sPageButton+'">'+a.fnFormatNumber(c)+"</a>":'<a tabindex="'+a.iTabIndex+'" class="'+r.sPageButtonActive+'">'+a.fnFormatNumber(c)+"</a>";c=0;for(g=w.length;c<g;c++)q=w[c],q.hasChildNodes()&&(e("span:eq(0)",q).html(p).children("a").each(u),q=q.getElementsByTagName("a"),q=[q[0],q[1],q[q.length-2],q[q.length-1]],e(q).removeClass(r.sPageButton+" "+r.sPageButtonActive+" "+r.sPageButtonStaticDisabled),e([q[0],q[1]]).addClass(1==m?r.sPageButtonStaticDisabled:
r.sPageButton),e([q[2],q[3]]).addClass(0===l||m===l||-1===a._iDisplayLength?r.sPageButtonStaticDisabled:r.sPageButton))}}}});e.extend(d.ext.oSort,{"string-pre":function(a){"string"!=typeof a&&(a=null!==a&&a.toString?a.toString():"");return a.toLowerCase()},"string-asc":function(a,b){return a<b?-1:a>b?1:0},"string-desc":function(a,b){return a<b?1:a>b?-1:0},"html-pre":function(a){return a.replace(/<.*?>/g,"").toLowerCase()},"html-asc":function(a,b){return a<b?-1:a>b?1:0},"html-desc":function(a,b){return a<
b?1:a>b?-1:0},"date-pre":function(a){a=Date.parse(a);if(isNaN(a)||""===a)a=Date.parse("01/01/1970 00:00:00");return a},"date-asc":function(a,b){return a-b},"date-desc":function(a,b){return b-a},"numeric-pre":function(a){return"-"==a||""===a?0:1*a},"numeric-asc":function(a,b){return a-b},"numeric-desc":function(a,b){return b-a}});e.extend(d.ext.aTypes,[function(a){if("number"===typeof a)return"numeric";if("string"!==typeof a)return null;var b,c=!1;b=a.charAt(0);if(-1=="0123456789-".indexOf(b))return null;
for(var d=1;d<a.length;d++){b=a.charAt(d);if(-1=="0123456789.".indexOf(b))return null;if("."==b){if(c)return null;c=!0}}return"numeric"},function(a){var b=Date.parse(a);return null!==b&&!isNaN(b)||"string"===typeof a&&0===a.length?"date":null},function(a){return"string"===typeof a&&-1!=a.indexOf("<")&&-1!=a.indexOf(">")?"html":null}]);e.fn.DataTable=d;e.fn.dataTable=d;e.fn.dataTableSettings=d.settings;e.fn.dataTableExt=d.ext})}(window,document));
var ZeroClipboard_TableTools={version:"1.0.4-TableTools2",clients:{},moviePath:"",nextId:1,$:function(a){"string"==typeof a&&(a=document.getElementById(a));a.addClass||(a.hide=function(){this.style.display="none"},a.show=function(){this.style.display=""},a.addClass=function(a){this.removeClass(a);this.className+=" "+a},a.removeClass=function(a){this.className=this.className.replace(new RegExp("\\s*"+a+"\\s*")," ").replace(/^\s+/,"").replace(/\s+$/,"")},a.hasClass=function(a){return!!this.className.match(new RegExp("\\s*"+
a+"\\s*"))});return a},setMoviePath:function(a){this.moviePath=a},dispatch:function(a,b,c){(a=this.clients[a])&&a.receiveEvent(b,c)},register:function(a,b){this.clients[a]=b},getDOMObjectPosition:function(a){var b={left:0,top:0,width:a.width?a.width:a.offsetWidth,height:a.height?a.height:a.offsetHeight};""!=a.style.width&&(b.width=a.style.width.replace("px",""));""!=a.style.height&&(b.height=a.style.height.replace("px",""));for(;a;)b.left+=a.offsetLeft,b.top+=a.offsetTop,a=a.offsetParent;return b},
Client:function(a){this.handlers={};this.id=ZeroClipboard_TableTools.nextId++;this.movieId="ZeroClipboard_TableToolsMovie_"+this.id;ZeroClipboard_TableTools.register(this.id,this);a&&this.glue(a)}};
ZeroClipboard_TableTools.Client.prototype={id:0,ready:!1,movie:null,clipText:"",fileName:"",action:"copy",handCursorEnabled:!0,cssEffects:!0,handlers:null,sized:!1,glue:function(a,b){this.domElement=ZeroClipboard_TableTools.$(a);var c=99;this.domElement.style.zIndex&&(c=parseInt(this.domElement.style.zIndex)+1);var e=ZeroClipboard_TableTools.getDOMObjectPosition(this.domElement);this.div=document.createElement("div");var d=this.div.style;d.position="absolute";d.left="0px";d.top="0px";d.width=e.width+
"px";d.height=e.height+"px";d.zIndex=c;"undefined"!=typeof b&&""!=b&&(this.div.title=b);0!=e.width&&0!=e.height&&(this.sized=!0);this.domElement&&(this.domElement.appendChild(this.div),this.div.innerHTML=this.getHTML(e.width,e.height))},positionElement:function(){var a=ZeroClipboard_TableTools.getDOMObjectPosition(this.domElement),b=this.div.style;b.position="absolute";b.width=a.width+"px";b.height=a.height+"px";0!=a.width&&0!=a.height&&(this.sized=!0,b=this.div.childNodes[0],b.width=a.width,b.height=
a.height)},getHTML:function(a,b){var c="",e="id="+this.id+"&width="+a+"&height="+b;if(navigator.userAgent.match(/MSIE/))var d=location.href.match(/^https/i)?"https://":"http://",c=c+('<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+d+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="'+a+'" height="'+b+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+
ZeroClipboard_TableTools.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+e+'"/><param name="wmode" value="transparent"/></object>');else c+='<embed id="'+this.movieId+'" src="'+ZeroClipboard_TableTools.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+a+'" height="'+b+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+
e+'" wmode="transparent" />';return c},hide:function(){this.div&&(this.div.style.left="-2000px")},show:function(){this.reposition()},destroy:function(){if(this.domElement&&this.div){this.hide();this.div.innerHTML="";var a=document.getElementsByTagName("body")[0];try{a.removeChild(this.div)}catch(b){}this.div=this.domElement=null}},reposition:function(a){a&&((this.domElement=ZeroClipboard_TableTools.$(a))||this.hide());if(this.domElement&&this.div){a=ZeroClipboard_TableTools.getDOMObjectPosition(this.domElement);
var b=this.div.style;b.left=""+a.left+"px";b.top=""+a.top+"px"}},clearText:function(){this.clipText="";this.ready&&this.movie.clearText()},appendText:function(a){this.clipText+=a;this.ready&&this.movie.appendText(a)},setText:function(a){this.clipText=a;this.ready&&this.movie.setText(a)},setCharSet:function(a){this.charSet=a;this.ready&&this.movie.setCharSet(a)},setBomInc:function(a){this.incBom=a;this.ready&&this.movie.setBomInc(a)},setFileName:function(a){this.fileName=a;this.ready&&this.movie.setFileName(a)},
setAction:function(a){this.action=a;this.ready&&this.movie.setAction(a)},addEventListener:function(a,b){a=a.toString().toLowerCase().replace(/^on/,"");this.handlers[a]||(this.handlers[a]=[]);this.handlers[a].push(b)},setHandCursor:function(a){this.handCursorEnabled=a;this.ready&&this.movie.setHandCursor(a)},setCSSEffects:function(a){this.cssEffects=!!a},receiveEvent:function(a,b){a=a.toString().toLowerCase().replace(/^on/,"");switch(a){case "load":this.movie=document.getElementById(this.movieId);
if(!this.movie){var c=this;setTimeout(function(){c.receiveEvent("load",null)},1);return}if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/)){c=this;setTimeout(function(){c.receiveEvent("load",null)},100);this.ready=!0;return}this.ready=!0;this.movie.clearText();this.movie.appendText(this.clipText);this.movie.setFileName(this.fileName);this.movie.setAction(this.action);this.movie.setCharSet(this.charSet);this.movie.setBomInc(this.incBom);this.movie.setHandCursor(this.handCursorEnabled);
break;case "mouseover":this.domElement&&this.cssEffects&&this.recoverActive&&this.domElement.addClass("active");break;case "mouseout":this.domElement&&this.cssEffects&&(this.recoverActive=!1,this.domElement.hasClass("active")&&(this.domElement.removeClass("active"),this.recoverActive=!0));break;case "mousedown":this.domElement&&this.cssEffects&&this.domElement.addClass("active");break;case "mouseup":this.domElement&&this.cssEffects&&(this.domElement.removeClass("active"),this.recoverActive=!1)}if(this.handlers[a])for(var e=
0,d=this.handlers[a].length;e<d;e++){var f=this.handlers[a][e];if("function"==typeof f)f(this,b);else if("object"==typeof f&&2==f.length)f[0][f[1]](this,b);else if("string"==typeof f)window[f](this,b)}}};var TableTools;
(function(a,b,c){TableTools=function(b,c){!this instanceof TableTools&&alert("Warning: TableTools must be initialised with the keyword 'new'");this.s={that:this,dt:b.fnSettings(),print:{saveStart:-1,saveLength:-1,saveScroll:-1,funcEnd:function(){}},buttonCounter:0,select:{type:"",selected:[],preRowSelect:null,postSelected:null,postDeselected:null,all:!1,selectedClass:""},custom:{},swfPath:"",buttonSet:[],master:!1,tags:{}};this.dom={container:null,table:null,print:{hidden:[],message:null},collection:{collection:null,
background:null}};this.classes=a.extend(!0,{},TableTools.classes);this.s.dt.bJUI&&a.extend(!0,this.classes,TableTools.classes_themeroller);this.fnSettings=function(){return this.s};"undefined"==typeof c&&(c={});this._fnConstruct(c);return this};TableTools.prototype={fnGetSelected:function(a){var b=[],c=this.s.dt.aoData,n=this.s.dt.aiDisplay,h;if(a)for(a=0,h=n.length;a<h;a++)c[n[a]]._DTTT_selected&&b.push(c[n[a]].nTr);else for(a=0,h=c.length;a<h;a++)c[a]._DTTT_selected&&b.push(c[a].nTr);return b},
fnGetSelectedData:function(){var a=[],b=this.s.dt.aoData,c,n;c=0;for(n=b.length;c<n;c++)b[c]._DTTT_selected&&a.push(this.s.dt.oInstance.fnGetData(c));return a},fnIsSelected:function(a){a=this.s.dt.oInstance.fnGetPosition(a);return!0===this.s.dt.aoData[a]._DTTT_selected?!0:!1},fnSelectAll:function(a){var b=this._fnGetMasterSettings();this._fnRowSelect(!0===a?b.dt.aiDisplay:b.dt.aoData)},fnSelectNone:function(a){this._fnGetMasterSettings();this._fnRowDeselect(this.fnGetSelected(a))},fnSelect:function(a){"single"==
this.s.select.type?(this.fnSelectNone(),this._fnRowSelect(a)):"multi"==this.s.select.type&&this._fnRowSelect(a)},fnDeselect:function(a){this._fnRowDeselect(a)},fnGetTitle:function(a){var b="";"undefined"!=typeof a.sTitle&&""!==a.sTitle?b=a.sTitle:(a=c.getElementsByTagName("title"),0<a.length&&(b=a[0].innerHTML));return 4>"\u00a1".toString().length?b.replace(/[^a-zA-Z0-9_\u00A1-\uFFFF\.,\-_ !\(\)]/g,""):b.replace(/[^a-zA-Z0-9_\.,\-_ !\(\)]/g,"")},fnCalcColRatios:function(a){var b=this.s.dt.aoColumns;
a=this._fnColumnTargets(a.mColumns);var c=[],n=0,h=0,g,l;g=0;for(l=a.length;g<l;g++)a[g]&&(n=b[g].nTh.offsetWidth,h+=n,c.push(n));g=0;for(l=c.length;g<l;g++)c[g]/=h;return c.join("\t")},fnGetTableData:function(a){if(this.s.dt)return this._fnGetDataTablesData(a)},fnSetText:function(a,b){this._fnFlashSetText(a,b)},fnResizeButtons:function(){for(var a in ZeroClipboard_TableTools.clients)if(a){var b=ZeroClipboard_TableTools.clients[a];"undefined"!=typeof b.domElement&&b.domElement.parentNode&&b.positionElement()}},
fnResizeRequired:function(){for(var a in ZeroClipboard_TableTools.clients)if(a){var b=ZeroClipboard_TableTools.clients[a];if("undefined"!=typeof b.domElement&&b.domElement.parentNode==this.dom.container&&!1===b.sized)return!0}return!1},fnPrint:function(a,b){void 0===b&&(b={});void 0===a||a?this._fnPrintStart(b):this._fnPrintEnd()},fnInfo:function(b,d){var f=c.createElement("div");f.className=this.classes.print.info;f.innerHTML=b;c.body.appendChild(f);setTimeout(function(){a(f).fadeOut("normal",function(){c.body.removeChild(f)})},
d)},_fnConstruct:function(a){var b=this;this._fnCustomiseSettings(a);this.dom.container=c.createElement(this.s.tags.container);this.dom.container.className=this.classes.container;"none"!=this.s.select.type&&this._fnRowSelectConfig();this._fnButtonDefinations(this.s.buttonSet,this.dom.container);this.s.dt.aoDestroyCallback.push({sName:"TableTools",fn:function(){b.dom.container.innerHTML=""}})},_fnCustomiseSettings:function(b){"undefined"==typeof this.s.dt._TableToolsInit&&(this.s.master=!0,this.s.dt._TableToolsInit=
!0);this.dom.table=this.s.dt.nTable;this.s.custom=a.extend({},TableTools.DEFAULTS,b);this.s.swfPath=this.s.custom.sSwfPath;"undefined"!=typeof ZeroClipboard_TableTools&&(ZeroClipboard_TableTools.moviePath=this.s.swfPath);this.s.select.type=this.s.custom.sRowSelect;this.s.select.preRowSelect=this.s.custom.fnPreRowSelect;this.s.select.postSelected=this.s.custom.fnRowSelected;this.s.select.postDeselected=this.s.custom.fnRowDeselected;this.s.custom.sSelectedClass&&(this.classes.select.row=this.s.custom.sSelectedClass);
this.s.tags=this.s.custom.oTags;this.s.buttonSet=this.s.custom.aButtons},_fnButtonDefinations:function(b,c){for(var f,n=0,h=b.length;n<h;n++){if("string"==typeof b[n]){if("undefined"==typeof TableTools.BUTTONS[b[n]]){alert("TableTools: Warning - unknown button type: "+b[n]);continue}f=a.extend({},TableTools.BUTTONS[b[n]],!0)}else{if("undefined"==typeof TableTools.BUTTONS[b[n].sExtends]){alert("TableTools: Warning - unknown button type: "+b[n].sExtends);continue}f=a.extend({},TableTools.BUTTONS[b[n].sExtends],
!0);f=a.extend(f,b[n],!0)}c.appendChild(this._fnCreateButton(f,a(c).hasClass(this.classes.collection.container)))}},_fnCreateButton:function(a,b){var c=this._fnButtonBase(a,b);a.sAction.match(/flash/)?this._fnFlashConfig(c,a):"text"==a.sAction?this._fnTextConfig(c,a):"div"==a.sAction?this._fnTextConfig(c,a):"collection"==a.sAction&&(this._fnTextConfig(c,a),this._fnCollectionConfig(c,a));return c},_fnButtonBase:function(a,b){var f,n,h;b?(f="default"!==a.sTag?a.sTag:this.s.tags.collection.button,n=
"default"!==a.sLinerTag?a.sLiner:this.s.tags.collection.liner,h=this.classes.collection.buttons.normal):(f="default"!==a.sTag?a.sTag:this.s.tags.button,n="default"!==a.sLinerTag?a.sLiner:this.s.tags.liner,h=this.classes.buttons.normal);f=c.createElement(f);n=c.createElement(n);var g=this._fnGetMasterSettings();f.className=h+" "+a.sButtonClass;f.setAttribute("id","ToolTables_"+this.s.dt.sInstance+"_"+g.buttonCounter);f.appendChild(n);n.innerHTML=a.sButtonText;g.buttonCounter++;return f},_fnGetMasterSettings:function(){if(this.s.master)return this.s;
for(var a=TableTools._aInstances,b=0,c=a.length;b<c;b++)if(this.dom.table==a[b].s.dt.nTable)return a[b].s},_fnCollectionConfig:function(a,b){var f=c.createElement(this.s.tags.collection.container);f.style.display="none";f.className=this.classes.collection.container;b._collection=f;c.body.appendChild(f);this._fnButtonDefinations(b.aButtons,f)},_fnCollectionShow:function(e,d){var f=this,n=a(e).offset(),h=d._collection,g=n.left,n=n.top+a(e).outerHeight(),l=a(b).height(),m=a(c).height(),p=a(b).width(),
t=a(c).width();h.style.position="absolute";h.style.left=g+"px";h.style.top=n+"px";h.style.display="block";a(h).css("opacity",0);var r=c.createElement("div");r.style.position="absolute";r.style.left="0px";r.style.top="0px";r.style.height=(l>m?l:m)+"px";r.style.width=(p>t?p:t)+"px";r.className=this.classes.collection.background;a(r).css("opacity",0);c.body.appendChild(r);c.body.appendChild(h);l=a(h).outerWidth();p=a(h).outerHeight();g+l>t&&(h.style.left=t-l+"px");n+p>m&&(h.style.top=n-p-a(e).outerHeight()+
"px");this.dom.collection.collection=h;this.dom.collection.background=r;setTimeout(function(){a(h).animate({opacity:1},500);a(r).animate({opacity:.25},500)},10);this.fnResizeButtons();a(r).click(function(){f._fnCollectionHide.call(f,null,null)})},_fnCollectionHide:function(b,c){null!==c&&"collection"==c.sExtends||null===this.dom.collection.collection||(a(this.dom.collection.collection).animate({opacity:0},500,function(a){this.style.display="none"}),a(this.dom.collection.background).animate({opacity:0},
500,function(a){this.parentNode.removeChild(this)}),this.dom.collection.collection=null,this.dom.collection.background=null)},_fnRowSelectConfig:function(){if(this.s.master){var b=this,c=this.s.dt;a(c.nTable).addClass(this.classes.select.table);a("tr",c.nTBody).live("click",function(a){this.parentNode==c.nTBody&&null!==c.oInstance.fnGetData(this)&&(b.fnIsSelected(this)?b._fnRowDeselect(this,a):"single"==b.s.select.type?(b.fnSelectNone(),b._fnRowSelect(this,a)):"multi"==b.s.select.type&&b._fnRowSelect(this,
a))});c.oApi._fnCallbackReg(c,"aoRowCreatedCallback",function(f,n,h){c.aoData[h]._DTTT_selected&&a(f).addClass(b.classes.select.row)},"TableTools-SelectAll")}},_fnRowSelect:function(b,c){var f=this._fnSelectData(b),n=[],h,g;h=0;for(g=f.length;h<g;h++)f[h].nTr&&n.push(f[h].nTr);if(null===this.s.select.preRowSelect||this.s.select.preRowSelect.call(this,c,n,!0)){h=0;for(g=f.length;h<g;h++)f[h]._DTTT_selected=!0,f[h].nTr&&a(f[h].nTr).addClass(this.classes.select.row);null!==this.s.select.postSelected&&
this.s.select.postSelected.call(this,n);TableTools._fnEventDispatch(this,"select",n,!0)}},_fnRowDeselect:function(b,c){var f=this._fnSelectData(b),n=[],h,g;h=0;for(g=f.length;h<g;h++)f[h].nTr&&n.push(f[h].nTr);if(null===this.s.select.preRowSelect||this.s.select.preRowSelect.call(this,c,n,!1)){h=0;for(g=f.length;h<g;h++)f[h]._DTTT_selected=!1,f[h].nTr&&a(f[h].nTr).removeClass(this.classes.select.row);null!==this.s.select.postDeselected&&this.s.select.postDeselected.call(this,n);TableTools._fnEventDispatch(this,
"select",n,!1)}},_fnSelectData:function(a){var b=[],c,n,h;if(a.nodeName)c=this.s.dt.oInstance.fnGetPosition(a),b.push(this.s.dt.aoData[c]);else if("undefined"!==typeof a.length)for(n=0,h=a.length;n<h;n++)a[n].nodeName?(c=this.s.dt.oInstance.fnGetPosition(a[n]),b.push(this.s.dt.aoData[c])):"number"===typeof a[n]?b.push(this.s.dt.aoData[a[n]]):b.push(a[n]);else b.push(a);return b},_fnTextConfig:function(b,c){var f=this;null!==c.fnInit&&c.fnInit.call(this,b,c);""!==c.sToolTip&&(b.title=c.sToolTip);a(b).hover(function(){null!==
c.fnMouseover&&c.fnMouseover.call(this,b,c,null)},function(){null!==c.fnMouseout&&c.fnMouseout.call(this,b,c,null)});null!==c.fnSelect&&TableTools._fnEventListen(this,"select",function(a){c.fnSelect.call(f,b,c,a)});a(b).click(function(a){null!==c.fnClick&&c.fnClick.call(f,b,c,null);null!==c.fnComplete&&c.fnComplete.call(f,b,c,null,null);f._fnCollectionHide(b,c)})},_fnFlashConfig:function(a,b){var c=this,n=new ZeroClipboard_TableTools.Client;null!==b.fnInit&&b.fnInit.call(this,a,b);n.setHandCursor(!0);
"flash_save"==b.sAction?(n.setAction("save"),n.setCharSet("utf16le"==b.sCharSet?"UTF16LE":"UTF8"),n.setBomInc(b.bBomInc),n.setFileName(b.sFileName.replace("*",this.fnGetTitle(b)))):"flash_pdf"==b.sAction?(n.setAction("pdf"),n.setFileName(b.sFileName.replace("*",this.fnGetTitle(b)))):n.setAction("copy");n.addEventListener("mouseOver",function(h){null!==b.fnMouseover&&b.fnMouseover.call(c,a,b,n)});n.addEventListener("mouseOut",function(h){null!==b.fnMouseout&&b.fnMouseout.call(c,a,b,n)});n.addEventListener("mouseDown",
function(h){null!==b.fnClick&&b.fnClick.call(c,a,b,n)});n.addEventListener("complete",function(h,g){null!==b.fnComplete&&b.fnComplete.call(c,a,b,n,g);c._fnCollectionHide(a,b)});this._fnFlashGlue(n,a,b.sToolTip)},_fnFlashGlue:function(a,b,f){var n=this,h=b.getAttribute("id");c.getElementById(h)?a.glue(b,f):setTimeout(function(){n._fnFlashGlue(a,b,f)},100)},_fnFlashSetText:function(a,b){var c=this._fnChunkData(b,8192);a.clearText();for(var n=0,h=c.length;n<h;n++)a.appendText(c[n])},_fnColumnTargets:function(a){var b=
[],c=this.s.dt;if("object"==typeof a){i=0;for(iLen=c.aoColumns.length;i<iLen;i++)b.push(!1);i=0;for(iLen=a.length;i<iLen;i++)b[a[i]]=!0}else if("visible"==a)for(i=0,iLen=c.aoColumns.length;i<iLen;i++)b.push(c.aoColumns[i].bVisible?!0:!1);else if("hidden"==a)for(i=0,iLen=c.aoColumns.length;i<iLen;i++)b.push(c.aoColumns[i].bVisible?!1:!0);else if("sortable"==a)for(i=0,iLen=c.aoColumns.length;i<iLen;i++)b.push(c.aoColumns[i].bSortable?!0:!1);else for(i=0,iLen=c.aoColumns.length;i<iLen;i++)b.push(!0);
return b},_fnNewline:function(a){return"auto"==a.sNewLine?navigator.userAgent.match(/Windows/)?"\r\n":"\n":a.sNewLine},_fnGetDataTablesData:function(b){var c,f,n,h,g,l=[],m="",p=this.s.dt,t,r=new RegExp(b.sFieldBoundary,"g"),q=this._fnColumnTargets(b.mColumns);n="undefined"!=typeof b.bSelectedOnly?b.bSelectedOnly:!1;if(b.bHeader){g=[];c=0;for(f=p.aoColumns.length;c<f;c++)q[c]&&(m=p.aoColumns[c].sTitle.replace(/\n/g," ").replace(/<.*?>/g,"").replace(/^\s+|\s+$/g,""),m=this._fnHtmlDecode(m),g.push(this._fnBoundData(m,
b.sFieldBoundary,r)));l.push(g.join(b.sFieldSeperator))}var w=p.aiDisplay;h=this.fnGetSelected();if("none"!==this.s.select.type&&n&&0!==h.length)for(w=[],c=0,f=h.length;c<f;c++)w.push(p.oInstance.fnGetPosition(h[c]));n=0;for(h=w.length;n<h;n++){t=p.aoData[w[n]].nTr;g=[];c=0;for(f=p.aoColumns.length;c<f;c++)q[c]&&(m=p.oApi._fnGetCellData(p,w[n],c,"display"),b.fnCellRender?m=b.fnCellRender(m,c,t,w[n])+"":"string"==typeof m?(m=m.replace(/\n/g," "),m=m.replace(/<img.*?\s+alt\s*=\s*(?:"([^"]+)"|'([^']+)'|([^\s>]+)).*?>/gi,
"$1$2$3"),m=m.replace(/<.*?>/g,"")):m+="",m=m.replace(/^\s+/,"").replace(/\s+$/,""),m=this._fnHtmlDecode(m),g.push(this._fnBoundData(m,b.sFieldBoundary,r)));l.push(g.join(b.sFieldSeperator));b.bOpenRows&&(c=a.grep(p.aoOpenRows,function(a){return a.nParent===t}),1===c.length&&(m=this._fnBoundData(a("td",c[0].nTr).html(),b.sFieldBoundary,r),l.push(m)))}if(b.bFooter&&null!==p.nTFoot){g=[];c=0;for(f=p.aoColumns.length;c<f;c++)q[c]&&null!==p.aoColumns[c].nTf&&(m=p.aoColumns[c].nTf.innerHTML.replace(/\n/g,
" ").replace(/<.*?>/g,""),m=this._fnHtmlDecode(m),g.push(this._fnBoundData(m,b.sFieldBoundary,r)));l.push(g.join(b.sFieldSeperator))}return _sLastData=l.join(this._fnNewline(b))},_fnBoundData:function(a,b,c){return""===b?a:b+a.replace(c,b+b)+b},_fnChunkData:function(a,b){for(var c=[],n=a.length,h=0;h<n;h+=b)h+b<n?c.push(a.substring(h,h+b)):c.push(a.substring(h,n));return c},_fnHtmlDecode:function(a){if(-1===a.indexOf("&"))return a;var b=c.createElement("div");return a.replace(/&([^\s]*);/g,function(a,
c){if("#"===a.substr(1,1))return String.fromCharCode(Number(c.substr(1)));b.innerHTML=a;return b.childNodes[0].nodeValue})},_fnPrintStart:function(e){var d=this,f=this.s.dt;this._fnPrintHideNodes(f.nTable);this.s.print.saveStart=f._iDisplayStart;this.s.print.saveLength=f._iDisplayLength;e.bShowAll&&(f._iDisplayStart=0,f._iDisplayLength=-1,f.oApi._fnCalculateEnd(f),f.oApi._fnDraw(f));if(""!==f.oScroll.sX||""!==f.oScroll.sY)this._fnPrintScrollStart(f),a(this.s.dt.nTable).bind("draw.DTTT_Print",function(){d._fnPrintScrollStart(f)});
var n=f.aanFeatures,h;for(h in n)if("i"!=h&&"t"!=h&&1==h.length)for(var g=0,l=n[h].length;g<l;g++)this.dom.print.hidden.push({node:n[h][g],display:"block"}),n[h][g].style.display="none";a(c.body).addClass(this.classes.print.body);""!==e.sInfo&&this.fnInfo(e.sInfo,3E3);e.sMessage&&(this.dom.print.message=c.createElement("div"),this.dom.print.message.className=this.classes.print.message,this.dom.print.message.innerHTML=e.sMessage,c.body.insertBefore(this.dom.print.message,c.body.childNodes[0]));this.s.print.saveScroll=
a(b).scrollTop();b.scrollTo(0,0);a(c).bind("keydown.DTTT",function(a){27==a.keyCode&&(a.preventDefault(),d._fnPrintEnd.call(d,a))})},_fnPrintEnd:function(e){e=this.s.dt;var d=this.s.print,f=this.dom.print;this._fnPrintShowNodes();if(""!==e.oScroll.sX||""!==e.oScroll.sY)a(this.s.dt.nTable).unbind("draw.DTTT_Print"),this._fnPrintScrollEnd();b.scrollTo(0,d.saveScroll);null!==f.message&&(c.body.removeChild(f.message),f.message=null);a(c.body).removeClass("DTTT_Print");e._iDisplayStart=d.saveStart;e._iDisplayLength=
d.saveLength;e.oApi._fnCalculateEnd(e);e.oApi._fnDraw(e);a(c).unbind("keydown.DTTT")},_fnPrintScrollStart:function(){var b=this.s.dt;b.nScrollHead.getElementsByTagName("div")[0].getElementsByTagName("table");var c=b.nTable.parentNode,f=b.nTable.getElementsByTagName("thead");0<f.length&&b.nTable.removeChild(f[0]);null!==b.nTFoot&&(f=b.nTable.getElementsByTagName("tfoot"),0<f.length&&b.nTable.removeChild(f[0]));f=b.nTHead.cloneNode(!0);b.nTable.insertBefore(f,b.nTable.childNodes[0]);null!==b.nTFoot&&
(f=b.nTFoot.cloneNode(!0),b.nTable.insertBefore(f,b.nTable.childNodes[1]));""!==b.oScroll.sX&&(b.nTable.style.width=a(b.nTable).outerWidth()+"px",c.style.width=a(b.nTable).outerWidth()+"px",c.style.overflow="visible");""!==b.oScroll.sY&&(c.style.height=a(b.nTable).outerHeight()+"px",c.style.overflow="visible")},_fnPrintScrollEnd:function(){var a=this.s.dt,b=a.nTable.parentNode;""!==a.oScroll.sX&&(b.style.width=a.oApi._fnStringToCss(a.oScroll.sX),b.style.overflow="auto");""!==a.oScroll.sY&&(b.style.height=
a.oApi._fnStringToCss(a.oScroll.sY),b.style.overflow="auto")},_fnPrintShowNodes:function(){for(var a=this.dom.print.hidden,b=0,c=a.length;b<c;b++)a[b].node.style.display=a[b].display;a.splice(0,a.length)},_fnPrintHideNodes:function(b){for(var c=this.dom.print.hidden,f=b.parentNode,n=f.childNodes,h=0,g=n.length;h<g;h++)if(n[h]!=b&&1==n[h].nodeType){var l=a(n[h]).css("display");"none"!=l&&(c.push({node:n[h],display:l}),n[h].style.display="none")}"BODY"!=f.nodeName&&this._fnPrintHideNodes(f)}};TableTools._aInstances=
[];TableTools._aListeners=[];TableTools.fnGetMasters=function(){for(var a=[],b=0,c=TableTools._aInstances.length;b<c;b++)TableTools._aInstances[b].s.master&&a.push(TableTools._aInstances[b]);return a};TableTools.fnGetInstance=function(a){"object"!=typeof a&&(a=c.getElementById(a));for(var b=0,f=TableTools._aInstances.length;b<f;b++)if(TableTools._aInstances[b].s.master&&TableTools._aInstances[b].dom.table==a)return TableTools._aInstances[b];return null};TableTools._fnEventListen=function(a,b,c){TableTools._aListeners.push({that:a,
type:b,fn:c})};TableTools._fnEventDispatch=function(a,b,c,n){for(var h=TableTools._aListeners,g=0,l=h.length;g<l;g++)a.dom.table==h[g].that.dom.table&&h[g].type==b&&h[g].fn(c,n)};TableTools.buttonBase={sAction:"text",sTag:"default",sLinerTag:"default",sButtonClass:"DTTT_button_text",sButtonText:"Button text",sTitle:"",sToolTip:"",sCharSet:"utf8",bBomInc:!1,sFileName:"*.csv",sFieldBoundary:"",sFieldSeperator:"\t",sNewLine:"auto",mColumns:"all",bHeader:!0,bFooter:!0,bOpenRows:!1,bSelectedOnly:!1,fnMouseover:null,
fnMouseout:null,fnClick:null,fnSelect:null,fnComplete:null,fnInit:null,fnCellRender:null};TableTools.BUTTONS={csv:a.extend({},TableTools.buttonBase,{sAction:"flash_save",sButtonClass:"DTTT_button_csv",sButtonText:"CSV",sFieldBoundary:'"',sFieldSeperator:",",fnClick:function(a,b,c){this.fnSetText(c,this.fnGetTableData(b))}}),xls:a.extend({},TableTools.buttonBase,{sAction:"flash_save",sCharSet:"utf16le",bBomInc:!0,sButtonClass:"DTTT_button_xls",sButtonText:"Excel",fnClick:function(a,b,c){this.fnSetText(c,
this.fnGetTableData(b))}}),copy:a.extend({},TableTools.buttonBase,{sAction:"flash_copy",sButtonClass:"DTTT_button_copy",sButtonText:"Copy",fnClick:function(a,b,c){this.fnSetText(c,this.fnGetTableData(b))},fnComplete:function(a,b,c,n){a=n.split("\n").length;a=null===this.s.dt.nTFoot?a-1:a-2;this.fnInfo("<h6>Table copied</h6><p>Copied "+a+" row"+(1==a?"":"s")+" to the clipboard.</p>",1500)}}),pdf:a.extend({},TableTools.buttonBase,{sAction:"flash_pdf",sNewLine:"\n",sFileName:"*.pdf",sButtonClass:"DTTT_button_pdf",
sButtonText:"PDF",sPdfOrientation:"portrait",sPdfSize:"A4",sPdfMessage:"",fnClick:function(a,b,c){this.fnSetText(c,"title:"+this.fnGetTitle(b)+"\nmessage:"+b.sPdfMessage+"\ncolWidth:"+this.fnCalcColRatios(b)+"\norientation:"+b.sPdfOrientation+"\nsize:"+b.sPdfSize+"\n--/TableToolsOpts--\n"+this.fnGetTableData(b))}}),print:a.extend({},TableTools.buttonBase,{sInfo:"<h6>Print view</h6><p>Please use your browser's print function to print this table. Press escape when finished.",sMessage:null,bShowAll:!0,
sToolTip:"View print view",sButtonClass:"DTTT_button_print",sButtonText:"Print",fnClick:function(a,b){this.fnPrint(!0,b)}}),text:a.extend({},TableTools.buttonBase),select:a.extend({},TableTools.buttonBase,{sButtonText:"Select button",fnSelect:function(b,c){0!==this.fnGetSelected().length?a(b).removeClass(this.classes.buttons.disabled):a(b).addClass(this.classes.buttons.disabled)},fnInit:function(b,c){a(b).addClass(this.classes.buttons.disabled)}}),select_single:a.extend({},TableTools.buttonBase,{sButtonText:"Select button",
fnSelect:function(b,c){1==this.fnGetSelected().length?a(b).removeClass(this.classes.buttons.disabled):a(b).addClass(this.classes.buttons.disabled)},fnInit:function(b,c){a(b).addClass(this.classes.buttons.disabled)}}),select_all:a.extend({},TableTools.buttonBase,{sButtonText:"Select all",fnClick:function(a,b){this.fnSelectAll()},fnSelect:function(b,c){this.fnGetSelected().length==this.s.dt.fnRecordsDisplay()?a(b).addClass(this.classes.buttons.disabled):a(b).removeClass(this.classes.buttons.disabled)}}),
select_none:a.extend({},TableTools.buttonBase,{sButtonText:"Deselect all",fnClick:function(a,b){this.fnSelectNone()},fnSelect:function(b,c){0!==this.fnGetSelected().length?a(b).removeClass(this.classes.buttons.disabled):a(b).addClass(this.classes.buttons.disabled)},fnInit:function(b,c){a(b).addClass(this.classes.buttons.disabled)}}),ajax:a.extend({},TableTools.buttonBase,{sAjaxUrl:"/xhr.php",sButtonText:"Ajax button",fnClick:function(b,c){var f=this.fnGetTableData(c);a.ajax({url:c.sAjaxUrl,data:[{name:"tableData",
value:f}],success:c.fnAjaxComplete,dataType:"json",type:"POST",cache:!1,error:function(){alert("Error detected when sending table data to server")}})},fnAjaxComplete:function(a){alert("Ajax complete")}}),div:a.extend({},TableTools.buttonBase,{sAction:"div",sTag:"div",sButtonClass:"DTTT_nonbutton",sButtonText:"Text button"}),collection:a.extend({},TableTools.buttonBase,{sAction:"collection",sButtonClass:"DTTT_button_collection",sButtonText:"Collection",fnClick:function(a,b){this._fnCollectionShow(a,
b)}})};TableTools.classes={container:"DTTT_container",buttons:{normal:"DTTT_button",disabled:"DTTT_disabled"},collection:{container:"DTTT_collection",background:"DTTT_collection_background",buttons:{normal:"DTTT_button",disabled:"DTTT_disabled"}},select:{table:"DTTT_selectable",row:"DTTT_selected"},print:{body:"DTTT_Print",info:"DTTT_print_info",message:"DTTT_PrintMessage"}};TableTools.classes_themeroller={container:"DTTT_container ui-buttonset ui-buttonset-multi",buttons:{normal:"DTTT_button ui-button ui-state-default"},
collection:{container:"DTTT_collection ui-buttonset ui-buttonset-multi"}};TableTools.DEFAULTS={sSwfPath:"media/swf/copy_csv_xls_pdf.swf",sRowSelect:"none",sSelectedClass:null,fnPreRowSelect:null,fnRowSelected:null,fnRowDeselected:null,aButtons:["copy","csv","xls","pdf","print"],oTags:{container:"div",button:"a",liner:"span",collection:{container:"div",button:"a",liner:"span"}}};TableTools.prototype.CLASS="TableTools";TableTools.VERSION="2.1.4";TableTools.prototype.VERSION=TableTools.VERSION;"function"==
typeof a.fn.dataTable&&"function"==typeof a.fn.dataTableExt.fnVersionCheck&&a.fn.dataTableExt.fnVersionCheck("1.9.0")?a.fn.dataTableExt.aoFeatures.push({fnInit:function(a){a=new TableTools(a.oInstance,"undefined"!=typeof a.oInit.oTableTools?a.oInit.oTableTools:{});TableTools._aInstances.push(a);return a.dom.container},cFeature:"T",sFeature:"TableTools"}):alert("Warning: TableTools 2 requires DataTables 1.9.0 or newer - www.datatables.net/download");a.fn.DataTable.TableTools=TableTools})(jQuery,window,
document);
(function(a){function b(b,c,d){var e="text_filter";d&&(e="number_filter");e=a('<input type="text" class="search_init '+e+'" value="'+g+'"/>');l.html(e);d?l.wrapInner('<span class="filter_column filter_number" />'):l.wrapInner('<span class="filter_column filter_text" />');n[h]=g;var f=h;d&&!oTable.fnSettings().oFeatures.bServerSide?e.keyup(function(){oTable.fnFilter("^"+this.value,f,!0,!1)}):e.keyup(function(){oTable.fnFilter(this.value,f,b,c)});e.focus(function(){a(this).hasClass("search_init")&&(a(this).removeClass("search_init"),
this.value="")});e.blur(function(){""==this.value&&(a(this).addClass("search_init"),this.value=n[f])})}function c(){l.html(f(0));var b="tablerange_from_"+h,c=a('<input type="text" class="number_range_filter" id="'+b+'" rel="'+h+'"/>');l.append(c);l.append(f(1));var d="tablerange_to_"+h,c=a('<input type="text" class="number_range_filter" id="'+d+'" rel="'+h+'"/>');l.append(c);l.append(f(2));l.wrapInner('<span class="filterColumn filter_number_range" />');var e=h;t.push(h);a.fn.dataTableExt.afnFiltering.push(function(a,
c,g){a=1*document.getElementById(b).value;g=1*document.getElementById(d).value;c="-"==c[e]?0:1*c[e];return""==a&&""==g||""==a&&c<g||a<c&&""==g||a<c&&c<g?!0:!1});a("#"+b+",#"+d,l).keyup(function(){var a=1*document.getElementById(b).value,c=1*document.getElementById(d).value;0!=a&&0!=c&&a>c||oTable.fnDraw()})}function e(){l.html(f(0));var b="tablerange_from_"+h,c=a('<input type="text" class="date_range_filter" id="'+b+'" rel="'+h+'"/>');c.datepicker();l.append(c);l.append(f(1));var d="tablerange_to_"+
h,e=a('<input type="text" class="date_range_filter" id="'+d+'" rel="'+h+'"/>');l.append(e);l.append(f(2));l.wrapInner('<span class="filterColumn filter_date_range" />');e.datepicker();var g=h;t.push(h);a.fn.dataTableExt.afnFiltering.push(function(b,d,f){b=c.datepicker("getDate");f=e.datepicker("getDate");d=a.datepicker.parseDate(a.datepicker.regional[""].dateFormat,d[g]);return null==d?!1:null==b&&null==f||null==b&&d<f||b<d&&null==f||b<d&&d<f?!0:!1});a("#"+b+",#"+d,l).change(function(){oTable.fnDraw()})}
function d(b){var c=h,d='<select class="search_init select_filter"><option value="" class="search_init">'+g+"</option>",e,f=b.length;for(e=0;e<f;e++)d+='<option value="'+b[e]+'">'+b[e]+"</option>";b=a(d+"</select>");l.html(b);l.wrapInner('<span class="filterColumn filter_select" />');b.change(function(){""!=a(this).val()?a(this).removeClass("search_init"):a(this).addClass("search_init");oTable.fnFilter(a(this).val(),c)})}function f(a){switch(a){case 0:return m.substring(0,m.indexOf("{from}"));case 1:return m.substring(m.indexOf("{from}")+
6,m.indexOf("{to}"));default:return m.substring(m.indexOf("{to}")+4)}}var n,h,g,l,m="From {from} to {to}",p=[],t=[];a.fn.columnFilter=function(f){oTable=this;properties=a.extend({sPlaceHolder:"foot",sRangeSeparator:"~",iFilteringDelay:500,aoColumns:null,sRangeFormat:"From {from} to {to}"},f);return this.each(function(){n=[];var f="tfoot tr";"head:after"==properties.sPlaceHolder?f="thead tr:last":"head:before"==properties.sPlaceHolder&&(a("thead tr:last").detach().prependTo("thead"),f="thead tr:first");
a(f+" th",oTable).each(function(f){h=f;f={type:"text",bRegex:!1,bSmart:!0};if(null!=properties.aoColumns){if(properties.aoColumns.length<h||null==properties.aoColumns[h])return;f=properties.aoColumns[h]}g=a(this).text();l=a(a(this)[0]);if(null!=f)switch(m=null!=f.sRangeFormat?f.sRangeFormat:properties.sRangeFormat,f.type){case "number":b(!0,!1,!0);break;case "text":bRegex=null==f.bRegex?!1:f.bRegex;bSmart=null==f.bSmart?!1:f.bSmart;b(bRegex,bSmart,!1);break;case "select":d(f.values);break;case "number-range":c();
break;case "date-range":e()}});for(j=0;j<t.length;j++){var r=t[j];p.push(function(){return a("#range_from_"+r).val()+properties.sRangeSeparator+a("#range_to_"+r).val()})}if(oTable.fnSettings().oFeatures.bServerSide){var u=oTable.fnSettings().fnServerData;oTable.fnSettings().fnServerData=function(b,c,d){for(j=0;j<t.length;j++){var e=t[j];for(k=0;k<c.length;k++)c[k].name=="sSearch_"+e&&(c[k].value=p[j]())}c.push({name:"sRangeSeparator",value:properties.sRangeSeparator});null!=u?u(b,c,d):a.getJSON(b,
c,function(a){d(a)})}}})}})(jQuery);
(function(a){a.widget("ui.dropdownchecklist",{version:function(){alert("DropDownCheckList v1.4")},_appendDropContainer:function(b){var c=a("<div/>");c.addClass("ui-dropdownchecklist ui-dropdownchecklist-dropcontainer-wrapper");c.addClass("ui-widget");c.attr("id",b.attr("id")+"-ddw");c.css({position:"absolute",left:"-33000px",top:"-33000px"});var e=a("<div/>");e.addClass("ui-dropdownchecklist-dropcontainer ui-widget-content");c.append(e);c.insertAfter(b);c.isOpen=!1;return c},_isDropDownKeyShortcut:function(b,
c){return b.altKey&&a.ui.keyCode.DOWN==c},_isDropDownCloseKey:function(b,c){return a.ui.keyCode.ESCAPE==c||a.ui.keyCode.ENTER==c},_keyFocusChange:function(b,c,e){var d=a(":focusable");b=d.index(b);0<=b&&(b+=c,e&&(e=this.dropWrapper.find("input:not([disabled])"),c=d.index(e.get(0)),e=d.index(e.get(e.length-1)),b<c?b=e:b>e&&(b=c)),d.get(b).focus())},_handleKeyboard:function(b){var c=b.keyCode||b.which;!this.dropWrapper.isOpen&&this._isDropDownKeyShortcut(b,c)?(b.stopImmediatePropagation(),this._toggleDropContainer(!0)):
this.dropWrapper.isOpen&&this._isDropDownCloseKey(b,c)?(b.stopImmediatePropagation(),this._toggleDropContainer(!1),this.controlSelector.focus()):!this.dropWrapper.isOpen||"checkbox"!=b.target.type||c!=a.ui.keyCode.DOWN&&c!=a.ui.keyCode.UP||(b.stopImmediatePropagation(),this._keyFocusChange(b.target,c==a.ui.keyCode.DOWN?1:-1,!0))},_handleFocus:function(b,c,e){e&&!this.dropWrapper.isOpen?(b.stopImmediatePropagation(),c?(this.controlSelector.addClass("ui-state-hover"),null!=a.ui.dropdownchecklist.gLastOpened&&
a.ui.dropdownchecklist.gLastOpened._toggleDropContainer(!1)):this.controlSelector.removeClass("ui-state-hover")):e||c||(null!=b&&b.stopImmediatePropagation(),this.controlSelector.removeClass("ui-state-hover"),this._toggleDropContainer(!1))},_cancelBlur:function(a){null!=this.blurringItem&&(clearTimeout(this.blurringItem),this.blurringItem=null)},_appendControl:function(){var b=this,c=this.sourceSelect,e=this.options,d=a("<span/>");d.addClass("ui-dropdownchecklist ui-dropdownchecklist-selector-wrapper ui-widget");
d.css({display:"inline-block",cursor:"default",overflow:"hidden"});var f=c.attr("id"),f=null==f||""==f?"ddcl-"+a.ui.dropdownchecklist.gIDCounter++:"ddcl-"+f;d.attr("id",f);var n=a("<span/>");n.addClass("ui-dropdownchecklist-selector ui-state-default");n.css({display:"inline-block",overflow:"hidden","white-space":"nowrap"});f=c.attr("tabIndex");null==f?f=0:(f=parseInt(f),0>f&&(f=0));n.attr("tabIndex",f);n.keyup(function(a){b._handleKeyboard(a)});n.focus(function(a){b._handleFocus(a,!0,!0)});n.blur(function(a){b._handleFocus(a,
!1,!0)});d.append(n);if(null!=e.icon){var f=null==e.icon.placement?"left":e.icon.placement,h=a("<div/>");h.addClass("ui-icon");h.addClass(null!=e.icon.toOpen?e.icon.toOpen:"ui-icon-triangle-1-e");h.css({"float":f});n.append(h)}e=a("<span/>");e.addClass("ui-dropdownchecklist-text");e.css({display:"inline-block","white-space":"nowrap",overflow:"hidden"});n.append(e);d.hover(function(){b.disabled||n.addClass("ui-state-hover")},function(){b.disabled||n.removeClass("ui-state-hover")});d.click(function(a){b.disabled||
(a.stopImmediatePropagation(),b._toggleDropContainer(!b.dropWrapper.isOpen))});d.insertAfter(c);a(window).resize(function(){!b.disabled&&b.dropWrapper.isOpen&&b._toggleDropContainer(!0)});return d},_createDropItem:function(b,c,e,d,f,n,h,g){var l=this,m=this.options,p=this.sourceSelect,t=this.controlWrapper,r=a("<div/>");r.addClass("ui-dropdownchecklist-item");r.css({"white-space":"nowrap"});n=n?' checked="checked"':"";var q=h?' class="inactive"':' class="active"',w=t.attr("id"),t=w+"-i"+b;c=l.isMultiple?
a('<input disabled type="checkbox" id="'+t+'"'+n+q+' tabindex="'+c+'" />'):a('<input disabled type="radio" id="'+t+'" name="'+w+'"'+n+q+' tabindex="'+c+'" />');c=c.attr("index",b).val(e);r.append(c);b=a("<label for="+t+"/>");b.addClass("ui-dropdownchecklist-text");null!=f&&b.attr("style",f);b.css({cursor:"default"});b.html(d);g&&r.addClass("ui-dropdownchecklist-indent");r.addClass("ui-state-default");h&&r.addClass("ui-state-disabled");b.click(function(a){a.stopImmediatePropagation()});r.append(b);
r.hover(function(b){b=a(this);b.hasClass("ui-state-disabled")||b.addClass("ui-state-hover")},function(b){a(this).removeClass("ui-state-hover")});c.click(function(b){var c=a(this);b.stopImmediatePropagation();if(c.hasClass("active")){b=l.options.onItemClick;if(a.isFunction(b))try{b.call(l,c,p.get(0))}catch(d){c.prop("checked",!c.prop("checked"));l._syncSelected(c);return}l._syncSelected(c);l.sourceSelect.trigger("change","ddcl_internal");!l.isMultiple&&m.closeRadioOnClick&&l._toggleDropContainer(!1)}});
r.click(function(b){var c=a(this);b.stopImmediatePropagation();if(c.hasClass("ui-state-disabled"))c.focus(),l._cancelBlur();else{b=c.find("input");c=b.prop("checked");b.prop("checked",!c);var d=l.options.onItemClick;if(a.isFunction(d))try{d.call(l,b,p.get(0))}catch(e){b.prop("checked",c);l._syncSelected(b);return}l._syncSelected(b);l.sourceSelect.trigger("change","ddcl_internal");c||l.isMultiple||!m.closeRadioOnClick||l._toggleDropContainer(!1)}});r.focus(function(b){a(this);b.stopImmediatePropagation()});
r.keyup(function(a){l._handleKeyboard(a)});return r},_createGroupItem:function(b,c){var e=this,d=a("<div />");d.addClass("ui-dropdownchecklist-group ui-widget-header");c&&d.addClass("ui-state-disabled");d.css({"white-space":"nowrap"});var f=a("<span/>");f.addClass("ui-dropdownchecklist-text");f.css({cursor:"default"});f.text(b);d.append(f);d.click(function(b){var c=a(this);b.stopImmediatePropagation();c.focus();e._cancelBlur()});d.focus(function(b){a(this);b.stopImmediatePropagation()});return d},
_createCloseItem:function(b){var c=this,e=a("<div />");e.addClass("ui-state-default ui-dropdownchecklist-close ui-dropdownchecklist-item");e.css({"white-space":"nowrap","text-align":"right"});var d=a("<span/>");d.addClass("ui-dropdownchecklist-text");d.css({cursor:"default"});d.html(b);e.append(d);e.click(function(b){var d=a(this);b.stopImmediatePropagation();d.focus();c._toggleDropContainer(!1)});e.hover(function(b){a(this).addClass("ui-state-hover")},function(b){a(this).removeClass("ui-state-hover")});
e.focus(function(b){a(this);b.stopImmediatePropagation()});return e},_appendItems:function(){var b=this,c=this.options,e=this.sourceSelect,d=this.dropWrapper.find(".ui-dropdownchecklist-dropcontainer");e.children().each(function(c){var e=a(this);if(e.is("option"))b._appendOption(e,d,c,!1,!1);else if(e.is("optgroup")){var h=e.prop("disabled"),g=e.attr("label");""!=g&&(g=b._createGroupItem(g,h),d.append(g));b._appendOptions(e,d,c,!0,h)}});null!=c.explicitClose&&(c=b._createCloseItem(c.explicitClose),
d.append(c));c=d.outerWidth();e=d.outerHeight();return{width:c,height:e}},_appendOptions:function(b,c,e,d,f){var n=this;b.children("option").each(function(b){var g=a(this);n._appendOption(g,c,e+"."+b,d,f)})},_appendOption:function(a,c,e,d,f){var n=a.html();if(null!=n&&""!=n){var h=a.val(),g=a.attr("style"),l=a.prop("selected");a=f||a.prop("disabled");f=this.controlSelector.attr("tabindex");e=this._createDropItem(e,f,h,n,g,l,a,d);c.append(e)}},_syncSelected:function(b){var c=this.options,e=this.dropWrapper,
d=this.sourceSelect.get(0).options,f=e.find("input.active");if("exclusive"==c.firstItemChecksAll)if(null==b&&a(d[0]).prop("selected"))f.prop("checked",!1),a(f[0]).prop("checked",!0);else if(null!=b&&0==b.attr("index"))c=b.prop("checked"),f.prop("checked",!1),a(f[0]).prop("checked",c);else{var n=!0,h=null;f.each(function(b){0<b?a(this).prop("checked")||(n=!1):h=a(this)});null!=h&&(n&&f.prop("checked",!1),h.prop("checked",n))}else c.firstItemChecksAll&&(null==b&&a(d[0]).prop("selected")?f.prop("checked",
!0):null!=b&&0==b.attr("index")?f.prop("checked",b.prop("checked")):(n=!0,h=null,f.each(function(b){0<b?a(this).prop("checked")||(n=!1):h=a(this)}),null!=h&&h.prop("checked",n)));var g=0,f=e.find("input");f.each(function(b){var c=a(d[b+g]),e=c.html();if(null==e||""==e)g+=1,c=a(d[b+g]);c.prop("selected",a(this).prop("checked"))});this._updateControlText();null!=b&&b.focus()},_sourceSelectChangeHandler:function(a){this.dropWrapper.find("input").val(this.sourceSelect.val());this._updateControlText()},
_updateControlText:function(){var a=this.sourceSelect,c=this.options,e=this.controlWrapper,d=a.find("option:first"),a=a.find("option"),c=this._formatText(a,c.firstItemChecksAll,d),e=e.find(".ui-dropdownchecklist-text");e.html(c);e.attr("title",e.text())},_formatText:function(b,c,e){var d;if(a.isFunction(this.options.textFormatFunction))try{d=this.options.textFormatFunction(b)}catch(f){alert("textFormatFunction failed: "+f)}else c&&null!=e&&e.prop("selected")?d=e.html():(d="",b.each(function(){if(a(this).prop("selected")){""!=
d&&(d+=", ");var b=a(this).attr("style"),c=a("<span/>");c.html(a(this).html());null==b?d+=c.html():(c.attr("style",b),d+=a("<span/>").append(c).html())}}),""==d&&(d=null!=this.options.emptyText?this.options.emptyText:"&nbsp;"));return d},_toggleDropContainer:function(b){var c=function(b){if(null!=b&&b.dropWrapper.isOpen){b.dropWrapper.isOpen=!1;a.ui.dropdownchecklist.gLastOpened=null;var e=b.options;b.dropWrapper.css({top:"-33000px",left:"-33000px"});var n=b.controlSelector;n.removeClass("ui-state-active");
n.removeClass("ui-state-hover");n=b.controlWrapper.find(".ui-icon");0<n.length&&(n.removeClass(null!=e.icon.toClose?e.icon.toClose:"ui-icon-triangle-1-s"),n.addClass(null!=e.icon.toOpen?e.icon.toOpen:"ui-icon-triangle-1-e"));a(document).unbind("click",c);b.dropWrapper.find("input.active").prop("disabled",!0);if(a.isFunction(e.onComplete))try{e.onComplete.call(b,b.sourceSelect.get(0))}catch(h){alert("callback failed: "+h)}}},e=function(b){if(!b.dropWrapper.isOpen){b.dropWrapper.isOpen=!0;a.ui.dropdownchecklist.gLastOpened=
b;var e=b.options;null==e.positionHow||"absolute"==e.positionHow?b.dropWrapper.css({position:"absolute",top:b.controlWrapper.position().top+b.controlWrapper.outerHeight()+"px",left:b.controlWrapper.position().left+"px"}):"relative"==e.positionHow&&b.dropWrapper.css({position:"relative",top:"0px",left:"0px"});var n=0;if(null==e.zIndex){var h=b.controlWrapper.parents().map(function(){var b=a(this).css("z-index");return isNaN(b)?0:b}).get(),h=Math.max.apply(Math,h);0<=h&&(n=h+1)}else n=parseInt(e.zIndex);
0<n&&b.dropWrapper.css({"z-index":n});n=b.controlSelector;n.addClass("ui-state-active");n.removeClass("ui-state-hover");n=b.controlWrapper.find(".ui-icon");0<n.length&&(n.removeClass(null!=e.icon.toOpen?e.icon.toOpen:"ui-icon-triangle-1-e"),n.addClass(null!=e.icon.toClose?e.icon.toClose:"ui-icon-triangle-1-s"));a(document).bind("click",function(a){c(b)});e=b.dropWrapper.find("input.active");e.prop("disabled",!1);e=e.get(0);null!=e&&e.focus()}};b?(c(a.ui.dropdownchecklist.gLastOpened),e(this)):c(this)},
_setSize:function(a){var c=this.options,e=this.controlWrapper;a=a.width;null!=c.width?a=parseInt(c.width):null!=c.minWidth&&(c=parseInt(c.minWidth),a<c&&(a=c));var d=this.controlSelector;d.css({width:a+"px"});c=d.find(".ui-dropdownchecklist-text");d=d.find(".ui-icon");null!=d&&(a-=d.outerWidth()+4,c.css({width:a+"px"}));e.outerWidth()},_init:function(){var b=this,c=this.options;null==a.ui.dropdownchecklist.gIDCounter&&(a.ui.dropdownchecklist.gIDCounter=1);b.blurringItem=null;var e=b.element;b.initialDisplay=
e.css("display");e.css("display","none");b.initialMultiple=e.prop("multiple");b.isMultiple=b.initialMultiple;null!=c.forceMultiple&&(b.isMultiple=c.forceMultiple);e.prop("multiple",!0);b.sourceSelect=e;var d=b._appendControl();b.controlWrapper=d;b.controlSelector=d.find(".ui-dropdownchecklist-selector");var f=b._appendDropContainer(d);b.dropWrapper=f;var n=b._appendItems();b._updateControlText(d,f,e);b._setSize(n);c.firstItemChecksAll&&b._syncSelected(null);c.bgiframe&&"function"==typeof b.dropWrapper.bgiframe&&
b.dropWrapper.bgiframe();b.sourceSelect.change(function(a,c){"ddcl_internal"!=c&&b._sourceSelectChangeHandler(a)})},_refreshOption:function(a,c,e){var d=a.parent();c?(a.prop("disabled",!0),a.removeClass("active"),a.addClass("inactive"),d.addClass("ui-state-disabled")):(a.prop("disabled",!1),a.removeClass("inactive"),a.addClass("active"),d.removeClass("ui-state-disabled"));a.prop("checked",e)},_refreshGroup:function(a,c){c?a.addClass("ui-state-disabled"):a.removeClass("ui-state-disabled")},close:function(){this._toggleDropContainer(!1)},
refresh:function(){var b=this,c=this.sourceSelect,e=this.dropWrapper,d=e.find("input"),f=e.find(".ui-dropdownchecklist-group"),n=0,h=0;c.children().each(function(c){c=a(this);var e=c.prop("disabled");if(c.is("option")){c=c.prop("selected");var m=a(d[h]);b._refreshOption(m,e,c);h+=1}else c.is("optgroup")&&(""!=c.attr("label")&&(m=a(f[n]),b._refreshGroup(m,e),n+=1),c.children("option").each(function(){var c=a(this),g=e||c.prop("disabled"),c=c.prop("selected"),f=a(d[h]);b._refreshOption(f,g,c);h+=1}))});
b._syncSelected(null)},enable:function(){this.controlSelector.removeClass("ui-state-disabled");this.disabled=!1},disable:function(){this.controlSelector.addClass("ui-state-disabled");this.disabled=!0},destroy:function(){a.Widget.prototype.destroy.apply(this,arguments);this.sourceSelect.css("display",this.initialDisplay);this.sourceSelect.prop("multiple",this.initialMultiple);this.controlWrapper.unbind().remove();this.dropWrapper.remove()}});a.extend(a.ui.dropdownchecklist,{defaults:{width:null,maxDropHeight:null,
firstItemChecksAll:!1,closeRadioOnClick:!1,minWidth:50,positionHow:"absolute",bgiframe:!1,explicitClose:null}})})(jQuery);(function(a,b,c,e,d,f,n){a.GoogleAnalyticsObject=d;a[d]=a[d]||function(){(a[d].q=a[d].q||[]).push(arguments)};a[d].l=1*new Date;f=b.createElement(c);n=b.getElementsByTagName(c)[0];f.async=1;f.src=e;n.parentNode.insertBefore(f,n)})(window,document,"script","//www.google-analytics.com/analytics.js","ga");ga("create","UA-40113910-1","umd.edu");ga("send","pageview");
!function(){function a(a){return null!=a&&!isNaN(a)}function b(a){return a.length}function c(a,b){try{for(var c in b)Object.defineProperty(a.prototype,c,{value:b[c],enumerable:!1})}catch(d){a.prototype=b}}function e(){}function d(a){return pd+a in this}function f(){var a=[];this.forEach(function(b){a.push(b)});return a}function n(){var a=0,b;for(b in this)b.charCodeAt(0)===oe&&++a;return a}function h(){for(var a in this)if(a.charCodeAt(0)===oe)return!1;return!0}function g(){}function l(a,b,c){return function(){var d=
c.apply(b,arguments);return d===b?a:d}}function m(a,b){if(b in a)return b;b=b.charAt(0).toUpperCase()+b.substring(1);for(var c=0,d=hg.length;c<d;++c){var e=hg[c]+b;if(e in a)return e}}function p(){}function t(){}function r(a){function b(){for(var d=c,e=-1,g=d.length,f;++e<g;)(f=d[e].on)&&f.apply(this,arguments);return a}var c=[],d=new e;b.on=function(b,e){var g=d.get(b),f;if(2>arguments.length)return g&&g.on;g&&(g.on=null,c=c.slice(0,f=c.indexOf(g)).concat(c.slice(f+1)),d.remove(b));e&&c.push(d.set(b,
{on:e}));return a};return b}function q(){F.event.preventDefault()}function w(){for(var a=F.event,b;b=a.sourceEvent;)a=b;return a}function u(a){for(var b=new t,c=0,d=arguments.length;++c<d;)b[arguments[c]]=r(b);b.of=function(c,d){return function(e){try{var g=e.sourceEvent=F.event;e.target=a;F.event=e;b[e.type].apply(c,d)}finally{F.event=g}}};return b}function x(a){pe(a,Ga);return a}function z(a){return"function"===typeof a?a:function(){return Gf(a,this)}}function y(a){return"function"===typeof a?a:
function(){return qd(a,this)}}function B(a,b){function c(){this.removeAttribute(a)}function d(){this.removeAttributeNS(a.space,a.local)}function e(){this.setAttribute(a,b)}function g(){this.setAttributeNS(a.space,a.local,b)}function f(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}function h(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}a=F.ns.qualify(a);return null==b?a.local?d:c:"function"===
typeof b?a.local?h:f:a.local?g:e}function A(a){return a.trim().replace(/\s+/g," ")}function C(a){return new RegExp("(?:^|\\s+)"+F.requote(a)+"(?:\\s+|$)","g")}function D(a,b){function c(){for(var d=-1;++d<e;)a[d](this,b)}function d(){for(var c=-1,g=b.apply(this,arguments);++c<e;)a[c](this,g)}a=a.trim().split(/^|\s+/).map(H);var e=a.length;return"function"===typeof b?d:c}function H(a){var b=C(a);return function(c,d){if(e=c.classList)return d?e.add(a):e.remove(a);var e=c.getAttribute("class")||"";d?
(b.lastIndex=0,b.test(e)||c.setAttribute("class",A(e+" "+a))):c.setAttribute("class",A(e.replace(b," ")))}}function G(a,b,c){function d(){this.style.removeProperty(a)}function e(){this.style.setProperty(a,b,c)}function g(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}return null==b?d:"function"===typeof b?g:e}function L(a,b){function c(){delete this[a]}function d(){this[a]=b}function e(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=
c}return null==b?c:"function"===typeof b?e:d}function J(a){return"function"===typeof a?a:(a=F.ns.qualify(a)).local?function(){return this.ownerDocument.createElementNS(a.space,a.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,a)}}function M(a){return function(){return Ue(this,a)}}function V(a){arguments.length||(a=F.ascending);return function(b,c){return b&&c?a(b.__data__,c.__data__):!b-!c}}function T(a,b){for(var c=0,d=a.length;c<d;c++)for(var e=a[c],g=0,f=e.length,
h;g<f;g++)(h=e[g])&&b(h,g,c);return a}function O(a){pe(a,sc);return a}function N(a){var b,c;return function(d,e,g){d=a[g].update;var f=d.length;g!=c&&(c=g,b=0);for(e>=b&&(b=e+1);!(e=d[b])&&++b<f;);return e}}function Z(){var a=this.__transition__;a&&++a.active}function X(a,b,c){function d(){var b=this[f];b&&(this.removeEventListener(a,b,b.$),delete this[f])}function e(){var g=l(b,tc(arguments));d.call(this);this.addEventListener(a,this[f]=g,g.$=c);g._=b}function g(){var b=new RegExp("^__on([^.]+)"+
F.requote(a)+"$"),c,d;for(d in this)if(c=d.match(b)){var e=this[d];this.removeEventListener(c[1],e,e.$);delete this[d]}}var f="__on"+a,h=a.indexOf("."),l=P;0<h&&(a=a.substring(0,h));var m=uc.get(a);m&&(a=m,l=R);return h?b?e:d:b?p:g}function P(a,b){return function(c){var d=F.event;F.event=c;b[0]=this.__data__;try{a.apply(this,b)}finally{F.event=d}}}function R(a,b){var c=P(a,b);return function(a){var b=a.relatedTarget;b&&(b===this||b.compareDocumentPosition(this)&8)||c.call(this,a)}}function K(){var a=
".dragsuppress-"+ ++Tg,b="click"+a,c=F.select(Qa).on("touchmove"+a,q).on("dragstart"+a,q).on("selectstart"+a,q);if(Oc){var d=Ib.style,e=d[Oc];d[Oc]="none"}return function(g){c.on(a,null);Oc&&(d[Oc]=e);if(g){var f=function(){c.on(b,null)};c.on(b,function(){q();f()},!0);setTimeout(f,0)}}}function U(a,b){b.changedTouches&&(b=b.changedTouches[0]);var c=a.ownerSVGElement||a;if(c.createSVGPoint){var d=c.createSVGPoint();if(0>E&&(Qa.scrollX||Qa.scrollY)){var c=F.select("body").append("svg").style({position:"absolute",
top:0,left:0,margin:0,padding:0,border:"none"},"important"),e=c[0][0].getScreenCTM();E=!(e.f||e.e);c.remove()}E?(d.x=b.pageX,d.y=b.pageY):(d.x=b.clientX,d.y=b.clientY);d=d.matrixTransform(a.getScreenCTM().inverse());return[d.x,d.y]}c=a.getBoundingClientRect();return[b.clientX-c.left-a.clientLeft,b.clientY-c.top-a.clientTop]}function Q(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function ma(a){return 1<a?0:-1>a?I:Math.acos(a)}function S(a){return 1<a?hb:-1>a?-hb:Math.asin(a)}function W(a){return((a=
Math.exp(a))+1/a)/2}function la(a){return(a=Math.sin(a/2))*a}function sa(){}function aa(a,b,c){return new ea(a,b,c)}function ea(a,b,c){this.h=a;this.s=b;this.l=c}function Ia(a,b,c){function d(a){360<a?a-=360:0>a&&(a+=360);return 60>a?e+(g-e)*a/60:180>a?g:240>a?e+(g-e)*(240-a)/60:e}var e,g;a=isNaN(a)?0:0>(a%=360)?a+360:a;b=isNaN(b)?0:0>b?0:1<b?1:b;c=0>c?0:1<c?1:c;g=.5>=c?c*(1+b):c+b-c*b;e=2*c-g;return Ca(Math.round(255*d(a+120)),Math.round(255*d(a)),Math.round(255*d(a-120)))}function v(a,b,c){return new Ea(a,
b,c)}function Ea(a,b,c){this.h=a;this.c=b;this.l=c}function pa(a,b,c){isNaN(a)&&(a=0);isNaN(b)&&(b=0);return ya(c,Math.cos(a*=fa)*b,Math.sin(a)*b)}function ya(a,b,c){return new ib(a,b,c)}function ib(a,b,c){this.l=a;this.a=b;this.b=c}function Ka(a,b,c){a=(a+16)/116;c=a-c/200;b=Oa(a+b/500)*hh;a=Oa(a)*ih;c=Oa(c)*jh;return Ca(qb(3.2404542*b-1.5371385*a-.4985314*c),qb(-.969266*b+1.8760108*a+.041556*c),qb(.0556434*b-.2040259*a+1.0572252*c))}function Fa(a,b,c){return 0<a?v(Math.atan2(c,b)*lb,Math.sqrt(b*
b+c*c),a):v(NaN,NaN,a)}function Oa(a){return.206893034<a?a*a*a:(a-4/29)/7.787037}function pb(a){return.008856<a?Math.pow(a,1/3):7.787037*a+4/29}function qb(a){return Math.round(255*(.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055))}function Xa(a){return Ca(a>>16,a>>8&255,a&255)+""}function Ca(a,b,c){return new Ra(a,b,c)}function Ra(a,b,c){this.r=a;this.g=b;this.b=c}function Va(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function sb(a,b,c){var d=0,e=0,g=0,f,h;if(f=/([a-z]+)\((.*)\)/i.exec(a))switch(h=
f[2].split(","),f[1]){case "hsl":return c(parseFloat(h[0]),parseFloat(h[1])/100,parseFloat(h[2])/100);case "rgb":return b(Na(h[0]),Na(h[1]),Na(h[2]))}if(c=ig.get(a))return b(c.r,c.g,c.b);null!=a&&"#"===a.charAt(0)&&(4===a.length?(d=a.charAt(1),d+=d,e=a.charAt(2),e+=e,g=a.charAt(3),g+=g):7===a.length&&(d=a.substring(1,3),e=a.substring(3,5),g=a.substring(5,7)),d=parseInt(d,16),e=parseInt(e,16),g=parseInt(g,16));return b(d,e,g)}function Ya(a,b,c){var d=Math.min(a/=255,b/=255,c/=255),e=Math.max(a,b,c),
g=e-d,f=(e+d)/2;g?(d=.5>f?g/(e+d):g/(2-e-d),a=60*(a==e?(b-c)/g+(b<c?6:0):b==e?(c-a)/g+2:(a-b)/g+4)):(a=NaN,d=0<f&&1>f?0:a);return aa(a,d,f)}function cb(a,b,c){a=Wa(a);b=Wa(b);c=Wa(c);var d=pb((.4124564*a+.3575761*b+.1804375*c)/hh),e=pb((.2126729*a+.7151522*b+.072175*c)/ih);a=pb((.0193339*a+.119192*b+.9503041*c)/jh);return ya(116*e-16,500*(d-e),200*(e-a))}function Wa(a){return.04045>=(a/=255)?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Na(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*
b):b}function na(a){return"function"===typeof a?a:function(){return a}}function Aa(a){return a}function db(a){return function(b,c,d){2===arguments.length&&"function"===typeof c&&(d=c,c=null);return Ma(b,c,a,d)}}function Ma(a,b,c,d){function e(){var a=l.status,b;if(!a&&l.responseText||200<=a&&300>a||304===a){try{b=c.call(g,l)}catch(d){f.error.call(g,d);return}f.load.call(g,b)}else f.error.call(g,l)}var g={},f=F.dispatch("beforesend","progress","load","error"),h={},l=new XMLHttpRequest,m=null;!Qa.XDomainRequest||
"withCredentials"in l||!/^(http(s)?:)?\/\//.test(a)||(l=new XDomainRequest);"onload"in l?l.onload=l.onerror=e:l.onreadystatechange=function(){3<l.readyState&&e()};l.onprogress=function(a){var b=F.event;F.event=a;try{f.progress.call(g,l)}finally{F.event=b}};g.header=function(a,b){a=(a+"").toLowerCase();if(2>arguments.length)return h[a];null==b?delete h[a]:h[a]=b+"";return g};g.mimeType=function(a){if(!arguments.length)return b;b=null==a?null:a+"";return g};g.responseType=function(a){if(!arguments.length)return m;
m=a;return g};g.response=function(a){c=a;return g};["get","post"].forEach(function(a){g[a]=function(){return g.send.apply(g,[a].concat(tc(arguments)))}});g.send=function(c,d,e){2===arguments.length&&"function"===typeof d&&(e=d,d=null);l.open(c,a,!0);null==b||"accept"in h||(h.accept=b+",*/*");if(l.setRequestHeader)for(var p in h)l.setRequestHeader(p,h[p]);null!=b&&l.overrideMimeType&&l.overrideMimeType(b);null!=m&&(l.responseType=m);if(null!=e)g.on("error",e).on("load",function(a){e(null,a)});f.beforesend.call(g,
l);l.send(null==d?null:d);return g};g.abort=function(){l.abort();return g};F.rebind(g,f,"on");return null==d?g:g.get(Pa(d))}function Pa(a){return 1===a.length?function(b,c){a(null==b?c:null)}:a}function qa(){var a=Kb(),a=eb()-a;24<a?(isFinite(a)&&(clearTimeout(jg),jg=setTimeout(qa,a)),kg=0):(kg=1,kh(qa))}function Kb(){var a=Date.now();for(rd=lg;rd;)a>=rd.t&&(rd.f=rd.c(a-rd.t)),rd=rd.n;return a}function eb(){for(var a,b=lg,c=Infinity;b;)b.f?b=a?a.n=b.n:lg=b.n:(b.t<c&&(c=b.t),b=(a=b).n);mg=a;return c}
function jb(a,b){return b-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function mb(a){var b=a.decimal,c=a.thousands,d=a.grouping,e=a.currency,g=d?function(a){for(var b=a.length,e=[],g=0,f=d[0];0<b&&0<f;)e.push(a.substring(b-=f,b+f)),f=d[g=(g+1)%d.length];return e.reverse().join(c)}:Aa;return function(a){a=lh.exec(a);var c=a[1]||" ",d=a[2]||">",f=a[3]||"",h=a[4]||"",l=a[5],m=+a[6],p=a[7],E=a[8],q=a[9],r=1,kb="",n="",I=!1;E&&(E=+E.substring(1));if(l||"0"===c&&"="===d)l=c="0",d="=",p&&(m-=Math.floor((m-1)/
4));switch(q){case "n":p=!0;q="g";break;case "%":r=100;n="%";q="f";break;case "p":r=100;n="%";q="r";break;case "b":case "o":case "x":case "X":"#"===h&&(kb="0"+q.toLowerCase());case "c":case "d":I=!0;E=0;break;case "s":r=-1,q="r"}"$"===h&&(kb=e[0],n=e[1]);"r"!=q||E||(q="g");if(null!=E)if("g"==q)E=Math.max(1,Math.min(21,E));else if("e"==q||"f"==q)E=Math.max(0,Math.min(20,E));var q=Mh.get(q)||ka,t=l&&p;return function(a){if(I&&a%1)return"";var e=0>a||0===a&&0>1/a?(a=-a,"-"):f;if(0>r){var h=F.formatPrefix(a,
E);a=h.scale(a);n=h.symbol}else a*=r;a=q(a,E);var y=a.lastIndexOf("."),h=0>y?a:a.substring(0,y);a=0>y?"":b+a.substring(y+1);!l&&p&&(h=g(h));var y=kb.length+h.length+a.length+(t?0:e.length),u=y<m?Array(y=m-y+1).join(c):"";t&&(h=g(u+h));e+=kb;a=h+a;return("<"===d?e+a+u:">"===d?u+e+a:"^"===d?u.substring(0,y>>=1)+e+a+u.substring(y):e+(t?a:u+a))+n}}}function ka(a){return a+""}function Za(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function xa(a,b,c){function d(b){var c=
a(b),e=g(c,1);return b-c<e-b?c:e}function e(c){b(c=a(new Lb(c-1)),1);return c}function g(a,c){b(a=new Lb(+a),c);return a}function f(a,d,g){a=e(a);var h=[];if(1<g)for(;a<d;)c(a)%g||h.push(new Date(+a)),b(a,1);else for(;a<d;)h.push(new Date(+a)),b(a,1);return h}a.floor=a;a.round=d;a.ceil=e;a.offset=g;a.range=f;var h=a.utc=ub(a);h.floor=h;h.round=ub(d);h.ceil=ub(e);h.offset=ub(g);h.range=function(a,b,c){try{Lb=Za;var d=new Za;d._=a;return f(d,b,c)}finally{Lb=Date}};return a}function ub(a){return function(b,
c){try{Lb=Za;var d=new Za;d._=b;return a(d,c)._}finally{Lb=Date}}}function Eb(a){function b(a){function d(b){for(var c=[],g=-1,f=0,h,l;++g<e;)if(37===a.charCodeAt(g)){c.push(a.substring(f,g));null!=(h=mh[f=a.charAt(++g)])&&(f=a.charAt(++g));if(l=w[f])f=l(b,null==h?"e"===f?" ":"0":h);c.push(f);f=g+1}c.push(a.substring(f,g));return c.join("")}var e=a.length;d.parse=function(b){var d={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(c(d,a,b,0)!=b.length)return null;"p"in d&&(d.H=d.H%12+12*d.p);b=null!=d.Z&&
Lb!==Za;var e=new (b?Za:Lb);"j"in d?e.setFullYear(d.y,0,d.j):"w"in d&&("W"in d||"U"in d)?(e.setFullYear(d.y,0,1),e.setFullYear(d.y,0,"W"in d?(d.w+6)%7+7*d.W-(e.getDay()+5)%7:d.w+7*d.U-(e.getDay()+6)%7)):e.setFullYear(d.y,d.m,d.d);e.setHours(d.H+Math.floor(d.Z/100),d.M+d.Z%100,d.S,d.L);return b?e._:e};d.toString=function(){return a};return d}function c(a,b,d,e){for(var g,f=0,h=b.length,l=d.length;f<h;){if(e>=l)return-1;g=b.charCodeAt(f++);if(37===g){if(g=b.charAt(f++),g=x[g in mh?b.charAt(f++):g],
!g||0>(e=g(a,d,e)))return-1}else if(g!=d.charCodeAt(e++))return-1}return e}var d=a.dateTime,e=a.date,g=a.time,f=a.periods,h=a.days,l=a.shortDays,m=a.months,p=a.shortMonths;b.utc=function(a){function c(a){try{Lb=Za;var b=new Lb;b._=a;return d(b)}finally{Lb=Date}}var d=b(a);c.parse=function(a){try{Lb=Za;var b=d.parse(a);return b&&b._}finally{Lb=Date}};c.toString=d.toString;return c};b.multi=b.utc.multi=zb;var E=F.map(),q=oa(h),r=Cb(h),n=oa(l),I=Cb(l),t=oa(m),y=Cb(m),u=oa(p),ba=Cb(p);f.forEach(function(a,
b){E.set(a.toLowerCase(),b)});var w={a:function(a){return l[a.getDay()]},A:function(a){return h[a.getDay()]},b:function(a){return p[a.getMonth()]},B:function(a){return m[a.getMonth()]},c:b(d),d:function(a,b){return Ja(a.getDate(),b,2)},e:function(a,b){return Ja(a.getDate(),b,2)},H:function(a,b){return Ja(a.getHours(),b,2)},I:function(a,b){return Ja(a.getHours()%12||12,b,2)},j:function(a,b){return Ja(1+ha.dayOfYear(a),b,3)},L:function(a,b){return Ja(a.getMilliseconds(),b,3)},m:function(a,b){return Ja(a.getMonth()+
1,b,2)},M:function(a,b){return Ja(a.getMinutes(),b,2)},p:function(a){return f[+(12<=a.getHours())]},S:function(a,b){return Ja(a.getSeconds(),b,2)},U:function(a,b){return Ja(ha.sundayOfYear(a),b,2)},w:function(a){return a.getDay()},W:function(a,b){return Ja(ha.mondayOfYear(a),b,2)},x:b(e),X:b(g),y:function(a,b){return Ja(a.getFullYear()%100,b,2)},Y:function(a,b){return Ja(a.getFullYear()%1E4,b,4)},Z:gc,"%":function(){return"%"}},x={a:function(a,b,c){n.lastIndex=0;return(b=n.exec(b.substring(c)))?(a.w=
I.get(b[0].toLowerCase()),c+b[0].length):-1},A:function(a,b,c){q.lastIndex=0;return(b=q.exec(b.substring(c)))?(a.w=r.get(b[0].toLowerCase()),c+b[0].length):-1},b:function(a,b,c){u.lastIndex=0;return(b=u.exec(b.substring(c)))?(a.m=ba.get(b[0].toLowerCase()),c+b[0].length):-1},B:function(a,b,c){t.lastIndex=0;return(b=t.exec(b.substring(c)))?(a.m=y.get(b[0].toLowerCase()),c+b[0].length):-1},c:function(a,b,d){return c(a,w.c.toString(),b,d)},d:ja,e:ja,H:Y,I:Y,j:Sa,L:nb,m:Ta,M:Ba,p:function(a,b,c){b=E.get(b.substring(c,
c+=2).toLowerCase());return null==b?-1:(a.p=b,c)},S:Ua,U:da,w:Nb,W:ca,x:function(a,b,d){return c(a,w.x.toString(),b,d)},X:function(a,b,d){return c(a,w.X.toString(),b,d)},y:va,Y:ab,Z:Da,"%":Sb};return b}function Ja(a,b,c){var d=0>a?"-":"";a=(d?-a:a)+"";var e=a.length;return d+(e<c?Array(c-e+1).join(b)+a:a)}function oa(a){return new RegExp("^(?:"+a.map(F.requote).join("|")+")","i")}function Cb(a){for(var b=new e,c=-1,d=a.length;++c<d;)b.set(a[c].toLowerCase(),c);return b}function Nb(a,b,c){rb.lastIndex=
0;return(b=rb.exec(b.substring(c,c+1)))?(a.w=+b[0],c+b[0].length):-1}function da(a,b,c){rb.lastIndex=0;return(b=rb.exec(b.substring(c)))?(a.U=+b[0],c+b[0].length):-1}function ca(a,b,c){rb.lastIndex=0;return(b=rb.exec(b.substring(c)))?(a.W=+b[0],c+b[0].length):-1}function ab(a,b,c){rb.lastIndex=0;return(b=rb.exec(b.substring(c,c+4)))?(a.y=+b[0],c+b[0].length):-1}function va(a,b,c){rb.lastIndex=0;if(b=rb.exec(b.substring(c,c+2))){var d=+b[0];a=(a.y=d+(68<d?1900:2E3),c+b[0].length)}else a=-1;return a}
function Da(a,b,c){return/^[+-]\d{4}$/.test(b=b.substring(c,c+5))?(a.Z=+b,c+5):-1}function Ta(a,b,c){rb.lastIndex=0;return(b=rb.exec(b.substring(c,c+2)))?(a.m=b[0]-1,c+b[0].length):-1}function ja(a,b,c){rb.lastIndex=0;return(b=rb.exec(b.substring(c,c+2)))?(a.d=+b[0],c+b[0].length):-1}function Sa(a,b,c){rb.lastIndex=0;return(b=rb.exec(b.substring(c,c+3)))?(a.j=+b[0],c+b[0].length):-1}function Y(a,b,c){rb.lastIndex=0;return(b=rb.exec(b.substring(c,c+2)))?(a.H=+b[0],c+b[0].length):-1}function Ba(a,b,
c){rb.lastIndex=0;return(b=rb.exec(b.substring(c,c+2)))?(a.M=+b[0],c+b[0].length):-1}function Ua(a,b,c){rb.lastIndex=0;return(b=rb.exec(b.substring(c,c+2)))?(a.S=+b[0],c+b[0].length):-1}function nb(a,b,c){rb.lastIndex=0;return(b=rb.exec(b.substring(c,c+3)))?(a.L=+b[0],c+b[0].length):-1}function gc(a){var b=a.getTimezoneOffset();a=0<b?"-":"+";var c=~~(ta(b)/60),b=ta(b)%60;return a+Ja(c,"0",2)+Ja(b,"0",2)}function Sb(a,b,c){nh.lastIndex=0;return(a=nh.exec(b.substring(c,c+1)))?c+a[0].length:-1}function zb(a){for(var b=
a.length,c=-1;++c<b;)a[c][0]=this(a[c][0]);return function(b){for(var c=0,d=a[c];!d[1](b);)d=a[++c];return d[0](b)}}function Ub(){}function pc(a,b,c){var d=c.s=a+b,e=d-a;c.t=a-(d-e)+(b-e)}function $a(a,b){if(a&&oh.hasOwnProperty(a.type))oh[a.type](a,b)}function ob(a,b,c){var d=-1;c=a.length-c;var e;for(b.lineStart();++d<c;)e=a[d],b.point(e[0],e[1],e[2]);b.lineEnd()}function Xc(a,b){var c=-1,d=a.length;for(b.polygonStart();++c<d;)ob(a[c],b,1);b.polygonEnd()}function tb(){function a(b,c){b*=fa;c=c*
fa/2+I/4;var f=b-d,h=Math.cos(c),l=Math.sin(c),m=g*l,p=e*h+m*Math.cos(f),f=m*Math.sin(f);qe.add(Math.atan2(f,p));d=b;e=h;g=l}var b,c,d,e,g;ic.point=function(f,h){ic.point=a;d=(b=f)*fa;e=Math.cos(h=(c=h)*fa/2+I/4);g=Math.sin(h)};ic.lineEnd=function(){a(b,c)}}function Mb(a){var b=a[0];a=a[1];var c=Math.cos(a);return[c*Math.cos(b),c*Math.sin(b),Math.sin(a)]}function ac(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function Hb(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function qc(a,
b){a[0]+=b[0];a[1]+=b[1];a[2]+=b[2]}function kd(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function Ed(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b;a[1]/=b;a[2]/=b}function ld(a){return[Math.atan2(a[1],a[0]),S(a[2])]}function zd(a,b){return 1E-6>ta(a[0]-b[0])&&1E-6>ta(a[1]-b[1])}function mc(a,b){a*=fa;var c=Math.cos(b*=fa);md(c*Math.cos(a),c*Math.sin(a),Math.sin(b))}function md(a,b,c){++Hf;sd+=(a-sd)/Hf;td+=(b-td)/Hf;$c+=(c-$c)/Hf}function nc(){function a(e,g){e*=fa;var f=Math.cos(g*=fa),h=f*
Math.cos(e),f=f*Math.sin(e),l=Math.sin(g),m=Math.atan2(Math.sqrt((m=c*l-d*f)*m+(m=d*h-b*l)*m+(m=b*f-c*h)*m),b*h+c*f+d*l);Ve+=m;vc+=m*(b+(b=h));wc+=m*(c+(c=f));Xb+=m*(d+(d=l));md(b,c,d)}var b,c,d;Pc.point=function(e,g){e*=fa;var f=Math.cos(g*=fa);b=f*Math.cos(e);c=f*Math.sin(e);d=Math.sin(g);Pc.point=a;md(b,c,d)}}function Kc(){Pc.point=mc}function je(){function a(b,c){b*=fa;var f=Math.cos(c*=fa),h=f*Math.cos(b),f=f*Math.sin(b),l=Math.sin(c),m=e*l-g*f,p=g*h-d*l,E=d*f-e*h,q=Math.sqrt(m*m+p*p+E*E),r=
d*h+e*f+g*l,kb=q&&-ma(r)/q,q=Math.atan2(q,r);Md+=kb*m;Nd+=kb*p;ad+=kb*E;Ve+=q;vc+=q*(d+(d=h));wc+=q*(e+(e=f));Xb+=q*(g+(g=l));md(d,e,g)}var b,c,d,e,g;Pc.point=function(f,h){b=f;c=h;Pc.point=a;f*=fa;var l=Math.cos(h*=fa);d=l*Math.cos(f);e=l*Math.sin(f);g=Math.sin(h);md(d,e,g)};Pc.lineEnd=function(){a(b,c);Pc.lineEnd=Kc;Pc.point=mc}}function Db(){return!0}function yd(a,b,c,d,e){var g=[],f=[];a.forEach(function(a){if(!(0>=(b=a.length-1))){var b,c=a[0],d=a[b];if(zd(c,d)){e.lineStart();for(d=0;d<b;++d)e.point((c=
a[d])[0],c[1]);e.lineEnd()}else b=new Fd(c,a,null,!0),c=new Fd(c,null,b,!1),b.o=c,g.push(b),f.push(c),b=new Fd(d,a,null,!1),c=new Fd(d,null,b,!0),b.o=c,g.push(b),f.push(c)}});f.sort(b);ke(g);ke(f);if(g.length){a=0;b=c;for(c=f.length;a<c;++a)f[a].e=b=!b;b=g[0];for(var h,l;;){for(var m=b,p=!0;m.v;)if((m=m.n)===b)return;h=m.z;e.lineStart();do{m.v=m.o.v=!0;if(m.e){if(p)for(a=0,c=h.length;a<c;++a)e.point((l=h[a])[0],l[1]);else d(m.x,m.n.x,1,e);m=m.n}else{if(p)for(h=m.p.z,a=h.length-1;0<=a;--a)e.point((l=
h[a])[0],l[1]);else d(m.x,m.p.x,-1,e);m=m.p}m=m.o;h=m.z;p=!p}while(!m.v);e.lineEnd()}}}function ke(a){if(b=a.length){for(var b,c=0,d=a[0],e;++c<b;)d.n=e=a[c],e.p=d,d=e;d.n=e=a[0];e.p=d}}function Fd(a,b,c,d){this.x=a;this.z=b;this.o=c;this.e=d;this.v=!1;this.n=this.p=null}function Yd(a,b,c,d){return function(e,g){function f(b,c){var d=e(b,c);a(b=d[0],c=d[1])&&g.point(b,c)}function h(a,b){var c=e(a,b);r.point(c[0],c[1])}function l(){t.point=h;r.lineStart()}function m(){t.point=f;r.lineEnd()}function p(a,
b){z.push([a,b]);var c=e(a,b);w.point(c[0],c[1])}function E(){w.lineStart();z=[]}function q(){p(z[0][0],z[0][1]);w.lineEnd();var a=w.clean(),b=u.buffer(),c=b.length;z.pop();x.push(z);z=null;if(c)if(a&1){var a=b[0],c=a.length-1,b=-1,d;for(g.lineStart();++b<c;)g.point((d=a[b])[0],d[1]);g.lineEnd()}else 1<c&&a&2&&b.push(b.pop().concat(b.shift())),y.push(b.filter(Pe))}var r=b(g),n=e.invert(d[0],d[1]),t={point:f,lineStart:l,lineEnd:m,polygonStart:function(){t.point=p;t.lineStart=E;t.lineEnd=q;y=[];x=[];
g.polygonStart()},polygonEnd:function(){t.point=f;t.lineStart=l;t.lineEnd=m;y=F.merge(y);var a,b=n;a=x;var d=b[0],e=b[1],h=[Math.sin(d),-Math.cos(d),0],p=0,E=0;qe.reset();for(var q=0,r=a.length;q<r;++q){var kb=a[q],u=kb.length;if(u)for(var w=kb[0],vb=w[0],b=w[1]/2+I/4,z=Math.sin(b),B=Math.cos(b),A=1;;){A===u&&(A=0);var b=kb[A],fa=b[0],G=b[1]/2+I/4,D=Math.sin(G),G=Math.cos(G),C=fa-vb,hb=ta(C)>I,z=z*D;qe.add(Math.atan2(z*Math.sin(C),B*G+z*Math.cos(C)));p+=hb?C+(0<=C?ba:-ba):C;hb^vb>=d^fa>=d&&(w=Hb(Mb(w),
Mb(b)),Ed(w),vb=Hb(h,w),Ed(vb),vb=(hb^0<=C?-1:1)*S(vb[2]),e>vb||e===vb&&(w[0]||w[1]))&&(E+=hb^0<=C?1:-1);if(!A++)break;vb=fa;z=D;B=G;w=b}}a=(-1E-6>p||1E-6>p&&0>qe)^E&1;y.length?yd(y,Qe,a,c,g):a&&(g.lineStart(),c(null,null,1,g),g.lineEnd());g.polygonEnd();y=x=null},sphere:function(){g.polygonStart();g.lineStart();c(null,null,1,g);g.lineEnd();g.polygonEnd()}},y,u=le(),w=b(u),x,z;return t}}function Pe(a){return 1<a.length}function le(){var a=[],b;return{lineStart:function(){a.push(b=[])},point:function(a,
c){b.push([a,c])},lineEnd:p,buffer:function(){var c=a;a=[];b=null;return c},rejoin:function(){1<a.length&&a.push(a.pop().concat(a.shift()))}}}function Qe(a,b){return(0>(a=a.x)[0]?a[1]-hb-1E-6:hb-a[1])-(0>(b=b.x)[0]?b[1]-hb-1E-6:hb-b[1])}function rc(a){function b(a,c){return Math.cos(a)*Math.cos(c)>e}function c(a,b,d){var g=Mb(a),f=Mb(b),h=[1,0,0],f=Hb(g,f),l=ac(f,f),g=f[0],m=l-g*g;if(!m)return!d&&a;l=e*l/m;m=-e*g/m;g=Hb(h,f);h=kd(h,l);f=kd(f,m);qc(h,f);f=ac(h,g);l=ac(g,g);m=f*f-l*(ac(h,h)-1);if(!(0>
m)){var p=Math.sqrt(m),m=kd(g,(-f-p)/l);qc(m,h);m=ld(m);if(!d)return m;d=a[0];var E=b[0];a=a[1];b=b[1];var q;E<d&&(q=d,d=E,E=q);var r=E-d,kb=1E-6>ta(r-I);!kb&&b<a&&(q=a,a=b,b=q);if(kb||1E-6>r?kb?0<a+b^m[1]<(1E-6>ta(m[0]-d)?a:b):a<=m[1]&&m[1]<=b:r>I^(d<=m[0]&&m[0]<=E))return b=kd(g,(-f+p)/l),qc(b,h),[m,ld(b)]}}function d(b,c){var e=g?a:I-a,f=0;b<-e?f|=1:b>e&&(f|=2);c<-e?f|=4:c>e&&(f|=8);return f}var e=Math.cos(a),g=0<e,f=1E-6<ta(e),h=Pb(a,6*fa);return Yd(b,function(a){var e,h,l,m,p;return{lineStart:function(){m=
l=!1;p=1},point:function(E,q){var r=[E,q],kb,n=b(E,q),t=g?n?0:d(E,q):n?d(E+(0>E?I:-I),q):0;!e&&(m=l=n)&&a.lineStart();n!==l&&(kb=c(e,r),zd(e,kb)||zd(r,kb))&&(r[0]+=1E-6,r[1]+=1E-6,n=b(r[0],r[1]));if(n!==l)p=0,n?(a.lineStart(),kb=c(r,e),a.point(kb[0],kb[1])):(kb=c(e,r),a.point(kb[0],kb[1]),a.lineEnd()),e=kb;else if(f&&e&&g^n){var y;t&h||!(y=c(r,e,!0))||(p=0,g?(a.lineStart(),a.point(y[0][0],y[0][1]),a.point(y[1][0],y[1][1]),a.lineEnd()):(a.point(y[1][0],y[1][1]),a.lineEnd(),a.lineStart(),a.point(y[0][0],
y[0][1])))}!n||e&&zd(e,r)||a.point(r[0],r[1]);e=r;l=n;h=t},lineEnd:function(){l&&a.lineEnd();e=null},clean:function(){return p|(m&&l)<<1}}},h,g?[0,-a]:[-I,a-I])}function Qb(a,b,c,d){return function(e){var g=e.a,f=e.b,h=g.x,g=g.y,l=0,m=1,p=f.x-h,f=f.y-g,E;E=a-h;if(p||!(0<E)){E/=p;if(0>p){if(E<l)return;E<m&&(m=E)}else if(0<p){if(E>m)return;E>l&&(l=E)}E=c-h;if(p||!(0>E)){E/=p;if(0>p){if(E>m)return;E>l&&(l=E)}else if(0<p){if(E<l)return;E<m&&(m=E)}E=b-g;if(f||!(0<E)){E/=f;if(0>f){if(E<l)return;E<m&&(m=
E)}else if(0<f){if(E>m)return;E>l&&(l=E)}E=d-g;if(f||!(0>E)){E/=f;if(0>f){if(E>m)return;E>l&&(l=E)}else if(0<f){if(E<l)return;E<m&&(m=E)}0<l&&(e.a={x:h+l*p,y:g+l*f});1>m&&(e.b={x:h+m*p,y:g+m*f});return e}}}}}}function me(a,b,c,d){function e(d,g){return 1E-6>ta(d[0]-a)?0<g?0:3:1E-6>ta(d[0]-c)?0<g?2:1:1E-6>ta(d[1]-b)?0<g?1:0:0<g?3:2}function g(a,b){return f(a.x,b.x)}function f(a,b){var c=e(a,1),d=e(b,1);return c!==d?c-d:0===c?b[1]-a[1]:1===c?a[0]-b[0]:2===c?a[1]-b[1]:b[0]-a[0]}return function(h){function l(g,
h,m,p){var E=0,q=0;if(null==g||(E=e(g,m))!==(q=e(h,m))||0>f(g,h)^0<m){do p.point(0===E||3===E?a:c,1<E?d:b);while((E=(E+m+4)%4)!==q)}else p.point(h[0],h[1])}function m(e,g){a<=e&&e<=c&&b<=g&&g<=d&&h.point(e,g)}function p(e,g){e=Math.max(-1E9,Math.min(1E9,e));g=Math.max(-1E9,Math.min(1E9,g));var f=a<=e&&e<=c&&b<=g&&g<=d;I&&t.push([e,g]);if(A)u=e,ba=g,w=f,A=!1,f&&(h.lineStart(),h.point(e,g));else if(f&&B)h.point(e,g);else{var l={a:{x:x,y:z},b:{x:e,y:g}};r(l)?(B||(h.lineStart(),h.point(l.a.x,l.a.y)),
h.point(l.b.x,l.b.y),f||h.lineEnd(),fa=!1):f&&(h.lineStart(),h.point(e,g),fa=!1)}x=e;z=g;B=f}var E=h,q=le(),r=Qb(a,b,c,d),n,I,t,y={point:m,lineStart:function(){y.point=p;I&&I.push(t=[]);A=!0;B=!1;x=z=NaN},lineEnd:function(){n&&(p(u,ba),w&&B&&q.rejoin(),n.push(q.buffer()));y.point=m;B&&h.lineEnd()},polygonStart:function(){h=q;n=[];I=[];fa=!0},polygonEnd:function(){h=E;n=F.merge(n);var b;b=[a,d];for(var c=0,e=I.length,f=b[1],m=0;m<e;++m)for(var p=1,q=I[m],r=q.length,y=q[0],u;p<r;++p)u=q[p],y[1]<=f?
u[1]>f&&0<Q(y,u,b)&&++c:u[1]<=f&&0>Q(y,u,b)&&--c,y=u;b=0!==c;c=fa&&b;e=n.length;if(c||e)h.polygonStart(),c&&(h.lineStart(),l(null,null,1,h),h.lineEnd()),e&&yd(n,g,b,l,h),h.polygonEnd();n=I=t=null}},u,ba,w,x,z,B,A,fa;return y}}function Re(a,b){function c(d,e){return d=a(d,e),b(d[0],d[1])}a.invert&&b.invert&&(c.invert=function(c,d){return c=b.invert(c,d),c&&a.invert(c[0],c[1])});return c}function Gd(a){var b=0,c=I/3,d=Ob(a);a=d(b,c);a.parallels=function(a){return arguments.length?d(b=a[0]*I/180,c=a[1]*
I/180):[b/I*180,c/I*180]};return a}function Hd(a,b){function c(a,b){var d=Math.sqrt(g-2*e*Math.sin(b))/e;return[d*Math.sin(a*=e),f-d*Math.cos(a)]}var d=Math.sin(a),e=(d+Math.sin(b))/2,g=1+d*(2*e-d),f=Math.sqrt(g)/e;c.invert=function(a,b){var c=f-b;return[Math.atan2(a,c)/e,S((g-(a*a+c*c)*e*e)/(2*e))]};return c}function ne(){function a(b,c){ng+=e*b-d*c;d=b;e=c}var b,c,d,e;Od.point=function(g,f){Od.point=a;b=d=g;c=e=f};Od.lineEnd=function(){a(b,c)}}function Se(){function a(b,c){f.push("M",b,",",c,g)}
function b(a,d){f.push("M",a,",",d);h.point=c}function c(a,b){f.push("L",a,",",b)}function d(){h.point=a}function e(){f.push("Z")}var g=Lc(4.5),f=[],h={point:a,lineStart:function(){h.point=b},lineEnd:d,polygonStart:function(){h.lineEnd=e},polygonEnd:function(){h.lineEnd=d;h.point=a},pointRadius:function(a){g=Lc(a);return h},result:function(){if(f.length){var a=f.join("");f=[];return a}}};return h}function Lc(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function hc(a,
b){sd+=a;td+=b;++$c}function Yc(){function a(d,e){var g=d-b,f=e-c,g=Math.sqrt(g*g+f*f);vc+=g*(b+d)/2;wc+=g*(c+e)/2;Xb+=g;hc(b=d,c=e)}var b,c;Qc.point=function(d,e){Qc.point=a;hc(b=d,c=e)}}function hd(){Qc.point=hc}function Zc(){function a(b,c){var g=b-d,f=c-e,g=Math.sqrt(g*g+f*f);vc+=g*(d+b)/2;wc+=g*(e+c)/2;Xb+=g;g=e*b-d*c;Md+=g*(d+b);Nd+=g*(e+c);ad+=3*g;hc(d=b,e=c)}var b,c,d,e;Qc.point=function(g,f){Qc.point=a;hc(b=d=g,c=e=f)};Qc.lineEnd=function(){a(b,c)}}function Te(a){function b(c,d){a.moveTo(c,
d);a.arc(c,d,f,0,ba)}function c(b,e){a.moveTo(b,e);h.point=d}function d(b,c){a.lineTo(b,c)}function e(){h.point=b}function g(){a.closePath()}var f=4.5,h={point:b,lineStart:function(){h.point=c},lineEnd:e,polygonStart:function(){h.lineEnd=g},polygonEnd:function(){h.lineEnd=e;h.point=b},pointRadius:function(a){f=a;return h},result:p};return h}function Id(a){function b(a){return(h?d:c)(a)}function c(b){return Vb(b,function(c,d){c=a(c,d);b.point(c[0],c[1])})}function d(b){function c(d,e){d=a(d,e);b.point(d[0],
d[1])}function g(){ba=NaN;B.point=f;b.lineStart()}function f(c,d){var g=Mb([c,d]),l=a(c,d);e(ba,w,u,x,z,vb,ba=l[0],w=l[1],u=c,x=g[0],z=g[1],vb=g[2],h,b);b.point(ba,w)}function l(){B.point=c;b.lineEnd()}function m(){g();B.point=p;B.lineEnd=E}function p(a,b){f(q=a,b);r=ba;n=w;I=x;t=z;y=vb;B.point=f}function E(){e(ba,w,u,x,z,vb,r,n,q,I,t,y,h,b);B.lineEnd=l;l()}var q,r,n,I,t,y,u,ba,w,x,z,vb,B={point:c,lineStart:g,lineEnd:l,polygonStart:function(){b.polygonStart();B.lineStart=m},polygonEnd:function(){b.polygonEnd();
B.lineStart=g}};return B}function e(b,c,d,h,l,m,p,E,q,r,n,I,t,y){var u=p-b,ba=E-c,w=u*u+ba*ba;if(w>4*g&&t--){var x=h+r,z=l+n,vb=m+I,B=Math.sqrt(x*x+z*z+vb*vb),A=Math.asin(vb/=B),fa=1E-6>ta(ta(vb)-1)||1E-6>ta(d-q)?(d+q)/2:Math.atan2(z,x),G=a(fa,A),A=G[0],G=G[1],C=A-b,D=G-c,hb=ba*C-u*D;if(hb*hb/w>g||.3<ta((u*C+ba*D)/w-.5)||h*r+l*n+m*I<f)e(b,c,d,h,l,m,A,G,fa,x/=B,z/=B,vb,t,y),y.point(A,G),e(A,G,fa,x,z,vb,p,E,q,r,n,I,t,y)}}var g=.5,f=Math.cos(30*fa),h=16;b.precision=function(a){if(!arguments.length)return Math.sqrt(g);
h=0<(g=a*a)&&16;return b};return b}function nd(a){var b=Id(function(b,c){return a([b*lb,c*lb])});return function(a){return Mc(b(a))}}function od(a){this.stream=a}function Vb(a,b){return{point:b,sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function Rb(a){return Ob(function(){return a})()}function Ob(a){function b(a){a=h(a[0]*fa,a[1]*fa);return[a[0]*m+y,u-a[1]*m]}function c(a){return(a=
h.invert((a[0]-y)/m,(u-a[1])/m))&&[a[0]*lb,a[1]*lb]}function d(){h=Re(f=Nc(n,I,t),g);var a=g(q,r);y=p-a[0]*m;u=E+a[1]*m;return e()}function e(){B&&(B.valid=!1,B=null);return b}var g,f,h,l=Id(function(a,b){a=g(a,b);return[a[0]*m+y,u-a[1]*m]}),m=150,p=480,E=250,q=0,r=0,n=0,I=0,t=0,y,u,ba=ph,w=Aa,x=null,z=null,B;b.stream=function(a){B&&(B.valid=!1);B=Mc(ba(f,l(w(a))));B.valid=!0;return B};b.clipAngle=function(a){if(!arguments.length)return x;ba=null==a?(x=a,ph):rc((x=+a)*fa);return e()};b.clipExtent=
function(a){if(!arguments.length)return z;w=(z=a)?me(a[0][0],a[0][1],a[1][0],a[1][1]):Aa;return e()};b.scale=function(a){if(!arguments.length)return m;m=+a;return d()};b.translate=function(a){if(!arguments.length)return[p,E];p=+a[0];E=+a[1];return d()};b.center=function(a){if(!arguments.length)return[q*lb,r*lb];q=a[0]%360*fa;r=a[1]%360*fa;return d()};b.rotate=function(a){if(!arguments.length)return[n*lb,I*lb,t*lb];n=a[0]%360*fa;I=a[1]%360*fa;t=2<a.length?a[2]%360*fa:0;return d()};F.rebind(b,l,"precision");
return function(){g=a.apply(this,arguments);b.invert=g.invert&&c;return d()}}function Mc(a){return Vb(a,function(b,c){a.point(b*fa,c*fa)})}function Wb(a,b){return[a,b]}function Ec(a,b){return[a>I?a-ba:a<-I?a+ba:a,b]}function Nc(a,b,c){return a?b||c?Re(za(a),Kd(b,c)):za(a):b||c?Kd(b,c):Ec}function Jd(a){return function(b,c){return b+=a,[b>I?b-ba:b<-I?b+ba:b,c]}}function za(a){var b=Jd(a);b.invert=Jd(-a);return b}function Kd(a,b){function c(a,b){var h=Math.cos(b),l=Math.cos(a)*h,h=Math.sin(a)*h,m=Math.sin(b),
p=m*d+l*e;return[Math.atan2(h*g-p*f,l*d-m*e),S(p*g+h*f)]}var d=Math.cos(a),e=Math.sin(a),g=Math.cos(b),f=Math.sin(b);c.invert=function(a,b){var c=Math.cos(b),h=Math.cos(a)*c,c=Math.sin(a)*c,l=Math.sin(b),m=l*g-c*f;return[Math.atan2(c*g+l*f,h*d+m*e),S(m*d-h*e)]};return c}function Pb(a,b){var c=Math.cos(a),d=Math.sin(a);return function(e,g,f,h){var l=f*b;if(null!=e){if(e=Tc(c,e),g=Tc(c,g),0<f?e<g:e>g)e+=f*ba}else e=a+f*ba,g=a-.5*l;for(var m;0<f?e>g:e<g;e-=l)h.point((m=ld([c,-d*Math.cos(e),-d*Math.sin(e)]))[0],
m[1])}}function Tc(a,b){var c=Mb(b);c[0]-=a;Ed(c);var d=ma(-c[1]);return((0>-c[2]?-d:d)+2*Math.PI-1E-6)%(2*Math.PI)}function Ld(a,b,c){var d=F.range(a,b-1E-6,c).concat(b);return function(a){return d.map(function(b){return[a,b]})}}function Vf(a,b,c){var d=F.range(a,b-1E-6,c).concat(b);return function(a){return d.map(function(b){return[b,a]})}}function xd(a){return a.source}function gd(a){return a.target}function tf(a,b,c,d){var e=Math.cos(b),g=Math.sin(b),f=Math.cos(d),h=Math.sin(d),l=e*Math.cos(a),
m=e*Math.sin(a),p=f*Math.cos(c),E=f*Math.sin(c),q=2*Math.asin(Math.sqrt(la(d-b)+e*f*la(c-a))),r=1/Math.sin(q);c=q?function(a){var b=Math.sin(a*=q)*r,c=Math.sin(q-a)*r;a=c*l+b*p;var d=c*m+b*E,b=c*g+b*h;return[Math.atan2(d,a)*lb,Math.atan2(b,Math.sqrt(a*a+d*d))*lb]}:function(){return[a*lb,b*lb]};c.distance=q;return c}function Sc(a,b){function c(b,d){var e=Math.cos(b),g=Math.cos(d),e=a(e*g);return[e*g*Math.sin(b),e*Math.sin(d)]}c.invert=function(a,c){var d=Math.sqrt(a*a+c*c),e=b(d),g=Math.sin(e),e=Math.cos(e);
return[Math.atan2(a*g,d*e),Math.asin(d&&c*g/d)]};return c}function uf(a,b){function c(a,b){var d=1E-6>ta(ta(b)-hb)?0:g/Math.pow(Math.tan(I/4+b/2),e);return[d*Math.sin(e*a),g-d*Math.cos(e*a)]}var d=Math.cos(a),e=a===b?Math.sin(a):Math.log(d/Math.cos(b))/Math.log(Math.tan(I/4+b/2)/Math.tan(I/4+a/2)),g=d*Math.pow(Math.tan(I/4+a/2),e)/e;if(!e)return Zd;c.invert=function(a,b){var c=g-b,d=(0<e?1:0>e?-1:0)*Math.sqrt(a*a+c*c);return[Math.atan2(a,c)/e,2*Math.atan(Math.pow(g/d,1/e))-hb]};return c}function Wf(a,
b){function c(a,b){var d=g-b;return[d*Math.sin(e*a),g-d*Math.cos(e*a)]}var d=Math.cos(a),e=a===b?Math.sin(a):(d-Math.cos(b))/(b-a),g=d/e+a;if(1E-6>ta(e))return Wb;c.invert=function(a,b){var c=g-b;return[Math.atan2(a,c)/e,g-(0<e?1:0>e?-1:0)*Math.sqrt(a*a+c*c)]};return c}function Zd(a,b){return[a,Math.log(Math.tan(I/4+b/2))]}function vf(a){var b=Rb(a),c=b.scale,d=b.translate,e=b.clipExtent,g;b.scale=function(){var a=c.apply(b,arguments);return a===b?g?b.clipExtent(null):b:a};b.translate=function(){var a=
d.apply(b,arguments);return a===b?g?b.clipExtent(null):b:a};b.clipExtent=function(a){var f=e.apply(b,arguments);if(f===b){if(g=null==a){var h=I*c(),l=d();e([[l[0]-h,l[1]-h],[l[0]+h,l[1]+h]])}}else g&&(f=null);return f};return b.clipExtent(null)}function Ge(a,b){return[Math.log(Math.tan(I/4+b/2)),-a]}function Tb(a){return a[0]}function Ad(a){return a[1]}function bc(a){for(var b=a.length,c=[0,1],d=2,e=2;e<b;e++){for(;1<d&&0>=Q(a[c[d-2]],a[c[d-1]],a[e]);)--d;c[d++]=e}return c.slice(0,d)}function $d(a,
b){return a[0]-b[0]||a[1]-b[1]}function He(a,b,c){return(c[0]-b[0])*(a[1]-b[1])<(c[1]-b[1])*(a[0]-b[0])}function Uc(a,b,c,d){var e=a[0],g=c[0],f=b[0]-e,h=d[0]-g;a=a[1];c=c[1];b=b[1]-a;d=d[1]-c;g=(h*(a-c)-d*(e-g))/(d*f-h*b);return[e+g*f,a+g*b]}function Ie(a){var b=a[0];a=a[a.length-1];return!(b[0]-a[0]||b[1]-a[1])}function ae(){Cd(this);this.edge=this.site=this.circle=null}function $f(a){var b=qh.pop()||new ae;b.site=a;return b}function Ne(a){Wc(a);We.remove(a);qh.push(a);Cd(a)}function zf(a,b){var c=
a.site,d=c.x,e=c.y,g=e-b;if(!g)return d;var f=a.P;if(!f)return-Infinity;var c=f.site,f=c.x,c=c.y,h=c-b;if(!h)return f;var l=f-d,m=1/g-1/h,p=l/h;return m?(-p+Math.sqrt(p*p-2*m*(l*l/(-2*h)-c+h/2+e-g/2)))/m+d:(d+f)/2}function Je(a){this.site=a;this.edges=[]}function Ef(a,b){return b.angle-a.angle}function bg(){Cd(this);this.x=this.y=this.arc=this.site=this.cy=null}function jd(a){var b=a.P,c=a.N;if(b&&c){var d=b.site,b=a.site,e=c.site;if(d!==e){var c=b.x,g=b.y,f=d.x-c,h=d.y-g,d=e.x-c,e=e.y-g,l=2*(f*e-
h*d);if(!(-1E-12<=l)){var m=f*f+h*h,p=d*d+e*e,h=(e*m-h*p)/l,f=(f*p-d*m)/l,e=f+g,g=rh.pop()||new bg;g.arc=a;g.site=b;g.x=h+c;g.y=e+Math.sqrt(h*h+f*f);g.cy=e;a.circle=g;a=null;for(b=If._;b;)if(g.y<b.y||g.y===b.y&&g.x<=b.x)if(b.L)b=b.L;else{a=b.P;break}else if(b.R)b=b.R;else{a=b;break}If.insert(a,g);a||(Ug=g)}}}}function Wc(a){var b=a.circle;b&&(b.P||(Ug=b.N),If.remove(b),rh.push(b),Cd(b),a.circle=null)}function cg(a,b){var c=a.b;if(c)return!0;var d=a.a,c=b[0][0],e=b[1][0],g=b[0][1],f=b[1][1],h=a.l,
l=a.r,m=h.x,h=h.y,p=l.x,l=l.y,E=(m+p)/2,q;if(l===h){if(E<c||E>=e)return;if(m>p){if(!d)d={x:E,y:g};else if(d.y>=f)return;c={x:E,y:f}}else{if(!d)d={x:E,y:f};else if(d.y<g)return;c={x:E,y:g}}}else if(q=(m-p)/(l-h),E=(h+l)/2-q*E,-1>q||1<q)if(m>p){if(!d)d={x:(g-E)/q,y:g};else if(d.y>=f)return;c={x:(f-E)/q,y:f}}else{if(!d)d={x:(f-E)/q,y:f};else if(d.y<g)return;c={x:(g-E)/q,y:g}}else if(h<l){if(!d)d={x:c,y:q*c+E};else if(d.x>=e)return;c={x:e,y:q*e+E}}else{if(!d)d={x:e,y:q*e+E};else if(d.x<c)return;c={x:c,
y:q*c+E}}a.a=d;a.b=c;return!0}function Bf(a,b){this.l=a;this.r=b;this.a=this.b=null}function be(a,b,c,d){var e=new Bf(a,b);Xe.push(e);c&&Oe(e,a,b,c);d&&Oe(e,b,a,d);re[a.i].edges.push(new ce(e,a,b));re[b.i].edges.push(new ce(e,b,a));return e}function Rg(a,b,c){a=new Bf(a,null);a.a=b;a.b=c;Xe.push(a);return a}function Oe(a,b,c,d){a.a||a.b?a.l===c?a.b=d:a.a=d:(a.a=d,a.l=b,a.r=c)}function ce(a,b,c){var d=a.a,e=a.b;this.edge=a;this.site=b;this.angle=c?Math.atan2(c.y-b.y,c.x-b.x):a.l===b?Math.atan2(e.x-
d.x,d.y-e.y):Math.atan2(d.x-e.x,e.y-d.y)}function Le(){this._=null}function Cd(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function Gc(a,b){var c=b.R,d=b.U;d?d.L===b?d.L=c:d.R=c:a._=c;c.U=d;b.U=c;b.R=c.L;b.R&&(b.R.U=b);c.L=b}function Hc(a,b){var c=b.L,d=b.U;d?d.L===b?d.L=c:d.R=c:a._=c;c.U=d;b.U=c;b.L=c.R;b.L&&(b.L.U=b);c.R=b}function Vc(a){for(;a.L;)a=a.L;return a}function Ke(a,b){var c=a.sort(ua).pop(),d,e,g;Xe=[];re=Array(a.length);We=new Le;for(If=new Le;;)if(g=Ug,c&&(!g||c.y<g.y||c.y===g.y&&c.x<g.x)){if(c.x!==
d||c.y!==e){re[c.i]=new Je(c);d=c;for(var f=d.x,h=d.y,l=g=e=void 0,m=void 0,p=We._;p;)if(l=zf(p,h)-f,1E-6<l)p=p.L;else{var E=p,m=h,q=E.N;q?m=zf(q,m):(E=E.site,m=E.y===m?E.x:Infinity);m=f-m;if(1E-6<m){if(!p.R){e=p;break}p=p.R}else{-1E-6<l?(e=p.P,g=p):-1E-6<m?(e=p,g=p.N):e=g=p;break}}f=$f(d);We.insert(e,f);if(e||g)if(e===g)Wc(e),g=$f(e.site),We.insert(f,g),f.edge=g.edge=be(e.site,f.site),jd(e),jd(g);else if(g){Wc(e);Wc(g);var h=e.site,p=h.x,m=h.y,E=d.x-p,q=d.y-m,l=g.site,r=l.x-p,n=l.y-m,I=2*(E*n-q*
r),t=E*E+q*q,y=r*r+n*n,p={x:(n*t-q*y)/I+p,y:(E*y-r*t)/I+m};Oe(g.edge,h,l,p);f.edge=be(h,d,null,p);g.edge=be(d,l,null,p);jd(e);jd(g)}else f.edge=be(e.site,f.site);d=c.x;e=c.y}c=a.pop()}else if(g){l=g.arc;g=l.circle;h=g.x;p=g.cy;g={x:h,y:p};E=l.P;m=l.N;f=[l];Ne(l);for(l=E;l.circle&&1E-6>ta(h-l.circle.x)&&1E-6>ta(p-l.circle.cy);)E=l.P,f.unshift(l),Ne(l),l=E;f.unshift(l);Wc(l);for(E=m;E.circle&&1E-6>ta(h-E.circle.x)&&1E-6>ta(p-E.circle.cy);)m=E.N,f.push(E),Ne(E),E=m;f.push(E);Wc(E);h=f.length;p=void 0;
for(p=1;p<h;++p)E=f[p],l=f[p-1],Oe(E.edge,l.site,E.site,g);l=f[0];E=f[h-1];E.edge=be(l.site,E.site,null,g);jd(l);jd(E)}else break;if(b){c=Xe;d=Qb(b[0][0],b[0][1],b[1][0],b[1][1]);for(e=c.length;e--;)if(g=c[e],!cg(g,b)||!d(g)||1E-6>ta(g.a.x-g.b.x)&&1E-6>ta(g.a.y-g.b.y))g.a=g.b=null,c.splice(e,1);c=b[0][0];d=b[1][0];e=b[0][1];g=b[1][1];p=re;for(m=p.length;m--;)if((E=p[m])&&E.prepare())for(r=E.edges,n=r.length,q=0;q<n;)if(I=r[q].end(),h=I.x,l=I.y,t=r[++q%n].start(),f=t.x,t=t.y,1E-6<ta(h-f)||1E-6<ta(l-
t))r.splice(q,0,new ce(Rg(E.site,I,1E-6>ta(h-c)&&1E-6<g-l?{x:c,y:1E-6>ta(f-c)?t:g}:1E-6>ta(l-g)&&1E-6<d-h?{x:1E-6>ta(t-g)?f:d,y:g}:1E-6>ta(h-d)&&1E-6<l-e?{x:d,y:1E-6>ta(f-d)?t:e}:1E-6>ta(l-e)&&1E-6<h-c?{x:1E-6>ta(t-e)?f:c,y:e}:null),E.site,null)),++n}c={cells:re,edges:Xe};We=If=Xe=re=null;return c}function ua(a,b){return b.y-a.y||b.x-a.x}function ge(a){return a.x}function Af(a){return a.y}function fc(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function gb(a,b,c,d,e,g){if(!a(b,c,d,e,g)){var f=
.5*(c+e),h=.5*(d+g);b=b.nodes;b[0]&&gb(a,b[0],c,d,f,h);b[1]&&gb(a,b[1],f,d,e,h);b[2]&&gb(a,b[2],c,h,f,g);b[3]&&gb(a,b[3],f,h,e,g)}}function Ic(a,b){a=F.rgb(a);b=F.rgb(b);var c=a.r,d=a.g,e=a.b,g=b.r-c,f=b.g-d,h=b.b-e;return function(a){return"#"+Va(Math.round(c+g*a))+Va(Math.round(d+f*a))+Va(Math.round(e+h*a))}}function ec(a,b){var c={},d={},e;for(e in a)e in b?c[e]=Fc(a[e],b[e]):d[e]=a[e];for(e in b)e in a||(d[e]=b[e]);return function(a){for(e in c)d[e]=c[e](a);return d}}function Bb(a,b){b-=a=+a;
return function(c){return a+b*c}}function he(a,b){var c,d,e=0,g=[],f=[],h,l;a+="";b+="";for(d=og.lastIndex=0;c=og.exec(b);++d)c.index&&g.push(b.substring(e,c.index)),f.push({i:g.length,x:c[0]}),g.push(null),e=og.lastIndex;e<b.length&&g.push(b.substring(e));d=0;for(h=f.length;(c=og.exec(a))&&d<h;++d)if(l=f[d],l.x==c[0]){if(l.i)if(null==g[l.i+1])for(g[l.i-1]+=l.x,g.splice(l.i,1),c=d+1;c<h;++c)f[c].i--;else for(g[l.i-1]+=l.x+g[l.i+1],g.splice(l.i,2),c=d+1;c<h;++c)f[c].i-=2;else if(null==g[l.i+1])g[l.i]=
l.x;else for(g[l.i]=l.x+g[l.i+1],g.splice(l.i+1,1),c=d+1;c<h;++c)f[c].i--;f.splice(d,1);h--;d--}else l.x=Bb(parseFloat(c[0]),parseFloat(l.x));for(;d<h;)l=f.pop(),null==g[l.i+1]?g[l.i]=l.x:(g[l.i]=l.x+g[l.i+1],g.splice(l.i+1,1)),h--;return 1===g.length?null==g[0]?(l=f[0].x,function(a){return l(a)+""}):function(){return b}:function(a){for(d=0;d<h;++d)g[(l=f[d]).i]=l.x(a);return g.join("")}}function Fc(a,b){for(var c=F.interpolators.length,d;0<=--c&&!(d=F.interpolators[c](a,b)););return d}function fe(a,
b){var c=[],d=[],e=a.length,g=b.length,f=Math.min(a.length,b.length),h;for(h=0;h<f;++h)c.push(Fc(a[h],b[h]));for(;h<e;++h)d[h]=a[h];for(;h<g;++h)d[h]=b[h];return function(a){for(h=0;h<f;++h)d[h]=c[h](a);return d}}function dg(a){return function(b){return 0>=b?0:1<=b?1:a(b)}}function ie(a){return function(b){return 1-a(1-b)}}function Df(a){return function(b){return.5*(.5>b?a(2*b):2-a(2-2*b))}}function Sg(a){return a*a}function Dd(a){return a*a*a}function eg(a){if(0>=a)return 0;if(1<=a)return 1;var b=
a*a,c=b*a;return 4*(.5>a?c:3*(a-b)+c-.75)}function fg(a){return 1-Math.cos(a*hb)}function Zf(a){return Math.pow(2,10*(a-1))}function Ff(a){return 1-Math.sqrt(1-a*a)}function gg(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function yb(a,b){b-=a;return function(c){return Math.round(a+b*c)}}function Xf(a){var b=[a.a,a.b],c=[a.c,a.d],d=cc(b),e=b[0]*c[0]+b[1]*c[1],g=-e;c[0]+=g*b[0];c[1]+=g*b[1];g=cc(c)||0;b[0]*
c[1]<c[0]*b[1]&&(b[0]*=-1,b[1]*=-1,d*=-1,e*=-1);this.rotate=(d?Math.atan2(b[1],b[0]):Math.atan2(-c[0],c[1]))*lb;this.translate=[a.e,a.f];this.scale=[d,g];this.skew=g?Math.atan2(e,g)*lb:0}function cc(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]);b&&(a[0]/=b,a[1]/=b);return b}function wf(a,b){var c=[],d=[],e,g=F.transform(a),f=F.transform(b),h=g.translate,l=f.translate,m=g.rotate,p=f.rotate,E=g.skew,q=f.skew,g=g.scale,f=f.scale;h[0]!=l[0]||h[1]!=l[1]?(c.push("translate(",null,",",null,")"),d.push({i:1,x:Bb(h[0],
l[0])},{i:3,x:Bb(h[1],l[1])})):l[0]||l[1]?c.push("translate("+l+")"):c.push("");m!=p?(180<m-p?p+=360:180<p-m&&(m+=360),d.push({i:c.push(c.pop()+"rotate(",null,")")-2,x:Bb(m,p)})):p&&c.push(c.pop()+"rotate("+p+")");E!=q?d.push({i:c.push(c.pop()+"skewX(",null,")")-2,x:Bb(E,q)}):q&&c.push(c.pop()+"skewX("+q+")");g[0]!=f[0]||g[1]!=f[1]?(e=c.push(c.pop()+"scale(",null,",",null,")"),d.push({i:e-4,x:Bb(g[0],f[0])},{i:e-2,x:Bb(g[1],f[1])})):1==f[0]&&1==f[1]||c.push(c.pop()+"scale("+f+")");e=d.length;return function(a){for(var b=
-1,g;++b<e;)c[(g=d[b]).i]=g.x(a);return c.join("")}}function dc(a,b){b=b-(a=+a)?1/(b-a):0;return function(c){return(c-a)*b}}function Bd(a,b){b=b-(a=+a)?1/(b-a):0;return function(c){return Math.max(0,Math.min(1,(c-a)*b))}}function xf(a){var b=a.source;a=a.target;var c;var d=a;if(b===d)c=b;else{c=yf(b);for(var d=yf(d),e=c.pop(),g=d.pop(),f=null;e===g;)f=e,e=c.pop(),g=d.pop();c=f}for(d=[b];b!==c;)b=b.parent,d.push(b);for(b=d.length;a!==c;)d.splice(b,0,a),a=a.parent;return d}function yf(a){for(var b=
[],c=a.parent;null!=c;)b.push(a),a=c,c=c.parent;b.push(a);return b}function Yf(a){a.fixed|=2}function fb(a){a.fixed&=-7}function Fb(a){a.fixed|=4;a.px=a.x;a.py=a.y}function de(a){a.fixed&=-5}function Cf(a,b,c){var d=0,e=0;a.charge=0;if(!a.leaf)for(var g=a.nodes,f=g.length,h=-1,l;++h<f;)l=g[h],null!=l&&(Cf(l,b,c),a.charge+=l.charge,d+=l.charge*l.cx,e+=l.charge*l.cy);a.point&&(a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5),b*=c[a.point.index],a.charge+=a.pointCharge=b,d+=b*a.point.x,
e+=b*a.point.y);a.cx=d/a.charge;a.cy=e/a.charge}function Jc(a,b){F.rebind(a,b,"sort","children","value");a.nodes=a;a.links=ee;return a}function oc(a){return a.children}function Me(a){return a.value}function ag(a,b){return b.value-a.value}function ee(a){return F.merge(a.map(function(a){return(a.children||[]).map(function(b){return{source:a,target:b}})}))}function ra(a){return a.x}function id(a){return a.y}function jc(a,b,c){a.y0=b;a.y=c}function xc(a){return F.range(a.length)}function se(a){var b=
-1;a=a[0].length;for(var c=[];++b<a;)c[b]=0;return c}function Ye(a){for(var b=1,c=0,d=a[0][1],e,g=a.length;b<g;++b)(e=a[b][1])>d&&(c=b,d=e);return c}function Ze(a){return a.reduce(Jf,0)}function Jf(a,b){return a+b[1]}function pg(a,b){return qg(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function qg(a,b){for(var c=-1,d=+a[0],e=(a[1]-d)/b,g=[];++c<=b;)g[c]=e*c+d;return g}function Vg(a){return[F.min(a),F.max(a)]}function rg(a,b){return a.parent==b.parent?1:2}function Kf(a){var b=a.children;return b&&
b.length?b[0]:a._tree.thread}function te(a){var b=a.children,c;return b&&(c=b.length)?b[c-1]:a._tree.thread}function Pd(a,b){var c=a.children;if(c&&(e=c.length))for(var d,e,g=-1;++g<e;)0<b(d=Pd(c[g],b),a)&&(a=d);return a}function $e(a,b){return a.x-b.x}function af(a,b){return b.x-a.x}function sg(a,b){return a.depth-b.depth}function yc(a,b){function c(a,d){var e=a.children;if(e&&(l=e.length))for(var g,f=null,h=-1,l;++h<l;)g=e[h],c(g,f),f=g;b(a,d)}c(a,null)}function Lf(a,b){return a.value-b.value}function ue(a,
b){var c=a._pack_next;a._pack_next=b;b._pack_prev=a;b._pack_next=c;c._pack_prev=b}function bf(a,b){a._pack_next=b;b._pack_prev=a}function Mf(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.r+b.r;return.999*e*e>c*c+d*d}function Qd(a){function b(a){d=Math.min(a.x-a.r,d);e=Math.max(a.x+a.r,e);g=Math.min(a.y-a.r,g);f=Math.max(a.y+a.r,f)}if((c=a.children)&&(r=c.length)){var c,d=Infinity,e=-Infinity,g=Infinity,f=-Infinity,h,l,m,p,E,q,r;c.forEach(tg);h=c[0];h.x=-h.r;h.y=0;b(h);if(1<r&&(l=c[1],l.x=l.r,l.y=0,b(l),2<r))for(m=
c[2],bb(h,l,m),b(m),ue(h,m),h._pack_prev=m,ue(m,l),l=h._pack_next,p=3;p<r;p++){bb(h,l,m=c[p]);var n=0,I=1,t=1;for(E=l._pack_next;E!==l;E=E._pack_next,I++)if(Mf(E,m)){n=1;break}if(1==n)for(q=h._pack_prev;q!==E._pack_prev&&!Mf(q,m);q=q._pack_prev,t++);n?(I<t||I==t&&l.r<h.r?bf(h,l=E):bf(h=q,l),p--):(ue(h,m),l=m,b(m))}h=(d+e)/2;l=(g+f)/2;for(p=E=0;p<r;p++)m=c[p],m.x-=h,m.y-=l,E=Math.max(E,m.r+Math.sqrt(m.x*m.x+m.y*m.y));a.r=E;c.forEach(ug)}}function tg(a){a._pack_next=a._pack_prev=a}function ug(a){delete a._pack_next;
delete a._pack_prev}function La(a,b,c,d){var e=a.children;a.x=b+=d*a.x;a.y=c+=d*a.y;a.r*=d;if(e){a=-1;for(var g=e.length;++a<g;)La(e[a],b,c,d)}}function bb(a,b,c){var d=a.r+c.r,e=b.x-a.x,g=b.y-a.y;if(d&&(e||g)){var f=b.r+c.r,h=e*e+g*g,f=f*f,d=d*d;b=.5+(d-f)/(2*h);f=Math.sqrt(Math.max(0,2*f*(d+h)-(d-=h)*d-f*f))/(2*h);c.x=a.x+b*e+f*g;c.y=a.y+b*g-f*e}else c.x=a.x+d,c.y=a.y}function Gb(a){return 1+F.max(a,function(a){return a.y})}function Wg(a){return a.reduce(function(a,b){return a+b.x},0)/a.length}
function vg(a){var b=a.children;return b&&b.length?vg(b[0]):a}function Yb(a){var b=a.children,c;return b&&(c=b.length)?Yb(b[c-1]):a}function cf(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function df(a,b){var c=a.x+b[3],d=a.y+b[0],e=a.dx-b[1]-b[3],g=a.dy-b[0]-b[2];0>e&&(c+=e/2,e=0);0>g&&(d+=g/2,g=0);return{x:c,y:d,dx:e,dy:g}}function Rd(a){var b=a[0];a=a[a.length-1];return b<a?[b,a]:[a,b]}function ef(a){return a.rangeExtent?a.rangeExtent():Rd(a.range())}function ve(a,b,c,d){var e=c(a[0],a[1]),g=d(b[0],
b[1]);return function(a){return g(e(a))}}function Sd(a,b){var c=0,d=a.length-1,e=a[c],g=a[d],f;g<e&&(f=c,c=d,d=f,f=e,e=g,g=f);a[c]=b.floor(e);a[d]=b.ceil(g);return a}function Zb(a){return a?{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}:Nh}function Xg(a,b,c,d){var e=[],g=[],f=0,h=Math.min(a.length,b.length)-1;a[h]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());for(;++f<=h;)e.push(c(a[f-1],a[f])),g.push(d(b[f-1],b[f]));return function(b){var c=F.bisect(a,
b,1,h)-1;return g[c](e[c](b))}}function bd(a,b,c,d){function e(){var l=2<Math.min(a.length,b.length)?Xg:ve,m=d?Bd:dc;f=l(a,b,m,c);h=l(b,a,m,Fc);return g}function g(a){return f(a)}var f,h;g.invert=function(a){return h(a)};g.domain=function(b){if(!arguments.length)return a;a=b.map(Number);return e()};g.range=function(a){if(!arguments.length)return b;b=a;return e()};g.rangeRound=function(a){return g.range(a).interpolate(yb)};g.clamp=function(a){if(!arguments.length)return d;d=a;return e()};g.interpolate=
function(a){if(!arguments.length)return c;c=a;return e()};g.ticks=function(b){return F.range.apply(F,zc(a,b))};g.tickFormat=function(b,c){return ff(a,b,c)};g.nice=function(b){Sd(a,Zb(zc(a,b)[2]));return e()};g.copy=function(){return bd(a,b,c,d)};return e()}function gf(a,b){return F.rebind(a,b,"range","rangeRound","interpolate","clamp")}function zc(a,b){null==b&&(b=10);var c=Rd(a),d=c[1]-c[0],e=Math.pow(10,Math.floor(Math.log(d/b)/Math.LN10)),d=b/d*e;.15>=d?e*=10:.35>=d?e*=5:.75>=d&&(e*=2);c[0]=Math.ceil(c[0]/
e)*e;c[1]=Math.floor(c[1]/e)*e+.5*e;c[2]=e;return c}function ff(a,b,c){var d=zc(a,b);return F.format(c?c.replace(lh,function(a,b,c,e,g,f,h,l,m,p){return[b,c,e,g,f,h,l,m||"."+ia(p,d),p].join("")}):",."+Ac(d[2])+"f")}function Ac(a){return-Math.floor(Math.log(a)/Math.LN10+.01)}function ia(a,b){var c=Ac(b[2]);return a in Oh?Math.abs(c-Ac(Math.max(Math.abs(b[0]),Math.abs(b[1]))))+ +("e"!==a):c-2*("%"===a)}function Ha(a,b,c,d){function e(a){return(c?Math.log(0>a?0:a):-Math.log(0<a?0:-a))/Math.log(b)}function g(a){return c?
Math.pow(b,a):-Math.pow(b,-a)}function f(b){return a(e(b))}f.invert=function(b){return g(a.invert(b))};f.domain=function(b){if(!arguments.length)return d;c=0<=b[0];a.domain((d=b.map(Number)).map(e));return f};f.base=function(c){if(!arguments.length)return b;b=+c;a.domain(d.map(e));return f};f.nice=function(){var b=Sd(d.map(e),c?Math:Ph);a.domain(b);d=b.map(g);return f};f.ticks=function(){var a=Rd(d),f=[],h=a[0],a=a[1],l=Math.floor(e(h)),m=Math.ceil(e(a)),p=b%1?2:b;if(isFinite(m-l)){if(c){for(;l<m;l++)for(var E=
1;E<p;E++)f.push(g(l)*E);f.push(g(l))}else for(f.push(g(l));l++<m;)for(E=p-1;0<E;E--)f.push(g(l)*E);for(l=0;f[l]<h;l++);for(m=f.length;f[m-1]>a;m--);f=f.slice(l,m)}return f};f.tickFormat=function(a,b){if(!arguments.length)return sh;2>arguments.length?b=sh:"function"!==typeof b&&(b=F.format(b));var d=Math.max(.1,a/f.ticks().length),h=c?(l=1E-12,Math.ceil):(l=-1E-12,Math.floor),l;return function(a){return a/g(h(e(a)+l))<=d?b(a):""}};f.copy=function(){return Ha(a.copy(),b,c,d)};return gf(f,a)}function hf(a,
b,c){function d(b){return a(e(b))}var e=Bc(b),g=Bc(1/b);d.invert=function(b){return g(a.invert(b))};d.domain=function(b){if(!arguments.length)return c;a.domain((c=b.map(Number)).map(e));return d};d.ticks=function(a){return F.range.apply(F,zc(c,a))};d.tickFormat=function(a,b){return ff(c,a,b)};d.nice=function(a){return d.domain(Sd(c,Zb(zc(c,a)[2])))};d.exponent=function(f){if(!arguments.length)return b;e=Bc(b=f);g=Bc(1/b);a.domain(c.map(e));return d};d.copy=function(){return hf(a.copy(),b,c)};return gf(d,
a)}function Bc(a){return function(b){return 0>b?-Math.pow(-b,a):Math.pow(b,a)}}function ud(a,b){function c(d){return f[((g.get(d)||"range"===b.t&&g.set(d,a.push(d)))-1)%f.length]}function d(b,c){return F.range(a.length).map(function(a){return b+c*a})}var g,f,h;c.domain=function(d){if(!arguments.length)return a;a=[];g=new e;for(var f=-1,h=d.length,l;++f<h;)g.has(l=d[f])||g.set(l,a.push(l));return c[b.t].apply(c,b.a)};c.range=function(a){if(!arguments.length)return f;f=a;h=0;b={t:"range",a:arguments};
return c};c.rangePoints=function(e,g){2>arguments.length&&(g=0);var l=e[0],m=e[1],p=(m-l)/(Math.max(1,a.length-1)+g);f=d(2>a.length?(l+m)/2:l+p*g/2,p);h=0;b={t:"rangePoints",a:arguments};return c};c.rangeBands=function(e,g,l){2>arguments.length&&(g=0);3>arguments.length&&(l=g);var m=e[1]<e[0],p=e[m-0],E=(e[1-m]-p)/(a.length-g+2*l);f=d(p+E*l,E);m&&f.reverse();h=E*(1-g);b={t:"rangeBands",a:arguments};return c};c.rangeRoundBands=function(e,g,l){2>arguments.length&&(g=0);3>arguments.length&&(l=g);var m=
e[1]<e[0],p=e[m-0],E=e[1-m],q=Math.floor((E-p)/(a.length-g+2*l));f=d(p+Math.round((E-p-(a.length-g)*q)/2),q);m&&f.reverse();h=Math.round(q*(1-g));b={t:"rangeRoundBands",a:arguments};return c};c.rangeBand=function(){return h};c.rangeExtent=function(){return Rd(b.a[0])};c.copy=function(){return ud(a,b)};return c.domain(a)}function wg(a,b){function c(){var g=0,f=b.length;for(e=[];++g<f;)e[g-1]=F.quantile(a,g/f);return d}function d(a){if(!isNaN(a=+a))return b[F.bisect(e,a)]}var e;d.domain=function(b){if(!arguments.length)return a;
a=b.filter(function(a){return!isNaN(a)}).sort(F.ascending);return c()};d.range=function(a){if(!arguments.length)return b;b=a;return c()};d.quantiles=function(){return e};d.invertExtent=function(c){c=b.indexOf(c);return 0>c?[NaN,NaN]:[0<c?e[c-1]:a[0],c<e.length?e[c]:a[a.length-1]]};d.copy=function(){return wg(a,b)};return c()}function cd(a,b,c){function d(b){return c[Math.max(0,Math.min(f,Math.floor(g*(b-a))))]}function e(){g=c.length/(b-a);f=c.length-1;return d}var g,f;d.domain=function(c){if(!arguments.length)return[a,
b];a=+c[0];b=+c[c.length-1];return e()};d.range=function(a){if(!arguments.length)return c;c=a;return e()};d.invertExtent=function(b){b=c.indexOf(b);b=0>b?NaN:b/g+a;return[b,b+1/g]};d.copy=function(){return cd(a,b,c)};return e()}function we(a,b){function c(d){if(d<=d)return b[F.bisect(a,d)]}c.domain=function(b){if(!arguments.length)return a;a=b;return c};c.range=function(a){if(!arguments.length)return b;b=a;return c};c.invertExtent=function(c){c=b.indexOf(c);return[a[c-1],a[c]]};c.copy=function(){return we(a,
b)};return c}function xe(a){function b(a){return+a}b.invert=b;b.domain=b.range=function(c){if(!arguments.length)return a;a=c.map(b);return b};b.ticks=function(b){return F.range.apply(F,zc(a,b))};b.tickFormat=function(b,c){return ff(a,b,c)};b.copy=function(){return xe(a)};return b}function xg(a){return a.innerRadius}function jf(a){return a.outerRadius}function $b(a){return a.startAngle}function Nf(a){return a.endAngle}function kf(a){function b(f){function l(){m.push("M",g(a(p),h))}for(var m=[],p=[],
E=-1,q=f.length,r,n=na(c),I=na(d);++E<q;)e.call(this,r=f[E],E)?p.push([+n.call(this,r,E),+I.call(this,r,E)]):p.length&&(l(),p=[]);p.length&&l();return m.length?m.join(""):null}var c=Tb,d=Ad,e=Db,g=wb,f=g.key,h=.7;b.x=function(a){if(!arguments.length)return c;c=a;return b};b.y=function(a){if(!arguments.length)return d;d=a;return b};b.defined=function(a){if(!arguments.length)return e;e=a;return b};b.interpolate=function(a){if(!arguments.length)return f;f="function"===typeof a?g=a:(g=Yg.get(a)||wb).key;
return b};b.tension=function(a){if(!arguments.length)return h;h=a;return b};return b}function wb(a){return a.join("L")}function Of(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("V",(d=a[b])[1],"H",d[0]);return e.join("")}function dd(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d=a[b])[0],"V",d[1]);return e.join("")}function ye(a,b){if(1>b.length||a.length!=b.length&&a.length!=b.length+2)return wb(a);var c=a.length!=b.length,d="",e=a[0],g=a[1],f=b[0],h=f,
l=1;c&&(d+="Q"+(g[0]-2*f[0]/3)+","+(g[1]-2*f[1]/3)+","+g[0]+","+g[1],e=a[1],l=2);if(1<b.length)for(h=b[1],g=a[l],l++,d+="C"+(e[0]+f[0])+","+(e[1]+f[1])+","+(g[0]-h[0])+","+(g[1]-h[1])+","+g[0]+","+g[1],e=2;e<b.length;e++,l++)g=a[l],h=b[e],d+="S"+(g[0]-h[0])+","+(g[1]-h[1])+","+g[0]+","+g[1];c&&(c=a[l],d+="Q"+(g[0]+2*h[0]/3)+","+(g[1]+2*h[1]/3)+","+c[0]+","+c[1]);return d}function lf(a,b){for(var c=[],d=(1-b)/2,e,g=a[0],f=a[1],h=1,l=a.length;++h<l;)e=g,g=f,f=a[h],c.push([d*(f[0]-e[0]),d*(f[1]-e[1])]);
return c}function Td(a){if(3>a.length)return wb(a);var b=1,c=a.length,d=a[0],e=d[0],g=d[1],f=[e,e,e,(d=a[1])[0]],h=[g,g,g,d[1]],e=[e,",",g,"L",Jb(Ud,f),",",Jb(Ud,h)];for(a.push(a[c-1]);++b<=c;)d=a[b],f.shift(),f.push(d[0]),h.shift(),h.push(d[1]),ze(e,f,h);a.pop();e.push("L",d);return e.join("")}function Jb(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function ze(a,b,c){a.push("C",Jb(th,b),",",Jb(th,c),",",Jb(uh,b),",",Jb(uh,c),",",Jb(Ud,b),",",Jb(Ud,c))}function Rc(a,b){return(b[1]-a[1])/(b[0]-
a[0])}function Vd(a){for(var b,c=-1,d=a.length,e,g;++c<d;)b=a[c],e=b[0],g=b[1]+Ae,b[0]=e*Math.cos(g),b[1]=e*Math.sin(g);return a}function yg(a){function b(l){function q(){r.push("M",h(a(I),E),p,m(a(n.reverse()),E),"Z")}for(var r=[],n=[],I=[],t=-1,y=l.length,u,ba=na(c),w=na(e),x=c===d?function(){return B}:na(d),z=e===g?function(){return A}:na(g),B,A;++t<y;)f.call(this,u=l[t],t)?(n.push([B=+ba.call(this,u,t),A=+w.call(this,u,t)]),I.push([+x.call(this,u,t),+z.call(this,u,t)])):n.length&&(q(),n=[],I=
[]);n.length&&q();return r.length?r.join(""):null}var c=Tb,d=Tb,e=0,g=Ad,f=Db,h=wb,l=h.key,m=h,p="L",E=.7;b.x=function(a){if(!arguments.length)return d;c=d=a;return b};b.x0=function(a){if(!arguments.length)return c;c=a;return b};b.x1=function(a){if(!arguments.length)return d;d=a;return b};b.y=function(a){if(!arguments.length)return g;e=g=a;return b};b.y0=function(a){if(!arguments.length)return e;e=a;return b};b.y1=function(a){if(!arguments.length)return g;g=a;return b};b.defined=function(a){if(!arguments.length)return f;
f=a;return b};b.interpolate=function(a){if(!arguments.length)return l;l="function"===typeof a?h=a:(h=Yg.get(a)||wb).key;m=h.reverse||h;p=h.closed?"M":"L";return b};b.tension=function(a){if(!arguments.length)return E;E=a;return b};return b}function mf(a){return a.radius}function Cc(a){return[a.x,a.y]}function nf(a){return function(){var b=a.apply(this,arguments),c=b[0],b=b[1]+Ae;return[c*Math.cos(b),c*Math.sin(b)]}}function Zg(){return 64}function $g(){return"circle"}function Be(a){a=Math.sqrt(a/I);
return"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z"}function kc(a,b){pe(a,Ab);a.id=b;return a}function Pf(a,b,c,d){var e=a.id;return T(a,"function"===typeof c?function(a,g,f){a.__transition__[e].tween.set(b,d(c.call(a,a.__data__,g,f)))}:(c=d(c),function(a){a.__transition__[e].tween.set(b,c)}))}function of(a){null==a&&(a="");return function(){this.textContent=a}}function vd(a,b,c,d){var g=a.__transition__||(a.__transition__={active:0,count:0}),f=g[c];if(!f){var h=d.time,f=g[c]={tween:new e,
time:h,ease:d.ease,delay:d.delay,duration:d.duration};++g.count;F.timer(function(d){function e(d){if(g.active>c)return m();g.active=c;f.event&&f.event.start.call(a,p,b);f.tween.forEach(function(c,d){(d=d.call(a,p,b))&&I.push(d)});F.timer(function(){n.c=l(d||1)?Db:l;return 1},0,h)}function l(d){if(g.active!==c)return m();d/=r;for(var e=E(d),h=I.length;0<h;)I[--h].call(a,e);if(1<=d)return f.event&&f.event.end.call(a,p,b),m()}function m(){--g.count?delete g[c]:delete a.__transition__;return 1}var p=
a.__data__,E=f.ease,q=f.delay,r=f.duration,n=rd,I=[];n.t=q+h;if(q<=d)return e(d-q);n.c=e},0,h)}}function ed(a,b){a.attr("transform",function(a){return"translate("+b(a)+",0)"})}function zg(a,b){a.attr("transform",function(a){return"translate(0,"+b(a)+")"})}function Qf(a){return a.toISOString()}function Rf(a,b,c){function d(b){return a(b)}function e(a,c){var d=(a[1]-a[0])/c,g=F.bisect(Ag,d);return g==Ag.length?[b.year,zc(a.map(function(a){return a/31536E6}),c)[2]]:g?b[d/Ag[g-1]<Ag[g]/d?g-1:g]:[Qh,zc(a,
c)[2]]}d.invert=function(b){return xb(a.invert(b))};d.domain=function(b){if(!arguments.length)return a.domain().map(xb);a.domain(b);return d};d.nice=function(a,b){function c(d){return!isNaN(d)&&!a.range(d,xb(+d+1),b).length}var g=d.domain(),f=Rd(g);if(f=null==a?e(f,10):"number"===typeof a&&e(f,a))a=f[0],b=f[1];return d.domain(Sd(g,1<b?{floor:function(b){for(;c(b=a.floor(b));)b=xb(b-1);return b},ceil:function(b){for(;c(b=a.ceil(b));)b=xb(+b+1);return b}}:a))};d.ticks=function(a,b){var c=Rd(d.domain()),
g=null==a?e(c,10):"number"===typeof a?e(c,a):!a.range&&[{range:a},b];g&&(a=g[0],b=g[1]);return a.range(c[0],xb(+c[1]+1),1>b?1:b)};d.tickFormat=function(){return c};d.copy=function(){return Rf(a.copy(),b,c)};return gf(d,a)}function xb(a){return new Date(a)}function ah(a){return JSON.parse(a.responseText)}function Ce(a){var b=wa.createRange();b.selectNode(wa.body);return b.createContextualFragment(a.responseText)}var F={version:"3.4.1"};Date.now||(Date.now=function(){return+new Date});var Bg=[].slice,
tc=function(a){return Bg.call(a)},wa=document,Ib=wa.documentElement,Qa=window;try{tc(Ib.childNodes)[0].nodeType}catch(pf){tc=function(a){for(var b=a.length,c=Array(b);b--;)c[b]=a[b];return c}}try{wa.createElement("div").style.setProperty("opacity",0,"")}catch(Dc){var De=Qa.Element.prototype,fd=De.setAttribute,Sf=De.setAttributeNS,Wd=Qa.CSSStyleDeclaration.prototype,lc=Wd.setProperty;De.setAttribute=function(a,b){fd.call(this,a,b+"")};De.setAttributeNS=function(a,b,c){Sf.call(this,a,b,c+"")};Wd.setProperty=
function(a,b,c){lc.call(this,a,b+"",c)}}F.ascending=function(a,b){return a<b?-1:a>b?1:a>=b?0:NaN};F.descending=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN};F.min=function(a,b){var c=-1,d=a.length,e,g;if(1===arguments.length){for(;++c<d&&!(null!=(e=a[c])&&e<=e);)e=void 0;for(;++c<d;)null!=(g=a[c])&&e>g&&(e=g)}else{for(;++c<d&&!(null!=(e=b.call(a,a[c],c))&&e<=e);)e=void 0;for(;++c<d;)null!=(g=b.call(a,a[c],c))&&e>g&&(e=g)}return e};F.max=function(a,b){var c=-1,d=a.length,e,g;if(1===arguments.length){for(;++c<
d&&!(null!=(e=a[c])&&e<=e);)e=void 0;for(;++c<d;)null!=(g=a[c])&&g>e&&(e=g)}else{for(;++c<d&&!(null!=(e=b.call(a,a[c],c))&&e<=e);)e=void 0;for(;++c<d;)null!=(g=b.call(a,a[c],c))&&g>e&&(e=g)}return e};F.extent=function(a,b){var c=-1,d=a.length,e,g,f;if(1===arguments.length){for(;++c<d&&!(null!=(e=f=a[c])&&e<=e);)e=f=void 0;for(;++c<d;)null!=(g=a[c])&&(e>g&&(e=g),f<g&&(f=g))}else{for(;++c<d&&!(null!=(e=f=b.call(a,a[c],c))&&e<=e);)e=void 0;for(;++c<d;)null!=(g=b.call(a,a[c],c))&&(e>g&&(e=g),f<g&&(f=
g))}return[e,f]};F.sum=function(a,b){var c=0,d=a.length,e,g=-1;if(1===arguments.length)for(;++g<d;)isNaN(e=+a[g])||(c+=e);else for(;++g<d;)isNaN(e=+b.call(a,a[g],g))||(c+=e);return c};F.mean=function(b,c){var d=b.length,e,g=0,f=-1,h=0;if(1===arguments.length)for(;++f<d;)a(e=b[f])&&(g+=(e-g)/++h);else for(;++f<d;)a(e=c.call(b,b[f],f))&&(g+=(e-g)/++h);return h?g:void 0};F.quantile=function(a,b){var c=(a.length-1)*b+1,d=Math.floor(c),e=+a[d-1];return(c-=d)?e+c*(a[d]-e):e};F.median=function(b,c){1<arguments.length&&
(b=b.map(c));b=b.filter(a);return b.length?F.quantile(b.sort(F.ascending),.5):void 0};F.bisector=function(a){return{left:function(b,c,d,e){3>arguments.length&&(d=0);4>arguments.length&&(e=b.length);for(;d<e;){var g=d+e>>>1;a.call(b,b[g],g)<c?d=g+1:e=g}return d},right:function(b,c,d,e){3>arguments.length&&(d=0);4>arguments.length&&(e=b.length);for(;d<e;){var g=d+e>>>1;c<a.call(b,b[g],g)?e=g:d=g+1}return d}}};var Ee=F.bisector(function(a){return a});F.bisectLeft=Ee.left;F.bisect=F.bisectRight=Ee.right;
F.shuffle=function(a){for(var b=a.length,c,d;b;)d=Math.random()*b--|0,c=a[b],a[b]=a[d],a[d]=c;return a};F.permute=function(a,b){for(var c=b.length,d=Array(c);c--;)d[c]=a[b[c]];return d};F.pairs=function(a){for(var b=0,c=a.length-1,d=a[0],e=Array(0>c?0:c);b<c;)e[b]=[d,d=a[++b]];return e};F.zip=function(){if(!(g=arguments.length))return[];for(var a=-1,c=F.min(arguments,b),d=Array(c);++a<c;)for(var e=-1,g,f=d[a]=Array(g);++e<g;)f[e]=arguments[e][a];return d};F.transpose=function(a){return F.zip.apply(F,
a)};F.keys=function(a){var b=[],c;for(c in a)b.push(c);return b};F.values=function(a){var b=[],c;for(c in a)b.push(a[c]);return b};F.entries=function(a){var b=[],c;for(c in a)b.push({key:c,value:a[c]});return b};F.merge=function(a){var b=a.length,c;c=-1;for(var d=0,e,g;++c<b;)d+=a[c].length;for(e=Array(d);0<=--b;)for(g=a[b],c=g.length;0<=--c;)e[--d]=g[c];return e};var ta=Math.abs;F.range=function(a,b,c){3>arguments.length&&(c=1,2>arguments.length&&(b=a,a=0));if(Infinity===(b-a)/c)throw Error("infinite range");
var d=[],e;e=ta(c);for(var g=1;e*g%1;)g*=10;e=g;var g=-1,f;a*=e;b*=e;c*=e;if(0>c)for(;(f=a+c*++g)>b;)d.push(f/e);else for(;(f=a+c*++g)<b;)d.push(f/e);return d};F.map=function(a){var b=new e;if(a instanceof e)a.forEach(function(a,c){b.set(a,c)});else for(var c in a)b.set(c,a[c]);return b};c(e,{has:d,get:function(a){return this[pd+a]},set:function(a,b){return this[pd+a]=b},remove:function(a){a=pd+a;return a in this&&delete this[a]},keys:f,values:function(){var a=[];this.forEach(function(b,c){a.push(c)});
return a},entries:function(){var a=[];this.forEach(function(b,c){a.push({key:b,value:c})});return a},size:n,empty:h,forEach:function(a){for(var b in this)b.charCodeAt(0)===oe&&a.call(this,b.substring(1),this[b])}});var pd="\x00",oe=pd.charCodeAt(0);F.nest=function(){function a(b,g,l){if(l>=d.length)return h?h.call(c,g):f?g.sort(f):g;for(var m=-1,p=g.length,E=d[l++],q,r,n=new e,I;++m<p;)(I=n.get(q=E(r=g[m])))?I.push(r):n.set(q,[r]);b?(r=b(),g=function(c,d){r.set(c,a(b,d,l))}):(r={},g=function(c,d){r[c]=
a(b,d,l)});n.forEach(g);return r}function b(a,c){if(c>=d.length)return a;var e=[],f=g[c++];a.forEach(function(a,d){e.push({key:a,values:b(d,c)})});return f?e.sort(function(a,b){return f(a.key,b.key)}):e}var c={},d=[],g=[],f,h;c.map=function(b,c){return a(c,b,0)};c.entries=function(c){return b(a(F.map,c,0),0)};c.key=function(a){d.push(a);return c};c.sortKeys=function(a){g[d.length-1]=a;return c};c.sortValues=function(a){f=a;return c};c.rollup=function(a){h=a;return c};return c};F.set=function(a){var b=
new g;if(a)for(var c=0,d=a.length;c<d;++c)b.add(a[c]);return b};c(g,{has:d,add:function(a){this[pd+a]=!0;return a},remove:function(a){a=pd+a;return a in this&&delete this[a]},values:f,size:n,empty:h,forEach:function(a){for(var b in this)b.charCodeAt(0)===oe&&a.call(this,b.substring(1))}});F.behavior={};F.rebind=function(a,b){for(var c=1,d=arguments.length,e;++c<d;)a[e=arguments[c]]=l(a,b,b[e]);return a};var hg="webkit ms moz Moz o O".split(" ");F.dispatch=function(){for(var a=new t,b=-1,c=arguments.length;++b<
c;)a[arguments[b]]=r(a);return a};t.prototype.on=function(a,b){var c=a.indexOf("."),d="";0<=c&&(d=a.substring(c+1),a=a.substring(0,c));if(a)return 2>arguments.length?this[a].on(d):this[a].on(d,b);if(2===arguments.length){if(null==b)for(a in this)if(this.hasOwnProperty(a))this[a].on(d,null);return this}};F.event=null;F.requote=function(a){return a.replace(Xd,"\\$&")};var Xd=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,pe={}.__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=b[c]},Gf=function(a,
b){return b.querySelector(a)},qd=function(a,b){return b.querySelectorAll(a)},Tf=Ib[m(Ib,"matchesSelector")],Ue=function(a,b){return Tf.call(a,b)};"function"===typeof Sizzle&&(Gf=function(a,b){return Sizzle(a,b)[0]||null},qd=function(a,b){return Sizzle.uniqueSort(Sizzle(a,b))},Ue=Sizzle.matchesSelector);F.selection=function(){return qf};var Ga=F.selection.prototype=[];Ga.select=function(a){var b=[],c,d,e,g;a=z(a);for(var f=-1,h=this.length;++f<h;){b.push(c=[]);c.parentNode=(e=this[f]).parentNode;for(var l=
-1,m=e.length;++l<m;)(g=e[l])?(c.push(d=a.call(g,g.__data__,l,f)),d&&"__data__"in g&&(d.__data__=g.__data__)):c.push(null)}return x(b)};Ga.selectAll=function(a){var b=[],c,d;a=y(a);for(var e=-1,g=this.length;++e<g;)for(var f=this[e],h=-1,l=f.length;++h<l;)if(d=f[h])b.push(c=tc(a.call(d,d.__data__,h,e))),c.parentNode=d;return x(b)};var Uf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};
F.ns={prefix:Uf,qualify:function(a){var b=a.indexOf(":"),c=a;0<=b&&(c=a.substring(0,b),a=a.substring(b+1));return Uf.hasOwnProperty(c)?{space:Uf[c],local:a}:a}};Ga.attr=function(a,b){if(2>arguments.length){if("string"===typeof a){var c=this.node();a=F.ns.qualify(a);return a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}for(b in a)this.each(B(b,a[b]));return this}return this.each(B(a,b))};Ga.classed=function(a,b){if(2>arguments.length){if("string"===typeof a){var c=this.node(),d=(a=a.trim().split(/^|\s+/)).length,
e=-1;if(b=c.classList)for(;++e<d;){if(!b.contains(a[e]))return!1}else for(b=c.getAttribute("class");++e<d;)if(!C(a[e]).test(b))return!1;return!0}for(b in a)this.each(D(b,a[b]));return this}return this.each(D(a,b))};Ga.style=function(a,b,c){var d=arguments.length;if(3>d){if("string"!==typeof a){2>d&&(b="");for(c in a)this.each(G(c,a[c],b));return this}if(2>d)return Qa.getComputedStyle(this.node(),null).getPropertyValue(a);c=""}return this.each(G(a,b,c))};Ga.property=function(a,b){if(2>arguments.length){if("string"===
typeof a)return this.node()[a];for(b in a)this.each(L(b,a[b]));return this}return this.each(L(a,b))};Ga.text=function(a){return arguments.length?this.each("function"===typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent};Ga.html=function(a){return arguments.length?this.each("function"===typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=
""}:function(){this.innerHTML=a}):this.node().innerHTML};Ga.append=function(a){a=J(a);return this.select(function(){return this.appendChild(a.apply(this,arguments))})};Ga.insert=function(a,b){a=J(a);b=z(b);return this.select(function(){return this.insertBefore(a.apply(this,arguments),b.apply(this,arguments)||null)})};Ga.remove=function(){return this.each(function(){var a=this.parentNode;a&&a.removeChild(this)})};Ga.data=function(a,b){function c(a,d){var g,f=a.length,h=d.length,E=Math.min(f,h),q=Array(h),
r=Array(h),n=Array(f),I,t;if(b){var E=new e,y=new e,u=[],ba;for(g=-1;++g<f;)ba=b.call(I=a[g],I.__data__,g),E.has(ba)?n[g]=I:E.set(ba,I),u.push(ba);for(g=-1;++g<h;)ba=b.call(d,t=d[g],g),(I=E.get(ba))?(q[g]=I,I.__data__=t):y.has(ba)||(r[g]={__data__:t}),y.set(ba,t),E.remove(ba);for(g=-1;++g<f;)E.has(u[g])&&(n[g]=a[g])}else{for(g=-1;++g<E;)I=a[g],t=d[g],I?(I.__data__=t,q[g]=I):r[g]={__data__:t};for(;g<h;++g)r[g]={__data__:d[g]};for(;g<f;++g)n[g]=a[g]}r.update=q;r.parentNode=q.parentNode=n.parentNode=
a.parentNode;l.push(r);m.push(q);p.push(n)}var d=-1,g=this.length,f,h;if(!arguments.length){for(a=Array(g=(f=this[0]).length);++d<g;)if(h=f[d])a[d]=h.__data__;return a}var l=O([]),m=x([]),p=x([]);if("function"===typeof a)for(;++d<g;)c(f=this[d],a.call(f,f.parentNode.__data__,d));else for(;++d<g;)c(f=this[d],a);m.enter=function(){return l};m.exit=function(){return p};return m};Ga.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")};Ga.filter=function(a){var b=
[],c,d,e;"function"!==typeof a&&(a=M(a));for(var g=0,f=this.length;g<f;g++){b.push(c=[]);c.parentNode=(d=this[g]).parentNode;for(var h=0,l=d.length;h<l;h++)(e=d[h])&&a.call(e,e.__data__,h,g)&&c.push(e)}return x(b)};Ga.order=function(){for(var a=-1,b=this.length;++a<b;)for(var c=this[a],d=c.length-1,e=c[d],g;0<=--d;)if(g=c[d])e&&e!==g.nextSibling&&e.parentNode.insertBefore(g,e),e=g;return this};Ga.sort=function(a){a=V.apply(this,arguments);for(var b=-1,c=this.length;++b<c;)this[b].sort(a);return this.order()};
Ga.each=function(a){return T(this,function(b,c,d){a.call(b,b.__data__,c,d)})};Ga.call=function(a){var b=tc(arguments);a.apply(b[0]=this,b);return this};Ga.empty=function(){return!this.node()};Ga.node=function(){for(var a=0,b=this.length;a<b;a++)for(var c=this[a],d=0,e=c.length;d<e;d++){var g=c[d];if(g)return g}return null};Ga.size=function(){var a=0;this.each(function(){++a});return a};var sc=[];F.selection.enter=O;F.selection.enter.prototype=sc;sc.append=Ga.append;sc.empty=Ga.empty;sc.node=Ga.node;
sc.call=Ga.call;sc.size=Ga.size;sc.select=function(a){for(var b=[],c,d,e,g,f,h=-1,l=this.length;++h<l;){e=(g=this[h]).update;b.push(c=[]);c.parentNode=g.parentNode;for(var m=-1,p=g.length;++m<p;)(f=g[m])?(c.push(e[m]=d=a.call(g.parentNode,f.__data__,m,h)),d.__data__=f.__data__):c.push(null)}return x(b)};sc.insert=function(a,b){2>arguments.length&&(b=N(this));return Ga.insert.call(this,a,b)};Ga.transition=function(){for(var a=Fe||++vh,b=[],c,d,e=Cg||{time:Date.now(),ease:eg,delay:0,duration:250},g=
-1,f=this.length;++g<f;){b.push(c=[]);for(var h=this[g],l=-1,m=h.length;++l<m;)(d=h[l])&&vd(d,l,a,e),c.push(d)}return kc(b,a)};Ga.interrupt=function(){return this.each(Z)};F.select=function(a){a=["string"===typeof a?Gf(a,wa):a];a.parentNode=Ib;return x([a])};F.selectAll=function(a){a=tc("string"===typeof a?qd(a,wa):a);a.parentNode=Ib;return x([a])};var qf=F.select(Ib);Ga.on=function(a,b,c){var d=arguments.length;if(3>d){if("string"!==typeof a){2>d&&(b=!1);for(c in a)this.each(X(c,a[c],b));return this}if(2>
d)return(d=this.node()["__on"+a])&&d._;c=!1}return this.each(X(a,b,c))};var uc=F.map({mouseenter:"mouseover",mouseleave:"mouseout"});uc.forEach(function(a){"on"+a in wa&&uc.remove(a)});var Oc="onselectstart"in wa?null:m(Ib.style,"userSelect"),Tg=0;F.mouse=function(a){return U(a,w())};var E=/WebKit/.test(Qa.navigator.userAgent)?-1:0;F.touches=function(a,b){2>arguments.length&&(b=w().touches);return b?tc(b).map(function(b){var c=U(a,b);c.identifier=b.identifier;return c}):[]};F.behavior.drag=function(){function a(){this.on("mousedown.drag",
e).on("touchstart.drag",g)}function b(a,e,g,f){return function(){var b=this.parentNode,h=c.of(this,arguments),l=F.event.target,m=a(),p=null==m?"drag":"drag-"+m,E=e(b,m),q=0,r,n=F.select(Qa).on(g+"."+p,function(){var a=e(b,m),c=a[0]-E[0],d=a[1]-E[1];q=q|c|d;E=a;h({type:"drag",x:a[0]+r[0],y:a[1]+r[1],dx:c,dy:d})}).on(f+"."+p,function(){n.on(g+"."+p,null).on(f+"."+p,null);I(q&&F.event.target===l);h({type:"dragend"})}),I=K();d?(r=d.apply(this,arguments),r=[r.x-E[0],r.y-E[1]]):r=[0,0];h({type:"dragstart"})}}
var c=u(a,"drag","dragstart","dragend"),d=null,e=b(p,F.mouse,"mousemove","mouseup"),g=b(function(){return F.event.changedTouches[0].identifier},function(a,b){return F.touches(a).filter(function(a){return a.identifier===b})[0]},"touchmove","touchend");a.origin=function(b){if(!arguments.length)return d;d=b;return a};return F.rebind(a,c,"on")};var I=Math.PI,ba=2*I,hb=I/2,fa=I/180,lb=180/I,Dg=Math.SQRT2;F.interpolateZoom=function(a,b){function c(a){var b=a*n;if(r){a=W(q);var f,m=Dg*b+q;f=((m=Math.exp(2*
m))-1)/(m+1);f*=a;var E=q,m=((E=Math.exp(E))-1/E)/2;f=g/(2*p)*(f-m);return[d+f*h,e+f*l,g*a/W(Dg*b+q)]}return[d+a*h,e+a*l,g*Math.exp(Dg*b)]}var d=a[0],e=a[1],g=a[2],f=b[2],h=b[0]-d,l=b[1]-e,m=h*h+l*l,p=Math.sqrt(m),E=(f*f-g*g+4*m)/(4*g*p),m=(f*f-g*g-4*m)/(4*f*p),q=Math.log(Math.sqrt(E*E+1)-E),r=Math.log(Math.sqrt(m*m+1)-m)-q,n=(r||Math.log(f/g))/Dg;c.duration=1E3*n;return c};F.behavior.zoom=function(){function a(b){b.on("mousedown.zoom",l).on(Rh+".zoom",p).on("mousemove.zoom",E).on("dblclick.zoom",
r).on("touchstart.zoom",m)}function b(a){return[(a[0]-n.x)/n.k,(a[1]-n.y)/n.k]}function c(a){n.k=Math.max(ba[0],Math.min(ba[1],a))}function d(a,b){b=[b[0]*n.k+n.x,b[1]*n.k+n.y];n.x+=a[0]-b[0];n.y+=a[1]-b[1]}function e(){A&&A.domain(B.range().map(function(a){return(a-n.x)/n.k}).map(B.invert));G&&G.domain(fa.range().map(function(a){return(a-n.y)/n.k}).map(fa.invert))}function g(a){a({type:"zoomstart"})}function f(a){e();a({type:"zoom",scale:n.k,translate:[n.x,n.y]})}function h(a){a({type:"zoomend"})}
function l(){var a=this,c=z.of(a,arguments),e=F.event.target,m=0,p=F.select(Qa).on("mousemove.zoom",function(){m=1;d(F.mouse(a),q);f(c)}).on("mouseup.zoom",function(){p.on("mousemove.zoom",Qa===a?E:null).on("mouseup.zoom",null);r(m&&F.event.target===e);h(c)}),q=b(F.mouse(a)),r=K();Z.call(a);g(c)}function m(){function a(){var c=F.touches(p);t=n.k;c.forEach(function(a){a.identifier in r&&(r[a.identifier]=b(a))});return c}function e(){for(var b=F.event.changedTouches,g=0,h=b.length;g<h;++g)r[b[g].identifier]=
null;h=a();g=Date.now();1===h.length?(500>g-x&&(b=h[0],h=r[b.identifier],c(2*n.k),d(b,h),q(),f(E)),x=g):1<h.length&&(b=h[0],h=h[1],g=b[0]-h[0],b=b[1]-h[1],I=g*g+b*b)}var p=this,E=z.of(p,arguments),r={},I=0,t,y=F.event.changedTouches[0].identifier,u="touchmove.zoom-"+y,ba="touchend.zoom-"+y,w=F.select(Qa).on(u,function(){for(var a=F.touches(p),b,e,g,h,l=0,m=a.length;l<m;++l,h=null)if(g=a[l],h=r[g.identifier]){if(e)break;b=g;e=h}if(h){var q=(q=g[0]-b[0])*q+(q=g[1]-b[1])*q,a=I&&Math.sqrt(q/I);b=[(b[0]+
g[0])/2,(b[1]+g[1])/2];e=[(e[0]+h[0])/2,(e[1]+h[1])/2];c(a*t)}x=null;d(b,e);f(E)}).on(ba,function(){if(F.event.touches.length){for(var b=F.event.changedTouches,c=0,d=b.length;c<d;++c)delete r[b[c].identifier];for(var e in r)return void a()}w.on(u,null).on(ba,null);B.on("mousedown.zoom",l).on("touchstart.zoom",m);A();h(E)}),B=F.select(p).on("mousedown.zoom",null).on("touchstart.zoom",e),A=K();Z.call(p);e();g(E)}function p(){var a=z.of(this,arguments);w?clearTimeout(w):(Z.call(this),g(a));w=setTimeout(function(){w=
null;h(a)},50);q();var e=t||F.mouse(this);I||(I=b(e));c(Math.pow(2,.002*Eg())*n.k);d(e,I);f(a)}function E(){I=null}function r(){var a=z.of(this,arguments),e=F.mouse(this),l=b(e),m=Math.log(n.k)/Math.LN2;g(a);c(Math.pow(2,F.event.shiftKey?Math.ceil(m)-1:Math.floor(m)+1));d(e,l);f(a);h(a)}var n={x:0,y:0,k:1},I,t,y=[960,500],ba=wh,w,x,z=u(a,"zoomstart","zoom","zoomend"),B,A,fa,G;a.event=function(a){a.each(function(){var a=z.of(this,arguments),b=n;Fe?F.select(this).transition().each("start.zoom",function(){n=
this.__chart__||{x:0,y:0,k:1};g(a)}).tween("zoom:zoom",function(){var c=y[0],d=c/2,e=y[1]/2,g=F.interpolateZoom([(d-n.x)/n.k,(e-n.y)/n.k,c/n.k],[(d-b.x)/b.k,(e-b.y)/b.k,c/b.k]);return function(b){b=g(b);var h=c/b[2];this.__chart__=n={x:d-b[0]*h,y:e-b[1]*h,k:h};f(a)}}).each("end.zoom",function(){h(a)}):(this.__chart__=n,g(a),f(a),h(a))})};a.translate=function(b){if(!arguments.length)return[n.x,n.y];n={x:+b[0],y:+b[1],k:n.k};e();return a};a.scale=function(b){if(!arguments.length)return n.k;n={x:n.x,
y:n.y,k:+b};e();return a};a.scaleExtent=function(b){if(!arguments.length)return ba;ba=null==b?wh:[+b[0],+b[1]];return a};a.center=function(b){if(!arguments.length)return t;t=b&&[+b[0],+b[1]];return a};a.size=function(b){if(!arguments.length)return y;y=b&&[+b[0],+b[1]];return a};a.x=function(b){if(!arguments.length)return A;A=b;B=b.copy();n={x:0,y:0,k:1};return a};a.y=function(b){if(!arguments.length)return G;G=b;fa=b.copy();n={x:0,y:0,k:1};return a};return F.rebind(a,z,"on")};var wh=[0,Infinity],
Eg,Rh="onwheel"in wa?(Eg=function(){return-F.event.deltaY*(F.event.deltaMode?120:1)},"wheel"):"onmousewheel"in wa?(Eg=function(){return F.event.wheelDelta},"mousewheel"):(Eg=function(){return-F.event.detail},"MozMousePixelScroll");sa.prototype.toString=function(){return this.rgb()+""};F.hsl=function(a,b,c){return 1===arguments.length?a instanceof ea?aa(a.h,a.s,a.l):sb(""+a,Ya,aa):aa(+a,+b,+c)};var bh=ea.prototype=new sa;bh.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);return aa(this.h,
this.s,this.l/a)};bh.darker=function(a){a=Math.pow(.7,arguments.length?a:1);return aa(this.h,this.s,a*this.l)};bh.rgb=function(){return Ia(this.h,this.s,this.l)};F.hcl=function(a,b,c){return 1===arguments.length?a instanceof Ea?v(a.h,a.c,a.l):a instanceof ib?Fa(a.l,a.a,a.b):Fa((a=cb((a=F.rgb(a)).r,a.g,a.b)).l,a.a,a.b):v(+a,+b,+c)};var ch=Ea.prototype=new sa;ch.brighter=function(a){return v(this.h,this.c,Math.min(100,this.l+Fg*(arguments.length?a:1)))};ch.darker=function(a){return v(this.h,this.c,
Math.max(0,this.l-Fg*(arguments.length?a:1)))};ch.rgb=function(){return pa(this.h,this.c,this.l).rgb()};F.lab=function(a,b,c){return 1===arguments.length?a instanceof ib?ya(a.l,a.a,a.b):a instanceof Ea?pa(a.l,a.c,a.h):cb((a=F.rgb(a)).r,a.g,a.b):ya(+a,+b,+c)};var Fg=18,hh=.95047,ih=1,jh=1.08883,dh=ib.prototype=new sa;dh.brighter=function(a){return ya(Math.min(100,this.l+Fg*(arguments.length?a:1)),this.a,this.b)};dh.darker=function(a){return ya(Math.max(0,this.l-Fg*(arguments.length?a:1)),this.a,this.b)};
dh.rgb=function(){return Ka(this.l,this.a,this.b)};F.rgb=function(a,b,c){return 1===arguments.length?a instanceof Ra?Ca(a.r,a.g,a.b):sb(""+a,Ca,Ia):Ca(~~a,~~b,~~c)};var Gg=Ra.prototype=new sa;Gg.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var b=this.r,c=this.g,d=this.b;if(!b&&!c&&!d)return Ca(30,30,30);b&&30>b&&(b=30);c&&30>c&&(c=30);d&&30>d&&(d=30);return Ca(Math.min(255,~~(b/a)),Math.min(255,~~(c/a)),Math.min(255,~~(d/a)))};Gg.darker=function(a){a=Math.pow(.7,arguments.length?a:1);
return Ca(~~(a*this.r),~~(a*this.g),~~(a*this.b))};Gg.hsl=function(){return Ya(this.r,this.g,this.b)};Gg.toString=function(){return"#"+Va(this.r)+Va(this.g)+Va(this.b)};var ig=F.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,
crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,
floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,
lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,
moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,
silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});ig.forEach(function(a,b){ig.set(a,Ca(b>>16,b>>8&255,b&255))});F.functor=na;F.xhr=db(Aa);F.dsv=function(a,b){function c(a,g,f){3>arguments.length&&(f=g,g=null);var h=Ma(a,b,null==g?d:e(g),
f);h.row=function(a){return arguments.length?h.response(null==(g=a)?d:e(a)):g};return h}function d(a){return c.parse(a.responseText)}function e(a){return function(b){return c.parse(b.responseText,a)}}function f(b){return b.map(h).join(a)}function h(a){return l.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var l=new RegExp('["'+a+"\n]"),m=a.charCodeAt(0);c.parse=function(a,b){var d;return c.parseRows(a,function(a,c){if(d)return d(a,c-1);var e=new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+
": d["+b+"]"}).join(",")+"}");d=b?function(a,c){return b(e(a),c)}:e})};c.parseRows=function(a,b){function c(){if(h>=f)return e;if(E)return E=!1,d;var b=h;if(34===a.charCodeAt(b)){for(var g=b;g++<f;)if(34===a.charCodeAt(g)){if(34!==a.charCodeAt(g+1))break;++g}h=g+2;var l=a.charCodeAt(g+1);13===l?(E=!0,10===a.charCodeAt(g+2)&&++h):10===l&&(E=!0);return a.substring(b+1,g).replace(/""/g,'"')}for(;h<f;){l=a.charCodeAt(h++);g=1;if(10===l)E=!0;else if(13===l)E=!0,10===a.charCodeAt(h)&&(++h,++g);else if(l!==
m)continue;return a.substring(b,h-g)}return a.substring(b)}for(var d={},e={},g=[],f=a.length,h=0,l=0,p,E;(p=c())!==e;){for(var q=[];p!==d&&p!==e;)q.push(p),p=c();b&&!(q=b(q,l++))||g.push(q)}return g};c.format=function(b){if(Array.isArray(b[0]))return c.formatRows(b);var d=new g,e=[];b.forEach(function(a){for(var b in a)d.has(b)||e.push(d.add(b))});return[e.map(h).join(a)].concat(b.map(function(b){return e.map(function(a){return h(b[a])}).join(a)})).join("\n")};c.formatRows=function(a){return a.map(f).join("\n")};
return c};F.csv=F.dsv(",","text/csv");F.tsv=F.dsv("\t","text/tab-separated-values");var lg,mg,kg,jg,rd,kh=Qa[m(Qa,"requestAnimationFrame")]||function(a){setTimeout(a,17)};F.timer=function(a,b,c){var d=arguments.length;2>d&&(b=0);3>d&&(c=Date.now());d={c:a,t:c+b,f:!1,n:null};mg?mg.n=d:lg=d;mg=d;kg||(jg=clearTimeout(jg),kg=1,kh(qa))};F.timer.flush=function(){Kb();eb()};F.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};var Sh="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(a,
b){var c=Math.pow(10,3*ta(8-b));return{scale:8<b?function(a){return a/c}:function(a){return a*c},symbol:a}});F.formatPrefix=function(a,b){var c=0;a&&(0>a&&(a*=-1),b&&(a=F.round(a,jb(a,b))),c=1+Math.floor(1E-12+Math.log(a)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((0>=c?c+1:c-1)/3))));return Sh[8+c/3]};var lh=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Mh=F.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},
x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){return(a=F.round(a,jb(a,b))).toFixed(Math.max(0,Math.min(20,jb(a*(1+1E-15),b))))}}),ha=F.time={},Lb=Date;Za.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},
getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){wd.setUTCDate.apply(this._,arguments)},setDay:function(){wd.setUTCDay.apply(this._,arguments)},setFullYear:function(){wd.setUTCFullYear.apply(this._,
arguments)},setHours:function(){wd.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){wd.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){wd.setUTCMinutes.apply(this._,arguments)},setMonth:function(){wd.setUTCMonth.apply(this._,arguments)},setSeconds:function(){wd.setUTCSeconds.apply(this._,arguments)},setTime:function(){wd.setTime.apply(this._,arguments)}};var wd=Date.prototype;ha.year=xa(function(a){a=ha.day(a);a.setMonth(0,1);return a},function(a,b){a.setFullYear(a.getFullYear()+
b)},function(a){return a.getFullYear()});ha.years=ha.year.range;ha.years.utc=ha.year.utc.range;ha.day=xa(function(a){var b=new Lb(2E3,0);b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate());return b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1});ha.days=ha.day.range;ha.days.utc=ha.day.utc.range;ha.dayOfYear=function(a){var b=ha.year(a);return Math.floor((a-b-6E4*(a.getTimezoneOffset()-b.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(a,
b){b=7-b;var c=ha[a]=xa(function(a){(a=ha.day(a)).setDate(a.getDate()-(a.getDay()+b)%7);return a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var c=ha.year(a).getDay();return Math.floor((ha.dayOfYear(a)+(c+b)%7)/7)-(c!==b)});ha[a+"s"]=c.range;ha[a+"s"].utc=c.utc.range;ha[a+"OfYear"]=function(a){var c=ha.year(a).getDay();return Math.floor((ha.dayOfYear(a)+(c+b)%7)/7)}});ha.week=ha.sunday;ha.weeks=ha.sunday.range;ha.weeks.utc=ha.sunday.utc.range;ha.weekOfYear=ha.sundayOfYear;var mh=
{"-":"",_:" ",0:"0"},rb=/^\s*\d+/,nh=/^%/;F.locale=function(a){return{numberFormat:mb(a),timeFormat:Eb(a)}};var xh=F.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});
F.format=xh.numberFormat;F.geo={};Ub.prototype={s:0,t:0,add:function(a){pc(a,this.t,Hg);pc(Hg.s,this.s,this);this.s?this.t+=Hg.t:this.s=Hg.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var Hg=new Ub;F.geo.stream=function(a,b){if(a&&yh.hasOwnProperty(a.type))yh[a.type](a,b);else $a(a,b)};var yh={Feature:function(a,b){$a(a.geometry,b)},FeatureCollection:function(a,b){for(var c=a.features,d=-1,e=c.length;++d<e;)$a(c[d].geometry,b)}},oh={Sphere:function(a,b){b.sphere()},Point:function(a,
b){a=a.coordinates;b.point(a[0],a[1],a[2])},MultiPoint:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)a=c[d],b.point(a[0],a[1],a[2])},LineString:function(a,b){ob(a.coordinates,b,0)},MultiLineString:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)ob(c[d],b,0)},Polygon:function(a,b){Xc(a.coordinates,b)},MultiPolygon:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)Xc(c[d],b)},GeometryCollection:function(a,b){for(var c=a.geometries,d=-1,e=c.length;++d<e;)$a(c[d],
b)}};F.geo.area=function(a){rf=0;F.geo.stream(a,ic);return rf};var rf,qe=new Ub,ic={sphere:function(){rf+=4*I},point:p,lineStart:p,lineEnd:p,polygonStart:function(){qe.reset();ic.lineStart=tb},polygonEnd:function(){var a=2*qe;rf+=0>a?4*I+a:a;ic.lineStart=ic.lineEnd=ic.point=p}};F.geo.bounds=function(){function a(b,c){ba.push(w=[p=b,q=b]);c<E&&(E=c);c>r&&(r=c)}function b(c,d){var e=Mb([c*fa,d*fa]);if(y){var g=Hb(y,e),g=Hb([g[1],-g[0],0],g);Ed(g);var g=ld(g),f=c-n,l=0<f?1:-1,m=g[0]*lb*l,f=180<ta(f);
f^(l*n<m&&m<l*c)?(g=g[1]*lb,g>r&&(r=g)):(m=(m+360)%360-180,f^(l*n<m&&m<l*c))?(g=-g[1]*lb,g<E&&(E=g)):(d<E&&(E=d),d>r&&(r=d));f?c<n?h(p,c)>h(p,q)&&(q=c):h(c,q)>h(p,q)&&(p=c):q>=p?(c<p&&(p=c),c>q&&(q=c)):c>n?h(p,c)>h(p,q)&&(q=c):h(c,q)>h(p,q)&&(p=c)}else a(c,d);y=e;n=c}function c(){x.point=b}function d(){w[0]=p;w[1]=q;x.point=a;y=null}function e(a,c){if(y){var d=a-n;u+=180<ta(d)?d+(0<d?360:-360):d}else I=a,t=c;ic.point(a,c);b(a,c)}function g(){ic.lineStart()}function f(){e(I,t);ic.lineEnd();1E-6<ta(u)&&
(p=-(q=180));w[0]=p;w[1]=q;y=null}function h(a,b){return 0>(b-=a)?b+360:b}function l(a,b){return a[0]-b[0]}function m(a,b){return b[0]<=b[1]?b[0]<=a&&a<=b[1]:a<b[0]||b[1]<a}var p,E,q,r,n,I,t,y,u,ba,w,x={point:a,lineStart:c,lineEnd:d,polygonStart:function(){x.point=e;x.lineStart=g;x.lineEnd=f;u=0;ic.polygonStart()},polygonEnd:function(){ic.polygonEnd();x.point=a;x.lineStart=c;x.lineEnd=d;0>qe?(p=-(q=180),E=-(r=90)):1E-6<u?r=90:-1E-6>u&&(E=-90);w[0]=p;w[1]=q}};return function(a){r=q=-(p=E=Infinity);
ba=[];F.geo.stream(a,x);if(a=ba.length){ba.sort(l);for(var b=1,c=ba[0],d,e=[c];b<a;++b)d=ba[b],m(d[0],c)||m(d[1],c)?(h(c[0],d[1])>h(c[0],c[1])&&(c[1]=d[1]),h(d[0],c[1])>h(c[0],c[1])&&(c[0]=d[0])):e.push(c=d);var g=-Infinity,f;a=e.length-1;b=0;for(c=e[a];b<=a;c=d,++b)d=e[b],(f=h(c[1],d[0]))>g&&(g=f,p=d[0],q=c[1])}ba=w=null;return Infinity===p||Infinity===E?[[NaN,NaN],[NaN,NaN]]:[[p,E],[q,r]]}}();F.geo.centroid=function(a){Hf=Ve=sd=td=$c=vc=wc=Xb=Md=Nd=ad=0;F.geo.stream(a,Pc);a=Md;var b=Nd,c=ad,d=a*
a+b*b+c*c;return 1E-12>d&&(a=vc,b=wc,c=Xb,1E-6>Ve&&(a=sd,b=td,c=$c),d=a*a+b*b+c*c,1E-12>d)?[NaN,NaN]:[Math.atan2(b,a)*lb,S(c/Math.sqrt(d))*lb]};var Hf,Ve,sd,td,$c,vc,wc,Xb,Md,Nd,ad,Pc={sphere:p,point:mc,lineStart:nc,lineEnd:Kc,polygonStart:function(){Pc.lineStart=je},polygonEnd:function(){Pc.lineStart=nc}},ph=Yd(Db,function(a){var b=NaN,c=NaN,d=NaN,e;return{lineStart:function(){a.lineStart();e=1},point:function(g,f){var h=0<g?I:-I,l=ta(g-b);if(1E-6>ta(l-I))a.point(b,c=0<(c+f)/2?hb:-hb),a.point(d,
c),a.lineEnd(),a.lineStart(),a.point(h,c),a.point(g,c),e=0;else if(d!==h&&l>=I){1E-6>ta(b-d)&&(b-=1E-6*d);1E-6>ta(g-h)&&(g-=1E-6*h);var l=b,m=c,p=g,E,q,r=Math.sin(l-p);c=1E-6<ta(r)?Math.atan((Math.sin(m)*(q=Math.cos(f))*Math.sin(p)-Math.sin(f)*(E=Math.cos(m))*Math.sin(l))/(E*q*r)):(m+f)/2;a.point(d,c);a.lineEnd();a.lineStart();a.point(h,c);e=0}a.point(b=g,c=f);d=h},lineEnd:function(){a.lineEnd();b=c=NaN},clean:function(){return 2-e}}},function(a,b,c,d){null==a?(c*=hb,d.point(-I,c),d.point(0,c),d.point(I,
c),d.point(I,0),d.point(I,-c),d.point(0,-c),d.point(-I,-c),d.point(-I,0),d.point(-I,c)):1E-6<ta(a[0]-b[0])?(a=a[0]<b[0]?I:-I,c=c*a/2,d.point(-a,c),d.point(0,c),d.point(a,c)):d.point(b[0],b[1])},[-I,-I/2]);F.geo.clipExtent=function(){var a,b,c,d,e,g,f={stream:function(a){e&&(e.valid=!1);e=g(a);e.valid=!0;return e},extent:function(h){if(!arguments.length)return[[a,b],[c,d]];g=me(a=+h[0][0],b=+h[0][1],c=+h[1][0],d=+h[1][1]);e&&(e.valid=!1,e=null);return f}};return f.extent([[0,0],[960,500]])};(F.geo.conicEqualArea=
function(){return Gd(Hd)}).raw=Hd;F.geo.albers=function(){return F.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};F.geo.albersUsa=function(){function a(b){var c=b[0];b=b[1];e=null;(f(c,b),e)||(h(c,b),e)||l(c,b);return e}var b=F.geo.albers(),c=F.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),d=F.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),e,g={point:function(a,b){e=[a,b]}},f,h,l;a.invert=function(a){var e=
b.scale(),g=b.translate(),f=(a[0]-g[0])/e,e=(a[1]-g[1])/e;return(.12<=e&&.234>e&&-.425<=f&&-.214>f?c:.166<=e&&.234>e&&-.214<=f&&-.115>f?d:b).invert(a)};a.stream=function(a){var e=b.stream(a),g=c.stream(a),f=d.stream(a);return{point:function(a,b){e.point(a,b);g.point(a,b);f.point(a,b)},sphere:function(){e.sphere();g.sphere();f.sphere()},lineStart:function(){e.lineStart();g.lineStart();f.lineStart()},lineEnd:function(){e.lineEnd();g.lineEnd();f.lineEnd()},polygonStart:function(){e.polygonStart();g.polygonStart();
f.polygonStart()},polygonEnd:function(){e.polygonEnd();g.polygonEnd();f.polygonEnd()}}};a.precision=function(e){if(!arguments.length)return b.precision();b.precision(e);c.precision(e);d.precision(e);return a};a.scale=function(e){if(!arguments.length)return b.scale();b.scale(e);c.scale(.35*e);d.scale(e);return a.translate(b.translate())};a.translate=function(e){if(!arguments.length)return b.translate();var m=b.scale(),p=+e[0],E=+e[1];f=b.translate(e).clipExtent([[p-.455*m,E-.238*m],[p+.455*m,E+.238*
m]]).stream(g).point;h=c.translate([p-.307*m,E+.201*m]).clipExtent([[p-.425*m+1E-6,E+.12*m+1E-6],[p-.214*m-1E-6,E+.234*m-1E-6]]).stream(g).point;l=d.translate([p-.205*m,E+.212*m]).clipExtent([[p-.214*m+1E-6,E+.166*m+1E-6],[p-.115*m-1E-6,E+.234*m-1E-6]]).stream(g).point;return a};return a.scale(1070)};var Ig,ng,Od={point:p,lineStart:p,lineEnd:p,polygonStart:function(){ng=0;Od.lineStart=ne},polygonEnd:function(){Od.lineStart=Od.lineEnd=Od.point=p;Ig+=ta(ng/2)}},Jg,Kg,Lg,Mg,Th={point:function(a,b){a<
Jg&&(Jg=a);a>Lg&&(Lg=a);b<Kg&&(Kg=b);b>Mg&&(Mg=b)},lineStart:p,lineEnd:p,polygonStart:p,polygonEnd:p},Qc={point:hc,lineStart:Yc,lineEnd:hd,polygonStart:function(){Qc.lineStart=Zc},polygonEnd:function(){Qc.point=hc;Qc.lineStart=Yc;Qc.lineEnd=hd}};F.geo.path=function(){function a(b){b&&("function"===typeof c&&f.pointRadius(+c.apply(this,arguments)),h&&h.valid||(h=g(f)),F.geo.stream(b,h));return f.result()}function b(){h=null;return a}var c=4.5,d,e,g,f,h;a.area=function(a){Ig=0;F.geo.stream(a,g(Od));
return Ig};a.centroid=function(a){sd=td=$c=vc=wc=Xb=Md=Nd=ad=0;F.geo.stream(a,g(Qc));return ad?[Md/ad,Nd/ad]:Xb?[vc/Xb,wc/Xb]:$c?[sd/$c,td/$c]:[NaN,NaN]};a.bounds=function(a){Lg=Mg=-(Jg=Kg=Infinity);F.geo.stream(a,g(Th));return[[Jg,Kg],[Lg,Mg]]};a.projection=function(a){if(!arguments.length)return d;g=(d=a)?a.stream||nd(a):Aa;return b()};a.context=function(a){if(!arguments.length)return e;f=null==(e=a)?new Se:new Te(a);"function"!==typeof c&&f.pointRadius(c);return b()};a.pointRadius=function(b){if(!arguments.length)return c;
c="function"===typeof b?b:(f.pointRadius(+b),+b);return a};return a.projection(F.geo.albersUsa()).context(null)};F.geo.transform=function(a){return{stream:function(b){b=new od(b);for(var c in a)b[c]=a[c];return b}}};od.prototype={point:function(a,b){this.stream.point(a,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};
F.geo.projection=Rb;F.geo.projectionMutator=Ob;(F.geo.equirectangular=function(){return Rb(Wb)}).raw=Wb.invert=Wb;F.geo.rotation=function(a){function b(c){c=a(c[0]*fa,c[1]*fa);return c[0]*=lb,c[1]*=lb,c}a=Nc(a[0]%360*fa,a[1]*fa,2<a.length?a[2]*fa:0);b.invert=function(b){b=a.invert(b[0]*fa,b[1]*fa);return b[0]*=lb,b[1]*=lb,b};return b};Ec.invert=Wb;F.geo.circle=function(){function a(){var c="function"===typeof b?b.apply(this,arguments):b,d=Nc(-c[0]*fa,-c[1]*fa,0).invert,g=[];e(null,null,1,{point:function(a,
b){g.push(a=d(a,b));a[0]*=lb;a[1]*=lb}});return{type:"Polygon",coordinates:[g]}}var b=[0,0],c,d=6,e;a.origin=function(c){if(!arguments.length)return b;b=c;return a};a.angle=function(b){if(!arguments.length)return c;e=Pb((c=+b)*fa,d*fa);return a};a.precision=function(b){if(!arguments.length)return d;e=Pb(c*fa,(d=+b)*fa);return a};return a.angle(90)};F.geo.distance=function(a,b){var c=(b[0]-a[0])*fa,d=a[1]*fa,e=b[1]*fa,g=Math.sin(c),c=Math.cos(c),f=Math.sin(d),d=Math.cos(d),h=Math.sin(e),e=Math.cos(e),
l;return Math.atan2(Math.sqrt((l=e*g)*l+(l=d*h-f*e*c)*l),f*h+d*e*c)};F.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return F.range(Math.ceil(g/q)*q,e,q).map(t).concat(F.range(Math.ceil(m/r)*r,l,r).map(y)).concat(F.range(Math.ceil(d/p)*p,c,p).filter(function(a){return 1E-6<ta(a%q)}).map(n)).concat(F.range(Math.ceil(h/E)*E,f,E).filter(function(a){return 1E-6<ta(a%r)}).map(I))}var c,d,e,g,f,h,l,m,p=10,E=p,q=90,r=360,n,I,t,y,u=2.5;a.lines=function(){return b().map(function(a){return{type:"LineString",
coordinates:a}})};a.outline=function(){return{type:"Polygon",coordinates:[t(g).concat(y(l).slice(1),t(e).reverse().slice(1),y(m).reverse().slice(1))]}};a.extent=function(b){return arguments.length?a.majorExtent(b).minorExtent(b):a.minorExtent()};a.majorExtent=function(b){if(!arguments.length)return[[g,m],[e,l]];g=+b[0][0];e=+b[1][0];m=+b[0][1];l=+b[1][1];g>e&&(b=g,g=e,e=b);m>l&&(b=m,m=l,l=b);return a.precision(u)};a.minorExtent=function(b){if(!arguments.length)return[[d,h],[c,f]];d=+b[0][0];c=+b[1][0];
h=+b[0][1];f=+b[1][1];d>c&&(b=d,d=c,c=b);h>f&&(b=h,h=f,f=b);return a.precision(u)};a.step=function(b){return arguments.length?a.majorStep(b).minorStep(b):a.minorStep()};a.majorStep=function(b){if(!arguments.length)return[q,r];q=+b[0];r=+b[1];return a};a.minorStep=function(b){if(!arguments.length)return[p,E];p=+b[0];E=+b[1];return a};a.precision=function(b){if(!arguments.length)return u;u=+b;n=Ld(h,f,90);I=Vf(d,c,u);t=Ld(m,l,90);y=Vf(g,e,u);return a};return a.majorExtent([[-180,-89.999999],[180,89.999999]]).minorExtent([[-180,
-80.000001],[180,80.000001]])};F.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[c||b.apply(this,arguments),e||d.apply(this,arguments)]}}var b=xd,c,d=gd,e;a.distance=function(){return F.geo.distance(c||b.apply(this,arguments),e||d.apply(this,arguments))};a.source=function(d){if(!arguments.length)return b;b=d;c="function"===typeof d?null:d;return a};a.target=function(b){if(!arguments.length)return d;d=b;e="function"===typeof b?null:b;return a};a.precision=function(){return arguments.length?
a:0};return a};F.geo.interpolate=function(a,b){return tf(a[0]*fa,a[1]*fa,b[0]*fa,b[1]*fa)};F.geo.length=function(a){Ng=0;F.geo.stream(a,sf);return Ng};var Ng,sf={sphere:p,point:p,lineStart:function(){function a(e,g){var f=Math.sin(g*=fa),h=Math.cos(g),l=ta((e*=fa)-b),m=Math.cos(l);Ng+=Math.atan2(Math.sqrt((l=h*Math.sin(l))*l+(l=d*f-c*h*m)*l),c*f+d*h*m);b=e;c=f;d=h}var b,c,d;sf.point=function(e,g){b=e*fa;c=Math.sin(g*=fa);d=Math.cos(g);sf.point=a};sf.lineEnd=function(){sf.point=sf.lineEnd=p}},lineEnd:p,
polygonStart:p,polygonEnd:p},zh=Sc(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(F.geo.azimuthalEqualArea=function(){return Rb(zh)}).raw=zh;var Ah=Sc(function(a){return(a=Math.acos(a))&&a/Math.sin(a)},Aa);(F.geo.azimuthalEquidistant=function(){return Rb(Ah)}).raw=Ah;(F.geo.conicConformal=function(){return Gd(uf)}).raw=uf;(F.geo.conicEquidistant=function(){return Gd(Wf)}).raw=Wf;var Bh=Sc(function(a){return 1/a},Math.atan);(F.geo.gnomonic=function(){return Rb(Bh)}).raw=
Bh;Zd.invert=function(a,b){return[a,2*Math.atan(Math.exp(b))-hb]};(F.geo.mercator=function(){return vf(Zd)}).raw=Zd;var Ch=Sc(function(){return 1},Math.asin);(F.geo.orthographic=function(){return Rb(Ch)}).raw=Ch;var Dh=Sc(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(F.geo.stereographic=function(){return Rb(Dh)}).raw=Dh;Ge.invert=function(a,b){return[-b,2*Math.atan(Math.exp(a))-hb]};(F.geo.transverseMercator=function(){var a=vf(Ge),b=a.center,c=a.rotate;a.center=function(a){return a?
b([-a[1],a[0]]):(a=b(),[-a[1],a[0]])};a.rotate=function(a){return a?c([a[0],a[1],2<a.length?a[2]+90:90]):(a=c(),[a[0],a[1],a[2]-90])};return a.rotate([0,0])}).raw=Ge;F.geom={};F.geom.hull=function(a){function b(a){if(3>a.length)return[];var e=na(c),g=na(d),f,h=a.length,l=[],m=[];for(f=0;f<h;f++)l.push([+e.call(this,a[f],f),+g.call(this,a[f],f),f]);l.sort($d);for(f=0;f<h;f++)m.push([l[f][0],-l[f][1]]);var e=bc(l),m=bc(m),g=m[0]===e[0],h=m[m.length-1]===e[e.length-1],p=[];for(f=e.length-1;0<=f;--f)p.push(a[l[e[f]][2]]);
for(f=+g;f<m.length-h;++f)p.push(a[l[m[f]][2]]);return p}var c=Tb,d=Ad;if(arguments.length)return b(a);b.x=function(a){return arguments.length?(c=a,b):c};b.y=function(a){return arguments.length?(d=a,b):d};return b};F.geom.polygon=function(a){pe(a,Og);return a};var Og=F.geom.polygon.prototype=[];Og.area=function(){for(var a=-1,b=this.length,c,d=this[b-1],e=0;++a<b;)c=d,d=this[a],e+=c[1]*d[0]-c[0]*d[1];return.5*e};Og.centroid=function(a){var b=-1,c=this.length,d=0,e=0,g,f=this[c-1],h;for(arguments.length||
(a=-1/(6*this.area()));++b<c;)g=f,f=this[b],h=g[0]*f[1]-f[0]*g[1],d+=(g[0]+f[0])*h,e+=(g[1]+f[1])*h;return[d*a,e*a]};Og.clip=function(a){for(var b,c=Ie(a),d=-1,e=this.length-Ie(this),g,f,h=this[e-1],l,m,p;++d<e;){b=a.slice();a.length=0;l=this[d];m=b[(f=b.length-c)-1];for(g=-1;++g<f;)p=b[g],He(p,h,l)?(He(m,h,l)||a.push(Uc(m,p,h,l)),a.push(p)):He(m,h,l)&&a.push(Uc(m,p,h,l)),m=p;c&&a.push(a[0]);h=l}return a};var Xe,re,We,qh=[],Ug,If,rh=[];Je.prototype.prepare=function(){for(var a=this.edges,b=a.length,
c;b--;)c=a[b].edge,c.b&&c.a||a.splice(b,1);a.sort(Ef);return a.length};ce.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};Le.prototype={insert:function(a,b){var c,d,e;if(a){b.P=a;if(b.N=a.N)a.N.P=b;a.N=b;if(a.R){for(a=a.R;a.L;)a=a.L;a.L=b}else a.R=b;c=a}else this._?(a=Vc(this._),b.P=null,b.N=a,a.P=a.L=b,c=a):(b.P=b.N=null,this._=b,c=null);b.L=b.R=null;b.U=c;b.C=!0;for(a=b;c&&c.C;)d=c.U,c===
d.L?(e=d.R)&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.R&&(Gc(this,c),a=c,c=a.U),c.C=!1,d.C=!0,Hc(this,d)):(e=d.L)&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.L&&(Hc(this,c),a=c,c=a.U),c.C=!1,d.C=!0,Gc(this,d)),c=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P);a.P&&(a.P.N=a.N);a.N=a.P=null;var b=a.U,c=a.L,d=a.R,e,g;e=c?d?Vc(d):c:d;b?b.L===a?b.L=e:b.R=e:this._=e;c&&d?(g=e.C,e.C=a.C,e.L=c,c.U=e,e!==d?(b=e.U,e.U=a.U,a=e.R,b.L=a,e.R=d,d.U=e):(e.U=b,b=e,a=e.R)):(g=a.C,a=e);a&&(a.U=b);if(!g)if(a&&a.C)a.C=!1;else{do{if(a===
this._)break;if(a===b.L){if(a=b.R,a.C&&(a.C=!1,b.C=!0,Gc(this,b),a=b.R),a.L&&a.L.C||a.R&&a.R.C){a.R&&a.R.C||(a.L.C=!1,a.C=!0,Hc(this,a),a=b.R);a.C=b.C;b.C=a.R.C=!1;Gc(this,b);a=this._;break}}else if(a=b.L,a.C&&(a.C=!1,b.C=!0,Hc(this,b),a=b.L),a.L&&a.L.C||a.R&&a.R.C){a.L&&a.L.C||(a.R.C=!1,a.C=!0,Gc(this,a),a=b.L);a.C=b.C;b.C=a.L.C=!1;Hc(this,b);a=this._;break}a.C=!0;a=b;b=b.U}while(!a.C);a&&(a.C=!1)}}};F.geom.voronoi=function(a){function b(a){var d=Array(a.length),e=h[0][0],g=h[0][1],f=h[1][0],l=h[1][1];
Ke(c(a),h).cells.forEach(function(b,c){var h=b.edges,m=b.site;(d[c]=h.length?h.map(function(a){a=a.start();return[a.x,a.y]}):m.x>=e&&m.x<=f&&m.y>=g&&m.y<=l?[[e,l],[f,l],[f,g],[e,g]]:[]).point=a[c]});return d}function c(a){return a.map(function(a,b){return{x:1E-6*Math.round(g(a,b)/1E-6),y:1E-6*Math.round(f(a,b)/1E-6),i:b}})}var d=Tb,e=Ad,g=d,f=e,h=Pg;if(a)return b(a);b.links=function(a){return Ke(c(a)).edges.filter(function(a){return a.l&&a.r}).map(function(b){return{source:a[b.l.i],target:a[b.r.i]}})};
b.triangles=function(a){var b=[];Ke(c(a)).cells.forEach(function(c,d){for(var e=c.site,g=c.edges.sort(Ef),f=-1,h=g.length,l,m=g[h-1].edge,m=m.l===e?m.r:m.l;++f<h;)l=m,m=g[f].edge,m=m.l===e?m.r:m.l,d<l.i&&d<m.i&&0>(e.x-m.x)*(l.y-e.y)-(e.x-l.x)*(m.y-e.y)&&b.push([a[d],a[l.i],a[m.i]])});return b};b.x=function(a){return arguments.length?(g=na(d=a),b):d};b.y=function(a){return arguments.length?(f=na(e=a),b):e};b.clipExtent=function(a){if(!arguments.length)return h===Pg?null:h;h=null==a?Pg:a;return b};
b.size=function(a){return arguments.length?b.clipExtent(a&&[[0,0],a]):h===Pg?null:h&&h[1]};return b};var Pg=[[-1E6,-1E6],[1E6,1E6]];F.geom.delaunay=function(a){return F.geom.voronoi().triangles(a)};F.geom.quadtree=function(a,b,c,d,e){function g(a){function m(a,b,c,d,e,g,f,h){if(!isNaN(c)&&!isNaN(d))if(a.leaf){var l=a.x,E=a.y;if(null!=l){if(!(.01>ta(l-c)+ta(E-d))){var q=a.point;a.x=a.y=a.point=null;p(a,q,l,E,e,g,f,h)}p(a,b,c,d,e,g,f,h)}else a.x=c,a.y=d,a.point=b}else p(a,b,c,d,e,g,f,h)}function p(a,
b,c,d,e,g,f,h){var l=.5*(e+f),E=.5*(g+h),q=c>=l,r=d>=E,n=(r<<1)+q;a.leaf=!1;a=a.nodes[n]||(a.nodes[n]=fc());q?e=l:f=l;r?g=E:h=E;m(a,b,c,d,e,g,f,h)}var E,q=na(f),r=na(h),n,I,t,y,u,ba,w,x;if(null!=b)u=b,ba=c,w=d,x=e;else if(w=x=-(u=ba=Infinity),n=[],I=[],y=a.length,l)for(t=0;t<y;++t)E=a[t],E.x<u&&(u=E.x),E.y<ba&&(ba=E.y),E.x>w&&(w=E.x),E.y>x&&(x=E.y),n.push(E.x),I.push(E.y);else for(t=0;t<y;++t){var z=+q(E=a[t],t);E=+r(E,t);z<u&&(u=z);E<ba&&(ba=E);z>w&&(w=z);E>x&&(x=E);n.push(z);I.push(E)}z=w-u;E=x-
ba;z>E?x=ba+z:w=u+E;var B=fc();B.add=function(a){m(B,a,+q(a,++t),+r(a,t),u,ba,w,x)};B.visit=function(a){gb(a,B,u,ba,w,x)};t=-1;if(null==b){for(;++t<y;)m(B,a[t],n[t],I[t],u,ba,w,x);--t}else a.forEach(B.add);n=I=a=E=null;return B}var f=Tb,h=Ad,l;if(l=arguments.length)return f=ge,h=Af,3===l&&(e=c,d=b,c=b=0),g(a);g.x=function(a){return arguments.length?(f=a,g):f};g.y=function(a){return arguments.length?(h=a,g):h};g.extent=function(a){if(!arguments.length)return null==b?null:[[b,c],[d,e]];null==a?b=c=
d=e=null:(b=+a[0][0],c=+a[0][1],d=+a[1][0],e=+a[1][1]);return g};g.size=function(a){if(!arguments.length)return null==b?null:[d-b,e-c];null==a?b=c=d=e=null:(b=c=0,d=+a[0],e=+a[1]);return g};return g};F.interpolateRgb=Ic;F.interpolateObject=ec;F.interpolateNumber=Bb;F.interpolateString=he;var og=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;F.interpolate=Fc;F.interpolators=[function(a,b){var c=typeof b;return("string"===c?ig.has(b)||/^(#|rgb\(|hsl\()/.test(b)?Ic:he:b instanceof sa?Ic:"object"===c?
Array.isArray(b)?fe:ec:Bb)(a,b)}];F.interpolateArray=fe;var Eh=function(){return Aa},Uh=F.map({linear:Eh,poly:function(a){return function(b){return Math.pow(b,a)}},quad:function(){return Sg},cubic:function(){return Dd},sin:function(){return fg},exp:function(){return Zf},circle:function(){return Ff},elastic:function(a,b){var c;2>arguments.length&&(b=.45);arguments.length?c=b/ba*Math.asin(1/a):(a=1,c=b/4);return function(d){return 1+a*Math.pow(2,-10*d)*Math.sin((d-c)*ba/b)}},back:function(a){a||(a=
1.70158);return function(b){return b*b*((a+1)*b-a)}},bounce:function(){return gg}}),Vh=F.map({"in":Aa,out:ie,"in-out":Df,"out-in":function(a){return Df(ie(a))}});F.ease=function(a){var b=a.indexOf("-"),c=0<=b?a.substring(0,b):a,b=0<=b?a.substring(b+1):"in",c=Uh.get(c)||Eh,b=Vh.get(b)||Aa;return dg(b(c.apply(null,Bg.call(arguments,1))))};F.interpolateHcl=function(a,b){a=F.hcl(a);b=F.hcl(b);var c=a.h,d=a.c,e=a.l,g=b.h-c,f=b.c-d,h=b.l-e;isNaN(f)&&(f=0,d=isNaN(d)?b.c:d);isNaN(g)?(g=0,c=isNaN(c)?b.h:c):
180<g?g-=360:-180>g&&(g+=360);return function(a){return pa(c+g*a,d+f*a,e+h*a)+""}};F.interpolateHsl=function(a,b){a=F.hsl(a);b=F.hsl(b);var c=a.h,d=a.s,e=a.l,g=b.h-c,f=b.s-d,h=b.l-e;isNaN(f)&&(f=0,d=isNaN(d)?b.s:d);isNaN(g)?(g=0,c=isNaN(c)?b.h:c):180<g?g-=360:-180>g&&(g+=360);return function(a){return Ia(c+g*a,d+f*a,e+h*a)+""}};F.interpolateLab=function(a,b){a=F.lab(a);b=F.lab(b);var c=a.l,d=a.a,e=a.b,g=b.l-c,f=b.a-d,h=b.b-e;return function(a){return Ka(c+g*a,d+f*a,e+h*a)+""}};F.interpolateRound=
yb;F.transform=function(a){var b=wa.createElementNS(F.ns.prefix.svg,"g");return(F.transform=function(a){if(null!=a){b.setAttribute("transform",a);var c=b.transform.baseVal.consolidate()}return new Xf(c?c.matrix:Wh)})(a)};Xf.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var Wh={a:1,b:0,c:0,d:1,e:0,f:0};F.interpolateTransform=wf;F.layout={};F.layout.bundle=function(){return function(a){for(var b=[],c=-1,d=a.length;++c<
d;)b.push(xf(a[c]));return b}};F.layout.chord=function(){function a(){var c={},E=[],q=F.range(f),r=[],n,I,t,y,u;d=[];e=[];n=0;for(y=-1;++y<f;){I=0;for(u=-1;++u<f;)I+=g[y][u];E.push(I);r.push(F.range(f));n+=I}l&&q.sort(function(a,b){return l(E[a],E[b])});m&&r.forEach(function(a,b){a.sort(function(a,c){return m(g[b][a],g[b][c])})});n=(ba-h*f)/n;I=0;for(y=-1;++y<f;){t=I;for(u=-1;++u<f;){var w=q[y],x=r[w][u],z=g[w][x],B=I,A=I+=z*n;c[w+"-"+x]={index:w,subindex:x,startAngle:B,endAngle:A,value:z}}e[w]={index:w,
startAngle:t,endAngle:I,value:(I-t)/n};I+=h}for(y=-1;++y<f;)for(u=y-1;++u<f;)q=c[y+"-"+u],r=c[u+"-"+y],(q.value||r.value)&&d.push(q.value<r.value?{source:r,target:q}:{source:q,target:r});p&&b()}function b(){d.sort(function(a,b){return p((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var c={},d,e,g,f,h=0,l,m,p;c.matrix=function(a){if(!arguments.length)return g;f=(g=a)&&g.length;d=e=null;return c};c.padding=function(a){if(!arguments.length)return h;h=a;d=e=null;return c};c.sortGroups=
function(a){if(!arguments.length)return l;l=a;d=e=null;return c};c.sortSubgroups=function(a){if(!arguments.length)return m;m=a;d=null;return c};c.sortChords=function(a){if(!arguments.length)return p;p=a;d&&b();return c};c.chords=function(){d||a();return d};c.groups=function(){e||a();return e};return c};F.layout.force=function(){function a(b){return function(a,c,d,e){if(a.point!==b){d=a.cx-b.x;var g=a.cy-b.y;c=e-c;e=d*d+g*g;if(c*c/r<e)return e<E&&(c=a.charge/e,b.px-=d*c,b.py-=g*c),!0;a.point&&e&&e<
E&&(c=a.pointCharge/e,b.px-=d*c,b.py-=g*c)}return!a.charge}}function b(a){a.px=F.event.x;a.py=F.event.y;c.resume()}var c={},d=F.dispatch("start","tick","end"),e=[1,1],g,f,h=.9,l=Xh,m=Yh,p=-30,E=Zh,q=.1,r=.64,n=[],I=[],t,y,u;c.tick=function(){if(.005>(f*=.99))return d.end({type:"end",alpha:f=0}),!0;var b=n.length,c=I.length,g,l,m,E,r,ba,w;for(g=0;g<c;++g)if(l=I[g],m=l.source,E=l.target,ba=E.x-m.x,w=E.y-m.y,r=ba*ba+w*w)r=f*y[g]*((r=Math.sqrt(r))-t[g])/r,ba*=r,w*=r,E.x-=ba*(r=m.weight/(E.weight+m.weight)),
E.y-=w*r,m.x+=ba*(r=1-r),m.y+=w*r;if(r=f*q)if(ba=e[0]/2,w=e[1]/2,g=-1,r)for(;++g<b;)l=n[g],l.x+=(ba-l.x)*r,l.y+=(w-l.y)*r;if(p)for(Cf(c=F.geom.quadtree(n),f,u),g=-1;++g<b;)(l=n[g]).fixed||c.visit(a(l));for(g=-1;++g<b;)l=n[g],l.fixed?(l.x=l.px,l.y=l.py):(l.x-=(l.px-(l.px=l.x))*h,l.y-=(l.py-(l.py=l.y))*h);d.tick({type:"tick",alpha:f})};c.nodes=function(a){if(!arguments.length)return n;n=a;return c};c.links=function(a){if(!arguments.length)return I;I=a;return c};c.size=function(a){if(!arguments.length)return e;
e=a;return c};c.linkDistance=function(a){if(!arguments.length)return l;l="function"===typeof a?a:+a;return c};c.distance=c.linkDistance;c.linkStrength=function(a){if(!arguments.length)return m;m="function"===typeof a?a:+a;return c};c.friction=function(a){if(!arguments.length)return h;h=+a;return c};c.charge=function(a){if(!arguments.length)return p;p="function"===typeof a?a:+a;return c};c.chargeDistance=function(a){if(!arguments.length)return Math.sqrt(E);E=a*a;return c};c.gravity=function(a){if(!arguments.length)return q;
q=+a;return c};c.theta=function(a){if(!arguments.length)return Math.sqrt(r);r=a*a;return c};c.alpha=function(a){if(!arguments.length)return f;a=+a;f?f=0<a?a:0:0<a&&(d.start({type:"start",alpha:f=a}),F.timer(c.tick));return c};c.start=function(){function a(c,e){if(!E){E=Array(d);for(f=0;f<d;++f)E[f]=[];for(f=0;f<h;++f){var g=I[f];E[g.source.index].push(g.target);E[g.target.index].push(g.source)}}for(var g=E[b],f=-1,h=g.length,l;++f<h;)if(!isNaN(l=g[f][c]))return l;return Math.random()*e}var b,d=n.length,
g=I.length,f=e[0],h=e[1],E,q;for(b=0;b<d;++b)(q=n[b]).index=b,q.weight=0;for(b=0;b<g;++b)q=I[b],"number"==typeof q.source&&(q.source=n[q.source]),"number"==typeof q.target&&(q.target=n[q.target]),++q.source.weight,++q.target.weight;for(b=0;b<d;++b)q=n[b],isNaN(q.x)&&(q.x=a("x",f)),isNaN(q.y)&&(q.y=a("y",h)),isNaN(q.px)&&(q.px=q.x),isNaN(q.py)&&(q.py=q.y);t=[];if("function"===typeof l)for(b=0;b<g;++b)t[b]=+l.call(this,I[b],b);else for(b=0;b<g;++b)t[b]=l;y=[];if("function"===typeof m)for(b=0;b<g;++b)y[b]=
+m.call(this,I[b],b);else for(b=0;b<g;++b)y[b]=m;u=[];if("function"===typeof p)for(b=0;b<d;++b)u[b]=+p.call(this,n[b],b);else for(b=0;b<d;++b)u[b]=p;return c.resume()};c.resume=function(){return c.alpha(.1)};c.stop=function(){return c.alpha(0)};c.drag=function(){g||(g=F.behavior.drag().origin(Aa).on("dragstart.force",Yf).on("drag.force",b).on("dragend.force",fb));if(!arguments.length)return g;this.on("mouseover.force",Fb).on("mouseout.force",de).call(g)};return F.rebind(c,d,"on")};var Xh=20,Yh=1,
Zh=Infinity;F.layout.hierarchy=function(){function a(b,f,h){var l=e.call(c,b,f);b.depth=f;h.push(b);if(l&&(p=l.length)){var m=-1,p,E=b.children=Array(p),q=0;f+=1;for(var r;++m<p;)r=E[m]=a(l[m],f,h),r.parent=b,q+=r.value;d&&E.sort(d);g&&(b.value=q)}else delete b.children,g&&(b.value=+g.call(c,b,f)||0);return b}function b(a,d){var e=a.children,f=0;if(e&&(l=e.length))for(var h=-1,l,m=d+1;++h<l;)f+=b(e[h],m);else g&&(f=+g.call(c,a,d)||0);g&&(a.value=f);return f}function c(b){var d=[];a(b,0,d);return d}
var d=ag,e=oc,g=Me;c.sort=function(a){if(!arguments.length)return d;d=a;return c};c.children=function(a){if(!arguments.length)return e;e=a;return c};c.value=function(a){if(!arguments.length)return g;g=a;return c};c.revalue=function(a){b(a,0);return a};return c};F.layout.partition=function(){function a(b,c,d,e){var g=b.children;b.x=c;b.y=b.depth*e;b.dx=d;b.dy=e;if(g&&(h=g.length)){var f=-1,h,l;for(d=b.value?d/b.value:0;++f<h;)a(l=g[f],c,b=l.value*d,e),c+=b}}function b(a){a=a.children;var c=0;if(a&&
(e=a.length))for(var d=-1,e;++d<e;)c=Math.max(c,b(a[d]));return 1+c}function c(g,f){var h=d.call(this,g,f);a(h[0],0,e[0],e[1]/b(h[0]));return h}var d=F.layout.hierarchy(),e=[1,1];c.size=function(a){if(!arguments.length)return e;e=a;return c};return Jc(c,d)};F.layout.pie=function(){function a(g){var f=g.map(function(c,d){return+b.call(a,c,d)}),h=+("function"===typeof d?d.apply(this,arguments):d),l=(("function"===typeof e?e.apply(this,arguments):e)-h)/F.sum(f),m=F.range(g.length);null!=c&&m.sort(c===
Fh?function(a,b){return f[b]-f[a]}:function(a,b){return c(g[a],g[b])});var p=[];m.forEach(function(a){var b;p[a]={data:g[a],value:b=f[a],startAngle:h,endAngle:h+=b*l}});return p}var b=Number,c=Fh,d=0,e=ba;a.value=function(c){if(!arguments.length)return b;b=c;return a};a.sort=function(b){if(!arguments.length)return c;c=b;return a};a.startAngle=function(b){if(!arguments.length)return d;d=b;return a};a.endAngle=function(b){if(!arguments.length)return e;e=b;return a};return a};var Fh={};F.layout.stack=
function(){function a(h,l){var m=h.map(function(c,d){return b.call(a,c,d)}),p=m.map(function(b){return b.map(function(b,c){return[g.call(a,b,c),f.call(a,b,c)]})}),E=c.call(a,p,l),m=F.permute(m,E),p=F.permute(p,E),E=d.call(a,p,l),q=m.length,r=m[0].length,n,I,t;for(I=0;I<r;++I)for(e.call(a,m[0][I],t=E[I],p[0][I][1]),n=1;n<q;++n)e.call(a,m[n][I],t+=p[n-1][I][1],p[n][I][1]);return h}var b=Aa,c=xc,d=se,e=jc,g=ra,f=id;a.values=function(c){if(!arguments.length)return b;b=c;return a};a.order=function(b){if(!arguments.length)return c;
c="function"===typeof b?b:$h.get(b)||xc;return a};a.offset=function(b){if(!arguments.length)return d;d="function"===typeof b?b:ai.get(b)||se;return a};a.x=function(b){if(!arguments.length)return g;g=b;return a};a.y=function(b){if(!arguments.length)return f;f=b;return a};a.out=function(b){if(!arguments.length)return e;e=b;return a};return a};var $h=F.map({"inside-out":function(a){var b=a.length,c,d=a.map(Ye),e=a.map(Ze),g=F.range(b).sort(function(a,b){return d[a]-d[b]}),f=0,h=0,l=[],m=[];for(a=0;a<
b;++a)c=g[a],f<h?(f+=e[c],l.push(c)):(h+=e[c],m.push(c));return m.reverse().concat(l)},reverse:function(a){return F.range(a.length).reverse()},"default":xc}),ai=F.map({silhouette:function(a){var b=a.length,c=a[0].length,d=[],e=0,g,f,h,l=[];for(f=0;f<c;++f){for(h=g=0;g<b;g++)h+=a[g][f][1];h>e&&(e=h);d.push(h)}for(f=0;f<c;++f)l[f]=(e-d[f])/2;return l},wiggle:function(a){var b=a.length,c=a[0],d=c.length,e,g,f,h,l,m,p,E,q,r=[];r[0]=E=q=0;for(g=1;g<d;++g){for(h=e=0;e<b;++e)h+=a[e][g][1];l=e=0;for(p=c[g][0]-
c[g-1][0];e<b;++e){f=0;for(m=(a[e][g][1]-a[e][g-1][1])/(2*p);f<e;++f)m+=(a[f][g][1]-a[f][g-1][1])/p;l+=m*a[e][g][1]}r[g]=E-=h?l/h*p:0;E<q&&(q=E)}for(g=0;g<d;++g)r[g]-=q;return r},expand:function(a){var b=a.length,c=a[0].length,d=1/b,e,g,f,h=[];for(g=0;g<c;++g){for(f=e=0;e<b;e++)f+=a[e][g][1];if(f)for(e=0;e<b;e++)a[e][g][1]/=f;else for(e=0;e<b;e++)a[e][g][1]=d}for(g=0;g<c;++g)h[g]=0;return h},zero:se});F.layout.histogram=function(){function a(g,f){var h=[],l=g.map(c,this),m=d.call(this,l,f),p=e.call(this,
m,l,f),E;f=-1;for(var q=l.length,r=p.length-1,n=b?1:1/q;++f<r;)E=h[f]=[],E.dx=p[f+1]-(E.x=p[f]),E.y=0;if(0<r)for(f=-1;++f<q;)E=l[f],E>=m[0]&&E<=m[1]&&(E=h[F.bisect(p,E,1,r)-1],E.y+=n,E.push(g[f]));return h}var b=!0,c=Number,d=Vg,e=pg;a.value=function(b){if(!arguments.length)return c;c=b;return a};a.range=function(b){if(!arguments.length)return d;d=na(b);return a};a.bins=function(b){if(!arguments.length)return e;e="number"===typeof b?function(a){return qg(a,b)}:na(b);return a};a.frequency=function(c){if(!arguments.length)return b;
b=!!c;return a};return a};F.layout.tree=function(){function a(g,f){function h(a,b){var d=a.children,e=a._tree;if(d&&(g=d.length)){for(var g,f=d[0],l,m=f,p,E=-1;++E<g;){p=d[E];h(p,l);var q=p;if(l){for(var r=q,n=q,I=q.parent.children[0],t=r._tree.mod,y=n._tree.mod,u=l._tree.mod,ba=I._tree.mod,w=void 0;l=te(l),r=Kf(r),l&&r;){I=Kf(I);n=te(n);n._tree.ancestor=q;w=l._tree.prelim+u-r._tree.prelim-t+c(l,r);if(0<w){var x=l._tree.ancestor.parent==q.parent?l._tree.ancestor:m,z=q,B=w,x=x._tree,z=z._tree,A=B/
(z.number-x.number);x.change+=A;z.change-=A;z.shift+=B;z.prelim+=B;z.mod+=B;t+=w;y+=w}u+=l._tree.mod;t+=r._tree.mod;ba+=I._tree.mod;y+=n._tree.mod}l&&!te(n)&&(n._tree.thread=l,n._tree.mod+=u-y);r&&!Kf(I)&&(I._tree.thread=r,I._tree.mod+=t-ba,m=q)}l=p}g=d=0;E=a.children;for(q=E.length;0<=--q;)m=E[q]._tree,m.prelim+=d,m.mod+=d,d+=m.shift+(g+=m.change);f=.5*(f._tree.prelim+p._tree.prelim);b?(e.prelim=b._tree.prelim+c(a,b),e.mod=e.prelim-f):e.prelim=f}else b&&(e.prelim=b._tree.prelim+c(a,b))}function l(a,
b){a.x=a._tree.prelim+b;var c=a.children;if(c&&(e=c.length)){var d=-1,e;for(b+=a._tree.mod;++d<e;)l(c[d],b)}}var m=b.call(this,g,f),p=m[0];yc(p,function(a,b){a._tree={ancestor:a,prelim:0,mod:0,change:0,shift:0,number:b?b._tree.number+1:0}});h(p);l(p,-p._tree.prelim);var E=Pd(p,af),q=Pd(p,$e),r=Pd(p,sg),n=E.x-c(E,q)/2,I=q.x+c(q,E)/2,t=r.depth||1;yc(p,e?function(a){a.x*=d[0];a.y=a.depth*d[1];delete a._tree}:function(a){a.x=(a.x-n)/(I-n)*d[0];a.y=a.depth/t*d[1];delete a._tree});return m}var b=F.layout.hierarchy().sort(null).value(null),
c=rg,d=[1,1],e=!1;a.separation=function(b){if(!arguments.length)return c;c=b;return a};a.size=function(b){if(!arguments.length)return e?null:d;e=null==(d=b);return a};a.nodeSize=function(b){if(!arguments.length)return e?d:null;e=null!=(d=b);return a};return Jc(a,b)};F.layout.pack=function(){function a(g,f){var h=b.call(this,g,f),l=h[0],m=d[0],p=d[1],E=null==e?Math.sqrt:"function"===typeof e?e:function(){return e};l.x=l.y=0;yc(l,function(a){a.r=+E(a.value)});yc(l,Qd);if(c){var q=c*(e?1:Math.max(2*
l.r/m,2*l.r/p))/2;yc(l,function(a){a.r+=q});yc(l,Qd);yc(l,function(a){a.r-=q})}La(l,m/2,p/2,e?1:1/Math.max(2*l.r/m,2*l.r/p));return h}var b=F.layout.hierarchy().sort(Lf),c=0,d=[1,1],e;a.size=function(b){if(!arguments.length)return d;d=b;return a};a.radius=function(b){if(!arguments.length)return e;e=null==b||"function"===typeof b?b:+b;return a};a.padding=function(b){if(!arguments.length)return c;c=+b;return a};return Jc(a,b)};F.layout.cluster=function(){function a(g,f){var h=b.call(this,g,f),l=h[0],
m,p=0;yc(l,function(a){var b=a.children;b&&b.length?(a.x=Wg(b),a.y=Gb(b)):(a.x=m?p+=c(a,m):0,a.y=0,m=a)});var E=vg(l),q=Yb(l),r=E.x-c(E,q)/2,n=q.x+c(q,E)/2;yc(l,e?function(a){a.x=(a.x-l.x)*d[0];a.y=(l.y-a.y)*d[1]}:function(a){a.x=(a.x-r)/(n-r)*d[0];a.y=(1-(l.y?a.y/l.y:1))*d[1]});return h}var b=F.layout.hierarchy().sort(null).value(null),c=rg,d=[1,1],e=!1;a.separation=function(b){if(!arguments.length)return c;c=b;return a};a.size=function(b){if(!arguments.length)return e?null:d;e=null==(d=b);return a};
a.nodeSize=function(b){if(!arguments.length)return e?d:null;e=null!=(d=b);return a};return Jc(a,b)};F.layout.treemap=function(){function a(b,c){for(var d=-1,e=b.length,g,f;++d<e;)f=(g=b[d]).value*(0>c?0:c),g.area=isNaN(f)||0>=f?0:f}function b(c){var e=c.children;if(e&&e.length){var g=m(c),f=[],h=e.slice(),l=Infinity,p,E="slice"===q?g.dx:"dice"===q?g.dy:"slice-dice"===q?c.depth&1?g.dy:g.dx:Math.min(g.dx,g.dy);a(h,g.dx*g.dy/c.value);for(f.area=0;0<(c=h.length);){f.push(c=h[c-1]);f.area+=c.area;if(!(c=
"squarify"!==q)){p=E;c=f.area;for(var n=void 0,I=0,t=Infinity,y=-1,u=f.length;++y<u;)if(n=f[y].area)n<t&&(t=n),n>I&&(I=n);c*=c;p*=p;c=(p=c?Math.max(p*I*r/c,c/(p*t*r)):Infinity)<=l}c?(h.pop(),l=p):(f.area-=f.pop().area,d(f,E,g,!1),E=Math.min(g.dx,g.dy),f.length=f.area=0,l=Infinity)}f.length&&(d(f,E,g,!0),f.length=f.area=0);e.forEach(b)}}function c(b){var e=b.children;if(e&&e.length){var g=m(b),f=e.slice(),h=[];a(f,g.dx*g.dy/b.value);for(h.area=0;b=f.pop();)h.push(b),h.area+=b.area,null!=b.z&&(d(h,
b.z?g.dx:g.dy,g,!f.length),h.length=h.area=0);e.forEach(c)}}function d(a,b,c,e){var g=-1,h=a.length,l=c.x,m=c.y,p=b?f(a.area/b):0,E;if(b==c.dx){if(e||p>c.dy)p=c.dy;for(;++g<h;)E=a[g],E.x=l,E.y=m,E.dy=p,l+=E.dx=Math.min(c.x+c.dx-l,p?f(E.area/p):0);E.z=!0;E.dx+=c.x+c.dx-l;c.y+=p;c.dy-=p}else{if(e||p>c.dx)p=c.dx;for(;++g<h;)E=a[g],E.x=l,E.y=m,E.dx=p,m+=E.dy=Math.min(c.y+c.dy-m,p?f(E.area/p):0);E.z=!1;E.dy+=c.y+c.dy-m;c.x+=p;c.dx-=p}}function e(d){d=E||g(d);var f=d[0];f.x=0;f.y=0;f.dx=h[0];f.dy=h[1];
E&&g.revalue(f);a([f],f.dx*f.dy/f.value);(E?c:b)(f);p&&(E=d);return d}var g=F.layout.hierarchy(),f=Math.round,h=[1,1],l=null,m=cf,p=!1,E,q="squarify",r=.5*(1+Math.sqrt(5));e.size=function(a){if(!arguments.length)return h;h=a;return e};e.padding=function(a){function b(c){var d=a.call(e,c,c.depth);return null==d?cf(c):df(c,"number"===typeof d?[d,d,d,d]:d)}function c(b){return df(b,a)}if(!arguments.length)return l;var d;m=null==(l=a)?cf:"function"===(d=typeof a)?b:"number"===d?(a=[a,a,a,a],c):c;return e};
e.round=function(a){if(!arguments.length)return f!=Number;f=a?Math.round:Number;return e};e.sticky=function(a){if(!arguments.length)return p;p=a;E=null;return e};e.ratio=function(a){if(!arguments.length)return r;r=a;return e};e.mode=function(a){if(!arguments.length)return q;q=a+"";return e};return Jc(e,g)};F.random={normal:function(a,b){var c=arguments.length;2>c&&(b=1);1>c&&(a=0);return function(){var c,d;do c=2*Math.random()-1,d=2*Math.random()-1,d=c*c+d*d;while(!d||1<d);return a+b*c*Math.sqrt(-2*
Math.log(d)/d)}},logNormal:function(){var a=F.random.normal.apply(F,arguments);return function(){return Math.exp(a())}},bates:function(a){var b=F.random.irwinHall(a);return function(){return b()/a}},irwinHall:function(a){return function(){for(var b=0,c=0;c<a;c++)b+=Math.random();return b}}};F.scale={};var Nh={floor:Aa,ceil:Aa};F.scale.linear=function(){return bd([0,1],[0,1],Fc,!1)};var Oh={s:1,g:1,p:1,r:1,e:1};F.scale.log=function(){return Ha(F.scale.linear().domain([0,1]),10,!0,[1,10])};var sh=F.format(".0e"),
Ph={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};F.scale.pow=function(){return hf(F.scale.linear(),1,[0,1])};F.scale.sqrt=function(){return F.scale.pow().exponent(.5)};F.scale.ordinal=function(){return ud([],{t:"range",a:[[]]})};F.scale.category10=function(){return F.scale.ordinal().range(bi)};F.scale.category20=function(){return F.scale.ordinal().range(ci)};F.scale.category20b=function(){return F.scale.ordinal().range(di)};F.scale.category20c=function(){return F.scale.ordinal().range(ei)};
var bi=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(Xa),ci=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(Xa),di=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(Xa),ei=[3244733,7057110,10406625,
13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(Xa);F.scale.quantile=function(){return wg([],[])};F.scale.quantize=function(){return cd(0,1,[0,1])};F.scale.threshold=function(){return we([.5],[0,1])};F.scale.identity=function(){return xe([0,1])};F.svg={};F.svg.arc=function(){function a(){var g=b.apply(this,arguments),f=c.apply(this,arguments),h=d.apply(this,arguments)+Ae,l=e.apply(this,arguments)+
Ae,m=(l<h&&(m=h,h=l,l=m),l-h),p=m<I?"0":"1",E=Math.cos(h),h=Math.sin(h),q=Math.cos(l),l=Math.sin(l);return m>=fi?g?"M0,"+f+"A"+f+","+f+" 0 1,1 0,"+-f+"A"+f+","+f+" 0 1,1 0,"+f+"M0,"+g+"A"+g+","+g+" 0 1,0 0,"+-g+"A"+g+","+g+" 0 1,0 0,"+g+"Z":"M0,"+f+"A"+f+","+f+" 0 1,1 0,"+-f+"A"+f+","+f+" 0 1,1 0,"+f+"Z":g?"M"+f*E+","+f*h+"A"+f+","+f+" 0 "+p+",1 "+f*q+","+f*l+"L"+g*q+","+g*l+"A"+g+","+g+" 0 "+p+",0 "+g*E+","+g*h+"Z":"M"+f*E+","+f*h+"A"+f+","+f+" 0 "+p+",1 "+f*q+","+f*l+"L0,0Z"}var b=xg,c=jf,d=$b,
e=Nf;a.innerRadius=function(c){if(!arguments.length)return b;b=na(c);return a};a.outerRadius=function(b){if(!arguments.length)return c;c=na(b);return a};a.startAngle=function(b){if(!arguments.length)return d;d=na(b);return a};a.endAngle=function(b){if(!arguments.length)return e;e=na(b);return a};a.centroid=function(){var a=(b.apply(this,arguments)+c.apply(this,arguments))/2,g=(d.apply(this,arguments)+e.apply(this,arguments))/2+Ae;return[Math.cos(g)*a,Math.sin(g)*a]};return a};var Ae=-hb,fi=ba-1E-6;
F.svg.line=function(){return kf(Aa)};var Yg=F.map({linear:wb,"linear-closed":function(a){return wb(a)+"Z"},step:function(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d[0]+(d=a[b])[0])/2,"V",d[1]);1<c&&e.push("H",d[0]);return e.join("")},"step-before":Of,"step-after":dd,basis:Td,"basis-open":function(a){if(4>a.length)return wb(a);for(var b=[],c=-1,d=a.length,e,g=[0],f=[0];3>++c;)e=a[c],g.push(e[0]),f.push(e[1]);b.push(Jb(Ud,g)+","+Jb(Ud,f));for(--c;++c<d;)e=a[c],g.shift(),
g.push(e[0]),f.shift(),f.push(e[1]),ze(b,g,f);return b.join("")},"basis-closed":function(a){for(var b,c=-1,d=a.length,e=d+4,g,f=[],h=[];4>++c;)g=a[c%d],f.push(g[0]),h.push(g[1]);b=[Jb(Ud,f),",",Jb(Ud,h)];for(--c;++c<e;)g=a[c%d],f.shift(),f.push(g[0]),h.shift(),h.push(g[1]),ze(b,f,h);return b.join("")},bundle:function(a,b){var c=a.length-1;if(c)for(var d=a[0][0],e=a[0][1],g=a[c][0]-d,f=a[c][1]-e,h=-1,l,m;++h<=c;)l=a[h],m=h/c,l[0]=b*l[0]+(1-b)*(d+m*g),l[1]=b*l[1]+(1-b)*(e+m*f);return Td(a)},cardinal:function(a,
b){return 3>a.length?wb(a):a[0]+ye(a,lf(a,b))},"cardinal-open":function(a,b){return 4>a.length?wb(a):a[1]+ye(a.slice(1,a.length-1),lf(a,b))},"cardinal-closed":function(a,b){return 3>a.length?wb(a):a[0]+ye((a.push(a[0]),a),lf([a[a.length-2]].concat(a,[a[1]]),b))},monotone:function(a){if(3>a.length)a=wb(a);else{var b=a[0],c=[],d,e,g,f;d=0;e=a.length-1;var h=[];g=a[1];for(f=h[0]=Rc(a[0],g);++d<e;)h[d]=(f+(f=Rc(g,g=a[d+1])))/2;h[d]=f;for(var l=-1,m=a.length-1;++l<m;)d=Rc(a[l],a[l+1]),1E-6>ta(d)?h[l]=
h[l+1]=0:(e=h[l]/d,g=h[l+1]/d,f=e*e+g*g,9<f&&(f=3*d/Math.sqrt(f),h[l]=f*e,h[l+1]=f*g));for(l=-1;++l<=m;)f=(a[Math.min(m,l+1)][0]-a[Math.max(0,l-1)][0])/(6*(1+h[l]*h[l])),c.push([f||0,h[l]*f||0]);a=b+ye(a,c)}return a}});Yg.forEach(function(a,b){b.key=a;b.closed=/-closed$/.test(a)});var th=[0,2/3,1/3,0],uh=[0,1/3,2/3,0],Ud=[0,1/6,2/3,1/6];F.svg.line.radial=function(){var a=kf(Vd);a.radius=a.x;delete a.x;a.angle=a.y;delete a.y;return a};Of.reverse=dd;dd.reverse=Of;F.svg.area=function(){return yg(Aa)};
F.svg.area.radial=function(){var a=yg(Vd);a.radius=a.x;delete a.x;a.innerRadius=a.x0;delete a.x0;a.outerRadius=a.x1;delete a.x1;a.angle=a.y;delete a.y;a.startAngle=a.y0;delete a.y0;a.endAngle=a.y1;delete a.y1;return a};F.svg.chord=function(){function a(g,f){var h=b(this,d,g,f),l=b(this,e,g,f);return"M"+h.p0+c(h.r,h.p1,h.a1-h.a0)+(h.a0==l.a0&&h.a1==l.a1?"Q 0,0 "+h.p0:"Q 0,0 "+l.p0+c(l.r,l.p1,l.a1-l.a0)+("Q 0,0 "+h.p0))+"Z"}function b(a,c,d,e){var l=c.call(a,d,e);c=g.call(a,l,e);d=f.call(a,l,e)+Ae;
a=h.call(a,l,e)+Ae;return{r:c,a0:d,a1:a,p0:[c*Math.cos(d),c*Math.sin(d)],p1:[c*Math.cos(a),c*Math.sin(a)]}}function c(a,b,d){return"A"+a+","+a+" 0 "+ +(d>I)+",1 "+b}var d=xd,e=gd,g=mf,f=$b,h=Nf;a.radius=function(b){if(!arguments.length)return g;g=na(b);return a};a.source=function(b){if(!arguments.length)return d;d=na(b);return a};a.target=function(b){if(!arguments.length)return e;e=na(b);return a};a.startAngle=function(b){if(!arguments.length)return f;f=na(b);return a};a.endAngle=function(b){if(!arguments.length)return h;
h=na(b);return a};return a};F.svg.diagonal=function(){function a(e,g){var f=b.call(this,e,g),h=c.call(this,e,g),l=(f.y+h.y)/2,f=[f,{x:f.x,y:l},{x:h.x,y:l},h],f=f.map(d);return"M"+f[0]+"C"+f[1]+" "+f[2]+" "+f[3]}var b=xd,c=gd,d=Cc;a.source=function(c){if(!arguments.length)return b;b=na(c);return a};a.target=function(b){if(!arguments.length)return c;c=na(b);return a};a.projection=function(b){if(!arguments.length)return d;d=b;return a};return a};F.svg.diagonal.radial=function(){var a=F.svg.diagonal(),
b=Cc,c=a.projection;a.projection=function(a){return arguments.length?c(nf(b=a)):b};return a};F.svg.symbol=function(){function a(d,e){return(Gh.get(b.call(this,d,e))||Be)(c.call(this,d,e))}var b=$g,c=Zg;a.type=function(c){if(!arguments.length)return b;b=na(c);return a};a.size=function(b){if(!arguments.length)return c;c=na(b);return a};return a};var Gh=F.map({circle:Be,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+
-3*a+"Z"},diamond:function(a){a=Math.sqrt(a/(2*Hh));var b=a*Hh;return"M0,"+-a+"L"+b+",0 0,"+a+" "+-b+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){a=Math.sqrt(a/Qg);var b=a*Qg/2;return"M0,"+b+"L"+a+","+-b+" "+-a+","+-b+"Z"},"triangle-up":function(a){a=Math.sqrt(a/Qg);var b=a*Qg/2;return"M0,"+-b+"L"+a+","+b+" "+-a+","+b+"Z"}});F.svg.symbolTypes=Gh.keys();var Qg=Math.sqrt(3),Hh=Math.tan(30*fa),Ab=[],vh=0,Fe,Cg;Ab.call=
Ga.call;Ab.empty=Ga.empty;Ab.node=Ga.node;Ab.size=Ga.size;F.transition=function(a){return arguments.length?Fe?a.transition():a:qf.transition()};F.transition.prototype=Ab;Ab.select=function(a){var b=this.id,c=[],d,e,g;a=z(a);for(var f=-1,h=this.length;++f<h;){c.push(d=[]);for(var l=this[f],m=-1,p=l.length;++m<p;)(g=l[m])&&(e=a.call(g,g.__data__,m,f))?("__data__"in g&&(e.__data__=g.__data__),vd(e,m,b,g.__transition__[b]),d.push(e)):d.push(null)}return kc(c,b)};Ab.selectAll=function(a){var b=this.id,
c=[],d,e,g,f;a=y(a);for(var h=-1,l=this.length;++h<l;)for(var m=this[h],p=-1,E=m.length;++p<E;)if(d=m[p]){f=d.__transition__[b];e=a.call(d,d.__data__,p,h);c.push(d=[]);for(var q=-1,r=e.length;++q<r;)(g=e[q])&&vd(g,q,b,f),d.push(g)}return kc(c,b)};Ab.filter=function(a){var b=[],c,d,e;"function"!==typeof a&&(a=M(a));for(var g=0,f=this.length;g<f;g++){b.push(c=[]);d=this[g];for(var h=0,l=d.length;h<l;h++)(e=d[h])&&a.call(e,e.__data__,h,g)&&c.push(e)}return kc(b,this.id)};Ab.tween=function(a,b){var c=
this.id;return 2>arguments.length?this.node().__transition__[c].tween.get(a):T(this,null==b?function(b){b.__transition__[c].tween.remove(a)}:function(d){d.__transition__[c].tween.set(a,b)})};Ab.attr=function(a,b){function c(){this.removeAttribute(h)}function d(){this.removeAttributeNS(h.space,h.local)}function e(a){return null==a?c:(a+="",function(){var b=this.getAttribute(h),c;return b!==a&&(c=f(b,a),function(a){this.setAttribute(h,c(a))})})}function g(a){return null==a?d:(a+="",function(){var b=
this.getAttributeNS(h.space,h.local),c;return b!==a&&(c=f(b,a),function(a){this.setAttributeNS(h.space,h.local,c(a))})})}if(2>arguments.length){for(b in a)this.attr(b,a[b]);return this}var f="transform"==a?wf:Fc,h=F.ns.qualify(a);return Pf(this,"attr."+a,b,h.local?g:e)};Ab.attrTween=function(a,b){function c(a,d){var g=b.call(this,a,d,this.getAttribute(e));return g&&function(a){this.setAttribute(e,g(a))}}function d(a,c){var g=b.call(this,a,c,this.getAttributeNS(e.space,e.local));return g&&function(a){this.setAttributeNS(e.space,
e.local,g(a))}}var e=F.ns.qualify(a);return this.tween("attr."+a,e.local?d:c)};Ab.style=function(a,b,c){function d(){this.style.removeProperty(a)}var e=arguments.length;if(3>e){if("string"!==typeof a){2>e&&(b="");for(c in a)this.style(c,a[c],b);return this}c=""}return Pf(this,"style."+a,b,function(b){return null==b?d:(b+="",function(){var d=Qa.getComputedStyle(this,null).getPropertyValue(a),e;return d!==b&&(e=Fc(d,b),function(b){this.style.setProperty(a,e(b),c)})})})};Ab.styleTween=function(a,b,c){3>
arguments.length&&(c="");return this.tween("style."+a,function(d,e){var g=b.call(this,d,e,Qa.getComputedStyle(this,null).getPropertyValue(a));return g&&function(b){this.style.setProperty(a,g(b),c)}})};Ab.text=function(a){return Pf(this,"text",a,of)};Ab.remove=function(){return this.each("end.transition",function(){var a;2>this.__transition__.count&&(a=this.parentNode)&&a.removeChild(this)})};Ab.ease=function(a){var b=this.id;if(1>arguments.length)return this.node().__transition__[b].ease;"function"!==
typeof a&&(a=F.ease.apply(F,arguments));return T(this,function(c){c.__transition__[b].ease=a})};Ab.delay=function(a){var b=this.id;return T(this,"function"===typeof a?function(c,d,e){c.__transition__[b].delay=+a.call(c,c.__data__,d,e)}:(a=+a,function(c){c.__transition__[b].delay=a}))};Ab.duration=function(a){var b=this.id;return T(this,"function"===typeof a?function(c,d,e){c.__transition__[b].duration=Math.max(1,a.call(c,c.__data__,d,e))}:(a=Math.max(1,a),function(c){c.__transition__[b].duration=
a}))};Ab.each=function(a,b){var c=this.id;if(2>arguments.length){var d=Cg,e=Fe;Fe=c;T(this,function(b,d,e){Cg=b.__transition__[c];a.call(b,b.__data__,d,e)});Cg=d;Fe=e}else T(this,function(d){d=d.__transition__[c];(d.event||(d.event=F.dispatch("start","end"))).on(a,b)});return this};Ab.transition=function(){for(var a=this.id,b=++vh,c=[],d,e,g,f,h=0,l=this.length;h<l;h++){c.push(d=[]);e=this[h];for(var m=0,p=e.length;m<p;m++){if(g=e[m])f=Object.create(g.__transition__[a]),f.delay+=f.duration,vd(g,m,
b,f);d.push(g)}}return kc(c,b)};F.svg.axis=function(){function a(m){m.each(function(){var a=F.select(this),m=this.__chart__||b,p=this.__chart__=b.copy(),E=null==h?p.ticks?p.ticks.apply(p,f):p.domain():h,q=null==l?p.tickFormat?p.tickFormat.apply(p,f):Aa:l,r=a.selectAll(".tick").data(E,p),E=r.enter().insert("g",".domain").attr("class","tick").style("opacity",1E-6),n=F.transition(r.exit()).style("opacity",1E-6).remove(),I=F.transition(r).style("opacity",1),t,y=ef(p),a=a.selectAll(".domain").data([0]),
a=(a.enter().append("path").attr("class","domain"),F.transition(a));E.append("line");E.append("text");var u=E.select("line"),ba=I.select("line"),q=r.select("text").text(q),r=E.select("text"),w=I.select("text");switch(c){case "bottom":t=ed;u.attr("y2",d);r.attr("y",Math.max(d,0)+g);ba.attr("x2",0).attr("y2",d);w.attr("x",0).attr("y",Math.max(d,0)+g);q.attr("dy",".71em").style("text-anchor","middle");a.attr("d","M"+y[0]+","+e+"V0H"+y[1]+"V"+e);break;case "top":t=ed;u.attr("y2",-d);r.attr("y",-(Math.max(d,
0)+g));ba.attr("x2",0).attr("y2",-d);w.attr("x",0).attr("y",-(Math.max(d,0)+g));q.attr("dy","0em").style("text-anchor","middle");a.attr("d","M"+y[0]+","+-e+"V0H"+y[1]+"V"+-e);break;case "left":t=zg;u.attr("x2",-d);r.attr("x",-(Math.max(d,0)+g));ba.attr("x2",-d).attr("y2",0);w.attr("x",-(Math.max(d,0)+g)).attr("y",0);q.attr("dy",".32em").style("text-anchor","end");a.attr("d","M"+-e+","+y[0]+"H0V"+y[1]+"H"+-e);break;case "right":t=zg,u.attr("x2",d),r.attr("x",Math.max(d,0)+g),ba.attr("x2",d).attr("y2",
0),w.attr("x",Math.max(d,0)+g).attr("y",0),q.attr("dy",".32em").style("text-anchor","start"),a.attr("d","M"+e+","+y[0]+"H0V"+y[1]+"H"+e)}if(p.rangeBand)var x=p,z=x.rangeBand()/2,m=p=function(a){return x(a)+z};else m.rangeBand?m=p:n.call(t,p);E.call(t,m);I.call(t,p)})}var b=F.scale.linear(),c=Ih,d=6,e=6,g=3,f=[10],h=null,l;a.scale=function(c){if(!arguments.length)return b;b=c;return a};a.orient=function(b){if(!arguments.length)return c;c=b in gi?b+"":Ih;return a};a.ticks=function(){if(!arguments.length)return f;
f=arguments;return a};a.tickValues=function(b){if(!arguments.length)return h;h=b;return a};a.tickFormat=function(b){if(!arguments.length)return l;l=b;return a};a.tickSize=function(b){var c=arguments.length;if(!c)return d;d=+b;e=+arguments[c-1];return a};a.innerTickSize=function(b){if(!arguments.length)return d;d=+b;return a};a.outerTickSize=function(b){if(!arguments.length)return e;e=+b;return a};a.tickPadding=function(b){if(!arguments.length)return g;g=+b;return a};a.tickSubdivide=function(){return arguments.length&&
a};return a};var Ih="bottom",gi={top:1,right:1,bottom:1,left:1};F.svg.brush=function(){function a(g){g.each(function(){var g=F.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",e).on("touchstart.brush",e),l=g.selectAll(".background").data([0]);l.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");g.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor",
"move");var m=g.selectAll(".resize").data(I,Aa);m.exit().remove();m.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return hi[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");m.style("display",a.empty()?"none":null);g=F.transition(g);l=F.transition(l);f&&(m=ef(f),l.attr("x",m[0]).attr("width",m[1]-m[0]),c(g));h&&(m=ef(h),
l.attr("y",m[0]).attr("height",m[1]-m[0]),d(g));b(g)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+l[+/e$/.test(a)]+","+m[+/^s/.test(a)]+")"})}function c(a){a.select(".extent").attr("x",l[0]);a.selectAll(".extent,.n>rect,.s>rect").attr("width",l[1]-l[0])}function d(a){a.select(".extent").attr("y",m[0]);a.selectAll(".extent,.e>rect,.w>rect").attr("height",m[1]-m[0])}function e(){function I(){var a=F.mouse(u),e=!1;hb&&(a[0]+=hb[0],a[1]+=hb[1]);fa||(F.event.altKey?
(C||(C=[(l[0]+l[1])/2,(m[0]+m[1])/2]),D[0]=l[+(a[0]<C[0])],D[1]=m[+(a[1]<C[1])]):C=null);B&&t(a,f,0)&&(c(x),e=!0);A&&t(a,h,1)&&(d(x),e=!0);e&&(b(x),w({type:"brush",mode:fa?"move":"resize"}))}function t(a,b,c){var d=ef(b);b=d[0];var e=d[1],d=D[c],g=c?m:l,f=g[1]-g[0];fa&&(b-=d,e-=f+d);a=(c?n:r)?Math.max(b,Math.min(e,a[c])):a[c];fa?b=(a+=d)+f:(C&&(d=Math.max(b,Math.min(e,2*C[c]-a))),d<a?(b=a,a=d):b=d);if(g[0]!=a||g[1]!=b)return c?E=null:p=null,g[0]=a,g[1]=b,!0}function y(){I();x.style("pointer-events",
"all").selectAll(".resize").style("display",a.empty()?"none":null);F.select("body").style("cursor",null);L.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);G();w({type:"brushend"})}var u=this,ba=F.select(F.event.target),w=g.of(u,arguments),x=F.select(u),z=ba.datum(),B=!/^(n|s)$/.test(z)&&f,A=!/^(e|w)$/.test(z)&&h,fa=ba.classed("extent"),G=K(),C,D=F.mouse(u),hb,L=F.select(Qa).on("keydown.brush",
function(){32==F.event.keyCode&&(fa||(C=null,D[0]-=l[1],D[1]-=m[1],fa=2),q())}).on("keyup.brush",function(){32==F.event.keyCode&&2==fa&&(D[0]+=l[1],D[1]+=m[1],fa=0,q())});if(F.event.changedTouches)L.on("touchmove.brush",I).on("touchend.brush",y);else L.on("mousemove.brush",I).on("mouseup.brush",y);x.interrupt().selectAll("*").interrupt();if(fa)D[0]=l[0]-D[0],D[1]=m[0]-D[1];else if(z){var J=+/w$/.test(z),z=+/^n/.test(z);hb=[l[1-J]-D[0],m[1-z]-D[1]];D[0]=l[J];D[1]=m[z]}else F.event.altKey&&(C=D.slice());
x.style("pointer-events","none").selectAll(".resize").style("display",null);F.select("body").style("cursor",ba.style("cursor"));w({type:"brushstart"});I()}var g=u(a,"brushstart","brush","brushend"),f=null,h=null,l=[0,0],m=[0,0],p,E,r=!0,n=!0,I=eh[0];a.event=function(a){a.each(function(){var a=g.of(this,arguments),b={x:l,y:m,i:p,j:E},c=this.__chart__||b;this.__chart__=b;Fe?F.select(this).transition().each("start.brush",function(){p=c.i;E=c.j;l=c.x;m=c.y;a({type:"brushstart"})}).tween("brush:brush",
function(){var c=fe(l,b.x),d=fe(m,b.y);p=E=null;return function(e){l=b.x=c(e);m=b.y=d(e);a({type:"brush",mode:"resize"})}}).each("end.brush",function(){p=b.i;E=b.j;a({type:"brush",mode:"resize"});a({type:"brushend"})}):(a({type:"brushstart"}),a({type:"brush",mode:"resize"}),a({type:"brushend"}))})};a.x=function(b){if(!arguments.length)return f;f=b;I=eh[!f<<1|!h];return a};a.y=function(b){if(!arguments.length)return h;h=b;I=eh[!f<<1|!h];return a};a.clamp=function(b){if(!arguments.length)return f&&
h?[r,n]:f?r:h?n:null;f&&h?(r=!!b[0],n=!!b[1]):f?r=!!b:h&&(n=!!b);return a};a.extent=function(b){var c,d,e,g,q;if(!arguments.length)return f&&(p?(c=p[0],d=p[1]):(c=l[0],d=l[1],f.invert&&(c=f.invert(c),d=f.invert(d)),d<c&&(q=c,c=d,d=q))),h&&(E?(e=E[0],g=E[1]):(e=m[0],g=m[1],h.invert&&(e=h.invert(e),g=h.invert(g)),g<e&&(q=e,e=g,g=q))),f&&h?[[c,e],[d,g]]:f?[c,d]:h&&[e,g];f&&(c=b[0],d=b[1],h&&(c=c[0],d=d[0]),p=[c,d],f.invert&&(c=f(c),d=f(d)),d<c&&(q=c,c=d,d=q),c!=l[0]||d!=l[1])&&(l=[c,d]);h&&(e=b[0],g=
b[1],f&&(e=e[1],g=g[1]),E=[e,g],h.invert&&(e=h(e),g=h(g)),g<e&&(q=e,e=g,g=q),e!=m[0]||g!=m[1])&&(m=[e,g]);return a};a.clear=function(){a.empty()||(l=[0,0],m=[0,0],p=E=null);return a};a.empty=function(){return!!f&&l[0]==l[1]||!!h&&m[0]==m[1]};return F.rebind(a,g,"on")};var hi={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},eh=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],fh=ha.format=xh.timeFormat,Jh=fh.utc,Kh=
Jh("%Y-%m-%dT%H:%M:%S.%LZ");fh.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Qf:Kh;Qf.parse=function(a){a=new Date(a);return isNaN(a)?null:a};Qf.toString=Kh.toString;ha.second=xa(function(a){return new Lb(1E3*Math.floor(a/1E3))},function(a,b){a.setTime(a.getTime()+1E3*Math.floor(b))},function(a){return a.getSeconds()});ha.seconds=ha.second.range;ha.seconds.utc=ha.second.utc.range;ha.minute=xa(function(a){return new Lb(6E4*Math.floor(a/6E4))},function(a,b){a.setTime(a.getTime()+
6E4*Math.floor(b))},function(a){return a.getMinutes()});ha.minutes=ha.minute.range;ha.minutes.utc=ha.minute.utc.range;ha.hour=xa(function(a){var b=a.getTimezoneOffset()/60;return new Lb(36E5*(Math.floor(a/36E5-b)+b))},function(a,b){a.setTime(a.getTime()+36E5*Math.floor(b))},function(a){return a.getHours()});ha.hours=ha.hour.range;ha.hours.utc=ha.hour.utc.range;ha.month=xa(function(a){a=ha.day(a);a.setDate(1);return a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()});ha.months=
ha.month.range;ha.months.utc=ha.month.utc.range;var Ag=[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],gh=[[ha.second,1],[ha.second,5],[ha.second,15],[ha.second,30],[ha.minute,1],[ha.minute,5],[ha.minute,15],[ha.minute,30],[ha.hour,1],[ha.hour,3],[ha.hour,6],[ha.hour,12],[ha.day,1],[ha.day,2],[ha.week,1],[ha.month,1],[ha.month,3],[ha.year,1]],ii=fh.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],
["%I:%M",function(a){return a.getMinutes()}],["%I %p",function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",Db]]),Qh={range:function(a,b,c){return F.range(+a,+b,c).map(xb)},floor:Aa,ceil:Aa};gh.year=ha.year;ha.scale=function(){return Rf(F.scale.linear(),gh,ii)};var Lh=gh.map(function(a){return[a[0].utc,a[1]]}),ji=Jh.multi([[".%L",function(a){return a.getUTCMilliseconds()}],
[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],["%Y",Db]]);Lh.year=ha.year.utc;ha.scale.utc=function(){return Rf(F.scale.linear(),Lh,ji)};F.text=db(function(a){return a.responseText});F.json=function(a,b){return Ma(a,"application/json",ah,b)};F.html=function(a,
b){return Ma(a,"text/html",Ce,b)};F.xml=db(function(a){return a.responseXML});"function"===typeof define&&define.amd?define(F):"object"===typeof module&&module.exports?module.exports=F:this.d3=F}();function str_repeat(a,b){for(var c=[];0<b;c[--b]=a);return c.join("")}
function sprintf(){for(var a=0,b,c=arguments[a++],e=[],d,f,n;c;){if(d=/^[^\x25]+/.exec(c))e.push(d[0]);else if(d=/^\x25{2}/.exec(c))e.push("%");else if(d=/^\x25(?:(\d+)\$)?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(c)){if(null==(b=arguments[d[1]||a++])||void 0==b)throw"Too few arguments.";if(/[^s]/.test(d[7])&&"number"!=typeof b)throw"Expecting number but found "+typeof b;switch(d[7]){case "b":b=b.toString(2);break;case "c":b=String.fromCharCode(b);break;case "d":b=parseInt(b);break;
case "e":b=d[6]?b.toExponential(d[6]):b.toExponential();break;case "f":b=d[6]?parseFloat(b).toFixed(d[6]):parseFloat(b);break;case "o":b=b.toString(8);break;case "s":b=(b=String(b))&&d[6]?b.substring(0,d[6]):b;break;case "u":b=Math.abs(b);break;case "x":b=b.toString(16);break;case "X":b=b.toString(16).toUpperCase()}b=/[def]/.test(d[7])&&d[2]&&0<=b?"+"+b:b;f=d[3]?"0"==d[3]?"0":d[3].charAt(1):" ";n=d[5]-String(b).length-0;f=d[5]?str_repeat(f,n):"";e.push(""+(d[4]?b+f:f+b))}else throw"Huh ?!";c=c.substring(d[0].length)}return e.join("")}
(function(a,b){var c,e,d,f,n,h,g,l,m,p,t,r,q,w,u,x,z,y,B,A,C,D,H,G;c=function(a){return new c.prototype.init(a)};"undefined"!==typeof require&&"undefined"!==typeof exports&&"undefined"!==typeof module?module.exports=c:a.Globalize=c;c.cultures={};c.prototype={constructor:c,init:function(a){this.cultures=c.cultures;this.cultureSelector=a;return this}};c.prototype.init.prototype=c.prototype;c.cultures["default"]={name:"en",englishName:"English",nativeName:"English",isRTL:!1,language:"en",numberFormat:{pattern:["-n"],
decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",NaN:"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),namesAbbr:"Sun Mon Tue Wed Thu Fri Sat".split(" "),
namesShort:"Su Mo Tu We Th Fr Sa".split(" ")},months:{names:"January February March April May June July August September October November December ".split(" "),namesAbbr:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec ".split(" ")},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",
S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}},messages:{}};c.cultures["default"].calendar=c.cultures["default"].calendars.standard;c.cultures.en=c.cultures["default"];c.cultureSelector="en";e=/^0x[a-f0-9]+$/i;d=/^[+\-]?infinity$/i;f=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/;n=/^\s+|\s+$/g;h=function(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1};g=function(a,b){return a.substr(a.length-b.length)===b};l=function(){var a,c,d,e,g,f=arguments[0]||{},h=1,q=arguments.length,
r=!1;"boolean"===typeof f&&(r=f,f=arguments[1]||{},h=2);for("object"===typeof f||p(f)||(f={});h<q;h++)if(null!=(a=arguments[h]))for(c in a)d=f[c],e=a[c],f!==e&&(r&&e&&(t(e)||(g=m(e)))?(g?(g=!1,d=d&&m(d)?d:[]):d=d&&t(d)?d:{},f[c]=l(r,d,e)):e!==b&&(f[c]=e));return f};m=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)};p=function(a){return"[object Function]"===Object.prototype.toString.call(a)};t=function(a){return"[object Object]"===Object.prototype.toString.call(a)};
r=function(a,b){return 0===a.indexOf(b)};q=function(a){return(a+"").replace(n,"")};w=function(a){return isNaN(a)?NaN:Math[0>a?"ceil":"floor"](a)};u=function(a,b,c){var d;for(d=a.length;d<b;d+=1)a=c?"0"+a:a+"0";return a};x=function(a,b){for(var c=0,d=!1,e=0,g=a.length;e<g;e++){var f=a.charAt(e);switch(f){case "'":d?b.push("'"):c++;d=!1;break;case "\\":d&&b.push("\\");d=!d;break;default:b.push(f),d=!1}}return c};z=function(a,b){b=b||"F";var c;c=a.patterns;var d=b.length;if(1===d){c=c[b];if(!c)throw"Invalid date format string '"+
b+"'.";b=c}else 2===d&&"%"===b.charAt(0)&&(b=b.charAt(1));return b};y=function(a,b,c){function d(a,b){var c;c=a+"";return 1<b&&c.length<b?(c=q[b-2]+c,c.substr(c.length-b,b)):c}function e(){if(r||n)return r;r=t.test(b);n=!0;return r}function g(a,b){if(B)return B[b];switch(b){case 0:return a.getFullYear();case 1:return a.getMonth();case 2:return a.getDate();default:throw"Invalid part value "+b;}}var f=c.calendar,h=f.convert;if(!b||!b.length||"i"===b){if(c&&c.name.length)if(h)c=y(a,f.patterns.F,c);else{c=
new Date(a.getTime());var l=C(a,f.eras);c.setFullYear(D(a,f,l));c=c.toLocaleString()}else c=a.toString();return c}var l=f.eras,m="s"===b;b=z(f,b);c=[];var p,q=["0","00","000"],r,n,t=/([^d]|^)(d|dd)([^d]|$)/g,u=0,w=A(),B;for(!m&&h&&(B=h.fromGregorian(a));;){p=w.lastIndex;h=w.exec(b);p=b.slice(p,h?h.index:b.length);u+=x(p,c);if(!h)break;if(u%2)c.push(h[0]);else switch(p=h[0],h=p.length,p){case "ddd":case "dddd":c.push((3===h?f.days.namesAbbr:f.days.names)[a.getDay()]);break;case "d":case "dd":r=!0;
c.push(d(g(a,2),h));break;case "MMM":case "MMMM":p=g(a,1);c.push(f.monthsGenitive&&e()?f.monthsGenitive[3===h?"namesAbbr":"names"][p]:f.months[3===h?"namesAbbr":"names"][p]);break;case "M":case "MM":c.push(d(g(a,1)+1,h));break;case "y":case "yy":case "yyyy":p=B?B[0]:D(a,f,C(a,l),m);4>h&&(p%=100);c.push(d(p,h));break;case "h":case "hh":p=a.getHours()%12;0===p&&(p=12);c.push(d(p,h));break;case "H":case "HH":c.push(d(a.getHours(),h));break;case "m":case "mm":c.push(d(a.getMinutes(),h));break;case "s":case "ss":c.push(d(a.getSeconds(),
h));break;case "t":case "tt":p=12>a.getHours()?f.AM?f.AM[0]:" ":f.PM?f.PM[0]:" ";c.push(1===h?p.charAt(0):p);break;case "f":case "ff":case "fff":c.push(d(a.getMilliseconds(),3).substr(0,h));break;case "z":case "zz":p=a.getTimezoneOffset()/60;c.push((0>=p?"+":"-")+d(Math.floor(Math.abs(p)),h));break;case "zzz":p=a.getTimezoneOffset()/60;c.push((0>=p?"+":"-")+d(Math.floor(Math.abs(p)),2)+":"+d(Math.abs(a.getTimezoneOffset()%60),2));break;case "g":case "gg":f.eras&&c.push(f.eras[C(a,l)].name);break;
case "/":c.push(f["/"]);break;default:throw"Invalid date format pattern '"+p+"'.";}}return c.join("")};(function(){var a;a=function(a,b,c){var d=c.groupSizes,e=d[0],g=1,f=Math.pow(10,b),f=Math.round(a*f)/f;isFinite(f)||(f=a);a=f+"";var f="",f=a.split(/e/i),h=1<f.length?parseInt(f[1],10):0;a=f[0];f=a.split(".");a=f[0];f=1<f.length?f[1]:"";0<h?(f=u(f,h,!1),a+=f.slice(0,h),f=f.substr(h)):0>h&&(h=-h,a=u(a,h+1,!0),f=a.slice(-h,a.length)+f,a=a.slice(0,-h));f=0<b?c["."]+(f.length>b?f.slice(0,b):u(f,b)):
"";b=a.length-1;c=c[","];for(h="";0<=b;){if(0===e||e>b)return a.slice(0,b+1)+(h.length?c+h+f:f);h=a.slice(b-e+1,b+1)+(h.length?c+h:"");b-=e;g<d.length&&(e=d[g],g++)}return a.slice(0,b+1)+c+h+f};B=function(b,c,d){if(!isFinite(b))return Infinity===b?d.numberFormat.positiveInfinity:-Infinity===b?d.numberFormat.negativeInfinity:d.numberFormat.NaN;if(!c||"i"===c)return d.name.length?b.toLocaleString():b.toString();c=c||"D";d=d.numberFormat;var e=Math.abs(b),g=-1;1<c.length&&(g=parseInt(c.slice(1),10));
var f=c.charAt(0).toUpperCase(),h;switch(f){case "D":c="n";e=w(e);-1!==g&&(e=u(""+e,g,!0));0>b&&(e="-"+e);break;case "N":h=d;case "C":h=h||d.currency;case "P":h=h||d.percent;c=0>b?h.pattern[0]:h.pattern[1]||"n";-1===g&&(g=h.decimals);e=a(e*("P"===f?100:1),g,h);break;default:throw"Bad number format specifier: "+f;}b=/n|\$|-|%/g;for(h="";;){g=b.lastIndex;f=b.exec(c);h+=c.slice(g,f?f.index:c.length);if(!f)break;switch(f[0]){case "n":h+=e;break;case "$":h+=d.currency.symbol;break;case "-":/[1-9]/.test(e)&&
(h+=d["-"]);break;case "%":h+=d.percent.symbol}}return h}})();A=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g};C=function(a,b){if(!b)return 0;for(var c,d=a.getTime(),e=0,g=b.length;e<g;e++)if(c=b[e].start,null===c||d>=c)return e;return 0};D=function(a,b,c,d){a=a.getFullYear();!d&&b.eras&&(a-=b.eras[c].offset);return a};(function(){var a,b,c,d,e,g,f;a=function(a,b){if(100>b){var c=new Date,d=C(c),c=D(c,a,d),d=a.twoDigitYearMax,d="string"===
typeof d?(new Date).getFullYear()%100+parseInt(d,10):d;b+=c-c%100;b>d&&(b-=100)}return b};b=function(a,b,c){var d=a.days,e=a._upperDays;e||(a._upperDays=e=[f(d.names),f(d.namesAbbr),f(d.namesShort)]);b=g(b);c?(a=h(e[1],b),-1===a&&(a=h(e[2],b))):a=h(e[0],b);return a};c=function(a,b,c){var d=a.months,e=a.monthsGenitive||a.months,l=a._upperMonths,m=a._upperMonthsGen;l||(a._upperMonths=l=[f(d.names),f(d.namesAbbr)],a._upperMonthsGen=m=[f(e.names),f(e.namesAbbr)]);b=g(b);a=h(c?l[1]:l[0],b);0>a&&(a=h(c?
m[1]:m[0],b));return a};d=function(a,b){var c=a._parseRegExp;if(c){var d=c[b];if(d)return d}else a._parseRegExp=c={};for(var d=z(a,b).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),e=["^"],g=[],f=0,h=0,l=A(),m;null!==(m=l.exec(d));){var p=d.slice(f,m.index),f=l.lastIndex,h=h+x(p,e);if(h%2)e.push(m[0]);else{var p=m[0],q=p.length;switch(p){case "dddd":case "ddd":case "MMMM":case "MMM":case "gg":case "g":p="(\\D+)";break;case "tt":case "t":p="(\\D*)";break;case "yyyy":case "fff":case "ff":case "f":p=
"(\\d{"+q+"})";break;case "dd":case "d":case "MM":case "M":case "yy":case "y":case "HH":case "H":case "hh":case "h":case "mm":case "m":case "ss":case "s":p="(\\d\\d?)";break;case "zzz":p="([+-]?\\d\\d?:\\d{2})";break;case "zz":case "z":p="([+-]?\\d\\d?)";break;case "/":p="(\\/)";break;default:throw"Invalid date format pattern '"+p+"'.";}p&&e.push(p);g.push(m[0])}}x(d.slice(f),e);e.push("$");d={regExp:e.join("").replace(/\s+/g,"\\s+"),groups:g};return c[b]=d};e=function(a,b,c){return a<b||a>c};g=function(a){return a.split("\u00a0").join(" ").toUpperCase()};
f=function(a){for(var b=[],c=0,d=a.length;c<d;c++)b[c]=g(a[c]);return b};H=function(g,f,h){g=q(g);h=h.calendar;f=d(h,f);var l=(new RegExp(f.regExp)).exec(g);if(null===l)return null;var m=f.groups,p=f=g=null,n=null,t=null,y=0,u,w=0,x=0,z=0;u=null;for(var B=!1,A=0,G=m.length;A<G;A++){var D=l[A+1];if(D){var C=m[A],H=C.length,O=parseInt(D,10);switch(C){case "dd":case "d":n=O;if(e(n,1,31))return null;break;case "MMM":case "MMMM":p=c(h,D,3===H);if(e(p,0,11))return null;break;case "M":case "MM":p=O-1;if(e(p,
0,11))return null;break;case "y":case "yy":case "yyyy":f=4>H?a(h,O):O;if(e(f,0,9999))return null;break;case "h":case "hh":y=O;12===y&&(y=0);if(e(y,0,11))return null;break;case "H":case "HH":y=O;if(e(y,0,23))return null;break;case "m":case "mm":w=O;if(e(w,0,59))return null;break;case "s":case "ss":x=O;if(e(x,0,59))return null;break;case "tt":case "t":B=h.PM&&(D===h.PM[0]||D===h.PM[1]||D===h.PM[2]);if(!B&&(!h.AM||D!==h.AM[0]&&D!==h.AM[1]&&D!==h.AM[2]))return null;break;case "f":case "ff":case "fff":z=
O*Math.pow(10,3-H);if(e(z,0,999))return null;break;case "ddd":case "dddd":t=b(h,D,3===H);if(e(t,0,6))return null;break;case "zzz":C=D.split(/:/);if(2!==C.length)return null;u=parseInt(C[0],10);if(e(u,-12,13))return null;C=parseInt(C[1],10);if(e(C,0,59))return null;u=60*u+(r(D,"-")?-C:C);break;case "z":case "zz":u=O;if(e(u,-12,13))return null;u*=60;break;case "g":case "gg":if(!D||!h.eras)return null;D=q(D.toLowerCase());C=0;for(H=h.eras.length;C<H;C++)if(D===h.eras[C].name.toLowerCase()){g=C;break}if(null===
g)return null}}}l=new Date;m=(A=h.convert)?A.fromGregorian(l)[0]:l.getFullYear();null===f?f=m:h.eras&&(f+=h.eras[g||0].offset);null===p&&(p=0);null===n&&(n=1);if(A){if(l=A.toGregorian(f,p,n),null===l)return null}else if(l.setFullYear(f,p,n),l.getDate()!==n||null!==t&&l.getDay()!==t)return null;B&&12>y&&(y+=12);l.setHours(y,w,x,z);null!==u&&(h=l.getMinutes()-(u+l.getTimezoneOffset()),l.setHours(l.getHours()+parseInt(h/60,10),h%60));return l}})();G=function(a,b,c){var d=b["-"];b=b["+"];var e;switch(c){case "n -":d=
" "+d,b=" "+b;case "n-":g(a,d)?e=["-",a.substr(0,a.length-d.length)]:g(a,b)&&(e=["+",a.substr(0,a.length-b.length)]);break;case "- n":d+=" ",b+=" ";case "-n":r(a,d)?e=["-",a.substr(d.length)]:r(a,b)&&(e=["+",a.substr(b.length)]);break;case "(n)":r(a,"(")&&g(a,")")&&(e=["-",a.substr(1,a.length-2)])}return e||["",a]};c.prototype.findClosestCulture=function(a){return c.findClosestCulture.call(this,a)};c.prototype.format=function(a,b,d){return c.format.call(this,a,b,d)};c.prototype.localize=function(a,
b){return c.localize.call(this,a,b)};c.prototype.parseInt=function(a,b,d){return c.parseInt.call(this,a,b,d)};c.prototype.parseFloat=function(a,b,d){return c.parseFloat.call(this,a,b,d)};c.prototype.culture=function(a){return c.culture.call(this,a)};c.addCultureInfo=function(a,b,c){var d={},e=!1;"string"!==typeof a?(c=a,a=this.culture().name,d=this.cultures[a]):"string"!==typeof b?(c=b,e=null==this.cultures[a],d=this.cultures[a]||this.cultures["default"]):(e=!0,d=this.cultures[b]);this.cultures[a]=
l(!0,{},d,c);e&&(this.cultures[a].calendar=this.cultures[a].calendars.standard)};c.findClosestCulture=function(a){var b;if(!a)return this.findClosestCulture(this.cultureSelector)||this.cultures["default"];"string"===typeof a&&(a=a.split(","));if(m(a)){var c,d=this.cultures,e=a,g,f=e.length,h=[];for(g=0;g<f;g++)a=q(e[g]),a=a.split(";"),c=q(a[0]),1===a.length?a=1:(a=q(a[1]),0===a.indexOf("q=")?(a=a.substr(2),a=parseFloat(a),a=isNaN(a)?0:a):a=1),h.push({lang:c,pri:a});h.sort(function(a,b){return a.pri<
b.pri?1:a.pri>b.pri?-1:0});for(g=0;g<f;g++)if(c=h[g].lang,b=d[c])return b;for(g=0;g<f;g++){c=h[g].lang;do{e=c.lastIndexOf("-");if(-1===e)break;c=c.substr(0,e);if(b=d[c])return b}while(1)}for(g=0;g<f;g++){c=h[g].lang;for(var l in d)if(e=d[l],e.language==c)return e}}else if("object"===typeof a)return a;return b||null};c.format=function(a,b,c){c=this.findClosestCulture(c);a instanceof Date?a=y(a,b,c):"number"===typeof a&&(a=B(a,b,c));return a};c.localize=function(a,b){return this.findClosestCulture(b).messages[a]||
this.cultures["default"].messages[a]};c.parseDate=function(a,b,c){c=this.findClosestCulture(c);var d,e;if(b){if("string"===typeof b&&(b=[b]),b.length){e=0;for(var g=b.length;e<g;e++){var f=b[e];if(f&&(d=H(a,f,c)))break}}}else for(e in b=c.calendar.patterns,b)if(d=H(a,b[e],c))break;return d||null};c.parseInt=function(a,b,d){return w(c.parseFloat(a,b,d))};c.parseFloat=function(a,b,c){"number"!==typeof b&&(c=b,b=10);var g=this.findClosestCulture(c);c=NaN;var h=g.numberFormat;-1<a.indexOf(g.numberFormat.currency.symbol)&&
(a=a.replace(g.numberFormat.currency.symbol,""),a=a.replace(g.numberFormat.currency["."],g.numberFormat["."]));-1<a.indexOf(g.numberFormat.percent.symbol)&&(a=a.replace(g.numberFormat.percent.symbol,""));a=a.replace(/ /g,"");if(d.test(a))c=parseFloat(a);else if(!b&&e.test(a))c=parseInt(a,16);else{g=G(a,h,h.pattern[0]);b=g[0];g=g[1];""===b&&"(n)"!==h.pattern[0]&&(g=G(a,h,"(n)"),b=g[0],g=g[1]);""===b&&"-n"!==h.pattern[0]&&(g=G(a,h,"-n"),b=g[0],g=g[1]);b=b||"+";var l;a=g.indexOf("e");0>a&&(a=g.indexOf("E"));
0>a?(l=g,a=null):(l=g.substr(0,a),a=g.substr(a+1));var m=h["."],p=l.indexOf(m);0>p?(g=l,l=null):(g=l.substr(0,p),l=l.substr(p+m.length));m=h[","];g=g.split(m).join("");p=m.replace(/\u00A0/g," ");m!==p&&(g=g.split(p).join(""));b+=g;null!==l&&(b+="."+l);null!==a&&(h=G(a,h,"-n"),b+="e"+(h[0]||"+")+h[1]);f.test(b)&&(c=parseFloat(b))}return c};c.culture=function(a){"undefined"!==typeof a&&(this.cultureSelector=a);return this.findClosestCulture(a)||this.cultures["default"]}})(this);
Array.indexOf||(Array.prototype.indexOf=function(a,b){for(var c=b||0;c<this.length;c++)if(this[c]===a)return c;return-1});
var Parser=function(a){function b(a){function b(){}b.prototype=a;return new b}function c(a,b,c,d){this.type_=a;this.index_=b||0;this.prio_=c||0;this.number_=void 0!==d&&null!==d?d:0;this.toString=function(){switch(this.type_){case 0:return this.number_;case 1:case 2:case 3:return this.index_;case 4:return"CALL";default:return"Invalid Token"}}}function e(a,b,c,d){this.tokens=a;this.ops1=b;this.ops2=c;this.functions=d}function d(a){return"string"===typeof a?(x.lastIndex=0,x.test(a)?"'"+a.replace(x,
function(a){var b=z[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+"'":"'"+a+"'"):a}function f(a,b){return Number(a)+Number(b)}function n(a,b){return a-b}function h(a,b){return a*b}function g(a,b){return a/b}function l(a,b){return a%b}function m(a,b){return""+a+b}function p(a){return-a}function t(a){return Math.random()*(a||1)}function r(a){for(var b=a=Math.floor(a);1<a;)b*=--a;return b}function q(a,b){return Math.sqrt(a*a+b*b)}function w(a,b){if("[object Array]"!=
Object.prototype.toString.call(a))return[a,b];a=a.slice();a.push(b);return a}function u(){this.success=!1;this.expression=this.errormsg="";this.tmpprio=this.tokenindex=this.tokenprio=this.tokennumber=this.pos=0;this.ops1={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sqrt:Math.sqrt,log:Math.log,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,"-":p,exp:Math.exp};this.ops2={"+":f,"-":n,"*":h,"/":g,"%":l,"^":Math.pow,",":w,"||":m};this.functions={random:t,
fac:r,min:Math.min,max:Math.max,pyt:q,pow:Math.pow,atan2:Math.atan2};this.consts={E:Math.E,PI:Math.PI}}var x=/[\\\'\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,z={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"};e.prototype={simplify:function(a){a=a||{};for(var d=[],g=[],f,h,l,m=this.tokens.length,p=0,p=0;p<m;p++)if(l=this.tokens[p],f=l.type_,0===f)d.push(l);else if(3===f&&l.index_ in a)l=new c(0,
0,0,a[l.index_]),d.push(l);else if(2===f&&1<d.length)h=d.pop(),f=d.pop(),l=this.ops2[l.index_],l=new c(0,0,0,l(f.number_,h.number_)),d.push(l);else if(1===f&&0<d.length)f=d.pop(),l=this.ops1[l.index_],l=new c(0,0,0,l(f.number_)),d.push(l);else{for(;0<d.length;)g.push(d.shift());g.push(l)}for(;0<d.length;)g.push(d.shift());return new e(g,b(this.ops1),b(this.ops2),b(this.functions))},substitute:function(a,d){d instanceof e||(d=(new u).parse(String(d)));for(var g=[],f=this.tokens.length,h,l=0,l=0;l<
f;l++)if(h=this.tokens[l],3===h.type_&&h.index_===a)for(h=0;h<d.tokens.length;h++){var m=d.tokens[h],m=new c(m.type_,m.index_,m.prio_,m.number_);g.push(m)}else g.push(h);return new e(g,b(this.ops1),b(this.ops2),b(this.functions))},evaluate:function(a){a=a||{};for(var b=[],c,d,e,g=this.tokens.length,f=0,f=0;f<g;f++)if(e=this.tokens[f],c=e.type_,0===c)b.push(e.number_);else if(2===c)d=b.pop(),c=b.pop(),e=this.ops2[e.index_],b.push(e(c,d));else if(3===c)if(e.index_ in a)b.push(a[e.index_]);else if(e.index_ in
this.functions)b.push(this.functions[e.index_]);else throw Error("undefined variable: "+e.index_);else if(1===c)c=b.pop(),e=this.ops1[e.index_],b.push(e(c));else if(4===c)if(c=b.pop(),e=b.pop(),e.apply&&e.call)"[object Array]"==Object.prototype.toString.call(c)?b.push(e.apply(void 0,c)):b.push(e.call(void 0,c));else throw Error(e+" is not a function");else throw Error("invalid Expression");if(1<b.length)throw Error("invalid Expression (parity)");return b[0]},toString:function(a){for(var b=[],c,e,
g,f=this.tokens.length,h=0,h=0;h<f;h++)if(g=this.tokens[h],c=g.type_,0===c)b.push(d(g.number_));else if(2===c)e=b.pop(),c=b.pop(),g=g.index_,a&&"^"==g?b.push("Math.pow("+c+","+e+")"):b.push("("+c+g+e+")");else if(3===c)b.push(g.index_);else if(1===c)c=b.pop(),g=g.index_,"-"===g?b.push("("+g+c+")"):b.push(g+"("+c+")");else if(4===c)c=b.pop(),g=b.pop(),b.push(g+"("+c+")");else throw Error("invalid Expression");if(1<b.length)throw Error("invalid Expression (parity)");return b[0]},variables:function(){for(var a=
this.tokens.length,b=[],c=0;c<a;c++){var d=this.tokens[c];3===d.type_&&-1==b.indexOf(d.index_)&&b.push(d.index_)}return b},toJSFunction:function(a,b){return new Function(a,"with(Parser.values) { return "+this.simplify(b).toString(!0)+"; }")}};u.parse=function(a){return(new u).parse(a)};u.evaluate=function(a,b){return u.parse(a).evaluate(b)};u.Expression=e;u.values={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sqrt:Math.sqrt,log:Math.log,abs:Math.abs,ceil:Math.ceil,
floor:Math.floor,round:Math.round,random:t,fac:r,exp:Math.exp,min:Math.min,max:Math.max,pyt:q,pow:Math.pow,atan2:Math.atan2,E:Math.E,PI:Math.PI};u.prototype={parse:function(a){this.errormsg="";this.success=!0;var d=[],g=[];this.tmpprio=0;var f=77,h=0;this.expression=a;for(this.pos=0;this.pos<this.expression.length;)this.isOperator()?this.isSign()&&f&64?(this.isNegativeSign()&&(this.tokenprio=2,this.tokenindex="-",h++,this.addfunc(g,d,1)),f=77):this.isComment()||(0===(f&2)&&this.error_parsing(this.pos,
"unexpected operator"),h+=2,this.addfunc(g,d,2),f=77):this.isNumber()?(0===(f&1)&&this.error_parsing(this.pos,"unexpected number"),a=new c(0,0,0,this.tokennumber),g.push(a),f=50):this.isString()?(0===(f&1)&&this.error_parsing(this.pos,"unexpected string"),a=new c(0,0,0,this.tokennumber),g.push(a),f=50):this.isLeftParenth()?(0===(f&8)&&this.error_parsing(this.pos,'unexpected "("'),f&128&&(h+=2,this.tokenprio=-2,this.tokenindex=-1,this.addfunc(g,d,4)),f=333):this.isRightParenth()?(f&256?(a=new c(0,
0,0,[]),g.push(a)):0===(f&16)&&this.error_parsing(this.pos,'unexpected ")"'),f=186):this.isComma()?(0===(f&32)&&this.error_parsing(this.pos,'unexpected ","'),this.addfunc(g,d,2),h+=2,f=77):this.isConst()?(0===(f&1)&&this.error_parsing(this.pos,"unexpected constant"),a=new c(0,0,0,this.tokennumber),g.push(a),f=50):this.isOp2()?(0===(f&4)&&this.error_parsing(this.pos,"unexpected function"),this.addfunc(g,d,2),h+=2,f=8):this.isOp1()?(0===(f&4)&&this.error_parsing(this.pos,"unexpected function"),this.addfunc(g,
d,1),h++,f=8):this.isVar()?(0===(f&1)&&this.error_parsing(this.pos,"unexpected variable"),a=new c(3,this.tokenindex,0,0),g.push(a),f=186):this.isWhite()||(""===this.errormsg?this.error_parsing(this.pos,"unknown character"):this.error_parsing(this.pos,this.errormsg));for((0>this.tmpprio||10<=this.tmpprio)&&this.error_parsing(this.pos,'unmatched "()"');0<d.length;)a=d.pop(),g.push(a);h+1!==g.length&&this.error_parsing(this.pos,"parity");return new e(g,b(this.ops1),b(this.ops2),b(this.functions))},evaluate:function(a,
b){return this.parse(a).evaluate(b)},error_parsing:function(a,b){this.success=!1;this.errormsg="parse error [column "+a+"]: "+b;throw Error(this.errormsg);},addfunc:function(a,b,d){for(d=new c(d,this.tokenindex,this.tokenprio+this.tmpprio,0);0<b.length;)if(d.prio_<=b[b.length-1].prio_)a.push(b.pop());else break;b.push(d)},isNumber:function(){for(var a=!1,b="";this.pos<this.expression.length;){var c=this.expression.charCodeAt(this.pos);if(48<=c&&57>=c||46===c)b+=this.expression.charAt(this.pos),this.pos++,
this.tokennumber=parseFloat(b),a=!0;else break}return a},unescape:function(a,b){for(var c=[],d=!1,e=0;e<a.length;e++){var g=a.charAt(e);if(d){switch(g){case "'":c.push("'");break;case "\\":c.push("\\");break;case "/":c.push("/");break;case "b":c.push("\b");break;case "f":c.push("\f");break;case "n":c.push("\n");break;case "r":c.push("\r");break;case "t":c.push("\t");break;case "u":d=parseInt(a.substring(e+1,e+5),16);c.push(String.fromCharCode(d));e+=4;break;default:throw this.error_parsing(b+e,"Illegal escape sequence: '\\"+
g+"'");}d=!1}else"\\"==g?d=!0:c.push(g)}return c.join("")},isString:function(){var a=!1,b="",c=this.pos;if(this.pos<this.expression.length&&"'"==this.expression.charAt(this.pos))for(this.pos++;this.pos<this.expression.length;)if("'"!=this.expression.charAt(this.pos)||"\\"==b.slice(-1))b+=this.expression.charAt(this.pos),this.pos++;else{this.pos++;this.tokennumber=this.unescape(b,c);a=!0;break}return a},isConst:function(){var a,b;for(b in this.consts){var c=b.length;a=this.expression.substr(this.pos,
c);if(b===a)return this.tokennumber=this.consts[b],this.pos+=c,!0}return!1},isOperator:function(){var a=this.expression.charCodeAt(this.pos);if(43===a)this.tokenprio=0,this.tokenindex="+";else if(45===a)this.tokenprio=0,this.tokenindex="-";else if(124===a)if(124===this.expression.charCodeAt(this.pos+1))this.pos++,this.tokenprio=0,this.tokenindex="||";else return!1;else if(42===a)this.tokenprio=1,this.tokenindex="*";else if(47===a)this.tokenprio=2,this.tokenindex="/";else if(37===a)this.tokenprio=
2,this.tokenindex="%";else if(94===a)this.tokenprio=3,this.tokenindex="^";else return!1;this.pos++;return!0},isSign:function(){var a=this.expression.charCodeAt(this.pos-1);return 45===a||43===a?!0:!1},isPositiveSign:function(){return 43===this.expression.charCodeAt(this.pos-1)?!0:!1},isNegativeSign:function(){return 45===this.expression.charCodeAt(this.pos-1)?!0:!1},isLeftParenth:function(){return 40===this.expression.charCodeAt(this.pos)?(this.pos++,this.tmpprio+=10,!0):!1},isRightParenth:function(){return 41===
this.expression.charCodeAt(this.pos)?(this.pos++,this.tmpprio-=10,!0):!1},isComma:function(){return 44===this.expression.charCodeAt(this.pos)?(this.pos++,this.tokenprio=-1,this.tokenindex=",",!0):!1},isWhite:function(){var a=this.expression.charCodeAt(this.pos);return 32===a||9===a||10===a||13===a?(this.pos++,!0):!1},isOp1:function(){for(var a="",b=this.pos;b<this.expression.length;b++){var c=this.expression.charAt(b);if(c.toUpperCase()===c.toLowerCase()&&(b===this.pos||"_"!=c&&("0">c||"9"<c)))break;
a+=c}return 0<a.length&&a in this.ops1?(this.tokenindex=a,this.tokenprio=5,this.pos+=a.length,!0):!1},isOp2:function(){for(var a="",b=this.pos;b<this.expression.length;b++){var c=this.expression.charAt(b);if(c.toUpperCase()===c.toLowerCase()&&(b===this.pos||"_"!=c&&("0">c||"9"<c)))break;a+=c}return 0<a.length&&a in this.ops2?(this.tokenindex=a,this.tokenprio=5,this.pos+=a.length,!0):!1},isVar:function(){for(var a="",b=this.pos;b<this.expression.length;b++){var c=this.expression.charAt(b);if(c.toUpperCase()===
c.toLowerCase()&&(b===this.pos||"_"!=c&&("0">c||"9"<c)))break;a+=c}return 0<a.length?(this.tokenindex=a,this.tokenprio=4,this.pos+=a.length,!0):!1},isComment:function(){return 47===this.expression.charCodeAt(this.pos-1)&&42===this.expression.charCodeAt(this.pos)?(this.pos=this.expression.indexOf("*/",this.pos)+2,1===this.pos&&(this.pos=this.expression.length),!0):!1}};return a.Parser=u}("undefined"===typeof exports?{}:exports);
(function(a){if("object"==typeof exports&&"object"==typeof module)module.exports=a();else{if("function"==typeof define&&define.amd)return define([],a);this.CodeMirror=a()}})(function(){function a(c,d){if(!(this instanceof a))return new a(c,d);this.options=d=d||{};Jc(Of,d,!1);r(d);var e=d.value;"string"==typeof e&&(e=new xb(e,d.mode));this.doc=e;var g=this.display=new b(c,e);g.wrapper.CodeMirror=this;l(this);h(this);d.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");d.autofocus&&
!Sd&&ob(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new xf};La&&11>bb&&setTimeout(oc($a,this,!0),20);Mb(this);pe||(qg(),pe=!0);var f=this;ab(this,function(){f.curOp.forceUpdate=!0;Ke(f,e);d.autofocus&&!Sd||xc()==g.input?setTimeout(oc(rc,f),20):Qb(f);for(var a in dd)if(dd.hasOwnProperty(a))dd[a](f,d[a],ye);z(f);for(a=0;a<ze.length;++a)ze[a](f)})}function b(a,b){var c=this.input=ra("textarea",null,
null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none");Gb?c.style.width="1000px":c.setAttribute("wrap","off");ve&&(c.style.border="1px solid black");c.setAttribute("autocorrect","off");c.setAttribute("autocapitalize","off");c.setAttribute("spellcheck","false");this.inputDiv=ra("div",[c],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");this.scrollbarH=ra("div",[ra("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");this.scrollbarV=
ra("div",[ra("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar");this.scrollbarFiller=ra("div",null,"CodeMirror-scrollbar-filler");this.gutterFiller=ra("div",null,"CodeMirror-gutter-filler");this.lineDiv=ra("div",null,"CodeMirror-code");this.selectionDiv=ra("div",null,null,"position: relative; z-index: 1");this.cursorDiv=ra("div",null,"CodeMirror-cursors");this.measure=ra("div",null,"CodeMirror-measure");this.lineMeasure=ra("div",null,"CodeMirror-measure");this.lineSpace=ra("div",[this.measure,
this.lineMeasure,this.selectionDiv,this.cursorDiv,this.lineDiv],null,"position: relative; outline: none");this.mover=ra("div",[ra("div",[this.lineSpace],"CodeMirror-lines")],null,"position: relative");this.sizer=ra("div",[this.mover],"CodeMirror-sizer");this.heightForcer=ra("div",null,null,"position: absolute; height: "+Dc+"px; width: 1px;");this.gutters=ra("div",null,"CodeMirror-gutters");this.lineGutter=null;this.scroller=ra("div",[this.sizer,this.heightForcer,this.gutters],"CodeMirror-scroll");
this.scroller.setAttribute("tabIndex","-1");this.wrapper=ra("div",[this.inputDiv,this.scrollbarH,this.scrollbarV,this.scrollbarFiller,this.gutterFiller,this.scroller],"CodeMirror");La&&8>bb&&(this.gutters.style.zIndex=-1,this.scroller.style.paddingRight=0);ve&&(c.style.width="0px");Gb||(this.scroller.draggable=!0);df&&(this.inputDiv.style.height="1px",this.inputDiv.style.position="absolute");La&&8>bb&&(this.scrollbarH.style.minHeight=this.scrollbarV.style.minWidth="18px");a.appendChild?a.appendChild(this.wrapper):
a(this.wrapper);this.viewFrom=this.viewTo=b.first;this.view=[];this.externalMeasured=null;this.lastSizeC=this.viewOffset=0;this.lineNumWidth=this.lineNumInnerWidth=this.lineNumChars=this.updateLineNumbers=null;this.prevInput="";this.pollingFast=this.alignWidgets=!1;this.poll=new xf;this.cachedCharWidth=this.cachedTextHeight=this.cachedPaddingH=null;this.inaccurateSelection=!1;this.maxLine=null;this.maxLineLength=0;this.maxLineChanged=!1;this.wheelDX=this.wheelDY=this.wheelStartX=this.wheelStartY=
null;this.shift=!1;this.selForContextMenu=null}function c(b){b.doc.mode=a.getMode(b.options,b.doc.modeOption);e(b)}function e(a){a.doc.iter(function(a){a.stateAfter&&(a.stateAfter=null);a.styles&&(a.styles=null)});a.doc.frontier=a.doc.first;cb(a,100);a.state.modeGen++;a.curOp&&Y(a)}function d(a){var b=Cb(a.display),c=a.options.lineWrapping,d=c&&Math.max(5,a.display.scroller.clientWidth/Nb(a.display)-3);return function(e){if(Uc(a.doc,e))return 0;var g=0;if(e.widgets)for(var f=0;f<e.widgets.length;f++)e.widgets[f].height&&
(g+=e.widgets[f].height);return c?g+(Math.ceil(e.text.length/d)||1)*b:g+b}}function f(a){var b=a.doc,c=d(a);b.iter(function(a){var b=c(a);b!=a.height&&fc(a,b)})}function n(a){var b=Cc[a.options.keyMap].style;a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(b?" cm-keymap-"+b:"")}function h(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-");jb(a)}function g(a){l(a);Y(a);setTimeout(function(){x(a)},
20)}function l(a){var b=a.display.gutters,c=a.options.gutters;id(b);for(var d=0;d<c.length;++d){var e=c[d],g=b.appendChild(ra("div",null,"CodeMirror-gutter "+e));"CodeMirror-linenumbers"==e&&(a.display.lineGutter=g,g.style.width=(a.display.lineNumWidth||1)+"px")}b.style.display=d?"":"none";m(a)}function m(a){var b=a.display.gutters.offsetWidth;a.display.sizer.style.marginLeft=b+"px";a.display.scrollbarH.style.left=a.options.fixedGutter?b+"px":0}function p(a){if(0==a.height)return 0;for(var b=a.text.length,
c,d=a;c=Tb(d,!0);)c=c.find(0,!0),d=c.from.line,b+=c.from.ch-c.to.ch;for(d=a;c=Tb(d,!1);)c=c.find(0,!0),b-=d.text.length-c.from.ch,d=c.to.line,b+=d.text.length-c.to.ch;return b}function t(a){var b=a.display;a=a.doc;b.maxLine=ua(a,a.first);b.maxLineLength=p(b.maxLine);b.maxLineChanged=!0;a.iter(function(a){var c=p(a);c>b.maxLineLength&&(b.maxLineLength=c,b.maxLine=a)})}function r(a){var b=Fb(a.gutters,"CodeMirror-linenumbers");-1==b&&a.lineNumbers?a.gutters=a.gutters.concat(["CodeMirror-linenumbers"]):
-1<b&&!a.lineNumbers&&(a.gutters=a.gutters.slice(0),a.gutters.splice(b,1))}function q(a){var b=a.display.scroller;return{clientHeight:b.clientHeight,barHeight:a.display.scrollbarV.clientHeight,scrollWidth:b.scrollWidth,clientWidth:b.clientWidth,hScrollbarTakesSpace:a.display.scroller.clientHeight-a.display.wrapper.clientHeight<Dc-3,barWidth:a.display.scrollbarH.clientWidth,docHeight:Math.round(a.doc.height+Aa(a.display))}}function w(a,b){b||(b=q(a));var c=a.display,d=Vg(c.measure),e=b.docHeight+Dc,
g=b.scrollWidth>b.clientWidth;g&&b.scrollWidth<=b.clientWidth+1&&0<d&&!b.hScrollbarTakesSpace&&(g=!1);var f=e>b.clientHeight;f?(c.scrollbarV.style.display="block",c.scrollbarV.style.bottom=g?d+"px":"0",c.scrollbarV.firstChild.style.height=Math.max(0,e-b.clientHeight+(b.barHeight||c.scrollbarV.clientHeight))+"px"):(c.scrollbarV.style.display="",c.scrollbarV.firstChild.style.height="0");g?(c.scrollbarH.style.display="block",c.scrollbarH.style.right=f?d+"px":"0",c.scrollbarH.firstChild.style.width=b.scrollWidth-
b.clientWidth+(b.barWidth||c.scrollbarH.clientWidth)+"px"):(c.scrollbarH.style.display="",c.scrollbarH.firstChild.style.width="0");g&&f?(c.scrollbarFiller.style.display="block",c.scrollbarFiller.style.height=c.scrollbarFiller.style.width=d+"px"):c.scrollbarFiller.style.display="";g&&a.options.coverGutterNextToScrollbar&&a.options.fixedGutter?(c.gutterFiller.style.display="block",c.gutterFiller.style.height=d+"px",c.gutterFiller.style.width=c.gutters.offsetWidth+"px"):c.gutterFiller.style.display=
"";!a.state.checkedOverlayScrollbar&&0<b.clientHeight&&(0===d&&(c.scrollbarV.style.minWidth=c.scrollbarH.style.minHeight=Zb&&!Rd?"12px":"18px",d=function(b){(b.target||b.srcElement)!=c.scrollbarV&&(b.target||b.srcElement)!=c.scrollbarH&&va(a,kd)(b)},wa(c.scrollbarV,"mousedown",d),wa(c.scrollbarH,"mousedown",d)),a.state.checkedOverlayScrollbar=!0)}function u(a,b,c){var d=c&&null!=c.top?Math.max(0,c.top):a.scroller.scrollTop,d=Math.floor(d-a.lineSpace.offsetTop),e=c&&null!=c.bottom?c.bottom:d+a.wrapper.clientHeight,
d=Ic(b,d),e=Ic(b,e);if(c&&c.ensure){var g=c.ensure.from.line;c=c.ensure.to.line;if(g<d)return{from:g,to:Ic(b,ec(ua(b,g))+a.wrapper.clientHeight)};if(Math.min(c,b.lastLine())>=e)return{from:Ic(b,ec(ua(b,c))-a.wrapper.clientHeight),to:c}}return{from:d,to:Math.max(e,d+1)}}function x(a){var b=a.display,c=b.view;if(b.alignWidgets||b.gutters.firstChild&&a.options.fixedGutter){for(var d=B(b)-b.scroller.scrollLeft+a.doc.scrollLeft,e=b.gutters.offsetWidth,g=d+"px",f=0;f<c.length;f++)if(!c[f].hidden){a.options.fixedGutter&&
c[f].gutter&&(c[f].gutter.style.left=g);var h=c[f].alignable;if(h)for(var l=0;l<h.length;l++)h[l].style.left=g}a.options.fixedGutter&&(b.gutters.style.left=d+e+"px")}}function z(a){if(!a.options.lineNumbers)return!1;var b=a.doc,b=y(a.options,b.first+b.size-1),c=a.display;if(b.length!=c.lineNumChars){var d=c.measure.appendChild(ra("div",[ra("div",b)],"CodeMirror-linenumber CodeMirror-gutter-elt")),e=d.firstChild.offsetWidth,d=d.offsetWidth-e;c.lineGutter.style.width="";c.lineNumInnerWidth=Math.max(e,
c.lineGutter.offsetWidth-d);c.lineNumWidth=c.lineNumInnerWidth+d;c.lineNumChars=c.lineNumInnerWidth?b.length:-1;c.lineGutter.style.width=c.lineNumWidth+"px";m(a);return!0}return!1}function y(a,b){return String(a.lineNumberFormatter(b+a.firstLineNumber))}function B(a){return a.scroller.getBoundingClientRect().left-a.sizer.getBoundingClientRect().left}function A(a,b,c){var d=a.display;this.viewport=b;this.visible=u(d,a.doc,b);this.editorIsHidden=!d.wrapper.offsetWidth;this.wrapperHeight=d.wrapper.clientHeight;
this.oldViewFrom=d.viewFrom;this.oldViewTo=d.viewTo;this.oldScrollerWidth=d.scroller.clientWidth;this.force=c;this.dims=M(a)}function C(a,b){var c=a.display,d=a.doc;if(b.editorIsHidden)return Ua(a),!1;if(!b.force&&b.visible.from>=c.viewFrom&&b.visible.to<=c.viewTo&&(null==c.updateLineNumbers||c.updateLineNumbers>=c.viewTo)&&0==Sb(a))return!1;z(a)&&(Ua(a),b.dims=M(a));var e=d.first+d.size,g=Math.max(b.visible.from-a.options.viewportMargin,d.first),f=Math.min(e,b.visible.to+a.options.viewportMargin);
c.viewFrom<g&&20>g-c.viewFrom&&(g=Math.max(d.first,c.viewFrom));c.viewTo>f&&20>c.viewTo-f&&(f=Math.min(e,c.viewTo));Ac&&(g=$d(a.doc,g),f=He(a.doc,f));d=g!=c.viewFrom||f!=c.viewTo||c.lastSizeC!=b.wrapperHeight;e=a.display;0==e.view.length||g>=e.viewTo||f<=e.viewFrom?(e.view=Sa(a,g,f),e.viewFrom=g):(e.viewFrom>g?e.view=Sa(a,g,e.viewFrom).concat(e.view):e.viewFrom<g&&(e.view=e.view.slice(nb(a,g))),e.viewFrom=g,e.viewTo<f?e.view=e.view.concat(Sa(a,e.viewTo,f)):e.viewTo>f&&(e.view=e.view.slice(0,nb(a,
f))));e.viewTo=f;c.viewOffset=ec(ua(a.doc,c.viewFrom));a.display.mover.style.top=c.viewOffset+"px";f=Sb(a);if(!d&&0==f&&!b.force&&(null==c.updateLineNumbers||c.updateLineNumbers>=c.viewTo))return!1;g=xc();4<f&&(c.lineDiv.style.display="none");V(a,c.updateLineNumbers,b.dims);4<f&&(c.lineDiv.style.display="");g&&xc()!=g&&g.offsetHeight&&g.focus();id(c.cursorDiv);id(c.selectionDiv);d&&(c.lastSizeC=b.wrapperHeight,cb(a,400));c.updateLineNumbers=null;return!0}function D(a,b){for(var c=b.viewport,d=!0;;d=
!1){if(!d||!a.options.lineWrapping||b.oldScrollerWidth==a.display.scroller.clientWidth)if(c&&null!=c.top&&(c={top:Math.min(a.doc.height+Aa(a.display)-Dc-a.display.scroller.clientHeight,c.top)}),b.visible=u(a.display,a.doc,c),b.visible.from>=a.display.viewFrom&&b.visible.to<=a.display.viewTo)break;if(!C(a,b))break;L(a);d=q(a);Va(a);G(a,d);w(a,d)}yb(a,"update",a);a.display.viewFrom==b.oldViewFrom&&a.display.viewTo==b.oldViewTo||yb(a,"viewportChange",a,a.display.viewFrom,a.display.viewTo)}function H(a,
b){var c=new A(a,b);C(a,c)&&(L(a),D(a,c),c=q(a),Va(a),G(a,c),w(a,c))}function G(a,b){a.display.sizer.style.minHeight=a.display.heightForcer.style.top=b.docHeight+"px";a.display.gutters.style.height=Math.max(b.docHeight,b.clientHeight-Dc)+"px"}function L(a){a=a.display;for(var b=a.lineDiv.offsetTop,c=0;c<a.view.length;c++){var d=a.view[c],e;if(!d.hidden){if(La&&8>bb){var g=d.node.offsetTop+d.node.offsetHeight;e=g-b;b=g}else e=d.node.getBoundingClientRect(),e=e.bottom-e.top;g=d.line.height-e;2>e&&(e=
Cb(a));if(.001<g||-.001>g)if(fc(d.line,e),J(d.line),d.rest)for(e=0;e<d.rest.length;e++)J(d.rest[e])}}}function J(a){if(a.widgets)for(var b=0;b<a.widgets.length;++b)a.widgets[b].height=a.widgets[b].node.offsetHeight}function M(a){for(var b=a.display,c={},d={},e=b.gutters.firstChild,g=0;e;e=e.nextSibling,++g)c[a.options.gutters[g]]=e.offsetLeft,d[a.options.gutters[g]]=e.offsetWidth;return{fixedPos:B(b),gutterTotalWidth:b.gutters.offsetWidth,gutterLeft:c,gutterWidth:d,wrapperWidth:b.wrapper.clientWidth}}
function V(a,b,c){function d(b){var c=b.nextSibling;Gb&&Zb&&a.display.currentWheelTarget==b?b.style.display="none":b.parentNode.removeChild(b);return c}for(var e=a.display,g=a.options.lineNumbers,f=e.lineDiv,h=f.firstChild,l=e.view,e=e.viewFrom,m=0;m<l.length;m++){var p=l[m];if(!p.hidden)if(p.node){for(;h!=p.node;)h=d(h);h=g&&null!=b&&b<=e&&p.lineNumber;p.changes&&(-1<Fb(p.changes,"gutter")&&(h=!1),T(a,p,e,c));h&&(id(p.lineNumber),p.lineNumber.appendChild(document.createTextNode(y(a.options,e))));
h=p.node.nextSibling}else{var q=P(a,p,e,c);f.insertBefore(q,h)}e+=p.size}for(;h;)h=d(h)}function T(a,b,c,d){for(var e=0;e<b.changes.length;e++){var g=b.changes[e];if("text"==g){var g=b,f=g.text.className,h=N(a,g);g.text==g.node&&(g.node=h.pre);g.text.parentNode.replaceChild(h.pre,g.text);g.text=h.pre;h.bgClass!=g.bgClass||h.textClass!=g.textClass?(g.bgClass=h.bgClass,g.textClass=h.textClass,Z(g)):f&&(g.text.className=f)}else if("gutter"==g)X(a,b,c,d);else if("class"==g)Z(b);else if("widget"==g){g=
b;f=d;g.alignable&&(g.alignable=null);for(var h=g.node.firstChild,l=void 0;h;h=l)l=h.nextSibling,"CodeMirror-linewidget"==h.className&&g.node.removeChild(h);R(g,f)}}b.changes=null}function O(a){a.node==a.text&&(a.node=ra("div",null,null,"position: relative"),a.text.parentNode&&a.text.parentNode.replaceChild(a.node,a.text),a.node.appendChild(a.text),La&&8>bb&&(a.node.style.zIndex=2));return a.node}function N(a,b){var c=a.display.externalMeasured;return c&&c.line==b.line?(a.display.externalMeasured=
null,b.measure=c.measure,c.built):Bf(a,b)}function Z(a){var b=a.bgClass?a.bgClass+" "+(a.line.bgClass||""):a.line.bgClass;b&&(b+=" CodeMirror-linebackground");if(a.background)b?a.background.className=b:(a.background.parentNode.removeChild(a.background),a.background=null);else if(b){var c=O(a);a.background=c.insertBefore(ra("div",null,b),c.firstChild)}a.line.wrapClass?O(a).className=a.line.wrapClass:a.node!=a.text&&(a.node.className="");a.text.className=(a.textClass?a.textClass+" "+(a.line.textClass||
""):a.line.textClass)||""}function X(a,b,c,d){b.gutter&&(b.node.removeChild(b.gutter),b.gutter=null);var e=b.line.gutterMarkers;if(a.options.lineNumbers||e){var g=O(b),g=b.gutter=g.insertBefore(ra("div",null,"CodeMirror-gutter-wrapper","position: absolute; left: "+(a.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px"),b.text);!a.options.lineNumbers||e&&e["CodeMirror-linenumbers"]||(b.lineNumber=g.appendChild(ra("div",y(a.options,c),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+d.gutterLeft["CodeMirror-linenumbers"]+
"px; width: "+a.display.lineNumInnerWidth+"px")));if(e)for(b=0;b<a.options.gutters.length;++b){c=a.options.gutters[b];var f=e.hasOwnProperty(c)&&e[c];f&&g.appendChild(ra("div",[f],"CodeMirror-gutter-elt","left: "+d.gutterLeft[c]+"px; width: "+d.gutterWidth[c]+"px"))}}}function P(a,b,c,d){var e=N(a,b);b.text=b.node=e.pre;e.bgClass&&(b.bgClass=e.bgClass);e.textClass&&(b.textClass=e.textClass);Z(b);X(a,b,c,d);R(b,d);return b.node}function R(a,b){K(a.line,a,b,!0);if(a.rest)for(var c=0;c<a.rest.length;c++)K(a.rest[c],
a,b,!1)}function K(a,b,c,d){if(a.widgets){var e=O(b),g=0;for(a=a.widgets;g<a.length;++g){var f=a[g],h=ra("div",[f.node],"CodeMirror-linewidget");f.handleMouseEvents||(h.ignoreEvents=!0);var l=f,m=h,p=c;if(l.noHScroll){(b.alignable||(b.alignable=[])).push(m);var q=p.wrapperWidth;m.style.left=p.fixedPos+"px";l.coverGutter||(q-=p.gutterTotalWidth,m.style.paddingLeft=p.gutterTotalWidth+"px");m.style.width=q+"px"}l.coverGutter&&(m.style.zIndex=5,m.style.position="relative",l.noHScroll||(m.style.marginLeft=
-p.gutterTotalWidth+"px"));d&&f.above?e.insertBefore(h,b.gutter||b.text):e.appendChild(h);yb(f,"redraw")}}}function U(a){return ia(a.line,a.ch)}function Q(a,b){return 0>Ha(a,b)?b:a}function ma(a,b){return 0>Ha(a,b)?a:b}function S(a,b){this.ranges=a;this.primIndex=b}function W(a,b){this.anchor=a;this.head=b}function la(a,b){var c=a[b];a.sort(function(a,b){return Ha(a.from(),b.from())});b=Fb(a,c);for(c=1;c<a.length;c++){var d=a[c],e=a[c-1];if(0<=Ha(e.to(),d.from())){var g=ma(e.from(),d.from()),f=Q(e.to(),
d.to()),d=e.empty()?d.from()==d.head:e.from()==e.head;c<=b&&--b;a.splice(--c,2,new W(d?f:g,d?g:f))}}return new S(a,b)}function sa(a,b){return new S([new W(a,b||a)],0)}function aa(a,b){if(b.line<a.first)return ia(a.first,0);var c=a.first+a.size-1;if(b.line>c)return ia(c,ua(a,c).text.length);var c=ua(a,b.line).text.length,d=b.ch,c=null==d||d>c?ia(b.line,c):0>d?ia(b.line,0):b;return c}function ea(a,b){return b>=a.first&&b<a.first+a.size}function Ia(a,b,c,d){return a.cm&&a.cm.display.shift||a.extend?
(a=b.anchor,d&&(b=0>Ha(c,a),b!=0>Ha(d,a)?(a=c,c=d):b!=0>Ha(c,d)&&(c=d)),new W(a,c)):new W(d||c,c)}function v(a,b,c,d){Ka(a,new S([Ia(a,a.sel.primary(),b,c)],0),d)}function Ea(a,b,c){for(var d=[],e=0;e<a.sel.ranges.length;e++)d[e]=Ia(a,a.sel.ranges[e],b[e],null);b=la(d,a.sel.primIndex);Ka(a,b,c)}function pa(a,b,c,d){var e=a.sel.ranges.slice(0);e[b]=c;Ka(a,la(e,a.sel.primIndex),d)}function ya(a,b){var c={ranges:b.ranges,update:function(b){this.ranges=[];for(var c=0;c<b.length;c++)this.ranges[c]=new W(aa(a,
b[c].anchor),aa(a,b[c].head))}};Qa(a,"beforeSelectionChange",a,c);a.cm&&Qa(a.cm,"beforeSelectionChange",a.cm,c);return c.ranges!=b.ranges?la(c.ranges,c.ranges.length-1):b}function ib(a,b,c){var d=a.history.done,e=fb(d);e&&e.ranges?(d[d.length-1]=b,Fa(a,b,c)):Ka(a,b,c)}function Ka(a,b,c){Fa(a,b,c);b=a.sel;var d=a.cm?a.cm.curOp.id:NaN,e=a.history,g=c&&c.origin,f;if(!(f=d==e.lastSelOp)&&(f=g&&e.lastSelOrigin==g)&&!(f=e.lastModTime==e.lastSelTime&&e.lastOrigin==g)){f=fb(e.done);var h=g.charAt(0);f="*"==
h||"+"==h&&f.ranges.length==b.ranges.length&&f.somethingSelected()==b.somethingSelected()&&new Date-a.history.lastSelTime<=(a.cm?a.cm.options.historyEventDelay:500)}f?e.done[e.done.length-1]=b:ie(b,e.done);e.lastSelTime=+new Date;e.lastSelOrigin=g;e.lastSelOp=d;c&&!1!==c.clearRedo&&fe(e.undone)}function Fa(a,b,c){if(dc(a,"beforeSelectionChange")||a.cm&&dc(a.cm,"beforeSelectionChange"))b=ya(a,b);var d=c&&c.bias||(0>Ha(b.primary().head,a.sel.primary().head)?-1:1);Oa(a,qb(a,b,d,!0));c&&!1===c.scroll||
!a.cm||Vb(a.cm)}function Oa(a,b){b.equals(a.sel)||(a.sel=b,a.cm&&(a.cm.curOp.updateInput=a.cm.curOp.selectionChanged=!0,wf(a.cm)),yb(a,"cursorActivity",a))}function pb(a){Oa(a,qb(a,a.sel,null,!1),fd)}function qb(a,b,c,d){for(var e,g=0;g<b.ranges.length;g++){var f=b.ranges[g],h=Xa(a,f.anchor,c,d),l=Xa(a,f.head,c,d);if(e||h!=f.anchor||l!=f.head)e||(e=b.ranges.slice(0,g)),e[g]=new W(h,l)}return e?la(e,b.primIndex):b}function Xa(a,b,c,d){var e=!1,g=b,f=c||1;a.cantEdit=!1;a:for(;;){var h=ua(a,g.line);
if(h.markedSpans)for(var l=0;l<h.markedSpans.length;++l){var m=h.markedSpans[l],p=m.marker;if((null==m.from||(p.inclusiveLeft?m.from<=g.ch:m.from<g.ch))&&(null==m.to||(p.inclusiveRight?m.to>=g.ch:m.to>g.ch))){if(d&&(Qa(p,"beforeCursorEnter"),p.explicitlyCleared))if(h.markedSpans){--l;continue}else break;if(p.atomic){l=p.find(0>f?-1:1);if(0==Ha(l,g)&&(l.ch+=f,0>l.ch?l=l.line>a.first?aa(a,ia(l.line-1)):null:l.ch>h.text.length&&(l=l.line<a.first+a.size-1?ia(l.line+1,0):null),!l)){if(e){if(!d)return Xa(a,
b,c,!0);a.cantEdit=!0;return ia(a.first,0)}e=!0;l=b;f=-f}g=l;continue a}}}return g}}function Ca(a){for(var b=a.display,c=a.doc,d={},e=d.cursors=document.createDocumentFragment(),g=d.selection=document.createDocumentFragment(),f=0;f<c.sel.ranges.length;f++){var h=c.sel.ranges[f],l=h.empty();if(l||a.options.showCursorWhenSelecting){var m=a,p=e,q=xa(m,h.head,"div",null,null,!m.options.singleCursorHeightPerLine),r=p.appendChild(ra("div","\u00a0","CodeMirror-cursor"));r.style.left=q.left+"px";r.style.top=
q.top+"px";r.style.height=Math.max(0,q.bottom-q.top)*m.options.cursorHeight+"px";q.other&&(m=p.appendChild(ra("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor")),m.style.display="",m.style.left=q.other.left+"px",m.style.top=q.other.top+"px",m.style.height=.85*(q.other.bottom-q.other.top)+"px")}l||sb(a,h,g)}a.options.moveInputWithCursor&&(a=xa(a,c.sel.primary().head,"div"),c=b.wrapper.getBoundingClientRect(),e=b.lineDiv.getBoundingClientRect(),d.teTop=Math.max(0,Math.min(b.wrapper.clientHeight-
10,a.top+e.top-c.top)),d.teLeft=Math.max(0,Math.min(b.wrapper.clientWidth-10,a.left+e.left-c.left)));return d}function Ra(a,b){jc(a.display.cursorDiv,b.cursors);jc(a.display.selectionDiv,b.selection);null!=b.teTop&&(a.display.inputDiv.style.top=b.teTop+"px",a.display.inputDiv.style.left=b.teLeft+"px")}function Va(a){Ra(a,Ca(a))}function sb(a,b,c){function d(a,b,c,e){0>b&&(b=0);b=Math.round(b);e=Math.round(e);h.appendChild(ra("div",null,"CodeMirror-selected","position: absolute; left: "+a+"px; top: "+
b+"px; width: "+(null==c?p-a:c)+"px; height: "+(e-b)+"px"))}function e(b,c,g){var h=ua(f,b),l=h.text.length,q,r;Kf(Bb(h),c||0,null==g?l:g,function(e,f,n){var t=Za(a,ia(b,e),"div",h,"left"),I,u;e==f?(I=t,n=u=t.left):(I=Za(a,ia(b,f-1),"div",h,"right"),"rtl"==n&&(n=t,t=I,I=n),n=t.left,u=I.right);null==c&&0==e&&(n=m);3<I.top-t.top&&(d(n,t.top,null,t.bottom),n=m,t.bottom<I.top&&d(n,t.bottom,null,I.top));null==g&&f==l&&(u=p);if(!q||t.top<q.top||t.top==q.top&&t.left<q.left)q=t;if(!r||I.bottom>r.bottom||
I.bottom==r.bottom&&I.right>r.right)r=I;n<m+1&&(n=m);d(n,I.top,u-n,I.bottom)});return{start:q,end:r}}var g=a.display,f=a.doc,h=document.createDocumentFragment(),l=db(a.display),m=l.left,p=g.lineSpace.offsetWidth-l.right,g=b.from();b=b.to();if(g.line==b.line)e(g.line,g.ch,b.ch);else{var q=ua(f,g.line),l=ua(f,b.line),l=bc(q)==bc(l),g=e(g.line,g.ch,l?q.text.length+1:null).end;b=e(b.line,l?0:null,b.ch).start;l&&(g.top<b.top-2?(d(g.right,g.top,null,g.bottom),d(m,b.top,b.left,b.bottom)):d(g.right,g.top,
b.left-g.right,g.bottom));g.bottom<b.top&&d(m,g.bottom,null,b.top)}c.appendChild(h)}function Ya(a){if(a.state.focused){var b=a.display;clearInterval(b.blinker);var c=!0;b.cursorDiv.style.visibility="";0<a.options.cursorBlinkRate?b.blinker=setInterval(function(){b.cursorDiv.style.visibility=(c=!c)?"":"hidden"},a.options.cursorBlinkRate):0>a.options.cursorBlinkRate&&(b.cursorDiv.style.visibility="hidden")}}function cb(a,b){a.doc.mode.startState&&a.doc.frontier<a.display.viewTo&&a.state.highlight.set(b,
oc(Wa,a))}function Wa(a){var b=a.doc;b.frontier<b.first&&(b.frontier=b.first);if(!(b.frontier>=a.display.viewTo)){var c=+new Date+a.options.workTime,d=Vd(b.mode,na(a,b.frontier)),e=[];b.iter(b.frontier,Math.min(b.first+b.size,a.display.viewTo+500),function(g){if(b.frontier>=a.display.viewFrom){var f=g.styles,h=bg(a,g,d,!0);g.styles=h.styles;var l=g.styleClasses;(h=h.classes)?g.styleClasses=h:l&&(g.styleClasses=null);l=!f||f.length!=g.styles.length||l!=h&&(!l||!h||l.bgClass!=h.bgClass||l.textClass!=
h.textClass);for(h=0;!l&&h<f.length;++h)l=f[h]!=g.styles[h];l&&e.push(b.frontier);g.stateAfter=Vd(b.mode,d)}else Wc(a,g.text,d),g.stateAfter=0==b.frontier%5?Vd(b.mode,d):null;++b.frontier;if(+new Date>c)return cb(a,a.options.workDelay),!0});e.length&&ab(a,function(){for(var b=0;b<e.length;b++)Ba(a,e[b],"text")})}}function Na(a,b,c){for(var d,e,g=a.doc,f=c?-1:b-(a.doc.mode.innerMode?1E3:100);b>f;--b){if(b<=g.first)return g.first;var h=ua(g,b-1);if(h.stateAfter&&(!c||b<=g.frontier))return b;h=lc(h.text,
null,a.options.tabSize);if(null==e||d>h)e=b-1,d=h}return e}function na(a,b,c){var d=a.doc,e=a.display;if(!d.mode.startState)return!0;var g=Na(a,b,c),f=g>d.first&&ua(d,g-1).stateAfter,f=f?Vd(d.mode,f):yg(d.mode);d.iter(g,b,function(c){Wc(a,c.text,f);c.stateAfter=g==b-1||0==g%5||g>=e.viewFrom&&g<e.viewTo?Vd(d.mode,f):null;++g});c&&(d.frontier=g);return f}function Aa(a){return a.mover.offsetHeight-a.lineSpace.offsetHeight}function db(a){if(a.cachedPaddingH)return a.cachedPaddingH;var b=jc(a.measure,
ra("pre","x")),b=window.getComputedStyle?window.getComputedStyle(b):b.currentStyle,b={left:parseInt(b.paddingLeft),right:parseInt(b.paddingRight)};isNaN(b.left)||isNaN(b.right)||(a.cachedPaddingH=b);return b}function Ma(a,b){if(b>=a.display.viewFrom&&b<a.display.viewTo)return a.display.view[nb(a,b)];var c=a.display.externalMeasured;if(c&&b>=c.lineN&&b<c.lineN+c.size)return c}function Pa(a,b){var c=gb(b),d=Ma(a,c);d&&!d.text?d=null:d&&d.changes&&T(a,d,c,M(a));if(!d){var e;e=bc(b);d=gb(e);e=a.display.externalMeasured=
new ja(a.doc,e,d);e.lineN=d;d=e.built=Bf(a,e);e.text=d.pre;jc(a.display.lineMeasure,d.pre);d=e}a:if(e=d,e.line==b)c={map:e.measure.map,cache:e.measure.cache};else{for(var g=0;g<e.rest.length;g++)if(e.rest[g]==b){c={map:e.measure.maps[g],cache:e.measure.caches[g]};break a}for(g=0;g<e.rest.length;g++)if(gb(e.rest[g])>c){c={map:e.measure.maps[g],cache:e.measure.caches[g],before:!0};break a}c=void 0}return{line:b,view:d,rect:null,map:c.map,cache:c.cache,before:c.before,hasHeights:!1}}function qa(a,b,
c,d,e){b.before&&(c=-1);var g=c+(d||"");if(b.cache.hasOwnProperty(g))a=b.cache[g];else{b.rect||(b.rect=b.view.text.getBoundingClientRect());if(!b.hasHeights){var f=b.view,h=b.rect,l=a.options.lineWrapping,m=l&&a.display.scroller.clientWidth;if(!f.measure.heights||l&&f.measure.width!=m){var p=f.measure.heights=[];if(l)for(f.measure.width=m,f=f.text.firstChild.getClientRects(),l=0;l<f.length-1;l++){var m=f[l],q=f[l+1];2<Math.abs(m.bottom-q.bottom)&&p.push((m.bottom+q.top)/2-h.top)}p.push(h.bottom-h.top)}b.hasHeights=
!0}var h=d,p=b.map,r,n,t,u;for(d=0;d<p.length;d+=3){var w=p[d],y=p[d+1];if(c<w)n=0,t=1,u="left";else if(c<y)n=c-w,t=n+1;else if(d==p.length-3||c==y&&p[d+3]>c)t=y-w,n=t-1,c>=y&&(u="right");if(null!=n){r=p[d+2];w==y&&h==(r.insertLeft?"left":"right")&&(u=h);if("left"==h&&0==n)for(;d&&p[d-2]==p[d-3]&&p[d-1].insertLeft;)r=p[(d-=3)+2],u="left";if("right"==h&&n==y-w)for(;d<p.length-3&&p[d+3]==p[d+4]&&!p[d+5].insertLeft;)r=p[(d+=3)+2],u="right";break}}if(3==r.nodeType)for(;;){for(;n&&ee(b.line.text.charAt(w+
n));)--n;for(;w+t<y&&ee(b.line.text.charAt(w+t));)++t;if(La&&9>bb&&0==n&&t==y-w)c=r.parentNode.getBoundingClientRect();else if(La&&a.options.lineWrapping){var x=Xd(r,n,t).getClientRects();c=x.length?x["right"==h?x.length-1:0]:hf}else c=Xd(r,n,t).getBoundingClientRect()||hf;if(c.left||c.right||0==n)break;t=n;n-=1;u="right"}else 0<n&&(u=h="right"),c=a.options.lineWrapping&&1<(x=r.getClientRects()).length?x["right"==h?x.length-1:0]:r.getBoundingClientRect();!(La&&9>bb)||n||c&&(c.left||c.right)||(c=(r=
r.parentNode.getClientRects()[0])?{left:r.left,right:r.left+Nb(a.display),top:r.top,bottom:r.bottom}:hf);if(La&&11>bb){r=c;if(n=window.screen&&null!=screen.logicalXDPI&&screen.logicalXDPI!=screen.deviceXDPI)null!=qf?n=qf:(w=jc(a.display.measure,ra("span","x")),n=w.getBoundingClientRect(),w=Xd(w,0,1).getBoundingClientRect(),n=qf=1<Math.abs(n.left-w.left));n?(n=screen.logicalXDPI/screen.deviceXDPI,w=screen.logicalYDPI/screen.deviceYDPI,c={left:r.left*n,right:r.right*n,top:r.top*w,bottom:r.bottom*w}):
c=r}r=c.top-b.rect.top;n=c.bottom-b.rect.top;w=(r+n)/2;y=b.view.measure.heights;for(d=0;d<y.length-1&&!(w<y[d]);d++);u={left:("right"==u?c.right:c.left)-b.rect.left,right:("left"==u?c.left:c.right)-b.rect.left,top:d?y[d-1]:0,bottom:y[d]};c.left||c.right||(u.bogus=!0);a.options.singleCursorHeightPerLine||(u.rtop=r,u.rbottom=n);a=u;a.bogus||(b.cache[g]=a)}return{left:a.left,right:a.right,top:e?a.rtop:a.top,bottom:e?a.rbottom:a.bottom}}function Kb(a){if(a.measure&&(a.measure.cache={},a.measure.heights=
null,a.rest))for(var b=0;b<a.rest.length;b++)a.measure.caches[b]={}}function eb(a){a.display.externalMeasure=null;id(a.display.lineMeasure);for(var b=0;b<a.display.view.length;b++)Kb(a.display.view[b])}function jb(a){eb(a);a.display.cachedCharWidth=a.display.cachedTextHeight=a.display.cachedPaddingH=null;a.options.lineWrapping||(a.display.maxLineChanged=!0);a.display.lineNumChars=null}function mb(a,b,c,d){if(b.widgets)for(var e=0;e<b.widgets.length;++e)if(b.widgets[e].above){var g=ae(b.widgets[e]);
c.top+=g;c.bottom+=g}if("line"==d)return c;d||(d="local");b=ec(b);b="local"==d?b+a.display.lineSpace.offsetTop:b-a.display.viewOffset;if("page"==d||"window"==d)a=a.display.lineSpace.getBoundingClientRect(),b+=a.top+("window"==d?0:window.pageYOffset||(document.documentElement||document.body).scrollTop),d=a.left+("window"==d?0:window.pageXOffset||(document.documentElement||document.body).scrollLeft),c.left+=d,c.right+=d;c.top+=b;c.bottom+=b;return c}function ka(a,b,c){if("div"==c)return b;var d=b.left;
b=b.top;"page"==c?(d-=window.pageXOffset||(document.documentElement||document.body).scrollLeft,b-=window.pageYOffset||(document.documentElement||document.body).scrollTop):"local"!=c&&c||(c=a.display.sizer.getBoundingClientRect(),d+=c.left,b+=c.top);a=a.display.lineSpace.getBoundingClientRect();return{left:d-a.left,top:b-a.top}}function Za(a,b,c,d,e){d||(d=ua(a.doc,b.line));var g=d;b=b.ch;d=qa(a,Pa(a,d),b,e);return mb(a,g,d,c)}function xa(a,b,c,d,e,g){function f(b,h){var l=qa(a,e,b,h?"right":"left",
g);h?l.left=l.right:l.right=l.left;return mb(a,d,l,c)}function h(a,b){var c=l[b],d=c.level%2;a==te(c)&&b&&c.level<l[b-1].level?(c=l[--b],a=Pd(c)-(c.level%2?0:1),d=!0):a==Pd(c)&&b<l.length-1&&c.level<l[b+1].level&&(c=l[++b],a=te(c)-c.level%2,d=!1);return d&&a==c.to&&a>c.from?f(a-1):f(a,d)}d=d||ua(a.doc,b.line);e||(e=Pa(a,d));var l=Bb(d);b=b.ch;if(!l)return f(b);var m=Lf(l,b),m=h(b,m);null!=Oc&&(m.other=h(b,Oc));return m}function ub(a,b){var c=0;b=aa(a.doc,b);a.options.lineWrapping||(c=Nb(a.display)*
b.ch);var d=ua(a.doc,b.line),e=ec(d)+a.display.lineSpace.offsetTop;return{left:c,right:c,top:e,bottom:e+d.height}}function Eb(a,b,c,d){a=ia(a,b);a.xRel=d;c&&(a.outside=!0);return a}function Ja(a,b,c){var d=a.doc;c+=a.display.viewOffset;if(0>c)return Eb(d.first,0,!0,-1);var e=Ic(d,c),g=d.first+d.size-1;if(e>g)return Eb(d.first+d.size-1,ua(d,g).text.length,!0,1);0>b&&(b=0);for(d=ua(d,e);;)if(e=oa(a,d,e,b,c),g=(d=Tb(d,!1))&&d.find(0,!0),d&&(e.ch>g.from.ch||e.ch==g.from.ch&&0<e.xRel))e=gb(d=g.to.line);
else return e}function oa(a,b,c,d,e){function g(d){d=xa(a,ia(c,d),"line",b,m);h=!0;if(f>d.bottom)return d.left-l;if(f<d.top)return d.left+l;h=!1;return d.left}var f=e-ec(b),h=!1,l=2*a.display.wrapper.clientWidth,m=Pa(a,b),p=Bb(b),q=b.text.length;e=$e(b);var r=af(b),n=g(e),t=h,u=g(r),w=h;if(d>u)return Eb(c,r,w,1);for(;;){if(p?r==e||r==bf(b,e,1):1>=r-e){p=d<n||d-n<=u-d?e:r;for(d-=p==e?n:u;ee(b.text.charAt(p));)++p;return Eb(c,p,p==e?t:w,-1>d?-1:1<d?1:0)}var y=Math.ceil(q/2),x=e+y;if(p)for(var x=e,z=
0;z<y;++z)x=bf(b,x,1);z=g(x);if(z>d){r=x;u=z;if(w=h)u+=1E3;q=y}else e=x,n=z,t=h,q-=y}}function Cb(a){if(null!=a.cachedTextHeight)return a.cachedTextHeight;if(null==Bc){Bc=ra("pre");for(var b=0;49>b;++b)Bc.appendChild(document.createTextNode("x")),Bc.appendChild(ra("br"));Bc.appendChild(document.createTextNode("x"))}jc(a.measure,Bc);b=Bc.offsetHeight/50;3<b&&(a.cachedTextHeight=b);id(a.measure);return b||1}function Nb(a){if(null!=a.cachedCharWidth)return a.cachedCharWidth;var b=ra("span","xxxxxxxxxx"),
c=ra("pre",[b]);jc(a.measure,c);b=b.getBoundingClientRect();b=(b.right-b.left)/10;2<b&&(a.cachedCharWidth=b);return b||10}function da(a){a.curOp={cm:a,viewChanged:!1,startHeight:a.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,id:++wg};ud?ud.ops.push(a.curOp):a.curOp.ownsGroup=ud={ops:[a.curOp],delayedCallbacks:[]}}function ca(a){if(a=a.curOp.ownsGroup)try{var b=
a.delayedCallbacks,c=0;do{for(;c<b.length;c++)b[c]();for(var d=0;d<a.ops.length;d++){var e=a.ops[d];if(e.cursorActivityHandlers)for(;e.cursorActivityCalled<e.cursorActivityHandlers.length;)e.cursorActivityHandlers[e.cursorActivityCalled++](e.cm)}}while(c<b.length)}finally{ud=null;for(b=0;b<a.ops.length;b++)a.ops[b].cm.curOp=null;a=a.ops;for(b=0;b<a.length;b++)e=a[b],c=e.cm,d=c.display,e.updateMaxLine&&t(c),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<
d.viewFrom||e.scrollToPos.to.line>=d.viewTo)||d.maxLineChanged&&c.options.lineWrapping,e.update=e.mustUpdate&&new A(c,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate);for(b=0;b<a.length;b++)e=a[b],e.updatedDisplay=e.mustUpdate&&C(e.cm,e.update);for(b=0;b<a.length;b++){e=a[b];c=e.cm;d=c.display;e.updatedDisplay&&L(c);e.barMeasure=q(c);if(d.maxLineChanged&&!c.options.lineWrapping){var g=e,f;f=d.maxLine.text.length;f=qa(c,Pa(c,d.maxLine),f,void 0);g.adjustWidthTo=f.left+3;e.maxScrollLeft=
Math.max(0,d.sizer.offsetLeft+e.adjustWidthTo+Dc-d.scroller.clientWidth)}if(e.updatedDisplay||e.selectionChanged)e.newSelectionNodes=Ca(c)}for(b=0;b<a.length;b++)e=a[b],c=e.cm,null!=e.adjustWidthTo&&(c.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<c.doc.scrollLeft&&Kc(c,Math.min(c.display.scroller.scrollLeft,e.maxScrollLeft),!0),c.display.maxLineChanged=!1),e.newSelectionNodes&&Ra(c,e.newSelectionNodes),e.updatedDisplay&&G(c,e.barMeasure),(e.updatedDisplay||e.startHeight!=c.doc.height)&&
w(c,e.barMeasure),e.selectionChanged&&Ya(c),c.state.focused&&e.updateInput&&$a(c,e.typing);for(b=0;b<a.length;b++){e=a[b];c=e.cm;d=c.display;g=c.doc;null!=e.adjustWidthTo&&1<Math.abs(e.barMeasure.scrollWidth-c.display.scroller.scrollWidth)&&w(c);e.updatedDisplay&&D(c,e.update);null==d.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(d.wheelStartX=d.wheelStartY=null);null!=e.scrollTop&&d.scroller.scrollTop!=e.scrollTop&&(f=Math.max(0,Math.min(d.scroller.scrollHeight-d.scroller.clientHeight,
e.scrollTop)),d.scroller.scrollTop=d.scrollbarV.scrollTop=g.scrollTop=f);null!=e.scrollLeft&&d.scroller.scrollLeft!=e.scrollLeft&&(f=Math.max(0,Math.min(d.scroller.scrollWidth-d.scroller.clientWidth,e.scrollLeft)),d.scroller.scrollLeft=d.scrollbarH.scrollLeft=g.scrollLeft=f,x(c));if(e.scrollToPos){var h;a:{f=c;h=aa(g,e.scrollToPos.from);var l=aa(g,e.scrollToPos.to),m=e.scrollToPos.margin;for(null==m&&(m=0);;){var p=!1,r=xa(f,h),n=l&&l!=h?xa(f,l):r,n=nd(f,Math.min(r.left,n.left),Math.min(r.top,n.top)-
m,Math.max(r.left,n.left),Math.max(r.bottom,n.bottom)+m),u=f.doc.scrollTop,y=f.doc.scrollLeft;null!=n.scrollTop&&(nc(f,n.scrollTop),1<Math.abs(f.doc.scrollTop-u)&&(p=!0));null!=n.scrollLeft&&(Kc(f,n.scrollLeft),1<Math.abs(f.doc.scrollLeft-y)&&(p=!0));if(!p){h=r;break a}}}e.scrollToPos.isCursor&&c.state.focused&&(f=c,l=h,m=f.display,p=m.sizer.getBoundingClientRect(),h=null,0>l.top+p.top?h=!0:l.bottom+p.top>(window.innerHeight||document.documentElement.clientHeight)&&(h=!1),null==h||ef||(l=ra("div",
"\u200b",null,"position: absolute; top: "+(l.top-m.viewOffset-f.display.lineSpace.offsetTop)+"px; height: "+(l.bottom-l.top+Dc)+"px; left: "+l.left+"px; width: 2px;"),f.display.lineSpace.appendChild(l),l.scrollIntoView(h),f.display.lineSpace.removeChild(l)))}f=e.maybeHiddenMarkers;h=e.maybeUnhiddenMarkers;if(f)for(l=0;l<f.length;++l)f[l].lines.length||Qa(f[l],"hide");if(h)for(l=0;l<h.length;++l)h[l].lines.length&&Qa(h[l],"unhide");d.wrapper.offsetHeight&&(g.scrollTop=c.display.scroller.scrollTop);
e.updatedDisplay&&Gb&&(c.options.lineWrapping&&(d=c,g=e.barMeasure,d.display.sizer.offsetWidth+d.display.gutters.offsetWidth<d.display.scroller.clientWidth-1&&(d.display.sizer.style.minHeight=d.display.heightForcer.style.top="0px",d.display.gutters.style.height=g.docHeight+"px")),e.barMeasure.scrollWidth>e.barMeasure.clientWidth&&e.barMeasure.scrollWidth<e.barMeasure.clientWidth+1&&!(c.display.scroller.clientHeight-c.display.wrapper.clientHeight<Dc-3)&&w(c));e.changeObjs&&Qa(c,"changes",c,e.changeObjs)}}}
function ab(a,b){if(a.curOp)return b();da(a);try{return b()}finally{ca(a)}}function va(a,b){return function(){if(a.curOp)return b.apply(a,arguments);da(a);try{return b.apply(a,arguments)}finally{ca(a)}}}function Da(a){return function(){if(this.curOp)return a.apply(this,arguments);da(this);try{return a.apply(this,arguments)}finally{ca(this)}}}function Ta(a){return function(){var b=this.cm;if(!b||b.curOp)return a.apply(this,arguments);da(b);try{return a.apply(this,arguments)}finally{ca(b)}}}function ja(a,
b,c){for(var d=this.line=b,e;d=Tb(d,!1);)d=d.find(1,!0).line,(e||(e=[])).push(d);this.size=(this.rest=e)?gb(fb(this.rest))-c+1:1;this.node=this.text=null;this.hidden=Uc(a,b)}function Sa(a,b,c){var d=[],e;for(e=b;e<c;)b=new ja(a.doc,ua(a.doc,e),e),e+=b.size,d.push(b);return d}function Y(a,b,c,d){null==b&&(b=a.doc.first);null==c&&(c=a.doc.first+a.doc.size);d||(d=0);var e=a.display;d&&c<e.viewTo&&(null==e.updateLineNumbers||e.updateLineNumbers>b)&&(e.updateLineNumbers=b);a.curOp.viewChanged=!0;if(b>=
e.viewTo)Ac&&$d(a.doc,b)<e.viewTo&&Ua(a);else if(c<=e.viewFrom)Ac&&He(a.doc,c+d)>e.viewFrom?Ua(a):(e.viewFrom+=d,e.viewTo+=d);else if(b<=e.viewFrom&&c>=e.viewTo)Ua(a);else if(b<=e.viewFrom){var g=gc(a,c,c+d,1);g?(e.view=e.view.slice(g.index),e.viewFrom=g.lineN,e.viewTo+=d):Ua(a)}else if(c>=e.viewTo)(g=gc(a,b,b,-1))?(e.view=e.view.slice(0,g.index),e.viewTo=g.lineN):Ua(a);else{var g=gc(a,b,b,-1),f=gc(a,c,c+d,1);g&&f?(e.view=e.view.slice(0,g.index).concat(Sa(a,g.lineN,f.lineN)).concat(e.view.slice(f.index)),
e.viewTo+=d):Ua(a)}if(a=e.externalMeasured)c<a.lineN?a.lineN+=d:b<a.lineN+a.size&&(e.externalMeasured=null)}function Ba(a,b,c){a.curOp.viewChanged=!0;var d=a.display,e=a.display.externalMeasured;e&&b>=e.lineN&&b<e.lineN+e.size&&(d.externalMeasured=null);b<d.viewFrom||b>=d.viewTo||(a=d.view[nb(a,b)],null!=a.node&&(a=a.changes||(a.changes=[]),-1==Fb(a,c)&&a.push(c)))}function Ua(a){a.display.viewFrom=a.display.viewTo=a.doc.first;a.display.view=[];a.display.viewOffset=0}function nb(a,b){if(b>=a.display.viewTo)return null;
b-=a.display.viewFrom;if(0>b)return null;for(var c=a.display.view,d=0;d<c.length;d++)if(b-=c[d].size,0>b)return d}function gc(a,b,c,d){var e=nb(a,b),g=a.display.view;if(!Ac||c==a.doc.first+a.doc.size)return{index:e,lineN:c};for(var f=0,h=a.display.viewFrom;f<e;f++)h+=g[f].size;if(h!=b){if(0<d){if(e==g.length-1)return null;b=h+g[e].size-b;e++}else b=h-b;c+=b}for(;$d(a.doc,c)!=c;){if(e==(0>d?0:g.length-1))return null;c+=d*g[e-(0>d?1:0)].size;e+=d}return{index:e,lineN:c}}function Sb(a){a=a.display.view;
for(var b=0,c=0;c<a.length;c++){var d=a[c];d.hidden||d.node&&!d.changes||++b}return b}function zb(a){a.display.pollingFast||a.display.poll.set(a.options.pollInterval,function(){pc(a);a.state.focused&&zb(a)})}function Ub(a){function b(){pc(a)||c?(a.display.pollingFast=!1,zb(a)):(c=!0,a.display.poll.set(60,b))}var c=!1;a.display.pollingFast=!0;a.display.poll.set(20,b)}function pc(a){var b=a.display.input,c=a.display.prevInput,d=a.doc;if(!a.state.focused||Uf(b)&&!c||tb(a)||a.options.disableInput)return!1;
a.state.pasteIncoming&&a.state.fakedLastChar&&(b.value=b.value.substring(0,b.value.length-1),a.state.fakedLastChar=!1);var e=b.value;if(e==c&&!a.somethingSelected())return!1;if(La&&9<=bb&&a.display.inputHasSelection===e||Zb&&/[\uf700-\uf7ff]/.test(e))return $a(a),!1;var g=!a.curOp;g&&da(a);a.display.shift=!1;8203!=e.charCodeAt(0)||d.sel!=a.display.selForContextMenu||c||(c="\u200b");for(var f=0,h=Math.min(c.length,e.length);f<h&&c.charCodeAt(f)==e.charCodeAt(f);)++f;var h=e.slice(f),l=Ga(h),m=null;
a.state.pasteIncoming&&1<d.sel.ranges.length&&(cd&&cd.join("\n")==h?m=0==d.sel.ranges.length%cd.length&&de(cd,Ga):l.length==d.sel.ranges.length&&(m=de(l,function(a){return[a]})));for(var p=d.sel.ranges.length-1;0<=p;p--){var q=d.sel.ranges[p],r=q.from(),n=q.to();f<c.length?r=ia(r.line,r.ch-(c.length-f)):a.state.overwrite&&q.empty()&&!a.state.pasteIncoming&&(n=ia(n.line,Math.min(ua(d,n.line).text.length,n.ch+fb(l).length)));var t=a.curOp.updateInput,n={from:r,to:n,text:m?m[p%m.length]:l,origin:a.state.pasteIncoming?
"paste":a.state.cutIncoming?"cut":"+input"};Lc(a.doc,n);yb(a,"inputRead",a,n);if(h&&!a.state.pasteIncoming&&a.options.electricChars&&a.options.smartIndent&&100>q.head.ch&&(!p||d.sel.ranges[p-1].head.line!=q.head.line))if(r=a.getModeAt(q.head),r.electricChars)for(n=0;n<r.electricChars.length;n++){if(-1<h.indexOf(r.electricChars.charAt(n))){Ob(a,q.head.line,"smart");break}}else r.electricInput&&(n=wb(n),r.electricInput.test(ua(d,n.line).text.slice(0,n.ch))&&Ob(a,q.head.line,"smart"))}Vb(a);a.curOp.updateInput=
t;a.curOp.typing=!0;1E3<e.length||-1<e.indexOf("\n")?b.value=a.display.prevInput="":a.display.prevInput=e;g&&ca(a);a.state.pasteIncoming=a.state.cutIncoming=!1;return!0}function $a(a,b){var c,d,e=a.doc;a.somethingSelected()?(a.display.prevInput="",c=e.sel.primary(),d=(c=sc&&(100<c.to().line-c.from().line||1E3<(d=a.getSelection()).length))?"-":d||a.getSelection(),a.display.input.value=d,a.state.focused&&ta(a.display.input),La&&9<=bb&&(a.display.inputHasSelection=d)):b||(a.display.prevInput=a.display.input.value=
"",La&&9<=bb&&(a.display.inputHasSelection=null));a.display.inaccurateSelection=c}function ob(a){"nocursor"==a.options.readOnly||Sd&&xc()==a.display.input||a.display.input.focus()}function Xc(a){a.state.focused||(ob(a),rc(a))}function tb(a){return a.options.readOnly||a.doc.cantEdit}function Mb(a){function b(){a.state.focused&&setTimeout(oc(ob,a),0)}function c(b){cc(a,b)||tc(b)}function d(b){if(a.somethingSelected())cd=a.getSelections(),e.inaccurateSelection&&(e.prevInput="",e.inaccurateSelection=
!1,e.input.value=cd.join("\n"),ta(e.input));else{for(var c=[],g=[],f=0;f<a.doc.sel.ranges.length;f++){var h=a.doc.sel.ranges[f].head.line,h={anchor:ia(h,0),head:ia(h+1,0)};g.push(h);c.push(a.getRange(h.anchor,h.head))}"cut"==b.type?a.setSelections(g,null,fd):(e.prevInput="",e.input.value=c.join("\n"),ta(e.input));cd=c}"cut"==b.type&&(a.state.cutIncoming=!0)}var e=a.display;wa(e.scroller,"mousedown",va(a,kd));La&&11>bb?wa(e.scroller,"dblclick",va(a,function(b){if(!cc(a,b)){var c=qc(a,b);!c||mc(a,b,
"gutterClick",!0,yb)||Hb(a.display,b)||(F(b),b=Jd(a,c),v(a.doc,b.anchor,b.head))}})):wa(e.scroller,"dblclick",function(b){cc(a,b)||F(b)});wa(e.lineSpace,"selectstart",function(a){Hb(e,a)||F(a)});zc||wa(e.scroller,"contextmenu",function(b){me(a,b)});wa(e.scroller,"scroll",function(){e.scroller.clientHeight&&(nc(a,e.scroller.scrollTop),Kc(a,e.scroller.scrollLeft,!0),Qa(a,"scroll",a))});wa(e.scrollbarV,"scroll",function(){e.scroller.clientHeight&&nc(a,e.scrollbarV.scrollTop)});wa(e.scrollbarH,"scroll",
function(){e.scroller.clientHeight&&Kc(a,e.scrollbarH.scrollLeft)});wa(e.scroller,"mousewheel",function(b){je(a,b)});wa(e.scroller,"DOMMouseScroll",function(b){je(a,b)});wa(e.scrollbarH,"mousedown",b);wa(e.scrollbarV,"mousedown",b);wa(e.wrapper,"scroll",function(){e.wrapper.scrollTop=e.wrapper.scrollLeft=0});wa(e.input,"keyup",function(b){le.call(a,b)});wa(e.input,"input",function(){La&&9<=bb&&a.display.inputHasSelection&&(a.display.inputHasSelection=null);Ub(a)});wa(e.input,"keydown",va(a,Yd));wa(e.input,
"keypress",va(a,Qe));wa(e.input,"focus",oc(rc,a));wa(e.input,"blur",oc(Qb,a));a.options.dragDrop&&(wa(e.scroller,"dragstart",function(b){if(La&&(!a.state.draggingText||100>+new Date-xg))tc(b);else if(!cc(a,b)&&!Hb(a.display,b)&&(b.dataTransfer.setData("Text",a.getSelection()),b.dataTransfer.setDragImage&&!cf)){var c=ra("img",null,null,"position: fixed; left: 0; top: 0;");c.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";Yb&&(c.width=c.height=1,a.display.wrapper.appendChild(c),
c._top=c.offsetTop);b.dataTransfer.setDragImage(c,0,0);Yb&&c.parentNode.removeChild(c)}}),wa(e.scroller,"dragenter",c),wa(e.scroller,"dragover",c),wa(e.scroller,"drop",va(a,md)));wa(e.scroller,"paste",function(b){Hb(e,b)||(a.state.pasteIncoming=!0,ob(a),Ub(a))});wa(e.input,"paste",function(){if(Gb&&!a.state.fakedLastChar&&!(200>new Date-a.state.lastMiddleDown)){var b=e.input.selectionStart,c=e.input.selectionEnd;e.input.value+="$";e.input.selectionEnd=c;e.input.selectionStart=b;a.state.fakedLastChar=
!0}a.state.pasteIncoming=!0;Ub(a)});wa(e.input,"cut",d);wa(e.input,"copy",d);df&&wa(e.sizer,"mouseup",function(){xc()==e.input&&e.input.blur();ob(a)})}function ac(a){var b=a.display;b.cachedCharWidth=b.cachedTextHeight=b.cachedPaddingH=null;a.setSize()}function Hb(a,b){for(var c=b.target||b.srcElement;c!=a.wrapper;c=c.parentNode)if(!c||c.ignoreEvents||c.parentNode==a.sizer&&c!=a.mover)return!0}function qc(a,b,c,d){var e=a.display;if(!c&&(c=b.target||b.srcElement,c==e.scrollbarH||c==e.scrollbarV||
c==e.scrollbarFiller||c==e.gutterFiller))return null;var g,f,e=e.lineSpace.getBoundingClientRect();try{g=b.clientX-e.left,f=b.clientY-e.top}catch(h){return null}b=Ja(a,g,f);var l;d&&1==b.xRel&&(l=ua(a.doc,b.line).text).length==b.ch&&(d=lc(l,l.length,a.options.tabSize)-l.length,b=ia(b.line,Math.max(0,Math.round((g-db(a.display).left)/Nb(a.display))-d)));return b}function kd(a){if(!cc(this,a)){var b=this.display;b.shift=a.shiftKey;if(Hb(b,a))Gb||(b.scroller.draggable=!1,setTimeout(function(){b.scroller.draggable=
!0},100));else if(!mc(this,a,"gutterClick",!0,yb)){var c=qc(this,a);window.focus();switch(gg(a)){case 1:c?Ed(this,a,c):(a.target||a.srcElement)==b.scroller&&F(a);break;case 2:Gb&&(this.state.lastMiddleDown=+new Date);c&&v(this.doc,c);setTimeout(oc(ob,this),20);F(a);break;case 3:zc&&me(this,a)}}}}function Ed(a,b,c){setTimeout(oc(Xc,a),0);var d=+new Date,e;xe&&xe.time>d-400&&0==Ha(xe.pos,c)?e="triple":we&&we.time>d-400&&0==Ha(we.pos,c)?(e="double",xe={time:d,pos:c}):(e="single",we={time:d,pos:c});var d=
a.doc.sel,g=Zb?b.metaKey:b.ctrlKey;a.options.dragDrop&&Gf&&!tb(a)&&"single"==e&&-1<d.contains(c)&&d.somethingSelected()?ld(a,b,c,g):zd(a,b,c,e,g)}function ld(a,b,c,d){var e=a.display,g=va(a,function(f){Gb&&(e.scroller.draggable=!1);a.state.draggingText=!1;Ib(document,"mouseup",g);Ib(e.scroller,"drop",g);10>Math.abs(b.clientX-f.clientX)+Math.abs(b.clientY-f.clientY)&&(F(f),d||v(a.doc,c),ob(a),La&&9==bb&&setTimeout(function(){document.body.focus();ob(a)},20))});Gb&&(e.scroller.draggable=!0);a.state.draggingText=
g;e.scroller.dragDrop&&e.scroller.dragDrop();wa(document,"mouseup",g);wa(e.scroller,"drop",g)}function zd(a,b,c,d,e){function g(b){if(0!=Ha(n,b))if(n=b,"rect"==d){for(var e=[],f=a.options.tabSize,h=lc(ua(m,c.line).text,c.ch,f),l=lc(ua(m,b.line).text,b.ch,f),t=Math.min(h,l),h=Math.max(h,l),l=Math.min(c.line,b.line),u=Math.min(a.lastLine(),Math.max(c.line,b.line));l<=u;l++){var w=ua(m,l).text,y=yf(w,t,f);t==h?e.push(new W(ia(l,y),ia(l,y))):w.length>y&&e.push(new W(ia(l,y),ia(l,yf(w,h,f))))}e.length||
e.push(new W(c,c));Ka(m,la(r.ranges.slice(0,q).concat(e),q),{origin:"*mouse",scroll:!1});a.scrollIntoView(b)}else e=p,f=e.anchor,t=b,"single"!=d&&(b="double"==d?Jd(a,b):new W(ia(b.line,0),aa(m,ia(b.line+1,0))),0<Ha(b.anchor,f)?(t=b.head,f=ma(e.from(),b.anchor)):(t=b.anchor,f=Q(e.to(),b.head))),e=r.ranges.slice(0),e[q]=new W(aa(m,f),t),Ka(m,la(e,q),Sf)}function f(b){var c=++w,e=qc(a,b,!0,"rect"==d);if(e)if(0!=Ha(e,n)){Xc(a);g(e);var h=u(l,m);(e.line>=h.to||e.line<h.from)&&setTimeout(va(a,function(){w==
c&&f(b)}),150)}else{var p=b.clientY<t.top?-20:b.clientY>t.bottom?20:0;p&&setTimeout(va(a,function(){w==c&&(l.scroller.scrollTop+=p,f(b))}),50)}}function h(b){w=Infinity;F(b);ob(a);Ib(document,"mousemove",y);Ib(document,"mouseup",x);m.history.lastSelOrigin=null}var l=a.display,m=a.doc;F(b);var p,q,r=m.sel;e&&!b.shiftKey?(q=m.sel.contains(c),p=-1<q?m.sel.ranges[q]:new W(c,c)):p=m.sel.primary();b.altKey?(d="rect",e||(p=new W(c,c)),c=qc(a,b,!0,!0),q=-1):"double"==d?(b=Jd(a,c),p=a.display.shift||m.extend?
Ia(m,p,b.anchor,b.head):b):"triple"==d?(b=new W(ia(c.line,0),aa(m,ia(c.line+1,0))),p=a.display.shift||m.extend?Ia(m,p,b.anchor,b.head):b):p=Ia(m,p,c);e?-1<q?pa(m,q,p,Sf):(q=m.sel.ranges.length,Ka(m,la(m.sel.ranges.concat([p]),q),{scroll:!1,origin:"*mouse"})):(q=0,Ka(m,new S([p],0),Sf),r=m.sel);var n=c,t=l.wrapper.getBoundingClientRect(),w=0,y=va(a,function(a){gg(a)?f(a):h(a)}),x=va(a,h);wa(document,"mousemove",y);wa(document,"mouseup",x)}function mc(a,b,c,d,e){try{var g=b.clientX,f=b.clientY}catch(h){return!1}if(g>=
Math.floor(a.display.gutters.getBoundingClientRect().right))return!1;d&&F(b);d=a.display;var l=d.lineDiv.getBoundingClientRect();if(f>l.bottom||!dc(a,c))return Ff(b);f-=l.top-d.viewOffset;for(l=0;l<a.options.gutters.length;++l){var m=d.gutters.childNodes[l];if(m&&m.getBoundingClientRect().right>=g)return g=Ic(a.doc,f),e(a,c,a,g,a.options.gutters[l],b),Ff(b)}}function md(a){var b=this;if(!cc(b,a)&&!Hb(b.display,a)){F(a);La&&(xg=+new Date);var c=qc(b,a,!0),d=a.dataTransfer.files;if(c&&!tb(b))if(d&&
d.length&&window.FileReader&&window.File){var e=d.length,g=Array(e),f=0;a=function(a,d){var h=new FileReader;h.onload=va(b,function(){g[d]=h.result;if(++f==e){c=aa(b.doc,c);var a={from:c,to:c,text:Ga(g.join("\n")),origin:"paste"};Lc(b.doc,a);ib(b.doc,sa(c,wb(a)))}});h.readAsText(a)};for(var h=0;h<e;++h)a(d[h],h)}else if(b.state.draggingText&&-1<b.doc.sel.contains(c))b.state.draggingText(a),setTimeout(oc(ob,b),20);else try{if(g=a.dataTransfer.getData("Text")){if(b.state.draggingText&&(Zb?!a.metaKey:
!a.ctrlKey))var l=b.listSelections();Fa(b.doc,sa(c,c));if(l)for(h=0;h<l.length;++h)Id(b.doc,"",l[h].anchor,l[h].head,"drag");b.replaceSelection(g,"around","paste");ob(b)}}catch(m){}}}function nc(a,b){2>Math.abs(a.doc.scrollTop-b)||(a.doc.scrollTop=b,Qd||H(a,{top:b}),a.display.scroller.scrollTop!=b&&(a.display.scroller.scrollTop=b),a.display.scrollbarV.scrollTop!=b&&(a.display.scrollbarV.scrollTop=b),Qd&&H(a),cb(a,100))}function Kc(a,b,c){(c?b==a.doc.scrollLeft:2>Math.abs(a.doc.scrollLeft-b))||(b=
Math.min(b,a.display.scroller.scrollWidth-a.display.scroller.clientWidth),a.doc.scrollLeft=b,x(a),a.display.scroller.scrollLeft!=b&&(a.display.scroller.scrollLeft=b),a.display.scrollbarH.scrollLeft!=b&&(a.display.scrollbarH.scrollLeft=b))}function je(a,b){var c=b.wheelDeltaX,d=b.wheelDeltaY;null==c&&b.detail&&b.axis==b.HORIZONTAL_AXIS&&(c=b.detail);null==d&&b.detail&&b.axis==b.VERTICAL_AXIS?d=b.detail:null==d&&(d=b.wheelDelta);var e=a.display,g=e.scroller;if(c&&g.scrollWidth>g.clientWidth||d&&g.scrollHeight>
g.clientHeight){if(d&&Zb&&Gb){var f=b.target,h=e.view;a:for(;f!=g;f=f.parentNode)for(var l=0;l<h.length;l++)if(h[l].node==f){a.display.currentWheelTarget=f;break a}}!c||Qd||Yb||null==$b?(d&&null!=$b&&(f=d*$b,h=a.doc.scrollTop,l=h+e.wrapper.clientHeight,0>f?h=Math.max(0,h+f-50):l=Math.min(a.doc.height,l+f+50),H(a,{top:h,bottom:l})),20>jf&&(null==e.wheelStartX?(e.wheelStartX=g.scrollLeft,e.wheelStartY=g.scrollTop,e.wheelDX=c,e.wheelDY=d,setTimeout(function(){if(null!=e.wheelStartX){var a=g.scrollLeft-
e.wheelStartX,b=g.scrollTop-e.wheelStartY,a=b&&e.wheelDY&&b/e.wheelDY||a&&e.wheelDX&&a/e.wheelDX;e.wheelStartX=e.wheelStartY=null;a&&($b=($b*jf+a)/(jf+1),++jf)}},200)):(e.wheelDX+=c,e.wheelDY+=d))):(d&&nc(a,Math.max(0,Math.min(g.scrollTop+d*$b,g.scrollHeight-g.clientHeight))),Kc(a,Math.max(0,Math.min(g.scrollLeft+c*$b,g.scrollWidth-g.clientWidth))),F(b),e.wheelStartX=null)}}function Db(a,b,c){if("string"==typeof b&&(b=mf[b],!b))return!1;a.display.pollingFast&&pc(a)&&(a.display.pollingFast=!1);var d=
a.display.shift,e=!1;try{tb(a)&&(a.state.suppressEdits=!0),c&&(a.display.shift=!1),e=b(a)!=De}finally{a.display.shift=d,a.state.suppressEdits=!1}return e}function yd(a){var b=a.state.keyMaps.slice(0);a.options.extraKeys&&b.push(a.options.extraKeys);b.push(a.options.keyMap);return b}function ke(a,b){var c=Kd(a.options.keyMap),d=c.auto;clearTimeout(Nf);d&&!Zg(b)&&(Nf=setTimeout(function(){Kd(a.options.keyMap)==c&&(a.options.keyMap=d.call?d.call(null,a):d,n(a))},50));var e=$g(b,!0),g=!1;if(!e)return!1;
g=yd(a);if(g=b.shiftKey?nf("Shift-"+e,g,function(b){return Db(a,b,!0)})||nf(e,g,function(b){if("string"==typeof b?/^go[A-Z]/.test(b):b.motion)return Db(a,b)}):nf(e,g,function(b){return Db(a,b)}))F(b),Ya(a),yb(a,"keyHandled",a,e,b);return g}function Fd(a,b,c){var d=nf("'"+c+"'",yd(a),function(b){return Db(a,b,!0)});d&&(F(b),Ya(a),yb(a,"keyHandled",a,"'"+c+"'",b));return d}function Yd(a){Xc(this);if(!cc(this,a)){La&&11>bb&&27==a.keyCode&&(a.returnValue=!1);var b=a.keyCode;this.display.shift=16==b||
a.shiftKey;var c=ke(this,a);Yb&&(kf=c?b:null,!c&&88==b&&!sc&&(Zb?a.metaKey:a.ctrlKey)&&this.replaceSelection("",null,"cut"));18!=b||/\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className)||Pe(this)}}function Pe(a){function b(a){18!=a.keyCode&&a.altKey||(Ye(c,"CodeMirror-crosshair"),Ib(document,"keyup",b),Ib(document,"mouseover",b))}var c=a.display.lineDiv;Ze(c,"CodeMirror-crosshair");wa(document,"keyup",b);wa(document,"mouseover",b)}function le(a){16==a.keyCode&&(this.doc.sel.shift=!1);cc(this,
a)}function Qe(a){if(!(cc(this,a)||a.ctrlKey&&!a.altKey||Zb&&a.metaKey)){var b=a.keyCode,c=a.charCode;Yb&&b==kf?(kf=null,F(a)):(Yb&&(!a.which||10>a.which)||df)&&ke(this,a)||(b=String.fromCharCode(null==c?b:c),Fd(this,a,b)||(La&&9<=bb&&(this.display.inputHasSelection=null),Ub(this)))}}function rc(a){"nocursor"!=a.options.readOnly&&(a.state.focused||(Qa(a,"focus",a),a.state.focused=!0,Ze(a.display.wrapper,"CodeMirror-focused"),a.curOp||a.display.selForContextMenu==a.doc.sel||($a(a),Gb&&setTimeout(oc($a,
a,!0),0))),zb(a),Ya(a))}function Qb(a){a.state.focused&&(Qa(a,"blur",a),a.state.focused=!1,Ye(a.display.wrapper,"CodeMirror-focused"));clearInterval(a.display.blinker);setTimeout(function(){a.state.focused||(a.display.shift=!1)},150)}function me(a,b){function c(){if(null!=e.input.selectionStart){var b=a.somethingSelected(),d=e.input.value="\u200b"+(b?e.input.value:"");e.prevInput=b?"":"\u200b";e.input.selectionStart=1;e.input.selectionEnd=d.length;e.selForContextMenu=a.doc.sel}}function d(){e.inputDiv.style.position=
"relative";e.input.style.cssText=h;La&&9>bb&&(e.scrollbarV.scrollTop=e.scroller.scrollTop=f);zb(a);if(null!=e.input.selectionStart){(!La||La&&9>bb)&&c();var b=0,g=function(){e.selForContextMenu==a.doc.sel&&0==e.input.selectionStart?va(a,mf.selectAll)(a):10>b++?e.detectingSelectAll=setTimeout(g,500):$a(a)};e.detectingSelectAll=setTimeout(g,200)}}if(!cc(a,b,"contextmenu")){var e=a.display;if(!Hb(e,b)&&!Re(a,b)){var g=qc(a,b),f=e.scroller.scrollTop;if(g&&!Yb){a.options.resetSelectionOnContextMenu&&-1==
a.doc.sel.contains(g)&&va(a,Ka)(a.doc,sa(g),fd);var h=e.input.style.cssText;e.inputDiv.style.position="absolute";e.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(b.clientY-5)+"px; left: "+(b.clientX-5)+"px; z-index: 1000; background: "+(La?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";if(Gb)var l=window.scrollY;ob(a);Gb&&window.scrollTo(null,l);$a(a);a.somethingSelected()||
(e.input.value=e.prevInput=" ");e.selForContextMenu=a.doc.sel;clearTimeout(e.detectingSelectAll);La&&9<=bb&&c();if(zc){tc(b);var m=function(){Ib(window,"mouseup",m);setTimeout(d,20)};wa(window,"mouseup",m)}else setTimeout(d,50)}}}}function Re(a,b){return dc(a,"gutterContextMenu")?mc(a,b,"gutterContextMenu",!1,Qa):!1}function Gd(a,b){if(0>Ha(a,b.from))return a;if(0>=Ha(a,b.to))return wb(b);var c=a.line+b.text.length-(b.to.line-b.from.line)-1,d=a.ch;a.line==b.to.line&&(d+=wb(b).ch-b.to.ch);return ia(c,
d)}function Hd(a,b){for(var c=[],d=0;d<a.sel.ranges.length;d++){var e=a.sel.ranges[d];c.push(new W(Gd(e.anchor,b),Gd(e.head,b)))}return la(c,a.sel.primIndex)}function ne(a,b,c){return a.line==b.line?ia(c.line,a.ch-b.ch+c.ch):ia(c.line+(a.line-b.line),a.ch)}function Se(a,b,c){b={canceled:!1,from:b.from,to:b.to,text:b.text,origin:b.origin,cancel:function(){this.canceled=!0}};c&&(b.update=function(b,c,d,e){b&&(this.from=aa(a,b));c&&(this.to=aa(a,c));d&&(this.text=d);void 0!==e&&(this.origin=e)});Qa(a,
"beforeChange",a,b);a.cm&&Qa(a.cm,"beforeChange",a.cm,b);return b.canceled?null:{from:b.from,to:b.to,text:b.text,origin:b.origin}}function Lc(a,b,c){if(a.cm){if(!a.cm.curOp)return va(a.cm,Lc)(a,b,c);if(a.cm.state.suppressEdits)return}if(dc(a,"beforeChange")||a.cm&&dc(a.cm,"beforeChange"))if(b=Se(a,b,!0),!b)return;if(c=ff&&!c&&Wf(a,b.from,b.to))for(var d=c.length-1;0<=d;--d)hc(a,{from:c[d].from,to:c[d].to,text:d?[""]:b.text});else hc(a,b)}function hc(a,b){if(1!=b.text.length||""!=b.text[0]||0!=Ha(b.from,
b.to)){var c=Hd(a,b);dg(a,b,c,a.cm?a.cm.curOp.id:NaN);Zc(a,b,c,tf(a,b));var d=[];Vc(a,function(a,c){c||-1!=Fb(d,a.history)||(Zf(a.history,b),d.push(a.history));Zc(a,b,null,tf(a,b))})}}function Yc(a,b,c){if(!a.cm||!a.cm.state.suppressEdits){for(var d=a.history,e,g=a.sel,f="undo"==b?d.done:d.undone,h="undo"==b?d.undone:d.done,l=0;l<f.length&&(e=f[l],c?!e.ranges||e.equals(a.sel):e.ranges);l++);if(l!=f.length){for(d.lastOrigin=d.lastSelOrigin=null;;)if(e=f.pop(),e.ranges){ie(e,h);if(c&&!e.equals(a.sel)){Ka(a,
e,{clearRedo:!1});return}g=e}else break;c=[];ie(g,h);h.push({changes:c,generation:d.generation});d.generation=e.generation||++d.maxGeneration;d=dc(a,"beforeChange")||a.cm&&dc(a.cm,"beforeChange");for(l=e.changes.length-1;0<=l;--l){var m=e.changes[l];m.origin=b;if(d&&!Se(a,m,!1)){f.length=0;break}c.push(Fc(a,m));g=l?Hd(a,m):fb(f);Zc(a,m,g,uf(a,m));!l&&a.cm&&a.cm.scrollIntoView({from:m.from,to:wb(m)});var p=[];Vc(a,function(a,b){b||-1!=Fb(p,a.history)||(Zf(a.history,m),p.push(a.history));Zc(a,m,null,
uf(a,m))})}}}}function hd(a,b){if(0!=b&&(a.first+=b,a.sel=new S(de(a.sel.ranges,function(a){return new W(ia(a.anchor.line+b,a.anchor.ch),ia(a.head.line+b,a.head.ch))}),a.sel.primIndex),a.cm)){Y(a.cm,a.first,a.first-b,b);for(var c=a.cm.display,d=c.viewFrom;d<c.viewTo;d++)Ba(a.cm,d,"gutter")}}function Zc(a,b,c,d){if(a.cm&&!a.cm.curOp)return va(a.cm,Zc)(a,b,c,d);if(b.to.line<a.first)hd(a,b.text.length-1-(b.to.line-b.from.line));else if(!(b.from.line>a.lastLine())){if(b.from.line<a.first){var e=b.text.length-
1-(a.first-b.from.line);hd(a,e);b={from:ia(a.first,0),to:ia(b.to.line+e,b.to.ch),text:[fb(b.text)],origin:b.origin}}e=a.lastLine();b.to.line>e&&(b={from:b.from,to:ia(e,ua(a,e).text.length),text:[b.text[0]],origin:b.origin});b.removed=ge(a,b.from,b.to);c||(c=Hd(a,b));a.cm?Te(a.cm,b,d):Cd(a,b,d);Fa(a,c,fd)}}function Te(a,b,c){var e=a.doc,g=a.display,f=b.from,h=b.to,l=!1,m=f.line;a.options.lineWrapping||(m=gb(bc(ua(e,f.line))),e.iter(m,h.line+1,function(a){if(a==g.maxLine)return l=!0}));-1<e.sel.contains(b.from,
b.to)&&wf(a);Cd(e,b,c,d(a));a.options.lineWrapping||(e.iter(m,f.line+b.text.length,function(a){var b=p(a);b>g.maxLineLength&&(g.maxLine=a,g.maxLineLength=b,g.maxLineChanged=!0,l=!1)}),l&&(a.curOp.updateMaxLine=!0));e.frontier=Math.min(e.frontier,f.line);cb(a,400);c=b.text.length-(h.line-f.line)-1;f.line!=h.line||1!=b.text.length||Le(a.doc,b)?Y(a,f.line,h.line+1,c):Ba(a,f.line,"text");c=dc(a,"changes");if((e=dc(a,"change"))||c)b={from:f,to:h,text:b.text,removed:b.removed,origin:b.origin},e&&yb(a,"change",
a,b),c&&(a.curOp.changeObjs||(a.curOp.changeObjs=[])).push(b);a.display.selForContextMenu=null}function Id(a,b,c,d,e){d||(d=c);if(0>Ha(d,c)){var g=d;d=c;c=g}"string"==typeof b&&(b=Ga(b));Lc(a,{from:c,to:d,text:b,origin:e})}function nd(a,b,c,d,e){var g=a.display,f=Cb(a.display);0>c&&(c=0);var h=a.curOp&&null!=a.curOp.scrollTop?a.curOp.scrollTop:g.scroller.scrollTop,l=g.scroller.clientHeight-Dc,m={};e-c>l&&(e=c+l);var p=a.doc.height+Aa(g),q=c<f,f=e>p-f;c<h?m.scrollTop=q?0:c:e>h+l&&(e=Math.min(c,(f?
p:e)-l),e!=h&&(m.scrollTop=e));a=a.curOp&&null!=a.curOp.scrollLeft?a.curOp.scrollLeft:g.scroller.scrollLeft;g=g.scroller.clientWidth-Dc-g.gutters.offsetWidth;(h=d-b>g)&&(d=c+l);10>b?m.scrollLeft=0:b<a?m.scrollLeft=Math.max(0,b-(h?0:10)):d>g+a-3&&(m.scrollLeft=d+(h?0:10)-g);return m}function od(a,b,c){null==b&&null==c||Rb(a);null!=b&&(a.curOp.scrollLeft=(null==a.curOp.scrollLeft?a.doc.scrollLeft:a.curOp.scrollLeft)+b);null!=c&&(a.curOp.scrollTop=(null==a.curOp.scrollTop?a.doc.scrollTop:a.curOp.scrollTop)+
c)}function Vb(a){Rb(a);var b=a.getCursor(),c=b,d=b;a.options.lineWrapping||(c=b.ch?ia(b.line,b.ch-1):b,d=ia(b.line,b.ch+1));a.curOp.scrollToPos={from:c,to:d,margin:a.options.cursorScrollMargin,isCursor:!0}}function Rb(a){var b=a.curOp.scrollToPos;if(b){a.curOp.scrollToPos=null;var c=ub(a,b.from),d=ub(a,b.to),b=nd(a,Math.min(c.left,d.left),Math.min(c.top,d.top)-b.margin,Math.max(c.right,d.right),Math.max(c.bottom,d.bottom)+b.margin);a.scrollTo(b.scrollLeft,b.scrollTop)}}function Ob(a,b,c,d){var e=
a.doc,g;null==c&&(c="add");"smart"==c&&(e.mode.indent?g=na(a,b):c="prev");var f=a.options.tabSize,h=ua(e,b),l=lc(h.text,null,f);h.stateAfter&&(h.stateAfter=null);var m=h.text.match(/^\s*/)[0],p;if(!d&&!/\S/.test(h.text))p=0,c="not";else if("smart"==c&&(p=e.mode.indent(g,h.text.slice(m.length),h.text),p==De||150<p)){if(!d)return;c="prev"}"prev"==c?p=b>e.first?lc(ua(e,b-1).text,null,f):0:"add"==c?p=l+a.options.indentUnit:"subtract"==c?p=l-a.options.indentUnit:"number"==typeof c&&(p=l+c);p=Math.max(0,
p);c="";d=0;if(a.options.indentWithTabs)for(a=Math.floor(p/f);a;--a)d+=f,c+="\t";d<p&&(c+=Yf(p-d));if(c!=m)Id(e,c,ia(b,0),ia(b,m.length),"+input");else for(a=0;a<e.sel.ranges.length;a++)if(f=e.sel.ranges[a],f.head.line==b&&f.head.ch<m.length){d=ia(b,m.length);pa(e,a,new W(d,d));break}h.stateAfter=null}function Mc(a,b,c,d){var e=b,g=b;"number"==typeof b?g=ua(a,Math.max(a.first,Math.min(b,a.first+a.size-1))):e=gb(b);if(null==e)return null;d(g,e)&&a.cm&&Ba(a.cm,e,c);return g}function Wb(a,b){for(var c=
a.doc.sel.ranges,d=[],e=0;e<c.length;e++){for(var g=b(c[e]);d.length&&0>=Ha(g.from,fb(d).to);){var f=d.pop();if(0>Ha(f.from,g.from)){g.from=f.from;break}}d.push(g)}ab(a,function(){for(var b=d.length-1;0<=b;b--)Id(a.doc,"",d[b].from,d[b].to,"+delete");Vb(a)})}function Ec(a,b,c,d,e){function g(b){var d=(e?bf:Mf)(m,h,c,!0);if(null==d){if(b=!b)b=f+c,b<a.first||b>=a.first+a.size?b=p=!1:(f=b,b=m=ua(a,b));if(b)h=e?(0>c?af:$e)(m):0>c?m.text.length:0;else return p=!1}else h=d;return!0}var f=b.line,h=b.ch,
l=c,m=ua(a,f),p=!0;if("char"==d)g();else if("column"==d)g(!0);else if("word"==d||"group"==d){var q=null;d="group"==d;b=a.cm&&a.cm.getHelper(b,"wordChars");for(var r=!0;!(0>c)||g(!r);r=!1){var n=m.text.charAt(h)||"\n",n=Me(n,b)?"w":d&&"\n"==n?"n":!d||/\s/.test(n)?null:"p";!d||r||n||(n="s");if(q&&q!=n){0>c&&(c=1,g());break}n&&(q=n);if(0<c&&!g(!r))break}}l=Xa(a,ia(f,h),l,!0);p||(l.hitSide=!0);return l}function Nc(a,b,c,d){var e=a.doc,g=b.left,f;"page"==d?(f=Math.min(a.display.wrapper.clientHeight,window.innerHeight||
document.documentElement.clientHeight),f=b.top+c*(f-(0>c?1.5:.5)*Cb(a.display))):"line"==d&&(f=0<c?b.bottom+3:b.top-3);for(;;){b=Ja(a,g,f);if(!b.outside)break;if(0>c?0>=f:f>=e.height){b.hitSide=!0;break}f+=5*c}return b}function Jd(a,b){var c=ua(a.doc,b.line).text,d=b.ch,e=b.ch;if(c){var g=a.getHelper(b,"wordChars");(0>b.xRel||e==c.length)&&d?--d:++e;for(var f=c.charAt(d),f=Me(f,g)?function(a){return Me(a,g)}:/\s/.test(f)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&!Me(a)};0<d&&
f(c.charAt(d-1));)--d;for(;e<c.length&&f(c.charAt(e));)++e}return new W(ia(b.line,d),ia(b.line,e))}function za(b,c,d,e){a.defaults[b]=c;d&&(dd[b]=e?function(a,b,c){c!=ye&&d(a,b,c)}:d)}function Kd(a){return"string"==typeof a?Cc[a]:a}function Pb(a,b,c,d,e){if(d&&d.shared)return Tc(a,b,c,d,e);if(a.cm&&!a.cm.curOp)return va(a.cm,Pb)(a,b,c,d,e);var g=new kc(a,e);e=Ha(b,c);d&&Jc(d,g,!1);if(0<e||0==e&&!1!==g.clearWhenEmpty)return g;g.replacedWith&&(g.collapsed=!0,g.widgetNode=ra("span",[g.replacedWith],
"CodeMirror-widget"),d.handleMouseEvents||(g.widgetNode.ignoreEvents=!0),d.insertLeft&&(g.widgetNode.insertLeft=!0));if(g.collapsed){if(Ad(a,b.line,b,c,g)||b.line!=c.line&&Ad(a,c.line,b,c,g))throw Error("Inserting collapsed marker partially overlapping an existing one");Ac=!0}g.addToHistory&&dg(a,{from:b,to:c,origin:"markText"},a.sel,NaN);var f=b.line,h=a.cm,l;a.iter(f,c.line+1,function(a){h&&g.collapsed&&!h.options.lineWrapping&&bc(a)==h.display.maxLine&&(l=!0);g.collapsed&&f!=b.line&&fc(a,0);var d=
new xd(g,f==b.line?b.ch:null,f==c.line?c.ch:null);a.markedSpans=a.markedSpans?a.markedSpans.concat([d]):[d];d.marker.attachLine(a);++f});g.collapsed&&a.iter(b.line,c.line+1,function(b){Uc(a,b)&&fc(b,0)});g.clearOnEnter&&wa(g,"beforeCursorEnter",function(){g.clear()});g.readOnly&&(ff=!0,(a.history.done.length||a.history.undone.length)&&a.clearHistory());g.collapsed&&(g.id=++Pf,g.atomic=!0);if(h){l&&(h.curOp.updateMaxLine=!0);if(g.collapsed)Y(h,b.line,c.line+1);else if(g.className||g.title||g.startStyle||
g.endStyle)for(d=b.line;d<=c.line;d++)Ba(h,d,"text");g.atomic&&pb(h.doc);yb(h,"markerAdded",h,g)}return g}function Tc(a,b,c,d,e){d=Jc(d);d.shared=!1;var g=[Pb(a,b,c,d,e)],f=g[0],h=d.widgetNode;Vc(a,function(a){h&&(d.widgetNode=h.cloneNode(!0));g.push(Pb(a,aa(a,b),aa(a,c),d,e));for(var l=0;l<a.linked.length;++l)if(a.linked[l].isParent)return;f=fb(g)});return new of(g,f)}function Ld(a){return a.findMarks(ia(a.first,0),a.clipPos(ia(a.lastLine())),function(a){return a.parent})}function Vf(a){for(var b=
0;b<a.length;b++){var c=a[b],d=[c.primary.doc];Vc(c.primary.doc,function(a){d.push(a)});for(var e=0;e<c.markers.length;e++){var g=c.markers[e];-1==Fb(d,g.doc)&&(g.parent=null,c.markers.splice(e--,1))}}}function xd(a,b,c){this.marker=a;this.from=b;this.to=c}function gd(a,b){if(a)for(var c=0;c<a.length;++c){var d=a[c];if(d.marker==b)return d}}function tf(a,b){var c=ea(a,b.from.line)&&ua(a,b.from.line).markedSpans,d=ea(a,b.to.line)&&ua(a,b.to.line).markedSpans;if(!c&&!d)return null;var e=b.from.ch,g=
b.to.ch,f=0==Ha(b.from,b.to);if(c)for(var h=0,l;h<c.length;++h){var m=c[h],p=m.marker;if(null==m.from||(p.inclusiveLeft?m.from<=e:m.from<e)||!(m.from!=e||"bookmark"!=p.type||f&&m.marker.insertLeft)){var q=null==m.to||(p.inclusiveRight?m.to>=e:m.to>e);(l||(l=[])).push(new xd(p,m.from,q?null:m.to))}}c=l;if(d)for(var h=0,r;h<d.length;++h)if(l=d[h],m=l.marker,null==l.to||(m.inclusiveRight?l.to>=g:l.to>g)||l.from==g&&"bookmark"==m.type&&(!f||l.marker.insertLeft))p=null==l.from||(m.inclusiveLeft?l.from<=
g:l.from<g),(r||(r=[])).push(new xd(m,p?null:l.from-g,null==l.to?null:l.to-g));d=r;f=1==b.text.length;r=fb(b.text).length+(f?e:0);if(c)for(g=0;g<c.length;++g)if(h=c[g],null==h.to)(l=gd(d,h.marker),l)?f&&(h.to=null==l.to?null:l.to+r):h.to=e;if(d)for(g=0;g<d.length;++g)h=d[g],null!=h.to&&(h.to+=r),null==h.from?(l=gd(c,h.marker),l||(h.from=r,f&&(c||(c=[])).push(h))):(h.from+=r,f&&(c||(c=[])).push(h));c&&(c=Sc(c));d&&d!=c&&(d=Sc(d));e=[c];if(!f){var f=b.text.length-2,n;if(0<f&&c)for(g=0;g<c.length;++g)null==
c[g].to&&(n||(n=[])).push(new xd(c[g].marker,null,null));for(g=0;g<f;++g)e.push(n);e.push(d)}return e}function Sc(a){for(var b=0;b<a.length;++b){var c=a[b];null!=c.from&&c.from==c.to&&!1!==c.marker.clearWhenEmpty&&a.splice(b--,1)}return a.length?a:null}function uf(a,b){var c;if(c=b["spans_"+a.id]){for(var d=0,e=[];d<b.text.length;++d)e.push(Sg(c[d]));c=e}else c=null;d=tf(a,b);if(!c)return d;if(!d)return c;for(e=0;e<c.length;++e){var g=c[e],f=d[e];if(g&&f){var h=0;a:for(;h<f.length;++h){for(var l=
f[h],m=0;m<g.length;++m)if(g[m].marker==l.marker)continue a;g.push(l)}}else f&&(c[e]=f)}return c}function Wf(a,b,c){var d=null;a.iter(b.line,c.line+1,function(a){if(a.markedSpans)for(var b=0;b<a.markedSpans.length;++b){var c=a.markedSpans[b].marker;!c.readOnly||d&&-1!=Fb(d,c)||(d||(d=[])).push(c)}});if(!d)return null;a=[{from:b,to:c}];for(b=0;b<d.length;++b){c=d[b];for(var e=c.find(0),g=0;g<a.length;++g){var f=a[g];if(!(0>Ha(f.to,e.from)||0<Ha(f.from,e.to))){var h=[g,1],l=Ha(f.from,e.from),m=Ha(f.to,
e.to);(0>l||!c.inclusiveLeft&&!l)&&h.push({from:f.from,to:e.from});(0<m||!c.inclusiveRight&&!m)&&h.push({from:e.to,to:f.to});a.splice.apply(a,h);g+=h.length-1}}}return a}function Zd(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c)b[c].marker.detachLine(a);a.markedSpans=null}}function vf(a,b){if(b){for(var c=0;c<b.length;++c)b[c].marker.attachLine(a);a.markedSpans=b}}function Ge(a,b){var c=a.lines.length-b.lines.length;if(0!=c)return c;var c=a.find(),d=b.find(),e=Ha(c.from,d.from)||(a.inclusiveLeft?
-1:0)-(b.inclusiveLeft?-1:0);return e?-e:(c=Ha(c.to,d.to)||(a.inclusiveRight?1:0)-(b.inclusiveRight?1:0))?c:b.id-a.id}function Tb(a,b){var c=Ac&&a.markedSpans,d;if(c)for(var e,g=0;g<c.length;++g)e=c[g],e.marker.collapsed&&null==(b?e.from:e.to)&&(!d||0>Ge(d,e.marker))&&(d=e.marker);return d}function Ad(a,b,c,d,e){a=ua(a,b);if(a=Ac&&a.markedSpans)for(b=0;b<a.length;++b){var g=a[b];if(g.marker.collapsed){var f=g.marker.find(0),h=Ha(f.from,c)||(g.marker.inclusiveLeft?-1:0)-(e.inclusiveLeft?-1:0),l=Ha(f.to,
d)||(g.marker.inclusiveRight?1:0)-(e.inclusiveRight?1:0);if(!(0<=h&&0>=l||0>=h&&0<=l)&&(0>=h&&(0<Ha(f.to,c)||g.marker.inclusiveRight&&e.inclusiveLeft)||0<=h&&(0>Ha(f.from,d)||g.marker.inclusiveLeft&&e.inclusiveRight)))return!0}}}function bc(a){for(var b;b=Tb(a,!0);)a=b.find(-1,!0).line;return a}function $d(a,b){var c=ua(a,b),d=bc(c);return c==d?b:gb(d)}function He(a,b){if(b>a.lastLine())return b;var c=ua(a,b),d;if(!Uc(a,c))return b;for(;d=Tb(c,!1);)c=d.find(1,!0).line;return gb(c)+1}function Uc(a,
b){var c=Ac&&b.markedSpans;if(c)for(var d,e=0;e<c.length;++e)if(d=c[e],d.marker.collapsed&&(null==d.from||!d.marker.widgetNode&&0==d.from&&d.marker.inclusiveLeft&&Ie(a,b,d)))return!0}function Ie(a,b,c){if(null==c.to)return b=c.marker.find(1,!0),Ie(a,b.line,gd(b.line.markedSpans,c.marker));if(c.marker.inclusiveRight&&c.to==b.text.length)return!0;for(var d,e=0;e<b.markedSpans.length;++e)if(d=b.markedSpans[e],d.marker.collapsed&&!d.marker.widgetNode&&d.from==c.to&&(null==d.to||d.to!=c.from)&&(d.marker.inclusiveLeft||
c.marker.inclusiveRight)&&Ie(a,b,d))return!0}function ae(a){if(null!=a.height)return a.height;var b;a:{b=document.body;var c=a.node;if(b.contains)b=b.contains(c);else{for(;c=c.parentNode;)if(c==b){b=!0;break a}b=void 0}}b||(b="position: relative;",a.coverGutter&&(b+="margin-left: -"+a.cm.getGutterElement().offsetWidth+"px;"),jc(a.cm.display.measure,ra("div",[a.node],null,b)));return a.height=a.node.offsetHeight}function $f(a,b,c,d){var e=new vd(a,c,d);e.noHScroll&&(a.display.alignWidgets=!0);Mc(a.doc,
b,"widget",function(b){var c=b.widgets||(b.widgets=[]);null==e.insertAt?c.push(e):c.splice(Math.min(c.length-1,Math.max(0,e.insertAt)),0,e);e.line=b;Uc(a.doc,b)||(c=ec(b)<a.doc.scrollTop,fc(b,b.height+ae(e)),c&&od(a,null,e.height),a.curOp.forceUpdate=!0);return!0});return e}function Ne(a,b){if(a)for(;;){var c=a.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!c)break;a=a.slice(0,c.index)+a.slice(c.index+c[0].length);var d=c[1]?"bgClass":"textClass";null==b[d]?b[d]=c[2]:(new RegExp("(?:^|s)"+c[2]+"(?:$|s)")).test(b[d])||
(b[d]+=" "+c[2])}return a}function zf(b,c){if(b.blankLine)return b.blankLine(c);if(b.innerMode){var d=a.innerMode(b,c);if(d.mode.blankLine)return d.mode.blankLine(d.state)}}function Je(a,b,c){for(var d=0;10>d;d++){var e=a.token(b,c);if(b.pos>b.start)return e}throw Error("Mode "+a.name+" failed to advance stream.");}function Ef(b,c,d,e,g,f,h){var l=d.flattenSpans;null==l&&(l=b.options.flattenSpans);var m=0,p=null,q=new Be(c,b.options.tabSize),r;for(""==c&&Ne(zf(d,e),f);!q.eol();){q.pos>b.options.maxHighlightLength?
(l=!1,h&&Wc(b,c,e,q.pos),q.pos=c.length,r=null):r=Ne(Je(d,q,e),f);if(b.options.addModeClass){var n=a.innerMode(d,e).mode.name;n&&(r="m-"+(r?n+" "+r:n))}l&&p==r||(m<q.start&&g(q.start,p),m=q.start,p=r);q.start=q.pos}for(;m<q.pos;)b=Math.min(q.pos,m+5E4),g(b,p),m=b}function bg(a,b,c,d){var e=[a.state.modeGen],g={};Ef(a,b.text,a.doc.mode,c,function(a,b){e.push(a,b)},g,d);for(c=0;c<a.state.overlays.length;++c){var f=a.state.overlays[c],h=1,l=0;Ef(a,b.text,f.mode,!0,function(a,b){for(var c=h;l<a;){var d=
e[h];d>a&&e.splice(h,1,a,e[h+1],d);h+=2;l=Math.min(a,d)}if(b)if(f.opaque)e.splice(c,h-c,a,"cm-overlay "+b),h=c+2;else for(;c<h;c+=2)d=e[c+1],e[c+1]=(d?d+" ":"")+"cm-overlay "+b},g)}return{styles:e,classes:g.bgClass||g.textClass?g:null}}function jd(a,b){if(!b.styles||b.styles[0]!=a.state.modeGen){var c=bg(a,b,b.stateAfter=na(a,gb(b)));b.styles=c.styles;c.classes?b.styleClasses=c.classes:b.styleClasses&&(b.styleClasses=null)}return b.styles}function Wc(a,b,c,d){var e=a.doc.mode,g=new Be(b,a.options.tabSize);
g.start=g.pos=d||0;for(""==b&&zf(e,c);!g.eol()&&g.pos<=a.options.maxHighlightLength;)Je(e,g,c),g.start=g.pos}function cg(a,b){if(!a||/^\s*$/.test(a))return null;var c=b.addModeClass?Qf:zg;return c[a]||(c[a]=a.replace(/\S+/g,"cm-$&"))}function Bf(a,b){var c=ra("span",null,null,Gb?"padding-right: .1px":null),c={pre:ra("pre",[c]),content:c,col:0,pos:0,cm:a};b.measure={};for(var d=0;d<=(b.rest?b.rest.length:0);d++){var e=d?b.rest[d-1]:b.line,g;c.pos=0;c.addToken=be;(La||Gb)&&a.getOption("lineWrapping")&&
(c.addToken=Rg(c.addToken));var f;if(null!=Ue)f=Ue;else{f=jc(a.display.measure,document.createTextNode("A\u062eA"));var h=Xd(f,0,1).getBoundingClientRect();f=h.left==h.right?!1:Ue=3>Xd(f,1,2).getBoundingClientRect().right-h.right}f&&(g=Bb(e))&&(c.addToken=Oe(c.addToken,g));c.map=[];a:{f=c;var h=jd(a,e),l=e.markedSpans,m=e.text,p=0;if(l)for(var q=m.length,r=0,n=1,t="",u=void 0,w=0,y=void 0,x=void 0,z=void 0,B=void 0,A=void 0;;){if(w==r){for(var y=x=z=B="",A=null,w=Infinity,G=[],C=0;C<l.length;++C){var D=
l[C],v=D.marker;D.from<=r&&(null==D.to||D.to>r)?(null!=D.to&&w>D.to&&(w=D.to,x=""),v.className&&(y+=" "+v.className),v.startStyle&&D.from==r&&(z+=" "+v.startStyle),v.endStyle&&D.to==w&&(x+=" "+v.endStyle),v.title&&!B&&(B=v.title),v.collapsed&&(!A||0>Ge(A.marker,v))&&(A=D)):D.from>r&&w>D.from&&(w=D.from);"bookmark"==v.type&&D.from==r&&v.widgetNode&&G.push(v)}if(A&&(A.from||0)==r&&(ce(f,(null==A.to?q+1:A.to)-r,A.marker,null==A.from),null==A.to))break a;if(!A&&G.length)for(C=0;C<G.length;++C)ce(f,0,
G[C])}if(r>=q)break;for(G=Math.min(q,w);;){if(t){C=r+t.length;A||(D=C>G?t.slice(0,G-r):t,f.addToken(f,D,u?u+y:y,z,r+D.length==w?x:"",B));if(C>=G){t=t.slice(G-r);r=G;break}r=C;z=""}t=m.slice(p,p=h[n++]);u=cg(h[n++],f.cm.options)}}else for(var n=1;n<h.length;n+=2)f.addToken(f,m.slice(p,p=h[n]),cg(h[n+1],f.cm.options))}e.styleClasses&&(e.styleClasses.bgClass&&(c.bgClass=Jf(e.styleClasses.bgClass,c.bgClass||"")),e.styleClasses.textClass&&(c.textClass=Jf(e.styleClasses.textClass,c.textClass||"")));0==
c.map.length&&c.map.push(0,0,c.content.appendChild(rg(a.display.measure)));0==d?(b.measure.map=c.map,b.measure.cache={}):((b.measure.maps||(b.measure.maps=[])).push(c.map),(b.measure.caches||(b.measure.caches=[])).push({}))}Qa(a,"renderLine",a,b.line,c.pre);c.pre.className&&(c.textClass=Jf(c.pre.className,c.textClass||""));return c}function be(a,b,c,d,e,g){if(b){var f=a.cm.options.specialChars,h=!1;if(f.test(b))for(var l=document.createDocumentFragment(),m=0;;){f.lastIndex=m;var p=f.exec(b),q=p?p.index-
m:b.length-m;if(q){var r=document.createTextNode(b.slice(m,m+q));La&&9>bb?l.appendChild(ra("span",[r])):l.appendChild(r);a.map.push(a.pos,a.pos+q,r);a.col+=q;a.pos+=q}if(!p)break;m+=q+1;"\t"==p[0]?(r=a.cm.options.tabSize,p=r-a.col%r,r=l.appendChild(ra("span",Yf(p),"cm-tab")),a.col+=p):(r=a.cm.options.specialCharPlaceholder(p[0]),La&&9>bb?l.appendChild(ra("span",[r])):l.appendChild(r),a.col+=1);a.map.push(a.pos,a.pos+1,r);a.pos++}else{a.col+=b.length;var l=document.createTextNode(b);a.map.push(a.pos,
a.pos+b.length,l);La&&9>bb&&(h=!0);a.pos+=b.length}if(c||d||e||h)return b=c||"",d&&(b+=d),e&&(b+=e),d=ra("span",[l],b),g&&(d.title=g),a.content.appendChild(d);a.content.appendChild(l)}}function Rg(a){function b(a){for(var c=" ",d=0;d<a.length-2;++d)c+=d%2?" ":"\u00a0";return c+" "}return function(c,d,e,g,f,h){a(c,d.replace(/ {3,}/g,b),e,g,f,h)}}function Oe(a,b){return function(c,d,e,g,f,h){e=e?e+" cm-force-border":"cm-force-border";for(var l=c.pos,m=l+d.length;;){for(var p=0;p<b.length;p++){var q=
b[p];if(q.to>l&&q.from<=l)break}if(q.to>=m)return a(c,d,e,g,f,h);a(c,d.slice(0,q.to-l),e,g,null,h);g=null;d=d.slice(q.to-l);l=q.to}}}function ce(a,b,c,d){if(c=!d&&c.widgetNode)a.map.push(a.pos,a.pos+b,c),a.content.appendChild(c);a.pos+=b}function Le(a,b){return 0==b.from.ch&&0==b.to.ch&&""==fb(b.text)&&(!a.cm||a.cm.options.wholeLineUpdateBefore)}function Cd(a,b,c,d){function e(a,c,g){a.text=c;a.stateAfter&&(a.stateAfter=null);a.styles&&(a.styles=null);null!=a.order&&(a.order=null);Zd(a);vf(a,g);c=
d?d(a):1;c!=a.height&&fc(a,c);yb(a,"change",a,b)}var g=b.from,f=b.to,h=b.text,l=ua(a,g.line),m=ua(a,f.line),p=fb(h),q=c?c[h.length-1]:null,r=f.line-g.line;if(Le(a,b)){for(var n=0,t=[];n<h.length-1;++n)t.push(new ed(h[n],c?c[n]:null,d));e(m,m.text,q);r&&a.remove(g.line,r);t.length&&a.insert(g.line,t)}else if(l==m)if(1==h.length)e(l,l.text.slice(0,g.ch)+p+l.text.slice(f.ch),q);else{t=[];for(n=1;n<h.length-1;++n)t.push(new ed(h[n],c?c[n]:null,d));t.push(new ed(p+l.text.slice(f.ch),q,d));e(l,l.text.slice(0,
g.ch)+h[0],c?c[0]:null);a.insert(g.line+1,t)}else if(1==h.length)e(l,l.text.slice(0,g.ch)+h[0]+m.text.slice(f.ch),c?c[0]:null),a.remove(g.line+1,r);else{e(l,l.text.slice(0,g.ch)+h[0],c?c[0]:null);e(m,p+m.text.slice(f.ch),q);n=1;for(t=[];n<h.length-1;++n)t.push(new ed(h[n],c?c[n]:null,d));1<r&&a.remove(g.line+1,r-1);a.insert(g.line+1,t)}yb(a,"change",a,b)}function Gc(a){this.lines=a;this.parent=null;for(var b=0,c=0;b<a.length;++b)a[b].parent=this,c+=a[b].height;this.height=c}function Hc(a){this.children=
a;for(var b=0,c=0,d=0;d<a.length;++d){var e=a[d],b=b+e.chunkSize(),c=c+e.height;e.parent=this}this.size=b;this.height=c;this.parent=null}function Vc(a,b,c){function d(a,e,g){if(a.linked)for(var f=0;f<a.linked.length;++f){var h=a.linked[f];if(h.doc!=e){var l=g&&h.sharedHist;if(!c||l)b(h.doc,l),d(h.doc,a,l)}}}d(a,null,!0)}function Ke(a,b){if(b.cm)throw Error("This document is already in use.");a.doc=b;b.cm=a;f(a);c(a);a.options.lineWrapping||t(a);a.options.mode=b.modeOption;Y(a)}function ua(a,b){b-=
a.first;if(0>b||b>=a.size)throw Error("There is no line "+(b+a.first)+" in the document.");for(var c=a;!c.lines;)for(var d=0;;++d){var e=c.children[d],g=e.chunkSize();if(b<g){c=e;break}b-=g}return c.lines[b]}function ge(a,b,c){var d=[],e=b.line;a.iter(b.line,c.line+1,function(a){a=a.text;e==c.line&&(a=a.slice(0,c.ch));e==b.line&&(a=a.slice(b.ch));d.push(a);++e});return d}function Af(a,b,c){var d=[];a.iter(b,c,function(a){d.push(a.text)});return d}function fc(a,b){var c=b-a.height;if(c)for(var d=a;d;d=
d.parent)d.height+=c}function gb(a){if(null==a.parent)return null;var b=a.parent;a=Fb(b.lines,a);for(var c=b.parent;c;b=c,c=c.parent)for(var d=0;c.children[d]!=b;++d)a+=c.children[d].chunkSize();return a+b.first}function Ic(a,b){var c=a.first;a:do{for(var d=0;d<a.children.length;++d){var e=a.children[d],g=e.height;if(b<g){a=e;continue a}b-=g;c+=e.chunkSize()}return c}while(!a.lines);for(d=0;d<a.lines.length;++d){e=a.lines[d].height;if(b<e)break;b-=e}return c+d}function ec(a){a=bc(a);for(var b=0,c=
a.parent,d=0;d<c.lines.length;++d){var e=c.lines[d];if(e==a)break;else b+=e.height}for(a=c.parent;a;c=a,a=c.parent)for(d=0;d<a.children.length&&(e=a.children[d],e!=c);++d)b+=e.height;return b}function Bb(a){var b=a.order;null==b&&(b=a.order=Tg(a.text));return b}function he(a){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOrigin=this.lastSelOrigin=this.lastOp=this.lastSelOp=null;this.generation=this.maxGeneration=a||1}function Fc(a,b){var c={from:U(b.from),
to:wb(b),text:ge(a,b.from,b.to)};Df(a,c,b.from.line,b.to.line+1);Vc(a,function(a){Df(a,c,b.from.line,b.to.line+1)},!0);return c}function fe(a){for(;a.length;)if(fb(a).ranges)a.pop();else break}function dg(a,b,c,d){var e=a.history;e.undone.length=0;var g=+new Date,f,h;if(h=e.lastOp==d||e.lastOrigin==b.origin&&b.origin&&("+"==b.origin.charAt(0)&&a.cm&&e.lastModTime>g-a.cm.options.historyEventDelay||"*"==b.origin.charAt(0)))e.lastOp==d?(fe(e.done),f=fb(e.done)):e.done.length&&!fb(e.done).ranges?f=fb(e.done):
1<e.done.length&&!e.done[e.done.length-2].ranges?(e.done.pop(),f=fb(e.done)):f=void 0,h=f;if(h){var l=fb(f.changes);0==Ha(b.from,b.to)&&0==Ha(b.from,l.to)?l.to=wb(b):f.changes.push(Fc(a,b))}else for((f=fb(e.done))&&f.ranges||ie(a.sel,e.done),f={changes:[Fc(a,b)],generation:e.generation},e.done.push(f);e.done.length>e.undoDepth;)e.done.shift(),e.done[0].ranges||e.done.shift();e.done.push(c);e.generation=++e.maxGeneration;e.lastModTime=e.lastSelTime=g;e.lastOp=e.lastSelOp=d;e.lastOrigin=e.lastSelOrigin=
b.origin;l||Qa(a,"historyAdded")}function ie(a,b){var c=fb(b);c&&c.ranges&&c.equals(a)||b.push(a)}function Df(a,b,c,d){var e=b["spans_"+a.id],g=0;a.iter(Math.max(a.first,c),Math.min(a.first+a.size,d),function(c){c.markedSpans&&((e||(e=b["spans_"+a.id]={}))[g]=c.markedSpans);++g})}function Sg(a){if(!a)return null;for(var b=0,c;b<a.length;++b)a[b].marker.explicitlyCleared?c||(c=a.slice(0,b)):c&&c.push(a[b]);return c?c.length?c:null:a}function Dd(a,b,c){for(var d=0,e=[];d<a.length;++d){var g=a[d];if(g.ranges)e.push(c?
S.prototype.deepCopy.call(g):g);else{var g=g.changes,f=[];e.push({changes:f});for(var h=0;h<g.length;++h){var l=g[h],m;f.push({from:l.from,to:l.to,text:l.text});if(b)for(var p in l)(m=p.match(/^spans_(\d+)$/))&&-1<Fb(b,Number(m[1]))&&(fb(f)[p]=l[p],delete l[p])}}}return e}function eg(a,b,c,d){c<a.line?a.line+=d:b<a.line&&(a.line=b,a.ch=0)}function fg(a,b,c,d){for(var e=0;e<a.length;++e){var g=a[e],f=!0;if(g.ranges){g.copied||(g=a[e]=g.deepCopy(),g.copied=!0);for(var h=0;h<g.ranges.length;h++)eg(g.ranges[h].anchor,
b,c,d),eg(g.ranges[h].head,b,c,d)}else{for(h=0;h<g.changes.length;++h){var l=g.changes[h];if(c<l.from.line)l.from=ia(l.from.line+d,l.from.ch),l.to=ia(l.to.line+d,l.to.ch);else if(b<=l.to.line){f=!1;break}}f||(a.splice(0,e+1),e=0)}}}function Zf(a,b){var c=b.from.line,d=b.to.line,e=b.text.length-(d-c)-1;fg(a.done,c,d,e);fg(a.undone,c,d,e)}function Ff(a){return null!=a.defaultPrevented?a.defaultPrevented:0==a.returnValue}function gg(a){var b=a.which;null==b&&(a.button&1?b=1:a.button&2?b=3:a.button&4&&
(b=2));Zb&&a.ctrlKey&&1==b&&(b=3);return b}function yb(a,b){function c(a){return function(){a.apply(null,e)}}var d=a._handlers&&a._handlers[b];if(d){var e=Array.prototype.slice.call(arguments,2),g;ud?g=ud.delayedCallbacks:pf?g=pf:(g=pf=[],setTimeout(Xf,0));for(var f=0;f<d.length;++f)g.push(c(d[f]))}}function Xf(){var a=pf;pf=null;for(var b=0;b<a.length;++b)a[b]()}function cc(a,b,c){Qa(a,c||b.type,a,b);return Ff(b)||b.codemirrorIgnore}function wf(a){var b=a._handlers&&a._handlers.cursorActivity;if(b){a=
a.curOp.cursorActivityHandlers||(a.curOp.cursorActivityHandlers=[]);for(var c=0;c<b.length;++c)-1==Fb(a,b[c])&&a.push(b[c])}}function dc(a,b){var c=a._handlers&&a._handlers[b];return c&&0<c.length}function Bd(a){a.prototype.on=function(a,b){wa(this,a,b)};a.prototype.off=function(a,b){Ib(this,a,b)}}function xf(){this.id=null}function yf(a,b,c){for(var d=0,e=0;;){var g=a.indexOf("\t",d);-1==g&&(g=a.length);var f=g-d;if(g==a.length||e+f>=b)return d+Math.min(f,b-e);e+=g-d;e+=c-e%c;d=g+1;if(e>=b)return d}}
function Yf(a){for(;Ee.length<=a;)Ee.push(fb(Ee)+" ");return Ee[a]}function fb(a){return a[a.length-1]}function Fb(a,b){for(var c=0;c<a.length;++c)if(a[c]==b)return c;return-1}function de(a,b){for(var c=[],d=0;d<a.length;d++)c[d]=b(a[d],d);return c}function Cf(a,b){var c;Object.create?c=Object.create(a):(c=function(){},c.prototype=a,c=new c);b&&Jc(b,c);return c}function Jc(a,b,c){b||(b={});for(var d in a)!a.hasOwnProperty(d)||!1===c&&b.hasOwnProperty(d)||(b[d]=a[d]);return b}function oc(a){var b=
Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b)}}function Me(a,b){return b?-1<b.source.indexOf("\\w")&&oe(a)?!0:b.test(a):oe(a)}function ag(a){for(var b in a)if(a.hasOwnProperty(b)&&a[b])return!1;return!0}function ee(a){return 768<=a.charCodeAt(0)&&hg.test(a)}function ra(a,b,c,d){a=document.createElement(a);c&&(a.className=c);d&&(a.style.cssText=d);if("string"==typeof b)a.appendChild(document.createTextNode(b));else if(b)for(c=0;c<b.length;++c)a.appendChild(b[c]);
return a}function id(a){for(var b=a.childNodes.length;0<b;--b)a.removeChild(a.firstChild);return a}function jc(a,b){return id(a).appendChild(b)}function xc(){return document.activeElement}function se(a){return new RegExp("\\b"+a+"\\b\\s*")}function Ye(a,b){var c=se(b);c.test(a.className)&&(a.className=a.className.replace(c,""))}function Ze(a,b){se(b).test(a.className)||(a.className+=" "+b)}function Jf(a,b){for(var c=a.split(" "),d=0;d<c.length;d++)c[d]&&!se(c[d]).test(b)&&(b+=" "+c[d]);return b}function pg(a){if(document.body.getElementsByClassName)for(var b=
document.body.getElementsByClassName("CodeMirror"),c=0;c<b.length;c++){var d=b[c].CodeMirror;d&&a(d)}}function qg(){var a;wa(window,"resize",function(){null==a&&(a=setTimeout(function(){qd=a=null;pg(ac)},100))});wa(window,"blur",function(){pg(Qb)})}function Vg(a){if(null!=qd)return qd;var b=ra("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");jc(a,b);b.offsetWidth&&(qd=b.offsetHeight-b.clientHeight);return qd||0}function rg(a){if(null==Tf){var b=ra("span","\u200b");jc(a,ra("span",[b,
document.createTextNode("x")]));0!=a.firstChild.offsetHeight&&(Tf=1>=b.offsetWidth&&2<b.offsetHeight&&!(La&&8>bb))}return Tf?ra("span","\u200b"):ra("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px")}function Kf(a,b,c,d){if(!a)return d(b,c,"ltr");for(var e=!1,g=0;g<a.length;++g){var f=a[g];if(f.from<c&&f.to>b||b==c&&f.to==b)d(Math.max(f.from,b),Math.min(f.to,c),1==f.level?"rtl":"ltr"),e=!0}e||d(b,c,"ltr")}function te(a){return a.level%2?a.to:a.from}function Pd(a){return a.level%
2?a.from:a.to}function $e(a){return(a=Bb(a))?te(a[0]):0}function af(a){var b=Bb(a);return b?Pd(fb(b)):a.text.length}function sg(a,b){var c=ua(a.doc,b),d=bc(c);d!=c&&(b=gb(d));d=(c=Bb(d))?c[0].level%2?af(d):$e(d):0;return ia(b,d)}function yc(a,b){var c=sg(a,b.line),d=ua(a.doc,c.line),e=Bb(d);return e&&0!=e[0].level?c:(d=Math.max(0,d.text.search(/\S/)),ia(c.line,b.line==c.line&&b.ch<=d&&b.ch?0:d))}function Lf(a,b){Oc=null;for(var c=0,d;c<a.length;++c){var e=a[c];if(e.from<b&&e.to>b)return c;if(e.from==
b||e.to==b)if(null==d)d=c;else{var g;g=e.level;var f=a[d].level,h=a[0].level;g=g==h?!0:f==h?!1:g<f;if(g)return e.from!=e.to&&(Oc=d),c;e.from!=e.to&&(Oc=c);break}}return d}function ue(a,b,c,d){if(!d)return b+c;do b+=c;while(0<b&&ee(a.text.charAt(b)));return b}function bf(a,b,c,d){var e=Bb(a);if(!e)return Mf(a,b,c,d);var g=Lf(e,b),f=e[g];for(b=ue(a,b,f.level%2?-c:c,d);;){if(b>f.from&&b<f.to)return b;if(b==f.from||b==f.to){if(Lf(e,b)==g)return b;f=e[g+c];return 0<c==f.level%2?f.to:f.from}f=e[g+=c];if(!f)return null;
b=0<c==f.level%2?ue(a,f.to,-1,d):ue(a,f.from,1,d)}}function Mf(a,b,c,d){b+=c;if(d)for(;0<b&&ee(a.text.charAt(b));)b+=c;return 0>b||b>a.text.length?null:b}var Qd=/gecko\/\d/i.test(navigator.userAgent),tg=/MSIE \d/.test(navigator.userAgent),ug=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),La=tg||ug,bb=La&&(tg?document.documentMode||6:ug[1]),Gb=/WebKit\//.test(navigator.userAgent),Wg=Gb&&/Qt\/\d+\.\d+/.test(navigator.userAgent),vg=/Chrome\//.test(navigator.userAgent),Yb=/Opera\//.test(navigator.userAgent),
cf=/Apple Computer/.test(navigator.vendor),df=/KHTML\//.test(navigator.userAgent),Rd=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),ef=/PhantomJS/.test(navigator.userAgent),ve=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Sd=ve||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),Zb=ve||/Mac/.test(navigator.platform),Xg=/win/i.test(navigator.platform),bd=Yb&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);bd&&(bd=Number(bd[1]));
bd&&15<=bd&&(Yb=!1,Gb=!0);var gf=Zb&&(Wg||Yb&&(null==bd||12.11>bd)),zc=Qd||La&&9<=bb,ff=!1,Ac=!1,ia=a.Pos=function(a,b){if(!(this instanceof ia))return new ia(a,b);this.line=a;this.ch=b},Ha=a.cmpPos=function(a,b){return a.line-b.line||a.ch-b.ch};S.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(a){if(a==this)return!0;if(a.primIndex!=this.primIndex||a.ranges.length!=this.ranges.length)return!1;for(var b=0;b<this.ranges.length;b++){var c=this.ranges[b],d=a.ranges[b];
if(0!=Ha(c.anchor,d.anchor)||0!=Ha(c.head,d.head))return!1}return!0},deepCopy:function(){for(var a=[],b=0;b<this.ranges.length;b++)a[b]=new W(U(this.ranges[b].anchor),U(this.ranges[b].head));return new S(a,this.primIndex)},somethingSelected:function(){for(var a=0;a<this.ranges.length;a++)if(!this.ranges[a].empty())return!0;return!1},contains:function(a,b){b||(b=a);for(var c=0;c<this.ranges.length;c++){var d=this.ranges[c];if(0<=Ha(b,d.from())&&0>=Ha(a,d.to()))return c}return-1}};W.prototype={from:function(){return ma(this.anchor,
this.head)},to:function(){return Q(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var hf={left:0,right:0,top:0,bottom:0},Bc,ud=null,wg=0,cd=null,we,xe,xg=0,jf=0,$b=null;La?$b=-.53:Qd?$b=15:vg?$b=-.7:cf&&($b=-1/3);var Nf,kf=null,wb=a.changeEnd=function(a){return a.text?ia(a.from.line+a.text.length-1,fb(a.text).length+(1==a.text.length?a.from.ch:0)):a.to};a.prototype={constructor:a,focus:function(){window.focus();ob(this);Ub(this)},setOption:function(a,
b){var c=this.options,d=c[a];if(c[a]!=b||"mode"==a)c[a]=b,dd.hasOwnProperty(a)&&va(this,dd[a])(this,b,d)},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a,b){this.state.keyMaps[b?"push":"unshift"](a)},removeKeyMap:function(a){for(var b=this.state.keyMaps,c=0;c<b.length;++c)if(b[c]==a||"string"!=typeof b[c]&&b[c].name==a)return b.splice(c,1),!0},addOverlay:Da(function(b,c){var d=b.token?b:a.getMode(this.options,b);if(d.startState)throw Error("Overlays may not be stateful.");
this.state.overlays.push({mode:d,modeSpec:b,opaque:c&&c.opaque});this.state.modeGen++;Y(this)}),removeOverlay:Da(function(a){for(var b=this.state.overlays,c=0;c<b.length;++c){var d=b[c].modeSpec;if(d==a||"string"==typeof a&&d.name==a){b.splice(c,1);this.state.modeGen++;Y(this);break}}}),indentLine:Da(function(a,b,c){"string"!=typeof b&&"number"!=typeof b&&(b=null==b?this.options.smartIndent?"smart":"prev":b?"add":"subtract");ea(this.doc,a)&&Ob(this,a,b,c)}),indentSelection:Da(function(a){for(var b=
this.doc.sel.ranges,c=-1,d=0;d<b.length;d++){var e=b[d];if(e.empty())e.head.line>c&&(Ob(this,e.head.line,a,!0),c=e.head.line,d==this.doc.sel.primIndex&&Vb(this));else{for(var g=e.from(),e=e.to(),f=Math.max(c,g.line),c=Math.min(this.lastLine(),e.line-(e.ch?0:1))+1,e=f;e<c;++e)Ob(this,e,a);e=this.doc.sel.ranges;0==g.ch&&b.length==e.length&&0<e[d].from().ch&&pa(this.doc,d,new W(g,e[d].to()),fd)}}}),getTokenAt:function(a,b){var c=this.doc;a=aa(c,a);for(var d=na(this,a.line,b),e=this.doc.mode,c=ua(c,a.line),
c=new Be(c.text,this.options.tabSize);c.pos<a.ch&&!c.eol();){c.start=c.pos;var g=Je(e,c,d)}return{start:c.start,end:c.pos,string:c.current(),type:g||null,state:d}},getTokenTypeAt:function(a){a=aa(this.doc,a);var b=jd(this,ua(this.doc,a.line)),c=0,d=(b.length-1)/2;a=a.ch;if(0==a)b=b[2];else for(;;){var e=c+d>>1;if((e?b[2*e-1]:0)>=a)d=e;else if(b[2*e+1]<a)c=e+1;else{b=b[2*e+2];break}}c=b?b.indexOf("cm-overlay "):-1;return 0>c?b:0==c?null:b.slice(0,c-1)},getModeAt:function(b){var c=this.doc.mode;return c.innerMode?
a.innerMode(c,this.getTokenAt(b).state).mode:c},getHelper:function(a,b){return this.getHelpers(a,b)[0]},getHelpers:function(a,b){var c=[];if(!Rc.hasOwnProperty(b))return Rc;var d=Rc[b],e=this.getModeAt(a);if("string"==typeof e[b])d[e[b]]&&c.push(d[e[b]]);else if(e[b])for(var g=0;g<e[b].length;g++){var f=d[e[b][g]];f&&c.push(f)}else e.helperType&&d[e.helperType]?c.push(d[e.helperType]):d[e.name]&&c.push(d[e.name]);for(g=0;g<d._global.length;g++)f=d._global[g],f.pred(e,this)&&-1==Fb(c,f.val)&&c.push(f.val);
return c},getStateAfter:function(a,b){var c=this.doc;a=Math.max(c.first,Math.min(null==a?c.first+c.size-1:a,c.first+c.size-1));return na(this,a+1,b)},cursorCoords:function(a,b){var c;c=this.doc.sel.primary();c=null==a?c.head:"object"==typeof a?aa(this.doc,a):a?c.from():c.to();return xa(this,c,b||"page")},charCoords:function(a,b){return Za(this,aa(this.doc,a),b||"page")},coordsChar:function(a,b){a=ka(this,a,b||"page");return Ja(this,a.left,a.top)},lineAtHeight:function(a,b){a=ka(this,{top:a,left:0},
b||"page").top;return Ic(this.doc,a+this.display.viewOffset)},heightAtLine:function(a,b){var c=!1,d=this.doc.first+this.doc.size-1;a<this.doc.first?a=this.doc.first:a>d&&(a=d,c=!0);d=ua(this.doc,a);return mb(this,d,{top:0,left:0},b||"page").top+(c?this.doc.height-ec(d):0)},defaultTextHeight:function(){return Cb(this.display)},defaultCharWidth:function(){return Nb(this.display)},setGutterMarker:Da(function(a,b,c){return Mc(this.doc,a,"gutter",function(a){var d=a.gutterMarkers||(a.gutterMarkers={});
d[b]=c;!c&&ag(d)&&(a.gutterMarkers=null);return!0})}),clearGutter:Da(function(a){var b=this,c=b.doc,d=c.first;c.iter(function(c){c.gutterMarkers&&c.gutterMarkers[a]&&(c.gutterMarkers[a]=null,Ba(b,d,"gutter"),ag(c.gutterMarkers)&&(c.gutterMarkers=null));++d})}),addLineWidget:Da(function(a,b,c){return $f(this,a,b,c)}),removeLineWidget:function(a){a.clear()},lineInfo:function(a){if("number"==typeof a){if(!ea(this.doc,a))return null;var b=a;a=ua(this.doc,a);if(!a)return null}else if(b=gb(a),null==b)return null;
return{line:b,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(a,b,c,d,e){var g=this.display;a=xa(this,aa(this.doc,a));var f=a.bottom,h=a.left;b.style.position="absolute";g.sizer.appendChild(b);if("over"==d)f=a.top;else if("above"==d||"near"==d){var l=Math.max(g.wrapper.clientHeight,this.doc.height),m=Math.max(g.sizer.clientWidth,
g.lineSpace.clientWidth);("above"==d||a.bottom+b.offsetHeight>l)&&a.top>b.offsetHeight?f=a.top-b.offsetHeight:a.bottom+b.offsetHeight<=l&&(f=a.bottom);h+b.offsetWidth>m&&(h=m-b.offsetWidth)}b.style.top=f+"px";b.style.left=b.style.right="";"right"==e?(h=g.sizer.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==e?h=0:"middle"==e&&(h=(g.sizer.clientWidth-b.offsetWidth)/2),b.style.left=h+"px");c&&(a=nd(this,h,f,h+b.offsetWidth,f+b.offsetHeight),null!=a.scrollTop&&nc(this,a.scrollTop),null!=a.scrollLeft&&
Kc(this,a.scrollLeft))},triggerOnKeyDown:Da(Yd),triggerOnKeyPress:Da(Qe),triggerOnKeyUp:le,execCommand:function(a){if(mf.hasOwnProperty(a))return mf[a](this)},findPosH:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);var g=0;for(a=aa(this.doc,a);g<b&&(a=Ec(this.doc,a,e,c,d),!a.hitSide);++g);return a},moveH:Da(function(a,b){var c=this;c.extendSelectionsBy(function(d){return c.display.shift||c.doc.extend||d.empty()?Ec(c.doc,d.head,a,b,c.options.rtlMoveVisually):0>a?d.from():d.to()},Wd)}),deleteH:Da(function(a,
b){var c=this.doc;this.doc.sel.somethingSelected()?c.replaceSelection("",null,"+delete"):Wb(this,function(d){var e=Ec(c,d.head,a,b,!1);return 0>a?{from:e,to:d.head}:{from:d.head,to:e}})}),findPosV:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);var g=0;for(a=aa(this.doc,a);g<b&&(a=xa(this,a,"div"),null==d?d=a.left:a.left=d,a=Nc(this,a,e,c),!a.hitSide);++g);return a},moveV:Da(function(a,b){var c=this,d=this.doc,e=[],g=!c.display.shift&&!d.extend&&d.sel.somethingSelected();d.extendSelectionsBy(function(f){if(g)return 0>
a?f.from():f.to();var h=xa(c,f.head,"div");null!=f.goalColumn&&(h.left=f.goalColumn);e.push(h.left);var l=Nc(c,h,a,b);"page"==b&&f==d.sel.primary()&&od(c,null,Za(c,l,"div").top-h.top);return l},Wd);if(e.length)for(var f=0;f<d.sel.ranges.length;f++)d.sel.ranges[f].goalColumn=e[f]}),toggleOverwrite:function(a){if(null==a||a!=this.state.overwrite)(this.state.overwrite=!this.state.overwrite)?Ze(this.display.cursorDiv,"CodeMirror-overwrite"):Ye(this.display.cursorDiv,"CodeMirror-overwrite"),Qa(this,"overwriteToggle",
this,this.state.overwrite)},hasFocus:function(){return xc()==this.display.input},scrollTo:Da(function(a,b){null==a&&null==b||Rb(this);null!=a&&(this.curOp.scrollLeft=a);null!=b&&(this.curOp.scrollTop=b)}),getScrollInfo:function(){var a=this.display.scroller,b=Dc;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-b,width:a.scrollWidth-b,clientHeight:a.clientHeight-b,clientWidth:a.clientWidth-b}},scrollIntoView:Da(function(a,b){null==a?(a={from:this.doc.sel.primary().head,to:null},null==
b&&(b=this.options.cursorScrollMargin)):"number"==typeof a?a={from:ia(a,0),to:null}:null==a.from&&(a={from:a,to:null});a.to||(a.to=a.from);a.margin=b||0;if(null!=a.from.line)Rb(this),this.curOp.scrollToPos=a;else{var c=nd(this,Math.min(a.from.left,a.to.left),Math.min(a.from.top,a.to.top)-a.margin,Math.max(a.from.right,a.to.right),Math.max(a.from.bottom,a.to.bottom)+a.margin);this.scrollTo(c.scrollLeft,c.scrollTop)}}),setSize:Da(function(a,b){function c(a){return"number"==typeof a||/^\d+$/.test(String(a))?
a+"px":a}var d=this;null!=a&&(d.display.wrapper.style.width=c(a));null!=b&&(d.display.wrapper.style.height=c(b));d.options.lineWrapping&&eb(this);var e=d.display.viewFrom;d.doc.iter(e,d.display.viewTo,function(a){if(a.widgets)for(var b=0;b<a.widgets.length;b++)if(a.widgets[b].noHScroll){Ba(d,e,"widget");break}++e});d.curOp.forceUpdate=!0;Qa(d,"refresh",this)}),operation:function(a){return ab(this,a)},refresh:Da(function(){var a=this.display.cachedTextHeight;Y(this);this.curOp.forceUpdate=!0;jb(this);
this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop);m(this);(null==a||.5<Math.abs(a-Cb(this.display)))&&f(this);Qa(this,"refresh",this)}),swapDoc:Da(function(a){var b=this.doc;b.cm=null;Ke(this,a);jb(this);$a(this);this.scrollTo(a.scrollLeft,a.scrollTop);yb(this,"swapDoc",this,b);return b}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};
Bd(a);var Of=a.defaults={},dd=a.optionHandlers={},ye=a.Init={toString:function(){return"CodeMirror.Init"}};za("value","",function(a,b){a.setValue(b)},!0);za("mode",null,function(a,b){a.doc.modeOption=b;c(a)},!0);za("indentUnit",2,c,!0);za("indentWithTabs",!1);za("smartIndent",!0);za("tabSize",4,function(a){e(a);jb(a);Y(a)},!0);za("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(a,b){a.options.specialChars=new RegExp(b.source+(b.test("\t")?"":"|\t"),"g");a.refresh()},
!0);za("specialCharPlaceholder",function(a){var b=ra("span","\u2022","cm-invalidchar");b.title="\\u"+a.charCodeAt(0).toString(16);return b},function(a){a.refresh()},!0);za("electricChars",!0);za("rtlMoveVisually",!Xg);za("wholeLineUpdateBefore",!0);za("theme","default",function(a){h(a);g(a)},!0);za("keyMap","default",n);za("extraKeys",null);za("lineWrapping",!1,function(a){a.options.lineWrapping?(Ze(a.display.wrapper,"CodeMirror-wrap"),a.display.sizer.style.minWidth=""):(Ye(a.display.wrapper,"CodeMirror-wrap"),
t(a));f(a);Y(a);jb(a);setTimeout(function(){w(a)},100)},!0);za("gutters",[],function(a){r(a.options);g(a)},!0);za("fixedGutter",!0,function(a,b){a.display.gutters.style.left=b?B(a.display)+"px":"0";a.refresh()},!0);za("coverGutterNextToScrollbar",!1,w,!0);za("lineNumbers",!1,function(a){r(a.options);g(a)},!0);za("firstLineNumber",1,g,!0);za("lineNumberFormatter",function(a){return a},g,!0);za("showCursorWhenSelecting",!1,Va,!0);za("resetSelectionOnContextMenu",!0);za("readOnly",!1,function(a,b){"nocursor"==
b?(Qb(a),a.display.input.blur(),a.display.disabled=!0):(a.display.disabled=!1,b||$a(a))});za("disableInput",!1,function(a,b){b||$a(a)},!0);za("dragDrop",!0);za("cursorBlinkRate",530);za("cursorScrollMargin",0);za("cursorHeight",1,Va,!0);za("singleCursorHeightPerLine",!0,Va,!0);za("workTime",100);za("workDelay",100);za("flattenSpans",!0,e,!0);za("addModeClass",!1,e,!0);za("pollInterval",100);za("undoDepth",200,function(a,b){a.doc.history.undoDepth=b});za("historyEventDelay",1250);za("viewportMargin",
10,function(a){a.refresh()},!0);za("maxHighlightLength",1E4,e,!0);za("moveInputWithCursor",!0,function(a,b){b||(a.display.inputDiv.style.top=a.display.inputDiv.style.left=0)});za("tabindex",null,function(a,b){a.display.input.tabIndex=b||""});za("autofocus",null);var lf=a.modes={},Td=a.mimeModes={};a.defineMode=function(b,c){a.defaults.mode||"null"==b||(a.defaults.mode=b);if(2<arguments.length){c.dependencies=[];for(var d=2;d<arguments.length;++d)c.dependencies.push(arguments[d])}lf[b]=c};a.defineMIME=
function(a,b){Td[a]=b};a.resolveMode=function(b){if("string"==typeof b&&Td.hasOwnProperty(b))b=Td[b];else if(b&&"string"==typeof b.name&&Td.hasOwnProperty(b.name)){var c=Td[b.name];"string"==typeof c&&(c={name:c});b=Cf(c,b);b.name=c.name}else if("string"==typeof b&&/^[\w\-]+\/[\w\-]+\+xml$/.test(b))return a.resolveMode("application/xml");return"string"==typeof b?{name:b}:b||{name:"null"}};a.getMode=function(b,c){c=a.resolveMode(c);var d=lf[c.name];if(!d)return a.getMode(b,"text/plain");d=d(b,c);if(Jb.hasOwnProperty(c.name)){var e=
Jb[c.name],g;for(g in e)e.hasOwnProperty(g)&&(d.hasOwnProperty(g)&&(d["_"+g]=d[g]),d[g]=e[g])}d.name=c.name;c.helperType&&(d.helperType=c.helperType);if(c.modeProps)for(g in c.modeProps)d[g]=c.modeProps[g];return d};a.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}});a.defineMIME("text/plain","null");var Jb=a.modeExtensions={};a.extendMode=function(a,b){var c=Jb.hasOwnProperty(a)?Jb[a]:Jb[a]={};Jc(b,c)};a.defineExtension=function(b,c){a.prototype[b]=c};a.defineDocExtension=function(a,
b){xb.prototype[a]=b};a.defineOption=za;var ze=[];a.defineInitHook=function(a){ze.push(a)};var Rc=a.helpers={};a.registerHelper=function(b,c,d){Rc.hasOwnProperty(b)||(Rc[b]=a[b]={_global:[]});Rc[b][c]=d};a.registerGlobalHelper=function(b,c,d,e){a.registerHelper(b,c,e);Rc[b]._global.push({pred:d,val:e})};var Vd=a.copyState=function(a,b){if(!0===b)return b;if(a.copyState)return a.copyState(b);var c={},d;for(d in b){var e=b[d];e instanceof Array&&(e=e.concat([]));c[d]=e}return c},yg=a.startState=function(a,
b,c){return a.startState?a.startState(b,c):!0};a.innerMode=function(a,b){for(;a.innerMode;){var c=a.innerMode(b);if(!c||c.mode==a)break;b=c.state;a=c.mode}return c||{mode:a,state:b}};var mf=a.commands={selectAll:function(a){a.setSelection(ia(a.firstLine(),0),ia(a.lastLine()),fd)},singleSelection:function(a){a.setSelection(a.getCursor("anchor"),a.getCursor("head"),fd)},killLine:function(a){Wb(a,function(b){if(b.empty()){var c=ua(a.doc,b.head.line).text.length;return b.head.ch==c&&b.head.line<a.lastLine()?
{from:b.head,to:ia(b.head.line+1,0)}:{from:b.head,to:ia(b.head.line,c)}}return{from:b.from(),to:b.to()}})},deleteLine:function(a){Wb(a,function(b){return{from:ia(b.from().line,0),to:aa(a.doc,ia(b.to().line+1,0))}})},delLineLeft:function(a){Wb(a,function(a){return{from:ia(a.from().line,0),to:a.from()}})},delWrappedLineLeft:function(a){Wb(a,function(b){var c=a.charCoords(b.head,"div").top+5;return{from:a.coordsChar({left:0,top:c},"div"),to:b.from()}})},delWrappedLineRight:function(a){Wb(a,function(b){var c=
a.charCoords(b.head,"div").top+5,c=a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:c},"div");return{from:b.from(),to:c}})},undo:function(a){a.undo()},redo:function(a){a.redo()},undoSelection:function(a){a.undoSelection()},redoSelection:function(a){a.redoSelection()},goDocStart:function(a){a.extendSelection(ia(a.firstLine(),0))},goDocEnd:function(a){a.extendSelection(ia(a.lastLine()))},goLineStart:function(a){a.extendSelectionsBy(function(b){return sg(a,b.head.line)},{origin:"+move",bias:1})},
goLineStartSmart:function(a){a.extendSelectionsBy(function(b){return yc(a,b.head)},{origin:"+move",bias:1})},goLineEnd:function(a){a.extendSelectionsBy(function(b){b=b.head.line;for(var c,d=ua(a.doc,b);c=Tb(d,!1);)d=c.find(1,!0).line,b=null;c=(c=Bb(d))?c[0].level%2?$e(d):af(d):d.text.length;return ia(null==b?gb(d):b,c)},{origin:"+move",bias:-1})},goLineRight:function(a){a.extendSelectionsBy(function(b){b=a.charCoords(b.head,"div").top+5;return a.coordsChar({left:a.display.lineDiv.offsetWidth+100,
top:b},"div")},Wd)},goLineLeft:function(a){a.extendSelectionsBy(function(b){b=a.charCoords(b.head,"div").top+5;return a.coordsChar({left:0,top:b},"div")},Wd)},goLineLeftSmart:function(a){a.extendSelectionsBy(function(b){var c=a.charCoords(b.head,"div").top+5,c=a.coordsChar({left:0,top:c},"div");return c.ch<a.getLine(c.line).search(/\S/)?yc(a,b.head):c},Wd)},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,
"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goGroupRight:function(a){a.moveH(1,"group")},goGroupLeft:function(a){a.moveH(-1,"group")},goWordRight:function(a){a.moveH(1,"word")},delCharBefore:function(a){a.deleteH(-1,"char")},delCharAfter:function(a){a.deleteH(1,"char")},delWordBefore:function(a){a.deleteH(-1,"word")},
delWordAfter:function(a){a.deleteH(1,"word")},delGroupBefore:function(a){a.deleteH(-1,"group")},delGroupAfter:function(a){a.deleteH(1,"group")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("\t")},insertSoftTab:function(a){for(var b=[],c=a.listSelections(),d=a.options.tabSize,e=0;e<c.length;e++){var g=c[e].from(),g=lc(a.getLine(g.line),g.ch,d);b.push(Array(d-
g%d+1).join(" "))}a.replaceSelections(b)},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.execCommand("insertTab")},transposeChars:function(a){ab(a,function(){for(var b=a.listSelections(),c=[],d=0;d<b.length;d++){var e=b[d].head,g=ua(a.doc,e.line).text;if(g)if(e.ch==g.length&&(e=new ia(e.line,e.ch-1)),0<e.ch)e=new ia(e.line,e.ch+1),a.replaceRange(g.charAt(e.ch-1)+g.charAt(e.ch-2),ia(e.line,e.ch-2),e,"+transpose");else if(e.line>a.doc.first){var f=ua(a.doc,e.line-1).text;f&&
a.replaceRange(g.charAt(0)+"\n"+f.charAt(f.length-1),ia(e.line-1,f.length-1),ia(e.line,1),"+transpose")}c.push(new W(e,e))}a.setSelections(c)})},newlineAndIndent:function(a){ab(a,function(){for(var b=a.listSelections().length,c=0;c<b;c++){var d=a.listSelections()[c];a.replaceRange("\n",d.anchor,d.head,"+input");a.indentLine(d.from().line+1,null,!0);Vb(a)}})},toggleOverwrite:function(a){a.toggleOverwrite()}},Cc=a.keyMap={};Cc.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",
End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"};Cc.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft",
"Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};Cc.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo",
"Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft",
"Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection",fallthrough:["basic","emacsy"]};Cc.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};
Cc["default"]=Zb?Cc.macDefault:Cc.pcDefault;var nf=a.lookupKey=function(a,b,c){function d(b){b=Kd(b);var e=b[a];if(!1===e)return"stop";if(null!=e&&c(e))return!0;if(b.nofallthrough)return"stop";b=b.fallthrough;if(null==b)return!1;if("[object Array]"!=Object.prototype.toString.call(b))return d(b);for(e=0;e<b.length;++e){var g=d(b[e]);if(g)return g}return!1}for(var e=0;e<b.length;++e){var g=d(b[e]);if(g)return"stop"!=g}},Zg=a.isModifierKey=function(a){a=uc[a.keyCode];return"Ctrl"==a||"Alt"==a||"Shift"==
a||"Mod"==a},$g=a.keyName=function(a,b){if(Yb&&34==a.keyCode&&a["char"])return!1;var c=uc[a.keyCode];if(null==c||a.altGraphKey)return!1;a.altKey&&(c="Alt-"+c);if(gf?a.metaKey:a.ctrlKey)c="Ctrl-"+c;if(gf?a.ctrlKey:a.metaKey)c="Cmd-"+c;!b&&a.shiftKey&&(c="Shift-"+c);return c};a.fromTextArea=function(b,c){function d(){b.value=m.getValue()}c||(c={});c.value=b.value;!c.tabindex&&b.tabindex&&(c.tabindex=b.tabindex);!c.placeholder&&b.placeholder&&(c.placeholder=b.placeholder);if(null==c.autofocus){var e=
xc();c.autofocus=e==b||null!=b.getAttribute("autofocus")&&e==document.body}if(b.form&&(wa(b.form,"submit",d),!c.leaveSubmitMethodAlone)){var g=b.form,f=g.submit;try{var h=g.submit=function(){d();g.submit=f;g.submit();g.submit=h}}catch(l){}}b.style.display="none";var m=a(function(a){b.parentNode.insertBefore(a,b.nextSibling)},c);m.save=d;m.getTextArea=function(){return b};m.toTextArea=function(){d();b.parentNode.removeChild(m.getWrapperElement());b.style.display="";b.form&&(Ib(b.form,"submit",d),"function"==
typeof b.form.submit&&(b.form.submit=f))};return m};var Be=a.StringStream=function(a,b){this.pos=this.start=0;this.string=a;this.tabSize=b||8;this.lineStart=this.lastColumnPos=this.lastColumnValue=0};Be.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(a){var b=this.string.charAt(this.pos);
if("string"==typeof a?b==a:b&&(a.test?a.test(b):a(b)))return++this.pos,b},eatWhile:function(a){for(var b=this.pos;this.eat(a););return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){a=this.string.indexOf(a,this.pos);if(-1<a)return this.pos=a,!0},backUp:function(a){this.pos-=a},column:function(){this.lastColumnPos<this.start&&(this.lastColumnValue=
lc(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start);return this.lastColumnValue-(this.lineStart?lc(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return lc(this.string,null,this.tabSize)-(this.lineStart?lc(this.string,this.lineStart,this.tabSize):0)},match:function(a,b,c){if("string"==typeof a){var d=function(a){return c?a.toLowerCase():a},e=this.string.substr(this.pos,a.length);if(d(e)==d(a))return!1!==b&&(this.pos+=
a.length),!0}else{if((a=this.string.slice(this.pos).match(a))&&0<a.index)return null;a&&!1!==b&&(this.pos+=a[0].length);return a}},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(a,b){this.lineStart+=a;try{return b()}finally{this.lineStart-=a}}};var kc=a.TextMarker=function(a,b){this.lines=[];this.type=b;this.doc=a};Bd(kc);kc.prototype.clear=function(){if(!this.explicitlyCleared){var a=this.doc.cm,b=a&&!a.curOp;b&&da(a);if(dc(this,"clear")){var c=this.find();
c&&yb(this,"clear",c.from,c.to)}for(var d=c=null,e=0;e<this.lines.length;++e){var g=this.lines[e],f=gd(g.markedSpans,this);a&&!this.collapsed?Ba(a,gb(g),"text"):a&&(null!=f.to&&(d=gb(g)),null!=f.from&&(c=gb(g)));for(var h=g,l=g.markedSpans,m=f,q=void 0,r=0;r<l.length;++r)l[r]!=m&&(q||(q=[])).push(l[r]);h.markedSpans=q;null==f.from&&this.collapsed&&!Uc(this.doc,g)&&a&&fc(g,Cb(a.display))}if(a&&this.collapsed&&!a.options.lineWrapping)for(e=0;e<this.lines.length;++e)g=bc(this.lines[e]),f=p(g),f>a.display.maxLineLength&&
(a.display.maxLine=g,a.display.maxLineLength=f,a.display.maxLineChanged=!0);null!=c&&a&&this.collapsed&&Y(a,c,d+1);this.lines.length=0;this.explicitlyCleared=!0;this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,a&&pb(a.doc));a&&yb(a,"markerCleared",a,this);b&&ca(a);this.parent&&this.parent.clear()}};kc.prototype.find=function(a,b){null==a&&"bookmark"==this.type&&(a=1);for(var c,d,e=0;e<this.lines.length;++e){var g=this.lines[e],f=gd(g.markedSpans,this);if(null!=f.from&&(c=ia(b?g:gb(g),f.from),
-1==a))return c;if(null!=f.to&&(d=ia(b?g:gb(g),f.to),1==a))return d}return c&&{from:c,to:d}};kc.prototype.changed=function(){var a=this.find(-1,!0),b=this,c=this.doc.cm;a&&c&&ab(c,function(){var d=a.line,e=gb(a.line);if(e=Ma(c,e))Kb(e),c.curOp.selectionChanged=c.curOp.forceUpdate=!0;c.curOp.updateMaxLine=!0;Uc(b.doc,d)||null==b.height||(e=b.height,b.height=null,(e=ae(b)-e)&&fc(d,d.height+e))})};kc.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;b.maybeHiddenMarkers&&
-1!=Fb(b.maybeHiddenMarkers,this)||(b.maybeUnhiddenMarkers||(b.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(a)};kc.prototype.detachLine=function(a){this.lines.splice(Fb(this.lines,a),1);!this.lines.length&&this.doc.cm&&(a=this.doc.cm.curOp,(a.maybeHiddenMarkers||(a.maybeHiddenMarkers=[])).push(this))};var Pf=0,of=a.SharedTextMarker=function(a,b){this.markers=a;this.primary=b;for(var c=0;c<a.length;++c)a[c].parent=this};Bd(of);of.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=
!0;for(var a=0;a<this.markers.length;++a)this.markers[a].clear();yb(this,"clear")}};of.prototype.find=function(a,b){return this.primary.find(a,b)};var vd=a.LineWidget=function(a,b,c){if(c)for(var d in c)c.hasOwnProperty(d)&&(this[d]=c[d]);this.cm=a;this.node=b};Bd(vd);vd.prototype.clear=function(){var a=this.cm,b=this.line.widgets,c=this.line,d=gb(c);if(null!=d&&b){for(var e=0;e<b.length;++e)b[e]==this&&b.splice(e--,1);b.length||(c.widgets=null);var g=ae(this);ab(a,function(){var b=-g;ec(c)<(a.curOp&&
a.curOp.scrollTop||a.doc.scrollTop)&&od(a,null,b);Ba(a,d,"widget");fc(c,Math.max(0,c.height-g))})}};vd.prototype.changed=function(){var a=this.height,b=this.cm,c=this.line;this.height=null;var d=ae(this)-a;d&&ab(b,function(){b.curOp.forceUpdate=!0;ec(c)<(b.curOp&&b.curOp.scrollTop||b.doc.scrollTop)&&od(b,null,d);fc(c,c.height+d)})};var ed=a.Line=function(a,b,c){this.text=a;vf(this,b);this.height=c?c(this):1};Bd(ed);ed.prototype.lineNo=function(){return gb(this)};var zg={},Qf={};Gc.prototype={chunkSize:function(){return this.lines.length},
removeInner:function(a,b){for(var c=a,d=a+b;c<d;++c){var e=this.lines[c];this.height-=e.height;var g=e;g.parent=null;Zd(g);yb(e,"delete")}this.lines.splice(a,b)},collapse:function(a){a.push.apply(a,this.lines)},insertInner:function(a,b,c){this.height+=c;this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));for(a=0;a<b.length;++a)b[a].parent=this},iterN:function(a,b,c){for(b=a+b;a<b;++a)if(c(this.lines[a]))return!0}};Hc.prototype={chunkSize:function(){return this.size},removeInner:function(a,
b){this.size-=b;for(var c=0;c<this.children.length;++c){var d=this.children[c],e=d.chunkSize();if(a<e){var g=Math.min(b,e-a),f=d.height;d.removeInner(a,g);this.height-=f-d.height;e==g&&(this.children.splice(c--,1),d.parent=null);if(0==(b-=g))break;a=0}else a-=e}25>this.size-b&&(1<this.children.length||!(this.children[0]instanceof Gc))&&(c=[],this.collapse(c),this.children=[new Gc(c)],this.children[0].parent=this)},collapse:function(a){for(var b=0;b<this.children.length;++b)this.children[b].collapse(a)},
insertInner:function(a,b,c){this.size+=b.length;this.height+=c;for(var d=0;d<this.children.length;++d){var e=this.children[d],g=e.chunkSize();if(a<=g){e.insertInner(a,b,c);if(e.lines&&50<e.lines.length){for(;50<e.lines.length;)a=e.lines.splice(e.lines.length-25,25),a=new Gc(a),e.height-=a.height,this.children.splice(d+1,0,a),a.parent=this;this.maybeSpill()}break}a-=g}},maybeSpill:function(){if(!(10>=this.children.length)){var a=this;do{var b=a.children.splice(a.children.length-5,5),b=new Hc(b);if(a.parent){a.size-=
b.size;a.height-=b.height;var c=Fb(a.parent.children,a);a.parent.children.splice(c+1,0,b)}else c=new Hc(a.children),c.parent=a,a.children=[c,b],a=c;b.parent=a.parent}while(10<a.children.length);a.parent.maybeSpill()}},iterN:function(a,b,c){for(var d=0;d<this.children.length;++d){var e=this.children[d],g=e.chunkSize();if(a<g){g=Math.min(b,g-a);if(e.iterN(a,g,c))return!0;if(0==(b-=g))break;a=0}else a-=g}}};var Rf=0,xb=a.Doc=function(a,b,c){if(!(this instanceof xb))return new xb(a,b,c);null==c&&(c=0);
Hc.call(this,[new Gc([new ed("",null)])]);this.first=c;this.scrollTop=this.scrollLeft=0;this.cantEdit=!1;this.cleanGeneration=1;this.frontier=c;c=ia(c,0);this.sel=sa(c);this.history=new he(null);this.id=++Rf;this.modeOption=b;"string"==typeof a&&(a=Ga(a));Cd(this,{from:c,to:c,text:a});Ka(this,sa(c),fd)};xb.prototype=Cf(Hc.prototype,{constructor:xb,iter:function(a,b,c){c?this.iterN(a-this.first,b-a,c):this.iterN(this.first,this.first+this.size,a)},insert:function(a,b){for(var c=0,d=0;d<b.length;++d)c+=
b[d].height;this.insertInner(a-this.first,b,c)},remove:function(a,b){this.removeInner(a-this.first,b)},getValue:function(a){var b=Af(this,this.first,this.first+this.size);return!1===a?b:b.join(a||"\n")},setValue:Ta(function(a){var b=ia(this.first,0),c=this.first+this.size-1;Lc(this,{from:b,to:ia(c,ua(this,c).text.length),text:Ga(a),origin:"setValue"},!0);Ka(this,sa(b))}),replaceRange:function(a,b,c,d){b=aa(this,b);c=c?aa(this,c):b;Id(this,a,b,c,d)},getRange:function(a,b,c){a=ge(this,aa(this,a),aa(this,
b));return!1===c?a:a.join(c||"\n")},getLine:function(a){return(a=this.getLineHandle(a))&&a.text},getLineHandle:function(a){if(ea(this,a))return ua(this,a)},getLineNumber:function(a){return gb(a)},getLineHandleVisualStart:function(a){"number"==typeof a&&(a=ua(this,a));return bc(a)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(a){return aa(this,a)},getCursor:function(a){var b=this.sel.primary();return null==
a||"head"==a?b.head:"anchor"==a?b.anchor:"end"==a||"to"==a||!1===a?b.to():b.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Ta(function(a,b,c){a=aa(this,"number"==typeof a?ia(a,b||0):a);Ka(this,sa(a,null),c)}),setSelection:Ta(function(a,b,c){var d=aa(this,a);a=aa(this,b||a);Ka(this,sa(d,a),c)}),extendSelection:Ta(function(a,b,c){v(this,aa(this,a),b&&aa(this,b),c)}),extendSelections:Ta(function(a,b){for(var c=[],
d=0;d<a.length;d++)c[d]=aa(this,a[d]);Ea(this,c)}),extendSelectionsBy:Ta(function(a,b){Ea(this,de(this.sel.ranges,a),b)}),setSelections:Ta(function(a,b,c){if(a.length){for(var d=0,e=[];d<a.length;d++)e[d]=new W(aa(this,a[d].anchor),aa(this,a[d].head));null==b&&(b=Math.min(a.length-1,this.sel.primIndex));Ka(this,la(e,b),c)}}),addSelection:Ta(function(a,b,c){var d=this.sel.ranges.slice(0);d.push(new W(aa(this,a),aa(this,b||a)));Ka(this,la(d,d.length-1),c)}),getSelection:function(a){for(var b=this.sel.ranges,
c,d=0;d<b.length;d++){var e=ge(this,b[d].from(),b[d].to());c=c?c.concat(e):e}return!1===a?c:c.join(a||"\n")},getSelections:function(a){for(var b=[],c=this.sel.ranges,d=0;d<c.length;d++){var e=ge(this,c[d].from(),c[d].to());!1!==a&&(e=e.join(a||"\n"));b[d]=e}return b},replaceSelection:function(a,b,c){for(var d=[],e=0;e<this.sel.ranges.length;e++)d[e]=a;this.replaceSelections(d,b,c||"+input")},replaceSelections:Ta(function(a,b,c){for(var d=[],e=this.sel,g=0;g<e.ranges.length;g++){var f=e.ranges[g];
d[g]={from:f.from(),to:f.to(),text:Ga(a[g]),origin:c}}if(g=b&&"end"!=b){g=[];c=a=ia(this.first,0);for(e=0;e<d.length;e++){var h=d[e],f=ne(h.from,a,c),l=ne(wb(h),a,c);a=h.to;c=l;"around"==b?(h=this.sel.ranges[e],h=0>Ha(h.head,h.anchor),g[e]=new W(h?l:f,h?f:l)):g[e]=new W(f,f)}g=new S(g,this.sel.primIndex)}b=g;for(g=d.length-1;0<=g;g--)Lc(this,d[g]);b?ib(this,b):this.cm&&Vb(this.cm)}),undo:Ta(function(){Yc(this,"undo")}),redo:Ta(function(){Yc(this,"redo")}),undoSelection:Ta(function(){Yc(this,"undo",
!0)}),redoSelection:Ta(function(){Yc(this,"redo",!0)}),setExtending:function(a){this.extend=a},getExtending:function(){return this.extend},historySize:function(){for(var a=this.history,b=0,c=0,d=0;d<a.done.length;d++)a.done[d].ranges||++b;for(d=0;d<a.undone.length;d++)a.undone[d].ranges||++c;return{undo:b,redo:c}},clearHistory:function(){this.history=new he(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(a){a&&(this.history.lastOp=
this.history.lastSelOp=this.history.lastOrigin=null);return this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return{done:Dd(this.history.done),undone:Dd(this.history.undone)}},setHistory:function(a){var b=this.history=new he(this.history.maxGeneration);b.done=Dd(a.done.slice(0),null,!0);b.undone=Dd(a.undone.slice(0),null,!0)},addLineClass:Ta(function(a,b,c){return Mc(this,a,"class",function(a){var d="text"==b?"textClass":
"background"==b?"bgClass":"wrapClass";if(a[d]){if((new RegExp("(?:^|\\s)"+c+"(?:$|\\s)")).test(a[d]))return!1;a[d]+=" "+c}else a[d]=c;return!0})}),removeLineClass:Ta(function(a,b,c){return Mc(this,a,"class",function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"wrapClass",e=a[d];if(e)if(null==c)a[d]=null;else{var g=e.match(new RegExp("(?:^|\\s+)"+c+"(?:$|\\s+)"));if(!g)return!1;var f=g.index+g[0].length;a[d]=e.slice(0,g.index)+(g.index&&f!=e.length?" ":"")+e.slice(f)||null}else return!1;
return!0})}),markText:function(a,b,c){return Pb(this,aa(this,a),aa(this,b),c,"range")},setBookmark:function(a,b){var c={replacedWith:b&&(null==b.nodeType?b.widget:b),insertLeft:b&&b.insertLeft,clearWhenEmpty:!1,shared:b&&b.shared};a=aa(this,a);return Pb(this,a,a,c,"bookmark")},findMarksAt:function(a){a=aa(this,a);var b=[],c=ua(this,a.line).markedSpans;if(c)for(var d=0;d<c.length;++d){var e=c[d];(null==e.from||e.from<=a.ch)&&(null==e.to||e.to>=a.ch)&&b.push(e.marker.parent||e.marker)}return b},findMarks:function(a,
b,c){a=aa(this,a);b=aa(this,b);var d=[],e=a.line;this.iter(a.line,b.line+1,function(g){if(g=g.markedSpans)for(var f=0;f<g.length;f++){var h=g[f];e==a.line&&a.ch>h.to||null==h.from&&e!=a.line||e==b.line&&h.from>b.ch||c&&!c(h.marker)||d.push(h.marker.parent||h.marker)}++e});return d},getAllMarks:function(){var a=[];this.iter(function(b){if(b=b.markedSpans)for(var c=0;c<b.length;++c)null!=b[c].from&&a.push(b[c].marker)});return a},posFromIndex:function(a){var b,c=this.first;this.iter(function(d){d=d.text.length+
1;if(d>a)return b=a,!0;a-=d;++c});return aa(this,ia(c,b))},indexFromPos:function(a){a=aa(this,a);var b=a.ch;if(a.line<this.first||0>a.ch)return 0;this.iter(this.first,a.line,function(a){b+=a.text.length+1});return b},copy:function(a){var b=new xb(Af(this,this.first,this.first+this.size),this.modeOption,this.first);b.scrollTop=this.scrollTop;b.scrollLeft=this.scrollLeft;b.sel=this.sel;b.extend=!1;a&&(b.history.undoDepth=this.history.undoDepth,b.setHistory(this.getHistory()));return b},linkedDoc:function(a){a||
(a={});var b=this.first,c=this.first+this.size;null!=a.from&&a.from>b&&(b=a.from);null!=a.to&&a.to<c&&(c=a.to);b=new xb(Af(this,b,c),a.mode||this.modeOption,b);a.sharedHist&&(b.history=this.history);(this.linked||(this.linked=[])).push({doc:b,sharedHist:a.sharedHist});b.linked=[{doc:this,isParent:!0,sharedHist:a.sharedHist}];a=Ld(this);for(c=0;c<a.length;c++){var d=a[c],e=d.find(),g=b.clipPos(e.from),e=b.clipPos(e.to);Ha(g,e)&&(g=Pb(b,g,e,d.primary,d.primary.type),d.markers.push(g),g.parent=d)}return b},
unlinkDoc:function(b){b instanceof a&&(b=b.doc);if(this.linked)for(var c=0;c<this.linked.length;++c)if(this.linked[c].doc==b){this.linked.splice(c,1);b.unlinkDoc(this);Vf(Ld(this));break}if(b.history==this.history){var d=[b.id];Vc(b,function(a){d.push(a.id)},!0);b.history=new he(null);b.history.done=Dd(this.history.done,d);b.history.undone=Dd(this.history.undone,d)}},iterLinkedDocs:function(a){Vc(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm}});xb.prototype.eachLine=
xb.prototype.iter;var ah=["iter","insert","remove","copy","getEditor"],Ce;for(Ce in xb.prototype)xb.prototype.hasOwnProperty(Ce)&&0>Fb(ah,Ce)&&(a.prototype[Ce]=function(a){return function(){return a.apply(this.doc,arguments)}}(xb.prototype[Ce]));Bd(xb);var F=a.e_preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},Bg=a.e_stopPropagation=function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},tc=a.e_stop=function(a){F(a);Bg(a)},wa=a.on=function(a,b,c){a.addEventListener?
a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):(a=a._handlers||(a._handlers={}),(a[b]||(a[b]=[])).push(c))},Ib=a.off=function(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,!1);else if(a.detachEvent)a.detachEvent("on"+b,c);else if(a=a._handlers&&a._handlers[b])for(b=0;b<a.length;++b)if(a[b]==c){a.splice(b,1);break}},Qa=a.signal=function(a,b){var c=a._handlers&&a._handlers[b];if(c)for(var d=Array.prototype.slice.call(arguments,2),e=0;e<c.length;++e)c[e].apply(null,d)},
pf=null,Dc=30,De=a.Pass={toString:function(){return"CodeMirror.Pass"}},fd={scroll:!1},Sf={origin:"*mouse"},Wd={origin:"+move"};xf.prototype.set=function(a,b){clearTimeout(this.id);this.id=setTimeout(b,a)};var lc=a.countColumn=function(a,b,c,d,e){null==b&&(b=a.search(/[^\s\u00a0]/),-1==b&&(b=a.length));d=d||0;for(e=e||0;;){var g=a.indexOf("\t",d);if(0>g||g>=b)return e+(b-d);e+=g-d;e+=c-e%c;d=g+1}},Ee=[""],ta=function(a){a.select()};ve?ta=function(a){a.selectionStart=0;a.selectionEnd=a.value.length}:
La&&(ta=function(a){try{a.select()}catch(b){}});[].indexOf&&(Fb=function(a,b){return a.indexOf(b)});[].map&&(de=function(a,b){return a.map(b)});var pd=/[\u00df\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,oe=a.isWordChar=function(a){return/\w/.test(a)||"\u0080"<a&&(a.toUpperCase()!=a.toLowerCase()||pd.test(a))},hg=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,
Xd;Xd=document.createRange?function(a,b,c){var d=document.createRange();d.setEnd(a,c);d.setStart(a,b);return d}:function(a,b,c){var d=document.body.createTextRange();d.moveToElementText(a.parentNode);d.collapse(!0);d.moveEnd("character",c);d.moveStart("character",b);return d};La&&11>bb&&(xc=function(){try{return document.activeElement}catch(a){return document.body}});var pe=!1,Gf=function(){if(La&&9>bb)return!1;var a=ra("div");return"draggable"in a||"dragDrop"in a}(),qd,Tf,Ue,Ga=a.splitLines=3!="\n\nb".split(/\n/).length?
function(a){for(var b=0,c=[],d=a.length;b<=d;){var e=a.indexOf("\n",b);-1==e&&(e=a.length);var g=a.slice(b,"\r"==a.charAt(e-1)?e-1:e),f=g.indexOf("\r");-1!=f?(c.push(g.slice(0,f)),b+=f+1):(c.push(g),b=e+1)}return c}:function(a){return a.split(/\r\n?|\n/)},Uf=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}return b&&b.parentElement()==a?0!=b.compareEndPoints("StartToEnd",b):!1},sc=
function(){var a=ra("div");if("oncopy"in a)return!0;a.setAttribute("oncopy","return;");return"function"==typeof a.oncopy}(),qf=null,uc={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",
192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};a.keyNames=uc;(function(){for(var a=0;10>a;a++)uc[a+48]=uc[a+96]=String(a);for(a=65;90>=a;a++)uc[a]=String.fromCharCode(a);for(a=1;12>=a;a++)uc[a+111]=uc[a+63235]="F"+a})();var Oc,Tg=function(){function a(b){return 247>=b?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(b):
1424<=b&&1524>=b?"R":1536<=b&&1773>=b?"rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm".charAt(b-1536):1774<=b&&2220>=b?"r":8192<=b&&8203>=b?"w":8204==b?"b":"L"}function b(a,c,d){this.level=a;this.from=c;this.to=d}var c=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,d=/[stwN]/,e=/[LRr]/,g=/[Lb1n]/,f=/[1n]/;return function(h){if(!c.test(h))return!1;
for(var l=h.length,m=[],p=0,q;p<l;++p)m.push(a(h.charCodeAt(p)));for(var p=0,r="L";p<l;++p)q=m[p],"m"==q?m[p]=r:r=q;p=0;for(r="L";p<l;++p)q=m[p],"1"==q&&"r"==r?m[p]="n":e.test(q)&&(r=q,"r"==q&&(m[p]="R"));p=1;for(r=m[0];p<l-1;++p)q=m[p],"+"==q&&"1"==r&&"1"==m[p+1]?m[p]="1":","!=q||r!=m[p+1]||"1"!=r&&"n"!=r||(m[p]=r),r=q;for(p=0;p<l;++p)if(q=m[p],","==q)m[p]="N";else if("%"==q){for(r=p+1;r<l&&"%"==m[r];++r);var n=p&&"!"==m[p-1]||r<l&&"1"==m[r]?"1":"N";for(q=p;q<r;++q)m[q]=n;p=r-1}p=0;for(r="L";p<l;++p)q=
m[p],"L"==r&&"1"==q?m[p]="L":e.test(q)&&(r=q);for(p=0;p<l;++p)if(d.test(m[p])){for(r=p+1;r<l&&d.test(m[r]);++r);q="L"==(r<l?m[r]:"L");n="L"==(p?m[p-1]:"L")||q?"L":"R";for(q=p;q<r;++q)m[q]=n;p=r-1}for(var r=[],t,p=0;p<l;)if(g.test(m[p])){q=p;for(++p;p<l&&g.test(m[p]);++p);r.push(new b(0,q,p))}else{var u=p,n=r.length;for(++p;p<l&&"L"!=m[p];++p);for(q=u;q<p;)if(f.test(m[q])){u<q&&r.splice(n,0,new b(1,u,q));u=q;for(++q;q<p&&f.test(m[q]);++q);r.splice(n,0,new b(2,u,q));u=q}else++q;u<p&&r.splice(n,0,new b(1,
u,p))}1==r[0].level&&(t=h.match(/^\s+/))&&(r[0].from=t[0].length,r.unshift(new b(0,0,t[0].length)));1==fb(r).level&&(t=h.match(/\s+$/))&&(fb(r).to-=t[0].length,r.push(new b(0,l-t[0].length,l)));r[0].level!=fb(r).level&&r.push(new b(r[0].level,l,l));return r}}();a.version="4.5.0";return a});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function b(a,b,d,e){var g=a.getLineHandle(b.line),f=b.ch-1,g=0<=f&&h[g.text.charAt(f)]||h[g.text.charAt(++f)];if(!g)return null;var w=">"==g.charAt(1)?1:-1;if(d&&0<w!=(f==b.ch))return null;d=a.getTokenTypeAt(n(b.line,f+1));a=c(a,n(b.line,f+(0<w?1:0)),w,d||null,e);return null==a?null:{from:n(b.line,f),
to:a&&a.pos,match:a&&a.ch==g.charAt(0),forward:0<w}}function c(a,b,c,d,e){var g=e&&e.maxScanLineLength||1E4,f=e&&e.maxScanLines||1E3,u=[];e=e&&e.bracketRegex?e.bracketRegex:/[(){}[\]]/;for(var f=0<c?Math.min(b.line+f,a.lastLine()+1):Math.max(a.firstLine()-1,b.line-f),x=b.line;x!=f;x+=c){var z=a.getLine(x);if(z){var y=0<c?0:z.length-1,B=0<c?z.length:-1;if(!(z.length>g))for(x==b.line&&(y=b.ch-(0>c?1:0));y!=B;y+=c){var A=z.charAt(y);if(e.test(A)&&(void 0===d||a.getTokenTypeAt(n(x,y+1))==d))if(">"==h[A].charAt(1)==
0<c)u.push(A);else if(u.length)u.pop();else return{pos:n(x,y),ch:A}}}}return x-c==(0<c?a.lastLine():a.firstLine())?!1:null}function e(a,c,d){for(var e=a.state.matchBrackets.maxHighlightLineLength||1E3,g=[],h=a.listSelections(),w=0;w<h.length;w++){var u=h[w].empty()&&b(a,h[w].head,!1,d);if(u&&a.getLine(u.from.line).length<=e){var x=u.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";g.push(a.markText(u.from,n(u.from.line,u.from.ch+1),{className:x}));u.to&&a.getLine(u.to.line).length<=
e&&g.push(a.markText(u.to,n(u.to.line,u.to.ch+1),{className:x}))}}if(g.length)if(f&&a.state.focused&&a.display.input.focus(),d=function(){a.operation(function(){for(var a=0;a<g.length;a++)g[a].clear()})},c)setTimeout(d,800);else return d}function d(a){a.operation(function(){g&&(g(),g=null);g=e(a,!1,a.state.matchBrackets)})}var f=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||8>document.documentMode),n=a.Pos,h={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},g=null;a.defineOption("matchBrackets",
!1,function(b,c,e){e&&e!=a.Init&&b.off("cursorActivity",d);c&&(b.state.matchBrackets="object"==typeof c?c:{},b.on("cursorActivity",d))});a.defineExtension("matchBrackets",function(){e(this,!0)});a.defineExtension("findMatchingBracket",function(a,c,d){return b(this,a,c,d)});a.defineExtension("scanForBracket",function(a,b,d,e){return c(this,a,b,d,e)})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function b(b){if(b.getOption("disableInput"))return a.Pass;for(var d=b.listSelections(),e,g=[],l=0;l<d.length;l++){var m=d[l].head,p=b.getTokenAt(m);if("comment"!=p.type)return a.Pass;var t=a.innerMode(b.getMode(),p.state).mode;if(!e)e=t;else if(e!=t)return a.Pass;t=null;if(e.blockCommentStart&&e.blockCommentContinue){var r=
p.string.indexOf(e.blockCommentEnd),q=b.getRange(a.Pos(m.line,0),a.Pos(m.line,p.end)),w;if(!(-1!=r&&r==p.string.length-e.blockCommentEnd.length&&m.ch>=r))if(0==p.string.indexOf(e.blockCommentStart)){if(t=q.slice(0,p.start),!/^\s*$/.test(t))for(t="",r=0;r<p.start;++r)t+=" "}else-1!=(w=q.indexOf(e.blockCommentContinue))&&w+e.blockCommentContinue.length>p.start&&/^\s*$/.test(q.slice(0,w))&&(t=q.slice(0,w));null!=t&&(t+=e.blockCommentContinue)}null==t&&e.lineComment&&c(b)&&(m=b.getLine(m.line),w=m.indexOf(e.lineComment),
-1<w&&(t=m.slice(0,w),t=/\S/.test(t)?null:t+(e.lineComment+m.slice(w+e.lineComment.length).match(/^\s*/)[0])));if(null==t)return a.Pass;g[l]="\n"+t}b.operation(function(){for(var a=d.length-1;0<=a;a--)b.replaceRange(g[a],d[a].from(),d[a].to(),"+insert")})}function c(a){return(a=a.getOption("continueComments"))&&"object"==typeof a?!1!==a.continueLineComment:!0}for(var e=["clike","css","javascript"],d=0;d<e.length;++d)a.extendMode(e[d],{blockCommentContinue:" * "});a.defineOption("continueComments",
null,function(c,d,e){e&&e!=a.Init&&c.removeKeyMap("continueComment");d&&(e="Enter","string"==typeof d?e=d:"object"==typeof d&&d.key&&(e=d.key),d={name:"continueComment"},d[e]=b,c.addKeyMap(d))})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function b(a){a=a.search(e);return-1==a?0:a}var c={},e=/[^\s\u00a0]/,d=a.Pos;a.commands.toggleComment=function(a){for(var b=Infinity,c=a.listSelections(),e=null,l=c.length-1;0<=l;l--){var m=c[l].from(),p=c[l].to();m.line>=b||(p.line>=b&&(p=d(b,0)),b=m.line,null==e?a.uncomment(m,p)?e="un":(a.lineComment(m,
p),e="line"):"un"==e?a.uncomment(m,p):a.lineComment(m,p))}};a.defineExtension("lineComment",function(a,n,h){h||(h=c);var g=this,l=g.getModeAt(a),m=h.lineComment||l.lineComment;if(m){var p=g.getLine(a.line);if(null!=p){var t=Math.min(0!=n.ch||n.line==a.line?n.line+1:n.line,g.lastLine()+1),r=null==h.padding?" ":h.padding,q=h.commentBlankLines||a.line==n.line;g.operation(function(){if(h.indent)for(var c=p.slice(0,b(p)),l=a.line;l<t;++l){var n=g.getLine(l),z=c.length;if(q||e.test(n))n.slice(0,z)!=c&&
(z=b(n)),g.replaceRange(c+m+r,d(l,0),d(l,z))}else for(l=a.line;l<t;++l)(q||e.test(g.getLine(l)))&&g.replaceRange(m+r,d(l,0))})}}else if(h.blockCommentStart||l.blockCommentStart)h.fullLines=!0,g.blockComment(a,n,h)});a.defineExtension("blockComment",function(a,b,h){h||(h=c);var g=this,l=g.getModeAt(a),m=h.blockCommentStart||l.blockCommentStart,p=h.blockCommentEnd||l.blockCommentEnd;if(m&&p){var t=Math.min(b.line,g.lastLine());t!=a.line&&0==b.ch&&e.test(g.getLine(t))&&--t;var r=null==h.padding?" ":
h.padding;a.line>t||g.operation(function(){if(0!=h.fullLines){var c=e.test(g.getLine(t));g.replaceRange(r+p,d(t));g.replaceRange(m+r,d(a.line,0));var w=h.blockCommentLead||l.blockCommentLead;if(null!=w)for(var u=a.line+1;u<=t;++u)(u!=t||c)&&g.replaceRange(w+r,d(u,0))}else g.replaceRange(p,b),g.replaceRange(m,a)})}else(h.lineComment||l.lineComment)&&0!=h.fullLines&&g.lineComment(a,b,h)});a.defineExtension("uncomment",function(a,b,h){h||(h=c);var g=this,l=g.getModeAt(a),m=Math.min(b.line,g.lastLine()),
p=Math.min(a.line,m),t=h.lineComment||l.lineComment,r=[],q=null==h.padding?" ":h.padding,w;a:if(t){for(var u=p;u<=m;++u){var x=g.getLine(u),z=x.indexOf(t);-1<z&&!/comment/.test(g.getTokenTypeAt(d(u,z+1)))&&(z=-1);if(-1==z&&(u!=m||u==p)&&e.test(x))break a;if(-1<z&&e.test(x.slice(0,z)))break a;r.push(x)}g.operation(function(){for(var a=p;a<=m;++a){var b=r[a-p],c=b.indexOf(t),e=c+t.length;0>c||(b.slice(e,e+q.length)==q&&(e+=q.length),w=!0,g.replaceRange("",d(a,c),d(a,e)))}});if(w)return!0}var y=h.blockCommentStart||
l.blockCommentStart,B=h.blockCommentEnd||l.blockCommentEnd;if(!y||!B)return!1;var A=h.blockCommentLead||l.blockCommentLead,C=g.getLine(p),D=m==p?C:g.getLine(m),H=C.indexOf(y),G=D.lastIndexOf(B);-1==G&&p!=m&&(D=g.getLine(--m),G=D.lastIndexOf(B));if(-1==H||-1==G||!/comment/.test(g.getTokenTypeAt(d(p,H+1)))||!/comment/.test(g.getTokenTypeAt(d(m,G+1))))return!1;l=C.lastIndexOf(y,a.ch);h=-1==l?-1:C.slice(0,a.ch).indexOf(B,l+y.length);if(-1!=l&&-1!=h&&h+B.length!=a.ch)return!1;h=D.indexOf(B,b.ch);a=D.slice(b.ch).lastIndexOf(y,
h-b.ch);l=-1==h||-1==a?-1:b.ch+a;if(-1!=h&&-1!=l&&l!=b.ch)return!1;g.operation(function(){g.replaceRange("",d(m,G-(q&&D.slice(G-q.length,G)==q?q.length:0)),d(m,G+B.length));var a=H+y.length;q&&C.slice(a,a+q.length)==q&&(a+=q.length);g.replaceRange("",d(p,H),d(p,a));if(A)for(a=p+1;a<=m;++a){var b=g.getLine(a),c=b.indexOf(A);if(-1!=c&&!e.test(b.slice(0,c))){var f=c+A.length;q&&b.slice(f,f+q.length)==q&&(f+=q.length);g.replaceRange("",d(a,c),d(a,f))}}});return!0})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){a.defineMode("javascript",function(b,c){function e(a,b,c){eb=a;jb=c;return b}function d(a,b){var c=a.next();if('"'==c||"'"==c)return b.tokenize=f(c),b.tokenize(a,b);if("."==c&&a.match(/^\d+(?:[eE][+\-]?\d+)?/))return e("number","number");if("."==c&&a.match(".."))return e("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(c))return e(c);
if("="==c&&a.eat(">"))return e("=>","operator");if("0"==c&&a.eat(/x/i))return a.eatWhile(/[\da-f]/i),e("number","number");if(/\d/.test(c))return a.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),e("number","number");if("/"==c){if(a.eat("*"))return b.tokenize=n,n(a,b);if(a.eat("/"))return a.skipToEnd(),e("comment","comment");if("operator"==b.lastType||"keyword c"==b.lastType||"sof"==b.lastType||/^[\[{}\(,;:]$/.test(b.lastType)){a:for(var c=!1,d,g=!1;null!=(d=a.next());){if(!c){if("/"==d&&!g)break a;"["==
d?g=!0:g&&"]"==d&&(g=!1)}c=!c&&"\\"==d}a.eatWhile(/[gimy]/);return e("regexp","string-2")}a.eatWhile(qa);return e("operator","operator",a.current())}if("`"==c)return b.tokenize=h,h(a,b);if("#"==c)return a.skipToEnd(),e("error","error");if(qa.test(c))return a.eatWhile(qa),e("operator","operator",a.current());if(Ma.test(c))return a.eatWhile(Ma),c=a.current(),(d=Pa.propertyIsEnumerable(c)&&Pa[c])&&"."!=b.lastType?e(d.type,d.style,c):e("variable","variable",c)}function f(a){return function(b,c){var g=
!1,f;if(na&&"@"==b.peek()&&b.match(Kb))return c.tokenize=d,e("jsonld-keyword","meta");for(;null!=(f=b.next())&&(f!=a||g);)g=!g&&"\\"==f;g||(c.tokenize=d);return e("string","string")}}function n(a,b){for(var c=!1,g;g=a.next();){if("/"==g&&c){b.tokenize=d;break}c="*"==g}return e("comment","comment")}function h(a,b){for(var c=!1,g;null!=(g=a.next());){if(!c&&("`"==g||"$"==g&&a.eat("{"))){b.tokenize=d;break}c=!c&&"\\"==g}return e("quasi","string-2",a.current())}function g(a,b){b.fatArrowAt&&(b.fatArrowAt=
null);var c=a.string.indexOf("=>",a.start);if(!(0>c)){for(var d=0,e=!1,c=c-1;0<=c;--c){var g=a.string.charAt(c),f="([{}])".indexOf(g);if(0<=f&&3>f){if(!d){++c;break}if(0==--d)break}else if(3<=f&&6>f)++d;else if(Ma.test(g))e=!0;else if(e&&!d){++c;break}}e&&!d&&(b.fatArrowAt=c)}}function l(a,b,c,d,e,g){this.indented=a;this.column=b;this.type=c;this.prev=e;this.info=g;null!=d&&(this.align=d)}function m(){for(var a=arguments.length-1;0<=a;a--)ka.cc.push(arguments[a])}function p(){m.apply(null,arguments);
return!0}function t(a){function b(c){for(;c;c=c.next)if(c.name==a)return!0;return!1}var d=ka.state;d.context?(ka.marked="def",b(d.localVars)||(d.localVars={name:a,next:d.localVars})):!b(d.globalVars)&&c.globalVars&&(d.globalVars={name:a,next:d.globalVars})}function r(){ka.state.context={prev:ka.state.context,vars:ka.state.localVars};ka.state.localVars=Za}function q(){ka.state.localVars=ka.state.context.vars;ka.state.context=ka.state.context.prev}function w(a,b){var c=function(){var c=ka.state,d=c.indented;
if("stat"==c.lexical.type)d=c.lexical.indented;else for(var e=c.lexical;e&&")"==e.type&&e.align;e=e.prev)d=e.indented;c.lexical=new l(d,ka.stream.column(),a,null,c.lexical,b)};c.lex=!0;return c}function u(){var a=ka.state;a.lexical.prev&&(")"==a.lexical.type&&(a.indented=a.lexical.indented),a.lexical=a.lexical.prev)}function x(a){function b(c){return c==a?p():";"==a?m():p(b)}return b}function z(a,b){return"var"==a?p(w("vardef",b.length),ma,x(";"),u):"keyword a"==a?p(w("form"),y,z,u):"keyword b"==
a?p(w("form"),z,u):"{"==a?p(w("}"),K,u):";"==a?p():"if"==a?("else"==ka.state.lexical.info&&ka.state.cc[ka.state.cc.length-1]==u&&ka.state.cc.pop()(),p(w("form"),y,z,u,aa)):"function"==a?p(ya):"for"==a?p(w("form"),ea,z,u):"variable"==a?p(w("stat"),T):"switch"==a?p(w("form"),y,w("}","switch"),x("{"),K,u,u):"case"==a?p(y,x(":")):"default"==a?p(x(":")):"catch"==a?p(w("form"),r,x("("),ib,x(")"),z,u,q):"module"==a?p(w("form"),r,qb,q,u):"class"==a?p(w("form"),Ka,u):"export"==a?p(w("form"),Xa,u):"import"==
a?p(w("form"),Ca,u):m(w("stat"),y,x(";"),u)}function y(a){return A(a,!1)}function B(a){return A(a,!0)}function A(a,b){if(ka.state.fatArrowAt==ka.stream.start){var c=b?V:M;if("("==a)return p(r,w(")"),P(S,")"),u,x("=>"),c,q);if("variable"==a)return m(r,S,x("=>"),c,q)}c=b?G:H;return mb.hasOwnProperty(a)?p(c):"function"==a?p(ya,c):"keyword c"==a?p(b?D:C):"("==a?p(w(")"),C,cb,x(")"),u,c):"operator"==a||"spread"==a?p(b?B:y):"["==a?p(w("]"),sb,u,c):"{"==a?R(N,"}",null,c):"quasi"==a?m(L,c):p()}function C(a){return a.match(/[;\}\)\],]/)?
m():m(y)}function D(a){return a.match(/[;\}\)\],]/)?m():m(B)}function H(a,b){return","==a?p(y):G(a,b,!1)}function G(a,b,c){var d=0==c?H:G,e=0==c?y:B;if("=>"==b)return p(r,c?V:M,q);if("operator"==a)return/\+\+|--/.test(b)?p(d):"?"==b?p(y,x(":"),e):p(e);if("quasi"==a)return m(L,d);if(";"!=a){if("("==a)return R(B,")","call",d);if("."==a)return p(O,d);if("["==a)return p(w("]"),C,x("]"),u,d)}}function L(a,b){return"quasi"!=a?m():"${"!=b.slice(b.length-2)?p(L):p(y,J)}function J(a){if("}"==a)return ka.marked=
"string-2",ka.state.tokenize=h,p(L)}function M(a){g(ka.stream,ka.state);return"{"==a?m(z):m(y)}function V(a){g(ka.stream,ka.state);return"{"==a?m(z):m(B)}function T(a){return":"==a?p(u,z):m(H,x(";"),u)}function O(a){if("variable"==a)return ka.marked="property",p()}function N(a,b){if("variable"==a||"keyword"==ka.style)return ka.marked="property","get"==b||"set"==b?p(Z):p(X);if("number"==a||"string"==a)return ka.marked=na?"property":ka.style+" property",p(X);if("jsonld-keyword"==a)return p(X);if("["==
a)return p(y,x("]"),X)}function Z(a){if("variable"!=a)return m(X);ka.marked="property";return p(ya)}function X(a){if(":"==a)return p(B);if("("==a)return m(ya)}function P(a,b){function c(d){return","==d?(d=ka.state.lexical,"call"==d.info&&(d.pos=(d.pos||0)+1),p(a,c)):d==b?p():p(x(b))}return function(d){return d==b?p():m(a,c)}}function R(a,b,c){for(var d=3;d<arguments.length;d++)ka.cc.push(arguments[d]);return p(w(b,c),P(a,b),u)}function K(a){return"}"==a?p():m(z,K)}function U(a){if(db&&":"==a)return p(Q)}
function Q(a){if("variable"==a)return ka.marked="variable-3",p()}function ma(){return m(S,U,la,sa)}function S(a,b){if("variable"==a)return t(b),p();if("["==a)return R(S,"]");if("{"==a)return R(W,"}")}function W(a,b){if("variable"==a&&!ka.stream.match(/^\s*:/,!1))return t(b),p(la);"variable"==a&&(ka.marked="property");return p(x(":"),S,la)}function la(a,b){if("="==b)return p(B)}function sa(a){if(","==a)return p(ma)}function aa(a,b){if("keyword b"==a&&"else"==b)return p(w("form","else"),z,u)}function ea(a){if("("==
a)return p(w(")"),Ia,x(")"),u)}function Ia(a){return"var"==a?p(ma,x(";"),Ea):";"==a?p(Ea):"variable"==a?p(v):m(y,x(";"),Ea)}function v(a,b){return"in"==b||"of"==b?(ka.marked="keyword",p(y)):p(H,Ea)}function Ea(a,b){return";"==a?p(pa):"in"==b||"of"==b?(ka.marked="keyword",p(y)):m(y,x(";"),pa)}function pa(a){")"!=a&&p(y)}function ya(a,b){if("*"==b)return ka.marked="keyword",p(ya);if("variable"==a)return t(b),p(ya);if("("==a)return p(r,w(")"),P(ib,")"),u,z,q)}function ib(a){return"spread"==a?p(ib):m(S,
U)}function Ka(a,b){if("variable"==a)return t(b),p(Fa)}function Fa(a,b){if("extends"==b)return p(y,Fa);if("{"==a)return p(w("}"),Oa,u)}function Oa(a,b){if("variable"==a||"keyword"==ka.style)return ka.marked="property","get"==b||"set"==b?p(pb,ya,Oa):p(ya,Oa);if("*"==b)return ka.marked="keyword",p(Oa);if(";"==a)return p(Oa);if("}"==a)return p()}function pb(a){if("variable"!=a)return m();ka.marked="property";return p()}function qb(a,b){if("string"==a)return p(z);if("variable"==a)return t(b),p(Va)}function Xa(a,
b){return"*"==b?(ka.marked="keyword",p(Va,x(";"))):"default"==b?(ka.marked="keyword",p(y,x(";"))):m(z)}function Ca(a){return"string"==a?p():m(Ra,Va)}function Ra(a,b){if("{"==a)return R(Ra,"}");"variable"==a&&t(b);return p()}function Va(a,b){if("from"==b)return ka.marked="keyword",p(y)}function sb(a){return"]"==a?p():m(B,Ya)}function Ya(a){return"for"==a?m(cb,x("]")):","==a?p(P(B,"]")):m(P(B,"]"))}function cb(a){if("for"==a)return p(ea,cb);if("if"==a)return p(y,cb)}var Wa=b.indentUnit,Na=c.statementIndent,
na=c.jsonld,Aa=c.json||na,db=c.typescript,Ma=c.wordCharacters||/[\w$]/,Pa=function(){function a(b){return{type:b,style:"keyword"}}var b=a("keyword a"),c=a("keyword b"),d=a("keyword c"),e=a("operator"),g={type:"atom",style:"atom"},b={"if":a("if"),"while":b,"with":b,"else":c,"do":c,"try":c,"finally":c,"return":d,"break":d,"continue":d,"new":d,"delete":d,"throw":d,"debugger":d,"var":a("var"),"const":a("var"),let:a("var"),"function":a("function"),"catch":a("catch"),"for":a("for"),"switch":a("switch"),
"case":a("case"),"default":a("default"),"in":e,"typeof":e,"instanceof":e,"true":g,"false":g,"null":g,undefined:g,NaN:g,Infinity:g,"this":a("this"),module:a("module"),"class":a("class"),"super":a("atom"),yield:d,"export":a("export"),"import":a("import"),"extends":d};if(db){var c={type:"variable",style:"variable-3"},c={"interface":a("interface"),"extends":a("extends"),constructor:a("constructor"),"public":a("public"),"private":a("private"),"protected":a("protected"),"static":a("static"),string:c,number:c,
bool:c,any:c},f;for(f in c)b[f]=c[f]}return b}(),qa=/[+\-*&%=<>!?|~^]/,Kb=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,eb,jb,mb={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},ka={state:null,column:null,marked:null,cc:null},Za={name:"this",next:{name:"arguments"}};u.lex=!0;return{startState:function(a){a={tokenize:d,lastType:"sof",cc:[],lexical:new l((a||0)-Wa,0,"block",!1),localVars:c.localVars,context:c.localVars&&{vars:c.localVars},
indented:0};c.globalVars&&"object"==typeof c.globalVars&&(a.globalVars=c.globalVars);return a},token:function(a,b){a.sol()&&(b.lexical.hasOwnProperty("align")||(b.lexical.align=!1),b.indented=a.indentation(),g(a,b));if(b.tokenize!=n&&a.eatSpace())return null;var c=b.tokenize(a,b);if("comment"==eb)return c;b.lastType="operator"!=eb||"++"!=jb&&"--"!=jb?eb:"incdec";a:{var d=eb,e=jb,f=b.cc;ka.state=b;ka.stream=a;ka.marked=null;ka.cc=f;ka.style=c;b.lexical.hasOwnProperty("align")||(b.lexical.align=!0);
for(;;)if((f.length?f.pop():Aa?y:z)(d,e)){for(;f.length&&f[f.length-1].lex;)f.pop()();if(ka.marked){c=ka.marked;break a}if(d="variable"==d)b:{for(d=b.localVars;d;d=d.next)if(d.name==e){d=!0;break b}for(f=b.context;f;f=f.prev)for(d=f.vars;d;d=d.next)if(d.name==e){d=!0;break b}d=void 0}if(d){c="variable-2";break a}break a}}return c},indent:function(b,e){if(b.tokenize==n)return a.Pass;if(b.tokenize!=d)return 0;var g=e&&e.charAt(0),f=b.lexical;if(!/^\s*else\b/.test(e))for(var h=b.cc.length-1;0<=h;--h){var l=
b.cc[h];if(l==u)f=f.prev;else if(l!=aa)break}"stat"==f.type&&"}"==g&&(f=f.prev);Na&&")"==f.type&&"stat"==f.prev.type&&(f=f.prev);h=f.type;l=g==h;return"vardef"==h?f.indented+("operator"==b.lastType||","==b.lastType?f.info+1:0):"form"==h&&"{"==g?f.indented:"form"==h?f.indented+Wa:"stat"==h?f.indented+("operator"==b.lastType||","==b.lastType?Na||Wa:0):"switch"!=f.info||l||0==c.doubleIndentSwitch?f.align?f.column+(l?0:1):f.indented+(l?0:Wa):f.indented+(/^(?:case|default)\b/.test(e)?Wa:2*Wa)},electricChars:":{}",
blockCommentStart:Aa?null:"/*",blockCommentEnd:Aa?null:"*/",lineComment:Aa?null:"//",fold:"brace",helperType:Aa?"json":"javascript",jsonldMode:na,jsonMode:Aa}});a.registerHelper("wordChars","javascript",/[\w$]/);a.defineMIME("text/javascript","javascript");a.defineMIME("text/ecmascript","javascript");a.defineMIME("application/javascript","javascript");a.defineMIME("application/x-javascript","javascript");a.defineMIME("application/ecmascript","javascript");a.defineMIME("application/json",{name:"javascript",
json:!0});a.defineMIME("application/x-json",{name:"javascript",json:!0});a.defineMIME("application/ld+json",{name:"javascript",jsonld:!0});a.defineMIME("text/typescript",{name:"javascript",typescript:!0});a.defineMIME("application/typescript",{name:"javascript",typescript:!0})});var COMPILED=!0,goog=goog||{};goog.global=this;
goog.exportPath_=function(a,b,c){a=a.split(".");c=c||goog.global;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var e;a.length&&(e=a.shift());)a.length||void 0===b?c=c[e]?c[e]:c[e]={}:c[e]=b};goog.define=function(a,b){var c=b;COMPILED||goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,a)&&(c=goog.global.CLOSURE_DEFINES[a]);goog.exportPath_(a,c)};goog.DEBUG=!0;goog.LOCALE="en";goog.TRUSTED_SITE=!0;
goog.provide=function(a){if(!COMPILED){if(goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');delete goog.implicitNamespaces_[a];for(var b=a;(b=b.substring(0,b.lastIndexOf(".")))&&!goog.getObjectByName(b);)goog.implicitNamespaces_[b]=!0}goog.exportPath_(a)};goog.setTestOnly=function(a){if(COMPILED&&!goog.DEBUG)throw a=a||"",Error("Importing test-only code into non-debug environment"+a?": "+a:".");};
COMPILED||(goog.isProvided_=function(a){return!goog.implicitNamespaces_[a]&&!!goog.getObjectByName(a)},goog.implicitNamespaces_={});goog.getObjectByName=function(a,b){for(var c=a.split("."),e=b||goog.global,d;d=c.shift();)if(goog.isDefAndNotNull(e[d]))e=e[d];else return null;return e};goog.globalize=function(a,b){var c=b||goog.global,e;for(e in a)c[e]=a[e]};
goog.addDependency=function(a,b,c){if(goog.DEPENDENCIES_ENABLED){var e;a=a.replace(/\\/g,"/");for(var d=goog.dependencies_,f=0;e=b[f];f++)d.nameToPath[e]=a,a in d.pathToNames||(d.pathToNames[a]={}),d.pathToNames[a][e]=!0;for(e=0;b=c[e];e++)a in d.requires||(d.requires[a]={}),d.requires[a][b]=!0}};goog.ENABLE_DEBUG_LOADER=!0;
goog.require=function(a){if(!COMPILED&&!goog.isProvided_(a)){if(goog.ENABLE_DEBUG_LOADER){var b=goog.getPathFromDeps_(a);if(b){goog.included_[b]=!0;goog.writeScripts_();return}}a="goog.require could not find: "+a;goog.global.console&&goog.global.console.error(a);throw Error(a);}};goog.basePath="";goog.nullFunction=function(){};goog.identityFunction=function(a,b){return a};goog.abstractMethod=function(){throw Error("unimplemented abstract method");};
goog.addSingletonGetter=function(a){a.getInstance=function(){if(a.instance_)return a.instance_;goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=a);return a.instance_=new a}};goog.instantiatedSingletons_=[];goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER;
goog.DEPENDENCIES_ENABLED&&(goog.included_={},goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},goog.inHtmlDocument_=function(){var a=goog.global.document;return"undefined"!=typeof a&&"write"in a},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var a=goog.global.document.getElementsByTagName("script"),b=a.length-1;0<=b;--b){var c=a[b].src,e=c.lastIndexOf("?"),e=-1==e?c.length:
e;if("base.js"==c.substr(e-7,7)){goog.basePath=c.substr(0,e-7);break}}},goog.importScript_=function(a){var b=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;!goog.dependencies_.written[a]&&b(a)&&(goog.dependencies_.written[a]=!0)},goog.writeScriptTag_=function(a){if(goog.inHtmlDocument_()){var b=goog.global.document;if("complete"==b.readyState){if(/\bdeps.js$/.test(a))return!1;throw Error('Cannot write "'+a+'" after document load');}b.write('<script type="text/javascript" src="'+a+'">\x3c/script>');
return!0}return!1},goog.writeScripts_=function(){function a(d){if(!(d in e.written)){if(!(d in e.visited)&&(e.visited[d]=!0,d in e.requires))for(var n in e.requires[d])if(!goog.isProvided_(n))if(n in e.nameToPath)a(e.nameToPath[n]);else throw Error("Undefined nameToPath for "+n);d in c||(c[d]=!0,b.push(d))}}var b=[],c={},e=goog.dependencies_,d;for(d in goog.included_)e.written[d]||a(d);for(d=0;d<b.length;d++)if(b[d])goog.importScript_(goog.basePath+b[d]);else throw Error("Undefined script input");
},goog.getPathFromDeps_=function(a){return a in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[a]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js"));
goog.typeOf=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b};goog.isDef=function(a){return void 0!==a};goog.isNull=function(a){return null===a};goog.isDefAndNotNull=function(a){return null!=a};goog.isArray=function(a){return"array"==goog.typeOf(a)};goog.isArrayLike=function(a){var b=goog.typeOf(a);return"array"==b||"object"==b&&"number"==typeof a.length};goog.isDateLike=function(a){return goog.isObject(a)&&"function"==typeof a.getFullYear};goog.isString=function(a){return"string"==typeof a};
goog.isBoolean=function(a){return"boolean"==typeof a};goog.isNumber=function(a){return"number"==typeof a};goog.isFunction=function(a){return"function"==goog.typeOf(a)};goog.isObject=function(a){var b=typeof a;return"object"==b&&null!=a||"function"==b};goog.getUid=function(a){return a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.hasUid=function(a){return!!a[goog.UID_PROPERTY_]};goog.removeUid=function(a){"removeAttribute"in a&&a.removeAttribute(goog.UID_PROPERTY_);try{delete a[goog.UID_PROPERTY_]}catch(b){}};
goog.UID_PROPERTY_="closure_uid_"+(1E9*Math.random()>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(a){var b=goog.typeOf(a);if("object"==b||"array"==b){if(a.clone)return a.clone();var b="array"==b?[]:{},c;for(c in a)b[c]=goog.cloneObject(a[c]);return b}return a};goog.bindNative_=function(a,b,c){return a.call.apply(a.bind,arguments)};
goog.bindJs_=function(a,b,c){if(!a)throw Error();if(2<arguments.length){var e=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,e);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}};goog.bind=function(a,b,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}};goog.mixin=function(a,b){for(var c in b)a[c]=b[c]};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};
goog.globalEval=function(a){if(goog.global.execScript)goog.global.execScript(a,"JavaScript");else if(goog.global.eval)if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),"undefined"!=typeof goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_)goog.global.eval(a);else{var b=goog.global.document,c=b.createElement("script");c.type="text/javascript";c.defer=!1;c.appendChild(b.createTextNode(a));b.body.appendChild(c);
b.body.removeChild(c)}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;goog.getCssName=function(a,b){var c=function(a){return goog.cssNameMapping_[a]||a},e=function(a){a=a.split("-");for(var b=[],e=0;e<a.length;e++)b.push(c(a[e]));return b.join("-")},e=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?c:e:function(a){return a};return b?a+"-"+e(b):e(a)};goog.setCssNameMapping=function(a,b){goog.cssNameMapping_=a;goog.cssNameMappingStyle_=b};
!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(a,b){var c=b||{},e;for(e in c){var d=(""+c[e]).replace(/\$/g,"$$$$");a=a.replace(new RegExp("\\{\\$"+e+"\\}","gi"),d)}return a};goog.getMsgWithFallback=function(a,b){return a};goog.exportSymbol=function(a,b,c){goog.exportPath_(a,b,c)};goog.exportProperty=function(a,b,c){a[b]=c};
goog.inherits=function(a,b){function c(){}c.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new c;a.prototype.constructor=a};
goog.base=function(a,b,c){var e=arguments.callee.caller;if(goog.DEBUG&&!e)throw Error("arguments.caller not defined.  goog.base() expects not to be running in strict mode. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(e.superClass_)return e.superClass_.constructor.apply(a,Array.prototype.slice.call(arguments,1));for(var d=Array.prototype.slice.call(arguments,2),f=!1,n=a.constructor;n;n=n.superClass_&&n.superClass_.constructor)if(n.prototype[b]===e)f=!0;else if(f)return n.prototype[b].apply(a,
d);if(a[b]===e)return a.constructor.prototype[b].apply(a,d);throw Error("goog.base called from a method of one name to a method of a different name");};goog.scope=function(a){a.call(goog.global)};goog.structs={};goog.structs.Collection=function(){};
(function(a){function b(){}function c(a,b){return function(){a.apply(b,arguments)}}function e(a){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof a)throw new TypeError("not a function");this._state=0;this._value=void 0;this._deferreds=[];l(a,this)}function d(a,b){for(;3===a._state;)a=a._value;0===a._state?a._deferreds.push(b):p(function(){var c=1===a._state?b.onFulfilled:b.onRejected;if(null===c)(1===a._state?f:n)(b.promise,a._value);else{var d;
try{d=c(a._value)}catch(e){n(b.promise,e);return}f(b.promise,d)}})}function f(a,b){try{if(b===a)throw new TypeError("A promise cannot be resolved with itself.");if(b&&("object"===typeof b||"function"===typeof b)){var d=b.then;if(b instanceof e){a._state=3;a._value=b;h(a);return}if("function"===typeof d){l(c(d,b),a);return}}a._state=1;a._value=b;h(a)}catch(g){n(a,g)}}function n(a,b){a._state=2;a._value=b;h(a)}function h(a){for(var b=0,c=a._deferreds.length;b<c;b++)d(a,a._deferreds[b]);a._deferreds=
null}function g(a,b,c){this.onFulfilled="function"===typeof a?a:null;this.onRejected="function"===typeof b?b:null;this.promise=c}function l(a,b){var c=!1;try{a(function(a){c||(c=!0,f(b,a))},function(a){c||(c=!0,n(b,a))})}catch(d){c||(c=!0,n(b,d))}}var m=setTimeout,p="function"===typeof setImmediate&&setImmediate||function(a){m(a,1)},t=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)};e.prototype["catch"]=function(a){return this.then(null,a)};e.prototype.then=function(a,
c){var f=new e(b);d(this,new g(a,c,f));return f};e.all=function(){var a=Array.prototype.slice.call(1===arguments.length&&t(arguments[0])?arguments[0]:arguments);return new e(function(b,c){function d(g,f){try{if(f&&("object"===typeof f||"function"===typeof f)){var h=f.then;if("function"===typeof h){h.call(f,function(a){d(g,a)},c);return}}a[g]=f;0===--e&&b(a)}catch(l){c(l)}}if(0===a.length)return b([]);for(var e=a.length,g=0;g<a.length;g++)d(g,a[g])})};e.resolve=function(a){return a&&"object"===typeof a&&
a.constructor===e?a:new e(function(b){b(a)})};e.reject=function(a){return new e(function(b,c){c(a)})};e.race=function(a){return new e(function(b,c){for(var d=0,e=a.length;d<e;d++)a[d].then(b,c)})};e._setImmediateFn=function(a){p=a};"undefined"!==typeof module&&module.exports?module.exports=e:a.Promise||(a.Promise=e)})(this);
(function(a){function b(a){this.ok=!1;"#"==a.charAt(0)&&(a=a.substr(1,6));a=a.replace(/ /g,"");a=a.toLowerCase();var e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",
darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",
gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",
lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",
oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",
slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},d;for(d in e)a==d&&(a=e[d]);var f=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,
example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}];for(d=0;d<f.length;d++){var n=f[d].process,h=f[d].re.exec(a);h&&(channels=n(h),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.ok=!0)}this.r=0>this.r||isNaN(this.r)?0:255<this.r?255:this.r;this.g=0>this.g||isNaN(this.g)?0:
255<this.g?255:this.g;this.b=0>this.b||isNaN(this.b)?0:255<this.b?255:this.b;this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"};this.toHex=function(){var a=this.r.toString(16),b=this.g.toString(16),c=this.b.toString(16);1==a.length&&(a="0"+a);1==b.length&&(b="0"+b);1==c.length&&(c="0"+c);return"#"+a+b+c};this.getHelpXML=function(){for(var a=[],c=0;c<f.length;c++)for(var d=f[c].example,h=0;h<d.length;h++)a[a.length]=d[h];for(var n in e)a[a.length]=n;d=document.createElement("ul");
d.setAttribute("id","rgbcolor-examples");for(c=0;c<a.length;c++)try{var r=document.createElement("li"),q=new b(a[c]),w=document.createElement("div");w.style.cssText="margin: 3px; border: 1px solid black; background:"+q.toHex()+"; color:"+q.toHex();w.appendChild(document.createTextNode("test"));var u=document.createTextNode(" "+a[c]+" -> "+q.toRGB()+" -> "+q.toHex());r.appendChild(w);r.appendChild(u);d.appendChild(r)}catch(x){}return d}}"undefined"!==typeof define&&define.amd?define(function(){return b}):
"undefined"!==typeof module&&module.exports&&(module.exports=b);a.RGBColor=b})("undefined"!==typeof window?window:this);
(function(a){function b(a,b,c,m,p,n){if(!(isNaN(n)||1>n)){n|=0;a=document.getElementById(a).getContext("2d");var r;try{try{r=a.getImageData(b,c,m,p)}catch(q){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),r=a.getImageData(b,c,m,p)}catch(w){throw alert("Cannot access local image"),Error("unable to access local image data: "+w);}}}catch(u){throw alert("Cannot access image"),Error("unable to access image data: "+u);}for(var x=r.data,z=r.width*r.height*4,y=0;y<z;y+=4){var B=
x[y+3]/255;x[y]*=B;x[y+1]*=B;x[y+2]*=B}var x=r.data,A,C,D,H,G,L,J,M,V,T,O,N,Z,X,P,R,K,U,Q,ma,S,W,la;A=n+n+1;var sa=m-1,z=p-1,y=n+1,B=y*(y+1)/2,aa=new e,ea=aa;for(D=1;D<A;D++)if(ea=ea.next=new e,D==y)var Ia=ea;ea.next=aa;ea=D=null;L=G=0;var v=d[n],Ea=f[n];for(C=0;C<p;C++){P=R=K=U=J=M=V=T=0;O=y*(Q=x[G]);N=y*(ma=x[G+1]);Z=y*(S=x[G+2]);X=y*(W=x[G+3]);J+=B*Q;M+=B*ma;V+=B*S;T+=B*W;ea=aa;for(D=0;D<y;D++)ea.r=Q,ea.g=ma,ea.b=S,ea.a=W,ea=ea.next;for(D=1;D<y;D++)H=G+((sa<D?sa:D)<<2),J+=(ea.r=Q=x[H])*(la=y-D),
M+=(ea.g=ma=x[H+1])*la,V+=(ea.b=S=x[H+2])*la,T+=(ea.a=W=x[H+3])*la,P+=Q,R+=ma,K+=S,U+=W,ea=ea.next;D=aa;ea=Ia;for(A=0;A<m;A++)x[G]=J*v>>Ea,x[G+1]=M*v>>Ea,x[G+2]=V*v>>Ea,x[G+3]=T*v>>Ea,J-=O,M-=N,V-=Z,T-=X,O-=D.r,N-=D.g,Z-=D.b,X-=D.a,H=L+((H=A+n+1)<sa?H:sa)<<2,P+=D.r=x[H],R+=D.g=x[H+1],K+=D.b=x[H+2],U+=D.a=x[H+3],J+=P,M+=R,V+=K,T+=U,D=D.next,O+=Q=ea.r,N+=ma=ea.g,Z+=S=ea.b,X+=W=ea.a,P-=Q,R-=ma,K-=S,U-=W,ea=ea.next,G+=4;L+=m}for(A=0;A<m;A++){R=K=U=P=M=V=T=J=0;G=A<<2;O=y*(Q=x[G]);N=y*(ma=x[G+1]);Z=y*(S=
x[G+2]);X=y*(W=x[G+3]);J+=B*Q;M+=B*ma;V+=B*S;T+=B*W;ea=aa;for(D=0;D<y;D++)ea.r=Q,ea.g=ma,ea.b=S,ea.a=W,ea=ea.next;H=m;for(D=1;D<=n;D++)G=H+A<<2,J+=(ea.r=Q=x[G])*(la=y-D),M+=(ea.g=ma=x[G+1])*la,V+=(ea.b=S=x[G+2])*la,T+=(ea.a=W=x[G+3])*la,P+=Q,R+=ma,K+=S,U+=W,ea=ea.next,D<z&&(H+=m);G=A;D=aa;ea=Ia;for(C=0;C<p;C++)H=G<<2,x[H]=J*v>>Ea,x[H+1]=M*v>>Ea,x[H+2]=V*v>>Ea,x[H+3]=T*v>>Ea,J-=O,M-=N,V-=Z,T-=X,O-=D.r,N-=D.g,Z-=D.b,X-=D.a,H=A+((H=C+y)<z?H:z)*m<<2,J+=P+=D.r=x[H],M+=R+=D.g=x[H+1],V+=K+=D.b=x[H+2],T+=
U+=D.a=x[H+3],D=D.next,O+=Q=ea.r,N+=ma=ea.g,Z+=S=ea.b,X+=W=ea.a,P-=Q,R-=ma,K-=S,U-=W,ea=ea.next,G+=m}m=r.data;p=r.width*r.height*4;for(n=0;n<p;n+=4)Ia=m[n+3],0!=Ia&&(Ia=255/Ia,m[n]*=Ia,m[n+1]*=Ia,m[n+2]*=Ia);a.putImageData(r,b,c)}}function c(a,b,c,m,p,n){if(!(isNaN(n)||1>n)){n|=0;a=document.getElementById(a).getContext("2d");var r;try{try{r=a.getImageData(b,c,m,p)}catch(q){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),r=a.getImageData(b,c,m,p)}catch(w){throw alert("Cannot access local image"),
Error("unable to access local image data: "+w);}}}catch(u){throw alert("Cannot access image"),Error("unable to access image data: "+u);}var x=r.data,z,y,B,A,C,D,H,G,L,J,M,V,T,O,N,Z,X,P,R;z=n+n+1;var K=m-1,U=p-1,Q=n+1,ma=Q*(Q+1)/2,S=new e,W=S;for(B=1;B<z;B++)if(W=W.next=new e,B==Q)var la=W;W.next=S;W=B=null;D=C=0;var sa=d[n],aa=f[n];for(y=0;y<p;y++){T=O=N=H=G=L=0;J=Q*(Z=x[C]);M=Q*(X=x[C+1]);V=Q*(P=x[C+2]);H+=ma*Z;G+=ma*X;L+=ma*P;W=S;for(B=0;B<Q;B++)W.r=Z,W.g=X,W.b=P,W=W.next;for(B=1;B<Q;B++)A=C+((K<
B?K:B)<<2),H+=(W.r=Z=x[A])*(R=Q-B),G+=(W.g=X=x[A+1])*R,L+=(W.b=P=x[A+2])*R,T+=Z,O+=X,N+=P,W=W.next;B=S;W=la;for(z=0;z<m;z++)x[C]=H*sa>>aa,x[C+1]=G*sa>>aa,x[C+2]=L*sa>>aa,H-=J,G-=M,L-=V,J-=B.r,M-=B.g,V-=B.b,A=D+((A=z+n+1)<K?A:K)<<2,T+=B.r=x[A],O+=B.g=x[A+1],N+=B.b=x[A+2],H+=T,G+=O,L+=N,B=B.next,J+=Z=W.r,M+=X=W.g,V+=P=W.b,T-=Z,O-=X,N-=P,W=W.next,C+=4;D+=m}for(z=0;z<m;z++){O=N=T=G=L=H=0;C=z<<2;J=Q*(Z=x[C]);M=Q*(X=x[C+1]);V=Q*(P=x[C+2]);H+=ma*Z;G+=ma*X;L+=ma*P;W=S;for(B=0;B<Q;B++)W.r=Z,W.g=X,W.b=P,W=
W.next;A=m;for(B=1;B<=n;B++)C=A+z<<2,H+=(W.r=Z=x[C])*(R=Q-B),G+=(W.g=X=x[C+1])*R,L+=(W.b=P=x[C+2])*R,T+=Z,O+=X,N+=P,W=W.next,B<U&&(A+=m);C=z;B=S;W=la;for(y=0;y<p;y++)A=C<<2,x[A]=H*sa>>aa,x[A+1]=G*sa>>aa,x[A+2]=L*sa>>aa,H-=J,G-=M,L-=V,J-=B.r,M-=B.g,V-=B.b,A=z+((A=y+Q)<U?A:U)*m<<2,H+=T+=B.r=x[A],G+=O+=B.g=x[A+1],L+=N+=B.b=x[A+2],B=B.next,J+=Z=W.r,M+=X=W.g,V+=P=W.b,T-=Z,O-=X,N-=P,W=W.next,C+=m}a.putImageData(r,b,c)}}function e(){this.a=this.b=this.g=this.r=0;this.next=null}var d=[512,512,456,512,328,
456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,
482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],f=[9,
11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,
23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],n={image:function(a,d,e,f){a=document.getElementById(a);var p=a.naturalWidth,n=a.naturalHeight,r=document.getElementById(d);r.style.width=p+"px";r.style.height=n+"px";r.width=p;r.height=n;r=r.getContext("2d");r.clearRect(0,0,p,n);r.drawImage(a,
0,0);isNaN(e)||1>e||(f?b(d,0,0,p,n,e):c(d,0,0,p,n,e))},canvasRGBA:b,canvasRGB:c};"undefined"!==typeof define&&define.amd?define(function(){return n}):"undefined"!==typeof module&&module.exports&&(module.exports=n);a.stackBlur=n})("undefined"!==typeof window?window:this);
(function(a,b){"undefined"!==typeof define&&define.amd?define("canvgModule",["rgbcolor","stackblur"],b):"undefined"!==typeof module&&module.exports&&(module.exports=b(require("rgbcolor"),require("stackblur")));a.canvg=b(a.RGBColor,a.stackBlur)})("undefined"!==typeof window?window:this,function(a,b){function c(a){var b=[0,0,0],c=function(c,d){var e=a.match(c);null!=e&&(b[d]+=e.length,a=a.replace(c," "))};a=a.replace(/:not\(([^\)]*)\)/g,"     $1 ");a=a.replace(/{[^]*/gm," ");c(n,1);c(h,0);c(g,1);c(l,
2);c(m,1);c(p,1);a=a.replace(/[\*\s\+>~]/g," ");a=a.replace(/[#\.]/g," ");c(t,2);return b.join("")}function e(d){var e={opts:d,FRAMERATE:30,MAX_VIRTUAL_PIXELS:3E4,log:function(a){}};1==e.opts.log&&"undefined"!=typeof console&&(e.log=function(a){console.log(a)});e.init=function(a){var b=0;e.UniqueId=function(){b++;return"canvg"+b};e.Definitions={};e.Styles={};e.StylesSpecificity={};e.Animations=[];e.Images=[];e.ctx=a;e.ViewPort=new function(){this.viewPorts=[];this.Clear=function(){this.viewPorts=
[]};this.SetCurrent=function(a,b){this.viewPorts.push({width:a,height:b})};this.RemoveCurrent=function(){this.viewPorts.pop()};this.Current=function(){return this.viewPorts[this.viewPorts.length-1]};this.width=function(){return this.Current().width};this.height=function(){return this.Current().height};this.ComputeSize=function(a){return null!=a&&"number"==typeof a?a:"x"==a?this.width():"y"==a?this.height():Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}};e.init();e.ImagesLoaded=
function(){for(var a=0;a<e.Images.length;a++)if(!e.Images[a].loaded)return!1;return!0};e.trim=function(a){return a.replace(/^\s+|\s+$/g,"")};e.compressSpaces=function(a){return a.replace(/[\s\r\t\n]+/gm," ")};e.ajax=function(a){var b;return(b=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"))?(b.open("GET",a,!1),b.send(null),b.responseText):null};e.parseXml=function(a){if("undefined"!=typeof Windows&&"undefined"!=typeof Windows.Data&&"undefined"!=typeof Windows.Data.Xml){var b=
new Windows.Data.Xml.Dom.XmlDocument,c=new Windows.Data.Xml.Dom.XmlLoadSettings;c.prohibitDtd=!1;b.loadXml(a,c);return b}if(window.DOMParser)return(new DOMParser).parseFromString(a,"text/xml");a=a.replace(/<!DOCTYPE svg[^>]*>/,"");b=new ActiveXObject("Microsoft.XMLDOM");b.async="false";b.loadXML(a);return b};e.Property=function(a,b){this.name=a;this.value=b};e.Property.prototype.getValue=function(){return this.value};e.Property.prototype.hasValue=function(){return null!=this.value&&""!==this.value};
e.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var a=parseFloat(this.value);(this.value+"").match(/%$/)&&(a/=100);return a};e.Property.prototype.valueOrDefault=function(a){return this.hasValue()?this.value:a};e.Property.prototype.numValueOrDefault=function(a){return this.hasValue()?this.numValue():a};e.Property.prototype.addOpacity=function(b){var c=this.value;if(null!=b.value&&""!=b.value&&"string"==typeof this.value){var d=new a(this.value);d.ok&&(c="rgba("+d.r+", "+d.g+", "+
d.b+", "+b.numValue()+")")}return new e.Property(this.name,c)};e.Property.prototype.getDefinition=function(){var a=this.value.match(/#([^\)'"]+)/);a&&(a=a[1]);a||(a=this.value);return e.Definitions[a]};e.Property.prototype.isUrlDefinition=function(){return 0==this.value.indexOf("url(")};e.Property.prototype.getFillStyleDefinition=function(a,b){var c=this.getDefinition();if(null!=c&&c.createGradient)return c.createGradient(e.ctx,a,b);if(null!=c&&c.createPattern){if(c.getHrefAttribute().hasValue()){var d=
c.attribute("patternTransform"),c=c.getHrefAttribute().getDefinition();d.hasValue()&&(c.attribute("patternTransform",!0).value=d.value)}return c.createPattern(e.ctx,a)}return null};e.Property.prototype.getDPI=function(a){return 96};e.Property.prototype.getEM=function(a){var b=12,c=new e.Property("fontSize",e.Font.Parse(e.ctx.font).fontSize);c.hasValue()&&(b=c.toPixels(a));return b};e.Property.prototype.getUnits=function(){return(this.value+"").replace(/[0-9\.\-]/g,"")};e.Property.prototype.toPixels=
function(a,b){if(!this.hasValue())return 0;var c=this.value+"";if(c.match(/em$/))return this.numValue()*this.getEM(a);if(c.match(/ex$/))return this.numValue()*this.getEM(a)/2;if(c.match(/px$/))return this.numValue();if(c.match(/pt$/))return this.numValue()*this.getDPI(a)*(1/72);if(c.match(/pc$/))return 15*this.numValue();if(c.match(/cm$/))return this.numValue()*this.getDPI(a)/2.54;if(c.match(/mm$/))return this.numValue()*this.getDPI(a)/25.4;if(c.match(/in$/))return this.numValue()*this.getDPI(a);
if(c.match(/%$/))return this.numValue()*e.ViewPort.ComputeSize(a);c=this.numValue();return b&&1>c?c*e.ViewPort.ComputeSize(a):c};e.Property.prototype.toMilliseconds=function(){if(!this.hasValue())return 0;var a=this.value+"";if(a.match(/s$/))return 1E3*this.numValue();a.match(/ms$/);return this.numValue()};e.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var a=this.value+"";return a.match(/deg$/)?this.numValue()*(Math.PI/180):a.match(/grad$/)?this.numValue()*(Math.PI/200):a.match(/rad$/)?
this.numValue():this.numValue()*(Math.PI/180)};var g={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};e.Property.prototype.toTextBaseline=function(){return this.hasValue()?g[this.value]:null};e.Font=new function(){this.Styles="normal|italic|oblique|inherit";this.Variants="normal|small-caps|inherit";this.Weights=
"normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";this.CreateFont=function(a,b,c,d,g,f){f=null!=f?this.Parse(f):this.CreateFont("","","","","",e.ctx.font);return{fontFamily:g||f.fontFamily,fontSize:d||f.fontSize,fontStyle:a||f.fontStyle,fontWeight:c||f.fontWeight,fontVariant:b||f.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var a=this;this.Parse=function(b){var c={};b=e.trim(e.compressSpaces(b||
"")).split(" ");for(var d=!1,g=!1,f=!1,h=!1,l="",m=0;m<b.length;m++)g||-1==a.Styles.indexOf(b[m])?h||-1==a.Variants.indexOf(b[m])?f||-1==a.Weights.indexOf(b[m])?d?"inherit"!=b[m]&&(l+=b[m]):("inherit"!=b[m]&&(c.fontSize=b[m].split("/")[0]),g=h=f=d=!0):("inherit"!=b[m]&&(c.fontWeight=b[m]),g=h=f=!0):("inherit"!=b[m]&&(c.fontVariant=b[m]),g=h=!0):("inherit"!=b[m]&&(c.fontStyle=b[m]),g=!0);""!=l&&(c.fontFamily=l);return c}};e.ToNumberArray=function(a){a=e.trim(e.compressSpaces((a||"").replace(/,/g," "))).split(" ");
for(var b=0;b<a.length;b++)a[b]=parseFloat(a[b]);return a};e.Point=function(a,b){this.x=a;this.y=b};e.Point.prototype.angleTo=function(a){return Math.atan2(a.y-this.y,a.x-this.x)};e.Point.prototype.applyTransform=function(a){var b=this.x*a[1]+this.y*a[3]+a[5];this.x=this.x*a[0]+this.y*a[2]+a[4];this.y=b};e.CreatePoint=function(a){a=e.ToNumberArray(a);return new e.Point(a[0],a[1])};e.CreatePath=function(a){a=e.ToNumberArray(a);for(var b=[],c=0;c<a.length;c+=2)b.push(new e.Point(a[c],a[c+1]));return b};
e.BoundingBox=function(a,b,c,d){this.y2=this.x2=this.y1=this.x1=Number.NaN;this.x=function(){return this.x1};this.y=function(){return this.y1};this.width=function(){return this.x2-this.x1};this.height=function(){return this.y2-this.y1};this.addPoint=function(a,b){if(null!=a){if(isNaN(this.x1)||isNaN(this.x2))this.x2=this.x1=a;a<this.x1&&(this.x1=a);a>this.x2&&(this.x2=a)}if(null!=b){if(isNaN(this.y1)||isNaN(this.y2))this.y2=this.y1=b;b<this.y1&&(this.y1=b);b>this.y2&&(this.y2=b)}};this.addX=function(a){this.addPoint(a,
null)};this.addY=function(a){this.addPoint(null,a)};this.addBoundingBox=function(a){this.addPoint(a.x1,a.y1);this.addPoint(a.x2,a.y2)};this.addQuadraticCurve=function(a,b,c,d,e,g){c=a+2/3*(c-a);d=b+2/3*(d-b);this.addBezierCurve(a,b,c,c+1/3*(e-a),d,d+1/3*(g-b),e,g)};this.addBezierCurve=function(a,b,c,d,e,g,f,h){var l=[a,b],m=[c,d],p=[e,g],r=[f,h];this.addPoint(l[0],l[1]);this.addPoint(r[0],r[1]);for(i=0;1>=i;i++)a=function(a){return Math.pow(1-a,3)*l[i]+3*Math.pow(1-a,2)*a*m[i]+3*(1-a)*Math.pow(a,
2)*p[i]+Math.pow(a,3)*r[i]},b=6*l[i]-12*m[i]+6*p[i],c=-3*l[i]+9*m[i]-9*p[i]+3*r[i],d=3*m[i]-3*l[i],0==c?0!=b&&(b=-d/b,0<b&&1>b&&(0==i&&this.addX(a(b)),1==i&&this.addY(a(b)))):(d=Math.pow(b,2)-4*d*c,0>d||(e=(-b+Math.sqrt(d))/(2*c),0<e&&1>e&&(0==i&&this.addX(a(e)),1==i&&this.addY(a(e))),b=(-b-Math.sqrt(d))/(2*c),0<b&&1>b&&(0==i&&this.addX(a(b)),1==i&&this.addY(a(b)))))};this.isPointInBox=function(a,b){return this.x1<=a&&a<=this.x2&&this.y1<=b&&b<=this.y2};this.addPoint(a,b);this.addPoint(c,d)};e.Transform=
function(a){var b=this;this.Type={};this.Type.translate=function(a){this.p=e.CreatePoint(a);this.apply=function(a){a.translate(this.p.x||0,this.p.y||0)};this.unapply=function(a){a.translate(-1*this.p.x||0,-1*this.p.y||0)};this.applyToPoint=function(a){a.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}};this.Type.rotate=function(a){a=e.ToNumberArray(a);this.angle=new e.Property("angle",a[0]);this.cx=a[1]||0;this.cy=a[2]||0;this.apply=function(a){a.translate(this.cx,this.cy);a.rotate(this.angle.toRadians());
a.translate(-this.cx,-this.cy)};this.unapply=function(a){a.translate(this.cx,this.cy);a.rotate(-1*this.angle.toRadians());a.translate(-this.cx,-this.cy)};this.applyToPoint=function(a){var b=this.angle.toRadians();a.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]);a.applyTransform([Math.cos(b),Math.sin(b),-Math.sin(b),Math.cos(b),0,0]);a.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}};this.Type.scale=function(a){this.p=e.CreatePoint(a);this.apply=function(a){a.scale(this.p.x||1,this.p.y||this.p.x||
1)};this.unapply=function(a){a.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)};this.applyToPoint=function(a){a.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}};this.Type.matrix=function(a){this.m=e.ToNumberArray(a);this.apply=function(a){a.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])};this.unapply=function(a){var b=this.m[0],c=this.m[2],d=this.m[4],e=this.m[1],g=this.m[3],f=this.m[5],h=1/(b*(1*g-0*f)-c*(1*e-0*f)+d*(0*e-0*g));a.transform(h*(1*g-0*f),h*(0*f-1*e),h*(0*d-1*
c),h*(1*b-0*d),h*(c*f-d*g),h*(d*e-b*f))};this.applyToPoint=function(a){a.applyTransform(this.m)}};this.Type.SkewBase=function(a){this.base=b.Type.matrix;this.base(a);this.angle=new e.Property("angle",a)};this.Type.SkewBase.prototype=new this.Type.matrix;this.Type.skewX=function(a){this.base=b.Type.SkewBase;this.base(a);this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]};this.Type.skewX.prototype=new this.Type.SkewBase;this.Type.skewY=function(a){this.base=b.Type.SkewBase;this.base(a);this.m=[1,Math.tan(this.angle.toRadians()),
0,1,0,0]};this.Type.skewY.prototype=new this.Type.SkewBase;this.transforms=[];this.apply=function(a){for(var b=0;b<this.transforms.length;b++)this.transforms[b].apply(a)};this.unapply=function(a){for(var b=this.transforms.length-1;0<=b;b--)this.transforms[b].unapply(a)};this.applyToPoint=function(a){for(var b=0;b<this.transforms.length;b++)this.transforms[b].applyToPoint(a)};a=e.trim(e.compressSpaces(a)).replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/);for(var c=0;c<
a.length;c++){var d=e.trim(a[c].split("(")[0]),g=a[c].split("(")[1].replace(")",""),f=this.Type[d];"undefined"!=typeof f&&(g=new f(g),g.type=d,this.transforms.push(g))}};e.AspectRatio=function(a,b,c,d,g,f,h,l,m,p){b=e.compressSpaces(b);b=b.replace(/^defer\s/,"");var r=b.split(" ")[0]||"xMidYMid";b=b.split(" ")[1]||"meet";var n=c/d,t=g/f,w=Math.min(n,t),T=Math.max(n,t);"meet"==b&&(d*=w,f*=w);"slice"==b&&(d*=T,f*=T);m=new e.Property("refX",m);p=new e.Property("refY",p);m.hasValue()&&p.hasValue()?a.translate(-w*
m.toPixels("x"),-w*p.toPixels("y")):(r.match(/^xMid/)&&("meet"==b&&w==t||"slice"==b&&T==t)&&a.translate(c/2-d/2,0),r.match(/YMid$/)&&("meet"==b&&w==n||"slice"==b&&T==n)&&a.translate(0,g/2-f/2),r.match(/^xMax/)&&("meet"==b&&w==t||"slice"==b&&T==t)&&a.translate(c-d,0),r.match(/YMax$/)&&("meet"==b&&w==n||"slice"==b&&T==n)&&a.translate(0,g-f));"none"==r?a.scale(n,t):"meet"==b?a.scale(w,w):"slice"==b&&a.scale(T,T);a.translate(null==h?0:-h,null==l?0:-l)};e.Element={};e.EmptyProperty=new e.Property("EMPTY",
"");e.Element.ElementBase=function(a){this.attributes={};this.styles={};this.stylesSpecificity={};this.children=[];this.attribute=function(a,b){var c=this.attributes[a];if(null!=c)return c;1==b&&(c=new e.Property(a,""),this.attributes[a]=c);return c||e.EmptyProperty};this.getHrefAttribute=function(){for(var a in this.attributes)if("href"==a||a.match(/:href$/))return this.attributes[a];return e.EmptyProperty};this.style=function(a,b,c){var d=this.styles[a];if(null!=d)return d;var g=this.attribute(a);
if(null!=g&&g.hasValue())return this.styles[a]=g;if(1!=c&&(c=this.parent,null!=c&&(c=c.style(a),null!=c&&c.hasValue())))return c;1==b&&(d=new e.Property(a,""),this.styles[a]=d);return d||e.EmptyProperty};this.render=function(a){if("none"!=this.style("display").value&&"hidden"!=this.style("visibility").value){a.save();if(this.style("mask").hasValue()){var b=this.style("mask").getDefinition();null!=b&&b.apply(a,this)}else this.style("filter").hasValue()?(b=this.style("filter").getDefinition(),null!=
b&&b.apply(a,this)):(this.setContext(a),this.renderChildren(a),this.clearContext(a));a.restore()}};this.setContext=function(a){};this.clearContext=function(a){};this.renderChildren=function(a){for(var b=0;b<this.children.length;b++)this.children[b].render(a)};this.addChild=function(a,b){var c=a;b&&(c=e.CreateElement(a));c.parent=this;"title"!=c.type&&this.children.push(c)};this.addStylesFromStyleDefinition=function(){for(var b in e.Styles)if("@"!=b[0]&&f(a,b)){var c=e.Styles[b],d=e.StylesSpecificity[b];
if(null!=c)for(var g in c){var h=this.stylesSpecificity[g];"undefined"==typeof h&&(h="000");d>h&&(this.styles[g]=c[g],this.stylesSpecificity[g]=d)}}};if(null!=a&&1==a.nodeType){for(var b=0;b<a.attributes.length;b++){var c=a.attributes[b];this.attributes[c.nodeName]=new e.Property(c.nodeName,c.value)}this.addStylesFromStyleDefinition();if(this.attribute("style").hasValue())for(c=this.attribute("style").value.split(";"),b=0;b<c.length;b++)if(""!=e.trim(c[b])){var d=c[b].split(":"),g=e.trim(d[0]),d=
e.trim(d[1]);this.styles[g]=new e.Property(g,d)}this.attribute("id").hasValue()&&null==e.Definitions[this.attribute("id").value]&&(e.Definitions[this.attribute("id").value]=this);for(b=0;b<a.childNodes.length;b++)c=a.childNodes[b],1==c.nodeType&&this.addChild(c,!0),!this.captureTextNodes||3!=c.nodeType&&4!=c.nodeType||""!=e.compressSpaces(c.value||c.text||c.textContent||"")&&this.addChild(new e.Element.tspan(c),!1)}};e.Element.RenderedElementBase=function(a){this.base=e.Element.ElementBase;this.base(a);
this.setContext=function(a){if(this.style("fill").isUrlDefinition()){var b=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity"));null!=b&&(a.fillStyle=b)}else this.style("fill").hasValue()&&(b=this.style("fill"),"currentColor"==b.value&&(b.value=this.style("color").value),"inherit"!=b.value&&(a.fillStyle="none"==b.value?"rgba(0,0,0,0)":b.value));this.style("fill-opacity").hasValue()&&(b=new e.Property("fill",a.fillStyle),b=b.addOpacity(this.style("fill-opacity")),a.fillStyle=
b.value);this.style("stroke").isUrlDefinition()?(b=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity")),null!=b&&(a.strokeStyle=b)):this.style("stroke").hasValue()&&(b=this.style("stroke"),"currentColor"==b.value&&(b.value=this.style("color").value),"inherit"!=b.value&&(a.strokeStyle="none"==b.value?"rgba(0,0,0,0)":b.value));this.style("stroke-opacity").hasValue()&&(b=new e.Property("stroke",a.strokeStyle),b=b.addOpacity(this.style("stroke-opacity")),a.strokeStyle=b.value);
this.style("stroke-width").hasValue()&&(b=this.style("stroke-width").toPixels(),a.lineWidth=0==b?.001:b);this.style("stroke-linecap").hasValue()&&(a.lineCap=this.style("stroke-linecap").value);this.style("stroke-linejoin").hasValue()&&(a.lineJoin=this.style("stroke-linejoin").value);this.style("stroke-miterlimit").hasValue()&&(a.miterLimit=this.style("stroke-miterlimit").value);this.style("stroke-dasharray").hasValue()&&"none"!=this.style("stroke-dasharray").value&&(b=e.ToNumberArray(this.style("stroke-dasharray").value),
"undefined"!=typeof a.setLineDash?a.setLineDash(b):"undefined"!=typeof a.webkitLineDash?a.webkitLineDash=b:"undefined"==typeof a.mozDash||1==b.length&&0==b[0]||(a.mozDash=b),b=this.style("stroke-dashoffset").numValueOrDefault(1),"undefined"!=typeof a.lineDashOffset?a.lineDashOffset=b:"undefined"!=typeof a.webkitLineDashOffset?a.webkitLineDashOffset=b:"undefined"!=typeof a.mozDashOffset&&(a.mozDashOffset=b));"undefined"!=typeof a.font&&(a.font=e.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,
this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString());this.style("transform",!1,!0).hasValue()&&(new e.Transform(this.style("transform",!1,!0).value)).apply(a);this.style("clip-path",!1,!0).hasValue()&&(b=this.style("clip-path",!1,!0).getDefinition(),null!=b&&b.apply(a));this.style("opacity").hasValue()&&(a.globalAlpha=this.style("opacity").numValue())}};e.Element.RenderedElementBase.prototype=new e.Element.ElementBase;
e.Element.PathElementBase=function(a){this.base=e.Element.RenderedElementBase;this.base(a);this.path=function(a){null!=a&&a.beginPath();return new e.BoundingBox};this.renderChildren=function(a){this.path(a);e.Mouse.checkPath(this,a);""!=a.fillStyle&&("inherit"!=this.style("fill-rule").valueOrDefault("inherit")?a.fill(this.style("fill-rule").value):a.fill());""!=a.strokeStyle&&a.stroke();var b=this.getMarkers();if(null!=b){if(this.style("marker-start").isUrlDefinition()){var c=this.style("marker-start").getDefinition();
c.render(a,b[0][0],b[0][1])}if(this.style("marker-mid").isUrlDefinition())for(var c=this.style("marker-mid").getDefinition(),d=1;d<b.length-1;d++)c.render(a,b[d][0],b[d][1]);this.style("marker-end").isUrlDefinition()&&(c=this.style("marker-end").getDefinition(),c.render(a,b[b.length-1][0],b[b.length-1][1]))}};this.getBoundingBox=function(){return this.path()};this.getMarkers=function(){return null}};e.Element.PathElementBase.prototype=new e.Element.RenderedElementBase;e.Element.svg=function(a){this.base=
e.Element.RenderedElementBase;this.base(a);this.baseClearContext=this.clearContext;this.clearContext=function(a){this.baseClearContext(a);e.ViewPort.RemoveCurrent()};this.baseSetContext=this.setContext;this.setContext=function(a){a.strokeStyle="rgba(0,0,0,0)";a.lineCap="butt";a.lineJoin="miter";a.miterLimit=4;"undefined"!=typeof a.font&&"undefined"!=typeof window.getComputedStyle&&(a.font=window.getComputedStyle(a.canvas).getPropertyValue("font"));this.baseSetContext(a);this.attribute("x").hasValue()||
(this.attribute("x",!0).value=0);this.attribute("y").hasValue()||(this.attribute("y",!0).value=0);a.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var b=e.ViewPort.width(),c=e.ViewPort.height();this.attribute("width").hasValue()||(this.attribute("width",!0).value="100%");this.attribute("height").hasValue()||(this.attribute("height",!0).value="100%");if("undefined"==typeof this.root){var b=this.attribute("width").toPixels("x"),c=this.attribute("height").toPixels("y"),
d=0,g=0;this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()&&(d=-this.attribute("refX").toPixels("x"),g=-this.attribute("refY").toPixels("y"));"visible"!=this.attribute("overflow").valueOrDefault("hidden")&&(a.beginPath(),a.moveTo(d,g),a.lineTo(b,g),a.lineTo(b,c),a.lineTo(d,c),a.closePath(),a.clip())}e.ViewPort.SetCurrent(b,c);if(this.attribute("viewBox").hasValue()){var d=e.ToNumberArray(this.attribute("viewBox").value),g=d[0],f=d[1],b=d[2],c=d[3];e.AspectRatio(a,this.attribute("preserveAspectRatio").value,
e.ViewPort.width(),b,e.ViewPort.height(),c,g,f,this.attribute("refX").value,this.attribute("refY").value);e.ViewPort.RemoveCurrent();e.ViewPort.SetCurrent(d[2],d[3])}}};e.Element.svg.prototype=new e.Element.RenderedElementBase;e.Element.rect=function(a){this.base=e.Element.PathElementBase;this.base(a);this.path=function(a){var b=this.attribute("x").toPixels("x"),c=this.attribute("y").toPixels("y"),d=this.attribute("width").toPixels("x"),g=this.attribute("height").toPixels("y"),f=this.attribute("rx").toPixels("x"),
h=this.attribute("ry").toPixels("y");this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()&&(h=f);this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()&&(f=h);f=Math.min(f,d/2);h=Math.min(h,g/2);null!=a&&(a.beginPath(),a.moveTo(b+f,c),a.lineTo(b+d-f,c),a.quadraticCurveTo(b+d,c,b+d,c+h),a.lineTo(b+d,c+g-h),a.quadraticCurveTo(b+d,c+g,b+d-f,c+g),a.lineTo(b+f,c+g),a.quadraticCurveTo(b,c+g,b,c+g-h),a.lineTo(b,c+h),a.quadraticCurveTo(b,c,b+f,c),a.closePath());return new e.BoundingBox(b,
c,b+d,c+g)}};e.Element.rect.prototype=new e.Element.PathElementBase;e.Element.circle=function(a){this.base=e.Element.PathElementBase;this.base(a);this.path=function(a){var b=this.attribute("cx").toPixels("x"),c=this.attribute("cy").toPixels("y"),d=this.attribute("r").toPixels();null!=a&&(a.beginPath(),a.arc(b,c,d,0,2*Math.PI,!0),a.closePath());return new e.BoundingBox(b-d,c-d,b+d,c+d)}};e.Element.circle.prototype=new e.Element.PathElementBase;e.Element.ellipse=function(a){this.base=e.Element.PathElementBase;
this.base(a);this.path=function(a){var b=4*((Math.sqrt(2)-1)/3),c=this.attribute("rx").toPixels("x"),d=this.attribute("ry").toPixels("y"),g=this.attribute("cx").toPixels("x"),f=this.attribute("cy").toPixels("y");null!=a&&(a.beginPath(),a.moveTo(g,f-d),a.bezierCurveTo(g+b*c,f-d,g+c,f-b*d,g+c,f),a.bezierCurveTo(g+c,f+b*d,g+b*c,f+d,g,f+d),a.bezierCurveTo(g-b*c,f+d,g-c,f+b*d,g-c,f),a.bezierCurveTo(g-c,f-b*d,g-b*c,f-d,g,f-d),a.closePath());return new e.BoundingBox(g-c,f-d,g+c,f+d)}};e.Element.ellipse.prototype=
new e.Element.PathElementBase;e.Element.line=function(a){this.base=e.Element.PathElementBase;this.base(a);this.getPoints=function(){return[new e.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new e.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]};this.path=function(a){var b=this.getPoints();null!=a&&(a.beginPath(),a.moveTo(b[0].x,b[0].y),a.lineTo(b[1].x,b[1].y));return new e.BoundingBox(b[0].x,b[0].y,b[1].x,b[1].y)};this.getMarkers=function(){var a=
this.getPoints(),b=a[0].angleTo(a[1]);return[[a[0],b],[a[1],b]]}};e.Element.line.prototype=new e.Element.PathElementBase;e.Element.polyline=function(a){this.base=e.Element.PathElementBase;this.base(a);this.points=e.CreatePath(this.attribute("points").value);this.path=function(a){var b=new e.BoundingBox(this.points[0].x,this.points[0].y);null!=a&&(a.beginPath(),a.moveTo(this.points[0].x,this.points[0].y));for(var c=1;c<this.points.length;c++)b.addPoint(this.points[c].x,this.points[c].y),null!=a&&a.lineTo(this.points[c].x,
this.points[c].y);return b};this.getMarkers=function(){for(var a=[],b=0;b<this.points.length-1;b++)a.push([this.points[b],this.points[b].angleTo(this.points[b+1])]);0<a.length&&a.push([this.points[this.points.length-1],a[a.length-1][1]]);return a}};e.Element.polyline.prototype=new e.Element.PathElementBase;e.Element.polygon=function(a){this.base=e.Element.polyline;this.base(a);this.basePath=this.path;this.path=function(a){var b=this.basePath(a);null!=a&&(a.lineTo(this.points[0].x,this.points[0].y),
a.closePath());return b}};e.Element.polygon.prototype=new e.Element.polyline;e.Element.path=function(a){this.base=e.Element.PathElementBase;this.base(a);a=this.attribute("d").value;a=a.replace(/,/gm," ");for(var b=0;2>b;b++)a=a.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2");a=a.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2");a=a.replace(/([0-9])([+\-])/gm,"$1 $2");for(b=0;2>b;b++)a=a.replace(/(\.[0-9]*)(\.)/gm,"$1 $2");a=a.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 ");
a=e.compressSpaces(a);a=e.trim(a);this.PathParser=new function(a){this.tokens=a.split(" ");this.reset=function(){this.i=-1;this.previousCommand=this.command="";this.start=new e.Point(0,0);this.control=new e.Point(0,0);this.current=new e.Point(0,0);this.points=[];this.angles=[]};this.isEnd=function(){return this.i>=this.tokens.length-1};this.isCommandOrEnd=function(){return this.isEnd()?!0:null!=this.tokens[this.i+1].match(/^[A-Za-z]$/)};this.isRelativeCommand=function(){switch(this.command){case "m":case "l":case "h":case "v":case "c":case "s":case "q":case "t":case "a":case "z":return!0}return!1};
this.getToken=function(){this.i++;return this.tokens[this.i]};this.getScalar=function(){return parseFloat(this.getToken())};this.nextCommand=function(){this.previousCommand=this.command;this.command=this.getToken()};this.getPoint=function(){var a=new e.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(a)};this.getAsControlPoint=function(){var a=this.getPoint();return this.control=a};this.getAsCurrentPoint=function(){var a=this.getPoint();return this.current=a};this.getReflectedControlPoint=
function(){return"c"!=this.previousCommand.toLowerCase()&&"s"!=this.previousCommand.toLowerCase()&&"q"!=this.previousCommand.toLowerCase()&&"t"!=this.previousCommand.toLowerCase()?this.current:new e.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y)};this.makeAbsolute=function(a){this.isRelativeCommand()&&(a.x+=this.current.x,a.y+=this.current.y);return a};this.addMarker=function(a,b,c){null!=c&&0<this.angles.length&&null==this.angles[this.angles.length-1]&&(this.angles[this.angles.length-
1]=this.points[this.points.length-1].angleTo(c));this.addMarkerAngle(a,null==b?null:b.angleTo(a))};this.addMarkerAngle=function(a,b){this.points.push(a);this.angles.push(b)};this.getMarkerPoints=function(){return this.points};this.getMarkerAngles=function(){for(var a=0;a<this.angles.length;a++)if(null==this.angles[a])for(var b=a+1;b<this.angles.length;b++)if(null!=this.angles[b]){this.angles[a]=this.angles[b];break}return this.angles}}(a);this.path=function(a){var b=this.PathParser;b.reset();var c=
new e.BoundingBox;for(null!=a&&a.beginPath();!b.isEnd();)switch(b.nextCommand(),b.command){case "M":case "m":var d=b.getAsCurrentPoint();b.addMarker(d);c.addPoint(d.x,d.y);null!=a&&a.moveTo(d.x,d.y);for(b.start=b.current;!b.isCommandOrEnd();)d=b.getAsCurrentPoint(),b.addMarker(d,b.start),c.addPoint(d.x,d.y),null!=a&&a.lineTo(d.x,d.y);break;case "L":case "l":for(;!b.isCommandOrEnd();){var g=b.current,d=b.getAsCurrentPoint();b.addMarker(d,g);c.addPoint(d.x,d.y);null!=a&&a.lineTo(d.x,d.y)}break;case "H":case "h":for(;!b.isCommandOrEnd();)d=
new e.Point((b.isRelativeCommand()?b.current.x:0)+b.getScalar(),b.current.y),b.addMarker(d,b.current),b.current=d,c.addPoint(b.current.x,b.current.y),null!=a&&a.lineTo(b.current.x,b.current.y);break;case "V":case "v":for(;!b.isCommandOrEnd();)d=new e.Point(b.current.x,(b.isRelativeCommand()?b.current.y:0)+b.getScalar()),b.addMarker(d,b.current),b.current=d,c.addPoint(b.current.x,b.current.y),null!=a&&a.lineTo(b.current.x,b.current.y);break;case "C":case "c":for(;!b.isCommandOrEnd();){var f=b.current,
g=b.getPoint(),h=b.getAsControlPoint(),d=b.getAsCurrentPoint();b.addMarker(d,h,g);c.addBezierCurve(f.x,f.y,g.x,g.y,h.x,h.y,d.x,d.y);null!=a&&a.bezierCurveTo(g.x,g.y,h.x,h.y,d.x,d.y)}break;case "S":case "s":for(;!b.isCommandOrEnd();)f=b.current,g=b.getReflectedControlPoint(),h=b.getAsControlPoint(),d=b.getAsCurrentPoint(),b.addMarker(d,h,g),c.addBezierCurve(f.x,f.y,g.x,g.y,h.x,h.y,d.x,d.y),null!=a&&a.bezierCurveTo(g.x,g.y,h.x,h.y,d.x,d.y);break;case "Q":case "q":for(;!b.isCommandOrEnd();)f=b.current,
h=b.getAsControlPoint(),d=b.getAsCurrentPoint(),b.addMarker(d,h,h),c.addQuadraticCurve(f.x,f.y,h.x,h.y,d.x,d.y),null!=a&&a.quadraticCurveTo(h.x,h.y,d.x,d.y);break;case "T":case "t":for(;!b.isCommandOrEnd();)f=b.current,h=b.getReflectedControlPoint(),b.control=h,d=b.getAsCurrentPoint(),b.addMarker(d,h,h),c.addQuadraticCurve(f.x,f.y,h.x,h.y,d.x,d.y),null!=a&&a.quadraticCurveTo(h.x,h.y,d.x,d.y);break;case "A":case "a":for(;!b.isCommandOrEnd();){var f=b.current,l=b.getScalar(),m=b.getScalar(),g=b.getScalar()*
(Math.PI/180),p=b.getScalar(),h=b.getScalar(),d=b.getAsCurrentPoint(),r=new e.Point(Math.cos(g)*(f.x-d.x)/2+Math.sin(g)*(f.y-d.y)/2,-Math.sin(g)*(f.x-d.x)/2+Math.cos(g)*(f.y-d.y)/2),n=Math.pow(r.x,2)/Math.pow(l,2)+Math.pow(r.y,2)/Math.pow(m,2);1<n&&(l*=Math.sqrt(n),m*=Math.sqrt(n));p=(p==h?-1:1)*Math.sqrt((Math.pow(l,2)*Math.pow(m,2)-Math.pow(l,2)*Math.pow(r.y,2)-Math.pow(m,2)*Math.pow(r.x,2))/(Math.pow(l,2)*Math.pow(r.y,2)+Math.pow(m,2)*Math.pow(r.x,2)));isNaN(p)&&(p=0);var t=new e.Point(p*l*r.y/
m,p*-m*r.x/l),f=new e.Point((f.x+d.x)/2+Math.cos(g)*t.x-Math.sin(g)*t.y,(f.y+d.y)/2+Math.sin(g)*t.x+Math.cos(g)*t.y),w=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2))},u=function(a,b){return(a[0]*b[0]+a[1]*b[1])/(w(a)*w(b))},x=function(a,b){return(a[0]*b[1]<a[1]*b[0]?-1:1)*Math.acos(u(a,b))},p=x([1,0],[(r.x-t.x)/l,(r.y-t.y)/m]),n=[(r.x-t.x)/l,(r.y-t.y)/m],t=[(-r.x-t.x)/l,(-r.y-t.y)/m],r=x(n,t);-1>=u(n,t)&&(r=Math.PI);1<=u(n,t)&&(r=0);n=1-h?1:-1;t=p+r/2*n;x=new e.Point(f.x+l*Math.cos(t),
f.y+m*Math.sin(t));b.addMarkerAngle(x,t-n*Math.PI/2);b.addMarkerAngle(d,t-n*Math.PI);c.addPoint(d.x,d.y);null!=a&&(u=l>m?l:m,d=l>m?1:l/m,l=l>m?m/l:1,a.translate(f.x,f.y),a.rotate(g),a.scale(d,l),a.arc(0,0,u,p,p+r,1-h),a.scale(1/d,1/l),a.rotate(-g),a.translate(-f.x,-f.y))}break;case "Z":case "z":null!=a&&a.closePath(),b.current=b.start}return c};this.getMarkers=function(){for(var a=this.PathParser.getMarkerPoints(),b=this.PathParser.getMarkerAngles(),c=[],d=0;d<a.length;d++)c.push([a[d],b[d]]);return c}};
e.Element.path.prototype=new e.Element.PathElementBase;e.Element.pattern=function(a){this.base=e.Element.ElementBase;this.base(a);this.createPattern=function(a,b){var c=this.attribute("width").toPixels("x",!0),d=this.attribute("height").toPixels("y",!0),g=new e.Element.svg;g.attributes.viewBox=new e.Property("viewBox",this.attribute("viewBox").value);g.attributes.width=new e.Property("width",c+"px");g.attributes.height=new e.Property("height",d+"px");g.attributes.transform=new e.Property("transform",
this.attribute("patternTransform").value);g.children=this.children;var f=document.createElement("canvas");f.width=c;f.height=d;c=f.getContext("2d");this.attribute("x").hasValue()&&this.attribute("y").hasValue()&&c.translate(this.attribute("x").toPixels("x",!0),this.attribute("y").toPixels("y",!0));for(d=-1;1>=d;d++)for(var h=-1;1>=h;h++)c.save(),g.attributes.x=new e.Property("x",d*f.width),g.attributes.y=new e.Property("y",h*f.height),g.render(c),c.restore();return a.createPattern(f,"repeat")}};e.Element.pattern.prototype=
new e.Element.ElementBase;e.Element.marker=function(a){this.base=e.Element.ElementBase;this.base(a);this.baseRender=this.render;this.render=function(a,b,c){a.translate(b.x,b.y);"auto"==this.attribute("orient").valueOrDefault("auto")&&a.rotate(c);"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&a.scale(a.lineWidth,a.lineWidth);a.save();var d=new e.Element.svg;d.attributes.viewBox=new e.Property("viewBox",this.attribute("viewBox").value);d.attributes.refX=new e.Property("refX",
this.attribute("refX").value);d.attributes.refY=new e.Property("refY",this.attribute("refY").value);d.attributes.width=new e.Property("width",this.attribute("markerWidth").value);d.attributes.height=new e.Property("height",this.attribute("markerHeight").value);d.attributes.fill=new e.Property("fill",this.attribute("fill").valueOrDefault("black"));d.attributes.stroke=new e.Property("stroke",this.attribute("stroke").valueOrDefault("none"));d.children=this.children;d.render(a);a.restore();"strokeWidth"==
this.attribute("markerUnits").valueOrDefault("strokeWidth")&&a.scale(1/a.lineWidth,1/a.lineWidth);"auto"==this.attribute("orient").valueOrDefault("auto")&&a.rotate(-c);a.translate(-b.x,-b.y)}};e.Element.marker.prototype=new e.Element.ElementBase;e.Element.defs=function(a){this.base=e.Element.ElementBase;this.base(a);this.render=function(a){}};e.Element.defs.prototype=new e.Element.ElementBase;e.Element.GradientBase=function(a){this.base=e.Element.ElementBase;this.base(a);this.stops=[];for(a=0;a<this.children.length;a++){var b=
this.children[a];"stop"==b.type&&this.stops.push(b)}this.getGradient=function(){};this.gradientUnits=function(){return this.attribute("gradientUnits").valueOrDefault("objectBoundingBox")};this.attributesToInherit=["gradientUnits"];this.inheritStopContainer=function(a){for(var b=0;b<this.attributesToInherit.length;b++){var c=this.attributesToInherit[b];!this.attribute(c).hasValue()&&a.attribute(c).hasValue()&&(this.attribute(c,!0).value=a.attribute(c).value)}};this.createGradient=function(a,b,c){var d=
this;this.getHrefAttribute().hasValue()&&(d=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(d));var g=function(a){return c.hasValue()?(new e.Property("color",a)).addOpacity(c).value:a};a=this.getGradient(a,b);if(null==a)return g(d.stops[d.stops.length-1].color);for(b=0;b<d.stops.length;b++)a.addColorStop(d.stops[b].offset,g(d.stops[b].color));return this.attribute("gradientTransform").hasValue()?(d=e.ViewPort.viewPorts[0],g=new e.Element.rect,g.attributes.x=new e.Property("x",-e.MAX_VIRTUAL_PIXELS/
3),g.attributes.y=new e.Property("y",-e.MAX_VIRTUAL_PIXELS/3),g.attributes.width=new e.Property("width",e.MAX_VIRTUAL_PIXELS),g.attributes.height=new e.Property("height",e.MAX_VIRTUAL_PIXELS),b=new e.Element.g,b.attributes.transform=new e.Property("transform",this.attribute("gradientTransform").value),b.children=[g],g=new e.Element.svg,g.attributes.x=new e.Property("x",0),g.attributes.y=new e.Property("y",0),g.attributes.width=new e.Property("width",d.width),g.attributes.height=new e.Property("height",
d.height),g.children=[b],b=document.createElement("canvas"),b.width=d.width,b.height=d.height,d=b.getContext("2d"),d.fillStyle=a,g.render(d),d.createPattern(b,"no-repeat")):a}};e.Element.GradientBase.prototype=new e.Element.ElementBase;e.Element.linearGradient=function(a){this.base=e.Element.GradientBase;this.base(a);this.attributesToInherit.push("x1");this.attributesToInherit.push("y1");this.attributesToInherit.push("x2");this.attributesToInherit.push("y2");this.getGradient=function(a,b){var c="objectBoundingBox"==
this.gradientUnits()?b.getBoundingBox():null;this.attribute("x1").hasValue()||this.attribute("y1").hasValue()||this.attribute("x2").hasValue()||this.attribute("y2").hasValue()||(this.attribute("x1",!0).value=0,this.attribute("y1",!0).value=0,this.attribute("x2",!0).value=1,this.attribute("y2",!0).value=0);var d="objectBoundingBox"==this.gradientUnits()?c.x()+c.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"),e="objectBoundingBox"==this.gradientUnits()?c.y()+c.height()*this.attribute("y1").numValue():
this.attribute("y1").toPixels("y"),g="objectBoundingBox"==this.gradientUnits()?c.x()+c.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"),c="objectBoundingBox"==this.gradientUnits()?c.y()+c.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");return d==g&&e==c?null:a.createLinearGradient(d,e,g,c)}};e.Element.linearGradient.prototype=new e.Element.GradientBase;e.Element.radialGradient=function(a){this.base=e.Element.GradientBase;this.base(a);this.attributesToInherit.push("cx");
this.attributesToInherit.push("cy");this.attributesToInherit.push("r");this.attributesToInherit.push("fx");this.attributesToInherit.push("fy");this.getGradient=function(a,b){var c=b.getBoundingBox();this.attribute("cx").hasValue()||(this.attribute("cx",!0).value="50%");this.attribute("cy").hasValue()||(this.attribute("cy",!0).value="50%");this.attribute("r").hasValue()||(this.attribute("r",!0).value="50%");var d="objectBoundingBox"==this.gradientUnits()?c.x()+c.width()*this.attribute("cx").numValue():
this.attribute("cx").toPixels("x"),e="objectBoundingBox"==this.gradientUnits()?c.y()+c.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"),g=d,f=e;this.attribute("fx").hasValue()&&(g="objectBoundingBox"==this.gradientUnits()?c.x()+c.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x"));this.attribute("fy").hasValue()&&(f="objectBoundingBox"==this.gradientUnits()?c.y()+c.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y"));c="objectBoundingBox"==
this.gradientUnits()?(c.width()+c.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels();return a.createRadialGradient(g,f,0,d,e,c)}};e.Element.radialGradient.prototype=new e.Element.GradientBase;e.Element.stop=function(a){this.base=e.Element.ElementBase;this.base(a);this.offset=this.attribute("offset").numValue();0>this.offset&&(this.offset=0);1<this.offset&&(this.offset=1);a=this.style("stop-color",!0);""===a.value&&(a.value="#000");this.style("stop-opacity").hasValue()&&(a=a.addOpacity(this.style("stop-opacity")));
this.color=a.value};e.Element.stop.prototype=new e.Element.ElementBase;e.Element.AnimateBase=function(a){this.base=e.Element.ElementBase;this.base(a);e.Animations.push(this);this.duration=0;this.begin=this.attribute("begin").toMilliseconds();this.maxDuration=this.begin+this.attribute("dur").toMilliseconds();this.getProperty=function(){var a=this.attribute("attributeType").value,b=this.attribute("attributeName").value;return"CSS"==a?this.parent.style(b,!0):this.parent.attribute(b,!0)};this.initialValue=
null;this.initialUnits="";this.removed=!1;this.calcValue=function(){return""};this.update=function(a){null==this.initialValue&&(this.initialValue=this.getProperty().value,this.initialUnits=this.getProperty().getUnits());if(this.duration>this.maxDuration){if("indefinite"==this.attribute("repeatCount").value||"indefinite"==this.attribute("repeatDur").value)this.duration=0;else if("freeze"==this.attribute("fill").valueOrDefault("remove")&&!this.frozen)this.frozen=!0,this.parent.animationFrozen=!0,this.parent.animationFrozenValue=
this.getProperty().value;else if("remove"==this.attribute("fill").valueOrDefault("remove")&&!this.removed)return this.removed=!0,this.getProperty().value=this.parent.animationFrozen?this.parent.animationFrozenValue:this.initialValue,!0;return!1}this.duration+=a;a=!1;this.begin<this.duration&&(a=this.calcValue(),this.attribute("type").hasValue()&&(a=this.attribute("type").value+"("+a+")"),this.getProperty().value=a,a=!0);return a};this.from=this.attribute("from");this.to=this.attribute("to");this.values=
this.attribute("values");this.values.hasValue()&&(this.values.value=this.values.value.split(";"));this.progress=function(){var a={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var b=a.progress*(this.values.value.length-1),c=Math.floor(b),d=Math.ceil(b);a.from=new e.Property("from",parseFloat(this.values.value[c]));a.to=new e.Property("to",parseFloat(this.values.value[d]));a.progress=(b-c)/(d-c)}else a.from=this.from,a.to=this.to;return a}};e.Element.AnimateBase.prototype=
new e.Element.ElementBase;e.Element.animate=function(a){this.base=e.Element.AnimateBase;this.base(a);this.calcValue=function(){var a=this.progress();return a.from.numValue()+(a.to.numValue()-a.from.numValue())*a.progress+this.initialUnits}};e.Element.animate.prototype=new e.Element.AnimateBase;e.Element.animateColor=function(b){this.base=e.Element.AnimateBase;this.base(b);this.calcValue=function(){var b=this.progress(),c=new a(b.from.value),d=new a(b.to.value);if(c.ok&&d.ok){var e=c.g+(d.g-c.g)*b.progress,
g=c.b+(d.b-c.b)*b.progress;return"rgb("+parseInt(c.r+(d.r-c.r)*b.progress,10)+","+parseInt(e,10)+","+parseInt(g,10)+")"}return this.attribute("from").value}};e.Element.animateColor.prototype=new e.Element.AnimateBase;e.Element.animateTransform=function(a){this.base=e.Element.AnimateBase;this.base(a);this.calcValue=function(){for(var a=this.progress(),b=e.ToNumberArray(a.from.value),c=e.ToNumberArray(a.to.value),d="",g=0;g<b.length;g++)d+=b[g]+(c[g]-b[g])*a.progress+" ";return d}};e.Element.animateTransform.prototype=
new e.Element.animate;e.Element.font=function(a){this.base=e.Element.ElementBase;this.base(a);this.horizAdvX=this.attribute("horiz-adv-x").numValue();this.isArabic=this.isRTL=!1;this.missingGlyph=this.fontFace=null;this.glyphs=[];for(a=0;a<this.children.length;a++){var b=this.children[a];"font-face"==b.type?(this.fontFace=b,b.style("font-family").hasValue()&&(e.Definitions[b.style("font-family").value]=this)):"missing-glyph"==b.type?this.missingGlyph=b:"glyph"==b.type&&(""!=b.arabicForm?(this.isArabic=
this.isRTL=!0,"undefined"==typeof this.glyphs[b.unicode]&&(this.glyphs[b.unicode]=[]),this.glyphs[b.unicode][b.arabicForm]=b):this.glyphs[b.unicode]=b)}};e.Element.font.prototype=new e.Element.ElementBase;e.Element.fontface=function(a){this.base=e.Element.ElementBase;this.base(a);this.ascent=this.attribute("ascent").value;this.descent=this.attribute("descent").value;this.unitsPerEm=this.attribute("units-per-em").numValue()};e.Element.fontface.prototype=new e.Element.ElementBase;e.Element.missingglyph=
function(a){this.base=e.Element.path;this.base(a);this.horizAdvX=0};e.Element.missingglyph.prototype=new e.Element.path;e.Element.glyph=function(a){this.base=e.Element.path;this.base(a);this.horizAdvX=this.attribute("horiz-adv-x").numValue();this.unicode=this.attribute("unicode").value;this.arabicForm=this.attribute("arabic-form").value};e.Element.glyph.prototype=new e.Element.path;e.Element.text=function(a){this.captureTextNodes=!0;this.base=e.Element.RenderedElementBase;this.base(a);this.baseSetContext=
this.setContext;this.setContext=function(a){this.baseSetContext(a);var b=this.style("dominant-baseline").toTextBaseline();null==b&&(b=this.style("alignment-baseline").toTextBaseline());null!=b&&(a.textBaseline=b)};this.getBoundingBox=function(){var a=this.attribute("x").toPixels("x"),b=this.attribute("y").toPixels("y"),c=this.parent.style("font-size").numValueOrDefault(e.Font.Parse(e.ctx.font).fontSize);return new e.BoundingBox(a,b-c,a+Math.floor(2*c/3)*this.children[0].getText().length,b)};this.renderChildren=
function(a){this.x=this.attribute("x").toPixels("x");this.y=this.attribute("y").toPixels("y");this.attribute("dx").hasValue()&&(this.x+=this.attribute("dx").toPixels("x"));this.attribute("dy").hasValue()&&(this.y+=this.attribute("dy").toPixels("y"));this.x+=this.getAnchorDelta(a,this,0);for(var b=0;b<this.children.length;b++)this.renderChild(a,this,this,b)};this.getAnchorDelta=function(a,b,c){var d=this.style("text-anchor").valueOrDefault("start");if("start"!=d){for(var e=0,g=c;g<b.children.length;g++){var f=
b.children[g];if(g>c&&f.attribute("x").hasValue())break;e+=f.measureTextRecursive(a)}return-1*("end"==d?e:e/2)}return 0};this.renderChild=function(a,b,c,d){var e=c.children[d];e.attribute("x").hasValue()?(e.x=e.attribute("x").toPixels("x")+b.getAnchorDelta(a,c,d),e.attribute("dx").hasValue()&&(e.x+=e.attribute("dx").toPixels("x"))):(e.attribute("dx").hasValue()&&(b.x+=e.attribute("dx").toPixels("x")),e.x=b.x);b.x=e.x+e.measureText(a);e.attribute("y").hasValue()?(e.y=e.attribute("y").toPixels("y"),
e.attribute("dy").hasValue()&&(e.y+=e.attribute("dy").toPixels("y"))):(e.attribute("dy").hasValue()&&(b.y+=e.attribute("dy").toPixels("y")),e.y=b.y);b.y=e.y;e.render(a);for(d=0;d<e.children.length;d++)b.renderChild(a,b,e,d)}};e.Element.text.prototype=new e.Element.RenderedElementBase;e.Element.TextElementBase=function(a){this.base=e.Element.RenderedElementBase;this.base(a);this.getGlyph=function(a,b,c){var d=b[c],e=null;if(a.isArabic){var g="isolated";(0==c||" "==b[c-1])&&c<b.length-2&&" "!=b[c+1]&&
(g="terminal");0<c&&" "!=b[c-1]&&c<b.length-2&&" "!=b[c+1]&&(g="medial");0<c&&" "!=b[c-1]&&(c==b.length-1||" "==b[c+1])&&(g="initial");"undefined"!=typeof a.glyphs[d]&&(e=a.glyphs[d][g],null==e&&"glyph"==a.glyphs[d].type&&(e=a.glyphs[d]))}else e=a.glyphs[d];null==e&&(e=a.missingGlyph);return e};this.renderChildren=function(a){var b=this.parent.style("font-family").getDefinition();if(null!=b){var c=this.parent.style("font-size").numValueOrDefault(e.Font.Parse(e.ctx.font).fontSize),d=this.parent.style("font-style").valueOrDefault(e.Font.Parse(e.ctx.font).fontStyle),
g=this.getText();b.isRTL&&(g=g.split("").reverse().join(""));for(var f=e.ToNumberArray(this.parent.attribute("dx").value),h=0;h<g.length;h++){var l=this.getGlyph(b,g,h),m=c/b.fontFace.unitsPerEm;a.translate(this.x,this.y);a.scale(m,-m);var p=a.lineWidth;a.lineWidth=a.lineWidth*b.fontFace.unitsPerEm/c;"italic"==d&&a.transform(1,0,.4,1,0,0);l.render(a);"italic"==d&&a.transform(1,0,-.4,1,0,0);a.lineWidth=p;a.scale(1/m,-1/m);a.translate(-this.x,-this.y);this.x+=c*(l.horizAdvX||b.horizAdvX)/b.fontFace.unitsPerEm;
"undefined"==typeof f[h]||isNaN(f[h])||(this.x+=f[h])}}else""!=a.fillStyle&&a.fillText(e.compressSpaces(this.getText()),this.x,this.y),""!=a.strokeStyle&&a.strokeText(e.compressSpaces(this.getText()),this.x,this.y)};this.getText=function(){};this.measureTextRecursive=function(a){for(var b=this.measureText(a),c=0;c<this.children.length;c++)b+=this.children[c].measureTextRecursive(a);return b};this.measureText=function(a){var b=this.parent.style("font-family").getDefinition();if(null!=b){a=this.parent.style("font-size").numValueOrDefault(e.Font.Parse(e.ctx.font).fontSize);
var c=0,d=this.getText();b.isRTL&&(d=d.split("").reverse().join(""));for(var g=e.ToNumberArray(this.parent.attribute("dx").value),f=0;f<d.length;f++){var h=this.getGlyph(b,d,f),c=c+(h.horizAdvX||b.horizAdvX)*a/b.fontFace.unitsPerEm;"undefined"==typeof g[f]||isNaN(g[f])||(c+=g[f])}return c}b=e.compressSpaces(this.getText());if(!a.measureText)return 10*b.length;a.save();this.setContext(a);b=a.measureText(b).width;a.restore();return b}};e.Element.TextElementBase.prototype=new e.Element.RenderedElementBase;
e.Element.tspan=function(a){this.captureTextNodes=!0;this.base=e.Element.TextElementBase;this.base(a);this.text=e.compressSpaces(a.value||a.text||a.textContent||"");this.getText=function(){return 0<this.children.length?"":this.text}};e.Element.tspan.prototype=new e.Element.TextElementBase;e.Element.tref=function(a){this.base=e.Element.TextElementBase;this.base(a);this.getText=function(){var a=this.getHrefAttribute().getDefinition();if(null!=a)return a.children[0].getText()}};e.Element.tref.prototype=
new e.Element.TextElementBase;e.Element.a=function(a){this.base=e.Element.TextElementBase;this.base(a);this.hasText=0<a.childNodes.length;for(var b=0;b<a.childNodes.length;b++)3!=a.childNodes[b].nodeType&&(this.hasText=!1);this.text=this.hasText?a.childNodes[0].value:"";this.getText=function(){return this.text};this.baseRenderChildren=this.renderChildren;this.renderChildren=function(a){if(this.hasText){this.baseRenderChildren(a);var b=new e.Property("fontSize",e.Font.Parse(e.ctx.font).fontSize);e.Mouse.checkBoundingBox(this,
new e.BoundingBox(this.x,this.y-b.toPixels("y"),this.x+this.measureText(a),this.y))}else 0<this.children.length&&(b=new e.Element.g,b.children=this.children,b.parent=this,b.render(a))};this.onclick=function(){window.open(this.getHrefAttribute().value)};this.onmousemove=function(){e.ctx.canvas.style.cursor="pointer"}};e.Element.a.prototype=new e.Element.TextElementBase;e.Element.image=function(a){this.base=e.Element.RenderedElementBase;this.base(a);var b=this.getHrefAttribute().value;if(""!=b){var c=
b.match(/\.svg$/);e.Images.push(this);this.loaded=!1;if(c)this.img=e.ajax(b),this.loaded=!0;else{this.img=document.createElement("img");1==e.opts.useCORS&&(this.img.crossOrigin="Anonymous");var d=this;this.img.onload=function(){d.loaded=!0};this.img.onerror=function(){e.log('ERROR: image "'+b+'" not found');d.loaded=!0};this.img.src=b}this.renderChildren=function(a){var b=this.attribute("x").toPixels("x"),d=this.attribute("y").toPixels("y"),g=this.attribute("width").toPixels("x"),f=this.attribute("height").toPixels("y");
0!=g&&0!=f&&(a.save(),c?a.drawSvg(this.img,b,d,g,f):(a.translate(b,d),e.AspectRatio(a,this.attribute("preserveAspectRatio").value,g,this.img.width,f,this.img.height,0,0),a.drawImage(this.img,0,0)),a.restore())};this.getBoundingBox=function(){var a=this.attribute("x").toPixels("x"),b=this.attribute("y").toPixels("y"),c=this.attribute("width").toPixels("x"),d=this.attribute("height").toPixels("y");return new e.BoundingBox(a,b,a+c,b+d)}}};e.Element.image.prototype=new e.Element.RenderedElementBase;e.Element.g=
function(a){this.base=e.Element.RenderedElementBase;this.base(a);this.getBoundingBox=function(){for(var a=new e.BoundingBox,b=0;b<this.children.length;b++)a.addBoundingBox(this.children[b].getBoundingBox());return a}};e.Element.g.prototype=new e.Element.RenderedElementBase;e.Element.symbol=function(a){this.base=e.Element.RenderedElementBase;this.base(a);this.render=function(a){}};e.Element.symbol.prototype=new e.Element.RenderedElementBase;e.Element.style=function(a){this.base=e.Element.ElementBase;
this.base(a);for(var b="",d=0;d<a.childNodes.length;d++)b+=a.childNodes[d].data;b=b.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"");b=e.compressSpaces(b);a=b.split("}");for(d=0;d<a.length;d++)if(""!=e.trim(a[d]))for(var g=a[d].split("{"),b=g[0].split(","),g=g[1].split(";"),f=0;f<b.length;f++){var h=e.trim(b[f]);if(""!=h){for(var l=e.Styles[h]||{},m=0;m<g.length;m++){var p=g[m].indexOf(":"),r=g[m].substr(0,p),p=g[m].substr(p+1,g[m].length-p);null!=r&&null!=p&&(l[e.trim(r)]=
new e.Property(e.trim(r),e.trim(p)))}e.Styles[h]=l;e.StylesSpecificity[h]=c(h);if("@font-face"==h)for(h=l["font-family"].value.replace(/"/g,""),l=l.src.value.split(","),m=0;m<l.length;m++)if(0<l[m].indexOf('format("svg")'))for(r=l[m].indexOf("url"),p=l[m].indexOf(")",r),r=l[m].substr(r+5,p-r-6),r=e.parseXml(e.ajax(r)).getElementsByTagName("font"),p=0;p<r.length;p++){var n=e.CreateElement(r[p]);e.Definitions[h]=n}}}};e.Element.style.prototype=new e.Element.ElementBase;e.Element.use=function(a){this.base=
e.Element.RenderedElementBase;this.base(a);this.baseSetContext=this.setContext;this.setContext=function(a){this.baseSetContext(a);this.attribute("x").hasValue()&&a.translate(this.attribute("x").toPixels("x"),0);this.attribute("y").hasValue()&&a.translate(0,this.attribute("y").toPixels("y"))};var b=this.getHrefAttribute().getDefinition();this.path=function(a){null!=b&&b.path(a)};this.getBoundingBox=function(){if(null!=b)return b.getBoundingBox()};this.renderChildren=function(a){if(null!=b){var c=b;
"symbol"==b.type&&(c=new e.Element.svg,c.type="svg",c.attributes.viewBox=new e.Property("viewBox",b.attribute("viewBox").value),c.attributes.preserveAspectRatio=new e.Property("preserveAspectRatio",b.attribute("preserveAspectRatio").value),c.attributes.overflow=new e.Property("overflow",b.attribute("overflow").value),c.children=b.children);"svg"==c.type&&(this.attribute("width").hasValue()&&(c.attributes.width=new e.Property("width",this.attribute("width").value)),this.attribute("height").hasValue()&&
(c.attributes.height=new e.Property("height",this.attribute("height").value)));var d=c.parent;c.parent=null;c.render(a);c.parent=d}}};e.Element.use.prototype=new e.Element.RenderedElementBase;e.Element.mask=function(a){this.base=e.Element.ElementBase;this.base(a);this.apply=function(a,b){var c=this.attribute("x").toPixels("x"),d=this.attribute("y").toPixels("y"),g=this.attribute("width").toPixels("x"),f=this.attribute("height").toPixels("y");if(0==g&&0==f){f=new e.BoundingBox;for(c=0;c<this.children.length;c++)f.addBoundingBox(this.children[c].getBoundingBox());
c=Math.floor(f.x1);d=Math.floor(f.y1);g=Math.floor(f.width());f=Math.floor(f.height())}var h=b.attribute("mask").value;b.attribute("mask").value="";var l=document.createElement("canvas");l.width=c+g;l.height=d+f;var m=l.getContext("2d");this.renderChildren(m);var p=document.createElement("canvas");p.width=c+g;p.height=d+f;var r=p.getContext("2d");b.render(r);r.globalCompositeOperation="destination-in";r.fillStyle=m.createPattern(l,"no-repeat");r.fillRect(0,0,c+g,d+f);a.fillStyle=r.createPattern(p,
"no-repeat");a.fillRect(0,0,c+g,d+f);b.attribute("mask").value=h};this.render=function(a){}};e.Element.mask.prototype=new e.Element.ElementBase;e.Element.clipPath=function(a){this.base=e.Element.ElementBase;this.base(a);this.apply=function(a){var b=CanvasRenderingContext2D.prototype.beginPath;CanvasRenderingContext2D.prototype.beginPath=function(){};var c=CanvasRenderingContext2D.prototype.closePath;CanvasRenderingContext2D.prototype.closePath=function(){};b.call(a);for(var d=0;d<this.children.length;d++){var g=
this.children[d];if("undefined"!=typeof g.path){var f=null;g.style("transform",!1,!0).hasValue()&&(f=new e.Transform(g.style("transform",!1,!0).value),f.apply(a));g.path(a);CanvasRenderingContext2D.prototype.closePath=c;f&&f.unapply(a)}}c.call(a);a.clip();CanvasRenderingContext2D.prototype.beginPath=b;CanvasRenderingContext2D.prototype.closePath=c};this.render=function(a){}};e.Element.clipPath.prototype=new e.Element.ElementBase;e.Element.filter=function(a){this.base=e.Element.ElementBase;this.base(a);
this.apply=function(a,b){var c=b.getBoundingBox(),d=Math.floor(c.x1),e=Math.floor(c.y1),g=Math.floor(c.width()),c=Math.floor(c.height()),f=b.style("filter").value;b.style("filter").value="";for(var h=0,l=0,m=0;m<this.children.length;m++)var p=this.children[m].extraFilterDistance||0,h=Math.max(h,p),l=Math.max(l,p);p=document.createElement("canvas");p.width=g+2*h;p.height=c+2*l;var r=p.getContext("2d");r.translate(-d+h,-e+l);b.render(r);for(m=0;m<this.children.length;m++)"function"==typeof this.children[m].apply&&
this.children[m].apply(r,0,0,g+2*h,c+2*l);a.drawImage(p,0,0,g+2*h,c+2*l,d-h,e-l,g+2*h,c+2*l);b.style("filter",!0).value=f};this.render=function(a){}};e.Element.filter.prototype=new e.Element.ElementBase;e.Element.feMorphology=function(a){this.base=e.Element.ElementBase;this.base(a);this.apply=function(a,b,c,d,e){}};e.Element.feMorphology.prototype=new e.Element.ElementBase;e.Element.feComposite=function(a){this.base=e.Element.ElementBase;this.base(a);this.apply=function(a,b,c,d,e){}};e.Element.feComposite.prototype=
new e.Element.ElementBase;e.Element.feColorMatrix=function(a){function b(a,d){var e=c[a];return e*(0>e?d-255:d)}this.base=e.Element.ElementBase;this.base(a);var c=e.ToNumberArray(this.attribute("values").value);switch(this.attribute("type").valueOrDefault("matrix")){case "saturate":a=c[0];c=[.213+.787*a,.715-.715*a,.072-.072*a,0,0,.213-.213*a,.715+.285*a,.072-.072*a,0,0,.213-.213*a,.715-.715*a,.072+.928*a,0,0,0,0,0,1,0,0,0,0,0,1];break;case "hueRotate":var d=c[0]*Math.PI/180;a=function(a,b,c){return a+
Math.cos(d)*b+Math.sin(d)*c};c=[a(.213,.787,-.213),a(.715,-.715,-.715),a(.072,-.072,.928),0,0,a(.213,-.213,.143),a(.715,.285,.14),a(.072,-.072,-.283),0,0,a(.213,-.213,-.787),a(.715,-.715,.715),a(.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break;case "luminanceToAlpha":c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1]}this.apply=function(a,c,d,e,g){var f=a.getImageData(0,0,e,g);for(d=0;d<g;d++)for(c=0;c<e;c++){var h=f.data[d*e*4+4*c+0],l=f.data[d*e*4+4*c+1],m=f.data[d*e*4+4*c+2],p=f.data[d*
e*4+4*c+3],r=b(0,h)+b(1,l)+b(2,m)+b(3,p)+b(4,1);f.data[d*e*4+4*c+0]=r;r=b(5,h)+b(6,l)+b(7,m)+b(8,p)+b(9,1);f.data[d*e*4+4*c+1]=r;r=b(10,h)+b(11,l)+b(12,m)+b(13,p)+b(14,1);f.data[d*e*4+4*c+2]=r;h=b(15,h)+b(16,l)+b(17,m)+b(18,p)+b(19,1);f.data[d*e*4+4*c+3]=h}a.clearRect(0,0,e,g);a.putImageData(f,0,0)}};e.Element.feColorMatrix.prototype=new e.Element.ElementBase;e.Element.feGaussianBlur=function(a){this.base=e.Element.ElementBase;this.base(a);this.extraFilterDistance=this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue());
this.apply=function(a,c,d,g,f){"undefined"==typeof b.canvasRGBA?e.log("ERROR: StackBlur.js must be included for blur to work"):(a.canvas.id=e.UniqueId(),a.canvas.style.display="none",document.body.appendChild(a.canvas),b.canvasRGBA(a.canvas.id,c,d,g,f,this.blurRadius),document.body.removeChild(a.canvas))}};e.Element.feGaussianBlur.prototype=new e.Element.ElementBase;e.Element.title=function(a){};e.Element.title.prototype=new e.Element.ElementBase;e.Element.desc=function(a){};e.Element.desc.prototype=
new e.Element.ElementBase;e.Element.MISSING=function(a){e.log("ERROR: Element '"+a.nodeName+"' not yet implemented.")};e.Element.MISSING.prototype=new e.Element.ElementBase;e.CreateElement=function(a){var b=a.nodeName.replace(/^[^:]+:/,""),b=b.replace(/\-/g,""),c=null,c="undefined"!=typeof e.Element[b]?new e.Element[b](a):new e.Element.MISSING(a);c.type=a.nodeName;return c};e.load=function(a,b){e.loadXml(a,e.ajax(b))};e.loadXml=function(a,b){e.loadXmlDoc(a,e.parseXml(b))};e.loadXmlDoc=function(a,
b){e.init(a);var c=function(b){for(var c=a.canvas;c;)b.x-=c.offsetLeft,b.y-=c.offsetTop,c=c.offsetParent;window.scrollX&&(b.x+=window.scrollX);window.scrollY&&(b.y+=window.scrollY);return b};1!=e.opts.ignoreMouse&&(a.canvas.onclick=function(a){a=c(new e.Point(null!=a?a.clientX:event.clientX,null!=a?a.clientY:event.clientY));e.Mouse.onclick(a.x,a.y)},a.canvas.onmousemove=function(a){a=c(new e.Point(null!=a?a.clientX:event.clientX,null!=a?a.clientY:event.clientY));e.Mouse.onmousemove(a.x,a.y)});var d=
e.CreateElement(b.documentElement);d.root=!0;d.addStylesFromStyleDefinition();var g=!0,f=function(){e.ViewPort.Clear();a.canvas.parentNode&&e.ViewPort.SetCurrent(a.canvas.parentNode.clientWidth,a.canvas.parentNode.clientHeight);1!=e.opts.ignoreDimensions&&(d.style("width").hasValue()&&(a.canvas.width=d.style("width").toPixels("x"),a.canvas.style.width=a.canvas.width+"px"),d.style("height").hasValue()&&(a.canvas.height=d.style("height").toPixels("y"),a.canvas.style.height=a.canvas.height+"px"));var c=
a.canvas.clientWidth||a.canvas.width,f=a.canvas.clientHeight||a.canvas.height;1==e.opts.ignoreDimensions&&d.style("width").hasValue()&&d.style("height").hasValue()&&(c=d.style("width").toPixels("x"),f=d.style("height").toPixels("y"));e.ViewPort.SetCurrent(c,f);null!=e.opts.offsetX&&(d.attribute("x",!0).value=e.opts.offsetX);null!=e.opts.offsetY&&(d.attribute("y",!0).value=e.opts.offsetY);if(null!=e.opts.scaleWidth||null!=e.opts.scaleHeight){var h=null,l=null,m=e.ToNumberArray(d.attribute("viewBox").value);
null!=e.opts.scaleWidth&&(d.attribute("width").hasValue()?h=d.attribute("width").toPixels("x")/e.opts.scaleWidth:isNaN(m[2])||(h=m[2]/e.opts.scaleWidth));null!=e.opts.scaleHeight&&(d.attribute("height").hasValue()?l=d.attribute("height").toPixels("y")/e.opts.scaleHeight:isNaN(m[3])||(l=m[3]/e.opts.scaleHeight));null==h&&(h=l);null==l&&(l=h);d.attribute("width",!0).value=e.opts.scaleWidth;d.attribute("height",!0).value=e.opts.scaleHeight;d.style("transform",!0,!0).value+=" scale("+1/h+","+1/l+")"}1!=
e.opts.ignoreClear&&a.clearRect(0,0,c,f);d.render(a);g&&(g=!1,"function"==typeof e.opts.renderCallback&&e.opts.renderCallback(b))},h=!0;e.ImagesLoaded()&&(h=!1,f());e.intervalID=setInterval(function(){var a=!1;h&&e.ImagesLoaded()&&(h=!1,a=!0);1!=e.opts.ignoreMouse&&(a|=e.Mouse.hasEvents());if(1!=e.opts.ignoreAnimation)for(var b=0;b<e.Animations.length;b++)a|=e.Animations[b].update(1E3/e.FRAMERATE);"function"==typeof e.opts.forceRedraw&&1==e.opts.forceRedraw()&&(a=!0);a&&(f(),e.Mouse.runEvents())},
1E3/e.FRAMERATE)};e.stop=function(){e.intervalID&&clearInterval(e.intervalID)};e.Mouse=new function(){this.events=[];this.hasEvents=function(){return 0!=this.events.length};this.onclick=function(a,b){this.events.push({type:"onclick",x:a,y:b,run:function(a){if(a.onclick)a.onclick()}})};this.onmousemove=function(a,b){this.events.push({type:"onmousemove",x:a,y:b,run:function(a){if(a.onmousemove)a.onmousemove()}})};this.eventElements=[];this.checkPath=function(a,b){for(var c=0;c<this.events.length;c++){var d=
this.events[c];b.isPointInPath&&b.isPointInPath(d.x,d.y)&&(this.eventElements[c]=a)}};this.checkBoundingBox=function(a,b){for(var c=0;c<this.events.length;c++){var d=this.events[c];b.isPointInBox(d.x,d.y)&&(this.eventElements[c]=a)}};this.runEvents=function(){e.ctx.canvas.style.cursor="";for(var a=0;a<this.events.length;a++)for(var b=this.events[a],c=this.eventElements[a];c;)b.run(c),c=c.parent;this.events=[];this.eventElements=[]}};return e}var d=function(a,b,c){if(null==a&&null==b&&null==c)for(b=
document.querySelectorAll("svg"),a=0;a<b.length;a++){c=b[a];var g=document.createElement("canvas");g.width=c.clientWidth;g.height=c.clientHeight;c.parentNode.insertBefore(g,c);c.parentNode.removeChild(c);var f=document.createElement("div");f.appendChild(c);d(g,f.innerHTML)}else{"string"==typeof a&&(a=document.getElementById(a));null!=a.svg&&a.svg.stop();c=e(c||{});if(1!=a.childNodes.length||"OBJECT"!=a.childNodes[0].nodeName)a.svg=c;a=a.getContext("2d");"undefined"!=typeof b.documentElement?c.loadXmlDoc(a,
b):"<"==b.substr(0,1)?c.loadXml(a,b):c.load(a,b)}},f;if("undefined"!=typeof Element.prototype.matches)f=function(a,b){return a.matches(b)};else if("undefined"!=typeof Element.prototype.webkitMatchesSelector)f=function(a,b){return a.webkitMatchesSelector(b)};else if("undefined"!=typeof Element.prototype.mozMatchesSelector)f=function(a,b){return a.mozMatchesSelector(b)};else if("undefined"!=typeof Element.prototype.msMatchesSelector)f=function(a,b){return a.msMatchesSelector(b)};else if("undefined"!=
typeof Element.prototype.oMatchesSelector)f=function(a,b){return a.oMatchesSelector(b)};else{if("function"===typeof jQuery||"function"===typeof Zepto)f=function(a,b){return $(a).is(b)};"undefined"===typeof f&&(f=Sizzle.matchesSelector)}var n=/(\[[^\]]+\])/g,h=/(#[^\s\+>~\.\[:]+)/g,g=/(\.[^\s\+>~\.\[:]+)/g,l=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,m=/(:[\w-]+\([^\)]*\))/gi,p=/(:[^\s\+>~\.\[:]+)/g,t=/([^\s\+>~\.\[:]+)/g;"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.drawSvg=
function(a,b,c,e,g,f){b={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:b,offsetY:c,scaleWidth:e,scaleHeight:g};for(var h in f)f.hasOwnProperty(h)&&(b[h]=f[h]);d(this.canvas,a,b)});return d});
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self);b.html2canvas=a()}}(function(){return function b(c,e,d){function f(g,h){if(!e[g]){if(!c[g]){var m="function"==typeof require&&require;if(!h&&m)return m(g,!0);if(n)return n(g,!0);m=Error("Cannot find module '"+g+"'");throw m.code="MODULE_NOT_FOUND",
m;}m=e[g]={exports:{}};c[g][0].call(m.exports,function(b){var d=c[g][1][b];return f(d?d:b)},m,m.exports,b,c,e,d)}return e[g].exports}for(var n="function"==typeof require&&require,h=0;h<d.length;h++)f(d[h]);return f}({1:[function(b,c,e){(function(b){(function(f){function n(b){throw RangeError(A[b]);}function h(b,c){for(var d=b.length;d--;)b[d]=c(b[d]);return b}function g(b,c){return h(b.split(B),c).join(".")}function l(b){for(var c=[],d=0,e=b.length,g,f;d<e;)g=b.charCodeAt(d++),55296<=g&&56319>=g&&
d<e?(f=b.charCodeAt(d++),56320==(f&64512)?c.push(((g&1023)<<10)+(f&1023)+65536):(c.push(g),d--)):c.push(g);return c}function m(b){return h(b,function(b){var c="";65535<b&&(b-=65536,c+=D(b>>>10&1023|55296),b=56320|b&1023);return c+=D(b)}).join("")}function p(b,c){return b+22+75*(26>b)-((0!=c)<<5)}function t(b,c,d){var e=0;b=d?C(b/700):b>>1;for(b+=C(b/c);455<b;e+=36)b=C(b/35);return C(e+36*b/(b+38))}function r(b){var c=[],d=b.length,e,g=0,f=128,h=72,l,p,r,q,w;l=b.lastIndexOf("-");0>l&&(l=0);for(p=0;p<
l;++p)128<=b.charCodeAt(p)&&n("not-basic"),c.push(b.charCodeAt(p));for(l=0<l?l+1:0;l<d;){p=g;e=1;for(r=36;;r+=36){l>=d&&n("invalid-input");q=b.charCodeAt(l++);q=10>q-48?q-22:26>q-65?q-65:26>q-97?q-97:36;(36<=q||q>C((2147483647-g)/e))&&n("overflow");g+=q*e;w=r<=h?1:r>=h+26?26:r-h;if(q<w)break;q=36-w;e>C(2147483647/q)&&n("overflow");e*=q}e=c.length+1;h=t(g-p,e,0==p);C(g/e)>2147483647-f&&n("overflow");f+=C(g/e);g%=e;c.splice(g++,0,f)}return m(c)}function q(b){var c,d,e,g,f,h,m,r,q,w=[],u,y,x;b=l(b);
u=b.length;c=128;d=0;f=72;for(h=0;h<u;++h)q=b[h],128>q&&w.push(D(q));for((e=g=w.length)&&w.push("-");e<u;){m=2147483647;for(h=0;h<u;++h)q=b[h],q>=c&&q<m&&(m=q);y=e+1;m-c>C((2147483647-d)/y)&&n("overflow");d+=(m-c)*y;c=m;for(h=0;h<u;++h)if(q=b[h],q<c&&2147483647<++d&&n("overflow"),q==c){r=d;for(m=36;;m+=36){q=m<=f?1:m>=f+26?26:m-f;if(r<q)break;x=r-q;r=36-q;w.push(D(p(q+x%r,0)));r=C(x/r)}w.push(D(p(r,0)));f=t(d,y,e==g);d=0;++e}++d;++c}return w.join("")}var w="object"==typeof e&&e,u="object"==typeof c&&
c&&c.exports==w&&c,x="object"==typeof b&&b;if(x.global===x||x.window===x)f=x;var z=/^xn--/,y=/[^ -~]/,B=/\x2E|\u3002|\uFF0E|\uFF61/g,A={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},C=Math.floor,D=String.fromCharCode,H,x={version:"1.2.4",ucs2:{decode:l,encode:m},decode:r,encode:q,toASCII:function(b){return g(b,function(b){return y.test(b)?"xn--"+q(b):b})},toUnicode:function(b){return g(b,function(b){return z.test(b)?
r(b.slice(4).toLowerCase()):b})}};if(w&&!w.nodeType)if(u)u.exports=x;else for(H in x)x.hasOwnProperty(H)&&(w[H]=x[H]);else f.punycode=x})(this)}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],2:[function(b,c,e){function d(b,c){for(var e=3===b.nodeType?document.createTextNode(b.nodeValue):b.cloneNode(!1),f=b.firstChild;f;)!0!==c&&1===f.nodeType&&"SCRIPT"===f.nodeName||e.appendChild(d(f,c)),f=f.nextSibling;if(1===b.nodeType)if(e._scrollTop=
b.scrollTop,e._scrollLeft=b.scrollLeft,"CANVAS"===b.nodeName)try{e&&(e.width=b.width,e.height=b.height,e.getContext("2d").putImageData(b.getContext("2d").getImageData(0,0,b.width,b.height),0,0))}catch(p){n("Unable to copy canvas content from",b,p)}else if("TEXTAREA"===b.nodeName||"SELECT"===b.nodeName)e.value=b.value;return e}function f(b){if(1===b.nodeType)for(b.scrollTop=b._scrollTop,b.scrollLeft=b._scrollLeft,b=b.firstChild;b;)f(b),b=b.nextSibling}var n=b("./log");c.exports=function(b,c,e,m,p,
n,r){var q=d(b.documentElement,p.javascriptEnabled),w=c.createElement("iframe");w.className="html2canvas-container";w.style.visibility="hidden";w.style.position="fixed";w.style.left="-10000px";w.style.top="0px";w.style.border="0";w.width=e;w.height=m;w.scrolling="no";c.body.appendChild(w);return new Promise(function(c){var d=w.contentWindow.document;w.contentWindow.onload=w.onload=function(){var b=setInterval(function(){0<d.body.childNodes.length&&(f(d.documentElement),clearInterval(b),"view"===p.type&&
(w.contentWindow.scrollTo(n,r),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||w.contentWindow.scrollY===r&&w.contentWindow.scrollX===n||(d.documentElement.style.top=-r+"px",d.documentElement.style.left=-n+"px",d.documentElement.style.position="absolute")),c(w))},50)};d.open();d.write("<!DOCTYPE html><html></html>");!b.defaultView||n===b.defaultView.pageXOffset&&r===b.defaultView.pageYOffset||b.defaultView.scrollTo(n,r);d.replaceChild(d.adoptNode(q),d.documentElement);d.close()})}},{"./log":13}],
3:[function(b,c,e){function d(b){this.b=this.g=this.r=0;this.a=null;this.fromArray(b)||this.namedColor(b)||this.rgb(b)||this.rgba(b)||this.hex6(b)||this.hex3(b)}d.prototype.darken=function(b){b=1-b;return new d([Math.round(this.r*b),Math.round(this.g*b),Math.round(this.b*b),this.a])};d.prototype.isTransparent=function(){return 0===this.a};d.prototype.isBlack=function(){return 0===this.r&&0===this.g&&0===this.b};d.prototype.fromArray=function(b){Array.isArray(b)&&(this.r=Math.min(b[0],255),this.g=
Math.min(b[1],255),this.b=Math.min(b[2],255),3<b.length&&(this.a=b[3]));return Array.isArray(b)};var f=/^#([a-f0-9]{3})$/i;d.prototype.hex3=function(b){var c=null;null!==(c=b.match(f))&&(this.r=parseInt(c[1][0]+c[1][0],16),this.g=parseInt(c[1][1]+c[1][1],16),this.b=parseInt(c[1][2]+c[1][2],16));return null!==c};var n=/^#([a-f0-9]{6})$/i;d.prototype.hex6=function(b){var c=null;null!==(c=b.match(n))&&(this.r=parseInt(c[1].substring(0,2),16),this.g=parseInt(c[1].substring(2,4),16),this.b=parseInt(c[1].substring(4,
6),16));return null!==c};var h=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/;d.prototype.rgb=function(b){var c=null;null!==(c=b.match(h))&&(this.r=Number(c[1]),this.g=Number(c[2]),this.b=Number(c[3]));return null!==c};var g=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/;d.prototype.rgba=function(b){var c=null;null!==(c=b.match(g))&&(this.r=Number(c[1]),this.g=Number(c[2]),this.b=Number(c[3]),this.a=Number(c[4]));return null!==c};d.prototype.toString=function(){return null!==
this.a&&1!==this.a?"rgba("+[this.r,this.g,this.b,this.a].join()+")":"rgb("+[this.r,this.g,this.b].join()+")"};d.prototype.namedColor=function(b){b=b.toLowerCase();var c=l[b];if(c)this.r=c[0],this.g=c[1],this.b=c[2];else if("transparent"===b)return this.r=this.g=this.b=this.a=0,!0;return!!c};d.prototype.isColor=!0;var l={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,
235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,
50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,
128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,
160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,
21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,
230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,
224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};c.exports=d},{}],4:[function(b,c,e){function d(b,c){var d=B++;c=c||{};c.logging&&(w.options.logging=!0,w.options.start=Date.now());c.async="undefined"===typeof c.async?!0:c.async;c.allowTaint="undefined"===typeof c.allowTaint?!1:c.allowTaint;c.removeContainer="undefined"===typeof c.removeContainer?!0:c.removeContainer;c.javascriptEnabled="undefined"===typeof c.javascriptEnabled?
!1:c.javascriptEnabled;c.imageTimeout="undefined"===typeof c.imageTimeout?1E4:c.imageTimeout;c.renderer="function"===typeof c.renderer?c.renderer:t;c.strict=!!c.strict;if("string"===typeof b){if("string"!==typeof c.proxy)return Promise.reject("Proxy must be used when rendering url");var e=null!=c.width?c.width:window.innerWidth,g=null!=c.height?c.height:window.innerHeight;return z(m(b),c.proxy,document,e,g,c).then(function(b){return n(b.contentWindow.document.documentElement,b,c,e,g)})}var h=(void 0===
b?[document.documentElement]:b.length?b:[b])[0];h.setAttribute("data-html2canvas-node"+d,d);return f(h.ownerDocument,c,void 0!=c.width?c.width:h.ownerDocument.defaultView.innerWidth,void 0!=c.height?c.height:h.ownerDocument.defaultView.innerHeight,d).then(function(b){"function"===typeof c.onrendered&&(w("options.onrendered is deprecated, html2canvas returns a Promise containing the canvas"),c.onrendered(b));return b})}function f(b,c,d,e,g){return x(b,b,d,e,c,b.defaultView.pageXOffset,b.defaultView.pageYOffset).then(function(f){w("Document cloned");
var h="data-html2canvas-node"+g,l="["+h+"='"+g+"']";b.querySelector(l).removeAttribute(h);var h=f.contentWindow,m=h.document.querySelector(l);return("function"===typeof c.onclone?Promise.resolve(c.onclone(h.document)):Promise.resolve(!0)).then(function(){return n(m,f,c,d,e)})})}function n(b,c,d,e,f){var m=c.contentWindow,n=new p(m.document),t=new r(d,n),u=y(b);e="view"===d.type?e:g(m.document);f="view"===d.type?f:l(m.document);var x=new d.renderer(e,f,t,d,document);return(new q(b,x,n,t,d)).ready.then(function(){w("Finished rendering");
var e;e="view"===d.type?h(x.canvas,{width:x.canvas.width,height:x.canvas.height,top:0,left:0,x:0,y:0}):b===m.document.body||b===m.document.documentElement||null!=d.canvas?x.canvas:h(x.canvas,{width:null!=d.width?d.width:u.width,height:null!=d.height?d.height:u.height,top:u.top,left:u.left,x:0,y:0});d.removeContainer&&(c.parentNode.removeChild(c),w("Cleaned up container"));return e})}function h(b,c){var d=document.createElement("canvas"),e=Math.min(b.width-1,Math.max(0,c.left)),g=Math.min(b.width,
Math.max(1,c.left+c.width)),f=Math.min(b.height-1,Math.max(0,c.top)),h=Math.min(b.height,Math.max(1,c.top+c.height));d.width=c.width;d.height=c.height;g-=e;h-=f;w("Cropping canvas at:","left:",c.left,"top:",c.top,"width:",g,"height:",h);w("Resulting crop with width",c.width,"and height",c.height,"with x",e,"and y",f);d.getContext("2d").drawImage(b,e,f,g,h,c.x,c.y,g,h);return d}function g(b){return Math.max(Math.max(b.body.scrollWidth,b.documentElement.scrollWidth),Math.max(b.body.offsetWidth,b.documentElement.offsetWidth),
Math.max(b.body.clientWidth,b.documentElement.clientWidth))}function l(b){return Math.max(Math.max(b.body.scrollHeight,b.documentElement.scrollHeight),Math.max(b.body.offsetHeight,b.documentElement.offsetHeight),Math.max(b.body.clientHeight,b.documentElement.clientHeight))}function m(b){var c=document.createElement("a");c.href=b;c.href=c.href;return c}var p=b("./support"),t=b("./renderers/canvas"),r=b("./imageloader"),q=b("./nodeparser");e=b("./nodecontainer");var w=b("./log"),u=b("./utils"),x=b("./clone"),
z=b("./proxy").loadUrlDocument,y=u.getBounds,B=0;d.CanvasRenderer=t;d.NodeContainer=e;d.log=w;d.utils=u;b="undefined"===typeof document||"function"!==typeof Object.create||"function"!==typeof document.createElement("canvas").getContext?function(){return Promise.reject("No canvas support")}:d;c.exports=b},{"./clone":2,"./imageloader":11,"./log":13,"./nodecontainer":14,"./nodeparser":15,"./proxy":16,"./renderers/canvas":20,"./support":22,"./utils":26}],5:[function(b,c,e){function d(b){this.src=b;f("DummyImageContainer for",
b);if(!this.promise||!this.image){f("Initiating DummyImageContainer");d.prototype.image=new Image;var c=this.image;d.prototype.promise=new Promise(function(b,d){c.onload=b;c.onerror=d;c.src=n();!0===c.complete&&b(c)})}}var f=b("./log"),n=b("./utils").smallImage;c.exports=d},{"./log":13,"./utils":26}],6:[function(b,c,e){var d=b("./utils").smallImage;c.exports=function(b,c){var e=document.createElement("div"),g=document.createElement("img"),l=document.createElement("span"),m;e.style.visibility="hidden";
e.style.fontFamily=b;e.style.fontSize=c;e.style.margin=0;e.style.padding=0;document.body.appendChild(e);g.src=d();g.width=1;g.height=1;g.style.margin=0;g.style.padding=0;g.style.verticalAlign="baseline";l.style.fontFamily=b;l.style.fontSize=c;l.style.margin=0;l.style.padding=0;l.appendChild(document.createTextNode("Hidden Text"));e.appendChild(l);e.appendChild(g);m=g.offsetTop-l.offsetTop+1;e.removeChild(l);e.appendChild(document.createTextNode("Hidden Text"));e.style.lineHeight="normal";g.style.verticalAlign=
"super";g=g.offsetTop-e.offsetTop+1;document.body.removeChild(e);this.baseline=m;this.lineWidth=1;this.middle=g}},{"./utils":26}],7:[function(b,c,e){function d(){this.data={}}var f=b("./font");d.prototype.getMetrics=function(b,c){void 0===this.data[b+"-"+c]&&(this.data[b+"-"+c]=new f(b,c));return this.data[b+"-"+c]};c.exports=d},{"./font":6}],8:[function(b,c,e){function d(c,d,e){this.image=null;this.src=c;var m=this,p=f(c);this.promise=(d?new Promise(function(b){"about:blank"===c.contentWindow.document.URL||
null==c.contentWindow.document.documentElement?c.contentWindow.onload=c.onload=function(){b(c)}:b(c)}):this.proxyLoad(e.proxy,p,e)).then(function(c){return b("./core")(c.contentWindow.document.documentElement,{type:"view",width:c.width,height:c.height,proxy:e.proxy,javascriptEnabled:e.javascriptEnabled,removeContainer:e.removeContainer,allowTaint:e.allowTaint,imageTimeout:e.imageTimeout/2})}).then(function(b){return m.image=b})}var f=b("./utils").getBounds,n=b("./proxy").loadUrlDocument;d.prototype.proxyLoad=
function(b,c,d){var e=this.src;return n(e.src,b,e.ownerDocument,c.width,c.height,d)};c.exports=d},{"./core":4,"./proxy":16,"./utils":26}],9:[function(b,c,e){function d(b){this.src=b.value;this.colorStops=[];this.type=null;this.y1=this.x1=this.y0=this.x0=.5;this.promise=Promise.resolve(!0)}d.TYPES={LINEAR:1,RADIAL:2};d.REGEXP_COLORSTOP=/^\s*(rgba?\(\s*\d{1,3},\s*\d{1,3},\s*\d{1,3}(?:,\s*[0-9\.]+)?\s*\)|[a-z]{3,20}|#[a-f0-9]{3,6})(?:\s+(\d{1,3}(?:\.\d+)?)(%|px)?)?(?:\s|$)/i;c.exports=d},{}],10:[function(b,
c,e){c.exports=function(b,c){this.src=b;this.image=new Image;var e=this;this.tainted=null;this.promise=new Promise(function(h,g){e.image.onload=h;e.image.onerror=g;c&&(e.image.crossOrigin="anonymous");e.image.src=b;!0===e.image.complete&&h(e.image)})}},{}],11:[function(b,c,e){function d(b,c){this.link=null;this.options=b;this.support=c;this.origin=this.getOrigin(window.location.href)}var f=b("./log"),n=b("./imagecontainer"),h=b("./dummyimagecontainer"),g=b("./proxyimagecontainer"),l=b("./framecontainer"),
m=b("./svgcontainer"),p=b("./svgnodecontainer"),t=b("./lineargradientcontainer"),r=b("./webkitgradientcontainer"),q=b("./utils").bind;d.prototype.findImages=function(b){var c=[];b.reduce(function(b,c){switch(c.node.nodeName){case "IMG":return b.concat([{args:[c.node.src],method:"url"}]);case "svg":case "IFRAME":return b.concat([{args:[c.node],method:c.node.nodeName}])}return b},[]).forEach(this.addImage(c,this.loadImage),this);return c};d.prototype.findBackgroundImage=function(b,c){c.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(b,
this.loadImage),this);return b};d.prototype.addImage=function(b,c){return function(d){d.args.forEach(function(e){this.imageExists(b,e)||(b.splice(0,0,c.call(this,d)),f("Added image #"+b.length,"string"===typeof e?e.substring(0,100):e))},this)}};d.prototype.hasImageBackground=function(b){return"none"!==b.method};d.prototype.loadImage=function(b){return"url"===b.method?(b=b.args[0],!this.isSVG(b)||this.support.svg||this.options.allowTaint?b.match(/data:image\/.*;base64,/i)?new n(b.replace(/url\(['"]{0,}|['"]{0,}\)$/ig,
""),!1):this.isSameOrigin(b)||!0===this.options.allowTaint||this.isSVG(b)?new n(b,!1):this.support.cors&&!this.options.allowTaint&&this.options.useCORS?new n(b,!0):this.options.proxy?new g(b,this.options.proxy):new h(b):new m(b)):"linear-gradient"===b.method?new t(b):"gradient"===b.method?new r(b):"svg"===b.method?new p(b.args[0],this.support.svg):"IFRAME"===b.method?new l(b.args[0],this.isSameOrigin(b.args[0].src),this.options):new h(b)};d.prototype.isSVG=function(b){return"svg"===b.substring(b.length-
3).toLowerCase()||m.prototype.isInline(b)};d.prototype.imageExists=function(b,c){return b.some(function(b){return b.src===c})};d.prototype.isSameOrigin=function(b){return this.getOrigin(b)===this.origin};d.prototype.getOrigin=function(b){var c=this.link||(this.link=document.createElement("a"));c.href=b;c.href=c.href;return c.protocol+c.hostname+c.port};d.prototype.getPromise=function(b){return this.timeout(b,this.options.imageTimeout)["catch"](function(){return(new h(b.src)).promise.then(function(c){b.image=
c})})};d.prototype.get=function(b){var c=null;return this.images.some(function(d){return(c=d).src===b})?c:null};d.prototype.fetch=function(b){this.images=b.reduce(q(this.findBackgroundImage,this),this.findImages(b));this.images.forEach(function(b,c){b.promise.then(function(){f("Succesfully loaded image #"+(c+1),b)},function(d){f("Failed loading image #"+(c+1),b,d)})});this.ready=Promise.all(this.images.map(this.getPromise,this));f("Finished searching images");return this};d.prototype.timeout=function(b,
c){var d,e=Promise.race([b.promise,new Promise(function(e,g){d=setTimeout(function(){f("Timed out loading image",b);g(b)},c)})]).then(function(b){clearTimeout(d);return b});e["catch"](function(){clearTimeout(d)});return e};c.exports=d},{"./dummyimagecontainer":5,"./framecontainer":8,"./imagecontainer":10,"./lineargradientcontainer":12,"./log":13,"./proxyimagecontainer":17,"./svgcontainer":23,"./svgnodecontainer":24,"./utils":26,"./webkitgradientcontainer":27}],12:[function(b,c,e){function d(b){f.apply(this,
arguments);this.type=f.TYPES.LINEAR;var c=d.REGEXP_DIRECTION.test(b.args[0])||!f.REGEXP_COLORSTOP.test(b.args[0]);c?b.args[0].split(/\s+/).reverse().forEach(function(b,c){switch(b){case "left":this.x0=0;this.x1=1;break;case "top":this.y0=0;this.y1=1;break;case "right":this.x0=1;this.x1=0;break;case "bottom":this.y0=1;this.y1=0;break;case "to":var d=this.y0,e=this.x0;this.y0=this.y1;this.x0=this.x1;this.x1=e;this.y1=d;break;case "center":break;default:d=.01*parseFloat(b,10);if(isNaN(d))break;0===c?
(this.y0=d,this.y1=1-this.y0):(this.x0=d,this.x1=1-this.x0)}},this):(this.y0=0,this.y1=1);this.colorStops=b.args.slice(c?1:0).map(function(b){b=b.match(f.REGEXP_COLORSTOP);var c=+b[2],d=0===c?"%":b[3];return{color:new n(b[1]),stop:"%"===d?c/100:null}});null===this.colorStops[0].stop&&(this.colorStops[0].stop=0);null===this.colorStops[this.colorStops.length-1].stop&&(this.colorStops[this.colorStops.length-1].stop=1);this.colorStops.forEach(function(b,c){null===b.stop&&this.colorStops.slice(c).some(function(d,
e){return null!==d.stop?(b.stop=(d.stop-this.colorStops[c-1].stop)/(e+1)+this.colorStops[c-1].stop,!0):!1},this)},this)}var f=b("./gradientcontainer"),n=b("./color");d.prototype=Object.create(f.prototype);d.REGEXP_DIRECTION=/^\s*(?:to|left|right|top|bottom|center|\d{1,3}(?:\.\d+)?%?)(?:\s|$)/i;c.exports=d},{"./color":3,"./gradientcontainer":9}],13:[function(b,c,e){var d=function(){d.options.logging&&window.console&&window.console.log&&Function.prototype.bind.call(window.console.log,window.console).apply(window.console,
[Date.now()-d.options.start+"ms","html2canvas:"].concat([].slice.call(arguments,0)))};d.options={logging:!1};c.exports=d},{}],14:[function(b,c,e){function d(b,c){this.node=b;this.parent=c;this.borders=this.bounds=this.stack=null;this.clip=[];this.backgroundClip=[];this.computedStyles=this.visible=this.offsetBounds=null;this.colors={};this.styles={};this.transformMatrix=this.transformData=this.backgroundImages=null;this.isPseudoElement=!1;this.opacity=null}function f(b){if(b&&"matrix"===b[1])return b[2].split(",").map(function(b){return parseFloat(b.trim())});
if(b&&"matrix3d"===b[1])return b=b[2].split(",").map(function(b){return parseFloat(b.trim())}),[b[0],b[1],b[4],b[5],b[12],b[13]]}function n(b){return-1!==b.toString().indexOf("%")}function h(b){return b.replace("px","")}function g(b){return parseFloat(b)}var l=b("./color");b=b("./utils");var m=b.getBounds,p=b.parseBackgrounds,t=b.offsetBounds;d.prototype.cloneTo=function(b){b.visible=this.visible;b.borders=this.borders;b.bounds=this.bounds;b.clip=this.clip;b.backgroundClip=this.backgroundClip;b.computedStyles=
this.computedStyles;b.styles=this.styles;b.backgroundImages=this.backgroundImages;b.opacity=this.opacity};d.prototype.getOpacity=function(){return null===this.opacity?this.opacity=this.cssFloat("opacity"):this.opacity};d.prototype.assignStack=function(b){this.stack=b;b.children.push(this)};d.prototype.isElementVisible=function(){return this.node.nodeType===Node.TEXT_NODE?this.parent.visible:"none"!==this.css("display")&&"hidden"!==this.css("visibility")&&!this.node.hasAttribute("data-html2canvas-ignore")&&
("INPUT"!==this.node.nodeName||"hidden"!==this.node.getAttribute("type"))};d.prototype.css=function(b){this.computedStyles||(this.computedStyles=this.isPseudoElement?this.parent.computedStyle(this.before?":before":":after"):this.computedStyle(null));return this.styles[b]||(this.styles[b]=this.computedStyles[b])};d.prototype.prefixedCss=function(b){var c=["webkit","moz","ms","o"],d=this.css(b);void 0===d&&c.some(function(c){d=this.css(c+b.substr(0,1).toUpperCase()+b.substr(1));return void 0!==d},this);
return void 0===d?null:d};d.prototype.computedStyle=function(b){return this.node.ownerDocument.defaultView.getComputedStyle(this.node,b)};d.prototype.cssInt=function(b){b=parseInt(this.css(b),10);return isNaN(b)?0:b};d.prototype.color=function(b){return this.colors[b]||(this.colors[b]=new l(this.css(b)))};d.prototype.cssFloat=function(b){b=parseFloat(this.css(b));return isNaN(b)?0:b};d.prototype.fontWeight=function(){var b=this.css("fontWeight");switch(parseInt(b,10)){case 401:b="bold";break;case 400:b=
"normal"}return b};d.prototype.parseClip=function(){var b=this.css("clip").match(this.CLIP);return b?{top:parseInt(b[1],10),right:parseInt(b[2],10),bottom:parseInt(b[3],10),left:parseInt(b[4],10)}:null};d.prototype.parseBackgroundImages=function(){return this.backgroundImages||(this.backgroundImages=p(this.css("backgroundImage")))};d.prototype.cssList=function(b,c){var d=(this.css(b)||"").split(","),d=d[c||0]||d[0]||"auto",d=d.trim().split(" ");1===d.length&&(d=[d[0],n(d[0])?"auto":d[0]]);return d};
d.prototype.parseBackgroundSize=function(b,c,d){d=this.cssList("backgroundSize",d);var e;if(n(d[0]))e=b.width*parseFloat(d[0])/100;else{if(/contain|cover/.test(d[0]))return c=c.width/c.height,b.width/b.height<c^"contain"===d[0]?{width:b.height*c,height:b.height}:{width:b.width,height:b.width/c};e=parseInt(d[0],10)}b="auto"===d[0]&&"auto"===d[1]?c.height:"auto"===d[1]?e/c.width*c.height:n(d[1])?b.height*parseFloat(d[1])/100:parseInt(d[1],10);"auto"===d[0]&&(e=b/c.height*c.width);return{width:e,height:b}};
d.prototype.parseBackgroundPosition=function(b,c,d,e){d=this.cssList("backgroundPosition",d);var g;g=n(d[0])?(b.width-(e||c).width)*(parseFloat(d[0])/100):parseInt(d[0],10);b="auto"===d[1]?g/c.width*c.height:n(d[1])?(b.height-(e||c).height)*parseFloat(d[1])/100:parseInt(d[1],10);"auto"===d[0]&&(g=b/c.height*c.width);return{left:g,top:b}};d.prototype.parseBackgroundRepeat=function(b){return this.cssList("backgroundRepeat",b)[0]};d.prototype.parseTextShadows=function(){var b=this.css("textShadow"),
c=[];if(b&&"none"!==b)for(var b=b.match(this.TEXT_SHADOW_PROPERTY),d=0;b&&d<b.length;d++){var e=b[d].match(this.TEXT_SHADOW_VALUES);c.push({color:new l(e[0]),offsetX:e[1]?parseFloat(e[1].replace("px","")):0,offsetY:e[2]?parseFloat(e[2].replace("px","")):0,blur:e[3]?e[3].replace("px",""):0})}return c};d.prototype.parseTransform=function(){if(!this.transformData)if(this.hasTransform()){var b=this.parseBounds(),c=this.prefixedCss("transformOrigin").split(" ").map(h).map(g);c[0]+=b.left;c[1]+=b.top;this.transformData=
{origin:c,matrix:this.parseTransformMatrix()}}else this.transformData={origin:[0,0],matrix:[1,0,0,1,0,0]};return this.transformData};d.prototype.parseTransformMatrix=function(){if(!this.transformMatrix){var b=this.prefixedCss("transform");this.transformMatrix=(b=b?f(b.match(this.MATRIX_PROPERTY)):null)?b:[1,0,0,1,0,0]}return this.transformMatrix};d.prototype.parseBounds=function(){return this.bounds||(this.bounds=this.hasTransform()?t(this.node):m(this.node))};d.prototype.hasTransform=function(){return"1,0,0,1,0,0"!==
this.parseTransformMatrix().join(",")||this.parent&&this.parent.hasTransform()};d.prototype.getValue=function(){var b=this.node.value||"";"SELECT"===this.node.tagName?(b=this.node,b=(b=b.options[b.selectedIndex||0])?b.text||"":""):"password"===this.node.type&&(b=Array(b.length+1).join("\u2022"));return 0===b.length?this.node.placeholder||"":b};d.prototype.MATRIX_PROPERTY=/(matrix|matrix3d)\((.+)\)/;d.prototype.TEXT_SHADOW_PROPERTY=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g;d.prototype.TEXT_SHADOW_VALUES=
/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g;d.prototype.CLIP=/^rect\((\d+)px,? (\d+)px,? (\d+)px,? (\d+)px\)$/;c.exports=d},{"./color":3,"./utils":26}],15:[function(b,c,e){function d(b,c,d,e,g){O("Starting NodeParser");this.renderer=c;this.options=g;this.range=null;this.support=d;this.renderQueue=[];this.stack=new U(!0,1,b.ownerDocument,null);d=new Z(b,null);g.background&&c.rectangle(0,0,c.width,c.height,new K(g.background));if(b===b.ownerDocument.documentElement){var f=new Z(d.color("backgroundColor").isTransparent()?
b.ownerDocument.body:b.ownerDocument.documentElement,null);c.rectangle(0,0,c.width,c.height,f.color("backgroundColor"))}d.visibile=d.isElementVisible();this.createPseudoHideStyles(b.ownerDocument);this.disableAnimations(b.ownerDocument);this.nodes=V([d].concat(this.getChildren(d)).filter(function(b){return b.visible=b.isElementVisible()}).map(this.getPseudoElements,this));this.fontMetrics=new R;O("Fetched nodes, total:",this.nodes.length);O("Calculate overflow clips");this.calculateOverflowClips();
O("Start fetching images");this.images=e.fetch(this.nodes.filter(D));this.ready=this.images.ready.then(Q(function(){O("Images loaded, starting parsing");O("Creating stacking contexts");this.createStackingContexts();O("Sorting stacking contexts");this.sortStackingContexts(this.stack);this.parse(this.stack);O("Render queue created with "+this.renderQueue.length+" items");return new Promise(Q(function(b){g.async?"function"===typeof g.async?g.async.call(this,this.renderQueue,b):0<this.renderQueue.length?
(this.renderIndex=0,this.asyncRenderer(this.renderQueue,b)):b():(this.renderQueue.forEach(this.paint,this),b())},this))},this))}function f(b){return b.replace(/(\-[a-z])/g,function(b){return b.toUpperCase().replace("-","")})}function n(){}function h(b,c,d,e){return b.map(function(g,f){if(0<g.width){var h=c.left,l=c.top,m=c.width,r=c.height-b[2].width;switch(f){case 0:r=b[0].width;g.args=p({c1:[h,l],c2:[h+m,l],c3:[h+m-b[1].width,l+r],c4:[h+b[3].width,l+r]},e[0],e[1],d.topLeftOuter,d.topLeftInner,d.topRightOuter,
d.topRightInner);break;case 1:h=c.left+c.width-b[1].width;m=b[1].width;g.args=p({c1:[h+m,l],c2:[h+m,l+r+b[2].width],c3:[h,l+r],c4:[h,l+b[0].width]},e[1],e[2],d.topRightOuter,d.topRightInner,d.bottomRightOuter,d.bottomRightInner);break;case 2:l=l+c.height-b[2].width;r=b[2].width;g.args=p({c1:[h+m,l+r],c2:[h,l+r],c3:[h+b[3].width,l],c4:[h+m-b[3].width,l]},e[2],e[3],d.bottomRightOuter,d.bottomRightInner,d.bottomLeftOuter,d.bottomLeftInner);break;case 3:m=b[3].width,g.args=p({c1:[h,l+r+b[2].width],c2:[h,
l],c3:[h+m,l+b[0].width],c4:[h+m,l+r]},e[3],e[0],d.bottomLeftOuter,d.bottomLeftInner,d.topLeftOuter,d.topLeftInner)}}return g})}function g(b,c,d,e){var g=4*((Math.sqrt(2)-1)/3),f=d*g,g=e*g;d=b+d;e=c+e;return{topLeft:m({x:b,y:e},{x:b,y:e-g},{x:d-f,y:c},{x:d,y:c}),topRight:m({x:b,y:c},{x:b+f,y:c},{x:d,y:e-g},{x:d,y:e}),bottomRight:m({x:d,y:c},{x:d,y:c+g},{x:b+f,y:e},{x:b,y:e}),bottomLeft:m({x:d,y:e},{x:d-f,y:e},{x:b,y:c+g},{x:b,y:c})}}function l(b,c,d){var e=b.left,f=b.top,h=b.width;b=b.height;var l=
c[0][0]<h/2?c[0][0]:h/2,m=c[0][1]<b/2?c[0][1]:b/2,p=c[1][0]<h/2?c[1][0]:h/2,r=c[1][1]<b/2?c[1][1]:b/2,q=c[2][0]<h/2?c[2][0]:h/2,n=c[2][1]<b/2?c[2][1]:b/2,t=c[3][0]<h/2?c[3][0]:h/2;c=c[3][1]<b/2?c[3][1]:b/2;var w=h-p,u=b-n,y=h-q,G=b-c;return{topLeftOuter:g(e,f,l,m).topLeft.subdivide(.5),topLeftInner:g(e+d[3].width,f+d[0].width,Math.max(0,l-d[3].width),Math.max(0,m-d[0].width)).topLeft.subdivide(.5),topRightOuter:g(e+w,f,p,r).topRight.subdivide(.5),topRightInner:g(e+Math.min(w,h+d[3].width),f+d[0].width,
w>h+d[3].width?0:p-d[3].width,r-d[0].width).topRight.subdivide(.5),bottomRightOuter:g(e+y,f+u,q,n).bottomRight.subdivide(.5),bottomRightInner:g(e+Math.min(y,h-d[3].width),f+Math.min(u,b+d[0].width),Math.max(0,q-d[1].width),n-d[2].width).bottomRight.subdivide(.5),bottomLeftOuter:g(e,f+G,t,c).bottomLeft.subdivide(.5),bottomLeftInner:g(e+d[3].width,f+G,Math.max(0,t-d[3].width),c-d[2].width).bottomLeft.subdivide(.5)}}function m(b,c,d,e){var g=function(b,c,d){return{x:b.x+(c.x-b.x)*d,y:b.y+(c.y-b.y)*d}};
return{start:b,startControl:c,endControl:d,end:e,subdivide:function(f){var h=g(b,c,f),l=g(c,d,f),p=g(d,e,f),r=g(h,l,f),l=g(l,p,f);f=g(r,l,f);return[m(b,h,r,f),m(f,l,p,e)]},curveTo:function(b){b.push(["bezierCurve",c.x,c.y,d.x,d.y,e.x,e.y])},curveToReversed:function(e){e.push(["bezierCurve",d.x,d.y,c.x,c.y,b.x,b.y])}}}function p(b,c,d,e,g,f,h){var l=[];0<c[0]||0<c[1]?(l.push(["line",e[1].start.x,e[1].start.y]),e[1].curveTo(l)):l.push(["line",b.c1[0],b.c1[1]]);0<d[0]||0<d[1]?(l.push(["line",f[0].start.x,
f[0].start.y]),f[0].curveTo(l),l.push(["line",h[0].end.x,h[0].end.y]),h[0].curveToReversed(l)):(l.push(["line",b.c2[0],b.c2[1]]),l.push(["line",b.c3[0],b.c3[1]]));0<c[0]||0<c[1]?(l.push(["line",g[1].end.x,g[1].end.y]),g[1].curveToReversed(l)):l.push(["line",b.c4[0],b.c4[1]]);return l}function t(b,c,d,e,g,f,h){0<c[0]||0<c[1]?(b.push(["line",e[0].start.x,e[0].start.y]),e[0].curveTo(b),e[1].curveTo(b)):b.push(["line",f,h]);(0<d[0]||0<d[1])&&b.push(["line",g[0].start.x,g[0].start.y])}function r(b){return 0>
b.cssInt("zIndex")}function q(b){return 0<b.cssInt("zIndex")}function w(b){return 0===b.cssInt("zIndex")}function u(b){return-1!==["inline","inline-block","inline-table"].indexOf(b.css("display"))}function x(b){return 0<b.node.data.trim().length}function z(b){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(c){c=b.css("border"+c+"Radius").split(" ");1>=c.length&&(c[1]=c[0]);return c.map(L)})}function y(b){return b.nodeType===Node.TEXT_NODE||b.nodeType===Node.ELEMENT_NODE}function B(b){return"static"!==
b.css("position")}function A(b){return"none"!==b.css("float")}function C(b){var c=this;return function(){return!b.apply(c,arguments)}}function D(b){return b.node.nodeType===Node.ELEMENT_NODE}function H(b){return b.node.nodeType===Node.TEXT_NODE}function G(b){return function(c,d){return c.cssInt("zIndex")+b.indexOf(c)/b.length-(d.cssInt("zIndex")+b.indexOf(d)/b.length)}}function L(b){return parseInt(b,10)}function J(b){return b.width}function M(b){return b.node.nodeType!==Node.ELEMENT_NODE||-1==="SCRIPT HEAD TITLE OBJECT BR OPTION".split(" ").indexOf(b.node.nodeName)}
function V(b){return[].concat.apply([],b)}function T(b){for(var c=[],d=0,e=!1,g;b.length;)-1!==[32,13,10,9,45].indexOf(b[d])===e?(g=b.splice(0,d),g.length&&c.push(N.ucs2.encode(g)),e=!e,d=0):d++,d>=b.length&&(g=b.splice(0,d),g.length&&c.push(N.ucs2.encode(g)));return c}var O=b("./log"),N=b("punycode"),Z=b("./nodecontainer"),X=b("./textcontainer"),P=b("./pseudoelementcontainer"),R=b("./fontmetrics"),K=b("./color"),U=b("./stackingcontext");b=b("./utils");var Q=b.bind,ma=b.getBounds,S=b.parseBackgrounds,
W=b.offsetBounds;d.prototype.calculateOverflowClips=function(){this.nodes.forEach(function(b){if(D(b)){!0===b.isPseudoElement&&b.appendToDOM();b.borders=this.parseBorders(b);var c="hidden"===b.css("overflow")?[b.borders.clip]:[],d=b.parseClip();d&&-1!==["absolute","fixed"].indexOf(b.css("position"))&&c.push([["rect",b.bounds.left+d.left,b.bounds.top+d.top,d.right-d.left,d.bottom-d.top]]);b.clip=b.parent&&b.parent.clip.length?b.parent.clip.concat(c):c;b.backgroundClip="hidden"!==b.css("overflow")?
b.clip.concat([b.borders.clip]):b.clip;!0===b.isPseudoElement&&b.cleanDOM()}else H(b)&&(b.clip=b.parent&&b.parent.clip.length?b.parent.clip:[]);!0!==b.isPseudoElement&&(b.bounds=null)},this)};d.prototype.asyncRenderer=function(b,c,d){d=d||Date.now();this.paint(b[this.renderIndex++]);b.length===this.renderIndex?c():d+20>Date.now()?this.asyncRenderer(b,c,d):setTimeout(Q(function(){this.asyncRenderer(b,c)},this),0)};d.prototype.createPseudoHideStyles=function(b){this.createStyles(b,"."+P.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+
':before { content: "" !important; display: none !important; }.'+P.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER+':after { content: "" !important; display: none !important; }')};d.prototype.disableAnimations=function(b){this.createStyles(b,"* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; -webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}")};
d.prototype.createStyles=function(b,c){var d=b.createElement("style");d.innerHTML=c;b.body.appendChild(d)};d.prototype.getPseudoElements=function(b){var c=[[b]];if(b.node.nodeType===Node.ELEMENT_NODE){var d=this.getPseudoElement(b,":before");b=this.getPseudoElement(b,":after");d&&c.push(d);b&&c.push(b)}return V(c)};d.prototype.getPseudoElement=function(b,c){var d=b.computedStyle(c);if(!d||!d.content||"none"===d.content||"-moz-alt-content"===d.content||"none"===d.display)return null;var e,g=d.content,
h=g.substr(0,1);e=h===g.substr(g.length-1)&&h.match(/'|"/)?g.substr(1,g.length-2):g;for(var l="url"===e.substr(0,3),g=document.createElement(l?"img":"html2canvaspseudoelement"),h=new P(g,b,c),m=d.length-1;0<=m;m--){var p=f(d.item(m));g.style[p]=d[p]}g.className=P.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+P.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER;if(l)return g.src=S(e)[0].args[0],[h];d=document.createTextNode(e);g.appendChild(d);return[h,new X(d,h)]};d.prototype.getChildren=function(b){return V([].filter.call(b.node.childNodes,
y).map(function(c){var d=[c.nodeType!==Node.TEXT_NODE||c.parentNode instanceof SVGElement?new Z(c,b):new X(c,b)].filter(M);return c.nodeType===Node.ELEMENT_NODE&&d.length&&"TEXTAREA"!==c.tagName?d[0].isElementVisible()?d.concat(this.getChildren(d[0])):[]:d},this))};d.prototype.newStackingContext=function(b,c){var d=new U(c,b.getOpacity(),b.node,b.parent);b.cloneTo(d);(c?d.getParentStack(this):d.parent.stack).contexts.push(d);b.stack=d};d.prototype.createStackingContexts=function(){this.nodes.forEach(function(b){var c;
if(c=D(b))(c=this.isRootElement(b)||1>b.getOpacity())||(c=b.css("position"),c="auto"!==(-1!==["absolute","relative","fixed"].indexOf(c)?b.css("zIndex"):"auto")),c=c||this.isBodyWithTransparentRoot(b)||b.hasTransform();c?this.newStackingContext(b,!0):D(b)&&(B(b)&&w(b)||-1!==["inline-block","inline-table"].indexOf(b.css("display"))||A(b))?this.newStackingContext(b,!1):b.assignStack(b.parent.stack)},this)};d.prototype.isBodyWithTransparentRoot=function(b){return"BODY"===b.node.nodeName&&b.parent.color("backgroundColor").isTransparent()};
d.prototype.isRootElement=function(b){return null===b.parent};d.prototype.sortStackingContexts=function(b){b.contexts.sort(G(b.contexts.slice(0)));b.contexts.forEach(this.sortStackingContexts,this)};d.prototype.parseTextBounds=function(b){return function(c,d,e){if("none"!==b.parent.css("textDecoration").substr(0,4)||0!==c.trim().length){if(this.support.rangeBounds&&!b.parent.hasTransform())return d=e.slice(0,d).join("").length,this.getRangeBounds(b.node,d,c.length);if(b.node&&"string"===typeof b.node.data)return c=
b.node.splitText(c.length),d=this.getWrapperBounds(b.node,b.parent.hasTransform()),b.node=c,d}else if(!this.support.rangeBounds||b.parent.hasTransform())b.node=b.node.splitText(c.length);return{}}};d.prototype.getWrapperBounds=function(b,c){var d=b.ownerDocument.createElement("html2canvaswrapper"),e=b.parentNode,g=b.cloneNode(!0);d.appendChild(b.cloneNode(!0));e.replaceChild(d,b);var f=c?W(d):ma(d);e.replaceChild(g,d);return f};d.prototype.getRangeBounds=function(b,c,d){var e=this.range||(this.range=
b.ownerDocument.createRange());e.setStart(b,c);e.setEnd(b,c+d);return e.getBoundingClientRect()};d.prototype.parse=function(b){var c=b.contexts.filter(r),d=b.children.filter(D),e=d.filter(C(A)),g=e.filter(C(B)).filter(C(u)),d=d.filter(C(B)).filter(A),f=e.filter(C(B)).filter(u),e=b.contexts.concat(e.filter(B)).filter(w),h=b.children.filter(H).filter(x);b=b.contexts.filter(q);c.concat(g).concat(d).concat(f).concat(e).concat(h).concat(b).forEach(function(b){this.renderQueue.push(b);b instanceof U&&(this.parse(b),
this.renderQueue.push(new n))},this)};d.prototype.paint=function(b){try{b instanceof n?this.renderer.ctx.restore():H(b)?(!0===b.parent.isPseudoElement&&b.parent.appendToDOM(),this.paintText(b),!0===b.parent.isPseudoElement&&b.parent.cleanDOM()):this.paintNode(b)}catch(c){if(O(c),this.options.strict)throw c;}};d.prototype.paintNode=function(b){b instanceof U&&(this.renderer.setOpacity(b.opacity),this.renderer.ctx.save(),b.hasTransform()&&this.renderer.setTransform(b.parseTransform()));"INPUT"===b.node.nodeName&&
"checkbox"===b.node.type?this.paintCheckbox(b):"INPUT"===b.node.nodeName&&"radio"===b.node.type?this.paintRadio(b):this.paintElement(b)};d.prototype.paintElement=function(b){var c=b.parseBounds();this.renderer.clip(b.backgroundClip,function(){this.renderer.renderBackground(b,c,b.borders.borders.map(J))},this);this.renderer.clip(b.clip,function(){this.renderer.renderBorders(b.borders.borders)},this);this.renderer.clip(b.backgroundClip,function(){switch(b.node.nodeName){case "svg":case "IFRAME":var d=
this.images.get(b.node);d?this.renderer.renderImage(b,c,b.borders,d):O("Error loading <"+b.node.nodeName+">",b.node);break;case "IMG":(d=this.images.get(b.node.src))?this.renderer.renderImage(b,c,b.borders,d):O("Error loading <img>",b.node.src);break;case "CANVAS":this.renderer.renderImage(b,c,b.borders,{image:b.node});break;case "SELECT":case "INPUT":case "TEXTAREA":this.paintFormValue(b)}},this)};d.prototype.paintCheckbox=function(b){var c=b.parseBounds(),d=Math.min(c.width,c.height),e={width:d-
1,height:d-1,top:c.top,left:c.left},c=[3,3],g=[c,c,c,c],f=[1,1,1,1].map(function(b){return{color:new K("#A5A5A5"),width:b}}),m=l(e,g,f);this.renderer.clip(b.backgroundClip,function(){this.renderer.rectangle(e.left+1,e.top+1,e.width-2,e.height-2,new K("#DEDEDE"));this.renderer.renderBorders(h(f,e,m,g));b.node.checked&&(this.renderer.font(new K("#424242"),"normal","normal","bold",d-3+"px","arial"),this.renderer.text("\u2714",e.left+d/6,e.top+d-1))},this)};d.prototype.paintRadio=function(b){var c=b.parseBounds(),
d=Math.min(c.width,c.height)-2;this.renderer.clip(b.backgroundClip,function(){this.renderer.circleStroke(c.left+1,c.top+1,d,new K("#DEDEDE"),1,new K("#A5A5A5"));b.node.checked&&this.renderer.circle(Math.ceil(c.left+d/4)+1,Math.ceil(c.top+d/4)+1,Math.floor(d/2),new K("#424242"))},this)};d.prototype.paintFormValue=function(b){var c=b.getValue();if(0<c.length){var d=b.node.ownerDocument,e=d.createElement("html2canvaswrapper");"lineHeight textAlign fontFamily fontWeight fontSize color paddingLeft paddingTop paddingRight paddingBottom width height borderLeftStyle borderTopStyle borderLeftWidth borderTopWidth boxSizing whiteSpace wordWrap".split(" ").forEach(function(c){try{e.style[c]=
b.css(c)}catch(d){O("html2canvas: Parse: Exception caught in renderFormValue: "+d.message)}});var g=b.parseBounds();e.style.position="fixed";e.style.left=g.left+"px";e.style.top=g.top+"px";e.textContent=c;d.body.appendChild(e);this.paintText(new X(e.firstChild,b));d.body.removeChild(e)}};d.prototype.paintText=function(b){b.applyTextTransform();var c=N.ucs2.decode(b.node.data),d=this.options.letterRendering&&!/^(normal|none|0px)$/.test(b.parent.css("letterSpacing"))||/[^\u0000-\u00ff]/.test(b.node.data)?
c.map(function(b){return N.ucs2.encode([b])}):T(c),c=b.parent.fontWeight(),e=b.parent.css("fontSize"),g=b.parent.css("fontFamily"),f=b.parent.parseTextShadows();this.renderer.font(b.parent.color("color"),b.parent.css("fontStyle"),b.parent.css("fontVariant"),c,e,g);f.length?this.renderer.fontShadow(f[0].color,f[0].offsetX,f[0].offsetY,f[0].blur):this.renderer.clearShadow();this.renderer.clip(b.parent.clip,function(){d.map(this.parseTextBounds(b),this).forEach(function(c,f){c&&(this.renderer.text(d[f],
c.left,c.bottom),this.renderTextDecoration(b.parent,c,this.fontMetrics.getMetrics(g,e)))},this)},this)};d.prototype.renderTextDecoration=function(b,c,d){switch(b.css("textDecoration").split(" ")[0]){case "underline":this.renderer.rectangle(c.left,Math.round(c.top+d.baseline+d.lineWidth),c.width,1,b.color("color"));break;case "overline":this.renderer.rectangle(c.left,Math.round(c.top),c.width,1,b.color("color"));break;case "line-through":this.renderer.rectangle(c.left,Math.ceil(c.top+d.middle+d.lineWidth),
c.width,1,b.color("color"))}};var la={inset:[["darken",.6],["darken",.1],["darken",.1],["darken",.6]]};d.prototype.parseBorders=function(b){var c=b.parseBounds(),d=z(b),e=["Top","Right","Bottom","Left"].map(function(c,d){var e=b.css("border"+c+"Style"),g=b.color("border"+c+"Color");"inset"===e&&g.isBlack()&&(g=new K([255,255,255,g.a]));e=la[e]?la[e][d]:null;return{width:b.cssInt("border"+c+"Width"),color:e?g[e[0]](e[1]):g,args:null}}),g=l(c,d,e);return{clip:this.parseBackgroundClip(b,g,e,d,c),borders:h(e,
c,g,d)}};d.prototype.parseBackgroundClip=function(b,c,d,e,g){var f=[];switch(b.css("backgroundClip")){case "content-box":case "padding-box":t(f,e[0],e[1],c.topLeftInner,c.topRightInner,g.left+d[3].width,g.top+d[0].width);t(f,e[1],e[2],c.topRightInner,c.bottomRightInner,g.left+g.width-d[1].width,g.top+d[0].width);t(f,e[2],e[3],c.bottomRightInner,c.bottomLeftInner,g.left+g.width-d[1].width,g.top+g.height-d[2].width);t(f,e[3],e[0],c.bottomLeftInner,c.topLeftInner,g.left+d[3].width,g.top+g.height-d[2].width);
break;default:t(f,e[0],e[1],c.topLeftOuter,c.topRightOuter,g.left,g.top),t(f,e[1],e[2],c.topRightOuter,c.bottomRightOuter,g.left+g.width,g.top),t(f,e[2],e[3],c.bottomRightOuter,c.bottomLeftOuter,g.left+g.width,g.top+g.height),t(f,e[3],e[0],c.bottomLeftOuter,c.topLeftOuter,g.left,g.top+g.height)}return f};c.exports=d},{"./color":3,"./fontmetrics":7,"./log":13,"./nodecontainer":14,"./pseudoelementcontainer":18,"./stackingcontext":21,"./textcontainer":25,"./utils":26,punycode:1}],16:[function(b,c,e){function d(b,
c,d){var e="withCredentials"in new XMLHttpRequest;if(!c)return Promise.reject("No proxy configured");var g=n(e);b=h(c,b,g);return e?l(b):f(d,b,g).then(function(b){return t(b.content)})}function f(b,c,d){return new Promise(function(e,g){var f=b.createElement("script"),h=function(){delete window.html2canvas.proxy[d];b.body.removeChild(f)};window.html2canvas.proxy[d]=function(b){h();e(b)};f.src=c;f.onerror=function(b){h();g(b)};b.body.appendChild(f)})}function n(b){return b?"":"html2canvas_"+Date.now()+
"_"+ ++r+"_"+Math.round(1E5*Math.random())}function h(b,c,d){return b+"?url="+encodeURIComponent(c)+(d.length?"&callback=html2canvas.proxy."+d:"")}function g(b){return function(c){var d=new DOMParser,e;try{e=d.parseFromString(c,"text/html")}catch(g){m("DOMParser not supported, falling back to createHTMLDocument");e=document.implementation.createHTMLDocument("");try{e.open(),e.write(c),e.close()}catch(f){m("createHTMLDocument write not supported, falling back to document.body.innerHTML"),e.body.innerHTML=
c}}c=e.querySelector("base");c&&c.href.host||(c=e.createElement("base"),c.href=b,e.head.insertBefore(c,e.head.firstChild));return e}}var l=b("./xhr");c=b("./utils");var m=b("./log"),p=b("./clone"),t=c.decode64,r=0;e.Proxy=d;e.ProxyURL=function(b,c,d){var e="crossOrigin"in new Image,g=n(e);b=h(c,b,g);return e?Promise.resolve(b):f(d,b,g).then(function(b){return"data:"+b.type+";base64,"+b.content})};e.loadUrlDocument=function(b,c,e,f,h,l){return(new d(b,c,window.document)).then(g(b)).then(function(b){return p(b,
e,f,h,l,0,0)})}},{"./clone":2,"./log":13,"./utils":26,"./xhr":28}],17:[function(b,c,e){var d=b("./proxy").ProxyURL;c.exports=function(b,c){var e=document.createElement("a");e.href=b;this.src=b=e.href;this.image=new Image;var g=this;this.promise=new Promise(function(e,h){g.image.crossOrigin="Anonymous";g.image.onload=e;g.image.onerror=h;(new d(b,c,document)).then(function(b){g.image.src=b})["catch"](h)})}},{"./proxy":16}],18:[function(b,c,e){function d(b,c,d){f.call(this,b,c);this.isPseudoElement=
!0;this.before=":before"===d}var f=b("./nodecontainer");d.prototype.cloneTo=function(b){d.prototype.cloneTo.call(this,b);b.isPseudoElement=!0;b.before=this.before};d.prototype=Object.create(f.prototype);d.prototype.appendToDOM=function(){this.before?this.parent.node.insertBefore(this.node,this.parent.node.firstChild):this.parent.node.appendChild(this.node);this.parent.node.className+=" "+this.getHideClass()};d.prototype.cleanDOM=function(){this.node.parentNode.removeChild(this.node);this.parent.node.className=
this.parent.node.className.replace(this.getHideClass(),"")};d.prototype.getHideClass=function(){return this["PSEUDO_HIDE_ELEMENT_CLASS_"+(this.before?"BEFORE":"AFTER")]};d.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before";d.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after";c.exports=d},{"./nodecontainer":14}],19:[function(b,c,e){function d(b,c,d,e,f){this.width=b;this.height=c;this.images=d;this.options=e;this.document=f}var f=b("./log");
d.prototype.renderImage=function(b,c,d,e){var f=b.cssInt("paddingLeft"),p=b.cssInt("paddingTop"),t=b.cssInt("paddingRight");b=b.cssInt("paddingBottom");d=d.borders;t=c.width-(d[1].width+d[3].width+f+t);b=c.height-(d[0].width+d[2].width+p+b);this.drawImage(e,0,0,e.image.width||t,e.image.height||b,c.left+f+d[3].width,c.top+p+d[0].width,t,b)};d.prototype.renderBackground=function(b,c,d){0<c.height&&0<c.width&&(this.renderBackgroundColor(b,c),this.renderBackgroundImage(b,c,d))};d.prototype.renderBackgroundColor=
function(b,c){var d=b.color("backgroundColor");d.isTransparent()||this.rectangle(c.left,c.top,c.width,c.height,d)};d.prototype.renderBorders=function(b){b.forEach(this.renderBorder,this)};d.prototype.renderBorder=function(b){b.color.isTransparent()||null===b.args||this.drawShape(b.args,b.color)};d.prototype.renderBackgroundImage=function(b,c,d){b.parseBackgroundImages().reverse().forEach(function(e,m,p){switch(e.method){case "url":var t=this.images.get(e.args[0]);t?this.renderBackgroundRepeating(b,
c,t,p.length-(m+1),d):f("Error loading background-image",e.args[0]);break;case "linear-gradient":case "gradient":(m=this.images.get(e.value))?this.renderBackgroundGradient(m,c,d):f("Error loading background-image",e.args[0]);break;case "none":break;default:f("Unknown background-image type",e.args[0])}},this)};d.prototype.renderBackgroundRepeating=function(b,c,d,e,f){var p=b.parseBackgroundSize(c,d.image,e),t=b.parseBackgroundPosition(c,d.image,e,p);switch(b.parseBackgroundRepeat(e)){case "repeat-x":case "repeat no-repeat":this.backgroundRepeatShape(d,
t,p,c,c.left+f[3],c.top+t.top+f[0],99999,p.height,f);break;case "repeat-y":case "no-repeat repeat":this.backgroundRepeatShape(d,t,p,c,c.left+t.left+f[3],c.top+f[0],p.width,99999,f);break;case "no-repeat":this.backgroundRepeatShape(d,t,p,c,c.left+t.left+f[3],c.top+t.top+f[0],p.width,p.height,f);break;default:this.renderBackgroundRepeat(d,t,p,{top:c.top,left:c.left},f[3],f[0])}};c.exports=d},{"./log":13}],20:[function(b,c,e){function d(b,c){n.apply(this,arguments);this.canvas=this.options.canvas||this.document.createElement("canvas");
this.options.canvas||(this.canvas.width=b,this.canvas.height=c);this.ctx=this.canvas.getContext("2d");this.taintCtx=this.document.createElement("canvas").getContext("2d");this.ctx.textBaseline="bottom";this.variables={};g("Initialized CanvasRenderer with size",b,"x",c)}function f(b){return 0<b.length}var n=b("../renderer"),h=b("../lineargradientcontainer"),g=b("../log");d.prototype=Object.create(n.prototype);d.prototype.setFillStyle=function(b){this.ctx.fillStyle="object"===typeof b&&b.isColor?b.toString():
b;return this.ctx};d.prototype.rectangle=function(b,c,d,e,g){this.setFillStyle(g).fillRect(b,c,d,e)};d.prototype.circle=function(b,c,d,e){this.setFillStyle(e);this.ctx.beginPath();this.ctx.arc(b+d/2,c+d/2,d/2,0,2*Math.PI,!0);this.ctx.closePath();this.ctx.fill()};d.prototype.circleStroke=function(b,c,d,e,g,f){this.circle(b,c,d,e);this.ctx.strokeStyle=f.toString();this.ctx.stroke()};d.prototype.drawShape=function(b,c){this.shape(b);this.setFillStyle(c).fill()};d.prototype.taints=function(b){if(null===
b.tainted){this.taintCtx.drawImage(b.image,0,0);try{this.taintCtx.getImageData(0,0,1,1),b.tainted=!1}catch(c){this.taintCtx=document.createElement("canvas").getContext("2d"),b.tainted=!0}}return b.tainted};d.prototype.drawImage=function(b,c,d,e,g,f,h,n,x){this.taints(b)&&!this.options.allowTaint||this.ctx.drawImage(b.image,c,d,e,g,f,h,n,x)};d.prototype.clip=function(b,c,d){this.ctx.save();b.filter(f).forEach(function(b){this.shape(b).clip()},this);c.call(d);this.ctx.restore()};d.prototype.shape=function(b){this.ctx.beginPath();
b.forEach(function(b,c){"rect"===b[0]?this.ctx.rect.apply(this.ctx,b.slice(1)):this.ctx[0===c?"moveTo":b[0]+"To"].apply(this.ctx,b.slice(1))},this);this.ctx.closePath();return this.ctx};d.prototype.font=function(b,c,d,e,g,f){this.setFillStyle(b).font=[c,d,e,g,f].join(" ").split(",")[0]};d.prototype.fontShadow=function(b,c,d,e){this.setVariable("shadowColor",b.toString()).setVariable("shadowOffsetY",c).setVariable("shadowOffsetX",d).setVariable("shadowBlur",e)};d.prototype.clearShadow=function(){this.setVariable("shadowColor",
"rgba(0,0,0,0)")};d.prototype.setOpacity=function(b){this.ctx.globalAlpha=b};d.prototype.setTransform=function(b){this.ctx.translate(b.origin[0],b.origin[1]);this.ctx.transform.apply(this.ctx,b.matrix);this.ctx.translate(-b.origin[0],-b.origin[1])};d.prototype.setVariable=function(b,c){this.variables[b]!==c&&(this.variables[b]=this.ctx[b]=c);return this};d.prototype.text=function(b,c,d){this.ctx.fillText(b,c,d)};d.prototype.backgroundRepeatShape=function(b,c,d,e,g,f,h,n,x){g=[["line",Math.round(g),
Math.round(f)],["line",Math.round(g+h),Math.round(f)],["line",Math.round(g+h),Math.round(n+f)],["line",Math.round(g),Math.round(n+f)]];this.clip([g],function(){this.renderBackgroundRepeat(b,c,d,e,x[3],x[0])},this)};d.prototype.renderBackgroundRepeat=function(b,c,d,e,g,f){g=Math.round(e.left+c.left+g);c=Math.round(e.top+c.top+f);this.setFillStyle(this.ctx.createPattern(this.resizeImage(b,d),"repeat"));this.ctx.translate(g,c);this.ctx.fill();this.ctx.translate(-g,-c)};d.prototype.renderBackgroundGradient=
function(b,c){if(b instanceof h){var d=this.ctx.createLinearGradient(c.left+c.width*b.x0,c.top+c.height*b.y0,c.left+c.width*b.x1,c.top+c.height*b.y1);b.colorStops.forEach(function(b){d.addColorStop(b.stop,b.color.toString())});this.rectangle(c.left,c.top,c.width,c.height,d)}};d.prototype.resizeImage=function(b,c){var d=b.image;if(d.width===c.width&&d.height===c.height)return d;var e=document.createElement("canvas");e.width=c.width;e.height=c.height;e.getContext("2d").drawImage(d,0,0,d.width,d.height,
0,0,c.width,c.height);return e};c.exports=d},{"../lineargradientcontainer":12,"../log":13,"../renderer":19}],21:[function(b,c,e){function d(b,c,d,e){f.call(this,d,e);this.ownStacking=b;this.contexts=[];this.children=[];this.opacity=(this.parent?this.parent.stack.opacity:1)*c}var f=b("./nodecontainer");d.prototype=Object.create(f.prototype);d.prototype.getParentStack=function(b){var c=this.parent?this.parent.stack:null;return c?c.ownStacking?c:c.getParentStack(b):b.stack};c.exports=d},{"./nodecontainer":14}],
22:[function(b,c,e){function d(b){this.rangeBounds=this.testRangeBounds(b);this.cors=this.testCORS();this.svg=this.testSVG()}d.prototype.testRangeBounds=function(b){var c,d,e=!1;b.createRange&&(c=b.createRange(),c.getBoundingClientRect&&(d=b.createElement("boundtest"),d.style.height="123px",d.style.display="block",b.body.appendChild(d),c.selectNode(d),c=c.getBoundingClientRect(),c=c.height,123===c&&(e=!0),b.body.removeChild(d)));return e};d.prototype.testCORS=function(){return"undefined"!==typeof(new Image).crossOrigin};
d.prototype.testSVG=function(){var b=new Image,c=document.createElement("canvas"),d=c.getContext("2d");b.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{d.drawImage(b,0,0),c.toDataURL()}catch(e){return!1}return!0};c.exports=d},{}],23:[function(b,c,e){function d(b){this.src=b;this.image=null;var c=this;this.promise=this.hasFabric().then(function(){return c.isInline(b)?Promise.resolve(c.inlineFormatting(b)):f(b)}).then(function(b){return new Promise(function(d){window.html2canvas.svg.fabric.loadSVGFromString(b,
c.createCanvas.call(c,d))})})}var f=b("./xhr"),n=b("./utils").decode64;d.prototype.hasFabric=function(){return window.html2canvas.svg&&window.html2canvas.svg.fabric?Promise.resolve():Promise.reject(Error("html2canvas.svg.js is not loaded, cannot render svg"))};d.prototype.inlineFormatting=function(b){return/^data:image\/svg\+xml;base64,/.test(b)?this.decode64(this.removeContentType(b)):this.removeContentType(b)};d.prototype.removeContentType=function(b){return b.replace(/^data:image\/svg\+xml(;base64)?,/,
"")};d.prototype.isInline=function(b){return/^data:image\/svg\+xml/i.test(b)};d.prototype.createCanvas=function(b){var c=this;return function(d,e){var f=new window.html2canvas.svg.fabric.StaticCanvas("c");c.image=f.lowerCanvasEl;f.setWidth(e.width).setHeight(e.height).add(window.html2canvas.svg.fabric.util.groupSVGElements(d,e)).renderAll();b(f.lowerCanvasEl)}};d.prototype.decode64=function(b){return"function"===typeof window.atob?window.atob(b):n(b)};c.exports=d},{"./utils":26,"./xhr":28}],24:[function(b,
c,e){function d(b,c){this.src=b;this.image=null;var d=this;this.promise=c?new Promise(function(c,e){d.image=new Image;d.image.onload=c;d.image.onerror=e;d.image.src="data:image/svg+xml,"+(new XMLSerializer).serializeToString(b);!0===d.image.complete&&c(d.image)}):this.hasFabric().then(function(){return new Promise(function(c){window.html2canvas.svg.fabric.parseSVGDocument(b,d.createCanvas.call(d,c))})})}b=b("./svgcontainer");d.prototype=Object.create(b.prototype);c.exports=d},{"./svgcontainer":23}],
25:[function(b,c,e){function d(b,c){n.call(this,b,c)}function f(b,c,d){if(0<b.length)return c+d.toUpperCase()}var n=b("./nodecontainer");d.prototype=Object.create(n.prototype);d.prototype.applyTextTransform=function(){this.node.data=this.transform(this.parent.css("textTransform"))};d.prototype.transform=function(b){var c=this.node.data;switch(b){case "lowercase":return c.toLowerCase();case "capitalize":return c.replace(/(^|\s|:|-|\(|\))([a-z])/g,f);case "uppercase":return c.toUpperCase();default:return c}};
c.exports=d},{"./nodecontainer":14}],26:[function(b,c,e){e.smallImage=function(){return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"};e.bind=function(b,c){return function(){return b.apply(c,arguments)}};e.decode64=function(b){var c=b.length,e,h,g,l,m,p,t="";for(e=0;e<c;e+=4)h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(b[e]),g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(b[e+1]),l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(b[e+
2]),m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(b[e+3]),h=h<<2|g>>4,g=(g&15)<<4|l>>2,p=(l&3)<<6|m,t=64===l?t+String.fromCharCode(h):64===m||-1===m?t+String.fromCharCode(h,g):t+String.fromCharCode(h,g,p);return t};e.getBounds=function(b){if(b.getBoundingClientRect){var c=b.getBoundingClientRect(),e=null==b.offsetWidth?c.width:b.offsetWidth;return{top:c.top,bottom:c.bottom||c.top+c.height,right:c.left+e,left:c.left,width:e,height:null==b.offsetHeight?c.height:b.offsetHeight}}return{}};
e.offsetBounds=function(b){var c=b.offsetParent?e.offsetBounds(b.offsetParent):{top:0,left:0};return{top:b.offsetTop+c.top,bottom:b.offsetTop+b.offsetHeight+c.top,right:b.offsetLeft+c.left+b.offsetWidth,left:b.offsetLeft+c.left,width:b.offsetWidth,height:b.offsetHeight}};e.parseBackgrounds=function(b){var c,e,h,g,l,m=[],p=0,t=0,r,q,w=function(){c&&('"'===e.substr(0,1)&&(e=e.substr(1,e.length-2)),e&&q.push(e),"-"===c.substr(0,1)&&0<(g=c.indexOf("-",1)+1)&&(h=c.substr(0,g),c=c.substr(g)),m.push({prefix:h,
method:c.toLowerCase(),value:l,args:q,image:null}));q=[];c=h=e=l=""};q=[];c=h=e=l="";b.split("").forEach(function(b){if(!(0===p&&-1<" \r\n\t".indexOf(b))){switch(b){case '"':r?r===b&&(r=null):r=b;break;case "(":if(r)break;else{if(0===p){p=1;l+=b;return}t++}break;case ")":if(r)break;else if(1===p){if(0===t){p=0;l+=b;w();return}t--}break;case ",":if(!r){if(0===p){w();return}if(1===p&&0===t&&!c.match(/^url$/i)){q.push(e);e="";l+=b;return}}}l+=b;0===p?c+=b:e+=b}});w();return m}},{}],27:[function(b,c,
e){function d(b){f.apply(this,arguments);this.type="linear"===b.args[0]?f.TYPES.LINEAR:f.TYPES.RADIAL}var f=b("./gradientcontainer");d.prototype=Object.create(f.prototype);c.exports=d},{"./gradientcontainer":9}],28:[function(b,c,e){c.exports=function(b){return new Promise(function(c,e){var h=new XMLHttpRequest;h.open("GET",b);h.onload=function(){200===h.status?c(h.responseText):e(Error(h.statusText))};h.onerror=function(){e(Error("Network Error"))};h.send()})}},{}]},{},[4])(4)});
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self);(b.html2canvas||(b.html2canvas={})).svg=a()}}(function(){return function b(c,e,d){function f(g,h){if(!e[g]){if(!c[g]){var m="function"==typeof require&&require;if(!h&&m)return m(g,!0);if(n)return n(g,!0);m=Error("Cannot find module '"+g+
"'");throw m.code="MODULE_NOT_FOUND",m;}m=e[g]={exports:{}};c[g][0].call(m.exports,function(b){var d=c[g][1][b];return f(d?d:b)},m,m.exports,b,c,e,d)}return e[g].exports}for(var n="function"==typeof require&&require,h=0;h<d.length;h++)f(d[h]);return f}({1:[function(b,c,e){},{}],2:[function(b,c,e){function d(b,c,e){if(!(this instanceof d))return new d(b,c,e);var g=typeof b,f;if("number"===g)f=0<b?b>>>0:0;else if("string"===g)f=d.byteLength(b,c);else if("object"===g&&null!==b)"Buffer"===b.type&&B(b.data)&&
(b=b.data),f=0<+b.length?Math.floor(+b.length):0;else throw new TypeError("must start with number, buffer, array or string");if(f>A)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+A.toString(16)+" bytes");var h;d.TYPED_ARRAY_SUPPORT?h=d._augment(new Uint8Array(f)):(h=this,h.length=f,h._isBuffer=!0);if(d.TYPED_ARRAY_SUPPORT&&"number"===typeof b.byteLength)h._set(b);else{var l=b;if(B(l)||d.isBuffer(l)||l&&"object"===typeof l&&"number"===typeof l.length)if(d.isBuffer(b))for(c=
0;c<f;c++)h[c]=b.readUInt8(c);else for(c=0;c<f;c++)h[c]=(b[c]%256+256)%256;else if("string"===g)h.write(b,0,c);else if("number"===g&&!d.TYPED_ARRAY_SUPPORT&&!e)for(c=0;c<f;c++)h[c]=0}0<f&&f<=d.poolSize&&(h.parent=C);return h}function f(b,c,e){if(!(this instanceof f))return new f(b,c,e);b=new d(b,c,e);delete b.parent;return b}function n(b,c,d,e){for(var g=[],f=0;f<c.length;f++)g.push(c.charCodeAt(f)&255);return u(g,b,d,e)}function h(b,c,d){if(0!==b%1||0>b)throw new RangeError("offset is not uint");
if(b+c>d)throw new RangeError("Trying to access beyond buffer length");}function g(b,c,e,g,f,h){if(!d.isBuffer(b))throw new TypeError("buffer must be a Buffer instance");if(c>f||c<h)throw new RangeError("value is out of bounds");if(e+g>b.length)throw new RangeError("index out of range");}function l(b,c,d,e){0>c&&(c=65535+c+1);for(var g=0,f=Math.min(b.length-d,2);g<f;g++)b[d+g]=(c&255<<8*(e?g:1-g))>>>8*(e?g:1-g)}function m(b,c,d,e){0>c&&(c=4294967295+c+1);for(var g=0,f=Math.min(b.length-d,4);g<f;g++)b[d+
g]=c>>>8*(e?g:3-g)&255}function p(b,c,d,e,g,f){if(c>g||c<f)throw new RangeError("value is out of bounds");if(d+e>b.length)throw new RangeError("index out of range");if(0>d)throw new RangeError("index out of range");}function t(b,c,d,e,g){g||p(b,c,d,4,3.4028234663852886E38,-3.4028234663852886E38);y.write(b,c,d,e,23,4);return d+4}function r(b,c,d,e,g){g||p(b,c,d,8,1.7976931348623157E308,-1.7976931348623157E308);y.write(b,c,d,e,52,8);return d+8}function q(b){b=b.trim?b.trim():b.replace(/^\s+|\s+$/g,
"");b=b.replace(H,"");if(2>b.length)return"";for(;0!==b.length%4;)b+="=";return b}function w(b,c){var d,e=b.length,g=null;c=c||Infinity;for(var f=[],h=0;h<e;h++){d=b.charCodeAt(h);if(55295<d&&57344>d)if(g)if(56320>d){-1<(c-=3)&&f.push(239,191,189);g=d;continue}else d=g-55296<<10|d-56320|65536,g=null;else{56319<d?-1<(c-=3)&&f.push(239,191,189):h+1===e?-1<(c-=3)&&f.push(239,191,189):g=d;continue}else g&&(-1<(c-=3)&&f.push(239,191,189),g=null);if(128>d){if(0>(c-=1))break;f.push(d)}else if(2048>d){if(0>
(c-=2))break;f.push(d>>6|192,d&63|128)}else if(65536>d){if(0>(c-=3))break;f.push(d>>12|224,d>>6&63|128,d&63|128)}else if(2097152>d){if(0>(c-=4))break;f.push(d>>18|240,d>>12&63|128,d>>6&63|128,d&63|128)}else throw Error("Invalid code point");}return f}function u(b,c,d,e,g){g&&(e-=e%g);for(g=0;g<e&&!(g+d>=c.length||g>=b.length);g++)c[g+d]=b[g];return g}function x(b){try{return decodeURIComponent(b)}catch(c){return String.fromCharCode(65533)}}var z=b("base64-js"),y=b("ieee754"),B=b("is-array");e.Buffer=
d;e.SlowBuffer=f;e.INSPECT_MAX_BYTES=50;d.poolSize=8192;var A=1073741823,C={};d.TYPED_ARRAY_SUPPORT=function(){try{var b=new ArrayBuffer(0),c=new Uint8Array(b);c.foo=function(){return 42};return 42===c.foo()&&"function"===typeof c.subarray&&0===(new Uint8Array(1)).subarray(1,1).byteLength}catch(d){return!1}}();d.isBuffer=function(b){return!(null==b||!b._isBuffer)};d.compare=function(b,c){if(!d.isBuffer(b)||!d.isBuffer(c))throw new TypeError("Arguments must be Buffers");for(var e=b.length,g=c.length,
f=0,h=Math.min(e,g);f<h&&b[f]===c[f];f++);f!==h&&(e=b[f],g=c[f]);return e<g?-1:g<e?1:0};d.isEncoding=function(b){switch(String(b).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "raw":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};d.concat=function(b,c){if(!B(b))throw new TypeError("Usage: Buffer.concat(list[, length])");if(0===b.length)return new d(0);if(1===b.length)return b[0];var e;if(void 0===c)for(e=c=0;e<
b.length;e++)c+=b[e].length;var g=new d(c),f=0;for(e=0;e<b.length;e++){var h=b[e];h.copy(g,f);f+=h.length}return g};d.byteLength=function(b,c){var d;b+="";switch(c||"utf8"){case "ascii":case "binary":case "raw":d=b.length;break;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":d=2*b.length;break;case "hex":d=b.length>>>1;break;case "utf8":case "utf-8":d=w(b).length;break;case "base64":d=z.toByteArray(q(b)).length;break;default:d=b.length}return d};d.prototype.length=void 0;d.prototype.parent=
void 0;d.prototype.toString=function(b,c,d){var e=!1;c>>>=0;d=void 0===d||Infinity===d?this.length:d>>>0;b||(b="utf8");0>c&&(c=0);d>this.length&&(d=this.length);if(d<=c)return"";for(;;)switch(b){case "hex":b=c;c=this.length;if(!b||0>b)b=0;if(!d||0>d||d>c)d=c;for(c="";b<d;b++)e=this[b],e=16>e?"0"+e.toString(16):e.toString(16),c+=e;return c;case "utf8":case "utf-8":b=c;e=c="";for(d=Math.min(this.length,d);b<d;b++)127>=this[b]?(c+=x(e)+String.fromCharCode(this[b]),e=""):e+="%"+this[b].toString(16);return c+
x(e);case "ascii":b=c;c="";for(d=Math.min(this.length,d);b<d;b++)c+=String.fromCharCode(this[b]&127);return c;case "binary":b=c;c="";for(d=Math.min(this.length,d);b<d;b++)c+=String.fromCharCode(this[b]);return c;case "base64":return b=c,d=0===b&&d===this.length?z.fromByteArray(this):z.fromByteArray(this.slice(b,d)),d;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":d=this.slice(c,d);b="";for(c=0;c<d.length;c+=2)b+=String.fromCharCode(d[c]+256*d[c+1]);return b;default:if(e)throw new TypeError("Unknown encoding: "+
b);b=(b+"").toLowerCase();e=!0}};d.prototype.equals=function(b){if(!d.isBuffer(b))throw new TypeError("Argument must be a Buffer");return 0===d.compare(this,b)};d.prototype.inspect=function(){var b="",c=e.INSPECT_MAX_BYTES;0<this.length&&(b=this.toString("hex",0,c).match(/.{2}/g).join(" "),this.length>c&&(b+=" ... "));return"<Buffer "+b+">"};d.prototype.compare=function(b){if(!d.isBuffer(b))throw new TypeError("Argument must be a Buffer");return d.compare(this,b)};d.prototype.get=function(b){console.log(".get() is deprecated. Access using array indexes instead.");
return this.readUInt8(b)};d.prototype.set=function(b,c){console.log(".set() is deprecated. Access using array indexes instead.");return this.writeUInt8(b,c)};d.prototype.write=function(b,c,d,e){if(isFinite(c))isFinite(d)||(e=d,d=void 0);else{var g=e;e=c;c=d;d=g}c=Number(c)||0;if(0>d||0>c||c>this.length)throw new RangeError("attempt to write outside buffer bounds");g=this.length-c;d?(d=Number(d),d>g&&(d=g)):d=g;e=String(e||"utf8").toLowerCase();switch(e){case "hex":e=d;d=Number(c)||0;c=this.length-
d;e?(e=Number(e),e>c&&(e=c)):e=c;c=b.length;if(0!==c%2)throw Error("Invalid hex string");e>c/2&&(e=c/2);for(c=0;c<e;c++){g=parseInt(b.substr(2*c,2),16);if(isNaN(g))throw Error("Invalid hex string");this[d+c]=g}b=c;break;case "utf8":case "utf-8":e=c;b=u(w(b,this.length-e),this,e,d);break;case "ascii":b=n(this,b,c,d);break;case "binary":b=n(this,b,c,d);break;case "base64":e=c;b=u(z.toByteArray(q(b)),this,e,d);break;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":e=c;c=this.length-e;for(var f,
h=[],l=0;l<b.length&&!(0>(c-=2));l++)f=b.charCodeAt(l),g=f>>8,f%=256,h.push(f),h.push(g);b=u(h,this,e,d,2);break;default:throw new TypeError("Unknown encoding: "+e);}return b};d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};d.prototype.slice=function(b,c){var e=this.length;b=~~b;c=void 0===c?e:~~c;0>b?(b+=e,0>b&&(b=0)):b>e&&(b=e);0>c?(c+=e,0>c&&(c=0)):c>e&&(c=e);c<b&&(c=b);if(d.TYPED_ARRAY_SUPPORT)e=d._augment(this.subarray(b,c));else for(var g=
c-b,e=new d(g,void 0,!0),f=0;f<g;f++)e[f]=this[f+b];e.length&&(e.parent=this.parent||this);return e};d.prototype.readUIntLE=function(b,c,d){b>>>=0;c>>>=0;d||h(b,c,this.length);d=this[b];for(var e=1,g=0;++g<c&&(e*=256);)d+=this[b+g]*e;return d};d.prototype.readUIntBE=function(b,c,d){b>>>=0;c>>>=0;d||h(b,c,this.length);d=this[b+--c];for(var e=1;0<c&&(e*=256);)d+=this[b+--c]*e;return d};d.prototype.readUInt8=function(b,c){c||h(b,1,this.length);return this[b]};d.prototype.readUInt16LE=function(b,c){c||
h(b,2,this.length);return this[b]|this[b+1]<<8};d.prototype.readUInt16BE=function(b,c){c||h(b,2,this.length);return this[b]<<8|this[b+1]};d.prototype.readUInt32LE=function(b,c){c||h(b,4,this.length);return(this[b]|this[b+1]<<8|this[b+2]<<16)+16777216*this[b+3]};d.prototype.readUInt32BE=function(b,c){c||h(b,4,this.length);return 16777216*this[b]+(this[b+1]<<16|this[b+2]<<8|this[b+3])};d.prototype.readIntLE=function(b,c,d){b>>>=0;c>>>=0;d||h(b,c,this.length);d=this[b];for(var e=1,g=0;++g<c&&(e*=256);)d+=
this[b+g]*e;d>=128*e&&(d-=Math.pow(2,8*c));return d};d.prototype.readIntBE=function(b,c,d){b>>>=0;c>>>=0;d||h(b,c,this.length);d=c;for(var e=1,g=this[b+--d];0<d&&(e*=256);)g+=this[b+--d]*e;g>=128*e&&(g-=Math.pow(2,8*c));return g};d.prototype.readInt8=function(b,c){c||h(b,1,this.length);return this[b]&128?-1*(255-this[b]+1):this[b]};d.prototype.readInt16LE=function(b,c){c||h(b,2,this.length);var d=this[b]|this[b+1]<<8;return d&32768?d|4294901760:d};d.prototype.readInt16BE=function(b,c){c||h(b,2,this.length);
var d=this[b+1]|this[b]<<8;return d&32768?d|4294901760:d};d.prototype.readInt32LE=function(b,c){c||h(b,4,this.length);return this[b]|this[b+1]<<8|this[b+2]<<16|this[b+3]<<24};d.prototype.readInt32BE=function(b,c){c||h(b,4,this.length);return this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]};d.prototype.readFloatLE=function(b,c){c||h(b,4,this.length);return y.read(this,b,!0,23,4)};d.prototype.readFloatBE=function(b,c){c||h(b,4,this.length);return y.read(this,b,!1,23,4)};d.prototype.readDoubleLE=function(b,
c){c||h(b,8,this.length);return y.read(this,b,!0,52,8)};d.prototype.readDoubleBE=function(b,c){c||h(b,8,this.length);return y.read(this,b,!1,52,8)};d.prototype.writeUIntLE=function(b,c,d,e){b=+b;c>>>=0;d>>>=0;e||g(this,b,c,d,Math.pow(2,8*d),0);e=1;var f=0;for(this[c]=b&255;++f<d&&(e*=256);)this[c+f]=b/e>>>0&255;return c+d};d.prototype.writeUIntBE=function(b,c,d,e){b=+b;c>>>=0;d>>>=0;e||g(this,b,c,d,Math.pow(2,8*d),0);e=d-1;var f=1;for(this[c+e]=b&255;0<=--e&&(f*=256);)this[c+e]=b/f>>>0&255;return c+
d};d.prototype.writeUInt8=function(b,c,e){b=+b;c>>>=0;e||g(this,b,c,1,255,0);d.TYPED_ARRAY_SUPPORT||(b=Math.floor(b));this[c]=b;return c+1};d.prototype.writeUInt16LE=function(b,c,e){b=+b;c>>>=0;e||g(this,b,c,2,65535,0);d.TYPED_ARRAY_SUPPORT?(this[c]=b,this[c+1]=b>>>8):l(this,b,c,!0);return c+2};d.prototype.writeUInt16BE=function(b,c,e){b=+b;c>>>=0;e||g(this,b,c,2,65535,0);d.TYPED_ARRAY_SUPPORT?(this[c]=b>>>8,this[c+1]=b):l(this,b,c,!1);return c+2};d.prototype.writeUInt32LE=function(b,c,e){b=+b;c>>>=
0;e||g(this,b,c,4,4294967295,0);d.TYPED_ARRAY_SUPPORT?(this[c+3]=b>>>24,this[c+2]=b>>>16,this[c+1]=b>>>8,this[c]=b):m(this,b,c,!0);return c+4};d.prototype.writeUInt32BE=function(b,c,e){b=+b;c>>>=0;e||g(this,b,c,4,4294967295,0);d.TYPED_ARRAY_SUPPORT?(this[c]=b>>>24,this[c+1]=b>>>16,this[c+2]=b>>>8,this[c+3]=b):m(this,b,c,!1);return c+4};d.prototype.writeIntLE=function(b,c,d,e){b=+b;c>>>=0;e||g(this,b,c,d,Math.pow(2,8*d-1)-1,-Math.pow(2,8*d-1));e=0;var f=1,h=0>b?1:0;for(this[c]=b&255;++e<d&&(f*=256);)this[c+
e]=(b/f>>0)-h&255;return c+d};d.prototype.writeIntBE=function(b,c,d,e){b=+b;c>>>=0;e||g(this,b,c,d,Math.pow(2,8*d-1)-1,-Math.pow(2,8*d-1));e=d-1;var f=1,h=0>b?1:0;for(this[c+e]=b&255;0<=--e&&(f*=256);)this[c+e]=(b/f>>0)-h&255;return c+d};d.prototype.writeInt8=function(b,c,e){b=+b;c>>>=0;e||g(this,b,c,1,127,-128);d.TYPED_ARRAY_SUPPORT||(b=Math.floor(b));0>b&&(b=255+b+1);this[c]=b;return c+1};d.prototype.writeInt16LE=function(b,c,e){b=+b;c>>>=0;e||g(this,b,c,2,32767,-32768);d.TYPED_ARRAY_SUPPORT?(this[c]=
b,this[c+1]=b>>>8):l(this,b,c,!0);return c+2};d.prototype.writeInt16BE=function(b,c,e){b=+b;c>>>=0;e||g(this,b,c,2,32767,-32768);d.TYPED_ARRAY_SUPPORT?(this[c]=b>>>8,this[c+1]=b):l(this,b,c,!1);return c+2};d.prototype.writeInt32LE=function(b,c,e){b=+b;c>>>=0;e||g(this,b,c,4,2147483647,-2147483648);d.TYPED_ARRAY_SUPPORT?(this[c]=b,this[c+1]=b>>>8,this[c+2]=b>>>16,this[c+3]=b>>>24):m(this,b,c,!0);return c+4};d.prototype.writeInt32BE=function(b,c,e){b=+b;c>>>=0;e||g(this,b,c,4,2147483647,-2147483648);
0>b&&(b=4294967295+b+1);d.TYPED_ARRAY_SUPPORT?(this[c]=b>>>24,this[c+1]=b>>>16,this[c+2]=b>>>8,this[c+3]=b):m(this,b,c,!1);return c+4};d.prototype.writeFloatLE=function(b,c,d){return t(this,b,c,!0,d)};d.prototype.writeFloatBE=function(b,c,d){return t(this,b,c,!1,d)};d.prototype.writeDoubleLE=function(b,c,d){return r(this,b,c,!0,d)};d.prototype.writeDoubleBE=function(b,c,d){return r(this,b,c,!1,d)};d.prototype.copy=function(b,c,e,g){e||(e=0);g||0===g||(g=this.length);c>=b.length&&(c=b.length);c||(c=
0);0<g&&g<e&&(g=e);if(g===e||0===b.length||0===this.length)return 0;if(0>c)throw new RangeError("targetStart out of bounds");if(0>e||e>=this.length)throw new RangeError("sourceStart out of bounds");if(0>g)throw new RangeError("sourceEnd out of bounds");g>this.length&&(g=this.length);b.length-c<g-e&&(g=b.length-c+e);g-=e;if(1E3>g||!d.TYPED_ARRAY_SUPPORT)for(var f=0;f<g;f++)b[f+c]=this[f+e];else b._set(this.subarray(e,e+g),c);return g};d.prototype.fill=function(b,c,d){b||(b=0);c||(c=0);d||(d=this.length);
if(d<c)throw new RangeError("end < start");if(d!==c&&0!==this.length){if(0>c||c>=this.length)throw new RangeError("start out of bounds");if(0>d||d>this.length)throw new RangeError("end out of bounds");if("number"===typeof b)for(;c<d;c++)this[c]=b;else{b=w(b.toString());for(var e=b.length;c<d;c++)this[c]=b[c%e]}return this}};d.prototype.toArrayBuffer=function(){if("undefined"!==typeof Uint8Array){if(d.TYPED_ARRAY_SUPPORT)return(new d(this)).buffer;for(var b=new Uint8Array(this.length),c=0,e=b.length;c<
e;c+=1)b[c]=this[c];return b.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser");};var D=d.prototype;d._augment=function(b){b.constructor=d;b._isBuffer=!0;b._get=b.get;b._set=b.set;b.get=D.get;b.set=D.set;b.write=D.write;b.toString=D.toString;b.toLocaleString=D.toString;b.toJSON=D.toJSON;b.equals=D.equals;b.compare=D.compare;b.copy=D.copy;b.slice=D.slice;b.readUIntLE=D.readUIntLE;b.readUIntBE=D.readUIntBE;b.readUInt8=D.readUInt8;b.readUInt16LE=D.readUInt16LE;b.readUInt16BE=
D.readUInt16BE;b.readUInt32LE=D.readUInt32LE;b.readUInt32BE=D.readUInt32BE;b.readIntLE=D.readIntLE;b.readIntBE=D.readIntBE;b.readInt8=D.readInt8;b.readInt16LE=D.readInt16LE;b.readInt16BE=D.readInt16BE;b.readInt32LE=D.readInt32LE;b.readInt32BE=D.readInt32BE;b.readFloatLE=D.readFloatLE;b.readFloatBE=D.readFloatBE;b.readDoubleLE=D.readDoubleLE;b.readDoubleBE=D.readDoubleBE;b.writeUInt8=D.writeUInt8;b.writeUIntLE=D.writeUIntLE;b.writeUIntBE=D.writeUIntBE;b.writeUInt16LE=D.writeUInt16LE;b.writeUInt16BE=
D.writeUInt16BE;b.writeUInt32LE=D.writeUInt32LE;b.writeUInt32BE=D.writeUInt32BE;b.writeIntLE=D.writeIntLE;b.writeIntBE=D.writeIntBE;b.writeInt8=D.writeInt8;b.writeInt16LE=D.writeInt16LE;b.writeInt16BE=D.writeInt16BE;b.writeInt32LE=D.writeInt32LE;b.writeInt32BE=D.writeInt32BE;b.writeFloatLE=D.writeFloatLE;b.writeFloatBE=D.writeFloatBE;b.writeDoubleLE=D.writeDoubleLE;b.writeDoubleBE=D.writeDoubleBE;b.fill=D.fill;b.inspect=D.inspect;b.toArrayBuffer=D.toArrayBuffer;return b};var H=/[^+\/0-9A-z\-]/g},
{"base64-js":3,ieee754:4,"is-array":5}],3:[function(b,c,e){(function(b){function c(b){b=b.charCodeAt(0);if(43===b||45===b)return 62;if(47===b||95===b)return 63;if(48>b)return-1;if(58>b)return b-48+52;if(91>b)return b-65;if(123>b)return b-97+26}var e="undefined"!==typeof Uint8Array?Uint8Array:Array;b.toByteArray=function(b){function d(b){r[q++]=b}var l,m,p,t,r;if(0<b.length%4)throw Error("Invalid string. Length must be a multiple of 4");l=b.length;t="="===b.charAt(l-2)?2:"="===b.charAt(l-1)?1:0;r=
new e(3*b.length/4-t);m=0<t?b.length-4:b.length;var q=0;for(l=0;l<m;l+=4)p=c(b.charAt(l))<<18|c(b.charAt(l+1))<<12|c(b.charAt(l+2))<<6|c(b.charAt(l+3)),d((p&16711680)>>16),d((p&65280)>>8),d(p&255);2===t?(p=c(b.charAt(l))<<2|c(b.charAt(l+1))>>4,d(p&255)):1===t&&(p=c(b.charAt(l))<<10|c(b.charAt(l+1))<<4|c(b.charAt(l+2))>>2,d(p>>8&255),d(p&255));return r};b.fromByteArray=function(b){var c,d=b.length%3,e="",f,n;c=0;for(n=b.length-d;c<n;c+=3)f=(b[c]<<16)+(b[c+1]<<8)+b[c+2],f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(f>>
18&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(f>>12&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(f>>6&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(f&63),e+=f;switch(d){case 1:f=b[b.length-1];e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(f>>2);e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(f<<4&63);e+="==";break;case 2:f=(b[b.length-2]<<8)+
b[b.length-1],e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(f>>10),e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(f>>4&63),e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(f<<2&63),e+="="}return e}})("undefined"===typeof e?this.base64js={}:e)},{}],4:[function(b,c,e){e.read=function(b,c,e,h,g){var l;l=8*g-h-1;var m=(1<<l)-1,p=m>>1,t=-7;g=e?g-1:0;var r=e?-1:1,q=b[c+g];g+=r;e=q&(1<<-t)-1;q>>=-t;for(t+=l;0<t;e=256*
e+b[c+g],g+=r,t-=8);l=e&(1<<-t)-1;e>>=-t;for(t+=h;0<t;l=256*l+b[c+g],g+=r,t-=8);if(0===e)e=1-p;else{if(e===m)return l?NaN:Infinity*(q?-1:1);l+=Math.pow(2,h);e-=p}return(q?-1:1)*l*Math.pow(2,e-h)};e.write=function(b,c,e,h,g,l){var m,p=8*l-g-1,t=(1<<p)-1,r=t>>1,q=23===g?Math.pow(2,-24)-Math.pow(2,-77):0;l=h?0:l-1;var w=h?1:-1,u=0>c||0===c&&0>1/c?1:0;c=Math.abs(c);isNaN(c)||Infinity===c?(c=isNaN(c)?1:0,h=t):(h=Math.floor(Math.log(c)/Math.LN2),1>c*(m=Math.pow(2,-h))&&(h--,m*=2),c=1<=h+r?c+q/m:c+q*Math.pow(2,
1-r),2<=c*m&&(h++,m/=2),h+r>=t?(c=0,h=t):1<=h+r?(c=(c*m-1)*Math.pow(2,g),h+=r):(c=c*Math.pow(2,r-1)*Math.pow(2,g),h=0));for(;8<=g;b[e+l]=c&255,l+=w,c/=256,g-=8);h=h<<g|c;for(p+=g;0<p;b[e+l]=h&255,l+=w,h/=256,p-=8);b[e+l-w]|=128*u}},{}],5:[function(b,c,e){var d=Object.prototype.toString;c.exports=Array.isArray||function(b){return!!b&&"[object Array]"==d.call(b)}},{}],6:[function(b,c,e){(function(c){var f=f||{version:"1.4.11"};"undefined"!==typeof e&&(e.fabric=f);"undefined"!==typeof document&&"undefined"!==
typeof window?(f.document=document,f.window=window):(f.document=b("jsdom").jsdom("<!DOCTYPE html><html><head></head><body></body></html>"),f.window=f.document.createWindow());f.isTouchSupported="ontouchstart"in f.document.documentElement;f.isLikelyNode="undefined"!==typeof c&&"undefined"===typeof window;f.SHARED_ATTRIBUTES="display transform fill fill-opacity fill-rule opacity stroke stroke-dasharray stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width".split(" ");f.DPI=96;
var n=function(){function b(c){var d=this.face=c.face;this.glyphs=c.glyphs;this.w=c.w;this.baseSize=parseInt(d["units-per-em"],10);this.family=d["font-family"].toLowerCase();this.weight=d["font-weight"];this.style=d["font-style"]||"normal";this.viewBox=function(){var b=d.bbox.split(/\s+/),b={minX:parseInt(b[0],10),minY:parseInt(b[1],10),maxX:parseInt(b[2],10),maxY:parseInt(b[3],10)};b.width=b.maxX-b.minX;b.height=b.maxY-b.minY;b.toString=function(){return[this.minX,this.minY,this.width,this.height].join(" ")};
return b}();this.ascent=-parseInt(d.ascent,10);this.descent=-parseInt(d.descent,10);this.height=-this.ascent+this.descent}function c(){var b={},d={oblique:"italic",italic:"oblique"};this.add=function(c){(b[c.style]||(b[c.style]={}))[c.weight]=c};this.get=function(c,e){var g=b[c]||b[d[c]]||b.normal||b.italic||b.oblique;if(!g)return null;e={normal:400,bold:700}[e]||parseInt(e,10);if(g[e])return g[e];var f={1:1,99:0}[e%100],h=[],l,m;void 0===f&&(f=400<e);500==e&&(e=400);for(var p in g){p=parseInt(p,
10);if(!l||p<l)l=p;if(!m||p>m)m=p;h.push(p)}e<l&&(e=l);e>m&&(e=m);h.sort(function(b,c){return(f?b>e&&c>e?b<c:b>c:b<e&&c<e?b>c:b<c)?-1:1});return g[h[0]]}}function d(b){var c={},e={};this.get=function(d){return void 0!=c[d]?c[d]:b[d]};this.getSize=function(b,c){return e[b]||(e[b]=new z.Size(this.get(b),c))};this.extend=function(b){for(var d in b)c[d]=b[d];return this}}function e(b,c,d){b.addEventListener?b.addEventListener(c,d,!1):b.attachEvent&&b.attachEvent("on"+c,function(){return d.call(b,f.window.event)})}
function p(b){var c={};return function(d){c.hasOwnProperty(d)||(c[d]=b.apply(null,arguments));return c[d]}}function n(b){return f.document.getElementsByTagName(b)}function r(){for(var b={},c,d=0,e=arguments.length;d<e;++d)for(c in arguments[d])b[c]=arguments[d][c];return b}function q(b,c,d,e,g,h){var l=e.separate;if("none"==l)return D[e.engine].apply(null,arguments);var m=f.document.createDocumentFragment(),p=c.split(L[l]),r="words"==l;r&&y&&(/^\s/.test(c)&&p.unshift(""),/\s$/.test(c)&&p.push(""));
for(var q=0,n=p.length;q<n;++q)(l=D[e.engine](b,r?z.textAlign(p[q],d,q,n):p[q],d,e,g,h,q<n-1))&&m.appendChild(l);return m}function w(b,c){var d,e,g,f;g=B.get(b);g.options||(c.hover&&c.hoverables[b.nodeName.toLowerCase()]&&A.attach(b),g.options=c);for(var h=b.firstChild;h;h=g){g=h.nextSibling;f=!1;if(1==h.nodeType){if(!h.firstChild)continue;if(/cufon/.test(h.className))f=!0;else{arguments.callee(h,c);continue}}e||(e=z.getStyle(b).extend(c));if(!d)a:{(d=e)||(d=z.getStyle(b));for(var l=z.quotedList(d.get("fontFamily").toLowerCase()),
m=void 0,p=0,r=l.length;p<r;++p)if(m=l[p],H[m]){d=H[m].get(d.get("fontStyle"),d.get("fontWeight"));break a}d=null}if(d)if(f)D[c.engine](d,null,e,c,h,b);else f=h.data,"undefined"!=typeof G_vmlCanvasManager&&(f=f.replace(/\r/g,"\n")),""!==f&&((f=q(d,f,e,c,h,b))?h.parentNode.replaceChild(f,h):h.parentNode.removeChild(h))}}var u=function(){return u.replace.apply(null,arguments)},x=u.DOM={ready:function(){var b=!1,c={loaded:1,complete:1},d=[],g=function(){if(!b){b=!0;for(var c;c=d.shift();c());}};f.document.addEventListener&&
(f.document.addEventListener("DOMContentLoaded",g,!1),f.window.addEventListener("pageshow",g,!1));!f.window.opera&&f.document.readyState&&function(){c[f.document.readyState]?g():setTimeout(arguments.callee,10)}();f.document.readyState&&f.document.createStyleSheet&&function(){try{f.document.body.doScroll("left"),g()}catch(b){setTimeout(arguments.callee,1)}}();e(f.window,"load",g);return function(c){arguments.length?b?c():d.push(c):g()}}()},z=u.CSS={Size:function(b,c){this.value=parseFloat(b);this.unit=
String(b).match(/[a-z%]*$/)[0]||"px";this.convert=function(b){return b/c*this.value};this.convertFrom=function(b){return b/this.value*c};this.toString=function(){return this.value+this.unit}},getStyle:function(b){return new d(b.style)},quotedList:p(function(b){for(var c=[],d=/\s*((["'])([\s\S]*?[^\\])\2|[^,]+)\s*/g,e;e=d.exec(b);)c.push(e[3]||e[1]);return c}),ready:function(){var b=!1,c=[],d=Object.prototype.propertyIsEnumerable?n("style"):{length:0},e=n("link");x.ready(function(){for(var g=0,h,l=
0,m=e.length;h=e[l],l<m;++l)h.disabled||"stylesheet"!=h.rel.toLowerCase()||++g;if(f.document.styleSheets.length>=d.length+g)for(b=!0;g=c.shift();g());else setTimeout(arguments.callee,10)});return function(d){b?d():c.push(d)}}(),supports:function(b,c){var d=f.document.createElement("span").style;if(void 0===d[b])return!1;d[b]=c;return d[b]===c},textAlign:function(b,c,d,e){"right"==c.get("textAlign")?0<d&&(b=" "+b):d<e-1&&(b+=" ");return b},textDecoration:function(b,c){c||(c=this.getStyle(b));for(var d=
{underline:null,overline:null,"line-through":null},e=b;e.parentNode&&1==e.parentNode.nodeType;){var g=!0,f;for(f in d)d[f]||(-1!=c.get("textDecoration").indexOf(f)&&(d[f]=c.get("color")),g=!1);if(g)break;c=this.getStyle(e=e.parentNode)}return d},textShadow:p(function(b){if("none"==b)return null;for(var c=[],d={},e,g=0,f=/(#[a-f0-9]+|[a-z]+\(.*?\)|[a-z]+)|(-?[\d.]+[a-z%]*)|,/ig;e=f.exec(b);)","==e[0]?(c.push(d),d={},g=0):e[1]?d.color=e[1]:d[["offX","offY","blur"][g++]]=e[2];c.push(d);return c}),color:p(function(b){var c=
{};c.color=b.replace(/^rgba\((.*?),\s*([\d.]+)\)/,function(b,d,e){c.opacity=parseFloat(e);return"rgb("+d+")"});return c}),textTransform:function(b,c){return b[{uppercase:"toUpperCase",lowercase:"toLowerCase"}[c.get("textTransform")]||"toString"]()}},y=0==" ".split(/\s+/).length,B=new function(){var b={},c=0;this.get=function(d){d=d.cufid||(d.cufid=++c);return b[d]||(b[d]={})}},A=new function(){function b(c){c=c.relatedTarget;var e;(e=!c)||(e=this.contains?this.contains(c):this.compareDocumentPosition(c)&
16);e||d(this)}function c(b){d(this)}function d(b){setTimeout(function(){u.replace(b,B.get(b).options,!0)},10)}this.attach=function(d){void 0===d.onmouseenter?(e(d,"mouseover",b),e(d,"mouseout",b)):(e(d,"mouseenter",c),e(d,"mouseleave",c))}},C=[],D={},H={},G={engine:null,hover:!1,hoverables:{a:!0},printable:!0,selector:f.window.Sizzle||f.window.jQuery&&function(b){return jQuery(b)}||f.window.dojo&&dojo.query||f.window.$$&&function(b){return $$(b)}||f.window.$&&function(b){return $(b)}||f.document.querySelectorAll&&
function(b){return f.document.querySelectorAll(b)}||n,separate:"words",textShadow:"none"},L={words:/\s+/,characters:""};u.now=function(){x.ready();return u};u.refresh=function(){for(var b=C.splice(0,C.length),c=0,d=b.length;c<d;++c)u.replace.apply(null,b[c]);return u};u.registerEngine=function(b,c){if(!c)return u;D[b]=c;return u.set("engine",b)};u.registerFont=function(d){d=new b(d);var e=d.family;H[e]||(H[e]=new c);H[e].add(d);return u.set("fontFamily",'"'+e+'"')};u.replace=function(b,c,d){c=r(G,
c);if(!c.engine)return u;"string"==typeof c.textShadow&&c.textShadow&&(c.textShadow=z.textShadow(c.textShadow));d||C.push(arguments);if(b.nodeType||"string"==typeof b)b=[b];z.ready(function(){for(var d=0,e=b.length;d<e;++d){var g=b[d];"string"==typeof g?u.replace(c.selector(g),c,!0):w(g,c)}});return u};u.replaceElement=function(b,c){c=r(G,c);"string"==typeof c.textShadow&&c.textShadow&&(c.textShadow=z.textShadow(c.textShadow));return w(b,c)};u.engines=D;u.fonts=H;u.getOptions=function(){return r(G)};
u.set=function(b,c){G[b]=c;return u};return u}();n.registerEngine("canvas",function(){var b=n.CSS.supports("display","inline-block"),c=!b&&("BackCompat"==f.document.compatMode||/frameset|transitional/i.test(f.document.doctype.publicId)),d=f.document.createElement("style");d.type="text/css";c=f.document.createTextNode(".cufon-canvas{text-indent:0}@media screen,projection{.cufon-canvas{display:inline;display:inline-block;position:relative;vertical-align:middle"+(c?"":";font-size:1px;line-height:1px")+
"}.cufon-canvas .cufon-alt{display:-moz-inline-box;display:inline-block;width:0;height:0;overflow:hidden}"+(b?".cufon-canvas canvas{position:relative}":".cufon-canvas canvas{position:absolute}")+"}@media print{.cufon-canvas{padding:0 !important}.cufon-canvas canvas{display:none}.cufon-canvas .cufon-alt{display:inline}}");try{d.appendChild(c)}catch(e){d.setAttribute("type","text/css"),d.styleSheet.cssText=c.data}f.document.getElementsByTagName("head")[0].appendChild(d);return function(c,d,e,g,l,m){function x(b){R.fillStyle=
b||n.textOptions.color||e.get("color");var d=b=0;"right"===g.textAlign?R.translate(P[d],0):"center"===g.textAlign&&R.translate(P[d]/2,0);for(var f=0,h=T.length;f<h;++f)if("\n"===T[f]){d++;var l=-c.ascent-c.ascent/5*g.lineHeight;"right"===g.textAlign?(R.translate(-O,l),R.translate(P[d],0)):"center"===g.textAlign?(R.translate(-b-P[d-1]/2,l),R.translate(P[d]/2,0)):R.translate(-b,l);b=0}else{var m=c.glyphs[T[f]]||c.missingGlyph;if(m){l=Number(m.w||c.w)+A;U&&(R.save(),R.strokeStyle=R.fillStyle,R.lineWidth+=
R.lineWidth,R.beginPath(),U.underline&&(R.moveTo(0,-c.face["underline-position"]+.5),R.lineTo(l,-c.face["underline-position"]+.5)),U.overline&&(R.moveTo(0,c.ascent+.5),R.lineTo(l,c.ascent+.5)),U["line-through"]&&(R.moveTo(0,-c.descent+.5),R.lineTo(l,-c.descent+.5)),R.stroke(),R.restore());Q&&(R.save(),R.transform(1,0,-.25,1,0,0));R.beginPath();if(m.d)if(m.code)for(var t=m.code,m=R,w=0,u=t.length;w<u;++w){var y=t[w];m[y.m].apply(m,y.a)}else{var t=m,m="m"+m.d,w=R,y=u=0,x=[],z=/([mrvxe])([^a-z]*)/g,
B=void 0,D=0;a:for(;B=z.exec(m);++D){var C=B[2].split(",");switch(B[1]){case "v":x[D]={m:"bezierCurveTo",a:[u+~~C[0],y+~~C[1],u+~~C[2],y+~~C[3],u+=~~C[4],y+=~~C[5]]};break;case "r":x[D]={m:"lineTo",a:[u+=~~C[0],y+=~~C[1]]};break;case "m":x[D]={m:"moveTo",a:[u=~~C[0],y=~~C[1]]};break;case "x":x[D]={m:"closePath",a:[]};break;case "e":break a}w[x[D].m].apply(w,x[D].a)}t.code=x}R.fill();g.strokeStyle&&(R.closePath(),R.save(),R.lineWidth=g.strokeWidth,R.strokeStyle=g.strokeStyle,R.stroke(),R.restore());
Q&&R.restore();R.translate(l,0);b+=l}}}var z=null===d,y=c.viewBox,B=e.getSize("fontSize",c.baseSize),A=e.get("letterSpacing"),A="normal"==A?0:B.convertFrom(parseInt(A,10)),C=m=0,D=0,H=g.textShadow,G=[];n.textOptions.shadowOffsets=[];n.textOptions.shadows=null;if(H){n.textOptions.shadows=H;for(var L=0,J=H.length;L<J;++L){var M=H[L],V=B.convertFrom(parseFloat(M.offX)),M=B.convertFrom(parseFloat(M.offY));G[L]=[V,M]}}for(var T=n.CSS.textTransform(z?l.alt:d,e).split(""),O=0,M=null,V=0,N=1,Z=[],L=0,J=T.length;L<
J;++L)if("\n"===T[L])N++,O>V&&(V=O),Z.push(O),O=0;else{var X=c.glyphs[T[L]]||c.missingGlyph;X&&(O+=M=Number(X.w||c.w)+A)}Z.push(O);for(var O=Math.max(V,O),P=[],L=Z.length;L--;)P[L]=O-Z[L];if(null===M)return null;C+=y.width-M;D+=y.minX;z?(z=l,l=l.firstChild):(z=f.document.createElement("span"),z.className="cufon cufon-canvas",z.alt=d,l=f.document.createElement("canvas"),z.appendChild(l),g.printable&&(L=f.document.createElement("span"),L.className="cufon-alt",L.appendChild(f.document.createTextNode(d)),
z.appendChild(L)));d=z.style;J=l.style||{};M=B.convert(y.height-m+0);L=Math.ceil(M);M=L/M;l.width=Math.ceil(B.convert(O+C-D)*M);l.height=L;m+=y.minY;J.top=Math.round(B.convert(m-c.ascent))+"px";J.left=Math.round(B.convert(D))+"px";C=Math.ceil(B.convert(O*M));J=C+"px";M=B.convert(c.height);B=(g.lineHeight-1)*B.convert(-c.ascent/5)*(N-1);n.textOptions.width=C;n.textOptions.height=M*N+B;n.textOptions.lines=N;n.textOptions.totalLineHeight=B;b?(d.width=J,d.height=M+"px"):(d.paddingLeft=J,d.paddingBottom=
M-1+"px");var R=n.textOptions.context||l.getContext("2d"),K=L/y.height;n.textOptions.fontAscent=c.ascent*K;n.textOptions.boundaries=null;y=n.textOptions.shadowOffsets;for(L=G.length;L--;)y[L]=[G[L][0]*K,G[L][1]*K];R.save();R.scale(K,K);R.translate(-D-1/K*l.width/2+(n.fonts[c.family].offsetLeft||0),-m-n.textOptions.height/K/2+(n.fonts[c.family].offsetTop||0));R.lineWidth=c.face["underline-thickness"];R.save();var U=n.getTextDecoration(g),Q="italic"===g.fontStyle;R.save();(function(){R.save();var b=
0,d=0,e=[{left:0}];g.backgroundColor&&(R.save(),R.fillStyle=g.backgroundColor,R.translate(0,c.ascent),R.fillRect(0,0,O+10,(-c.ascent+c.descent)*N),R.restore());"right"===g.textAlign?(R.translate(P[d],0),e[0].left=P[d]*K):"center"===g.textAlign&&(R.translate(P[d]/2,0),e[0].left=P[d]/2*K);for(var f=0,h=T.length;f<h;++f)if("\n"===T[f]){d++;var l=-c.ascent-c.ascent/5*g.lineHeight,m=e[e.length-1],r={left:0};m.width=b*K;m.height=(-c.ascent+c.descent)*K;"right"===g.textAlign?(R.translate(-O,l),R.translate(P[d],
0),r.left=P[d]*K):"center"===g.textAlign?(R.translate(-b-P[d-1]/2,l),R.translate(P[d]/2,0),r.left=P[d]/2*K):R.translate(-b,l);e.push(r);b=0}else if(l=c.glyphs[T[f]]||c.missingGlyph)l=Number(l.w||c.w)+A,g.textBackgroundColor&&(R.save(),R.fillStyle=g.textBackgroundColor,R.translate(0,c.ascent),R.fillRect(0,0,l+10,-c.ascent+c.descent),R.restore()),R.translate(l,0),b+=l,f==h-1&&(e[e.length-1].width=b*K,e[e.length-1].height=(-c.ascent+c.descent)*K);R.restore();n.textOptions.boundaries=e})();if(H)for(L=
0,J=H.length;L<J;++L)M=H[L],R.save(),R.translate.apply(R,G[L]),x(M.color),R.restore();x();R.restore();R.restore();R.restore();return z}}());n.registerEngine("vml",function(){function b(c,d){if(/px$/i.test(d))return parseFloat(d);var e=c.style.left,g=c.runtimeStyle.left;c.runtimeStyle.left=c.currentStyle.left;c.style.left=d;var f=c.style.pixelLeft;c.style.left=e;c.runtimeStyle.left=g;return f}if(f.document.namespaces){var c=f.document.createElement("canvas");if(!(c&&c.getContext&&c.getContext.apply)&&
(null==f.document.namespaces.cvml&&f.document.namespaces.add("cvml","urn:schemas-microsoft-com:vml"),c=f.document.createElement("cvml:shape"),c.style.behavior="url(#default#VML)",c.coordsize))return c=null,f.document.write('<style type="text/css">.cufon-vml-canvas{text-indent:0}@media screen{cvml\\:shape,cvml\\:shadow{behavior:url(#default#VML);display:block;antialias:true;position:absolute}.cufon-vml-canvas{position:absolute;text-align:left}.cufon-vml{display:inline-block;position:relative;vertical-align:middle}.cufon-vml .cufon-alt{position:absolute;left:-10000in;font-size:1px}a .cufon-vml{cursor:pointer}}@media print{.cufon-vml *{display:none}.cufon-vml .cufon-alt{display:inline}}</style>'),
function(c,d,e,g,r,q,w){var u=null===d;u&&(d=r.alt);var x=c.viewBox,z;if(!(z=e.computedFontSize)){z=n.CSS.Size;var y;y=e.get("fontSize");y=b(q,/(?:em|ex|%)$/i.test(y)?"1em":y);z=e.computedFontSize=new z(y+"px",c.baseSize)}y=e.computedLSpacing;void 0==y&&(y=e.get("letterSpacing"),e.computedLSpacing=y="normal"==y?0:~~z.convertFrom(b(q,y)));if(u)q=r,r=r.firstChild;else{q=f.document.createElement("span");q.className="cufon cufon-vml";q.alt=d;r=f.document.createElement("span");r.className="cufon-vml-canvas";
q.appendChild(r);if(g.printable){var B=f.document.createElement("span");B.className="cufon-alt";B.appendChild(f.document.createTextNode(d));q.appendChild(B)}w||q.appendChild(f.document.createElement("cvml:shape"))}w=q.style;var A=r.style,C=z.convert(x.height),B=Math.ceil(C),C=B/C,D=x.minX,H=x.minY;A.height=B;A.top=Math.round(z.convert(H-c.ascent));A.left=Math.round(z.convert(D));w.height=z.convert(c.height)+"px";n.getTextDecoration(g);A=e.get("color");d=n.CSS.textTransform(d,e).split("");var G=e=
0,L=null,J;g=g.textShadow;for(var M=0,V=0,T=d.length;M<T;++M)(J=c.glyphs[d[M]]||c.missingGlyph)&&(e+=L=~~(J.w||c.w)+y);if(null===L)return null;J=-D+e+(x.width-L);for(var M=z.convert(J*C),L=Math.round(M),O=J+","+x.height,N,Z="r"+O+"nsnf",M=0;M<T;++M)if(J=c.glyphs[d[M]]||c.missingGlyph){u?(x=r.childNodes[V],x.firstChild&&x.removeChild(x.firstChild)):(x=f.document.createElement("cvml:shape"),r.appendChild(x));x.stroked="f";x.coordsize=O;x.coordorigin=N=D-G+","+H;x.path=(J.d?"m"+J.d+"xe":"")+"m"+N+Z;
x.fillcolor=A;N=x.style;N.width=L;N.height=B;if(g){N=g[0];var X=g[1],P=n.CSS.color(N.color),R,K=f.document.createElement("cvml:shadow");K.on="t";K.color=P.color;K.offset=N.offX+","+N.offY;X&&(R=n.CSS.color(X.color),K.type="double",K.color2=R.color,K.offset2=X.offX+","+X.offY);K.opacity=P.opacity||R&&R.opacity||1;x.appendChild(K)}G+=~~(J.w||c.w)+y;++V}w.width=Math.max(Math.ceil(z.convert(e*C)),0);return q}}}());n.getTextDecoration=function(b){return{underline:"underline"===b.textDecoration,overline:"overline"===
b.textDecoration,"line-through":"line-through"===b.textDecoration}};"undefined"!=typeof e&&(e.Cufon=n);"object"!==typeof JSON&&(JSON={});(function(){function b(c){return 10>c?"0"+c:c}function c(b){f.lastIndex=0;return f.test(b)?'"'+b.replace(f,function(b){var c=q[b];return"string"===typeof c?c:"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+b+'"'}function d(b,e){var f,h,m,p,q=n,D,H=e[b];H&&"object"===typeof H&&"function"===typeof H.toJSON&&(H=H.toJSON(b));"function"===typeof w&&(H=
w.call(e,b,H));switch(typeof H){case "string":return c(H);case "number":return isFinite(H)?String(H):"null";case "boolean":case "null":return String(H);case "object":if(!H)return"null";n+=r;D=[];if("[object Array]"===Object.prototype.toString.apply(H)){p=H.length;for(f=0;f<p;f+=1)D[f]=d(f,H)||"null";m=0===D.length?"[]":n?"[\n"+n+D.join(",\n"+n)+"\n"+q+"]":"["+D.join(",")+"]";n=q;return m}if(w&&"object"===typeof w)for(p=w.length,f=0;f<p;f+=1)"string"===typeof w[f]&&(h=w[f],(m=d(h,H))&&D.push(c(h)+
(n?": ":":")+m));else for(h in H)Object.prototype.hasOwnProperty.call(H,h)&&(m=d(h,H))&&D.push(c(h)+(n?": ":":")+m);m=0===D.length?"{}":n?"{\n"+n+D.join(",\n"+n)+"\n"+q+"}":"{"+D.join(",")+"}";n=q;return m}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=
Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var e,f,n,r,q,w;"function"!==typeof JSON.stringify&&(f=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,q={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(b,c,e){var g;r=n="";if("number"===typeof e)for(g=0;g<e;g+=1)r+=" ";else"string"===typeof e&&(r=e);if((w=c)&&"function"!==typeof c&&("object"!==
typeof c||"number"!==typeof c.length))throw Error("JSON.stringify");return d("",{"":b})});"function"!==typeof JSON.parse&&(e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(b,c){function d(b,e){var g,f,h=b[e];if(h&&"object"===typeof h)for(g in h)Object.prototype.hasOwnProperty.call(h,g)&&(f=d(h,g),void 0!==f?h[g]=f:delete h[g]);return c.call(b,e,h)}var g;b=String(b);e.lastIndex=0;e.test(b)&&(b=b.replace(e,function(b){return"\\u"+
("0000"+b.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(b.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return g=eval("("+b+")"),"function"===typeof c?d({"":g},""):g;throw new SyntaxError("JSON.parse");})})();(function(){function b(c,d){this.__eventListeners[c]&&(d?f.util.removeFromArray(this.__eventListeners[c],d):this.__eventListeners[c].length=0)}function c(b,
d){this.__eventListeners||(this.__eventListeners={});if(1===arguments.length)for(var e in b)this.on(e,b[e]);else this.__eventListeners[b]||(this.__eventListeners[b]=[]),this.__eventListeners[b].push(d);return this}function d(c,e){if(this.__eventListeners){if(0===arguments.length)this.__eventListeners={};else if(1===arguments.length&&"object"===typeof arguments[0])for(var g in c)b.call(this,g,c[g]);else b.call(this,c,e);return this}}function e(b,c){if(this.__eventListeners){var d=this.__eventListeners[b];
if(d){for(var g=0,f=d.length;g<f;g++)d[g].call(this,c||{});return this}}}f.Observable={observe:c,stopObserving:d,fire:e,on:c,off:d,trigger:e}})();f.Collection={add:function(){this._objects.push.apply(this._objects,arguments);for(var b=0,c=arguments.length;b<c;b++)this._onObjectAdded(arguments[b]);this.renderOnAddRemove&&this.renderAll();return this},insertAt:function(b,c,d){var e=this.getObjects();d?e[c]=b:e.splice(c,0,b);this._onObjectAdded(b);this.renderOnAddRemove&&this.renderAll();return this},
remove:function(){for(var b=this.getObjects(),c,d=0,e=arguments.length;d<e;d++)c=b.indexOf(arguments[d]),-1!==c&&(b.splice(c,1),this._onObjectRemoved(arguments[d]));this.renderOnAddRemove&&this.renderAll();return this},forEachObject:function(b,c){for(var d=this.getObjects(),e=d.length;e--;)b.call(c,d[e],e,d);return this},getObjects:function(b){return"undefined"===typeof b?this._objects:this._objects.filter(function(c){return c.type===b})},item:function(b){return this.getObjects()[b]},isEmpty:function(){return 0===
this.getObjects().length},size:function(){return this.getObjects().length},contains:function(b){return-1<this.getObjects().indexOf(b)},complexity:function(){return this.getObjects().reduce(function(b,c){return b+=c.complexity?c.complexity():0},0)}};(function(c){var d=Math.sqrt,e=Math.atan2,m=Math.PI/180;f.util={removeFromArray:function(b,c){var d=b.indexOf(c);-1!==d&&b.splice(d,1);return b},getRandomInt:function(b,c){return Math.floor(Math.random()*(c-b+1))+b},degreesToRadians:function(b){return b*
m},radiansToDegrees:function(b){return b/m},rotatePoint:function(b,c,d){var e=Math.sin(d);d=Math.cos(d);b.subtractEquals(c);return(new f.Point(b.x*d-b.y*e,b.x*e+b.y*d)).addEquals(c)},transformPoint:function(b,c,d){return d?new f.Point(c[0]*b.x+c[1]*b.y,c[2]*b.x+c[3]*b.y):new f.Point(c[0]*b.x+c[1]*b.y+c[4],c[2]*b.x+c[3]*b.y+c[5])},invertTransform:function(b){var c=b.slice(),c=1/(b[0]*b[3]-b[1]*b[2]),c=[c*b[3],-c*b[1],-c*b[2],c*b[0],0,0];b=f.util.transformPoint({x:b[4],y:b[5]},c);c[4]=-b.x;c[5]=-b.y;
return c},toFixed:function(b,c){return parseFloat(Number(b).toFixed(c))},parseUnit:function(b){var c=/\D{0,2}$/.exec(b);b=parseFloat(b);switch(c[0]){case "mm":return b*f.DPI/25.4;case "cm":return b*f.DPI/2.54;case "in":return b*f.DPI;case "pt":return b*f.DPI/72;case "pc":return b*f.DPI/72*12;default:return b}},falseFunction:function(){return!1},getKlass:function(b,c){b=f.util.string.camelize(b.charAt(0).toUpperCase()+b.slice(1));return f.util.resolveNamespace(c)[b]},resolveNamespace:function(b){if(!b)return f;
b=b.split(".");for(var d=b.length,e=c||f.window,g=0;g<d;++g)e=e[b[g]];return e},loadImage:function(b,c,d,e){if(b){var g=f.util.createImage();g.onload=function(){c&&c.call(d,g);g=g.onload=g.onerror=null};g.onerror=function(){f.log("Error loading "+g.src);c&&c.call(d,null,!0);g=g.onload=g.onerror=null};0!==b.indexOf("data")&&"undefined"!==typeof e&&(g.crossOrigin=e);g.src=b}else c&&c.call(d,b)},enlivenObjects:function(b,c,d,e){function g(){++l===m&&c&&c(h)}b=b||[];var h=[],l=0,m=b.length;m?b.forEach(function(b,
c){if(b&&b.type){var l=f.util.getKlass(b.type,d);l.async?l.fromObject(b,function(d,f){f||(h[c]=d,e&&e(b,h[c]));g()}):(h[c]=l.fromObject(b),e&&e(b,h[c]),g())}else g()}):c&&c(h)},groupSVGElements:function(b,c,d){b=new f.PathGroup(b,c);"undefined"!==typeof d&&b.setSourcePath(d);return b},populateWithProperties:function(b,c,d){if(d&&"[object Array]"===Object.prototype.toString.call(d))for(var e=0,g=d.length;e<g;e++)d[e]in b&&(c[d[e]]=b[d[e]])},drawDashedLine:function(b,c,f,h,m,n){h-=c;var x=m-f;m=d(h*
h+x*x);h=e(x,h);var x=n.length,z=0,y=!0;b.save();b.translate(c,f);b.moveTo(0,0);b.rotate(h);for(c=0;m>c;)c+=n[z++%x],c>m&&(c=m),b[y?"lineTo":"moveTo"](c,0),y=!y;b.restore()},createCanvasElement:function(b){b||(b=f.document.createElement("canvas"));b.getContext||"undefined"===typeof G_vmlCanvasManager||G_vmlCanvasManager.initElement(b);return b},createImage:function(){return f.isLikelyNode?new (b("canvas").Image):f.document.createElement("img")},createAccessors:function(b){b=b.prototype;for(var c=
b.stateProperties.length;c--;){var d=b.stateProperties[c],e=d.charAt(0).toUpperCase()+d.slice(1),g="set"+e,e="get"+e;b[e]||(b[e]=new Function('return this.get("'+d+'")'));b[g]||(b[g]=new Function("value",'return this.set("'+d+'", value)'))}},clipContext:function(b,c){c.save();c.beginPath();b.clipTo(c);c.clip()},multiplyTransformMatrices:function(b,c){for(var d=[[b[0],b[2],b[4]],[b[1],b[3],b[5]],[0,0,1]],e=[[c[0],c[2],c[4]],[c[1],c[3],c[5]],[0,0,1]],g=[],f=0;3>f;f++){g[f]=[];for(var h=0;3>h;h++){for(var l=
0,m=0;3>m;m++)l+=d[f][m]*e[m][h];g[f][h]=l}}return[g[0][0],g[1][0],g[0][1],g[1][1],g[0][2],g[1][2]]},getFunctionBody:function(b){return(String(b).match(/function[^{]*\{([\s\S]*)\}/)||{})[1]},isTransparent:function(b,c,d,e){0<e&&(c=c>e?c-e:0,d=d>e?d-e:0);var g=!0;b=b.getImageData(c,d,2*e||1,2*e||1);c=3;for(d=b.data.length;c<d&&(g=0>=b.data[c],!1!==g);c+=4);return g}}})("undefined"!==typeof e?e:this);(function(){function b(f,h,p,u,x,z,y){var B=n.call(arguments);if(e[B])return e[B];var A=Math.PI,C=A/
180*y,D=Math.sin(C),C=Math.cos(C),H=0,G=0;p=Math.abs(p);u=Math.abs(u);var L=-C*f-D*h,J=-C*h+D*f,M=p*p,V=u*u,T=J*J,O=L*L,N=4*M*V-M*T-V*O,Z=0;0>N?(M=Math.sqrt(1-.25*N/(M*V)),p*=M,u*=M):Z=(x===z?-.5:.5)*Math.sqrt(N/(M*T+V*O));T=Z*p*J/u;O=-Z*u*L/p;Z=C*T-D*O+f/2;M=D*T+C*O+h/2;V=d(1,0,(L-T)/p,(J-O)/u);J=d((L-T)/p,(J-O)/u,(-L-T)/p,(-J-O)/u);0===z&&0<J?J-=2*A:1===z&&0>J&&(J+=2*A);A=Math.ceil(Math.abs(J/(.5*A)));L=[];J/=A;T=8/3*Math.sin(J/4)*Math.sin(J/4)/Math.sin(J/2);O=V+J;for(N=0;N<A;N++)L[N]=c(V,O,C,D,
p,u,Z,M,T,H,G),H=L[N][4],G=L[N][5],V+=J,O+=J;return e[B]=L}function c(b,d,e,g,f,h,l,m,A,C,D){var H=n.call(arguments);if(p[H])return p[H];var G=Math.cos(b),L=Math.sin(b),J=Math.cos(d),M=Math.sin(d),V=e*f*J-g*h*M+l,T=g*f*J+e*h*M+m;p[H]=[C+A*(-e*f*L-g*h*G),D+A*(-g*f*L+e*h*G),V+A*(e*f*M+g*h*J),T+A*(g*f*M-e*h*J),V,T];return p[H]}function d(b,c,e,g){b=Math.atan2(c,b);e=Math.atan2(g,e);return e>=b?e-b:2*Math.PI-(b-e)}var e={},p={},n=Array.prototype.join;f.util.drawArc=function(c,d,e,g){var f=[[],[],[],[]];
g=b(g[5]-d,g[6]-e,g[0],g[1],g[3],g[4],g[2]);for(var l=0,m=g.length;l<m;l++)f[l][0]=g[l][0]+d,f[l][1]=g[l][1]+e,f[l][2]=g[l][2]+d,f[l][3]=g[l][3]+e,f[l][4]=g[l][4]+d,f[l][5]=g[l][5]+e,c.bezierCurveTo.apply(c,f[l])}})();(function(){function b(c,d,e){if(c&&0!==c.length){var g=c.length-1,f=d?c[g][d]:c[g];if(d)for(;g--;)e(c[g][d],f)&&(f=c[g][d]);else for(;g--;)e(c[g],f)&&(f=c[g]);return f}}var c=Array.prototype.slice;f.util.array={invoke:function(b,d){for(var e=c.call(arguments,2),f=[],h=0,q=b.length;h<
q;h++)f[h]=e.length?b[h][d].apply(b[h],e):b[h][d].call(b[h]);return f},min:function(c,d){return b(c,d,function(b,c){return b<c})},max:function(c,d){return b(c,d,function(b,c){return b>=c})}}})();(function(){function b(c,d){for(var e in d)c[e]=d[e];return c}f.util.object={extend:b,clone:function(c){return b({},c)}}})();(function(){f.util.string={camelize:function(b){return b.replace(/-+(.)?/g,function(b,c){return c?c.toUpperCase():""})},capitalize:function(b,c){return b.charAt(0).toUpperCase()+(c?
b.slice(1):b.slice(1).toLowerCase())},escapeXml:function(b){return b.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}}})();(function(){function b(){}function c(b){var e=this.constructor.superclass.prototype[b];return 1<arguments.length?e.apply(this,d.call(arguments,1)):e.call(this)}var d=Array.prototype.slice,e=function(){},p=function(){for(var b in{toString:1})if("toString"===b)return!1;return!0}(),n=function(b,c,d){for(var e in c)e in
b.prototype&&"function"===typeof b.prototype[e]&&-1<(c[e]+"").indexOf("callSuper")?b.prototype[e]=function(b){return function(){var e=this.constructor.superclass;this.constructor.superclass=d;var g=c[b].apply(this,arguments);this.constructor.superclass=e;if("initialize"!==b)return g}}(e):b.prototype[e]=c[e],p&&(c.toString!==Object.prototype.toString&&(b.prototype.toString=c.toString),c.valueOf!==Object.prototype.valueOf&&(b.prototype.valueOf=c.valueOf))};f.util.createClass=function(){function f(){this.initialize.apply(this,
arguments)}var p=null,w=d.call(arguments,0);"function"===typeof w[0]&&(p=w.shift());f.superclass=p;f.subclasses=[];p&&(b.prototype=p.prototype,f.prototype=new b,p.subclasses.push(f));for(var u=0,x=w.length;u<x;u++)n(f,w[u],p);f.prototype.initialize||(f.prototype.initialize=e);f.prototype.constructor=f;f.prototype.callSuper=c;return f}})();(function(){function b(c){var d=Array.prototype.slice.call(arguments,1),e,g,f=d.length;for(g=0;g<f;g++)if(e=typeof c[d[g]],!/^(?:function|object|unknown)$/.test(e))return!1;
return!0}function c(b,d){return function(c){d.call(p(b),c||f.window.event)}}function d(b,c){return function(d){if(x[b]&&x[b][c])for(var e=x[b][c],g=0,h=e.length;g<h;g++)e[g].call(this,d||f.window.event)}}function e(b,c,d){var g="touchend"===b.type?"changedTouches":"touches";return b[g]&&b[g][0]?b[g][0][c]-(b[g][0][c]-b[g][0][d])||b[d]:b[d]}var p,n,r=function(){var b=0;return function(c){return c.__uniqueID||(c.__uniqueID="uniqueID__"+b++)}}();(function(){var b={};p=function(c){return b[c]};n=function(c,
d){b[c]=d}})();var q=b(f.document.documentElement,"addEventListener","removeEventListener")&&b(f.window,"addEventListener","removeEventListener"),w=b(f.document.documentElement,"attachEvent","detachEvent")&&b(f.window,"attachEvent","detachEvent"),u={},x={};q?(q=function(b,c,d){b.addEventListener(c,d,!1)},w=function(b,c,d){b.removeEventListener(c,d,!1)}):w?(q=function(b,d,e){var f=r(b);n(f,b);u[f]||(u[f]={});u[f][d]||(u[f][d]=[]);e={handler:e,wrappedHandler:c(f,e)};u[f][d].push(e);b.attachEvent("on"+
d,e.wrappedHandler)},w=function(b,c,d){var e=r(b),g;if(u[e]&&u[e][c])for(var f=0,h=u[e][c].length;f<h;f++)(g=u[e][c][f])&&g.handler===d&&(b.detachEvent("on"+c,g.wrappedHandler),u[e][c][f]=null)}):(q=function(b,c,e){var g=r(b);x[g]||(x[g]={});if(!x[g][c]){x[g][c]=[];var f=b["on"+c];f&&x[g][c].push(f);b["on"+c]=d(g,c)}x[g][c].push(e)},w=function(b,c,d){b=r(b);if(x[b]&&x[b][c]){c=x[b][c];b=0;for(var e=c.length;b<e;b++)c[b]===d&&c.splice(b,1)}});f.util.addListener=q;f.util.removeListener=w;var z=function(b){return"unknown"!==
typeof b.clientX?b.clientX:0},y=function(b){return"unknown"!==typeof b.clientY?b.clientY:0};f.isTouchSupported&&(z=function(b){return e(b,"pageX","clientX")},y=function(b){return e(b,"pageY","clientY")});f.util.getPointer=function(b,c){b||(b=f.window.event);var d=f.util.getScrollLeftTop(b.target||("unknown"!==typeof b.srcElement?b.srcElement:null),c);return{x:z(b)+d.left,y:y(b)+d.top}};f.util.object.extend(f.util,f.Observable)})();(function(){var b=f.document.createElement("div"),c="string"===typeof b.style.filter,
d=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,e=function(b){return b};"string"===typeof b.style.opacity?e=function(b,c){b.style.opacity=c;return b}:c&&(e=function(b,c){var e=b.style;b.currentStyle&&!b.currentStyle.hasLayout&&(e.zoom=1);d.test(e.filter)?e.filter=e.filter.replace(d,.9999<=c?"":"alpha(opacity="+100*c+")"):e.filter+=" alpha(opacity="+100*c+")";return b});f.util.setStyle=function(b,c){var d=b.style;if(!d)return b;if("string"===typeof c)return b.style.cssText+=";"+c,-1<c.indexOf("opacity")?
e(b,c.match(/opacity:\s*(\d?\.?\d*)/)[1]):b;for(var g in c)"opacity"===g?e(b,c[g]):d["float"===g||"cssFloat"===g?"undefined"===typeof d.styleFloat?"cssFloat":"styleFloat":g]=c[g];return b}})();(function(){function b(c,d){var e=f.document.createElement(c),g;for(g in d)"class"===g?e.className=d[g]:"for"===g?e.htmlFor=d[g]:e.setAttribute(g,d[g]);return e}var c=Array.prototype.slice,d,e=function(b){return c.call(b,0)};try{d=e(f.document.childNodes)instanceof Array}catch(p){}d||(e=function(b){for(var c=
Array(b.length),d=b.length;d--;)c[d]=b[d];return c});var n;n=f.document.defaultView&&f.document.defaultView.getComputedStyle?function(b,c){return f.document.defaultView.getComputedStyle(b,null)[c]}:function(b,c){var d=b.style[c];!d&&b.currentStyle&&(d=b.currentStyle[c]);return d};(function(){var b=f.document.documentElement.style,c="userSelect"in b?"userSelect":"MozUserSelect"in b?"MozUserSelect":"WebkitUserSelect"in b?"WebkitUserSelect":"KhtmlUserSelect"in b?"KhtmlUserSelect":"";f.util.makeElementUnselectable=
function(b){"undefined"!==typeof b.onselectstart&&(b.onselectstart=f.util.falseFunction);c?b.style[c]="none":"string"===typeof b.unselectable&&(b.unselectable="on");return b};f.util.makeElementSelectable=function(b){"undefined"!==typeof b.onselectstart&&(b.onselectstart=null);c?b.style[c]="":"string"===typeof b.unselectable&&(b.unselectable="");return b}})();(function(){f.util.getScript=function(b,c){var d=f.document.getElementsByTagName("head")[0],e=f.document.createElement("script"),g=!0;e.onload=
e.onreadystatechange=function(b){!g||"string"===typeof this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(g=!1,c(b||f.window.event),e=e.onload=e.onreadystatechange=null)};e.src=b;d.appendChild(e)}})();f.util.getById=function(b){return"string"===typeof b?f.document.getElementById(b):b};f.util.toArray=e;f.util.makeElement=b;f.util.addClass=function(b,c){b&&-1===(" "+b.className+" ").indexOf(" "+c+" ")&&(b.className+=(b.className?" ":"")+c)};f.util.wrapElement=function(c,d,e){"string"===
typeof d&&(d=b(d,e));c.parentNode&&c.parentNode.replaceChild(d,c);d.appendChild(c);return d};f.util.getScrollLeftTop=function(b,c){var d,e,g=0,h=0,l=f.document.documentElement,m=f.document.body||{scrollLeft:0,scrollTop:0};for(e=b;b&&b.parentNode&&!d;)b=b.parentNode,b!==f.document&&"fixed"===f.util.getElementStyle(b,"position")&&(d=b),b!==f.document&&e!==c&&"absolute"===f.util.getElementStyle(b,"position")?h=g=0:b===f.document?(g=m.scrollLeft||l.scrollLeft||0,h=m.scrollTop||l.scrollTop||0):(g+=b.scrollLeft||
0,h+=b.scrollTop||0);return{left:g,top:h}};f.util.getElementOffset=function(b){var c;c=b&&b.ownerDocument;var d={left:0,top:0},e={left:0,top:0},g={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!c)return{left:0,top:0};for(var h in g)e[g[h]]+=parseInt(n(b,h),10)||0;c=c.documentElement;"undefined"!==typeof b.getBoundingClientRect&&(d=b.getBoundingClientRect());b=f.util.getScrollLeftTop(b,null);return{left:d.left+b.left-(c.clientLeft||0)+e.left,top:d.top+b.top-(c.clientTop||
0)+e.top}};f.util.getElementStyle=n})();(function(){function b(c,d){return c+(/\?/.test(c)?"&":"?")+d}function c(){}var d=function(){for(var b=[function(){return new ActiveXObject("Microsoft.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP.3.0")},function(){return new XMLHttpRequest}],c=b.length;c--;)try{if(b[c]())return b[c]}catch(d){}}();f.util.request=function(e,f){f||(f={});var n=f.method?f.method.toUpperCase():"GET",r=f.onComplete||
function(){},q=d(),w;q.onreadystatechange=function(){4===q.readyState&&(r(q),q.onreadystatechange=c)};"GET"===n&&(w=null,"string"===typeof f.parameters&&(e=b(e,f.parameters)));q.open(n,e,!0);"POST"!==n&&"PUT"!==n||q.setRequestHeader("Content-Type","application/x-www-form-urlencoded");q.send(w);return q}})();f.log=function(){};f.warn=function(){};"undefined"!==typeof console&&["log","warn"].forEach(function(b){"undefined"!==typeof console[b]&&console[b].apply&&(f[b]=function(){return console[b].apply(console,
arguments)})});(function(b){function c(b){return b in L?L[b]:b}function d(b,c,e){var g="[object Array]"===Object.prototype.toString.call(c),f;"fill"!==b&&"stroke"!==b||"none"!==c?"fillRule"===b?c="evenodd"===c?"destination-over":c:"strokeDashArray"===b?c=c.replace(/,/g," ").split(/\s+/).map(function(b){return parseInt(b)}):"transformMatrix"===b?c=e&&e.transformMatrix?G(e.transformMatrix,y.parseTransformAttribute(c)):y.parseTransformAttribute(c):"visible"===b?(c="none"===c||"hidden"===c?!1:!0,e&&!1===
e.visible&&(c=!1)):"originX"===b?c="start"===c?"left":"end"===c?"right":"center":f=g?c.map(H):H(c):c="";return!g&&isNaN(f)?c:f}function e(b){for(var c in J)if(b[c]&&"undefined"!==typeof b[J[c]]&&0!==b[c].indexOf("url(")){var d=new y.Color(b[c]);b[c]=d.setAlpha(D(d.getAlpha()*b[J[c]],2)).toRgba()}return b}function f(b,c){var d=b.match(/(normal|italic)?\s*(normal|small-caps)?\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\s*(\d+)px(?:\/(normal|[\d\.]+))?\s+(.*)/);if(d){var e=d[1],
g=d[3],h=d[4],l=d[5],d=d[6];e&&(c.fontStyle=e);g&&(c.fontWeight=isNaN(parseFloat(g))?g:parseFloat(g));h&&(c.fontSize=parseFloat(h));d&&(c.fontFamily=d);l&&(c.lineHeight="normal"===l?1:l)}}function n(b,e){var h,m;b.replace(/;$/,"").split(";").forEach(function(b){b=b.split(":");h=c(b[0].trim().toLowerCase());m=d(h,b[1].trim());"font"===h?f(m,e):e[h]=m})}function r(b){var c={},d;for(d in y.cssRules){var e=b,g=d.split(" "),f=void 0,h=!0;if((f=q(e,g.pop()))&&g.length){for(var h=g,l=void 0,m=!0;e.parentNode&&
1===e.parentNode.nodeType&&h.length;)m&&(l=h.pop()),e=e.parentNode,m=q(e,l);h=0===h.length}if(f&&h&&0===g.length)for(var p in y.cssRules[d])c[p]=y.cssRules[d][p]}return c}function q(b,c){var d=b.nodeName,e=b.getAttribute("class"),g=b.getAttribute("id"),d=new RegExp("^"+d,"i");c=c.replace(d,"");g&&c.length&&(d=new RegExp("#"+g+"(?![a-zA-Z\\-]+)","i"),c=c.replace(d,""));if(e&&c.length)for(e=e.split(" "),g=e.length;g--;)d=new RegExp("\\."+e[g]+"(?![a-zA-Z\\-]+)","i"),c=c.replace(d,"");return 0===c.length}
function w(b){for(var c=b.getElementsByTagName("use");c.length;){for(var d=c[0],e=d.getAttribute("xlink:href").substr(1),g=d.getAttribute("x")||0,f=d.getAttribute("y")||0,e=b.getElementById(e).cloneNode(!0),g=(d.getAttribute("transform")||"")+" translate("+g+", "+f+")",f=0,h=d.attributes,l=h.length;f<l;f++){var m=h.item(f);"x"!==m.nodeName&&"y"!==m.nodeName&&"xlink:href"!==m.nodeName&&("transform"===m.nodeName?g=g+" "+m.nodeValue:e.setAttribute(m.nodeName,m.nodeValue))}e.setAttribute("transform",
g);e.removeAttribute("id");d.parentNode.replaceChild(e,d)}}function u(b,c){c[3]=c[0]=c[0]>c[3]?c[3]:c[0];if(1!==c[0]||1!==c[3]||0!==c[4]||0!==c[5]){for(var d=b.ownerDocument.createElement("g");null!=b.firstChild;)d.appendChild(b.firstChild);d.setAttribute("transform","matrix("+c[0]+" "+c[1]+" "+c[2]+" "+c[3]+" "+c[4]+" "+c[5]+")");b.appendChild(d)}}function x(b){var c=b.objects;b=b.options;c=c.map(function(b){return y[A(b.type)].fromObject(b)});return{objects:c,options:b}}function z(b,c,d){c[d]&&
c[d].toSVG&&b.push('<pattern x="0" y="0" id="',d,'Pattern" ','width="',c[d].source.width,'" height="',c[d].source.height,'" patternUnits="userSpaceOnUse">','<image x="0" y="0" ','width="',c[d].source.width,'" height="',c[d].source.height,'" xlink:href="',c[d].source.src,'"></image></pattern>')}var y=b.fabric||(b.fabric={}),B=y.util.object.extend,A=y.util.string.capitalize,C=y.util.object.clone,D=y.util.toFixed,H=y.util.parseUnit,G=y.util.multiplyTransformMatrices,L={cx:"left",x:"left",r:"radius",
cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","stroke-dasharray":"strokeDashArray","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"originX"},
J={stroke:"strokeOpacity",fill:"fillOpacity"};y.parseTransformAttribute=function(){function b(c,d){var e=d[0];c[0]=Math.cos(e);c[1]=Math.sin(e);c[2]=-Math.sin(e);c[3]=Math.cos(e)}function c(b,d){var e=2===d.length?d[1]:d[0];b[0]=d[0];b[3]=e}function d(b,c){b[4]=c[0];2===c.length&&(b[5]=c[1])}var e=[1,0,0,1,0,0],g=/^\s*(?:(?:(?:(?:(matrix)\s*\(\s*((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))\s*\))|(?:(translate)\s*\(\s*((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?)))?\s*\))|(?:(scale)\s*\(\s*((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?)))?\s*\))|(?:(rotate)\s*\(\s*((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?)))?\s*\))|(?:(skewX)\s*\(\s*((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))\s*\))|(?:(skewY)\s*\(\s*((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))\s*\)))(?:(?:\s+,?\s*|,\s*)(?:(?:(matrix)\s*\(\s*((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))\s*\))|(?:(translate)\s*\(\s*((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?)))?\s*\))|(?:(scale)\s*\(\s*((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?)))?\s*\))|(?:(rotate)\s*\(\s*((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?)))?\s*\))|(?:(skewX)\s*\(\s*((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))\s*\))|(?:(skewY)\s*\(\s*((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))\s*\))))*)?)\s*$/,
f=RegExp("(?:(?:(matrix)\\s*\\(\\s*((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?))\\s*\\))|(?:(translate)\\s*\\(\\s*((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?))(?:(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?)))?\\s*\\))|(?:(scale)\\s*\\(\\s*((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?))(?:(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?)))?\\s*\\))|(?:(rotate)\\s*\\(\\s*((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?))(?:(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?)))?\\s*\\))|(?:(skewX)\\s*\\(\\s*((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?))\\s*\\))|(?:(skewY)\\s*\\(\\s*((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?))\\s*\\)))",
"g");return function(h){var l=e.concat(),m=[];if(!h||h&&!g.test(h))return l;h.replace(f,function(g){var f=/(?:(?:(matrix)\s*\(\s*((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))\s*\))|(?:(translate)\s*\(\s*((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?)))?\s*\))|(?:(scale)\s*\(\s*((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?)))?\s*\))|(?:(rotate)\s*\(\s*((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?)))?\s*\))|(?:(skewX)\s*\(\s*((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))\s*\))|(?:(skewY)\s*\(\s*((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))\s*\)))/.exec(g).filter(function(b){return""!==
b&&null!=b});g=f[1];f=f.slice(2).map(parseFloat);switch(g){case "translate":d(l,f);break;case "rotate":f[0]=y.util.degreesToRadians(f[0]);b(l,f);break;case "scale":c(l,f);break;case "skewX":l[2]=f[0];break;case "skewY":l[1]=f[0];break;case "matrix":l=f}m.push(l.concat());l=e.concat()});for(h=m[0];1<m.length;)m.shift(),h=y.util.multiplyTransformMatrices(h,m[0]);return h}}();y.parseSVGDocument=function(){var b=/^(path|circle|polygon|polyline|ellipse|rect|line|image|text)$/,c=/^\s*((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?)+)\s*,?\s*((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?)+)\s*,?\s*((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?)+)\s*,?\s*((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?)+)\s*$/;
return function(d,e,g){if(d){var f=new Date;w(d);var h=d.getAttribute("viewBox"),l=H(d.getAttribute("width")||"100%"),m=H(d.getAttribute("height")||"100%"),p,r;if(h&&(h=h.match(c))){var q=parseFloat(h[1]),n=parseFloat(h[2]),t=1,x=1;p=parseFloat(h[3]);r=parseFloat(h[4]);l&&l!==p&&(t=l/p);m&&m!==r&&(x=m/r);u(d,[t,0,0,x,t*-q,x*-n])}h=y.util.toArray(d.getElementsByTagName("*"));if(0===h.length&&y.isLikelyNode){h=d.selectNodes('//*[name(.)!="svg"]');q=[];n=0;for(t=h.length;n<t;n++)q[n]=h[n];h=q}h=h.filter(function(c){var d;
if(d=b.test(c.tagName)){a:{for(d=/^(?:pattern|defs)$/;c&&(c=c.parentNode);)if(d.test(c.nodeName)){c=!0;break a}c=!1}d=!c}return d});if(!h||h&&!h.length)e&&e([],{});else{var z={width:l?l:p,height:m?m:r,widthAttr:l,heightAttr:m};y.gradientDefs=y.getGradientDefs(d);y.cssRules=y.getCSSRules(d);y.parseElements(h,function(b){y.documentParsingTime=new Date-f;e&&e(b,z)},C(z),g)}}}}();var M={has:function(b,c){c(!1)},get:function(){},set:function(){}};B(y,{getGradientDefs:function(b){var c=b.getElementsByTagName("linearGradient"),
d=b.getElementsByTagName("radialGradient"),e,g=0,f,h=[];b={};var l={};h.length=c.length+d.length;for(e=c.length;e--;)h[g++]=c[e];for(e=d.length;e--;)h[g++]=d[e];for(;g--;)c=h[g],d=c.getAttribute("xlink:href"),f=c.getAttribute("id"),d&&(l[f]=d.substr(1)),b[f]=c;for(f in l)for(g=b[l[f]].cloneNode(!0),c=b[f];g.firstChild;)c.appendChild(g.firstChild);return b},parseAttributes:function(b,f){if(b){var h,p={};b.parentNode&&/^symbol|[g|a]$/i.test(b.parentNode.nodeName)&&(p=y.parseAttributes(b.parentNode,
f));var q=f.reduce(function(e,f){if(h=b.getAttribute(f))f=c(f),h=d(f,h,p),e[f]=h;return e},{}),q=B(q,B(r(b),y.parseStyleAttribute(b)));return e(B(p,q))}},parseElements:function(b,c,d,e){(new y.ElementsParser(b,c,d,e)).parse()},parseStyleAttribute:function(b){var e={};b=b.getAttribute("style");if(!b)return e;if("string"===typeof b)n(b,e);else{var h,m,r;for(r in b)"undefined"!==typeof b[r]&&(h=c(r.toLowerCase()),m=d(h,b[r]),"font"===h?f(m,e):e[h]=m)}return e},parsePointsAttribute:function(b){if(!b)return null;
b=b.replace(/,/g," ").trim();b=b.split(/\s+/);var c=[],d,e;d=0;for(e=b.length;d<e;d+=2)c.push({x:parseFloat(b[d]),y:parseFloat(b[d+1])});return c},getCSSRules:function(b){b=b.getElementsByTagName("style");for(var e={},f,h=0,m=b.length;h<m;h++)f=b[0].textContent,f=f.replace(/\/\*[\s\S]*?\*\//g,""),f=f.match(/[^{]*\{[\s\S]*?\}/g),f=f.map(function(b){return b.trim()}),f.forEach(function(b){b=b.match(/([\s\S]*?)\s*\{([^}]*)\}/);for(var f={},h=b[2].trim().replace(/;$/,"").split(/\s*;\s*/),m=0,p=h.length;m<
p;m++){var r=h[m].split(/\s*:\s*/),q=c(r[0]),r=d(q,r[1],r[0]);f[q]=r}b=b[1];b.split(",").forEach(function(b){e[b.trim()]=y.util.object.clone(f)})});return e},loadSVGFromURL:function(b,c,d){function e(g){var f=g.responseXML;f&&!f.documentElement&&y.window.ActiveXObject&&g.responseText&&(f=new ActiveXObject("Microsoft.XMLDOM"),f.async="false",f.loadXML(g.responseText.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,"")));f&&f.documentElement&&y.parseSVGDocument(f.documentElement,function(d,e){M.set(b,{objects:y.util.array.invoke(d,
"toObject"),options:e});c(d,e)},d)}b=b.replace(/^\n\s*/,"").trim();M.has(b,function(d){d?M.get(b,function(b){b=x(b);c(b.objects,b.options)}):new y.util.request(b,{method:"get",onComplete:e})})},loadSVGFromString:function(b,c,d){b=b.trim();var e;if("undefined"!==typeof DOMParser){var g=new DOMParser;g&&g.parseFromString&&(e=g.parseFromString(b,"text/xml"))}else y.window.ActiveXObject&&(e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(b.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,
"")));y.parseSVGDocument(e.documentElement,function(b,d){c(b,d)},d)},createSVGFontFacesMarkup:function(b){for(var c="",d=0,e=b.length;d<e;d++)"text"===b[d].type&&b[d].path&&(c+=["@font-face {font-family: ",b[d].fontFamily,"; src: url('",b[d].path,"')}"].join(""));c&&(c=['<style type="text/css"><![CDATA[',c,"]]\x3e</style>"].join(""));return c},createSVGRefElementsMarkup:function(b){var c=[];z(c,b,"backgroundColor");z(c,b,"overlayColor");return c.join("")}})})("undefined"!==typeof e?e:this);f.ElementsParser=
function(b,c,d,e){this.elements=b;this.callback=c;this.options=d;this.reviver=e};f.ElementsParser.prototype.parse=function(){this.instances=Array(this.elements.length);this.numElements=this.elements.length;this.createObjects()};f.ElementsParser.prototype.createObjects=function(){for(var b=0,c=this.elements.length;b<c;b++)(function(b,c){setTimeout(function(){b.createObject(b.elements[c],c)},0)})(this,b)};f.ElementsParser.prototype.createObject=function(b,c){var d=f[f.util.string.capitalize(b.tagName)];
if(d&&d.fromElement)try{this._createObject(d,b,c)}catch(e){f.log(e)}else this.checkIfDone()};f.ElementsParser.prototype._createObject=function(b,c,d){b.async?b.fromElement(c,this.createCallback(d,c),this.options):(b=b.fromElement(c,this.options),this.resolveGradient(b,"fill"),this.resolveGradient(b,"stroke"),this.reviver&&this.reviver(c,b),this.instances[d]=b,this.checkIfDone())};f.ElementsParser.prototype.createCallback=function(b,c){var d=this;return function(e){d.resolveGradient(e,"fill");d.resolveGradient(e,
"stroke");d.reviver&&d.reviver(c,e);d.instances[b]=e;d.checkIfDone()}};f.ElementsParser.prototype.resolveGradient=function(b,c){var d=b.get(c);/^url\(/.test(d)&&(d=d.slice(5,d.length-1),f.gradientDefs[d]&&b.set(c,f.Gradient.fromElement(f.gradientDefs[d],b)))};f.ElementsParser.prototype.checkIfDone=function(){0===--this.numElements&&(this.instances=this.instances.filter(function(b){return null!=b}),this.callback(this.instances))};(function(b){function c(b,d){this.x=b;this.y=d}b=b.fabric||(b.fabric=
{});b.Point?b.warn("fabric.Point is already defined"):(b.Point=c,c.prototype={constructor:c,add:function(b){return new c(this.x+b.x,this.y+b.y)},addEquals:function(b){this.x+=b.x;this.y+=b.y;return this},scalarAdd:function(b){return new c(this.x+b,this.y+b)},scalarAddEquals:function(b){this.x+=b;this.y+=b;return this},subtract:function(b){return new c(this.x-b.x,this.y-b.y)},subtractEquals:function(b){this.x-=b.x;this.y-=b.y;return this},scalarSubtract:function(b){return new c(this.x-b,this.y-b)},
scalarSubtractEquals:function(b){this.x-=b;this.y-=b;return this},multiply:function(b){return new c(this.x*b,this.y*b)},multiplyEquals:function(b){this.x*=b;this.y*=b;return this},divide:function(b){return new c(this.x/b,this.y/b)},divideEquals:function(b){this.x/=b;this.y/=b;return this},eq:function(b){return this.x===b.x&&this.y===b.y},lt:function(b){return this.x<b.x&&this.y<b.y},lte:function(b){return this.x<=b.x&&this.y<=b.y},gt:function(b){return this.x>b.x&&this.y>b.y},gte:function(b){return this.x>=
b.x&&this.y>=b.y},lerp:function(b,d){return new c(this.x+(b.x-this.x)*d,this.y+(b.y-this.y)*d)},distanceFrom:function(b){var c=this.x-b.x;b=this.y-b.y;return Math.sqrt(c*c+b*b)},midPointFrom:function(b){return new c(this.x+(b.x-this.x)/2,this.y+(b.y-this.y)/2)},min:function(b){return new c(Math.min(this.x,b.x),Math.min(this.y,b.y))},max:function(b){return new c(Math.max(this.x,b.x),Math.max(this.y,b.y))},toString:function(){return this.x+","+this.y},setXY:function(b,c){this.x=b;this.y=c},setFromPoint:function(b){this.x=
b.x;this.y=b.y},swap:function(b){var c=this.x,d=this.y;this.x=b.x;this.y=b.y;b.x=c;b.y=d}})})("undefined"!==typeof e?e:this);(function(b){function c(b){this.status=b;this.points=[]}var d=b.fabric||(b.fabric={});d.Intersection?d.warn("fabric.Intersection is already defined"):(d.Intersection=c,d.Intersection.prototype={appendPoint:function(b){this.points.push(b)},appendPoints:function(b){this.points=this.points.concat(b)}},d.Intersection.intersectLineLine=function(b,e,f,h){var q,n=(h.x-f.x)*(b.y-f.y)-
(h.y-f.y)*(b.x-f.x);q=(e.x-b.x)*(b.y-f.y)-(e.y-b.y)*(b.x-f.x);f=(h.y-f.y)*(e.x-b.x)-(h.x-f.x)*(e.y-b.y);0!==f?(n/=f,q/=f,0<=n&&1>=n&&0<=q&&1>=q?(q=new c("Intersection"),q.points.push(new d.Point(b.x+n*(e.x-b.x),b.y+n*(e.y-b.y)))):q=new c):q=0===n||0===q?new c("Coincident"):new c("Parallel");return q},d.Intersection.intersectLinePolygon=function(b,d,e){for(var f=new c,h=e.length,l=0;l<h;l++){var n=c.intersectLineLine(b,d,e[l],e[(l+1)%h]);f.appendPoints(n.points)}0<f.points.length&&(f.status="Intersection");
return f},d.Intersection.intersectPolygonPolygon=function(b,d){for(var e=new c,f=b.length,h=0;h<f;h++){var l=c.intersectLinePolygon(b[h],b[(h+1)%f],d);e.appendPoints(l.points)}0<e.points.length&&(e.status="Intersection");return e},d.Intersection.intersectPolygonRectangle=function(b,e,f){var h=e.min(f),q=e.max(f);f=new d.Point(q.x,h.y);var n=new d.Point(h.x,q.y);e=c.intersectLinePolygon(h,f,b);f=c.intersectLinePolygon(f,q,b);q=c.intersectLinePolygon(q,n,b);b=c.intersectLinePolygon(n,h,b);h=new c;h.appendPoints(e.points);
h.appendPoints(f.points);h.appendPoints(q.points);h.appendPoints(b.points);0<h.points.length&&(h.status="Intersection");return h})})("undefined"!==typeof e?e:this);(function(b){function c(b){b?this._tryParsingColor(b):this.setSource([0,0,0,1])}function d(b,c,e){0>e&&(e+=1);1<e&&(e-=1);return e<1/6?b+6*(c-b)*e:.5>e?c:e<2/3?b+(c-b)*(2/3-e)*6:b}var e=b.fabric||(b.fabric={});e.Color?e.warn("fabric.Color is already defined."):(e.Color=c,e.Color.prototype={_tryParsingColor:function(b){var d;b in c.colorNameMap&&
(b=c.colorNameMap[b]);"transparent"===b?this.setSource([255,255,255,0]):((d=c.sourceFromHex(b))||(d=c.sourceFromRgb(b)),d||(d=c.sourceFromHsl(b)),d&&this.setSource(d))},_rgbToHsl:function(b,c,d){b/=255;c/=255;d/=255;var g,f,h,l=e.util.array.max([b,c,d]);f=e.util.array.min([b,c,d]);h=(l+f)/2;if(l===f)g=f=0;else{var n=l-f;f=.5<h?n/(2-l-f):n/(l+f);switch(l){case b:g=(c-d)/n+(c<d?6:0);break;case c:g=(d-b)/n+2;break;case d:g=(b-c)/n+4}g/=6}return[Math.round(360*g),Math.round(100*f),Math.round(100*h)]},
getSource:function(){return this._source},setSource:function(b){this._source=b},toRgb:function(){var b=this.getSource();return"rgb("+b[0]+","+b[1]+","+b[2]+")"},toRgba:function(){var b=this.getSource();return"rgba("+b[0]+","+b[1]+","+b[2]+","+b[3]+")"},toHsl:function(){var b=this.getSource(),b=this._rgbToHsl(b[0],b[1],b[2]);return"hsl("+b[0]+","+b[1]+"%,"+b[2]+"%)"},toHsla:function(){var b=this.getSource(),c=this._rgbToHsl(b[0],b[1],b[2]);return"hsla("+c[0]+","+c[1]+"%,"+c[2]+"%,"+b[3]+")"},toHex:function(){var b=
this.getSource(),c,d;c=b[0].toString(16);c=1===c.length?"0"+c:c;d=b[1].toString(16);d=1===d.length?"0"+d:d;b=b[2].toString(16);b=1===b.length?"0"+b:b;return c.toUpperCase()+d.toUpperCase()+b.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(b){var c=this.getSource();c[3]=b;this.setSource(c);return this},toGrayscale:function(){var b=this.getSource(),c=parseInt((.3*b[0]+.59*b[1]+.11*b[2]).toFixed(0),10);this.setSource([c,c,c,b[3]]);return this},toBlackWhite:function(b){var c=
this.getSource(),d=(.3*c[0]+.59*c[1]+.11*c[2]).toFixed(0),c=c[3],d=Number(d)<Number(b||127)?0:255;this.setSource([d,d,d,c]);return this},overlayWith:function(b){b instanceof c||(b=new c(b));var d=[],e=this.getAlpha(),f=this.getSource();b=b.getSource();for(var h=0;3>h;h++)d.push(Math.round(.5*f[h]+.5*b[h]));d[3]=e;this.setSource(d);return this}},e.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/,e.Color.reHSLa=
/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/,e.Color.reHex=/^#?([0-9a-f]{6}|[0-9a-f]{3})$/i,e.Color.colorNameMap={aqua:"#00FFFF",black:"#000000",blue:"#0000FF",fuchsia:"#FF00FF",gray:"#808080",green:"#008000",lime:"#00FF00",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#FFA500",purple:"#800080",red:"#FF0000",silver:"#C0C0C0",teal:"#008080",white:"#FFFFFF",yellow:"#FFFF00"},e.Color.fromRgb=function(b){return c.fromSource(c.sourceFromRgb(b))},
e.Color.sourceFromRgb=function(b){if(b=b.match(c.reRGBa)){var d=parseInt(b[1],10)/(/%$/.test(b[1])?100:1)*(/%$/.test(b[1])?255:1),e=parseInt(b[2],10)/(/%$/.test(b[2])?100:1)*(/%$/.test(b[2])?255:1),f=parseInt(b[3],10)/(/%$/.test(b[3])?100:1)*(/%$/.test(b[3])?255:1);return[parseInt(d,10),parseInt(e,10),parseInt(f,10),b[4]?parseFloat(b[4]):1]}},e.Color.fromRgba=c.fromRgb,e.Color.fromHsl=function(b){return c.fromSource(c.sourceFromHsl(b))},e.Color.sourceFromHsl=function(b){if(b=b.match(c.reHSLa)){var e=
(parseFloat(b[1])%360+360)%360/360,f=parseFloat(b[2])/(/%$/.test(b[2])?100:1),h=parseFloat(b[3])/(/%$/.test(b[3])?100:1);if(0===f)h=f=e=h;else var m=.5>=h?h*(f+1):h+f-h*f,n=2*h-m,h=d(n,m,e+1/3),f=d(n,m,e),e=d(n,m,e-1/3);return[Math.round(255*h),Math.round(255*f),Math.round(255*e),b[4]?parseFloat(b[4]):1]}},e.Color.fromHsla=c.fromHsl,e.Color.fromHex=function(b){return c.fromSource(c.sourceFromHex(b))},e.Color.sourceFromHex=function(b){if(b.match(c.reHex)){var d=b.slice(b.indexOf("#")+1),e=3===d.length;
b=e?d.charAt(0)+d.charAt(0):d.substring(0,2);var f=e?d.charAt(1)+d.charAt(1):d.substring(2,4),d=e?d.charAt(2)+d.charAt(2):d.substring(4,6);return[parseInt(b,16),parseInt(f,16),parseInt(d,16),1]}},e.Color.fromSource=function(b){var d=new c;d.setSource(b);return d})})("undefined"!==typeof e?e:this);(function(){function b(c){var d=c.getAttribute("style"),e=c.getAttribute("offset"),g,h,e=parseFloat(e)/(/%$/.test(e)?100:1),e=0>e?0:1<e?1:e;if(d){d=d.split(/\s*;\s*/);""===d[d.length-1]&&d.pop();for(var q=
d.length;q--;){var n=d[q].split(/\s*:\s*/),u=n[0].trim(),n=n[1].trim();"stop-color"===u?g=n:"stop-opacity"===u&&(h=n)}}g||(g=c.getAttribute("stop-color")||"rgb(0,0,0)");h||(h=c.getAttribute("stop-opacity"));g=new f.Color(g);c=g.getAlpha();h=isNaN(parseFloat(h))?1:parseFloat(h);h*=c;return{offset:e,color:g.toRgb(),opacity:h}}function c(b,d,e){var g,f=0,h=1,n="",u;for(u in d){g=parseFloat(d[u],10);h="string"===typeof d[u]&&/^\d+%$/.test(d[u])?.01:1;if("x1"===u||"x2"===u||"r2"===u)h*="objectBoundingBox"===
e?b.width:1,f="objectBoundingBox"===e?b.left||0:0;else if("y1"===u||"y2"===u)h*="objectBoundingBox"===e?b.height:1,f="objectBoundingBox"===e?b.top||0:0;d[u]=g*h+f}"ellipse"===b.type&&null!==d.r2&&"objectBoundingBox"===e&&b.rx!==b.ry&&(b=b.ry/b.rx,n=" scale(1, "+b+")",d.y1&&(d.y1/=b),d.y2&&(d.y2/=b));return n}f.Gradient=f.util.createClass({offsetX:0,offsetY:0,initialize:function(b){b||(b={});var c={};this.id=f.Object.__uid++;this.type=b.type||"linear";c={x1:b.coords.x1||0,y1:b.coords.y1||0,x2:b.coords.x2||
0,y2:b.coords.y2||0};"radial"===this.type&&(c.r1=b.coords.r1||0,c.r2=b.coords.r2||0);this.coords=c;this.colorStops=b.colorStops.slice();b.gradientTransform&&(this.gradientTransform=b.gradientTransform);this.offsetX=b.offsetX||this.offsetX;this.offsetY=b.offsetY||this.offsetY},addColorStop:function(b){for(var c in b){var d=new f.Color(b[c]);this.colorStops.push({offset:c,color:d.toRgb(),opacity:d.getAlpha()})}return this},toObject:function(){return{type:this.type,coords:this.coords,colorStops:this.colorStops,
offsetX:this.offsetX,offsetY:this.offsetY}},toSVG:function(b){var c=f.util.object.clone(this.coords),d;this.colorStops.sort(function(b,c){return b.offset-c.offset});if(!b.group||"path-group"!==b.group.type)for(var e in c)if("x1"===e||"x2"===e||"r2"===e)c[e]+=this.offsetX-b.width/2;else if("y1"===e||"y2"===e)c[e]+=this.offsetY-b.height/2;b='id="SVGID_'+this.id+'" gradientUnits="userSpaceOnUse"';this.gradientTransform&&(b+=' gradientTransform="matrix('+this.gradientTransform.join(" ")+')" ');"linear"===
this.type?d=["<linearGradient ",b,' x1="',c.x1,'" y1="',c.y1,'" x2="',c.x2,'" y2="',c.y2,'">\n']:"radial"===this.type&&(d=["<radialGradient ",b,' cx="',c.x2,'" cy="',c.y2,'" r="',c.r2,'" fx="',c.x1,'" fy="',c.y1,'">\n']);for(c=0;c<this.colorStops.length;c++)d.push("<stop ",'offset="',100*this.colorStops[c].offset+"%",'" style="stop-color:',this.colorStops[c].color,null!=this.colorStops[c].opacity?";stop-opacity: "+this.colorStops[c].opacity:";",'"/>\n');d.push("linear"===this.type?"</linearGradient>\n":
"</radialGradient>\n");return d.join("")},toLive:function(b){var c;if(this.type){"linear"===this.type?c=b.createLinearGradient(this.coords.x1,this.coords.y1,this.coords.x2,this.coords.y2):"radial"===this.type&&(c=b.createRadialGradient(this.coords.x1,this.coords.y1,this.coords.r1,this.coords.x2,this.coords.y2,this.coords.r2));b=0;for(var d=this.colorStops.length;b<d;b++){var e=this.colorStops[b].color,g=this.colorStops[b].opacity,h=this.colorStops[b].offset;"undefined"!==typeof g&&(e=(new f.Color(e)).setAlpha(g).toRgba());
c.addColorStop(parseFloat(h),e)}return c}}});f.util.object.extend(f.Gradient,{fromElement:function(d,e){var p=d.getElementsByTagName("stop"),n="linearGradient"===d.nodeName?"linear":"radial",r=d.getAttribute("gradientUnits")||"objectBoundingBox",q=d.getAttribute("gradientTransform"),w=[],u={};"linear"===n?u={x1:d.getAttribute("x1")||0,y1:d.getAttribute("y1")||0,x2:d.getAttribute("x2")||"100%",y2:d.getAttribute("y2")||0}:"radial"===n&&(u={x1:d.getAttribute("fx")||d.getAttribute("cx")||"50%",y1:d.getAttribute("fy")||
d.getAttribute("cy")||"50%",r1:0,x2:d.getAttribute("cx")||"50%",y2:d.getAttribute("cy")||"50%",r2:d.getAttribute("r")||"50%"});for(var x=p.length;x--;)w.push(b(p[x]));p=c(e,u,r);n=new f.Gradient({type:n,coords:u,colorStops:w,offsetX:-e.left,offsetY:-e.top});if(q||""!==p)n.gradientTransform=f.parseTransformAttribute((q||"")+p);return n},forObject:function(b,d){d||(d={});c(b,d.coords,"userSpaceOnUse");return new f.Gradient(d)}})})();f.Pattern=f.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,
initialize:function(b){b||(b={});this.id=f.Object.__uid++;if(b.source)if("string"===typeof b.source)if("undefined"!==typeof f.util.getFunctionBody(b.source))this.source=new Function(f.util.getFunctionBody(b.source));else{var c=this;this.source=f.util.createImage();f.util.loadImage(b.source,function(b){c.source=b})}else this.source=b.source;b.repeat&&(this.repeat=b.repeat);b.offsetX&&(this.offsetX=b.offsetX);b.offsetY&&(this.offsetY=b.offsetY)},toObject:function(){var b;"function"===typeof this.source?
b=String(this.source):"string"===typeof this.source.src&&(b=this.source.src);return{source:b,repeat:this.repeat,offsetX:this.offsetX,offsetY:this.offsetY}},toSVG:function(b){var c="function"===typeof this.source?this.source():this.source,d=c.width/b.getWidth();b=c.height/b.getHeight();var e="";c.src?e=c.src:c.toDataURL&&(e=c.toDataURL());return'<pattern id="SVGID_'+this.id+'" x="'+this.offsetX+'" y="'+this.offsetY+'" width="'+d+'" height="'+b+'"><image x="0" y="0" width="'+c.width+'" height="'+c.height+
'" xlink:href="'+e+'"></image></pattern>'},toLive:function(b){var c="function"===typeof this.source?this.source():this.source;return c&&("undefined"===typeof c.src||c.complete&&0!==c.naturalWidth&&0!==c.naturalHeight)?b.createPattern(c,this.repeat):""}});(function(b){var c=b.fabric||(b.fabric={});c.Shadow?c.warn("fabric.Shadow is already defined."):(c.Shadow=c.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,initialize:function(b){"string"===
typeof b&&(b=this._parseShadow(b));for(var d in b)this[d]=b[d];this.id=c.Object.__uid++},_parseShadow:function(b){b=b.trim();var d=c.Shadow.reOffsetsAndBlur.exec(b)||[];return{color:(b.replace(c.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:parseInt(d[1],10)||0,offsetY:parseInt(d[2],10)||0,blur:parseInt(d[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(b){var c="SourceAlpha";!b||b.fill!==this.color&&b.stroke!==this.color||
(c="SourceGraphic");return'<filter id="SVGID_'+this.id+'" y="-40%" height="180%"><feGaussianBlur in="'+c+'" stdDeviation="'+(this.blur?this.blur/3:0)+'"></feGaussianBlur><feOffset dx="'+this.offsetX+'" dy="'+this.offsetY+'"></feOffset><feMerge><feMergeNode></feMergeNode><feMergeNode in="SourceGraphic"></feMergeNode></feMerge></filter>'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY};var b={},d=c.Shadow.prototype;this.color!==
d.color&&(b.color=this.color);this.blur!==d.blur&&(b.blur=this.blur);this.offsetX!==d.offsetX&&(b.offsetX=this.offsetX);this.offsetY!==d.offsetY&&(b.offsetY=this.offsetY);return b}}),c.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:px)?(?:\s?|$))?(-?\d+(?:px)?(?:\s?|$))?(\d+(?:px)?)?(?:\s?|$)(?:$|\s)/)})("undefined"!==typeof e?e:this);(function(){if(f.StaticCanvas)f.warn("fabric.StaticCanvas is already defined.");else{var b=f.util.object.extend,c=f.util.getElementOffset,d=f.util.removeFromArray,e=Error("Could not initialize `canvas` element");
f.StaticCanvas=f.util.createClass({initialize:function(b,c){c||(c={});this._initStatic(b,c);f.StaticCanvas.activeInstance=this},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!0,renderOnAddRemove:!0,clipTo:null,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:[1,0,0,1,0,0],onBeforeScaleRotate:function(){},_initStatic:function(b,c){this._objects=[];this._createLowerCanvas(b);this._initOptions(c);this._setImageSmoothing();
c.overlayImage&&this.setOverlayImage(c.overlayImage,this.renderAll.bind(this));c.backgroundImage&&this.setBackgroundImage(c.backgroundImage,this.renderAll.bind(this));c.backgroundColor&&this.setBackgroundColor(c.backgroundColor,this.renderAll.bind(this));c.overlayColor&&this.setOverlayColor(c.overlayColor,this.renderAll.bind(this));this.calcOffset()},calcOffset:function(){this._offset=c(this.lowerCanvasEl);return this},setOverlayImage:function(b,c,d){return this.__setBgOverlayImage("overlayImage",
b,c,d)},setBackgroundImage:function(b,c,d){return this.__setBgOverlayImage("backgroundImage",b,c,d)},setOverlayColor:function(b,c){return this.__setBgOverlayColor("overlayColor",b,c)},setBackgroundColor:function(b,c){return this.__setBgOverlayColor("backgroundColor",b,c)},_setImageSmoothing:function(){var b=this.getContext();b.imageSmoothingEnabled=this.imageSmoothingEnabled;b.webkitImageSmoothingEnabled=this.imageSmoothingEnabled;b.mozImageSmoothingEnabled=this.imageSmoothingEnabled;b.msImageSmoothingEnabled=
this.imageSmoothingEnabled;b.oImageSmoothingEnabled=this.imageSmoothingEnabled},__setBgOverlayImage:function(b,c,d,e){"string"===typeof c?f.util.loadImage(c,function(c){this[b]=new f.Image(c,e);d&&d()},this):(this[b]=c,d&&d());return this},__setBgOverlayColor:function(b,c,d){if(c&&c.source){var e=this;f.util.loadImage(c.source,function(g){e[b]=new f.Pattern({source:g,repeat:c.repeat,offsetX:c.offsetX,offsetY:c.offsetY});d&&d()})}else this[b]=c,d&&d();return this},_createCanvasElement:function(){var b=
f.document.createElement("canvas");b.style||(b.style={});if(!b)throw e;this._initCanvasElement(b);return b},_initCanvasElement:function(b){f.util.createCanvasElement(b);if("undefined"===typeof b.getContext)throw e;},_initOptions:function(b){for(var c in b)this[c]=b[c];this.width=this.width||parseInt(this.lowerCanvasEl.width,10)||0;this.height=this.height||parseInt(this.lowerCanvasEl.height,10)||0;this.lowerCanvasEl.style&&(this.lowerCanvasEl.width=this.width,this.lowerCanvasEl.height=this.height,
this.lowerCanvasEl.style.width=this.width+"px",this.lowerCanvasEl.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(b){this.lowerCanvasEl=f.util.getById(b)||this._createCanvasElement();this._initCanvasElement(this.lowerCanvasEl);f.util.addClass(this.lowerCanvasEl,"lower-canvas");this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl);this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},
getHeight:function(){return this.height},setWidth:function(b,c){return this.setDimensions({width:b},c)},setHeight:function(b,c){return this.setDimensions({height:b},c)},setDimensions:function(b,c){var d;c=c||{};for(var e in b)d=b[e],c.cssOnly||(this._setBackstoreDimension(e,b[e]),d+="px"),c.backstoreOnly||this._setCssDimension(e,d);c.cssOnly||this.renderAll();this.calcOffset();return this},_setBackstoreDimension:function(b,c){this.lowerCanvasEl[b]=c;this.upperCanvasEl&&(this.upperCanvasEl[b]=c);this.cacheCanvasEl&&
(this.cacheCanvasEl[b]=c);this[b]=c;return this},_setCssDimension:function(b,c){this.lowerCanvasEl.style[b]=c;this.upperCanvasEl&&(this.upperCanvasEl.style[b]=c);this.wrapperEl&&(this.wrapperEl.style[b]=c);return this},getZoom:function(){return Math.sqrt(this.viewportTransform[0]*this.viewportTransform[3])},setViewportTransform:function(b){this.viewportTransform=b;this.renderAll();b=0;for(var c=this._objects.length;b<c;b++)this._objects[b].setCoords();return this},zoomToPoint:function(b,c){var d=
b;b=f.util.transformPoint(b,f.util.invertTransform(this.viewportTransform));this.viewportTransform[0]=c;this.viewportTransform[3]=c;var e=f.util.transformPoint(b,this.viewportTransform);this.viewportTransform[4]+=d.x-e.x;this.viewportTransform[5]+=d.y-e.y;this.renderAll();d=0;for(e=this._objects.length;d<e;d++)this._objects[d].setCoords();return this},setZoom:function(b){this.zoomToPoint(new f.Point(0,0),b);return this},absolutePan:function(b){this.viewportTransform[4]=-b.x;this.viewportTransform[5]=
-b.y;this.renderAll();b=0;for(var c=this._objects.length;b<c;b++)this._objects[b].setCoords();return this},relativePan:function(b){return this.absolutePan(new f.Point(-b.x-this.viewportTransform[4],-b.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},getActiveObject:function(){return null},getActiveGroup:function(){return null},_draw:function(b,c){if(c){b.save();var d=this.viewportTransform;b.transform(d[0],d[1],d[2],d[3],d[4],d[5]);c.render(b);b.restore();this.controlsAboveOverlay||
c._renderControls(b)}},_onObjectAdded:function(b){this.stateful&&b.setupState();b.canvas=this;b.setCoords();this.fire("object:added",{target:b});b.fire("added")},_onObjectRemoved:function(b){this.getActiveObject()===b&&(this.fire("before:selection:cleared",{target:b}),this._discardActiveObject(),this.fire("selection:cleared"));this.fire("object:removed",{target:b});b.fire("removed")},clearContext:function(b){b.clearRect(0,0,this.width,this.height);return this},getContext:function(){return this.contextContainer},
clear:function(){this._objects.length=0;this.discardActiveGroup&&this.discardActiveGroup();this.discardActiveObject&&this.discardActiveObject();this.clearContext(this.contextContainer);this.contextTop&&this.clearContext(this.contextTop);this.fire("canvas:cleared");this.renderAll();return this},renderAll:function(b){var c=this[!0===b&&this.interactive?"contextTop":"contextContainer"],d=this.getActiveGroup();this.contextTop&&this.selection&&!this._groupSelector&&this.clearContext(this.contextTop);b||
this.clearContext(c);this.fire("before:render");this.clipTo&&f.util.clipContext(this,c);this._renderBackground(c);this._renderObjects(c,d);this._renderActiveGroup(c,d);this.clipTo&&c.restore();this._renderOverlay(c);this.controlsAboveOverlay&&this.interactive&&this.drawControls(c);this.fire("after:render");return this},_renderObjects:function(b,c){var d,e;if(c)for(d=0,e=this._objects.length;d<e;++d)this._objects[d]&&!c.contains(this._objects[d])&&this._draw(b,this._objects[d]);else for(d=0,e=this._objects.length;d<
e;++d)this._draw(b,this._objects[d])},_renderActiveGroup:function(b,c){if(c){var d=[];this.forEachObject(function(b){c.contains(b)&&d.push(b)});c._set("objects",d);this._draw(b,c)}},_renderBackground:function(b){this.backgroundColor&&(b.fillStyle=this.backgroundColor.toLive?this.backgroundColor.toLive(b):this.backgroundColor,b.fillRect(this.backgroundColor.offsetX||0,this.backgroundColor.offsetY||0,this.width,this.height));this.backgroundImage&&this._draw(b,this.backgroundImage)},_renderOverlay:function(b){this.overlayColor&&
(b.fillStyle=this.overlayColor.toLive?this.overlayColor.toLive(b):this.overlayColor,b.fillRect(this.overlayColor.offsetX||0,this.overlayColor.offsetY||0,this.width,this.height));this.overlayImage&&this._draw(b,this.overlayImage)},renderTop:function(){var b=this.contextTop||this.contextContainer;this.clearContext(b);this.selection&&this._groupSelector&&this._drawSelection();var c=this.getActiveGroup();c&&c.render(b);this._renderOverlay(b);this.fire("after:render");return this},getCenter:function(){return{top:this.getHeight()/
2,left:this.getWidth()/2}},centerObjectH:function(b){this._centerObject(b,new f.Point(this.getCenter().left,b.getCenterPoint().y));this.renderAll();return this},centerObjectV:function(b){this._centerObject(b,new f.Point(b.getCenterPoint().x,this.getCenter().top));this.renderAll();return this},centerObject:function(b){var c=this.getCenter();this._centerObject(b,new f.Point(c.left,c.top));this.renderAll();return this},_centerObject:function(b,c){b.setPositionByOrigin(c,"center","center");return this},
toDatalessJSON:function(b){return this.toDatalessObject(b)},toObject:function(b){return this._toObjectMethod("toObject",b)},toDatalessObject:function(b){return this._toObjectMethod("toDatalessObject",b)},_toObjectMethod:function(c,d){var e=this.getActiveGroup();e&&this.discardActiveGroup();var g={objects:this._toObjects(c,d)};b(g,this.__serializeBgOverlay());f.util.populateWithProperties(this,g,d);e&&(this.setActiveGroup(new f.Group(e.getObjects(),{originX:"center",originY:"center"})),e.forEachObject(function(b){b.set("active",
!0)}),this._currentTransform&&(this._currentTransform.target=this.getActiveGroup()));return g},_toObjects:function(b,c){return this.getObjects().map(function(d){return this._toObject(d,b,c)},this)},_toObject:function(b,c,d){var e;this.includeDefaultValues||(e=b.includeDefaultValues,b.includeDefaultValues=!1);c=b[c](d);this.includeDefaultValues||(b.includeDefaultValues=e);return c},__serializeBgOverlay:function(){var b={background:this.backgroundColor&&this.backgroundColor.toObject?this.backgroundColor.toObject():
this.backgroundColor};this.overlayColor&&(b.overlay=this.overlayColor.toObject?this.overlayColor.toObject():this.overlayColor);this.backgroundImage&&(b.backgroundImage=this.backgroundImage.toObject());this.overlayImage&&(b.overlayImage=this.overlayImage.toObject());return b},svgViewportTransformation:!0,toSVG:function(b,c){b||(b={});var d=[];this._setSVGPreamble(d,b);this._setSVGHeader(d,b);this._setSVGBgOverlayColor(d,"backgroundColor");this._setSVGBgOverlayImage(d,"backgroundImage");this._setSVGObjects(d,
c);this._setSVGBgOverlayColor(d,"overlayColor");this._setSVGBgOverlayImage(d,"overlayImage");d.push("</svg>");return d.join("")},_setSVGPreamble:function(b,c){c.suppressPreamble||b.push('<?xml version="1.0" encoding="',c.encoding||"UTF-8",'" standalone="no" ?>','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(b,c){var d,e,g;c.viewBox?(d=c.viewBox.width,e=c.viewBox.height):(d=this.width,e=this.height,this.svgViewportTransformation||
(g=this.viewportTransform,d/=g[0],e/=g[3]));b.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',d,'" ','height="',e,'" ',this.backgroundColor&&!this.backgroundColor.toLive?'style="background-color: '+this.backgroundColor+'" ':null,c.viewBox?'viewBox="'+c.viewBox.x+" "+c.viewBox.y+" "+c.viewBox.width+" "+c.viewBox.height+'" ':null,'xml:space="preserve">',"<desc>Created with Fabric.js ",f.version,"</desc>","<defs>",f.createSVGFontFacesMarkup(this.getObjects()),
f.createSVGRefElementsMarkup(this),"</defs>")},_setSVGObjects:function(b,c){var d=this.getActiveGroup();d&&this.discardActiveGroup();for(var e=0,g=this.getObjects(),h=g.length;e<h;e++)b.push(g[e].toSVG(c));d&&(this.setActiveGroup(new f.Group(d.getObjects())),d.forEachObject(function(b){b.set("active",!0)}))},_setSVGBgOverlayImage:function(b,c){this[c]&&this[c].toSVG&&b.push(this[c].toSVG())},_setSVGBgOverlayColor:function(b,c){this[c]&&this[c].source?b.push('<rect x="',this[c].offsetX,'" y="',this[c].offsetY,
'" ','width="',"repeat-y"===this[c].repeat||"no-repeat"===this[c].repeat?this[c].source.width:this.width,'" height="',"repeat-x"===this[c].repeat||"no-repeat"===this[c].repeat?this[c].source.height:this.height,'" fill="url(#'+c+'Pattern)"',"></rect>"):this[c]&&"overlayColor"===c&&b.push('<rect x="0" y="0" ','width="',this.width,'" height="',this.height,'" fill="',this[c],'"',"></rect>")},sendToBack:function(b){d(this._objects,b);this._objects.unshift(b);return this.renderAll&&this.renderAll()},bringToFront:function(b){d(this._objects,
b);this._objects.push(b);return this.renderAll&&this.renderAll()},sendBackwards:function(b,c){var e=this._objects.indexOf(b);0!==e&&(e=this._findNewLowerIndex(b,e,c),d(this._objects,b),this._objects.splice(e,0,b),this.renderAll&&this.renderAll());return this},_findNewLowerIndex:function(b,c,d){if(d)for(d=c,c-=1;0<=c;--c){if(b.intersectsWithObject(this._objects[c])||b.isContainedWithinObject(this._objects[c])||this._objects[c].isContainedWithinObject(b)){d=c;break}}else d=c-1;return d},bringForward:function(b,
c){var e=this._objects.indexOf(b);e!==this._objects.length-1&&(e=this._findNewUpperIndex(b,e,c),d(this._objects,b),this._objects.splice(e,0,b),this.renderAll&&this.renderAll());return this},_findNewUpperIndex:function(b,c,d){if(d)for(d=c,c+=1;c<this._objects.length;++c){if(b.intersectsWithObject(this._objects[c])||b.isContainedWithinObject(this._objects[c])||this._objects[c].isContainedWithinObject(b)){d=c;break}}else d=c+1;return d},moveTo:function(b,c){d(this._objects,b);this._objects.splice(c,
0,b);return this.renderAll&&this.renderAll()},dispose:function(){this.clear();this.interactive&&this.removeListeners();return this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this.getObjects().length+" }>"}});b(f.StaticCanvas.prototype,f.Observable);b(f.StaticCanvas.prototype,f.Collection);b(f.StaticCanvas.prototype,f.DataURLExporter);b(f.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(b){var c=f.util.createCanvasElement();
if(!c||!c.getContext)return null;var d=c.getContext("2d");if(!d)return null;switch(b){case "getImageData":return"undefined"!==typeof d.getImageData;case "setLineDash":return"undefined"!==typeof d.setLineDash;case "toDataURL":return"undefined"!==typeof c.toDataURL;case "toDataURLWithQuality":try{return c.toDataURL("image/jpeg",0),!0}catch(e){}return!1;default:return null}}});f.StaticCanvas.prototype.toJSON=f.StaticCanvas.prototype.toObject}})();f.BaseBrush=f.util.createClass({color:"rgb(0, 0, 0)",
width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",setShadow:function(b){this.shadow=new f.Shadow(b);return this},_setBrushStyles:function(){var b=this.canvas.contextTop;b.strokeStyle=this.color;b.lineWidth=this.width;b.lineCap=this.strokeLineCap;b.lineJoin=this.strokeLineJoin},_setShadow:function(){if(this.shadow){var b=this.canvas.contextTop;b.shadowColor=this.shadow.color;b.shadowBlur=this.shadow.blur;b.shadowOffsetX=this.shadow.offsetX;b.shadowOffsetY=this.shadow.offsetY}},_resetShadow:function(){var b=
this.canvas.contextTop;b.shadowColor="";b.shadowBlur=b.shadowOffsetX=b.shadowOffsetY=0}});(function(){var b=f.util.array.min,c=f.util.array.max;f.PencilBrush=f.util.createClass(f.BaseBrush,{initialize:function(b){this.canvas=b;this._points=[]},onMouseDown:function(b){this._prepareForDrawing(b);this._captureDrawingPath(b);this._render()},onMouseMove:function(b){this._captureDrawingPath(b);this.canvas.clearContext(this.canvas.contextTop);this._render()},onMouseUp:function(){this._finalizeAndAddPath()},
_prepareForDrawing:function(b){b=new f.Point(b.x,b.y);this._reset();this._addPoint(b);this.canvas.contextTop.moveTo(b.x,b.y)},_addPoint:function(b){this._points.push(b)},_reset:function(){this._points.length=0;this._setBrushStyles();this._setShadow()},_captureDrawingPath:function(b){b=new f.Point(b.x,b.y);this._addPoint(b)},_render:function(){var b=this.canvas.contextTop,c=this.canvas.viewportTransform,d=this._points[0],e=this._points[1];b.save();b.transform(c[0],c[1],c[2],c[3],c[4],c[5]);b.beginPath();
2===this._points.length&&d.x===e.x&&d.y===e.y&&(d.x-=.5,e.x+=.5);b.moveTo(d.x,d.y);for(var c=1,g=this._points.length;c<g;c++)e=d.midPointFrom(e),b.quadraticCurveTo(d.x,d.y,e.x,e.y),d=this._points[c],e=this._points[c+1];b.lineTo(d.x,d.y);b.stroke();b.restore()},_getSVGPathData:function(){this.box=this.getPathBoundingBox(this._points);return this.convertPointsToSVGPath(this._points,this.box.minX,this.box.minY)},getPathBoundingBox:function(d){for(var e=[],f=[],n=d[0],r=d[1],q=n,w=1,u=d.length;w<u;w++){var x=
n.midPointFrom(r);e.push(q.x);e.push(x.x);f.push(q.y);f.push(x.y);n=d[w];r=d[w+1];q=x}e.push(n.x);f.push(n.y);return{minX:b(e),minY:b(f),maxX:c(e),maxY:c(f)}},convertPointsToSVGPath:function(b,c,d){var e=[],g=new f.Point(b[0].x-c,b[0].y-d),h=new f.Point(b[1].x-c,b[1].y-d);e.push("M ",b[0].x-c," ",b[0].y-d," ");for(var n=1,u=b.length;n<u;n++){var x=g.midPointFrom(h);e.push("Q ",g.x," ",g.y," ",x.x," ",x.y," ");g=new f.Point(b[n].x-c,b[n].y-d);n+1<b.length&&(h=new f.Point(b[n+1].x-c,b[n+1].y-d))}e.push("L ",
g.x," ",g.y," ");return e},createPath:function(b){b=new f.Path(b);b.fill=null;b.stroke=this.color;b.strokeWidth=this.width;b.strokeLineCap=this.strokeLineCap;b.strokeLineJoin=this.strokeLineJoin;this.shadow&&(this.shadow.affectStroke=!0,b.setShadow(this.shadow));return b},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath();var b=this._getSVGPathData().join("");if("M 0 0 Q 0 0 0 0 L 0 0"===b)this.canvas.renderAll();else{var c=this.box.minX+(this.box.maxX-this.box.minX)/2,d=this.box.minY+
(this.box.maxY-this.box.minY)/2;this.canvas.contextTop.arc(c,d,3,0,2*Math.PI,!1);b=this.createPath(b);b.set({left:c,top:d,originX:"center",originY:"center"});this.canvas.add(b);b.setCoords();this.canvas.clearContext(this.canvas.contextTop);this._resetShadow();this.canvas.renderAll();this.canvas.fire("path:created",{path:b})}}})})();f.CircleBrush=f.util.createClass(f.BaseBrush,{width:10,initialize:function(b){this.canvas=b;this.points=[]},drawDot:function(b){b=this.addPoint(b);var c=this.canvas.contextTop,
d=this.canvas.viewportTransform;c.save();c.transform(d[0],d[1],d[2],d[3],d[4],d[5]);c.fillStyle=b.fill;c.beginPath();c.arc(b.x,b.y,b.radius,0,2*Math.PI,!1);c.closePath();c.fill();c.restore()},onMouseDown:function(b){this.points.length=0;this.canvas.clearContext(this.canvas.contextTop);this._setShadow();this.drawDot(b)},onMouseMove:function(b){this.drawDot(b)},onMouseUp:function(){var b=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var c=[],d=0,e=this.points.length;d<e;d++){var p=
this.points[d],p=new f.Circle({radius:p.radius,left:p.x,top:p.y,originX:"center",originY:"center",fill:p.fill});this.shadow&&p.setShadow(this.shadow);c.push(p)}c=new f.Group(c,{originX:"center",originY:"center"});c.canvas=this.canvas;this.canvas.add(c);this.canvas.fire("path:created",{path:c});this.canvas.clearContext(this.canvas.contextTop);this._resetShadow();this.canvas.renderOnAddRemove=b;this.canvas.renderAll()},addPoint:function(b){b=new f.Point(b.x,b.y);var c=f.util.getRandomInt(Math.max(0,
this.width-20),this.width+20)/2,d=(new f.Color(this.color)).setAlpha(f.util.getRandomInt(0,100)/100).toRgba();b.radius=c;b.fill=d;this.points.push(b);return b}});f.SprayBrush=f.util.createClass(f.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(b){this.canvas=b;this.sprayChunks=[]},onMouseDown:function(b){this.sprayChunks.length=0;this.canvas.clearContext(this.canvas.contextTop);this._setShadow();this.addSprayChunk(b);this.render()},
onMouseMove:function(b){this.addSprayChunk(b);this.render()},onMouseUp:function(){var b=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var c=[],d=0,e=this.sprayChunks.length;d<e;d++)for(var p=this.sprayChunks[d],n=0,r=p.length;n<r;n++){var q=new f.Rect({width:p[n].width,height:p[n].width,left:p[n].x+1,top:p[n].y+1,originX:"center",originY:"center",fill:this.color});this.shadow&&q.setShadow(this.shadow);c.push(q)}this.optimizeOverlapping&&(c=this._getOptimizedRects(c));c=new f.Group(c,
{originX:"center",originY:"center"});c.canvas=this.canvas;this.canvas.add(c);this.canvas.fire("path:created",{path:c});this.canvas.clearContext(this.canvas.contextTop);this._resetShadow();this.canvas.renderOnAddRemove=b;this.canvas.renderAll()},_getOptimizedRects:function(b){for(var c={},d,e=0,f=b.length;e<f;e++)d=b[e].left+""+b[e].top,c[d]||(c[d]=b[e]);b=[];for(d in c)b.push(c[d]);return b},render:function(){var b=this.canvas.contextTop;b.fillStyle=this.color;var c=this.canvas.viewportTransform;
b.save();b.transform(c[0],c[1],c[2],c[3],c[4],c[5]);for(var c=0,d=this.sprayChunkPoints.length;c<d;c++){var e=this.sprayChunkPoints[c];"undefined"!==typeof e.opacity&&(b.globalAlpha=e.opacity);b.fillRect(e.x,e.y,e.width,e.width)}b.restore()},addSprayChunk:function(b){this.sprayChunkPoints=[];for(var c,d,e,p=this.width/2,n=0;n<this.density;n++)c=f.util.getRandomInt(b.x-p,b.x+p),d=f.util.getRandomInt(b.y-p,b.y+p),e=this.dotWidthVariance?f.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),
this.dotWidth+this.dotWidthVariance):this.dotWidth,c=new f.Point(c,d),c.width=e,this.randomOpacity&&(c.opacity=f.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(c);this.sprayChunks.push(this.sprayChunkPoints)}});f.PatternBrush=f.util.createClass(f.PencilBrush,{getPatternSrc:function(){var b=f.document.createElement("canvas"),c=b.getContext("2d");b.width=b.height=25;c.fillStyle=this.color;c.beginPath();c.arc(10,10,10,0,2*Math.PI,!1);c.closePath();c.fill();return b},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",
'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles");this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(b){b=this.callSuper("createPath",b);b.stroke=new f.Pattern({source:this.source||this.getPatternSrcFunction()});return b}});f.util.object.extend(f.StaticCanvas.prototype,{toDataURL:function(b){b||(b={});var c=b.format||"png",d=b.quality||
1,e=b.multiplier||1;b={left:b.left,top:b.top,width:b.width,height:b.height};return 1!==e?this.__toDataURLWithMultiplier(c,d,b,e):this.__toDataURL(c,d,b)},__toDataURL:function(b,c,d){this.renderAll(!0);var e=this.upperCanvasEl||this.lowerCanvasEl;d=this.__getCroppedCanvas(e,d);"jpg"===b&&(b="jpeg");b=f.StaticCanvas.supports("toDataURLWithQuality")?(d||e).toDataURL("image/"+b,c):(d||e).toDataURL("image/"+b);this.contextTop&&this.clearContext(this.contextTop);this.renderAll();return b},__getCroppedCanvas:function(b,
c){var d,e;if("left"in c||"top"in c||"width"in c||"height"in c)d=f.util.createCanvasElement(),e=d.getContext("2d"),d.width=c.width||this.width,d.height=c.height||this.height,e.drawImage(b,-c.left||0,-c.top||0);return d},__toDataURLWithMultiplier:function(b,c,d,e){var f=this.getWidth(),n=this.getHeight(),r=f*e,q=n*e,w=this.getActiveObject(),u=this.getActiveGroup(),x=this.contextTop||this.contextContainer;1<e&&this.setWidth(r).setHeight(q);x.scale(e,e);d.left&&(d.left*=e);d.top&&(d.top*=e);d.width?
d.width*=e:1>e&&(d.width=r);d.height?d.height*=e:1>e&&(d.height=q);u?this._tempRemoveBordersControlsFromGroup(u):w&&this.deactivateAll&&this.deactivateAll();this.renderAll(!0);b=this.__toDataURL(b,c,d);this.width=f;this.height=n;x.scale(1/e,1/e);this.setWidth(f).setHeight(n);u?this._restoreBordersControlsOnGroup(u):w&&this.setActiveObject&&this.setActiveObject(w);this.contextTop&&this.clearContext(this.contextTop);this.renderAll();return b},toDataURLWithMultiplier:function(b,c,d){return this.toDataURL({format:b,
multiplier:c,quality:d})},_tempRemoveBordersControlsFromGroup:function(b){b.origHasControls=b.hasControls;b.origBorderColor=b.borderColor;b.hasControls=!0;b.borderColor="rgba(0,0,0,0)";b.forEachObject(function(b){b.origBorderColor=b.borderColor;b.borderColor="rgba(0,0,0,0)"})},_restoreBordersControlsOnGroup:function(b){b.hideControls=b.origHideControls;b.borderColor=b.origBorderColor;b.forEachObject(function(b){b.borderColor=b.origBorderColor;delete b.origBorderColor})}});f.util.object.extend(f.StaticCanvas.prototype,
{loadFromDatalessJSON:function(b,c,d){return this.loadFromJSON(b,c,d)},loadFromJSON:function(b,c,d){if(b){var e="string"===typeof b?JSON.parse(b):b;this.clear();var f=this;this._enlivenObjects(e.objects,function(){f._setBgOverlay(e,c)},d);return this}},_setBgOverlay:function(b,c){var d=this,e={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(b.backgroundImage||b.overlayImage||b.background||b.overlay){var f=function(){e.backgroundImage&&e.overlayImage&&e.backgroundColor&&e.overlayColor&&
(d.renderAll(),c&&c())};this.__setBgOverlay("backgroundImage",b.backgroundImage,e,f);this.__setBgOverlay("overlayImage",b.overlayImage,e,f);this.__setBgOverlay("backgroundColor",b.background,e,f);this.__setBgOverlay("overlayColor",b.overlay,e,f);f()}else c&&c()},__setBgOverlay:function(b,c,d,e){var p=this;if(c)if("backgroundImage"===b||"overlayImage"===b)f.Image.fromObject(c,function(c){p[b]=c;d[b]=!0;e&&e()});else this["set"+f.util.string.capitalize(b,!0)](c,function(){d[b]=!0;e&&e()});else d[b]=
!0},_enlivenObjects:function(b,c,d){var e=this;if(b&&0!==b.length){var p=this.renderOnAddRemove;this.renderOnAddRemove=!1;f.util.enlivenObjects(b,function(b){b.forEach(function(b,c){e.insertAt(b,c,!0)});e.renderOnAddRemove=p;c&&c()},null,d)}else c&&c()},_toDataURL:function(b,c){this.clone(function(d){c(d.toDataURL(b))})},_toDataURLWithMultiplier:function(b,c,d){this.clone(function(e){d(e.toDataURLWithMultiplier(b,c))})},clone:function(b,c){var d=JSON.stringify(this.toJSON(c));this.cloneWithoutData(function(c){c.loadFromJSON(d,
function(){b&&b(c)})})},cloneWithoutData:function(b){var c=f.document.createElement("canvas");c.width=this.getWidth();c.height=this.getHeight();var d=new f.Canvas(c);d.clipTo=this.clipTo;this.backgroundImage?(d.setBackgroundImage(this.backgroundImage.src,function(){d.renderAll();b&&b(d)}),d.backgroundImageOpacity=this.backgroundImageOpacity,d.backgroundImageStretch=this.backgroundImageStretch):b&&b(d)}});(function(b){var c=b.fabric||(b.fabric={});b=c.util.object.extend;var d=c.util.toFixed,e=c.util.string.capitalize,
f=c.util.degreesToRadians,n=c.StaticCanvas.supports("setLineDash");c.Object||(c.Object=c.util.createClass({type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,cornerSize:12,transparentCorners:!0,hoverCursor:null,padding:0,borderColor:"rgba(102,153,255,0.75)",cornerColor:"rgba(102,153,255,0.5)",centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"source-over",backgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,
strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:10,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,transformMatrix:null,minScaleLimit:.01,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,hasRotatingPoint:!0,rotatingPointOffset:40,perPixelTargetFind:!1,includeDefaultValues:!0,clipTo:null,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockUniScaling:!1,lockScalingFlip:!1,stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeLineJoin strokeMiterLimit angle opacity fill fillRule shadow clipTo visible backgroundColor".split(" "),
initialize:function(b){b&&this.setOptions(b)},_initGradient:function(b){!b.fill||!b.fill.colorStops||b.fill instanceof c.Gradient||this.set("fill",new c.Gradient(b.fill))},_initPattern:function(b){!b.fill||!b.fill.source||b.fill instanceof c.Pattern||this.set("fill",new c.Pattern(b.fill));!b.stroke||!b.stroke.source||b.stroke instanceof c.Pattern||this.set("stroke",new c.Pattern(b.stroke))},_initClipping:function(b){b.clipTo&&"string"===typeof b.clipTo&&(b=c.util.getFunctionBody(b.clipTo),"undefined"!==
typeof b&&(this.clipTo=new Function("ctx",b)))},setOptions:function(b){for(var c in b)this.set(c,b[c]);this._initGradient(b);this._initPattern(b);this._initClipping(b)},transform:function(b,c){this.group&&this.group.transform(b,c);b.globalAlpha=this.opacity;var d=c?this._getLeftTopCoords():this.getCenterPoint();b.translate(d.x,d.y);b.rotate(f(this.angle));b.scale(this.scaleX*(this.flipX?-1:1),this.scaleY*(this.flipY?-1:1))},toObject:function(b){var e=c.Object.NUM_FRACTION_DIGITS,e={type:this.type,
originX:this.originX,originY:this.originY,left:d(this.left,e),top:d(this.top,e),width:d(this.width,e),height:d(this.height,e),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:d(this.strokeWidth,e),strokeDashArray:this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:d(this.strokeMiterLimit,e),scaleX:d(this.scaleX,e),scaleY:d(this.scaleY,e),angle:d(this.getAngle(),
e),flipX:this.flipX,flipY:this.flipY,opacity:d(this.opacity,e),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,clipTo:this.clipTo&&String(this.clipTo),backgroundColor:this.backgroundColor};this.includeDefaultValues||(e=this._removeDefaultValues(e));c.util.populateWithProperties(this,e,b);return e},toDatalessObject:function(b){return this.toObject(b)},_removeDefaultValues:function(b){var d=c.util.getKlass(b.type).prototype;d.stateProperties.forEach(function(c){b[c]===
d[c]&&delete b[c]});return b},toString:function(){return"#<fabric."+e(this.type)+">"},get:function(b){return this[b]},_setObject:function(b){for(var c in b)this._set(c,b[c])},set:function(b,c){"object"===typeof b?this._setObject(b):"function"===typeof c&&"clipTo"!==b?this._set(b,c(this.get(b))):this._set(b,c);return this},_set:function(b,e){if("scaleX"===b||"scaleY"===b)e=this._constrainScale(e);"scaleX"===b&&0>e?(this.flipX=!this.flipX,e*=-1):"scaleY"===b&&0>e?(this.flipY=!this.flipY,e*=-1):"width"===
b||"height"===b?this.minScaleLimit=d(Math.min(.1,1/Math.max(this.width,this.height)),2):"shadow"!==b||!e||e instanceof c.Shadow||(e=new c.Shadow(e));this[b]=e;return this},toggle:function(b){var c=this.get(b);"boolean"===typeof c&&this.set(b,!c);return this},setSourcePath:function(b){this.sourcePath=b;return this},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:[1,0,0,1,0,0]},render:function(b,d){if(0!==this.width&&0!==this.height&&this.visible){b.save();
this._setupFillRule(b);this._transform(b,d);this._setStrokeStyles(b);this._setFillStyles(b);if(this.group&&"path-group"===this.group.type){b.translate(-this.group.width/2,-this.group.height/2);var e=this.transformMatrix;e&&b.transform.apply(b,e)}b.globalAlpha=this.group?b.globalAlpha*this.opacity:this.opacity;this._setShadow(b);this.clipTo&&c.util.clipContext(this,b);this._render(b,d);this.clipTo&&b.restore();this._removeShadow(b);this._restoreFillRule(b);b.restore()}},_transform:function(b,c){var d=
this.transformMatrix;d&&!this.group&&b.setTransform.apply(b,d);c||this.transform(b)},_setStrokeStyles:function(b){this.stroke&&(b.lineWidth=this.strokeWidth,b.lineCap=this.strokeLineCap,b.lineJoin=this.strokeLineJoin,b.miterLimit=this.strokeMiterLimit,b.strokeStyle=this.stroke.toLive?this.stroke.toLive(b):this.stroke)},_setFillStyles:function(b){this.fill&&(b.fillStyle=this.fill.toLive?this.fill.toLive(b):this.fill)},_renderControls:function(b,d){var e=this.getViewportTransform();b.save();if(this.active&&
!d){var h;this.group&&(h=c.util.transformPoint(this.group.getCenterPoint(),e),b.translate(h.x,h.y),b.rotate(f(this.group.angle)));h=c.util.transformPoint(this.getCenterPoint(),e,null!=this.group);this.group&&(h.x*=this.group.scaleX,h.y*=this.group.scaleY);b.translate(h.x,h.y);b.rotate(f(this.angle));this.drawBorders(b);this.drawControls(b)}b.restore()},_setShadow:function(b){this.shadow&&(b.shadowColor=this.shadow.color,b.shadowBlur=this.shadow.blur,b.shadowOffsetX=this.shadow.offsetX,b.shadowOffsetY=
this.shadow.offsetY)},_removeShadow:function(b){this.shadow&&(b.shadowColor="",b.shadowBlur=b.shadowOffsetX=b.shadowOffsetY=0)},_renderFill:function(b){this.fill&&(b.save(),this.fill.toLive&&b.translate(-this.width/2+this.fill.offsetX||0,-this.height/2+this.fill.offsetY||0),this.fill.gradientTransform&&b.transform.apply(b,this.fill.gradientTransform),"destination-over"===this.fillRule?b.fill("evenodd"):b.fill(),b.restore(),this.shadow&&!this.shadow.affectStroke&&this._removeShadow(b))},_renderStroke:function(b){this.stroke&&
0!==this.strokeWidth&&(b.save(),this.strokeDashArray?(1&this.strokeDashArray.length&&this.strokeDashArray.push.apply(this.strokeDashArray,this.strokeDashArray),n?(b.setLineDash(this.strokeDashArray),this._stroke&&this._stroke(b)):this._renderDashedStroke&&this._renderDashedStroke(b),b.stroke()):(this.stroke.gradientTransform&&b.transform.apply(b,this.stroke.gradientTransform),this._stroke?this._stroke(b):b.stroke()),this._removeShadow(b),b.restore())},clone:function(b,d){return this.constructor.fromObject?
this.constructor.fromObject(this.toObject(d),b):new c.Object(this.toObject(d))},cloneAsImage:function(b){var d=this.toDataURL();c.util.loadImage(d,function(d){b&&b(new c.Image(d))});return this},toDataURL:function(b){b||(b={});var d=c.util.createCanvasElement(),e=this.getBoundingRect();d.width=e.width;d.height=e.height;c.util.wrapElement(d,"div");e=new c.Canvas(d);"jpg"===b.format&&(b.format="jpeg");"jpeg"===b.format&&(e.backgroundColor="#fff");var f={active:this.get("active"),left:this.getLeft(),
top:this.getTop()};this.set("active",!1);this.setPositionByOrigin(new c.Point(d.width/2,d.height/2),"center","center");d=this.canvas;e.add(this);b=e.toDataURL(b);this.set(f).setCoords();this.canvas=d;e.dispose();return b},isType:function(b){return this.type===b},complexity:function(){return 0},toJSON:function(b){return this.toObject(b)},setGradient:function(b,d){d||(d={});var e={colorStops:[]};e.type=d.type||(d.r1||d.r2?"radial":"linear");e.coords={x1:d.x1,y1:d.y1,x2:d.x2,y2:d.y2};if(d.r1||d.r2)e.coords.r1=
d.r1,e.coords.r2=d.r2;for(var f in d.colorStops){var h=new c.Color(d.colorStops[f]);e.colorStops.push({offset:f,color:h.toRgb(),opacity:h.getAlpha()})}return this.set(b,c.Gradient.forObject(this,e))},setPatternFill:function(b){return this.set("fill",new c.Pattern(b))},setShadow:function(b){return this.set("shadow",b?new c.Shadow(b):null)},setColor:function(b){this.set("fill",b);return this},setAngle:function(b){var c=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;c&&this._setOriginToCenter();
this.set("angle",b);c&&this._resetOrigin();return this},centerH:function(){this.canvas.centerObjectH(this);return this},centerV:function(){this.canvas.centerObjectV(this);return this},center:function(){this.canvas.centerObject(this);return this},remove:function(){this.canvas.remove(this);return this},getLocalPointer:function(b,c){c=c||this.canvas.getPointer(b);var d=this.translateToOriginPoint(this.getCenterPoint(),"left","top");return{x:c.x-d.x,y:c.y-d.y}},_setupFillRule:function(b){this.fillRule&&
(this._prevFillRule=b.globalCompositeOperation,b.globalCompositeOperation=this.fillRule)},_restoreFillRule:function(b){this.fillRule&&this._prevFillRule&&(b.globalCompositeOperation=this._prevFillRule)}}),c.util.createAccessors(c.Object),c.Object.prototype.rotate=c.Object.prototype.setAngle,b(c.Object.prototype,c.Observable),c.Object.NUM_FRACTION_DIGITS=2,c.Object.__uid=0)})("undefined"!==typeof e?e:this);(function(){var b=f.util.degreesToRadians;f.util.object.extend(f.Object.prototype,{translateToCenterPoint:function(c,
d,e){var p=c.x,n=c.y,r=this.stroke?this.strokeWidth:0;"left"===d?p=c.x+(this.getWidth()+r*this.scaleX)/2:"right"===d&&(p=c.x-(this.getWidth()+r*this.scaleX)/2);"top"===e?n=c.y+(this.getHeight()+r*this.scaleY)/2:"bottom"===e&&(n=c.y-(this.getHeight()+r*this.scaleY)/2);return f.util.rotatePoint(new f.Point(p,n),c,b(this.angle))},translateToOriginPoint:function(c,d,e){var p=c.x,n=c.y,r=this.stroke?this.strokeWidth:0;"left"===d?p=c.x-(this.getWidth()+r*this.scaleX)/2:"right"===d&&(p=c.x+(this.getWidth()+
r*this.scaleX)/2);"top"===e?n=c.y-(this.getHeight()+r*this.scaleY)/2:"bottom"===e&&(n=c.y+(this.getHeight()+r*this.scaleY)/2);return f.util.rotatePoint(new f.Point(p,n),c,b(this.angle))},getCenterPoint:function(){var b=new f.Point(this.left,this.top);return this.translateToCenterPoint(b,this.originX,this.originY)},getPointByOrigin:function(b,c){var d=this.getCenterPoint();return this.translateToOriginPoint(d,b,c)},toLocalPoint:function(c,d,e){var p=this.getCenterPoint(),n=this.stroke?this.strokeWidth:
0;d&&e?(d="left"===d?p.x-(this.getWidth()+n*this.scaleX)/2:"right"===d?p.x+(this.getWidth()+n*this.scaleX)/2:p.x,e="top"===e?p.y-(this.getHeight()+n*this.scaleY)/2:"bottom"===e?p.y+(this.getHeight()+n*this.scaleY)/2:p.y):(d=this.left,e=this.top);return f.util.rotatePoint(new f.Point(c.x,c.y),p,-b(this.angle)).subtractEquals(new f.Point(d,e))},setPositionByOrigin:function(b,c,d){b=this.translateToCenterPoint(b,c,d);b=this.translateToOriginPoint(b,this.originX,this.originY);this.set("left",b.x);this.set("top",
b.y)},adjustPosition:function(c){var d=b(this.angle),e=this.getWidth()/2,f=Math.cos(d)*e,e=Math.sin(d)*e,n=this.getWidth(),r=Math.cos(d)*n,d=Math.sin(d)*n;"center"===this.originX&&"left"===c||"right"===this.originX&&"center"===c?(this.left-=f,this.top-=e):"left"===this.originX&&"center"===c||"center"===this.originX&&"right"===c?(this.left+=f,this.top+=e):"left"===this.originX&&"right"===c?(this.left+=r,this.top+=d):"right"===this.originX&&"left"===c&&(this.left-=r,this.top-=d);this.setCoords();this.originX=
c},_setOriginToCenter:function(){this._originalOriginX=this.originX;this._originalOriginY=this.originY;var b=this.getCenterPoint();this.originY=this.originX="center";this.left=b.x;this.top=b.y},_resetOrigin:function(){var b=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX;this.originY=this._originalOriginY;this.left=b.x;this.top=b.y;this._originalOriginY=this._originalOriginX=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),
"left","center")}})})();(function(){var b=f.util.degreesToRadians;f.util.object.extend(f.Object.prototype,{oCoords:null,intersectsWithRect:function(b,c){var d=this.oCoords,e=new f.Point(d.tl.x,d.tl.y),h=new f.Point(d.tr.x,d.tr.y),n=new f.Point(d.bl.x,d.bl.y),d=new f.Point(d.br.x,d.br.y);return"Intersection"===f.Intersection.intersectPolygonRectangle([e,h,d,n],b,c).status},intersectsWithObject:function(b){function c(b){return{tl:new f.Point(b.tl.x,b.tl.y),tr:new f.Point(b.tr.x,b.tr.y),bl:new f.Point(b.bl.x,
b.bl.y),br:new f.Point(b.br.x,b.br.y)}}var d=c(this.oCoords);b=c(b.oCoords);return"Intersection"===f.Intersection.intersectPolygonPolygon([d.tl,d.tr,d.br,d.bl],[b.tl,b.tr,b.br,b.bl]).status},isContainedWithinObject:function(b){var c=b.getBoundingRect();b=new f.Point(c.left,c.top);c=new f.Point(c.left+c.width,c.top+c.height);return this.isContainedWithinRect(b,c)},isContainedWithinRect:function(b,c){var d=this.getBoundingRect();return d.left>=b.x&&d.left+d.width<=c.x&&d.top>=b.y&&d.top+d.height<=c.y},
containsPoint:function(b){var c=this._getImageLines(this.oCoords);b=this._findCrossPoints(b,c);return 0!==b&&1===b%2},_getImageLines:function(b){return{topline:{o:b.tl,d:b.tr},rightline:{o:b.tr,d:b.br},bottomline:{o:b.br,d:b.bl},leftline:{o:b.bl,d:b.tl}}},_findCrossPoints:function(b,c){var d,e,f,h=0,n;for(n in c)if(f=c[n],!(f.o.y<b.y&&f.d.y<b.y||f.o.y>=b.y&&f.d.y>=b.y)&&(f.o.x===f.d.x&&f.o.x>=b.x?d=f.o.x:(d=(f.d.y-f.o.y)/(f.d.x-f.o.x),e=b.y-0*b.x,f=f.o.y-d*f.o.x,d=-(e-f)/(0-d)),d>=b.x&&(h+=1),2===
h))break;return h},getBoundingRectWidth:function(){return this.getBoundingRect().width},getBoundingRectHeight:function(){return this.getBoundingRect().height},getBoundingRect:function(){this.oCoords||this.setCoords();var b=[this.oCoords.tl.x,this.oCoords.tr.x,this.oCoords.br.x,this.oCoords.bl.x],c=f.util.array.min(b),b=f.util.array.max(b),b=Math.abs(c-b),d=[this.oCoords.tl.y,this.oCoords.tr.y,this.oCoords.br.y,this.oCoords.bl.y],e=f.util.array.min(d),d=f.util.array.max(d),d=Math.abs(e-d);return{left:c,
top:e,width:b,height:d}},getWidth:function(){return this.width*this.scaleX},getHeight:function(){return this.height*this.scaleY},_constrainScale:function(b){return Math.abs(b)<this.minScaleLimit?0>b?-this.minScaleLimit:this.minScaleLimit:b},scale:function(b){b=this._constrainScale(b);0>b&&(this.flipX=!this.flipX,this.flipY=!this.flipY,b*=-1);this.scaleY=this.scaleX=b;this.setCoords();return this},scaleToWidth:function(b){var c=this.getBoundingRectWidth()/this.getWidth();return this.scale(b/this.width/
c)},scaleToHeight:function(b){var c=this.getBoundingRectHeight()/this.getHeight();return this.scale(b/this.height/c)},setCoords:function(){var c=1<this.strokeWidth?this.strokeWidth:0,d=b(this.angle),e=this.getViewportTransform(),p=function(b){return f.util.transformPoint(b,e)},n=this.width,r=this.height,q="round"===this.strokeLineCap||"square"===this.strokeLineCap,w="line"===this.type&&1===this.width,u="line"===this.type&&1===this.height,x=q&&u||"line"!==this.type,q=q&&w||"line"!==this.type;w?n=c:
u&&(r=c);x&&(n+=c);q&&(r+=c);this.currentWidth=n*this.scaleX;this.currentHeight=r*this.scaleY;0>this.currentWidth&&(this.currentWidth=Math.abs(this.currentWidth));var r=Math.sqrt(Math.pow(this.currentWidth/2,2)+Math.pow(this.currentHeight/2,2)),c=Math.atan(isFinite(this.currentHeight/this.currentWidth)?this.currentHeight/this.currentWidth:0),n=Math.cos(c+d)*r,r=Math.sin(c+d)*r,x=Math.sin(d),q=Math.cos(d),w=this.getCenterPoint(),z=new f.Point(this.currentWidth,this.currentHeight),y=new f.Point(w.x-
n,w.y-r),B=new f.Point(y.x+z.x*q,y.y+z.x*x),A=new f.Point(y.x-z.y*x,y.y+z.y*q),C=new f.Point(y.x+z.x/2*q,y.y+z.x/2*x),n=p(y),r=p(B),w=p(new f.Point(B.x-z.y*x,B.y+z.y*q)),u=p(A),y=p(new f.Point(y.x-z.y/2*x,y.y+z.y/2*q)),D=p(C),B=p(new f.Point(B.x-z.y/2*x,B.y+z.y/2*q)),x=p(new f.Point(A.x+z.x/2*q,A.y+z.x/2*x)),p=p(new f.Point(C.x,C.y)),q=Math.cos(c+d)*this.padding*Math.sqrt(2),d=Math.sin(c+d)*this.padding*Math.sqrt(2),n=n.add(new f.Point(-q,-d)),r=r.add(new f.Point(d,-q)),w=w.add(new f.Point(q,d)),
u=u.add(new f.Point(-d,q)),y=y.add(new f.Point((-q-d)/2,(-d+q)/2)),D=D.add(new f.Point((d-q)/2,-(d+q)/2)),B=B.add(new f.Point((d+q)/2,(d-q)/2)),x=x.add(new f.Point((q-d)/2,(q+d)/2)),p=p.add(new f.Point((d-q)/2,-(d+q)/2));this.oCoords={tl:n,tr:r,br:w,bl:u,ml:y,mt:D,mr:B,mb:x,mtr:p};this._setCornerCoords&&this._setCornerCoords();return this}})})();f.util.object.extend(f.Object.prototype,{sendToBack:function(){this.group?f.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas.sendToBack(this);
return this},bringToFront:function(){this.group?f.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas.bringToFront(this);return this},sendBackwards:function(b){this.group?f.StaticCanvas.prototype.sendBackwards.call(this.group,this,b):this.canvas.sendBackwards(this,b);return this},bringForward:function(b){this.group?f.StaticCanvas.prototype.bringForward.call(this.group,this,b):this.canvas.bringForward(this,b);return this},moveTo:function(b){this.group?f.StaticCanvas.prototype.moveTo.call(this.group,
this,b):this.canvas.moveTo(this,b);return this}});f.util.object.extend(f.Object.prototype,{getSvgStyles:function(){var b=this.fill?this.fill.toLive?"url(#SVGID_"+this.fill.id+")":this.fill:"none",c="destination-over"===this.fillRule?"evenodd":this.fillRule,d=this.stroke?this.stroke.toLive?"url(#SVGID_"+this.stroke.id+")":this.stroke:"none",e=this.strokeWidth?this.strokeWidth:"0",f=this.strokeDashArray?this.strokeDashArray.join(" "):"";return["stroke: ",d,"; stroke-width: ",e,"; stroke-dasharray: ",
f,"; stroke-linecap: ",this.strokeLineCap?this.strokeLineCap:"butt","; stroke-linejoin: ",this.strokeLineJoin?this.strokeLineJoin:"miter","; stroke-miterlimit: ",this.strokeMiterLimit?this.strokeMiterLimit:"4","; fill: ",b,"; fill-rule: ",c,"; opacity: ","undefined"!==typeof this.opacity?this.opacity:"1",";",this.shadow&&"text"!==this.type?"filter: url(#SVGID_"+this.shadow.id+");":"",this.visible?"":" visibility: hidden;"].join("")},getSvgTransform:function(){if(this.group)return"";var b=f.util.toFixed,
c=this.getAngle(),d=!this.canvas||this.canvas.svgViewportTransformation?this.getViewportTransform():[1,0,0,1,0,0],e=f.util.transformPoint(this.getCenterPoint(),d),p=f.Object.NUM_FRACTION_DIGITS,e="path-group"===this.type?"":"translate("+b(e.x,p)+" "+b(e.y,p)+")",c=0!==c?" rotate("+b(c,p)+")":"",b=1===this.scaleX&&1===this.scaleY&&1===d[0]&&1===d[3]?"":" scale("+b(this.scaleX*d[0],p)+" "+b(this.scaleY*d[3],p)+")",p="path-group"===this.type?this.width*d[0]:0,d="path-group"===this.type?this.height*d[3]:
0;return[e,c,b,this.flipX?" matrix(-1 0 0 1 "+p+" 0) ":"",this.flipY?" matrix(1 0 0 -1 0 "+d+")":""].join("")},getSvgTransformMatrix:function(){return this.transformMatrix?" matrix("+this.transformMatrix.join(" ")+")":""},_createBaseSVGMarkup:function(){var b=[];this.fill&&this.fill.toLive&&b.push(this.fill.toSVG(this,!1));this.stroke&&this.stroke.toLive&&b.push(this.stroke.toSVG(this,!1));this.shadow&&b.push(this.shadow.toSVG(this));return b}});f.util.object.extend(f.Object.prototype,{hasStateChanged:function(){return this.stateProperties.some(function(b){return this.get(b)!==
this.originalState[b]},this)},saveState:function(b){this.stateProperties.forEach(function(b){this.originalState[b]=this.get(b)},this);b&&b.stateProperties&&b.stateProperties.forEach(function(b){this.originalState[b]=this.get(b)},this);return this},setupState:function(){this.originalState={};this.saveState();return this}});(function(b){function c(b,d){var e=b.origin,g=b.axis1,f=b.axis2,h=b.dimension,l=d.nearest,m=d.center,p=d.farthest;return function(){switch(this.get(e)){case l:return Math.min(this.get(g),
this.get(f));case m:return Math.min(this.get(g),this.get(f))+.5*this.get(h);case p:return Math.max(this.get(g),this.get(f))}}}var d=b.fabric||(b.fabric={}),e=d.util.object.extend,f={x1:1,x2:1,y1:1,y2:1},n=d.StaticCanvas.supports("setLineDash");d.Line?d.warn("fabric.Line is already defined"):(d.Line=d.util.createClass(d.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,initialize:function(b,c){c=c||{};b||(b=[0,0,0,0]);this.callSuper("initialize",c);this.set("x1",b[0]);this.set("y1",b[1]);this.set("x2",b[2]);
this.set("y2",b[3]);this._setWidthHeight(c)},_setWidthHeight:function(b){b||(b={});this.width=Math.abs(this.x2-this.x1)||1;this.height=Math.abs(this.y2-this.y1)||1;this.left="left"in b?b.left:this._getLeftToOriginX();this.top="top"in b?b.top:this._getTopToOriginY()},_set:function(b,c){this[b]=c;"undefined"!==typeof f[b]&&this._setWidthHeight();return this},_getLeftToOriginX:c({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:c({origin:"originY",
axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(b,c){b.beginPath();if(c){var d=this.getCenterPoint();b.translate(d.x,d.y)}if(!this.strokeDashArray||this.strokeDashArray&&n){var d=this.x1<=this.x2?-1:1,e=this.y1<=this.y2?-1:1;b.moveTo(1===this.width?0:d*this.width/2,1===this.height?0:e*this.height/2);b.lineTo(1===this.width?0:-1*d*this.width/2,1===this.height?0:-1*e*this.height/2)}b.lineWidth=this.strokeWidth;d=b.strokeStyle;b.strokeStyle=
this.stroke||b.fillStyle;this.stroke&&this._renderStroke(b);b.strokeStyle=d},_renderDashedStroke:function(b){var c=this.x1<=this.x2?-1:1,e=this.y1<=this.y2?-1:1,c=1===this.width?0:c*this.width/2,e=1===this.height?0:e*this.height/2;b.beginPath();d.util.drawDashedLine(b,c,e,-c,-e,this.strokeDashArray);b.closePath()},toObject:function(b){return e(this.callSuper("toObject",b),{x1:this.get("x1"),y1:this.get("y1"),x2:this.get("x2"),y2:this.get("y2")})},toSVG:function(b){var c=this._createBaseSVGMarkup(),
d="";this.group||(d="translate("+(-this.width/2-(this.x1>this.x2?this.x2:this.x1))+", "+(-this.height/2-(this.y1>this.y2?this.y2:this.y1))+") ");c.push("<line ",'x1="',this.x1,'" y1="',this.y1,'" x2="',this.x2,'" y2="',this.y2,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),d,this.getSvgTransformMatrix(),'"/>\n');return b?b(c.join("")):c.join("")},complexity:function(){return 1}}),d.Line.ATTRIBUTE_NAMES=d.SHARED_ATTRIBUTES.concat(["x1","y1","x2","y2"]),d.Line.fromElement=function(b,
c){var g=d.parseAttributes(b,d.Line.ATTRIBUTE_NAMES);return new d.Line([g.x1||0,g.y1||0,g.x2||0,g.y2||0],e(g,c))},d.Line.fromObject=function(b){return new d.Line([b.x1,b.y1,b.x2,b.y2],b)})})("undefined"!==typeof e?e:this);(function(b){var c=b.fabric||(b.fabric={}),d=2*Math.PI,e=c.util.object.extend;c.Circle?c.warn("fabric.Circle is already defined."):(c.Circle=c.util.createClass(c.Object,{type:"circle",radius:0,initialize:function(b){b=b||{};this.callSuper("initialize",b);this.set("radius",b.radius||
0)},_set:function(b,c){this.callSuper("_set",b,c);"radius"===b&&this.setRadius(c);return this},toObject:function(b){return e(this.callSuper("toObject",b),{radius:this.get("radius")})},toSVG:function(b){var c=this._createBaseSVGMarkup(),d=0,e=0;this.group&&(d=this.left+this.radius,e=this.top+this.radius);c.push("<circle ",'cx="'+d+'" cy="'+e+'" ','r="',this.radius,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform()," ",this.getSvgTransformMatrix(),'"/>\n');return b?b(c.join("")):
c.join("")},_render:function(b,c){b.beginPath();b.arc(c?this.left+this.radius:0,c?this.top+this.radius:0,this.radius,0,d,!1);this._renderFill(b);this._renderStroke(b)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(b){this.radius=b;this.set("width",2*b).set("height",2*b)},complexity:function(){return 1}}),c.Circle.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat(["cx","cy","r"]),c.Circle.fromElement=
function(b,d){d||(d={});var f=c.parseAttributes(b,c.Circle.ATTRIBUTE_NAMES);if(!("radius"in f&&0<f.radius))throw Error("value of `r` attribute is required and can not be negative");f.left=f.left||0;f.top=f.top||0;f=new c.Circle(e(f,d));f.left-=f.radius;f.top-=f.radius;return f},c.Circle.fromObject=function(b){return new c.Circle(b)})})("undefined"!==typeof e?e:this);(function(b){var c=b.fabric||(b.fabric={});c.Triangle?c.warn("fabric.Triangle is already defined"):(c.Triangle=c.util.createClass(c.Object,
{type:"triangle",initialize:function(b){b=b||{};this.callSuper("initialize",b);this.set("width",b.width||100).set("height",b.height||100)},_render:function(b){var c=this.width/2,d=this.height/2;b.beginPath();b.moveTo(-c,d);b.lineTo(0,-d);b.lineTo(c,d);b.closePath();this._renderFill(b);this._renderStroke(b)},_renderDashedStroke:function(b){var d=this.width/2,e=this.height/2;b.beginPath();c.util.drawDashedLine(b,-d,e,0,-e,this.strokeDashArray);c.util.drawDashedLine(b,0,-e,d,e,this.strokeDashArray);
c.util.drawDashedLine(b,d,e,-d,e,this.strokeDashArray);b.closePath()},toSVG:function(b){var c=this._createBaseSVGMarkup(),d=this.width/2,e=this.height/2,d=[-d+" "+e,"0 "+-e,d+" "+e].join();c.push("<polygon ",'points="',d,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),'"/>');return b?b(c.join("")):c.join("")},complexity:function(){return 1}}),c.Triangle.fromObject=function(b){return new c.Triangle(b)})})("undefined"!==typeof e?e:this);(function(b){var c=b.fabric||(b.fabric=
{}),d=2*Math.PI,e=c.util.object.extend;c.Ellipse?c.warn("fabric.Ellipse is already defined."):(c.Ellipse=c.util.createClass(c.Object,{type:"ellipse",rx:0,ry:0,initialize:function(b){b=b||{};this.callSuper("initialize",b);this.set("rx",b.rx||0);this.set("ry",b.ry||0);this.set("width",2*this.get("rx"));this.set("height",2*this.get("ry"))},toObject:function(b){return e(this.callSuper("toObject",b),{rx:this.get("rx"),ry:this.get("ry")})},toSVG:function(b){var c=this._createBaseSVGMarkup(),d=0,e=0;this.group&&
(d=this.left+this.rx,e=this.top+this.ry);c.push("<ellipse ",'cx="',d,'" cy="',e,'" ','rx="',this.rx,'" ry="',this.ry,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n');return b?b(c.join("")):c.join("")},_render:function(b,c){b.beginPath();b.save();b.transform(1,0,0,this.ry/this.rx,0,0);b.arc(c?this.left+this.rx:0,c?(this.top+this.ry)*this.rx/this.ry:0,this.rx,0,d,!1);b.restore();this._renderFill(b);this._renderStroke(b)},complexity:function(){return 1}}),
c.Ellipse.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat(["cx","cy","rx","ry"]),c.Ellipse.fromElement=function(b,d){d||(d={});var f=c.parseAttributes(b,c.Ellipse.ATTRIBUTE_NAMES);f.left=f.left||0;f.top=f.top||0;f=new c.Ellipse(e(f,d));f.top-=f.ry;f.left-=f.rx;return f},c.Ellipse.fromObject=function(b){return new c.Ellipse(b)})})("undefined"!==typeof e?e:this);(function(b){var c=b.fabric||(b.fabric={}),d=c.util.object.extend;c.Rect?console.warn("fabric.Rect is already defined"):(b=c.Object.prototype.stateProperties.concat(),
b.push("rx","ry","x","y"),c.Rect=c.util.createClass(c.Object,{stateProperties:b,type:"rect",rx:0,ry:0,strokeDashArray:null,initialize:function(b){b=b||{};this.callSuper("initialize",b);this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(b,c){if(1===this.width&&1===this.height)b.fillRect(0,0,1,1);else{var d=this.rx?Math.min(this.rx,this.width/2):0,e=this.ry?Math.min(this.ry,this.height/2):0,g=this.width,f=this.height,h=c?this.left:
-this.width/2,l=c?this.top:-this.height/2,n=0!==d||0!==e;b.beginPath();b.moveTo(h+d,l);b.lineTo(h+g-d,l);n&&b.bezierCurveTo(h+g-.4477152502*d,l,h+g,l+.4477152502*e,h+g,l+e);b.lineTo(h+g,l+f-e);n&&b.bezierCurveTo(h+g,l+f-.4477152502*e,h+g-.4477152502*d,l+f,h+g-d,l+f);b.lineTo(h+d,l+f);n&&b.bezierCurveTo(h+.4477152502*d,l+f,h,l+f-.4477152502*e,h,l+f-e);b.lineTo(h,l+e);n&&b.bezierCurveTo(h,l+.4477152502*e,h+.4477152502*d,l,h+d,l);b.closePath();this._renderFill(b);this._renderStroke(b)}},_renderDashedStroke:function(b){var d=
-this.width/2,e=-this.height/2,f=this.width,h=this.height;b.beginPath();c.util.drawDashedLine(b,d,e,d+f,e,this.strokeDashArray);c.util.drawDashedLine(b,d+f,e,d+f,e+h,this.strokeDashArray);c.util.drawDashedLine(b,d+f,e+h,d,e+h,this.strokeDashArray);c.util.drawDashedLine(b,d,e+h,d,e,this.strokeDashArray);b.closePath()},toObject:function(b){b=d(this.callSuper("toObject",b),{rx:this.get("rx")||0,ry:this.get("ry")||0});this.includeDefaultValues||this._removeDefaultValues(b);return b},toSVG:function(b){var c=
this._createBaseSVGMarkup(),d=this.left,e=this.top;this.group||(d=-this.width/2,e=-this.height/2);c.push("<rect ",'x="',d,'" y="',e,'" rx="',this.get("rx"),'" ry="',this.get("ry"),'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n');return b?b(c.join("")):c.join("")},complexity:function(){return 1}}),c.Rect.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),c.Rect.fromElement=
function(b,e){if(!b)return null;e=e||{};var f=c.parseAttributes(b,c.Rect.ATTRIBUTE_NAMES);f.left=f.left||0;f.top=f.top||0;return new c.Rect(d(e?c.util.object.clone(e):{},f))},c.Rect.fromObject=function(b){return new c.Rect(b)})})("undefined"!==typeof e?e:this);(function(b){var c=b.fabric||(b.fabric={}),d=c.util.toFixed;c.Polyline?c.warn("fabric.Polyline is already defined"):(c.Polyline=c.util.createClass(c.Object,{type:"polyline",points:null,initialize:function(b,c){c=c||{};this.set("points",b);this.callSuper("initialize",
c);this._calcDimensions()},_calcDimensions:function(){return c.Polygon.prototype._calcDimensions.call(this)},_applyPointOffset:function(){return c.Polygon.prototype._applyPointOffset.call(this)},toObject:function(b){return c.Polygon.prototype.toObject.call(this,b)},toSVG:function(b){for(var c=[],e=this._createBaseSVGMarkup(),g=0,f=this.points.length;g<f;g++)c.push(d(this.points[g].x,2),",",d(this.points[g].y,2)," ");e.push("<polyline ",'points="',c.join(""),'" style="',this.getSvgStyles(),'" transform="',
this.getSvgTransform()," ",this.getSvgTransformMatrix(),'"/>\n');return b?b(e.join("")):e.join("")},_render:function(b){var c;b.beginPath();this._applyPointOffset&&(this.group&&"path-group"===this.group.type||this._applyPointOffset(),this._applyPointOffset=null);b.moveTo(this.points[0].x,this.points[0].y);for(var d=0,e=this.points.length;d<e;d++)c=this.points[d],b.lineTo(c.x,c.y);this._renderFill(b);this._renderStroke(b)},_renderDashedStroke:function(b){var d,e;b.beginPath();for(var f=0,h=this.points.length;f<
h;f++)d=this.points[f],e=this.points[f+1]||d,c.util.drawDashedLine(b,d.x,d.y,e.x,e.y,this.strokeDashArray)},complexity:function(){return this.get("points").length}}),c.Polyline.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat(),c.Polyline.fromElement=function(b,d){if(!b)return null;d||(d={});var e=c.parsePointsAttribute(b.getAttribute("points")),f=c.parseAttributes(b,c.Polyline.ATTRIBUTE_NAMES);return null===e?null:new c.Polyline(e,c.util.object.extend(f,d))},c.Polyline.fromObject=function(b){return new c.Polyline(b.points,
b,!0)})})("undefined"!==typeof e?e:this);(function(b){var c=b.fabric||(b.fabric={}),d=c.util.object.extend,e=c.util.array.min,f=c.util.array.max,n=c.util.toFixed;c.Polygon?c.warn("fabric.Polygon is already defined"):(c.Polygon=c.util.createClass(c.Object,{type:"polygon",points:null,initialize:function(b,c){c=c||{};this.points=b;this.callSuper("initialize",c);this._calcDimensions()},_calcDimensions:function(){var b=this.points,c=e(b,"x"),d=e(b,"y"),g=f(b,"x"),b=f(b,"y");this.width=g-c||1;this.height=
b-d||1;this.left=c;this.top=d},_applyPointOffset:function(){this.points.forEach(function(b){b.x-=this.left+this.width/2;b.y-=this.top+this.height/2},this)},toObject:function(b){return d(this.callSuper("toObject",b),{points:this.points.concat()})},toSVG:function(b){for(var c=[],d=this._createBaseSVGMarkup(),e=0,g=this.points.length;e<g;e++)c.push(n(this.points[e].x,2),",",n(this.points[e].y,2)," ");d.push("<polygon ",'points="',c.join(""),'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),
" ",this.getSvgTransformMatrix(),'"/>\n');return b?b(d.join("")):d.join("")},_render:function(b){var c;b.beginPath();this._applyPointOffset&&(this.group&&"path-group"===this.group.type||this._applyPointOffset(),this._applyPointOffset=null);b.moveTo(this.points[0].x,this.points[0].y);for(var d=0,e=this.points.length;d<e;d++)c=this.points[d],b.lineTo(c.x,c.y);this._renderFill(b);if(this.stroke||this.strokeDashArray)b.closePath(),this._renderStroke(b)},_renderDashedStroke:function(b){var d,e;b.beginPath();
for(var f=0,h=this.points.length;f<h;f++)d=this.points[f],e=this.points[f+1]||this.points[0],c.util.drawDashedLine(b,d.x,d.y,e.x,e.y,this.strokeDashArray);b.closePath()},complexity:function(){return this.points.length}}),c.Polygon.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat(),c.Polygon.fromElement=function(b,e){if(!b)return null;e||(e={});var f=c.parsePointsAttribute(b.getAttribute("points")),h=c.parseAttributes(b,c.Polygon.ATTRIBUTE_NAMES);return null===f?null:new c.Polygon(f,d(h,e))},c.Polygon.fromObject=
function(b){return new c.Polygon(b.points,b,!0)})})("undefined"!==typeof e?e:this);(function(b){function c(b){return"H"===b[0]?b[1]:b[b.length-2]}function d(b){return"V"===b[0]?b[1]:b[b.length-1]}var e=b.fabric||(b.fabric={}),f=e.util.array.min,n=e.util.array.max,r=e.util.object.extend,q=Object.prototype.toString,w=e.util.drawArc,u={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},x={m:"l",M:"L"};e.Path?e.warn("fabric.Path is already defined"):(e.Path=e.util.createClass(e.Object,{type:"path",path:null,initialize:function(b,
c){c=c||{};this.setOptions(c);if(!b)throw Error("`path` argument is required");var d="[object Array]"===q.call(b);if(this.path=d?b:b.match&&b.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi))d||(this.path=this._parsePath()),this._initializePath(c),c.sourcePath&&this.setSourcePath(c.sourcePath)},_initializePath:function(b){var c="width"in b&&null!=b.width,d="height"in b&&null!=b.width,e="left"in b,g="top"in b,f=e?this.left:0,h=g?this.top:0;c&&d?(g||(this.top=this.height/2),e||(this.left=this.width/2)):(r(this,
this._parseDimensions()),c&&(this.width=b.width),d&&(this.height=b.height));this.pathOffset=this.pathOffset||this._calculatePathOffset(f,h)},_calculatePathOffset:function(b,c){return{x:this.left-b-this.width/2,y:this.top-c-this.height/2}},_render:function(b,c){var d,e=null,g=0,f=0,h=0,l=0,m=0,p=0,n,q,r,t,u=-(this.width/2+this.pathOffset.x),x=-(this.height/2+this.pathOffset.y);c&&(u+=this.width/2,x+=this.height/2);for(var X=0,P=this.path.length;X<P;++X){d=this.path[X];switch(d[0]){case "l":h+=d[1];
l+=d[2];b.lineTo(h+u,l+x);break;case "L":h=d[1];l=d[2];b.lineTo(h+u,l+x);break;case "h":h+=d[1];b.lineTo(h+u,l+x);break;case "H":h=d[1];b.lineTo(h+u,l+x);break;case "v":l+=d[1];b.lineTo(h+u,l+x);break;case "V":l=d[1];b.lineTo(h+u,l+x);break;case "m":h+=d[1];l+=d[2];g=h;f=l;b.moveTo(h+u,l+x);break;case "M":h=d[1];l=d[2];g=h;f=l;b.moveTo(h+u,l+x);break;case "c":n=h+d[5];q=l+d[6];m=h+d[3];p=l+d[4];b.bezierCurveTo(h+d[1]+u,l+d[2]+x,m+u,p+x,n+u,q+x);h=n;l=q;break;case "C":h=d[5];l=d[6];m=d[3];p=d[4];b.bezierCurveTo(d[1]+
u,d[2]+x,m+u,p+x,h+u,l+x);break;case "s":n=h+d[3];q=l+d[4];m=m?2*h-m:h;p=p?2*l-p:l;b.bezierCurveTo(m+u,p+x,h+d[1]+u,l+d[2]+x,n+u,q+x);m=h+d[1];p=l+d[2];h=n;l=q;break;case "S":n=d[3];q=d[4];m=2*h-m;p=2*l-p;b.bezierCurveTo(m+u,p+x,d[1]+u,d[2]+x,n+u,q+x);h=n;l=q;m=d[1];p=d[2];break;case "q":n=h+d[3];q=l+d[4];m=h+d[1];p=l+d[2];b.quadraticCurveTo(m+u,p+x,n+u,q+x);h=n;l=q;break;case "Q":n=d[3];q=d[4];b.quadraticCurveTo(d[1]+u,d[2]+x,n+u,q+x);h=n;l=q;m=d[1];p=d[2];break;case "t":n=h+d[1];q=l+d[2];null===
e[0].match(/[QqTt]/)?(m=h,p=l):"t"===e[0]?(m=2*h-r,p=2*l-t):"q"===e[0]&&(m=2*h-m,p=2*l-p);r=m;t=p;b.quadraticCurveTo(m+u,p+x,n+u,q+x);h=n;l=q;m=h+d[1];p=l+d[2];break;case "T":n=d[1];q=d[2];m=2*h-m;p=2*l-p;b.quadraticCurveTo(m+u,p+x,n+u,q+x);h=n;l=q;break;case "a":w(b,h+u,l+x,[d[1],d[2],d[3],d[4],d[5],d[6]+h+u,d[7]+l+x]);h+=d[6];l+=d[7];break;case "A":w(b,h+u,l+x,[d[1],d[2],d[3],d[4],d[5],d[6]+u,d[7]+x]);h=d[6];l=d[7];break;case "z":case "Z":h=g,l=f,b.closePath()}e=d}},render:function(b,c){if(this.visible){b.save();
c&&b.translate(-this.width/2,-this.height/2);var d=this.transformMatrix;d&&b.transform(d[0],d[1],d[2],d[3],d[4],d[5]);c||this.transform(b);this._setStrokeStyles(b);this._setFillStyles(b);this._setShadow(b);this.clipTo&&e.util.clipContext(this,b);b.beginPath();b.globalAlpha=this.group?b.globalAlpha*this.opacity:this.opacity;this._render(b,c);this._renderFill(b);this._renderStroke(b);this.clipTo&&b.restore();this._removeShadow(b);b.restore()}},toString:function(){return"#<fabric.Path ("+this.complexity()+
'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(b){b=r(this.callSuper("toObject",b),{path:this.path.map(function(b){return b.slice()}),pathOffset:this.pathOffset});this.sourcePath&&(b.sourcePath=this.sourcePath);this.transformMatrix&&(b.transformMatrix=this.transformMatrix);return b},toDatalessObject:function(b){b=this.toObject(b);this.sourcePath&&(b.path=this.sourcePath);delete b.sourcePath;return b},toSVG:function(b){for(var c=[],d=this._createBaseSVGMarkup(),e=0,g=this.path.length;e<
g;e++)c.push(this.path[e].join(" "));c=c.join(" ");d.push("<path ",'d="',c,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'" stroke-linecap="round" ',"/>\n");return b?b(d.join("")):d.join("")},complexity:function(){return this.path.length},_parsePath:function(){for(var b=[],c=[],d,e,g=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/ig,f,h=0,l=this.path.length;h<l;h++){d=this.path[h];f=d.slice(1).trim();for(c.length=0;e=g.exec(f);)c.push(e[0]);
d=[d.charAt(0)];f=0;for(var m=c.length;f<m;f++)e=parseFloat(c[f]),isNaN(e)||d.push(e);e=d[0];f=u[e.toLowerCase()];m=x[e]||e;if(d.length-1>f)for(var p=1,n=d.length;p<n;p+=f)b.push([e].concat(d.slice(p,p+f))),e=m;else b.push(d)}return b},_parseDimensions:function(){var b=[],c=[],d={};this.path.forEach(function(e,g){this._getCoordsFromCommand(e,g,b,c,d)},this);var e=f(b),g=f(c),h=n(b),l=n(c),h=h-e,l=l-g;return{left:this.left+(e+h/2),top:this.top+(g+l/2),width:h,height:l}},_getCoordsFromCommand:function(b,
e,f,h,m){var p=!1;"H"!==b[0]&&(m.x=0===e?c(b):c(this.path[e-1]));"V"!==b[0]&&(m.y=0===e?d(b):d(this.path[e-1]));b[0]===b[0].toLowerCase()&&(p=!0);b=this._getXY(b,p,m);e=parseInt(b.x,10);isNaN(e)||f.push(e);e=parseInt(b.y,10);isNaN(e)||h.push(e)},_getXY:function(b,e,f){var h=e?f.x+c(b):"V"===b[0]?f.x:c(b);b=e?f.y+d(b):"H"===b[0]?f.y:d(b);return{x:h,y:b}}}),e.Path.fromObject=function(b,c){"string"===typeof b.path?e.loadSVGFromURL(b.path,function(d){d=d[0];var g=b.path;delete b.path;e.util.object.extend(d,
b);d.setSourcePath(g);c(d)}):c(new e.Path(b.path,b))},e.Path.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(["d"]),e.Path.fromElement=function(b,c,d){b=e.parseAttributes(b,e.Path.ATTRIBUTE_NAMES);c&&c(new e.Path(b.d,r(b,d)))},e.Path.async=!0)})("undefined"!==typeof e?e:this);(function(b){var c=b.fabric||(b.fabric={}),d=c.util.object.extend,e=c.util.array.invoke,f=c.Object.prototype.toObject;c.PathGroup?c.warn("fabric.PathGroup is already defined"):(c.PathGroup=c.util.createClass(c.Path,{type:"path-group",
fill:"",initialize:function(b,c){c=c||{};this.paths=b||[];for(var d=this.paths.length;d--;)this.paths[d].group=this;this.setOptions(c);c.widthAttr&&(this.scaleX=c.widthAttr/c.width);c.heightAttr&&(this.scaleY=c.heightAttr/c.height);this.setCoords();c.sourcePath&&this.setSourcePath(c.sourcePath)},render:function(b){if(this.visible){b.save();var d=this.transformMatrix;d&&b.transform(d[0],d[1],d[2],d[3],d[4],d[5]);this.transform(b);this._setShadow(b);this.clipTo&&c.util.clipContext(this,b);for(var d=
0,e=this.paths.length;d<e;++d)this.paths[d].render(b,!0);this.clipTo&&b.restore();this._removeShadow(b);b.restore()}},_set:function(b,c){if("fill"===b&&c&&this.isSameColor())for(var d=this.paths.length;d--;)this.paths[d]._set(b,c);return this.callSuper("_set",b,c)},toObject:function(b){b=d(f.call(this,b),{paths:e(this.getObjects(),"toObject",b)});this.sourcePath&&(b.sourcePath=this.sourcePath);return b},toDatalessObject:function(b){b=this.toObject(b);this.sourcePath&&(b.paths=this.sourcePath);return b},
toSVG:function(b){for(var c=this.getObjects(),d="translate("+this.left+" "+this.top+")",d=["<g ",'style="',this.getSvgStyles(),'" ','transform="',d,this.getSvgTransform(),'" ',">\n"],e=0,g=c.length;e<g;e++)d.push(c[e].toSVG(b));d.push("</g>\n");return b?b(d.join("")):d.join("")},toString:function(){return"#<fabric.PathGroup ("+this.complexity()+"): { top: "+this.top+", left: "+this.left+" }>"},isSameColor:function(){var b=(this.getObjects()[0].get("fill")||"").toLowerCase();return this.getObjects().every(function(c){return(c.get("fill")||
"").toLowerCase()===b})},complexity:function(){return this.paths.reduce(function(b,c){return b+(c&&c.complexity?c.complexity():0)},0)},getObjects:function(){return this.paths}}),c.PathGroup.fromObject=function(b,d){"string"===typeof b.paths?c.loadSVGFromURL(b.paths,function(e){var f=b.paths;delete b.paths;e=c.util.groupSVGElements(e,b,f);d(e)}):c.util.enlivenObjects(b.paths,function(e){delete b.paths;d(new c.PathGroup(e,b))})},c.PathGroup.async=!0)})("undefined"!==typeof e?e:this);(function(b){var c=
b.fabric||(b.fabric={}),d=c.util.object.extend,e=c.util.array.min,f=c.util.array.max,n=c.util.array.invoke;if(!c.Group){var r={lockMovementX:!0,lockMovementY:!0,lockRotation:!0,lockScalingX:!0,lockScalingY:!0,lockUniScaling:!0};c.Group=c.util.createClass(c.Object,c.Collection,{type:"group",initialize:function(b,c){c=c||{};this._objects=b||[];for(var e=this._objects.length;e--;)this._objects[e].group=this;this.originalState={};this.callSuper("initialize");this._calcBounds();this._updateObjectsCoords();
c&&d(this,c);this._setOpacityIfSame();this.setCoords();this.saveCoords()},_updateObjectsCoords:function(){this.forEachObject(this._updateObjectCoords,this)},_updateObjectCoords:function(b){var c=b.getLeft(),d=b.getTop();b.set({originalLeft:c,originalTop:d,left:c-this.left,top:d-this.top});b.setCoords();b.__origHasControls=b.hasControls;b.hasControls=!1},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(b){this._restoreObjectsState();b&&(this._objects.push(b),
b.group=this);this.forEachObject(this._setObjectActive,this);this._calcBounds();this._updateObjectsCoords();return this},_setObjectActive:function(b){b.set("active",!0);b.group=this},removeWithUpdate:function(b){this._moveFlippedObject(b);this._restoreObjectsState();this.forEachObject(this._setObjectActive,this);this.remove(b);this._calcBounds();this._updateObjectsCoords();return this},_onObjectAdded:function(b){b.group=this},_onObjectRemoved:function(b){delete b.group;b.set("active",!1)},delegatedProperties:{fill:!0,
opacity:!0,fontFamily:!0,fontWeight:!0,fontSize:!0,fontStyle:!0,lineHeight:!0,textDecoration:!0,textAlign:!0,backgroundColor:!0},_set:function(b,c){if(b in this.delegatedProperties){var d=this._objects.length;for(this[b]=c;d--;)this._objects[d].set(b,c)}else this[b]=c},toObject:function(b){return d(this.callSuper("toObject",b),{objects:n(this._objects,"toObject",b)})},render:function(b){if(this.visible){b.save();this.clipTo&&c.util.clipContext(this,b);for(var d=0,e=this._objects.length;d<e;d++)this._renderObject(this._objects[d],
b);this.clipTo&&b.restore();b.restore()}},_renderControls:function(b,c){this.callSuper("_renderControls",b,c);for(var d=0,e=this._objects.length;d<e;d++)this._objects[d]._renderControls(b)},_renderObject:function(b,c){var d=b.hasRotatingPoint;b.visible&&(b.hasRotatingPoint=!1,b.render(c),b.hasRotatingPoint=d)},_restoreObjectsState:function(){this._objects.forEach(this._restoreObjectState,this);return this},_moveFlippedObject:function(b){var c=b.get("originX"),d=b.get("originY"),e=b.getCenterPoint();
b.set({originX:"center",originY:"center",left:e.x,top:e.y});this._toggleFlipping(b);e=b.getPointByOrigin(c,d);b.set({originX:c,originY:d,left:e.x,top:e.y});return this},_toggleFlipping:function(b){this.flipX&&(b.toggle("flipX"),b.set("left",-b.get("left")),b.setAngle(-b.getAngle()));this.flipY&&(b.toggle("flipY"),b.set("top",-b.get("top")),b.setAngle(-b.getAngle()))},_restoreObjectState:function(b){this._setObjectPosition(b);b.setCoords();b.hasControls=b.__origHasControls;delete b.__origHasControls;
b.set("active",!1);b.setCoords();delete b.group;return this},_setObjectPosition:function(b){var c=this.getLeft(),d=this.getTop(),e=this._getRotatedLeftTop(b);b.set({angle:b.getAngle()+this.getAngle(),left:c+e.left,top:d+e.top,scaleX:b.get("scaleX")*this.get("scaleX"),scaleY:b.get("scaleY")*this.get("scaleY")})},_getRotatedLeftTop:function(b){var c=this.getAngle()*(Math.PI/180);return{left:-Math.sin(c)*b.getTop()*this.get("scaleY")+Math.cos(c)*b.getLeft()*this.get("scaleX"),top:Math.cos(c)*b.getTop()*
this.get("scaleY")+Math.sin(c)*b.getLeft()*this.get("scaleX")}},destroy:function(){this._objects.forEach(this._moveFlippedObject,this);return this._restoreObjectsState()},saveCoords:function(){this._originalLeft=this.get("left");this._originalTop=this.get("top");return this},hasMoved:function(){return this._originalLeft!==this.get("left")||this._originalTop!==this.get("top")},setObjectsCoords:function(){this.forEachObject(function(b){b.setCoords()});return this},_setOpacityIfSame:function(){var b=
this.getObjects(),c=b[0]?b[0].get("opacity"):1;b.every(function(b){return b.get("opacity")===c})&&(this.opacity=c)},_calcBounds:function(b){for(var c=[],d=[],e,g=0,f=this._objects.length;g<f;++g){e=this._objects[g];e.setCoords();for(var h in e.oCoords)c.push(e.oCoords[h].x),d.push(e.oCoords[h].y)}this.set(this._getBounds(c,d,b))},_getBounds:function(b,d,h){var l=c.util.invertTransform(this.getViewportTransform()),n=c.util.transformPoint(new c.Point(e(b),e(d)),l);b=c.util.transformPoint(new c.Point(f(b),
f(d)),l);d={width:b.x-n.x||0,height:b.y-n.y||0};h||(d.left=(n.x+b.x)/2||0,d.top=(n.y+b.y)/2||0);return d},toSVG:function(b){for(var c=["<g ",'transform="',this.getSvgTransform(),'">\n'],d=0,e=this._objects.length;d<e;d++)c.push(this._objects[d].toSVG(b));c.push("</g>\n");return b?b(c.join("")):c.join("")},get:function(b){if(b in r){if(this[b])return this[b];for(var c=0,d=this._objects.length;c<d;c++)if(this._objects[c][b])return!0;return!1}return b in this.delegatedProperties?this._objects[0]&&this._objects[0].get(b):
this[b]}});c.Group.fromObject=function(b,d){c.util.enlivenObjects(b.objects,function(e){delete b.objects;d&&d(new c.Group(e,b))})};c.Group.async=!0}})("undefined"!==typeof e?e:this);(function(b){var c=f.util.object.extend;b.fabric||(b.fabric={});b.fabric.Image?f.warn("fabric.Image is already defined."):(f.Image=f.util.createClass(f.Object,{type:"image",crossOrigin:"",initialize:function(b,c){c||(c={});this.filters=[];this.callSuper("initialize",c);this._initElement(b,c);this._initConfig(c);c.filters&&
(this.filters=c.filters,this.applyFilters())},getElement:function(){return this._element},setElement:function(b,c){this._originalElement=this._element=b;this._initConfig();0!==this.filters.length&&this.applyFilters(c);return this},setCrossOrigin:function(b){this.crossOrigin=b;this._element.crossOrigin=b;return this},getOriginalSize:function(){var b=this.getElement();return{width:b.width,height:b.height}},_stroke:function(b){b.save();this._setStrokeStyles(b);b.beginPath();b.strokeRect(-this.width/
2,-this.height/2,this.width,this.height);b.closePath();b.restore()},_renderDashedStroke:function(b){var c=-this.width/2,d=-this.height/2,e=this.width,g=this.height;b.save();this._setStrokeStyles(b);b.beginPath();f.util.drawDashedLine(b,c,d,c+e,d,this.strokeDashArray);f.util.drawDashedLine(b,c+e,d,c+e,d+g,this.strokeDashArray);f.util.drawDashedLine(b,c+e,d+g,c,d+g,this.strokeDashArray);f.util.drawDashedLine(b,c,d+g,c,d,this.strokeDashArray);b.closePath();b.restore()},toObject:function(b){return c(this.callSuper("toObject",
b),{src:this._originalElement.src||this._originalElement._src,filters:this.filters.map(function(b){return b&&b.toObject()}),crossOrigin:this.crossOrigin})},toSVG:function(b){var c=[],d=-this.width/2,e=-this.height/2;this.group&&(d=this.left,e=this.top);c.push('<g transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'">\n','<image xlink:href="',this.getSvgSrc(),'" x="',d,'" y="',e,'" style="',this.getSvgStyles(),'" width="',this.width,'" height="',this.height,'" preserveAspectRatio="none"',
"></image>\n");if(this.stroke||this.strokeDashArray){var g=this.fill;this.fill=null;c.push("<rect ",'x="',d,'" y="',e,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n');this.fill=g}c.push("</g>\n");return b?b(c.join("")):c.join("")},getSrc:function(){if(this.getElement())return this.getElement().src||this.getElement()._src},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},clone:function(b,c){this.constructor.fromObject(this.toObject(c),
b)},applyFilters:function(b){if(this._originalElement)if(0===this.filters.length)this._element=this._originalElement,b&&b();else{var c=this._originalElement,d=f.util.createCanvasElement(),e=f.util.createImage(),g=this;d.width=c.width;d.height=c.height;d.getContext("2d").drawImage(c,0,0,c.width,c.height);this.filters.forEach(function(b){b&&b.applyTo(d)});e.width=c.width;e.height=c.height;f.isLikelyNode?(e.src=d.toBuffer(void 0,f.Image.pngCompression),g._element=e,b&&b()):(e.onload=function(){g._element=
e;b&&b();e.onload=d=c=null},e.src=d.toDataURL("image/png"));return this}},_render:function(b,c){this._element&&b.drawImage(this._element,c?this.left:-this.width/2,c?this.top:-this.height/2,this.width,this.height);this._renderStroke(b)},_resetWidthHeight:function(){var b=this.getElement();this.set("width",b.width);this.set("height",b.height)},_initElement:function(b){this.setElement(f.util.getById(b));f.util.addClass(this.getElement(),f.Image.CSS_CANVAS)},_initConfig:function(b){b||(b={});this.setOptions(b);
this._setWidthHeight(b);this._element&&this.crossOrigin&&(this._element.crossOrigin=this.crossOrigin)},_initFilters:function(b,c){b.filters&&b.filters.length?f.util.enlivenObjects(b.filters,function(b){c&&c(b)},"fabric.Image.filters"):c&&c()},_setWidthHeight:function(b){this.width="width"in b?b.width:this.getElement()?this.getElement().width||0:0;this.height="height"in b?b.height:this.getElement()?this.getElement().height||0:0},complexity:function(){return 1}}),f.Image.CSS_CANVAS="canvas-img",f.Image.prototype.getSvgSrc=
f.Image.prototype.getSrc,f.Image.fromObject=function(b,c){f.util.loadImage(b.src,function(d){f.Image.prototype._initFilters.call(b,b,function(e){b.filters=e||[];e=new f.Image(d,b);c&&c(e)})},null,b.crossOrigin)},f.Image.fromURL=function(b,c,d){f.util.loadImage(b,function(b){c(new f.Image(b,d))},null,d&&d.crossOrigin)},f.Image.ATTRIBUTE_NAMES=f.SHARED_ATTRIBUTES.concat(["x","y","width","height","xlink:href"]),f.Image.fromElement=function(b,d,e){b=f.parseAttributes(b,f.Image.ATTRIBUTE_NAMES);f.Image.fromURL(b["xlink:href"],
d,c(e?f.util.object.clone(e):{},b))},f.Image.async=!0,f.Image.pngCompression=1)})("undefined"!==typeof e?e:this);f.Image.filters=f.Image.filters||{};f.Image.filters.BaseFilter=f.util.createClass({type:"BaseFilter",toObject:function(){return{type:this.type}},toJSON:function(){return this.toObject()}});(function(b){var c=b.fabric||(b.fabric={}),d=c.util.object.extend;c.Image.filters.Brightness=c.util.createClass(c.Image.filters.BaseFilter,{type:"Brightness",initialize:function(b){b=b||{};this.brightness=
b.brightness||0},applyTo:function(b){var c=b.getContext("2d");b=c.getImageData(0,0,b.width,b.height);for(var d=b.data,e=this.brightness,g=0,f=d.length;g<f;g+=4)d[g]+=e,d[g+1]+=e,d[g+2]+=e;c.putImageData(b,0,0)},toObject:function(){return d(this.callSuper("toObject"),{brightness:this.brightness})}});c.Image.filters.Brightness.fromObject=function(b){return new c.Image.filters.Brightness(b)}})("undefined"!==typeof e?e:this);(function(b){var c=b.fabric||(b.fabric={}),d=c.util.object.extend;c.Image.filters.Convolute=
c.util.createClass(c.Image.filters.BaseFilter,{type:"Convolute",initialize:function(b){b=b||{};this.opaque=b.opaque;this.matrix=b.matrix||[0,0,0,0,1,0,0,0,0];this.tmpCtx=c.util.createCanvasElement().getContext("2d")},_createImageData:function(b,c){return this.tmpCtx.createImageData(b,c)},applyTo:function(b){var c=this.matrix,d=b.getContext("2d"),e=d.getImageData(0,0,b.width,b.height);b=Math.round(Math.sqrt(c.length));for(var g=Math.floor(b/2),f=e.data,h=e.width,e=e.height,l=this._createImageData(h,
e),n=l.data,y=this.opaque?1:0,B=0;B<e;B++)for(var A=0;A<h;A++){for(var C=B,D=A,H=4*(B*h+A),G=0,L=0,J=0,M=0,V=0;V<b;V++)for(var T=0;T<b;T++){var O=C+V-g,N=D+T-g;0>O||O>e||0>N||N>h||(O=4*(O*h+N),N=c[V*b+T],G+=f[O]*N,L+=f[O+1]*N,J+=f[O+2]*N,M+=f[O+3]*N)}n[H]=G;n[H+1]=L;n[H+2]=J;n[H+3]=M+y*(255-M)}d.putImageData(l,0,0)},toObject:function(){return d(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}});c.Image.filters.Convolute.fromObject=function(b){return new c.Image.filters.Convolute(b)}})("undefined"!==
typeof e?e:this);(function(b){var c=b.fabric||(b.fabric={}),d=c.util.object.extend;c.Image.filters.GradientTransparency=c.util.createClass(c.Image.filters.BaseFilter,{type:"GradientTransparency",initialize:function(b){b=b||{};this.threshold=b.threshold||100},applyTo:function(b){var c=b.getContext("2d");b=c.getImageData(0,0,b.width,b.height);for(var d=b.data,e=this.threshold,g=d.length,f=0,h=d.length;f<h;f+=4)d[f+3]=e+255*(g-f)/g;c.putImageData(b,0,0)},toObject:function(){return d(this.callSuper("toObject"),
{threshold:this.threshold})}});c.Image.filters.GradientTransparency.fromObject=function(b){return new c.Image.filters.GradientTransparency(b)}})("undefined"!==typeof e?e:this);(function(b){var c=b.fabric||(b.fabric={});c.Image.filters.Grayscale=c.util.createClass(c.Image.filters.BaseFilter,{type:"Grayscale",applyTo:function(b){var c=b.getContext("2d");b=c.getImageData(0,0,b.width,b.height);for(var d=b.data,e=b.width*b.height*4,g=0,f;g<e;)f=(d[g]+d[g+1]+d[g+2])/3,d[g]=f,d[g+1]=f,d[g+2]=f,g+=4;c.putImageData(b,
0,0)}});c.Image.filters.Grayscale.fromObject=function(){return new c.Image.filters.Grayscale}})("undefined"!==typeof e?e:this);(function(b){var c=b.fabric||(b.fabric={});c.Image.filters.Invert=c.util.createClass(c.Image.filters.BaseFilter,{type:"Invert",applyTo:function(b){var c=b.getContext("2d");b=c.getImageData(0,0,b.width,b.height);var d=b.data,e=d.length,g;for(g=0;g<e;g+=4)d[g]=255-d[g],d[g+1]=255-d[g+1],d[g+2]=255-d[g+2];c.putImageData(b,0,0)}});c.Image.filters.Invert.fromObject=function(){return new c.Image.filters.Invert}})("undefined"!==
typeof e?e:this);(function(b){var c=b.fabric||(b.fabric={}),d=c.util.object.extend;c.Image.filters.Mask=c.util.createClass(c.Image.filters.BaseFilter,{type:"Mask",initialize:function(b){b=b||{};this.mask=b.mask;this.channel=-1<[0,1,2,3].indexOf(b.channel)?b.channel:0},applyTo:function(b){if(this.mask){var d=b.getContext("2d");b=d.getImageData(0,0,b.width,b.height);var e=b.data,f=this.mask.getElement(),h=c.util.createCanvasElement(),l=this.channel,n=b.width*b.height*4;h.width=f.width;h.height=f.height;
h.getContext("2d").drawImage(f,0,0,f.width,f.height);h=h.getContext("2d").getImageData(0,0,f.width,f.height).data;for(f=0;f<n;f+=4)e[f+3]=h[f+l];d.putImageData(b,0,0)}},toObject:function(){return d(this.callSuper("toObject"),{mask:this.mask.toObject(),channel:this.channel})}});c.Image.filters.Mask.fromObject=function(b,d){c.util.loadImage(b.mask.src,function(e){b.mask=new c.Image(e,b.mask);d&&d(new c.Image.filters.Mask(b))})};c.Image.filters.Mask.async=!0})("undefined"!==typeof e?e:this);(function(b){var c=
b.fabric||(b.fabric={}),d=c.util.object.extend;c.Image.filters.Noise=c.util.createClass(c.Image.filters.BaseFilter,{type:"Noise",initialize:function(b){b=b||{};this.noise=b.noise||0},applyTo:function(b){var c=b.getContext("2d");b=c.getImageData(0,0,b.width,b.height);for(var d=b.data,e=this.noise,g,f=0,h=d.length;f<h;f+=4)g=(.5-Math.random())*e,d[f]+=g,d[f+1]+=g,d[f+2]+=g;c.putImageData(b,0,0)},toObject:function(){return d(this.callSuper("toObject"),{noise:this.noise})}});c.Image.filters.Noise.fromObject=
function(b){return new c.Image.filters.Noise(b)}})("undefined"!==typeof e?e:this);(function(b){var c=b.fabric||(b.fabric={}),d=c.util.object.extend;c.Image.filters.Pixelate=c.util.createClass(c.Image.filters.BaseFilter,{type:"Pixelate",initialize:function(b){b=b||{};this.blocksize=b.blocksize||4},applyTo:function(b){var c=b.getContext("2d");b=c.getImageData(0,0,b.width,b.height);var d=b.data,e=b.height,g=b.width,f,h,l,n,y,B,A;for(h=0;h<e;h+=this.blocksize)for(l=0;l<g;l+=this.blocksize){f=4*h*g+4*
l;n=d[f];y=d[f+1];B=d[f+2];A=d[f+3];for(var C=h,D=h+this.blocksize;C<D;C++)for(var H=l,G=l+this.blocksize;H<G;H++)f=4*C*g+4*H,d[f]=n,d[f+1]=y,d[f+2]=B,d[f+3]=A}c.putImageData(b,0,0)},toObject:function(){return d(this.callSuper("toObject"),{blocksize:this.blocksize})}});c.Image.filters.Pixelate.fromObject=function(b){return new c.Image.filters.Pixelate(b)}})("undefined"!==typeof e?e:this);(function(b){var c=b.fabric||(b.fabric={}),d=c.util.object.extend;c.Image.filters.RemoveWhite=c.util.createClass(c.Image.filters.BaseFilter,
{type:"RemoveWhite",initialize:function(b){b=b||{};this.threshold=b.threshold||30;this.distance=b.distance||20},applyTo:function(b){var c=b.getContext("2d");b=c.getImageData(0,0,b.width,b.height);for(var d=b.data,e=this.distance,g=255-this.threshold,f=Math.abs,h,l,n,y=0,B=d.length;y<B;y+=4)h=d[y],l=d[y+1],n=d[y+2],h>g&&l>g&&n>g&&f(h-l)<e&&f(h-n)<e&&f(l-n)<e&&(d[y+3]=1);c.putImageData(b,0,0)},toObject:function(){return d(this.callSuper("toObject"),{threshold:this.threshold,distance:this.distance})}});
c.Image.filters.RemoveWhite.fromObject=function(b){return new c.Image.filters.RemoveWhite(b)}})("undefined"!==typeof e?e:this);(function(b){var c=b.fabric||(b.fabric={});c.Image.filters.Sepia=c.util.createClass(c.Image.filters.BaseFilter,{type:"Sepia",applyTo:function(b){var c=b.getContext("2d");b=c.getImageData(0,0,b.width,b.height);var d=b.data,e=d.length,g,f;for(g=0;g<e;g+=4)f=.3*d[g]+.59*d[g+1]+.11*d[g+2],d[g]=f+100,d[g+1]=f+50,d[g+2]=f+255;c.putImageData(b,0,0)}});c.Image.filters.Sepia.fromObject=
function(){return new c.Image.filters.Sepia}})("undefined"!==typeof e?e:this);(function(b){var c=b.fabric||(b.fabric={});c.Image.filters.Sepia2=c.util.createClass(c.Image.filters.BaseFilter,{type:"Sepia2",applyTo:function(b){var c=b.getContext("2d");b=c.getImageData(0,0,b.width,b.height);var d=b.data,e=d.length,g,f,h,n;for(g=0;g<e;g+=4)f=d[g],h=d[g+1],n=d[g+2],d[g]=(.393*f+.769*h+.189*n)/1.351,d[g+1]=(.349*f+.686*h+.168*n)/1.203,d[g+2]=(.272*f+.534*h+.131*n)/2.14;c.putImageData(b,0,0)}});c.Image.filters.Sepia2.fromObject=
function(){return new c.Image.filters.Sepia2}})("undefined"!==typeof e?e:this);(function(b){var c=b.fabric||(b.fabric={}),d=c.util.object.extend;c.Image.filters.Tint=c.util.createClass(c.Image.filters.BaseFilter,{type:"Tint",initialize:function(b){b=b||{};this.color=b.color||"#000000";this.opacity="undefined"!==typeof b.opacity?b.opacity:(new c.Color(this.color)).getAlpha()},applyTo:function(b){var d=b.getContext("2d");b=d.getImageData(0,0,b.width,b.height);var e=b.data,f=e.length,h,l,n,x,z,y,B,A;
h=(new c.Color(this.color)).getSource();l=h[0]*this.opacity;n=h[1]*this.opacity;x=h[2]*this.opacity;A=1-this.opacity;for(h=0;h<f;h+=4)z=e[h],y=e[h+1],B=e[h+2],e[h]=l+z*A,e[h+1]=n+y*A,e[h+2]=x+B*A;d.putImageData(b,0,0)},toObject:function(){return d(this.callSuper("toObject"),{color:this.color,opacity:this.opacity})}});c.Image.filters.Tint.fromObject=function(b){return new c.Image.filters.Tint(b)}})("undefined"!==typeof e?e:this);(function(b){var c=b.fabric||(b.fabric={}),d=c.util.object.extend;c.Image.filters.Multiply=
c.util.createClass(c.Image.filters.BaseFilter,{type:"Multiply",initialize:function(b){b=b||{};this.color=b.color||"#000000"},applyTo:function(b){var d=b.getContext("2d");b=d.getImageData(0,0,b.width,b.height);var e=b.data,f=e.length,h,l;l=(new c.Color(this.color)).getSource();for(h=0;h<f;h+=4)e[h]*=l[0]/255,e[h+1]*=l[1]/255,e[h+2]*=l[2]/255;d.putImageData(b,0,0)},toObject:function(){return d(this.callSuper("toObject"),{color:this.color})}});c.Image.filters.Multiply.fromObject=function(b){return new c.Image.filters.Multiply(b)}})("undefined"!==
typeof e?e:this);(function(b){var c=b.fabric;c.Image.filters.Blend=c.util.createClass({type:"Blend",initialize:function(b){b=b||{};this.color=b.color||"#000";this.image=b.image||!1;this.mode=b.mode||"multiply";this.alpha=b.alpha||1},applyTo:function(b){var d=b.getContext("2d");b=d.getImageData(0,0,b.width,b.height);var e=b.data,f,h,n,w,u,x,z,y=!1;this.image?(y=!0,z=c.util.createCanvasElement(),z.width=this.image.width,z.height=this.image.height,z=new c.StaticCanvas(z),z.add(this.image),z=z.getContext("2d").getImageData(0,
0,z.width,z.height).data):(z=(new c.Color(this.color)).getSource(),f=z[0]*this.alpha,h=z[1]*this.alpha,n=z[2]*this.alpha);for(var B=0,A=e.length;B<A;B+=4)switch(w=e[B],u=e[B+1],x=e[B+2],y&&(f=z[B]*this.alpha,h=z[B+1]*this.alpha,n=z[B+2]*this.alpha),this.mode){case "multiply":e[B]=w*f/255;e[B+1]=u*h/255;e[B+2]=x*n/255;break;case "screen":e[B]=1-(1-w)*(1-f);e[B+1]=1-(1-u)*(1-h);e[B+2]=1-(1-x)*(1-n);break;case "add":e[B]=Math.min(255,w+f);e[B+1]=Math.min(255,u+h);e[B+2]=Math.min(255,x+n);break;case "diff":case "difference":e[B]=
Math.abs(w-f);e[B+1]=Math.abs(u-h);e[B+2]=Math.abs(x-n);break;case "subtract":w-=f;u-=h;x-=n;e[B]=0>w?0:w;e[B+1]=0>u?0:u;e[B+2]=0>x?0:x;break;case "darken":e[B]=Math.min(w,f);e[B+1]=Math.min(u,h);e[B+2]=Math.min(x,n);break;case "lighten":e[B]=Math.max(w,f),e[B+1]=Math.max(u,h),e[B+2]=Math.max(x,n)}d.putImageData(b,0,0)}});c.Image.filters.Blend.fromObject=function(b){return new c.Image.filters.Blend(b)}})("undefined"!==typeof e?e:this);(function(b){var c=b.fabric||(b.fabric={}),d=c.util.object.extend,
e=c.util.object.clone,f=c.util.toFixed,t=c.StaticCanvas.supports("setLineDash");c.Text?c.warn("fabric.Text is already defined"):(b=c.Object.prototype.stateProperties.concat(),b.push("fontFamily","fontWeight","fontSize","text","textDecoration","textAlign","fontStyle","lineHeight","textBackgroundColor","useNative","path"),c.Text=c.util.createClass(c.Object,{_dimensionAffectingProps:{fontSize:!0,fontWeight:!0,fontFamily:!0,textDecoration:!0,fontStyle:!0,lineHeight:!0,stroke:!0,strokeWidth:!0,text:!0},
_reNewline:/\r?\n/,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",textDecoration:"",textAlign:"left",fontStyle:"",lineHeight:1.3,textBackgroundColor:"",path:null,useNative:!0,stateProperties:b,stroke:null,shadow:null,initialize:function(b,c){c=c||{};this.text=b;this.__skipDimension=!0;this.setOptions(c);this.__skipDimension=!1;this._initDimensions()},_initDimensions:function(){if(!this.__skipDimension){var b=c.util.createCanvasElement();this._render(b.getContext("2d"))}},
toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_render:function(b){"undefined"===typeof n||!0===this.useNative?this._renderViaNative(b):this._renderViaCufon(b)},_renderViaNative:function(b){var d=this.text.split(this._reNewline);this._setTextStyles(b);this.width=this._getTextWidth(b,d);this.height=this._getTextHeight(b,d);this.clipTo&&c.util.clipContext(this,b);this._renderTextBackground(b,d);this._translateForTextAlign(b);
this._renderText(b,d);"left"!==this.textAlign&&"justify"!==this.textAlign&&b.restore();this._renderTextDecoration(b,d);this.clipTo&&b.restore();this._setBoundaries(b,d);this._totalLineHeight=0},_renderText:function(b,c){b.save();this._setShadow(b);this._setupFillRule(b);this._renderTextFill(b,c);this._renderTextStroke(b,c);this._restoreFillRule(b);this._removeShadow(b);b.restore()},_translateForTextAlign:function(b){"left"!==this.textAlign&&"justify"!==this.textAlign&&(b.save(),b.translate("center"===
this.textAlign?this.width/2:this.width,0))},_setBoundaries:function(b,c){this._boundaries=[];for(var d=0,e=c.length;d<e;d++){var g=this._getLineWidth(b,c[d]),f=this._getLineLeftOffset(g);this._boundaries.push({height:this.fontSize*this.lineHeight,width:g,left:f})}},_setTextStyles:function(b){this._setFillStyles(b);this._setStrokeStyles(b);b.textBaseline="alphabetic";this.skipTextAlign||(b.textAlign=this.textAlign);b.font=this._getFontDeclaration()},_getTextHeight:function(b,c){return this.fontSize*
c.length*this.lineHeight},_getTextWidth:function(b,c){for(var d=b.measureText(c[0]||"|").width,e=1,g=c.length;e<g;e++){var f=b.measureText(c[e]).width;f>d&&(d=f)}return d},_renderChars:function(b,c,d,e,g){c[b](d,e,g)},_renderTextLine:function(b,c,d,e,g,f){g-=this.fontSize/4;if("justify"!==this.textAlign)this._renderChars(b,c,d,e,g,f);else{var h=c.measureText(d).width,l=this.width;if(l>h){h=d.split(/\s+/);d=c.measureText(d.replace(/\s+/g,"")).width;for(var l=(l-d)/(h.length-1),m=d=0,p=h.length;m<p;m++)this._renderChars(b,
c,h[m],e+d,g,f),d+=c.measureText(h[m]).width+l}else this._renderChars(b,c,d,e,g,f)}},_getLeftOffset:function(){return c.isLikelyNode?0:-this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextFill:function(b,c){if(this.fill||this._skipFillStrokeCheck){this._boundaries=[];for(var d=0,e=0,g=c.length;e<g;e++){var f=this._getHeightOfLine(b,e,c),d=d+f;this._renderTextLine("fillText",b,c[e],this._getLeftOffset(),this._getTopOffset()+d,e)}}},_renderTextStroke:function(b,c){if(this.stroke&&
0!==this.strokeWidth||this._skipFillStrokeCheck){var d=0;b.save();this.strokeDashArray&&(1&this.strokeDashArray.length&&this.strokeDashArray.push.apply(this.strokeDashArray,this.strokeDashArray),t&&b.setLineDash(this.strokeDashArray));b.beginPath();for(var e=0,g=c.length;e<g;e++){var f=this._getHeightOfLine(b,e,c),d=d+f;this._renderTextLine("strokeText",b,c[e],this._getLeftOffset(),this._getTopOffset()+d,e)}b.closePath();b.restore()}},_getHeightOfLine:function(){return this.fontSize*this.lineHeight},
_renderTextBackground:function(b,c){this._renderTextBoxBackground(b);this._renderTextLinesBackground(b,c)},_renderTextBoxBackground:function(b){this.backgroundColor&&(b.save(),b.fillStyle=this.backgroundColor,b.fillRect(this._getLeftOffset(),this._getTopOffset(),this.width,this.height),b.restore())},_renderTextLinesBackground:function(b,c){if(this.textBackgroundColor){b.save();b.fillStyle=this.textBackgroundColor;for(var d=0,e=c.length;d<e;d++)if(""!==c[d]){var g=this._getLineWidth(b,c[d]),f=this._getLineLeftOffset(g);
b.fillRect(this._getLeftOffset()+f,this._getTopOffset()+d*this.fontSize*this.lineHeight,g,this.fontSize*this.lineHeight)}b.restore()}},_getLineLeftOffset:function(b){return"center"===this.textAlign?(this.width-b)/2:"right"===this.textAlign?this.width-b:0},_getLineWidth:function(b,c){return"justify"===this.textAlign?this.width:b.measureText(c).width},_renderTextDecoration:function(b,c){function d(f){for(var h=0,l=c.length;h<l;h++){var m=g._getLineWidth(b,c[h]),p=g._getLineLeftOffset(m);b.fillRect(g._getLeftOffset()+
p,~~(f+h*g._getHeightOfLine(b,h,c)-e),m,1)}}if(this.textDecoration){var e=this._getTextHeight(b,c)/2,g=this;-1<this.textDecoration.indexOf("underline")&&d(this.fontSize*this.lineHeight);-1<this.textDecoration.indexOf("line-through")&&d(this.fontSize*this.lineHeight-this.fontSize/2);-1<this.textDecoration.indexOf("overline")&&d(this.fontSize*this.lineHeight-this.fontSize)}},_getFontDeclaration:function(){return[c.isLikelyNode?this.fontWeight:this.fontStyle,c.isLikelyNode?this.fontStyle:this.fontWeight,
this.fontSize+"px",c.isLikelyNode?'"'+this.fontFamily+'"':this.fontFamily].join(" ")},render:function(b,c){if(this.visible){b.save();this._transform(b,c);var d=this.transformMatrix,e=this.group&&"path-group"===this.group.type;e&&b.translate(-this.group.width/2,-this.group.height/2);d&&b.transform(d[0],d[1],d[2],d[3],d[4],d[5]);e&&b.translate(this.left,this.top);this._render(b);b.restore()}},toObject:function(b){b=d(this.callSuper("toObject",b),{text:this.text,fontSize:this.fontSize,fontWeight:this.fontWeight,
fontFamily:this.fontFamily,fontStyle:this.fontStyle,lineHeight:this.lineHeight,textDecoration:this.textDecoration,textAlign:this.textAlign,path:this.path,textBackgroundColor:this.textBackgroundColor,useNative:this.useNative});this.includeDefaultValues||this._removeDefaultValues(b);return b},toSVG:function(b){var c=[],d=this.text.split(this._reNewline),e=this._getSVGLeftTopOffsets(d),g=this._getSVGTextAndBg(e.lineTop,e.textLeft,d),d=this._getSVGShadows(e.lineTop,d);e.textTop+=this._fontAscent?this._fontAscent/
5*this.lineHeight:0;this._wrapSVGTextAndBg(c,g,d,e);return b?b(c.join("")):c.join("")},_getSVGLeftTopOffsets:function(b){return{textLeft:-(this.width/2)+(this.group&&"path-group"===this.group.type?this.left:0),textTop:(this.useNative?this.fontSize-1:this.height/2-b.length*this.fontSize-this._totalLineHeight)+(this.group&&"path-group"===this.group.type?this.top:0),lineTop:this.useNative?this.fontSize*this.lineHeight:-this._fontAscent-this._fontAscent/5*this.lineHeight}},_wrapSVGTextAndBg:function(b,
c,d,e){b.push('<g transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'">\n',c.textBgRects.join(""),"<text ",this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",this.textDecoration?'text-decoration="'+this.textDecoration+'" ':"",'style="',this.getSvgStyles(),'" ','transform="translate(',f(e.textLeft,2)," ",
f(e.textTop,2),')">',d.join(""),c.textSpans.join(""),"</text>\n","</g>\n")},_getSVGShadows:function(b,d){var e=[],h,l,m=1;if(!this.shadow||!this._boundaries)return e;h=0;for(l=d.length;h<l;h++)""!==d[h]?(e.push('<tspan x="',f((this._boundaries&&this._boundaries[h]?this._boundaries[h].left:0)+m+this.shadow.offsetX,2),0===h||this.useNative?'" y':'" dy','="',f(this.useNative?b*h-this.height/2+this.shadow.offsetY:b+(0===h?this.shadow.offsetY:0),2),'" ',this._getFillAttributes(this.shadow.color),">",c.util.string.escapeXml(d[h]),
"</tspan>"),m=1):m++;return e},_getSVGTextAndBg:function(b,c,d){var e=[],g=[],f=1;this._setSVGBg(g);for(var h=0,l=d.length;h<l;h++)""!==d[h]?(this._setSVGTextLineText(d[h],h,e,b,f,g),f=1):f++,this.textBackgroundColor&&this._boundaries&&this._setSVGTextLineBg(g,h,c,b);return{textSpans:e,textBgRects:g}},_setSVGTextLineText:function(b,d,e,h,l){var m=this._boundaries&&this._boundaries[d]?f(this._boundaries[d].left,2):0;e.push('<tspan x="',m,'" ',0===d||this.useNative?"y":"dy",'="',f(this.useNative?h*
d-this.height/2:h*l,2),'" ',this._getFillAttributes(this.fill),">",c.util.string.escapeXml(b),"</tspan>")},_setSVGTextLineBg:function(b,c,d,e){b.push("<rect ",this._getFillAttributes(this.textBackgroundColor),' x="',f(d+this._boundaries[c].left,2),'" y="',f(e*c-this.height/2,2),'" width="',f(this._boundaries[c].width,2),'" height="',f(this._boundaries[c].height,2),'"></rect>\n')},_setSVGBg:function(b){this.backgroundColor&&this._boundaries&&b.push("<rect ",this._getFillAttributes(this.backgroundColor),
' x="',f(-this.width/2,2),'" y="',f(-this.height/2,2),'" width="',f(this.width,2),'" height="',f(this.height,2),'"></rect>')},_getFillAttributes:function(b){var d=b&&"string"===typeof b?new c.Color(b):"";return d&&d.getSource()&&1!==d.getAlpha()?'opacity="'+d.getAlpha()+'" fill="'+d.setAlpha(1).toRgb()+'"':'fill="'+b+'"'},_set:function(b,c){"fontFamily"===b&&this.path&&(this.path=this.path.replace(/(.*?)([^\/]*)(\.font\.js)/,"$1"+c+"$3"));this.callSuper("_set",b,c);b in this._dimensionAffectingProps&&
(this._initDimensions(),this.setCoords())},complexity:function(){return 1}}),c.Text.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size text-decoration text-anchor".split(" ")),c.Text.DEFAULT_SVG_FONT_SIZE=16,c.Text.fromElement=function(b,d){if(!b)return null;var e=c.parseAttributes(b,c.Text.ATTRIBUTE_NAMES);d=c.util.object.extend(d?c.util.object.clone(d):{},e);"dx"in e&&(d.left+=e.dx);"dy"in e&&(d.top+=e.dy);"fontSize"in d||(d.fontSize=c.Text.DEFAULT_SVG_FONT_SIZE);
d.originX||(d.originX="left");var e=new c.Text(b.textContent,d),f=0;"left"===e.originX&&(f=e.getWidth()/2);"right"===e.originX&&(f=-e.getWidth()/2);e.set({left:e.getLeft()+f,top:e.getTop()-e.getHeight()/2});return e},c.Text.fromObject=function(b){return new c.Text(b.text,e(b))},c.util.createAccessors(c.Text))})("undefined"!==typeof e?e:this)}).call(this,b("buffer").Buffer)},{buffer:2,canvas:1,jsdom:1}]},{},[6])(6)});
var BlobBuilder=BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder||function(a){var b=function(a){return Object.prototype.toString.call(a).match(/^\[object\s(.*)\]$/)[1]},c=function(){this.data=[]},e=function(a,b,c){this.data=a;this.size=a.length;this.type=b;this.encoding=c},d=c.prototype,f=e.prototype,n=a.FileReaderSync,h=function(a){this.code=this[this.name=a]},g="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),
l=g.length,m=a.URL||a.webkitURL||a,p=m.createObjectURL,t=m.revokeObjectURL,r=m,q=a.btoa,w=a.atob,u=!1,x=function(a){u=!a},z=a.ArrayBuffer,y=a.Uint8Array;for(c.fake=f.fake=!0;l--;)h.prototype[g[l]]=l+1;try{y&&x.apply(0,new y(1))}catch(B){}m.createObjectURL||(r=a.URL={});r.createObjectURL=function(a){var b=a.type;null===b&&(b="application/octet-stream");if(a instanceof e)return b="data:"+b,"base64"===a.encoding?b+";base64,"+a.data:"URI"===a.encoding?b+","+decodeURIComponent(a.data):q?b+";base64,"+q(a.data):
b+","+encodeURIComponent(a.data);if(p)return p.call(m,a)};r.revokeObjectURL=function(a){"data:"!==a.substring(0,5)&&t&&t.call(m,a)};d.append=function(a){var c=this.data;if(y&&a instanceof z)if(u)c.push(String.fromCharCode.apply(String,new y(a)));else{c="";a=new y(a);for(var d=0,g=a.length;d<g;d++)c+=String.fromCharCode(a[d])}else if("Blob"===b(a)||"File"===b(a))if(n)d=new n,c.push(d.readAsBinaryString(a));else throw new h("NOT_READABLE_ERR");else a instanceof e?"base64"===a.encoding&&w?c.push(w(a.data)):
"URI"===a.encoding?c.push(decodeURIComponent(a.data)):"raw"===a.encoding&&c.push(a.data):("string"!==typeof a&&(a+=""),c.push(unescape(encodeURIComponent(a))))};d.getBlob=function(a){arguments.length||(a=null);return new e(this.data.join(""),a,"raw")};d.toString=function(){return"[object BlobBuilder]"};f.slice=function(a,b,c){var d=arguments.length;3>d&&(c=null);return new e(this.data.slice(a,1<d?b:this.data.length),c,this.encoding)};f.toString=function(){return"[object Blob]"};return c}(self),saveAs=
saveAs||navigator.msSaveBlob&&navigator.msSaveBlob.bind(navigator)||function(a){var b=a.document,c=a.URL||a.webkitURL||a,e=b.createElementNS("http://www.w3.org/1999/xhtml","a"),d="download"in e,f=function(c){var d=b.createEvent("MouseEvents");d.initMouseEvent("click",!0,!1,a,0,0,0,0,0,!1,!1,!1,!1,0,null);return c.dispatchEvent(d)},n=a.webkitRequestFileSystem,h=a.requestFileSystem||n||a.mozRequestFileSystem,g=function(b){(a.setImmediate||a.setTimeout)(function(){throw b;},0)},l=0,m=[],p=function(a,
b,c){b=[].concat(b);for(var d=b.length;d--;){var e=a["on"+b[d]];if("function"===typeof e)try{e.call(a,c||a)}catch(f){g(f)}}},t=function(b,c){var g=this,r=b.type,t=!1,y,B,A=function(){var c=(a.URL||a.webkitURL||a).createObjectURL(b);m.push(c);return c},C=function(){p(g,["writestart","progress","write","writeend"])},D=function(){if(t||!y)y=A(b);B&&(B.location.href=y);g.readyState=g.DONE;C()},H=function(a){return function(){if(g.readyState!==g.DONE)return a.apply(this,arguments)}},G={create:!0,exclusive:!1},
L;g.readyState=g.INIT;c||(c="download");if(d&&(y=A(b),e.href=y,e.download=c,f(e))){g.readyState=g.DONE;C();return}a.chrome&&r&&"application/octet-stream"!==r&&(L=b.slice||b.webkitSlice,b=L.call(b,0,b.size,"application/octet-stream"),t=!0);n&&"download"!==c&&(c+=".download");B="application/octet-stream"===r||n?a:a.open();h?(l+=b.size,h(a.TEMPORARY,l,H(function(a){a.root.getDirectory("saved",G,H(function(a){var d=function(){a.getFile(c,G,H(function(a){a.createWriter(H(function(c){c.onwriteend=function(b){B.location.href=
a.toURL();m.push(a);g.readyState=g.DONE;p(g,"writeend",b)};c.onerror=function(){var a=c.error;a.code!==a.ABORT_ERR&&D()};["writestart","progress","write","abort"].forEach(function(a){c["on"+a]=g["on"+a]});c.write(b);g.abort=function(){c.abort();g.readyState=g.DONE};g.readyState=g.WRITING}),D)}),D)};a.getFile(c,{create:!1},H(function(a){a.remove();d()}),H(function(a){a.code===a.NOT_FOUND_ERR?d():D()}))}),D)}),D)):D()},r=t.prototype;r.abort=function(){this.readyState=this.DONE;p(this,"abort")};r.readyState=
r.INIT=0;r.WRITING=1;r.DONE=2;r.error=r.onwritestart=r.onprogress=r.onwrite=r.onabort=r.onerror=r.onwriteend=null;a.addEventListener("unload",function(){for(var a=m.length;a--;){var b=m[a];"string"===typeof b?c.revokeObjectURL(b):b.remove()}m.length=0},!1);return function(a,b){return new t(a,b)}}(self),jsPDF=function(a){function b(b){var c={};this.subscribe=function(a,b,d){if("function"!==typeof b)return!1;c.hasOwnProperty(a)||(c[a]={});var e=Math.random().toString(35);c[a][e]=[b,!!d];return e};this.unsubscribe=
function(a){for(var b in c)if(c[b][a])return delete c[b][a],!0;return!1};this.publish=function(e){if(c.hasOwnProperty(e)){var h=Array.prototype.slice.call(arguments,1),g=[],l;for(l in c[e]){var m=c[e][l];try{m[0].apply(b,h)}catch(p){a.console&&console.error("jsPDF PubSub Error",p.message,p)}m[1]&&g.push(l)}g.length&&g.forEach(this.unsubscribe)}}}function c(d,f,n,h){var g={};"object"===typeof d&&(g=d,d=g.orientation,f=g.unit||f,n=g.format||n,h=g.compress||g.compressPdf||h);f=f||"mm";n=n||"a4";d=(""+
(d||"P")).toLowerCase();(""+n).toLowerCase();var l=!!h&&"function"===typeof Uint8Array,m=g.textColor||"0 g",p=g.drawColor||"0 G",t=g.fontSize||16,r=g.lineHeight||1.15,q=g.lineWidth||.200025,w=2,u=!1,x=[],z={},y={},B,A,C,D=0,H,G=[],L={},J=[],M=0,V=0,T=0,O,N,Z,X,P,R={title:"",subject:"",author:"",keywords:"",creator:""},K={},U=new b(K),Q=function(a){return a.toFixed(2)},ma=function(a){return("0"+parseInt(a)).slice(-2)},S=function(a){u?G[H].push(a):(T+=a.length+1,J.push(a))},W=function(){w++;x[w]=T;
S(w+" 0 obj");return w},la=function(a){S("stream");S(a);S("endstream")},sa=function(a,b){var c;c=a;var d,e,g,f,h,l,m;d=b||{};e=d.sourceEncoding||"Unicode";f=d.outputEncoding;if((d.autoencode||f)&&z[B].metadata&&z[B].metadata[e]&&z[B].metadata[e].encoding&&(e=z[B].metadata[e].encoding,!f&&z[B].encoding&&(f=z[B].encoding),!f&&e.codePages&&(f=e.codePages[0]),"string"===typeof f&&(f=e[f]),f)){l=!1;h=[];e=0;for(g=c.length;e<g;e++)(m=f[c.charCodeAt(e)])?h.push(String.fromCharCode(m)):h.push(c[e]),h[e].charCodeAt(0)>>
8&&(l=!0);c=h.join("")}for(e=c.length;void 0===l&&0!==e;)c.charCodeAt(e-1)>>8&&(l=!0),e--;if(l){h=d.noBOM?[]:[254,255];e=0;for(g=c.length;e<g;e++){m=c.charCodeAt(e);d=m>>8;if(d>>8)throw Error("Character at position "+e+" of string '"+c+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");h.push(d);h.push(m-(d<<8))}c=String.fromCharCode.apply(void 0,h)}return c.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},aa=function(a,b){var c="string"===typeof b&&b.toLowerCase();if("string"===
typeof a){var d=a.toLowerCase();e.hasOwnProperty(d)&&(a=e[d][0]/A,b=e[d][1]/A)}Array.isArray(a)&&(b=a[1],a=a[0]);if(c){switch(c.substr(0,1)){case "l":b>a&&(c="s");break;case "p":a>b&&(c="s")}"s"===c&&(C=a,a=b,b=C)}u=!0;G[++D]=[];L[D]={width:Number(a)||O,height:Number(b)||N};Ia(D)},ea=function(){aa.apply(this,arguments);S(Q(q*A)+" w");S(p);0!==M&&S(M+" J");0!==V&&S(V+" j");U.publish("addPage",{pageNumber:D})},Ia=function(a){0<a&&a<=D&&(H=a,O=L[a].width,N=L[a].height)},v=function(a,b){var c;a=void 0!==
a?a:z[B].fontName;b=void 0!==b?b:z[B].fontStyle;try{c=y[a][b]}catch(d){}if(!c)throw Error("Unable to look up font label for font '"+a+"', '"+b+"'. Refer to getFontList() for available fonts.");return c},Ea=function(){u=!1;w=2;J=[];x=[];S("%PDF-1.3");var b,d,e,g,f;f=a.adler32cs||c.adler32cs;l&&"undefined"===typeof f&&(l=!1);for(b=1;b<=D;b++){W();e=(O=L[b].width)*A;d=(N=L[b].height)*A;S("<</Type /Page");S("/Parent 1 0 R");S("/Resources 2 0 R");S("/MediaBox [0 0 "+Q(e)+" "+Q(d)+"]");S("/Contents "+(w+
1)+" 0 R>>");S("endobj");d=G[b].join("\n");W();if(l){e=[];for(g=d.length;g--;)e[g]=d.charCodeAt(g);g=f.from(d);d=new Deflater(6);d.append(new Uint8Array(e));d=d.flush();e=new Uint8Array(d.length+6);e.set(new Uint8Array([120,156]));e.set(d,2);e.set(new Uint8Array([g&255,g>>8&255,g>>16&255,g>>24&255]),d.length+2);d=String.fromCharCode.apply(null,e);S("<</Length "+d.length+" /Filter [/FlateDecode]>>")}else S("<</Length "+d.length+">>");la(d);S("endobj")}x[1]=T;S("1 0 obj");S("<</Type /Pages");b="/Kids [";
for(g=0;g<D;g++)b+=3+2*g+" 0 R ";S(b+"]");S("/Count "+D);S(">>");S("endobj");for(var h in z)z.hasOwnProperty(h)&&(b=z[h],b.objectNumber=W(),S("<</BaseFont/"+b.PostScriptName+"/Type/Font"),"string"===typeof b.encoding&&S("/Encoding/"+b.encoding),S("/Subtype/Type1>>"),S("endobj"));U.publish("putResources");x[2]=T;S("2 0 obj");S("<<");S("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]");S("/Font <<");for(var m in z)z.hasOwnProperty(m)&&S("/"+m+" "+z[m].objectNumber+" 0 R");S(">>");S("/XObject <<");U.publish("putXobjectDict");
S(">>");S(">>");S("endobj");U.publish("postPutResources");W();S("<<");S("/Producer (jsPDF "+c.version+")");for(var p in R)R.hasOwnProperty(p)&&R[p]&&S("/"+p.substr(0,1).toUpperCase()+p.substr(1)+" ("+sa(R[p])+")");h=new Date;b=h.getTimezoneOffset();m=0>b?"+":"-";p=Math.floor(Math.abs(b/60));b=Math.abs(b%60);m=[m,ma(p),"'",ma(b),"'"].join("");S(["/CreationDate (D:",h.getFullYear(),ma(h.getMonth()+1),ma(h.getDate()),ma(h.getHours()),ma(h.getMinutes()),ma(h.getSeconds()),m,")"].join(""));S(">>");S("endobj");
W();S("<<");S("/Type /Catalog");S("/Pages 1 0 R");X||(X="fullwidth");switch(X){case "fullwidth":S("/OpenAction [3 0 R /FitH null]");break;case "fullheight":S("/OpenAction [3 0 R /FitV null]");break;case "fullpage":S("/OpenAction [3 0 R /Fit]");break;case "original":S("/OpenAction [3 0 R /XYZ null null 1]");break;default:h=""+X,"%"===h.substr(h.length-1)&&(X=parseInt(X)/100),"number"===typeof X&&S("/OpenAction [3 0 R /XYZ null null "+Q(X)+"]")}P||(P="continuous");switch(P){case "continuous":S("/PageLayout /OneColumn");
break;case "single":S("/PageLayout /SinglePage");break;case "two":case "twoleft":S("/PageLayout /TwoColumnLeft");break;case "tworight":S("/PageLayout /TwoColumnRight")}Z&&S("/PageMode /"+Z);U.publish("putCatalog");S(">>");S("endobj");h=T;S("xref");S("0 "+(w+1));S("0000000000 65535 f ");for(m=1;m<=w;m++)S(("0000000000"+x[m]).slice(-10)+" 00000 n ");S("trailer");S("<<");S("/Size "+(w+1));S("/Root "+w+" 0 R");S("/Info "+(w-1)+" 0 R");S(">>");S("startxref");S(h);S("%%EOF");u=!0;return J.join("\n")},pa=
function(a){var b="S";if("F"===a)b="f";else if("FD"===a||"DF"===a)b="B";else if("f"===a||"f*"===a||"B"===a||"B*"===a)b=a;return b},ya=function(){for(var a=Ea(),b=a.length,c=new ArrayBuffer(b),d=new Uint8Array(c);b--;)d[b]=a.charCodeAt(b);return c},ib=function(){return new Blob([ya()],{type:"application/pdf"})},Ka=function(b){b.foo=function(){try{return b.apply(this,arguments)}catch(c){var d=c.stack||"";~d.indexOf(" at ")&&(d=d.split(" at ")[1]);d="Error in function "+d.split("\n")[0].split("<")[0]+
": "+c.message;if(a.console)a.console.error(d,c),a.alert&&alert(d);else throw Error(d);}};b.foo.bar=b;return b.foo}(function(b,c){var d="dataur"===(""+b).substr(0,6)?"data:application/pdf;base64,"+btoa(Ea()):0;switch(b){case void 0:return Ea();case "save":if(navigator.getUserMedia&&(void 0===a.URL||void 0===a.URL.createObjectURL))return K.output("dataurlnewwindow");saveAs(ib(),c);"function"===typeof saveAs.unload&&a.setTimeout&&setTimeout(saveAs.unload,911);break;case "arraybuffer":return ya();case "blob":return ib();
case "bloburi":case "bloburl":return a.URL&&a.URL.createObjectURL(ib())||void 0;case "datauristring":case "dataurlstring":return d;case "dataurlnewwindow":var e=a.open(d);if(e||"undefined"===typeof safari)return e;case "datauri":case "dataurl":return a.document.location.href=d;default:throw Error('Output type "'+b+'" is not supported.');}});switch(f){case "pt":A=1;break;case "mm":A=72/25.4;break;case "cm":A=72/2.54;break;case "in":A=72;break;case "px":A=96/72;break;case "pc":A=12;break;case "em":A=
12;break;case "ex":A=6;break;default:throw"Invalid unit: "+f;}K.internal={pdfEscape:sa,getStyle:pa,getFont:function(){return z[v.apply(K,arguments)]},getFontSize:function(){return t},getLineHeight:function(){return t*r},write:function(a){S(1===arguments.length?a:Array.prototype.join.call(arguments," "))},getCoordinateString:function(a){return Q(a*A)},getVerticalCoordinateString:function(a){return Q((N-a)*A)},collections:{},newObject:W,putStream:la,events:U,scaleFactor:A,pageSize:{width:function(){return O},
height:function(){return N}},output:function(a,b){return Ka(a,b)},getNumberOfPages:function(){return G.length-1},pages:G};K.addPage=function(){ea.apply(this,arguments);return this};K.setPage=function(){Ia.apply(this,arguments);return this};K.setDisplayMode=function(a,b,c){X=a;P=b;Z=c;return this};K.text=function(a,b,c,d,e){function f(a){a=a.split("\t").join(Array(g.TabLen||9).join(" "));return sa(a,d)}"number"===typeof a&&(C=c,c=b,b=a,a=C);"string"===typeof a&&a.match(/[\n\r]/)&&(a=a.split(/\r\n|\r|\n/g));
"number"===typeof d&&(e=d,d=null);var h="",l="Td",p;e&&(e*=Math.PI/180,h=Math.cos(e),l=Math.sin(e),h=[Q(h),Q(l),Q(-1*l),Q(h),""].join(" "),l="Tm");d=d||{};"noBOM"in d||(d.noBOM=!0);"autoencode"in d||(d.autoencode=!0);if("string"===typeof a)a=f(a);else if(a instanceof Array){e=a.concat();a=[];for(var n=e.length;n--;)a.push(f(e.shift()));e=Math.ceil((N-c)*A/(t*r));0<=e&&e<a.length+1&&(p=a.splice(e-1));a=a.join(") Tj\nT* (")}else throw Error('Type of text must be string or Array. "'+a+'" is not recognized.');
S("BT\n/"+B+" "+t+" Tf\n"+t*r+" TL\n"+m+"\n"+h+Q(b*A)+" "+Q((N-c)*A)+" "+l+"\n("+a+") Tj\nET");p&&(this.addPage(),this.text(p,b,1.7*t/A));return this};K.lstext=function(a,b,c,d){for(var e=0,g=a.length;e<g;e++,b+=d)this.text(a[e],b,c)};K.line=function(a,b,c,d){return this.lines([[c-a,d-b]],a,b)};K.clip=function(){S("W");S("S")};K.lines=function(a,b,c,d,e,g){var f,h,l,m,p,n,q,r;"number"===typeof a&&(C=c,c=b,b=a,a=C);d=d||[1,1];S((b*A).toFixed(3)+" "+((N-c)*A).toFixed(3)+" m ");f=d[0];d=d[1];h=a.length;
r=c;for(c=0;c<h;c++)l=a[c],2===l.length?(b=l[0]*f+b,r=l[1]*d+r,S((b*A).toFixed(3)+" "+((N-r)*A).toFixed(3)+" l")):(m=l[0]*f+b,p=l[1]*d+r,n=l[2]*f+b,q=l[3]*d+r,b=l[4]*f+b,r=l[5]*d+r,S((m*A).toFixed(3)+" "+((N-p)*A).toFixed(3)+" "+(n*A).toFixed(3)+" "+((N-q)*A).toFixed(3)+" "+(b*A).toFixed(3)+" "+((N-r)*A).toFixed(3)+" c"));g&&S(" h");null!==e&&S(pa(e));return this};K.rect=function(a,b,c,d,e){pa(e);S([Q(a*A),Q((N-b)*A),Q(c*A),Q(-d*A),"re"].join(" "));null!==e&&S(pa(e));return this};K.triangle=function(a,
b,c,d,e,g,f){this.lines([[c-a,d-b],[e-c,g-d],[a-e,b-g]],a,b,[1,1],f,!0);return this};K.roundedRect=function(a,b,c,d,e,g,f){var h=4/3*(Math.SQRT2-1);this.lines([[c-2*e,0],[e*h,0,e,g-g*h,e,g],[0,d-2*g],[0,g*h,-(e*h),g,-e,g],[-c+2*e,0],[-(e*h),0,-e,-(g*h),-e,-g],[0,-d+2*g],[0,-(g*h),e*h,-g,e,-g]],a+e,b,[1,1],f);return this};K.ellipse=function(a,b,c,d,e){var g=4/3*(Math.SQRT2-1)*c,f=4/3*(Math.SQRT2-1)*d;S([Q((a+c)*A),Q((N-b)*A),"m",Q((a+c)*A),Q((N-(b-f))*A),Q((a+g)*A),Q((N-(b-d))*A),Q(a*A),Q((N-(b-d))*
A),"c"].join(" "));S([Q((a-g)*A),Q((N-(b-d))*A),Q((a-c)*A),Q((N-(b-f))*A),Q((a-c)*A),Q((N-b)*A),"c"].join(" "));S([Q((a-c)*A),Q((N-(b+f))*A),Q((a-g)*A),Q((N-(b+d))*A),Q(a*A),Q((N-(b+d))*A),"c"].join(" "));S([Q((a+g)*A),Q((N-(b+d))*A),Q((a+c)*A),Q((N-(b+f))*A),Q((a+c)*A),Q((N-b)*A),"c"].join(" "));null!==e&&S(pa(e));return this};K.circle=function(a,b,c,d){return this.ellipse(a,b,c,c,d)};K.setProperties=function(a){for(var b in R)R.hasOwnProperty(b)&&a[b]&&(R[b]=a[b]);return this};K.setFontSize=function(a){t=
a;return this};K.setFont=function(a,b){B=v(a,b);return this};K.setFontStyle=K.setFontType=function(a){B=v(void 0,a);return this};K.getFontList=function(){var a={},b,c,d;for(b in y)if(y.hasOwnProperty(b))for(c in a[b]=d=[],y[b])y[b].hasOwnProperty(c)&&d.push(c);return a};K.setLineWidth=function(a){S((a*A).toFixed(2)+" w");return this};K.setDrawColor=function(a,b,c,d){a=void 0===b||void 0===d&&a===b===c?"string"===typeof a?a+" G":Q(a/255)+" G":void 0===d?"string"===typeof a?[a,b,c,"RG"].join(" "):[Q(a/
255),Q(b/255),Q(c/255),"RG"].join(" "):"string"===typeof a?[a,b,c,d,"K"].join(" "):[Q(a),Q(b),Q(c),Q(d),"K"].join(" ");S(a);return this};K.setFillColor=function(a,b,c,d){a=void 0===b||void 0===d&&a===b===c?"string"===typeof a?a+" g":Q(a/255)+" g":void 0===d?"string"===typeof a?[a,b,c,"rg"].join(" "):[Q(a/255),Q(b/255),Q(c/255),"rg"].join(" "):"string"===typeof a?[a,b,c,d,"k"].join(" "):[Q(a),Q(b),Q(c),Q(d),"k"].join(" ");S(a);return this};K.setTextColor=function(a,b,c){"string"===typeof a&&/^#[0-9A-Fa-f]{6}$/.test(a)&&
(c=parseInt(a.substr(1),16),a=c>>16&255,b=c>>8&255,c&=255);m=0===a&&0===b&&0===c||"undefined"===typeof b?(a/255).toFixed(3)+" g":[(a/255).toFixed(3),(b/255).toFixed(3),(c/255).toFixed(3),"rg"].join(" ");return this};K.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2};K.setLineCap=function(a){var b=this.CapJoinStyles[a];if(void 0===b)throw Error("Line cap style of '"+a+"' is not recognized. See or extend .CapJoinStyles property for valid styles");
M=b;S(b+" J");return this};K.setLineJoin=function(a){var b=this.CapJoinStyles[a];if(void 0===b)throw Error("Line join style of '"+a+"' is not recognized. See or extend .CapJoinStyles property for valid styles");V=b;S(b+" j");return this};K.output=Ka;K.save=function(a){K.output("save",a)};for(var Fa in c.API)c.API.hasOwnProperty(Fa)&&("events"===Fa&&c.API.events.length?function(a,b){var c,d,e;for(e=b.length-1;-1!==e;e--)c=b[e][0],d=b[e][1],a.subscribe.apply(a,[c].concat("function"===typeof d?[d]:d))}(U,
c.API.events):K[Fa]=c.API[Fa]);(function(){for(var a=[["Helvetica","helvetica","normal"],["Helvetica-Bold","helvetica","bold"],["Helvetica-Oblique","helvetica","italic"],["Helvetica-BoldOblique","helvetica","bolditalic"],["Courier","courier","normal"],["Courier-Bold","courier","bold"],["Courier-Oblique","courier","italic"],["Courier-BoldOblique","courier","bolditalic"],["Times-Roman","times","normal"],["Times-Bold","times","bold"],["Times-Italic","times","italic"],["Times-BoldItalic","times","bolditalic"]],
b=0,c=a.length;b<c;b++){var d,e=a[b][0],g=a[b][1];d=a[b][2];var f="F"+(Object.keys(z).length+1).toString(10),e=z[f]={id:f,PostScriptName:e,fontName:g,fontStyle:d,encoding:"StandardEncoding",metadata:{}},h=f;y.hasOwnProperty(g)||(y[g]={});y[g][d]=h;U.publish("addFont",e);d=f;f=a[b][0].split("-");e=f[0];f=f[1]||"";y.hasOwnProperty(e)||(y[e]={});y[e][f]=d}U.publish("addFonts",{fonts:z,dictionary:y})})();B="F1";ea(n,d);U.publish("initialized");return K}var e={a0:[2383.94,3370.39],a1:[1683.78,2383.94],
a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],
c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};c.API={events:[]};c.version="1.0.272-debug 2014-09-29T15:09:diegocr";"function"===typeof define&&define.amd?define("jsPDF",function(){return c}):a.jsPDF=c;return c}("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||this);
(function(a){a.addHTML=function(a,c,e,d,f){if("undefined"===typeof html2canvas&&"undefined"===typeof rasterizeHTML)throw Error("You need either https://github.com/niklasvh/html2canvas or https://github.com/cburgmer/rasterizeHTML.js");"number"!==typeof c&&(d=c,f=e);"function"===typeof d&&(f=d,d=null);var n=this.internal,h=n.scaleFactor,g=n.pageSize.width,l=n.pageSize.height;d=d||{};d.onrendered=function(a){c=parseInt(c)||0;e=parseInt(e)||0;var b=d.dim||{},n=b.h||0,r=b.w||Math.min(g,a.width/h)-c,q=
"JPEG";d.format&&(q=d.format);if(a.height>l&&d.pagesplit)n=function(){for(var b=0;;){var d=document.createElement("canvas");d.width=Math.min(g*h,a.width);d.height=Math.min(l*h,a.height-b);d.getContext("2d").drawImage(a,0,b,a.width,d.height,0,0,d.width,d.height);var p=[d,c,b?0:e,d.width/h,d.height/h,q,null,"SLOW"];this.addImage.apply(this,p);b+=d.height;if(b>=a.height)break;this.addPage()}f(r,b,null,p)}.bind(this),"CANVAS"===a.nodeName?(b=new Image,b.onload=n,b.src=a.toDataURL("image/png"),a=b):n();
else{var b=Math.random().toString(35),w=[a,c,e,r,n,q,b,"SLOW"];this.addImage.apply(this,w);f(r,n,b,w)}}.bind(this);return"undefined"===typeof html2canvas||d.rstz?"undefined"!==typeof rasterizeHTML?(n="drawDocument","string"===typeof a&&(n=/^http/.test(a)?"drawURL":"drawHTML"),d.width=d.width||g*h,rasterizeHTML[n](a,void 0,d).then(function(a){d.onrendered(a.image)},function(a){f(null,a)})):null:html2canvas(a,d)}})(jsPDF.API);
(function(a){var b=["jpeg","jpg","png"],c=function(a){var b=this.internal.newObject(),d=this.internal.write,e=this.internal.putStream;a.n=b;d("<</Type /XObject");d("/Subtype /Image");d("/Width "+a.w);d("/Height "+a.h);a.cs===this.color_spaces.INDEXED?d("/ColorSpace [/Indexed /DeviceRGB "+(a.pal.length/3-1)+" "+("smask"in a?b+2:b+1)+" 0 R]"):(d("/ColorSpace /"+a.cs),a.cs===this.color_spaces.DEVICE_CMYK&&d("/Decode [1 0 1 0 1 0 1 0]"));d("/BitsPerComponent "+a.bpc);"f"in a&&d("/Filter /"+a.f);"dp"in
a&&d("/DecodeParms <<"+a.dp+">>");if("trns"in a&&a.trns.constructor==Array){for(var f="",h=0,n=a.trns.length;h<n;h++)f+=a.trns[h]+" "+a.trns[h]+" ";d("/Mask ["+f+"]")}"smask"in a&&d("/SMask "+(b+1)+" 0 R");d("/Length "+a.data.length+">>");e(a.data);d("endobj");"smask"in a&&(b={w:a.w,h:a.h,cs:"DeviceGray",bpc:a.bpc,dp:"/Predictor 15 /Colors 1 /BitsPerComponent "+a.bpc+" /Columns "+a.w,data:a.smask},"f"in a&&(b.f=a.f),c.call(this,b));a.cs===this.color_spaces.INDEXED&&(this.internal.newObject(),d("<< /Length "+
a.pal.length+">>"),e(this.arrayBufferToBinaryString(new Uint8Array(a.pal))),d("endobj"))},e=function(){var a=this.internal.collections.addImage_images,b;for(b in a)c.call(this,a[b])},d=function(){var a=this.internal.collections.addImage_images,b=this.internal.write,c,d;for(d in a)c=a[d],b("/I"+c.i,c.n,"0","R")},f=function(b){b&&"string"===typeof b&&(b=b.toUpperCase());return b in a.image_compression?b:a.image_compression.NONE},n=function(a){var b=0;if(a){if(Object.keys)a=Object.keys(a).length;else{var b=
0,c;for(c in a)a.hasOwnProperty(c)&&b++;a=b}b=a}return b},h=function(a,b){var c;if(b)for(var d in b)if(a===b[d].alias){c=b[d];break}return c};a.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPERATION:"Seperation",DEVICE_N:"DeviceN"};a.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",
ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};a.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"};a.sHashCode=function(a){return Array.prototype.reduce&&a.split("").reduce(function(a,b){a=(a<<5)-a+b.charCodeAt(0);return a&a},0)};a.isString=function(a){return"string"===typeof a};a.extractInfoFromBase64DataURI=function(a){return/^data:([\w]+?\/([\w]+?));base64,(.+?)$/g.exec(a)};a.supportsArrayBuffer=
function(){return"undefined"!==typeof ArrayBuffer&&"undefined"!==typeof Uint8Array};a.isArrayBuffer=function(a){return this.supportsArrayBuffer()?a instanceof ArrayBuffer:!1};a.isArrayBufferView=function(a){return this.supportsArrayBuffer()&&"undefined"!==typeof Uint32Array?a instanceof Int8Array||a instanceof Uint8Array||"undefined"!==typeof Uint8ClampedArray&&a instanceof Uint8ClampedArray||a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof
Float32Array||a instanceof Float64Array:!1};a.binaryStringToUint8Array=function(a){for(var b=a.length,c=new Uint8Array(b),d=0;d<b;d++)c[d]=a.charCodeAt(d);return c};a.arrayBufferToBinaryString=function(a){this.isArrayBuffer(a)&&(a=new Uint8Array(a));for(var b="",c=a.byteLength,d=0;d<c;d++)b+=String.fromCharCode(a[d]);return b};a.arrayBufferToBase64=function(a){var b="";a=new Uint8Array(a);for(var c=a.byteLength,d=c%3,c=c-d,e,f,h,n,u=0;u<c;u+=3)n=a[u]<<16|a[u+1]<<8|a[u+2],e=(n&16515072)>>18,f=(n&258048)>>
12,h=(n&4032)>>6,n&=63,b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[f]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[h]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[n];1==d?(n=a[c],b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(n&252)>>2]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(n&3)<<4]+"=="):2==d&&(n=a[c]<<8|
a[c+1],b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(n&64512)>>10]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(n&1008)>>4]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(n&15)<<2]+"=");return b};a.createImageInfo=function(a,b,c,d,e,f,h,n,u,x,z,y){a={alias:n,w:b,h:c,cs:d,bpc:e,i:h,data:a};f&&(a.f=f);u&&(a.dp=u);x&&(a.trns=x);z&&(a.pal=z);y&&(a.smask=y);return a};a.addImage=function(c,l,m,p,t,r,q,w,u){if("string"!==typeof l){var x=
r;r=t;t=p;p=m;m=l;l=x}"object"===typeof c&&("object"!==typeof c||1!==c.nodeType)&&"imageData"in c&&(x=c,c=x.imageData,l=x.format||l,m=x.x||m||0,p=x.y||p||0,t=x.w||t,r=x.h||r,q=x.alias||q,w=x.compression||w,u=x.rotation||x.angle||u);if(isNaN(m)||isNaN(p))throw console.error("jsPDF.addImage: Invalid coordinates",arguments),Error("Invalid coordinates passed to jsPDF.addImage");x=this.internal.collections.addImage_images;x||(this.internal.collections.addImage_images=x={},this.internal.events.subscribe("putResources",
e),this.internal.events.subscribe("putXobjectDict",d));var z;if(!(z=h(c,x))){var y;if("object"===typeof c&&1===c.nodeType)a:{z=c;var B=l,A=u;if("IMG"===z.nodeName&&z.hasAttribute("src")){var C=""+z.getAttribute("src");if(!A&&0===C.indexOf("data:image/")){c=C;break a}!B&&/\.png(?:[?#].*)?$/i.test(C)&&(B="png")}if("CANVAS"===z.nodeName)C=z;else{C=document.createElement("canvas");C.width=z.clientWidth||z.width;C.height=z.clientHeight||z.height;var D=C.getContext("2d");if(!D)throw"addImage requires canvas to be supported by browser.";
if(A){var H,G,L,J,M,V;J=Math.PI/180;var T;"object"===typeof A&&(H=A.x,G=A.y,L=A.bg,A=A.angle);T=A*J;A=Math.abs(Math.cos(T));J=Math.abs(Math.sin(T));M=C.width;V=C.height;C.width=V*J+M*A;C.height=V*A+M*J;isNaN(H)&&(H=C.width/2);isNaN(G)&&(G=C.height/2);D.clearRect(0,0,C.width,C.height);D.fillStyle=L||"white";D.fillRect(0,0,C.width,C.height);D.save();D.translate(H,G);D.rotate(T);D.drawImage(z,-(M/2),-(V/2));D.rotate(-T);D.translate(-H,-G);D.restore()}else D.drawImage(z,0,0,C.width,C.height)}c=C.toDataURL("png"==
(""+B).toLowerCase()?"image/png":"image/jpeg")}if("undefined"===typeof q||null===q)q="string"===typeof c&&a.sHashCode(c);if(!(z=h(q,x))){this.isString(c)&&((H=this.extractInfoFromBase64DataURI(c))?(l=H[2],c=atob(H[3])):137===c.charCodeAt(0)&&80===c.charCodeAt(1)&&78===c.charCodeAt(2)&&71===c.charCodeAt(3)&&(l="png"));l=(l||"JPEG").toLowerCase();if(-1===b.indexOf(l))throw Error("addImage currently only supports formats "+b+", not '"+l+"'");if("function"!==typeof a["process"+l.toUpperCase()])throw Error("please ensure that the plugin for '"+
l+"' support is added");this.supportsArrayBuffer()&&(y=c,c=this.binaryStringToUint8Array(c));z=this["process"+l.toUpperCase()](c,n(x),q,f(w),y);if(!z)throw Error("An unkwown error occurred whilst processing the image");}}y=m;H=p;G=z;L=z.i;z=t;B=r;z||B||(B=z=-96);0>z&&(z=-72*G.w/z/this.internal.scaleFactor);0>B&&(B=-72*G.h/B/this.internal.scaleFactor);0===z&&(z=B*G.w/G.h);0===B&&(B=z*G.h/G.w);D=[z,B];B=this.internal.getCoordinateString;C=this.internal.getVerticalCoordinateString;z=D[0];D=D[1];x[L]=
G;this.internal.write("q",B(z),"0 0",B(D),B(y),C(H+D),"cm /I"+G.i,"Do Q");return this};a.processJPEG=function(a,b,c,d,e){d=this.color_spaces.DEVICE_RGB;var f=this.decode.DCT_DECODE,h;if(this.isString(a)){a:{e=a;var n,u;if(255===!e.charCodeAt(0)||216===!e.charCodeAt(1)||255===!e.charCodeAt(2)||224===!e.charCodeAt(3)||74===!e.charCodeAt(6)||70===!e.charCodeAt(7)||73===!e.charCodeAt(8)||70===!e.charCodeAt(9)||0===!e.charCodeAt(10))throw Error("getJpegSize requires a binary string jpeg file");n=256*e.charCodeAt(4)+
e.charCodeAt(5);h=4;for(u=e.length;h<u;){h+=n;if(255!==e.charCodeAt(h))throw Error("getJpegSize could not find the size of the image");if(192===e.charCodeAt(h+1)||193===e.charCodeAt(h+1)||194===e.charCodeAt(h+1)||195===e.charCodeAt(h+1)||196===e.charCodeAt(h+1)||197===e.charCodeAt(h+1)||198===e.charCodeAt(h+1)||199===e.charCodeAt(h+1)){u=256*e.charCodeAt(h+5)+e.charCodeAt(h+6);n=256*e.charCodeAt(h+7)+e.charCodeAt(h+8);e=e.charCodeAt(h+9);h=[n,u,e];break a}else h+=2,n=256*e.charCodeAt(h)+e.charCodeAt(h+
1)}h=void 0}return this.createImageInfo(a,h[0],h[1],1==h[3]?this.color_spaces.DEVICE_GRAY:d,8,f,b,c)}this.isArrayBuffer(a)&&(a=new Uint8Array(a));if(this.isArrayBufferView(a)){a:{n=a;if(65496!==(n[0]<<8|n[1]))throw Error("Supplied data is not a JPEG");u=n.length;for(var x=(n[4]<<8)+n[5],z=4;z<u;){z+=x;h=n.subarray(z,z+5);x=(h[2]<<8)+h[3];if((192===h[1]||194===h[1])&&255===h[0]&&7<x){h=z+5;h=n.subarray(h,h+5);n=(h[2]<<8)+h[3];u=(h[0]<<8)+h[1];h=h[4];h={width:n,height:u,numcomponents:h};break a}z+=
2}throw Error("getJpegSizeFromBytes could not find the size of the image");}a=e||this.arrayBufferToBinaryString(a);return this.createImageInfo(a,h.width,h.height,1==h.numcomponents?this.color_spaces.DEVICE_GRAY:d,8,f,b,c)}return null};a.processJPG=function(){return this.processJPEG.apply(this,arguments)}})(jsPDF.API);
(function(a){a.autoPrint=function(){var a;this.internal.events.subscribe("postPutResources",function(){a=this.internal.newObject();this.internal.write("<< /S/Named /Type/Action /N/Print >>","endobj")});this.internal.events.subscribe("putCatalog",function(){this.internal.write("/OpenAction "+a+" 0 R")});return this}})(jsPDF.API);
(function(a){var b,c,e,d,f={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},n=1,h={left:0,top:0,bottom:0};a.setHeaderFunction=function(a){d=a};a.getTextDimensions=function(a){b=this.internal.getFont().fontName;c=this.table_font_size||this.internal.getFontSize();e=this.internal.getFont().fontStyle;var d=19.049976/25.4,f;f=document.createElement("font");f.id="jsPDFCell";f.style.fontStyle=e;f.style.fontName=b;f.style.fontSize=c+"pt";f.textContent=a;document.body.appendChild(f);a={w:(f.offsetWidth+1)*
d,h:(f.offsetHeight+1)*d};document.body.removeChild(f);return a};a.cellAddPage=function(){var a=this.margins||h;this.addPage();f={x:a.left,y:a.top,w:void 0,h:void 0,ln:void 0};n+=1};a.cellInitialize=function(){f={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0};n=1};a.cell=function(a,b,c,d,e,n,q){var w=f;void 0!==w.ln&&(w.ln===n?(a=w.x+w.w,b=w.y):(w.y+w.h+d+13>=this.internal.pageSize.height-(this.margins||h).bottom&&(this.cellAddPage(),this.printHeaders&&this.tableHeaderRow&&this.printHeaderRow(n,!0)),
b=f.y+f.h));if(void 0!==e[0])if(this.printingHeaderRow?this.rect(a,b,c,d,"FD"):this.rect(a,b,c,d),"right"===q){if(e instanceof Array)for(q=0;q<e.length;q++){var w=e[q],u=this.getStringUnitWidth(w)*this.internal.getFontSize();this.text(w,a+c-u-3,b+this.internal.getLineHeight()*(q+1))}}else this.text(e,a+3,b+this.internal.getLineHeight());f={x:a,y:b,w:c,h:d,ln:n};return this};a.arrayMax=function(a,b){var c=a[0],d,e,f;d=0;for(e=a.length;d<e;d+=1)f=a[d],b?-1===b(c,f)&&(c=f):f>c&&(c=f);return c};a.table=
function(b,c,d,e,t){if(!d)throw"No data for PDF table";var r=[],q=[],w,u,x,z={},y={},B,A,C=[],D=[],H;x=!1;var G=!0;u=12;B=h;B.width=this.internal.pageSize.width;t&&(!0===t.autoSize&&(x=!0),!1===t.printHeaders&&(G=!1),t.fontSize&&(u=t.fontSize),t.margins&&(B=t.margins));this.lnMod=0;f={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0};n=1;this.printHeaders=G;this.margins=B;this.setFontSize(u);this.table_font_size=u;if(void 0===e||null===e)r=Object.keys(d[0]);else if(e[0]&&"string"!==typeof e[0])for(B=
19.049976/25.4,t=0,u=e.length;t<u;t+=1)w=e[t],r.push(w.name),q.push(w.prompt),y[w.name]=w.width*B;else r=e;if(x)for(H=function(a){return a[w]},t=0,u=r.length;t<u;t+=1){w=r[t];z[w]=d.map(H);C.push(this.getTextDimensions(q[t]||w).w);A=z[w];e=0;for(x=A.length;e<x;e+=1)B=A[e],C.push(this.getTextDimensions(B).w);y[w]=a.arrayMax(C)}if(G){z=this.calculateLineHeight(r,y,q.length?q:r);t=0;for(u=r.length;t<u;t+=1)w=r[t],D.push([b,c,y[w],z,String(q.length?q[t]:w)]);this.setTableHeaderRow(D);this.printHeaderRow(1,
!1)}t=0;for(u=d.length;t<u;t+=1)for(q=d[t],z=this.calculateLineHeight(r,y,q),e=0,D=r.length;e<D;e+=1)w=r[e],this.cell(b,c,y[w],z,q[w],t+2,w.align);this.lastCellPos=f;this.table_x=b;this.table_y=c;return this};a.calculateLineHeight=function(a,b,c){for(var d,e=0,f=0;f<a.length;f++)d=a[f],c[d]=this.splitTextToSize(String(c[d]),b[d]-3),d=this.internal.getLineHeight()*c[d].length+3,d>e&&(e=d);return e};a.setTableHeaderRow=function(a){this.tableHeaderRow=a};a.printHeaderRow=function(a,b){if(!this.tableHeaderRow)throw"Property tableHeaderRow does not exist.";
var c,e,h;this.printingHeaderRow=!0;void 0!==d&&(e=d(this,n),f={x:e[0],y:e[1],w:e[2],h:e[3],ln:-1});this.setFontStyle("bold");var r=[];e=0;for(h=this.tableHeaderRow.length;e<h;e+=1)this.setFillColor(200,200,200),c=this.tableHeaderRow[e],b&&(c[1]=this.margins&&this.margins.top||0,r.push(c)),c=[].concat(c),this.cell.apply(this,c.concat(a));0<r.length&&this.setTableHeaderRow(r);this.setFontStyle("normal");this.printingHeaderRow=!1}})(jsPDF.API);
(function(a){var b,c,e,d,f,n,h,g,l,m,p,t,r,q,w,u,x,z,y;b=function(){function a(){}return function(b){a.prototype=b;return new a}}();l=function(a){var b,c,d,e,f;c=0;d=a.length;for(f=e=!1;!e&&c!==d;)(b=a[c]=a[c].trimLeft())&&(e=!0),c++;for(c=d-1;d&&!f&&-1!==c;)(b=a[c]=a[c].trimRight())&&(f=!0),c--;e=/\s+$/g;f=!0;for(c=0;c!==d;)b=a[c].replace(/\s+/g," "),f&&(b=b.trimLeft()),b&&(f=e.test(b)),a[c]=b,c++;return a};m=function(a,b,c,d){this.pdf=a;this.x=b;this.y=c;this.settings=d;this.watchFunctions=[];this.init();
return this};p=function(a){var b,c;b=void 0;c=a.split(",");for(a=c.shift();!b&&a;)b=e[a.trim().toLowerCase()],a=c.shift();return b};t=function(a){a="auto"===a?"0px":a;-1<a.indexOf("em")&&!isNaN(Number(a.replace("em","")))&&(a=18.719*Number(a.replace("em",""))+"px");-1<a.indexOf("pt")&&!isNaN(Number(a.replace("pt","")))&&(a=1.333*Number(a.replace("pt",""))+"px");var b;if(b=r[a])return b;b={"xx-small":9,"x-small":11,small:13,medium:16,large:19,"x-large":23,"xx-large":28,auto:0}[{css_line_height_string:a}];
if(void 0!==b||(b=parseFloat(a)))return r[a]=b/16;b=a.match(/([\d\.]+)(px)/);return 3===b.length?r[a]=parseFloat(b[1])/16:r[a]=1};g=function(a){var b,c;c=function(a){var b;b=function(a){return document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(a,null):a.currentStyle?a.currentStyle:a.style}(a);return function(a){a=a.replace(/-\D/g,function(a){return a.charAt(1).toUpperCase()});return b[a]}}(a);a={};b=void 0;a["font-family"]=p(c("font-family"))||"times";
a["font-style"]=d[c("font-style")]||"normal";a["text-align"]=TextAlignMap[c("text-align")]||"left";b=f[c("font-weight")]||"normal";"bold"===b&&(a["font-style"]="normal"===a["font-style"]?b:b+a["font-style"]);a["font-size"]=t(c("font-size"))||1;a["line-height"]=t(c("line-height"))||1;a.display="inline"===c("display")?"inline":"block";b="block"===a.display;a["margin-top"]=b&&t(c("margin-top"))||0;a["margin-bottom"]=b&&t(c("margin-bottom"))||0;a["padding-top"]=b&&t(c("padding-top"))||0;a["padding-bottom"]=
b&&t(c("padding-bottom"))||0;a["margin-left"]=b&&t(c("margin-left"))||0;a["margin-right"]=b&&t(c("margin-right"))||0;a["padding-left"]=b&&t(c("padding-left"))||0;a["padding-right"]=b&&t(c("padding-right"))||0;a["float"]=n[c("cssFloat")]||"none";a.clear=h[c("clear")]||"none";return a};q=function(a,b,c){var d,e,f,g;f=!1;if(d=c["#"+a.id])if("function"===typeof d)f=d(a,b);else for(e=0,g=d.length;!f&&e!==g;)f=d[e](a,b),e++;d=c[a.nodeName];if(!f&&d)if("function"===typeof d)f=d(a,b);else for(e=0,g=d.length;!f&&
e!==g;)f=d[e](a,b),e++;return f};y=function(a,b){var c,d,e,f,g,h;c=[];d=[];e=0;h=a.rows[0].cells.length;for(f=a.clientWidth;e<h;)g=a.rows[0].cells[e],d[e]={name:g.textContent.toLowerCase().replace(/\s+/g,""),prompt:g.textContent.replace(/\r?\n/g,""),width:g.clientWidth/f*b.pdf.internal.pageSize.width},e++;for(e=1;e<a.rows.length;){h=a.rows[e];g={};for(f=0;f<h.cells.length;)g[d[f].name]=h.cells[f].textContent.replace(/\r?\n/g,""),f++;c.push(g);e++}return{rows:c,headers:d}};var B={SCRIPT:1,STYLE:1,
NOSCRIPT:1,OBJECT:1,EMBED:1,SELECT:1},A=1;c=function(a,b,d){var e,f,h,l,m,p;f=a.childNodes;e=void 0;a=g(a);if(l="block"===a.display)b.setBlockBoundary(),b.setBlockStyle(a);h=0;for(m=f.length;h<m;){e=f[h];if("object"===typeof e){b.executeWatchFunctions(e);if(1===e.nodeType&&"HEADER"===e.nodeName){var n=e,r=b.pdf.margins_doc.top;b.pdf.internal.events.subscribe("addPage",function(a){b.y=r;c(n,b,d);b.pdf.margins_doc.top=b.y+10;b.y+=10},!1)}if(8===e.nodeType&&"#comment"===e.nodeName)~e.textContent.indexOf("ADD_PAGE")&&
(b.pdf.addPage(),b.y=b.pdf.margins_doc.top);else if(1!==e.nodeType||B[e.nodeName])if(3===e.nodeType){var t=e.nodeValue;if(e.nodeValue&&"LI"===e.parentNode.nodeName)if("OL"===e.parentNode.parentNode.nodeName)t=A++ +". "+t;else{var u=2;20<16*a["font-size"]&&(u=3);p=function(a,b){this.pdf.circle(a,b,u,"FD")}}b.addText(t,a)}else"string"===typeof e&&b.addText(e,a);else{var x;"IMG"===e.nodeName&&(x=e.getAttribute("src"),x=w[b.pdf.sHashCode(x)||x]);if(x){b.pdf.internal.pageSize.height-b.pdf.margins_doc.bottom<
b.y+e.height&&b.y>b.pdf.margins_doc.top&&(b.pdf.addPage(),b.y=b.pdf.margins_doc.top,b.executeWatchFunctions(e));var t=g(e),z=b.x,K=12/b.pdf.internal.scaleFactor,U=(t["margin-left"]+t["padding-left"])*K,Q=(t["margin-right"]+t["padding-right"])*K,ma=(t["margin-top"]+t["padding-top"])*K,K=(t["margin-bottom"]+t["padding-bottom"])*K,z=void 0!==t["float"]&&"right"===t["float"]?z+(b.settings.width-e.width-Q):z+U;b.pdf.addImage(x,z,b.y+ma,e.width,e.height);x=void 0;"right"===t["float"]||"left"===t["float"]?
(b.watchFunctions.push(function(a,c,d,e){return b.y>=c?(b.x+=a,b.settings.width+=d,!0):e&&1===e.nodeType&&!B[e.nodeName]&&b.x+e.width>b.pdf.margins_doc.left+b.pdf.margins_doc.width?(b.x+=a,b.y=c,b.settings.width+=d,!0):!1}.bind(this,"left"===t["float"]?-e.width-U-Q:0,b.y+e.height+ma+K,e.width)),b.watchFunctions.push(function(a,c,d){return b.y<a&&c===b.pdf.internal.getNumberOfPages()?1===d.nodeType&&"both"===g(d).clear?(b.y=a,!0):!1:!0}.bind(this,b.y+e.height,b.pdf.internal.getNumberOfPages())),b.settings.width-=
e.width+U+Q,"left"===t["float"]&&(b.x+=e.width+U+Q)):b.y+=e.height+K}else"TABLE"===e.nodeName?(e=y(e,b),b.y+=10,b.pdf.table(b.x,b.y,e.rows,e.headers,{autoSize:!1,printHeaders:!0,margins:b.pdf.margins_doc}),b.y=b.pdf.lastCellPos.y+b.pdf.lastCellPos.h+20):"OL"===e.nodeName||"UL"===e.nodeName?(A=1,q(e,b,d)||c(e,b,d),b.y+=10):"LI"===e.nodeName?(t=b.x,b.x+="UL"===e.parentNode.nodeName?22:10,b.y+=3,q(e,b,d)||c(e,b,d),b.x=t):"BR"===e.nodeName?b.y+=a["font-size"]*b.pdf.internal.scaleFactor:q(e,b,d)||c(e,
b,d)}}h++}if(l)return b.setBlockBoundary(p)};w={};u=function(a,b,c,d){function e(){b.pdf.internal.events.publish("imagesLoaded");d(g)}function f(a,c,d){if(a){var l=new Image;g=++h;l.crossOrigin="";l.onerror=l.onload=function(){if(l.complete&&(0===l.src.indexOf("data:image/")&&(l.width=c||l.width||0,l.height=d||l.height||0),l.width+l.height)){var f=b.pdf.sHashCode(a)||a;w[f]=w[f]||l}--h||e()};l.src=a}}a=a.getElementsByTagName("img");c=a.length;for(var g,h=0;c--;)f(a[c].getAttribute("src"),a[c].width,
a[c].height);return h||e()};x=function(a,b,d){var e=a.getElementsByTagName("footer");if(0<e.length){e=e[0];a=b.pdf.internal.write;var f=b.y;b.pdf.internal.write=function(){};c(e,b,d);var g=Math.ceil(b.y-f)+5;b.y=f;b.pdf.internal.write=a;b.pdf.margins_doc.bottom+=g;a=function(a){a=void 0!==a?a.pageNumber:1;var f=b.y;b.y=b.pdf.internal.pageSize.height-b.pdf.margins_doc.bottom;b.pdf.margins_doc.bottom-=g;for(var h=e.getElementsByTagName("span"),l=0;l<h.length;++l)-1<(" "+h[l].className+" ").replace(/[\n\t]/g,
" ").indexOf(" pageCounter ")&&(h[l].innerHTML=a),-1<(" "+h[l].className+" ").replace(/[\n\t]/g," ").indexOf(" totalPages ")&&(h[l].innerHTML="###jsPDFVarTotalPages###");c(e,b,d);b.pdf.margins_doc.bottom+=g;b.y=f};for(var f=e.getElementsByTagName("span"),h=0;h<f.length;++h)-1<(" "+f[h].className+" ").replace(/[\n\t]/g," ").indexOf(" totalPages ")&&b.pdf.internal.events.subscribe("htmlRenderingFinished",b.pdf.putTotalPages.bind(b.pdf,"###jsPDFVarTotalPages###"),!0);b.pdf.internal.events.subscribe("addPage",
a,!1);a();B.FOOTER=1}};z=function(a,b,d,e,f,g){if(!b)return!1;"string"===typeof b||b.parentNode||(b=""+b.innerHTML);"string"===typeof b&&(b=function(a){var b,c;c="jsPDFhtmlText"+Date.now().toString()+(1E3*Math.random()).toFixed(0);b=document.createElement("div");b.style.cssText="position: absolute !important;clip: rect(1px 1px 1px 1px); /* IE6, IE7 */clip: rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height: 1px !important;width: 1px !important; top:auto;left:-100px;overflow: hidden;";
b.innerHTML='<iframe style="height:1px;width:1px" name="'+c+'" />';document.body.appendChild(b);b=window.frames[c];b.document.body.innerHTML=a;return b.document.body}(b.replace(/<\/?script[^>]*?>/gi,"")));var h=new m(a,d,e,f),l;u.call(this,b,h,f.elementHandlers,function(a){x(b,h,f.elementHandlers);c(b,h,f.elementHandlers);h.pdf.internal.events.publish("htmlRenderingFinished");l=h.dispose();"function"===typeof g?g(l):a&&console.error("jsPDF Warning: rendering issues? provide a callback to fromHTML!")});
return l||{x:h.x,y:h.y}};m.prototype.init=function(){this.paragraph={text:[],style:[]};return this.pdf.internal.write("q")};m.prototype.dispose=function(){this.pdf.internal.write("Q");return{x:this.x,y:this.y,ready:!0}};m.prototype.executeWatchFunctions=function(a){var b=!1,c=[];if(0<this.watchFunctions.length){for(var d=0;d<this.watchFunctions.length;++d)!0===this.watchFunctions[d](a)?b=!0:c.push(this.watchFunctions[d]);this.watchFunctions=c}return b};m.prototype.splitFragmentsIntoLines=function(a,
c){var d,e,f,g,h,l,m,p,n,r,q;m=this.pdf.internal.scaleFactor;g={};e=q=void 0;p=[];n=[p];d=0;for(r=this.settings.width;a.length;)if(h=a.shift(),q=c.shift(),h)if(e=q["font-family"],l=q["font-style"],f=g[e+l],f||(f=this.pdf.internal.getFont(e,l).metadata.Unicode,g[e+l]=f),e={widths:f.widths,kerning:f.kerning,fontSize:12*q["font-size"],textIndent:d},f=this.pdf.getStringUnitWidth(h,e)*e.fontSize/m,d+f>r){d=this.pdf.splitTextToSize(h,r,e);for(p.push([d.shift(),q]);d.length;)p=[[d.shift(),q]],n.push(p);
d=this.pdf.getStringUnitWidth(p[0][0],e)*e.fontSize/m}else p.push([h,q]),d+=f;if(void 0!==q["text-align"]&&("center"===q["text-align"]||"right"===q["text-align"]||"justify"===q["text-align"]))for(g=0;g<n.length;++g)p=this.pdf.getStringUnitWidth(n[g][0][0],e)*e.fontSize/m,0<g&&(n[g][0][1]=b(n[g][0][1])),p=r-p,"right"===q["text-align"]?n[g][0][1]["margin-left"]=p:"center"===q["text-align"]?n[g][0][1]["margin-left"]=p/2:"justify"===q["text-align"]&&(d=n[g][0][0].split(" ").length-1,n[g][0][1]["word-spacing"]=
p/d,g===n.length-1&&(n[g][0][1]["word-spacing"]=0));return n};m.prototype.RenderTextFragment=function(a,b){var c;c=0;this.pdf.internal.pageSize.height-this.pdf.margins_doc.bottom<this.y+this.pdf.internal.getFontSize()&&(this.pdf.internal.write("ET","Q"),this.pdf.addPage(),this.y=this.pdf.margins_doc.top,this.pdf.internal.write("q","BT 0 g",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td"),c=Math.max(c,b["line-height"],b["font-size"]),this.pdf.internal.write(0,
(-12*c).toFixed(2),"Td"));c=this.pdf.internal.getFont(b["font-family"],b["font-style"]);void 0!==b["word-spacing"]&&0<b["word-spacing"]&&this.pdf.internal.write(b["word-spacing"].toFixed(2),"Tw");this.pdf.internal.write("/"+c.id,(12*b["font-size"]).toFixed(2),"Tf","("+this.pdf.internal.pdfEscape(a)+") Tj");void 0!==b["word-spacing"]&&this.pdf.internal.write(0,"Tw")};m.prototype.renderParagraph=function(a){var b,c,d,e,f,g,h,m,p;c=l(this.paragraph.text);g=this.paragraph.style;m=(b=this.paragraph.blockstyle)||
{};this.paragraph={text:[],style:[],blockstyle:{},priorblockstyle:b};if(c.join("").trim()){g=this.splitFragmentsIntoLines(c,g);h=f=void 0;c=12/this.pdf.internal.scaleFactor;f=(Math.max((b["margin-top"]||0)-(m["margin-bottom"]||0),0)+(b["padding-top"]||0))*c;m=((b["margin-bottom"]||0)+(b["padding-bottom"]||0))*c;b=this.pdf.internal.write;e=d=void 0;this.y+=f;b("q","BT 0 g",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td");for(var n=0;g.length;){f=
g.shift();d=h=0;for(e=f.length;d!==e;)f[d][0].trim()&&(h=Math.max(h,f[d][1]["line-height"],f[d][1]["font-size"]),p=7*f[d][1]["font-size"]),d++;d=0;void 0!==f[0][1]["margin-left"]&&0<f[0][1]["margin-left"]&&(wantedIndent=this.pdf.internal.getCoordinateString(f[0][1]["margin-left"]),d=wantedIndent-n,n=wantedIndent);b(d,(-12*h).toFixed(2),"Td");d=0;for(e=f.length;d!==e;)f[d][0]&&this.RenderTextFragment(f[d][0],f[d][1]),d++;this.y+=h*c;if(this.executeWatchFunctions(f[0][1])&&0<g.length){var q=[],r=[];
g.forEach(function(a){for(var b=0,c=a.length;b!==c;)a[b][0]&&(q.push(a[b][0]+" "),r.push(a[b][1])),++b});g=this.splitFragmentsIntoLines(l(q),r);b("ET","Q");b("q","BT 0 g",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td")}}a&&"function"===typeof a&&a.call(this,this.x-9,this.y-p/2);b("ET","Q");return this.y+=m}};m.prototype.setBlockBoundary=function(a){return this.renderParagraph(a)};m.prototype.setBlockStyle=function(a){return this.paragraph.blockstyle=
a};m.prototype.addText=function(a,b){this.paragraph.text.push(a);return this.paragraph.style.push(b)};e={helvetica:"helvetica","sans-serif":"helvetica","times new roman":"times",serif:"times",times:"times",monospace:"courier",courier:"courier"};f={100:"normal",200:"normal",300:"normal",400:"normal",500:"bold",600:"bold",700:"bold",800:"bold",900:"bold",normal:"normal",bold:"bold",bolder:"bold",lighter:"normal"};d={normal:"normal",italic:"italic",oblique:"italic"};TextAlignMap={left:"left",right:"right",
center:"center",justify:"justify"};n={none:"none",right:"right",left:"left"};h={none:"none",both:"both"};r={normal:1};a.fromHTML=function(a,b,c,d,e,f){this.margins_doc=f||{top:0,bottom:0};d||(d={});d.elementHandlers||(d.elementHandlers={});return z(this,a,isNaN(b)?4:b,isNaN(c)?4:c,d,e)}})(jsPDF.API);
(function(a){var b,c,e;a.addJS=function(a){e=a;this.internal.events.subscribe("postPutResources",function(a){b=this.internal.newObject();this.internal.write("<< /Names [(EmbeddedJS) "+(b+1)+" 0 R] >>","endobj");c=this.internal.newObject();this.internal.write("<< /S /JavaScript /JS (",e,") >>","endobj")});this.internal.events.subscribe("putCatalog",function(){void 0!==b&&void 0!==c&&this.internal.write("/Names <</JavaScript "+b+" 0 R>>")});return this}})(jsPDF.API);
(function(a){var b=function(b,g,l,m){var p=5,t=d;switch(m){case a.image_compression.FAST:p=3;t=e;break;case a.image_compression.MEDIUM:p=6;t=f;break;case a.image_compression.SLOW:p=9,t=n}m=b.length/g;for(var r=new Uint8Array(b.length+m),q=[c,e,d,f,n],w=0,u,x,z;w<m;w++){z=w*g;u=b.subarray(z,z+g);if(t)r.set(t(u,l,x),z+w);else{for(var y=0,B=q.length,A=[];y<B;y++)A[y]=q[y](u,l,x);x=A.concat();for(var y=0,B=x.length,C=void 0,D=void 0,H=void 0;y<B;){for(var C=x[y].slice(1),G=0,L=C.length,J=0;G<L;)J+=Math.abs(C[G++]);
C=J;if(C<D||!D)D=C,H=y;y++}r.set(A[H],z+w)}x=u}b=r;g=Uint8Array;l=Math.LOG2E*Math.log(32768)-8<<4|8;t=l<<8;m=Math.min(3,0);t=t|m<<6|0;t+=31-t%31;g=new g([l,t&255]);l=1;t=0;m=b.length;for(q=0;0<m;){r=void 0<m?void 0:m;m-=r;do l+=b[q++],t+=l;while(--r);l%=65521;t%=65521}l=(t<<16|l)>>>0;t=new Deflater(p);p=t.append(b);b=t.flush();t=g.length+p.length+b.length;m=new Uint8Array(t+4);m.set(g);m.set(p,g.length);m.set(b,g.length+p.length);m[t++]=l>>>24&255;m[t++]=l>>>16&255;m[t++]=l>>>8&255;m[t++]=l&255;return a.arrayBufferToBinaryString(m)},
c=function(a,b,c){a=Array.apply([],a);a.unshift(0);return a},e=function(a,b,c){c=[];var d=0,e=a.length,f;for(c[0]=1;d<e;d++)f=a[d-b]||0,c[d+1]=a[d]-f+256&255;return c},d=function(a,b,c){b=[];var d=0,e=a.length,f;for(b[0]=2;d<e;d++)f=c&&c[d]||0,b[d+1]=a[d]-f+256&255;return b},f=function(a,b,c){var d=[],e=0,f=a.length,n,q;for(d[0]=3;e<f;e++)n=a[e-b]||0,q=c&&c[e]||0,d[e+1]=a[e]+256-(n+q>>>1)&255;return d},n=function(a,b,c){var d=[],e=0,f=a.length,n,q,w;for(d[0]=4;e<f;e++){n=a[e-b]||0;q=c&&c[e]||0;w=
c&&c[e-b]||0;var u=n+q-w,x=Math.abs(u-n),z=Math.abs(u-q),u=Math.abs(u-w);n=x<=z&&x<=u?n:z<=u?q:w;d[e+1]=a[e]-n+256&255}return d};a.processPNG=function(c,d,e,f,p){p=this.color_spaces.DEVICE_RGB;var n=this.decode.FLATE_DECODE,r=8,q,w,u,x,z;this.isArrayBuffer(c)&&(c=new Uint8Array(c));if(this.isArrayBufferView(c)){if("function"!==typeof PNG||"function"!==typeof FlateStream)throw Error("PNG support requires png.js and zlib.js");q=new PNG(c);c=q.imgData;r=q.bits;p=q.colorSpace;w=q.colors;if(-1!==[4,6].indexOf(q.colorType)){if(8===
q.bits){z=new window["Uint"+q.pixelBitlength+"Array"](q.decodePixels().buffer);var y=z.length,B=new Uint8Array(y*q.colors),A=new Uint8Array(y),C=q.pixelBitlength-q.bits,D=0;c=0;for(var H,G;D<y;D++){H=z[D];for(G=0;G<C;)B[c++]=H>>>G&255,G+=q.bits;A[D]=H>>>G&255}}if(16===q.bits){z=new Uint32Array(q.decodePixels().buffer);y=z.length;B=new Uint8Array(32/q.pixelBitlength*y*q.colors);A=new Uint8Array(32/q.pixelBitlength*y);r=1<q.colors;for(C=c=D=0;D<y;)H=z[D++],B[c++]=H>>>0&255,r&&(B[c++]=H>>>16&255,H=z[D++],
B[c++]=H>>>0&255),A[C++]=H>>>16&255;r=8}if(y=f!==a.image_compression.NONE)if(y="function"===typeof Deflater,!y)throw Error("requires deflate.js for compression");y?(c=b(B,q.width*q.colors,q.colors,f),z=b(A,q.width,1,f)):(c=B,z=A,n=null)}if(3===q.colorType&&(p=this.color_spaces.INDEXED,x=q.palette,q.transparency.indexed)){f=q.transparency.indexed;D=A=0;for(y=f.length;D<y;++D)A+=f[D];A/=255;if(A===y-1&&-1!==f.indexOf(0))u=[f.indexOf(0)];else if(A!==y){z=q.decodePixels();A=new Uint8Array(z.length);D=
0;for(y=z.length;D<y;D++)A[D]=f[z[D]];z=b(A,q.width,1)}}w=n===this.decode.FLATE_DECODE?"/Predictor 15 /Colors "+w+" /BitsPerComponent "+r+" /Columns "+q.width:"/Colors "+w+" /BitsPerComponent "+r+" /Columns "+q.width;if(this.isArrayBuffer(c)||this.isArrayBufferView(c))c=this.arrayBufferToBinaryString(c);if(z&&this.isArrayBuffer(z)||this.isArrayBufferView(z))z=this.arrayBufferToBinaryString(z);return this.createImageInfo(c,q.width,q.height,p,r,n,d,e,w,u,x,z)}throw Error("Unsupported PNG image data, try using JPEG instead.");
}})(jsPDF.API);
(function(a){a.addSVG=function(a,c,e,d,f){function n(a){for(var b=parseFloat(a[1]),c=parseFloat(a[2]),d=[],e=3,f=a.length;e<f;)"c"===a[e]?(d.push([parseFloat(a[e+1]),parseFloat(a[e+2]),parseFloat(a[e+3]),parseFloat(a[e+4]),parseFloat(a[e+5]),parseFloat(a[e+6])]),e+=7):"l"===a[e]?(d.push([parseFloat(a[e+1]),parseFloat(a[e+2])]),e+=3):e+=1;return[b,c,d]}if(void 0===c||void 0===e)throw Error("addSVG needs values for 'x' and 'y'");var h=function(a){var b=a.createElement("iframe"),c=a.createElement("style");c.type=
"text/css";c.styleSheet?c.styleSheet.cssText=".jsPDF_sillysvg_iframe {display:none;position:absolute;}":c.appendChild(a.createTextNode(".jsPDF_sillysvg_iframe {display:none;position:absolute;}"));a.getElementsByTagName("head")[0].appendChild(c);b.name="childframe";b.setAttribute("width",0);b.setAttribute("height",0);b.setAttribute("frameborder","0");b.setAttribute("scrolling","no");b.setAttribute("seamless","seamless");b.setAttribute("class","jsPDF_sillysvg_iframe");a.body.appendChild(b);return b}(document),
h=function(a,b){var c=(b.contentWindow||b.contentDocument).document;c.write(a);c.close();return c.getElementsByTagName("svg")[0]}(a,h);a=[1,1];var g=parseFloat(h.getAttribute("width")),l=parseFloat(h.getAttribute("height"));g&&l&&(d&&f?a=[d/g,f/l]:d?a=[d/g,d/g]:f&&(a=[f/l,f/l]));h=h.childNodes;d=0;for(f=h.length;d<f;d++)g=h[d],g.tagName&&"PATH"===g.tagName.toUpperCase()&&(g=n(g.getAttribute("d").split(" ")),g[0]=g[0]*a[0]+c,g[1]=g[1]*a[1]+e,this.lines.call(this,g[2],g[0],g[1],a));return this}})(jsPDF.API);
(function(a){var b=a.getCharWidthsArray=function(a,b){b||(b={});var c=b.widths?b.widths:this.internal.getFont().metadata.Unicode.widths,d=c.fof?c.fof:1,e=b.kerning?b.kerning:this.internal.getFont().metadata.Unicode.kerning,f=e.fof?e.fof:1,t,r,q,w=0,u=c[0]||d,x=[];t=0;for(r=a.length;t<r;t++)q=a.charCodeAt(t),x.push((c[q]||u)/d+(e[q]&&e[q][w]||0)/f),w=q;return x},c=function(a){for(var b=a.length,c=0;b;)b--,c+=a[b];return c},e=a.getStringUnitWidth=function(a,d){return c(b.call(this,a,d))},d=function(a,
b,c,d){for(var e=[],f=0,t=a.length,r=0;f!==t&&r+b[f]<c;)r+=b[f],f++;e.push(a.slice(0,f));c=f;for(r=0;f!==t;)r+b[f]>d&&(e.push(a.slice(c,f)),r=0,c=f),r+=b[f],f++;c!==f&&e.push(a.slice(c,f));return e},f=function(a,f,g){g||(g={});var l=[],m=[l],p=g.textIndent||0,t=0,r=0,q,w=a.split(" "),u=b(" ",g)[0],x,z,y;if(y=-1===g.lineIndent?w[0].length+2:g.lineIndent||0){var B=Array(y).join(" "),A=[];w.map(function(a){a=a.split(/\s*\n/);1<a.length?A=A.concat(a.map(function(a,b){return(b&&a.length?"\n":"")+a})):
A.push(a[0])});w=A;y=e(B,g)}x=0;for(z=w.length;x<z;x++){var C=0;a=w[x];y&&"\n"==a[0]&&(a=a.substr(1),C=1);q=b(a,g);r=c(q);if(p+t+r>f||C){if(r>f){p=d(a,q,f-(p+t),f);l.push(p.shift());for(l=[p.pop()];p.length;)m.push([p.shift()]);r=c(q.slice(a.length-l[0].length))}else l=[a];m.push(l);p=r+y}else l.push(a),p+=t+r;t=u}return m.map(y?function(a,b){return(b?B:"")+a.join(" ")}:function(a){return a.join(" ")})};a.splitTextToSize=function(a,b,c){c||(c={});var d=c.fontSize||this.internal.getFontSize(),e;var p=
c;e={0:1};var t={};p.widths&&p.kerning?e={widths:p.widths,kerning:p.kerning}:(p=this.internal.getFont(p.fontName,p.fontStyle),e=p.metadata.Unicode?{widths:p.metadata.Unicode.widths||e,kerning:p.metadata.Unicode.kerning||t}:{widths:e,kerning:t});a=Array.isArray(a)?a:a.split(/\r?\n/);b=1*this.internal.scaleFactor*b/d;e.textIndent=c.textIndent?1*c.textIndent*this.internal.scaleFactor/d:0;e.lineIndent=c.lineIndent;t=[];c=0;for(d=a.length;c<d;c++)t=t.concat(f(a[c],b,e));return t}})(jsPDF.API);
(function(a){var b=function(a){for(var b={},c=0;16>c;c++)b["klmnopqrstuvwxyz"[c]]="0123456789abcdef"[c];for(var d={},e=1,m,p=d,t=[],r,q="",w="",u,x=a.length-1,c=1;c!=x;)r=a[c],c+=1,"'"==r?m?(u=m.join(""),m=void 0):m=[]:m?m.push(r):"{"==r?(t.push([p,u]),p={},u=void 0):"}"==r?(r=t.pop(),r[0][r[1]]=p,u=void 0,p=r[0]):"-"==r?e=-1:void 0===u?b.hasOwnProperty(r)?(q+=b[r],u=parseInt(q,16)*e,e=1,q=""):q+=r:b.hasOwnProperty(r)?(w+=b[r],p[u]=parseInt(w,16)*e,e=1,u=void 0,w=""):w+=r;return d},c={codePages:["WinAnsiEncoding"],
WinAnsiEncoding:b("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},e={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},d={Unicode:{"Courier-Oblique":b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":b("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),
"Helvetica-Bold":b("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),
Courier:b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":b("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),
Helvetica:b("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),
"Helvetica-BoldOblique":b("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),
"Courier-Bold":b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":b("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),
"Times-Roman":b("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),
"Helvetica-Oblique":b("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};
a.events.push(["addFonts",function(a){var b,c,g,l;for(c in a.fonts)if(a.fonts.hasOwnProperty(c)){b=a.fonts[c];if(g=d.Unicode[b.PostScriptName])l=b.metadata.Unicode?b.metadata.Unicode:b.metadata.Unicode={},l.widths=g.widths,l.kerning=g.kerning;if(g=e.Unicode[b.PostScriptName])l=b.metadata.Unicode?b.metadata.Unicode:b.metadata.Unicode={},l.encoding=g,g.codePages&&g.codePages.length&&(b.encoding=g.codePages[0])}}])})(jsPDF.API);
(function(a){a.putTotalPages=function(a){a=new RegExp(a,"g");for(var c=1;c<=this.internal.getNumberOfPages();c++)for(var e=0;e<this.internal.pages[c].length;e++)this.internal.pages[c][e]=this.internal.pages[c][e].replace(a,this.internal.getNumberOfPages());return this}})(jsPDF.API);
(function(a){a.URL=a.URL||a.webkitURL;if(a.Blob&&a.URL)try{new Blob;return}catch(b){}var c=a.BlobBuilder||a.WebKitBlobBuilder||a.MozBlobBuilder||function(a){var b=function(a){return Object.prototype.toString.call(a).match(/^\[object\s(.*)\]$/)[1]},c=function(){this.data=[]},n=function(a,b,c){this.data=a;this.size=a.length;this.type=b;this.encoding=c},h=c.prototype,g=n.prototype,l=a.FileReaderSync,m=function(a){this.code=this[this.name=a]},p="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),
t=p.length,r=a.URL||a.webkitURL||a,q=r.createObjectURL,w=r.revokeObjectURL,u=r,x=a.btoa,z=a.atob,y=a.ArrayBuffer,B=a.Uint8Array,A=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(n.fake=g.fake=!0;t--;)m.prototype[p[t]]=t+1;r.createObjectURL||(u=a.URL=function(a){var b=document.createElementNS("http://www.w3.org/1999/xhtml","a");b.href=a;"origin"in b||("data:"===b.protocol.toLowerCase()?b.origin=null:(a=a.match(A),b.origin=a&&a[1]));return b});u.createObjectURL=function(a){var b=a.type;null===b&&(b="application/octet-stream");
if(a instanceof n)return b="data:"+b,"base64"===a.encoding?b+";base64,"+a.data:"URI"===a.encoding?b+","+decodeURIComponent(a.data):x?b+";base64,"+x(a.data):b+","+encodeURIComponent(a.data);if(q)return q.call(r,a)};u.revokeObjectURL=function(a){"data:"!==a.substring(0,5)&&w&&w.call(r,a)};h.append=function(a){var c=this.data;if(B&&(a instanceof y||a instanceof B)){var e="";a=new B(a);for(var f=0,g=a.length;f<g;f++)e+=String.fromCharCode(a[f]);c.push(e)}else if("Blob"===b(a)||"File"===b(a))if(l)e=new l,
c.push(e.readAsBinaryString(a));else throw new m("NOT_READABLE_ERR");else a instanceof n?"base64"===a.encoding&&z?c.push(z(a.data)):"URI"===a.encoding?c.push(decodeURIComponent(a.data)):"raw"===a.encoding&&c.push(a.data):("string"!==typeof a&&(a+=""),c.push(unescape(encodeURIComponent(a))))};h.getBlob=function(a){arguments.length||(a=null);return new n(this.data.join(""),a,"raw")};h.toString=function(){return"[object BlobBuilder]"};g.slice=function(a,b,c){var d=arguments.length;3>d&&(c=null);return new n(this.data.slice(a,
1<d?b:this.data.length),c,this.encoding)};g.toString=function(){return"[object Blob]"};g.close=function(){this.size=0;delete this.data};return c}(a);a.Blob=function(a,b){var f=b?b.type||"":"",n=new c;if(a)for(var h=0,g=a.length;h<g;h++)n.append(a[h]);return n.getBlob(f)}})("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||this.content||this);
saveAs=saveAs||"undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(a){if("undefined"===typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var b=a.document,c=b.createElementNS("http://www.w3.org/1999/xhtml","a"),e="download"in c,d=function(c){var d=b.createEvent("MouseEvents");d.initMouseEvent("click",!0,!1,a,0,0,0,0,0,!1,!1,!1,!1,0,null);c.dispatchEvent(d)},f=a.webkitRequestFileSystem,n=a.requestFileSystem||f||a.mozRequestFileSystem,
h=function(b){(a.setImmediate||a.setTimeout)(function(){throw b;},0)},g=0,l=function(b){var c=function(){"string"===typeof b?(a.URL||a.webkitURL||a).revokeObjectURL(b):b.remove()};a.chrome?c():setTimeout(c,10)},m=function(a,b,c){b=[].concat(b);for(var d=b.length;d--;){var e=a["on"+b[d]];if("function"===typeof e)try{e.call(a,c||a)}catch(f){h(f)}}},p=function(b,h){var p=this,t=b.type,x=!1,z,y,B=function(){m(p,["writestart","progress","write","writeend"])},A=function(){if(x||!z)z=(a.URL||a.webkitURL||
a).createObjectURL(b);y?y.location.href=z:void 0==a.open(z,"_blank")&&"undefined"!==typeof safari&&(a.location.href=z);p.readyState=p.DONE;B();l(z)},C=function(a){return function(){if(p.readyState!==p.DONE)return a.apply(this,arguments)}},D={create:!0,exclusive:!1},H;p.readyState=p.INIT;h||(h="download");if(e)z=(a.URL||a.webkitURL||a).createObjectURL(b),c.href=z,c.download=h,d(c),p.readyState=p.DONE,B(),l(z);else{a.chrome&&t&&"application/octet-stream"!==t&&(H=b.slice||b.webkitSlice,b=H.call(b,0,
b.size,"application/octet-stream"),x=!0);f&&"download"!==h&&(h+=".download");if("application/octet-stream"===t||f)y=a;n?(g+=b.size,n(a.TEMPORARY,g,C(function(a){a.root.getDirectory("saved",D,C(function(a){var c=function(){a.getFile(h,D,C(function(a){a.createWriter(C(function(c){c.onwriteend=function(b){y.location.href=a.toURL();p.readyState=p.DONE;m(p,"writeend",b);l(a)};c.onerror=function(){var a=c.error;a.code!==a.ABORT_ERR&&A()};["writestart","progress","write","abort"].forEach(function(a){c["on"+
a]=p["on"+a]});c.write(b);p.abort=function(){c.abort();p.readyState=p.DONE};p.readyState=p.WRITING}),A)}),A)};a.getFile(h,{create:!1},C(function(a){a.remove();c()}),C(function(a){a.code===a.NOT_FOUND_ERR?c():A()}))}),A)}),A)):A()}},t=p.prototype;t.abort=function(){this.readyState=this.DONE;m(this,"abort")};t.readyState=t.INIT=0;t.WRITING=1;t.DONE=2;t.error=t.onwritestart=t.onprogress=t.onwrite=t.onabort=t.onerror=t.onwriteend=null;return function(a,b){return new p(a,b)}}}("undefined"!==typeof self&&
self||"undefined"!==typeof window&&window||this.content);"undefined"!==typeof module&&null!==module&&(module.exports=saveAs);
void function(a,b){"object"===typeof module?module.exports=b():0==="function"?define(b):a.adler32cs=b()}(jsPDF,function(){var a="function"===typeof ArrayBuffer&&"function"===typeof Uint8Array,b=null,c=function(){if(!a)return function(){return!1};try{var c=require("buffer");"function"===typeof c.Buffer&&(b=c.Buffer)}catch(d){}return function(a){return a instanceof ArrayBuffer||null!==b&&a instanceof b}}(),e=function(){return null!==b?function(a){return(new b(a,"utf8")).toString("binary")}:function(a){return unescape(encodeURIComponent(a))}}(),
d=function(a,b){for(var c=a&65535,d=a>>>16,e=0,f=b.length;e<f;e++)c=(c+(b.charCodeAt(e)&255))%65521,d=(d+c)%65521;return(d<<16|c)>>>0},f=function(a,b){for(var c=a&65535,d=a>>>16,e=0,f=b.length;e<f;e++)c=(c+b[e])%65521,d=(d+c)%65521;return(d<<16|c)>>>0},n={},h=n.Adler32=function(){var b=function(a){if(!(this instanceof b))throw new TypeError("Constructor cannot called be as a function.");if(!isFinite(a=null==a?1:+a))throw Error("First arguments needs to be a finite number.");this.checksum=a>>>0},l=
b.prototype={};l.constructor=b;b.from=function(a){a.prototype=l;return a}(function(a){if(!(this instanceof b))throw new TypeError("Constructor cannot called be as a function.");if(null==a)throw Error("First argument needs to be a string.");this.checksum=d(1,a.toString())});b.fromUtf8=function(a){a.prototype=l;return a}(function(a){if(!(this instanceof b))throw new TypeError("Constructor cannot called be as a function.");if(null==a)throw Error("First argument needs to be a string.");a=e(a.toString());
this.checksum=d(1,a)});a&&(b.fromBuffer=function(a){a.prototype=l;return a}(function(a){if(!(this instanceof b))throw new TypeError("Constructor cannot called be as a function.");if(!c(a))throw Error("First argument needs to be ArrayBuffer.");a=new Uint8Array(a);return this.checksum=f(1,a)}));l.update=function(a){if(null==a)throw Error("First argument needs to be a string.");a=a.toString();return this.checksum=d(this.checksum,a)};l.updateUtf8=function(a){if(null==a)throw Error("First argument needs to be a string.");
a=e(a.toString());return this.checksum=d(this.checksum,a)};a&&(l.updateBuffer=function(a){if(!c(a))throw Error("First argument needs to be ArrayBuffer.");a=new Uint8Array(a);return this.checksum=f(this.checksum,a)});l.clone=function(){return new h(this.checksum)};return b}();n.from=function(a){if(null==a)throw Error("First argument needs to be a string.");return d(1,a.toString())};n.fromUtf8=function(a){if(null==a)throw Error("First argument needs to be a string.");a=e(a.toString());return d(1,a)};
a&&(n.fromBuffer=function(a){if(!c(a))throw Error("First argument need to be ArrayBuffer.");a=new Uint8Array(a);return f(1,a)});return n});
var Deflater=function(a){function b(){var a=this;a.build_tree=function(b){var c=a.dyn_tree,d=a.stat_desc.static_tree,e=a.stat_desc.elems,f,g=-1,h;b.heap_len=0;b.heap_max=573;for(f=0;f<e;f++)0!==c[2*f]?(b.heap[++b.heap_len]=g=f,b.depth[f]=0):c[2*f+1]=0;for(;2>b.heap_len;)h=b.heap[++b.heap_len]=2>g?++g:0,c[2*h]=1,b.depth[h]=0,b.opt_len--,d&&(b.static_len-=d[2*h+1]);a.max_code=g;for(f=Math.floor(b.heap_len/2);1<=f;f--)b.pqdownheap(c,f);h=e;do f=b.heap[1],b.heap[1]=b.heap[b.heap_len--],b.pqdownheap(c,
1),d=b.heap[1],b.heap[--b.heap_max]=f,b.heap[--b.heap_max]=d,c[2*h]=c[2*f]+c[2*d],b.depth[h]=Math.max(b.depth[f],b.depth[d])+1,c[2*f+1]=c[2*d+1]=h,b.heap[1]=h++,b.pqdownheap(c,1);while(2<=b.heap_len);b.heap[--b.heap_max]=b.heap[1];f=a.dyn_tree;for(var g=a.stat_desc.static_tree,l=a.stat_desc.extra_bits,n=a.stat_desc.extra_base,B=a.stat_desc.max_length,A,C,D=0,e=0;15>=e;e++)b.bl_count[e]=0;f[2*b.heap[b.heap_max]+1]=0;for(h=b.heap_max+1;573>h;h++)d=b.heap[h],e=f[2*f[2*d+1]+1]+1,e>B&&(e=B,D++),f[2*d+
1]=e,d>a.max_code||(b.bl_count[e]++,A=0,d>=n&&(A=l[d-n]),C=f[2*d],b.opt_len+=C*(e+A),g&&(b.static_len+=C*(g[2*d+1]+A)));if(0!==D){do{for(e=B-1;0===b.bl_count[e];)e--;b.bl_count[e]--;b.bl_count[e+1]+=2;b.bl_count[B]--;D-=2}while(0<D);for(e=B;0!==e;e--)for(d=b.bl_count[e];0!==d;)g=b.heap[--h],g>a.max_code||(f[2*g+1]!=e&&(b.opt_len+=(e-f[2*g+1])*f[2*g],f[2*g+1]=e),d--)}f=a.max_code;h=b.bl_count;b=[];d=0;for(e=1;15>=e;e++)b[e]=d=d+h[e-1]<<1;for(h=0;h<=f;h++)if(g=c[2*h+1],0!==g){d=2*h;e=b[g]++;l=0;do l|=
e&1,e>>>=1,l<<=1;while(0<--g);c[d]=l>>>1}}}function c(a,b,c,d,e){this.static_tree=a;this.extra_bits=b;this.extra_base=c;this.elems=d;this.max_length=e}function e(a,b,c,d,e){this.good_length=a;this.max_lazy=b;this.nice_length=c;this.max_chain=d;this.func=e}function d(a,b,c,d){var e=a[2*b];a=a[2*c];return e<a||e==a&&d[b]<=d[c]}function f(){function a(){var b;for(b=0;286>b;b++)Xa[2*b]=0;for(b=0;30>b;b++)Ca[2*b]=0;for(b=0;19>b;b++)Ra[2*b]=0;Xa[512]=1;Na=Aa=J.opt_len=J.static_len=0}function e(a,b){var c,
d=-1,f,g=a[1],h=0,l=7,m=4;0===g&&(l=138,m=3);a[2*(b+1)+1]=65535;for(c=0;c<=b;c++)f=g,g=a[2*(c+1)+1],++h<l&&f==g||(h<m?Ra[2*f]+=h:0!==f?(f!=d&&Ra[2*f]++,Ra[32]++):10>=h?Ra[34]++:Ra[36]++,h=0,d=f,0===g?(l=138,m=3):f==g?(l=6,m=3):(l=7,m=4))}function f(a){J.pending_buf[J.pending++]=a}function h(a){f(a&255);f(a>>>8&255)}function n(a,b){Pa>16-b?(Ma|=a<<Pa&65535,h(Ma),Ma=a>>>16-Pa,Pa+=b-16):(Ma|=a<<Pa&65535,Pa+=b)}function w(a,b){var c=2*a;n(b[c]&65535,b[c+1]&65535)}function u(a,b){var c,d=-1,e,f=a[1],g=
0,h=7,l=4;0===f&&(h=138,l=3);for(c=0;c<=b;c++)if(e=f,f=a[2*(c+1)+1],!(++g<h&&e==f)){if(g<l){do w(e,Ra);while(0!==--g)}else 0!==e?(e!=d&&(w(e,Ra),g--),w(16,Ra),n(g-3,2)):10>=g?(w(17,Ra),n(g-3,3)):(w(18,Ra),n(g-11,7));g=0;d=e;0===f?(h=138,l=3):e==f?(h=6,l=3):(h=7,l=4)}}function x(){16==Pa?(h(Ma),Pa=Ma=0):8<=Pa&&(f(Ma&255),Ma>>>=8,Pa-=8)}function z(a,c){var d,e,f;J.pending_buf[na+2*Na]=a>>>8&255;J.pending_buf[na+2*Na+1]=a&255;J.pending_buf[cb+Na]=c&255;Na++;0===a?Xa[2*c]++:(Aa++,a--,Xa[2*(b._length_code[c]+
256+1)]++,Ca[2*b.d_code(a)]++);if(0===(Na&8191)&&2<Fa){d=8*Na;e=v-sa;for(f=0;30>f;f++)d+=Ca[2*f]*(5+b.extra_dbits[f]);if(Aa<Math.floor(Na/2)&&d>>>3<Math.floor(e/2))return!0}return Na==Wa-1}function y(a,c){var d,e,f=0,g,h;if(0!==Na){do d=J.pending_buf[na+2*f]<<8&65280|J.pending_buf[na+2*f+1]&255,e=J.pending_buf[cb+f]&255,f++,0===d?w(e,a):(g=b._length_code[e],w(g+256+1,a),h=b.extra_lbits[g],0!==h&&(e-=b.base_length[g],n(e,h)),d--,g=b.d_code(d),w(g,c),h=b.extra_dbits[g],0!==h&&(d-=b.base_dist[g],n(d,
h)));while(f<Na)}w(256,a);db=a[513]}function B(){8<Pa?h(Ma):0<Pa&&f(Ma&255);Pa=Ma=0}function A(a,b,c){B();db=8;c&&(h(b),h(~b));J.pending_buf.set(P.subarray(a,a+b),J.pending);J.pending+=b}function C(d){var f=0<=sa?sa:-1,g=v-sa,h,l,r=0;if(0<Fa){Va.build_tree(J);sb.build_tree(J);e(Xa,Va.max_code);e(Ca,sb.max_code);Ya.build_tree(J);for(r=18;3<=r&&0===Ra[2*b.bl_order[r]+1];r--);J.opt_len+=3*(r+1)+14;h=J.opt_len+3+7>>>3;l=J.static_len+3+7>>>3;l<=h&&(h=l)}else h=l=g+5;if(g+4<=h&&-1!=f)n(0+(d?1:0),3),A(f,
g,!0);else if(l==h)n(2+(d?1:0),3),y(c.static_ltree,c.static_dtree);else{n(4+(d?1:0),3);f=Va.max_code+1;g=sb.max_code+1;r+=1;n(f-257,5);n(g-1,5);n(r-4,4);for(h=0;h<r;h++)n(Ra[2*b.bl_order[h]+1],3);u(Xa,f-1);u(Ca,g-1);y(Xa,Ca)}a();d&&B();sa=v;M.flush_pending()}function D(){var a,b,c,d;do{d=R-pa-v;if(0===d&&0===v&&0===pa)d=N;else if(-1==d)d--;else if(v>=N+N-262){P.set(P.subarray(N,N+N),0);Ea-=N;v-=N;sa-=N;c=a=ma;do b=U[--c]&65535,U[c]=b>=N?b-N:0;while(0!==--a);c=a=N;do b=K[--c]&65535,K[c]=b>=N?b-N:0;
while(0!==--a);d+=N}if(0===M.avail_in)break;a=M.read_buf(P,v+pa,d);pa+=a;3<=pa&&(Q=P[v]&255,Q=(Q<<la^P[v+1]&255)&W)}while(262>pa&&0!==M.avail_in)}function H(a){var b=65535,c;for(b>T-5&&(b=T-5);;){if(1>=pa){D();if(0===pa&&0==a)return 0;if(0===pa)break}v+=pa;pa=0;c=sa+b;if(0===v||v>=c)if(pa=v-c,v=c,C(!1),0===M.avail_out)return 0;if(v-sa>=N-262&&(C(!1),0===M.avail_out))return 0}C(4==a);return 0===M.avail_out?4==a?2:0:4==a?3:1}function G(a){var b=ib,c=v,d,e=ya,f=v>N-262?v-(N-262):0,g=qb,h=X,l=v+258,m=
P[c+e-1],n=P[c+e];ya>=pb&&(b>>=2);g>pa&&(g=pa);do if(d=a,P[d+e]==n&&P[d+e-1]==m&&P[d]==P[c]&&P[++d]==P[c+1]){c+=2;for(d++;P[++c]==P[++d]&&P[++c]==P[++d]&&P[++c]==P[++d]&&P[++c]==P[++d]&&P[++c]==P[++d]&&P[++c]==P[++d]&&P[++c]==P[++d]&&P[++c]==P[++d]&&c<l;);d=258-(l-c);c=l-258;if(d>e){Ea=a;e=d;if(d>=g)break;m=P[c+e-1];n=P[c+e]}}while((a=K[a&h]&65535)>f&&0!==--b);return e<=pa?e:pa}function L(a){for(var b=0,c,d;;){if(262>pa){D();if(262>pa&&0==a)return 0;if(0===pa)break}3<=pa&&(Q=(Q<<la^P[v+2]&255)&W,
b=U[Q]&65535,K[v&X]=U[Q],U[Q]=v);ya=aa;ea=Ea;aa=2;0!==b&&ya<Ka&&(v-b&65535)<=N-262&&(2!=Oa&&(aa=G(b)),5>=aa&&(1==Oa||3==aa&&4096<v-Ea)&&(aa=2));if(3<=ya&&aa<=ya){d=v+pa-3;c=z(v-1-ea,ya-3);pa-=ya-1;ya-=2;do++v<=d&&(Q=(Q<<la^P[v+2]&255)&W,b=U[Q]&65535,K[v&X]=U[Q],U[Q]=v);while(0!==--ya);Ia=0;aa=2;v++;if(c&&(C(!1),0===M.avail_out))return 0}else if(0!==Ia){if((c=z(0,P[v-1]&255))&&C(!1),v++,pa--,0===M.avail_out)return 0}else Ia=1,v++,pa--}0!==Ia&&(z(0,P[v-1]&255),Ia=0);C(4==a);return 0===M.avail_out?4==
a?2:0:4==a?3:1}var J=this,M,V,T,O,N,Z,X,P,R,K,U,Q,ma,S,W,la,sa,aa,ea,Ia,v,Ea,pa,ya,ib,Ka,Fa,Oa,pb,qb,Xa,Ca,Ra,Va=new b,sb=new b,Ya=new b;J.depth=[];var cb,Wa,Na,na,Aa,db,Ma,Pa;J.bl_count=[];J.heap=[];Xa=[];Ca=[];Ra=[];J.pqdownheap=function(a,b){for(var c=J.heap,e=c[b],f=b<<1;f<=J.heap_len;){f<J.heap_len&&d(a,c[f+1],c[f],J.depth)&&f++;if(d(a,e,c[f],J.depth))break;c[b]=c[f];b=f;f<<=1}c[b]=e};J.deflateInit=function(b,d,e,f,h,l){f||(f=8);h||(h=8);l||(l=0);b.msg=null;-1==d&&(d=6);if(1>h||9<h||8!=f||9>
e||15<e||0>d||9<d||0>l||2<l)return-2;b.dstate=J;Z=e;N=1<<Z;X=N-1;S=h+7;ma=1<<S;W=ma-1;la=Math.floor((S+3-1)/3);P=new Uint8Array(2*N);K=[];U=[];Wa=1<<h+6;J.pending_buf=new Uint8Array(4*Wa);T=4*Wa;na=Math.floor(Wa/2);cb=3*Wa;Fa=d;Oa=l;b.total_in=b.total_out=0;b.msg=null;J.pending=0;J.pending_out=0;V=113;O=0;Va.dyn_tree=Xa;Va.stat_desc=c.static_l_desc;sb.dyn_tree=Ca;sb.stat_desc=c.static_d_desc;Ya.dyn_tree=Ra;Ya.stat_desc=c.static_bl_desc;Pa=Ma=0;db=8;a();R=2*N;for(b=U[ma-1]=0;b<ma-1;b++)U[b]=0;Ka=g[Fa].max_lazy;
pb=g[Fa].good_length;qb=g[Fa].nice_length;ib=g[Fa].max_chain;pa=sa=v=0;aa=ya=2;return Q=Ia=0};J.deflateEnd=function(){if(42!=V&&113!=V&&666!=V)return-2;P=K=U=J.pending_buf=null;J.dstate=null;return 113==V?-3:0};J.deflateParams=function(a,b,c){var d=0;-1==b&&(b=6);if(0>b||9<b||0>c||2<c)return-2;g[Fa].func!=g[b].func&&0!==a.total_in&&(d=a.deflate(1));Fa!=b&&(Fa=b,Ka=g[Fa].max_lazy,pb=g[Fa].good_length,qb=g[Fa].nice_length,ib=g[Fa].max_chain);Oa=c;return d};J.deflateSetDictionary=function(a,b,c){a=c;
var d=0;if(!b||42!=V)return-2;if(3>a)return 0;a>N-262&&(a=N-262,d=c-a);P.set(b.subarray(d,d+a),0);sa=v=a;Q=P[0]&255;Q=(Q<<la^P[1]&255)&W;for(b=0;b<=a-3;b++)Q=(Q<<la^P[b+2]&255)&W,K[b&X]=U[Q],U[Q]=b;return 0};J.deflate=function(a,b){var d,e,h;if(4<b||0>b)return-2;if(!a.next_out||!a.next_in&&0!==a.avail_in||666==V&&4!=b)return a.msg=l[4],-2;if(0===a.avail_out)return a.msg=l[7],-5;M=a;d=O;O=b;42==V&&(e=8+(Z-8<<4)<<8,h=(Fa-1&255)>>1,3<h&&(h=3),e|=h<<6,0!==v&&(e|=32),V=113,e+=31-e%31,f(e>>8&255),f(e&255));
if(0!==J.pending){if(M.flush_pending(),0===M.avail_out)return O=-1,0}else if(0===M.avail_in&&b<=d&&4!=b)return M.msg=l[7],-5;if(666==V&&0!==M.avail_in)return a.msg=l[7],-5;if(0!==M.avail_in||0!==pa||0!=b&&666!=V){d=-1;switch(g[Fa].func){case 0:d=H(b);break;case 1:a:{for(d=0;;){if(262>pa){D();if(262>pa&&0==b){d=0;break a}if(0===pa)break}3<=pa&&(Q=(Q<<la^P[v+2]&255)&W,d=U[Q]&65535,K[v&X]=U[Q],U[Q]=v);0!==d&&(v-d&65535)<=N-262&&2!=Oa&&(aa=G(d));if(3<=aa)if(e=z(v-Ea,aa-3),pa-=aa,aa<=Ka&&3<=pa){aa--;do v++,
Q=(Q<<la^P[v+2]&255)&W,d=U[Q]&65535,K[v&X]=U[Q],U[Q]=v;while(0!==--aa);v++}else v+=aa,aa=0,Q=P[v]&255,Q=(Q<<la^P[v+1]&255)&W;else e=z(0,P[v]&255),pa--,v++;if(e&&(C(!1),0===M.avail_out)){d=0;break a}}C(4==b);d=0===M.avail_out?4==b?2:0:4==b?3:1}break;case 2:d=L(b)}if(2==d||3==d)V=666;if(0==d||2==d)return 0===M.avail_out&&(O=-1),0;if(1==d){if(1==b)n(2,3),w(256,c.static_ltree),x(),9>1+db+10-Pa&&(n(2,3),w(256,c.static_ltree),x()),db=7;else if(n(0,3),A(0,0,!0),3==b)for(d=0;d<ma;d++)U[d]=0;M.flush_pending();
if(0===M.avail_out)return O=-1,0}}return 4!=b?0:1}}function n(){this.total_out=this.avail_out=this.total_in=this.avail_in=this.next_out_index=this.next_in_index=0}var h=[0,1,2,3,4,4,5,5,6,6,6,6,7,7,7,7,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,
13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,0,0,16,17,18,18,19,19,20,20,20,20,21,21,21,21,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,24,
24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,29,29,29,29,29,29,29,29,
29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29];b._length_code=[0,1,2,3,4,5,6,7,8,8,9,9,10,10,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16,16,16,16,16,17,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,
22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28];b.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,
56,64,80,96,112,128,160,192,224,0];b.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576];b.d_code=function(a){return 256>a?h[a]:h[256+(a>>>7)]};b.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0];b.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];b.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7];b.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];c.static_ltree=
[12,8,140,8,76,8,204,8,44,8,172,8,108,8,236,8,28,8,156,8,92,8,220,8,60,8,188,8,124,8,252,8,2,8,130,8,66,8,194,8,34,8,162,8,98,8,226,8,18,8,146,8,82,8,210,8,50,8,178,8,114,8,242,8,10,8,138,8,74,8,202,8,42,8,170,8,106,8,234,8,26,8,154,8,90,8,218,8,58,8,186,8,122,8,250,8,6,8,134,8,70,8,198,8,38,8,166,8,102,8,230,8,22,8,150,8,86,8,214,8,54,8,182,8,118,8,246,8,14,8,142,8,78,8,206,8,46,8,174,8,110,8,238,8,30,8,158,8,94,8,222,8,62,8,190,8,126,8,254,8,1,8,129,8,65,8,193,8,33,8,161,8,97,8,225,8,17,8,145,8,
81,8,209,8,49,8,177,8,113,8,241,8,9,8,137,8,73,8,201,8,41,8,169,8,105,8,233,8,25,8,153,8,89,8,217,8,57,8,185,8,121,8,249,8,5,8,133,8,69,8,197,8,37,8,165,8,101,8,229,8,21,8,149,8,85,8,213,8,53,8,181,8,117,8,245,8,13,8,141,8,77,8,205,8,45,8,173,8,109,8,237,8,29,8,157,8,93,8,221,8,61,8,189,8,125,8,253,8,19,9,275,9,147,9,403,9,83,9,339,9,211,9,467,9,51,9,307,9,179,9,435,9,115,9,371,9,243,9,499,9,11,9,267,9,139,9,395,9,75,9,331,9,203,9,459,9,43,9,299,9,171,9,427,9,107,9,363,9,235,9,491,9,27,9,283,9,155,
9,411,9,91,9,347,9,219,9,475,9,59,9,315,9,187,9,443,9,123,9,379,9,251,9,507,9,7,9,263,9,135,9,391,9,71,9,327,9,199,9,455,9,39,9,295,9,167,9,423,9,103,9,359,9,231,9,487,9,23,9,279,9,151,9,407,9,87,9,343,9,215,9,471,9,55,9,311,9,183,9,439,9,119,9,375,9,247,9,503,9,15,9,271,9,143,9,399,9,79,9,335,9,207,9,463,9,47,9,303,9,175,9,431,9,111,9,367,9,239,9,495,9,31,9,287,9,159,9,415,9,95,9,351,9,223,9,479,9,63,9,319,9,191,9,447,9,127,9,383,9,255,9,511,9,0,7,64,7,32,7,96,7,16,7,80,7,48,7,112,7,8,7,72,7,40,
7,104,7,24,7,88,7,56,7,120,7,4,7,68,7,36,7,100,7,20,7,84,7,52,7,116,7,3,8,131,8,67,8,195,8,35,8,163,8,99,8,227,8];c.static_dtree=[0,5,16,5,8,5,24,5,4,5,20,5,12,5,28,5,2,5,18,5,10,5,26,5,6,5,22,5,14,5,30,5,1,5,17,5,9,5,25,5,5,5,21,5,13,5,29,5,3,5,19,5,11,5,27,5,7,5,23,5];c.static_l_desc=new c(c.static_ltree,b.extra_lbits,257,286,15);c.static_d_desc=new c(c.static_dtree,b.extra_dbits,0,30,15);c.static_bl_desc=new c(null,b.extra_blbits,0,19,7);var g=[new e(0,0,0,0,0),new e(4,4,8,4,1),new e(4,5,16,8,
1),new e(4,6,32,32,1),new e(4,4,16,16,2),new e(8,16,32,32,2),new e(8,16,128,128,2),new e(8,32,128,256,2),new e(32,128,258,1024,2),new e(32,258,258,4096,2)],l="need dictionary;stream end;;;stream error;data error;;buffer error;;".split(";");n.prototype={deflateInit:function(a,b){this.dstate=new f;b||(b=15);return this.dstate.deflateInit(this,a,b)},deflate:function(a){return this.dstate?this.dstate.deflate(this,a):-2},deflateEnd:function(){if(!this.dstate)return-2;var a=this.dstate.deflateEnd();this.dstate=
null;return a},deflateParams:function(a,b){return this.dstate?this.dstate.deflateParams(this,a,b):-2},deflateSetDictionary:function(a,b){return this.dstate?this.dstate.deflateSetDictionary(this,a,b):-2},read_buf:function(a,b,c){var d=this.avail_in;d>c&&(d=c);if(0===d)return 0;this.avail_in-=d;a.set(this.next_in.subarray(this.next_in_index,this.next_in_index+d),b);this.next_in_index+=d;this.total_in+=d;return d},flush_pending:function(){var a=this.dstate.pending;a>this.avail_out&&(a=this.avail_out);
0!==a&&(this.next_out.set(this.dstate.pending_buf.subarray(this.dstate.pending_out,this.dstate.pending_out+a),this.next_out_index),this.next_out_index+=a,this.dstate.pending_out+=a,this.total_out+=a,this.avail_out-=a,this.dstate.pending-=a,0===this.dstate.pending&&(this.dstate.pending_out=0))}};return function(a){var b=new n,c=new Uint8Array(512);"undefined"==typeof a&&(a=-1);b.deflateInit(a);b.next_out=c;this.append=function(a,d){var e,f=[],g=0,h=0,l=0,m;if(a.length){b.next_in_index=0;b.next_in=
a;b.avail_in=a.length;do{b.next_out_index=0;b.avail_out=512;e=b.deflate(0);if(0!=e)throw"deflating: "+b.msg;b.next_out_index&&(512==b.next_out_index?f.push(new Uint8Array(c)):f.push(new Uint8Array(c.subarray(0,b.next_out_index))));l+=b.next_out_index;d&&0<b.next_in_index&&b.next_in_index!=g&&(d(b.next_in_index),g=b.next_in_index)}while(0<b.avail_in||0===b.avail_out);m=new Uint8Array(l);f.forEach(function(a){m.set(a,h);h+=a.length});return m}};this.flush=function(){var a,d=[],e=0,f=0,g;do{b.next_out_index=
0;b.avail_out=512;a=b.deflate(4);if(1!=a&&0!=a)throw"deflating: "+b.msg;0<512-b.avail_out&&d.push(new Uint8Array(c.subarray(0,b.next_out_index)));f+=b.next_out_index}while(0<b.avail_in||0===b.avail_out);b.deflateEnd();g=new Uint8Array(f);d.forEach(function(a){g.set(a,e);e+=a.length});return g}}}(this);
(function(a){var b;b=function(){function b(a){var c,d,e,f;this.data=a;this.pos=8;this.palette=[];this.imgData=[];this.transparency={};this.animation=null;this.text={};for(e=null;;){c=this.readUInt32();f=a=void 0;f=[];for(a=0;4>a;++a)f.push(String.fromCharCode(this.data[this.pos++]));a=f.join("");switch(a){case "IHDR":this.width=this.readUInt32();this.height=this.readUInt32();this.bits=this.data[this.pos++];this.colorType=this.data[this.pos++];this.compressionMethod=this.data[this.pos++];this.filterMethod=
this.data[this.pos++];this.interlaceMethod=this.data[this.pos++];break;case "acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||Infinity,frames:[]};break;case "PLTE":this.palette=this.read(c);break;case "fcTL":e&&this.animation.frames.push(e);this.pos+=4;e={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()};a=this.readUInt16();c=this.readUInt16()||100;e.delay=1E3*a/c;e.disposeOp=this.data[this.pos++];e.blendOp=this.data[this.pos++];
e.data=[];break;case "IDAT":case "fdAT":"fdAT"===a&&(this.pos+=4,c-=4);a=(null!=e?e.data:void 0)||this.imgData;for(f=0;0<=c?f<c:f>c;0<=c?++f:--f)a.push(this.data[this.pos++]);break;case "tRNS":this.transparency={};switch(this.colorType){case 3:a=this.palette.length/3;this.transparency.indexed=this.read(c);if(this.transparency.indexed.length>a)throw Error("More transparent colors than palette size");c=a-this.transparency.indexed.length;if(0<c)for(a=0;0<=c?a<c:a>c;0<=c?++a:--a)this.transparency.indexed.push(255);
break;case 0:this.transparency.grayscale=this.read(c)[0];break;case 2:this.transparency.rgb=this.read(c)}break;case "tEXt":f=this.read(c);c=f.indexOf(0);a=String.fromCharCode.apply(String,f.slice(0,c));this.text[a]=String.fromCharCode.apply(String,f.slice(c+1));break;case "IEND":e&&this.animation.frames.push(e);a:{switch(this.colorType){case 0:case 3:case 4:e=1;break a;case 2:case 6:e=3;break a}e=void 0}this.colors=e;this.hasAlphaChannel=4===(d=this.colorType)||6===d;d=this.colors+(this.hasAlphaChannel?
1:0);this.pixelBitlength=this.bits*d;a:{switch(this.colors){case 1:d="DeviceGray";break a;case 3:d="DeviceRGB";break a}d=void 0}this.colorSpace=d;this.imgData=new Uint8Array(this.imgData);return;default:this.pos+=c}this.pos+=4;if(this.pos>this.data.length)throw Error("Incomplete or corrupt PNG file");}}var e,d,f;b.load=function(a,d,e){var f;"function"===typeof d&&(e=d);f=new XMLHttpRequest;f.open("GET",a,!0);f.responseType="arraybuffer";f.onload=function(){var a;a=new Uint8Array(f.response||f.mozResponseArrayBuffer);
a=new b(a);"function"===typeof(null!=d?d.getContext:void 0)&&a.render(d);return"function"===typeof e?e(a):void 0};return f.send(null)};b.prototype.read=function(a){var b,c;c=[];for(b=0;0<=a?b<a:b>a;0<=a?++b:--b)c.push(this.data[this.pos++]);return c};b.prototype.readUInt32=function(){var a,b,c,d;a=this.data[this.pos++]<<24;b=this.data[this.pos++]<<16;c=this.data[this.pos++]<<8;d=this.data[this.pos++];return a|b|c|d};b.prototype.readUInt16=function(){var a,b;a=this.data[this.pos++]<<8;b=this.data[this.pos++];
return a|b};b.prototype.decodePixels=function(a){var b,c,d,e,f,n,q,w,u,x,z,y,B,A,C;null==a&&(a=this.imgData);if(0===a.length)return new Uint8Array(0);a=new FlateStream(a);a=a.getBytes();w=this.pixelBitlength/8;y=w*this.width;u=new Uint8Array(y*this.height);n=a.length;for(c=x=z=0;x<n;){switch(a[x++]){case 0:for(b=0;b<y;b+=1)u[c++]=a[x++];break;case 1:for(e=B=0;B<y;e=B+=1)b=a[x++],f=e<w?0:u[c-w],u[c++]=(b+f)%256;break;case 2:for(e=f=0;f<y;e=f+=1)b=a[x++],d=(e-e%w)/w,B=z&&u[(z-1)*y+d*w+e%w],u[c++]=(B+
b)%256;break;case 3:for(e=C=0;C<y;e=C+=1)b=a[x++],d=(e-e%w)/w,f=e<w?0:u[c-w],B=z&&u[(z-1)*y+d*w+e%w],u[c++]=(b+Math.floor((f+B)/2))%256;break;case 4:for(e=C=0;C<y;e=C+=1)b=a[x++],d=(e-e%w)/w,f=e<w?0:u[c-w],0===z?B=A=0:(B=u[(z-1)*y+d*w+e%w],A=d&&u[(z-1)*y+(d-1)*w+e%w]),q=f+B-A,e=Math.abs(q-f),d=Math.abs(q-B),q=Math.abs(q-A),f=e<=d&&e<=q?f:d<=q?B:A,u[c++]=(b+f)%256;break;default:throw Error("Invalid filter algorithm: "+a[x-1]);}z++}return u};b.prototype.decodePalette=function(){var a,b,c,d,e,f,n,q,
w;c=this.palette;f=this.transparency.indexed||[];e=new Uint8Array((f.length||0)+c.length);b=n=a=d=0;for(q=c.length;n<q;b=n+=3)e[d++]=c[b],e[d++]=c[b+1],e[d++]=c[b+2],e[d++]=null!=(w=f[a++])?w:255;return e};b.prototype.copyToImageData=function(a,b){var c,d,e,f,n,q,w,u;d=this.colors;u=null;c=this.hasAlphaChannel;this.palette.length&&(u=null!=(e=this._decodedPalette)?e:this._decodedPalette=this.decodePalette(),d=4,c=!0);e=a.data||a;w=e.length;n=u||b;f=q=0;if(1===d)for(;f<w;)d=u?4*b[f/4]:q,q=n[d++],e[f++]=
q,e[f++]=q,e[f++]=q,e[f++]=c?n[d++]:255,q=d;else for(;f<w;)d=u?4*b[f/4]:q,e[f++]=n[d++],e[f++]=n[d++],e[f++]=n[d++],e[f++]=c?n[d++]:255,q=d};b.prototype.decode=function(){var a;a=new Uint8Array(this.width*this.height*4);this.copyToImageData(a,this.decodePixels());return a};try{d=a.document.createElement("canvas"),f=d.getContext("2d")}catch(n){return-1}e=function(a){f.width=a.width;f.height=a.height;f.clearRect(0,0,a.width,a.height);f.putImageData(a,0,0);a=new Image;a.src=d.toDataURL();return a};b.prototype.decodeFrames=
function(a){var b,c,d,f,n,r,q;if(this.animation){r=this.animation.frames;q=[];b=f=0;for(n=r.length;f<n;b=++f)b=r[b],c=a.createImageData(b.width,b.height),d=this.decodePixels(new Uint8Array(b.data)),this.copyToImageData(c,d),b.imageData=c,q.push(b.image=e(c));return q}};b.prototype.renderFrame=function(a,b){var c,d;d=this.animation.frames;c=d[b];d=d[b-1];0===b&&a.clearRect(0,0,this.width,this.height);1===(null!=d?d.disposeOp:void 0)?a.clearRect(d.xOffset,d.yOffset,d.width,d.height):2===(null!=d?d.disposeOp:
void 0)&&a.putImageData(d.imageData,d.xOffset,d.yOffset);0===c.blendOp&&a.clearRect(c.xOffset,c.yOffset,c.width,c.height);return a.drawImage(c.image,c.xOffset,c.yOffset)};b.prototype.animate=function(a){var b,c,d,e,f,n,q=this;c=0;n=this.animation;e=n.numFrames;d=n.frames;f=n.numPlays;return(b=function(){var n,r;n=c++%e;r=d[n];q.renderFrame(a,n);if(1<e&&c/e<f)return q.animation._timeout=setTimeout(b,r.delay)})()};b.prototype.stopAnimation=function(){var a;return clearTimeout(null!=(a=this.animation)?
a._timeout:void 0)};b.prototype.render=function(a){var b;a._png&&a._png.stopAnimation();a._png=this;a.width=this.width;a.height=this.height;a=a.getContext("2d");if(this.animation)return this.decodeFrames(a),this.animate(a);b=a.createImageData(this.width,this.height);this.copyToImageData(b,this.decodePixels());return a.putImageData(b,0,0)};return b}();a.PNG=b})("undefined"!==typeof window&&window||this);
var DecodeStream=function(){function a(){this.bufferLength=this.pos=0;this.eof=!1;this.buffer=null}a.prototype={ensureBuffer:function(a){var c=this.buffer,e=c?c.byteLength:0;if(a<e)return c;for(var d=512;d<a;)d<<=1;a=new Uint8Array(d);for(d=0;d<e;++d)a[d]=c[d];return this.buffer=a},getByte:function(){for(var a=this.pos;this.bufferLength<=a;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(a){var c=this.pos;if(a){this.ensureBuffer(c+a);for(a=c+a;!this.eof&&
this.bufferLength<a;)this.readBlock();var e=this.bufferLength;a>e&&(a=e)}else{for(;!this.eof;)this.readBlock();a=this.bufferLength}this.pos=a;return this.buffer.subarray(c,a)},lookChar:function(){for(var a=this.pos;this.bufferLength<=a;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var a=this.pos;this.bufferLength<=a;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(a,
c,e){for(var d=a+c;this.bufferLength<=d&&!this.eof;)this.readBlock();return new Stream(this.buffer,a,c,e)},skip:function(a){a||(a=1);this.pos+=a},reset:function(){this.pos=0}};return a}(),FlateStream=function(){function a(a){throw Error(a);}function b(b){var c=0,d=b[c++],e=b[c++];-1!=d&&-1!=e||a("Invalid header in flate stream");8!=(d&15)&&a("Unknown compression method in flate stream");0!=((d<<8)+e)%31&&a("Bad FCHECK in flate stream");e&32&&a("FDICT bit set in flate stream");this.bytes=b;this.bytesPos=
c;this.codeBuf=this.codeSize=0;DecodeStream.call(this)}if("undefined"!==typeof Uint32Array){var c=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),e=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),d=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,
657409,658433,724993,727041,794625,798721,868353,876545]),f=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59E4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,
524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,
524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,
524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,
524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,
524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,
524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,
524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],n=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];b.prototype=Object.create(DecodeStream.prototype);b.prototype.getBits=function(b){for(var c=this.codeSize,d=this.codeBuf,e=this.bytes,
f=this.bytesPos,n;c<b;)"undefined"==typeof(n=e[f++])&&a("Bad encoding in flate stream"),d|=n<<c,c+=8;this.codeBuf=d>>b;this.codeSize=c-b;this.bytesPos=f;return d&(1<<b)-1};b.prototype.getCode=function(b){var c=b[0],d=b[1];b=this.codeSize;for(var e=this.codeBuf,f=this.bytes,n=this.bytesPos;b<d;){var r;"undefined"==typeof(r=f[n++])&&a("Bad encoding in flate stream");e|=r<<b;b+=8}d=c[e&(1<<d)-1];c=d>>16;d&=65535;(0==b||b<c||0==c)&&a("Bad encoding in flate stream");this.codeBuf=e>>c;this.codeSize=b-c;
this.bytesPos=n;return d};b.prototype.generateHuffmanTable=function(a){for(var b=a.length,c=0,d=0;d<b;++d)a[d]>c&&(c=a[d]);for(var e=1<<c,f=new Uint32Array(e),n=1,q=0,w=2;n<=c;++n,q<<=1,w<<=1)for(var u=0;u<b;++u)if(a[u]==n){for(var x=0,z=q,d=0;d<n;++d)x=x<<1|z&1,z>>=1;for(d=x;d<e;d+=w)f[d]=n<<16|u;++q}return[f,c]};b.prototype.readBlock=function(){function b(a,c,d,e,f){for(a=a.getBits(d)+e;0<a--;)c[q++]=f}var g=this.getBits(3);g&1&&(this.eof=!0);g>>=1;if(0==g){var l=this.bytes,m=this.bytesPos,p;"undefined"==
typeof(p=l[m++])&&a("Bad block header in flate stream");var t=p;"undefined"==typeof(p=l[m++])&&a("Bad block header in flate stream");t|=p<<8;"undefined"==typeof(p=l[m++])&&a("Bad block header in flate stream");g=p;"undefined"==typeof(p=l[m++])&&a("Bad block header in flate stream");(g|p<<8)!=(~t&65535)&&a("Bad uncompressed block length in flate stream");this.codeSize=this.codeBuf=0;p=this.bufferLength;g=this.ensureBuffer(p+t);this.bufferLength=t=p+t;for(var r=p;r<t;++r){if("undefined"==typeof(p=l[m++])){this.eof=
!0;break}g[r]=p}this.bytesPos=m}else{if(1==g)m=f,p=n;else if(2==g){g=this.getBits(5)+257;p=this.getBits(5)+1;for(var l=this.getBits(4)+4,m=Array(c.length),q=0;q<l;)m[c[q++]]=this.getBits(3);m=this.generateHuffmanTable(m);q=l=0;p=g+p;for(t=Array(p);q<p;)r=this.getCode(m),16==r?b(this,t,2,3,l):17==r?b(this,t,3,3,l=0):18==r?b(this,t,7,11,l=0):t[q++]=l=r;m=this.generateHuffmanTable(t.slice(0,g));p=this.generateHuffmanTable(t.slice(g,p))}else a("Unknown block type in flate stream");t=(g=this.buffer)?g.length:
0;for(r=this.bufferLength;;){var w=this.getCode(m);if(256>w)r+1>=t&&(g=this.ensureBuffer(r+1),t=g.length),g[r++]=w;else{if(256==w){this.bufferLength=r;break}var w=w-257,w=e[w],u=w>>16;0<u&&(u=this.getBits(u));l=(w&65535)+u;w=this.getCode(p);w=d[w];u=w>>16;0<u&&(u=this.getBits(u));w=(w&65535)+u;r+l>=t&&(g=this.ensureBuffer(r+l),t=g.length);for(u=0;u<l;++u,++r)g[r]=g[r-w]}}}};return b}}();
(function(a){"undefined"===typeof a.btoa&&(a.btoa=function(a){var c,e,d,f,n=0,h=0,g="",g=[];if(!a)return a;do c=a.charCodeAt(n++),e=a.charCodeAt(n++),d=a.charCodeAt(n++),f=c<<16|e<<8|d,c=f>>18&63,e=f>>12&63,d=f>>6&63,f&=63,g[h++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(d)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(f);
while(n<a.length);g=g.join("");a=a.length%3;return(a?g.slice(0,a-3):g)+"===".slice(a||3)});"undefined"===typeof a.atob&&(a.atob=function(a){var c,e,d,f,n,h=0,g=0;f="";var l=[];if(!a)return a;a+="";do c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(h++)),e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(h++)),f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(h++)),n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(h++)),
d=c<<18|e<<12|f<<6|n,c=d>>16&255,e=d>>8&255,d&=255,64==f?l[g++]=String.fromCharCode(c):64==n?l[g++]=String.fromCharCode(c,e):l[g++]=String.fromCharCode(c,e,d);while(h<a.length);return f=l.join("")});Array.prototype.map||(Array.prototype.map=function(a){if(void 0===this||null===this||"function"!==typeof a)throw new TypeError;for(var c=Object(this),e=c.length>>>0,d=Array(e),f=1<arguments.length?arguments[1]:void 0,n=0;n<e;n++)n in c&&(d[n]=a.call(f,c[n],n,c));return d});Array.isArray||(Array.isArray=
function(a){return"[object Array]"===Object.prototype.toString.call(a)});Array.prototype.forEach||(Array.prototype.forEach=function(a,c){if(void 0===this||null===this||"function"!==typeof a)throw new TypeError;for(var e=Object(this),d=e.length>>>0,f=0;f<d;f++)f in e&&a.call(c,e[f],f,e)});Object.keys||(Object.keys=function(){var a=Object.prototype.hasOwnProperty,c=!{toString:null}.propertyIsEnumerable("toString"),e="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),
d=e.length;return function(f){if("object"!==typeof f&&("function"!==typeof f||null===f))throw new TypeError;var n=[],h;for(h in f)a.call(f,h)&&n.push(h);if(c)for(h=0;h<d;h++)a.call(f,e[h])&&n.push(e[h]);return n}}());String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});String.prototype.trimLeft||(String.prototype.trimLeft=function(){return this.replace(/^\s+/g,"")});String.prototype.trimRight||(String.prototype.trimRight=function(){return this.replace(/\s+$/g,
"")})})("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||this);
(function(a,b){if("object"===typeof exports&&"object"===typeof module)module.exports=b(require("jQuery"));else if("function"===typeof define&&define.amd)define(["jQuery"],b);else{var c="object"===typeof exports?b(require("jQuery")):b(a.jQuery),e;for(e in c)("object"===typeof exports?exports:a)[e]=c[e]}})(this,function(a){return function(a){function c(d){if(e[d])return e[d].exports;var f=e[d]={exports:{},id:d,loaded:!1};a[d].call(f.exports,f,f.exports,c);f.loaded=!0;return f.exports}var e={};c.m=a;
c.c=e;c.p="";return c(0)}([function(a,c,e){var d,f,n=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};d=e(1);e(2);c.Anno=function(){function a(b){var c,d,e;b.__proto__===Array.prototype?(d=b.shift(),e=b):d=b;d instanceof a&&console.warn("Anno constructor parameter is already an Anno object.");null==d&&console.warn("new Anno() created with no options. It's recommended to supply at least target and content.");for(c in d)"chainTo"!==c&&"start"!==
c&&"show"!==c&&"hide"!==c&&"hideAnno"!==c&&"chainSize"!==c&&"chainIndex"!==c&&"version"!==c||console.warn("Anno: Overriding '"+c+"' is not recommended. Can you override a delegated function instead?");for(c in d)b=d[c],this[c]=b;0<(null!=e?e.length:void 0)&&this.chainTo(new a(e))}a.setDefaults=function(b){var c,d,e;e=[];for(c in b)d=b[c],e.push(a.prototype[c]=d);return e};a.prototype.chainTo=function(b){null!=b?null==this._chainNext?(this._chainNext=b instanceof a?b:new a(b),this._chainNext._chainPrev=
this):this._chainNext.chainTo(b):console.error("Can't chainTo a null object.");return this};a.prototype._chainNext=null;a.prototype._chainPrev=null;a.chain=function(b){console.warn("Anno.chain([...]) is deprecated. Use `new Anno([...])` instead.");return new a(b)};a.prototype.chainSize=function(){return null!=this._chainNext?this._chainNext.chainSize():1+this.chainIndex()};a.prototype.chainIndex=function(a){var b;return null!=a?(b=function(a,c,d){var e;if(null!=a){e=a.chainIndex();if(0<=e&&e<c)return b(a._chainNext,
c,d);if(c<e&&e<=d)return b(a._chainPrev,c,d);if(e===c)return a}else return console.error("Couldn't switch to index '"+c+"'. Chain size "+("is '"+d+"'"))})(this,a,this.chainSize()):null!=this._chainPrev?1+this._chainPrev.chainIndex():0};a.prototype.show=function(){var a,b;a=this.targetFn();null!=this._annoElem&&console.warn("Anno elem for '"+this.target+"' has already been generated.  Did you call show() twice?");this._annoElem=this.annoElem();this.emphasiseTarget();this.showOverlay();a.after(this._annoElem);
this._annoElem.addClass("anno-target-"+this.arrowPositionFn());this.positionAnnoElem();setTimeout(function(a){return function(){return a._annoElem.removeClass("anno-hidden")}}(this),50);a.scrollintoview();setTimeout(function(a){return function(){return a._annoElem.scrollintoview()}}(this),300);b=this._annoElem.find("button").last();this.rightArrowClicksLastButton&&b.keydown(function(a){if(39===a.keyCode)return d(this).click()});this.autoFocusLastButton&&0===a.find(":focus").length&&b.focus();this._returnFromOnShow=
this.onShow(this,a,this._annoElem);return this};a.prototype.start=function(){return this.show()};a.prototype.rightArrowClicksLastButton=!0;a.prototype.autoFocusLastButton=!0;a.prototype.onShow=function(a,b,c){};a.prototype.hide=function(){this.hideAnno();setTimeout(this.hideOverlay,50);return this};a.prototype.hideAnno=function(){null!=this._annoElem?(this._annoElem.addClass("anno-hidden"),this.deemphasiseTarget(),this.onHide(this,this.targetFn(),this._annoElem,this._returnFromOnShow),function(a){return setTimeout(function(){return a.remove()},
300)}(this._annoElem),this._annoElem=null):console.warn("Can't hideAnno() for '"+this.target+"' when @_annoElem is null.  Did you call hideAnno() twice?");return this};a.prototype.onHide=function(a,b,c,d){};a.prototype.switchTo=function(a){if(null!=a)return this.hideAnno(),a.show();console.warn("Can't switchTo a null object. Hiding instead.");return this.hide()};a.prototype.switchToChainNext=function(){return this.switchTo(this._chainNext)};a.prototype.switchToChainPrev=function(){return this.switchTo(this._chainPrev)};
a.prototype.target="h1";a.prototype.targetFn=function(){var a;if("string"===typeof this.target)return a=d(this.target).filter(":not(.anno-placeholder)"),0===a.length&&console.error("Couldn't find Anno.target '"+this.target+"'."),1<a.length&&console.warn("Anno target '"+this.target+"' matched "+a.length+" elements. Targeting the first one."),a.first();if(this.target instanceof jQuery)return 1<this.target.length&&console.warn("Anno jQuery target matched "+this.target.length+" elements. Targeting the first one."),
this.target.first();if(this.target instanceof HTMLElement)return d(this.target);if("function"===typeof this.target)return this.target();console.error("Unrecognised Anno.target. Please supply a jQuery selector string, a jQuery object, a raw DOM element or a function returning a jQuery element. target:");return console.error(this.target)};a.prototype.annoElem=function(){this._annoElem=d("<div class='anno anno-hidden "+this.className+"'>\n<div class='anno-inner'>  <div class='anno-arrow'></div>  </div>\n</div>");
this._annoElem.find(".anno-inner").append(this.contentElem()).append(this.buttonsElem());return this._annoElem};a.prototype._annoElem=null;a.prototype.className="";a.prototype.content="Lorem ipsum dolor sit amet, consectetur adipiscing elit.";a.prototype.contentFn=function(){return this.content};a.prototype.contentElem=function(){return d("<div class='anno-content'>"+this.contentFn()+"</div>")};a.prototype.showOverlay=function(){var a;return 0===d(".anno-overlay").length?(d("body").append(a=this.overlayElem().addClass("anno-hidden")),
setTimeout(function(){return a.removeClass("anno-hidden")},10)):d(".anno-overlay").replaceWith(this.overlayElem())};a.prototype.overlayElem=function(){return d("<div class='anno-overlay "+this.overlayClassName+"'></div>").click(function(a){return function(b){return a.overlayClick.call(a,a,b)}}(this))};a.prototype.overlayClassName="";a.prototype.overlayClick=function(a,b){return a.hide()};a.prototype.hideOverlay=function(){d(".anno-overlay").addClass("anno-hidden");return setTimeout(function(){return d(".anno-overlay").remove()},
300)};a.prototype.emphasiseTarget=function(a){var b,c,d;null==a&&(a=this.targetFn());this._undoEmphasise=[];a.closest(":scrollable").on("mousewheel",function(a){a.preventDefault();return a.stopPropagation()});this._undoEmphasise.push(function(a){return a.closest(":scrollable").off("mousewheel")});"static"===a.css("position")&&(a.after(b=a.clone().addClass("anno-placeholder")),function(a){return function(b){return a._undoEmphasise.push(function(){return b.remove()})}}(this)(b),c=a.prop("style").position,
function(a){return function(b){return a._undoEmphasise.push(function(a){return a.css({position:b})})}}(this)(c),a.css({position:"absolute"}),a.outerWidth()!==b.outerWidth()&&(c=a.prop("style").width,function(a){return function(b){return a._undoEmphasise.push(function(a){return a.css({width:b})})}}(this)(c),a.css("width",b.outerWidth())),a.outerHeight()!==b.outerHeight()&&(c=a.prop("style").height,function(a){return function(b){return a._undoEmphasise.push(function(a){return a.css({height:b})})}}(this)(c),
a.css("height",b.outerHeight())),b=b.position(),d=a.position(),d.top!==b.top&&(c=a.prop("style").top,function(a){return function(b){return a._undoEmphasise.push(function(a){return a.css({top:b})})}}(this)(c),a.css("top",b.top)),d.left!==b.left&&(c=a.prop("style").left,function(a){return function(b){return a._undoEmphasise.push(function(a){return a.css({left:b})})}}(this)(c),a.css("left",b.left)));if("rgba(0, 0, 0, 0)"===a.css("backgroundColor")||"transparent"===a.css("backgroundColor"))console.warn("Anno.js target '"+
this.target+"' has a transparent bg; filling it white temporarily."),b=a.prop("style").background,function(a){return function(b){return a._undoEmphasise.push(function(a){return a.css({background:b})})}}(this)(b),a.css({background:"white"});b=a.prop("style").zIndex;(function(a){return function(b){return a._undoEmphasise.push(function(a){return a.css({zIndex:b})})}})(this)(b);a.css({zIndex:"1001"});return a};a.prototype._undoEmphasise=[];a.prototype.deemphasiseTarget=function(){var a,b,c,d,e;a=this.targetFn();
e=this._undoEmphasise;c=0;for(d=e.length;c<d;c++)b=e[c],b(a);return a};a.prototype.position=null;a.prototype.positionAnnoElem=function(a){var b,c,d;null==a&&(a=this._annoElem);d=this.positionFn();b=this.targetFn();c=b.position();switch(d){case "top":case "bottom":a.css({left:c.left+"px"});break;case "center-top":case "center-bottom":a.css({left:c.left+(b.outerWidth()/2-a.outerWidth()/2)+"px"});break;case "left":case "right":a.css({top:c.top+"px"});break;case "center-left":case "center-right":a.css({top:c.top+
(b.outerHeight()/2-a.outerHeight()/2)+"px"})}switch(d){case "top":case "center-top":a.css({top:c.top-a.outerHeight()+"px"});break;case "bottom":case "center-bottom":a.css({top:c.top+b.outerHeight()+"px"});break;case "left":case "center-left":a.css({left:c.left-a.outerWidth()+"px"});break;case "right":case "center-right":a.css({left:c.left+b.outerWidth()+"px"});break;default:null!=d.left||null!=d.right||null!=d.top||null!=d.bottom?a.css(d):console.error("Unrecognised position: '"+d+"'")}return a};
a.prototype.positionFn=function(){var b,c,e,f,t,r,q,w,u;if(null!=this.position)return this.position;if(null!=this._annoElem)return b=this.targetFn(),c=b.closest(":scrollable"),0===c.length&&(c=d("body")),t=b.offset(),f=c.offset(),e=t.left-f.left,f=t.top-f.top,r=t=void 0,t=e+b.outerWidth(),r=f+b.outerHeight(),b=c.width()||c.width(),c=c.height()||c.height(),q=this._annoElem.outerWidth(),w=this._annoElem.outerHeight(),u=[],q>e&&(u=u.concat(["left","center-left"])),w>f&&(u=u.concat(["top","center-top"])),
q+t>b&&(u=u.concat(["right","center-right"])),w+r>c&&(u=u.concat(["bottom","center-bottom"])),e=a.preferredPositions.filter(function(a){return 0>n.call(u,a)}),0===e.length?console.error("Anno couldn't guess a position for '"+this.target+"'. Please supply one in the constructor."):console.warn("Anno: guessing position:'"+e[0]+"' for "+("'"+this.target+"'. Possible Anno.preferredPositions: ["+e+"].")),this.position=e[0]};a.preferredPositions="bottom right left top center-bottom center-right center-left center-top".split(" ");
a.prototype.arrowPositionFn=function(){var a,b;if(null!=this.arrowPosition)return this.arrowPosition;if("string"===typeof this.positionFn())return{top:"bottom","center-top":"center-bottom",left:"right","center-left":"center-right",right:"left","center-right":"center-left",bottom:"top","center-bottom":"center-top"}[this.positionFn()];a=parseInt(this.positionFn().left,10);b=parseInt(this.positionFn().top,10);a=Math.abs(a)>Math.abs(b)?0>a?"center-right":"center-left":0>b?"center-bottom":"center-top";
console.warn("Guessing arrowPosition:'"+a+"' for "+this.target+". Include this in your constructor for consistency.");return a};a.prototype.arrowPosition=null;a.prototype.buttons=[{}];a.prototype.buttonsFn=function(){return this.buttons instanceof Array?this.buttons.map(function(a){return new f(a)}):[new f(this.buttons)]};a.prototype.buttonsElem=function(){var a;return d("<div class='anno-btn-container'></div>").append(function(){var b,c,d,e;d=this.buttonsFn();e=[];b=0;for(c=d.length;b<c;b++)a=d[b],
e.push(a.buttonElem(this));return e}.call(this))};return a}();c.AnnoButton=f=function(){function a(b){var c,d;for(c in b)d=b[c],this[c]=d}a.prototype.buttonElem=function(a){return d("<button class='anno-btn'></button>").html(this.textFn(a)).addClass(this.className).click(function(b){return function(c){return b.click.call(a,a,c)}}(this))};a.prototype.textFn=function(a){return null!=this.text?this.text:null!=a._chainNext?"Next":"Done"};a.prototype.text=null;a.prototype.className="";a.prototype.click=
function(a,b){return null!=a._chainNext?a.switchToChainNext():a.hide()};a.NextButton=new a({text:"Next",click:function(){return this.switchToChainNext()}});a.DoneButton=new a({text:"Done",click:function(){return this.hide()}});a.BackButton=new a({text:"Back",className:"anno-btn-low-importance",click:function(){return this.switchToChainPrev()}});return a}()},function(b,c,e){b.exports=a},function(a,c,e){(function(a){var b={vertical:{x:!1,y:!0},horizontal:{x:!0,y:!1},both:{x:!0,y:!0},x:{x:!0,y:!1},y:{x:!1,
y:!0}},c={duration:"fast",direction:"both"},e=/^(?:html)$/i,g=function(b){var c=a(window),f=e.test(b[0].nodeName),g;if(f)g={top:0,left:0,bottom:0,right:0};else{var l=b[0],n;n=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(l,null):l.currentStyle;var u=document.defaultView&&document.defaultView.getComputedStyle?!0:!1;g=parseFloat(u?n.borderTopWidth:a.css(l,"borderTopWidth"))||0;var x=parseFloat(u?n.borderLeftWidth:a.css(l,"borderLeftWidth"))||0,z=parseFloat(u?
n.borderBottomWidth:a.css(l,"borderBottomWidth"))||0,l=parseFloat(u?n.borderRightWidth:a.css(l,"borderRightWidth"))||0;g={top:g,left:x,bottom:z,right:l,vertical:g+z,horizontal:x+l}}c={top:(f?c:b).scrollTop(),left:(f?c:b).scrollLeft()};x={right:f?0:b.innerWidth()-b[0].clientWidth,bottom:f?0:b.innerHeight()-b[0].clientHeight};z=b[0].getBoundingClientRect();return{border:g,scroll:c,scrollbar:x,rect:{top:f?0:z.top,left:f?0:z.left,bottom:f?b[0].clientHeight:z.bottom,right:f?b[0].clientWidth:z.right}}};
a.fn.extend({scrollintoview:function(l){l=a.extend({},c,l);l.direction=b["string"===typeof l.direction&&l.direction.toLowerCase()]||b.both;var p="";!0===l.direction.x&&(p="horizontal");!0===l.direction.y&&(p=p?"both":"vertical");var t=this.eq(0),r=t.closest(":scrollable("+p+")");if(0<r.length){var r=r.eq(0),q=g(t),p=g(r),t=q.rect.top-(p.rect.top+p.border.top),w=p.rect.bottom-p.border.bottom-p.scrollbar.bottom-q.rect.bottom,u=q.rect.left-(p.rect.left+p.border.left),q=p.rect.right-p.border.right-p.scrollbar.right-
q.rect.right,x={};!0===l.direction.y&&(0>t?x.scrollTop=p.scroll.top+t:0<t&&0>w&&(x.scrollTop=p.scroll.top+Math.min(t,-w)));!0===l.direction.x&&(0>u?x.scrollLeft=p.scroll.left+u:0<u&&0>q&&(x.scrollLeft=p.scroll.left+Math.min(u,-q)));a.isEmptyObject(x)?a.isFunction(l.complete)&&l.complete.call(r[0]):(e.test(r[0].nodeName)&&(r=a("html,body")),r.animate(x,l.duration).eq(0).queue(function(b){a.isFunction(l.complete)&&l.complete.call(r[0]);b()}))}return this}});var l={auto:!0,scroll:!0,visible:!1,hidden:!1};
a.extend(a.expr[":"],{scrollable:function(a,c,d,g){c=b["string"===typeof d[3]&&d[3].toLowerCase()]||b.both;d=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(a,null):a.currentStyle;var n=l[d.overflowX.toLowerCase()]||!1,w=l[d.overflowY.toLowerCase()]||!1,u=e.test(a.nodeName);if(!n&&!w&&!u)return!1;a={height:{scroll:a.scrollHeight,client:a.clientHeight},width:{scroll:a.scrollWidth,client:a.clientWidth},scrollableX:function(){return(n||u)&&this.width.scroll>
this.width.client},scrollableY:function(){return(w||u)&&this.height.scroll>this.height.client}};return c.y&&a.scrollableY()||c.x&&a.scrollableX()}})})(jQuery)}])});var epiviz={ui:{}};epiviz.ui.PrintManager=function(a,b,c,e){this._containerId=a?a:"pagemain";this._fName=b?b:"epiviz_"+Math.floor($.now()/1E3);this._fType=c?c:"pdf";this._workspaceId=e};
epiviz.ui.PrintManager.prototype.print=function(){function a(a){$(a).find(".domain").each(function(){$(this).css({fill:"none","stroke-width":"1px",stroke:"#000000","shape-rendering":"crispEdges"})});$(a).find(".gene-name").each(function(){$(this).remove()});epiviz.utils.stringContains($(a).attr("id"),"track-lines")&&$(a).find(".lines path").each(function(){$(this).css({fill:"none"})});$(a).find("text").each(function(){$(this).css({"font-size":"11px"})});$(a).find(".chart-legend").each(function(){$(this).css({border:"none",
background:"transparent"})})}var b=this,c=$("#"+b._containerId),e=c.find("svg");e.each(function(){var b,c;b=document.createElement("canvas");b.className="tempCanvas";a(this);c=(new XMLSerializer).serializeToString(this);c=c.replace(/xmlns=\"http:\/\/www\.w3\.org\/2000\/svg\"/,"");canvg(b,c,{useCORS:!0,renderCallback:function(){$(b).insertAfter(this);$(this).hide()}})});html2canvas(c,{timeout:0,width:c[0].scrollWidth+200,height:c[0].scrollHeight+200,useCORS:!0}).then(function(a){var f=a.getContext("2d");
f.mozImageSmoothingEnabled=!1;f.imageSmoothingEnabled=!1;var f=b._fName+"."+b._fType,n=b._fType,h=a.toDataURL("image/png");"pdf"==n?(a=new jsPDF("l","px",[.6*(1400<c[0].scrollWidth?c[0].scrollWidth:1400),.65*(1E3<c[0].scrollHeight?c[0].scrollHeight:1E3)]),n="http://epiviz.cbcb.umd.edu/4/?ws="+b._workspaceId,a.addImage("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOYAAAAyCAYAAABIxaeCAAASqElEQVR4nO2de5QU1Z3Hv/Wurn5M9wxvGBwGBUVF4hBFgwkaZOPukRBdGBaDkpUdY7LGaDxCEjUxehSMxizHF8QHMasug9mYaKJBRKMm7LKALwQxMCAPcXAe/Ziuqdet2j+qi+npqemZ7q7u6eH055w6Z7rurXtv99S37r2/3+/eouoa1++nYb3GmOoWXj62JV417TiGIf6WZpGtOfMCwgUu0rmqGSbFTTZpZiRtkpE662c5ImsmzXXQpn4QwE7a1LYInbs2x0fNjg1luw89s2goq69QplC1SzZYJz5ZxGIs/QPaNLbQlvEnoXPXX+KjZmtD2L6s+FuaeTJh7nxCc4tNmr+M0IKUy/WMqRmAuYkzkk/y0T0vxEfNJsVqqwesyPg74pJnJYDVpWlOhWwU+sDtLcwMGFProE3tGdoyH1S50IGCavKQquj7I5TApBsNWmgiND/KizIZUz3AEfk+vvPDJ8vkYVQPYCH6F6EbFWGWCYUKk86WSGi+WmcDN6hc4GNY5Klg8sCpBdVWOAGOyPd0VZ1xQGWDt3klSgAgtDBJ4SKPJmsa9opax1COLyMA1gLYD2AVBi/KcmUu7O9iAeiA/bCpMADs4LLRLCgsk6UJSwQjtkbs+uTOWHh6V3Gb1htBjzeqXOAXOiON6y8PYyqttGnsBqwDAN3JmIpMGJ8AIGxS9DhCcWeBYuqy1UMYXx1hfBs4I/ltXo9+O+kb/7HX3yULTbBFebIQAdCMnoeL8/lSAJtL3JZVsEcfO1L1d5a4/pwYpDBtCMXxhK26xQhNvTIgH1reJU3cUqyGOQTkwyNUvvoRlQv1edIyphZlTeUlg/H9WVTb3k6KYw+StDGADn+f8vzKsTEKXzOf0OwCAHMBmnOrV2f9F5s0926wa9/Pdv/hxz+vXbKh2PPPZgzcm2xGzw29DmV+cwFogHuP34DSC7Mpre4mlPmQP+scMysWMUU9tlqQj9wRC083PG4XAEBSWy9TufCThBbG9Jw1TcFIvgqLPEbtf+Fl5fRlar7lhzreGZesOr0JFHN9tmGxpLa+xcX3L42NvPCTfOvKQgTAq7BvGDdaYIuwrG+kfojAHsZmivOk7zELNv6c8Y37r9TZqikmRTWAYubojFSTSwEM6d4qah2NSd/4wwW1JA1/SzNLJsy9W+GqbgXFUPZZUxOMrv9kiLJaFkZ5OryU1FYfYXxNKhtYCdBj3PJwRI5yRvIaWRj5Bw+rHkiU18EW5XBmLmxRNMAWw3UANg5pi0qAF1bZEx8OP9tIn7bwsRmEYv/FpPnFhBYmDKYQxtRaBa3jSlkc89eCWgMg2LV/lOwb9zxhfBfZZ0xIavvvGC16ayJ42r5Cy8+GqHUEFL56JSxyCyhG6JPBIpZfPX7vR//9/Ts8Gtr2N3xtgf1Ub/GgjgpDgKfCTMff0kyTCV+do7P+fyc0Px+gmexFmaqoRb+r8NVP5NsYv3JshsJX/57QwsRUme/4ldabk+LYN/ItMx9EreNUnfU/TGhhnlu6pLS+TLdubew6ZUGigGpWwO5JMmkBMBPlP3+skIWiuUuS9YtMha/ZQmjxCn/3p1M5I/kEYOpZihIUPvy4YMTvOvxsI5VrQ0St/QpFGPE2oYWJsIgiGImbAXpmqUUJAApfve/gf139NcbUrgPMPuKTxdGX6eMv+VtV27ZJeVYRQe+AAYdODAOLYYXik9WP6ZD0Tdivs/7lweQn0xhTa4btk3ItTmVDt9U3PvVk6OgmV2tnJoefbaQ4o+s2hQs/TyjOz5jadlHvbFDZ4IMAzMF+Ea+pXbLBIjS/jiHqOQzp3pqZrrKhs7qqp28V9c7+5ofZyBa5MxTDVyeQwfE3ph/7U2kV/2MJGZQwHRL+SfsIzTeKWvtFjKl80F8+nZGWdY+Z/UJV27asIXKho5u4Uxeu/bXOBu4CRYEx1XsJzV+g8CN259KuYkIY3wHxkxe/zBH5XmQ8KAgtjtbZwOui1v7VHIqMoMd0n45jfS0lK2A7/ZthD6vrXfLUp9KaU3nd2p6NV9Fb6K9mpG9Pnd+eY7n9EYHdTgu9RyWrUueaB7g288E02KMD7qOgvMhJmA4KX/NX/7E3GwQj9kNYRHHLozPSP3ZFzn45FN8Tckuv6tjp7x79pd+rXHgpgChHlAWEFn4EoCiul0JI1i8ydEb6kai1L2BMLZ6eRiguqHOhP4lax2B7lIVw7y1L6Q6phy2EXCOLnKik7XAXcT4437sB/Vunc6EJdjs7UdoHXQT27znXi8LyEiYAxMfP01W2apWoR7/ImOp7bnkI4/ty0l+3JSAfHpF+PhT/qEauOv01nfVfxpjqXsFInKczkpduiKKg8DUvBmK7ZwlGYm/6eUJxvMJVPScYsW8Oohi3f1wnSudCaIAtrEJE4EUZDhvRM3z3Yrjs9OibkftcvRMAleexI1WGF79J/sJ0UPiaXYHOD84XjPgatykhYXwN3eLINyWldRwA+Ls/HZ0M1L2hM9L5HJHflLo/vVBlg38vtB2lIhaZsUdo3Xq+YMT/2CuBYhiVrVov6NFrByjC7R+Xz02UDw2wh5JuveQ6AIvQ94ZbCfeHhuOD9aLndMovVJhz0dOeUvpKG9Lq9SRwomBhAkCsZqaqsqEbRS26GBbpE0NLaPEMlY+8LSmtkylLNwBYgpF4TorunpfwT+rwog2lJD5+Xow99Mp8zkjck/EwYlQ2+CtBj17fz6URuN/IO1zOFYO16CvKHQAmo3/H/2rYgnXzqzqxr4Xi1OusqMkX59oWlE6Y9eiJB94Ij/6XngjTQeGrN0jq57MYU+kTukZofpLKh9/Suaox/rbtX9jXvPyqWM3MvMPphppk/SJTZ4M/9iut19rrOlNQDKVy4YcFPXqDy2X9zeccw0ShRzbjwwr07a03w/aZDsYSvBnu4nRiTwthB3puaC+EWcq5ZTNsce6A/XDzBE+FCQCyOOZDqfvYLMZUt2WmEVoYazDSm1r49Ia8Y3TLjKQ49klJPnw5YyrpIwVK5UJrBD36w4zsXhlM8iFTtJ2we8JccCKSMofdXlgj04ez+fxOjtEnvaxi44RTtsD+LT2bjnguTABI+Cd9JiU/uZgj8kuZafYaz9BrotZ+STHqHgoSgcmvBGIffYUzEp/1nKWhcuF7BD16fz4BFx7jZgleifxupBb0tSAXOgRFqkynPfmU5VyzGaXxBTsWWOcB52mdRREmACSCU2Qpse8bjKU/k5lGaD5guxjav16s+ktNLDJjp9T+7gWCHt+Tfl7lwj+oa1z/XCi+x4ehi33NtAQX6kpwu9YrCy2Q+9C4Hj3fsRS9ZRN6RgkrUQQbQdGECQCx8HSDfv/RazgjsT4zjVCcoHOh34pa29XFbEMx8XcfCXFGcpNgJDZw761hYqMvOih8vm22oEffSs9HGF9jt/+UvwhGvO8CUZvJyN9Mn3705wt1m1sWQif63oxe+O/SjUC5lJdu9Cn2/HIuehazryxWfUUVJgDo53yP6GzwXwUj9lhmGqE4RuEi6zkjcXOx2+E1ghGbqAij3tZZ/6Um6LFS7WwRAOLj5nawhzfNE7WOXk9unZG+qLKh1wGz1aU4T3xfWcics3nxhM8sw4stUNKHobkMZ50etti9pWOBBYq8Rrbowkxh7Wtu+o5gxH/ZJ4ViKJ0NPiAYiYe499YMsIKlPBC1tvMMRvpfQvNnc0byZSn64ddi1ecmnfRk/SLl789fv1hSjz+Y4U6pYUzdLUzRk2iRLGSKxgsjReaw3CvDltMD5RJJVQrfZfo2KZvhoQXWjZy2FimE2iUbLBW4SdCjXSoXui3zmaCywe9yZy2vFbWOqxS+uqT7CeWCYMSvUfgRjwLwCUbiN0Lr1mtj4+f1WXVTu2SDKQM3S8pnB2Vh5C9AMamHDhVwKXYh8jfGDMRQWoLzYR16gvybMPBQ0RFwusulGDTDHtk4OyC48sz/3AUAeGvyXdnKWgbglLTPd6bOrXdOlKrHPIHKhW8XtegNgNlnobHOSPN1NrBVUluHeje+PviVYyJH5LUqG1oPwCepnz+wr3n5NXEXUaYji2PWSFrbQlhEBgBC8xSAZEa2CIbf6o1MwXtl2OpEzxx4oN8kgtIYfdam6nHcIoUwA8BTAH6aOuoAhAE8mJ6p5MIEAIWvfkjUOhYzlt4nAJ7Q/FkqF/k/Ueu4bCja5kZAPjRT4cI7dEZqYiydiFrHDbIw8pbB+mJlYfTvBCNxMSxyHLD363XJNty2qsycF3tpcXZENtelnnRKEbC+IlWPV26RdAFGAdwE4EbY4jzBkAgTABR+xPOi2nYJY2qfZaYRmg8rfPVLHJHvr2rf3neLjxIRTHzMiXrnnd2+sVsJ45vGmFpcVI5frvDVD+ValsqFtzGmNosxtY8IzdcCZuZw3Vm5MRyoR1/BeDmMHGxgu5O2EcWZBixEzy4T16Hw7zgndTg4NpfvZ2YcMmECQFIcu1XQY+dxRH7XJZnWGekHXZGztola25mlbpuktn5F9te9o3CROwjFsYypfOxTW2clfeNfzrdMwvgOCFrHhRyRtzBEddvt3VmwXO64tdHroeRAge3py8SKMYytR2+3iBd1PJX290EA/wG7Bw1nZhxSYQKALIw8LMpHvsQReb1bOqHF6Qo/YidnJFdXRd93M5x4ir/76BSOyL+VhdGvE5o/EwAEI/HHQPzj87t8tXsGun4gZHFMp5TY9w+gmF8zlr7XJcsquO8FVC64xcZuhveGF2do2l9UUbrv0uutMJ2VMxF45xZZBns+6XAnbEEuc8s85MIE7CghnZG+JWrt/8ZYerdLFl5n/bd2haZ+JBiJb/pbmj23Jvu7j0zjjMTTSd/YD3VGugIAxVi6IWptK/c1L788Fp4e9aquWHi6QWj+Zto07odF3LbiXAHv1jt6SbofL51i+PPSBZdNmMWYWzqB6V65RTKNO+/CtsDW9XdBWQjTQeFrHpfkIzMZU9nplk5oYbzKBn+j1C3YK+jR71RF3xcLqc/f0syLWvuVnJHclPSN26WzwaUAzQIAY6oHReX4xQo/YnWxAu51xve4/Z4U8x2XZGcxcjOK4+d0RDZYd8pCuO9csBHF27w53QiUbhhrSrWjGEYfxwKb1S2SI5nGnZsGuqCshAkACf+k3VLy0CxBj97NWLrrW7cIzderXPjhrtDUY5J6/Olg1/75/pbmQYm06vO/jRW19kbBiD+t1C1oVfia53XWfylAOxtLgyPyE/6ulnOSvvFve/fN3FGEke8B9Lnofw6zED375ji7iRe6zCq97P2p8lfAXaQrUunp7yBx8HSpkwvOayAy90lKD1j30ujj/LbOKhovCKO3ceeN1JGVkgUY5EIiOEUHcLu/++gGjY+s1RnpQrd8hBbCsjBqKYRRSxlpgiYYsd0APqBM8ilgRQHLsihWMhgpDJhTAHpqbMT5k0C5BxgxpnZA0KPfk4VRL+mhMwbV1lz2D514VdY1xYsw8EuF0o0ubvnyfQ3fXPTsmD5YSvVyno2wf5eFsL9bsQLWnS1Fvd5CNNO4863BXFSWwnRI+sbvOvxs4+zT/vmRxTrrX0VocWJ/eQkt8IQWZsB24OYEY2px2jJ+7mvf+UB81Gy3OW6pWAe7F1iF8g442Ai7pyzFdijrYAuzAfZv4sy7vd6lwFka1wLvfLJ16G3cWQ/bGjsgZTeUzaR2yQZL4WueC3TumiIYsRsY0n3Uq7I5In8uGImfSfKROp2R7h5iUTo40SWTUbwwPSC/DcB2wG6bp4uCB1GnM4dtRs+oweu5pSPGehSwi8RVs263rpp1u/PwSHePOMEEg6Lshelg7ytU9RC961f1wa79S0WtYyusPF4fYhEiau2vBRN7rybvPlKrssGfJAL15bjzubMguRo9m2I5hxftdSJZ0st2Y0cqbWbqGIoXAi1CbwPTanhvCd4Mbx+Ec9A3mGDQlv1+310yHAjIh6Z2i2O+Dor6JwAXEopzHZozptZGm9prNMw/892fvZIITjnmVRs8nGMWi3rYBp50Toa3iJUlThA7gHfQM606COAL6CvMOQBeT/t8YqeLsp5jDkSXNHEvgPsA3Bc89KLPHHnuNItiphFWCsMyaZPmj8Ii77c0L99Xu2SDCQBq0HX/6QoVvGQZets67kQOvSUwzIWZTmLi5d3oZ+nPcB4VVBiW/CTtbyeYICdOGmFWqFAmLEDviJ6D6C3UdOoyPp/Ixxb6Hr8KFSr04pyMzwtSx2D4qfPHsLHKVqgwTOiz2Xk+VIayFSp4y3rYkT6D2Zo1jN5GojecPyrCrFDBe36JnkXQ2ZiD3u6Si50/KkPZChXKkIowK1QoQyrCrFChDKEs66R46VaFCmXBW5PPziX7HJyMIXkVKgxzouhn0fT/A3tQ05HQIpHYAAAAAElFTkSuQmCC",
"PNG",20,20,100,21),a.setFontSize(10),a.text(150,25,"Chromosome: Location"),a.setFontSize(14),a.text(150,40,$("#chromosome-selector").val()+" : "+$("#text-location").val()),a.setTextColor(0,0,0),a.setFontSize(10),null!=b._workspaceId&&(a.text(350,25,"Workspace ID"),a.setTextColor(0,0,255),a.setFontSize(16),a.text(350,45,n)),a.setFontSize(14),a.text(350,40,$("#save-workspace-text").val()),a.addImage(h,"PNG",15,55),a.save(f)):(navigator.msSaveBlob?(h=a.msToBlob(),a=new Blob([h],{type:"image/png"}),
navigator.msSaveBlob(a,f)):(a=new Blob([h],{type:"image/png"}),n=document.createElement("a"),void 0!==n.download?(URL.createObjectURL(a),n.setAttribute("href",h),n.setAttribute("download",f),n.style="visibility:hidden",n.setAttribute("target","_blank"),document.body.appendChild(n),n.click(),document.body.removeChild(n)):(f=h.replace("image/png","image/octet-stream"),window.open(f))),c.find(".tempCanvas").remove(),e.each(function(){$(this).show()}))})};epiviz.deferred={};
epiviz.deferred.Deferred=function(a){this._deferred=a||$.Deferred()};epiviz.deferred.Deferred.State={PENDING:"pending",RESOLVED:"resolved",REJECTED:"rejected"};epiviz.deferred.Deferred.prototype.then=function(a,b,c){return new epiviz.deferred.Promise(this._deferred.then(a,b,c))};epiviz.deferred.Deferred.prototype.done=function(a,b){return new epiviz.deferred.Deferred(this._deferred.done(a,b))};
epiviz.deferred.Deferred.prototype.fail=function(a,b){return new epiviz.deferred.Deferred(this._deferred.fail(a,b))};epiviz.deferred.Deferred.prototype.always=function(a,b){return new epiviz.deferred.Deferred(this._deferred.always(a,b))};epiviz.deferred.Deferred.prototype.state=function(){return this._deferred.state()};epiviz.deferred.Deferred.prototype.notify=function(a){return new epiviz.deferred.Deferred(this._deferred.notify(a))};
epiviz.deferred.Deferred.prototype.notifyWith=function(a,b){return new epiviz.deferred.Deferred(this._deferred.notifyWith(a,b))};epiviz.deferred.Deferred.prototype.progress=function(a,b){return new epiviz.deferred.Deferred(this._deferred.progress(a,b))};epiviz.deferred.Deferred.prototype.promise=function(a){return new epiviz.deferred.Promise(this._deferred.promise(a))};epiviz.deferred.Deferred.prototype.reject=function(a){return new epiviz.deferred.Deferred(this._deferred.reject(a))};
epiviz.deferred.Deferred.prototype.rejectWith=function(a,b){return new epiviz.deferred.Deferred(this._deferred.rejectWith(a,b))};epiviz.deferred.Deferred.prototype.resolve=function(a){return new epiviz.deferred.Deferred(this._deferred.resolve(a))};epiviz.deferred.Deferred.prototype.resolveWith=function(a,b){return new epiviz.deferred.Deferred(this._deferred.resolveWith(a,b))};epiviz.deferred.Promise=function(a){this._promise=a};
epiviz.deferred.Promise.prototype.then=function(a,b,c){return new epiviz.deferred.Promise(this._promise.then(a,b,c))};epiviz.deferred.Promise.prototype.done=function(a,b){return new epiviz.deferred.Deferred(this._promise.done(a,b))};epiviz.deferred.Promise.prototype.fail=function(a,b){return new epiviz.deferred.Deferred(this._promise.fail(a,b))};epiviz.deferred.Promise.prototype.always=function(a,b){return new epiviz.deferred.Deferred(this._promise.always(a,b))};
epiviz.deferred.Promise.prototype.state=function(){return this._promise.state()};epiviz.utils={};epiviz.utils.capitalizeFirstLetter=function(a){return a.charAt(0).toUpperCase()+a.slice(1)};epiviz.utils.stringContains=function(a,b){return-1!=a.indexOf(b)};epiviz.utils.stringStartsWith=function(a,b){return 0==a.indexOf(b)};epiviz.utils.stringEndsWith=function(a,b){return a.lastIndexOf(b)==a.length-b.length};epiviz.utils.fillArray=function(a,b){a=a||0;for(var c=Array(a),e=0;e<a;++e)c[e]=b;return c};
epiviz.utils.indexOf=function(a,b){for(var c=0;c<a.length;++c)if(b(a[c]))return c;return-1};epiviz.utils.arraysEqual=function(a,b){if(a==b)return!0;if(!a||!b||a.length!=b.length||a<b||b<a)return!1;for(var c=0;c<a.length;++c)if(a[c]!=b[c])return!1;return!0};epiviz.utils.elementsEqual=function(a,b){if(a==b)return!0;if(!a||!b||a.length!=b.length)return!1;var c={},e;for(e=0;e<a.length;++e)a[e]in c||(c[a[e]]=0),++c[a[e]];for(e=0;e<b.length;++e){if(!c[b[e]])return!1;--c[b[e]]}return!0};
epiviz.utils.range=function(a,b){b=b||0;a=a||0;for(var c=Array(a),e=0;e<a;++e)c[e]=e+b;return c};epiviz.utils.arrayAppend=function(a,b){a.push.apply(a,b)};epiviz.utils.arrayFlip=function(a){for(var b={},c=0;c<a.length;++c)b[a[c]]=c;return b};epiviz.utils.indexOfMin=function(a,b){for(var c=null,e=null,d=0;d<a.length;++d)for(var f=b?d+1:0;f<a[d].length;++f)if(null==e||a[d][f]<e)e=a[d][f],c=[d,f];return{min:e,index:c}};
epiviz.utils.arrayIntersection=function(a,b){var c={};a.forEach(function(a){c[a]=a});var e=[];b.forEach(function(a){a in c&&e.push(a)});return e};epiviz.utils.asyncFor=function(a,b,c){if(a){var e=function(d){d>=a?c&&c():b(d,function(a){a?c&&c():e(d+1)})};e(0)}else c&&c()};
epiviz.utils.deferredFor=function(a,b){for(var c=new epiviz.deferred.Deferred,e=new epiviz.deferred.Deferred,d=c.promise(),f=0;f<a;++f)(function(c){d=d.then(function(){var d=b(c);c==a-1&&d.then(function(){e.resolve()});return d})})(f);c.resolve();return e};epiviz.utils.mapCopy=function(a){var b={},c;for(c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b};
epiviz.utils.mapEquals=function(a,b){if(a==b)return!0;if(!a||!b)return!1;for(var c in a)if(a.hasOwnProperty(c)&&(!b.hasOwnProperty(c)||a[c]!=b[c]))return!1;for(c in b)if(b.hasOwnProperty(c)&&!a.hasOwnProperty(c))return!1;return!0};epiviz.utils.mapCombine=function(a,b,c){var e={},d;if(b)for(d in b)b.hasOwnProperty(d)&&(e[d]=b[d]);if(a)for(d in a)a.hasOwnProperty(d)&&(c&&e[d]&&$.isArray(e[d])&&a[d]&&$.isArray(a[d])?e[d]=e[d].concat(a[d]):e[d]=a[d]);return e};
epiviz.utils.mapJoin=function(a,b,c){b||""===b||(b=":");c||""===c||(c=",");var e="",d;for(d in a)a.hasOwnProperty(d)&&(e&&(e+=c),e+=d+b+a[d]);return e};epiviz.utils.mapKeyIntersection=function(a,b){var c=[];if(!a||!b)return c;for(var e in a)a.hasOwnProperty(e)&&e in b&&c.push(e);return c};epiviz.utils.forEach=function(a,b){for(var c in a)if(a.hasOwnProperty(c)&&b(a[c],c,a))break};
epiviz.utils.evaluateFullyQualifiedTypeName=function(a){try{for(var b=a.split("."),c=b.pop(),e=window,d=0;d<b.length;++d)e=e[b[d]];var f=e[c];return"function"!==typeof f?(console.error("Unknown type name: "+a),null):f}catch(n){return console.error("Unknown type name: "+a),null}};epiviz.utils.applyConstructor=function(a,b){var c;c=function(){};c.prototype=a.prototype;c=new c;c.constructor=a;a.apply(c,b);return c};epiviz.utils.RAD_TO_DEG=180/Math.PI;epiviz.utils.DEG_TO_RAD=Math.PI/180;
epiviz.utils.getInternetExplorerVersion=function(){var a=-1;if("Microsoft Internet Explorer"==navigator.appName){var b=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent);null!=b&&(a=parseFloat(b[1]))}return a};epiviz.utils.generatePseudoGUID=function(a){for(var b="",c=0;c<a;++c)b+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.round(61*Math.random())];return b};epiviz.utils.colorize=function(a,b,c,e,d,f){return d3.scale.linear().domain([a,c,b]).range([e,f,d])};
epiviz.utils.colorizeBinary=function(a,b,c,e){return d3.scale.linear().domain([a,b]).range([c,e])};epiviz.utils.sign=function(a){return 0>a?-1:0==a?0:1};var caja={};epiviz.caja={};caja.initialize=function(){};epiviz.caja.cajole=function(a,b){var c=new epiviz.deferred.Deferred;setTimeout(function(){c.resolve(eval("("+a+")"))},0);return c};
epiviz.caja.run=function(a,b){var c=new epiviz.deferred.Deferred;setTimeout(function(){var b=document.getElementsByTagName("head")[0],d=document.createElement("script");d.type="text/javascript";d.src=a;d.onreadystatechange=d.onload=function(){c.resolve()};b.appendChild(d)},0);return c};epiviz.caja.chain=function(a,b){$.isArray(b)||(b=epiviz.utils.fillArray(a.length,b));return epiviz.utils.deferredFor(a.length,function(c){return epiviz.caja.run(a[c],b[c])})};
epiviz.caja.buildChartMethodContext=function(){return{epiviz:{ui:{charts:epiviz.ui.charts,controls:epiviz.ui.controls},utils:epiviz.utils,plugins:epiviz.plugins,measurements:epiviz.measurements,events:epiviz.events,deferred:epiviz.deferred,datatypes:epiviz.datatypes,data:{DataProvider:epiviz.data.DataProvider,Request:epiviz.data.Request,Response:epiviz.data.Response,WebServerDataProvider:{makeGetRequest:epiviz.data.WebServerDataProvider.makeGetRequest}},Config:epiviz.Config},d3:d3,$:$,sprintf:sprintf,
goog:goog}};Array.indexOf||(Array.prototype.indexOf=function(a,b){for(var c=b||0;c<this.length;c++)if(this[c]===a)return c;return-1});
epiviz.utils.ExpressionParser=function(a){function b(a){function b(){}b.prototype=a;return new b}function c(a,b,c,d){this.type_=a;this.index_=b||0;this.prio_=c||0;this.number_=void 0!==d&&null!==d?d:0;this.toString=function(){switch(this.type_){case 0:return this.number_;case 1:case 2:case 3:return this.index_;case 4:return"CALL";default:return"Invalid Token"}}}function e(a,b,c,d){this.tokens=a;this.ops1=b;this.ops2=c;this.functions=d}function d(a){return"string"===typeof a?(x.lastIndex=0,x.test(a)?
"'"+a.replace(x,function(a){var b=z[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+"'":"'"+a+"'"):a}function f(a,b){return Number(a)+Number(b)}function n(a,b){return a-b}function h(a,b){return a*b}function g(a,b){return a/b}function l(a,b){return a%b}function m(a,b){return""+a+b}function p(a){return-a}function t(a){return Math.random()*(a||1)}function r(a){for(var b=a=Math.floor(a);1<a;)b*=--a;return b}function q(a,b){return Math.sqrt(a*a+b*b)}function w(a,
b){if("[object Array]"!=Object.prototype.toString.call(a))return[a,b];a=a.slice();a.push(b);return a}function u(){this.success=!1;this.expression=this.errormsg="";this.tmpprio=this.tokenindex=this.tokenprio=this.tokennumber=this.pos=0;this.ops1={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sqrt:Math.sqrt,log:Math.log,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,"-":p,exp:Math.exp};this.ops2={"+":f,"-":n,"*":h,"/":g,"%":l,"^":Math.pow,",":w,"||":m};
this.functions={random:t,fac:r,min:Math.min,max:Math.max,pyt:q,pow:Math.pow,atan2:Math.atan2};this.consts={E:Math.E,PI:Math.PI}}var x=/[\\\'\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,z={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"};e.prototype={simplify:function(a){a=a||{};for(var d=[],f=[],g,h,l,m=this.tokens.length,n=0,n=0;n<m;n++)if(l=this.tokens[n],g=l.type_,0===g)d.push(l);else if(3===g&&
l.index_ in a)l=new c(0,0,0,a[l.index_]),d.push(l);else if(2===g&&1<d.length)h=d.pop(),g=d.pop(),l=this.ops2[l.index_],l=new c(0,0,0,l(g.number_,h.number_)),d.push(l);else if(1===g&&0<d.length)g=d.pop(),l=this.ops1[l.index_],l=new c(0,0,0,l(g.number_)),d.push(l);else{for(;0<d.length;)f.push(d.shift());f.push(l)}for(;0<d.length;)f.push(d.shift());return new e(f,b(this.ops1),b(this.ops2),b(this.functions))},substitute:function(a,d){d instanceof e||(d=(new u).parse(String(d)));for(var f=[],g=this.tokens.length,
h,l=0,l=0;l<g;l++)if(h=this.tokens[l],3===h.type_&&h.index_===a)for(h=0;h<d.tokens.length;h++){var m=d.tokens[h],m=new c(m.type_,m.index_,m.prio_,m.number_);f.push(m)}else f.push(h);return new e(f,b(this.ops1),b(this.ops2),b(this.functions))},evaluate:function(a){a=a||{};for(var b=[],c,d,e,f=this.tokens.length,g=0,g=0;g<f;g++)if(e=this.tokens[g],c=e.type_,0===c)b.push(e.number_);else if(2===c)d=b.pop(),c=b.pop(),e=this.ops2[e.index_],b.push(e(c,d));else if(3===c)if(e.index_ in a)b.push(a[e.index_]);
else if(e.index_ in this.functions)b.push(this.functions[e.index_]);else throw Error("undefined variable: "+e.index_);else if(1===c)c=b.pop(),e=this.ops1[e.index_],b.push(e(c));else if(4===c)if(c=b.pop(),e=b.pop(),e.apply&&e.call)"[object Array]"==Object.prototype.toString.call(c)?b.push(e.apply(void 0,c)):b.push(e.call(void 0,c));else throw Error(e+" is not a function");else throw Error("invalid Expression");if(1<b.length)throw Error("invalid Expression (parity)");return b[0]},evaluateArr:function(a){for(var b=
[],c=!1;!c;){var d={},e;for(e in a)if(a.hasOwnProperty(e)){if(b.length>=a[e].length){c=!0;break}d[e]=a[e][b.length]}c||b.push(this.evaluate(d))}return b},toString:function(a){for(var b=[],c,e,f,g=this.tokens.length,h=0,h=0;h<g;h++)if(f=this.tokens[h],c=f.type_,0===c)b.push(d(f.number_));else if(2===c)e=b.pop(),c=b.pop(),f=f.index_,a&&"^"==f?b.push("Math.pow("+c+","+e+")"):b.push("("+c+f+e+")");else if(3===c)b.push(f.index_);else if(1===c)c=b.pop(),f=f.index_,"-"===f?b.push("("+f+c+")"):b.push(f+"("+
c+")");else if(4===c)c=b.pop(),f=b.pop(),b.push(f+"("+c+")");else throw Error("invalid Expression");if(1<b.length)throw Error("invalid Expression (parity)");return b[0]},variables:function(){for(var a=this.tokens.length,b=[],c=0;c<a;c++){var d=this.tokens[c];3===d.type_&&-1==b.indexOf(d.index_)&&b.push(d.index_)}return b},toJSFunction:function(a,b){return new Function(a,"with(Parser.values) { return "+this.simplify(b).toString(!0)+"; }")}};u.parse=function(a){return(new u).parse(a)};u.evaluate=function(a,
b){return u.parse(a).evaluate(b)};u.Expression=e;u.values={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sqrt:Math.sqrt,log:Math.log,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,random:t,fac:r,exp:Math.exp,min:Math.min,max:Math.max,pyt:q,pow:Math.pow,atan2:Math.atan2,E:Math.E,PI:Math.PI};u.prototype={parse:function(a){this.errormsg="";this.success=!0;var d=[],f=[];this.tmpprio=0;var g=77,h=0;this.expression=a;for(this.pos=0;this.pos<this.expression.length;)this.isOperator()?
this.isSign()&&g&64?(this.isNegativeSign()&&(this.tokenprio=2,this.tokenindex="-",h++,this.addfunc(f,d,1)),g=77):this.isComment()||(0===(g&2)&&this.error_parsing(this.pos,"unexpected operator"),h+=2,this.addfunc(f,d,2),g=77):this.isNumber()?(0===(g&1)&&this.error_parsing(this.pos,"unexpected number"),a=new c(0,0,0,this.tokennumber),f.push(a),g=50):this.isString()?(0===(g&1)&&this.error_parsing(this.pos,"unexpected string"),a=new c(0,0,0,this.tokennumber),f.push(a),g=50):this.isLeftParenth()?(0===
(g&8)&&this.error_parsing(this.pos,'unexpected "("'),g&128&&(h+=2,this.tokenprio=-2,this.tokenindex=-1,this.addfunc(f,d,4)),g=333):this.isRightParenth()?(g&256?(a=new c(0,0,0,[]),f.push(a)):0===(g&16)&&this.error_parsing(this.pos,'unexpected ")"'),g=186):this.isComma()?(0===(g&32)&&this.error_parsing(this.pos,'unexpected ","'),this.addfunc(f,d,2),h+=2,g=77):this.isConst()?(0===(g&1)&&this.error_parsing(this.pos,"unexpected constant"),a=new c(0,0,0,this.tokennumber),f.push(a),g=50):this.isOp2()?(0===
(g&4)&&this.error_parsing(this.pos,"unexpected function"),this.addfunc(f,d,2),h+=2,g=8):this.isOp1()?(0===(g&4)&&this.error_parsing(this.pos,"unexpected function"),this.addfunc(f,d,1),h++,g=8):this.isVar()?(0===(g&1)&&this.error_parsing(this.pos,"unexpected variable"),a=new c(3,this.tokenindex,0,0),f.push(a),g=186):this.isWhite()||(""===this.errormsg?this.error_parsing(this.pos,"unknown character"):this.error_parsing(this.pos,this.errormsg));for((0>this.tmpprio||10<=this.tmpprio)&&this.error_parsing(this.pos,
'unmatched "()"');0<d.length;)a=d.pop(),f.push(a);h+1!==f.length&&this.error_parsing(this.pos,"parity");return new e(f,b(this.ops1),b(this.ops2),b(this.functions))},evaluate:function(a,b){return this.parse(a).evaluate(b)},error_parsing:function(a,b){this.success=!1;this.errormsg="parse error [column "+a+"]: "+b;throw Error(this.errormsg);},addfunc:function(a,b,d){for(d=new c(d,this.tokenindex,this.tokenprio+this.tmpprio,0);0<b.length;)if(d.prio_<=b[b.length-1].prio_)a.push(b.pop());else break;b.push(d)},
isNumber:function(){for(var a=!1,b="";this.pos<this.expression.length;){var c=this.expression.charCodeAt(this.pos);if(48<=c&&57>=c||46===c)b+=this.expression.charAt(this.pos),this.pos++,this.tokennumber=parseFloat(b),a=!0;else break}return a},unescape:function(a,b){for(var c=[],d=!1,e=0;e<a.length;e++){var f=a.charAt(e);if(d){switch(f){case "'":c.push("'");break;case "\\":c.push("\\");break;case "/":c.push("/");break;case "b":c.push("\b");break;case "f":c.push("\f");break;case "n":c.push("\n");break;
case "r":c.push("\r");break;case "t":c.push("\t");break;case "u":d=parseInt(a.substring(e+1,e+5),16);c.push(String.fromCharCode(d));e+=4;break;default:throw this.error_parsing(b+e,"Illegal escape sequence: '\\"+f+"'");}d=!1}else"\\"==f?d=!0:c.push(f)}return c.join("")},isString:function(){var a=!1,b="",c=this.pos;if(this.pos<this.expression.length&&"'"==this.expression.charAt(this.pos))for(this.pos++;this.pos<this.expression.length;)if("'"!=this.expression.charAt(this.pos)||"\\"==b.slice(-1))b+=this.expression.charAt(this.pos),
this.pos++;else{this.pos++;this.tokennumber=this.unescape(b,c);a=!0;break}return a},isConst:function(){var a,b;for(b in this.consts){var c=b.length;a=this.expression.substr(this.pos,c);if(b===a)return this.tokennumber=this.consts[b],this.pos+=c,!0}return!1},isOperator:function(){var a=this.expression.charCodeAt(this.pos);if(43===a)this.tokenprio=0,this.tokenindex="+";else if(45===a)this.tokenprio=0,this.tokenindex="-";else if(124===a)if(124===this.expression.charCodeAt(this.pos+1))this.pos++,this.tokenprio=
0,this.tokenindex="||";else return!1;else if(42===a)this.tokenprio=1,this.tokenindex="*";else if(47===a)this.tokenprio=2,this.tokenindex="/";else if(37===a)this.tokenprio=2,this.tokenindex="%";else if(94===a)this.tokenprio=3,this.tokenindex="^";else return!1;this.pos++;return!0},isSign:function(){var a=this.expression.charCodeAt(this.pos-1);return 45===a||43===a?!0:!1},isPositiveSign:function(){return 43===this.expression.charCodeAt(this.pos-1)?!0:!1},isNegativeSign:function(){return 45===this.expression.charCodeAt(this.pos-
1)?!0:!1},isLeftParenth:function(){return 40===this.expression.charCodeAt(this.pos)?(this.pos++,this.tmpprio+=10,!0):!1},isRightParenth:function(){return 41===this.expression.charCodeAt(this.pos)?(this.pos++,this.tmpprio-=10,!0):!1},isComma:function(){return 44===this.expression.charCodeAt(this.pos)?(this.pos++,this.tokenprio=-1,this.tokenindex=",",!0):!1},isWhite:function(){var a=this.expression.charCodeAt(this.pos);return 32===a||9===a||10===a||13===a?(this.pos++,!0):!1},isOp1:function(){for(var a=
"",b=this.pos;b<this.expression.length;b++){var c=this.expression.charAt(b);if(c.toUpperCase()===c.toLowerCase()&&(b===this.pos||"_"!=c&&("0">c||"9"<c)))break;a+=c}return 0<a.length&&a in this.ops1?(this.tokenindex=a,this.tokenprio=5,this.pos+=a.length,!0):!1},isOp2:function(){for(var a="",b=this.pos;b<this.expression.length;b++){var c=this.expression.charAt(b);if(c.toUpperCase()===c.toLowerCase()&&(b===this.pos||"_"!=c&&("0">c||"9"<c)))break;a+=c}return 0<a.length&&a in this.ops2?(this.tokenindex=
a,this.tokenprio=5,this.pos+=a.length,!0):!1},isVar:function(){for(var a="",b=this.pos;b<this.expression.length;b++){var c=this.expression.charAt(b);if(c.toUpperCase()===c.toLowerCase()&&(b===this.pos||"_"!=c&&("0">c||"9"<c)))break;a+=c}b=this.pos;c=this.expression.indexOf("}",this.pos);"{"==this.expression.charAt(b)&&c>b&&(a=this.expression.substring(b,c+1));return 0<a.length?(this.tokenindex=a,this.tokenprio=4,this.pos+=a.length,!0):!1},isComment:function(){return 47===this.expression.charCodeAt(this.pos-
1)&&42===this.expression.charCodeAt(this.pos)?(this.pos=this.expression.indexOf("*/",this.pos)+2,1===this.pos&&(this.pos=this.expression.length),!0):!1}};return a.Parser=u}("undefined"===typeof exports?{}:exports);epiviz.utils.Iterable=function(){};epiviz.utils.Iterable.prototype.foreach=function(a){};epiviz.utils.IterableArray=function(a){this._array=a};epiviz.utils.IterableArray.prototype.foreach=function(a){for(var b=0;b<this._array.length&&!a(this._array[b]);++b);};
epiviz.Config=function(a){this.workspacesDataProvider=this.dataProviders=this.defaultWorkspaceSettings=this.navigationDelay=this.navigationStepRatio=this.zoomoutRatio=this.zoominRatio=this.chartSaverLocation=this.dataServerLocation=null;this.useCache=!0;this.useCookie=null;this.cacheUpdateIntervalMilliseconds=3E4;this.colorPalettesMap=this.colorPalettes=this.clustering=this.chartCustomSettings=this.chartSettings=this.chartTypes=this.maxSearchResults=null;if(a){for(var b in a)a.hasOwnProperty(b)&&
(this[b]=a[b]);if("epivizr_standalone"!=a.configType&&(b=epiviz.ui.WebArgsManager.WEB_ARGS["websocket-host"])&&b.length)for(var c=0;c<b.length;++c)this.dataProviders.push(sprintf("epiviz.data.WebsocketDataProvider,%s,%s",epiviz.data.WebsocketDataProvider.DEFAULT_ID+"-"+c,b[c]))}var e={};this.colorPalettes.forEach(function(a){e[a.id()]=a});this.colorPalettesMap=e;"default"!=a.configType&&(this.useCookie=epiviz.ui.WebArgsManager.WEB_ARGS.useCookie)};epiviz.Config.SETTINGS={};
epiviz.Config.DEFAULT_DATA_PROVIDER_ID="umd";epiviz.Config.DEFAULT_WORKSPACE_NAME="Default Workspace";epiviz.Config.EPIVIZ_V1_COLORS="#025167 #e7003e #ffcd00 #057d9f #970026 #ffe373 #ff8100".split(" ");epiviz.Config.COLORS_BRIGHT="#1859a9 #ed2d2e #008c47 #010101 #f37d22 #662c91 #a11d20 #b33893".split(" ");epiviz.Config.COLORS_LIGHT="#b8d2eb #f2aeac #d8e4aa #cccccc #f2d1b0 #d4b2d3 #ddb8a9 #ebbfd9".split(" ");epiviz.Config.COLORS_MEDIUM="#599ad3 #f1595f #79c36a #727272 #f9a65a #9e66ab #cd7058 #d77fb3".split(" ");
epiviz.Config.COLORS_D3_CAT10="#1f77b4 #ff7f0e #2ca02c #d62728 #9467bd #8c564b #e377c2 #7f7f7f #bcbd22 #17becf".split(" ");epiviz.Config.COLORS_D3_CAT20="#1f77b4 #aec7e8 #ff7f0e #ffbb78 #2ca02c #98df8a #d62728 #ff9896 #9467bd #c5b0d5 #8c564b #c49c94 #e377c2 #f7b6d2 #7f7f7f #c7c7c7 #bcbd22 #dbdb8d #17becf #9edae5".split(" ");epiviz.Config.COLORS_D3_CAT20B="#393b79 #5254a3 #6b6ecf #9c9ede #637939 #8ca252 #b5cf6b #cedb9c #8c6d31 #bd9e39 #e7ba52 #e7cb94 #843c39 #ad494a #d6616b #e7969c #7b4173 #a55194 #ce6dbd #de9ed6".split(" ");
epiviz.Config.COLORS_D3_CAT20C="#3182bd #6baed6 #9ecae1 #c6dbef #e6550d #fd8d3c #fdae6b #fdd0a2 #31a354 #74c476 #a1d99b #c7e9c0 #756bb1 #9e9ac8 #bcbddc #dadaeb #636363 #969696 #bdbdbd #d9d9d9".split(" ");epiviz.Config.VisualizationPropertySettings={WIDTH:"width",HEIGHT:"height",MARGINS:"margins",COLORS:"colors",DECORATIONS:"decorations"};epiviz.events={};epiviz.events.EventListener=function(a){this._id=epiviz.events.EventListener._nextId++;this._updateCallback=a};
epiviz.events.EventListener._nextId=0;epiviz.events.EventListener.prototype.update=function(a){this._updateCallback(a)};epiviz.events.EventListener.prototype.id=function(){return this._id};epiviz.events.Event=function(){this._count=0;this._listeners={};this._firing=!1};epiviz.events.Event.prototype.addListener=function(a){this._listeners[a.id()]||++this._count;this._listeners[a.id()]=a};
epiviz.events.Event.prototype.removeListener=function(a){this._listeners[a.id()]&&(delete this._listeners[a.id()],--this._count)};epiviz.events.Event.prototype.notify=function(a){if(!this._firing&&0!=this._count){this._firing=!0;for(var b in this._listeners)this._listeners.hasOwnProperty(b)&&this._listeners[b].update(a);this._firing=!1}};epiviz.events.Event.prototype.isFiring=function(){return this._firing};epiviz.events.EventResult=function(){this.value=this.errorMessage=this.success=null};
epiviz.data={};epiviz.data.MessageType={REQUEST:"request",RESPONSE:"response"};epiviz.data.Request=function(a,b,c){this._id=a;this._args=b;this._method=c};epiviz.data.Request.Method={GET:"get",POST:"post"};
epiviz.data.Request.Action={GET_ROWS:"getRows",GET_VALUES:"getValues",GET_COMBINED:"getCombined",GET_MEASUREMENTS:"getMeasurements",SEARCH:"search",GET_SEQINFOS:"getSeqInfos",SAVE_WORKSPACE:"saveWorkspace",DELETE_WORKSPACE:"deleteWorkspace",GET_WORKSPACES:"getWorkspaces",GET_HIERARCHY:"getHierarchy",PROPAGATE_HIERARCHY_CHANGES:"propagateHierarchyChanges",GET_CHART_SETTINGS:"getChartSettings",SET_CHART_SETTINGS:"setChartSettings",GET_AVAILABLE_CHARTS:"getAvailableCharts",ADD_MEASUREMENTS:"addMeasurements",
REMOVE_MEASUREMENTS:"removeMeasurements",ADD_SEQINFOS:"addSeqInfos",REMOVE_SEQNAMES:"removeSeqNames",ADD_CHART:"addChart",REMOVE_CHART:"removeChart",CLEAR_DATASOURCE_GROUP_CACHE:"clearDatasourceGroupCache",FLUSH_CACHE:"flushCache",NAVIGATE:"navigate",REDRAW:"redraw",GET_CURRENT_LOCATION:"getCurrentLocation",WRITE_DEBUG_MSG:"writeMsg",PRINT_WORKSPACE:"printWorkspace",REGISTER_CHART_TYPES:"registerChartTypes"};
epiviz.data.Request.createRequest=function(a,b){return new epiviz.data.Request(epiviz.data.Request._nextId++,a,b||epiviz.data.Request.Method.GET)};epiviz.data.Request.fromRawObject=function(a){return new epiviz.data.Request(a.requestId,a.data)};epiviz.data.Request._nextId=0;epiviz.data.Request.prototype.id=function(){return this._id};epiviz.data.Request.prototype.type=function(){return epiviz.data.MessageType.REQUEST};epiviz.data.Request.prototype.method=function(){return this._method};
epiviz.data.Request.prototype.joinArgs=function(a,b){a=a||"=";b=b||"&";var c=sprintf("requestId%s%s",a,this._id),e;for(e in this._args)if(this._args.hasOwnProperty(e))if(Array.isArray(this._args[e]))for(var d=0;d<this._args[e].length;++d)c+=sprintf("%s%s[]%s%s",b,e,a,this._args[e][d]);else c+=sprintf("%s%s%s%s",b,e,a,this._args[e]||"");return c};epiviz.data.Request.prototype.isEmpty=function(){for(var a in this._args)if(this._args.hasOwnProperty(a))return!1;return!0};
epiviz.data.Request.prototype.get=function(a){return a in this._args?this._args[a]:null};epiviz.data.Request.prototype.raw=function(){return{requestId:this._id,type:this.type(),data:epiviz.utils.mapCopy(this._args)}};epiviz.data.Request.emptyRequest=function(){return epiviz.data.Request.createRequest({})};
epiviz.data.Request.getRows=function(a,b){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.GET_ROWS,datasource:a.id(),seqName:b?b.seqName():void 0,start:b?b.start():void 0,end:b?b.end():void 0,metadata:a.metadata()})};
epiviz.data.Request.getValues=function(a,b){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.GET_VALUES,datasource:a.datasource().id(),measurement:a.id(),seqName:b?b.seqName():void 0,start:b?b.start():void 0,end:b?b.end():void 0})};
epiviz.data.Request.getCombined=function(a,b){var c={},e;for(e in a)a.hasOwnProperty(e)&&(c[e]=function(){var b=[];a[e].foreach(function(a){b.push(a.id())});return b}());return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.GET_COMBINED,seqName:b?b.seqName():void 0,start:b?b.start():void 0,end:b?b.end():void 0,measurements:c})};
epiviz.data.Request.getMeasurements=function(){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.GET_MEASUREMENTS})};epiviz.data.Request.search=function(a,b){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.SEARCH,q:a||"",maxResults:b})};epiviz.data.Request.getSeqInfos=function(){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.GET_SEQINFOS})};
epiviz.data.Request.saveWorkspace=function(a,b){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.SAVE_WORKSPACE,id:a.id(),name:a.name(),content:encodeURIComponent(JSON.stringify(a.raw(b).content))},epiviz.data.Request.Method.POST)};epiviz.data.Request.deleteWorkspace=function(a){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.DELETE_WORKSPACE,id:a.id()},epiviz.data.Request.Method.POST)};
epiviz.data.Request.getWorkspaces=function(a,b){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.GET_WORKSPACES,q:a||"",ws:b})};epiviz.data.Request.getHierarchy=function(a,b){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.GET_HIERARCHY,datasourceGroup:a,nodeId:b})};
epiviz.data.Request.propagateHierarchyChanges=function(a,b,c,e){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.PROPAGATE_HIERARCHY_CHANGES,datasourceGroup:a,selection:b,order:c,selectedLevels:e})};epiviz.data.RequestStack=function(){this._requests=[];this._callbacks={};this._dataMap={}};epiviz.data.RequestStack.prototype.pushRequest=function(a,b){this._requests.push(a);this._callbacks[a.id()]=b};
epiviz.data.RequestStack.prototype.serveData=function(a){if(this._callbacks[a.id()])if(0<this._requests.length&&this._requests[0].id()==a.id()){var b=this._callbacks[a.id()];delete this._callbacks[a.id()];this._requests=this._requests.slice(1);for(b(a.data());0<this._requests.length&&this._requests[0].id()in this._dataMap;)b=this._callbacks[this._requests[0].id()],a=this._dataMap[this._requests[0].id()],delete this._callbacks[this._requests[0].id()],delete this._dataMap[this._requests[0].id()],this._requests=
this._requests.slice(1),b(a)}else this._dataMap[a.id()]=a.data()};epiviz.data.RequestStack.prototype.clear=function(){this._requests=[];this._callbacks={};this._dataMap={}};epiviz.data.Response=function(a,b){this._id=a;this._data=b};epiviz.data.Response.prototype.id=function(){return this._id};epiviz.data.Response.prototype.data=function(){var a=this._data,b=Object.keys(a);0<b.length&&-1!=b.indexOf("success")&&(b.splice(b.indexOf("success"),1),delete a.success);return a};
epiviz.data.Response.prototype.type=function(){return epiviz.data.MessageType.RESPONSE};epiviz.data.Response.prototype.raw=function(){return{requestId:this._id,type:this.type(),data:this._data}};epiviz.data.Response.fromRawObject=function(a){return new epiviz.data.Response(a.requestId,a.data)};epiviz.measurements={};
epiviz.measurements.Measurement=function(a,b,c,e,d,f,n,h,g,l,m,p){var t=epiviz.measurements.Measurement.Type;this._id=a;this._name=b;this._type=c;this._datasource=c==t.RANGE?this:new epiviz.measurements.Measurement(e,e,t.RANGE,e,d,f,null,"Blocks Track",null,null,null,p);this._datasourceGroup=d;this._dataprovider=f;this._formula=n||null;this._defaultChartType=h||null;this._annotation=g||null;this._minValue=l||0===l?l:null;this._maxValue=m||0===m?m:null;this._metadata=p||null};
epiviz.measurements.Measurement.Type={FEATURE:"feature",RANGE:"range",UNORDERED:"unordered"};epiviz.measurements.Measurement.Type.isOrdered=function(a){return a==epiviz.measurements.Measurement.Type.FEATURE||a==epiviz.measurements.Measurement.Type.RANGE};epiviz.measurements.Measurement.Type.hasValues=function(a){return a==epiviz.measurements.Measurement.Type.FEATURE||a==epiviz.measurements.Measurement.Type.UNORDERED};epiviz.measurements.Measurement.prototype.id=function(){return this._id};
epiviz.measurements.Measurement.prototype.name=function(){return this._name};epiviz.measurements.Measurement.prototype.type=function(){return this._type};epiviz.measurements.Measurement.prototype.datasource=function(){return this._datasource};epiviz.measurements.Measurement.prototype.datasourceId=function(){return this._datasource.id()};epiviz.measurements.Measurement.prototype.datasourceGroup=function(){return this._datasourceGroup};epiviz.measurements.Measurement.prototype.dataprovider=function(){return this._dataprovider};
epiviz.measurements.Measurement.prototype.formula=function(){return this._formula};epiviz.measurements.Measurement.prototype.formulaStr=function(){if(!this._formula)return"";var a=this._formula.referredMeasurements,b=this._formula.expression.toString(),c;for(c in a)a.hasOwnProperty(c)&&(b=b.replace(new RegExp("\\{"+c+"\\}","g")," {"+a[c].name()+"} "));return b};
epiviz.measurements.Measurement.prototype.evaluate=function(a){var b={},c;for(c in this._formula.referredMeasurements)if(this._formula.referredMeasurements.hasOwnProperty(c)){var e=this._formula.referredMeasurements[c];b["{"+c+"}"]=e.isComputed()?e.evaluate(a):a.get(e)}return this._formula.expression.evaluate(b)};
epiviz.measurements.Measurement.prototype.evaluateArr=function(a){var b={},c;for(c in this._formula.referredMeasurements)if(this._formula.referredMeasurements.hasOwnProperty(c)){var e=this._formula.referredMeasurements[c];b["{"+c+"}"]=e.isComputed()?e.evaluateArr(a):a.get(e)}return this._formula.expression.evaluateArr(b)};epiviz.measurements.Measurement.prototype.defaultChartType=function(){return this._defaultChartType};epiviz.measurements.Measurement.prototype.annotation=function(){return this._annotation};
epiviz.measurements.Measurement.prototype.minValue=function(){return this._minValue};epiviz.measurements.Measurement.prototype.maxValue=function(){return this._maxValue};epiviz.measurements.Measurement.prototype.metadata=function(){return this._metadata||[]};
epiviz.measurements.Measurement.prototype.componentMeasurements=function(){var a=new epiviz.measurements.MeasurementSet;if(!this._formula)return a.add(this),a;for(var b in this._formula.referredMeasurements)this._formula.referredMeasurements.hasOwnProperty(b)&&a.addAll(this._formula.referredMeasurements[b].componentMeasurements());return a};epiviz.measurements.Measurement.prototype.isComputed=function(){return this._formula?!0:!1};
epiviz.measurements.Measurement.prototype.raw=function(a){if(this._formula){var b=this._formula.referredMeasurements,c={},e;for(e in b)b.hasOwnProperty(e)&&(c[e]=a.get(b[e]))}return{id:this._id,name:this._name,type:this._type,datasourceId:this._datasource._id,datasourceGroup:this._datasourceGroup,dataprovider:this._dataprovider,formula:this._formula?{expression:this._formula.expression.toString(),referredMeasurements:c}:null,defaultChartType:this._defaultChartType,annotation:this._annotation,minValue:this._minValue,
maxValue:this._maxValue,metadata:this._metadata}};epiviz.measurements.Measurement.prototype.toString=function(){return this.name()};
epiviz.measurements.Measurement.fromRawObject=function(a,b){var c=null;if(a.formula){for(var c=epiviz.utils.ExpressionParser.parse(a.formula.expression),e={},d=c.variables(),f=0;f<d.length;++f)if(epiviz.utils.stringStartsWith(d[f],"{")&&epiviz.utils.stringEndsWith(d[f],"}")){var n=parseInt(d[f].substring(1,d[f].length-1));e[n]=b[a.formula.referredMeasurements[n]]}c={expression:c,referredMeasurements:e}}return new epiviz.measurements.Measurement(a.id,a.name,a.type,a.datasourceId,a.datasourceGroup,
a.dataprovider,c,a.defaultChartType,a.annotation,a.minValue,a.maxValue,a.metadata)};epiviz.measurements.MeasurementSet=function(a){this._measurementTree={};this._size=0;this._order=[];a&&this.addAll(a)};
epiviz.measurements.MeasurementSet.prototype.add=function(a){a.dataprovider()in this._measurementTree||(this._measurementTree[a.dataprovider()]={});a.type()in this._measurementTree[a.dataprovider()]||(this._measurementTree[a.dataprovider()][a.type()]={});a.datasourceGroup()in this._measurementTree[a.dataprovider()][a.type()]||(this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()]={});a.datasource().id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()]||(this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()]=
{});if(a.id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()])return!1;this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()]={measurement:a,index:this._order.length};this._order.push({measurement:a,contained:!0});++this._size;return!0};
epiviz.measurements.MeasurementSet.prototype.remove=function(a){if(!(a.dataprovider()in this._measurementTree&&a.type()in this._measurementTree[a.dataprovider()]&&a.datasourceGroup()in this._measurementTree[a.dataprovider()][a.type()]&&a.datasource().id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()]&&a.id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()]))return!1;this._order[this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()].index].contained=
!1;delete this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()];--this._size;return!0};epiviz.measurements.MeasurementSet.prototype.addAll=function(a){if(!a||!a.size())return!1;var b=!1,c=this;a.foreach(function(a){c.add(a)&&(b=!0);return!1});return b};epiviz.measurements.MeasurementSet.prototype.removeAll=function(a){var b=!1,c=this;a.foreach(function(a){c.remove(a)&&(b=!0);return!1});return b};
epiviz.measurements.MeasurementSet.prototype.foreach=function(a,b){for(var c=this.iterator(),e=c.first(),d=0;null!==e&&(b&&!b(e)||!a(e,d));e=c.next(),++d);};epiviz.measurements.MeasurementSet.prototype.iterator=function(){return new epiviz.measurements.MeasurementSet.Iterator(this)};epiviz.measurements.MeasurementSet.prototype.subset=function(a){var b=new epiviz.measurements.MeasurementSet;this.foreach(function(a){b.add(a)},a);return b};
epiviz.measurements.MeasurementSet.prototype.map=function(a){var b=new epiviz.measurements.MeasurementSet;this.foreach(function(c){b.add(a(c))});return b};epiviz.measurements.MeasurementSet.prototype.size=function(){return this._size};
epiviz.measurements.MeasurementSet.prototype.contains=function(a){return a.dataprovider()in this._measurementTree&&a.type()in this._measurementTree[a.dataprovider()]&&a.datasourceGroup()in this._measurementTree[a.dataprovider()][a.type()]&&a.datasource().id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()]?a.id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()]:!1};epiviz.measurements.MeasurementSet.prototype.first=function(){return this.iterator().first()};
epiviz.measurements.MeasurementSet.prototype.get=function(a){if(a>=this._size||0>a)return null;if(this._size==this._order.length)return this._order[a].measurement;var b=null;this.foreach(function(c,e){return e==a?(b=c,!0):!1});return b};epiviz.measurements.MeasurementSet.prototype.toArray=function(){var a=Array(this._size);this.foreach(function(b,c){a[c]=b});return a};
epiviz.measurements.MeasurementSet.prototype.sorted=function(a){a=this.toArray().sort(a);var b=new epiviz.measurements.MeasurementSet;a.forEach(function(a){b.add(a)});return b};epiviz.measurements.MeasurementSet.prototype.raw=function(){var a=Array(this._size);this.foreach(function(b,c){a[c]=b.raw()});return a};
epiviz.measurements.MeasurementSet.prototype.split=function(a){var b={};this.foreach(function(c,e){var d=a(c),f=b[d];void 0==f&&(f=new epiviz.measurements.MeasurementSet,b[d]=f);f.add(c)});return b};epiviz.measurements.MeasurementSet.Iterator=function(a){this._parent=a;this._lastIndex=null};
epiviz.measurements.MeasurementSet.Iterator.prototype.first=function(){if(0==this._parent.size())return null;for(var a=0;a<this._parent._order.length;++a)if(this._parent._order[a].contained)return this._lastIndex=a,this._parent._order[a].measurement;throw Error("Inconsistent MeasurementSet with size() > 0 and no first element");};
epiviz.measurements.MeasurementSet.Iterator.prototype.next=function(){if(null===this._lastIndex)throw Error("Iterator.next() called before calling Iterator.first()");for(var a=this._lastIndex+1;a<this._parent._order.length;++a)if(this._parent._order[a].contained)return this._lastIndex=a,this._parent._order[a].measurement;this._lastIndex=this._parent._order.length;return null};epiviz.measurements.MeasurementHashtable=function(){this._size=0;this._measurementTree={};this._order=[]};
epiviz.measurements.MeasurementHashtable.prototype.put=function(a,b){if(this.contains(a)){var c=this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()];this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()]={key:a,value:b,index:c.index};this._order[c.index]={key:a,value:b,contained:!0}}else a.dataprovider()in this._measurementTree||(this._measurementTree[a.dataprovider()]={}),a.type()in this._measurementTree[a.dataprovider()]||
(this._measurementTree[a.dataprovider()][a.type()]={}),a.datasourceGroup()in this._measurementTree[a.dataprovider()][a.type()]||(this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()]={}),a.datasource().id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()]||(this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()]={}),this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()]={key:a,
value:b,index:this._order.length},this._order.push({key:a,value:b,contained:!0}),++this._size};epiviz.measurements.MeasurementHashtable.prototype.get=function(a){return this.contains(a)?this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()].value:null};
epiviz.measurements.MeasurementHashtable.prototype.remove=function(a){if(!this.contains(a))return!1;var b=this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()];delete this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()];this._order[b.index].contained=!1;--this._size;return!0};
epiviz.measurements.MeasurementHashtable.prototype.contains=function(a){return a.dataprovider()in this._measurementTree&&a.type()in this._measurementTree[a.dataprovider()]&&a.datasourceGroup()in this._measurementTree[a.dataprovider()][a.type()]&&a.datasource().id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()]?a.id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()]:!1};
epiviz.measurements.MeasurementHashtable.prototype.clear=function(){this._size=0;this._measurementTree={};this._order=[]};epiviz.measurements.MeasurementHashtable.prototype.isEmpty=function(){return 0==this._size};epiviz.measurements.MeasurementHashtable.prototype.size=function(){return this._size};epiviz.measurements.MeasurementHashtable.prototype.foreach=function(a,b){for(var c=this.iterator(),e=c.first(),d=0;null!==e&&(b&&!b(e.key)||!a(e.key,e.value,d));e=c.next(),++d);};
epiviz.measurements.MeasurementHashtable.prototype.first=function(){return this.iterator().first()};epiviz.measurements.MeasurementHashtable.prototype.sorted=function(a){var b=new epiviz.measurements.MeasurementHashtable,c=this._order.slice(0);c.sort(function(b,c){return a(b.key,c.key)});c.forEach(function(a){a.contained&&b.put(a.key,a.value)});return b};epiviz.measurements.MeasurementHashtable.prototype.keys=function(){var a=[];this._order.forEach(function(b){b.contained&&a.push(b.key)});return a};
epiviz.measurements.MeasurementHashtable.prototype.iterator=function(){return new epiviz.measurements.MeasurementHashtable.Iterator(this)};epiviz.measurements.MeasurementHashtable.prototype.toString=function(){var a={};this.foreach(function(b,c){for(var e=b.id(),d=2;e in a;)e=b.id()+" ("+d++ +")";a[e]=c});return JSON.stringify(a)};epiviz.measurements.MeasurementHashtable.Iterator=function(a){this._parent=a;this._lastIndex=null};
epiviz.measurements.MeasurementHashtable.Iterator.prototype.first=function(){if(0==this._parent.size())return null;for(var a=0;a<this._parent._order.length;++a)if(this._parent._order[a].contained)return this._lastIndex=a,{key:this._parent._order[a].key,value:this._parent._order[a].value};throw Error("Inconsistent MeasurementHashtable with size() > 0 and no first element");};
epiviz.measurements.MeasurementHashtable.Iterator.prototype.next=function(){if(null===this._lastIndex)throw Error("Iterator.next() called before calling Iterator.first()");for(var a=this._lastIndex+1;a<this._parent._order.length;++a)if(this._parent._order[a].contained)return this._lastIndex=a,{key:this._parent._order[a].key,value:this._parent._order[a].value};this._lastIndex=this._parent._order.length;return null};
epiviz.measurements.MeasurementsManager=function(){this._requestMeasurements=new epiviz.events.Event;this._measurementsAdded=new epiviz.events.Event;this._measurementsRemoved=new epiviz.events.Event;this._computedMeasurementsAdded=new epiviz.events.Event;this._computedMeasurementsRemoved=new epiviz.events.Event;this._measurements=new epiviz.measurements.MeasurementSet;this._computedMeasurements=new epiviz.measurements.MeasurementSet};epiviz.measurements.MeasurementsManager.prototype.initialize=function(){this._requestMeasurements.notify()};
epiviz.measurements.MeasurementsManager.prototype.onRequestMeasurements=function(){return this._requestMeasurements};epiviz.measurements.MeasurementsManager.prototype.onMeasurementsAdded=function(){return this._measurementsAdded};epiviz.measurements.MeasurementsManager.prototype.onMeasurementsRemoved=function(){return this._measurementsRemoved};epiviz.measurements.MeasurementsManager.prototype.onComputedMeasurementsAdded=function(){return this._computedMeasurementsAdded};
epiviz.measurements.MeasurementsManager.prototype.onComputedMeasurementsRemoved=function(){return this._computedMeasurementsRemoved};epiviz.measurements.MeasurementsManager.prototype.measurements=function(){return this._measurements};epiviz.measurements.MeasurementsManager.prototype.computedMeasurements=function(){return this._computedMeasurements};
epiviz.measurements.MeasurementsManager.prototype.addMeasurements=function(a){if(a&&a.size()){var b=this;this._measurements.addAll(a);var c=new epiviz.measurements.MeasurementSet;a.foreach(function(a){a.isComputed()&&(c.add(a),b._computedMeasurements.add(a))});this._measurementsAdded.notify(a);0<c.size()&&this._computedMeasurementsAdded.notify(c)}};
epiviz.measurements.MeasurementsManager.prototype.removeMeasurements=function(a){var b=this;this._measurements.removeAll(a);var c=new epiviz.measurements.MeasurementSet;a.foreach(function(a){a.isComputed()&&(c.add(a),b._computedMeasurements.remove(a))});this._measurementsRemoved.notify(a);0<c.size()&&this._computedMeasurementsRemoved.notify(c)};epiviz.measurements.MeasurementsManager.prototype.addMeasurement=function(a){var b=new epiviz.measurements.MeasurementSet;b.add(a);this.addMeasurements(b)};
epiviz.measurements.MeasurementsManager.prototype.removeMeasurement=function(a){var b=new epiviz.measurements.MeasurementSet;b.add(a);this.removeMeasurements(b)};
epiviz.data.DataProvider=function(a){this._id=a;this._requestAddSeqInfos=new epiviz.events.Event;this._requestRemoveSeqNames=new epiviz.events.Event;this._requestAddMeasurements=new epiviz.events.Event;this._requestRemoveMeasurements=new epiviz.events.Event;this._requestAddChart=new epiviz.events.Event;this._requestRemoveChart=new epiviz.events.Event;this._requestFlushCache=new epiviz.events.Event;this._requestClearDatasourceGroupCache=new epiviz.events.Event;this._requestNavigate=new epiviz.events.Event;
this._requestRedraw=new epiviz.events.Event;this._requestCurrentLocation=new epiviz.events.Event;this._requestPrintWorkspace=new epiviz.events.Event;this._requestSetChartSettings=new epiviz.events.Event;this._requestGetChartSettings=new epiviz.events.Event;this._requestGetAvailableCharts=new epiviz.events.Event};epiviz.data.DataProvider.prototype.id=function(){return this._id};epiviz.data.DataProvider.prototype.getData=function(a,b){b(epiviz.data.Response.fromRawObject({requestId:a.id(),data:null}))};
epiviz.data.DataProvider.prototype.onRequestAddSeqInfos=function(){return this._requestAddSeqInfos};epiviz.data.DataProvider.prototype.onRequestRemoveSeqNames=function(){return this._requestRemoveSeqNames};epiviz.data.DataProvider.prototype.onRequestAddMeasurements=function(){return this._requestAddMeasurements};epiviz.data.DataProvider.prototype.onRequestRemoveMeasurements=function(){return this._requestRemoveMeasurements};epiviz.data.DataProvider.prototype.onRequestAddChart=function(){return this._requestAddChart};
epiviz.data.DataProvider.prototype.onRequestRemoveChart=function(){return this._requestRemoveChart};epiviz.data.DataProvider.prototype.onRequestFlushCache=function(){return this._requestFlushCache};epiviz.data.DataProvider.prototype.onRequestClearDatasourceGroupCache=function(){return this._requestClearDatasourceGroupCache};epiviz.data.DataProvider.prototype.onRequestNavigate=function(){return this._requestNavigate};epiviz.data.DataProvider.prototype.onRequestRedraw=function(){return this._requestRedraw};
epiviz.data.DataProvider.prototype.onRequestCurrentLocation=function(){return this._requestCurrentLocation};epiviz.data.DataProvider.prototype.onRequestPrintWorkspace=function(){return this._requestPrintWorkspace};epiviz.data.DataProvider.prototype.onRequestGetChartSettings=function(){return this._requestGetChartSettings};epiviz.data.DataProvider.prototype.onRequestSetChartSettings=function(){return this._requestSetChartSettings};epiviz.data.DataProvider.prototype.onRequestGetAvailableCharts=function(){return this._requestGetAvailableCharts};
epiviz.data.DataProviderFactory=function(a){this._config=a;this._providers={};for(var b=this._size=0;b<this._config.dataProviders.length;++b){a=$.isArray(this._config.dataProviders[b])?this._config.dataProviders[b]:this._config.dataProviders[b].split(",");var c=epiviz.utils.evaluateFullyQualifiedTypeName(a[0]);c&&(a=epiviz.utils.applyConstructor(c,a.slice(1)),this._providers[a.id()]=a,++this._size)}a=new epiviz.data.EmptyResponseDataProvider;this._providers[a.id()]=a;++this._size;a=this._config.workspacesDataProvider.split(",");
b=epiviz.utils.evaluateFullyQualifiedTypeName(a[0]);this._workspacesDataProvider=epiviz.utils.applyConstructor(b,a.slice(1))};epiviz.data.DataProviderFactory.prototype.foreach=function(a){for(var b in this._providers)if(this._providers.hasOwnProperty(b)&&a(this._providers[b]))break};epiviz.data.DataProviderFactory.prototype.isEmpty=function(){return!this._size};epiviz.data.DataProviderFactory.prototype.size=function(){return this._size};
epiviz.data.DataProviderFactory.prototype.get=function(a){return a in this._providers?this._providers[a]:null};epiviz.data.DataProviderFactory.prototype.workspacesDataProvider=function(){return this._workspacesDataProvider};
epiviz.data.Cache=function(a,b){this._config=a;this._dataProviderFactory=b;this._data={};this._measurementRequestStackMap=new epiviz.measurements.MeasurementHashtable;this._measurementPendingRequestsMap=new epiviz.measurements.MeasurementHashtable;this._lastRequest=null;if(0<this._config.cacheUpdateIntervalMilliseconds){var c=this;this._intervalId=window.setTimeout(function(){c._clearUnneededData()},a.cacheUpdateIntervalMilliseconds)}};
epiviz.data.Cache.prototype.getData=function(a,b,c){var e=epiviz.measurements.Measurement.Type,d=this;this._lastRequest=epiviz.datatypes.GenomicRange.fromStartEnd(a.seqName(),a.start()-a.width(),a.end()+a.width());0<this._config.cacheUpdateIntervalMilliseconds&&(window.clearInterval(this._intervalId),this._intervalId=window.setTimeout(function(){d._clearUnneededData()},this._config.cacheUpdateIntervalMilliseconds));var f=this._extractComputedMeasurements(b);this._updateComputedMeasurementsData(f);
this._serveAvailableData(a,b,c);f=[a,epiviz.datatypes.GenomicRange.fromStartEnd(a.seqName(),Math.max(a.start()-a.width(),0),a.start()),new epiviz.datatypes.GenomicRange(a.seqName(),a.end(),a.width())];this._calcMeasurementNeededRanges(f,b).foreach(function(f,h){var g=d._measurementRequestStackMap.get(f);g||(g=new epiviz.data.RequestStack,d._measurementRequestStackMap.put(f,g));var l;if(0==h.length)l=epiviz.data.Request.emptyRequest(),g.pushRequest(l,function(){d._handleResponse(c,a,b,l,null,f,null)}),
g.serveData(new epiviz.data.Response(l.id(),{}));else for(var m=0;m<h.length;++m){l=f.type()==e.RANGE?epiviz.data.Request.getRows(f,h[m]):epiviz.data.Request.getValues(f,h[m]);(function(e,h){g.pushRequest(h,function(g){d._handleResponse(c,a,b,h,e,f,g)})})(h[m],l);var p=d._measurementPendingRequestsMap.get(f);p||(p={},d._measurementPendingRequestsMap.put(f,p));p[l.id()]=h[m];(d._dataProviderFactory.get(f.dataprovider())||d._dataProviderFactory.get(epiviz.data.EmptyResponseDataProvider.DEFAULT_ID)).getData(l,
function(a){g.serveData(a)})}})};
epiviz.data.Cache.prototype._handleResponse=function(a,b,c,e,d,f,n){d&&(d=f.type()==epiviz.measurements.Measurement.Type.RANGE?new epiviz.datatypes.GenomicRangeArray(f,d,n.globalStartIndex,n.values,n.useOffset):new epiviz.datatypes.FeatureValueArray(f,d,n.globalStartIndex,n.values),this._mergeData(f,d));d=this._extractComputedMeasurements(c);this._updateComputedMeasurementsData(d);(f=this._measurementPendingRequestsMap.get(f))&&delete f[e.id()];this._serveAvailableData(b,c,a)};
epiviz.data.Cache.prototype._serveAvailableData=function(a,b,c){var e=epiviz.measurements.Measurement.Type,d=this,f=[],n;for(n in b)if(b.hasOwnProperty(n)){var h=b[n],g=!0,l=new epiviz.measurements.MeasurementHashtable;(function(b){h.foreach(function(c){var f=d._data[c.datasourceGroup()];if(!f||!f.rowData()||c.type()==e.FEATURE&&!f.values(c))return g=!1,!0;var h=f.rowData(),f=c.type()==e.FEATURE?f.values(c):null,h=a.subtract(h.boundaries());if(h.length||f&&(h=a.subtract(f.boundaries()),h.length))return g=
!1,!0;b.put(c,new epiviz.datatypes.MeasurementGenomicDataWrapper(c,d._data[c.datasourceGroup()]));return!1})})(l);g&&(c(n,new epiviz.datatypes.MapGenomicData(l)),f.push(n))}for(c=0;c<f.length;++c)delete b[f[c]]};
epiviz.data.Cache.prototype._calcMeasurementNeededRanges=function(a,b){var c=epiviz.measurements.Measurement.Type,e=this,d=new epiviz.measurements.MeasurementHashtable,f;for(f in b)if(b.hasOwnProperty(f)){var n=new epiviz.measurements.MeasurementSet;(function(a){b[f].foreach(function(b){b.componentMeasurements().foreach(function(b){a.add(b);a.add(b.datasource())});b.isComputed()||a.add(b.datasource())})})(n);n.foreach(function(b){var f=null,f=e._data[b.datasourceGroup()];if(!f||b.type()==c.FEATURE&&
!f.values(b))f=a.slice(0);else{var l=b.type()==c.FEATURE?f.values(b):f.rowData();if(l)for(var f=[],l=l.boundaries(),m=0;m<a.length;++m)f=f.concat(a[m].subtract(l));else f=a.slice(0)}if(l=e._measurementPendingRequestsMap.get(b))for(m=0;m<f.length;++m)for(var n in l)if(l.hasOwnProperty(n)){var t=f[m].subtract(l[n]);Array.prototype.splice.apply(f,[m,1].concat(t));if(0==t.length){--m;break}if(m>=f.length)break}d.put(b,f)})}return d};
epiviz.data.Cache.prototype._extractComputedMeasurements=function(a){var b=new epiviz.measurements.MeasurementSet,c;for(c in a)a.hasOwnProperty(c)&&a[c].foreach(function(a){a.isComputed()&&b.add(a)});return b};epiviz.data.Cache.prototype._mergeData=function(a,b){var c=epiviz.measurements.Measurement.Type,e=this._data[a.datasourceGroup()];e||(e=new epiviz.datatypes.PartialSummarizedExperiment,this._data[a.datasourceGroup()]=e);a.type()==c.RANGE?e.addRowData(b):e.addValues(b)};
epiviz.data.Cache.prototype._clearUnneededData=function(){if(this._lastRequest){console.log(sprintf("Clearing data outside of range [%7s%10s%10s]",this._lastRequest.seqName(),this._lastRequest.start(),this._lastRequest.end()));var a={},b;for(b in this._data)this._data.hasOwnProperty(b)&&(a[b]=this._data[b].trim(this._lastRequest));this._data=a}};
epiviz.data.Cache.prototype._updateComputedMeasurementsData=function(a){var b=this,c=epiviz.datatypes.GenomicRange;a.foreach(function(a){var d=b._data[a.datasourceGroup()];if(!d)return!1;var f=a.componentMeasurements(),n=null,h=null,g=null;f.foreach(function(a){a=d.values(a);if(!a||!a.boundaries())return g=h=n=null,!0;if(null===g)return n=a.globalStartIndex(),h=a.size(),g=a.boundaries(),null===n;if(a.boundaries().seqName()!=g.seqName())return h=0,!0;if(n<a.globalStartIndex()){h-=a.globalStartIndex()-
n;if(0>h)return h=0,!0;n=a.globalStartIndex();var b=a.boundaries().start(),e=g.end();h>a.size()&&(h=a.size(),e=a.boundaries().end());g=c.fromStartEnd(g.seqName(),b,e)}else if(b=a.size()-n+a.globalStartIndex(),h>b){h=b;if(0>=h)return h=0,!0;g=c.fromStartEnd(g.seqName(),g.start(),a.boundaries().end())}return 0==h?!0:!1});if(null===g)return!1;var l=d.values(a);if(l&&(null===n||l.globalStartIndex()<n&&l.globalStartIndex()+l.size()>n+h))return!1;var m=new epiviz.measurements.MeasurementHashtable,p=null;
if(l&&l.size())return f.foreach(function(a){var b=d.values(a),c=[];if(null!==n)for(var e=n;e<l.globalStartIndex();++e)c.push(b.getByGlobalIndex(e));m.put(a,c)}),p=new epiviz.datatypes.FeatureValueArray(a,c.fromStartEnd(g.seqName(),g.start(),l.boundaries().start()),n,a.evaluateArr(m)),b._mergeData(a,p),m=new epiviz.measurements.MeasurementHashtable,f.foreach(function(a){var b=d.values(a),c=[];if(null!==n)for(var e=l.globalStartIndex()+l.size();e<n+h;++e)c.push(b.getByGlobalIndex(e));m.put(a,c)}),p=
new epiviz.datatypes.FeatureValueArray(a,c.fromStartEnd(g.seqName(),l.boundaries().end(),g.end()),l.globalStartIndex()+l.size(),a.evaluateArr(m)),b._mergeData(a,p),!1;m=new epiviz.measurements.MeasurementHashtable;f.foreach(function(a){var b=d.values(a),c=[];if(null!==n)for(var e=n;e<n+h;++e)c.push(b.getByGlobalIndex(e));m.put(a,c)});p=new epiviz.datatypes.FeatureValueArray(a,g,n,a.evaluateArr(m));b._mergeData(a,p);return!1})};
epiviz.data.Cache.prototype.flush=function(){this._data={};this._measurementRequestStackMap.foreach(function(a,b){b.clear()});this._measurementPendingRequestsMap.clear()};
epiviz.data.Cache.prototype.clearDatasourceGroupCache=function(a){delete this._data[a];this._measurementRequestStackMap.foreach(function(b,c){b.datasourceGroup()==a&&c.clear()});var b=[];this._measurementPendingRequestsMap.foreach(function(c,d){c.datasourceGroup()==a&&b.push(c)});for(var c=0;c<b.length;++c)this._measurementPendingRequestsMap.put(b[c],{})};
epiviz.data.DataManager=function(a,b){this._config=a;this._measurements=new epiviz.measurements.MeasurementSet;this._dataProviderFactory=b;this._cache=new epiviz.data.Cache(a,b);this._combinedRequestsStacks={};this._requestAddMeasurements=new epiviz.events.Event;this._requestRemoveMeasurements=new epiviz.events.Event;this._requestAddChart=new epiviz.events.Event;this._requestRemoveChart=new epiviz.events.Event;this._requestPrintWorkspace=new epiviz.events.Event;this._requestAddSeqInfos=new epiviz.events.Event;
this._requestRemoveSeqNames=new epiviz.events.Event;this._requestNavigate=new epiviz.events.Event;this._requestRedraw=new epiviz.events.Event;this._flushCache=new epiviz.events.Event;this._clearDatasourceGroupCache=new epiviz.events.Event;this._requestCurrentLocation=new epiviz.events.Event;this._requestGetChartSettings=new epiviz.events.Event;this._requestSetChartSettings=new epiviz.events.Event;this._requestGetAvailableCharts=new epiviz.events.Event;this._registerProviderAddMeasurements();this._registerProviderRemoveMeasurements();
this._registerProviderAddChart();this._registerProviderRemoveChart();this._registerProviderPrintWorkspace();this._registerProviderAddSeqInfos();this._registerProviderRemoveSeqNames();this._registerProviderNavigate();this._registerProviderRedraw();this._registerProviderFlushCache();this._registerProviderClearDatasourceGroupCache();this._registerProviderGetCurrentLocation();this._registerProviderGetChartSettings();this._registerProviderSetChartSettings();this._registerProviderGetAvailableCharts()};
epiviz.data.DataManager.prototype.onRequestAddMeasurements=function(){return this._requestAddMeasurements};epiviz.data.DataManager.prototype.onRequestRemoveMeasurements=function(){return this._requestRemoveMeasurements};epiviz.data.DataManager.prototype.onRequestAddChart=function(){return this._requestAddChart};epiviz.data.DataManager.prototype.onRequestRemoveChart=function(){return this._requestRemoveChart};epiviz.data.DataManager.prototype.onRequestPrintWorkspace=function(){return this._requestPrintWorkspace};
epiviz.data.DataManager.prototype.onRequestAddSeqInfos=function(){return this._requestAddSeqInfos};epiviz.data.DataManager.prototype.onRequestRemoveSeqNames=function(){return this._requestRemoveSeqNames};epiviz.data.DataManager.prototype.onRequestNavigate=function(){return this._requestNavigate};epiviz.data.DataManager.prototype.onRequestRedraw=function(){return this._requestRedraw};epiviz.data.DataManager.prototype.onClearDatasourceGroupCache=function(){return this._clearDatasourceGroupCache};
epiviz.data.DataManager.prototype.onFlushCache=function(){return this._flushCache};epiviz.data.DataManager.prototype.onRequestCurrentLocation=function(){return this._requestCurrentLocation};epiviz.data.DataManager.prototype.onRequestGetChartSettings=function(){return this._requestGetChartSettings};epiviz.data.DataManager.prototype.onRequestSetChartSettings=function(){return this._requestSetChartSettings};epiviz.data.DataManager.prototype.onRequestGetAvailableCharts=function(){return this._requestGetAvailableCharts};
epiviz.data.DataManager.prototype.getSeqInfos=function(a){var b=this,c=0,e={},d=[];this._dataProviderFactory.foreach(function(f){f.getData(epiviz.data.Request.getSeqInfos(),function(f){if(f=f.data())if(Array.isArray(f))for(g=0;g<f.length;++g)f[g][0]in e||(d.push(epiviz.datatypes.SeqInfo.fromRawObject(f[g])),e[f[g][0]]=!0);else for(var h=Object.keys(f),g=0;g<h.length;g++)h[g]in e||(d.push(epiviz.datatypes.SeqInfo.fromRawObject([h[g],f[h[g]][0],f[h[g]][1]])),e[h[g]]=!0);++c<b._dataProviderFactory.size()||
a(d.sort(epiviz.datatypes.SeqInfo.compare))})})};epiviz.data.DataManager.prototype.updateChartSettings=function(a){this._dataProviderFactory.foreach(function(b){if(b.id().includes("websocket-")){var c=null;null!=a.colorMap&&(c=a.colorMap._colors);b.updateChartSettings(epiviz.data.Request.createRequest({action:epiviz.data.Request.Action.SET_CHART_SETTINGS,settings:a.settings,colorMap:c,chartId:a.chartId}),function(){})}})};
epiviz.data.DataManager.prototype.getMeasurements=function(a){var b=this,c=new epiviz.measurements.MeasurementSet,e=0;this._dataProviderFactory.foreach(function(d){d.getData(epiviz.data.Request.getMeasurements(),function(f){if(f=f.data())for(var n=f.id?f.id.length||0:0,h=0;h<n;++h)c.add(new epiviz.measurements.Measurement(f.id[h],f.name[h],$.isArray(f.type)?f.type[h]:f.type,$.isArray(f.datasourceId)?f.datasourceId[h]:f.datasourceId,$.isArray(f.datasourceGroup)?f.datasourceGroup[h]:f.datasourceGroup,
d.id(),null,$.isArray(f.defaultChartType)?f.defaultChartType[h]:f.defaultChartType,f.annotation[h],$.isArray(f.minValue)?f.minValue[h]:f.minValue,$.isArray(f.maxValue)?f.maxValue[h]:f.maxValue,$.isArray(f.metadata)&&$.isArray(f.metadata[0])?f.metadata[h]:f.metadata));++e<b._dataProviderFactory.size()||a(c)})})};epiviz.data.DataManager.prototype.getData=function(a,b,c){this._config.useCache?this._cache.getData(a,b,c):this._getDataNoCache(a,b,c)};
epiviz.data.DataManager.prototype._getDataNoCache=function(a,b,c){var e=this,d={},f;for(f in b)if(b.hasOwnProperty(f)){var n=b[f].split(function(a){return a.dataprovider()}),h;for(h in n)if(n.hasOwnProperty(h)){var g=d[h];void 0==g?d[h]=n[h]:g.addAll(n[h])}}var l={};epiviz.utils.forEach(d,function(d,f){var g=d.split(function(a){return a.datasource().id()}),h=epiviz.data.Request.getCombined(g,a),n=e._combinedRequestsStacks[f];void 0==n&&(n=new epiviz.data.RequestStack,e._combinedRequestsStacks[f]=
n);n.pushRequest(h,function(d){var h={};epiviz.utils.forEach(g,function(b,c){var e=b.first().datasource(),f=d[c],g=new epiviz.datatypes.PartialSummarizedExperiment,l=f.globalStartIndex,e=new epiviz.datatypes.GenomicRangeArray(e,a,l,f.rows);g.addRowData(e);b.foreach(function(b){b=new epiviz.datatypes.FeatureValueArray(b,a,l,f.cols[b.id()]);g.addValues(b)});h[c]=g});l[f]=h;e._serveAvailableData(a,b,c,l)});(e._dataProviderFactory.get(f)||e._dataProviderFactory.get(epiviz.data.EmptyResponseDataProvider.DEFAULT_ID)).getData(h,
function(a){n.serveData(a)})})};epiviz.data.DataManager.prototype._serveAvailableData=function(a,b,c,e){var d=[];epiviz.utils.forEach(b,function(a,b){var h=!0,g=new epiviz.measurements.MeasurementHashtable;a.foreach(function(a){if(!(a.dataprovider()in e))return h=!1,!0;var b=new epiviz.datatypes.MeasurementGenomicDataWrapper(a,e[a.dataprovider()][a.datasource().id()]);g.put(a,b)});if(h){var l=new epiviz.datatypes.MapGenomicData(g);c(b,l);d.push(b)}});d.forEach(function(a){delete b[a]})};
epiviz.data.DataManager.prototype.getHierarchy=function(a,b){for(var c in a)if(a.hasOwnProperty(c))var e=a[c];var d=e.dataprovider;d||e.measurements.foreach(function(a){return a.dataprovider()?(d=a.dataprovider(),!0):!1});(this._dataProviderFactory.get(d)||this._dataProviderFactory.get(epiviz.data.EmptyResponseDataProvider.DEFAULT_ID)).getData(epiviz.data.Request.getHierarchy(e.datasourceGroup,e.customData),function(a){b(c,a.data())})};
epiviz.data.DataManager.prototype.propagateHierarchyChanges=function(a,b){for(var c in a)if(a.hasOwnProperty(c)){var e=a[c],d=e.dataprovider;d||e.measurements.foreach(function(a){return a.dataprovider()?(d=a.dataprovider(),!0):!1});var f=this._dataProviderFactory.get(d)||this._dataProviderFactory.get(epiviz.data.EmptyResponseDataProvider.DEFAULT_ID);(function(a,c,d){c.getData(epiviz.data.Request.propagateHierarchyChanges(d.datasourceGroup,d.customData.selection,d.customData.order,d.customData.selectedLevels),
function(e){setTimeout(function(){c.onRequestClearDatasourceGroupCache().notify({datasourceGroup:d.datasourceGroup,result:new epiviz.events.EventResult});c.onRequestRedraw().notify({result:new epiviz.events.EventResult});b(a,e.data())},0)})})(c,f,e)}};
epiviz.data.DataManager.prototype.getWorkspaces=function(a,b,c){var e=this._dataProviderFactory.workspacesDataProvider();if(!e)throw Error("Invalid data provider for workspaces (see Config.workspaceDataProvider)");e.getData(epiviz.data.Request.getWorkspaces(b,c),function(b){b=b.data();var c=[];if(b&&b.length)for(var e=0;e<b.length;++e)c.push({id:b[e].id,name:b[e].name,content:JSON.parse(b[e].content)});a(c)})};
epiviz.data.DataManager.prototype.saveWorkspace=function(a,b,c){var e=this._dataProviderFactory.workspacesDataProvider();if(!e)throw Error("Invalid data provider for workspaces (see Config.workspaceDataProvider)");e.getData(epiviz.data.Request.saveWorkspace(a,b),function(a){a=a.data();c(a)})};
epiviz.data.DataManager.prototype.deleteWorkspace=function(a){var b=this._dataProviderFactory.workspacesDataProvider();if(!b)throw Error("Invalid data provider for workspaces (see Config.workspaceDataProvider)");b.getData(epiviz.data.Request.deleteWorkspace(a),function(a){a.data()})};
epiviz.data.DataManager.prototype.search=function(a,b){var c=this,e=this._dataProviderFactory.size(),d=[];this._dataProviderFactory.foreach(function(f){f.getData(epiviz.data.Request.search(b,c._config.maxSearchResults),function(b){(b=b.data())&&epiviz.utils.arrayAppend(d,b);--e;e||a(d)})})};epiviz.data.DataManager.prototype.flushCache=function(){this._cache.flush();this._flushCache.notify()};
epiviz.data.DataManager.prototype.clearDatasourceGroupCache=function(a){this._cache.clearDatasourceGroupCache(a);this._clearDatasourceGroupCache.notify({datasourceGroup:a})};epiviz.data.DataManager.prototype._registerProviderAddMeasurements=function(){var a=this;this._dataProviderFactory.foreach(function(b){b.onRequestAddMeasurements().addListener(new epiviz.events.EventListener(function(b){a._requestAddMeasurements.notify(b)}))})};
epiviz.data.DataManager.prototype._registerProviderRemoveMeasurements=function(){var a=this;this._dataProviderFactory.foreach(function(b){b.onRequestRemoveMeasurements().addListener(new epiviz.events.EventListener(function(b){a._requestRemoveMeasurements.notify(b)}))})};epiviz.data.DataManager.prototype._registerProviderAddChart=function(){var a=this;this._dataProviderFactory.foreach(function(b){b.onRequestAddChart().addListener(new epiviz.events.EventListener(function(b){a._requestAddChart.notify(b)}))})};
epiviz.data.DataManager.prototype._registerProviderRemoveChart=function(){var a=this;this._dataProviderFactory.foreach(function(b){b.onRequestRemoveChart().addListener(new epiviz.events.EventListener(function(b){a._requestRemoveChart.notify(b)}))})};epiviz.data.DataManager.prototype._registerProviderPrintWorkspace=function(){var a=this;this._dataProviderFactory.foreach(function(b){b.onRequestPrintWorkspace().addListener(new epiviz.events.EventListener(function(b){a._requestPrintWorkspace.notify(b)}))})};
epiviz.data.DataManager.prototype._registerProviderAddSeqInfos=function(){var a=this;this._dataProviderFactory.foreach(function(b){b.onRequestAddSeqInfos().addListener(new epiviz.events.EventListener(function(b){for(var e=[],d=0;d<b.seqInfos.length;++d)e.push(epiviz.datatypes.SeqInfo.fromRawObject(b.seqInfos[d]));a._requestAddSeqInfos.notify({seqInfos:e,result:b.result})}))})};epiviz.data.DataManager.prototype._registerProviderRemoveSeqNames=function(){var a=this;this._dataProviderFactory.foreach(function(b){b.onRequestRemoveSeqNames().addListener(new epiviz.events.EventListener(function(b){a._requestRemoveSeqNames.notify(b)}))})};
epiviz.data.DataManager.prototype._registerProviderNavigate=function(){var a=this;this._dataProviderFactory.foreach(function(b){b.onRequestNavigate().addListener(new epiviz.events.EventListener(function(b){a._requestNavigate.notify(b)}))})};epiviz.data.DataManager.prototype._registerProviderRedraw=function(){var a=this;this._dataProviderFactory.foreach(function(b){b.onRequestRedraw().addListener(new epiviz.events.EventListener(function(b){a._requestRedraw.notify(b)}))})};
epiviz.data.DataManager.prototype._registerProviderClearDatasourceGroupCache=function(){var a=this;this._dataProviderFactory.foreach(function(b){b.onRequestClearDatasourceGroupCache().addListener(new epiviz.events.EventListener(function(b){a.clearDatasourceGroupCache(b.datasourceGroup);b.result.success=!0}))})};
epiviz.data.DataManager.prototype._registerProviderFlushCache=function(){var a=this;this._dataProviderFactory.foreach(function(b){b.onRequestFlushCache().addListener(new epiviz.events.EventListener(function(b){a.flushCache();b.result.success=!0}))})};epiviz.data.DataManager.prototype._registerProviderGetCurrentLocation=function(){var a=this;this._dataProviderFactory.foreach(function(b){b.onRequestCurrentLocation().addListener(new epiviz.events.EventListener(function(b){a._requestCurrentLocation.notify(b)}))})};
epiviz.data.DataManager.prototype._registerProviderSetChartSettings=function(){var a=this;this._dataProviderFactory.foreach(function(b){b.onRequestSetChartSettings().addListener(new epiviz.events.EventListener(function(b){a._requestSetChartSettings.notify(b)}))})};epiviz.data.DataManager.prototype._registerProviderGetChartSettings=function(){var a=this;this._dataProviderFactory.foreach(function(b){b.onRequestGetChartSettings().addListener(new epiviz.events.EventListener(function(b){a._requestGetChartSettings.notify(b)}))})};
epiviz.data.DataManager.prototype._registerProviderGetAvailableCharts=function(){var a=this;this._dataProviderFactory.foreach(function(b){b.onRequestGetChartSettings().addListener(new epiviz.events.EventListener(function(b){a._requestGetAvailableCharts.notify(b)}))})};epiviz.data.EmptyResponseDataProvider=function(){epiviz.data.DataProvider.call(this,epiviz.data.EmptyResponseDataProvider.DEFAULT_ID)};epiviz.data.EmptyResponseDataProvider.prototype=epiviz.utils.mapCopy(epiviz.data.DataProvider.prototype);
epiviz.data.EmptyResponseDataProvider.constructor=epiviz.data.EmptyResponseDataProvider;epiviz.data.EmptyResponseDataProvider.DEFAULT_ID="empty";
epiviz.data.EmptyResponseDataProvider.prototype.getData=function(a,b){var c=a.id();switch(a.get("action")){case epiviz.data.Request.Action.GET_ROWS:b(epiviz.data.Response.fromRawObject({data:{values:{id:null,start:[],end:[],strand:[],metadata:{my_metadata:[]}},globalStartIndex:null,useOffset:!1},requestId:c}));break;case epiviz.data.Request.Action.GET_VALUES:b(epiviz.data.Response.fromRawObject({data:{values:[],globalStartIndex:null},requestId:c}));break;case epiviz.data.Request.Action.GET_MEASUREMENTS:b(epiviz.data.Response.fromRawObject({requestId:a.id(),
data:{id:[],name:[],type:[],datasourceId:[],datasourceGroup:[],defaultChartType:[],annotation:[],minValue:[],maxValue:[],metadata:[]}}));break;case epiviz.data.Request.Action.GET_SEQINFOS:b(epiviz.data.Response.fromRawObject({requestId:a.id(),data:[]}));break;case epiviz.data.Request.Action.SEARCH:b(epiviz.data.Response.fromRawObject({requestId:a.id(),data:[]}));break;case epiviz.data.Request.Action.SAVE_WORKSPACE:b(epiviz.data.Response.fromRawObject({requestId:a.id(),data:[]}));break;case epiviz.data.Request.Action.DELETE_WORKSPACE:b(epiviz.data.Response.fromRawObject({requestId:a.id(),
data:[]}));break;case epiviz.data.Request.Action.GET_WORKSPACES:b(epiviz.data.Response.fromRawObject({requestId:a.id(),data:[]}));break;default:epiviz.data.DataProvider.prototype.getData.call(this,a,b)}};
epiviz.data.WebsocketDataProvider=function(a,b){epiviz.data.DataProvider.call(this,a||epiviz.data.WebsocketDataProvider.DEFAULT_ID);this._websocketHost=b;this._socket=null;this._useUI="true"!=epiviz.ui.WebArgsManager.WEB_ARGS.websocketNoUI;this._debug="true"==epiviz.ui.WebArgsManager.WEB_ARGS.debug;this._callbacks={};this._requestsStack=[];this._initialize()};epiviz.data.WebsocketDataProvider.prototype=epiviz.utils.mapCopy(epiviz.data.DataProvider.prototype);
epiviz.data.WebsocketDataProvider.constructor=epiviz.data.WebsocketDataProvider;epiviz.data.WebsocketDataProvider.DEFAULT_ID="websocket";
epiviz.data.WebsocketDataProvider.prototype._initialize=function(){if(this._websocketHost&&"None"!=this._websocketHost)try{this._socket=new WebSocket(this._websocketHost);this._log("WebSocket - status "+this._socket.readyState);var a=this;this._socket.onopen=function(){a._onSocketOpen()};this._socket.onmessage=function(b){a._onSocketMessage(b)};this._socket.onclose=function(){a._onSocketClose()}}catch(b){this._log(b.toString())}};
epiviz.data.WebsocketDataProvider.prototype._onSocketOpen=function(){for(var a=0;a<this._requestsStack.length;++a)this._socket.send(this._requestsStack[a]);this._requestsStack=[];this._registerAvailableCharts()};epiviz.data.WebsocketDataProvider.prototype._onSocketClose=function(){this._socket=null};epiviz.data.WebsocketDataProvider.prototype._sendMessage=function(a){this.connected()&&this._socket.readyState?this._socket.send(a):this._requestsStack.push(a)};
epiviz.data.WebsocketDataProvider.prototype._onSocketMessage=function(a){this._log("Local Controller Received: "+a.data);var b=JSON.parse(a.data);if(b.type==epiviz.data.MessageType.RESPONSE)a=epiviz.data.Response.fromRawObject(b),b=this._callbacks[a.id()],delete this._callbacks[a.id()],b(a);else if(b.type==epiviz.data.MessageType.REQUEST)switch(a=epiviz.data.Request.Action,b=epiviz.data.Request.fromRawObject(b),b.get("action")){case a.ADD_MEASUREMENTS:this._addMeasurements(b);break;case a.REMOVE_MEASUREMENTS:this._removeMeasurements(b);
break;case a.ADD_SEQINFOS:this._addSeqInfos(b);break;case a.REMOVE_SEQNAMES:this._removeSeqNames(b);break;case a.ADD_CHART:this._addChart(b);break;case a.REMOVE_CHART:this._removeChart(b);break;case a.CLEAR_DATASOURCE_GROUP_CACHE:this._clearDatasourceGroupCache(b);break;case a.FLUSH_CACHE:this._flushCache(b);break;case a.NAVIGATE:this._navigate(b);break;case a.REDRAW:this._redraw(b);break;case a.GET_CURRENT_LOCATION:this._getCurrentLocation(b);break;case a.WRITE_DEBUG_MSG:this._writeDebugMsg(b);break;
case a.PRINT_WORKSPACE:this._printWorkspace(b);break;case a.SET_CHART_SETTINGS:this._setChartSettings(b);break;case a.GET_CHART_SETTINGS:this._getChartSettings(b);break;case a.GET_AVAILABLE_CHARTS:this._getAvailableCharts(b)}};epiviz.data.WebsocketDataProvider.prototype._log=function(a){this._debug&&console.log(a)};epiviz.data.WebsocketDataProvider.prototype._fireEvent=function(a,b){this._useUI?a.notify(b):b.result.success=!0};
epiviz.data.WebsocketDataProvider.prototype.connected=function(){return null!=this._socket};epiviz.data.WebsocketDataProvider.prototype.getData=function(a,b){var c=JSON.stringify(a.raw());this._callbacks[a.id()]=b;this._sendMessage(c)};
epiviz.data.WebsocketDataProvider.prototype._addMeasurements=function(a){for(var b=new epiviz.events.EventResult,c=new epiviz.measurements.MeasurementSet,e=JSON.parse(a.get("measurements")),d=0;d<e.length;++d)c.add(new epiviz.measurements.Measurement(e[d].id,e[d].name,e[d].type,e[d].datasourceId,e[d].datasourceGroup,this.id(),null,e[d].defaultChartType,e[d].annotation,e[d].minValue,e[d].maxValue,e[d].metadata));this._fireEvent(this.onRequestAddMeasurements(),{measurements:c,result:b});a=new epiviz.data.Response(a.id(),
b);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._removeMeasurements=function(a){for(var b=new epiviz.events.EventResult,c=new epiviz.measurements.MeasurementSet,e=JSON.parse(a.get("measurements")),d=0;d<e.length;++d)c.add(new epiviz.measurements.Measurement(e[d].id,e[d].name,e[d].type,e[d].datasourceId,e[d].datasourceGroup,this.id(),null,e[d].defaultChartType,e[d].annotation,e[d].minValue,e[d].maxValue,e[d].metadata));this._fireEvent(this.onRequestRemoveMeasurements(),{measurements:c,result:b});a=new epiviz.data.Response(a.id(),
b);this._sendMessage(JSON.stringify(a.raw()))};epiviz.data.WebsocketDataProvider.prototype._addSeqInfos=function(a){var b=new epiviz.events.EventResult,c=JSON.parse(a.get("seqInfos"));this._fireEvent(this.onRequestAddSeqInfos(),{seqInfos:c,result:b});a=new epiviz.data.Response(a.id(),b);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._removeSeqNames=function(a){var b=new epiviz.events.EventResult,c=JSON.parse(a.get("seqNames"));this._fireEvent(this.onRequestRemoveSeqNames(),{seqNames:c,result:b});a=new epiviz.data.Response(a.id(),b);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._addChart=function(a){var b=new epiviz.events.EventResult,c,e,d;if(void 0!=a.get("measurements"))for(c=new epiviz.measurements.MeasurementSet,e=JSON.parse(a.get("measurements")),d=0;d<e.length;++d)c.add(new epiviz.measurements.Measurement(e[d].id,e[d].name,e[d].type,e[d].datasourceId,e[d].datasourceGroup,this.id(),null,e[d].defaultChartType,e[d].annotation,e[d].minValue,e[d].maxValue,e[d].metadata));e=a.get("datasource");d=a.get("datasourceGroup")||e;this._fireEvent(this.onRequestAddChart(),
{type:a.get("type"),visConfigSelection:new epiviz.ui.controls.VisConfigSelection(c,e,d),result:b});a=new epiviz.data.Response(a.id(),b);this._sendMessage(JSON.stringify(a.raw()))};epiviz.data.WebsocketDataProvider.prototype._removeChart=function(a){var b=a.get("chartId"),c=new epiviz.events.EventResult;this._fireEvent(this.onRequestRemoveChart(),{id:b,result:c});a=new epiviz.data.Response(a.id(),c);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._clearDatasourceGroupCache=function(a){var b=new epiviz.events.EventResult;this._fireEvent(this.onRequestClearDatasourceGroupCache(),{datasourceGroup:a.get("datasourceGroup"),result:b});a=new epiviz.data.Response(a.id(),b);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._flushCache=function(a){var b=new epiviz.events.EventResult;this._fireEvent(this.onRequestFlushCache(),{result:b});a=new epiviz.data.Response(a.id(),b);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._navigate=function(a){var b=JSON.parse(a.get("range")),c=new epiviz.events.EventResult;this._fireEvent(this.onRequestNavigate(),{range:epiviz.datatypes.GenomicRange.fromStartEnd(b.seqName,b.start,b.end),result:c});a=new epiviz.data.Response(a.id(),c);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._redraw=function(a){var b=new epiviz.events.EventResult;this._fireEvent(this.onRequestRedraw(),{result:b});a=new epiviz.data.Response(a.id(),b);this._sendMessage(JSON.stringify(a.raw()))};epiviz.data.WebsocketDataProvider.prototype._getCurrentLocation=function(a){var b=new epiviz.events.EventResult;this._fireEvent(this.onRequestCurrentLocation(),{result:b});a=new epiviz.data.Response(a.id(),b);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._writeDebugMsg=function(a){var b=a.get("msg"),c=document.createElement("pre");c.innerHTML=b.replace(/&/g,"&amp;").replace(/\\</g,"&lt;");a=new epiviz.data.Response(a.id(),{msg:"that msg"});document.getElementById("chart-container").appendChild(c);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._printWorkspace=function(a){var b=a.get("chartId"),c=a.get("fileName"),e=a.get("fileType"),d=new epiviz.events.EventResult;this._fireEvent(this.onRequestPrintWorkspace(),{chartId:b,fileName:c,fileType:e,result:d});a=new epiviz.data.Response(a.id(),d);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._setChartSettings=function(a){var b=a.get("chartId"),c=a.get("settings"),e=a.get("colorMap"),e=new epiviz.ui.charts.ColorPalette(e),d=new epiviz.events.EventResult;this._fireEvent(this.onRequestSetChartSettings(),{chartId:b,settings:c,colorMap:e,result:d});a=new epiviz.data.Response(a.id(),d);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._getChartSettings=function(a){var b=a.get("chartId"),c=new epiviz.events.EventResult;this._fireEvent(this.onRequestGetChartSettings(),{chartId:b,result:c});a=new epiviz.data.Response(a.id(),c);this._sendMessage(JSON.stringify(a.raw()))};epiviz.data.WebsocketDataProvider.prototype._getAvailableCharts=function(a){var b=new epiviz.events.EventResult;this._fireEvent(this.onRequestGetChartSettings(),{result:b});a=new epiviz.data.Response(a.id(),b);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._registerAvailableCharts=function(){var a=new epiviz.events.EventResult;this._fireEvent(this.onRequestGetChartSettings(),{result:a});request=epiviz.data.Request.createRequest({action:epiviz.data.Request.Action.REGISTER_CHART_TYPES,data:a.value});a=JSON.stringify(request.raw());this._callbacks[request.id()]=function(a){};this._sendMessage(a)};
epiviz.data.WebsocketDataProvider.prototype.updateChartSettings=function(a,b){var c=JSON.stringify(a.raw());this._callbacks[a.id()]=b;this._sendMessage(c)};epiviz.data.WebServerDataProvider=function(a,b){epiviz.data.DataProvider.call(this,a||epiviz.Config.DEFAULT_DATA_PROVIDER_ID);this._serverEndpoint=b||epiviz.data.WebServerDataProvider.DEFAULT_SERVER_ENDPOINT};epiviz.data.WebServerDataProvider.prototype=epiviz.utils.mapCopy(epiviz.data.DataProvider.prototype);
epiviz.data.WebServerDataProvider.constructor=epiviz.data.WebServerDataProvider;epiviz.data.WebServerDataProvider.DEFAULT_SERVER_ENDPOINT="data/main.php";
epiviz.data.WebServerDataProvider.prototype.getData=function(a,b){if(!a.isEmpty())if(a.method()==epiviz.data.Request.Method.GET){var c=sprintf("%s?%s",this._serverEndpoint,a.joinArgs());epiviz.data.WebServerDataProvider.makeGetRequest(c,function(a){b(epiviz.data.Response.fromRawObject(a))})}else epiviz.data.WebServerDataProvider.makePostRequest(this._serverEndpoint,a.joinArgs(),function(a){b(epiviz.data.Response.fromRawObject(a))})};
epiviz.data.WebServerDataProvider.makeGetRequest=function(a,b){var c=$.ajax({type:"get",url:a,dataType:"json",async:!0,cache:!1,processData:!0});c.done(function(a){b(a)});c.fail(function(a,b,c){});c.always(function(){})};epiviz.data.WebServerDataProvider.makePostRequest=function(a,b,c){a=$.ajax({type:"post",url:a,data:b,dataType:"json",async:!0,cache:!1,processData:!0});a.done(function(a,b,f){c(a)});a.fail(function(a,b,c){console.error("The following error occured: "+b,c)});a.always(function(){})};
epiviz.data.MetagenomicsDataProvider=function(){epiviz.data.DataProvider.call(this,"metagenomics-provider");this._selectedValues=this._values=[[1.431779586,1.192413264,0,0,5.246275888,0,0,0,0,0,0,0,0,0,5.176956182,0,0,0,5.155970401,6.190149838,0,0,0,0,0,0,0,0,3.698665367,0,2.13227898,0,2.211623187,2.367619226,1.61041097,0,5.385994425,4.139182844,4.372482843,0,0,2.878908183,2.91052254,2.301374909,0,2.952062239,0,0,0,0,0,0,0,0,0,0,6.122190562,0,3.358854664,0,1.385653692,2.766109149,6.099454438,4.340878996,
5.939634652,2.959707294,0,3.380142709,0,5.795596951,5.937850648,4.856588768,0,0,1.674904626,2.854876154,0,1.191371277,4.270740369,0,1.586888663,0,0,0,0,2.897552731,0,0,0,0,3.332623469,0,0,0,0,0,0,0,0,1.284976959,0,0,0,0,0,2.479401066,0,0,0,0,1.377092695,0,0,0,3.135561463],[3.483719988,1.836204539,0,1.992995304,5.402734039,1.569736026,0,0,4.371867824,0,0,0,1.262193429,3.863871272,6.051516389,0,0,0,3.64974824,7.298095577,0,0,0,0,0,0,0,0,5.042530097,0,4.52334967,0,3.417546061,3.220604739,0,0,3.583640746,
4.911014295,2.672729483,0,0,1.640918907,4.057049171,0,0,4.87292166,0,0,0,2.555337332,0,0,0,0,0,0,2.801189549,4.326546321,5.672425342,0,7.342433164,4.708466901,8.38125063,4.943561744,5.69886844,5.914613168,1.935406473,4.545532356,0,5.568781432,5.770864453,5.786486697,0,0,1.674904626,5.633094879,0,2.891124637,6.337477197,0,3.703106027,0,3.658543633,3.635588574,0,5.110546454,0,2.348450405,0,3.883764286,5.793023474,0,0,1.461730735,0,0,0,0,4.110953646,5.759180328,0,0,0,4.066891048,0,6.762235684,0,0,2.184629194,
1.844254505,4.444055644,0,5.116207142,3.834609931,6.918120174],[1.431779586,1.192413264,0,0,6.594730277,0,0,0,0,0,0,0,0,0,6.105158342,0,0,0,5.401020298,5.531926921,0,0,0,0,0,0,0,0,2.661346394,0,2.13227898,0,2.211623187,0,1.61041097,0,2.513383648,4.444642108,0,1.322794318,0,1.640918907,2.635783143,1.567855244,0,5.224508802,0,0,0,0,3.273593502,0,0,0,0,0,6.122190562,1.450539436,5.956779471,0,0,1.5529849,5.710154873,6.253733669,7.33429437,4.628121119,0,4.470957872,0,6.318097687,5.364607625,5.424856331,
0,0,0,3.879285317,1.255175933,1.834870601,5.412691363,0,3.172492646,0,1.554826783,0,0,4.042983171,0,0,0,1.338596694,5.221012467,0,0,1.461730735,0,0,1.797115738,0,3.658543633,1.953661285,0,0,0,2.405446283,0,3.880683284,0,0,0,0,2.885530704,0,2.381429107,0,4.299507612],[0,0,0,1.316327062,3.811828399,0,0,0,0,0,0,0,0,0,3.761584641,0,0,0,1.406082194,3.945166829,0,0,0,0,0,0,0,0,4.085653677,0,1.4287038,0,1.144473079,3.220604739,0,0,0,2.986448755,1.481358206,1.322794318,0,1.640918907,3.141217906,0,0,1.231253532,
0,0,0,0,0,0,0,0,0,0,1.994606741,0,3.598259323,0,4.559531286,3.861920818,7.326065032,3.286373665,4.443256343,2.959707294,0,2.179323699,0,2.819792025,4.006780657,3.522245428,0,0,0,2.24508439,1.916065792,1.191371277,2.93651056,0,2.324239181,0,2.285688951,1.94753258,0,1.195550809,0,0,0,0,4.509606186,0,0,3.526859546,0,0,0,0,0,3.032789935,0,0,0,2.405446283,0,2.975444667,0,0,3.016531724,0,0,0,4.46287892,0,4.780297015],[3.687570256,0,0,2.451788443,2.911066272,0,0,0,0,0,0,0,0,2.134165238,4.216294965,0,0,0,
0,1.612405897,0,0,0,0,0,0,0,0,0,0,0,0,1.774547779,0,0,0,0,0,0,0,0,0,0,0,0,2.334318467,0,0,0,0,0,0,0,0,0,0,0,3.893829897,2.712718048,0,2.079226691,4.202270685,4.808746813,2.644765483,0,4.296021802,1.935406473,2.512450001,0,1.594645054,4.279876905,3.284108206,1.590756464,0,0,1.804782814,1.255175933,1.191371277,2.93651056,0,1.586888663,0,2.285688951,0,0,3.797347749,0,1.241386551,0,1.338596694,4.389821626,0,0,1.461730735,0,0,0,0,3.902410173,3.266140317,0,0,0,0,0,5.045993892,0,1.358928018,5.557633431,
3.132909221,2.885530704,0,3.526859546,0,4.511395522],[0,6.16378224,0,1.316327062,1.666262603,3.149587113,0,0,5.651369874,4.243152632,0,0,0,3.155361395,6.66537163,1.554826783,2.992869351,0,0,6.344241104,0,0,0,0,2.350033433,0,0,0,4.390486707,0,4.413090928,0,5.591424995,3.596422408,0,2.212993723,5.679071268,4.021076095,5.775141191,1.322794318,0,3.98463569,3.939376164,0,0,2.952062239,0,0,0,0,0,0,0,0,0,0,1.994606741,3.272846047,3.358854664,0,3.797347749,3.127128728,6.619079845,2.170766959,0,3.481491606,
0,3.010569242,0,2.819792025,4.707393819,1.458514165,0,0,0,2.854876154,0,0,2.113629503,0,2.324239181,0,1.554826783,0,0,1.840219556,0,0,0,1.338596694,0,0,0,0,0,0,0,0,0,1.953661285,0,0,0,0,1.864734062,1.717354877,0,0,0,0,0,0,1.634715536,1.410544518,1.354808925],[4.168154907,4.247537068,0,1.316327062,5.609580256,1.569736026,0,0,0,0,1.28620039,0,1.262193429,2.733293055,5.814457673,0,0,0,4.686639201,5.397538194,0,0,0,0,0,0,0,0,0,0,2.603155617,0,2.546614229,0,0,0,3.919218828,5.314013565,1.481358206,1.322794318,
0,0,4.361537796,2.785322386,0,5.418830035,0,0,0,1.781999348,0,0,0,0,0,0,8.323743779,2.159049313,6.157253354,0,3.18023001,0,4.808746813,4.460464862,5.203555779,3.244061423,0,3.674088391,0,5.143370329,4.509413633,4.45805522,0,0,1.674904626,3.084284864,0,1.834870601,4.140691561,0,0,0,3.864522096,0,0,4.744508356,0,0,0,1.338596694,4.259183612,0,0,0,0,0,0,0,1.733606582,2.408805546,0,0,0,1.950591407,0,1.717354877,0,2.046103514,0,0,2.885530704,1.614406279,0,1.410544518,0],[0,1.192413264,0,0,4.019469864,2.303636946,
0,0,0,0,0,0,0,0,3.093845517,0,0,0,0,1.612405897,0,0,0,0,0,0,0,0,2.32039045,0,0,0,0,0,0,0,0,1.914596325,0,0,0,0,2.635783143,2.301374909,0,1.885737479,0,0,0,0,0,0,0,0,0,0,0,1.450539436,1.511899039,0,4.09837174,5.162542291,5.175330384,1.46012053,0,4.165843825,0,3.207157908,0,1.594645054,4.149781155,3.726587359,0,0,0,2.24508439,0,1.834870601,2.93651056,0,4.250663922,0,1.554826783,0,0,1.195550809,0,1.241386551,0,1.338596694,3.776543493,0,0,2.172734535,0,0,0,0,1.733606582,2.408805546,0,0,0,1.950591407,
1.214748986,3.637105643,0,0,3.016531724,0,2.068632354,0,4.59442283,0,3.37097252],[0,0,0,1.316327062,0,0,0,0,0,0,0,0,0,0,0,4.204912301,1.731263898,5.895075687,2.104447385,0,0,0,2.065128811,0,0,0,4.998802577,4.985265729,0,1.969178823,0,0,0,2.98819618,0,5.973110282,0,1.254014401,1.481358206,0,0,0,0,0,6.783920221,0,4.485860075,7.116079322,6.455458592,6.009316582,4.902157249,7.090579488,8.457444348,4.308067937,0,9.670062403,0,0,0,0,0,0,0,0,0,0,4.560645878,0,7.26890038,0,2.590991323,0,1.590756464,3.152109798,
6.398031074,0,4.022952592,1.191371277,0,1.377092695,0,5.109341881,0,0,0,0,2.632106894,3.199364361,3.679313849,2.83110867,0,3.533813815,4.660580583,0,5.325751405,4.401509522,0,2.963977331,0,0,0,2.68589141,4.656100179,0,0,0,0,0,0,0,0,0,1.634715536,0,0],[0,0,2.558261645,0,0,0,3.37097252,0,0,0,0,0,0,0,0,1.554826783,0,0,0,0,0,4.717893295,3.780189712,2.998738351,0,0,4.783910899,5.646155588,1.221294271,4.318348466,0,0,0,1.916065792,0,4.26166757,0,1.254014401,0,2.808592225,0,0,0,0,2.754273197,0,4.485860075,
5.206648839,3.877609802,5.488721907,3.650844232,4.926557629,7.621145557,3.3791203,0,6.894968358,0,0,0,0,0,0,0,0,0,0,0,0,3.711139607,0,0,0,1.590756464,0,3.580737915,0,1.255175933,1.834870601,0,0,0,3.605634704,0,0,0,0,4.326546321,4.750653296,2.303636946,1.338596694,0,1.866117748,5.226402442,0,4.545126266,2.122906148,0,2.963977331,0,0,0,0,3.046826728,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2.285688951,0,4.919116898,1.406082194,0,0,0,2.8815524,0,0,0,2.439564301,3.350844299,0,1.969178823,
0,0,0,1.255175933,0,4.512111935,0,1.254014401,0,0,0,0,0,0,5.365618534,0,2.02080583,6.186981576,5.395607493,3.056075924,4.408114953,5.586729427,5.85052519,3.3791203,0,8.827870296,0,0,0,2.172734535,0,0,0,0,0,0,1.935406473,0,6.977279923,0,0,0,2.814800039,3.681934901,6.06154884,0,4.84495056,1.834870601,0,1.377092695,0,3.810996399,0,0,0,1.195550809,3.510786446,2.348450405,4.370515798,0,0,2.653290576,6.039518498,0,6.088292283,5.584357216,0,2.137949557,0,0,3.437769124,3.569195185,3.046826728,0,0,0,0,0,0,
0,0,0,0,0,0],[7.166058622,5.562929062,0,0,0,1.569736026,0,0,0,3.317392333,0,0,0,0,0,0,2.495790119,0,3.64974824,7.94166956,4.09837174,0,0,4.45805522,0,0,0,0,3.83951414,0,3.241876309,2.894869795,5.662114442,1.255175933,5.529025621,0,1.361689044,10.31811713,5.399808132,0,0,0,5.766993135,0,0,10.35642231,0,0,0,3.056075924,3.273593502,0,0,0,0,0,0,7.886927515,6.57658932,0,6.068864939,0,0,5.742529189,0,0,0,3.207157908,0,0,0,7.683313658,0,0,0,4.472293286,2.711021318,1.191371277,1.413536412,0,7.18277747,0,
0,3.934112064,0,9.499010008,0,0,3.438628157,11.3419642,7.453095073,0,0,0,3.605634704,0,0,0,9.323133332,9.025457813,0,0,0,6.063989916,10.09991753,0,0,1.358928018,0,3.132909221,0,0,6.339850003,5.962545954,6.5132172],[2.607242384,1.192413264,0,0,2.418952549,5.335214496,0,0,0,0,4.896125461,0,4.45805522,1.090815163,3.466007268,0,4.451650978,0,1.406082194,0,0,0,0,0,0,0,0,0,2.32039045,3.662411471,2.957578397,4.620888419,2.211623187,6.048481206,0,0,0,1.914596325,0,1.322794318,2.017487427,1.640918907,1.851024161,
2.301374909,0,3.383215216,0,0,0,0,0,0,0,0,3.96333911,0,0,0,2.233797185,0,0,0,0,2.170766959,3.383215216,0,0,3.010569242,0,1.594645054,0,2.998738351,0,0,0,1.167924869,0,0,1.413536412,1.377092695,1.586888663,0,5.165257592,5.25334101,5.189186904,0,0,5.796241065,2.303636946,6.60481673,0,0,0,0,0,0,0,0,0,3.643192729,0,0,0,0,2.926952007,7.290999429,0,3.141551507,0,5.115980262,6.055178464,0,6.448170658,0,3.37097252],[0,4.247537068,0,7.627324571,4.638829373,0,0,0,0,0,0,0,3.764198849,1.090815163,9.297238893,
0,0,0,1.406082194,0,0,0,0,0,0,0,0,0,3.542563074,0,5.0508891,4.852847605,7.502930506,0,1.61041097,2.212993723,8.139575446,0,2.196679237,4.555970876,0,5.753981571,4.533829712,0,0,8.115201432,0,0,0,0,0,0,0,0,0,0,3.99325527,4.052930578,8.251263226,0,3.797347749,1.5529849,0,1.46012053,1.529467388,5.598651855,1.935406473,7.59947533,0,4.537434131,4.279876905,8.078048143,0,0,2.429204831,3.45615723,2.711021318,3.494361381,6.276852113,0,0,0,6.641505703,0,0,4.812332598,0,0,0,0,6.461304882,0,0,0,0,0,0,0,1.733606582,
3.466949588,0,0,0,4.066891048,3.532071506,6.531898878,0,1.358928018,0,0,2.534144363,0,1.634715536,0,2.040985264],[4.417752244,4.430656786,0,6.590662342,5.161186664,2.787748346,0,0,0,0,0,0,1.262193429,3.155361395,10.02054726,0,0,0,4.940306328,3.945166829,0,0,0,0,0,0,0,0,2.936928025,0,6.171246663,2.40377094,5.943281103,1.255175933,3.494023898,0,0,5.314013565,2.196679237,3.088736519,0,2.388819979,8.095345442,1.567855244,0,7.35819207,0,0,0,2.555337332,3.273593502,0,0,0,0,0,5.20245281,4.75470228,9.430220215,
0,2.545649577,3.127128728,6.658211483,7.210528482,11.02122881,6.173655965,2.733293055,6.960342713,0,10.04653152,6.735083971,7.155915068,0,1.571621765,0,6.013261752,3.220604739,4.245781516,5.761407417,1.377092695,2.809830944,0,3.418179486,3.934112064,0,7.222911731,0,0,0,0,9.867046044,0,0,0,0,0,0,0,5.06859083,6.373240186,0,0,0,4.066891048,3.357133596,8.094400839,0,3.579495955,3.540808171,1.844254505,6.524413414,0,6.943748633,8.296608074,4.40933806],[2.136055426,4.037748079,6.262933358,0,3.811828399,
6.919801759,0,0,0,2.455308789,6.188686675,2.926124712,5.998580568,6.127768499,5.748563718,0,3.655458089,0,0,0,0,0,0,0,0,0,0,0,3.83951414,6.290193531,3.683059916,8.256071986,2.211623187,4.84495056,2.35241283,0,3.583640746,0,3.759667491,3.524879916,3.879657956,3.535209466,0,2.301374909,0,4.937796138,0,0,0,1.781999348,3.273593502,0,0,0,0,0,0,3.272846047,2.712718048,0,0,1.5529849,1.888578717,0,1.529467388,2.134165238,0,1.121990524,2.331205908,0,3.84803047,0,0,0,0,1.804782814,0,1.834870601,0,0,2.324239181,
0,3.418179486,0,2.079226691,1.840219556,0,8.13274431,1.569736026,8.882484137,1.493074462,0,0,0,0,0,1.797115738,0,0,3.643192729,0,0,0,4.294594419,7.783238308,11.1138092,0,3.756976488,2.184629194,9.208657654,0,0,4.46287892,0,5.202634978],[2.136055426,6.715798815,0,6.374469421,3.277337944,2.787748346,0,0,1.792044962,3.317392333,0,0,0,1.704821959,8.698957643,0,0,0,7.159005373,4.794362379,0,0,2.065128811,0,5.243564207,0,0,0,5.355676609,0,3.683059916,0,6.79661711,4.69851443,2.839992687,4.26166757,8.225319066,
9.567229277,5.203290985,1.322794318,0,8.827786737,7.798586914,0,0,5.418830035,0,0,0,4.175777728,3.949615895,0,0,0,0,0,4.636949199,2.632106894,5.672425342,0,2.545649577,4.907541568,7.726632416,6.604697646,4.443256343,3.863871272,1.935406473,4.12685628,0,8.766010155,7.439035579,6.112321025,0,0,0,1.167924869,3.220604739,3.319889474,6.307483081,1.377092695,4.95699151,0,0,0,0,6.512899724,0,0,0,3.111909342,2.688101136,0,0,0,0,0,1.797115738,0,3.902410173,4.584271389,0,0,0,3.02915668,0,0,0,2.046103514,3.016531724,
2.62792129,1.377092695,1.614406279,1.634715536,1.410544518,2.50408572],[0,8.24954917,0,3.079218485,7.152835931,0,0,0,0,0,7.074815273,0,1.262193429,6.031368279,0,0,0,0,2.104447385,5.4662968,0,0,0,0,6.374469421,0,0,0,5.761878745,0,3.683059916,3.5520836,9.072883619,0,1.61041097,0,0,4.248348124,8.733798954,0,0,0,7.798586914,0,0,4.87292166,0,0,0,3.427082841,0,0,0,0,4.517137731,0,0,2.632106894,5.17732725,0,5.760907699,0,0,1.46012053,2.735603919,8.297188307,1.935406473,3.010569242,0,0,6.223071923,7.120101904,
0,0,3.823534849,5.596384969,2.98819618,3.121377237,8.006968945,1.377092695,9.662880605,0,0,0,1.385653692,4.598472787,0,0,0,7.161906168,0,0,0,0,0,0,0,0,1.733606582,4.894120843,0,0,0,0,2.926952007,0,0,0,3.016531724,0,0,0,8.858471847,0,3.573305055],[0,0,0,1.992995304,4.200951897,0,0,0,0,0,0,0,4.710107996,1.090815163,4.399205452,0,0,0,3.446387271,0,0,0,0,0,0,0,0,0,1.873071327,0,0,0,2.546614229,0,1.61041097,0,0,0,1.481358206,0,0,0,2.29611755,0,0,6.57500401,0,0,0,0,0,0,0,0,0,0,1.994606741,3.893829897,4.286771649,
0,3.955696773,0,3.562036104,2.170766959,3.8285856,5.993490151,0,5.084964667,0,3.472619051,2.121043177,4.064733345,0,0,0,3.282169857,2.711021318,1.191371277,7.920439558,0,0,0,7.031714558,0,0,3.656828487,0,0,0,0,3.571590925,0,0,1.461730735,0,0,6.874509697,0,1.733606582,4.962197967,0,0,0,5.593292122,0,5.547406345,0,2.046103514,0,0,0,1.614406279,0,2.109945405,2.040985264],[3.866150632,3.920180613,0,5.312815342,6.422613285,3.679313849,0,0,0,0,0,0,0,4.924980206,7.658247372,0,0,0,2.104447385,4.562776343,
2.079226691,0,0,0,0,0,0,0,1.221294271,0,1.4287038,0,6.442220582,5.709224853,2.839992687,0,0,3.418903812,4.602735444,1.322794318,0,2.388819979,1.204003557,1.567855244,0,6.037602452,0,0,0,0,0,0,0,0,0,0,2.801189549,8.63619108,4.648124521,0,8.475079652,7.514265748,7.529694344,4.859026111,0,7.745232773,5.003307476,6.460395665,0,4.26166757,7.879619164,7.991502025,0,2.305904344,2.921997488,6.790846122,4.141069016,3.918449926,6.337477197,2.068632354,6.269637347,0,4.204912301,0,0,6.553102814,0,2.348450405,
0,4.485860075,9.83873207,0,0,1.461730735,0,0,0,0,2.995800011,8.415814604,0,0,0,6.442278134,1.864734062,9.185459486,0,5.209209265,11.75590855,5.219920851,6.420626178,5.087025329,7.474453122,1.410544518,3.573305055],[6.965078686,2.618564793,0,1.992995304,10.59290385,0,0,0,0,0,3.802156015,0,1.924937051,5.300785568,5.995802653,0,1.731263898,1.871675903,5.955501257,5.531926921,2.897552731,0,0,0,0,0,0,0,2.661346394,0,7.611655227,2.40377094,5.02134636,0,3.735557761,0,0,5.038083001,5.45978414,0,0,1.640918907,
4.057049171,0,0,8.594118334,0,0,0,3.056075924,1.959834467,0,0,0,0,0,5.516523261,7.356774251,8.013503616,0,3.18023001,0,5.376448084,8.188430789,5.939634652,6.96265097,1.935406473,6.674919197,0,7.363139212,4.279876905,6.183453199,0,0,2.429204831,6.401581783,3.596422408,4.666202349,8.657004791,0,5.730754292,0,7.010186538,0,0,7.409664666,0,0,0,5.993020597,8.605052591,1.866117748,0,7.573447879,0,0,6.325672809,0,8.570120461,7.461785195,0,0,2.546614229,5.755117139,3.828838673,7.111654959,0,5.841420387,2.184629194,
5.920900463,6.249442918,2.845102004,3.976074161,2.932344535,4.511395522],[1.431779586,7.359653593,0,3.991238804,2.418952549,1.569736026,0,0,0,0,1.28620039,0,0,4.489859297,8.791850058,0,0,0,7.175568077,6.062717992,0,0,0,0,0,0,0,0,0,0,6.136969432,2.40377094,5.517092631,1.255175933,5.529025621,0,1.361689044,9.483173757,6.110621289,0,0,0,7.550290267,6.661015065,0,4.804992012,0,0,0,1.781999348,1.959834467,0,0,0,0,0,9.46245649,7.278413221,6.923272455,0,3.797347749,6.102201637,9.088107781,6.604697646,4.008481477,
5.598651855,0,5.550973073,0,3.182820685,4.961195168,6.750115474,0,0,0,4.105131291,2.367619226,2.617013534,3.220247532,0,3.703106027,0,1.554826783,1.94753258,0,7.036971196,0,0,0,5.641825282,4.908722257,0,0,0,0,0,0,0,4.454849206,4.962197967,0,0,0,0,2.311215911,4.271024917,0,3.377078116,0,0,4.731134649,0,0,1.410544518,1.354808925],[0,4.146452518,0,0,1.666262603,1.569736026,4.051052201,0,7.830362992,11.88636471,0,0,0,0,0,9.472289399,7.988117903,0,10.08368995,1.612405897,0,0,0,0,2.350033433,0,0,0,3.168216406,
1.297324055,0,4.001933649,0,0,9.149074161,2.212993723,3.381165997,6.572629376,4.09837174,0,0,10.10958722,0,6.383958854,0,2.334318467,0,0,0,10.82625781,4.197003578,0,4.041235755,2.047816235,0,0,0,0,8.36096898,0,0,7.483410394,0,1.46012053,0,0,0,1.121990524,2.331205908,0,0,4.568474378,0,0,2.921997488,3.084284864,4.141069016,8.966817321,1.413536412,6.711961034,0,0,0,3.635588574,4.228198043,3.127952731,0,0,0,4.980986765,6.731497682,0,0,6.755121839,0,0,0,2.137949557,10.22161522,8.378930116,2.097168659,
0,9.661273435,0,1.864734062,0,5.475028474,2.046103514,0,3.506233059,2.068632354,5.171989239,3.976074161,10.3926218,6.411293182],[6.480349619,5.814292081,0,5.078391452,5.161186664,0,0,0,0,0,0,0,0,3.620520142,8.990210888,0,0,0,2.573009698,3.738300805,0,0,0,0,0,0,0,0,3.168216406,0,4.811098905,0,4.510440908,1.255175933,2.35241283,0,0,4.843020605,3.316228807,3.524879916,0,0,5.83447311,1.567855244,0,7.234536645,0,0,0,0,1.959834467,0,0,0,0,0,8.875462831,2.159049313,8.660722242,0,3.619450877,2.283469031,
8.194224446,5.694548476,10.57152012,6.818446775,0,4.8696392,0,8.064293677,8.303360081,5.740051978,0,0,1.674904626,6.707238628,2.711021318,3.918449926,4.602558379,2.068632354,0,0,5.837982345,2.74723393,0,5.68152181,0,0,0,1.338596694,7.866072799,0,0,0,0,0,1.797115738,0,4.293124066,5.314446514,0,0,0,2.405446283,0,6.213863305,0,2.046103514,0,0,4.334091189,0,6.139012732,5.800288227,5.262402246],[6.70826126,3.920180613,0,3.991238804,2.418952549,2.303636946,0,0,0,0,0,0,6.500013095,7.714517186,0,0,1.731263898,
0,2.573009698,0,0,0,0,0,0,0,0,0,1.221294271,0,0,0,1.774547779,1.255175933,3.203757507,0,0,0,0,0,0,0,2.29611755,0,0,4.658711917,0,0,0,4.175777728,0,0,0,0,0,0,0,2.987759068,7.324263903,0,8.461941458,0,0,4.340878996,0,3.481491606,0,5.655688553,0,7.815334773,4.509413633,7.457997842,1.590756464,1.571621765,2.921997488,4.696976195,4.250242561,3.121377237,5.295339188,0,0,0,7.073830195,8.05915129,0,7.452805838,0,5.647119718,3.149587113,8.324504005,6.461304882,0,0,0,0,0,2.573009698,0,6.723164835,7.147760499,
3.81913209,0,0,4.39624901,3.957082868,10.12927417,0,0,9.203721128,0,6.279421452,3.741049922,3.768880774,1.410544518,6.488403286],[5.650649495,7.786559409,0,6.209947215,7.130626517,3.149587113,0,0,0,3.317392333,3.645101145,0,6.204126486,7.722257608,8.561801236,0,1.731263898,0,2.573009698,7.677393395,3.416491096,0,0,2.168803591,5.3917542,0,0,0,4.085653677,0,7.055062168,3.5520836,7.782201014,8.218248321,4.28395827,3.958420896,1.361689044,8.082591378,5.399808132,0,0,6.190494334,6.886797487,0,0,7.58777499,
0,0,0,4.666202349,3.949615895,0,0,0,0,0,7.111797466,5.352665029,8.930846828,0,9.64856054,5.444706535,9.066452874,7.416817859,9.900439642,6.902605057,5.237378775,7.013856313,2.331205908,8.29522395,7.997779953,7.353917933,1.590756464,2.790179778,4.519153412,8.29447179,4.446549919,4.036007806,8.293756619,2.534144363,4.646629049,0,7.903111157,7.588179213,0,9.364275888,0,6.783201494,3.149587113,7.114936233,9.579439147,0,0,2.172734535,0,0,0,0,7.651051691,7.777359249,0,0,0,6.989530728,4.183728784,9.613989597,
0,4.30592258,7.122029412,2.62792129,6.711961034,2.357189199,8.934932351,7.080320379,8.011279515],[1.431779586,6.084022716,0,6.18060584,5.672425342,1.569736026,0,0,6.362483709,0,0,0,5.866479193,1.090815163,9.320103183,0,0,0,1.406082194,0,0,0,0,2.998738351,2.350033433,0,0,0,3.698665367,0,3.241876309,0,7.001336624,0,2.839992687,0,4.420089118,3.2188198,7.603985209,0,0,3.244061423,5.278343442,2.785322386,0,7.536333628,0,0,0,1.781999348,0,0,0,0,0,0,6.800223825,0,5.563655308,0,6.769037991,4.708466901,0,
1.46012053,0,6.363800668,0,6.208306093,0,3.713829095,4.149781155,4.766795293,0,2.305904344,3.288643503,5.956457634,0,2.278309285,3.997747783,0,1.586888663,0,4.204912301,1.94753258,0,4.151712198,0,0,0,3.54885136,5.695345148,0,0,0,0,0,0,0,3.902410173,6.036836768,2.097168659,0,0,4.491209918,3.15801765,3.880683284,0,0,0,0,5.789549269,1.614406279,4.15721395,0,2.50408572],[5.323702816,6.850447992,0,3.991238804,0,1.569736026,0,0,0,0,0,0,0,3.155361395,9.661858648,0,0,0,6.135595009,6.959501133,0,0,0,0,3.201119623,
0,0,0,2.936928025,0,5.491636093,3.260581391,5.438721383,2.98819618,5.081263325,0,9.658046096,8.856748825,5.517366013,0,0,6.876829072,6.80505227,2.785322386,0,4.804992012,0,0,0,3.427082841,1.959834467,0,0,0,0,0,6.636732821,3.272846047,5.868079443,0,0,3.127128728,9.275935723,5.304835782,0,4.723762163,0,3.801280408,0,8.238452992,8.927073162,4.671039943,0,0,0,1.167924869,2.711021318,1.834870601,4.500203927,0,2.324239181,0,0,1.94753258,0,7.222911731,0,0,0,2.482114093,0,0,0,0,0,0,0,0,3.902410173,3.032789935,
0,0,0,3.796388312,0,0,0,0,0,2.62792129,0,0,2.871013559,0,1.354808925],[2.607242384,6.401691178,0,4.120471603,8.745710856,1.569736026,0,2.408805546,0,0,3.034610959,2.926124712,1.924937051,6.421993474,10.23423974,0,0,0,6.265054094,8.56049796,2.079226691,0,0,2.168803591,3.201119623,0,0,0,3.542563074,0,5.378828463,2.40377094,4.96653862,0,4.428536445,0,3.919218828,7.876959032,3.554918875,4.249294997,0,1.640918907,5.960643883,7.957358652,0,6.765756326,0,0,0,0,1.959834467,0,0,0,0,0,8.427453574,7.754250701,
7.165837518,0,4.228198043,4.477456875,8.855373588,7.26081863,4.87292166,7.369874558,0,5.13412428,0,4.768852641,7.245588536,7.457997842,0,0,2.429204831,6.38014525,1.916065792,2.891124637,6.582585057,0,5.360369907,0,1.554826783,1.94753258,0,7.398674744,0,0,0,4.02596074,4.389821626,0,0,7.106872831,0,0,0,0,5.341092099,6.92706272,0,0,0,6.124491676,1.214748986,6.458718649,0,3.141551507,2.184629194,0,6.877908857,0,3.235888264,0,4.511395522],[2.136055426,2.618564793,0,1.316327062,0,0,0,0,0,0,0,0,1.924937051,
2.134165238,4.216294965,0,0,0,0,1.612405897,0,0,0,0,0,0,0,0,3.698665367,0,0,2.40377094,2.546614229,2.367619226,0,0,0,3.751182392,1.481358206,0,0,1.640918907,2.29611755,0,0,1.885737479,0,0,0,0,0,0,0,0,0,0,0,0,4.537434131,0,1.385653692,0,4.941563173,0,1.529467388,1.430239906,0,1.121990524,0,1.594645054,0,2.168803591,0,0,1.674904626,1.804782814,0,0,1.413536412,0,0,0,1.554826783,3.258734268,0,4.744508356,0,1.241386551,0,2.02080583,4.509606186,0,0,0,0,0,0,0,1.733606582,3.466949588,0,0,0,1.950591407,0,
5.142615319,3.154638024,0,3.016531724,0,1.377092695,0,3.976074161,0,6.972814312],[2.961840268,9.52399021,0,0,0,4.226241501,0,0,10.7586622,8.738122561,0,0,1.924937051,7.197341658,9.648371133,3.658543633,6.141710064,1.871675903,0,8.95078088,2.897552731,0,0,0,7.292208467,0,0,0,3.83951414,1.297324055,8.310216768,5.714304486,9.890175932,9.146901396,2.839992687,3.958420896,8.481225984,5.781795617,6.961807519,0,0,6.952815269,7.927797274,0,0,4.733705155,0,0,0,3.056075924,4.902157249,0,0,0,0,0,5.419236999,
4.326546321,5.563655308,0,4.828801899,0,9.198411857,3.000947168,0,2.605196984,0,2.179323699,0,5.94500038,5.530636702,3.284108206,0,1.571621765,0,3.282169857,1.916065792,2.278309285,2.93651056,3.784457154,0,2.719532226,0,1.94753258,0,4.435972646,0,0,0,2.02080583,0,0,0,0,0,0,0,0,4.732344934,2.408805546,0,0,0,0,3.957082868,0,2.308177125,0,2.184629194,0,0,0,2.871013559,0,1.354808925],[3.687570256,2.279780641,0,0,3.277337944,2.303636946,0,0,5.502552596,2.455308789,0,0,0,0,3.093845517,0,6.23354183,0,1.406082194,
0,0,0,0,2.168803591,0,0,0,0,0,1.969178823,1.4287038,1.653483243,2.211623187,1.255175933,2.839992687,0,3.14556229,3.594588248,3.759667491,0,2.017487427,3.535209466,2.29611755,3.676698353,0,0,0,0,0,0,0,0,0,2.047816235,3.96333911,0,4.947233483,1.450539436,0,0,0,1.5529849,0,1.46012053,0,3.244061423,0,1.745427173,0,0,0,0,0,0,0,0,0,0,2.113629503,1.377092695,0,0,2.285688951,0,0,0,0,3.199364361,0,1.338596694,3.046059362,0,0,1.461730735,0,0,1.797115738,0,0,2.754273197,0,0,0,1.282537517,3.357133596,2.975444667,
3.154638024,0,4.227317234,0,0,1.614406279,3.235888264,0,4.051052201],[0,0,0,0,0,0,6.740374481,3.266140317,0,3.317392333,1.28620039,2.104447385,0,0,0,3.418179486,0,2.659730269,0,1.612405897,4.347299885,0,0,4.208089373,0,0,2.439564301,3.730089796,0,1.297324055,1.4287038,0,0,0,3.203757507,0,0,1.254014401,0,0,0,1.640918907,0,0,0,2.334318467,2.83110867,0,2.476695351,0,5.157127848,0,2.621674279,0,0,0,2.801189549,0,0,2.172734535,0,2.283469031,0,0,1.529467388,0,0,0,2.331205908,0,0,0,2.328878064,0,0,0,4.022952592,
1.191371277,0,2.885530704,0,7.96886519,0,0,0,0,3.510786446,0,0,2.02080583,0,0,0,0,3.605634704,6.225458174,4.378648964,0,0,0,3.437769124,4.113062664,3.417546061,0,0,0,0,0,0,0,0,0,0,0,0],[6.141790552,6.42345892,0,1.316327062,8.180557832,0,0,0,0,0,0,0,1.262193429,3.620520142,5.176956182,0,0,0,5.221244134,4.794362379,0,0,0,0,0,0,0,0,1.221294271,0,6.065870567,0,3.046826728,0,2.839992687,0,0,5.209885343,5.45978414,0,0,0,2.91052254,0,0,6.205085147,0,0,0,0,0,0,0,0,0,0,8.938262967,5.084444573,6.33323819,0,
1.385653692,1.5529849,2.679289883,8.477825594,6.292017702,4.977668006,0,4.545532356,0,4.26166757,2.94488983,4.338479271,0,0,0,5.309371451,2.367619226,2.617013534,5.46797168,2.068632354,2.809830944,0,4.814129086,1.94753258,0,5.915397533,0,0,0,5.727587442,5.793023474,0,0,5.173436064,0,0,3.446387271,0,5.767876484,5.206312682,0,0,0,3.639384767,0,5.142615319,0,3.141551507,0,2.62792129,4.215048346,0,3.526859546,2.109945405,4.780297015],[4.528027849,0,0,1.316327062,9.957796024,0,0,0,0,2.455308789,0,0,2.377347064,
6.514050916,0,0,0,0,5.456290025,0,0,0,0,0,0,0,0,0,0,0,4.413090928,1.653483243,0,0,2.35241283,0,0,2.709327299,2.196679237,0,0,0,0,0,0,5.549117811,0,0,0,0,0,0,0,0,0,0,0,3.510786446,8.103676361,0,6.32250971,0,0,8.657504609,4.563250245,7.309495623,0,2.179323699,0,2.819792025,0,1.458514165,0,0,2.429204831,5.166422948,2.98819618,2.617013534,6.113109407,1.377092695,0,0,3.129602515,1.94753258,0,5.752299708,0,0,0,3.54885136,0,1.866117748,0,0,0,0,5.974556572,0,5.06859083,0,0,0,3.417546061,7.837903493,0,7.928150758,
0,1.358928018,0,1.844254505,8.616084908,1.614406279,0,0,4.511395522],[0,1.192413264,5.640960842,0,3.277337944,5.999822492,0,0,0,0,4.072735074,3.827953141,5.377104329,5.38121297,3.093845517,0,4.729119939,1.871675903,0,0,0,0,0,0,0,0,0,0,2.32039045,4.208884861,2.13227898,8.344448314,0,2.711021318,1.61041097,0,2.049532294,1.254014401,0,0,1.335934953,1.640918907,0,1.567855244,0,3.558472286,0,0,0,1.781999348,0,0,0,0,3.052984456,0,0,0,1.511899039,0,0,0,0,1.46012053,0,0,0,1.121990524,0,0,1.419561476,0,0,
0,0,1.167924869,0,1.191371277,0,0,0,0,2.7684921,0,0,0,0,6.486660821,0,7.80891007,0,0,0,0,0,0,0,0,0,2.408805546,0,0,0,2.750747772,7.269000032,9.073492069,0,3.914995645,3.016531724,7.028278272,2.885530704,1.614406279,5.745010823,0,3.908687227],[7.513047234,1.836204539,0,1.316327062,7.666571366,0,0,0,0,0,1.95520039,0,0,6.956101292,9.018444845,0,0,0,2.573009698,4.897559156,0,0,0,0,0,0,0,0,3.36749764,0,0,0,1.774547779,0,3.203757507,0,0,3.2188198,3.030063897,2.001082698,0,0,1.204003557,0,0,4.102028745,
0,0,0,3.056075924,0,0,0,0,0,0,1.994606741,5.727731737,7.029338358,0,8.129449216,8.398987583,9.596139378,7.488916433,0,7.111533576,4.376707911,4.748587514,0,3.920428048,7.978746384,5.591044963,0,3.888178831,3.823534849,2.581961262,1.916065792,4.245781516,7.220006033,2.534144363,5.360369907,0,6.524898516,0,0,7.247621306,0,0,0,4.383889211,7.295354359,0,0,10.07439971,0,0,0,0,6.59019535,5.720391696,0,0,0,3.796388312,2.926952007,8.8977624,0,2.509654215,4.477456875,6.390625634,7.637226708,0,8.871499998,
0,5.834781143],[4.980037718,3.321557174,0,4.3486622,0,10.36836037,0,2.408805546,9.472405736,0,0,3.446387271,0,5.787570587,0,0,7.24614264,0,2.926124712,8.883234114,4.09837174,0,2.8815524,0,9.092973707,0,0,0,4.920973241,1.297324055,8.71640022,6.995591271,9.720440958,2.711021318,4.791503894,3.573991383,9.895324406,9.311405547,9.851653902,2.001082698,0,8.562695176,9.407195738,0,0,5.17154437,2.02080583,0,0,3.056075924,4.408114953,0,0,2.047816235,3.96333911,0,0,0,3.358854664,0,0,0,0,5.099082918,0,6.633795685,
0,4.748587514,0,0,0,4.856588768,0,0,4.212869647,5.115442623,2.711021318,2.617013534,1.413536412,0,0,0,0,0,0,0,1.450539436,0,0,0,0,0,0,0,2.719532226,0,0,0,0,1.953661285,0,0,0,0,0,0,0,0,0,0,0,0,0,2.109945405,2.50408572],[4.417752244,4.430656786,0,2.799346774,3.811828399,4.501664819,0,0,6.805259412,2.455308789,0,0,4.15244441,3.327622416,6.735083971,0,0,0,0,0,0,0,0,0,0,0,0,0,1.221294271,0,0,0,4.510440908,0,3.494023898,0,2.049532294,5.545547456,5.821596845,0,0,2.388819979,2.635783143,0,0,2.334318467,0,
0,0,0,0,0,0,0,0,0,1.994606741,3.893829897,4.142957954,0,6.201254421,5.082447626,5.851917827,4.067107018,1.529467388,6.682220941,4.870295053,3.674088391,0,5.223562965,5.679515464,5.168523102,0,0,0,3.282169857,2.367619226,4.144704051,4.390029428,1.377092695,4.757668911,0,7.134784472,1.94753258,0,3.32657446,0,5.480788824,1.569736026,4.754560657,5.884505736,0,0,0,3.605634704,0,0,0,7.823885596,2.408805546,0,0,0,6.620897252,0,3.880683284,0,5.01341333,10.86866387,7.489899942,0,5.400439335,7.253412105,0,
6.053557998],[3.687570256,5.97031664,0,5.013309151,4.759526397,4.932040333,0,0,5.149046272,0,0,0,0,4.165843825,7.778688025,1.554826783,0,0,1.406082194,3.945166829,0,0,0,0,0,0,0,0,4.642010819,0,2.13227898,1.653483243,7.168493046,4.446549919,2.35241283,0,0,3.594588248,8.709300025,0,0,0,2.91052254,1.567855244,0,3.383215216,0,0,0,0,0,0,0,0,0,0,3.315453761,6.640777491,3.983204757,0,7.004718846,6.256165336,7.251258487,3.524550291,3.095446785,6.583688373,3.918795874,5.272286719,0,4.96823042,7.180442304,
6.112321025,0,0,0,5.215663106,1.255175933,2.617013534,3.997747783,0,6.231668497,1.517123172,4.480124818,3.258734268,0,6.19491568,0,0,0,5.502792276,8.093984257,0,0,2.172734535,0,0,0,0,1.733606582,5.261392475,0,0,0,4.491209918,3.15801765,7.352894406,0,4.057402811,9.810833675,4.441310078,4.895011416,0,6.516114704,0,5.711546368],[0,1.192413264,0,0,2.911066272,0,0,0,0,0,0,0,0,1.090815163,3.093845517,0,0,0,1.406082194,3.738300805,0,0,0,0,0,0,0,0,1.873071327,0,2.957578397,0,2.818292015,1.255175933,1.61041097,
0,0,1.254014401,2.672729483,0,0,1.640918907,8.220436663,2.785322386,0,1.231253532,0,0,0,0,0,0,0,0,0,0,0,0,3.358854664,0,2.897552731,1.5529849,5.782776899,2.170766959,4.443256343,1.430239906,0,3.380142709,0,1.594645054,0,2.168803591,0,0,0,2.854876154,1.255175933,1.834870601,0,0,1.586888663,0,1.554826783,0,0,1.840219556,0,0,0,1.338596694,2.210938675,0,0,0,0,0,0,0,1.733606582,2.408805546,0,0,0,1.950591407,0,0,0,0,0,0,0,0,3.235888264,2.109945405,2.50408572],[0,1.192413264,0,4.718927108,6.777362535,0,
0,0,0,0,0,0,0,5.077600277,3.761584641,0,0,1.871675903,4.686639201,6.017610364,0,0,0,0,0,0,0,0,2.936928025,0,1.4287038,0,1.144473079,0,2.35241283,0,0,1.914596325,1.481358206,0,0,0,2.29611755,3.436052901,0,3.383215216,0,0,0,0,1.959834467,0,0,0,0,0,4.947233483,5.774158984,2.233797185,0,0,0,4.105696197,4.340878996,2.25507312,6.477929732,0,2.782901878,0,0,2.121043177,4.338479271,0,0,0,2.854876154,1.255175933,1.191371277,3.997747783,0,3.462057566,0,0,0,0,4.042983171,0,0,0,2.02080583,0,0,0,4.46287892,0,
0,0,0,2.498547749,3.266140317,0,0,2.546614229,4.185230436,0,5.475028474,0,0,2.184629194,0,7.566041877,0,6.787558938,0,3.750720028],[3.687570256,5.305985521,0,1.992995304,7.727032551,1.569736026,0,0,0,0,2.410489481,0,4.45805522,4.754283611,4.839868457,0,0,1.871675903,6.619995957,8.70975751,0,0,0,0,0,0,0,0,3.168216406,0,6.300749355,0,6.557966617,1.255175933,4.428536445,0,0,7.893860328,3.316228807,1.322794318,0,1.640918907,7.856545239,0,0,6.835514181,0,0,0,1.781999348,2.76135907,0,0,0,0,0,4.452563965,
8.382648374,9.24449598,0,8.070077652,4.042109164,7.442719388,6.253733669,2.25507312,8.132684881,3.918795874,5.621620971,0,4.768852641,6.865150378,4.856588768,0,0,0,6.636678857,2.98819618,3.494361381,7.497456681,0,6.34270266,0,3.864522096,3.635588574,0,7.132934991,0,3.199364361,0,6.060679408,7.360534445,0,0,3.731259476,0,0,0,0,5.497805431,8.12049114,0,0,3.046826728,7.269548707,1.214748986,7.038203308,0,0,0,1.844254505,7.398586627,2.845102004,7.386429788,8.413487598,3.37097252],[7.113963214,2.279780641,
0,1.992995304,0,7.993997007,0,0,5.849254867,0,1.95520039,0,1.262193429,2.464609202,7.067873466,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2.211623187,0,3.494023898,0,0,3.751182392,2.672729483,0,0,0,4.361537796,0,0,1.231253532,0,0,0,1.781999348,2.76135907,0,0,0,0,0,0,4.052930578,4.417540006,0,4.654982428,7.828489476,0,1.46012053,0,5.648250932,4.165843825,3.801280408,0,6.281098735,6.96524287,2.998738351,0,0,1.674904626,4.472293286,1.916065792,3.649991709,2.582960703,0,7.142419168,0,5.241142513,0,0,1.840219556,
0,0,0,4.834050577,8.265451259,0,0,0,0,0,0,0,0,5.314446514,0,0,0,4.491209918,2.311215911,3.637105643,0,0,0,0,1.377092695,2.357189199,7.422286123,0,0],[2.136055426,8.315062227,0,1.316327062,1.666262603,4.065919631,0,0,9.757443382,7.303330271,1.95520039,0,2.377347064,6.363800668,7.827378613,2.285688951,6.093504883,0,3.209582046,8.112283967,0,0,0,0,6.573833402,0,0,0,3.542563074,2.772076473,8.756463191,5.143016366,8.138894678,8.39508396,4.428536445,3.958420896,9.466456685,7.207643056,9.417421538,0,0,10.37654851,
7.49922223,0,0,2.676004571,0,0,0,2.555337332,3.650844232,0,3.499434968,0,3.052984456,0,4.947233483,7.070913857,5.383384298,0,4.228198043,1.5529849,8.438567099,5.540217969,2.735603919,3.685313026,0,2.179323699,0,5.299531819,4.961195168,3.284108206,0,0,0,4.829414324,0,1.834870601,4.787761347,0,0,1.517123172,2.285688951,2.74723393,0,4.042983171,0,0,0,2.02080583,2.210938675,0,0,0,0,0,0,0,2.995800011,4.0707841,0,0,0,3.639384767,3.688072423,0,2.308177125,0,2.184629194,3.132909221,0,0,1.634715536,0,4.299507612],
[1.431779586,0,0,1.316327062,3.277337944,3.149587113,0,0,0,0,2.410489481,0,4.924604901,6.150894666,0,0,0,0,1.406082194,0,0,0,0,0,4.677517484,0,0,0,3.698665367,1.969178823,4.020451209,0,6.359552821,0,1.61041097,0,0,5.262888697,1.481358206,4.555970876,6.353899882,0,1.204003557,1.567855244,0,6.57500401,0,0,0,0,0,0,0,0,0,0,0,6.135947076,3.983204757,0,3.797347749,0,0,3.728921218,3.383215216,3.244061423,0,3.010569242,0,3.182820685,0,0,0,0,1.674904626,5.115442623,1.255175933,1.191371277,4.951871382,0,2.809830944,
0,5.085158479,1.94753258,1.385653692,2.897552731,0,6.274231146,0,3.72600458,7.511659395,0,0,0,0,0,0,0,0,1.284976959,0,0,0,1.950591407,4.845042531,0,0,2.85992601,0,0,0,0,5.025868086,0,1.354808925],[7.041440688,1.192413264,0,4.873613724,0,0,0,0,0,0,1.28620039,0,5.051712816,1.704821959,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2.32039045,0,0,0,0,1.916065792,1.61041097,0,0,4.911014295,0,0,0,0,2.635783143,0,0,6.066901519,0,0,0,0,0,0,0,0,0,0,0,1.450539436,3.358854664,0,4.744508356,0,1.888578717,2.644765483,2.25507312,
0,0,3.534588978,0,0,0,5.096632231,0,0,0,3.751552406,2.98819618,2.617013534,1.413536412,1.377092695,0,0,5.241142513,0,0,2.623232518,0,5.994484645,1.569736026,5.957962862,6.872243316,0,0,0,0,0,1.797115738,0,6.280662885,4.298523491,0,0,0,3.262431434,0,6.495772719,0,0,9.390626345,0,2.068632354,2.845102004,7.76713902,0,1.354808925],[3.246250636,5.258332895,0,1.316327062,0,6.085958554,0,0,4.371867824,0,0,0,0,4.870295053,6.39084947,0,0,0,1.406082194,4.794362379,0,0,0,0,0,0,0,0,2.936928025,0,0,1.653483243,
5.074147944,2.367619226,1.61041097,0,2.863826449,2.709327299,6.688607531,0,0,0,2.635783143,0,0,0,0,0,0,0,1.959834467,0,0,0,0,0,0,1.450539436,3.358854664,0,4.559531286,5.379168854,7.199141747,2.170766959,0,6.882021243,0,3.380142709,0,5.896898074,6.405177105,3.522245428,0,0,0,0,2.711021318,1.191371277,3.220247532,0,3.909586503,0,0,1.94753258,0,3.32657446,0,0,0,1.338596694,0,0,0,0,0,0,0,0,3.658543633,4.49516583,0,0,0,1.282537517,0,0,0,0,0,0,0,0,3.976074161,0,1.354808925],[0,4.247537068,0,0,2.911066272,
0,4.299507612,0,6.273416669,12.8008047,0,0,0,0,0,9.111984814,8.817354675,0,10.41191995,2.354798077,0,0,0,0,0,1.962937906,0,0,0,0,0,4.183278629,0,1.255175933,10.35651976,3.573991383,2.049532294,6.370119833,4.891119492,0,1.335934953,9.688517039,0,6.916988055,0,0,0,0,0,4.798531072,4.755505094,0,3.499434968,0,0,0,0,0,4.537434131,0,0,7.483410394,0,0,0,0,0,0,0,3.472619051,0,4.064733345,0,2.305904344,1.674904626,1.167924869,3.753033567,5.048429162,0,4.334091189,0,0,0,3.635588574,3.18023001,0,0,0,0,4.754560657,
5.149046272,0,0,5.487346431,0,0,0,0,6.443714578,3.466949588,2.097168659,0,7.371984904,1.282537517,0,0,0,0,0,2.62792129,0,4.128858007,0,7.885630615,5.794861186],[6.176069411,5.562929062,0,0,3.811828399,0,0,0,0,0,0,0,1.262193429,3.327622416,1.812524025,0,0,0,0,4.431364327,0,0,0,0,2.350033433,0,0,0,2.661346394,0,5.378828463,5.384482695,3.83967659,7.658993826,0,0,0,5.411129491,5.727139723,0,0,2.388819979,3.340058983,0,0,2.334318467,0,0,0,2.555337332,0,0,0,0,0,0,0,1.450539436,3.598259323,0,4.347299885,
0,6.905915472,3.286373665,0,2.605196984,0,3.801280408,0,3.472619051,2.590991323,5.096632231,0,0,0,1.804782814,1.916065792,2.278309285,4.787761347,0,0,0,0,0,0,4.744508356,0,0,0,0,0,0,0,0,0,0,0,0,0,1.953661285,0,0,0,3.262431434,1.214748986,2.479401066,0,0,0,0,4.215048346,0,1.634715536,0,4.511395522],[3.687570256,5.814292081,0,1.316327062,1.666262603,3.149587113,0,0,2.56708501,2.455308789,0,0,0,4.813455122,5.450009229,0,0,0,0,5.397538194,0,0,0,0,2.350033433,0,0,0,1.221294271,0,3.683059916,2.40377094,
4.510440908,5.50407377,0,0,0,4.349831029,6.110621289,0,0,3.535209466,3.340058983,0,0,2.334318467,0,0,0,0,2.76135907,0,0,0,0,0,5.20245281,2.159049313,5.317915032,0,5.626062257,2.283469031,5.633682545,4.210477304,6.326344685,4.022743956,1.935406473,3.207157908,0,3.920428048,5.24225651,4.064733345,0,0,0,5.703825922,2.367619226,1.191371277,4.140691561,0,1.586888663,0,2.7684921,1.94753258,0,5.445615649,0,0,0,2.02080583,5.149046272,0,0,1.461730735,0,0,0,0,0,4.584271389,0,0,0,0,0,5.398826835,0,1.358928018,
3.016531724,3.132909221,0,0,4.46287892,3.834609931,1.354808925],[5.87590186,2.279780641,0,0,5.609580256,1.569736026,0,0,0,0,3.267999173,0,0,5.028499229,7.843250355,0,0,0,1.406082194,4.12605646,0,0,0,0,0,0,0,0,3.168216406,0,0,0,1.774547779,0,2.35241283,0,0,1.914596325,2.672729483,0,0,0,3.141217906,2.785322386,0,2.952062239,0,0,0,0,0,0,0,0,0,0,0,3.893829897,4.936856017,0,6.293137868,6.917940459,6.804915877,5.36737841,0,4.296021802,2.733293055,4.616440732,2.331205908,4.101113517,5.530636702,5.642443069,
0,0,0,2.581961262,1.255175933,2.278309285,5.412691363,0,5.78419553,0,4.71115338,0,0,6.061915528,0,0,0,3.883764286,5.793023474,0,0,7.904462971,0,0,0,0,4.600258688,3.266140317,0,0,0,1.282537517,1.214748986,6.731497682,0,1.358928018,3.924517728,4.25812051,4.444055644,0,6.702628384,0,5.794861186],[2.607242384,0,0,1.316327062,0,1.569736026,0,0,0,0,6.99569599,0,5.168523102,3.863871272,4.399205452,0,0,0,2.104447385,0,0,0,0,0,0,0,0,0,0,9.153585267,3.683059916,0,3.712214701,4.250242561,1.61041097,0,3.14556229,
1.254014401,0,3.524879916,4.576876036,0,0,0,0,5.059399127,0,0,0,3.056075924,2.76135907,0,0,0,0,0,0,4.556449605,3.803533211,0,1.385653692,0,1.888578717,0,1.529467388,3.685313026,0,4.026279325,0,5.058456442,2.590991323,2.168803591,0,0,0,3.996623167,0,1.191371277,6.702676902,0,0,0,4.600258688,0,2.079226691,1.195550809,0,5.016937469,1.569736026,0,6.400616031,0,0,0,0,0,0,0,0,1.953661285,0,0,0,3.02915668,5.478749586,1.717354877,0,3.579495955,0,0,0,0,2.871013559,0,4.511395522],[5.383601619,2.279780641,1.784498863,
0,3.277337944,4.370515798,0,0,0,2.455308789,3.943779694,0,3.43165101,0,3.466007268,0,4.729119939,1.871675903,1.406082194,0,0,0,0,5.020970229,0,0,0,0,1.873071327,2.772076473,2.957578397,4.620888419,0,5.58966543,0,0,2.863826449,3.418903812,3.030063897,0,2.017487427,3.777352843,2.29611755,3.436052901,0,3.183685535,0,0,0,0,0,0,0,0,4.517137731,0,0,0,3.598259323,0,0,0,0,0,2.735603919,0,0,1.121990524,0,1.594645054,0,1.458514165,0,0,0,0,0,0,0,0,0,0,6.430809089,4.392317423,3.797347749,0,0,2.690869819,1.569736026,
4.274159055,3.571590925,0,0,0,0,0,0,0,0,3.643192729,0,0,0,1.950591407,0,5.918781383,0,0,0,2.62792129,3.784457154,0,5.905624518,0,2.85410132],[3.246250636,5.105134247,0,1.992995304,6.04913827,0,0,0,0,6.931638542,0,0,2.721242624,5.171056616,3.093845517,0,1.731263898,0,5.087602875,7.316835547,2.079226691,0,0,0,0,0,0,0,3.542563074,0,3.861596037,0,4.723762163,0,2.35241283,0,3.583640746,5.952842061,3.030063897,1.322794318,0,0,5.867065253,0,0,5.590057368,0,0,0,1.781999348,1.959834467,0,0,0,0,0,3.693798993,
6.536898672,6.923272455,0,7.26890038,2.283469031,4.941563173,5.170977372,1.529467388,4.897896718,0,3.380142709,0,2.333539385,3.228850911,3.284108206,0,0,0,3.996623167,1.916065792,2.891124637,7.137165915,0,1.586888663,0,1.554826783,0,0,4.744508356,0,0,0,4.581096904,3.046059362,0,0,0,0,0,0,0,3.658543633,5.553883032,0,0,0,4.185230436,0,4.577929995,0,0,0,0,3.606691969,0,4.46287892,6.240826923,3.135561463],[4.168154907,0,0,1.316327062,0,2.787748346,0,0,0,2.455308789,6.70869935,0,5.424856331,4.336928853,
4.839868457,0,0,0,1.406082194,0,0,0,0,2.168803591,2.350033433,0,0,0,3.36749764,8.746754231,5.191128124,0,6.154168349,2.98819618,2.839992687,0,0,4.771663215,2.672729483,4.358925044,7.172854332,0,0,0,0,6.447138937,0,0,0,0,1.959834467,0,0,0,0,0,0,6.33490259,3.803533211,0,1.385653692,0,0,0,4.168411949,2.959707294,1.935406473,4.220876189,0,5.143370329,3.84803047,0,0,0,0,4.696976195,1.255175933,1.834870601,6.834720806,1.377092695,0,0,9.044754155,0,2.079226691,1.840219556,0,7.985201254,1.569736026,3.346859325,
8.290754801,0,0,0,0,0,0,0,1.733606582,1.284976959,0,0,0,4.185230436,7.231446308,0,0,6.02597568,0,0,2.068632354,0,3.526859546,0,4.180621815],[0,0,0,0,0,0,0,0,0,0,0,0,2.721242624,2.134165238,0,1.554826783,0,0,0,0,0,0,0,0,0,0,0,0,3.542563074,5.226629855,7.765415827,2.894869795,4.26001107,4.773589639,0,0,2.049532294,2.366007313,2.196679237,5.477144427,4.576876036,0,0,0,0,1.231253532,0,0,0,0,2.76135907,0,0,0,0,0,0,4.196215359,0,0,4.828801899,0,1.888578717,4.943561744,1.529467388,2.605196984,0,5.784442396,
0,1.594645054,1.419561476,0,0,0,1.674904626,4.105131291,2.711021318,2.278309285,3.220247532,0,3.462057566,0,4.044732979,1.94753258,2.545649577,3.925386939,0,0,4.621878817,6.156566334,4.509606186,0,0,0,0,2.122906148,0,0,0,3.032789935,0,0,0,0,0,1.717354877,0,3.579495955,0,0,0,0,6.841522968,2.109945405,1.354808925],[8.593947481,3.321557174,3.430278729,8.661332089,4.362134417,5.758878943,0,0,0,0,5.87169476,2.104447385,4.785206658,6.239861435,5.364607625,0,5.49452847,0,2.926124712,1.612405897,0,3.771698401,
0,0,0,0,0,0,3.83951414,3.051133618,3.683059916,1.653483243,6.154168349,6.675932571,4.28395827,5.075843758,6.572761196,5.154860176,4.372482843,7.007056739,2.827323338,0,5.460243622,2.785322386,0,5.706335436,0,0,0,1.781999348,3.273593502,0,0,0,3.96333911,0,1.994606741,5.470131927,0,6.471176049,4.09837174,5.625150633,1.888578717,2.170766959,3.623018727,1.430239906,1.935406473,2.512450001,0,2.333539385,1.419561476,1.458514165,0,0,2.921997488,4.105131291,0,2.617013534,3.839067509,2.885530704,0,0,7.501698346,
1.94753258,2.079226691,3.127952731,0,8.291929194,0,5.049199103,8.7580297,0,0,6.471176049,0,0,4.686639201,0,6.51881324,5.462819554,0,0,0,3.796388312,7.353001114,3.637105643,4.627339227,4.613188524,0,3.506233059,4.215048346,0,1.634715536,6.108385753,5.262402246],[0,1.192413264,1.784498863,0,1.666262603,2.303636946,0,0,3.068526802,0,0,0,1.262193429,0,0,0,4.729119939,0,0,0,0,0,0,0,0,0,0,0,0,1.297324055,2.603155617,2.40377094,1.144473079,0,0,0,2.863826449,3.751182392,3.030063897,1.322794318,4.666202349,
3.535209466,0,1.567855244,0,0,0,0,0,3.427082841,0,0,0,0,0,0,3.99325527,1.450539436,1.511899039,0,2.079226691,0,0,1.46012053,3.623018727,0,0,3.380142709,0,0,0,0,0,0,0,2.24508439,0,1.191371277,2.113629503,0,1.586888663,0,1.554826783,0,0,0,0,3.39914311,0,2.02080583,3.046059362,0,0,2.172734535,0,0,0,0,0,2.754273197,0,0,0,4.066891048,2.65168682,1.717354877,3.154638024,0,2.184629194,4.25812051,0,1.614406279,1.634715536,0,2.040985264],[4.630469553,2.279780641,0,3.991238804,0,0,0,0,0,0,0,0,1.924937051,1.704821959,
0,0,0,0,1.406082194,0,0,0,0,0,0,0,0,0,4.085653677,0,0,0,0,0,3.203757507,0,1.361689044,5.097652814,1.481358206,0,0,0,1.204003557,0,0,5.059399127,0,0,0,1.781999348,0,0,0,0,0,0,0,0,6.299716816,0,6.769037991,0,0,3.728921218,0,0,3.244061423,4.748587514,0,0,0,7.045692847,0,0,0,6.291064457,3.220604739,3.319889474,2.113629503,0,0,0,8.458509941,0,0,5.528611646,0,4.423836784,1.569736026,6.156566334,9.774413392,0,0,0,0,0,0,0,4.454849206,6.068067857,0,0,0,6.534350268,0,8.998019113,0,1.358928018,6.74662152,5.003965693,
6.055178464,4.565622299,5.854048158,0,2.50408572],[10.2981365,1.192413264,0,6.778640249,1.666262603,3.679313849,0,0,0,3.317392333,3.802156015,4.12941905,2.998738351,0,4.399205452,0,0,0,2.926124712,2.354798077,3.797347749,0,0,0,2.350033433,0,0,0,4.390486707,0,3.479267335,5.932766017,2.818292015,5.986713889,4.559936483,0,1.361689044,1.254014401,2.672729483,0,1.335934953,0,0,9.523119018,0,0,0,0,0,3.966628542,3.273593502,0,5.400439335,0,0,0,0,0,0,10.17415916,0,0,0,2.644765483,0,0,1.935406473,0,0,0,0,
0,0,1.571621765,1.674904626,0,2.367619226,3.918449926,2.113629503,0,2.324239181,0,7.662137036,2.74723393,7.914819105,3.925386939,2.159049313,5.292751623,0,3.72600458,7.953171845,0,0,0,0,0,5.252805925,0,4.454849206,0,0,0,5.221862105,3.639384767,1.864734062,0,8.601220263,0,8.354210299,3.802541477,2.534144363,0,1.634715536,8.092616913,2.50408572],[0,3.123017576,0,0,1.666262603,2.787748346,0,0,0,2.455308789,5.0292177,2.926124712,2.377347064,1.090815163,1.812524025,0,7.352378887,0,1.406082194,2.842544351,
0,2.383886536,3.780189712,2.998738351,0,0,0,0,1.221294271,5.169340701,2.603155617,5.932766017,0,4.619316948,0,2.212993723,0,3.2188198,3.759667491,2.460612703,2.47849835,4.723762163,2.91052254,4.619156995,0,2.334318467,0,0,0,0,2.76135907,0,0,2.047816235,0,0,0,0,0,0,0,3.127128728,0,0,3.8285856,2.134165238,0,2.512450001,0,0,0,0,0,0,0,3.45615723,0,1.191371277,0,0,2.324239181,0,3.129602515,6.288042101,4.828801899,0,0,7.172396808,1.569736026,4.834050577,2.688101136,0,0,0,0,0,1.797115738,0,6.323185711,6.098637164,
0,0,0,1.282537517,2.311215911,6.879029412,3.154638024,2.85992601,0,6.200434909,5.297875843,1.614406279,0,3.834609931,3.135561463],[8.090889725,0,0,5.605554037,0,1.569736026,0,0,0,2.455308789,0,3.827953141,4.15244441,0,0,0,0,0,3.209582046,1.612405897,4.09837174,0,0,0,3.201119623,0,0,0,2.936928025,0,2.957578397,0,3.244061423,1.255175933,4.28395827,0,0,0,4.705403237,0,9.465143294,0,0,10.0118341,0,1.885737479,0,0,0,2.555337332,1.959834467,0,6.087681547,3.3791203,0,0,0,0,0,13.00158412,0,1.5529849,0,2.170766959,
0,0,0,0,0,0,0,0,0,0,0,0,2.367619226,3.790456203,2.113629503,0,0,0,3.418179486,0,6.851950493,4.25281801,3.272846047,3.199364361,1.569736026,0,1.493074462,0,0,0,0,0,0,0,2.498547749,3.800230488,0,0,0,0,3.357133596,0,9.705618729,0,8.021619905,6.672938248,0,0,0,8.534565827,2.50408572],[8.345531382,1.192413264,0,4.718927108,1.666262603,1.569736026,0,0,0,2.455308789,0,2.104447385,0,0,3.093845517,0,0,0,2.104447385,2.354798077,0,0,0,0,0,0,0,0,1.873071327,0,0,4.489236399,0,3.89429641,0,0,0,0,1.481358206,0,
2.017487427,0,0,6.794671193,0,0,0,0,0,3.056075924,0,0,4.041235755,0,0,0,0,0,0,7.861576702,0,0,0,0,0,0,0,0,0,1.594645054,0,0,0,0,0,1.167924869,1.255175933,2.278309285,0,0,1.586888663,0,6.669242158,0,5.424098546,1.195550809,1.450539436,3.199364361,0,2.482114093,7.155433513,0,0,0,0,0,1.797115738,0,4.110953646,2.408805546,0,0,1.774547779,0,0,0,5.597853824,0,6.16836095,1.844254505,0,0,0,6.108385753,2.040985264],[0,2.279780641,4.361761497,2.799346774,0,0,6.781809081,2.408805546,1.792044962,0,0,2.104447385,
1.262193429,1.090815163,0,5.683348282,4.961735045,8.513181606,3.446387271,0,4.559531286,6.485549112,4.890564418,4.671039943,0,1.962937906,9.582116997,8.031969643,1.873071327,6.393868842,0,1.653483243,0,5.365339588,2.35241283,8.984288982,0,4.248348124,1.481358206,2.808592225,1.335934953,0,0,0,9.547138303,0,7.478729426,9.692349264,9.762514772,8.470286863,7.94640769,10.07343277,11.02477554,7.844486875,0,5.258031942,3.693798993,0,0,3.003160341,0,4.042109164,0,0,3.095446785,0,5.237378775,1.121990524,7.377840238,
1.594645054,0,0,2.328878064,5.862927691,6.731497682,0,6.926779189,1.834870601,0,0,2.324239181,7.05762372,2.7684921,0,0,1.840219556,3.714983524,7.731045772,6.96596603,4.383889211,0,3.830611616,7.38363434,0,9.683396535,7.587028641,4.540847341,7.418426334,0,2.408805546,6.056881974,6.162938571,7.285066294,0,0,0,3.154638024,0,0,3.802541477,5.984140876,6.31016769,3.235888264,0,2.50408572],[0,0,2.558261645,2.451788443,0,0,4.299507612,0,1.792044962,0,0,2.104447385,0,0,0,1.554826783,1.731263898,0,2.104447385,
0,3.797347749,5.690219044,4.080961764,0,2.350033433,0,4.22489809,5.457620072,0,0,0,1.653483243,0,0,0,0,0,2.709327299,0,0,0,2.388819979,0,0,3.643192729,0,5.34891761,0,0,3.966628542,0,2.782901878,0,2.047816235,0,0,1.994606741,0,0,0,0,0,0,0,0,0,0,0,0,0,2.121043177,0,4.256154097,1.571621765,4.519153412,0,0,1.834870601,0,1.377092695,0,4.150541524,1.554826783,0,2.545649577,0,2.159049313,0,0,0,0,1.866117748,2.335878518,0,3.605634704,5.479753142,3.741600477,0,0,1.284976959,0,0,5.125085065,0,0,0,0,0,0,0,4.085292151,
2.357189199,0,0,0],[0,1.192413264,5.492166606,0,0,0,6.182912545,3.266140317,1.792044962,0,0,2.926124712,1.924937051,0,0,0,1.731263898,2.659730269,0,0,0,6.098254231,3.780189712,0,3.201119623,0,9.539862209,5.353228024,0,3.051133618,0,0,1.144473079,4.250242561,0,7.425502029,0,4.248348124,1.481358206,2.001082698,1.335934953,0,0,0,7.987966359,0,5.641825282,8.201698417,8.150280528,5.565032398,6.714880751,8.205146382,7.461542736,6.191805688,0,5.002518037,3.315453761,0,0,4.212869647,0,0,0,0,1.529467388,0,
0,1.121990524,5.055632307,0,1.419561476,0,0,0,4.986490777,1.167924869,2.367619226,1.191371277,0,0,1.586888663,0,1.554826783,1.94753258,2.079226691,0,2.632106894,4.596479618,6.043533271,3.54885136,0,3.533813815,5.061286461,0,8.214753251,6.349381428,3.074803839,4.982411585,0,3.032789935,2.917885603,4.113062664,5.696201342,0,0,0,3.154638024,0,0,3.132909221,5.564557384,6.151840409,2.381429107,0,1.354808925],[7.857357954,3.920180613,7.93957203,8.165610958,4.019469864,7.19642303,0,0,0,0,5.835800508,4.591099532,
4.45805522,6.74435877,4.839868457,0,9.848800824,4.294034089,3.827953141,1.612405897,0,4.717893295,0,0,5.243564207,0,0,0,4.295856043,3.485952495,5.645856511,4.741524853,6.316371941,7.50227595,4.559936483,7.330916878,6.499558063,4.61739878,4.372482843,5.859399538,5.988684687,6.148024087,6.184041275,6.417504392,0,4.658711917,0,0,0,2.555337332,0,0,0,4.868546822,5.892249192,0,3.99325527,5.578750391,5.02154553,7.343438992,4.347299885,6.917940459,4.499630447,0,5.047689826,2.134165238,3.620520142,3.380142709,
0,2.333539385,0,2.642645028,0,0,0,5.520038125,2.367619226,3.121377237,4.698129705,2.534144363,0,0,6.104954231,0,4.09837174,4.042983171,0,8.839285436,3.149587113,7.362895574,7.899354181,0,0,7.178511976,0,0,4.195877697,0,5.941695955,6.157898619,0,0,0,6.318254678,8.880432722,5.863151442,5.475028474,6.495085564,5.444706535,3.802541477,3.16787499,0,4.59442283,5.800288227,5.711546368],[1.431779586,5.940432498,6.626431996,7.25750026,3.811828399,4.835876343,0,0,1.792044962,0,0,0,1.924937051,3.481491606,0,
0,7.974873692,2.659730269,0,3.206401401,0,4.465781641,0,0,0,0,0,0,0,0,0,3.260581391,0,8.142379729,3.494023898,5.075843758,1.361689044,5.154860176,2.196679237,1.322794318,5.723265523,4.938333643,7.550290267,2.785322386,0,0,0,0,0,0,3.273593502,0,0,5.271184915,0,0,0,4.052930578,0,6.527134005,0,6.060998989,0,0,4.168411949,0,0,2.782901878,0,0,0,1.458514165,0,0,0,0,1.255175933,0,1.413536412,0,5.288216512,0,0,1.94753258,7.159220301,0,0,8.966701177,2.787748346,5.957962862,9.197725102,0,0,0,0,0,0,0,0,1.284976959,
0,0,0,4.185230436,7.398893325,7.660872996,4.627339227,0,0,3.132909221,0,0,1.634715536,4.495623046,3.573305055],[10.02243611,6.189418066,7.507232477,7.214717226,5.070762648,6.988505781,2.85410132,0,0,2.455308789,5.0292177,5.749675863,1.924937051,4.415419518,3.761584641,0,8.802437647,4.083847062,2.926124712,3.738300805,0,5.119160024,0,0,2.350033433,0,3.835351761,0,4.562943583,6.785674076,2.957578397,5.384482695,7.093742069,7.209629115,2.839992687,8.451585789,4.706958126,5.817665772,3.759667491,8.001437781,
5.498484395,5.03472903,7.262493039,6.844849094,8.883450879,4.733705155,0,0,0,4.919735396,0,0,0,4.059526708,4.517137731,0,3.315453761,3.893829897,4.537434131,6.222731361,3.416491096,8.156501226,3.859324912,0,5.409711144,4.723762163,0,1.745427173,0,0,2.121043177,2.168803591,0,1.571621765,3.823534849,2.581961262,1.255175933,3.319889474,3.220247532,4.5462288,5.132088854,0,4.600258688,3.258734268,7.855772737,0,0,7.953791502,5.649977479,7.478729426,9.827249035,0,0,7.213040249,0,0,5.658352903,0,6.191661802,
7.729327733,0,0,0,4.958191223,7.589056155,7.08758421,4.627339227,7.132166813,4.477456875,4.603837708,6.972699994,2.357189199,5.687237536,7.655805104,4.051052201],[0,0,0,0,0,0,7.076349438,2.408805546,0,0,0,0,1.262193429,0,0,0,0,0,0,0,0,0,0,0,2.350033433,0,0,5.962310557,0,0,0,0,0,2.367619226,0,7.19430916,0,0,1.481358206,0,0,0,0,0,6.242462339,1.231253532,7.146418815,3.697779146,4.267898313,4.175777728,6.454590515,7.848070572,0,7.742586624,10.54114609,0,0,0,0,3.003160341,0,0,0,0,0,0,0,0,5.844275491,0,
1.419561476,0,0,3.681934901,0,0,6.636252534,0,0,0,0,1.517123172,0,0,0,0,2.159049313,0,5.532179496,2.83110867,0,0,3.185417178,0,2.719532226,6.288749972,3.074803839,6.368640084,0,3.466949588,5.907284721,5.717825408,0,0,1.214748986,0,0,0,0,3.506233059,0,5.771046951,1.634715536,0,1.354808925],[0,0,1.784498863,0,0,0,0,0,0,0,0,0,0,0,0,1.554826783,0,4.083847062,1.406082194,0,0,0,3.399737138,0,0,0,5.351310615,4.83831456,0,1.969178823,0,0,0,2.367619226,0,5.973110282,0,1.254014401,0,0,0,0,0,0,6.624994981,0,
4.02596074,6.683646032,6.598281987,3.056075924,5.470946812,6.658211483,5.566564109,5.920320184,0,4.691797695,0,0,0,2.172734535,0,0,0,0,0,0,0,0,5.739290647,0,0,0,2.328878064,1.571621765,5.621923334,0,4.446549919,0,0,0,1.586888663,2.719532226,1.554826783,0,0,0,2.159049313,1.241386551,4.621878817,2.02080583,0,5.145332406,2.335878518,0,6.202137508,4.152063608,0,3.485952495,0,0,2.917885603,2.68589141,4.656100179,0,0,0,0,0,0,0,1.377092695,0,2.381429107,0,0],[4.528027849,0,0,0,0,0,11.27474825,2.408805546,
0,2.455308789,0,2.104447385,0,1.090815163,0,0,0,3.166510337,0,1.612405897,0,2.383886536,0,0,0,2.764919656,4.22489809,0,3.36749764,0,0,0,0,0,4.123261,8.580515542,0,0,1.481358206,0,0,0,0,0,2.754273197,0,5.957962862,9.692349264,4.267898313,4.919735396,4.197003578,0,6.193080749,2.047816235,0,13.65665317,1.994606741,0,0,0,0,2.766109149,0,0,0,2.134165238,3.918795874,0,9.173959161,0,0,0,2.328878064,0,0,0,2.367619226,4.869937275,0,0,0,2.719532226,0,2.74723393,2.079226691,1.840219556,9.833857474,1.241386551,
2.303636946,4.485860075,0,0,14.14226438,3.003160341,4.150541524,9.549442283,0,3.868434131,0,4.747498523,0,0,3.417546061,0,0,0,0,0,3.924517728,3.506233059,0,1.614406279,0,0,2.50408572],[0,3.920180613,10.22177323,6.120069803,4.019469864,3.885528248,11.07881379,9.053036413,6.805259412,2.455308789,2.410489481,6.864329183,5.75880559,2.464609202,0,7.742668471,7.006861355,10.66474986,4.776242999,1.612405897,7.159220301,11.16247897,9.310062776,7.719664052,7.046005769,1.962937906,15.07231383,11.49866875,5.48997353,
9.030297144,2.957578397,3.5520836,1.144473079,10.53089601,5.818683874,12.90639527,2.513383648,8.90339786,5.055632307,6.902298152,4.829800069,4.326810316,0,3.88288323,13.77679107,2.676004571,11.51097734,14.04722138,13.9249527,10.91822696,12.4368033,14.10529712,13.10581572,11.920207,5.485285785,10.10378464,8.884603388,0,0,8.208170172,0,3.655971809,2.679289883,0,5.409711144,2.605196984,7.63473928,2.512450001,12.40524442,0,6.255064165,0,7.524334779,8.029867113,11.77625986,4.551140085,8.942469768,6.896031158,
0,4.444055644,3.909586503,8.082248174,6.462858902,5.019193565,6.658211483,4.598472787,7.928573538,10.14113656,12.32721446,9.707121629,3.776543493,11.23861009,10.90081487,3.91026138,14.12364955,12.55098721,9.078428271,12.00963584,3.902410173,7.617668006,9.823236711,10.11594834,12.29357811,3.46318473,2.65168682,5.805290094,6.803122871,2.046103514,4.227317234,7.550966038,10.36511003,10.67053762,7.71026267,2.932344535,5.075116721],[0,0,5.492166606,4.120471603,0,0,10.56215027,6.214821539,0,0,1.95520039,
2.926124712,3.764198849,0,0,1.554826783,0,2.659730269,1.406082194,0,3.416491096,5.803545321,0,0,4.120471603,0,2.439564301,10.21446067,2.661346394,1.297324055,0,2.40377094,0,7.668860402,3.942394077,11.1760031,3.14556229,1.254014401,5.203290985,3.088736519,3.342887714,2.878908183,0,0,10.90729647,2.334318467,11.23528784,8.65176068,8.894471732,6.511656246,11.18819934,12.07045642,0,11.66562412,14.97337823,0,3.315453761,0,0,5.745010823,0,1.5529849,0,0,0,2.605196984,0,2.179323699,10.8293647,2.333539385,
3.84803047,0,1.590756464,6.423117983,3.823534849,6.291064457,9.338345408,4.591353102,0,4.970459698,0,2.240129526,3.129602515,2.74723393,2.897552731,3.127952731,5.224779162,0,10.60008118,8.834968693,0,7.714209168,8.927274144,2.64689025,5.829492438,11.07595916,7.581909019,10.92167398,3.902410173,6.51597166,10.24957978,9.792578128,0,0,3.828838673,3.880683284,0,0,3.540808171,9.041403812,5.410529243,9.940230335,6.301857155,0,2.85410132],[2.607242384,0,3.725189149,1.316327062,1.666262603,0,5.911452658,
3.266140317,0,2.455308789,0,0,0,0,0,1.554826783,0,4.083847062,1.406082194,0,0,3.238606292,5.785030695,0,0,1.962937906,5.351310615,4.674679689,1.221294271,3.819620521,1.4287038,0,0,0,2.35241283,5.795596951,0,2.366007313,0,0,0,0,0,0,4.189142917,0,2.02080583,8.444208985,5.678869408,4.666202349,5.562021792,2.782901878,6.771455434,3.3791203,0,11.49023737,3.315453761,0,0,3.526859546,0,0,0,0,0,0,6.682220941,0,3.18023001,0,0,0,0,1.571621765,2.429204831,0,1.916065792,0,0,0,1.586888663,2.240129526,0,1.94753258,
1.385653692,0,10.29832866,3.199364361,4.501664819,3.111909342,0,5.679889633,4.103861162,5.880066808,2.719532226,4.401509522,0,7.298865258,1.733606582,2.408805546,0,4.113062664,4.510440908,0,0,2.479401066,0,0,0,0,3.16787499,1.614406279,2.381429107,0,2.040985264],[2.961840268,1.192413264,7.182436851,0,0,4.370515798,0,0,0,0,0,0,0,1.090815163,1.812524025,0,0,3.540808171,2.573009698,1.612405897,0,0,0,0,0,0,0,0,1.221294271,4.982411585,0,2.894869795,5.517092631,6.1646071,1.61041097,6.522135663,1.361689044,
3.2188198,3.316228807,3.323227235,3.342887714,3.777352843,3.514784765,5.466692498,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.526859546,0,0,0,0,3.623018727,0,0,1.121990524,0,0,0,0,0,0,0,0,2.367619226,0,0,0,0,0,0,1.94753258,7.253733135,1.195550809,0,5.607300033,0,6.411050936,4.993357104,0,0,3.526859546,0,0,0,0,4.600258688,3.032789935,0,0,0,2.750747772,6.606342866,0,0,4.057402811,3.016531724,0,0,0,1.634715536,3.656338884,0],[0,0,3.430278729,2.799346774,0,0,4.696111716,0,1.792044962,0,0,0,0,0,0,1.554826783,0,3.166510337,
0,0,2.079226691,5.567226054,3.399737138,2.168803591,3.201119623,0,6.165840811,5.731922848,0,3.819620521,0,0,0,2.711021318,0,4.725443724,0,1.254014401,0,1.322794318,1.335934953,0,0,0,7.118225095,0,4.834050577,3.697779146,4.827679842,4.358409986,2.76135907,4.616440732,5.400439335,4.704781788,0,0,0,0,0,0,0,1.5529849,0,0,0,0,0,0,3.18023001,0,0,0,2.814800039,1.571621765,5.684779374,1.167924869,1.255175933,0,0,1.377092695,0,3.605634704,0,0,0,0,2.159049313,4.423836784,3.438628157,0,0,4.286771649,2.335878518,
0,5.513892971,6.714614328,3.074803839,4.818179987,0,0,2.917885603,4.113062664,6.380668075,0,0,1.717354877,0,1.358928018,0,1.844254505,4.444055644,3.741049922,0,0,1.354808925],[1.431779586,0,0,0,0,0,0,0,0,0,3.943779694,0,1.924937051,0,0,0,5.824881237,0,1.406082194,0,0,2.383886536,3.399737138,0,2.350033433,0,0,0,0,4.842817613,0,4.956192292,0,2.711021318,0,2.212993723,0,2.986448755,0,2.460612703,1.335934953,0,1.851024161,1.567855244,0,1.885737479,0,0,0,0,0,0,0,0,0,0,0,0,1.511899039,0,0,1.5529849,0,0,
2.735603919,0,0,0,0,0,1.419561476,0,0,0,0,2.24508439,0,1.191371277,0,1.377092695,2.324239181,0,0,3.934112064,2.079226691,0,0,4.889930328,1.569736026,3.883764286,2.210938675,0,0,0,0,0,0,0,4.600258688,4.0707841,0,0,0,0,1.214748986,5.318374759,0,1.358928018,0,5.791922011,4.215048346,0,1.634715536,2.109945405,2.50408572],[0,1.192413264,0,0,0,1.569736026,0,0,0,0,0,0,0,0,0,2.7684921,0,6.382784969,2.573009698,0,0,0,2.065128811,2.168803591,0,0,6.744089636,3.350844299,0,1.969178823,0,0,0,2.367619226,0,5.075843758,
0,1.254014401,0,1.322794318,0,0,0,0,4.894120843,0,3.346859325,5.423449347,5.915538363,2.555337332,4.592240978,5.181663838,4.742717456,4.059526708,0,0,0,0,0,0,0,0,0,0,2.25507312,0,2.733293055,0,9.203861059,0,2.94488983,0,4.400587408,4.228932508,7.783314196,1.804782814,4.912947454,0,0,2.885530704,0,3.605634704,0,0,1.385653692,0,1.450539436,2.348450405,3.438628157,2.02080583,0,4.076645958,2.335878518,0,5.513892971,5.110908034,3.074803839,3.868434131,0,0,2.097168659,3.194114467,4.348406658,0,0,0,0,0,
0,0,0,0,0,0,0],[0,0,1.784498863,0,0,1.569736026,2.040985264,0,1.792044962,0,0,0,0,0,0,4.814129086,0,7.685009678,2.104447385,1.612405897,0,0,3.399737138,0,0,0,6.48374445,5.11862266,0,1.297324055,0,0,0,3.420716548,0,5.357552005,0,0,0,1.322794318,2.017487427,0,0,0,5.553883032,0,4.02596074,4.951406876,6.020745326,3.966628542,4.408114953,7.372481007,6.087681547,4.308067937,0,3.746566479,0,0,0,0,0,0,0,0,2.25507312,0,4.376707911,0,8.729236982,0,2.94488983,0,4.400587408,4.373221247,7.351210478,1.167924869,
6.27207808,2.278309285,0,2.068632354,0,4.944631639,1.554826783,0,1.385653692,0,1.450539436,3.730999452,5.335214496,2.83110867,0,5.34633784,4.103861162,0,6.886531074,6.225458174,2.573009698,5.498815294,0,0,2.917885603,2.68589141,5.397879187,0,0,0,2.308177125,0,0,1.844254505,2.068632354,0,1.634715536,0,0],[0,0,2.558261645,1.316327062,0,1.569736026,5.140284292,0,0,0,0,0,1.262193429,2.134165238,0,5.627887308,0,4.083847062,1.406082194,1.612405897,0,0,0,0,0,0,0,5.11862266,1.873071327,0,0,0,0,1.255175933,
0,5.697915317,0,1.914596325,0,0,0,0,0,0,4.189142917,0,5.957962862,3.697779146,6.29692668,2.555337332,5.157127848,5.753315082,0,6.420204441,8.51555597,0,0,0,0,0,0,0,0,0,1.529467388,0,0,0,6.611381826,0,0,0,2.328878064,4.373221247,3.823534849,1.167924869,7.154516178,1.191371277,0,0,0,1.517123172,0,0,0,0,1.450539436,0,5.469465561,3.883764286,0,3.533813815,4.408909843,0,0,4.799379421,0,5.263596571,0,0,5.078391452,4.113062664,0,0,1.214748986,1.717354877,0,0,2.184629194,0,2.068632354,5.087025329,1.634715536,
1.410544518,0],[0,0,4.923142205,0,0,2.787748346,5.668012347,0,2.56708501,0,0,0,1.262193429,1.090815163,0,5.837982345,2.495790119,8.369759748,3.827953141,0,2.897552731,5.43276212,3.780189712,3.522245428,2.350033433,0,7.984204186,5.889527292,0,2.425775589,0,1.653483243,0,4.351732608,0,7.651051691,0,3.594588248,0,1.322794318,0,0,0,0,7.739062817,1.231253532,6.436743374,8.110870074,8.345187499,5.232099142,6.356229318,8.393579734,8.392538732,6.570521936,0,5.979837894,2.801189549,0,0,3.003160341,0,1.5529849,
0,0,3.095446785,0,4.560645878,0,6.930355824,1.594645054,1.419561476,0,2.814800039,4.934790051,5.338912275,0,7.037541242,0,0,0,1.586888663,6.048255997,0,1.94753258,0,1.195550809,1.450539436,4.954831076,6.420308393,4.383889211,0,5.249332964,5.061286461,0,8.011133534,6.888130301,3.074803839,5.878311629,0,0,3.437769124,5.475028474,6.748696434,0,0,0,0,0,0,3.506233059,4.085292151,4.686067264,1.634715536,0,0],[0,0,3.969926522,0,0,0,6.697714591,2.408805546,0,0,0,0,1.262193429,0,0,0,1.731263898,2.659730269,
0,0,0,4.465781641,2.8815524,0,0,0,8.507128066,4.985265729,0,1.297324055,0,0,0,2.98819618,0,6.734093742,0,1.914596325,0,2.460612703,0,0,0,0,6.92706272,0,4.980986765,6.59706008,7.10838124,4.358409986,5.647687167,7.21002666,6.837969244,6.062439534,0,7.850584827,1.994606741,0,0,0,0,0,0,0,0,0,2.733293055,0,2.331205908,0,0,0,0,1.571621765,4.212869647,0,2.711021318,0,0,0,0,0,0,0,1.385653692,0,2.987759068,3.39914311,5.335214496,1.338596694,0,4.778998396,7.48492479,0,5.829492438,5.584357216,0,3.868434131,
0,0,2.917885603,3.866607,5.31255337,0,0,0,0,0,0,0,3.606691969,4.686067264,2.381429107,0,0],[0,0,0,0,0,0,0,0,0,0,3.267999173,0,9.497209808,0,4.561513432,0,0,0,0,0,0,0,0,0,0,0,0,0,4.856125012,4.318348466,5.740211665,0,1.144473079,2.98819618,3.735557761,0,0,0,0,5.52497401,3.1080144,0,4.361537796,0,0,5.506982492,0,0,0,1.781999348,1.959834467,0,0,0,0,0,0,7.245836901,4.750924052,0,1.385653692,0,0,0,5.409711144,2.134165238,0,3.010569242,0,1.594645054,2.121043177,0,0,0,1.674904626,1.167924869,1.255175933,
1.191371277,4.500203927,0,0,0,8.573059998,1.94753258,3.955696773,3.50113091,0,1.898600356,0,6.411050936,4.259183612,0,0,0,0,0,0,0,0,2.754273197,0,0,0,4.491209918,7.353001114,5.475028474,0,6.808785458,0,4.603837708,0,0,5.687237536,0,4.780297015],[0,1.192413264,4.361761497,0,0,0,5.262402246,2.408805546,1.792044962,0,1.28620039,0,1.262193429,0,0,4.480124818,1.731263898,7.419646466,2.104447385,1.612405897,0,4.465781641,4.329717796,2.998738351,0,0,9.192467398,4.985265729,0,2.772076473,0,0,0,4.535518061,
0,6.632003768,0,3.892431393,0,1.322794318,0,0,0,0,7.987966359,0,5.885183269,7.980122471,8.054415379,4.666202349,6.714880751,7.884439905,6.962448848,6.310520191,0,2.850235379,3.315453761,0,0,3.526859546,0,0,0,0,1.529467388,0,4.165843825,0,7.691011772,0,2.590991323,0,3.708455948,5.337986896,6.43506707,0,6.297739898,2.278309285,0,0,1.586888663,4.545126266,0,1.94753258,1.385653692,0,2.987759068,4.596479618,6.516506593,3.72600458,0,3.533813815,5.374546744,0,7.136117589,6.159261819,1.797115738,6.036192306,
0,0,3.81913209,3.194114467,4.909566239,0,0,0,0,0,0,2.62792129,5.410529243,4.996742825,0,0,0],[1.431779586,1.192413264,7.880923178,5.25768292,0,2.787748346,9.542157984,5.462819554,4.679792075,3.317392333,0,3.446387271,4.924604901,1.090815163,0,5.78825675,5.161999879,8.937702497,3.64974824,2.354798077,4.908441047,9.346046121,7.004372567,4.856588768,4.425714633,2.764919656,12.38547351,9.607591278,3.542563074,7.267359987,0,0,1.144473079,8.277485709,3.735557761,10.5845355,2.863826449,6.65424923,4.241927639,
6.769614506,3.721932779,1.640918907,0,0,10.93720469,0,9.287373505,11.17889217,11.33366338,8.647458426,10.02038587,11.53987154,11.64940898,9.985186151,0,9.531635732,6.35044447,0,0,6.412959757,0,3.655971809,1.888578717,0,3.8285856,1.430239906,6.21812878,0,10.06278604,1.594645054,3.84803047,1.458514165,6.15830744,6.046332965,9.315070092,2.24508439,8.211513698,4.428889598,0,1.377092695,2.324239181,6.792720629,4.480124818,5.545791903,4.744508356,3.127952731,6.424955845,8.41235756,10.18535347,8.179863449,
1.493074462,10.97411484,9.712624461,2.172734535,11.26391502,10.90723852,6.643999024,9.896908992,2.995800011,5.149046272,8.963938347,9.392737401,9.695379979,3.02915668,2.311215911,2.479401066,4.071271565,0,3.016531724,5.219920851,7.465312124,8.258116734,6.301857155,3.99325527,2.85410132],[0,0,6.216253721,3.31351837,1.666262603,2.787748346,8.719596731,5.833762524,3.439917863,0,0,2.926124712,3.764198849,0,0,0,0,1.871675903,1.406082194,0,2.079226691,6.265837555,0,2.168803591,5.649049992,0,0,8.718517118,
3.168216406,0,0,2.40377094,0,5.21183093,3.203757507,9.025139562,2.049532294,2.366007313,3.759667491,6.161294576,3.721932779,1.640918907,0,0,8.968666793,1.231253532,9.214980013,7.291756619,9.382984205,5.488721907,9.16303155,9.888832766,0,9.604422513,12.19448952,0,3.99325527,0,0,3.526859546,0,0,2.679289883,0,3.095446785,0,1.935406473,0,9.583325451,0,2.121043177,0,4.400587408,3.888178831,8.884143735,3.879285317,8.20474749,3.319889474,0,2.534144363,0,0,1.554826783,2.74723393,2.079226691,2.623232518,4.052930578,
3.574592237,10.30242304,6.872926631,1.493074462,8.882335744,8.045256717,1.461730735,5.325751405,9.378142081,5.343548546,9.219744746,2.995800011,2.408805546,7.869050191,8.175142711,0,0,4.28496235,2.975444667,0,0,2.184629194,8.133361856,7.299661556,8.286974483,5.564249792,5.022772646,2.040985264],[0,0,1.784498863,0,0,0,0,0,0,0,0,0,0,0,0,3.129602515,0,5.829115441,0,0,0,0,2.065128811,0,0,0,4.22489809,3.730089796,0,1.969178823,0,0,0,3.220604739,1.61041097,3.048363022,0,0,0,1.322794318,1.335934953,0,0,
0,2.754273197,0,2.83110867,2.804884553,4.267898313,1.781999348,3.273593502,4.616440732,4.434198304,3.3791203,0,3.746566479,1.994606741,0,0,0,0,0,0,0,2.25507312,0,3.918795874,1.745427173,5.626062257,0,1.419561476,0,2.328878064,3.152109798,4.650925763,0,4.69851443,0,0,0,0,3.078744666,0,0,0,0,1.450539436,1.898600356,4.370515798,3.111909342,0,3.533813815,3.716524438,0,5.513892971,4.152063608,0,3.868434131,0,0,3.81913209,3.194114467,3.95678572,0,0,0,0,0,0,1.844254505,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1.95520039,
0,8.118541821,1.090815163,6.206805768,0,0,0,0,0,0,0,0,0,0,0,0,0,3.542563074,3.819620521,5.256446193,0,0,3.89429641,1.61041097,0,0,1.254014401,0,4.130643992,4.829800069,0,5.278343442,0,0,4.733705155,0,0,0,0,0,0,0,0,0,0,0,7.38696452,3.358854664,2.172734535,1.385653692,0,0,1.46012053,5.800045187,3.244061423,1.935406473,1.121990524,0,0,0,0,0,0,3.580737915,0,0,1.834870601,4.140691561,0,0,0,7.422423382,0,3.797347749,1.840219556,0,1.241386551,1.569736026,6.461986259,3.332623469,0,0,0,0,0,0,0,0,0,0,0,0,3.02915668,
5.478749586,3.343879368,0,6.788505178,0,1.844254505,0,0,3.768880774,0,3.37097252],[0,0,1.784498863,1.316327062,0,2.303636946,0,0,0,0,0,2.104447385,0,0,0,3.864522096,2.992869351,3.540808171,0,0,0,3.238606292,2.065128811,0,0,0,4.783910899,2.024136906,0,1.297324055,0,0,0,2.367619226,0,0,0,2.709327299,0,0,0,0,0,0,0,0,0,0,4.267898313,0,1.959834467,4.926557629,5.715519796,4.059526708,0,3.746566479,0,0,0,2.172734535,0,1.5529849,0,0,0,0,1.935406473,1.121990524,0,0,0,0,0,1.571621765,2.429204831,0,2.367619226,
0,0,0,0,3.366110529,0,1.94753258,1.385653692,0,1.450539436,2.348450405,3.438628157,2.02080583,0,3.830611616,4.408909843,0,3.605634704,5.366967571,0,2.963977331,0,0,0,0,3.417546061,1.282537517,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,2.451788443,0,0,0,0,0,0,1.95520039,0,1.924937051,0,0,4.044732979,7.974873692,0,3.64974824,0,3.416491096,6.098254231,0,0,0,1.962937906,5.757485889,0,0,0,2.13227898,0,0,1.255175933,4.123261,0,0,6.345758458,2.672729483,0,0,5.03472903,0,1.567855244,0,0,0,0,0,2.555337332,0,0,0,0,0,0,
4.636949199,0,0,3.526859546,0,0,0,0,0,0,0,0,0,0,1.419561476,0,0,0,0,1.167924869,1.255175933,1.191371277,0,10.54246637,0,6.341176101,0,3.635588574,0,0,10.83717288,0,0,6.461986259,4.389821626,1.866117748,5.061286461,0,8.91123296,11.75686132,9.875163881,4.632822139,8.017585323,6.036836768,10.63586677,6.107160206,1.774547779,0,0,0,4.841368559,0,2.184629194,4.25812051,9.985528256,7.203511989,0,1.410544518,0],[2.607242384,2.279780641,0,0,1.666262603,0,0,0,0,2.455308789,2.410489481,0,3.764198849,3.620520142,
0,0,3.361872552,0,1.406082194,2.842544351,0,0,0,0,0,0,0,0,0,0,0,4.489236399,1.774547779,4.250242561,0,4.512111935,0,2.986448755,0,3.701772154,3.54482311,3.777352843,3.340058983,5.647196877,2.754273197,2.952062239,0,0,0,0,3.650844232,0,0,0,0,0,0,1.450539436,2.712718048,0,0,0,1.888578717,0,0,0,0,1.121990524,0,0,0,0,0,0,2.429204831,0,0,0,0,0,0,0,0,4.57634937,0,0,0,7.327489844,1.569736026,5.23638729,2.210938675,0,0,0,0,0,0,0,1.733606582,0,0,0,0,0,3.15801765,1.717354877,0,3.579495955,4.227317234,3.802541477,
0,0,0,6.891718222,4.051052201],[0,0,0,0,5.609580256,0,0,0,0,0,3.267999173,0,4.547056303,5.028499229,3.093845517,0,0,0,0,0,2.897552731,0,0,0,6.854919464,0,0,0,5.689276823,6.804610833,3.479267335,3.794471647,2.211623187,0,0,0,0,2.986448755,0,0,5.498484395,0,0,0,0,3.85569963,0,0,0,2.555337332,0,0,3.499434968,2.047816235,0,0,0,0,2.233797185,0,0,0,0,1.46012053,2.25507312,1.430239906,1.935406473,2.179323699,0,4.101113517,2.590991323,3.284108206,0,0,4.650925763,0,0,2.617013534,0,0,0,0,6.897446821,8.605744063,
0,3.50113091,0,5.292751623,4.501664819,4.383889211,4.259183612,0,0,0,0,0,0,0,8.672343107,4.49516583,0,0,0,3.02915668,2.65168682,2.479401066,0,10.12313979,0,4.603837708,7.224602755,0,6.548923282,0,8.266100547],[0,1.192413264,6.01278502,4.873613724,1.666262603,0,7.577664117,4.189142917,3.439917863,0,0,0,4.15244441,0,0,6.021335104,3.899283315,7.228204647,2.573009698,0,5.311418736,7.638886473,4.329717796,2.998738351,3.201119623,3.65468791,9.826675029,8.065395484,0,5.169340701,0,2.40377094,0,6.27207808,
4.123261,8.495855027,1.361689044,4.843020605,2.672729483,4.460809457,4.021826362,0,0,3.147069949,8.935181988,0,7.551087933,9.213868199,9.291333673,5.488721907,8.290658139,9.547007911,9.835057386,10.6963653,0,7.549479764,3.693798993,0,0,4.212869647,0,0,0,0,3.623018727,0,5.980639838,0,8.475079652,0,2.94488983,0,5.13771792,4.624606221,7.853391641,1.167924869,6.733478455,2.891124637,0,0,1.586888663,6.202137508,0,5.712281331,2.897552731,0,4.928973727,7.277622004,10.2728869,6.872926631,2.210938675,8.176720638,
9.46240706,1.461730735,8.614935993,9.792637462,3.98654611,8.997755545,3.364898134,1.284976959,7.889142362,7.206908181,7.512527651,1.950591407,0,0,2.308177125,1.358928018,0,3.802541477,5.984140876,6.151840409,3.526859546,2.109945405,1.354808925],[0,3.920180613,3.725189149,7.285333305,0,1.569736026,11.27111573,0,0,6.271148941,0,0,1.262193429,0,0,6.494212166,1.731263898,7.007415012,1.406082194,0,13.12184158,5.284465404,7.004372567,9.508335009,0,10.59425698,5.185796394,7.326512203,3.698665367,0,0,5.714304486,
0,0,7.600050267,4.512111935,0,8.319941023,2.672729483,0,0,7.629603593,0,2.301374909,2.754273197,0,12.11181266,0,3.877609802,4.666202349,5.157127848,0,8.392538732,3.3791203,0,0,5.314912919,0,0,0,0,0,0,0,0,0,0,0,2.331205908,0,0,0,0,6.002620862,0,1.167924869,4.84495056,7.125561025,0,0,0,8.701375844,0,0,0,0,1.450539436,0,0,0,0,0,0,0,0,0,0,0,0,1.953661285,0,0,0,0,0,0,0,0,3.540808171,1.844254505,0,1.614406279,0,0,2.50408572],[0,1.836204539,3.969926522,5.365918206,0,2.787748346,3.750720028,0,0,3.317392333,
1.28620039,2.926124712,1.262193429,0,0,5.736755885,5.49452847,4.083847062,0,0,8.308926148,6.00654801,4.541824162,7.173493692,0,9.407821936,7.324558932,4.278349686,1.221294271,0,0,6.946234867,0,0,4.990992123,0,0,5.781795617,0,0,0,5.125085065,0,0,0,0,7.376234936,3.697779146,2.476695351,3.056075924,2.76135907,0,2.621674279,5.149046272,3.96333911,0,4.636949199,0,0,3.526859546,0,1.5529849,0,0,0,0,0,0,0,2.819792025,1.419561476,0,7.357357291,6.550010548,0,1.167924869,3.420716548,9.668140814,0,10.39108571,
1.586888663,7.365214591,1.554826783,1.94753258,0,0,9.869041819,0,1.569736026,5.34891761,4.259183612,0,4.103861162,0,6.886531074,10.42362357,8.158122222,2.963977331,5.63915138,3.466949588,8.693886794,5.287009679,7.968060061,0,2.311215911,0,3.154638024,0,3.016531724,0,7.705063709,5.715519796,0,0,0],[0,0,0,2.451788443,0,0,0,3.800230488,6.128572155,0,8.978988168,6.135595009,0,4.415419518,5.073105416,5.313234601,0,3.166510337,0,0,0,0,0,0,0,5.039316437,2.439564301,0,3.83951414,1.969178823,0,2.40377094,
2.818292015,1.255175933,0,0,0,2.366007313,0,2.808592225,2.47849835,0,1.851024161,0,2.754273197,5.372648029,2.02080583,0,0,2.555337332,0,0,0,4.059526708,0,0,0,2.987759068,5.723882117,0,1.385653692,0,0,3.000947168,2.735603919,0,0,1.745427173,3.18023001,0,4.149781155,2.998738351,0,0,7.550004155,3.084284864,3.420716548,3.121377237,0,0,0,0,2.285688951,1.94753258,2.079226691,0,1.450539436,2.690869819,3.149587113,0,0,0,0,0,0,0,0,0,0,1.953661285,0,0,0,0,0,0,0,6.126344967,0,0,0,1.614406279,0,0,0],[0,0,2.558261645,
5.466596974,0,0,0,7.118225095,0,0,0,2.104447385,0,0,0,1.554826783,0,0,0,0,2.079226691,2.383886536,0,0,2.350033433,7.245311565,3.300058915,6.539539444,1.221294271,3.819620521,0,0,0,6.322953225,2.839992687,0,0,1.914596325,0,3.088736519,0,0,0,0,0,1.231253532,0,11.10237258,3.340906893,4.798531072,1.959834467,0,0,0,0,0,0,0,0,0,0,4.042109164,0,0,1.529467388,0,11.9548966,0,0,0,0,0,5.736439364,0,0,0,1.255175933,2.278309285,0,0,0,1.517123172,0,3.258734268,4.228198043,1.195550809,5.946229733,2.348450405,3.679313849,
3.72600458,2.210938675,0,0,2.172734535,0,0,0,11.2281929,0,3.466949588,5.984021501,8.188642594,3.95678572,0,1.214748986,0,2.308177125,0,2.184629194,3.132909221,3.606691969,4.289591121,0,0,1.354808925],[0,0,3.059175851,5.691272871,0,1.569736026,2.040985264,7.574821861,0,0,0,0,1.924937051,0,0,0,0,0,1.406082194,0,2.897552731,0,0,2.168803591,0,8.140366707,0,4.985265729,2.936928025,5.740877225,0,0,0,4.141069016,1.61041097,0,1.361689044,0,1.481358206,0,1.335934953,0,0,0,0,0,0,11.30716331,2.476695351,4.175777728,
2.76135907,3.674088391,0,0,0,0,4.241111619,0,0,2.172734535,0,4.907541568,1.888578717,0,3.095446785,0,11.69951119,0,0,0,0,0,6.578446731,1.571621765,0,1.167924869,2.98819618,1.834870601,0,0,0,1.517123172,1.554826783,1.94753258,3.619450877,0,6.424955845,0,2.787748346,3.54885136,0,0,0,0,2.719532226,0,0,12.34003742,1.733606582,4.189142917,7.828006386,9.687147433,4.348406658,0,0,1.717354877,0,2.046103514,0,3.132909221,3.403903641,3.741049922,1.634715536,0,2.040985264],[1.431779586,2.618564793,9.572494082,
8.354815942,1.666262603,3.679313849,0,4.49516583,4.371867824,6.271148941,0,11.93608274,0,0,0,1.554826783,2.992869351,4.919116898,2.104447385,4.286771649,2.079226691,13.96359004,13.13382633,4.45805522,14.25761366,12.14205617,0,11.50019731,5.48997353,5.281730688,0,10.54964422,4.510440908,1.916065792,5.166217225,0,0,1.914596325,2.672729483,0,0,0,1.204003557,2.301374909,0,5.17154437,2.02080583,0,6.84743639,6.062934608,4.902157249,0,0,0,3.96333911,6.458718649,0,0,2.712718048,0,0,2.283469031,1.888578717,
1.46012053,0,2.134165238,3.918795874,0,2.331205908,0,2.121043177,1.458514165,3.177645127,8.223182989,1.674904626,0,3.89429641,5.256528169,0,4.444055644,3.172492646,10.35753767,6.966142118,3.934112064,6.911150334,1.195550809,11.21392444,3.574592237,4.226241501,4.754560657,8.514876907,9.974831857,5.947870554,10.72769658,0,0,2.573009698,9.674768755,8.704868748,6.51597166,11.89091832,0,1.774547779,7.282882644,9.458968628,3.637105643,0,2.509654215,2.184629194,5.981308477,1.377092695,3.499434968,0,5.923660085,
5.834781143],[1.431779586,1.192413264,0,4.718927108,0,4.501664819,0,7.162304506,1.792044962,0,3.943779694,0,2.377347064,2.134165238,2.590991323,0,7.543919978,7.007415012,0,0,2.897552731,4.160084164,0,0,0,0,0,0,1.873071327,4.982411585,2.13227898,0,0,4.141069016,2.35241283,0,0,2.986448755,0,0,0,0,0,1.567855244,0,1.231253532,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1.121990524,0,0,0,2.168803591,0,1.571621765,1.674904626,1.167924869,0,1.191371277,0,0,2.324239181,0,4.044732979,0,0,0,0,1.241386551,5.705455517,
3.111909342,0,5.679889633,0,0,0,0,1.797115738,3.485952495,0,0,0,0,0,2.405446283,0,0,0,4.613188524,0,1.844254505,2.068632354,4.434198304,0,2.109945405,1.354808925],[0,0,5.411588681,2.451788443,1.666262603,3.679313849,0,9.005430964,3.068526802,0,4.191103607,2.104447385,3.231372253,2.134165238,0,0,6.898806526,3.837728571,0,0,0,0,0,0,5.762313958,0,0,0,0,5.529493161,2.603155617,0,0,5.746973142,3.494023898,0,0,4.533604761,1.481358206,0,2.017487427,3.244061423,0,0,0,0,0,0,2.476695351,0,0,0,0,0,0,0,0,0,2.233797185,
0,0,0,0,0,2.735603919,2.605196984,0,0,0,0,0,0,0,3.152109798,2.921997488,0,1.255175933,1.834870601,0,0,1.586888663,0,8.630626934,0,1.385653692,0,0,1.241386551,2.787748346,0,0,4.911716941,0,0,0,0,2.573009698,8.093332221,2.995800011,1.953661285,0,0,9.072883619,0,1.214748986,3.343879368,0,6.867969916,0,0,3.784457154,7.054835054,0,2.578968745,0],[0,1.836204539,6.916529204,5.560705844,0,1.569736026,0,2.408805546,1.792044962,3.317392333,1.95520039,9.176317176,0,1.090815163,0,0,1.731263898,3.540808171,0,
4.12605646,0,11.27729476,9.962628962,0,11.68474144,11.33517187,0,9.624509553,3.36749764,3.819620521,1.4287038,8.548400241,3.417546061,0,2.35241283,0,0,0,0,0,0,0,0,0,0,3.558472286,0,0,2.476695351,3.056075924,2.76135907,0,0,0,3.052984456,4.691797695,0,0,1.511899039,0,0,1.5529849,2.679289883,0,1.529467388,0,1.935406473,0,3.18023001,0,2.94488983,0,4.256154097,5.957542834,0,0,3.220604739,3.790456203,0,4.334091189,1.586888663,8.642088679,5.570208734,0,3.797347749,0,8.857167078,2.967405176,1.569736026,2.83110867,
5.839489603,7.343191592,3.716524438,8.802884779,0,0,0,7.133972209,6.323185711,3.032789935,9.919180826,0,0,5.36157935,7.486517574,2.975444667,0,1.358928018,0,2.62792129,1.377092695,2.357189199,0,4.693521631,2.85410132],[0,0,0,3.691813713,0,0,0,4.189142917,1.792044962,3.317392333,0,0,0,0,0,2.7684921,6.440401912,7.0658601,1.406082194,0,0,2.383886536,8.199641089,2.168803591,0,4.412094224,7.511087906,7.555483079,1.221294271,0,0,0,0,0,5.166217225,3.048363022,0,2.366007313,2.196679237,0,0,4.165843825,0,
2.301374909,0,0,2.02080583,0,5.042796229,1.781999348,2.76135907,0,5.85052519,0,0,2.850235379,0,0,0,2.172734535,0,4.042109164,0,0,1.529467388,0,0,0,0,0,0,0,0,3.681934901,0,0,5.630629399,0,0,5.909423458,1.586888663,0,0,0,6.201254421,0,0,0,0,2.482114093,0,3.533813815,3.185417178,2.172734535,0,8.073907914,0,0,0,0,0,2.68589141,4.909566239,0,1.864734062,0,3.154638024,0,3.924517728,0,0,0,0,4.136170705,0],[1.431779586,0,0,6.209947215,0,2.303636946,0,7.401762269,6.178487015,3.853288573,0,0,0,1.704821959,1.812524025,
4.480124818,6.621287,5.759994393,2.104447385,0,6.747543328,4.160084164,8.215185177,0,0,0,5.757485889,8.251155639,2.32039045,0,0,0,0,1.916065792,5.246445546,0,0,2.366007313,2.196679237,1.322794318,0,5.438721383,0,0,4.584271389,0,0,0,3.340906893,6.259456223,4.592240978,0,6.193080749,3.3791203,3.052984456,3.746566479,0,2.987759068,0,2.172734535,1.385653692,5.50739594,1.888578717,1.46012053,2.735603919,0,0,0,0,0,0,0,1.590756464,7.05690755,0,0,4.773589639,3.121377237,0,6.473452899,1.586888663,0,1.554826783,
3.635588574,6.293137868,0,0,0,3.149587113,1.338596694,0,3.830611616,0,5.963555245,0,7.399044894,8.778467531,0,0,0,5.984021501,5.070762648,8.335541755,0,2.311215911,0,2.308177125,2.509654215,4.227317234,2.62792129,8.204227363,1.614406279,0,2.578968745,0],[0,0,0,0,0,0,0,0,0,3.853288573,0,0,0,1.704821959,0,3.418179486,1.731263898,0,0,0,6.033778214,3.771698401,0,2.168803591,2.350033433,0,2.439564301,0,0,1.297324055,0,0,0,3.420716548,0,0,0,0,0,1.322794318,2.017487427,2.388819979,0,0,0,0,2.83110867,4.24519686,
2.476695351,1.781999348,8.95192476,4.220876189,6.701726243,0,0,0,4.636949199,0,4.142957954,4.675895148,0,1.5529849,0,0,0,0,0,0,3.18023001,0,0,0,0,1.571621765,0,0,3.753033567,1.191371277,0,2.068632354,1.586888663,1.517123172,3.129602515,1.94753258,0,0,2.159049313,1.241386551,2.787748346,2.482114093,0,3.533813815,0,2.172734535,5.829492438,3.850281247,2.573009698,4.170470135,0,0,0,0,0,0,0,0,0,0,0,0,0,2.357189199,0,0,0],[0,0,0,2.799346774,0,1.569736026,2.040985264,6.214821539,8.661567508,0,1.28620039,
2.104447385,0,0,1.812524025,1.554826783,0,0,0,0,0,0,2.065128811,0,0,0,0,0,1.221294271,0,1.4287038,2.40377094,1.144473079,2.367619226,0,0,0,1.914596325,1.481358206,2.001082698,4.021826362,0,1.851024161,0,0,1.885737479,0,0,0,0,0,0,0,4.308067937,0,0,0,2.159049313,1.511899039,0,0,2.766109149,0,0,3.095446785,0,0,1.121990524,0,0,2.121043177,0,2.814800039,7.495752552,0,0,1.916065792,5.99777011,0,1.377092695,6.602771375,0,0,1.94753258,6.968016407,1.195550809,0,1.898600356,0,0,3.332623469,0,0,10.08142504,
0,0,0,0,0,3.266140317,0,0,0,0,5.196414538,0,0,4.517857264,0,0,0,1.614406279,0,2.109945405,0],[0,0,0,5.605554037,0,0,0,7.699722019,5.786261579,0,0,5.456290025,0,1.090815163,0,0,0,6.018584933,0,0,0,3.238606292,0,0,0,0,0,0,1.873071327,1.297324055,0,1.653483243,0,0,1.61041097,2.212993723,0,0,0,3.088736519,0,4.471606333,2.29611755,2.301374909,3.643192729,1.885737479,0,0,3.340906893,0,0,0,0,0,0,0,0,0,3.358854664,0,2.079226691,1.5529849,0,0,0,1.430239906,0,0,0,0,1.419561476,0,0,6.283978741,0,0,0,1.834870601,
0,4.895011416,3.703106027,0,1.554826783,1.94753258,4.559531286,0,0,1.241386551,1.569736026,0,0,0,0,4.0694851,3.605634704,0,0,0,0,3.032789935,0,0,0,0,1.214748986,0,3.684561532,3.756976488,0,0,6.420626178,3.947945664,0,1.410544518,0],[0,0,0,9.404294507,0,0,0,7.246617758,8.713280691,0,1.95520039,0,1.262193429,1.704821959,4.399205452,0,0,5.04066863,0,0,0,0,0,0,2.350033433,0,0,0,1.221294271,0,0,4.001933649,0,1.916065792,2.839992687,0,0,3.594588248,2.196679237,1.322794318,3.1080144,0,1.851024161,2.301374909,
0,1.885737479,0,0,0,0,1.959834467,0,0,0,5.892249192,0,0,4.326546321,4.417540006,0,0,2.283469031,2.679289883,2.644765483,4.776898533,2.959707294,0,0,0,0,3.466007268,0,0,8.402065998,0,2.24508439,2.711021318,4.245781516,0,6.308789707,5.557415738,0,2.285688951,4.181329765,7.191417465,0,0,1.898600356,4.065919631,3.54885136,0,4.286771649,0,7.279712389,0,0,0,0,0,0,0,0,0,1.950591407,4.630991991,0,0,7.284750801,0,1.844254505,5.830624043,2.845102004,0,6.419153128,2.50408572],[0,0,0,2.451788443,0,0,0,6.821059191,
6.836687811,2.455308789,1.95520039,0,1.262193429,0,2.590991323,0,0,5.353803769,0,0,0,3.238606292,0,0,0,0,0,0,1.221294271,1.297324055,0,2.894869795,0,3.753033567,1.61041097,0,0,1.914596325,0,1.322794318,0,0,1.204003557,1.567855244,0,2.676004571,0,0,0,0,1.959834467,0,2.621674279,0,0,0,0,1.450539436,3.358854664,0,1.385653692,1.5529849,0,0,2.25507312,1.430239906,0,0,0,0,0,1.458514165,0,6.246991173,0,0,0,0,0,5.564557384,2.324239181,0,0,3.258734268,5.055632307,1.195550809,0,3.39914311,0,2.482114093,0,0,
0,6.003554897,0,0,0,0,0,0,0,0,1.774547779,1.282537517,2.65168682,0,0,4.41577813,0,0,0,0,0,0,1.354808925],[0,1.836204539,0,6.979411351,1.666262603,0,7.320832174,13.47752713,6.955971935,2.455308789,0,4.378648964,1.924937051,0,0,3.658543633,1.731263898,3.540808171,0,0,5.626062257,3.771698401,0,0,0,3.953521681,0,3.730089796,1.221294271,1.297324055,0,0,0,3.89429641,1.61041097,0,0,0,0,0,0,0,0,0,0,0,4.670434283,5.206648839,3.340906893,2.555337332,8.934986157,4.220876189,0,2.861874491,0,2.850235379,3.315453761,
0,0,0,0,0,1.888578717,1.46012053,1.529467388,0,8.884937958,1.745427173,4.654982428,0,2.590991323,2.168803591,0,2.305904344,0,1.167924869,4.773589639,1.834870601,0,0,0,2.240129526,7.662137036,0,5.672425342,0,6.171070535,4.118615362,3.438628157,3.72600458,4.389821626,3.533813815,0,3.288643503,6.405973351,4.152063608,3.446387271,3.485952495,5.995274152,1.284976959,4.120471603,0,0,1.282537517,2.926952007,3.880683284,0,1.358928018,0,7.240877818,0,3.209051333,1.634715536,10.84429719,0],[0,0,3.059175851,
1.316327062,0,0,0,2.408805546,0,2.455308789,1.95520039,0,0,1.704821959,0,0,1.731263898,3.166510337,2.104447385,0,8.035020769,4.160084164,2.065128811,6.347303882,2.350033433,2.764919656,0,6.27960346,1.221294271,0,0,0,0,0,1.61041097,0,0,0,0,0,0,2.388819979,0,0,2.754273197,0,4.02596074,0,2.476695351,2.555337332,0,0,3.499434968,0,0,0,0,0,0,3.003160341,0,2.283469031,0,0,0,0,0,0,0,0,0,0,0,0,1.674904626,0,5.986713889,2.617013534,0,7.384863039,0,5.513892971,0,0,0,0,7.431097422,1.898600356,0,3.346859325,0,
0,0,0,3.605634704,8.09176372,0,0,1.733606582,0,6.056881974,0,0,0,0,0,0,0,0,1.844254505,3.16787499,5.087025329,0,0,2.040985264],[2.961840268,1.192413264,3.430278729,9.853300258,0,0,0,8.302205581,4.5340297,0,2.410489481,0,0,0,2.590991323,0,2.992869351,0,0,0,0,0,5.510518515,0,0,0,0,4.674679689,1.221294271,6.418663992,0,6.367110049,1.144473079,4.022952592,3.494023898,0,0,2.709327299,0,0,2.017487427,0,0,2.301374909,0,1.885737479,0,0,0,4.358409986,4.408114953,0,2.621674279,2.861874491,0,0,1.994606741,2.159049313,
0,8.444470042,0,0,0,1.46012053,4.168411949,0,0,0,0,0,0,2.642645028,0,1.571621765,1.674904626,0,0,2.278309285,0,7.478294727,4.250663922,0,2.285688951,4.739539538,7.466027109,3.127952731,7.646067294,0,0,1.338596694,2.688101136,2.653290576,0,4.675895148,0,0,5.585854981,0,0,4.584271389,2.917885603,9.788150887,9.154836494,4.066891048,3.15801765,0,8.754319795,3.756976488,0,4.603837708,2.068632354,9.59270747,0,3.99325527,1.354808925],[2.136055426,0,0,8.845541465,0,0,0,5.720391696,1.792044962,0,1.95520039,
0,0,0,0,0,2.992869351,0,0,0,0,0,2.8815524,0,0,0,0,4.030108559,1.221294271,4.318348466,0,4.741524853,0,1.255175933,2.35241283,0,0,0,0,0,0,1.640918907,0,2.301374909,0,0,0,0,3.340906893,1.781999348,0,0,4.041235755,0,0,0,0,0,1.511899039,6.910471793,1.385653692,0,0,1.46012053,3.095446785,0,0,0,0,0,0,2.642645028,0,0,0,0,0,0,0,5.238068927,2.809830944,1.517123172,0,4.57634937,4.828801899,0,4.928973727,0,0,0,1.493074462,1.866117748,0,2.172734535,0,0,0,0,0,0,4.582003125,5.717825408,7.371984904,3.02915668,2.65168682,
0,6.172852405,2.046103514,0,2.62792129,0,4.797226964,0,2.109945405,0]];this._cols="100365 100403 100476 100489 100618 100636 100704 100716 100722 100749 100759 100782 100798 100855 100857 100889 102020 102025 102027 102037 102105 102106 102132 102133 102158 102174 102184 102209 102421 200069 200079 200108 200127 200134 200140 200154 200158 200160 200161 200165 200167 200169 200170 200172 200196 200235 200244 200314 200327 200328 200330 200331 200347 200365 200367 200381 200392 400555 401017 401201 401593 401596 401600 401601 401605 401609 401704 401705 401727 401728 401732 401736 401739 401740 401754 401757 401760 401764 401796 401856 401869 401884 600620 600627 600646 600654 600683 600710 600761 600763 600765 600776 600782 600789 600803 600807 600813 600819 600901 600909 600917 600967 600970 600984 601007 601017 601021 601036 601045 601046 601053 601160 601186 601208 602054".split(" ");
this._observationType="Control Control Case Control Control Case Case Case Control Case Case Control Control Case Control Case Control Control Case Control Case Case Control Control Case Case Case Control Control Case Case Case Control Case Case Case Control Control Control Control Control Control Control Control Case Control Case Case Case Case Case Case Case Case Case Case Case Control Control Control Control Case Control Case Case Case Case Case Case Control Control Control Case Case Case Case Case Control Control Case Case Case Case Control Case Control Case Case Case Control Control Case Case Control Case Case Case Case Control Control Control Control Case Case Control Control Control Case Case Case Case Case Control Case Case".split(" ");
this._ageRange="12 - 18;12 - 18;6 - 12;18 - 24;12 - 18;24 - 60;12 - 18;18 - 24;18 - 24;12 - 18;24 - 60;24 - 60;24 - 60;18 - 24;24 - 60;6 - 12;12 - 18;6 - 12;6 - 12;18 - 24;0 - 6;6 - 12;6 - 12;0 - 6;18 - 24;6 - 12;0 - 6;0 - 6;18 - 24;24 - 60;24 - 60;6 - 12;24 - 60;24 - 60;12 - 18;6 - 12;12 - 18;12 - 18;12 - 18;18 - 24;24 - 60;6 - 12;24 - 60;12 - 18;6 - 12;24 - 60;6 - 12;6 - 12;6 - 12;6 - 12;0 - 6;6 - 12;6 - 12;6 - 12;6 - 12;0 - 6;0 - 6;24 - 60;24 - 60;6 - 12;24 - 60;6 - 12;6 - 12;24 - 60;24 - 60;24 - 60;0 - 6;24 - 60;0 - 6;24 - 60;18 - 24;24 - 60;6 - 12;6 - 12;24 - 60;24 - 60;6 - 12;6 - 12;24 - 60;12 - 18;18 - 24;0 - 6;24 - 60;24 - 60;24 - 60;24 - 60;6 - 12;24 - 60;24 - 60;24 - 60;24 - 60;18 - 24;6 - 12;24 - 60;0 - 6;6 - 12;12 - 18;18 - 24;18 - 24;18 - 24;6 - 12;6 - 12;12 - 18;24 - 60;24 - 60;12 - 18;18 - 24;24 - 60;6 - 12;12 - 18;12 - 18;24 - 60;24 - 60;24 - 60;18 - 24".split(";");
this._country="Gambia Gambia Gambia Gambia Gambia Gambia Gambia Gambia Gambia Gambia Gambia Gambia Gambia Gambia Gambia Gambia Gambia Gambia Gambia Gambia Gambia Gambia Gambia Gambia Gambia Gambia Gambia Gambia Gambia Mali Mali Mali Mali Mali Mali Mali Mali Mali Mali Mali Mali Mali Mali Mali Mali Mali Mali Mali Mali Mali Mali Mali Mali Mali Mali Mali Mali Kenya Kenya Kenya Kenya Kenya Kenya Kenya Kenya Kenya Kenya Kenya Kenya Kenya Kenya Kenya Kenya Kenya Kenya Kenya Kenya Kenya Kenya Kenya Kenya Kenya Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh".split(" ");
this._selectedRows=this._rows="316 319 327 396 397 411 440 2552 3384 5052 7349 10433 11630 12245 12817 13083 13536 13604 13661 13803 13871 13930 14782 15438 15597 16252 16382 17138 17411 19129 19270 20986 21611 21695 21761 22185 22345 22439 22475 23063 23209 23249 23294 23652 24034 24342 25124 25350 26067 26436 27295 27589 29214 29323 30331 31069 36412 41738 41965 43072 43449 44327 49450 55106 58381 58640 59842 62910 62990 62991 63503 63551 64795 64796 64986 64988 66023 70246 71135 71612 71624 71660 71687 71691 74643 75427 80484 80563 80645 83740 89655 91091 92355 92969 100517 102968 106895 108037 110457 121102 123236 134492 137811 142181 142560 153986 154352 154508 162189 162210 162397 170809 172372 182738 196401".split(" ");
this._selectedRowsRanges=this._rows.map(function(a,b){return[b,1]});var a=this,b=[];this._cols.forEach(function(c,d){var e=new epiviz.measurements.Measurement(c,a._cols[d],epiviz.measurements.Measurement.Type.FEATURE,"metagenomics","metagenomics",a.id(),null,"heatmap",{observationType:a._observationType[d],ageRange:a._ageRange[d],country:a._country[d]},0,15,["colLabel","bacteria","ancestors","lineage"].concat(epiviz.data.MetagenomicsDataProvider.LEVEL_NAMES));b.push(e)});this._measurements=b;var c=
{};this._cols.forEach(function(a,b){c[a]=b});this._colsIndices=c;var e={};this._rows.forEach(function(a,b){e[a]=b});this._rowIndices=e;this._hierarchy=null;this._hierarchyPathsMap={};this._ancestryMap={};this._taxonomyMap={};this._selectedPaths=[];this._selectedAncestry=[];this._selectedTaxonomy={};var d=epiviz.data.MetagenomicsDataProvider.LEVEL_NAMES;this._nodeMap={};this._nodeNameMap={};this._nodeRangeMap={};this._maxDepth=5;this._lastRootId=null;d3.json("tree.json",function(b,c){a._hierarchy=
c;epiviz.ui.charts.tree.Node.dfs(c,function(b){a._nodeMap[b.id]=b;a._nodeNameMap[b.name]=b});epiviz.ui.charts.tree.Node.dfs(c,function(b){b.depth=b.globalDepth;b.taxonomy=d[b.globalDepth];if(b.parentId){var c=a._nodeMap[b.parentId],e=b.id,f="",n={};for(n[d[b.globalDepth]]=b.name;c;)e+=","+c.id,f+=","+c.name,n[d[c.globalDepth]]=c.name,c=a._nodeMap[c.parentId];a._hierarchyPathsMap[b.name]=e;a._taxonomyMap[b.name]=n;0<f.length&&(f=f.substring(1));a._ancestryMap[b.name]=f}else a._hierarchyPathsMap[b.name]=
b.id,a._ancestryMap[b.name]=""});d.forEach(function(b){a._selectedTaxonomy[b]=[]});a._selectedRows.forEach(function(b,c){a._selectedPaths.push(a._hierarchyPathsMap[b]);a._selectedAncestry.push(a._ancestryMap[b]);d.forEach(function(c){a._selectedTaxonomy[c].push(a._taxonomyMap[b][c]||"<NA>")})});a._updateOrder();a._updateSelection()})};epiviz.data.MetagenomicsDataProvider.prototype=epiviz.utils.mapCopy(epiviz.data.DataProvider.prototype);epiviz.data.MetagenomicsDataProvider.constructor=epiviz.data.MetagenomicsDataProvider;
epiviz.data.MetagenomicsDataProvider.LEVEL_NAMES="Kingdom Phylum Class Order Family Genus Species OTU".split(" ");
epiviz.data.MetagenomicsDataProvider.prototype.getData=function(a,b){var c=this,e=a.id(),d=a.get("action"),f=a.get("seqName"),n=parseInt(a.get("start")),h=parseInt(a.get("end"));a.get("datasource");var g=a.get("measurement"),l=epiviz.data.MetagenomicsDataProvider.LEVEL_NAMES,m,p;"metagenomics"!=f||isNaN(n)||isNaN(h)||this._selectedRowsRanges.forEach(function(a,b){a[0]<=h&&a[0]+a[1]>n&&(void 0==m&&(m=b),p=b)});switch(d){case epiviz.data.Request.Action.GET_ROWS:var t;if("metagenomics"!=f){t={globalStartIndex:null,
values:{id:[],start:[],end:[],metadata:{colLabel:[],bacteria:[],ancestors:[],lineage:[]}}};l.forEach(function(a){t.values.metadata[a]=[]});b(epiviz.data.Response.fromRawObject({data:t,requestId:e}));break}t={globalStartIndex:n,values:{id:epiviz.utils.range(p-m+1,n),start:c._selectedRowsRanges.map(function(a){return a[0]}).slice(m,p+1),end:c._selectedRowsRanges.map(function(a){return a[0]+a[1]-1}).slice(m,p+1),metadata:{colLabel:this._selectedRows.slice(m,p+1),bacteria:this._selectedRows.slice(m,p+
1),ancestors:this._selectedAncestry.slice(m,p+1),lineage:this._selectedPaths.slice(m,p+1)}}};l.forEach(function(a){t.values.metadata[a]=c._selectedTaxonomy[a].slice(m,p+1).map(function(a){return 15>=a.length?a:a.substr(0,12)+"..."})});b(epiviz.data.Response.fromRawObject({data:t,requestId:e}));break;case epiviz.data.Request.Action.GET_VALUES:var r=this._colsIndices[g];if("metagenomics"!=f||void 0==r){b(epiviz.data.Response.fromRawObject({data:{values:[]},requestId:e}));break}var q=this._selectedValues.map(function(a,
b){return a[r]});b(epiviz.data.Response.fromRawObject({data:{globalStartIndex:n,values:q.slice(m,p+1)},requestId:e}));break;case epiviz.data.Request.Action.GET_MEASUREMENTS:b(epiviz.data.Response.fromRawObject({requestId:a.id(),data:{id:this._cols,name:this._cols,type:this._measurements.map(function(a){return a.type()}),datasourceId:this._measurements.map(function(a){return a.datasourceId()}),datasourceGroup:this._measurements.map(function(a){return a.datasourceGroup()}),defaultChartType:this._measurements.map(function(a){return a.defaultChartType()}),
annotation:this._measurements.map(function(a){return a.annotation()}),minValue:this._measurements.map(function(a){return a.minValue()}),maxValue:this._measurements.map(function(a){return a.maxValue()}),metadata:this._measurements.map(function(a){return a.metadata()})}}));break;case epiviz.data.Request.Action.GET_SEQINFOS:b(epiviz.data.Response.fromRawObject({requestId:a.id(),data:[["metagenomics",0,this._rows.length]]}));break;case epiviz.data.Request.Action.GET_HIERARCHY:a.get("datasourceGroup");
this._lastRootId=q=a.get("nodeId")||this._hierarchy.id;var w=this._nodeMap[q],u=w.parentId?this._nodeMap[w.parentId]:w,q=epiviz.ui.charts.tree.Node.filter(u,function(a){return(a.globalDepth!=w.globalDepth||a==w)&&a.globalDepth-u.globalDepth<c._maxDepth});b(epiviz.data.Response.fromRawObject({requestId:a.id(),data:q}));break;case epiviz.data.Request.Action.PROPAGATE_HIERARCHY_CHANGES:a.get("datasourceGroup");e=a.get("selection");d=a.get("order");if(!e&&!d)break;if(e)for(q in e)e.hasOwnProperty(q)&&
q in this._nodeMap&&(this._nodeMap[q].selectionType=e[q]);if(d)for(q in d)d.hasOwnProperty(q)&&q in this._nodeMap&&(this._nodeMap[q].order=d[q]);this._updateOrder();this._updateSelection();w=this._nodeMap[this._lastRootId];u=w.parentId?this._nodeMap[w.parentId]:w;q=epiviz.ui.charts.tree.Node.filter(u,function(a){return(a.globalDepth!=w.globalDepth||a==w)&&a.globalDepth-u.globalDepth<c._maxDepth});b(epiviz.data.Response.fromRawObject({requestId:a.id(),data:q}));break;default:epiviz.data.DataProvider.prototype.getData.call(this,
a,b)}};epiviz.data.MetagenomicsDataProvider.prototype._updateOrder=function(){epiviz.ui.charts.tree.Node.dfs(this._hierarchy,function(a){a.nchildren&&a.children.sort(function(a,c){return a.order-c.order})})};
epiviz.data.MetagenomicsDataProvider.prototype._updateSelection=function(){var a=this._hierarchy,b=this._getNodeSelection(a),c=this,e=epiviz.data.MetagenomicsDataProvider.LEVEL_NAMES;this._nodeRangeMap={};var d={};epiviz.ui.charts.tree.Node.bfs(a,function(a){var b=d[a.globalDepth]||0;d[a.globalDepth]=b+a.nleaves;c._nodeRangeMap[a.name]=b});this._selectedRows=b.rows;this._selectedValues=b.values;this._selectedPaths=[];this._selectedAncestry=[];this._selectedRowsRanges=[];this._selectedTaxonomy={};
e.forEach(function(a){c._selectedTaxonomy[a]=[]});this._selectedRows.forEach(function(a){c._selectedPaths.push(c._hierarchyPathsMap[a]);c._selectedAncestry.push(c._ancestryMap[a]);e.forEach(function(b){c._selectedTaxonomy[b].push(c._taxonomyMap[a][b]||"<NA>")});c._selectedRowsRanges.push([c._nodeRangeMap[a],c._nodeNameMap[a].nleaves])})};
epiviz.data.MetagenomicsDataProvider.prototype._getNodeSelection=function(a){var b=epiviz.ui.charts.tree.NodeSelectionType;if(a.selectionType==b.NONE)return{rows:[],values:[]};if(!a.nchildren)return{rows:[a.name],values:[this._values[this._rowIndices[a.name]]]};var c=this,e={rows:[],values:[]};if(a.selectionType==b.LEAVES)return a.children.forEach(function(a,b){var d=c._getNodeSelection(a);e.rows=e.rows.concat(d.rows);e.values=e.values.concat(d.values)}),e;if(a.selectionType==b.NODE){e.rows=[a.name];
var d=[];a.children.forEach(function(a,b){var e=c._getNodeSelection(a);d=d.concat(e.values)});e.values=[d.reduce(function(a,b){for(var d=[],e=0;e<c._cols.length;++e)d.push(a[e]+b[e]);return d}).map(function(a){return a/d.length})];return e}};
epiviz.data.EpivizApiDataProvider=function(a,b,c,e,d){epiviz.data.DataProvider.call(this,a);this._serverEndpoint=b;this._measurementAnnotations=c;this._selection={};this._order={};this._selectedLevels=d||{6:epiviz.ui.charts.tree.NodeSelectionType.NODE,7:epiviz.ui.charts.tree.NodeSelectionType.NODE};this._lastRoot="";this._maxDepth=e||2};epiviz.data.EpivizApiDataProvider.prototype=epiviz.utils.mapCopy(epiviz.data.DataProvider.prototype);epiviz.data.EpivizApiDataProvider.constructor=epiviz.data.EpivizApiDataProvider;
epiviz.data.EpivizApiDataProvider.REQUEST_MAPPING={getRows:"rows",getValues:"values",getMeasurements:"measurements",getSeqInfos:"partitions",getHierarchy:"hierarchy"};epiviz.data.EpivizApiDataProvider.prototype.getData=function(a,b){if(!a.isEmpty()){var c=this,e=c._adaptRequest(a);this._send(e,function(d){b(c._adaptResponse(a,d))})}};
epiviz.data.EpivizApiDataProvider.prototype._send=function(a,b){var c=$.ajax({type:"post",url:this._serverEndpoint,data:a,dataType:"json",async:!0,cache:!1,processData:!0});c.done(function(a,c,f){b(a)});c.fail(function(a,b,c){console.error("The following error occured: "+b,c)});c.always(function(){})};
epiviz.data.EpivizApiDataProvider.prototype._adaptRequest=function(a){switch(a.get("action")){case epiviz.data.Request.Action.GET_MEASUREMENTS:return new epiviz.data.EpivizApiDataProvider.Request(a.id(),"measurements",{annotation:JSON.stringify(this._measurementAnnotations)});case epiviz.data.Request.Action.GET_SEQINFOS:return new epiviz.data.EpivizApiDataProvider.Request(a.id(),"partitions");case epiviz.data.Request.Action.GET_ROWS:var b=a.get("start"),c=a.get("end"),e=a.get("seqName");"[NA]"==e&&
(e="");return new epiviz.data.EpivizApiDataProvider.Request(a.id(),"rows",{start:b,end:c,partition:JSON.stringify(e),selection:JSON.stringify(this._selection),order:JSON.stringify(this._order),selectedLevels:JSON.stringify(this._selectedLevels)});case epiviz.data.Request.Action.GET_VALUES:var b=a.get("start"),c=a.get("end"),e=a.get("seqName"),d=a.get("measurement");"[NA]"==e&&(e="");return new epiviz.data.EpivizApiDataProvider.Request(a.id(),"values",{start:b,end:c,partition:JSON.stringify(e),measurement:JSON.stringify(d),
selection:JSON.stringify(this._selection),order:JSON.stringify(this._order),selectedLevels:JSON.stringify(this._selectedLevels)});case epiviz.data.Request.Action.GET_COMBINED:return b=a.get("start"),c=a.get("end"),e=a.get("seqName"),d=a.get("measurements")[this._id],"[NA]"==e&&(e=""),new epiviz.data.EpivizApiDataProvider.Request(a.id(),"combined",{start:b,end:c,partition:JSON.stringify(e),measurements:JSON.stringify(d),selection:JSON.stringify(this._selection),order:JSON.stringify(this._order),selectedLevels:JSON.stringify(this._selectedLevels)});
case epiviz.data.Request.Action.GET_HIERARCHY:return this._lastRoot=b=a.get("nodeId")||"",new epiviz.data.EpivizApiDataProvider.Request(a.id(),"hierarchy",{depth:this._maxDepth,nodeId:JSON.stringify(b),selection:JSON.stringify(this._selection),order:JSON.stringify(this._order),selectedLevels:JSON.stringify(this._selectedLevels)});case epiviz.data.Request.Action.PROPAGATE_HIERARCHY_CHANGES:var c=a.get("order"),e=a.get("selection"),f=a.get("selectedLevels");if(f){var n=this,h=[];$.each(this._selection,
function(a,b){var c=n._calcNodeDepth(a),d=f[c],c=n._selectedLevels[c];void 0!=d&&d!=c&&h.push(a)});h.forEach(function(a){delete n._selection[a]})}if(e)for(b in e)e.hasOwnProperty(b)&&(d=f[n._calcNodeDepth(b)],void 0==d&&(d=epiviz.ui.charts.tree.NodeSelectionType.LEAVES),e[b]==d?delete this._selection[b]:this._selection[b]=e[b]);if(c)for(b in c)c.hasOwnProperty(b)&&(this._order[b]=c[b]);if(f)for(var g in f)f.hasOwnProperty(g)&&(this._selectedLevels[g]=f[g],this._selectedLevels[g]==epiviz.ui.charts.tree.NodeSelectionType.LEAVES&&
delete this._selectedLevels[g]);return new epiviz.data.EpivizApiDataProvider.Request(a.id(),"hierarchy",{depth:this._maxDepth,nodeId:JSON.stringify(this._lastRoot),selection:JSON.stringify(this._selection),order:JSON.stringify(this._order),selectedLevels:JSON.stringify(this._selectedLevels)})}};
epiviz.data.EpivizApiDataProvider.prototype._adaptResponse=function(a,b){var c=b.result;switch(a.get("action")){case epiviz.data.Request.Action.GET_SEQINFOS:c=c.map(function(a){return null==a[0]?["[NA]"].concat(a.slice(1)):a});break;case epiviz.data.Request.Action.GET_ROWS:c.values.id=c.values.index;delete c.values.index;c.values.end&&(c.values.end=c.values.end.map(function(a){return a-1}));break;case epiviz.data.Request.Action.GET_COMBINED:c.rows.id=c.rows.index;delete c.rows.index;c.rows.end&&(c.rows.end=
c.rows.end.map(function(a){return a-1}));var e=Object.keys(a.get("measurements"))[0],d={};d[e]=c;c=d}return epiviz.data.Response.fromRawObject({requestId:a.id(),data:c})};epiviz.data.EpivizApiDataProvider.prototype._calcNodeDepth=function(a){return parseInt(a.split("-")[0],16)};epiviz.data.EpivizApiDataProvider.Request=function(a,b,c){this.id=a;this.method=b;this.params=c};epiviz.data.EpivizApiDataProvider.Response=function(a,b,c){this.id=a;this.error=b;this.result=c};epiviz.datatypes={};
epiviz.datatypes.SeqInfo=function(a,b,c){this.seqName=a;this.min=b;this.max=c};epiviz.datatypes.SeqInfo.prototype.raw=function(){return[this.seqName,this.min,this.max]};epiviz.datatypes.SeqInfo.fromRawObject=function(a){return new epiviz.datatypes.SeqInfo(a[0],parseFloat(a[1]),parseFloat(a[2]))};
epiviz.datatypes.SeqInfo.compare=function(a,b){if(a.seqName==b.seqName)return 0;if(void 0==a.seqName)return-1;if(void 0==b.seqName)return 1;var c=a.seqName.replace(/\D/g,""),e=b.seqName.replace(/\D/g,"");return""==c||""==e||!epiviz.utils.stringStartsWith(a.seqName,c)&&!epiviz.utils.stringEndsWith(a.seqName,c)||!epiviz.utils.stringStartsWith(b.seqName,e)&&!epiviz.utils.stringEndsWith(b.seqName,e)?a.seqName<b.seqName?-1:a.seqName>b.seqName?1:0:parseInt(c)-parseInt(e)};
epiviz.datatypes.GenomicArray=function(a,b,c,e){this._measurement=a;this._boundaries=b;this._globalStartIndex=c;this._values=e};epiviz.datatypes.GenomicArray.prototype.boundaries=function(){return this._boundaries};epiviz.datatypes.GenomicArray.prototype.globalStartIndex=function(){return this._globalStartIndex};epiviz.datatypes.GenomicArray.prototype.measurement=function(){return this._measurement};
epiviz.datatypes.GenomicArray.prototype.get=function(a){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicArray.prototype.size=function(){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicArray.prototype.getByGlobalIndex=function(a){return this.get(a-this._globalStartIndex)};epiviz.datatypes.GenomicArray.prototype.concatValues=function(a,b){throw Error("unimplemented abstract method");};
epiviz.datatypes.GenomicArray.prototype.createNew=function(a,b,c,e){throw Error("unimplemented abstract method");};
epiviz.datatypes.GenomicArray.prototype.merge=function(a){if(!a||void 0==a.boundaries())return this;if(this.boundaries().seqName()!=a.boundaries().seqName()||this.boundaries().start()>a.boundaries().end()||a.boundaries().start()>this.boundaries().end())throw Error("Two genomic arrays can only be merged if they overlap or are in continuation to one another");var b=this.boundaries().start()<a.boundaries().start()?this:a,c=b==this?a:this;if(b.boundaries().end()>=c.boundaries().end())return b;var e=void 0!=
b.globalStartIndex()&&void 0!=c.globalStartIndex()?b.globalStartIndex()+b.size()-c.globalStartIndex():0;a=b.measurement();var d=void 0!=b.globalStartIndex()?b.globalStartIndex():c.globalStartIndex(),f=epiviz.datatypes.GenomicRange.fromStartEnd(b.boundaries().seqName(),b.boundaries().start(),c.boundaries().end()),b=b.concatValues(c,e);return this.createNew(a,f,d,b)};
epiviz.datatypes.GenomicRangeArray=function(a,b,c,e,d){epiviz.datatypes.GenomicArray.call(this,a,b,c,e);this._id=e.id;this._start=e.start;this._end=e.end;this._strand=e.strand||null;this._metadata=e.metadata;this._size=null;if(d)for(a=1;a<this._start.length;++a)this._start[a]+=this._start[a-1],this._end&&(this._end[a]+=this._end[a-1])};epiviz.datatypes.GenomicRangeArray.prototype=epiviz.utils.mapCopy(epiviz.datatypes.GenomicArray.prototype);epiviz.datatypes.GenomicRangeArray.constructor=epiviz.datatypes.GenomicRangeArray;
epiviz.datatypes.GenomicRangeArray.prototype.createNew=function(a,b,c,e){return new epiviz.datatypes.GenomicRangeArray(a,b,c,e)};epiviz.datatypes.GenomicRangeArray.prototype.get=function(a){return 0>a||a>=this.size()?null:new epiviz.datatypes.GenomicRangeArray.RowItemWrapper(this,a)};
epiviz.datatypes.GenomicRangeArray.prototype.size=function(){void 0==this._size&&(this._size=Math.max(this._id?this._id.length:0,this._start?this._start.length:0,this._end?this._end.length:0,this._metadata&&Object.keys(this._metadata).length?Math.max.apply(void 0,$.map(this._metadata,function(a){return a.length})):0));return this._size};
epiviz.datatypes.GenomicRangeArray.prototype.concatValues=function(a,b){var c=null;if(Array.isArray(this._strand)||Array.isArray(a._strand)||this._strand!=a._strand)var c=Array.isArray(this._strand)?this._strand:epiviz.utils.fillArray(this.size(),this._strand),e=Array.isArray(a._strand)?a._strand:epiviz.utils.fillArray(a.size(),a._strand),c=c.concat(e.slice(b));else c=this._strand;var e=this._id?this._id.concat(a._id.slice(b)):null,d=this._start.concat(a._start.slice(b)),f=this._end?this._end.concat(a._end.slice(b)):
null,n={},h;for(h in this._metadata)this._metadata.hasOwnProperty(h)&&(n[h]=this._metadata[h].concat(a._metadata[h].slice(b)));return{id:e,start:d,end:f,strand:c,metadata:n}};
epiviz.datatypes.GenomicRangeArray.prototype.trim=function(a){if(void 0==this.globalStartIndex()||!this.size()||!a||!this.boundaries()||this.boundaries().seqName()!=a.seqName())return null;var b=Math.max(this.boundaries().start(),a.start()),c=Math.min(this.boundaries().end(),a.end());if(c<=b)return null;a=epiviz.datatypes.GenomicRange.fromStartEnd(a.seqName(),b,c);for(var c=b=-1,e=0;e<this.size();++e)0>b&&this.end(e)>=a.start()&&(b=e),this._start[e]<a.end()&&(c=e+1);if(c<=b)return null;var d;if(0<=
b&&c>=b){e={id:this._id?this._id.slice(b,c):null,start:this._start.slice(b,c),end:this._end?this._end.slice(b,c):null,strand:Array.isArray(this._strand)?this._strand.slice(b,c):this._strand,metadata:{}};for(d in this._metadata)this._metadata.hasOwnProperty(d)&&(e.metadata[d]=this._metadata[d].slice(b,c));d=this.globalStartIndex()+b}else{e={id:this._id?[]:null,start:[],end:this._end?[]:null,strand:Array.isArray(this._strand)?[]:this._strand,metadata:{}};for(d in this._metadata)this._metadata.hasOwnProperty(d)&&
(e.metadata[d]=[]);d=null}return new epiviz.datatypes.GenomicRangeArray(this.measurement(),a,d,e)};epiviz.datatypes.GenomicRangeArray.prototype.ranges=function(){return this};epiviz.datatypes.GenomicRangeArray.prototype.foreach=function(a){for(var b=this.size(),c=0;c<b&&!a(this.get(c));++c);};epiviz.datatypes.GenomicRangeArray.prototype.metadataColumns=function(){return this._metadata?Object.keys(this._metadata):[]};
epiviz.datatypes.GenomicRangeArray.prototype.id=function(a){return this._id?this._id[a]:this.globalStartIndex()+a};epiviz.datatypes.GenomicRangeArray.prototype.start=function(a){return this._start?this._start[a]:void 0};epiviz.datatypes.GenomicRangeArray.prototype.end=function(a){return this._end?this._end[a]:this.start(a)};epiviz.datatypes.GenomicRangeArray.prototype.strand=function(a){return Array.isArray(this._strand)?this._strand[a]:this._strand};
epiviz.datatypes.GenomicRangeArray.prototype.metadata=function(a,b){return this._metadata&&this._metadata[a]?this._metadata[a][b]:null};epiviz.datatypes.GenomicRangeArray.prototype.rowMetadata=function(a){var b={},c;for(c in this._metadata)this._metadata.hasOwnProperty(c)&&(b[c]=this._metadata[c][a]);return b};
epiviz.datatypes.GenomicRangeArray.prototype.toString=function(){var a,b,c;this.boundaries()?(a=this.boundaries().seqName(),b=this.boundaries().start(),c=this.boundaries().end()):a=b=c="*";a=sprintf("%25s",this.measurement().name().substr(0,22))+sprintf(" [%6s%10s%10s]",a,b,c);b=sprintf("%10s:","id");c=sprintf("%10s:","idx");var e=sprintf("%10s:","chr"),d=sprintf("%10s:","start"),f=sprintf("%10s:","end");if(void 0!=this.globalStartIndex())for(var n=this.globalStartIndex();n<this.globalStartIndex()+
this.size();++n){var h=this.getByGlobalIndex(n);b+=sprintf("%10s",h.id());c+=sprintf("%10s",n);e+=sprintf("%10s",h.seqName());d+=sprintf("%10s",h.start());f+=sprintf("%10s",h.end())}return[a,b,c,e,d,f].join("\n")};epiviz.datatypes.GenomicRangeArray.RowItemWrapper=function(a,b){this._index=b;this._parent=a};epiviz.datatypes.GenomicRangeArray.RowItemWrapper.prototype.parent=function(){return this._parent};epiviz.datatypes.GenomicRangeArray.RowItemWrapper.prototype.id=function(){return this._parent.id(this._index)};
epiviz.datatypes.GenomicRangeArray.RowItemWrapper.prototype.seqName=function(){return this._parent.boundaries()?this._parent.boundaries().seqName():void 0};epiviz.datatypes.GenomicRangeArray.RowItemWrapper.prototype.start=function(){return this._parent.start(this._index)};epiviz.datatypes.GenomicRangeArray.RowItemWrapper.prototype.end=function(){return this._parent.end(this._index)};epiviz.datatypes.GenomicRangeArray.RowItemWrapper.prototype.index=function(){return this._index};
epiviz.datatypes.GenomicRangeArray.RowItemWrapper.prototype.globalIndex=function(){return this._index+this._parent.globalStartIndex()};epiviz.datatypes.GenomicRangeArray.RowItemWrapper.prototype.equals=function(a){return a?this==a?!0:a.seqName()==this.seqName()&&a.start()==this.start()&&a.end()==this.end():!1};epiviz.datatypes.GenomicRangeArray.RowItemWrapper.prototype.strand=function(){return this._parent.strand(this._index)};
epiviz.datatypes.GenomicRangeArray.RowItemWrapper.prototype.metadata=function(a){return this._parent.metadata(a,this._index)};epiviz.datatypes.GenomicRangeArray.RowItemWrapper.prototype.rowMetadata=function(){return this._parent.rowMetadata(this._index)};epiviz.datatypes.GenomicRangeArray.RowItemWrapper.prototype.overlapsWith=function(a){return a?this==a?!0:this.seqName()!=a.seqName()?!1:this.start()<a.end()&&this.end()>a.start():!1};
epiviz.datatypes.FeatureValueArray=function(a,b,c,e){var d=null,f=null;!e||$.isArray(e)?(d=e,f={values:e}):(d=e.values,f=e);epiviz.datatypes.GenomicArray.call(this,a,b,c,d);this._valuesAnnotation=f};epiviz.datatypes.FeatureValueArray.prototype=epiviz.utils.mapCopy(epiviz.datatypes.GenomicArray.prototype);epiviz.datatypes.FeatureValueArray.constructor=epiviz.datatypes.FeatureValueArray;
epiviz.datatypes.FeatureValueArray.prototype.createNew=function(a,b,c,e){return new epiviz.datatypes.FeatureValueArray(a,b,c,e)};epiviz.datatypes.FeatureValueArray.prototype.get=function(a){return this._values[a]};epiviz.datatypes.FeatureValueArray.prototype.getAnnotation=function(a){if(void 0==this._valuesAnnotation)return null;var b={},c;for(c in this._valuesAnnotation)this._valuesAnnotation.hasOwnProperty(c)&&(b[c]=this._valuesAnnotation[c][a]);return b};
epiviz.datatypes.FeatureValueArray.prototype.size=function(){return this._values?this._values.length:0};
epiviz.datatypes.FeatureValueArray.prototype.concatValues=function(a,b){if(!a||!a.size())return this._valuesAnnotation;this._valuesAnnotation&&this._valuesAnnotation.values||(this._valuesAnnotation={values:[]});var c={},e;for(e in this._valuesAnnotation)this._valuesAnnotation.hasOwnProperty(e)&&a._valuesAnnotation.hasOwnProperty(e)&&(c[e]=this._valuesAnnotation[e].concat(a._valuesAnnotation[e].slice(b)));return c};
epiviz.datatypes.FeatureValueArray.prototype.trim=function(a,b,c){if(void 0==this.globalStartIndex()||!this.size()||void 0==b||!a||!this.boundaries()||this.boundaries().seqName()!=a.seqName())return null;var e=Math.max(this.boundaries().start(),a.start()),d=Math.min(this.boundaries().end(),a.end());if(d<=e)return null;a=epiviz.datatypes.GenomicRange.fromStartEnd(a.seqName(),e,d);e=Math.max(b,this.globalStartIndex())-this.globalStartIndex();b=Math.min(b+c,this.globalStartIndex()+this.size())-this.globalStartIndex();
if(b<=e)return null;c={};for(var f in this._valuesAnnotation)this._valuesAnnotation.hasOwnProperty(f)&&(c[f]=this._valuesAnnotation[f].slice(e,b));return new epiviz.datatypes.FeatureValueArray(this.measurement(),a,e+this.globalStartIndex(),c)};
epiviz.datatypes.FeatureValueArray.prototype.toString=function(){var a,b,c;this.boundaries()?(a=this.boundaries().seqName(),b=this.boundaries().start(),c=this.boundaries().end()):a=b=c="*";a=sprintf("%25s",this.measurement().name().substr(0,22))+sprintf(" [%6s%10s%10s]",a,b,c);b=sprintf("%10s:","idx");c=sprintf("%10s:","val");if(void 0!=this.globalStartIndex())for(var e=this.globalStartIndex();e<this.globalStartIndex()+this.size();++e){var d=this.getByGlobalIndex(e);b+=sprintf("%10s",e);c+=sprintf("%10s",
d)}return[a,b,c].join("\n")};epiviz.datatypes.PartialSummarizedExperiment=function(){this._rowData=null;this._values=new epiviz.measurements.MeasurementHashtable};epiviz.datatypes.PartialSummarizedExperiment.prototype.ranges=function(){return this.rowData()};epiviz.datatypes.PartialSummarizedExperiment.prototype.rowData=function(){return this._rowData};
epiviz.datatypes.PartialSummarizedExperiment.prototype.addRowData=function(a){a&&(!this._rowData||this._rowData.boundaries().seqName()!=a.boundaries().seqName()||this._rowData.boundaries().start()>a.boundaries().end()||this._rowData.boundaries().end()<a.boundaries().start()||a.measurement().type()==epiviz.measurements.Measurement.Type.UNORDERED?this._rowData=a:this._rowData=this._rowData.merge(a))};
epiviz.datatypes.PartialSummarizedExperiment.prototype.addValues=function(a){if(a){var b=this._values.get(a.measurement());!b||b.boundaries().seqName()!=a.boundaries().seqName()||b.boundaries().start()>a.boundaries().end()||b.boundaries().end()<a.boundaries().start()||a.measurement().type()==epiviz.measurements.Measurement.Type.UNORDERED?this._values.put(a.measurement(),a):this._values.put(a.measurement(),b.merge(a))}};
epiviz.datatypes.PartialSummarizedExperiment.prototype.trim=function(a){var b=new epiviz.datatypes.PartialSummarizedExperiment;this._rowData&&b.addRowData(this._rowData.trim(a));b.rowData()&&this._values.foreach(function(c,e){b.addValues(e.trim(a,b.rowData().globalStartIndex(),b.rowData().size()))});return b};epiviz.datatypes.PartialSummarizedExperiment.prototype.values=function(a){return this._values.get(a)};
epiviz.datatypes.PartialSummarizedExperiment.prototype.calcMinGlobalIndex=function(){var a=this._rowData?this._rowData.globalStartIndex():null;this._values&&this._values.foreach(function(b,c){c&&void 0!=c.globalStartIndex()&&(void 0==a||a>c.globalStartIndex())&&(a=c.globalStartIndex())});return a};
epiviz.datatypes.PartialSummarizedExperiment.prototype.calcMaxGlobalIndex=function(){var a=this._rowData&&void 0!=this._rowData.globalStartIndex()?this._rowData.globalStartIndex()+this._rowData.size():null;this._values&&this._values.foreach(function(b,c){c&&void 0!=c.globalStartIndex()&&(void 0==a||a<c.globalStartIndex()+c.size())&&(a=c.globalStartIndex()+c.size())});return a};
epiviz.datatypes.PartialSummarizedExperiment.prototype.toString=function(){var a="",b=this.calcMinGlobalIndex(),c=this.calcMaxGlobalIndex(),a=a+sprintf("%25s",this._rowData&&this._rowData.measurement()?this._rowData.measurement().name().substr(0,22):"[undefined datasource]"),e,d,f,n,h;this._rowData&&this._rowData.boundaries()?(e=this._rowData.boundaries().seqName(),d=this._rowData.boundaries().start(),f=this._rowData.boundaries().end(),n=void 0!=this._rowData.globalStartIndex()?this._rowData.globalStartIndex():
"*",h=this._rowData.size()):(e=d=f=n="*",h=0);var a=a+sprintf(" [%6s%10s%10s] [globalStartIndex: %10s] [size: %7s]\n",e,d,f,n,h),g=sprintf("%15s%15s%15s%15s%15s","id","idx","chr","start","end");this._values&&this._values.foreach(function(b,c){a+=sprintf("%25s",b.name().substr(0,22));c&&c.boundaries()?(e=c.boundaries().seqName(),d=c.boundaries().start(),f=c.boundaries().end()):e=d=f="*";a+=sprintf(" [%6s%10s%10s] [globalStartIndex: %10s] [size: %7s]\n",e,d,f,void 0!=c.globalStartIndex()?c.globalStartIndex():
"*",c.size());g+=sprintf("%25s",b.name().substr(0,22))});for(var a=a+(g+"\n"),l=b;l<c;++l)this._rowData&&void 0!=this._rowData.globalStartIndex()&&this._rowData.globalStartIndex()<=l&&this._rowData.globalStartIndex()+this._rowData.size()>l?(n=this._rowData.getByGlobalIndex(l),b=n.id(),e=n.seqName(),d=n.start(),f=n.end()):b=e=d=f="*",a+=sprintf("%15s%15s%15s%15s%15s",b,l,e,d,f),this._values&&this._values.foreach(function(b,c){a=c&&void 0!=c.globalStartIndex()&&c.globalStartIndex()<=l&&c.globalStartIndex()+
c.size()>l?a+sprintf("%25s",c.getByGlobalIndex(l)):a+sprintf("%25s","*")}),a+="\n";return a};epiviz.datatypes.MeasurementGenomicData=function(){};epiviz.datatypes.MeasurementGenomicData.prototype.get=function(a){throw Error("unimplemented abstract method");};epiviz.datatypes.MeasurementGenomicData.prototype.getRow=function(a){throw Error("unimplemented abstract method");};epiviz.datatypes.MeasurementGenomicData.prototype.measurement=function(){throw Error("unimplemented abstract method");};
epiviz.datatypes.MeasurementGenomicData.prototype.globalStartIndex=function(){throw Error("unimplemented abstract method");};epiviz.datatypes.MeasurementGenomicData.prototype.globalEndIndex=function(){throw Error("unimplemented abstract method");};epiviz.datatypes.MeasurementGenomicData.prototype.size=function(){throw Error("unimplemented abstract method");};epiviz.datatypes.MeasurementGenomicData.prototype.getByGlobalIndex=function(a){throw Error("unimplemented abstract method");};
epiviz.datatypes.MeasurementGenomicData.prototype.getRowByGlobalIndex=function(a){throw Error("unimplemented abstract method");};epiviz.datatypes.MeasurementGenomicData.prototype.binarySearchStarts=function(a){throw Error("unimplemented abstract method");};epiviz.datatypes.MeasurementGenomicDataWrapper=function(a,b){this._measurement=a;this._container=b;this._globalStartIndex=this._size=null};
epiviz.datatypes.MeasurementGenomicDataWrapper.prototype.get=function(a){var b=this._container.rowData(),c=null,e=this.globalStartIndex(),d=null,f=null,n=c=null,h=this.size();if(!h||a>=h||0>a)return new epiviz.datatypes.GenomicData.ValueItem(n,d,f,this._measurement,c);if(void 0!=e){if(this._measurement.type()==epiviz.measurements.Measurement.Type.FEATURE||this._measurement.type()==epiviz.measurements.Measurement.Type.UNORDERED)c=this._container.values(this._measurement),d=e-c.globalStartIndex()+a,
f=c.get(d),c=c.getAnnotation(d);d=e-b.globalStartIndex()+a;d=b.get(d);n=e+a}return new epiviz.datatypes.GenomicData.ValueItem(n,d,f,this._measurement,c)};epiviz.datatypes.MeasurementGenomicDataWrapper.prototype.getRow=function(a){var b=this._container.rowData(),c=this.globalStartIndex(),e=null,d=this.size();if(!d||a>=d||0>a)return e;void 0!=c&&(a=c-b.globalStartIndex()+a,e=b.get(a));return e};epiviz.datatypes.MeasurementGenomicDataWrapper.prototype.measurement=function(){return this._measurement};
epiviz.datatypes.MeasurementGenomicDataWrapper.prototype.globalStartIndex=function(){if(null!==this._globalStartIndex)return this._globalStartIndex;var a=null,b=this._container.rowData().globalStartIndex();if(null===b)return b;if(this._measurement.type()==epiviz.measurements.Measurement.Type.FEATURE||this._measurement.type()==epiviz.measurements.Measurement.Type.UNORDERED){a=this._container.values(this._measurement);if(!a.globalStartIndex())return a.globalStartIndex();b=Math.max(b,a.globalStartIndex())}return this._globalStartIndex=
b};epiviz.datatypes.MeasurementGenomicDataWrapper.prototype.globalEndIndex=function(){var a=this.globalStartIndex();return null==a?null:a+this.size()};
epiviz.datatypes.MeasurementGenomicDataWrapper.prototype.size=function(){if(null!==this._size)return this._size;var a=this.globalStartIndex();if(void 0==a)return 0;var b=this._container.rowData(),c=this._container.values(this._measurement),b=b.size()-a+b.globalStartIndex();if(this._measurement.type()==epiviz.measurements.Measurement.Type.FEATURE||this._measurement.type()==epiviz.measurements.Measurement.Type.UNORDERED)b=Math.min(b,c.size()-a+c.globalStartIndex());return this._size=Math.max(0,b)};
epiviz.datatypes.MeasurementGenomicDataWrapper.prototype.getByGlobalIndex=function(a){var b=this.globalStartIndex();return void 0==b?new epiviz.datatypes.GenomicData.ValueItem(null,null,null,this._measurement,null):this.get(a-b)};epiviz.datatypes.MeasurementGenomicDataWrapper.prototype.getRowByGlobalIndex=function(a){var b=this.globalStartIndex();return void 0==b?null:this.getRow(a-b)};
epiviz.datatypes.MeasurementGenomicDataWrapper.prototype.binarySearchStarts=function(a){var b=this._container.rowData();if(0==this.size()||!b||0==b.size()||b.start(0)>=a.end()||b.start(b.size()-1)<=a.start())return{index:null,length:0};for(var c=0,e=b.size()-1,d,f=null;c<=e;)d=Math.floor(.5*(c+e)),b.start(d)==a.start()?(f=d,e=d-1):b.start(d)<a.start()?c=d+1:e=d-1;null===f&&(f=c);for(var c=0,e=b.size()-1,n=null;c<=e;)d=Math.floor(.5*(c+e)),b.start(d)==a.end()?(n=d,c=d+1):b.start(d)<a.end()?c=d+1:e=
d-1;null===n&&(n=c-1);a=Math.max(f+b.globalStartIndex(),this.globalStartIndex());b=Math.min(n+b.globalStartIndex(),this.globalStartIndex()+this.size()-1);return{index:a-this.globalStartIndex(),length:b-a+1}};epiviz.datatypes.MeasurementGenomicDataArrayWrapper=function(a,b,c){this._measurement=a;this._items=b;this._itemsByGlobalIndex=c};epiviz.datatypes.MeasurementGenomicDataArrayWrapper.prototype.get=function(a){return this._items&&0<=a&&a<this._items.length?this._items[a]:null};
epiviz.datatypes.MeasurementGenomicDataArrayWrapper.prototype.getRow=function(a){return this._items&&0<=a&&a<this._items.length?this._items[a].rowItem:null};epiviz.datatypes.MeasurementGenomicDataArrayWrapper.prototype.measurement=function(){return this._measurement};epiviz.datatypes.MeasurementGenomicDataArrayWrapper.prototype.globalStartIndex=function(){return this._items&&this._items.length?this._items[0].globalIndex:null};
epiviz.datatypes.MeasurementGenomicDataArrayWrapper.prototype.globalEndIndex=function(){return this._items&&this._items.length?this._items[this._items.length-1].globalIndex+1:null};epiviz.datatypes.MeasurementGenomicDataArrayWrapper.prototype.size=function(){return this._items?this._items.length:0};epiviz.datatypes.MeasurementGenomicDataArrayWrapper.prototype.getByGlobalIndex=function(a){return this._itemsByGlobalIndex&&a in this._itemsByGlobalIndex?this._itemsByGlobalIndex[a]:null};
epiviz.datatypes.MeasurementGenomicDataArrayWrapper.prototype.getRowByGlobalIndex=function(a){return this._itemsByGlobalIndex&&a in this._itemsByGlobalIndex?this._itemsByGlobalIndex[a].rowItem:null};
epiviz.datatypes.MeasurementGenomicDataArrayWrapper.prototype.binarySearchStarts=function(a){if(!this._items||!this._items.length||this._items[0].rowItem.start()>a.end()||this._items[this._items.length-1].rowItem.start()<a.start())return{index:null,length:0};for(var b=0,c=this._items.length-1,e,d=null;b<=c;)e=Math.floor(.5*(b+c)),this._items[e].rowItem.start()==a.start()?(d=e,c=e-1):this._items[e].rowItem.start()<a.start()?b=e+1:c=e-1;null===d&&(d=b);for(var b=0,c=this._items.length-1,f=null;b<=c;)e=
Math.floor(.5*(b+c)),this._items[e].rowItem.start()==a.end()?(f=e,b=e+1):this._items[e].rowItem.start()<a.end()?b=e+1:c=e-1;null===f&&(f=b-1);return{index:d,length:f+1-d}};epiviz.datatypes.GenomicData=function(){};epiviz.datatypes.GenomicData.prototype.ready=function(a){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.prototype.isReady=function(){throw Error("unimplemented abstract method");};
epiviz.datatypes.GenomicData.prototype.firstSeries=function(){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.prototype.getSeries=function(a){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.prototype.get=function(a,b){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.prototype.getRow=function(a,b){throw Error("unimplemented abstract method");};
epiviz.datatypes.GenomicData.prototype.measurements=function(){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.prototype.globalStartIndex=function(a){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.prototype.globalEndIndex=function(a){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.prototype.size=function(a){throw Error("unimplemented abstract method");};
epiviz.datatypes.GenomicData.prototype.getByGlobalIndex=function(a,b){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.prototype.getRowByGlobalIndex=function(a,b){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.prototype.binarySearchStarts=function(a,b){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.prototype.foreach=function(a){throw Error("unimplemented abstract method");};
epiviz.datatypes.GenomicData.ValueItem=function(a,b,c,e,d){this.globalIndex=a;this.rowItem=b;this.value=0===c||c?c:null;this.measurement=e;this.valueAnnotation=d};epiviz.datatypes.GenomicData.RowItem=function(){};epiviz.datatypes.GenomicData.RowItem.prototype.id=function(){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.RowItem.prototype.seqName=function(){throw Error("unimplemented abstract method");};
epiviz.datatypes.GenomicData.RowItem.prototype.start=function(){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.RowItem.prototype.end=function(){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.RowItem.prototype.globalIndex=function(){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.RowItem.prototype.strand=function(){throw Error("unimplemented abstract method");};
epiviz.datatypes.GenomicData.RowItem.prototype.metadata=function(a){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.RowItem.prototype.rowMetadata=function(){throw Error("unimplemented abstract method");};epiviz.datatypes.RowItemImpl=function(a,b,c,e,d,f,n){this._id=a;this._seqName=b;this._start=c;this._end=e;this._globalIndex=d;this._strand=f;this._rowMetadata=n};epiviz.datatypes.RowItemImpl.prototype.id=function(){return this._id};
epiviz.datatypes.RowItemImpl.prototype.seqName=function(){return this._seqName};epiviz.datatypes.RowItemImpl.prototype.start=function(){return this._start};epiviz.datatypes.RowItemImpl.prototype.end=function(){return this._end};epiviz.datatypes.RowItemImpl.prototype.globalIndex=function(){return this._globalIndex};epiviz.datatypes.RowItemImpl.prototype.strand=function(){return this._strand};epiviz.datatypes.RowItemImpl.prototype.metadata=function(a){a=this._rowMetadata[a];return void 0==a?null:a};
epiviz.datatypes.RowItemImpl.prototype.rowMetadata=function(){return this._rowMetadata};epiviz.datatypes.MapGenomicData=function(a){this._measurements=(this._map=a)?a.keys():null;this._mapLoaded=new epiviz.deferred.Deferred;this._map&&this._mapLoaded.resolve()};epiviz.datatypes.MapGenomicData.prototype.ready=function(a){this._mapLoaded.done(a)};epiviz.datatypes.MapGenomicData.prototype.isReady=function(){return this._mapLoaded.state()==epiviz.deferred.Deferred.State.RESOLVED};
epiviz.datatypes.MapGenomicData.prototype._setMap=function(a){if(this._map)throw Error("MapGenomicData is immutable");if(this._map=a)this._measurements=a.keys(),this._mapLoaded.resolve()};epiviz.datatypes.MapGenomicData.prototype.firstSeries=function(){return 0==this._map.size()?null:this._map.first().value};epiviz.datatypes.MapGenomicData.prototype.getSeries=function(a){return this._map.get(a)};epiviz.datatypes.MapGenomicData.prototype.get=function(a,b){var c=this._map.get(a);return c?c.get(b):null};
epiviz.datatypes.MapGenomicData.prototype.getRow=function(a,b){var c=this._map.get(a);return c?c.getRow(b):null};epiviz.datatypes.MapGenomicData.prototype.measurements=function(){return this._measurements};epiviz.datatypes.MapGenomicData.prototype.globalStartIndex=function(a){return(a=this._map.get(a))?a.globalStartIndex():null};epiviz.datatypes.MapGenomicData.prototype.globalEndIndex=function(a){return(a=this._map.get(a))?a.globalEndIndex():null};
epiviz.datatypes.MapGenomicData.prototype.size=function(a){return(a=this._map.get(a))?a.size():null};epiviz.datatypes.MapGenomicData.prototype.getByGlobalIndex=function(a,b){var c=this._map.get(a);return c?c.getByGlobalIndex(b):null};epiviz.datatypes.MapGenomicData.prototype.getRowByGlobalIndex=function(a,b){var c=this._map.get(a);return c?c.getRowByGlobalIndex(b):null};
epiviz.datatypes.MapGenomicData.prototype.binarySearchStarts=function(a,b){var c=this._map.get(a);return c?c.binarySearchStarts(b):{index:null,length:0}};epiviz.datatypes.MapGenomicData.prototype.foreach=function(a){this._map.foreach(function(b,c,e){a(b,c,e)})};epiviz.datatypes.ItemFilteredGenomicData=function(a,b){epiviz.datatypes.MapGenomicData.call(this);this._data=a;this._filter=b;this._deferredInit=null;this._initialize()};epiviz.datatypes.ItemFilteredGenomicData.prototype=epiviz.utils.mapCopy(epiviz.datatypes.MapGenomicData.prototype);
epiviz.datatypes.ItemFilteredGenomicData.constructor=epiviz.datatypes.ItemFilteredGenomicData;
epiviz.datatypes.ItemFilteredGenomicData.prototype._initialize=function(){if(this._deferredInit)return this._deferredInit;this._deferredInit=new epiviz.deferred.Deferred;var a=this,b=this._filter,c=this._data;c.ready(function(){b.preMark()(c).done(function(e){var d=new epiviz.measurements.MeasurementHashtable,f=c.measurements();epiviz.utils.deferredFor(f.length,function(a){var h=new epiviz.deferred.Deferred,g=f[a],l=[],m={};epiviz.utils.deferredFor(c.size(g),function(a){var d=new epiviz.deferred.Deferred,
f=c.get(g,a);b.mark()(f,c,e).done(function(a){a&&(l.push(f),m[f.globalIndex]=f);d.resolve()});return d}).done(function(){d.put(g,new epiviz.datatypes.MeasurementGenomicDataArrayWrapper(g,l,m));h.resolve()});return h}).done(function(){a._setMap(d);a._deferredInit.resolve()})})});return this._deferredInit};epiviz.datatypes.MeasurementOrderedGenomicData=function(a,b){epiviz.datatypes.MapGenomicData.call(this);this._data=a;this._order=b;this._deferredInit=null;this._initialize()};
epiviz.datatypes.MeasurementOrderedGenomicData.prototype=epiviz.utils.mapCopy(epiviz.datatypes.MapGenomicData.prototype);epiviz.datatypes.MeasurementOrderedGenomicData.constructor=epiviz.datatypes.MeasurementOrderedGenomicData;
epiviz.datatypes.MeasurementOrderedGenomicData.prototype._initialize=function(){if(this._deferredInit)return this._deferredInit;this._deferredInit=new epiviz.deferred.Deferred;var a=this,b=this._data,c=this._order;b.ready(function(){c.preMark()(b).done(function(e){var d=new epiviz.measurements.MeasurementHashtable,f=b.measurements(),n=new epiviz.measurements.MeasurementHashtable;epiviz.utils.deferredFor(f.length,function(a){var d=new epiviz.deferred.Deferred,l=f[a];c.mark()(l,b,e).done(function(a){n.put(l,
a);d.resolve()});return d}).done(function(){f.sort(function(a,b){var c=n.get(a),d=n.get(b);return c==d?0:c<d?-1:1});f.forEach(function(a){d.put(a,b.getSeries(a))});a._setMap(d);a._deferredInit.resolve()})})});return this._deferredInit};epiviz.datatypes.MeasurementAggregatedGenomicData=function(a,b,c){epiviz.datatypes.MapGenomicData.call(this);this._data=a;this._groupByMarker=b;this._aggregator=c;this._deferredInit=null;this._initialize()};
epiviz.datatypes.MeasurementAggregatedGenomicData.prototype=epiviz.utils.mapCopy(epiviz.datatypes.MapGenomicData.prototype);epiviz.datatypes.MeasurementAggregatedGenomicData.constructor=epiviz.datatypes.MeasurementAggregatedGenomicData;
epiviz.datatypes.MeasurementAggregatedGenomicData.prototype._initialize=function(){if(this._deferredInit)return this._deferredInit;this._deferredInit=new epiviz.deferred.Deferred;var a=this,b=this._groupByMarker,c=this._data;c.ready(function(){b.preMark()(c).done(function(e){var d=new epiviz.measurements.MeasurementHashtable,f={},n=c.measurements();epiviz.utils.deferredFor(n.length,function(a){var d=new epiviz.deferred.Deferred,l=n[a];b.mark()(l,c,e).done(function(a){a in f||(f[a]=[]);f[a].push(l);
d.resolve()});return d}).done(function(){var b={},e,l;for(e in f)if(f.hasOwnProperty(e)){l=f[e];var m=e+"-group",n=e,t=l[0].type(),r=l[0].datasourceId(),q=l[0].datasourceGroup(),w=l[0].dataprovider(),u=l[0].defaultChartType(),x=epiviz.utils.mapCopy(l[0].annotation()),z=l[0].minValue(),y=l[0].maxValue(),B=l[0].metadata(),A={};B.forEach(function(a){A[a]=a});f[e].forEach(function(a){r!=a.datasourceId()&&(r="*");q!=a.datasourceGroup()&&(q="*");w!=a.dataprovider()&&(w="*");u!=a.defaultChartType()&&(u=
"*");var b=a.annotation();if(x!=b)if(void 0==x)x=epiviz.utils.mapCopy(b);else if(void 0!=b)for(var c in b)b.hasOwnProperty(c)&&(c in x?x[c]!=b[c]&&(x[c]="*"):x[c]=b[c]);z=Math.min(z,a.minValue());y=Math.max(y,a.maxValue());a.metadata().forEach(function(a){a in A||(A[a]=a,B.push(a))})});b[e]=new epiviz.measurements.Measurement(m,n,t,r,q,w,null,u,x,z,y,B)}for(e in f)if(f.hasOwnProperty(e)){m=b[e];n=[];t={};l=f[e];for(var C=Math.min.apply(void 0,l.map(function(a){return c.globalStartIndex(a)})),D=Math.max.apply(void 0,
l.map(function(a){return c.globalEndIndex(a)})),H=C;H<D;++H){var G=l.map(function(a){return c.getByGlobalIndex(a,H)}).filter(function(a){return a});G.length&&(C=G.map(function(a){return a.value}),C=a._aggregator.aggregate(e,l,C),G=G[0].rowItem,G=new epiviz.datatypes.RowItemImpl(G.id(),G.seqName(),G.start(),G.end(),G.globalIndex(),G.strand(),G.rowMetadata()||{}),C=new epiviz.datatypes.GenomicData.ValueItem(H,G,C.value,m,{errMinus:C.errMinus,errPlus:C.errPlus}),n.push(C),t[H]=C)}l=new epiviz.datatypes.MeasurementGenomicDataArrayWrapper(m,
n,t);d.put(m,l)}a._setMap(d);a._deferredInit.resolve()})})});return this._deferredInit};epiviz.ui.controls={};epiviz.ui.controls.Control=function(a,b,c){this._container=a;this._title=b||"";this._id=c||epiviz.utils.generatePseudoGUID(6)};epiviz.ui.controls.Control.prototype.initialize=function(){};epiviz.ui.controls.Control.prototype.id=function(){return this._id};epiviz.ui.controls.Control.prototype.title=function(){return this._title};
epiviz.ui.controls.Dialog=function(a,b){this._container=$("#dialogs");this._title=a;this._id=epiviz.ui.controls.Dialog.generateId();this._handlers=b;this._container.append(sprintf('<div id="%s" title="%s" style="display: none;"></div>',this._id,this._title));this._dialog=null};epiviz.ui.controls.Dialog._nextIdIndex=0;epiviz.ui.controls.Dialog.generateId=function(){return sprintf("dialog-%s",epiviz.utils.generatePseudoGUID(5))};epiviz.ui.controls.Dialog.prototype.show=function(){};
epiviz.ui.charts={};epiviz.ui.charts.transform={};epiviz.ui.charts.transform.clustering={};epiviz.ui.charts.transform.clustering.ClusterNode=function(){};epiviz.ui.charts.transform.clustering.ClusterNode.prototype.weight=function(){};epiviz.ui.charts.transform.clustering.ClusterNode.prototype.children=function(){};epiviz.ui.charts.transform.clustering.ClusterNode.prototype.data=function(){};epiviz.ui.charts.transform.clustering.ClusterNode.prototype.sort=function(a){};
epiviz.ui.charts.transform.clustering.ClusterNode.prototype.copy=function(){};epiviz.ui.charts.transform.clustering.ClusterNode.prototype.distance=function(){};epiviz.ui.charts.transform.clustering.ClusterNode.prototype.sorted=function(){};epiviz.ui.charts.transform.clustering.ClusterSubtree=function(a,b){this._children=a;this._weight=null;this._distance=b;this._sorted=!1};
epiviz.ui.charts.transform.clustering.ClusterSubtree.prototype.weight=function(){if(void 0==this._weight){for(var a=0,b=0;b<this._children.length;++b)a+=this._children[b].weight();this._weight=a}return this._weight};epiviz.ui.charts.transform.clustering.ClusterSubtree.prototype.children=function(){return this._children};epiviz.ui.charts.transform.clustering.ClusterSubtree.prototype.data=function(){for(var a=[],b=0;b<this._children.length;++b)a=a.concat(this._children[b].data());return a};
epiviz.ui.charts.transform.clustering.ClusterSubtree.prototype.sort=function(a){if(!this.sorted()&&(this._children.sort(function(a,b){return a.weight()-b.weight()}),a)){for(var b=0;b<this._children.length;++b)this._children[b].sort(a);this._sorted=!0}};epiviz.ui.charts.transform.clustering.ClusterSubtree.prototype.copy=function(){for(var a=[],b=0;b<this._children.length;++b)a.push(this._children[b].copy());return new epiviz.ui.charts.transform.clustering.ClusterSubtree(a)};
epiviz.ui.charts.transform.clustering.ClusterSubtree.prototype.distance=function(){return this._distance};epiviz.ui.charts.transform.clustering.ClusterSubtree.prototype.sorted=function(){return this._sorted};epiviz.ui.charts.transform.clustering.ClusterLeaf=function(a){this._dataIndex=a};epiviz.ui.charts.transform.clustering.ClusterLeaf.prototype.weight=function(){return 1};epiviz.ui.charts.transform.clustering.ClusterLeaf.prototype.children=function(){return[]};
epiviz.ui.charts.transform.clustering.ClusterLeaf.prototype.data=function(){return[this._dataIndex]};epiviz.ui.charts.transform.clustering.ClusterLeaf.prototype.sort=function(){};epiviz.ui.charts.transform.clustering.ClusterLeaf.prototype.copy=function(){return new epiviz.ui.charts.transform.clustering.ClusterLeaf(this._dataIndex)};epiviz.ui.charts.transform.clustering.ClusterLeaf.prototype.distance=function(){return 0};epiviz.ui.charts.transform.clustering.ClusterLeaf.prototype.sorted=function(){return!0};
epiviz.ui.charts.transform.clustering.ClusterTree=function(a,b){this._root=a;this._data=b};epiviz.ui.charts.transform.clustering.ClusterTree.prototype.root=function(){return this._root};epiviz.ui.charts.transform.clustering.ClusterTree.prototype.orderedData=function(){this._root.sorted()||this._root.sort(!0);for(var a=this._root.data(),b=[],c=0;c<a.length;++c)b.push(this._data[a[c]]);return b};epiviz.ui.charts.transform.clustering.ClusteringMetric=function(){};
epiviz.ui.charts.transform.clustering.ClusteringMetric.prototype.distance=function(a,b){};epiviz.ui.charts.transform.clustering.ClusteringMetric.prototype.id=function(){};epiviz.ui.charts.transform.clustering.ClusteringLinkage=function(){};epiviz.ui.charts.transform.clustering.ClusteringLinkage.prototype.link=function(a,b){};epiviz.ui.charts.transform.clustering.ClusteringLinkage.prototype.id=function(){};epiviz.ui.charts.transform.clustering.HierarchicalClusteringAlgorithm=function(){};
epiviz.ui.charts.transform.clustering.HierarchicalClusteringAlgorithm.prototype.cluster=function(a,b,c){};epiviz.ui.charts.transform.clustering.HierarchicalClusteringAlgorithm.prototype.id=function(){};epiviz.ui.charts.transform.clustering.EuclideanMetric=function(){};
epiviz.ui.charts.transform.clustering.EuclideanMetric.prototype.distance=function(a,b){if(void 0==a||void 0==b)return null;var c=a.length,e=0,d=0,f=0,n;for(n=0;n<c;++n)if(void 0!=a[n]&&void 0!=b[n]){++e;var h=a[n]-b[n],d=d+h,f=f+h*h}0<e&&(d/=e);return f+(c-e)*d*d};epiviz.ui.charts.transform.clustering.EuclideanMetric.prototype.id=function(){return"euclidean"};epiviz.ui.charts.transform.clustering.CompleteLinkage=function(){};
epiviz.ui.charts.transform.clustering.CompleteLinkage.prototype.link=function(a,b){var c=Array(a.length-1);if(b[0]<b[1]){var e=b[0];b[0]=b[1];b[1]=e}for(var d=e=0;e<a.length;++e,++d)if(e==b[0]||e==b[1])--d;else{c[d]=a[e].slice(0);c[d].splice(b[0],1);c[d].splice(b[1],1);var f=[e<b[0]?a[e][b[0]]:a[b[0]][e],e<b[1]?a[e][b[1]]:a[b[1]][e]];c[d].push(Math.max(f[0],f[1]))}c[c.length-1]=Array(c.length);return c};epiviz.ui.charts.transform.clustering.CompleteLinkage.prototype.id=function(){return"complete"};
epiviz.ui.charts.transform.clustering.NoneClustering=function(){};epiviz.ui.charts.transform.clustering.NoneClustering.prototype.cluster=function(a,b,c){b=[];for(c=0;c<a.length;++c)b.push(new epiviz.ui.charts.transform.clustering.ClusterLeaf(c));b=new epiviz.ui.charts.transform.clustering.ClusterSubtree(b,0);return new epiviz.ui.charts.transform.clustering.ClusterTree(b,a)};epiviz.ui.charts.transform.clustering.NoneClustering.prototype.id=function(){return"none"};
epiviz.ui.charts.transform.clustering.AgglomerativeClustering=function(){};
epiviz.ui.charts.transform.clustering.AgglomerativeClustering.prototype.cluster=function(a,b,c){var e,d,f=Array(a.length);for(e=0;e<a.length;++e)for(f[e]=Array(a.length),d=e+1;d<a.length;++d)f[e][d]=b.distance(a[e],a[d]);b=[];for(e=0;e<a.length;++e)b.push(new epiviz.ui.charts.transform.clustering.ClusterLeaf(e));for(;1<b.length;){d=epiviz.utils.indexOfMin(f,!0);e=d.index;d=new epiviz.ui.charts.transform.clustering.ClusterSubtree([b[e[0]],b[e[1]]],d.min);if(e[0]<e[1]){var n=e[0];e[0]=e[1];e[1]=n}b.splice(e[0],
1);b.splice(e[1],1);b.push(d);f=c.link(f,e)}return new epiviz.ui.charts.transform.clustering.ClusterTree(b[0],a)};epiviz.ui.charts.transform.clustering.AgglomerativeClustering.prototype.id=function(){return"agglomerative"};
epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory=function(a){this._config=a;this._algorithms={};this._metrics={};this._linkages={};var b;for(b=0;b<a.clustering.algorithms.length;++b){var c=epiviz.utils.evaluateFullyQualifiedTypeName(a.clustering.algorithms[b]),c=epiviz.utils.applyConstructor(c);this._algorithms[c.id()]=c}for(b=0;b<a.clustering.metrics.length;++b)c=epiviz.utils.evaluateFullyQualifiedTypeName(a.clustering.metrics[b]),c=epiviz.utils.applyConstructor(c),this._metrics[c.id()]=
c;for(b=0;b<a.clustering.linkages.length;++b)c=epiviz.utils.evaluateFullyQualifiedTypeName(a.clustering.linkages[b]),c=epiviz.utils.applyConstructor(c),this._linkages[c.id()]=c};epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory._instance=null;epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.instance=function(){return epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory._instance};
epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.initialize=function(a){epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory._instance=new epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory(a)};epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.prototype.algorithm=function(a){return this._algorithms[a]};epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.prototype.metric=function(a){return this._metrics[a]};
epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.prototype.linkage=function(a){return this._linkages[a]};epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.prototype.algorithms=function(){return Object.keys(this._algorithms)};epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.prototype.metrics=function(){return Object.keys(this._metrics)};epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.prototype.linkages=function(){return Object.keys(this._linkages)};
epiviz.ui.charts.markers={};epiviz.ui.charts.markers.MeasurementAggregator=function(a,b){this._id=a;this._aggregator=b};epiviz.ui.charts.markers.MeasurementAggregator.prototype.aggregate=function(a,b,c){return this._aggregator(a,b,c)};epiviz.ui.charts.markers.MeasurementAggregator.prototype.id=function(){return this._id};
epiviz.ui.charts.markers.MeasurementAggregators={"mean-stdev":new epiviz.ui.charts.markers.MeasurementAggregator("mean-stdev",function(a,b,c){if(!c||0==c.length)return null;var e=c.reduce(function(a,b){return a+b})/c.length;a=c.map(function(a){return(a-e)*(a-e)}).reduce(function(a,b){return a+b})/c.length;a=Math.sqrt(a);return{value:e,errMinus:e-a,errPlus:e+a}}),quartiles:new epiviz.ui.charts.markers.MeasurementAggregator("quartiles",function(a,b,c){if(!c||0==c.length)return null;c=c.slice(0).sort(function(a,
b){return a-b});a=c.length;b=Math.floor(.5*a);var e=Math.ceil(.5*a);return{value:.5*(c[Math.floor(.5*(a-1))]+c[b]),errMinus:.5*(c[Math.floor(.5*(b-1))]+c[Math.floor(.5*b)]),errPlus:.5*(c[e+Math.floor(.5*(a-e-1))]+c[e+Math.floor(.5*(a-e))])}}),count:new epiviz.ui.charts.markers.MeasurementAggregator("count",function(a,b,c){return c&&0!=c.length?{value:c.length}:0}),min:new epiviz.ui.charts.markers.MeasurementAggregator("min",function(a,b,c){return c&&0!=c.length?{value:Math.min.apply(void 0,c)}:null}),
max:new epiviz.ui.charts.markers.MeasurementAggregator("max",function(a,b,c){return c&&0!=c.length?{value:Math.max.apply(void 0,c)}:null}),sum:new epiviz.ui.charts.markers.MeasurementAggregator("sum",function(a,b,c){return c&&0!=c.length?{value:c.reduce(function(a,b){return a+b})}:null})};
epiviz.ui.charts.markers.VisualizationMarker=function(a,b,c,e,d){this._type=a;this._id=b||epiviz.utils.generatePseudoGUID(6);this._name=c||"Custom Marker "+this._id;this._preMarkStr=e||"";this._markStr=d||"";var f=new epiviz.deferred.Deferred,n=null;epiviz.caja.cajole(this._preMarkStr).done(function(a){n=a;f.resolve()});this._preMark=function(a){var b=new epiviz.deferred.Deferred;f.done(function(){var c=n(a);b.resolve(c)});return b};var h=new epiviz.deferred.Deferred,g=null;epiviz.caja.cajole(this._markStr).done(function(a){g=
a;h.resolve()});this._mark=function(a,b,c){var d=new epiviz.deferred.Deferred;h.done(function(){var e=g(a,b,c);d.resolve(e)});return d}};epiviz.ui.charts.markers.VisualizationMarker.prototype.type=function(){return this._type};epiviz.ui.charts.markers.VisualizationMarker.prototype.id=function(){return this._id};epiviz.ui.charts.markers.VisualizationMarker.prototype.name=function(){return this._name};epiviz.ui.charts.markers.VisualizationMarker.prototype.preMark=function(){return this._preMark};
epiviz.ui.charts.markers.VisualizationMarker.prototype.mark=function(){return this._mark};epiviz.ui.charts.markers.VisualizationMarker.prototype.preMarkStr=function(){return this._preMarkStr};epiviz.ui.charts.markers.VisualizationMarker.prototype.markStr=function(){return this._markStr};epiviz.ui.charts.markers.VisualizationMarker.Type={FILTER:"filter",COLOR_BY_ROW:"colorByRow",ORDER_BY_MEASUREMENTS:"orderByMeasurements",COLOR_BY_MEASUREMENTS:"colorByMeasurements",GROUP_BY_MEASUREMENTS:"groupByMeasurements"};
epiviz.ui.charts.markers.VisualizationMarker.prototype.raw=function(){return{type:this._type,id:this._id,name:this._name,preMark:this._preMarkStr,mark:this._markStr}};epiviz.ui.charts.markers.VisualizationMarker.fromRawObject=function(a){return new epiviz.ui.charts.markers.VisualizationMarker(a.type,a.id,a.name,a.preMark,a.mark)};epiviz.ui.charts.Margins=function(a,b,c,e){this._top=a;this._left=b;this._bottom=c;this._right=e};
epiviz.ui.charts.Margins.ZERO_MARGIN=new epiviz.ui.charts.Margins(0,0,0,0);epiviz.ui.charts.Margins.prototype.top=function(){return this._top};epiviz.ui.charts.Margins.prototype.left=function(){return this._left};epiviz.ui.charts.Margins.prototype.bottom=function(){return this._bottom};epiviz.ui.charts.Margins.prototype.right=function(){return this._right};
epiviz.ui.charts.Margins.prototype.sumAxis=function(a){switch(a){case epiviz.ui.charts.Axis.X:return this._left+this._right;case epiviz.ui.charts.Axis.Y:return this._top+this._bottom;default:throw Error("Invalid argument: "+a);}};epiviz.ui.charts.Margins.prototype.raw=function(){return{top:this._top,left:this._left,bottom:this._bottom,right:this._right}};epiviz.ui.charts.Margins.fromRawObject=function(a){return new epiviz.ui.charts.Margins(a.top,a.left,a.bottom,a.right)};
epiviz.ui.charts.Margins.prototype.copy=function(){return new epiviz.ui.charts.Margins(this._top,this._left,this._bottom,this._right)};epiviz.ui.charts.Margins.prototype.equals=function(a){return a?this==a?!0:this._top==a._top&&this._left==a._left&&this._bottom==a._bottom&&this._right==a._right:!1};epiviz.ui.charts.ColorPalette=function(a,b,c,e){this._colors=a;this._id=c||epiviz.utils.generatePseudoGUID(6);this._name=b||"Custom ("+this._id+")";this._keyIndices=e||{};this._nKeys=0};
epiviz.ui.charts.ColorPalette.prototype.id=function(){return this._id};epiviz.ui.charts.ColorPalette.prototype.name=function(){return this._name};epiviz.ui.charts.ColorPalette.prototype.get=function(a){return this._colors[a%this._colors.length]};epiviz.ui.charts.ColorPalette.prototype.getByKey=function(a){var b=this._keyIndices[a];void 0==b&&(b=this._nKeys,this._keyIndices[a]=this._nKeys,++this._nKeys);return this.get(b)};
epiviz.ui.charts.ColorPalette.prototype.keyColorIndex=function(a){a=this._keyIndices[a];return void 0==a?-1:a};epiviz.ui.charts.ColorPalette.prototype.keyIndices=function(){return this._keyIndices};epiviz.ui.charts.ColorPalette.prototype.size=function(){return this._colors.length};epiviz.ui.charts.ColorPalette.prototype.equals=function(a){return this==a?!0:a?epiviz.utils.arraysEqual(this._colors,a._colors):!1};epiviz.ui.charts.ColorPalette.prototype.copy=function(){return new epiviz.ui.charts.ColorPalette(this._colors.slice(0))};
epiviz.ui.charts.ColorPalette.prototype.raw=function(a){return a&&this._id in a.colorPalettesMap?{id:this._id}:{id:this._id,name:this._name,colors:this._colors}};epiviz.ui.charts.ColorPalette.fromRawObject=function(a,b){if($.isArray(a))return new epiviz.ui.charts.ColorPalette(a);if(b&&a.id in b.colorPalettesMap)return b.colorPalettesMap[a.id];a.colors&&a.colors.length||(a.colors=epiviz.Config.COLORS_BRIGHT);return new epiviz.ui.charts.ColorPalette(a.colors,a.name,a.id)};
epiviz.ui.charts.Axis={X:"x",Y:"y"};epiviz.ui.charts.CustomSetting=function(a,b,c,e,d){this.id=a;this.type=b;this.defaultValue=c;this.label=e||a;this.possibleValues=d||null};epiviz.ui.charts.CustomSetting.Type={NUMBER:"number",STRING:"string",ARRAY:"array",BOOLEAN:"boolean",CATEGORICAL:"categorical",MEASUREMENTS_METADATA:"measurementsMetadata",MEASUREMENTS_ANNOTATION:"measurementsAnnotation"};epiviz.ui.charts.CustomSetting.DEFAULT="default";epiviz.ui.charts.VisObject=function(){};
epiviz.ui.charts.VisObject.prototype.regionStart=function(){return null};epiviz.ui.charts.VisObject.prototype.regionEnd=function(){return null};epiviz.ui.charts.VisObject.prototype.getMetadata=function(a,b,c){return null};epiviz.ui.charts.VisObject.prototype.getStart=function(a,b){return null};epiviz.ui.charts.VisObject.prototype.getEnd=function(a,b){return null};epiviz.ui.charts.VisObject.prototype.metadataColumns=function(){return null};
epiviz.ui.charts.VisObject.prototype.dimensions=function(){return[0,0]};epiviz.ui.charts.VisObject.prototype.metadataLooseCompare=function(){return!1};
epiviz.ui.charts.VisObject.prototype.overlapsWith=function(a){if(!a)return!1;if(this===a)return!0;var b,c,e,d=this.dimensions(),f=a.dimensions();if(!(d[0]&&f[0]||void 0!=this.regionStart()&&void 0!=a.regionStart()&&void 0!=this.regionEnd()&&void 0!=a.regionEnd()))return!1;if(!d[0]){if(!f[0])return this.regionStart()<a.regionEnd()&&this.regionEnd()>a.regionStart();for(c=0;c<f[1];++c)if(b=a.getStart(0,c),e=a.getEnd(0,c),void 0!=b&&void 0!=e&&this.regionStart()<e&&this.regionEnd()>b)return!0;return!1}var n=
epiviz.utils.arrayIntersection(this.metadataColumns(),a.metadataColumns());if(n.length){for(b=0;b<d[1];++b)for(c=0;c<f[1];++c){var h=!0;for(e=0;e<n.length;++e){var g=this.metadataLooseCompare()||a.metadataLooseCompare(),l=this.getMetadata(0,b,n[e]),m=a.getMetadata(0,c,n[e]);if(l!=m){if(!g){h=!1;break}l.length<=m.length?(g=l,l=m):g=m;if(!(new RegExp("^(.+,)?"+g+"(,.+)?$")).test(l)){h=!1;break}}}if(h)return!0}return!1}for(b=0;b<d[1];++b)for(c=0;c<f[1];++c)if(this.getStart(0,b)<a.getEnd(0,c)&&this.getEnd(0,
b)>a.getStart(0,c))return!0;return!1};epiviz.ui.charts.VisualizationProperties=function(a,b,c,e,d,f,n,h,g){this.width=a;this.height=b;this.margins=c;this.visConfigSelection=e;this.colors=d;this.modifiedMethods=f;this.customSettingsValues=n||{};this.customSettingsDefs=h||[];this.chartMarkers=g||[]};
epiviz.ui.charts.VisualizationProperties.prototype.copy=function(){var a=new epiviz.ui.controls.VisConfigSelection(this.visConfigSelection.measurements?new epiviz.measurements.MeasurementSet(this.visConfigSelection.measurements):void 0,this.visConfigSelection.datasource,this.visConfigSelection.datasourceGroup,this.visConfigSelection.dataprovider,epiviz.utils.mapCopy(this.visConfigSelection.annotation),this.visConfigSelection.defaultChartType,this.visConfigSelection.minSelectedMeasurements);return new epiviz.ui.charts.VisualizationProperties(this.width,
this.height,this.margins?this.margins.copy():this.margins,a,this.colors,this.modifiedMethods?epiviz.utils.mapCopy(this.modifiedMethods):this.modifiedMethods,this.customSettingsValues?epiviz.utils.mapCopy(this.customSettingsValues):this.customSettingsValues,this.customSettingsDefs?this.customSettingsDefs.slice(0):this.customSettingsDefs,this.chartMarkers.slice(0))};epiviz.ui.charts.VisEventArgs=function(a,b){this.id=a;this.args=b};
epiviz.ui.charts.DisplayType={MEASUREMENT_VIS:{name:"measurement-vis",PLOT:{name:"plot"},TRACK:{name:"track"}},DATA_STRUCTURE:{name:"data-structure",HIERARCHY:{name:"hierarchy"}}};epiviz.ui.charts.DisplayType.is=function(a,b){var c=function(a,b){if(a.name==b.name)return!0;for(var f in b)if(b.hasOwnProperty(f)&&"name"!=f&&c(a,b[f]))return!0;return!1};return c(a,b)};
epiviz.ui.charts.Visualization=function(a,b,c){this._id=a;this._container=b;this._properties=c;this._originalMethods={};this._hasModifiedMethods=!1;this._lastModifiedMethod="draw";var e=this;if(c.modifiedMethods){var d=new epiviz.deferred.Deferred,f=c.modifiedMethods,n=Object.keys(f),h={},g=0,l;for(l in f)f.hasOwnProperty(l)&&"_setModifiedMethods"!=l&&function(a){epiviz.caja.cajole(f[a],epiviz.caja.buildChartMethodContext()).done(function(b){b&&(h[a]=b,g+=1,g>=n.length&&d.resolve())})}(l);d.done(function(){for(var a in h)h.hasOwnProperty(a)&&
(e._originalMethods[a]=e[a],e[a]=h[a],e._lastModifiedMethod=a);e._hasModifiedMethods=!0;e.draw()})}this._customSettingsValues={};for(a=0;a<c.customSettingsDefs.length;++a)switch(b=c.customSettingsDefs[a],l=c.customSettingsValues[b.id],b.type){case epiviz.ui.charts.CustomSetting.Type.BOOLEAN:this._customSettingsValues[b.id]=!1===l||l?l:b.defaultValue;break;case epiviz.ui.charts.CustomSetting.Type.NUMBER:this._customSettingsValues[b.id]=0===l||l?l:b.defaultValue;break;case epiviz.ui.charts.CustomSetting.Type.STRING:this._customSettingsValues[b.id]=
""===l||l?l:b.defaultValue;break;case epiviz.ui.charts.CustomSetting.Type.MEASUREMENTS_METADATA:var m={};c.visConfigSelection.measurements.foreach(function(a){a.metadata().forEach(function(a){m[a]=a})});b.possibleValues=Object.keys(m);b.possibleValues.sort();l=l||b.defaultValue;this._customSettingsValues[b.id]=l in m?l:b.possibleValues.length?b.possibleValues[0]:"";break;case epiviz.ui.charts.CustomSetting.Type.MEASUREMENTS_ANNOTATION:m={name:"name"};c.visConfigSelection.measurements.foreach(function(a){(a=
a.annotation())&&Object.keys(a).forEach(function(a){m[a]=a})});b.possibleValues=Object.keys(m);b.possibleValues.sort();l=l||b.defaultValue;this._customSettingsValues[b.id]=l in m?l:b.possibleValues.length?b.possibleValues[0]:"";break;default:this._customSettingsValues[b.id]=l||b.defaultValue}this._svgId=sprintf("%s-svg",this._id);this._lastRange=this._lastData=this._unalteredData=this._svg=null;this._slide=0;this._zoom=1;this._markers=c.chartMarkers;this._markersMap={};this._markersIndices={};this._markers.forEach(function(a,
b){a&&(e._markersMap[a.id()]=a,e._markersIndices[a.id()]=b)});this._autoPropagateChanges=!0;this._hover=new epiviz.events.Event;this._unhover=new epiviz.events.Event;this._select=new epiviz.events.Event;this._deselect=new epiviz.events.Event;this._save=new epiviz.events.Event;this._remove=new epiviz.events.Event;this._colorsChanged=new epiviz.events.Event;this._methodsModified=new epiviz.events.Event;this._methodsReset=new epiviz.events.Event;this._markersModified=new epiviz.events.Event;this._customSettingsChanged=
new epiviz.events.Event;this._sizeChanged=new epiviz.events.Event;this._marginsChanged=new epiviz.events.Event;this._dataWaitStart=new epiviz.events.Event;this._dataWaitEnd=new epiviz.events.Event};epiviz.ui.charts.Visualization.SVG_MARGIN=20;
epiviz.ui.charts.Visualization.prototype._initialize=function(){"100%"==this._properties.height&&(this._properties.height=this._container.height()-epiviz.ui.charts.Visualization.SVG_MARGIN);"100%"==this._properties.width&&(this._properties.width=this._container.width()-epiviz.ui.charts.Visualization.SVG_MARGIN);var a=this.width(),b=this.height();this._container.addClass("visualization-container");this._container.append(sprintf('<svg id="%s" class="visualization" width="%s" height="%s"><style type="text/css"></style><defs></defs></svg>',
this._svgId,a,b));this._svg=d3.select("#"+this._svgId);this._widthDif=$("#"+this._svgId).width()-(this._container.width()-epiviz.ui.charts.Visualization.SVG_MARGIN);this._heightDif=b-(this._container.height()-epiviz.ui.charts.Visualization.SVG_MARGIN);this._properties.width=a;this._properties.height=b;var c=this;this._container.click(function(){c._deselect.notify(new epiviz.ui.charts.VisEventArgs(c._id))})};
epiviz.ui.charts.Visualization.prototype._clearAxes=function(a){a=a||this._svg;a.selectAll(".xAxis").remove();a.selectAll(".yAxis").remove()};
epiviz.ui.charts.Visualization.prototype._drawAxes=function(a,b,c,e,d,f,n,h,g,l,m,p,t,r){d=d||this._svg;h=h||this.margins();n=n||this.height();f=f||this.width();var q=d.select(".axes"),w=q.select(".xAxis-grid");r=q.select(".yAxis-grid");var u=q.select(".xAxis-line");l=q.select(".yAxis-line");q.empty()&&(q=d.append("g").attr("class","axes"));w.empty()&&(w=q.append("g").attr("class","xAxis xAxis-grid"));r.empty()&&(r=q.append("g").attr("class","yAxis yAxis-grid"));u.empty()&&(u=q.append("g").attr("class",
"xAxis xAxis-line"));l.empty()&&(l=q.append("g").attr("class","yAxis yAxis-line"));a&&(w.attr("transform","translate("+h.left()+", "+h.top()+")").selectAll("line.x").data(a.ticks(c)).enter().append("line").attr("x1",a).attr("x2",a).attr("y1",0).attr("y2",n-h.top()-h.bottom()).style("stroke","#eeeeee").style("shape-rendering","crispEdges"),d=g||(m?function(a){return m[a]}:function(a){var b=d3.format("s");a=Math.round(1E3*a)/1E3;return b(a)}),c=d3.svg.axis().scale(a).orient("bottom").ticks(c).tickFormat(d),
u.attr("transform","translate("+h.left()+", "+(n-h.bottom())+")").call(c),m&&(n="rotate(-90)",t&&(n+="translate(0,"+(a(.5)-a(0))+")"),u.selectAll("text").style("text-anchor","end").attr("dx","-.8em").attr("dy","-0.5em").attr("transform",n)));b&&(r.attr("transform","translate("+h.left()+", "+h.top()+")").selectAll("line.y").data(b.ticks(e-1)).enter().append("line").attr("x1",0).attr("x2",f-h.left()-h.right()).attr("y1",b).attr("y2",b).style("stroke","#eeeeee").style("shape-rendering","crispEdges"),
a=p?function(a){return p[a]}:function(a){var b=d3.format("s");a=Math.round(1E3*a)/1E3;return b(a)},b=d3.svg.axis().ticks(e-1).scale(b).orient("left").tickFormat(a),l.attr("transform","translate("+h.left()+", "+h.top()+")").call(b))};
epiviz.ui.charts.Visualization.prototype._drawTitle=function(){var a=this._svg.selectAll(".visualization-title"),b=epiviz.ui.charts.Visualization.CustomSettings;(b=this.customSettingsValues()[b.TITLE])&&""!=b.trim()?(a.empty()&&(a=this._svg.append("text").attr("class","visualization-title").attr("text-anchor","middle")),a.attr("x",.5*this.width()).attr("y",25).text(b)):a.empty()||a.remove()};
epiviz.ui.charts.Visualization.prototype.resize=function(a,b){a&&(this._properties.width=a);b&&(this._properties.height=b);this.draw();this._sizeChanged.notify(new epiviz.ui.charts.VisEventArgs(this._id,{width:this._properties.width,height:this._properties.height}))};epiviz.ui.charts.Visualization.prototype.updateSize=function(){this.resize(this._widthDif+this._container.width()-epiviz.ui.charts.Visualization.SVG_MARGIN,this._heightDif+this._container.height()-epiviz.ui.charts.Visualization.SVG_MARGIN)};
epiviz.ui.charts.Visualization.prototype.draw=function(a,b){void 0!=a&&(this._lastRange=a);void 0!=b&&(this._unalteredData=this._lastData=b,this._dataWaitEnd.notify(new epiviz.ui.charts.VisEventArgs(this._id)));this._svg.attr("width",this.width()).attr("height",this.height());this._drawTitle();return[]};epiviz.ui.charts.Visualization.prototype.container=function(){return this._container};epiviz.ui.charts.Visualization.prototype.id=function(){return this._id};
epiviz.ui.charts.Visualization.prototype.properties=function(){return this._properties};epiviz.ui.charts.Visualization.prototype.height=function(){return this._properties.height};epiviz.ui.charts.Visualization.prototype.width=function(){return this._properties.width};epiviz.ui.charts.Visualization.prototype.margins=function(){return this._properties.margins};epiviz.ui.charts.Visualization.prototype.colors=function(){return this._properties.colors};
epiviz.ui.charts.Visualization.prototype.setColors=function(a){a&&!a.equals(this._properties.colors)&&(this._properties.colors=a,this.draw(),this._colorsChanged.notify(new epiviz.ui.charts.VisEventArgs(this._id,this._properties.colors)))};epiviz.ui.charts.Visualization.prototype.colorLabels=function(){var a=Array(this.measurements().size());this.measurements().foreach(function(b,c){a[c]=b.name()});return a};epiviz.ui.charts.Visualization.prototype.measurements=function(){return this.properties().visConfigSelection.measurements};
epiviz.ui.charts.Visualization.prototype.customSettingsValues=function(){return this._customSettingsValues};
epiviz.ui.charts.Visualization.prototype.setCustomSettingsValues=function(a){if(this._customSettingsValues!=a&&a&&!epiviz.utils.mapEquals(this._customSettingsValues,a)){var b=epiviz.ui.charts.Visualization.CustomSettings,c=a[b.TITLE]||"",e=(this._customSettingsValues[b.TITLE]||"").trim().length,c=c.trim().length;if(!(e*c)&&e+c){var e=20*epiviz.utils.sign(c-e),c=a[b.MARGIN_TOP]||this._properties.margins.top(),d=a[b.MARGIN_LEFT]||this._properties.margins.left(),f=a[b.MARGIN_RIGHT]||this._properties.margins.right(),
n=a[b.MARGIN_BOTTOM]||this._properties.margins.bottom();a[b.MARGIN_TOP]=c+e;a[b.MARGIN_LEFT]=d;a[b.MARGIN_RIGHT]=f;a[b.MARGIN_BOTTOM]=n}e=this._customSettingsValues[epiviz.ui.charts.ChartType.CustomSettings.MEASUREMENT_GROUPS_AGGREGATOR];c=a[epiviz.ui.charts.ChartType.CustomSettings.MEASUREMENT_GROUPS_AGGREGATOR];this._customSettingsValues=a;b.MARGIN_TOP in a&&b.MARGIN_BOTTOM in a&&b.MARGIN_LEFT in a&&b.MARGIN_RIGHT in a&&(this._properties.margins=new epiviz.ui.charts.Margins(a[b.MARGIN_TOP],a[b.MARGIN_LEFT],
a[b.MARGIN_BOTTOM],a[b.MARGIN_RIGHT]),this._marginsChanged.notify(new epiviz.ui.charts.VisEventArgs(this._id,this._properties.margins)));if(e!=c){var h=this;this.transformData(this._lastRange,this._unalteredData).done(function(){h.draw()})}else this.draw();this._customSettingsChanged.notify(new epiviz.ui.charts.VisEventArgs(this._id,a))}};
epiviz.ui.charts.Visualization.prototype.setModifiedMethods=function(a){var b=this,c=!1;if(a){var e=Object.keys(a),d=new epiviz.deferred.Deferred,f=0,n={},h;for(h in a)a.hasOwnProperty(h)&&"_setModifiedMethods"!=h&&this[h].toString()!=a[h]&&(h in this._originalMethods||(this._originalMethods[h]=this[h]),function(b){epiviz.caja.cajole(a[b],epiviz.caja.buildChartMethodContext()).done(function(a){a&&(n[b]=a,c=!0,f+=1,f>=e.length&&d.resolve())})}(h));d.done(function(){if(c){for(var d in n)n.hasOwnProperty(d)&&
(b[d]=n[d],b._lastModifiedMethod=d);b._hasModifiedMethods=!0;b.draw();b._methodsModified.notify(new epiviz.ui.charts.VisEventArgs(b._id,a))}})}};epiviz.ui.charts.Visualization.prototype.hasModifiedMethods=function(){return this._hasModifiedMethods};epiviz.ui.charts.Visualization.prototype.lastModifiedMethod=function(){return this._lastModifiedMethod};
epiviz.ui.charts.Visualization.prototype.resetModifiedMethods=function(){if(this._hasModifiedMethods){for(var a in this._originalMethods)this._originalMethods.hasOwnProperty(a)&&(this[a]=this._originalMethods[a]);this._hasModifiedMethods=!1;this.draw();this._methodsReset.notify(new epiviz.ui.charts.VisEventArgs(this._id))}};
epiviz.ui.charts.Visualization.prototype.putMarker=function(a){if(a){var b;if(a.id()in this._markersMap){b=this._markersIndices[a.id()];var c=this._markers[b];if(c==a||c.type()==a.type()&&c.preMarkStr()==a.preMarkStr()&&c.markStr()==a.markStr())return;this._markers[b]=a}else b=this._markers.length,this._markers.push(a),this._markersIndices[a.id()]=b;this._markersMap[a.id()]=a;var e=this;this.transformData(this._lastRange,this._unalteredData).done(function(){e.draw()});this._markersModified.notify(new epiviz.ui.charts.VisEventArgs(this._id,
this._markers))}};epiviz.ui.charts.Visualization.prototype.removeMarker=function(a){if(a in this._markersMap){this._markers[this._markersIndices[a]]=null;delete this._markersMap[a];delete this._markersIndices[a];var b=this;this.transformData(this._lastRange,this._unalteredData).done(function(){b.draw()});this._markersModified.notify(new epiviz.ui.charts.VisEventArgs(this._id,this._markers))}};
epiviz.ui.charts.Visualization.prototype.getMarker=function(a){return a&&a in this._markersMap?this._markersMap[a]:null};epiviz.ui.charts.Visualization.prototype.displayType=function(){throw Error("unimplemented abstract method");};epiviz.ui.charts.Visualization.prototype.autoPropagateChanges=function(){return this._autoPropagateChanges};epiviz.ui.charts.Visualization.prototype.setAutoPropagateChanges=function(a){this._autoPropagateChanges=a};
epiviz.ui.charts.Visualization.prototype.transformData=function(a,b){var c=this._lastRange;void 0!=a&&(this._lastRange=a);void 0!=b&&(this._unalteredData=this._lastData=b);c&&a&&c.overlapsWith(a)&&c.width()==a.width()&&(this._slide=a.start()-c.start());c&&a&&c.overlapsWith(a)&&c.width()!=a.width()&&(this._zoom=c.width()/a.width());c=new epiviz.deferred.Deferred;c.resolve();return c};epiviz.ui.charts.Visualization.prototype.onHover=function(){return this._hover};
epiviz.ui.charts.Visualization.prototype.onUnhover=function(){return this._unhover};epiviz.ui.charts.Visualization.prototype.onSelect=function(){return this._select};epiviz.ui.charts.Visualization.prototype.onDeselect=function(){return this._deselect};
epiviz.ui.charts.Visualization.prototype.doHover=function(a){var b=this._container.find(".items"),c=b.find("> .hovered"),e=b.find("> .selected"),d=e.find("> .hovered"),f=function(){return a.overlapsWith(d3.select(this).data()[0])},b=b.find("> .item").filter(f);c.append(b);b=e.find("> .item").filter(f);d.append(b)};
epiviz.ui.charts.Visualization.prototype.doUnhover=function(){var a=this._container.find(".items"),b=a.find("> .hovered"),c=a.find("> .selected"),e=c.find("> .hovered");a.prepend(b.children());c.prepend(e.children())};
epiviz.ui.charts.Visualization.prototype.doSelect=function(a){var b=this._container.find(".items"),c=b.find("> .hovered"),e=b.find("> .selected"),d=e.find("> .hovered"),f=function(){return a.overlapsWith(d3.select(this).data()[0])},b=b.find("> .item").filter(f);e.append(b);b=c.find("> .item").filter(f);d.append(b)};
epiviz.ui.charts.Visualization.prototype.doDeselect=function(){var a=this._container.find(".items"),b=a.find("> .hovered"),c=a.find("> .selected"),e=c.find("> .hovered");a.prepend(c.find("> .item"));b.prepend(e.children())};epiviz.ui.charts.Visualization.prototype.onSave=function(){return this._save};epiviz.ui.charts.Visualization.prototype.onRemove=function(){return this._remove};epiviz.ui.charts.Visualization.prototype.onColorsChanged=function(){return this._colorsChanged};
epiviz.ui.charts.Visualization.prototype.onMethodsModified=function(){return this._methodsModified};epiviz.ui.charts.Visualization.prototype.onMethodsReset=function(){return this._methodsReset};epiviz.ui.charts.Visualization.prototype.onMarkersModified=function(){return this._markersModified};epiviz.ui.charts.Visualization.prototype.onCustomSettingsChanged=function(){return this._customSettingsChanged};epiviz.ui.charts.Visualization.prototype.onSizeChanged=function(){return this._sizeChanged};
epiviz.ui.charts.Visualization.prototype.onMarginsChanged=function(){return this._marginsChanged};epiviz.ui.charts.Visualization.prototype.onDataWaitStart=function(){return this._dataWaitStart};epiviz.ui.charts.Visualization.prototype.onDataWaitEnd=function(){return this._dataWaitEnd};
epiviz.ui.charts.Visualization.CustomSettings={TITLE:"title",MARGIN_LEFT:"marginLeft",MARGIN_RIGHT:"marginRight",MARGIN_TOP:"marginTop",MARGIN_BOTTOM:"marginBottom",X_MIN:"xMin",X_MAX:"xMax",Y_MIN:"yMin",Y_MAX:"yMax",COL_LABEL:"colLabel",ROW_LABEL:"rowLabel"};
epiviz.ui.charts.VisualizationType=function(a){var b=epiviz.Config.VisualizationPropertySettings;this._config=a;this._defaultSettings=epiviz.utils.mapCombine(epiviz.utils.mapCombine(a.chartSettings[this.typeName()],a.chartSettings[this.chartDisplayType()],!0),a.chartSettings["default"],!0);this._defaultWidth=this._defaultSettings[b.WIDTH];this._defaultHeight=this._defaultSettings[b.HEIGHT];this._defaultMargins=this._defaultSettings[b.MARGINS];this._defaultColors=a.colorPalettesMap[this._defaultSettings[b.COLORS]];
this._decorations=this._defaultSettings[b.DECORATIONS];this._customSettingsValues=a.chartCustomSettings[this.typeName()]||null};epiviz.ui.charts.VisualizationType.DisplayType={PLOT:"plot",TRACK:"track",DATA_STRUCTURE:"data-structure"};epiviz.ui.charts.VisualizationType.prototype.createNew=function(a,b,c){throw Error("unimplemented abstract method");};epiviz.ui.charts.VisualizationType.prototype.typeName=function(){throw Error("unimplemented abstract method");};
epiviz.ui.charts.VisualizationType.prototype.chartName=function(){throw Error("unimplemented abstract method");};epiviz.ui.charts.VisualizationType.prototype.chartHtmlAttributeName=function(){throw Error("unimplemented abstract method");};epiviz.ui.charts.VisualizationType.prototype.chartDisplayType=function(){throw Error("unimplemented abstract method");};epiviz.ui.charts.VisualizationType.prototype.measurementsFilter=function(){return function(a){return!0}};
epiviz.ui.charts.VisualizationType.prototype.isRestrictedToSameDatasourceGroup=function(){return!1};epiviz.ui.charts.VisualizationType.prototype.isRestrictedToRangeMeasurements=function(){return!1};epiviz.ui.charts.VisualizationType.prototype.isRestrictedToFeatureMeasurements=function(){return!this.isRestrictedToRangeMeasurements()};epiviz.ui.charts.VisualizationType.prototype.minSelectedMeasurements=function(){return 1};epiviz.ui.charts.VisualizationType.prototype.chartContainer=function(){return epiviz.ui.ControlManager.CHART_TYPE_CONTAINERS[this.chartDisplayType()]};
epiviz.ui.charts.VisualizationType.prototype.cssClass=function(){throw Error("unimplemented abstract method");};epiviz.ui.charts.VisualizationType.prototype.defaultWidth=function(){return this._defaultWidth};epiviz.ui.charts.VisualizationType.prototype.defaultHeight=function(){return this._defaultHeight};epiviz.ui.charts.VisualizationType.prototype.defaultMargins=function(){return this._defaultMargins};epiviz.ui.charts.VisualizationType.prototype.defaultColors=function(){return this._defaultColors};
epiviz.ui.charts.VisualizationType.prototype.decorations=function(){return this._decorations};epiviz.ui.charts.VisualizationType.prototype.customSettingsValues=function(){return this._customSettingsValues};
epiviz.ui.charts.VisualizationType.prototype.customSettingsDefs=function(){return[new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.TITLE,epiviz.ui.charts.CustomSetting.Type.STRING,"","Title"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.MARGIN_TOP,epiviz.ui.charts.CustomSetting.Type.NUMBER,this._defaultMargins.top(),"Top margin"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.MARGIN_BOTTOM,epiviz.ui.charts.CustomSetting.Type.NUMBER,
this._defaultMargins.bottom(),"Bottom margin"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.MARGIN_LEFT,epiviz.ui.charts.CustomSetting.Type.NUMBER,this._defaultMargins.left(),"Left margin"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.MARGIN_RIGHT,epiviz.ui.charts.CustomSetting.Type.NUMBER,this._defaultMargins.right(),"Right margin")]};
epiviz.ui.charts.ChartObject=function(a,b,c,e,d,f,n,h){epiviz.ui.charts.VisObject.call(this);this.id=a;this.start=b;this.end=c;this.values=e;this.seriesIndex=d;this.valueItems=f;this.measurements=n;this.cssClasses=h};epiviz.ui.charts.ChartObject.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.VisObject.prototype);epiviz.ui.charts.ChartObject.constructor=epiviz.ui.charts.ChartObject;epiviz.ui.charts.ChartObject.prototype.regionStart=function(){return this.start};
epiviz.ui.charts.ChartObject.prototype.regionEnd=function(){return this.end};epiviz.ui.charts.ChartObject.prototype.getMetadata=function(a,b,c){return this.valueItems?this.valueItems[a][b].rowItem.metadata(c):null};epiviz.ui.charts.ChartObject.prototype.getStart=function(a,b){return this.valueItems[a][b].rowItem.start()};epiviz.ui.charts.ChartObject.prototype.getEnd=function(a,b){return this.valueItems[a][b].rowItem.end()};epiviz.ui.charts.ChartObject.prototype.metadataColumns=function(){return Object.keys(this.valueItems[0][0].rowItem.rowMetadata())};
epiviz.ui.charts.ChartObject.prototype.dimensions=function(){var a=[];return this.valueItems?(a.push(this.valueItems.length),this.valueItems.length?a.push(this.valueItems[0].length):a.push(0),a):[0,0]};epiviz.ui.charts.Chart=function(a,b,c){epiviz.ui.charts.Visualization.call(this,a,b,c);this._nBins=100;this._globalIndexColorLabels=this._measurementColorLabels=this._binSize=null};epiviz.ui.charts.Chart.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Visualization.prototype);
epiviz.ui.charts.Chart.constructor=epiviz.ui.charts.Chart;epiviz.ui.charts.Chart.prototype._initialize=function(){epiviz.ui.charts.Visualization.prototype._initialize.call(this);this._svg.classed("base-chart",!0)};
epiviz.ui.charts.Chart.prototype._addFilters=function(){var a=this._svg.append("defs"),b=a.append("filter").attr("id",this.id()+"-glow");b.append("feGaussianBlur").attr("id","gaussianBlur").attr("stdDeviation","2").attr("result","blurResult");b.append("feComposite").attr("id","composite").attr("in","SourceGraphic").attr("in2","blurResult").attr("operator","over");b=a.append("filter").attr("id",this.id()+"-contour");b.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation","1").attr("result",
"blur");b.append("feColorMatrix").attr("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 10 -1 ").attr("result","colorMatrix");b.append("feFlood").attr("result","fillColor").attr("flood-color","#800000").attr("in","blur");b.append("feComposite").attr("result","composite").attr("in","fillColor").attr("in2","colorMatrix").attr("operator","atop");b.append("feComposite").attr("in","SourceGraphic").attr("in2","composite").attr("operator","atop");a=a.append("filter").attr("id",this.id()+"-dropshadow").attr("filterUnits",
"userSpaceOnUse").attr("color-interpolation-filters","sRGB");b=a.append("feComponentTransfer").attr("in","SourceAlpha");b.append("feFuncR").attr("type","discrete").attr("tableValues","1");b.append("feFuncG").attr("type","discrete").attr("tableValues",198/255);b.append("feFuncB").attr("type","discrete").attr("tableValues","0");a.append("feGaussianBlur").attr("stdDeviation","2");a.append("feOffset").attr("dx","0").attr("dy","0").attr("result","shadow");a.append("feComposite").attr("in","SourceGraphic").attr("in2",
"shadow").attr("operator","over")};epiviz.ui.charts.Chart.prototype.draw=function(a,b){epiviz.ui.charts.Visualization.prototype.draw.call(this,a,b);a&&(this._binSize=Math.ceil((a.end()-a.start())/this._nBins));return[]};
epiviz.ui.charts.Chart.prototype.transformData=function(a,b){var c=new epiviz.deferred.Deferred,e=this;epiviz.ui.charts.Visualization.prototype.transformData.call(this,a,b).done(function(){e._lastData?e._lastData.ready(function(){var a=!1;e._lastData.measurements().every(function(b){a=b.type()!==epiviz.measurements.Measurement.Type.RANGE;return!a});if(a){var b;e._markers.every(function(a){a&&a.type()==epiviz.ui.charts.markers.VisualizationMarker.Type.GROUP_BY_MEASUREMENTS&&(b=a);return!b});if(b){var n=
epiviz.ui.charts.markers.MeasurementAggregators[e.customSettingsValues()[epiviz.ui.charts.ChartType.CustomSettings.MEASUREMENT_GROUPS_AGGREGATOR]];e._lastData=new epiviz.datatypes.MeasurementAggregatedGenomicData(e._lastData,b,n)}}var h;e._markers.every(function(a){a&&a.type()==epiviz.ui.charts.markers.VisualizationMarker.Type.FILTER&&(h=a);return!h});h&&(e._lastData=new epiviz.datatypes.ItemFilteredGenomicData(e._lastData,h));var g;e._markers.every(function(a){a&&a.type()==epiviz.ui.charts.markers.VisualizationMarker.Type.ORDER_BY_MEASUREMENTS&&
(g=a);return!g});g&&(e._lastData=new epiviz.datatypes.MeasurementOrderedGenomicData(e._lastData,g));e._lastData.ready(function(){var a=e._lastData;if(a.isReady()){var b=new epiviz.deferred.Deferred,d;e._markers.every(function(a){a&&a.type()==epiviz.ui.charts.markers.VisualizationMarker.Type.COLOR_BY_MEASUREMENTS&&(d=a);return!d});e._measurementColorLabels=null;if(d){var f=new epiviz.measurements.MeasurementHashtable;d.preMark()(a).done(function(c){var g=a.measurements();epiviz.utils.deferredFor(g.length,
function(b){var e=new epiviz.deferred.Deferred;d.mark()(g[b],a,c).done(function(a){f.put(g[b],a);e.resolve()});return e}).done(function(){e._measurementColorLabels=f;b.resolve()})})}else b.resolve();var g=new epiviz.deferred.Deferred,h;e._markers.every(function(a){a&&a.type()==epiviz.ui.charts.markers.VisualizationMarker.Type.COLOR_BY_ROW&&(h=a);return!h});e._globalIndexColorLabels=null;if(h){var n={};h.preMark()(a).done(function(b){var c=a.firstSeries();epiviz.utils.deferredFor(c.size(),function(d){var e=
new epiviz.deferred.Deferred;h.mark()(c.getRow(d),a,b).done(function(a){n[d+c.globalStartIndex()]=a;e.resolve()});return e}).done(function(){e._globalIndexColorLabels=n;g.resolve()})})}else g.resolve();b.done(function(){g.state()==epiviz.deferred.Deferred.State.RESOLVED&&(e._dataWaitEnd.notify(new epiviz.ui.charts.VisEventArgs(e.id())),c.resolve())});g.done(function(){b.state()==epiviz.deferred.Deferred.State.RESOLVED&&(e._dataWaitEnd.notify(new epiviz.ui.charts.VisEventArgs(e.id())),c.resolve())})}})}):
c.resolve()});return c};epiviz.ui.charts.Chart.prototype.properties=function(){return epiviz.ui.charts.Visualization.prototype.properties.call(this)};epiviz.ui.charts.Track=function(a,b,c){epiviz.ui.charts.Chart.call(this,a,b,c);this._highlightGroup=this._background=null};epiviz.ui.charts.Track.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Chart.prototype);epiviz.ui.charts.Track.constructor=epiviz.ui.charts.Track;
epiviz.ui.charts.Track.prototype._initialize=function(){this._properties.width="100%";epiviz.ui.charts.Chart.prototype._initialize.call(this);var a=this;this._highlightGroup=this._svg.append("g").attr("class","track-highlight");this._background=this._svg.append("rect").attr("class","chart-background").attr("x",0).attr("y",0).attr("width","100%").attr("height","100%").attr("fill","#ffffff").attr("fill-opacity","0");this._background.on("mouseover",function(){a._captureMouseHover()}).on("mousemove",
function(){a._captureMouseHover()}).on("mouseout",function(){a._unhover.notify(new epiviz.ui.charts.VisEventArgs(a.id()))})};epiviz.ui.charts.Track.prototype.draw=function(a,b,c,e){a=epiviz.ui.charts.Chart.prototype.draw.call(this,a,b);this._drawLegend();return a};epiviz.ui.charts.Track.prototype.displayType=function(){return epiviz.ui.charts.VisualizationType.DisplayType.TRACK};
epiviz.ui.charts.Track.prototype.doHover=function(a){epiviz.ui.charts.Chart.prototype.doHover.call(this,a);if(void 0!=a.start&&void 0!=a.end&&this._lastRange){this._highlightGroup.selectAll("rect").remove();this._highlightGroup.attr("transform","translate("+this.margins().left()+", 0)");var b=epiviz.ui.charts.Axis,c=d3.scale.linear().domain([this._lastRange.start(),this._lastRange.end()]).range([0,this.width()-this.margins().sumAxis(b.X)]),b=[];if(a.measurements&&a.measurements.length)for(var e=0;e<
a.valueItems[0].length;++e){var d=a.valueItems[0][e].rowItem;b.push({start:d.start(),end:d.end()})}else b.push({start:a.start,end:a.end});this._highlightGroup.selectAll("rect").data(b,function(a){return sprintf("%s-%s",a.start,a.end)}).enter().append("rect").style("fill",this.colors().get(0)).style("fill-opacity","0.1").attr("x",function(a){var b=c(a.end+1)-c(a.start),d=Math.max(5,b);return c(a.start)+.5*b-.5*d}).attr("width",function(a){return Math.max(5,c(a.end+1)-c(a.start))}).attr("y",0).attr("height",
this.height())}};epiviz.ui.charts.Track.prototype.doUnhover=function(){epiviz.ui.charts.Chart.prototype.doUnhover.call(this);this._highlightGroup.selectAll("rect").remove()};
epiviz.ui.charts.Track.prototype._captureMouseHover=function(){if(this._lastRange){this._unhover.notify(new epiviz.ui.charts.VisEventArgs(this.id()));var a=d3.scale.linear().domain([0,this.width()]).range([this._lastRange.start(),this._lastRange.end()])(d3.mouse(this._background[0][0])[0])-this._binSize/2,b=a+this._binSize,a=new epiviz.ui.charts.ChartObject(sprintf("%s-highlight",this.id()),a,b);this._hover.notify(new epiviz.ui.charts.VisEventArgs(this.id(),a))}};
epiviz.ui.charts.Track.prototype._drawLegend=function(){var a=this;this._svg.selectAll(".chart-title").remove();this._svg.selectAll(".chart-title-color ").remove();if(this._lastData&&this._lastData.isReady()){var b=this._lastData.measurements(),c=this._svg.selectAll(".chart-title").data(b).enter().append("text").attr("class","chart-title").attr("font-weight","bold").attr("fill",function(b,c){return a._measurementColorLabels?a.colors().getByKey(a._measurementColorLabels.get(b)):a.colors().get(c)}).attr("y",
a.margins().top()-5).text(function(a,b){return a.name()}),e=0,d=[];$("#"+this.id()+" .chart-title").each(function(a){d.push(e);e+=this.getBBox().width+15});c.attr("x",function(b,c){return a.margins().left()+10+d[c]});this._svg.selectAll(".chart-title-color").data(b).enter().append("circle").attr("class","chart-title-color").attr("cx",function(b,c){return a.margins().left()+4+d[c]}).attr("cy",a.margins().top()-9).attr("r",4).style("shape-rendering","auto").style("stroke-width","0").style("fill",function(b,
c){return a._measurementColorLabels?a.colors().getByKey(a._measurementColorLabels.get(b)):a.colors().get(c)})}};epiviz.ui.charts.Plot=function(a,b,c){epiviz.ui.charts.Chart.call(this,a,b,c)};epiviz.ui.charts.Plot.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Chart.prototype);epiviz.ui.charts.Plot.constructor=epiviz.ui.charts.Plot;epiviz.ui.charts.Plot.prototype.displayType=function(){return epiviz.ui.charts.VisualizationType.DisplayType.PLOT};
epiviz.ui.charts.DataStructureVisualization=function(a,b,c){epiviz.ui.charts.Visualization.call(this,a,b,c);this._datasourceGroup=c.visConfigSelection.datasourceGroup;this._dataprovider=c.visConfigSelection.dataprovider;if(!this._dataprovider){var e=this;c.visConfigSelection.measurements.foreach(function(a){if(a.dataprovider())return e._dataprovider=a.dataprovider(),!0})}var d=new epiviz.measurements.MeasurementSet;c.visConfigSelection.measurements.foreach(function(a){if(a.dataprovider())return d.add(a),
!0});c.visConfigSelection.measurements=d;this._propagateHierarchyChanges=new epiviz.events.Event;this._requestHierarchy=new epiviz.events.Event};epiviz.ui.charts.DataStructureVisualization.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Visualization.prototype);epiviz.ui.charts.DataStructureVisualization.constructor=epiviz.ui.charts.DataStructureVisualization;epiviz.ui.charts.DataStructureVisualization.prototype.displayType=function(){return epiviz.ui.charts.VisualizationType.DisplayType.DATA_STRUCTURE};
epiviz.ui.charts.DataStructureVisualization.prototype.datasourceGroup=function(){return this._datasourceGroup};epiviz.ui.charts.DataStructureVisualization.prototype.dataprovider=function(){return this._dataprovider};epiviz.ui.charts.DataStructureVisualization.prototype.colorLabels=function(){for(var a=[],b=0;b<this.colors().size()&&20>b;++b)a.push("Color "+(b+1));return a};epiviz.ui.charts.DataStructureVisualization.prototype.onPropagateHierarchyChanges=function(){return this._propagateHierarchyChanges};
epiviz.ui.charts.DataStructureVisualization.prototype.firePropagateHierarchyChanges=function(){this._propagateHierarchyChanges.notify(new epiviz.ui.charts.VisEventArgs(this.id(),new epiviz.ui.controls.VisConfigSelection(void 0,void 0,this.datasourceGroup(),this.dataprovider(),void 0,void 0,void 0,{})))};epiviz.ui.charts.DataStructureVisualization.prototype.onRequestHierarchy=function(){return this._requestHierarchy};epiviz.ui.charts.tree={};
epiviz.ui.charts.tree.HierarchyVisualization=function(a,b,c){epiviz.ui.charts.DataStructureVisualization.call(this,a,b,c);this._selectedNodes={};this._selectedLevels={};this._nodesOrder={};this._selectMode=!1;var e=this;this._partition=d3.layout.partition().value(function(a){return 1}).sort(function(a,b){return(e._calcNodeOrder(a)||0)-(e._calcNodeOrder(b)||0)});this._oldUiDataMap=this._rootDepth=this._oldRootDepth=this._subtreeDepth=this._oldSubtreeDepth=this._uiData=null;this._uiDataMap={};this._levelsTaxonomy=
this._selectedNode=this._referenceNode=null};epiviz.ui.charts.tree.HierarchyVisualization.SELECTION_CLASSES={0:"none-select",1:"leaves-select",2:"node-select"};epiviz.ui.charts.tree.HierarchyVisualization.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.DataStructureVisualization.prototype);epiviz.ui.charts.tree.HierarchyVisualization.constructor=epiviz.ui.charts.tree.HierarchyVisualization;
epiviz.ui.charts.tree.HierarchyVisualization.prototype.draw=function(a,b){epiviz.ui.charts.DataStructureVisualization.prototype.draw.call(this,a,b);var c=this;b=this._lastData;a=this._lastRange;if(b){this._oldRootDepth=this._rootDepth;this._rootDepth=b.depth;this._referenceNode=null;var e=b.children&&b.children.length?this._uiDataMap[b.children[0].id]:null;this._selectedNode=e?new epiviz.ui.charts.tree.UiNode(e.id,e.name,e.children,e.parentId,e.size,e.depth,e.nchildren,e.nleaves,e.selectionType,e.order,
e.globalDepth,e.taxonomy,e.x,e.dx,e.y,e.dy,e.parent):null;this._oldSubtreeDepth=this._subtreeDepth;this._subtreeDepth=0;this._oldUiDataMap=this._uiDataMap;this._uiDataMap={};e=this._partition.nodes(b);this._uiData=[];var d=null;e.every(function(a){return a.id==b.id?(d=epiviz.ui.charts.tree.UiNode.deepCopy(a),!1):!0});var f={};epiviz.ui.charts.tree.Node.dfs(d,function(a){c._uiData.push(a);a.taxonomy in f||(f[a.taxonomy]=a.taxonomy)});this._levelsTaxonomy=Object.keys(f);this._uiData.forEach(function(a){c._uiDataMap[a.id]=
a;(!c._referenceNode||void 0==c._referenceNode.x||c._referenceNode.depth<a.depth)&&a.id in c._oldUiDataMap&&(c._referenceNode=a);c._subtreeDepth<a.depth+1&&(c._subtreeDepth=a.depth+1)});this._selectedNode||(this._selectedNode=b.children&&b.children.length?this._uiDataMap[b.children[0].id]:this._uiDataMap[b.id]);this._referenceNode||(this._referenceNode=this._uiData[0]);null==this._oldSubtreeDepth&&(this._oldSubtreeDepth=this._subtreeDepth);null==this._oldRootDepth&&(this._oldRootDepth=this._rootDepth)}this._drawLegend();
return this._uiData};epiviz.ui.charts.tree.HierarchyVisualization.prototype._calcNodeOrder=function(a){return a.id in this._nodesOrder?this._nodesOrder[a.id]:a.id in this._uiDataMap?this._uiDataMap[a.id].order:a.order};
epiviz.ui.charts.tree.HierarchyVisualization.prototype._getOldNode=function(a){var b=this._oldUiDataMap[a.id],c=this._uiDataMap[a.id];if(b)return b;if(!c)return a;var e=c.depth+this._rootDepth-this._oldRootDepth,b=0>e||e>=this._subtreeDepth,e=0>e?0:Math.min(1,e/this._oldSubtreeDepth);return new epiviz.ui.charts.tree.UiNode(a.id,a.name,a.children,a.parentId,a.size,a.depth,a.nchildren,a.nleaves,a.selectionType,a.order,a.globalDepth,a.taxonomy,b?c.x:c.x<=this._referenceNode.x?0:1,b?c.dx:0,e,b?0:c.y+
c.dy-e)};
epiviz.ui.charts.tree.HierarchyVisualization.prototype._getNewNode=function(a){var b=this._oldUiDataMap[a.id],c=this._uiDataMap[a.id];if(c)return c;if(!b)return a;var e=b.depth-this._rootDepth+this._oldRootDepth,c=0>e||e>=this._subtreeDepth,e=0>e?0:Math.min(1,e/this._subtreeDepth);return new epiviz.ui.charts.tree.UiNode(a.id,a.name,a.children,a.parentId,a.size,a.depth,a.nchildren,a.nleaves,a.selectionType,a.order,a.globalDepth,a.taxonomy,c?b.x:b.x<=this._selectedNode.x?0:1,c?b.dx:0,e,c?0:b.y+b.dy-
e)};
epiviz.ui.charts.tree.HierarchyVisualization.prototype._drawLegend=function(){this._svg.selectAll(".chart-title").remove();this._svg.selectAll(".chart-title-color").remove();if(this._levelsTaxonomy){var a=this,b=this._svg.selectAll(".chart-title").data(this._levelsTaxonomy);b.enter().append("text").attr("class","chart-title").attr("font-weight","bold").attr("y",this.margins().top()-5);b.attr("fill",function(b){return a.colors().getByKey(b)}).text(function(a){return a});var c=0,e=[];$("#"+this.id()+" .chart-title").each(function(a){e.push(c);
c+=this.getBBox().width+15});b.attr("x",function(b,c){return a.margins().left()+10+e[c]});this._svg.selectAll(".chart-title-color").data(this._levelsTaxonomy).enter().append("circle").attr("class","chart-title-color").attr("cx",function(b,c){return a.margins().left()+4+e[c]}).attr("cy",a.margins().top()-9).attr("r",4).style("shape-rendering","auto").style("stroke-width","0").style("fill",function(b){return a.colors().getByKey(b)})}};
epiviz.ui.charts.tree.HierarchyVisualization.prototype.levelsTaxonomy=function(){return this._levelsTaxonomy};epiviz.ui.charts.tree.HierarchyVisualization.prototype.selectMode=function(){return this._selectMode};epiviz.ui.charts.tree.HierarchyVisualization.prototype.setSelectMode=function(a){this._selectMode=a};
epiviz.ui.charts.tree.HierarchyVisualization.prototype.selectNode=function(a){var b=(a.selectionType+1)%3;this._selectedNodes[a.id]=b;this._changeNodeSelection(a,b);this.autoPropagateChanges()&&this.firePropagateHierarchyChanges();return b};
epiviz.ui.charts.tree.HierarchyVisualization.prototype.selectLevel=function(a){var b=this,c=[];$.each(this._selectedNodes,function(e,d){b._uiDataMap[e].globalDepth==a&&c.push(e)});c.forEach(function(a){delete b._selectedNodes[a]});this._selectedLevels[a]=a in this._selectedLevels?(this._selectedLevels[a]+1)%3:epiviz.ui.charts.tree.NodeSelectionType.NODE;this.autoPropagateChanges()&&this.firePropagateHierarchyChanges()};epiviz.ui.charts.tree.HierarchyVisualization.prototype.selectedNodes=function(){return this._selectedNodes};
epiviz.ui.charts.tree.HierarchyVisualization.prototype.nodesOrder=function(){return this._nodesOrder};epiviz.ui.charts.tree.HierarchyVisualization.prototype._changeNodeSelection=function(a,b){var c=epiviz.ui.charts.tree.HierarchyVisualization.SELECTION_CLASSES,e=this._svg.select("#"+this.id()+"-"+a.id),d;for(d in c)c.hasOwnProperty(d)&&e.classed(c[d],!1);e.classed(c[b],!0)};
epiviz.ui.charts.tree.HierarchyVisualization.prototype.firePropagateHierarchyChanges=function(){var a=this._selectedNodes,b=this._nodesOrder,c=this._selectedLevels;this._selectedNodes={};this._nodesOrder={};this.onPropagateHierarchyChanges().notify(new epiviz.ui.charts.VisEventArgs(this.id(),new epiviz.ui.controls.VisConfigSelection(void 0,void 0,this.datasourceGroup(),this.dataprovider(),void 0,void 0,void 0,{selection:a,order:b,selectedLevels:c})))};
epiviz.ui.charts.tree.HierarchyVisualization.prototype.fireRequestHierarchy=function(){var a=null;this._lastData&&this._lastData.children&&(a=1==this._lastData.children.length?this._lastData.children[0].id:this._lastData.id);this.onRequestHierarchy().notify(new epiviz.ui.charts.VisEventArgs(this.id(),new epiviz.ui.controls.VisConfigSelection(void 0,void 0,this.datasourceGroup(),this.dataprovider(),void 0,void 0,void 0,a)))};
epiviz.ui.charts.tree.HierarchyVisualization.prototype.setAutoPropagateChanges=function(a){epiviz.ui.charts.Visualization.prototype.setAutoPropagateChanges.call(this,a);a&&this.firePropagateHierarchyChanges()};epiviz.ui.charts.ChartType=function(a){epiviz.ui.charts.VisualizationType.call(this,a)};epiviz.ui.charts.ChartType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.VisualizationType.prototype);epiviz.ui.charts.ChartType.constructor=epiviz.ui.charts.ChartType;
epiviz.ui.charts.ChartType.prototype.createNew=function(a,b,c){throw Error("unimplemented abstract method");};
epiviz.ui.charts.ChartType.prototype.customSettingsDefs=function(){var a=epiviz.ui.charts.VisualizationType.prototype.customSettingsDefs.call(this);if(this.isRestrictedToRangeMeasurements())return a;var b=Object.keys(epiviz.ui.charts.markers.MeasurementAggregators);return a.concat([new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.ChartType.CustomSettings.MEASUREMENT_GROUPS_AGGREGATOR,epiviz.ui.charts.CustomSetting.Type.CATEGORICAL,b[0],"Aggregator for measurement groups",b)])};
epiviz.ui.charts.ChartType.CustomSettings={MEASUREMENT_GROUPS_AGGREGATOR:"measurementGroupsAggregator"};epiviz.ui.charts.TrackType=function(a){epiviz.ui.charts.ChartType.call(this,a)};epiviz.ui.charts.TrackType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.ChartType.prototype);epiviz.ui.charts.TrackType.constructor=epiviz.ui.charts.TrackType;epiviz.ui.charts.TrackType.prototype.chartDisplayType=function(){return epiviz.ui.charts.VisualizationType.DisplayType.TRACK};
epiviz.ui.charts.TrackType.prototype.cssClass=function(){return"track-container ui-widget-content"};epiviz.ui.charts.PlotType=function(a){epiviz.ui.charts.ChartType.call(this,a)};epiviz.ui.charts.PlotType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.ChartType.prototype);epiviz.ui.charts.PlotType.constructor=epiviz.ui.charts.PlotType;epiviz.ui.charts.PlotType.prototype.chartDisplayType=function(){return epiviz.ui.charts.VisualizationType.DisplayType.PLOT};
epiviz.ui.charts.PlotType.prototype.cssClass=function(){return"plot-container ui-widget-content"};epiviz.ui.charts.DataStructureVisualizationType=function(a){epiviz.ui.charts.VisualizationType.call(this,a)};epiviz.ui.charts.DataStructureVisualizationType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.VisualizationType.prototype);epiviz.ui.charts.DataStructureVisualizationType.constructor=epiviz.ui.charts.DataStructureVisualizationType;
epiviz.ui.charts.DataStructureVisualizationType.prototype.chartDisplayType=function(){return epiviz.ui.charts.VisualizationType.DisplayType.DATA_STRUCTURE};epiviz.ui.charts.DataStructureVisualizationType.prototype.cssClass=function(){return"data-structure-container ui-widget-content"};epiviz.ui.charts.DataStructureVisualizationType.prototype.isRestrictedToSameDatasourceGroup=function(){return!0};epiviz.ui.charts.DataStructureVisualizationType.prototype.hasMeasurements=function(){return!1};
epiviz.ui.charts.tree.HierarchyVisualizationType=function(a){epiviz.ui.charts.DataStructureVisualizationType.call(this,a)};epiviz.ui.charts.tree.HierarchyVisualizationType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.DataStructureVisualizationType.prototype);epiviz.ui.charts.tree.HierarchyVisualizationType.constructor=epiviz.ui.charts.tree.HierarchyVisualizationType;epiviz.ui.charts.ChartFactory=function(a){this._config=a;this._types={};for(var b=this._size=0;b<a.chartTypes.length;++b)this.register(a.chartTypes[b])};
epiviz.ui.charts.ChartFactory.prototype.size=function(){return this._size};epiviz.ui.charts.ChartFactory.prototype.registerType=function(a){a.typeName()in this._types||++this._size;this._types[a.typeName()]=a};epiviz.ui.charts.ChartFactory.prototype.unregisterType=function(a){if(!(a.typeName()in this._types))return!1;--this._size;delete this._types[a.typeName()];return!0};
epiviz.ui.charts.ChartFactory.prototype.register=function(a){a=epiviz.utils.evaluateFullyQualifiedTypeName(a);if(!a)return!1;this.registerType(new a(this._config));return!0};epiviz.ui.charts.ChartFactory.prototype.unregister=function(a){return(a=epiviz.utils.evaluateFullyQualifiedTypeName(a))?this.unregisterType(new a(this._config)):!1};epiviz.ui.charts.ChartFactory.prototype.get=function(a){return a&&a in this._types?this._types[a]:null};
epiviz.ui.charts.ChartFactory.prototype.foreach=function(a){for(var b in this._types)if(this._types.hasOwnProperty(b)&&a(b,this._types[b]))break};epiviz.ui.charts.decoration={};epiviz.ui.charts.decoration.VisualizationDecoration=function(a,b,c){this._visualization=a;this._otherDecoration=b;this._config=c};epiviz.ui.charts.decoration.VisualizationDecoration.prototype.decorate=function(){this._otherDecoration&&this._otherDecoration.decorate()};
epiviz.ui.charts.decoration.VisualizationDecoration.prototype.visualization=function(){return this._visualization};epiviz.ui.charts.decoration.VisualizationDecoration.prototype.otherDecoration=function(){return this._otherDecoration};epiviz.ui.charts.decoration.VisualizationDecoration.prototype.config=function(){return this._config};epiviz.ui.charts.decoration.ChartOptionButton=function(a,b,c){epiviz.ui.charts.decoration.VisualizationDecoration.call(this,a,b,c);this.isChartOptionButton=!0};
epiviz.ui.charts.decoration.ChartOptionButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.VisualizationDecoration.prototype);epiviz.ui.charts.decoration.ChartOptionButton.constructor=epiviz.ui.charts.decoration.ChartOptionButton;
epiviz.ui.charts.decoration.ChartOptionButton.prototype.decorate=function(){epiviz.ui.charts.decoration.VisualizationDecoration.prototype.decorate.call(this);if(this.isChartOptionButton){for(var a=0,b=this.otherDecoration();b;b=b.otherDecoration())b.isChartOptionButton&&++a;var c=$(sprintf('<button style="position: absolute; top: 5px; right: %spx">%s</button>',5+30*a,this._text())).appendTo(this.visualization().container()).button(this._renderOptions()).click(this._click());this.visualization().container().mousemove(function(){c.show()}).mouseleave(function(){c.hide()})}};
epiviz.ui.charts.decoration.ChartOptionButton.prototype._click=function(){return function(){}};epiviz.ui.charts.decoration.ChartOptionButton.prototype._renderOptions=function(){return{}};epiviz.ui.charts.decoration.ChartOptionButton.prototype._text=function(){return""};epiviz.ui.charts.decoration.RemoveChartButton=function(a,b){epiviz.ui.charts.decoration.ChartOptionButton.call(this,a,b)};epiviz.ui.charts.decoration.RemoveChartButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.ChartOptionButton.prototype);
epiviz.ui.charts.decoration.RemoveChartButton.constructor=epiviz.ui.charts.decoration.RemoveChartButton;epiviz.ui.charts.decoration.RemoveChartButton.prototype._click=function(){var a=this;return function(){a.visualization().onRemove().notify(new epiviz.ui.charts.VisEventArgs(a.visualization().id()))}};epiviz.ui.charts.decoration.RemoveChartButton.prototype._renderOptions=function(){return{icons:{primary:"ui-icon ui-icon-cancel"},text:!1}};
epiviz.ui.charts.decoration.RemoveChartButton.prototype._text=function(){return"Remove"};epiviz.ui.charts.decoration.SaveChartButton=function(a,b){epiviz.ui.charts.decoration.ChartOptionButton.call(this,a,b)};epiviz.ui.charts.decoration.SaveChartButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.ChartOptionButton.prototype);epiviz.ui.charts.decoration.SaveChartButton.constructor=epiviz.ui.charts.decoration.SaveChartButton;
epiviz.ui.charts.decoration.SaveChartButton.prototype._click=function(){var a=this;return function(){a.visualization().onSave().notify(new epiviz.ui.charts.VisEventArgs(a.visualization().id()))}};epiviz.ui.charts.decoration.SaveChartButton.prototype._renderOptions=function(){return{icons:{primary:"ui-icon ui-icon-disk"},text:!1}};epiviz.ui.charts.decoration.SaveChartButton.prototype._text=function(){return"Save"};
epiviz.ui.charts.decoration.ChartColorsButton=function(a,b,c){epiviz.ui.charts.decoration.ChartOptionButton.call(this,a,b,c)};epiviz.ui.charts.decoration.ChartColorsButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.ChartOptionButton.prototype);epiviz.ui.charts.decoration.ChartColorsButton.constructor=epiviz.ui.charts.decoration.ChartColorsButton;
epiviz.ui.charts.decoration.ChartColorsButton.prototype._click=function(){var a=this;return function(){var b=a.visualization().colorLabels();(new epiviz.ui.controls.ColorPickerDialog({ok:function(b){a.visualization().setColors(b)},cancel:function(){},reset:function(){}},b,a.config().colorPalettes,a.visualization().colors())).show()}};epiviz.ui.charts.decoration.ChartColorsButton.prototype._renderOptions=function(){return{icons:{primary:"ui-icon ui-icon-colorpicker"},text:!1}};
epiviz.ui.charts.decoration.ChartColorsButton.prototype._text=function(){return"Colors"};epiviz.ui.charts.decoration.CustomSettingsButton=function(a,b){epiviz.ui.charts.decoration.ChartOptionButton.call(this,a,b)};epiviz.ui.charts.decoration.CustomSettingsButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.ChartOptionButton.prototype);epiviz.ui.charts.decoration.CustomSettingsButton.constructor=epiviz.ui.charts.decoration.CustomSettingsButton;
epiviz.ui.charts.decoration.CustomSettingsButton.prototype._click=function(){var a=this;return function(){(new epiviz.ui.controls.CustomSettingsDialog("Edit custom settings",{ok:function(b){a.visualization().setCustomSettingsValues(b)},cancel:function(){}},a.visualization().properties().customSettingsDefs,a.visualization().customSettingsValues())).show()}};epiviz.ui.charts.decoration.CustomSettingsButton.prototype._renderOptions=function(){return{icons:{primary:"ui-icon ui-icon-gear"},text:!1}};
epiviz.ui.charts.decoration.CustomSettingsButton.prototype._text=function(){return"Custom settings"};epiviz.ui.charts.decoration.ToggleTooltipButton=function(a,b){epiviz.ui.charts.decoration.VisualizationDecoration.call(this,a,b);this.isChartOptionButton=!0;this._checked=!1};epiviz.ui.charts.decoration.ToggleTooltipButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.VisualizationDecoration.prototype);epiviz.ui.charts.decoration.ToggleTooltipButton.constructor=epiviz.ui.charts.decoration.ToggleTooltipButton;
epiviz.ui.charts.decoration.ToggleTooltipButton.prototype.decorate=function(){epiviz.ui.charts.decoration.VisualizationDecoration.prototype.decorate.call(this);for(var a=0,b=this.otherDecoration();b;b=b.otherDecoration())b.isChartOptionButton&&++a;var c=this,b=sprintf("%s-tooltip-button",this.visualization().id());this.visualization().container().append(sprintf('<div id="%1$s-container" style="position: absolute; top: 5px; right: %2$spx"><input type="checkbox" id="%1$s" %3$s /><label for="%1$s" >Toggle tooltip</label></div>',
b,5+30*a,this._checked?'checked="checked"':""));var e=$("#"+b),d=$("#"+b+"-container");e.button({text:!1,icons:{primary:"ui-icon-comment"}}).click(function(){c._checked=e.is(":checked")});this.visualization().container().mousemove(function(){d.show()}).mouseleave(function(){d.hide()})};epiviz.ui.charts.decoration.ToggleTooltipButton.prototype.checked=function(){return this._checked};
epiviz.ui.charts.decoration.CodeButton=function(a,b,c){epiviz.ui.charts.decoration.ChartOptionButton.call(this,a,b,c);this.isCodeButton=!0;this._controlCreators=[];a=!0;var e;for(b=this.otherDecoration();b;b=b.otherDecoration())b.isCodeButton&&(a=!1,e=b);e&&e._addControlCreator(this._controlCreator(),this._saveHandler(),this._cancelHandler());(this.isChartOptionButton=a)&&this._addControlCreator(this._controlCreator(),this._saveHandler(),this._cancelHandler())};
epiviz.ui.charts.decoration.CodeButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.ChartOptionButton.prototype);epiviz.ui.charts.decoration.CodeButton.constructor=epiviz.ui.charts.decoration.CodeButton;
epiviz.ui.charts.decoration.CodeButton.prototype._click=function(){var a=this;return function(){(new epiviz.ui.controls.CodeDialog("Chart Code",{save:function(b){b.forEach(function(b,e){a._controlCreators[e].save(b)})},cancel:function(){a._controlCreators.forEach(function(a){a.cancel()})}},a._controlCreators.map(function(a){return a.creator}))).show()}};epiviz.ui.charts.decoration.CodeButton.prototype._renderOptions=function(){return{icons:{primary:"ui-icon ui-icon-pencil"},text:!1}};
epiviz.ui.charts.decoration.CodeButton.prototype._text=function(){return"Code"};epiviz.ui.charts.decoration.CodeButton.prototype._addControlCreator=function(a,b,c){this._controlCreators.push({creator:a,save:b,cancel:c})};epiviz.ui.charts.decoration.CodeButton.prototype._controlCreator=function(){return null};epiviz.ui.charts.decoration.CodeButton.prototype._saveHandler=function(){return null};epiviz.ui.charts.decoration.CodeButton.prototype._cancelHandler=function(){return null};
epiviz.ui.charts.decoration.EditCodeButton=function(a,b,c){epiviz.ui.charts.decoration.CodeButton.call(this,a,b,c)};epiviz.ui.charts.decoration.EditCodeButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.CodeButton.prototype);epiviz.ui.charts.decoration.EditCodeButton.constructor=epiviz.ui.charts.decoration.EditCodeButton;
epiviz.ui.charts.decoration.EditCodeButton.prototype._controlCreator=function(){var a=this;return function(b){return new epiviz.ui.controls.EditCodeControl(b,"Edit Code",null,a.visualization(),a.visualization().lastModifiedMethod(),a.visualization().hasModifiedMethods())}};epiviz.ui.charts.decoration.EditCodeButton.prototype._saveHandler=function(){var a=this;return function(b){b.hasModifiedMethods?a.visualization().setModifiedMethods(b.modifiedMethods):a.visualization().resetModifiedMethods()}};
epiviz.ui.charts.decoration.EditCodeButton.prototype._cancelHandler=function(){return function(){}};epiviz.ui.charts.decoration.MarkerCodeButton=function(a,b,c){epiviz.ui.charts.decoration.CodeButton.call(this,a,b,c)};epiviz.ui.charts.decoration.MarkerCodeButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.CodeButton.prototype);epiviz.ui.charts.decoration.MarkerCodeButton.constructor=epiviz.ui.charts.decoration.MarkerCodeButton;
epiviz.ui.charts.decoration.MarkerCodeButton.prototype._controlCreator=function(){var a=this;return function(b){var c=a.visualization().getMarker(a.markerId()),e,d;c&&(e=c.preMarkStr(),d=c.markStr());e=e||a.preMarkTemplate();d=d||a.markTemplate();return new epiviz.ui.controls.MarkerCodeControl(b,a.markerLabel(),null,a.visualization(),e,d,void 0!=c)}};
epiviz.ui.charts.decoration.MarkerCodeButton.prototype._saveHandler=function(){var a=this;return function(b){b.enabled?a.visualization().putMarker(a.createMarker(b.preMark,b.mark)):a.visualization().removeMarker(a.markerId())}};epiviz.ui.charts.decoration.MarkerCodeButton.prototype._cancelHandler=function(){return function(){}};
epiviz.ui.charts.decoration.MarkerCodeButton.prototype.createMarker=function(a,b){return new epiviz.ui.charts.markers.VisualizationMarker(this.markerType(),this.markerId(),this.markerLabel(),a,b)};epiviz.ui.charts.decoration.MarkerCodeButton.prototype.markerType=function(){throw Error("unimplemented abstract method");};epiviz.ui.charts.decoration.MarkerCodeButton.prototype.markerLabel=function(){throw Error("unimplemented abstract method");};
epiviz.ui.charts.decoration.MarkerCodeButton.prototype.markerId=function(){throw Error("unimplemented abstract method");};epiviz.ui.charts.decoration.MarkerCodeButton.prototype.preMarkTemplate=function(){throw Error("unimplemented abstract method");};epiviz.ui.charts.decoration.MarkerCodeButton.prototype.markTemplate=function(){throw Error("unimplemented abstract method");};
epiviz.ui.charts.decoration.ChartFilterCodeButton=function(a,b,c){epiviz.ui.charts.decoration.MarkerCodeButton.call(this,a,b,c)};epiviz.ui.charts.decoration.ChartFilterCodeButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.MarkerCodeButton.prototype);epiviz.ui.charts.decoration.ChartFilterCodeButton.constructor=epiviz.ui.charts.decoration.ChartFilterCodeButton;epiviz.ui.charts.decoration.ChartFilterCodeButton.prototype.markerType=function(){return epiviz.ui.charts.markers.VisualizationMarker.Type.FILTER};
epiviz.ui.charts.decoration.ChartFilterCodeButton.prototype.markerLabel=function(){return"User Filter"};epiviz.ui.charts.decoration.ChartFilterCodeButton.prototype.markerId=function(){return"user-filter"};epiviz.ui.charts.decoration.ChartFilterCodeButton.prototype.preMarkTemplate=function(){return"/**\n * This method is called once before every draw, for all data available to the visualization,\n * for initialization. Its result can be used inside the filter method.\n * @param {epiviz.datatypes.GenomicData} [data]\n * @returns {InitialVars}\n * @template InitialVars\n */\nfunction(data) {\n  // TODO: Your code here\n  return null;\n}\n"};
epiviz.ui.charts.decoration.ChartFilterCodeButton.prototype.markTemplate=function(){return"/**\n * This method is called for every data object. If it returns false, the object will not be drawn.\n * @param {epiviz.datatypes.GenomicData.ValueItem} [item]\n * @param {epiviz.datatypes.GenomicData} [data]\n * @param {InitialVars} [preMarkResult]\n * @returns {boolean}\n * @template InitialVars\n */\nfunction(item, data, preMarkResult) {\n  // TODO: Your code here\n  return true;\n}\n"};
epiviz.ui.charts.decoration.HierarchyFilterCodeButton=function(a,b,c){epiviz.ui.charts.decoration.MarkerCodeButton.call(this,a,b,c)};epiviz.ui.charts.decoration.HierarchyFilterCodeButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.MarkerCodeButton.prototype);epiviz.ui.charts.decoration.HierarchyFilterCodeButton.constructor=epiviz.ui.charts.decoration.HierarchyFilterCodeButton;epiviz.ui.charts.decoration.HierarchyFilterCodeButton.prototype.markerType=function(){return epiviz.ui.charts.markers.VisualizationMarker.Type.FILTER};
epiviz.ui.charts.decoration.HierarchyFilterCodeButton.prototype.markerLabel=function(){return"User Filter"};epiviz.ui.charts.decoration.HierarchyFilterCodeButton.prototype.markerId=function(){return"user-filter"};epiviz.ui.charts.decoration.HierarchyFilterCodeButton.prototype.preMarkTemplate=function(){return"/**\n * This method is called once before every draw, for all data available to the visualization,\n * for initialization. Its result can be used inside the filter method.\n * @param {epiviz.ui.charts.tree.Node} [root]\n * @returns {InitialVars}\n * @template InitialVars\n */\nfunction(root) {\n  // TODO: Your code here\n  return null;\n}\n"};
epiviz.ui.charts.decoration.HierarchyFilterCodeButton.prototype.markTemplate=function(){return"/**\n * This method is called for every data object. If it returns false, the object will not be drawn.\n * @param {epiviz.ui.charts.tree.Node} [node]\n * @param {epiviz.ui.charts.tree.Node} [root]\n * @param {InitialVars} [preMarkResult]\n * @returns {boolean}\n * @template InitialVars\n */\nfunction(node, root, preMarkResult) {\n  // TODO: Your code here\n  return true;\n}\n"};
epiviz.ui.charts.decoration.ChartColorByRowCodeButton=function(a,b,c){epiviz.ui.charts.decoration.MarkerCodeButton.call(this,a,b,c)};epiviz.ui.charts.decoration.ChartColorByRowCodeButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.MarkerCodeButton.prototype);epiviz.ui.charts.decoration.ChartColorByRowCodeButton.constructor=epiviz.ui.charts.decoration.ChartColorByRowCodeButton;epiviz.ui.charts.decoration.ChartColorByRowCodeButton.prototype.markerType=function(){return epiviz.ui.charts.markers.VisualizationMarker.Type.COLOR_BY_ROW};
epiviz.ui.charts.decoration.ChartColorByRowCodeButton.prototype.markerLabel=function(){return"Color By"};epiviz.ui.charts.decoration.ChartColorByRowCodeButton.prototype.markerId=function(){return"color-by"};epiviz.ui.charts.decoration.ChartColorByRowCodeButton.prototype.preMarkTemplate=function(){return"/**\n * This method is called once before every draw, for all data available to the visualization,\n * for initialization. Its result can be used inside the filter method.\n * @param {epiviz.datatypes.GenomicData} [data]\n * @returns {InitialVars}\n * @template InitialVars\n */\nfunction(data) {\n  // TODO: Your code here\n  return null;\n}\n"};
epiviz.ui.charts.decoration.ChartColorByRowCodeButton.prototype.markTemplate=function(){return"/**\n * This method is called for every data object. If it returns false, the object will not be drawn.\n * @param {epiviz.datatypes.GenomicData.RowItem} [row]\n * @param {epiviz.datatypes.GenomicData} [data]\n * @param {InitialVars} [preMarkResult]\n * @returns {string}\n * @template InitialVars\n */\nfunction(row, data, preMarkResult) {\n  // TODO: Your code here\n  return row.metadata('colLabel');\n}\n"};
epiviz.ui.charts.decoration.ChartOrderByMeasurementsCodeButton=function(a,b,c){epiviz.ui.charts.decoration.MarkerCodeButton.call(this,a,b,c)};epiviz.ui.charts.decoration.ChartOrderByMeasurementsCodeButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.MarkerCodeButton.prototype);epiviz.ui.charts.decoration.ChartOrderByMeasurementsCodeButton.constructor=epiviz.ui.charts.decoration.ChartOrderByMeasurementsCodeButton;
epiviz.ui.charts.decoration.ChartOrderByMeasurementsCodeButton.prototype.markerType=function(){return epiviz.ui.charts.markers.VisualizationMarker.Type.ORDER_BY_MEASUREMENTS};epiviz.ui.charts.decoration.ChartOrderByMeasurementsCodeButton.prototype.markerLabel=function(){return"Order By"};epiviz.ui.charts.decoration.ChartOrderByMeasurementsCodeButton.prototype.markerId=function(){return"order-by-measurements"};
epiviz.ui.charts.decoration.ChartOrderByMeasurementsCodeButton.prototype.preMarkTemplate=function(){return"/**\n * This method is called once before every draw, for all data available to the visualization,\n * for initialization. Its result can be used inside the filter method.\n * @param {epiviz.datatypes.GenomicData} [data]\n * @returns {InitialVars}\n * @template InitialVars\n */\nfunction(data) {\n  // TODO: Your code here\n  return null;\n}\n"};
epiviz.ui.charts.decoration.ChartOrderByMeasurementsCodeButton.prototype.markTemplate=function(){return"/**\n * @param {epiviz.measurements.Measurement} m\n * @param {epiviz.datatypes.GenomicData} [data]\n * @param {InitialVars} [preMarkResult]\n * @returns {string|number}\n * @template InitialVars\n */\nfunction(m, data, preMarkResult) {\n  // TODO: Your code here\n  return 0;\n}\n"};
epiviz.ui.charts.decoration.ChartColorByMeasurementsCodeButton=function(a,b,c){epiviz.ui.charts.decoration.MarkerCodeButton.call(this,a,b,c)};epiviz.ui.charts.decoration.ChartColorByMeasurementsCodeButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.MarkerCodeButton.prototype);epiviz.ui.charts.decoration.ChartColorByMeasurementsCodeButton.constructor=epiviz.ui.charts.decoration.ChartColorByMeasurementsCodeButton;
epiviz.ui.charts.decoration.ChartColorByMeasurementsCodeButton.prototype.markerType=function(){return epiviz.ui.charts.markers.VisualizationMarker.Type.COLOR_BY_MEASUREMENTS};epiviz.ui.charts.decoration.ChartColorByMeasurementsCodeButton.prototype.markerLabel=function(){return"Color by Measurements"};epiviz.ui.charts.decoration.ChartColorByMeasurementsCodeButton.prototype.markerId=function(){return"color-by-measurements"};
epiviz.ui.charts.decoration.ChartColorByMeasurementsCodeButton.prototype.preMarkTemplate=function(){return"/**\n * This method is called once before every draw, for all data available to the visualization,\n * for initialization. Its result can be used inside the filter method.\n * @param {epiviz.datatypes.GenomicData} [data]\n * @returns {InitialVars}\n * @template InitialVars\n */\nfunction(data) {\n  // TODO: Your code here\n  return null;\n}\n"};
epiviz.ui.charts.decoration.ChartColorByMeasurementsCodeButton.prototype.markTemplate=function(){return"/**\n * @param {epiviz.measurements.Measurement} m\n * @param {epiviz.datatypes.GenomicData} [data]\n * @param {InitialVars} [preMarkResult]\n * @returns {string|number}\n * @template InitialVars\n */\nfunction(m, data, preMarkResult) {\n  // TODO: Your code here\n  return 0;\n}\n"};
epiviz.ui.charts.decoration.ChartGroupByMeasurementsCodeButton=function(a,b,c){epiviz.ui.charts.decoration.MarkerCodeButton.call(this,a,b,c)};epiviz.ui.charts.decoration.ChartGroupByMeasurementsCodeButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.MarkerCodeButton.prototype);epiviz.ui.charts.decoration.ChartGroupByMeasurementsCodeButton.constructor=epiviz.ui.charts.decoration.ChartGroupByMeasurementsCodeButton;
epiviz.ui.charts.decoration.ChartGroupByMeasurementsCodeButton.prototype.markerType=function(){return epiviz.ui.charts.markers.VisualizationMarker.Type.GROUP_BY_MEASUREMENTS};epiviz.ui.charts.decoration.ChartGroupByMeasurementsCodeButton.prototype.markerLabel=function(){return"Group by"};epiviz.ui.charts.decoration.ChartGroupByMeasurementsCodeButton.prototype.markerId=function(){return"group-by-measurements"};
epiviz.ui.charts.decoration.ChartGroupByMeasurementsCodeButton.prototype.preMarkTemplate=function(){return"/**\n * This method is called once before every draw, for all data available to the visualization,\n * for initialization. Its result can be used inside the filter method.\n * @param {epiviz.datatypes.GenomicData} [data]\n * @returns {InitialVars}\n * @template InitialVars\n */\nfunction(data) {\n  // TODO: Your code here\n  return null;\n}\n"};
epiviz.ui.charts.decoration.ChartGroupByMeasurementsCodeButton.prototype.markTemplate=function(){return"/**\n * @param {epiviz.measurements.Measurement} m\n * @param {epiviz.datatypes.GenomicData} [data]\n * @param {InitialVars} [preMarkResult]\n * @returns {string}\n * @template InitialVars\n */\nfunction(m, data, preMarkResult) {\n  // TODO: Your code here\n  return 0;\n}\n"};epiviz.ui.charts.decoration.ChartResize=function(a,b){epiviz.ui.charts.decoration.VisualizationDecoration.call(this,a,b)};
epiviz.ui.charts.decoration.ChartResize.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.VisualizationDecoration.prototype);epiviz.ui.charts.decoration.ChartResize.constructor=epiviz.ui.charts.decoration.ChartResize;epiviz.ui.charts.decoration.ChartResize.prototype.decorate=function(){epiviz.ui.charts.decoration.VisualizationDecoration.prototype.decorate.call(this);var a=this;this.visualization().container().resizable({stop:function(b,c){a.visualization().updateSize()}})};
epiviz.ui.charts.decoration.ChartTooltip=function(a,b){epiviz.ui.charts.decoration.VisualizationDecoration.call(this,a,b)};epiviz.ui.charts.decoration.ChartTooltip.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.VisualizationDecoration.prototype);epiviz.ui.charts.decoration.ChartTooltip.constructor=epiviz.ui.charts.decoration.ChartTooltip;
epiviz.ui.charts.decoration.ChartTooltip.prototype.decorate=function(){epiviz.ui.charts.decoration.VisualizationDecoration.prototype.decorate.call(this);for(var a=void 0,b=this.otherDecoration();b;b=b.otherDecoration())if(b.constructor==epiviz.ui.charts.decoration.ToggleTooltipButton){a=b;break}var c=this;this.visualization().container().tooltip({items:".item",content:function(){if(!a.checked())return!1;var b=d3.select(this).data()[0];return b.valueItems[0].length>b.measurements.length+b.measurements[0].metadata().length?
c._horizontalContent(b):c._verticalContent(b)},track:!0,show:!1})};
epiviz.ui.charts.decoration.ChartTooltip.prototype._horizontalContent=function(a){for(var b=a.measurements[0].metadata(),c=sprintf("%s%s%s",void 0!=a.start&&void 0!=a.end?"<th><b>Start</b></th><th><b>End</b></th>":"",b?"<th><b>"+b.join("</b></th><th><b>")+"</b></th>":"",a.values?"<th><b>"+a.measurements.join("</b></th><th><b>")+"</b></th>":""),e="",d=0;d<a.valueItems[0].length&&10>d;++d){var f="",n=a.valueItems[0][d].rowItem,h=Globalize.format(n.start(),"n0"),g=Globalize.format(n.end(),"n0");void 0!=
h&&void 0!=g&&(f+=sprintf("<td>%s</td><td>%s</td>",h,g));n=n.rowMetadata();if(b&&n)for(h=0;h<b.length;++h)g=n[b[h]]||"",f+=sprintf("<td>%s</td>",15>=g.length?g:g.substr(0,15)+"...");if(a.values)for(n=0;n<a.measurements.length;++n)f+=sprintf("<td>%s</td>",Globalize.format(a.valueItems[n][d].value,"n3"));e+=sprintf("<tr>%s</tr>",f)}d<a.valueItems[0].length&&(e+=sprintf('<tr><td colspan="%s" style="text-align: center;">...</td></tr>',2+(b?b.length:0)+(a.values?a.measurements.length:0)));return sprintf('<table class="tooltip-table"><thead><tr>%s</tr></thead><tbody>%s</tbody></table>',
c,e)};
epiviz.ui.charts.decoration.ChartTooltip.prototype._verticalContent=function(a){var b=[],c=[0,0];if(void 0!=a.start&&void 0!=a.end){var e=["Start"],d=["End"];a.valueItems[0].every(function(a,b){e.push(Globalize.format(a.rowItem.start(),"n0"));d.push(Globalize.format(a.rowItem.end(),"n0"));return 5>b});b.push(e);b.push(d);c=[0,2]}var f=a.measurements[0].metadata(),n=[c[1],c[1]+f.length];f.forEach(function(c){var d=[c];a.valueItems[0].every(function(a,b){var e=a.rowItem.metadata(c)||"[NA]";15<e.length&&
(e=e.substr(0,15)+"...");d.push(e);return 5>b});b.push(d)});f=[n[1],n[1]];a.values&&(f=[n[1],n[1]+a.measurements.length],a.measurements.forEach(function(c,d){var e=[c.name()];a.valueItems[d].every(function(a,b){e.push(Globalize.format(a.value,"n3"));return 5>b});b.push(e)}));var h=f[1];10<h&&(c[1]=1,n[1]=Math.min(n[1],n[0]+4),h=c[1]-c[0]+n[1]-n[0]+f[1]-f[0],10<h&&(f[1]-=h-10));var h="",g;for(g=c[0];g<c[1];++g)h+="<tr><td><b>"+b[g][0]+"</b></td><td>"+b[g].slice(1).join("</td><td>")+"</td></tr>";for(g=
n[0];g<n[1];++g)h+="<tr><td><b>"+b[g][0]+"</b></td><td>"+b[g].slice(1).join("</td><td>")+"</td></tr>";for(g=f[0];g<f[1];++g)h+="<tr><td><b>"+b[g][0]+"</b></td><td>"+b[g].slice(1).join("</td><td>")+"</td></tr>";return'<table class="tooltip-table"><tbody>'+h+"</tbody></table>"};epiviz.ui.charts.decoration.ChartLoaderAnimation=function(a,b){epiviz.ui.charts.decoration.VisualizationDecoration.call(this,a,b);this._loaderTimeout=0;this._animationShowing=!1};
epiviz.ui.charts.decoration.ChartLoaderAnimation.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.VisualizationDecoration.prototype);epiviz.ui.charts.decoration.ChartLoaderAnimation.constructor=epiviz.ui.charts.decoration.ChartLoaderAnimation;
epiviz.ui.charts.decoration.ChartLoaderAnimation.prototype.decorate=function(){epiviz.ui.charts.decoration.VisualizationDecoration.prototype.decorate.call(this);var a=this;this.visualization().onDataWaitStart().addListener(new epiviz.events.EventListener(function(){a._addLoaderAnimation()}));this.visualization().onDataWaitEnd().addListener(new epiviz.events.EventListener(function(){a._removeLoaderAnimation()}));this.visualization().onSizeChanged().addListener(new epiviz.events.EventListener(function(){a._animationShowing&&
a._addLoaderAnimation()}))};
epiviz.ui.charts.decoration.ChartLoaderAnimation.prototype._addLoaderAnimation=function(){this._loaderTimeout&&clearTimeout(this._loaderTimeout);var a=function(){b._animationShowing=!0;var a=b.visualization(),e=a.container();e.find(".chart-loader").remove();e.append(sprintf('<div class="loader-icon %s" style="top: %spx; left: %spx;"></div>',"chart-loader",Math.floor(.5*a.height()),Math.floor(.5*a.width())));e.find(".chart-loader").activity({segments:8,steps:5,opacity:.3,width:4,space:0,length:10,
color:"#0b0b0b",speed:1})},b=this;this._animationShowing?a():this._loaderTimeout=setTimeout(a,500)};epiviz.ui.charts.decoration.ChartLoaderAnimation.prototype._removeLoaderAnimation=function(){this._loaderTimeout&&clearTimeout(this._loaderTimeout);this._animationShowing=!1;this.visualization().container().find(".chart-loader").remove()};
epiviz.ui.charts.ChartManager=function(a){this._config=a;this._charts={};this._chartsOrder={};this._resizeInterval=null;this._chartAdded=new epiviz.events.Event;this._chartRemoved=new epiviz.events.Event;this._chartsOrderChanged=new epiviz.events.Event;this._chartsCleared=new epiviz.events.Event;this._chartColorsChanged=new epiviz.events.Event;this._chartMethodsModified=new epiviz.events.Event;this._chartMethodsReset=new epiviz.events.Event;this._chartMarkersModified=new epiviz.events.Event;this._chartCustomSettingsChanged=
new epiviz.events.Event;this._chartSizeChanged=new epiviz.events.Event;this._chartMarginsChanged=new epiviz.events.Event;this._chartRequestHierarchy=new epiviz.events.Event;this._chartPropagateHierarchyChanges=new epiviz.events.Event;this._registerWindowResize()};
epiviz.ui.charts.ChartManager.prototype.addChart=function(a,b,c,e){c=c||sprintf("%s-%s-%s",a.chartDisplayType(),a.chartHtmlAttributeName(),epiviz.utils.generatePseudoGUID(5));var d=a.cssClass(),f=$("#"+a.chartContainer()),n=f.find(".accordion"),h=n.find(".vis-container");0==n.length&&(n=$('<div class="accordion"></div>').appendTo(f),f=a.chartDisplayType(),n.append(sprintf('<h3><a href="#"><b><span style="color: #025167">Views by %s</span></b></a></h3>',epiviz.ui.ControlManager.DISPLAY_TYPE_LABELS[f])),
h=$('<div class="vis-container"></div>').appendTo(n),n.multiAccordion(),n.multiAccordion("option","active","all"));h.append(sprintf('<div id="%s" class="%s"></div>',c,d));d=h.find("#"+c);e=e||new epiviz.ui.charts.VisualizationProperties(a.defaultWidth(),a.defaultHeight(),a.defaultMargins(),b,a.defaultColors(),null,a.customSettingsValues(),a.customSettingsDefs(),[],null);b=a.createNew(c,d,e);this._charts[c]=b;this._registerChartHover(b);this._registerChartUnhover(b);this._registerChartSelect(b);this._registerChartDeselect(b);
this._registerChartColorsChanged(b);this._registerChartMethodsModified(b);this._registerChartMethodsReset(b);this._registerChartMarkersModified(b);this._registerChartCustomSettingsChanged(b);this._registerChartSizeChanged(b);this._registerChartMarginsChanged(b);this._registerChartRemove(b);this._registerChartSave(b);this._registerChartRequestHierarchy(b);this._registerChartPropagateHierarchyChanges(b);if(a.decorations()){d=void 0;for(n=0;n<a.decorations().length;++n)(f=epiviz.utils.evaluateFullyQualifiedTypeName(a.decorations()[n]))&&
(d=epiviz.utils.applyConstructor(f,[b,d,this._config]));d&&d.decorate()}a.chartDisplayType()in this._chartsOrder||(this._chartsOrder[a.chartDisplayType()]=[]);this._chartsOrder[a.chartDisplayType()].push(c);this._chartAdded.notify(new epiviz.ui.charts.VisEventArgs(c,{type:a,properties:e,chartsOrder:this._chartsOrder}));return c};
epiviz.ui.charts.ChartManager.prototype.removeChart=function(a){$("#"+a).remove();var b=this._charts[a];delete this._charts[a];this._chartsOrder[b.displayType()].splice(this._chartsOrder[b.displayType()].indexOf(a),1);b=$("#"+epiviz.ui.ControlManager.CHART_TYPE_CONTAINERS[b.displayType()]);0==b.find(".accordion").find(".vis-container").children().length&&b.empty();this._chartRemoved.notify(new epiviz.ui.charts.VisEventArgs(a,this._chartsOrder))};
epiviz.ui.charts.ChartManager.prototype.chartsMeasurements=function(){var a={},b;for(b in this._charts)this._charts.hasOwnProperty(b)&&this._charts[b].displayType()!=epiviz.ui.charts.VisualizationType.DisplayType.DATA_STRUCTURE&&(a[b]=this._charts[b].measurements());return a};epiviz.ui.charts.ChartManager.prototype.updateCharts=function(a,b,c){c=c||Object.keys(this._charts);for(var e=0;e<c.length;++e)if(this._charts.hasOwnProperty(c[e])){var d=this._charts[c[e]];d&&function(c){c.transformData(a,b).done(function(){c.draw()})}(d)}};
epiviz.ui.charts.ChartManager.prototype.updateDataStructureCharts=function(){for(var a=Object.keys(this._charts),b=0;b<a.length;++b)if(this._charts.hasOwnProperty(a[b])){var c=this._charts[a[b]];c&&c.displayType()==epiviz.ui.charts.VisualizationType.DisplayType.DATA_STRUCTURE&&function(a){setTimeout(function(){a.fireRequestHierarchy()},0)}(c)}};
epiviz.ui.charts.ChartManager.prototype.clear=function(){this._charts={};this._chartsOrder={};var a=epiviz.ui.ControlManager.CHART_TYPE_CONTAINERS,b;for(b in a)a.hasOwnProperty(b)&&$("#"+a[b]).empty();this._chartsCleared.notify()};epiviz.ui.charts.ChartManager.prototype.dataWaitStart=function(a,b){if(a&&this._charts[a])this._charts[a].onDataWaitStart().notify(new epiviz.ui.charts.VisEventArgs(a));else for(var c in this._charts)this._charts.hasOwnProperty(c)&&b&&b[this._charts[c]]&&this._charts[c].onDataWaitStart().notify(new epiviz.ui.charts.VisEventArgs(c))};
epiviz.ui.charts.ChartManager.prototype.onChartAdded=function(){return this._chartAdded};epiviz.ui.charts.ChartManager.prototype.onChartRemoved=function(){return this._chartRemoved};epiviz.ui.charts.ChartManager.prototype.onChartsOrderChanged=function(){return this._chartsOrderChanged};epiviz.ui.charts.ChartManager.prototype.onChartsCleared=function(){return this._chartsCleared};epiviz.ui.charts.ChartManager.prototype.onChartColorsChanged=function(){return this._chartColorsChanged};
epiviz.ui.charts.ChartManager.prototype.onChartMethodsModified=function(){return this._chartMethodsModified};epiviz.ui.charts.ChartManager.prototype.onChartMethodsReset=function(){return this._chartMethodsReset};epiviz.ui.charts.ChartManager.prototype.onChartMarkersModified=function(){return this._chartMarkersModified};epiviz.ui.charts.ChartManager.prototype.onChartCustomSettingsChanged=function(){return this._chartCustomSettingsChanged};
epiviz.ui.charts.ChartManager.prototype.onChartSizeChanged=function(){return this._chartSizeChanged};epiviz.ui.charts.ChartManager.prototype.onChartMarginsChanged=function(){return this._chartMarginsChanged};epiviz.ui.charts.ChartManager.prototype.onChartRequestHierarchy=function(){return this._chartRequestHierarchy};epiviz.ui.charts.ChartManager.prototype.onChartPropagateHierarchyChanges=function(){return this._chartPropagateHierarchyChanges};
epiviz.ui.charts.ChartManager.prototype._registerWindowResize=function(){var a=this;$(window).resize(function(){null!==a._resizeInterval&&window.clearTimeout(a._resizeInterval);a._resizeInterval=window.setTimeout(function(){for(var b in a._charts)a._charts.hasOwnProperty(b)&&a._charts[b].updateSize();a._resizeInterval=null},500)})};
epiviz.ui.charts.ChartManager.prototype._registerChartHover=function(a){var b=this;a.onHover().addListener(new epiviz.events.EventListener(function(a){for(var e in b._charts)b._charts.hasOwnProperty(e)&&b._charts[e].doHover(a.args)}))};epiviz.ui.charts.ChartManager.prototype._registerChartUnhover=function(a){var b=this;a.onUnhover().addListener(new epiviz.events.EventListener(function(){for(var a in b._charts)b._charts.hasOwnProperty(a)&&b._charts[a].doUnhover()}))};
epiviz.ui.charts.ChartManager.prototype._registerChartSelect=function(a){var b=this;a.onSelect().addListener(new epiviz.events.EventListener(function(a){a=a.args;for(var e in b._charts)b._charts.hasOwnProperty(e)&&b._charts[e].doSelect(a)}))};epiviz.ui.charts.ChartManager.prototype._registerChartDeselect=function(a){var b=this;a.onDeselect().addListener(new epiviz.events.EventListener(function(){for(var a in b._charts)b._charts.hasOwnProperty(a)&&b._charts[a].doDeselect()}))};
epiviz.ui.charts.ChartManager.prototype._registerChartRemove=function(a){var b=this;a.onRemove().addListener(new epiviz.events.EventListener(function(a){b.removeChart(a.id)}))};
epiviz.ui.charts.ChartManager.prototype._registerChartSave=function(a){var b=this;"default"!=b._config.configType?a.onSave().addListener(new epiviz.events.EventListener(function(a){(new epiviz.ui.PrintManager(a.id,"epiviz_"+Math.floor($.now()/1E3),"pdf")).print()})):a.onSave().addListener(new epiviz.events.EventListener(function(a){(new epiviz.ui.controls.SaveSvgAsImageDialog({ok:function(){},cancel:function(){}},a.id,b._config.dataServerLocation+b._config.chartSaverLocation)).show()}))};
epiviz.ui.charts.ChartManager.prototype._registerChartColorsChanged=function(a){var b=this;a.onColorsChanged().addListener(new epiviz.events.EventListener(function(a){b._chartColorsChanged.notify(a)}))};epiviz.ui.charts.ChartManager.prototype._registerChartMethodsModified=function(a){var b=this;a.onMethodsModified().addListener(new epiviz.events.EventListener(function(a){b._chartMethodsModified.notify(a)}))};
epiviz.ui.charts.ChartManager.prototype._registerChartMethodsReset=function(a){var b=this;a.onMethodsReset().addListener(new epiviz.events.EventListener(function(a){b._chartMethodsReset.notify(a)}))};epiviz.ui.charts.ChartManager.prototype._registerChartMarkersModified=function(a){var b=this;a.onMarkersModified().addListener(new epiviz.events.EventListener(function(a){b._chartMarkersModified.notify(a)}))};
epiviz.ui.charts.ChartManager.prototype._registerChartCustomSettingsChanged=function(a){var b=this;a.onCustomSettingsChanged().addListener(new epiviz.events.EventListener(function(a){b._chartCustomSettingsChanged.notify(a)}))};epiviz.ui.charts.ChartManager.prototype._registerChartSizeChanged=function(a){var b=this;a.onSizeChanged().addListener(new epiviz.events.EventListener(function(a){b._chartSizeChanged.notify(a)}))};
epiviz.ui.charts.ChartManager.prototype._registerChartMarginsChanged=function(a){var b=this;a.onMarginsChanged().addListener(new epiviz.events.EventListener(function(a){b._chartMarginsChanged.notify(a)}))};epiviz.ui.charts.ChartManager.prototype._registerChartRequestHierarchy=function(a){var b=this;a.displayType()==epiviz.ui.charts.VisualizationType.DisplayType.DATA_STRUCTURE&&a.onRequestHierarchy().addListener(new epiviz.events.EventListener(function(a){b._chartRequestHierarchy.notify(a)}))};
epiviz.ui.charts.ChartManager.prototype._registerChartPropagateHierarchyChanges=function(a){var b=this;a.displayType()==epiviz.ui.charts.VisualizationType.DisplayType.DATA_STRUCTURE&&a.onPropagateHierarchyChanges().addListener(new epiviz.events.EventListener(function(a){b._chartPropagateHierarchyChanges.notify(a)}))};epiviz.ui.charts.ChartManager.prototype.getChartSettings=function(a){a=this._charts[a];var b={};b.settings=a.customSettingsValues();b.colorMap=a.properties().colors;return b};
epiviz.ui.charts.ChartManager.prototype.setChartSettings=function(a,b,c){a=this._charts[a];if(null!=b){var e=a.customSettingsValues();Object.keys(b).forEach(function(a){e[a]=b[a]});a.setCustomSettingsValues(e)}null!=c&&a.setColors(c);a.draw()};epiviz.workspaces={};epiviz.workspaces.UserManager=function(a){this._config=a};epiviz.workspaces.UserManager.USER_STATUS=epiviz.workspaces.UserManager.USER_STATUS||{loggedIn:!1,userData:null,oauthProvider:null};
epiviz.workspaces.UserManager.prototype.toggleLogin=function(){epiviz.workspaces.UserManager.USER_STATUS.loggedIn?this._logout():this._login()};epiviz.workspaces.UserManager.prototype._login=function(){var a=window.location.toString();0<a.length&&(a=encodeURIComponent(a));window.location=this._config.dataServerLocation+"login.php?location="+a};
epiviz.workspaces.UserManager.prototype._logout=function(){var a=window.location.toString();0<a.length&&(a=encodeURIComponent(a));window.location=this._config.dataServerLocation+"logout.php?logout&location="+a};
epiviz.workspaces.Workspace=function(a,b,c){this._id=a;this._name=b;this._range=c.range;this._chartsOrder={};this._chartsById={};for(var e in c.charts)if(c.charts.hasOwnProperty(e))for(this._chartsOrder[e]=[],a=0;a<c.charts[e].length;++a)this._chartsById[c.charts[e][a].id]=c.charts[e][a],this._chartsOrder[e].push(c.charts[e][a].id);this._computedMeasurements=c.computedMeasurements||new epiviz.measurements.MeasurementSet;this._changed=!1;this._contentChanged=new epiviz.events.Event};
epiviz.workspaces.Workspace.DEFAULT_WORKSPACE_NAME=epiviz.Config.DEFAULT_WORKSPACE_NAME;epiviz.workspaces.Workspace.prototype.id=function(){return this._id};epiviz.workspaces.Workspace.prototype.name=function(){return this._name};epiviz.workspaces.Workspace.prototype.range=function(){return this._range};epiviz.workspaces.Workspace.prototype.charts=function(){var a={},b;for(b in this._chartsOrder)if(this._chartsOrder.hasOwnProperty(b)){a[b]=[];for(var c=0;c<this._chartsOrder[b].length;++c)a[b].push(this._chartsById[this._chartsOrder[b][c]])}return a};
epiviz.workspaces.Workspace.prototype.chartsOrder=function(){return this._chartsOrder};epiviz.workspaces.Workspace.prototype.computedMeasurements=function(){return this._computedMeasurements};epiviz.workspaces.Workspace.prototype.chartAdded=function(a,b,c,e){this._chartsById[a]={id:a,type:b,properties:c.copy()};this._chartsOrder=e;this._setChanged()};epiviz.workspaces.Workspace.prototype.chartRemoved=function(a,b){this._chartsById[a]&&(delete this._chartsById[a],this._chartsOrder=b,this._setChanged())};
epiviz.workspaces.Workspace.prototype.chartSizeChanged=function(a,b,c){!this._chartsById[a]||this._chartsById[a].properties.width==b&&this._chartsById[a].properties.height==c||(this._chartsById[a].properties.width=b,this._chartsById[a].properties.height=c,this._setChanged())};epiviz.workspaces.Workspace.prototype.chartMarginsChanged=function(a,b){this._chartsById[a].properties.margins.equals(b)||(this._chartsById[a].properties.margins=b?b.copy():b,this._setChanged())};
epiviz.workspaces.Workspace.prototype.chartColorsChanged=function(a,b){this._chartsById[a].properties.colors.equals(b)||(this._chartsById[a].properties.colors=b,this._setChanged())};epiviz.workspaces.Workspace.prototype.chartMethodsModified=function(a,b){epiviz.utils.mapEquals(this._chartsById[a].properties.modifiedMethods,b)||(this._chartsById[a].properties.modifiedMethods=epiviz.utils.mapCombine(b,this._chartsById[a].properties.modifiedMethods),this._setChanged())};
epiviz.workspaces.Workspace.prototype.chartMethodsReset=function(a){this._chartsById[a].properties.modifiedMethods&&0!=Object.keys(this._chartsById[a].properties.modifiedMethods).length&&(this._chartsById[a].properties.modifiedMethods={},this._setChanged())};epiviz.workspaces.Workspace.prototype.chartMarkersModified=function(a,b){epiviz.utils.arraysEqual(this._chartsById[a].properties.chartMarkers,b)||(this._chartsById[a].properties.chartMarkers=b.filter(function(a){return null!=a}),this._setChanged())};
epiviz.workspaces.Workspace.prototype.chartCustomSettingsChanged=function(a,b){epiviz.utils.mapEquals(this._chartsById[a].properties.customSettingsValues,b)||(this._chartsById[a].properties.customSettingsValues=b?epiviz.utils.mapCopy(b):b,this._setChanged())};epiviz.workspaces.Workspace.prototype.locationChanged=function(a){this._range.equals(a)||(this._range=a,this._setChanged())};
epiviz.workspaces.Workspace.prototype.computedMeasurementsAdded=function(a){var b=this._computedMeasurements.size();this._computedMeasurements.addAll(a);b!=this._computedMeasurements.size()&&this._setChanged()};epiviz.workspaces.Workspace.prototype.computedMeasurementsRemoved=function(a){var b=this._computedMeasurements.size();this._computedMeasurements.removeAll(a);b!=this._computedMeasurements.size()&&this._setChanged()};
epiviz.workspaces.Workspace.prototype.chartsOrderChanged=function(a){this._chartsOrder=a;this._setChanged()};epiviz.workspaces.Workspace.prototype.changed=function(){return this._changed};epiviz.workspaces.Workspace.prototype.resetChanged=function(){this._changed=!1};epiviz.workspaces.Workspace.prototype._setChanged=function(){this._changed=!0;this._contentChanged.notify(this)};
epiviz.workspaces.Workspace.prototype.copy=function(a,b){var c=this.charts();return new epiviz.workspaces.Workspace(b||null,a,{range:this._range,computedMeasurements:new epiviz.measurements.MeasurementSet(this._computedMeasurements),charts:c})};
epiviz.workspaces.Workspace.prototype.raw=function(a){var b=new epiviz.measurements.MeasurementHashtable,c={};this._computedMeasurements.foreach(function(a){var c;a.componentMeasurements().foreach(function(a){var c=b.get(a);null===c&&(c=b.size(),b.put(a,c))});var d=a.formula().referredMeasurements,e;for(e in d)d.hasOwnProperty(e)&&(c=b.get(d[e]),null===c&&(c=b.size(),b.put(d[e],c)));c=b.get(a);null===c&&(c=b.size(),b.put(a,c))});for(var e in this._chartsOrder)if(this._chartsOrder.hasOwnProperty(e)){c[e]=
[];for(var d=0;d<this._chartsOrder[e].length;++d){var f=this._chartsById[this._chartsOrder[e][d]],n=f.properties,h=[];(function(a){n.visConfigSelection.measurements.foreach(function(c){var d=b.get(c);null===d&&(d=b.size(),b.put(c,d));a.push(d)})})(h);c[e].push({id:f.id,type:f.type.typeName(),properties:{width:n.width,height:n.height,margins:n.margins.raw(),visConfigSelection:{measurements:h,datasource:n.visConfigSelection.datasource,datasourceGroup:n.visConfigSelection.datasourceGroup,dataprovider:n.visConfigSelection.dataprovider,
annotation:n.visConfigSelection.annotation,defaultChartType:n.visConfigSelection.defaultChartType,minSelectedMeasurements:n.visConfigSelection.minSelectedMeasurements,customData:n.visConfigSelection.customData},colors:n.colors.raw(a),modifiedMethods:epiviz.utils.mapCopy(n.modifiedMethods),customSettings:n.customSettingsValues||null,chartMarkers:n.chartMarkers.map(function(a){return a.raw()})}})}}var g=Array(b.size());b.foreach(function(a,c){g[c]=a.raw(b)});return{id:this._id,name:this._name,content:{range:this._range.raw(),
measurements:g,charts:c}}};
epiviz.workspaces.Workspace.fromRawObject=function(a,b,c){var e,d=Array(a.content.measurements.length),f=new epiviz.measurements.MeasurementSet;for(e=0;e<a.content.measurements.length;++e)a.content.measurements[e].formula||(d[e]=epiviz.measurements.Measurement.fromRawObject(a.content.measurements[e]));for(e=0;e<a.content.measurements.length;++e)a.content.measurements[e].formula&&(d[e]=epiviz.measurements.Measurement.fromRawObject(a.content.measurements[e],d),f.add(d[e]));var n={},h;for(h in a.content.charts)if(a.content.charts.hasOwnProperty(h))for(n[h]=
[],e=0;e<a.content.charts[h].length;++e){var g=a.content.charts[h][e],l,m=g.properties.visConfigSelection,p=m?m.measurements:g.properties.measurements;if(p){l=new epiviz.measurements.MeasurementSet;for(var t=0;t<p.length;++t)l.add(d[p[t]])}m=m?new epiviz.ui.controls.VisConfigSelection(l,m.datasource,m.datasourceGroup,m.dataprovider,m.annotation,m.defaultChartType,m.minSelectedMeasurements,m.customData):new epiviz.ui.controls.VisConfigSelection(l);(p=b.get(g.type))&&n[h].push({id:g.id,type:p,properties:new epiviz.ui.charts.VisualizationProperties(g.properties.width,
g.properties.height,epiviz.ui.charts.Margins.fromRawObject(g.properties.margins),m,epiviz.ui.charts.ColorPalette.fromRawObject(g.properties.colors,c),g.properties.modifiedMethods,g.properties.customSettings,p.customSettingsDefs(),g.properties.chartMarkers?g.properties.chartMarkers.map(function(a){return epiviz.ui.charts.markers.VisualizationMarker.fromRawObject(a)}):[])})}return new epiviz.workspaces.Workspace(a.id,a.name,{range:epiviz.datatypes.GenomicRange.fromRawObject(a.content.range),computedMeasurements:f,
charts:n})};epiviz.workspaces.Workspace.prototype.onContentChanged=function(){return this._contentChanged};
epiviz.workspaces.WorkspaceManager=function(a,b,c,e,d){this._config=a;this._locationManager=b;this._measurementsManager=c;this._chartManager=e;this._chartFactory=d;this._workspacesByName=this._workspaces=this._unchangedActiveWorkspace=this._activeWorkspace=null;this._workspacesLoaded=new epiviz.events.Event;this._activeWorkspaceChanged=new epiviz.events.Event;this._activeWorkspaceChanging=!1;this._requestWorkspaces=new epiviz.events.Event;this._activeWorkspaceContentChanged=new epiviz.events.Event;
this._uiChartSettingsChanged=new epiviz.events.Event;var f=this;this._activeWorkspaceContentChangedListener=new epiviz.events.EventListener(function(a){f._activeWorkspaceContentChanged.notify(a)});this._registerLocationChanged();this._registerComputedMeasurementAdded();this._registerComputedMeasurementRemoved();this._registerChartAdded();this._registerChartRemoved();this._registerChartsOrderChanged();this._registerChartColorsChanged();this._registerChartMethodsModified();this._registerChartMethodsReset();
this._registerChartMarkersModified();this._registerChartSizeChanged();this._registerChartMarginsChanged();this._registerChartCustomSettingsChanged()};epiviz.workspaces.WorkspaceManager.prototype.onUiChartSettingsChanged=function(){return this._uiChartSettingsChanged};epiviz.workspaces.WorkspaceManager.prototype.activeWorkspace=function(){return this._activeWorkspace||null};epiviz.workspaces.WorkspaceManager.prototype.get=function(a){return a&&this._workspaces?this._workspaces[a]||null:null};
epiviz.workspaces.WorkspaceManager.prototype.getByName=function(a){return a&&this._workspacesByName?this._workspacesByName[a]||null:null};epiviz.workspaces.WorkspaceManager.prototype.initialize=function(){this._requestWorkspaces.notify({activeWorkspaceId:epiviz.ui.WebArgsManager.WEB_ARGS.ws||epiviz.ui.WebArgsManager.WEB_ARGS.workspace||null})};
epiviz.workspaces.WorkspaceManager.prototype.updateWorkspaces=function(a,b,c,e){if(a){this._workspaces={};this._workspacesByName={};for(var d=0;d<a.length;++d)null!==a[d].id()&&(this._workspaces[a[d].id()]=a[d],this._workspacesByName[a[d].name()]=a[d])}b||(b=a&&a.length?a[0]:epiviz.workspaces.Workspace.fromRawObject(this._config.defaultWorkspaceSettings,this._chartFactory,this._config));d=this._activeWorkspace;this._activeWorkspace=b;this._unchangedActiveWorkspace=e?e:b?b.copy(b.name(),b.id()):null;
d&&d.onContentChanged().removeListener(this._activeWorkspaceContentChangedListener);this._activeWorkspace&&this._activeWorkspace.onContentChanged().addListener(this._activeWorkspaceContentChangedListener);b=epiviz.ui.WebArgsManager.WEB_ARGS;e=void 0!=b.seqName?b.seqName:this._activeWorkspace.range().seqName();var f=null,n=null;"undefined"!=b.start&&(f=parseInt(b.start)||this._activeWorkspace.range().start());"undefined"!=b.end&&(n=parseInt(b.end)||this._activeWorkspace.range().end());this._activeWorkspace.locationChanged(epiviz.datatypes.GenomicRange.fromStartEnd(e,
f,n));this._workspacesLoaded.notify({activeWorkspace:this._activeWorkspace,workspaces:a});this._activeWorkspaceChanged.notify({oldValue:d,newValue:this._activeWorkspace,workspaceId:this._activeWorkspace.id()||c})};epiviz.workspaces.WorkspaceManager.prototype.updateWorkspace=function(a){this._workspaces[a.id()]=a;this._workspacesByName[a.name()]=a};
epiviz.workspaces.WorkspaceManager.prototype.deleteActiveWorkspace=function(){var a=this._activeWorkspace;if(a&&a.id()){delete this._workspaces[a.id()];delete this._workspacesByName[a.name()];var b=null,c;for(c in this._workspaces)if(this._workspaces.hasOwnProperty(c)){b=this._workspaces[c];break}b||(b=epiviz.workspaces.Workspace.fromRawObject(this._config.defaultWorkspaceSettings,this._chartFactory,this._config));this._unchangedActiveWorkspace=(this._activeWorkspace=b)?b.copy(b.name(),b.id()):null;
b=a.range().seqName();c=a.range().start();var e=a.range().end();this._activeWorkspace.locationChanged(epiviz.datatypes.GenomicRange.fromStartEnd(b,c,e));this._activeWorkspaceChanged.notify({oldValue:a,newValue:this._activeWorkspace,workspaceId:this._activeWorkspace.id()})}};
epiviz.workspaces.WorkspaceManager.prototype.revertActiveWorkspace=function(){if(this._unchangedActiveWorkspace){var a=this._activeWorkspace,b=a.range().seqName(),c=a.range().start(),a=a.range().end();this._activeWorkspace=this._unchangedActiveWorkspace.copy(this._unchangedActiveWorkspace.name(),this._unchangedActiveWorkspace.id());this._activeWorkspace.locationChanged(epiviz.datatypes.GenomicRange.fromStartEnd(b,c,a));this._activeWorkspaceChanged.notify({oldValue:null,newValue:this._activeWorkspace,
workspaceId:this._activeWorkspace.id()})}};epiviz.workspaces.WorkspaceManager.prototype.onWorkspacesLoaded=function(){return this._workspacesLoaded};epiviz.workspaces.WorkspaceManager.prototype.onActiveWorkspaceChanged=function(){return this._activeWorkspaceChanged};epiviz.workspaces.WorkspaceManager.prototype.startChangingActiveWorkspace=function(){this._activeWorkspaceChanging=!0};epiviz.workspaces.WorkspaceManager.prototype.endChangingActiveWorkspace=function(){this._activeWorkspaceChanging=!1};
epiviz.workspaces.WorkspaceManager.prototype.activeWorkspaceChanging=function(){return this._activeWorkspaceChanging};epiviz.workspaces.WorkspaceManager.prototype.onRequestWorkspaces=function(){return this._requestWorkspaces};epiviz.workspaces.WorkspaceManager.prototype.onActiveWorkspaceContentChanged=function(){return this._activeWorkspaceContentChanged};
epiviz.workspaces.WorkspaceManager.prototype.changeActiveWorkspace=function(a,b){if((b=b||this._workspaces[a])&&b!==this._activeWorkspace){var c=this._activeWorkspace;this._unchangedActiveWorkspace=(this._activeWorkspace=b)?this._activeWorkspace.copy(this._activeWorkspace.name(),this._activeWorkspace.id()):null;this._activeWorkspaceChanged.notify({oldValue:c,newValue:this._activeWorkspace,workspaceId:a})}};
epiviz.workspaces.WorkspaceManager.prototype._registerLocationChanged=function(){var a=this;this._locationManager.onCurrentLocationChanged().addListener(new epiviz.events.EventListener(function(b){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.locationChanged(b.newValue)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerChartAdded=function(){var a=this;this._chartManager.onChartAdded().addListener(new epiviz.events.EventListener(function(b){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.chartAdded(b.id,b.args.type,b.args.properties,b.args.chartsOrder)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerChartRemoved=function(){var a=this;this._chartManager.onChartRemoved().addListener(new epiviz.events.EventListener(function(b){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.chartRemoved(b.id,b.args)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerChartsOrderChanged=function(){var a=this;this._chartManager.onChartsOrderChanged().addListener(new epiviz.events.EventListener(function(b){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.chartsOrderChanged(b)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerChartColorsChanged=function(){var a=this;this._chartManager.onChartColorsChanged().addListener(new epiviz.events.EventListener(function(b){!a._activeWorkspaceChanging&&a._activeWorkspace&&(a._activeWorkspace.chartColorsChanged(b.id,b.args),a.onUiChartSettingsChanged().notify({chartId:b.id,colorMap:b.args}))}))};
epiviz.workspaces.WorkspaceManager.prototype._registerChartMethodsModified=function(){var a=this;this._chartManager.onChartMethodsModified().addListener(new epiviz.events.EventListener(function(b){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.chartMethodsModified(b.id,b.args)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerChartMethodsReset=function(){var a=this;this._chartManager.onChartMethodsReset().addListener(new epiviz.events.EventListener(function(b){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.chartMethodsReset(b.id)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerChartMarkersModified=function(){var a=this;this._chartManager.onChartMarkersModified().addListener(new epiviz.events.EventListener(function(b){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.chartMarkersModified(b.id,b.args)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerChartCustomSettingsChanged=function(){var a=this;this._chartManager.onChartCustomSettingsChanged().addListener(new epiviz.events.EventListener(function(b){!a._activeWorkspaceChanging&&a._activeWorkspace&&(a._activeWorkspace.chartCustomSettingsChanged(b.id,b.args),a.onUiChartSettingsChanged().notify({chartId:b.id,settings:b.args}))}))};
epiviz.workspaces.WorkspaceManager.prototype._registerChartSizeChanged=function(){var a=this;this._chartManager.onChartSizeChanged().addListener(new epiviz.events.EventListener(function(b){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.chartSizeChanged(b.id,b.args.width,b.args.height)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerChartMarginsChanged=function(){var a=this;this._chartManager.onChartMarginsChanged().addListener(new epiviz.events.EventListener(function(b){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.chartMarginsChanged(b.id,b.args)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerComputedMeasurementAdded=function(){var a=this;this._measurementsManager.onComputedMeasurementsAdded().addListener(new epiviz.events.EventListener(function(b){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.computedMeasurementsAdded(b)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerComputedMeasurementRemoved=function(){var a=this;this._measurementsManager.onComputedMeasurementsRemoved().addListener(new epiviz.events.EventListener(function(b){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.computedMeasurementsRemoved(b)}))};epiviz.localstorage={};epiviz.localstorage.LocalStorageManager=function(a){this._workspace=a;this._availStorage="undefined"===typeof Storage||null==localStorage?!1:!0};
epiviz.localstorage.LocalStorageManager.MODE={INCOGNITO_MODE:"incognito_workspace",COOKIE_MODE:"workspace"};epiviz.localstorage.LocalStorageManager.prototype.initialize=function(){};epiviz.localstorage.LocalStorageManager.prototype.getWorkspace=function(a,b){if(this._availStorage){var c=localStorage.getItem(this._workspace);return c?epiviz.workspaces.Workspace.fromRawObject(JSON.parse(c),a,b):null}};
epiviz.localstorage.LocalStorageManager.prototype.saveWorkspace=function(a,b){if(this._availStorage){var c=a.raw(b);localStorage.setItem(this._workspace,JSON.stringify(c))}};epiviz.localstorage.LocalStorageManager.prototype.clearWorkspace=function(){this._availStorage&&localStorage.removeItem(this._workspace)};epiviz.localstorage.LocalStorageManager.prototype.clearAll=function(){this._availStorage&&localStorage.clear()};
epiviz.ui.tutorials=function(){this._tutorialList=[{name:"Epiviz Overview",id:"tut_epiviz_overview",tutorial:[{target:"body",content:"<p class='intro-header'>Welcome to Epiviz Genomic Browser!<br></p><p class='intro-text'>This tutorial will walk you through the functionality available in Epiviz.</p>",position:"center"},{target:"#intro-navigation",content:"<p class='intro-text'>The navigation section of Epiviz lets you select a chromosome and explore the genome. Options are available to move left/right and zoom in/out.</p><p class='intro-text'>The settings icon allows you to control the navigation parameters.</p>",
position:"right",buttons:[AnnoButton.BackButton,AnnoButton.NextButton]},{target:"#search-box",content:"<p class='intro-header'>Use the search input to look for a specific gene or target.</p><p class='intro-text'>This will navigate Epiviz to the selected gene location and update the workspace with the new data.</p>",position:"right",buttons:[AnnoButton.BackButton,AnnoButton.NextButton]},{target:"#vis-menu-button",content:'<p class="intro-text">Choose from a list of available data sources, measurements or chart types to add visualizations to the Epiviz Workspace.</p>',
position:"right",buttons:[AnnoButton.BackButton,AnnoButton.NextButton]},{target:"#intro-workspace",content:'<p class="intro-header">managing workspaces.</p><p class="intro-text">If you are logged in, you will be able to save your Epiviz analysis and workspaces.You will also be able to retrieve them at a later time from your account.</p>',position:"right",buttons:[AnnoButton.BackButton,AnnoButton.NextButton]},{target:"#login-link",content:'<p class="intro-text">Please login to save and manage Epiviz workspaces.</p>',
position:"left",buttons:[AnnoButton.BackButton,AnnoButton.NextButton]},{target:"body",content:'<p class=\'intro-header\'>Thank you for using Epiviz!</p><p class="intro-text">If you would like to give us some feedback or stay informed with updates, Please visit the <a target="_blank" href="http://epiviz.github.io/">Epiviz webpage</a>.</p>',position:"center"}]},{name:"Data Visualization and Controls",id:"tut_data_controls",tutorial:[{target:"body",content:"<p class='intro-header'>Welcome to Epiviz Genomic Browser!<br><br>Data visualization tutorial<br></p><p class='intro-text'>This tutorial will help create/add new data visualizations to the Epiviz workspace and controls available for each visualization.</p>",
position:"center"},{target:"#vis-menu-button",content:'<p class="intro-text">The Data Visualizations button helps users add new charts to the workspace.</p><p>Users have the option to choose data sources and measurements to add to the workspace.</p>',position:"right",onHide:function(a,b,c,e){$("#vis-menu-button").button().trigger("click")},showOverlay:function(){},buttons:[AnnoButton.BackButton,AnnoButton.NextButton]},{target:"#vis-menu",content:'<p class="intro-text">Choose the type of chart to add to your workspace. We choose scatter plot to continue with the tutorial</p>',
position:"right",onShow:function(a,b,c){},onHide:function(a,b,c,e){$("#plot-menu-add-scatter").trigger("click")},showOverlay:function(){},buttons:[AnnoButton.BackButton,AnnoButton.NextButton]},{target:function(){var a=$("#wizardDialog").parent().attr("id");return $("#"+a).parent()},content:'<p class="intro-text">This window lets you choose form a list of data sources and the measurements available from each data source to add to your Epiviz workspace</p><p>We selected the first data source in the table or choose a data source from the list.</p>',
showOverlay:function(){},onShow:function(a,b,c){$("#wizardDialog table tbody tr:first").trigger("click")},onHide:function(a,b,c,e){$('.ui-button:contains("Next")').trigger("click")},position:"right",buttons:[AnnoButton.BackButton,AnnoButton.NextButton]},{target:function(){var a=$("#wizardDialog").parent().attr("id");return $("#"+a).parent()},content:'<p class="intro-text">After choosing a data source, the next tab lists all the measurements (or features) available from this data source. If you have any computed measurements for this data source, they will be added to this list.</p><p>To add a plot to the workspace, pick a few measurements and select finish on this window. </p>',
showOverlay:function(){},position:"right",onShow:function(a,b,c){},onHide:function(a,b,c,e){a=$("#wizardDialog").parent().attr("id");$("#"+a).dialog("close")},buttons:[AnnoButton.BackButton,AnnoButton.NextButton]},{target:"#feature-view",content:'<p class="intro-text">Visualizations are added to the workspace based on the type of chart. </p><p>Brushing is implemented on all the plots. When you hover over a data point, it highlight that region in the gene on all the visualizations.</p>',position:{top:"24em",
left:"14em"},showOverlay:function(){},onShow:function(a,b,c){$('button:contains("Remove"):first').css("display","block")},buttons:[AnnoButton.BackButton,AnnoButton.NextButton]},{target:function(){return $('button:contains("Remove"):first')},content:'<p class="intro-text">Removes the plot from the workspace</p>',position:"left",showOverlay:function(){},className:"anno-width-175",onShow:function(a,b,c){$('button:contains("Save"):eq(1)').css("display","block")},onHide:function(a,b,c,e){$(b).css("display",
"none")},buttons:[AnnoButton.BackButton,AnnoButton.NextButton]},{target:function(){return $('button:contains("Save"):eq(1)')},content:'<p class="intro-text">Save a plot to your local machine (image, pdf)</p>',position:"left",showOverlay:function(){},className:"anno-width-175",onShow:function(a,b,c){$('button:contains("Custom settings"):first').css("display","inline-block")},onHide:function(a,b,c,e){$(b).css("display","none")},buttons:[AnnoButton.BackButton,AnnoButton.NextButton]},{target:function(){return $('button:contains("Custom settings"):first')},
content:'<p class="intro-text">Change chart display properties and aggregation methods for grouping.</p>',position:"left",showOverlay:function(){},className:"anno-width-175",onShow:function(a,b,c){$('button:contains("Code"):first').css("display","inline-block")},onHide:function(a,b,c,e){$(b).css("display","none")},buttons:[AnnoButton.BackButton,AnnoButton.NextButton]},{target:function(){return $('button:contains("Code"):first')},content:'<p class="intro-text">Edit code to redraw the chart on the workspace.</p>',
position:"left",showOverlay:function(){},className:"anno-width-175",onShow:function(a,b,c){$('button:contains("Colors"):first').css("display","inline-block")},onHide:function(a,b,c,e){$(b).css("display","none")},buttons:[AnnoButton.BackButton,AnnoButton.NextButton]},{target:function(){return $('button:contains("Colors"):first')},content:'<p class="intro-text">Choose colors for data points on the plot</p>',position:"left",showOverlay:function(){},className:"anno-width-175",onShow:function(a,b,c){$('label:contains("Toggle tooltip"):first').css("display",
"block")},onHide:function(a,b,c,e){$(b).css("display","none")},buttons:[AnnoButton.BackButton,AnnoButton.NextButton]},{target:function(){return $('label:contains("Toggle tooltip"):first')},content:'<p class="intro-text">Toggle tooltips for data points</p>',position:"right",showOverlay:function(){},className:"anno-width-175",onHide:function(a,b,c,e){$(b).css("display","none")},buttons:[AnnoButton.BackButton,AnnoButton.NextButton]},{target:"body",content:'<p class=\'intro-header\'>Thank you for using Epiviz!</p><p class="intro-text">If you would like to give us some feedback or stay informed with updates, Please visit the <a target="_blank" href="http://epiviz.github.io/">Epiviz webpage</a>.</p>',
position:"center"}]},{name:"Computed Measurements",id:"tut_comp_measurements",tutorial:[{target:"body",content:"<p class='intro-header'>Welcome to Epiviz Genomic Browser!<br>Compute Measurements Tutorial<br></p><p class='intro-text'>This tutorial will help you create new measurements (derived from existing measurements) and generate plots to add to the workspace.</p>",position:"center"},{target:"#computed-measurements-button",content:"<p class='intro-text'>The computed measurements button helps users add new measurements to data sources</p>",
position:"right",onShow:function(a,b,c){$("#computed-measurements-button").button().trigger("click")},buttons:[AnnoButton.BackButton,AnnoButton.NextButton]},{target:"#computedMeasurementsDialog",content:"<p class='intro-text'>This tab lets you choose a data source where you will create a new measurement.</p><p>We choose the first data source in the list or choose any data source.</p>",position:{top:"20em",left:"1em"},showOverlay:function(){},onShow:function(a,b,c){$("#computedMeasurementsDialog table tbody tr td:first").trigger("click")},
buttons:[AnnoButton.BackButton,AnnoButton.NextButton]},{target:"#computedMeasurementsDialog",content:"<p class='intro-text'>The measurements tab lists all available measurements from the selected data source (including previously created computed measurements).</p><p>Use the buttons next to each measurement to add to the expression window</p>",position:{top:"20em",left:"1em"},showOverlay:function(){},onShow:function(a,b,c){$('.ui-button:contains("Next")').trigger("click")},buttons:[AnnoButton.BackButton,
AnnoButton.NextButton]},{target:"#computedMeasurementsDialog",content:"<p class='intro-text'> After choosing measurements, use mathematical operators to evaluate the expression.</p><p><a target='_blank' href='https://silentmatt.com/javascript-expression-evaluator/'>supported operators</a> </p>",position:{top:"33em",left:"1em"},showOverlay:function(){},buttons:[AnnoButton.BackButton,AnnoButton.NextButton]},{target:"#computedMeasurementsDialog",content:"<p class='intro-text'>After adding a computed measurement, use the data visualization button to plot the measurement to your workspace.</p><p>To learn how to add new plots to the workspace, please use the Epiviz data visualization tutorial.</p>",
position:{top:"10em",left:"1em"},showOverlay:function(){},onHide:function(a,b,c,e){a=$("#computedMeasurementsDialog").parent().attr("id");$("#"+a).dialog("close")},buttons:[AnnoButton.BackButton,AnnoButton.NextButton]},{target:"body",content:'<p class=\'intro-header\'>Thank you for using Epiviz!</p><p class="intro-text">If you would like to give us some feedback or stay informed with updates, Please visit the <a target="_blank" href="http://epiviz.github.io/">Epiviz webpage</a>.</p>',position:"center"}]}]};
epiviz.datatypes.GenomicRange=function(a,b,c){void 0!=c&&0>c&&(c=-c,void 0!=b&&(b-=c));this._seqname=a;this._start=b;this._width=c};epiviz.datatypes.GenomicRange.fromStartEnd=function(a,b,c){return new epiviz.datatypes.GenomicRange(a,b,void 0!=b&&void 0!=c?c-b:void 0)};epiviz.datatypes.GenomicRange.prototype.seqName=function(){return this._seqname};epiviz.datatypes.GenomicRange.prototype.start=function(){return this._start};epiviz.datatypes.GenomicRange.prototype.width=function(){return this._width};
epiviz.datatypes.GenomicRange.prototype.end=function(){return void 0!=this._start&&void 0!=this._width?this._start+this._width:void 0};epiviz.datatypes.GenomicRange.prototype.isEmpty=function(){return 0>=this._width};
epiviz.datatypes.GenomicRange.prototype.subtract=function(a){return!a||a.seqName()!=this._seqname||a.isEmpty()||a.start()>=this.end()||this._start>=a.end()?[this]:a.start()<=this._start&&a.end()>=this.end()?[]:a.start()>this._start&&a.end()<this.end()?[epiviz.datatypes.GenomicRange.fromStartEnd(this._seqname,this._start,a.start()),epiviz.datatypes.GenomicRange.fromStartEnd(this._seqname,a.end(),this.end())]:a.start()>this._start?[epiviz.datatypes.GenomicRange.fromStartEnd(this._seqname,this._start,
a.start())]:[epiviz.datatypes.GenomicRange.fromStartEnd(this._seqname,a.end(),this.end())]};epiviz.datatypes.GenomicRange.prototype.equals=function(a){return a?a==this?!0:this._seqname==a._seqname&&this._start==a._start&&this._width==a._width:!1};epiviz.datatypes.GenomicRange.prototype.overlapsWith=function(a){return a?this==a?!0:this.seqName()!=a.seqName()?!1:this.start()<a.end()&&this.end()>a.start():!1};
epiviz.datatypes.GenomicRange.prototype.raw=function(){return{seqName:this._seqname,start:this._start,width:this._width}};epiviz.datatypes.GenomicRange.fromRawObject=function(a){return new epiviz.datatypes.GenomicRange(a.seqName,a.start,a.width)};
epiviz.ui.LocationManager=function(a){this._seqInfos={};this._timeout=this._lastUnfilledRequest=this._currentLocation=null;this._navigationDelay=a.navigationDelay;this._currentLocationChanged=new epiviz.events.Event;this._seqInfosUpdated=new epiviz.events.Event;this._requestSeqInfos=new epiviz.events.Event};epiviz.ui.LocationManager.prototype.initialize=function(){this._requestSeqInfos.notify()};
epiviz.ui.LocationManager.prototype.changeCurrentLocation=function(a){if(!this._currentLocationChanged.isFiring()){this._lastUnfilledRequest=a;null!==this._timeout&&(window.clearTimeout(this._timeout),this._timeout=null);var b=this;a=function(){var a=b._lastUnfilledRequest;null!==a&&b._doChangeCurrentLocation(a)};this._navigationDelay?this._timeout=window.setTimeout(a,this._navigationDelay):a()}};
epiviz.ui.LocationManager.prototype._doChangeCurrentLocation=function(a){var b=this._currentLocation,c=a.seqName();if(!(a.seqName()in this._seqInfos)){if(!b)return;c=b.seqName()}var e=void 0,d=void 0;this._seqInfos[c]&&void 0!=this._seqInfos[c].min&&void 0!=this._seqInfos[c].max&&(e=void 0!=a.start()&&a.start()>=this._seqInfos[c].min?a.start():this._seqInfos[c].min,d=void 0!=a.width()?e+a.width():e+9999);void 0!=e&&void 0!=d&&d>this._seqInfos[c].max&&(e=Math.max(this._seqInfos[c].min,this._seqInfos[c].max-
d+e),d=this._seqInfos[c].max);this._lastUnfilledRequest=null;this._currentLocation=epiviz.datatypes.GenomicRange.fromStartEnd(c,e,d);this._currentLocationChanged.notify({oldValue:b,newValue:this._currentLocation})};epiviz.ui.LocationManager.prototype.currentLocation=function(){return this._currentLocation};epiviz.ui.LocationManager.prototype.lastUnfilledLocationChangeRequest=function(){return this._lastUnfilledRequest};
epiviz.ui.LocationManager.prototype.updateSeqInfos=function(a){this._seqInfos={};for(var b=0;b<a.length;++b)this._seqInfos[a[b].seqName]=a[b];this._seqInfosUpdated.notify(a);null!==this._lastUnfilledRequest&&(this._lastUnfilledRequest.seqName()in this._seqInfos?this._doChangeCurrentLocation(this._lastUnfilledRequest):0<a.length&&(a=new epiviz.datatypes.GenomicRange(a[0].seqName,this._lastUnfilledRequest.start(),this._lastUnfilledRequest.width()),this._doChangeCurrentLocation(a)))};
epiviz.ui.LocationManager.prototype.addSeqInfos=function(a){for(var b=0;b<a.length;++b)this._seqInfos[a[b].seqName]||(this._seqInfos[a[b].seqName]=a[b]);a=[];for(var c in this._seqInfos)this._seqInfos.hasOwnProperty(c)&&a.push(this._seqInfos[c]);this._seqInfosUpdated.notify(a)};
epiviz.ui.LocationManager.prototype.removeSeqNames=function(a){for(var b=0;b<a.length;++b)delete this._seqInfos[a[b]];a=[];for(var c in this._seqInfos)this._seqInfos.hasOwnProperty(c)&&a.push(this._seqInfos[c]);this._seqInfosUpdated.notify(a);this._currentLocation.seqName()in this._seqInfos||this.changeCurrentLocation(new epiviz.datatypes.GenomicRange(a[0].seqName,this._currentLocation.start(),this._currentLocation.width()))};epiviz.ui.LocationManager.prototype.seqInfos=function(){return this._seqInfos};
epiviz.ui.LocationManager.prototype.onCurrentLocationChanged=function(){return this._currentLocationChanged};epiviz.ui.LocationManager.prototype.onSeqInfosUpdated=function(){return this._seqInfosUpdated};epiviz.ui.LocationManager.prototype.onRequestSeqInfos=function(){return this._requestSeqInfos};
epiviz.ui.ControlManager=function(a,b,c,e,d){this._config=a;this._chartFactory=b;this._chartManager=c;this._measurementsManager=e;this._locationManager=d;this._addChart=new epiviz.events.Event;this._activeWorkspaceChanged=new epiviz.events.Event;this._saveWorkspace=new epiviz.events.Event;this._deleteActiveWorkspace=new epiviz.events.Event;this._revertActiveWorkspace=new epiviz.events.Event;this._loginLinkClicked=new epiviz.events.Event;this._searchWorkspaces=new epiviz.events.Event;this._search=
new epiviz.events.Event;this._activeWorkspaceInfo=null;this._stepRatio=a.navigationStepRatio;this._zoominRatio=a.zoominRatio;this._zoomoutRatio=a.zoomoutRatio};epiviz.ui.ControlManager.CHART_TYPE_CONTAINERS={plot:"feature-view",track:"location-view","data-structure":"data-structure-view"};epiviz.ui.ControlManager.DISPLAY_TYPE_LABELS={plot:"Feature",track:"Location","data-structure":"Data Structure"};
epiviz.ui.ControlManager.prototype.initialize=function(){this._initializeChromosomeSelector();this._initializeLocationTextbox();this._initializeNavigationButtons();this._initializeZoomButtons();this._initializeLocationSettingsDialog();this._initializeChartMenus();this._initializeComputedMeasurementsMenu();this._initializeHelpButton();this._initializeSearchBox();this._initializeWorkspaceSaving();this._initializeTutorials();this._initializeScreenshotMenu();this._initializeLoginLink();this._initializeLayout();
this._checkBrowserCompatibility();this._registerLocationChanged();this._registerSeqInfosUpdated()};epiviz.ui.ControlManager.prototype.onAddChart=function(){return this._addChart};epiviz.ui.ControlManager.prototype.onActiveWorkspaceChanged=function(){return this._activeWorkspaceChanged};epiviz.ui.ControlManager.prototype.onSaveWorkspace=function(){return this._saveWorkspace};epiviz.ui.ControlManager.prototype.onDeleteActiveWorkspace=function(){return this._deleteActiveWorkspace};
epiviz.ui.ControlManager.prototype.onRevertActiveWorkspace=function(){return this._revertActiveWorkspace};epiviz.ui.ControlManager.prototype.onLoginLinkClicked=function(){return this._loginLinkClicked};epiviz.ui.ControlManager.prototype.onSearchWorkspaces=function(){return this._searchWorkspaces};epiviz.ui.ControlManager.prototype.onSearch=function(){return this._search};
epiviz.ui.ControlManager.prototype._updateSeqNames=function(a){var b=$("#chromosome-selector");b.empty();for(var c=0;c<a.length;++c){var e=sprintf('<option value="%s"%s>%s</option>',a[c].seqName,this._locationManager.currentLocation()&&a[c].seqName==this._locationManager.currentLocation().seqName()?'selected="selected"':"",a[c].seqName);b.append(e)}b.selectmenu()};
epiviz.ui.ControlManager.prototype._updateSelectedLocation=function(a){if(a){this._locationManager.changeCurrentLocation(a);a=this._locationManager.currentLocation();$("#text-location").val(Globalize.format(a.start(),"n0")+" - "+Globalize.format(a.end(),"n0"));var b=$("#chromosome-selector");b.val(a.seqName());b.selectmenu()}};
epiviz.ui.ControlManager.prototype.updateSelectedWorkspace=function(a){var b=this,c=$("#save-workspace-text"),e=this._activeWorkspaceInfo;c.val(a.name);this._activeWorkspaceInfo=a;this._activeWorkspaceChanged.notify({oldValue:e,newValue:a,cancel:function(){c.val(e.name);b._activeWorkspaceInfo=e}})};
epiviz.ui.ControlManager.prototype._initializeChromosomeSelector=function(){var a=$("#chromosome-selector");a.selectmenu({style:"popup",width:"90",maxHeight:"100",menuWidth:"90"});var b=this;a.change(function(){var a=b._locationManager.lastUnfilledLocationChangeRequest()||b._locationManager.currentLocation(),e=$(this).val();b._updateSelectedLocation(new epiviz.datatypes.GenomicRange(e,a.start(),a.width()))})};
epiviz.ui.ControlManager.prototype._initializeLocationTextbox=function(){var a=this;$("#text-location").keypress(function(b){if(13!=b.which)return!0;try{var c=$(this).val().split("-"),e=Globalize.parseInt(c[0]),d=Globalize.parseInt(c[1]),f=a._locationManager.lastUnfilledLocationChangeRequest()||a._locationManager.currentLocation();a._updateSelectedLocation(epiviz.datatypes.GenomicRange.fromStartEnd(f.seqName(),e,d));return!0}catch(n){return!1}})};
epiviz.ui.ControlManager.prototype._initializeNavigationButtons=function(){var a=this;$("#moveright").button({icons:{primary:"ui-icon ui-icon-seek-next"},text:!1}).click(function(){var b=a._locationManager.lastUnfilledLocationChangeRequest()||a._locationManager.currentLocation(),c=b.start()+Math.round(b.width()*a._stepRatio);a._updateSelectedLocation(new epiviz.datatypes.GenomicRange(b.seqName(),c,b.width()))});$("#moveleft").button({icons:{primary:"ui-icon ui-icon-seek-prev"},text:!1}).click(function(){var b=
a._locationManager.lastUnfilledLocationChangeRequest()||a._locationManager.currentLocation(),c=b.start()-Math.round(b.width()*a._stepRatio);a._updateSelectedLocation(new epiviz.datatypes.GenomicRange(b.seqName(),c,b.width()))})};
epiviz.ui.ControlManager.prototype._initializeZoomButtons=function(){var a=this,b=$("#zoomin");b.button({icons:{primary:"ui-icon ui-icon-zoomin"},text:!1});var c=$("#zoomout");c.button({icons:{primary:"ui-icon ui-icon-zoomout"},text:!1});var e=function(b){var c=a._locationManager.lastUnfilledLocationChangeRequest()||a._locationManager.currentLocation(),e=c.start()+.5*c.width();b=Math.round(c.width()*b);e=Math.round(e-.5*b);a._updateSelectedLocation(new epiviz.datatypes.GenomicRange(c.seqName(),e,
b))};b.click(function(){e(a._zoominRatio)});c.click(function(){e(a._zoomoutRatio)})};
epiviz.ui.ControlManager.prototype._initializeLocationSettingsDialog=function(){var a=this;$("#location-settings").button({text:!1,icons:{primary:"ui-icon ui-icon-gear"}}).click(function(){$("#location-settings-dialog").dialog("open")});$("#location-settings-dialog").dialog({autoOpen:!1,resizable:!1,width:"300",buttons:{Ok:function(){a._zoominRatio=$("#zoomin-ratio-text").val();a._zoomoutRatio=$("#zoomout-ratio-text").val();a._stepRatio=$("#navigation-step-ratio-text").val();$(this).dialog("close")},
Cancel:function(){$("#zoomin-ratio-text").val(Globalize.format(a._zoominRatio,"n3"));$("#zoomout-ratio-text").val(Globalize.format(a._zoomoutRatio,"n3"));$("#navigation-step-ratio-text").val(Globalize.format(a._stepRatio,"n6"));$(this).dialog("close")}},modal:!0});$("#zoomout-ratio-text").spinner({min:1.001,max:1E3,step:.001,start:1.2,numberFormat:"n3"}).val(a._zoomoutRatio);$("#zoomin-ratio-text").spinner({min:.001,max:.999,step:.01,start:.8,numberFormat:"n3"}).val(a._zoominRatio);$("#navigation-step-ratio-text").spinner({min:1E-6,
max:1,step:1E-6,start:.2,numberFormat:"n6"}).val(a._stepRatio)};
epiviz.ui.ControlManager.prototype._initializeChartMenus=function(){var a=this,b=$("#vis-menu");$("#vis-menu-button").button({text:!1,icons:{primary:"ui-icon ui-icon-scatterplot",secondary:"ui-icon-triangle-1-s"}}).click(function(){var a=b.is(":visible");$(".dropdown-menu").find(">:first-child").hide();a?b.hide():b.show().position({my:"left top",at:"left bottom",of:this});return!1});var c={},e=epiviz.ui.ControlManager.DISPLAY_TYPE_LABELS;this._chartFactory.foreach(function(a,b){b.chartDisplayType()in
c||(c[b.chartDisplayType()]=[]);c[b.chartDisplayType()].push(b)});for(var d in c)c.hasOwnProperty(d)&&($(sprintf('<li class="ui-widget-header">%s</li>',e[d])).appendTo(b),c[d].forEach(function(c,d){var e=sprintf("%s-menu-add-%s",c.chartDisplayType(),c.chartHtmlAttributeName());b.append(sprintf('<li><a href="javascript:void(0)" id="%s">Add New %s</a></li>',e,c.chartName()));$("#"+e).click(function(){var d=[];c.isRestrictedToSameDatasourceGroup()&&d.push(new epiviz.ui.controls.DatasourceGroupWizardStep);
c.chartDisplayType()!=epiviz.ui.charts.VisualizationType.DisplayType.DATA_STRUCTURE&&d.push(new epiviz.ui.controls.MeaurementsWizardStep);if(d.length){var e=a._measurementsManager.measurements().subset(c.measurementsFilter());e.addAll(a._measurementsManager.measurements().map(function(a){return a.datasource()}).subset(c.measurementsFilter()));(new epiviz.ui.controls.Wizard(sprintf("Add new %s",c.chartName()),{finish:function(b){a._addChart.notify({type:c,visConfigSelection:b})}},d,new epiviz.ui.controls.VisConfigSelection(e,
void 0,void 0,void 0,void 0,c.chartName(),c.minSelectedMeasurements()),"750",void 0,c.isRestrictedToSameDatasourceGroup())).show();b.hide()}else a._addChart.notify({type:c,visConfigSelection:new epiviz.ui.controls.VisConfigSelection(a._measurementsManager.measurements().subset(c.measurementsFilter()))})})}));b.hide().menu()};
epiviz.ui.ControlManager.prototype._initializeComputedMeasurementsMenu=function(){var a=this;$("#computed-measurements-button").button({text:!1,icons:{primary:"ui-icon ui-icon-calculator"}}).click(function(){(new epiviz.ui.controls.ComputedMeasurementsDialog("Computed Measurements",{add:function(b){a._measurementsManager.addMeasurement(b)},remove:function(b){a._measurementsManager.removeMeasurement(b)},close:function(){}},a._measurementsManager.measurements(),a._chartManager.chartsMeasurements())).show()})};
epiviz.ui.ControlManager.prototype._initializeHelpButton=function(){$("#help-button").button({text:!1,icons:{primary:"ui-icon ui-icon-help"}}).click(function(){window.open("http://epiviz.github.io/","_blank").focus()})};
epiviz.ui.ControlManager.prototype._initializeTutorials=function(){var a=$("#help-tutorials"),b=new epiviz.ui.tutorials,c='<div class="dropdown-menu"><ul id="tutorial-list"><li class="ui-widget-header">Tutorials</li>';0<b._tutorialList.length?b._tutorialList.forEach(function(a){c+='<li><a href="javascript:void(0);" id="'+a.id+'">'+a.name+"</a></li>"}):c+="<li>No Tutorials available</li>";c+="</ul></div>";$(sprintf(c)).insertAfter(a);var e=$("#tutorial-list");e.hide().menu();a.button({icons:{primary:"ui-icon ui-icon-info",
secondary:"ui-icon-triangle-1-s"},text:!1}).click(function(){e.is(":visible")?e.hide():e.show().position({my:"left top",at:"left bottom",of:this});return!1});0<b._tutorialList.length&&b._tutorialList.forEach(function(a){$("#"+a.id).click(function(){(new Anno(a.tutorial)).show();e.hide()})})};
epiviz.ui.ControlManager.prototype._initializeScreenshotMenu=function(){var a=this,b=$("#save-page");b.button({icons:{primary:"ui-icon ui-icon-print"},text:!1}).click(function(){a._saveWorkspace.notify({name:name,id:name==a._activeWorkspaceInfo.name?a._activeWorkspaceInfo.id:null});b.append(sprintf('<div id="loading" title="printing workspace"><p>Save/Print the existing EpiViz workspace.</p><div style="position:absolute; right:15px;"><select class="screenshot-file-format"><option value="pdf" selected="selected">PDF</option><option value="png" >PNG</option></select></div></div>'));
b.find("#loading").dialog({resizable:!1,modal:!0,title:"Print workspace as image",buttons:{Print:function(){$(this).dialog("close");var b=$(".screenshot-file-format option:selected").val(),e=Math.floor($.now()/1E3);(new epiviz.ui.PrintManager("pagemain","epiviz_"+e,b,a._activeWorkspaceInfo.id)).print();$(this).dialog("destroy").remove()},cancel:function(){$(this).dialog("destroy").remove()}}}).show()})};
epiviz.ui.ControlManager.prototype._initializeSearchBox=function(){var a=this,b=$("#search-box");b.watermark("Find Gene/Probe");b.autocomplete({source:function(b,e){a._search.notify({searchTerm:b.term,callback:function(a){for(var b=[],c=0;c<a.length;++c)b.push({value:a[c].probe||a[c].gene,label:a[c].probe||a[c].gene,html:a[c].probe?sprintf("<b>%s</b>, %s, [%s: %s - %s]",a[c].probe,a[c].gene,a[c].seqName,Globalize.format(a[c].start,"n0"),Globalize.format(a[c].end,"n0")):sprintf("<b>%s</b>, [%s: %s - %s]",
a[c].gene,a[c].seqName,Globalize.format(a[c].start,"n0"),Globalize.format(a[c].end,"n0")),range:epiviz.datatypes.GenomicRange.fromStartEnd(a[c].seqName,a[c].start,a[c].end)});e(b)}})},minLength:1,select:function(b,e){a._locationManager.lastUnfilledLocationChangeRequest()||a._locationManager.currentLocation();var d=e.item.range.seqName(),f=Math.round(e.item.range.start()-11*e.item.range.width()),n=22*e.item.range.width();a._updateSelectedLocation(new epiviz.datatypes.GenomicRange(d,f,n))},focus:function(a){a.preventDefault()},
open:function(){},close:function(){}}).data("autocomplete")._renderItem=function(a,b){return $("<li></li>").data("item.autocomplete",b).append(sprintf("<a>%s</a>",b.html)).appendTo(a)}};
epiviz.ui.ControlManager.prototype._initializeWorkspaceSaving=function(){var a=this,b=$("#save-workspace-text"),c=$("#save-workspace-button"),e=$("#revert-workspace-button"),d=$("#delete-workspace-button");c.button({text:!1,icons:{primary:"ui-icon-disk"}}).click(function(){var c=null;try{var d=b.val();/[a-zA-Z0-9_\s]+/g.exec(d)==d?epiviz.workspaces.UserManager.USER_STATUS.loggedIn?a._saveWorkspace.notify({name:d,id:d==a._activeWorkspaceInfo.name?a._activeWorkspaceInfo.id:null}):(c=new epiviz.ui.controls.MessageDialog("User not logged in",
{Yes:function(){a._loginLinkClicked.notify()},No:function(){}},"You need to log in in order to save the workspace. Do you wish to log in now?",epiviz.ui.controls.MessageDialog.Icon.QUESTION),c.show()):(c=new epiviz.ui.controls.MessageDialog("Invalid workspace name",{Ok:function(){$(this).remove()}},"Invalid workspace name: "+d,epiviz.ui.controls.MessageDialog.Icon.ERROR),c.show())}catch(e){c=new epiviz.ui.controls.MessageDialog("Error",{ok:function(){$(this).remove()}},"An error occurred while trying to save workspace: "+
e.message,epiviz.ui.controls.MessageDialog.Icon.ERROR),c.show()}});d.button({text:!1,icons:{primary:"ui-icon-trash"}}).click(function(b){epiviz.workspaces.UserManager.USER_STATUS.loggedIn&&(new epiviz.ui.controls.MessageDialog("Delete active workspace",{Yes:function(){a._deleteActiveWorkspace.notify()},No:function(){}},"Are you sure you want to delete the active workspace?",epiviz.ui.controls.MessageDialog.Icon.QUESTION)).show()});e.button({text:!1,icons:{primary:"ui-icon-arrowreturnthick-1-w"}}).click(function(b){(new epiviz.ui.controls.MessageDialog("Delete active workspace",
{Yes:function(){a._revertActiveWorkspace.notify()},No:function(){}},"Are you sure you want to revert the changes on the active workspace?",epiviz.ui.controls.MessageDialog.Icon.QUESTION)).show()});b.watermark("Save Workspace Name");b.autocomplete({source:function(b,c){a._searchWorkspaces.notify({searchTerm:b.term,callback:function(a){for(var b=[],d=0;d<a.length;++d)b.push({value:a[d].id,label:a[d].name,html:sprintf("<b>%s</b> %s",a[d].name,a[d].id||"")});c(b)}})},minLength:0,select:function(c,d){c.preventDefault();
a.updateSelectedWorkspace({id:d.item.value||b.val(),name:d.item.label})},focus:function(a){a.preventDefault()},open:function(){},close:function(){}}).data("autocomplete")._renderItem=function(a,b){return $("<li></li>").data("item.autocomplete",b).append(sprintf("<a>%s</a>",b.html)).appendTo(a)};b.click(function(){b.autocomplete("search","")})};epiviz.ui.ControlManager.prototype._initializeLoginLink=function(){var a=this;$("#login-link").live({click:function(){a._loginLinkClicked.notify()}})};
epiviz.ui.ControlManager.prototype._initializeLayout=function(){$("body").layout({applyDefaultStyles:!0,east__size:390,east__minSize:390,east__initHidden:!0,north__resizable:!1,north__initHidden:!1,south__initHidden:!0,east__initClosed:!0})};
epiviz.ui.ControlManager.prototype._checkBrowserCompatibility=function(){0<epiviz.utils.getInternetExplorerVersion()&&(new epiviz.ui.controls.MessageDialog("Browser compatibility warning",{Ok:function(){}},"EpiViz works best on Google Chrome, Apple Safari or Mozilla Firefox. Please open it using one of those browsers.",epiviz.ui.controls.MessageDialog.Icon.ERROR)).show()};epiviz.ui.ControlManager.prototype._registerLocationChanged=function(){var a=this;this._locationManager.onCurrentLocationChanged().addListener(new epiviz.events.EventListener(function(b){a._updateSelectedLocation(b.newValue)}))};
epiviz.ui.ControlManager.prototype._registerSeqInfosUpdated=function(){var a=this;this._locationManager.onSeqInfosUpdated().addListener(new epiviz.events.EventListener(function(b){a._updateSeqNames(b)}))};epiviz.ui.WebArgsManager=function(a,b){this._locationManager=a;this._workspaceManager=b;this._registerLocationChanged();this._registerActiveWorkspaceChanged()};epiviz.ui.WebArgsManager.WEB_ARGS=epiviz.ui.WebArgsManager.WEB_ARGS||{};
epiviz.ui.WebArgsManager.extractWindowLocationArgs=function(){var a={};(0<window.location.search.length?window.location.search.substr(1):"").split("&").forEach(function(b,c){if(0!=b.trim().length){var e=b.indexOf("[]");if(0!=e){var d,f;f=b.indexOf("=");0>f?(d=0>e?b:b.substr(0,e),f="true"):(d=0>e?b.substr(0,f):b.substr(0,e),f=b.substr(f+1));d=decodeURIComponent(d);f=decodeURIComponent(f);0>e?a[d]=f:(d in a||(a[d]=[]),a[d].push(f))}}});return a};
epiviz.ui.WebArgsManager.prototype._updateUrl=function(){var a="?",b=epiviz.ui.WebArgsManager.WEB_ARGS;!("ws"in b)&&"workspace"in b&&(b.ws=b.workspace,delete b.workspace);for(var c in b)if(b.hasOwnProperty(c))if(Array.isArray(b[c]))for(var e,d=0;d<b[c].length;++d)e=b[c][d],void 0==e&&(e="undefined"),a+=sprintf("%s[]=%s&",c,e);else e=b[c],void 0==e&&(e="undefined"),a+=sprintf("%s=%s&",c,e);b=epiviz.utils.getInternetExplorerVersion();if(0>b||10<=b)switch(window.location.protocol){case "http:":case "https:":history.replaceState(null,
"",a)}};epiviz.ui.WebArgsManager.prototype._registerLocationChanged=function(){var a=this;this._locationManager.onCurrentLocationChanged().addListener(new epiviz.events.EventListener(function(b){epiviz.ui.WebArgsManager.WEB_ARGS.seqName=b.newValue.seqName();epiviz.ui.WebArgsManager.WEB_ARGS.start=b.newValue.start();epiviz.ui.WebArgsManager.WEB_ARGS.end=b.newValue.end();a._updateUrl()}))};
epiviz.ui.WebArgsManager.prototype._registerActiveWorkspaceChanged=function(){var a=this;this._workspaceManager.onActiveWorkspaceChanged().addListener(new epiviz.events.EventListener(function(b){epiviz.ui.WebArgsManager.WEB_ARGS.ws=b.workspaceId||"";delete epiviz.ui.WebArgsManager.WEB_ARGS.workspace;a._updateUrl()}))};
epiviz.EpiViz=function(a,b,c,e,d,f,n,h,g,l,m){this._config=a;this._locationManager=b;this._measurementsManager=c;this._controlManager=e;this._dataManager=d;this._chartFactory=f;this._chartManager=n;this._workspaceManager=h;this._userManager=g;this._webArgsManager=l;this._cookieManager=m;this._registerRequestSeqInfos();this._registerRequestMeasurements();this._registerUiAddChart();this._registerUiSaveWorkspace();this._registerUiDeleteActiveWorkspace();this._registerUiRevertActiveWorkspace();this._registerUiLoginLinkClicked();
this._registerUiSearchWorkspaces();this._registerUiActiveWorkspaceChanged();this._registerUiSearch();this._registerChartRequestHierarchy();this._registerChartPropagateHierarchySelection();this._registerUiSettingsChanged();this._registerDataAddMeasurements();this._registerDataRemoveMeasurements();this._registerDataAddChart();this._registerDataRemoveChart();this._registerDataAddSeqInfos();this._registerDataRemoveSeqNames();this._registerDataNavigate();this._registerDataRedraw();this._registerDataGetCurrentLocation();
this._registerPrintWorkspace();this._registerDataSetChartSettings();this._registerDataGetChartSettings();this._registerDataGetAvailableCharts();this._registerRequestWorkspaces();this._registerWorkspacesLoaded();this._registerActiveWorkspaceChanged();this._registerActiveWorkspaceContentChanged();this._registerLocationChanged()};epiviz.EpiViz.VERSION="4";
epiviz.EpiViz.prototype.start=function(){this._cookieManager.initialize();this._controlManager.initialize();this._workspaceManager.initialize();this._measurementsManager.initialize();this._locationManager.initialize()};epiviz.EpiViz.prototype.config=function(){return this._config};
epiviz.EpiViz.prototype._addChart=function(a,b,c,e){c=this._chartManager.addChart(a,b,c,e);var d=this;if(a.chartDisplayType()==epiviz.ui.charts.VisualizationType.DisplayType.DATA_STRUCTURE)a={},a[c]=b,this._dataManager.getHierarchy(a,function(a,b){d._chartManager.updateCharts(void 0,b,[a])});else{var f=this._workspaceManager.activeWorkspace().range();this._chartManager.dataWaitStart(c);a={};a[c]=b.measurements;this._dataManager.getData(f,a,function(a,b){d._chartManager.updateCharts(f,b,[a])})}return c};
epiviz.EpiViz.prototype._registerRequestSeqInfos=function(){var a=this;this._locationManager.onRequestSeqInfos().addListener(new epiviz.events.EventListener(function(){a._dataManager.getSeqInfos(function(b){a._locationManager.updateSeqInfos(b)})}))};epiviz.EpiViz.prototype._registerRequestMeasurements=function(){var a=this;this._measurementsManager.onRequestMeasurements().addListener(new epiviz.events.EventListener(function(){a._dataManager.getMeasurements(function(b){a._measurementsManager.addMeasurements(b)})}))};
epiviz.EpiViz.prototype._registerRequestWorkspaces=function(){var a=this;this._workspaceManager.onRequestWorkspaces().addListener(new epiviz.events.EventListener(function(b){var c=a._cookieManager.getWorkspace(a._chartFactory,a._config);a._dataManager.getWorkspaces(function(e){for(var d=[],f=null,n=null,h=0;h<e.length;++h){var g=epiviz.workspaces.Workspace.fromRawObject(e[h],a._chartFactory,a._config);null===g.id()?f=g:(g.id()==b.activeWorkspaceId&&(c&&c.id()==b.activeWorkspaceId&&(n=g,g=c),f=g),
d.push(g))}!f&&c&&(n=a._workspaceManager.get(c.id()),n||(c=c.copy(c.name()),n=epiviz.workspaces.Workspace.fromRawObject(a._config.defaultWorkspaceSettings,a._chartFactory,a._config)),f=c);a._workspaceManager.updateWorkspaces(d,f,b.activeWorkspaceId,n);c||a._workspaceManager.activeWorkspace().resetChanged()},"",b.activeWorkspaceId)}))};
epiviz.EpiViz.prototype._registerUiAddChart=function(){var a=this;this._controlManager.onAddChart().addListener(new epiviz.events.EventListener(function(b){a._addChart(b.type,b.visConfigSelection)}))};
epiviz.EpiViz.prototype._registerUiSaveWorkspace=function(){var a=this;this._controlManager.onSaveWorkspace().addListener(new epiviz.events.EventListener(function(b){var c=a._workspaceManager.getByName(b.name),c=c?a._workspaceManager.activeWorkspace().copy(b.name,c.id()):a._workspaceManager.activeWorkspace().copy(b.name);a._dataManager.saveWorkspace(c,a._config,function(b){c=c.copy(c.name(),b);c.resetChanged();a._workspaceManager.updateWorkspace(c);a._workspaceManager.changeActiveWorkspace(b)})}))};
epiviz.EpiViz.prototype._registerUiDeleteActiveWorkspace=function(){var a=this;this._controlManager.onDeleteActiveWorkspace().addListener(new epiviz.events.EventListener(function(){a._dataManager.deleteWorkspace(a._workspaceManager.activeWorkspace());a._workspaceManager.deleteActiveWorkspace()}))};epiviz.EpiViz.prototype._registerUiRevertActiveWorkspace=function(){var a=this;this._controlManager.onRevertActiveWorkspace().addListener(new epiviz.events.EventListener(function(){a._workspaceManager.revertActiveWorkspace()}))};
epiviz.EpiViz.prototype._registerUiLoginLinkClicked=function(){var a=this;this._controlManager.onLoginLinkClicked().addListener(new epiviz.events.EventListener(function(){a._userManager.toggleLogin()}))};epiviz.EpiViz.prototype._registerUiSearchWorkspaces=function(){var a=this;this._controlManager.onSearchWorkspaces().addListener(new epiviz.events.EventListener(function(b){a._dataManager.getWorkspaces(function(a){b.callback(a)},b.searchTerm,b.searchTerm)}))};
epiviz.EpiViz.prototype._registerUiActiveWorkspaceChanged=function(){var a=this;this._controlManager.onActiveWorkspaceChanged().addListener(new epiviz.events.EventListener(function(b){var c=function(){b.newValue.id&&!a._workspaceManager.get(b.newValue.id)?a._dataManager.getWorkspaces(function(c){for(var d=null,f=0;f<c.length;++f){var n=epiviz.workspaces.Workspace.fromRawObject(c[f],a._chartFactory,a._config);if(null===n.id()){d=n;break}}d&&a._workspaceManager.changeActiveWorkspace(b.newValue.id,d)},
b.newValue.name,b.newValue.id):a._workspaceManager.changeActiveWorkspace(b.newValue.id)};epiviz.workspaces.UserManager.USER_STATUS.loggedIn&&!a._workspaceManager.activeWorkspaceChanging()&&a._workspaceManager.activeWorkspace().changed()?(new epiviz.ui.controls.MessageDialog("Discard workspace changes",{Yes:function(){c()},No:function(){b.cancel()}},"There are unsaved changes in the current workspace. Do you wish to discard them?",epiviz.ui.controls.MessageDialog.Icon.QUESTION)).show():c()}))};
epiviz.EpiViz.prototype._registerUiSearch=function(){var a=this;this._controlManager.onSearch().addListener(new epiviz.events.EventListener(function(b){a._dataManager.search(function(a){b.callback(a)},b.searchTerm)}))};
epiviz.EpiViz.prototype._registerChartRequestHierarchy=function(){var a=this;this._chartManager.onChartRequestHierarchy().addListener(new epiviz.events.EventListener(function(b){var c={};c[b.id]=b.args;a._dataManager.getHierarchy(c,function(b,c){a._chartManager.updateCharts(void 0,c,[b])})}))};
epiviz.EpiViz.prototype._registerChartPropagateHierarchySelection=function(){var a=this;this._chartManager.onChartPropagateHierarchyChanges().addListener(new epiviz.events.EventListener(function(b){var c={};c[b.id]=b.args;a._dataManager.propagateHierarchyChanges(c,function(b,c){a._chartManager.updateCharts(void 0,c,[b])})}))};epiviz.EpiViz.prototype._registerUiSettingsChanged=function(){var a=this;this._workspaceManager.onUiChartSettingsChanged().addListener(new epiviz.events.EventListener(function(b){a._dataManager.updateChartSettings(b)}))};
epiviz.EpiViz.prototype._registerDataAddMeasurements=function(){var a=this;this._dataManager.onRequestAddMeasurements().addListener(new epiviz.events.EventListener(function(b){try{a._measurementsManager.addMeasurements(b.measurements),b.result.success=!0}catch(c){b.result.success=!1,b.result.errorMessage=c.toString()}}))};
epiviz.EpiViz.prototype._registerDataRemoveMeasurements=function(){var a=this;this._dataManager.onRequestRemoveMeasurements().addListener(new epiviz.events.EventListener(function(b){try{a._measurementsManager.removeMeasurements(b.measurements),b.result.success=!0}catch(c){b.result.success=!1,b.result.errorMessage=c.toString()}}))};
epiviz.EpiViz.prototype._registerDataAddChart=function(){var a=this;this._dataManager.onRequestAddChart().addListener(new epiviz.events.EventListener(function(b){try{var c=a._chartFactory.get(b.type),e=a._addChart(c,b.visConfigSelection);b.result.success=!0;b.result.value={id:e}}catch(d){b.result.success=!1,b.result.errorMessage=d.toString()}}))};
epiviz.EpiViz.prototype._registerDataRemoveChart=function(){var a=this;this._dataManager.onRequestRemoveChart().addListener(new epiviz.events.EventListener(function(b){try{a._chartManager.removeChart(b.id),b.result.success=!0}catch(c){b.result.success=!1,b.errorMessage=c.toString()}}))};
epiviz.EpiViz.prototype._registerPrintWorkspace=function(){this._dataManager.onRequestPrintWorkspace().addListener(new epiviz.events.EventListener(function(a){try{(new epiviz.ui.PrintManager(a.chartId,a.fileName,a.fileType)).print(),a.result.success=!0}catch(b){a.result.success=!1,a.errorMessage=b.toString()}}))};
epiviz.EpiViz.prototype._registerDataSetChartSettings=function(){var a=this;this._dataManager.onRequestSetChartSettings().addListener(new epiviz.events.EventListener(function(b){try{a._chartManager.setChartSettings(b.chartId,b.settings,b.colorMap),b.result.success=!0}catch(c){b.result.success=!1,b.result.errorMessage=c.toString()}}))};
epiviz.EpiViz.prototype._registerDataGetChartSettings=function(){var a=this;this._dataManager.onRequestGetChartSettings().addListener(new epiviz.events.EventListener(function(b){try{a._chartManager.getChartSettings(b.chartId),b.result.success=!0}catch(c){b.result.success=!1,b.result.errorMessage=c.toString()}}))};
epiviz.EpiViz.prototype._registerDataGetAvailableCharts=function(){var a=this;this._dataManager.onRequestGetChartSettings().addListener(new epiviz.events.EventListener(function(b){try{b.result.value=[],a._chartFactory.foreach(function(a,c){b.result.value.push({chartName:a,customSettings:c.customSettingsDefs(),colorMap:c.defaultColors()._colors})}),b.result.success=!0}catch(c){b.result.success=!1,b.result.errorMessage=c.toString()}}))};
epiviz.EpiViz.prototype._registerDataAddSeqInfos=function(){var a=this;this._dataManager.onRequestAddSeqInfos().addListener(new epiviz.events.EventListener(function(b){try{a._locationManager.addSeqInfos(b.seqInfos),b.result.success=!0}catch(c){b.result.success=!1,b.errorMessage=c.toString()}}))};
epiviz.EpiViz.prototype._registerDataRemoveSeqNames=function(){var a=this;this._dataManager.onRequestRemoveSeqNames().addListener(new epiviz.events.EventListener(function(b){try{a._locationManager.removeSeqNames(b.seqNames),b.result.success=!0}catch(c){b.result.success=!1,b.errorMessage=c.toString()}}))};
epiviz.EpiViz.prototype._registerDataNavigate=function(){var a=this;this._dataManager.onRequestNavigate().addListener(new epiviz.events.EventListener(function(b){try{a._locationManager.changeCurrentLocation(b.range),b.result.success=!0}catch(c){b.result.success=!1,b.errorMessage=c.toString()}}))};
epiviz.EpiViz.prototype._registerDataRedraw=function(){var a=this;this._dataManager.onRequestRedraw().addListener(new epiviz.events.EventListener(function(b){try{var c=a._locationManager.currentLocation();a._locationManager.changeCurrentLocation(c);b.result.success=!0;a._chartManager.updateDataStructureCharts()}catch(e){b.result.success=!1,b.errorMessage=e.toString()}}))};
epiviz.EpiViz.prototype._registerDataGetCurrentLocation=function(){var a=this;this._dataManager.onRequestCurrentLocation().addListener(new epiviz.events.EventListener(function(b){try{var c=a._locationManager.currentLocation();b.result.value={seqName:c.seqName(),start:c.start(),end:c.end()};b.result.success=!0}catch(e){b.result.success=!1,b.errorMessage=e.toString()}}))};epiviz.EpiViz.prototype._registerWorkspacesLoaded=function(){this._workspaceManager.onWorkspacesLoaded().addListener(new epiviz.events.EventListener(function(a){}))};
epiviz.EpiViz.prototype._registerActiveWorkspaceChanged=function(){var a=this;this._workspaceManager.onActiveWorkspaceChanged().addListener(new epiviz.events.EventListener(function(b){a._workspaceManager.startChangingActiveWorkspace();a._controlManager.updateSelectedWorkspace({id:b.newValue.id(),name:b.newValue.name()});a._locationManager.changeCurrentLocation(b.newValue.range());a._measurementsManager.removeMeasurements(a._measurementsManager.computedMeasurements());a._measurementsManager.addMeasurements(b.newValue.computedMeasurements());
a._chartManager.clear();b=b.newValue.charts();for(var c in b)if(b.hasOwnProperty(c))for(var e=0;e<b[c].length;++e)a._addChart(b[c][e].type,b[c][e].properties.visConfigSelection,b[c][e].id,b[c][e].properties.copy());a._workspaceManager.endChangingActiveWorkspace()}))};epiviz.EpiViz.prototype._registerActiveWorkspaceContentChanged=function(){var a=this;this._workspaceManager.onActiveWorkspaceContentChanged().addListener(new epiviz.events.EventListener(function(b){a._cookieManager.saveWorkspace(b,a._config)}))};
epiviz.EpiViz.prototype._registerLocationChanged=function(){var a=this;this._locationManager.onCurrentLocationChanged().addListener(new epiviz.events.EventListener(function(b){a._chartManager.dataWaitStart(void 0,function(a){return a.displayType()!=epiviz.ui.charts.VisualizationType.DisplayType.DATA_STRUCTURE});var c=a._chartManager.chartsMeasurements();a._dataManager.getData(b.newValue,c,function(c,d){a._chartManager.updateCharts(b.newValue,d,[c])})}))};
epiviz.ui.controls.VisConfigSelection=function(a,b,c,e,d,f,n,h){this.measurements=a;this.datasource=b;this.datasourceGroup=c;this.dataprovider=e;this.annotation=d;this.defaultChartType=f;this.minSelectedMeasurements=n||1;this.customData=h};
epiviz.ui.controls.DataTable=function(a,b,c,e,d,f){epiviz.ui.controls.Control.call(this,a);this._columns=b;this._rows=c;this._rowsArray=[];var n=this;this._rows.foreach(function(a){n._rowsArray.push(a)});this._rowParser=e;this._multiselect=d||!1;this._showColumnSelector=f||!1;this._columnSelector=this._table=null;this._selectedIndices=[];this._selectedIndicesMap={};this._lastSelection=this._deselectList=this._selectList=null};epiviz.ui.controls.DataTable.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.Control.prototype);
epiviz.ui.controls.DataTable.constructor=epiviz.ui.controls.DataTable;epiviz.ui.controls.DataTable.ColumnType={STRING:"string",NUMBER:"number",BOOLEAN:"boolean"};
epiviz.ui.controls.DataTable.prototype.initialize=function(){this._container.append('<div class="epiviz-data-table"><table style="width: 100%!important;"><thead></thead><tbody></tbody><tfoot></tfoot></table></div>');this._table=this._container.find("table");var a=this._table.find("thead"),b=this._table.find("tfoot"),c=this._table.find("tbody"),e=sprintf("<tr><th>%s</th></tr>",this._columns.join("</th><th>"));a.append(e);b.append(e);var d=this;this._rows.foreach(function(a){for(var b="",e=0;e<d._columns.length;++e)b+=
sprintf("<td>%s</td>",d._rowParser(a,d._columns[e]));c.append(sprintf("<tr>%s</tr>",b))});b=Array(this._columns.length);for(a=0;a<this._columns.length;++a)b[a]={type:"text",bRegex:!0,bSmart:!0};this._table.dataTable({bJQueryUI:!0,sDom:'<"H"lfr>Tt<"F"ip>',oTableTools:{sRowSelect:this._multiselect?"multi":"single",aButtons:[],fnPreRowSelect:function(a,b,c){return d._preRowSelect(this,a,b,c)},fnRowSelected:function(a){return d._select(this,a)},fnRowDeselected:function(a){return d._select(this,a)}}}).columnFilter({aoColumns:b});
b=-1;for(a=0;a<this._columns.length;++a)this._columns[a].isVisible&&++b,this._table.fnSetColumnVis(a,this._columns[a].isVisible),this._columns[a].defaultFilter&&(this._table.fnFilter(this._columns[a].defaultFilter,a,!0,!0),this._table.find("tfoot").find(sprintf("th:eq(%s)",b)).find("input").removeClass("search_init").val(this._columns[a].defaultFilter));this._container.find(".ui-buttonset").first().attr("style","position: absolute!important;");if(this._showColumnSelector){this._container.find(".fg-toolbar").first().append(sprintf('<div style="float: right; margin-right: 5px;"><label>Selected Columns: </label><select class="%s" multiple="multiple" style=""><option value="-1">All</option></select></div>',
"epiviz-data-table-column-selector"));this._columnSelector=this._container.find(".epiviz-data-table-column-selector");for(a=0;a<this._columns.length;++a)b=sprintf('<option value="%s"%s%s>%s</option>',a,this._columns[a].isVisible?' selected="selected"':"",this._columns[a].isFixed?' disabled="disabled"':"",this._columns[a].name),this._columnSelector.append(b);this._columnSelector.dropdownchecklist({width:"80px",firstItemChecksAll:!0,onComplete:function(a){d._selectColumns(a)}})}};
epiviz.ui.controls.DataTable.prototype.selectedIndices=function(){return this._selectedIndices||[]};epiviz.ui.controls.DataTable.prototype.selectedRows=function(){if(!this._selectedIndices)return[];for(var a=Array(this._selectedIndices.length),b=0;b<this._selectedIndices.length;++b)a[b]=this._rowsArray[this._selectedIndices[b]];return a};
epiviz.ui.controls.DataTable.prototype._preRowSelect=function(a,b,c,e){b&&(this._selectList=this._deselectList=null,b.shiftKey&&1==c.length?(this._deselectList=a.fnGetSelected(),this._lastSelection||(this._lastSelection=c[0]),this._selectList=this._getRangeOfRows(this._lastSelection,c[0])):(this._lastSelection=c[0],b.ctrlKey||b.metaKey||(this._deselectList=a.fnGetSelected(),e||(this._selectList=c))));return!0};
epiviz.ui.controls.DataTable.prototype._getRangeOfRows=function(a,b){var c=this._table.fnGetPosition(a),e=this._table.fnGetPosition(b),d=this._table.fnSettings(),c=$.inArray(c,d.aiDisplay),e=$.inArray(e,d.aiDisplay),f=[];if(0<=c&&0<=e)for(var n=Math.min(c,e);n<=Math.max(c,e);++n)f.push(d.aoData[d.aiDisplay[n]].nTr);return 0<f.length?f:null};
epiviz.ui.controls.DataTable.prototype._select=function(a,b){var c;this._deselectList&&(c=this._deselectList,this._deselectList=null,a.fnDeselect(c));this._selectList&&(c=this._selectList,!this._multiselect&&0<c.length&&(c=[c[c.length-1]]),this._selectList=null,a.fnSelect(c));c=a.fnGetSelected();var e=Array(c.length),d={},f;for(f=0;f<c.length;++f)e[f]=this._table.fnGetPosition(c[f]),d[e[f]]=!0;for(f=0;f<this._selectedIndices.length;++f)d[this._selectedIndices[f]]||(delete this._selectedIndicesMap[this._selectedIndices[f]],
this._selectedIndices.splice(f,1),--f);for(f=0;f<e.length;++f)this._selectedIndicesMap[e[f]]||(this._selectedIndicesMap[e[f]]=!0,this._selectedIndices.push(e[f]));return!0};epiviz.ui.controls.DataTable.prototype._selectColumns=function(a){var b={},c;for(c=0;c<a.options.length;++c)a.options[c].selected&&a.options[c].value&&(b[parseInt(a.options[c].value)]=!0);for(c=0;c<this._columns.length;++c)this._table.fnSetColumnVis(c,b[c]||this._columns[c].isFixed)};
epiviz.ui.controls.DataTable.Column=function(a,b,c,e,d,f){this.id=a;this.name=b;this.type=c;this.isVisible=!e;this.isFixed=d||!1;this.defaultFilter=f||""};epiviz.ui.controls.DataTable.Column.prototype.toString=function(){return this.name};epiviz.ui.controls.Wizard=function(a,b,c,e,d,f,n){epiviz.ui.controls.Dialog.call(this,a,b);this._steps=c;this._initialData=e;this._width=d;this._height=f;this._showTabs=n||!1;this._tabs=null;this._initialize()};epiviz.ui.controls.Wizard.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.Dialog.prototype);
epiviz.ui.controls.Wizard.constructor=epiviz.ui.controls.Wizard;
epiviz.ui.controls.Wizard.prototype._initialize=function(){var a=this;this._dialog=$("#"+this._id);this._dialog.append('<div id="wizardDialog" class="wizard-dialog"><div class="wizard-tabs"><ul class="wizard-tabs-title-list"></ul></div></div>');this._tabs=this._dialog.find(".wizard-tabs");for(var b=this._tabs.find(".wizard-tabs-title-list"),c=0;c<this._steps.length;++c)b.append(sprintf('<li><a href="#%s-tab-%s">%s</a></li>',this._id,c,this._steps[c].title())),this._tabs.append(sprintf('<div id="%s-tab-%s"></div>',
this._id,c));this._showTabs||(b.css("visibility","hidden"),b.css("position","absolute"));this._tabs.tabs({activate:function(b,c){a._tabActivate(c)},disabled:epiviz.utils.range(this._steps.length-1,1)});this._dialog.dialog({autoOpen:!1,resizable:!0,width:this._width||void 0,height:this._height||void 0,buttons:{Back:function(){var b=a._tabs.tabs("option","active");0!=b&&(a._tabs.tabs("option","disabled",epiviz.utils.range(a._steps.length-b,b)),a._tabs.tabs("option","active",b-1))},Next:function(){var b=
a._tabs.tabs("option","active"),c=a._steps[b].next();c.error?(new epiviz.ui.controls.MessageDialog("Error",{Ok:function(){}},c.error,epiviz.ui.controls.MessageDialog.Icon.ERROR)).show():(a._steps[b+1].initialize($(sprintf("#%s-tab-%s",a._id,b+1)),c.data),a._tabs.tabs("option","disabled",epiviz.utils.range(a._steps.length-b-2,b+2)),a._tabs.tabs("option","active",b+1))},Finish:function(){var b=a._steps[a._steps.length-1].next();b.error?(new epiviz.ui.controls.MessageDialog("Error",{Ok:function(){}},
b.error,epiviz.ui.controls.MessageDialog.Icon.ERROR)).show():(a._handlers.finish&&a._handlers.finish(b.data),$(this).dialog("close"))},Cancel:function(){a._handlers.close&&a._handlers.close();$(this).dialog("close")}},modal:!0});1<this._steps.length?(this._dialog.parent().find('button:contains("Finish")').button("disable"),this._dialog.parent().find('button:contains("Next")').button("enable")):(this._dialog.parent().find('button:contains("Finish")').button("enable"),this._dialog.parent().find('button:contains("Next")').button("disable"));
this._steps[0].initialize($(sprintf("#%s-tab-0",a._id)),this._initialData);this._dialog.css("overflow","visible")};
epiviz.ui.controls.Wizard.prototype._tabActivate=function(a){a=this._tabs.tabs("option","active");var b=this._dialog.parent().find('button:contains("Finish")'),c=this._dialog.parent().find('button:contains("Next")');a==this._steps.length-1?(c.button("disable"),b.button("enable")):(c.button("enable"),b.button("disable"));this._tabs.tabs("option","disabled",epiviz.utils.range(this._steps.length-a-1,a+1))};
epiviz.ui.controls.Wizard.prototype.show=function(){var a=this;this._dialog.dialog("open");this._dialog.dialog("option","position","center");this._dialog.dialog({close:function(b,c){$(this).remove();a._dialog=null}})};epiviz.ui.controls.Wizard.Step=function(){};epiviz.ui.controls.Wizard.Step.prototype.initialize=function(a,b){};epiviz.ui.controls.Wizard.Step.prototype.next=function(){};epiviz.ui.controls.Wizard.Step.prototype.title=function(){};
epiviz.ui.controls.DatasourceGroupWizardStep=function(){this._data=this._dataTable=null};
epiviz.ui.controls.DatasourceGroupWizardStep.prototype.initialize=function(a,b){this._data=b;a.find(".epiviz-data-table").remove();var c=[new epiviz.ui.controls.DataTable.Column("datasourceGroup","Data Source Group",epiviz.ui.controls.DataTable.ColumnType.STRING)],e={};b.measurements.foreach(function(a){if(!b.dataprovider||b.dataprovider==a.dataprovider()){if(b.annotation)for(var c in b.annotation)if(b.annotation.hasOwnProperty(c)&&(!a.annotation()||a.annotation()[c]!=b.annotation[c]))return;e[a.datasourceGroup()]=
!0}});this._dataTable=new epiviz.ui.controls.DataTable(a,c,new epiviz.utils.IterableArray(Object.keys(e)),function(a){return a});this._dataTable.initialize()};
epiviz.ui.controls.DatasourceGroupWizardStep.prototype.next=function(){var a=this._dataTable?this._dataTable.selectedRows():[];if(0==a.length)return{error:"No rows selected"};this._data.datasourceGroup=a[0];return{data:new epiviz.ui.controls.VisConfigSelection(this._data.measurements.subset(function(b){return b.datasourceGroup()==a[0]}),this._data.datasource,this._data.datasourceGroup,this._data.dataprovider,this._data.annotation?epiviz.utils.mapCopy(this._data.annotation):this._data.annotation,this._data.defaultChartType,
this._data.minSelectedMeasurements,this._data.customData)}};epiviz.ui.controls.DatasourceGroupWizardStep.prototype.title=function(){return"Select Datasource Group"};epiviz.ui.controls.MeaurementsWizardStep=function(){this._measurements=this._data=this._dataTable=null};
epiviz.ui.controls.MeaurementsWizardStep.prototype.initialize=function(a,b){this._data=b;a.find(".epiviz-data-table").remove();var c=epiviz.ui.controls.DataTable.ColumnType,e=[new epiviz.ui.controls.DataTable.Column("id","Id",c.STRING,!0),new epiviz.ui.controls.DataTable.Column("name","Name",c.STRING,!1,!0),new epiviz.ui.controls.DataTable.Column("type","Type",c.STRING,!0),new epiviz.ui.controls.DataTable.Column("datasourceId","Data Source",c.STRING,!1),new epiviz.ui.controls.DataTable.Column("datasourceGroup",
"Data Source Group",c.STRING,!0),new epiviz.ui.controls.DataTable.Column("dataprovider","Data Provider",c.STRING,!1),new epiviz.ui.controls.DataTable.Column("formulaStr","Formula",c.STRING,!0)],d=[],f={};b.measurements.foreach(function(a){a=a.annotation();if(void 0!=a)for(var b in a)!a.hasOwnProperty(b)||b in f||(d.push(b),f[b]=!0)});d.sort();e=e.concat(d.map(function(a){return new epiviz.ui.controls.DataTable.Column("[anno] "+a,a,c.STRING,!0)}));this._measurements=b.measurements.subset(function(a){if(b.datasource&&
b.datasource!=a.datasourceId()||b.datasourceGroup&&b.datasourceGroup!=a.datasourceGroup()||b.dataprovider&&b.dataprovider!=a.dataprovider())return!1;if(b.annotation)for(var c in b.annotation)if(b.annotation.hasOwnProperty(c)&&(!a.annotation()||a.annotation()[c]!=b.annotation[c]))return!1;return!0});this._dataTable=new epiviz.ui.controls.DataTable(a,e,this._measurements,function(a,b){var c=null;if(epiviz.utils.stringStartsWith(b.id,"[anno] "))c="",void 0!=a.annotation()&&(c=a.annotation()[b.name]||
"");else switch(b.id){case "annotation":c=epiviz.utils.mapJoin(a.annotation(),": ","<br />");break;default:c=a[b.id]()}return 0===c||c?c:""},!0,!0);this._dataTable.initialize()};
epiviz.ui.controls.MeaurementsWizardStep.prototype.next=function(){var a=this._dataTable?this._dataTable.selectedRows():[];if(a.length<this._data.minSelectedMeasurements)return{error:"Minimum selected rows required is "+this._data.minSelectedMeasurements};for(var b=new epiviz.measurements.MeasurementSet,c=0;c<a.length;++c)b.add(a[c]);this._data.measurements=b;return{data:this._data}};epiviz.ui.controls.MeaurementsWizardStep.prototype.title=function(){return"Select Measurements"};
epiviz.ui.controls.MessageDialog=function(a,b,c,e){epiviz.ui.controls.Dialog.call(this,a,b);this._message=c;this._icon=e||epiviz.ui.controls.MessageDialog.Icon.INFO};epiviz.ui.controls.MessageDialog.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.Dialog.prototype);epiviz.ui.controls.MessageDialog.constructor=epiviz.ui.controls.MessageDialog;epiviz.ui.controls.MessageDialog.Icon={INFO:"info",ERROR:"error",QUESTION:"question"};
epiviz.ui.controls.MessageDialog.prototype.show=function(){epiviz.ui.controls.Dialog.prototype.show.call(this);var a=epiviz.ui.controls.MessageDialog.Icon;if(!this._dialog){var b=this;this._dialog=$("#"+this._id);this._dialog.css("display","inline");this._dialog.append(sprintf('<div class="ui-state-%s ui-corner-all" style="margin: 5px; padding: 5px; height: auto;"><div class="ui-icon ui-icon-%s" style="float: left; margin-right: 5px;"></div><div class="dialog-text">%s</div></div>',this._icon==a.ERROR?
"error":"highlight",this._icon==a.ERROR?"alert":"info",this._message));var c={},e;for(e in this._handlers)this._handlers.hasOwnProperty(e)&&function(a){c[a]=function(){b._handlers[a]();$(this).dialog("close")}}(e);this._dialog.dialog({autoOpen:!1,resizable:!1,buttons:c,modal:!0});this._dialog.dialog({close:function(a,c){$(this).remove();b._dialog=null}})}this._dialog.dialog("open");this._dialog.dialog("option","position","center")};
epiviz.ui.controls.ColorPickerDialog=function(a,b,c,e){epiviz.ui.controls.Dialog.call(this,"Pick Colors",a);this._dialog=$("#"+this._id);this._dialog.append('<div class="color-picker-form" action="" style="width: 420px;"><div class="chart-picker" style="float: right;"></div></div>');var d=this._dialog.find(".color-picker-form");a="";for(var f=0;f<b.length;++f){var n=sprintf("color-%s",f);a+=sprintf('<tr><td><label>%s:&nbsp;</label></td><td><input type="text" name="%s" class="colorwell %s" value="%s" /></td></tr>',
b[f],n,n,0<=e.keyColorIndex(b[f])?e.getByKey(b[f]):e.get(f))}d.append(sprintf('<table class="color-picker-table">%s</table>',a));var h=$.farbtastic(sprintf("#%s .chart-picker",this._id)),g=$(sprintf("#%s .chart-picker",this._id)).css("opacity",.25),l;$(sprintf("#%s .colorwell",this._id)).each(function(){h.linkTo(this);$(this).css("opacity",.75)}).focus(function(){l&&$(l).css("opacity",.75).removeClass("colorwell-selected");h.linkTo(this);g.css("opacity",1);$(l=this).css("opacity",1).addClass("colorwell-selected")});
d.append('<select class="palettes-selector"></select>');var m=d.find(".palettes-selector"),p={};c&&c.forEach(function(a){m.append(sprintf('<option value="%s"%s>%s</option>',a.id(),a.id()==e.id()?' selected="selected"':"",a.name()));p[a.id()]=a});e.id()in p||(m.prepend(sprintf('<option value="%s" selected="selected">%s</option>',e.id(),e.name())),p[e.id()]=e);m.selectmenu({style:"popup",width:"200",maxHeight:"150",menuWidth:"200"});var t=function(){for(var a=d.find(".colorwell"),b=0;b<a.length;++b)h.linkTo($(a[b])),
h.setColor(e.get(b));l&&h.linkTo(l)};m.change(function(){e=p[$(this).val()];t()});var r=this;this._dialog.dialog({autoOpen:!1,resizable:!1,width:"440",buttons:{Ok:function(){var a=d.find(".colorwell"),c=!1,f=[],g;for(g=0;g<e.size();++g)f.push(e.get(g));for(g=0;g<a.length;++g){var h=a[g].value,l=e.keyColorIndex(b[g]);0>l&&(l=g);h!=f[l]&&(c=!0,f[l]=h)}c&&(e=new epiviz.ui.charts.ColorPalette(f,void 0,void 0,e.keyIndices()));r._handlers.ok(e);$(this).dialog("close")},Cancel:function(){r._handlers.cancel();
$(this).dialog("close")},Reset:function(){t();r._handlers.reset()}},modal:!0})};epiviz.ui.controls.ColorPickerDialog.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.Dialog.prototype);epiviz.ui.controls.ColorPickerDialog.constructor=epiviz.ui.controls.ColorPickerDialog;
epiviz.ui.controls.ColorPickerDialog.prototype.show=function(){epiviz.ui.controls.Dialog.prototype.show.call(this);var a=this;this._dialog&&(this._dialog.dialog("open"),this._dialog.dialog("option","position","center"),this._dialog.dialog({close:function(b,c){$(this).remove();a._dialog=null}}))};
epiviz.ui.controls.SaveSvgAsImageDialog=function(a,b,c){epiviz.ui.controls.Dialog.call(this,"Save Chart SVG as Image",a);this._dialog=$("#"+this._id);this._dialog.append('<div class="save-svg-dialog"><label class="dialog-label">Choose file format:</label><br/><br/><div style="position:absolute; right:15px;"><select class="svg-file-format"><option value="pdf" selected="selected">PDF</option><option value="ps" >PS</option><option value="png" >PNG</option><option value="svg">SVG</option><option value="eps">EPS</option></select></div>'+sprintf('<form name="%s-svg-save-form" method="POST">',
this._id)+'<div><input type="hidden" name="svg" /><input type="hidden" name="format" /><br/><br/></div></form></div>');this._chartId=b;this._chartSaverLocation=c;var e=this;this._dialog.dialog({autoOpen:!1,resizable:!1,width:"200",buttons:{Ok:function(){var a=$("#"+e._chartId).find("svg").clone();a.attr("xmlns","http://www.w3.org/2000/svg");a.attr("version","1.1");var b=e._dialog.find(".svg-file-format"),c=document.forms[sprintf("%s-svg-save-form",e._id)];c.action=e._chartSaverLocation;c.svg.value=
$("<div>").append(a).html();c.format.value=b.val();c.submit();e._handlers.ok();$(this).dialog("close")},Cancel:function(){e._handlers.cancel();$(this).dialog("close")}},modal:!0})};epiviz.ui.controls.SaveSvgAsImageDialog.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.Dialog.prototype);epiviz.ui.controls.SaveSvgAsImageDialog.constructor=epiviz.ui.controls.SaveSvgAsImageDialog;
epiviz.ui.controls.SaveSvgAsImageDialog.prototype.show=function(){epiviz.ui.controls.Dialog.prototype.show.call(this);var a=this;this._dialog&&(this._dialog.dialog("open"),this._dialog.dialog("option","position","center"),this._dialog.dialog({close:function(b,c){$(this).remove();a._dialog=null}}))};
epiviz.ui.controls.ComputedMeasurementsDialog=function(a,b,c,e){epiviz.ui.controls.Dialog.call(this,a,b);this._measurements=c;this._chartsMeasurements=e;this._measurementsList=this._maxTextBox=this._minTextBox=this._nameTextBox=this._idTextBox=this._expressionTextBox=null;this._addButtonProperties={text:!1,icons:{primary:"ui-icon ui-icon-plus"}};this._deleteButtonsProperties={text:!1,icons:{primary:"ui-icon ui-icon-trash"}};this._datasourceGroupMeasurements=this._selectedDatasourceGroup=this._tabs=
null;this._addTabs();this._addDialogContents();this._addDatasourceGroupTable(c)};epiviz.ui.controls.ComputedMeasurementsDialog.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.Dialog.prototype);epiviz.ui.controls.ComputedMeasurementsDialog.constructor=epiviz.ui.controls.ComputedMeasurementsDialog;
epiviz.ui.controls.ComputedMeasurementsDialog.prototype.show=function(){epiviz.ui.controls.Dialog.prototype.show.call(this);var a=this;this._dialog&&(this._dialog.dialog("open"),this._dialog.dialog("option","position","center"),this._dialog.dialog({close:function(b,c){$(this).remove();a._dialog=null;a._handlers.close()}}))};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._addDatasourceGroupTable=function(a){var b=this,c=$(sprintf("#datasource-group-tab-%s",this._id)),e="",d={};a.foreach(function(a){a.type()==epiviz.measurements.Measurement.Type.FEATURE&&(a.datasourceGroup()in d||(d[a.datasourceGroup()]=[]),d[a.datasourceGroup()].push(a))});for(var f in d)d.hasOwnProperty(f)&&(e+=sprintf('<tr><td class="center">%s</td></tr>',f));c.append(sprintf('<table style="border-spacing:0; border-collapse:collapse; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: moz-none; -ms-user-select: none; user-select: none; width: 100%%;" class="computed-measurements-dialog-raw-table">%s</table>',
"<thead><tr><th>Data Source Group</th></tr></thead>"+e+"<tfoot><tr><th>Data Source Group</th></tr></tfoot>"));var n=c.find(".computed-measurements-dialog-raw-table").dataTable({bJQueryUI:!0,sDom:'<"H"lfr>Tt<"F"ip>',oTableTools:{sRowSelect:"single",aButtons:[],fnPreRowSelect:function(a,b,c){return!0},fnRowSelected:function(a){a=n.fnGetData(a[0]);b._selectedDatasourceGroup=a[0];b._datasourceGroupMeasurements=d[b._selectedDatasourceGroup]},fnRowDeselected:function(a){n.fnGetData(a[0])==b._selectedDatasourceGroup&&
(b._selectedDatasourceGroup=null,b._datasourceGroupMeasurements=null)}}});c.find(".DTTT_container").css("position","absolute")};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._addTabs=function(){var a=this;this._selectDialog().append('<div id="computedMeasurementsDialog" class="computed-measurements-dialog"><div class="computed-measurements-tabs"><ul>'+sprintf('<li><a href="#datasource-group-tab-%s">Data Source Group</a></li>',this._id)+sprintf('<li><a href="#formula-tab-%s">Expression</a></li>',this._id)+"</ul>"+sprintf('<div id="datasource-group-tab-%s"></div>',this._id)+sprintf('<div id="formula-tab-%s"></div>',
this._id)+"</div></div>");this._tabs=this._selectTabs();this._tabs.tabs({activate:function(b,c){a._tabActivate(c)}})};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._addDialogContents=function(){var a=this;this._selectDialog().dialog({autoOpen:!1,resizable:!0,width:"600",height:"550",buttons:{Back:function(){0!=a._tabs.tabs("option","active")&&a._tabs.tabs("option","active",0)},Next:function(){1!=a._tabs.tabs("option","active")&&a._tabs.tabs("option","active",1)},Add:function(){for(var b=epiviz.utils.ExpressionParser.parse(a._selectExpressionTextBox().val().trim()),c={},e=b.variables(),d=null,f=null,n=[],
h={},g=0;g<e.length;++g){var l=e[g];if(epiviz.utils.stringStartsWith(l,"{")&&epiviz.utils.stringEndsWith(l,"}")){var m=parseInt(l.substring(1,l.length-1)),l=a._datasourceGroupMeasurements[m];c[m]=l;if(null===d||d>l.minValue())d=l.minValue();if(null===f||f<l.maxValue())f=l.maxValue();if(l.metadata())for(m=0;m<l.metadata().length;++m)h[l.metadata()[m]]||(h[l.metadata()[m]]=!0,n.push(l.metadata()[m]))}}e=a._selectMinTextBox().val().trim();h=a._selectMaxTextBox().val().trim();d=e?parseFloat(e):d;f=h?
parseFloat(h):f;e=a._selectIdTextBox().val().trim()||epiviz.utils.generatePseudoGUID(5);b=new epiviz.measurements.Measurement(e,a._selectNameTextBox().val().trim()||"Unnamed ["+e+"]",epiviz.measurements.Measurement.Type.FEATURE,null,a._selectedDatasourceGroup,null,{referredMeasurements:c,expression:b},"any",null,d,f,n);c=a._datasourceGroupMeasurements.length;$(sprintf("#computed-measurement-measurements-%s",a._id)).append(sprintf('<div style="min-height: 30px; padding: 2px;"><div style="margin: 6px; float: left;">%1$s {<b>%2$s</b>}</div><div style="float: right;"><button id="delete-button-%2$s-%3$s" data-measurement="%2$s">Delete</button><button style="" id="measurement-button-%2$s-%3$s" data-measurement="%2$s">Insert %2$s</button></div></div>',
b.name(),c,a._id));$("#measurement-button-"+c+"-"+a._id).button(a._addButtonProperties).click(function(){a._addButtonClick($(this))});$("#delete-button-"+c+"-"+a._id).button(a._deleteButtonsProperties).click(function(){a._deleteButtonClick($(this))});a._datasourceGroupMeasurements.push(b);a._handlers.add(b)},Close:function(){a._handlers.close();$(this).dialog("close")}},modal:!0})};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._addButtonClick=function(a){a=a.data("measurement");var b=this._selectExpressionTextBox();b.val(b.val().trim()+" {"+a+"}")};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._deleteButtonClick=function(a){for(var b=a.data("measurement"),c=this._datasourceGroupMeasurements[b],e=0;e<this._datasourceGroupMeasurements.length;++e){var d=this._datasourceGroupMeasurements[e];if(null!=d&&d!==c&&d.isComputed()&&d.componentMeasurements().contains(c)){a=new epiviz.ui.controls.MessageDialog("Measurement cannot be deleted",{Ok:function(){}},"There are other measurements that depend on the one selected. Please delete those before deleting this.",
epiviz.ui.controls.MessageDialog.Icon.ERROR);a.show();return}}for(var f in this._chartsMeasurements)if(this._chartsMeasurements.hasOwnProperty(f)&&this._chartsMeasurements[f].contains(c)){a=new epiviz.ui.controls.MessageDialog("Measurement cannot be deleted",{Ok:function(){}},"There are charts using the selected measurement. Remove them from the workspace and then try again.",epiviz.ui.controls.MessageDialog.Icon.ERROR);a.show();return}this._datasourceGroupMeasurements[b]=null;a.parent().parent().remove();
this._handlers.remove(c)};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._tabActivate=function(a){if(0!=this._selectTabs().tabs("option","active")&&(a.newPanel.empty(),this._measurementsList=this._maxTextBox=this._minTextBox=this._expressionTextBox=this._nameTextBox=this._idTextBox=null,this._selectedDatasourceGroup)){a.newPanel.append(sprintf('<label for="computed-measurement-key-%1$s"><b>Id:</b></label> <input id="computed-measurement-key-%1$s" class="ui-widget-content ui-corner-all" style="padding: 2px;" type="text"/>&nbsp;<label for="computed-measurement-name-%1$s"><b>Name:</b></label> <input id="computed-measurement-name-%1$s" class="ui-widget-content ui-corner-all" style="padding: 2px;" type="text"/><br /><br /><div id="computed-measurement-measurements-%1$s" style="overflow: auto; max-height: 200px; border-style: solid; border-width: 1px; border-color: #999999;"></div><br/><label for="computed-measurement-min-%1$s"><b>Min:</b></label> <input id="computed-measurement-min-%1$s" class="ui-widget-content ui-corner-all" style="padding: 2px;" type="text"/>&nbsp;<label for="computed-measurement-max-%1$s"><b>Max:</b></label> <input id="computed-measurement-max-%1$s" class="ui-widget-content ui-corner-all" style="padding: 2px;" type="text"/><br/><div style="overflow: hidden; padding: 10px; padding-right: 20px; margin: 0px;"><textarea id="computed-measurement-expr-%1$s" class="ui-widget-content ui-corner-all" style="width: 100%%; height: 55px; padding: 5px; margin: 0; resize: none;"></textarea></div>',this._id));
a=this._selectMeasurementsList();for(var b="",c=0;c<this._datasourceGroupMeasurements.length;++c){var e=this._datasourceGroupMeasurements[c],d="";e.isComputed()&&(d='<button id="delete-button-%2$s-%3$s" data-measurement="%2$s">Delete %2$s</button>');b+=sprintf('<div style="min-height: 30px; padding: 2px;"><div style="margin: 6px; float: left;">%1$s {<b>%2$s</b>}</div><div style="float: right;">'+d+'<button style="" id="measurement-button-%2$s-%3$s" data-measurement="%2$s">Insert %2$s</button></div></div>',
e.name(),c,this._id)}a.append(b);for(var f=this,c=0;c<this._datasourceGroupMeasurements.length;++c)e=this._datasourceGroupMeasurements[c],e.isComputed()&&$("#delete-button-"+c+"-"+this._id).button(this._deleteButtonsProperties).click(function(){f._deleteButtonClick($(this))}),$("#measurement-button-"+c+"-"+this._id).button(this._addButtonProperties).click(function(){f._addButtonClick($(this))});this._selectIdTextBox().watermark("[auto]");this._selectNameTextBox().watermark("[auto]");this._selectMinTextBox().watermark("[auto]");
this._selectMaxTextBox().watermark("[auto]");this._selectExpressionTextBox().watermark("[expression; for example: {0} - {1}]")}};epiviz.ui.controls.ComputedMeasurementsDialog.prototype._selectDialog=function(){this._dialog||(this._dialog=$("#"+this._id));return this._dialog};epiviz.ui.controls.ComputedMeasurementsDialog.prototype._selectExpressionTextBox=function(){this._expressionTextBox||(this._expressionTextBox=$("#computed-measurement-expr-"+this._id));return this._expressionTextBox};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._selectIdTextBox=function(){this._idTextBox||(this._idTextBox=$("#computed-measurement-key-"+this._id));return this._idTextBox};epiviz.ui.controls.ComputedMeasurementsDialog.prototype._selectNameTextBox=function(){this._nameTextBox||(this._nameTextBox=$("#computed-measurement-name-"+this._id));return this._nameTextBox};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._selectMinTextBox=function(){this._minTextBox||(this._minTextBox=$("#computed-measurement-min-"+this._id));return this._minTextBox};epiviz.ui.controls.ComputedMeasurementsDialog.prototype._selectMaxTextBox=function(){this._maxTextBox||(this._maxTextBox=$("#computed-measurement-max-"+this._id));return this._maxTextBox};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._selectTabs=function(){this._tabs||(this._tabs=this._dialog.find(".computed-measurements-tabs"));return this._tabs};epiviz.ui.controls.ComputedMeasurementsDialog.prototype._selectMeasurementsList=function(){this._measurementsList||(this._measurementsList=$("#computed-measurement-measurements-"+this._id));return this._measurementsList};
epiviz.ui.controls.CustomSettingsDialog=function(a,b,c,e){epiviz.ui.controls.Dialog.call(this,a,b);this._customSettingsDefs=c;this._customSettingsValues=epiviz.utils.mapCopy(e)};epiviz.ui.controls.CustomSettingsDialog.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.Dialog.prototype);epiviz.ui.controls.CustomSettingsDialog.constructor=epiviz.ui.controls.CustomSettingsDialog;
epiviz.ui.controls.CustomSettingsDialog.prototype.show=function(){epiviz.ui.controls.Dialog.prototype.show.call(this);var a=epiviz.ui.charts.CustomSetting.Type;if(!this._dialog){var b=this;this._dialog=$("#"+this._id);this._dialog.css("display","inline");var c,e,d,f,n="";for(c=0;c<this._customSettingsDefs.length;++c){e=sprintf("%s-%s",this._id,this._customSettingsDefs[c].id);var h=sprintf('<tr><td><label for="%s">%s</label></td><td style="text-align: right;">%%s</td></tr>',e,this._customSettingsDefs[c].label);
d=null;f=this._customSettingsValues[this._customSettingsDefs[c].id];switch(this._customSettingsDefs[c].type){case a.BOOLEAN:h=sprintf(h,sprintf('<div id="%1$s"><label for="%1$s-true">On</label><input type="radio" id="%1$s-true" name="%1$s" %2$s /><label for="%1$s-false">Off</label><input type="radio" id="%1$s-false" name="%1$s" %3$s /></div>',e,f?'checked="checked"':"",f?"":'checked="checked"'));break;case a.ARRAY:h=sprintf(h,sprintf('<input id="%s" value="%s" class="ui-widget-content ui-corner-all" style="text-align: right; padding: 5px;" />',
e,f.join(",")));break;case a.NUMBER:case a.STRING:h=sprintf(h,sprintf('<input id="%s" value="%s" class="ui-widget-content ui-corner-all" style="text-align: right; padding: 5px;" />',e,f));break;case a.CATEGORICAL:case a.MEASUREMENTS_METADATA:case a.MEASUREMENTS_ANNOTATION:var g="",l=this._customSettingsDefs[c];if(l.possibleValues)for(var m=0;m<l.possibleValues.length;++m)g+=sprintf('<option value="%1$s"%2$s>%1$s</option>',l.possibleValues[m],l.possibleValues[m]==f?'selected="selected"':"");f=sprintf('<select id="%s">%s</select>',
e,g);h=sprintf(h,f)}n+=h}n=sprintf('<div style="margin: 5px; padding: 5px; height: auto;"><table style="width: 100%%;">%s</table></div>',n);this._dialog.append(n);for(c=0;c<this._customSettingsDefs.length;++c)switch(e=sprintf("%s-%s",this._id,this._customSettingsDefs[c].id),d=$("#"+e),f=this._customSettingsValues[this._customSettingsDefs[c].id],this._customSettingsDefs[c].type){case a.BOOLEAN:d.buttonset();break;case a.NUMBER:case a.ARRAY:case a.STRING:d.watermark(this._customSettingsDefs[c].label);
break;case a.CATEGORICAL:case a.MEASUREMENTS_METADATA:case a.MEASUREMENTS_ANNOTATION:d.selectmenu()}this._dialog.dialog({autoOpen:!1,resizable:!1,buttons:{Ok:function(){for(var c=0;c<b._customSettingsDefs.length;++c){e=sprintf("%s-%s",b._id,b._customSettingsDefs[c].id);d=$("#"+e);var f=null;if(d.val()==epiviz.ui.charts.CustomSetting.DEFAULT)f=b._customSettingsDefs[c].defaultValue;else{var g=null;try{switch(b._customSettingsDefs[c].type){case a.BOOLEAN:var h=$("#"+e+" :radio:checked").attr("id"),f=
"true"==h.substr(h.lastIndexOf("-")+1);break;case a.NUMBER:f=d.val()==epiviz.ui.charts.CustomSetting.DEFAULT?b._customSettingsDefs[c].defaultValue:parseFloat(d.val());if(isNaN(f)){g=new epiviz.ui.controls.MessageDialog("Invalid property value",{Ok:function(){}},sprintf('Invalid value for setting "%s" (%s)',b._customSettingsDefs[c].label,b._customSettingsDefs[c].id),epiviz.ui.controls.MessageDialog.Icon.ERROR);g.show();return}break;case a.ARRAY:f=d.val().split(/[\s,]+/g);break;case a.STRING:case a.CATEGORICAL:case a.MEASUREMENTS_METADATA:case a.MEASUREMENTS_ANNOTATION:f=
d.val()}}catch(l){g=new epiviz.ui.controls.MessageDialog("Invalid property value",{Ok:function(){}},sprintf('Invalid value for setting "%s" (%s)',b._customSettingsDefs[c].label,b._customSettingsDefs[c].id),epiviz.ui.controls.MessageDialog.Icon.ERROR);g.show();return}}b._customSettingsValues[b._customSettingsDefs[c].id]=f}b._handlers.ok(b._customSettingsValues);$(this).dialog("close")},Cancel:function(){b._handlers.cancel();$(this).dialog("close")}},modal:!0});this._dialog.dialog({close:function(a,
c){$(this).remove();b._dialog=null}})}this._dialog.dialog("open");this._dialog.dialog("option","position","center")};epiviz.ui.controls.CodeControl=function(a,b,c,e){epiviz.ui.controls.Control.call(this,a,b,c);this._targetObj=e;this._text="// TODO: Your code here\n"};epiviz.ui.controls.CodeControl.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.Control.prototype);epiviz.ui.controls.CodeControl.constructor=epiviz.ui.controls.CodeControl;epiviz.ui.controls.CodeControl.prototype.initialize=function(){};
epiviz.ui.controls.CodeControl.prototype.save=function(){};epiviz.ui.controls.CodeControl.prototype.revert=function(){};epiviz.ui.controls.CodeControl.prototype.text=function(){return this._text};epiviz.ui.controls.CodeControl.prototype.result=function(){return null};epiviz.ui.controls.EditCodeControl=function(a,b,c,e,d,f){epiviz.ui.controls.CodeControl.call(this,a,b,c,e);this._defaultMethod=d;this._editor=null;this._methodsCode={};this._selectedMethod=null;this._hasModifiedMethods=f||!1};
epiviz.ui.controls.EditCodeControl.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.CodeControl.prototype);epiviz.ui.controls.EditCodeControl.constructor=epiviz.ui.controls.EditCodeControl;
epiviz.ui.controls.EditCodeControl.prototype.initialize=function(){if(!this._editor){this._container.append('<div style="float: left; margin-right: 5px;"><select class="obj-methods"></select></div>'+sprintf('<div id="%1$s"><label for="%1$s-true">On</label><input type="radio" id="%1$s-true" name="%1$s" %2$s /><label for="%1$s-false">Off</label><input type="radio" id="%1$s-false" name="%1$s" %3$s /></div>',this.id()+"-switch",this._hasModifiedMethods?'checked="checked"':"",this._hasModifiedMethods?
"":'checked="checked"')+'<br /><div style="overflow-y: scroll; max-height: 500px;"><textarea autofocus="autofocus" class="code-edit"></textarea></div>');this._methodsSelector=this._container.find(".obj-methods");var a=this._container.find("#"+this.id()+"-switch");a.buttonset();var b=this,c=function(a){a=$("#"+b.id()+"-switch :radio:checked").attr("id");a="true"==a.substr(a.lastIndexOf("-")+1);b._editor&&b._editor.setOption("disableInput",!a);b._hasModifiedMethods=a};a.find("#"+this.id()+"-switch-true").on("change",
c);a.find("#"+this.id()+"-switch-false").on("change",c);var e=this._container.find(".code-edit"),a=[],c=this._targetObj,d;for(d in c)$.isFunction(c[d])&&a.push(d);a.sort();for(var f=0;f<a.length;++f){d=a[f];var n=0==f&&!this._defaultMethod||this._defaultMethod==d;this._methodsSelector.append(sprintf('<option value="%s"%s>%s</option>',d,n?' selected="selected"':"",d));n&&(this._text=c[d].toString(),this._selectedMethod=d)}this._methodsSelector.change(function(){b._methodsCode[b._selectedMethod]=b._editor.getValue();
var a=$(this).val(),c=b._methodsCode[a];c||(c=b._targetObj[a].toString(),b._methodsCode[a]=c);b._text=c;b._editor?b._editor.getDoc().setValue(b._text):e.val(b._text);b._selectedMethod=a});e.val(this._text);this._methodsSelector.selectmenu({style:"popup",width:"150",maxHeight:"150",menuWidth:"150"});this._editor=CodeMirror.fromTextArea(this._container.find(".code-edit")[0],{lineNumbers:!0,matchBrackets:!0,continueComments:"Enter",extraKeys:{"Ctrl-Q":"toggleComment"},autofocus:!0});this._editor.setOption("disableInput",
!this._hasModifiedMethods)}};epiviz.ui.controls.EditCodeControl.prototype.save=function(){this._methodsCode[this._selectedMethod]=this._editor.getValue();this._text=this._editor.getValue()};epiviz.ui.controls.EditCodeControl.prototype.revert=function(){this._editor&&this._editor.setOption("value",this._text)};
epiviz.ui.controls.EditCodeControl.prototype.modifiedMethods=function(){var a={},b;for(b in this._methodsCode)this._methodsCode.hasOwnProperty(b)&&this._methodsCode[b]!=this._targetObj[b].toString()&&(a[b]=this._methodsCode[b]);return a};epiviz.ui.controls.EditCodeControl.prototype.result=function(){return{hasModifiedMethods:this._hasModifiedMethods,modifiedMethods:this._hasModifiedMethods?this.modifiedMethods():{}}};
epiviz.ui.controls.MarkerCodeControl=function(a,b,c,e,d,f,n){epiviz.ui.controls.CodeControl.call(this,a,b,c,e);this._markEditor=this._editor=null;this._editorText=d;this._markText=f;this._enabled=n||!1};epiviz.ui.controls.MarkerCodeControl.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.CodeControl.prototype);epiviz.ui.controls.MarkerCodeControl.constructor=epiviz.ui.controls.MarkerCodeControl;
epiviz.ui.controls.MarkerCodeControl.prototype.initialize=function(){if(!this._editor){this._container.append(sprintf('<div id="%1$s"><label for="%1$s-true">On</label><input type="radio" id="%1$s-true" name="%1$s" %2$s /><label for="%1$s-false">Off</label><input type="radio" id="%1$s-false" name="%1$s" %3$s /></div>',this.id()+"-switch",this._enabled?'checked="checked"':"",this._enabled?"":'checked="checked"')+'<br /><div><label><b>Pre-mark Method</b></label></div><br /><div style="overflow-y: scroll; max-height: 250px;"><textarea autofocus="autofocus" class="pre-filter-code"></textarea></div><br/><div><label><b>Mark Method</b></label></div><br/><div style="overflow-y: scroll; max-height: 250px;"><textarea autofocus="autofocus" class="filter-code"></textarea></div>');
var a=this._container.find("#"+this.id()+"-switch");a.buttonset();var b=this,c=function(a){a=$("#"+b.id()+"-switch :radio:checked").attr("id");a="true"==a.substr(a.lastIndexOf("-")+1);b._editor&&b._editor.setOption("disableInput",!a);b._markEditor&&b._markEditor.setOption("disableInput",!a);b._enabled=a};a.find("#"+this.id()+"-switch-true").on("change",c);a.find("#"+this.id()+"-switch-false").on("change",c);a=this._container.find(".pre-filter-code");a.val(this._editorText);c=this._container.find(".filter-code");
c.val(this._markText);this._editor=CodeMirror.fromTextArea(a[0],{lineNumbers:!0,matchBrackets:!0,continueComments:"Enter",extraKeys:{"Ctrl-Q":"toggleComment"},autofocus:!0});this._editor.setOption("disableInput",!this._enabled);this._markEditor=CodeMirror.fromTextArea(c[0],{lineNumbers:!0,matchBrackets:!0,continueComments:"Enter",extraKeys:{"Ctrl-Q":"toggleComment"},autofocus:!0});this._markEditor.setOption("disableInput",!this._enabled)}};
epiviz.ui.controls.MarkerCodeControl.prototype.save=function(){this._editor&&(this._editorText=this._editor.getValue(),this._markText=this._markEditor.getValue())};epiviz.ui.controls.MarkerCodeControl.prototype.revert=function(){this._editor&&this._editor.setOption("value",this._editorText);this._markEditor&&this._markEditor.setOption("value",this._markText)};
epiviz.ui.controls.MarkerCodeControl.prototype.result=function(){return{enabled:this._enabled,preMark:this._enabled?this._editorText:null,mark:this._enabled?this._markText:null}};
epiviz.ui.controls.CodeDialog=function(a,b,c){epiviz.ui.controls.Dialog.call(this,a,b);this._controlCreators=c;this._dialog=$("#"+this._id);this._controls=[];var e=this;this._dialog.append('<div class="code-tabs"><ul></ul></div>');var d=this._dialog.find(".code-tabs"),f=d.find("ul");this._controlCreators.forEach(function(a,b){var c=e._id+"-code-tab-"+b;d.append(sprintf('<div id="%s"></div>',c));var l=d.find("#"+c),l=a(l);f.append(sprintf('<li><a href="#%s">%s</a></li>',c,l.title()));e._controls.push(l)});
d.tabs({activate:function(a,b){e._tabActivate(d)}});this._dialog.dialog({autoOpen:!1,resizable:!1,width:"800",buttons:{Save:function(){var a=[];e._controls.forEach(function(b){b.save();a.push(b.result())});e._handlers.save(a);$(this).dialog("close")},Cancel:function(){e._controls.forEach(function(a){a.revert()});e._handlers.cancel();$(this).dialog("close")}},modal:!0});this._dialog.dialog("option","position","center")};epiviz.ui.controls.CodeDialog.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.Dialog.prototype);
epiviz.ui.controls.CodeDialog.constructor=epiviz.ui.controls.CodeDialog;epiviz.ui.controls.CodeDialog.prototype.show=function(){epiviz.ui.controls.Dialog.prototype.show.call(this);this._dialog.dialog("open");this._controls[0].initialize();this._dialog.dialog("option","position","center")};epiviz.ui.controls.CodeDialog.prototype._tabActivate=function(a){a=a.tabs("option","active");this._controls[a].initialize();this._dialog.dialog("option","position","center")};epiviz.plugins={};
epiviz.plugins.charts={};epiviz.plugins.charts.BlocksTrack=function(a,b,c){epiviz.ui.charts.Track.call(this,a,b,c);this._initialize()};epiviz.plugins.charts.BlocksTrack.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Track.prototype);epiviz.plugins.charts.BlocksTrack.constructor=epiviz.plugins.charts.BlocksTrack;epiviz.plugins.charts.BlocksTrack.prototype._initialize=function(){epiviz.ui.charts.Track.prototype._initialize.call(this);this._svg.classed("blocks-track",!0)};
epiviz.plugins.charts.BlocksTrack.prototype.draw=function(a,b,c,e){epiviz.ui.charts.Track.prototype.draw.call(this,a,b,c,e);b=this._lastData;a=this._lastRange;return b&&a&&b.isReady()?this._drawBlocks(a,b,c||0,e||1):[]};
epiviz.plugins.charts.BlocksTrack.prototype._drawBlocks=function(a,b,c,e){var d=epiviz.ui.charts.Axis,f=a.start(),n=a.end(),h=this.width(),g=this.height(),l=this.margins();this.measurements();var m=this.colors(),p=this.customSettingsValues()[epiviz.plugins.charts.BlocksTrackType.CustomSettings.MIN_BLOCK_DISTANCE],t=this.customSettingsValues()[epiviz.plugins.charts.BlocksTrackType.CustomSettings.BLOCK_COLOR_BY],r=this.customSettingsValues()[epiviz.plugins.charts.BlocksTrackType.CustomSettings.USE_COLOR_BY],
q=d3.scale.linear().domain([f,n]).range([0,h-l.sumAxis(d.X)]),w=c*(h-l.sumAxis(d.X))/(n-f);this._clearAxes();this._drawAxes(q,null,10,5);var u=this,x=[],z=0;b.foreach(function(b,c,d){d=[];for(var e=0;e<c.size();++e){var f=c.get(e);if(!(f.rowItem.start()>a.end()||f.rowItem.end()<a.start())){var g=sprintf("item data-series-%s",z);if(null!==p&&0<d.length){var h=d[d.length-1],l=q(f.rowItem.start()),m=q(h.end);if(l-m<p){h.end=Math.max(h.end,f.rowItem.end());h.valueItems[0].push(f);h.id=sprintf("b-%s-%s-%s",
z,h.start,h.end);continue}}d.push(new epiviz.ui.charts.ChartObject(sprintf("b-%s-%s-%s",z,f.rowItem.start(),f.rowItem.end()),f.rowItem.start(),f.rowItem.end(),f.rowItem.metadata(t),z,[[f]],[b],g))}}x=x.concat(d);++z});c=this._svg.select(".items");f=c.select(".selected");f=this._svg.select("#clip-"+this.id());c.empty()&&(f.empty()&&this._svg.select("defs").append("clipPath").attr("id","clip-"+this.id()).append("rect").attr("class","clip-path-rect"),c=this._svg.append("g").attr("class","items").attr("id",
this.id()+"-gene-content").attr("clip-path","url(#clip-"+this.id()+")"),f=c.append("g").attr("class","selected"),c.append("g").attr("class","hovered"),f.append("g").attr("class","hovered"));c.attr("transform","translate("+l.left()+", "+l.top()+")");this._svg.select(".clip-path-rect").attr("x",0).attr("y",0).attr("width",h-l.sumAxis(d.X)).attr("height",g-l.sumAxis(d.Y));c.selectAll(".item").remove();h=c.selectAll(".item").data(x,function(a){return a.id});h.enter().insert("rect",":first-child").attr("class",
function(a){return a.cssClasses}).style("fill",function(a){a=1<b.measurements().length?m.get(a.seriesIndex):r?m.getByKey(a.values):m.get(a.seriesIndex);return a}).attr("x",function(a){return q(a.start)/e+w}).attr("width",function(a){return e*(q(a.end+1)-q(a.start))}).on("mouseout",function(){u._unhover.notify(new epiviz.ui.charts.VisEventArgs(u.id()))}).on("mouseover",function(a){u._hover.notify(new epiviz.ui.charts.VisEventArgs(u.id(),a))}).on("click",function(a){u._deselect.notify(new epiviz.ui.charts.VisEventArgs(u.id()));
u._select.notify(new epiviz.ui.charts.VisEventArgs(u.id(),a));d3.event.stopPropagation()});h.attr("class",function(a){return a.cssClasses}).attr("height",g-l.sumAxis(d.Y)).attr("y",0).transition().duration(500).attr("x",function(a){return q(a.start)}).attr("width",function(a){return q(a.end+1)-q(a.start)});h.exit().transition().duration(500).attr("x",function(a){return q(a.start)}).remove();return x};
epiviz.plugins.charts.BlocksTrack.prototype.setColors=function(a){this.container().find(".items").remove();epiviz.ui.charts.Visualization.prototype.setColors.call(this,a)};epiviz.plugins.charts.BlocksTrackType=function(a){epiviz.ui.charts.TrackType.call(this,a)};epiviz.plugins.charts.BlocksTrackType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.TrackType.prototype);epiviz.plugins.charts.BlocksTrackType.constructor=epiviz.plugins.charts.BlocksTrackType;
epiviz.plugins.charts.BlocksTrackType.prototype.createNew=function(a,b,c){return new epiviz.plugins.charts.BlocksTrack(a,b,c)};epiviz.plugins.charts.BlocksTrackType.prototype.typeName=function(){return"epiviz.plugins.charts.BlocksTrack"};epiviz.plugins.charts.BlocksTrackType.prototype.chartName=function(){return"Blocks Track"};epiviz.plugins.charts.BlocksTrackType.prototype.chartHtmlAttributeName=function(){return"blocks"};
epiviz.plugins.charts.BlocksTrackType.prototype.isRestrictedToRangeMeasurements=function(){return!0};epiviz.plugins.charts.BlocksTrackType.prototype.measurementsFilter=function(){return function(a){return a.type()==epiviz.measurements.Measurement.Type.RANGE}};
epiviz.plugins.charts.BlocksTrackType.prototype.customSettingsDefs=function(){return epiviz.ui.charts.TrackType.prototype.customSettingsDefs.call(this).concat([new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.BlocksTrackType.CustomSettings.MIN_BLOCK_DISTANCE,epiviz.ui.charts.CustomSetting.Type.NUMBER,5,"Minimum block distance"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.BlocksTrackType.CustomSettings.USE_COLOR_BY,epiviz.ui.charts.CustomSetting.Type.BOOLEAN,!1,"Use Block Color by"),
new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.BlocksTrackType.CustomSettings.BLOCK_COLOR_BY,epiviz.ui.charts.CustomSetting.Type.MEASUREMENTS_METADATA,"colLabel","Block color by")])};epiviz.plugins.charts.BlocksTrackType.CustomSettings={MIN_BLOCK_DISTANCE:"minBlockDistance",BLOCK_COLOR_BY:"blockColorBy",USE_COLOR_BY:"useColorBy"};epiviz.plugins.charts.LineTrack=function(a,b,c){epiviz.ui.charts.Track.call(this,a,b,c);this._initialize()};epiviz.plugins.charts.LineTrack.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Track.prototype);
epiviz.plugins.charts.LineTrack.constructor=epiviz.plugins.charts.LineTrack;epiviz.plugins.charts.LineTrack.prototype._initialize=function(){epiviz.ui.charts.Track.prototype._initialize.call(this)};
epiviz.plugins.charts.LineTrack.prototype.draw=function(a,b,c,e){epiviz.ui.charts.Track.prototype.draw.call(this,a,b,c,e);b=this._lastData;a=this._lastRange;c=c||this._slide||0;e=e||this._zoom||1;this._slide=0;this._zoom=1;if(!b||!a)return[];var d=epiviz.ui.charts.CustomSetting,f=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.Y_MIN],n=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.Y_MAX];f==d.DEFAULT&&(f=null,this.measurements().foreach(function(a){null!==
a&&(null===f||a.minValue()<f)&&(f=a.minValue())}));n==d.DEFAULT&&(n=null,this.measurements().foreach(function(a){null!==a&&(null===n||a.maxValue()>n)&&(n=a.maxValue())}));null===f&&null===n&&(f=-1,n=1);null===f&&(f=n-1);null===n&&(n=f+1);var h=epiviz.ui.charts.Axis,d=d3.scale.linear().domain([a.start(),a.end()]).range([0,this.width()-this.margins().sumAxis(h.X)]),g=d3.scale.linear().domain([f,n]).range([this.height()-this.margins().sumAxis(h.Y),0]);this._clearAxes();this._drawAxes(d,g,10,5);c=c*(this.width()-
this.margins().sumAxis(h.X))/a.width();var l=this._svg.selectAll(".lines");l.empty()&&(l=this._svg.append("g").attr("class","lines").attr("transform","translate("+this.margins().left()+", "+this.margins().top()+")"));b.measurements().forEach(function(a,b){var c=l.selectAll(".line-series-index-"+b),d=l.selectAll(".point-series-index-"+b);c.empty()&&l.append("g").attr("class","line-series-index-"+b);d.empty()&&l.append("g").attr("class","point-series-index-"+b)});for(h=b.measurements().length;;++h){var m=
l.selectAll(".line-series-index-"+h),p=l.selectAll(".point-series-index-"+h);if(m.empty())break;m.remove();p.remove()}return this._drawLines(a,b,c,e,d,g)};
epiviz.plugins.charts.LineTrack.prototype._drawLines=function(a,b,c,e,d,f){var n=this.colors(),h=parseInt(this.customSettingsValues()[epiviz.plugins.charts.LineTrackType.CustomSettings.STEP]),g=this.customSettingsValues()[epiviz.plugins.charts.LineTrackType.CustomSettings.SHOW_POINTS],l=this.customSettingsValues()[epiviz.plugins.charts.LineTrackType.CustomSettings.SHOW_LINES],m=this.customSettingsValues()[epiviz.plugins.charts.LineTrackType.CustomSettings.SHOW_ERROR_BARS],p=this.customSettingsValues()[epiviz.plugins.charts.LineTrackType.CustomSettings.POINT_RADIUS],
t=this.customSettingsValues()[epiviz.plugins.charts.LineTrackType.CustomSettings.LINE_THICKNESS],r=this.customSettingsValues()[epiviz.plugins.charts.LineTrackType.CustomSettings.INTERPOLATION],q=this;e=d3.scale.linear().domain([0,this.width()-this.margins().sumAxis(epiviz.ui.charts.Axis.X)]).range([a.start(),a.end()])(c)-a.start();var w=epiviz.datatypes.GenomicRange.fromStartEnd(a.seqName(),Math.min(a.start(),a.start()+e),Math.max(a.end(),a.end()+e)),u=this._svg.select(".lines"),x=[];b.foreach(function(a,
b,e){var A=q._measurementColorLabels?n.getByKey(q._measurementColorLabels.get(a)):n.get(e),C=b.binarySearchStarts(w);if(0!=C.length){var D=Math.ceil(C.index/h)*h;C.length=Math.max(0,C.length-D+C.index);C.index=D;for(var D=epiviz.utils.range(C.length,C.index).filter(function(a){return!h||1>=h||0==(a-C.index)%h}),H=0;H<D.length;++H){var G=b.get(D[H]);x.push(new epiviz.ui.charts.ChartObject(sprintf("line_%s_%s",e,G.globalIndex),G.rowItem.start(),G.rowItem.end(),[G.value],e,[[G]],[a],sprintf("item data-series-%s",
e)))}var L=function(a){a=b.get(a);return d(a.rowItem.start())};a=function(a){a=b.get(a);return f(a.value)};l?(H=d3.svg.line().x(L).y(a).interpolate(r),G=u.select(".line-series-index-"+e).selectAll("path").data([D]),G.enter().append("path").attr("d",H).style("shape-rendering","auto").style("stroke-opacity","0.8").on("mouseover",function(){q._captureMouseHover()}).on("mousemove",function(){q._captureMouseHover()}).on("mouseout",function(){q._unhover.notify(new epiviz.ui.charts.VisEventArgs(q.id()))}),
G.attr("d",H).style("stroke",A).style("stroke-width",t).attr("transform","translate("+ +c+")").transition().duration(500).attr("transform","translate(0)")):u.select(".line-series-index-"+e).selectAll("path").remove();u.select(".point-series-index-"+e).selectAll("circle").remove();u.select(".point-series-index-"+e).selectAll(".error-bar").remove();g&&(H=u.select(".point-series-index-"+e).selectAll("circle").data(D),H.enter().append("circle").attr("class","point-series-index-"+e).attr("r",p).attr("cx",
L).attr("cy",a).attr("fill",A).attr("stroke",A).attr("transform","translate("+ +c+")").transition().duration(500).attr("transform","translate(0)"),H.on("mouseover",function(){q._captureMouseHover()}).on("mousemove",function(){q._captureMouseHover()}).on("mouseout",function(){q._unhover.notify(new epiviz.ui.charts.VisEventArgs(q.id()))}),H.exit().transition().duration(500).style("opacity",0).remove(),m&&(e=u.select(".point-series-index-"+e).selectAll(".error-bar").data(D),e.enter().append("g").attr("class",
"error-bar").each(function(a){var c;c=b.get(a);c=c.valueAnnotation?c.valueAnnotation.errMinus:null;c=void 0!=c?f(c):null;var d;d=b.get(a);d=d.valueAnnotation?d.valueAnnotation.errPlus:null;d=void 0!=d?f(d):null;null!=c&&null!=d&&(d3.select(this).append("line").attr("x1",L(a)).attr("x2",L(a)).attr("y1",c).attr("y2",d).style("stroke",A).style("shape-rendering","auto"),d3.select(this).append("line").attr("x1",L(a)-2).attr("x2",L(a)+2).attr("y1",c).attr("y2",c).style("stroke",A).style("shape-rendering",
"auto"),d3.select(this).append("line").attr("x1",L(a)-2).attr("x2",L(a)+2).attr("y1",d).attr("y2",d).style("stroke",A).style("shape-rendering","auto"))}).attr("transform","translate("+ +c+")").transition().duration(500).attr("transform","translate(0)"),e.on("mouseover",function(){q._captureMouseHover()}).on("mousemove",function(){q._captureMouseHover()}).on("mouseout",function(){q._unhover.notify(new epiviz.ui.charts.VisEventArgs(q.id()))}),e.exit().transition().duration(500).style("opacity",0).remove()))}});
return x};epiviz.plugins.charts.LineTrackType=function(a){epiviz.ui.charts.TrackType.call(this,a)};epiviz.plugins.charts.LineTrackType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.TrackType.prototype);epiviz.plugins.charts.LineTrackType.constructor=epiviz.plugins.charts.LineTrackType;epiviz.plugins.charts.LineTrackType.prototype.createNew=function(a,b,c){return new epiviz.plugins.charts.LineTrack(a,b,c)};epiviz.plugins.charts.LineTrackType.prototype.typeName=function(){return"epiviz.plugins.charts.LineTrack"};
epiviz.plugins.charts.LineTrackType.prototype.chartName=function(){return"Line Track"};epiviz.plugins.charts.LineTrackType.prototype.chartHtmlAttributeName=function(){return"lines"};epiviz.plugins.charts.LineTrackType.prototype.measurementsFilter=function(){return function(a){return a.type()==epiviz.measurements.Measurement.Type.FEATURE}};
epiviz.plugins.charts.LineTrackType.prototype.customSettingsDefs=function(){return epiviz.ui.charts.TrackType.prototype.customSettingsDefs.call(this).concat([new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LineTrackType.CustomSettings.STEP,epiviz.ui.charts.CustomSetting.Type.NUMBER,50,"Step"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LineTrackType.CustomSettings.SHOW_POINTS,epiviz.ui.charts.CustomSetting.Type.BOOLEAN,!1,"Show points"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LineTrackType.CustomSettings.SHOW_LINES,
epiviz.ui.charts.CustomSetting.Type.BOOLEAN,!0,"Show lines"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LineTrackType.CustomSettings.SHOW_ERROR_BARS,epiviz.ui.charts.CustomSetting.Type.BOOLEAN,!0,"Show error bars"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LineTrackType.CustomSettings.POINT_RADIUS,epiviz.ui.charts.CustomSetting.Type.NUMBER,1,"Point radius"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LineTrackType.CustomSettings.LINE_THICKNESS,epiviz.ui.charts.CustomSetting.Type.NUMBER,
1,"Line thickness"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.Y_MIN,epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,"Min Y"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.Y_MAX,epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,"Max Y"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LineTrackType.CustomSettings.INTERPOLATION,epiviz.ui.charts.CustomSetting.Type.CATEGORICAL,
"linear","Interpolation","linear step-before step-after basis basis-open basis-closed bundle cardinal cardinal-open monotone".split(" "))])};epiviz.plugins.charts.LineTrackType.CustomSettings={STEP:"step",SHOW_POINTS:"showPoints",SHOW_ERROR_BARS:"showErrorBars",SHOW_LINES:"showLines",POINT_RADIUS:"pointRadius",LINE_THICKNESS:"lineThickness",INTERPOLATION:"interpolation"};epiviz.plugins.charts.StackedLineTrack=function(a,b,c){epiviz.ui.charts.Track.call(this,a,b,c);this._initialize()};
epiviz.plugins.charts.StackedLineTrack.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Track.prototype);epiviz.plugins.charts.StackedLineTrack.constructor=epiviz.plugins.charts.StackedLineTrack;epiviz.plugins.charts.StackedLineTrack.prototype._initialize=function(){epiviz.ui.charts.Track.prototype._initialize.call(this)};
epiviz.plugins.charts.StackedLineTrack.prototype.draw=function(a,b,c,e){epiviz.ui.charts.Track.prototype.draw.call(this,a,b,c,e);b=this._lastData;a=this._lastRange;c=c||this._slide;e=e||this._zoom;this._slide=0;this._zoom=1;if(!b||!a)return[];var d=epiviz.ui.charts.Axis;c=(c||0)*(this.width()-this.margins().sumAxis(d.X))/a.width();return this._drawLines(a,b,c,e||1)};
epiviz.plugins.charts.StackedLineTrack.prototype._drawLines=function(a,b,c,e){e=epiviz.ui.charts.Axis;var d=this.colors(),f=this.customSettingsValues()[epiviz.plugins.charts.StackedLineTrackType.CustomSettings.STEP],n=this.customSettingsValues()[epiviz.plugins.charts.StackedLineTrackType.CustomSettings.INTERPOLATION],h=this.customSettingsValues()[epiviz.plugins.charts.StackedLineTrackType.CustomSettings.OFFSET],g=this,l=d3.scale.linear().domain([0,this.width()-this.margins().sumAxis(e.X)]).range([a.start(),
a.end()])(c)-a.start();epiviz.datatypes.GenomicRange.fromStartEnd(a.seqName(),Math.min(a.start(),a.start()+l),Math.max(a.end(),a.end()+l));var m=[],p=[],t=b.firstSeries().globalStartIndex(),r=b.firstSeries().globalEndIndex();b.foreach(function(a,b){var c=b.globalStartIndex(),d=b.globalEndIndex();c>t&&(t=c);d<r&&(r=d)});var t=Math.ceil(t/f)*f,r=Math.floor(r/f)*f,q;b.foreach(function(a,b,c){for(var d=epiviz.utils.range((r-t)/f).map(function(a){return a*f+t}).filter(function(a){return b.getByGlobalIndex(a)}),
e=0;e<d.length;++e){var g=b.getByGlobalIndex(d[e]);m.push(new epiviz.ui.charts.ChartObject(sprintf("line_%s_%s",c,g.globalIndex),g.rowItem.start(),g.rowItem.end(),[g.value],c,[[g]],[a],sprintf("item data-series-%s",c)))}var h=[];d.forEach(function(a){h.push({x:b.getByGlobalIndex(a).rowItem.start(),y:b.getByGlobalIndex(a).value})});p.push(h);q||(q=[],d.forEach(function(a){a=b.getByGlobalIndex(a);q.push(a.rowItem.metadata("bacteria"))}))});var w=d3.scale.linear().domain([a.start(),a.end()]).range([0,
this.width()-this.margins().sumAxis(e.X)]);this._clearAxes();this._drawAxes(w,void 0,10);a=this._svg.select(".lines");a.empty()&&(a=this._svg.append("g").attr("class","lines").attr("transform","translate("+this.margins().left()+", "+this.margins().top()+")"));b=d3.layout.stack().offset(h)(p);var u=d3.scale.linear().domain([Math.min(0,d3.min(b,function(a){return d3.min(a,function(a){return a.y0+a.y})})),d3.max(b,function(a){return d3.max(a,function(a){return a.y0+a.y})})]).range([this.height()-this.margins().sumAxis(e.Y),
0]);e=d3.svg.area().x(function(a){return w(a.x)}).y0(function(a){return u(a.y0)}).y1(function(a){return u(a.y0+a.y)}).interpolate(n);n=a.selectAll("path").data(b);n.enter().append("path").attr("d",e).style("shape-rendering","auto").style("stroke-width","0").style("fill",function(a,b){return d.get(b)}).on("mouseover",function(){g._captureMouseHover()}).on("mousemove",function(){g._captureMouseHover()}).on("mouseout",function(){g._unhover.notify(new epiviz.ui.charts.VisEventArgs(g.id()))});n.attr("d",
e).style("fill",function(a,b){return d.get(b)}).attr("transform","translate("+ +c+")").transition().duration(500).attr("transform","translate(0)");return m};epiviz.plugins.charts.StackedLineTrackType=function(a){epiviz.ui.charts.TrackType.call(this,a)};epiviz.plugins.charts.StackedLineTrackType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.TrackType.prototype);epiviz.plugins.charts.StackedLineTrackType.constructor=epiviz.plugins.charts.StackedLineTrackType;
epiviz.plugins.charts.StackedLineTrackType.prototype.createNew=function(a,b,c){return new epiviz.plugins.charts.StackedLineTrack(a,b,c)};epiviz.plugins.charts.StackedLineTrackType.prototype.typeName=function(){return"epiviz.plugins.charts.StackedLineTrack"};epiviz.plugins.charts.StackedLineTrackType.prototype.chartName=function(){return"Stacked Track"};epiviz.plugins.charts.StackedLineTrackType.prototype.chartHtmlAttributeName=function(){return"stacked-lines"};
epiviz.plugins.charts.StackedLineTrackType.prototype.measurementsFilter=function(){return function(a){return a.type()==epiviz.measurements.Measurement.Type.FEATURE}};epiviz.plugins.charts.StackedLineTrackType.prototype.isRestrictedToSameDatasourceGroup=function(){return!0};
epiviz.plugins.charts.StackedLineTrackType.prototype.customSettingsDefs=function(){return epiviz.ui.charts.TrackType.prototype.customSettingsDefs.call(this).concat([new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.StackedLineTrackType.CustomSettings.STEP,epiviz.ui.charts.CustomSetting.Type.NUMBER,1,"Step"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.StackedLineTrackType.CustomSettings.OFFSET,epiviz.ui.charts.CustomSetting.Type.CATEGORICAL,"zero","Offset",["zero","wiggle"]),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.StackedLineTrackType.CustomSettings.INTERPOLATION,
epiviz.ui.charts.CustomSetting.Type.CATEGORICAL,"basis","Interpolation","linear step-before step-after basis basis-open basis-closed bundle cardinal cardinal-open monotone".split(" "))])};epiviz.plugins.charts.StackedLineTrackType.CustomSettings={STEP:"step",OFFSET:"offset",INTERPOLATION:"interpolation"};
epiviz.plugins.charts.ScatterPlot=function(a,b,c){epiviz.ui.charts.Plot.call(this,a,b,c);this._legend=this._chartContent=null;this._measurementsX=[];this._measurementsY=[];var e=this;this.measurements().foreach(function(a,b){0==b%2?e._measurementsX.push(a):e._measurementsY.push(a)});this._yLabel=this._xLabel="";for(a=0;a<Math.min(this._measurementsX.length,this._measurementsY.length);++a)0<a&&(this._xLabel+=", ",this._yLabel+=", "),this._xLabel+=this._measurementsX[a].name(),this._yLabel+=this._measurementsY[a].name();
this._colorLabels=[];this._initialize()};epiviz.plugins.charts.ScatterPlot.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Plot.prototype);epiviz.plugins.charts.ScatterPlot.constructor=epiviz.plugins.charts.ScatterPlot;epiviz.plugins.charts.ScatterPlot.prototype._initialize=function(){epiviz.ui.charts.Plot.prototype._initialize.call(this);this._svg.classed("scatter-plot",!0);this._chartContent=this._svg.append("g").attr("class","chart-content");this._legend=this._svg.append("g").attr("class","chart-legend")};
epiviz.plugins.charts.ScatterPlot.prototype.draw=function(a,b){epiviz.ui.charts.Plot.prototype.draw.call(this,a,b);b=this._lastData;a=this._lastRange;return b&&a?this._drawCircles(a,b):[]};
epiviz.plugins.charts.ScatterPlot.prototype._drawCircles=function(a,b){var c=this,e=epiviz.ui.charts.Axis,d=Math.max(1,this.customSettingsValues()[epiviz.plugins.charts.ScatterPlotType.CustomSettings.CIRCLE_RADIUS_RATIO]*Math.min(this.width(),this.height())),f=Math.max(Math.floor(d),1),n=Math.min(this._measurementsX.length,this._measurementsY.length),h=b.firstSeries().globalStartIndex(),g=b.firstSeries().globalEndIndex();b.foreach(function(a,b){var c=b.globalStartIndex(),d=b.globalEndIndex();c>h&&
(h=c);d<g&&(g=d)});var l=g-h,m=this.margins(),p=this.width(),t=this.height(),r=epiviz.ui.charts.CustomSetting,q=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.Y_MIN],w=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.Y_MAX],u=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.X_MIN],x=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.X_MAX];u==r.DEFAULT&&(u=this._measurementsX[0].minValue());q==r.DEFAULT&&
(q=this._measurementsY[0].minValue());x==r.DEFAULT&&(x=this._measurementsX[0].maxValue());w==r.DEFAULT&&(w=this._measurementsY[0].maxValue());var z=epiviz.measurements.Measurement.Type.isOrdered(this._measurementsX[0].type()),r=d3.scale.linear().domain([u,x]).range([0,p-m.sumAxis(e.X)]),y=d3.scale.linear().domain([q,w]).range([t-m.sumAxis(e.Y),0]);this._clearAxes(this._chartContent);this._drawAxes(r,y,15,15,this._chartContent);var B,A,C=[];for(B=0;B<l;++B){A=B+h;var D=b.getSeries(this._measurementsX[0]).getRowByGlobalIndex(A);
if(D&&(!z||void 0==a.start()||void 0==a.end()||D.start()<a.end()&&D.end()>a.start()))for(D=0;D<n;++D)C.push(D*l+B)}var D={},n=[],H=1;for(B=0;B<C.length;++B){A=C[B]%l;var G=A+h,z=Math.floor(C[B]/l);A=c._measurementsX[z];var L=c._measurementsY[z],J=b.getSeries(A).getByGlobalIndex(G),G=b.getSeries(L).getByGlobalIndex(G);if(J&&G){var M=sprintf("item data-series-%s",z),V=r(J.value),T=y(G.value),V=Math.floor(V/f)*f,T=Math.floor(T/f)*f,O=null;D[T]&&D[T][V]?(O=D[T][V],O.id+="_"+J.globalIndex,O.start=Math.min(O.start,
J.rowItem.start()),O.end=Math.max(O.end,J.rowItem.end()),O.values[0]=(O.values[0]*O.valueItems[0].length+J.value)/(O.valueItems[0].length+1),O.values[1]=(O.values[1]*O.valueItems[1].length+G.value)/(O.valueItems[1].length+1),O.valueItems[0].push(J),O.valueItems[1].push(G),O.valueItems[0].length>H&&(H=O.valueItems[0].length)):(O=new epiviz.ui.charts.ChartObject(sprintf("scatter_%s_%s",z,J.globalIndex),J.rowItem.start(),J.rowItem.end(),[J.value,G.value],z,[[J],[G]],[A,L],M),D[T]||(D[T]={}),D[T][V]=
O,n.push(O))}}f=this._chartContent.select(".items");f.empty()&&(f=this._chartContent.append("g").attr("class","items"),l=f.append("g").attr("class","selected"),f.append("g").attr("class","hovered"),l.append("g").attr("class","hovered"));f=f.selectAll("circle").data(n,function(a){return a.id});f.enter().insert("circle",":first-child").attr("id",function(a){return sprintf("%s-item-%s-%s",c.id(),a.seriesIndex,a.valueItems[0][0].globalIndex)}).style("opacity",0).style("fill-opacity",0).attr("r",0);f.each(function(a){var b=
d3.select(this),d;d=c._globalIndexColorLabels?c.colors().getByKey(c._globalIndexColorLabels[a.valueItems[0][0].globalIndex]):c.colors().get(a.seriesIndex);b.attr("cx",m.left()+(a.values[0]-u)*(p-m.sumAxis(e.X))/(x-u)).attr("cy",t-m.bottom()-(a.values[1]-q)*(t-m.sumAxis(e.Y))/(w-q)).attr("class",a.cssClasses).style("fill",d)});f.transition().duration(1E3).style("fill-opacity",function(a){return Math.max(.6,a.valueItems[0].length/H)}).style("opacity",null).attr("r",d);f.exit().transition().duration(1E3).style("opacity",
0).attr("r",0).remove();f.on("mouseover",function(a){c._hover.notify(new epiviz.ui.charts.VisEventArgs(c.id(),a))}).on("mouseout",function(){c._unhover.notify(new epiviz.ui.charts.VisEventArgs(c.id()))}).on("click",function(a){c._deselect.notify(new epiviz.ui.charts.VisEventArgs(c.id()));c._select.notify(new epiviz.ui.charts.VisEventArgs(c.id(),a));d3.event.stopPropagation()});if(this._globalIndexColorLabels){d={};for(D=h;D<g;++D)d[this._globalIndexColorLabels[D]]=this._globalIndexColorLabels[D];
this._colorLabels=Object.keys(d);this._svg.selectAll(".chart-title").remove();this._svg.selectAll(".chart-title-color ").remove();d=this._svg.selectAll(".chart-title").data(this._colorLabels);d.enter().append("text").attr("class","chart-title").attr("font-weight","bold").attr("y",c.margins().top()-5);d.attr("fill",function(a,b){return c.colors().getByKey(a)}).text(function(a){return a});var N=0,Z=[];$("#"+this.id()+" .chart-title").each(function(a){Z.push(N);N+=this.getBBox().width+15});d.attr("x",
function(a,b){return c.margins().left()+10+Z[b]});this._svg.selectAll(".chart-title-color").data(this._colorLabels).enter().append("circle").attr("class","chart-title-color").attr("cx",function(a,b){return c.margins().left()+4+Z[b]}).attr("cy",c.margins().top()-9).attr("r",4).style("shape-rendering","auto").style("stroke-width","0").attr("fill",function(a,b){return c.colors().getByKey(a)}).style("stroke-width",0)}else{d=Math.min(this._measurementsX.length,this._measurementsY.length);f=Array(d);for(D=
0;D<d;++D)f[D]=sprintf("%s vs %s",this._measurementsX[D].name(),this._measurementsY[D].name());this._colorLabels=f}return n};epiviz.plugins.charts.ScatterPlot.prototype.colorLabels=function(){return this._colorLabels};
epiviz.plugins.charts.ScatterPlot.prototype._drawAxes=function(a,b,c,e,d,f,n,h){epiviz.ui.charts.Plot.prototype._drawAxes.call(this,a,b,c,e,d,f,n,h);this._legend.selectAll("text").remove();a=this._measurementsX;var g=this;this._legend.selectAll(".x-measurement").remove();this._legend.selectAll(".x-measurement-color").remove();b=this._legend.selectAll(".x-measurement").data(a).enter().append("text").attr("class","x-measurement").attr("font-weight","bold").attr("fill",function(a,b){return g._globalIndexColorLabels?
"#000000":g.colors().get(b)}).attr("y",this.height()-this.margins().bottom()+35).text(function(a,b){return a.name()});var l=0,m=[];$("#"+this.id()+" .x-measurement").each(function(a){m.push(l);l+=this.getBBox().width+15});b.attr("x",function(a,b){return.5*(g.width()-l)+7+m[b]});this._legend.selectAll(".x-measurement-color").data(a).enter().append("circle").attr("class","x-measurement-color").attr("cx",function(a,b){return.5*(g.width()-l)+1+m[b]}).attr("cy",this.height()-this.margins().bottom()+31).attr("r",
4).style("shape-rendering","auto").style("stroke-width","0").style("fill",function(a,b){return g._globalIndexColorLabels?"#ffffff":g.colors().get(b)});b=this._measurementsY;this._legend.selectAll(".y-measurement").remove();this._legend.selectAll(".y-measurement-color").remove();b=this._legend.selectAll(".y-measurement").data(b).enter().append("text").attr("class","y-measurement").attr("font-weight","bold").attr("fill",function(a,b){return g._globalIndexColorLabels?"#000000":g.colors().get(b)}).attr("y",
this.margins().left()-35).attr("transform","rotate(-90)").text(function(a,b){return a.name()});var p=0,t=[];$("#"+this.id()+" .y-measurement").each(function(a){t.push(p);p+=this.getBBox().width+15});b.attr("x",function(a,b){return-g.height()+.5*(g.height()-p)+12+g.margins().top()+t[b]});this._legend.selectAll(".y-measurement-color").data(a).enter().append("circle").attr("class","y-measurement-color").attr("cx",function(a,b){return-g.height()+.5*(g.height()-p)+6+g.margins().top()+t[b]}).attr("cy",
this.margins().left()-39).attr("transform","rotate(-90)").attr("r",4).style("shape-rendering","auto").style("stroke-width","0").style("fill",function(a,b){return g._globalIndexColorLabels?"#ffffff":g.colors().get(b)})};epiviz.plugins.charts.ScatterPlotType=function(a){epiviz.ui.charts.PlotType.call(this,a)};epiviz.plugins.charts.ScatterPlotType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.PlotType.prototype);epiviz.plugins.charts.ScatterPlotType.constructor=epiviz.plugins.charts.ScatterPlotType;
epiviz.plugins.charts.ScatterPlotType.prototype.createNew=function(a,b,c){return new epiviz.plugins.charts.ScatterPlot(a,b,c)};epiviz.plugins.charts.ScatterPlotType.prototype.typeName=function(){return"epiviz.plugins.charts.ScatterPlot"};epiviz.plugins.charts.ScatterPlotType.prototype.chartName=function(){return"Scatter Plot"};epiviz.plugins.charts.ScatterPlotType.prototype.chartHtmlAttributeName=function(){return"scatter"};epiviz.plugins.charts.ScatterPlotType.prototype.measurementsFilter=function(){return function(a){return epiviz.measurements.Measurement.Type.hasValues(a.type())}};
epiviz.plugins.charts.ScatterPlotType.prototype.isRestrictedToSameDatasourceGroup=function(){return!0};epiviz.plugins.charts.ScatterPlotType.prototype.minSelectedMeasurements=function(){return 2};
epiviz.plugins.charts.ScatterPlotType.prototype.customSettingsDefs=function(){return epiviz.ui.charts.PlotType.prototype.customSettingsDefs.call(this).concat([new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.ScatterPlotType.CustomSettings.CIRCLE_RADIUS_RATIO,epiviz.ui.charts.CustomSetting.Type.NUMBER,.015,"Circle radius ratio"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.X_MIN,epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,
"Min X"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.X_MAX,epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,"Max X"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.Y_MIN,epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,"Min Y"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.Y_MAX,epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,
"Max Y")])};epiviz.plugins.charts.ScatterPlotType.CustomSettings={CIRCLE_RADIUS_RATIO:"circleRadiusRatio"};epiviz.plugins.charts.GenesTrack=function(a,b,c){epiviz.ui.charts.Track.call(this,a,b,c);this._initialize()};epiviz.plugins.charts.GenesTrack.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Track.prototype);epiviz.plugins.charts.GenesTrack.constructor=epiviz.plugins.charts.GenesTrack;
epiviz.plugins.charts.GenesTrack.prototype._initialize=function(){epiviz.ui.charts.Track.prototype._initialize.call(this);this._svg.classed("genes-track",!0)};epiviz.plugins.charts.GenesTrack.prototype.draw=function(a,b,c,e){epiviz.ui.charts.Track.prototype.draw.call(this,a,b,c,e);b=this._lastData;a=this._lastRange;if(!b||!a)return[];c=c||this._slide;e=e||this._zoom;this._slide=0;this._zoom=1;return this._drawGenes(a,b,c||0,e||1)};
epiviz.plugins.charts.GenesTrack.prototype._drawGenes=function(a,b,c,e){var d=epiviz.ui.charts.Axis,f=a.start(),n=a.end();a=this.width();var h=this.height(),g=this.margins(),l=d3.scale.linear().domain([f,n]).range([0,a-g.sumAxis(d.X)]),m=c*(a-g.sumAxis(d.X))/(n-f);this._clearAxes();this._drawAxes(l,null,10,5);var p=this,t=b.firstSeries();b=epiviz.utils.range(t.size()).map(function(a){a=t.get(a);var b=a.rowItem,c=sprintf("item gene-%s",b.metadata("gene"));return new epiviz.ui.charts.ChartObject(b.metadata("gene"),
b.start(),b.end(),null,0,[[a]],[t.measurement()],c)});e&&(this._svg.select(".items").remove(),this._svg.select("defs").select("#clip-"+this.id()).remove());e=this._svg.select(".items");c=e.select(".selected");e.empty()&&(this._svg.select("defs").append("clipPath").attr("id","clip-"+this.id()).append("rect").attr("x",0).attr("y",0).attr("width",a-g.sumAxis(d.X)).attr("height",h-g.sumAxis(d.Y)),e=this._svg.append("g").attr("class","items").attr("transform","translate("+g.left()+", "+g.top()+")").attr("id",
this.id()+"-gene-content").attr("clip-path","url(#clip-"+this.id()+")"),c=e.append("g").attr("class","selected"),e.append("g").attr("class","hovered"),c.append("g").attr("class","hovered"));d=e.selectAll(".item").data(b,function(a){return a.id});d.enter().insert("g",":first-child").on("mouseout",function(){p._unhover.notify(new epiviz.ui.charts.VisEventArgs(p.id()))}).on("mouseover",function(a){p._hover.notify(new epiviz.ui.charts.VisEventArgs(p.id(),a))}).on("click",function(a){p._deselect.notify(new epiviz.ui.charts.VisEventArgs(p.id()));
p._select.notify(new epiviz.ui.charts.VisEventArgs(p.id(),a));d3.event.stopPropagation()}).attr("transform","translate("+m+", 0) scale(1, 1)").each(function(a){p._drawGene(this,a,l)});m&&d.each(function(a){p._translateGene(this,a,m)});d.exit().transition().duration(500).style("opacity",0).remove();return b};
epiviz.plugins.charts.GenesTrack.prototype._translateGene=function(a,b,c){a=d3.select(a);b=a.attr("transform");var e=RegExp("translate\\([\\d\\.\\-]+[\\,\\s]+[\\d\\.\\-]+\\)","g"),d=RegExp("[\\d\\.\\-]+","g"),f=b.match(e)[0],d=parseFloat(f.match(d)[0]);b=b.replace(e,"translate("+(d-c)+", 0)");a.transition().duration(500).attr("transform",b)};
epiviz.plugins.charts.GenesTrack.prototype._drawGene=function(a,b,c){var e=epiviz.ui.charts.Axis,d=this,f=b.valueItems[0][0].rowItem,n=c(b.start),h=c(b.end),g="+"==f.strand()?1:-1,l=-g*(this.height()-this.margins().sumAxis(e.Y))*.25,m=f.metadata("exon_starts").split(",").map(function(a){return parseInt(a)}),p=f.metadata("exon_ends").split(",").map(function(a){return parseInt(a)}),t=d3.range(0,m.length),r=.08*this.height(),q=.16*this.height(),w=r*Math.sqrt(3)*.5;a=d3.select(a);a.attr("class",b.cssClasses);
a.append("polygon").attr("class","gene-body").style("fill",this.colors().get(0)).attr("points",function(){var a=null,b,a=.5*(d.height()-d.margins().sumAxis(e.Y)-r)+l;b=[a,a,a+.5*r,a+r,a+r];a="+"==f.strand()?[n,h,h+w,h,n]:[h,n,n-w,n,h];return sprintf("%s,%s %s,%s %s,%s %s,%s %s,%s",a[0],b[0],a[1],b[1],a[2],b[2],a[3],b[3],a[4],b[4])});a.append("g").attr("class","exons").style("fill",this.colors().get(1)).selectAll("rect").data(t).enter().append("rect").attr("x",function(a){return c(m[a])}).attr("y",
.5*(d.height()-q-d.margins().sumAxis(e.Y))+l).attr("width",function(a){return c(p[a])-c(m[a])}).attr("height",q);a.append("text").attr("class","gene-name").attr("x",n+2).attr("y",.5*(d.height()-d.margins().sumAxis(e.Y))+l-g*(r+2)).style("dominant-baseline","central").text(b.id)};epiviz.plugins.charts.GenesTrack.prototype.colorLabels=function(){return["Genes","Exons"]};
epiviz.plugins.charts.GenesTrack.prototype._drawAxes=function(a,b,c,e,d,f,n,h){epiviz.ui.charts.Track.prototype._drawAxes.call(this,a,b,c,e,d,f,n,h);a=epiviz.ui.charts.Axis;this._svg.select(".axes").append("g").attr("class","xAxis").append("line").attr("x1",this.margins().left()).attr("x2",this.width()-this.margins().left()).attr("y1",this.margins().top()+.5*(this.height()-this.margins().sumAxis(a.Y))).attr("y2",this.margins().top()+.5*(this.height()-this.margins().sumAxis(a.Y))).style("stroke","#555555").style("shape-rendering",
"crispEdges")};epiviz.plugins.charts.GenesTrackType=function(a){epiviz.ui.charts.TrackType.call(this,a)};epiviz.plugins.charts.GenesTrackType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.TrackType.prototype);epiviz.plugins.charts.GenesTrackType.constructor=epiviz.plugins.charts.GenesTrackType;epiviz.plugins.charts.GenesTrackType.prototype.createNew=function(a,b,c){return new epiviz.plugins.charts.GenesTrack(a,b,c)};epiviz.plugins.charts.GenesTrackType.prototype.typeName=function(){return"epiviz.plugins.charts.GenesTrack"};
epiviz.plugins.charts.GenesTrackType.prototype.chartName=function(){return"Genes Track"};epiviz.plugins.charts.GenesTrackType.prototype.chartHtmlAttributeName=function(){return"genes"};epiviz.plugins.charts.GenesTrackType.prototype.isRestrictedToRangeMeasurements=function(){return!0};epiviz.plugins.charts.GenesTrackType.prototype.measurementsFilter=function(){return function(a){return a.type()==epiviz.measurements.Measurement.Type.RANGE}};
epiviz.plugins.charts.HeatmapPlot=function(a,b,c){epiviz.ui.charts.Plot.call(this,a,b,c);this._chartContent=null;this._min=this.measurements().first().minValue();this._max=this.measurements().first().maxValue();this._colorScale=epiviz.utils.colorizeBinary(this._min,this._max,"#ffffff",this.colors().getByKey("Max"));this._colorLabels=[];this._dendrogramRatio=.1;this._initialize()};epiviz.plugins.charts.HeatmapPlot.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Plot.prototype);
epiviz.plugins.charts.HeatmapPlot.constructor=epiviz.plugins.charts.HeatmapPlot;epiviz.plugins.charts.HeatmapPlot.prototype._initialize=function(){epiviz.ui.charts.Plot.prototype._initialize.call(this);this._svg.classed("heatmap-plot",!0);this._chartContent=this._svg.append("g").attr("class","chart-content")};
epiviz.plugins.charts.HeatmapPlot.prototype.draw=function(a,b){epiviz.ui.charts.Plot.prototype.draw.call(this,a,b);b=this._lastData;a=this._lastRange;if(!b||!a)return[];this.customSettingsValues();var c=this._applyClustering(a,b);return this._drawCells(a,c.data,c.columnOrder)};
epiviz.plugins.charts.HeatmapPlot.prototype._applyClustering=function(a,b){var c=epiviz.measurements.Measurement.Type.isOrdered(this.measurements().first().type()),e=this.customSettingsValues()[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.CLUSTER],d=this.customSettingsValues()[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.SHOW_DENDROGRAM],f=epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.instance(),n=f.algorithm(this.customSettingsValues()[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.CLUSTERING_ALG]),
h=f.metric(this.customSettingsValues()[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.CLUSTERING_METRIC]),g=f.linkage(this.customSettingsValues()[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.CLUSTERING_LINKAGE]),l=this.customSettingsValues()[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.MAX_COLUMNS],m=b.firstSeries().globalStartIndex(),p=b.firstSeries().size()+m;b.foreach(function(a,b){var c=b.globalStartIndex(),d=b.globalEndIndex();c>m&&(m=c);d<p&&(p=d)});var t=p-m,f=e==epiviz.plugins.charts.HeatmapPlotType.Cluster.ROWS||
e==epiviz.plugins.charts.HeatmapPlotType.Cluster.BOTH,r=e==epiviz.plugins.charts.HeatmapPlotType.Cluster.COLS||e==epiviz.plugins.charts.HeatmapPlotType.Cluster.BOTH,e=d*this._dendrogramRatio,l=d&&r&&l>=t,q,w,u,x,z,y,B=this._svg;["dendrogram-horizontal","dendrogram-vertical"].forEach(function(a){B.select("."+a).remove()});var A=b;if(f){q=[];b.foreach(function(b,d){for(var e=[],f=0;f<t;++f){var g=d.getByGlobalIndex(f+m),h=g.rowItem;(!c||void 0==a.start()||void 0==a.end()||h.start()<a.end()&&h.end()>=
a.start())&&e.push(g.value)}q.push(e)});d=n.cluster(q,h,g);w=d.root().data();var C=[];b.foreach(function(a){C.push(a)});u=[];for(x=0;x<w.length;++x)u[x]=C[w[x]];w=new epiviz.measurements.MeasurementHashtable;for(x=0;x<u.length;++x)w.put(u[x],b.getSeries(u[x]));A=new epiviz.datatypes.MapGenomicData(w);e&&(y=this.width()*e,z=this.height()*(1-e*l)-this.margins().sumAxis(epiviz.ui.charts.Axis.Y),u=this.margins().top(),x=this.width()-y-this.margins().right(),this._drawDendrogram(d,u,x,z,y))}w=null;if(r){q=
[];b.foreach(function(b,d){for(var e=0,f=0;e<t;++e){var g=d.getByGlobalIndex(e+m),h=g.rowItem;if(!c||void 0==a.start()||void 0==a.end()||h.start()<a.end()&&h.end()>=a.start())q.length<=f&&q.push([]),q[f].push(g.value),++f}});if(0==q.length)return{data:A,columnOrder:[]};d=n.cluster(q,h,g);w=d.root().data();l&&(n=this.customSettingsValues()[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.SHOW_COLORS_FOR_ROW_LABELS]?20:0,x=this.margins().left(),u=this.height()*(1-e)-this.margins().bottom(),y=this.height()*
e,z=this.width()*(1-e*f)-this.margins().left()-this.margins().right()-n,this._drawDendrogram(d,u,x,z,y,!0))}return{data:A,columnOrder:w}};
epiviz.plugins.charts.HeatmapPlot.prototype._drawCells=function(a,b,c){var e=this,d=epiviz.ui.charts.Axis,f=this.customSettingsValues()[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.MAX_COLUMNS],n=b.firstSeries().globalStartIndex(),h=b.firstSeries().size()+n,g=[],l=epiviz.measurements.Measurement.Type.isOrdered(this.measurements().first().type());b.foreach(function(a,b){var c=b.globalStartIndex(),d=b.globalEndIndex();c>n&&(n=c);d<h&&(h=d);g.push(a)});for(var m=h-n,p=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.COL_LABEL],
t=this.customSettingsValues()[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.CLUSTER],r=t==epiviz.plugins.charts.HeatmapPlotType.Cluster.ROWS||t==epiviz.plugins.charts.HeatmapPlotType.Cluster.BOTH,t=(t==epiviz.plugins.charts.HeatmapPlotType.Cluster.COLS||t==epiviz.plugins.charts.HeatmapPlotType.Cluster.BOTH)&&f>=m,q=this.customSettingsValues()[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.SHOW_DENDROGRAM]*this._dendrogramRatio,w=this.customSettingsValues()[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.SHOW_COLORS_FOR_ROW_LABELS]?
20:0,r=this.width()*(1-q*r)-w,t=this.height()*(1-q*t),u=[],x=[],z,q=0;q<m;++q){z=q+n;var y;b.foreach(function(a,b){return y=b.getRowByGlobalIndex(z)});y&&(!l||void 0==a.start()||void 0==a.end()||y.start()<a.end()&&y.end()>=a.start())&&(u.push(z),w=y.metadata(p)||""+y.id(),x.push(w))}if(c)for(a=u,l=x,u=Array(u.length),x=Array(x.length),q=0;q<u.length;++q)u[q]=a[c[q]],x[q]=l[c[q]];var B=[],A={};b.foreach(function(a,b,c){for(var d=Math.ceil(x.length/f),e=0,g=f,h=0;h<x.length;++h)if(z=u[h],d=b.getByGlobalIndex(z)){var l=
null;0==e?(e=sprintf("item data-series-%s",c),l=new epiviz.ui.charts.ChartObject(sprintf("heatmap_%s_%s",c,z),d.rowItem.start(),d.rowItem.end(),[d.value],c,[[d]],[a],e),B.push(l),e=d=Math.ceil((x.length-h)/g),--g):(l=B[B.length-1],l.id+="_"+z,epiviz.measurements.Measurement.Type.isOrdered(b.measurement().type())&&(l.start=Math.min(l.start,d.rowItem.start()),l.end=Math.max(l.end,d.rowItem.end())),l.values[0]=(l.values[0]*l.valueItems[0].length+d.value)/(l.valueItems[0].length+1),l.valueItems[0].push(d));
0==c&&(A[z]=B.length-1);--e}});var C;this._min=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.Y_MIN];this._max=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.Y_MAX];c=epiviz.ui.charts.CustomSetting;this._min==c.DEFAULT&&(this._min=b.measurements()[0].minValue());this._max==c.DEFAULT&&(this._max=b.measurements()[0].maxValue());if(this._globalIndexColorLabels){c={};for(a=n;a<h;++a)c[this._globalIndexColorLabels[a]]=this._globalIndexColorLabels[a];
this._colorLabels=Object.keys(c);C={};this._colorLabels.forEach(function(a,b){var c=e.colors().getByKey(a);C[a]=epiviz.utils.colorizeBinary(e._min,e._max,"#ffffff",c)})}else this._colorLabels=[sprintf("Max",b.firstSeries().measurement().maxValue())],this._colorScale=epiviz.utils.colorizeBinary(this._min,this._max,"#ffffff",this.colors().getByKey("Max"));var D=(c=Math.min(x.length,f))?(r-this.margins().sumAxis(d.X))/c:0,H=(t-this.margins().sumAxis(d.Y))/b.measurements().length;b=this._chartContent.select(".items");
b.empty()&&(b=this._chartContent.append("g").attr("class","items"),d=b.append("g").attr("class","selected"),b.append("g").attr("class","hovered"),d.append("g").attr("class","hovered"));b.attr("transform","translate("+this.margins().left()+", "+this.margins().top()+")");d=b.selectAll("rect").data(B,function(a){return a.id});d.enter().append("rect").attr("id",function(a){return sprintf("%s-item-%s-%s",e.id(),a.seriesIndex,a.valueItems[0][0].globalIndex)}).attr("class",function(a){return a.cssClasses}).style("opacity",
0).style("fill-opacity",0).attr("x",function(a){return D*A[a.valueItems[0][0].globalIndex]}).attr("y",function(a){return H*a.seriesIndex}).attr("width",D).attr("height",H).style("fill",function(a,b){return e._globalIndexColorLabels?C[e._globalIndexColorLabels[a.valueItems[0][0].globalIndex]](a.values[0]):e._colorScale(a.values[0])});d.transition().duration(1E3).style("fill-opacity",null).style("opacity",null).attr("x",function(a){return D*A[a.valueItems[0][0].globalIndex]}).attr("y",function(a){return H*
a.seriesIndex}).attr("width",D).attr("height",H).style("fill",function(a){return e._globalIndexColorLabels?C[e._globalIndexColorLabels[a.valueItems[0][0].globalIndex]](a.values[0]):e._colorScale(a.values[0])});d.exit().transition().duration(1E3).style("opacity",0).remove();d.on("mouseover",function(a){e._hover.notify(new epiviz.ui.charts.VisEventArgs(e.id(),a))}).on("mouseout",function(){e._unhover.notify(new epiviz.ui.charts.VisEventArgs(e.id()))}).on("click",function(a){e._deselect.notify(new epiviz.ui.charts.VisEventArgs(e.id()));
e._select.notify(new epiviz.ui.charts.VisEventArgs(e.id(),a));d3.event.stopPropagation()});this._drawLabels(b,x,u,c,g,D,H,n,r);return B};epiviz.plugins.charts.HeatmapPlot.prototype._drawDendrogram=function(a,b,c,e,d,f){var n=f?"dendrogram-horizontal":"dendrogram-vertical",h=this._svg.append("g").attr("class",n);f?h.attr("transform","translate("+c+","+b+")scale(-1, 1)rotate(90, 0, 0)"):h.attr("transform","translate("+c+","+b+")");this._drawSubDendrogram(this._svg.select("."+n),a.root(),0,0,d,e,!1)};
epiviz.plugins.charts.HeatmapPlot.prototype._drawSubDendrogram=function(a,b,c,e,d,f,n){var h=b.children();if(0==h.length)return c+.5*f;for(var g=d3.scale.linear().domain([0,b.distance()]).range([0,d]),l=0,m,p,t=0;t<h.length;++t){var r=c+l,q=f/b.weight()*h[t].weight(),w=g(h[t].distance()),r=this._drawSubDendrogram(a,h[t],r,e,w,q,n);a.append("line").attr("x1",e+w).attr("x2",e+d).attr("y1",r).attr("y2",r).style("stroke","#555555").style("stroke-width",1).style("shape-rendering","auto");0==t&&n&&a.append("text").attr("class",
"row-text").attr("x",Math.max(e+10,e+.5*(w+d))).attr("y",r-10).style("text-anchor","middle").text(Globalize.format(b.distance(),"n2"));if(void 0==m||m>r)m=r;if(void 0==p||p<r)p=r;l+=f/b.weight()*h[t].weight()}a.append("line").attr("x1",e+d).attr("x2",e+d).attr("y1",m).attr("y2",p).style("stroke","#555555").style("stroke-width",1).style("shape-rendering","auto");return.5*(m+p)};
epiviz.plugins.charts.HeatmapPlot.prototype._drawLabels=function(a,b,c,e,d,f,n,h,g){var l=this,m=function(a){a="name"==r?a.name():(a=a.annotation())&&r in a?a[r]:"<NA>";return w[a]=a},p=a.selectAll(".col-text"),t=0;b.length>e?p.transition().duration(500).style("opacity",0).remove():(p=p.data(b,function(a,b){return a+c[b]}),p.enter().append("text").attr("class","col-text").style("opacity","0").attr("x",0).attr("y",0).attr("transform",function(a,b){return"translate("+(b*f+.5*f)+",-5)rotate(-60)"}).text(function(a){return a}),
p.transition().duration(500).attr("x",0).attr("y",0).attr("transform",function(a,b){return"translate("+(b*f+.5*f)+",-5)rotate(-60)"}).style("opacity",null).attr("fill",function(a,b){var c=b+h;return l._globalIndexColorLabels?l.colors().getByKey(l._globalIndexColorLabels[c]):"#000000"}),p.exit().transition().duration(500).style("opacity",0).remove(),$("#"+this.id()+" .col-text").each(function(a){a=this.getBBox().width;t<a&&(t=a)}));var r=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.ROW_LABEL];
b=this.customSettingsValues()[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.SHOW_COLORS_FOR_ROW_LABELS];b||(a.selectAll(".row-color-label").remove(),e=a.selectAll(".row-text").data(d,function(a){return a.id()}),e.enter().append("text").attr("class","row-text").attr("x",0).attr("y",0).attr("transform",function(a,b){return"translate(-5,"+(b*n+.5*n)+")rotate(30)"}),e.text(function(a){return"name"==r?a.name():(a=a.annotation())&&r in a?a[r]:"<NA>"}),e.transition().duration(500).attr("x",0).attr("y",
0).attr("transform",function(a,b){return"translate(-5,"+(b*n+.5*n)+")rotate(30)"}),e.exit().remove());var q;if(b){a.selectAll(".row-text").remove();var w={};d.forEach(function(a){a=m(a);w[a]=a});q=Object.keys(w);a=a.selectAll(".row-color-label").data(d,function(a){return a.id()});a.enter().append("rect").attr("class","row-color-label").attr("x",g-l.margins().sumAxis(epiviz.ui.charts.Axis.X)).attr("y",.5*-n).attr("width",20).attr("height",n).attr("transform",function(a,b){return"translate(0,"+(b*n+
.5*n)+")"});a.style("fill",function(a){a=m(a);return l.colors().getByKey(a)});a.transition().duration(500).attr("x",g-l.margins().sumAxis(epiviz.ui.charts.Axis.X)).attr("y",.5*-n).attr("height",n).attr("transform",function(a,b){return"translate(0,"+(b*n+.5*n)+")"});a.exit().remove()}this._svg.selectAll(".chart-title").remove();this._svg.selectAll(".chart-title-color ").remove();g=this._svg.selectAll(".chart-title").data(["Min"].concat(this._colorLabels));g.enter().append("text").attr("class","chart-title").attr("font-weight",
"bold").attr("y",l.margins().top()-5-t);g.attr("fill",function(a,b){return 0==b?"#000000":l.colors().getByKey(a)}).text(function(a){return a});var u=0,x=[];$("#"+this.id()+" .chart-title").each(function(a){x.push(u);u+=this.getBBox().width+15});g.attr("x",function(a,b){return l.margins().left()+10+x[b]});this._svg.selectAll(".chart-title-color").data(["Min"].concat(this._colorLabels)).enter().append("circle").attr("class","chart-title-color").attr("cx",function(a,b){return l.margins().left()+4+x[b]}).attr("cy",
l.margins().top()-9-t).attr("r",4).style("shape-rendering","auto").style("stroke-width","0").attr("fill",function(a,b){return 0==b?"#ffffff":l.colors().getByKey(a)}).style("stroke-width",function(a,b){return b?0:1}).style("stroke","#000000");this._svg.selectAll(".row-legend").remove();this._svg.selectAll(".row-legend-color").remove();b&&(g=this._svg.selectAll(".row-legend").data(q),g.enter().append("text").attr("class","row-legend").attr("font-weight","bold").attr("x",-20),g.attr("fill",function(a){return l.colors().getByKey(a)}).text(function(a){return a}).attr("transform",
function(a,b){return"translate("+l.margins().left()+","+l.margins().top()+")"}),g.attr("y",function(a,b){return 10+15*b}),this._svg.selectAll(".row-legend-color").data(q).enter().append("rect").attr("class","chart-title-color").attr("x",-18).attr("y",function(a,b){return 2+15*b}).attr("width",10).attr("height",10).style("shape-rendering","auto").style("stroke-width","0").attr("fill",function(a){return l.colors().getByKey(a)}).style("stroke-width",0).attr("transform",function(a,b){return"translate("+
l.margins().left()+","+l.margins().top()+")"}),this._colorLabels=this._colorLabels.concat(q))};epiviz.plugins.charts.HeatmapPlot.prototype.colorLabels=function(){return this._colorLabels};epiviz.plugins.charts.HeatmapPlotType=function(a){epiviz.ui.charts.PlotType.call(this,a)};epiviz.plugins.charts.HeatmapPlotType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.PlotType.prototype);epiviz.plugins.charts.HeatmapPlotType.constructor=epiviz.plugins.charts.HeatmapPlotType;
epiviz.plugins.charts.HeatmapPlotType.prototype.createNew=function(a,b,c){return new epiviz.plugins.charts.HeatmapPlot(a,b,c)};epiviz.plugins.charts.HeatmapPlotType.prototype.typeName=function(){return"epiviz.plugins.charts.HeatmapPlot"};epiviz.plugins.charts.HeatmapPlotType.prototype.chartName=function(){return"Heatmap"};epiviz.plugins.charts.HeatmapPlotType.prototype.chartHtmlAttributeName=function(){return"heatmap"};epiviz.plugins.charts.HeatmapPlotType.prototype.measurementsFilter=function(){return function(a){return epiviz.measurements.Measurement.Type.hasValues(a.type())}};
epiviz.plugins.charts.HeatmapPlotType.prototype.isRestrictedToSameDatasourceGroup=function(){return!0};
epiviz.plugins.charts.HeatmapPlotType.prototype.customSettingsDefs=function(){var a=epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.instance();return epiviz.ui.charts.PlotType.prototype.customSettingsDefs.call(this).concat([new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.COL_LABEL,epiviz.ui.charts.CustomSetting.Type.MEASUREMENTS_METADATA,"colLabel","Columns labels"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.ROW_LABEL,
epiviz.ui.charts.CustomSetting.Type.MEASUREMENTS_ANNOTATION,"name","Row labels"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.HeatmapPlotType.CustomSettings.SHOW_COLORS_FOR_ROW_LABELS,epiviz.ui.charts.CustomSetting.Type.BOOLEAN,!1,"Row labels as colors"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.HeatmapPlotType.CustomSettings.MAX_COLUMNS,epiviz.ui.charts.CustomSetting.Type.NUMBER,40,"Max columns"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.Y_MIN,
epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,"Min Value"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.Y_MAX,epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,"Max Value"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.HeatmapPlotType.CustomSettings.CLUSTER,epiviz.ui.charts.CustomSetting.Type.CATEGORICAL,"rows","Cluster",Object.keys(epiviz.plugins.charts.HeatmapPlotType.Cluster).map(function(a){return epiviz.plugins.charts.HeatmapPlotType.Cluster[a]})),
new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.HeatmapPlotType.CustomSettings.CLUSTERING_ALG,epiviz.ui.charts.CustomSetting.Type.CATEGORICAL,a.algorithms()[0],"Clustering Algorithm",a.algorithms()),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.HeatmapPlotType.CustomSettings.CLUSTERING_METRIC,epiviz.ui.charts.CustomSetting.Type.CATEGORICAL,a.metrics()[0],"Clustering Metric",a.metrics()),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.HeatmapPlotType.CustomSettings.CLUSTERING_LINKAGE,
epiviz.ui.charts.CustomSetting.Type.CATEGORICAL,a.linkages()[0],"Clustering Linkage",a.linkages()),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.HeatmapPlotType.CustomSettings.SHOW_DENDROGRAM,epiviz.ui.charts.CustomSetting.Type.BOOLEAN,!0,"Show Dendrogram")])};epiviz.plugins.charts.HeatmapPlotType.Cluster={NONE:"none",ROWS:"rows",COLS:"columns",BOTH:"both"};
epiviz.plugins.charts.HeatmapPlotType.CustomSettings={MAX_COLUMNS:"maxColumns",CLUSTER:"cluster",CLUSTERING_ALG:"clusteringAlg",CLUSTERING_METRIC:"clusteringMetric",CLUSTERING_LINKAGE:"clusteringLinkage",SHOW_DENDROGRAM:"showDendrogram",SHOW_COLORS_FOR_ROW_LABELS:"showColorsForRowLabels"};epiviz.plugins.charts.LinePlot=function(a,b,c){epiviz.ui.charts.Plot.call(this,a,b,c);this._initialize()};epiviz.plugins.charts.LinePlot.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Plot.prototype);
epiviz.plugins.charts.LinePlot.constructor=epiviz.plugins.charts.LinePlot;epiviz.plugins.charts.LinePlot.prototype._initialize=function(){epiviz.ui.charts.Plot.prototype._initialize.call(this);this._svg.classed("line-plot",!0)};
epiviz.plugins.charts.LinePlot.prototype.draw=function(a,b,c,e){epiviz.ui.charts.Plot.prototype.draw.call(this,a,b,c,e);b=this._lastData;a=this._lastRange;if(!b||!a)return[];c=epiviz.ui.charts.CustomSetting;var d=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.Y_MIN],f=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.Y_MAX],n=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.ROW_LABEL];d==c.DEFAULT&&(d=null,b.measurements().forEach(function(a){null!==
a&&(null===d||a.minValue()<d)&&(d=a.minValue())}));f==c.DEFAULT&&(f=null,b.measurements().forEach(function(a){null!==a&&(null===f||a.maxValue()>f)&&(f=a.maxValue())}));null===d&&null===f&&(d=-1,f=1);null===d&&(d=f-1);null===f&&(f=d+1);e=epiviz.ui.charts.Axis;c=d3.scale.linear().domain([0,b.measurements().length-1]).range([0,this.width()-this.margins().sumAxis(e.X)]);e=d3.scale.linear().domain([d,f]).range([this.height()-this.margins().sumAxis(e.Y),0]);this._clearAxes();this._drawAxes(c,e,b.measurements().length,
5,void 0,void 0,void 0,void 0,void 0,void 0,b.measurements().map(function(a){return"name"==n?a.name():(a=a.annotation())&&n in a?a[n]:"<NA>"}));var h=this._svg.selectAll(".lines");if(h.empty()){var h=this._svg.append("g").attr("class","lines items"),g=h.append("g").attr("class","selected");h.append("g").attr("class","hovered");g.append("g").attr("class","hovered")}h.attr("transform","translate("+this.margins().left()+", "+this.margins().top()+")");return this._drawLines(a,b,c,e)};
epiviz.plugins.charts.LinePlot.prototype._drawLines=function(a,b,c,e){var d=this.colors(),f=this.customSettingsValues()[epiviz.plugins.charts.LinePlotType.CustomSettings.SHOW_POINTS],n=this.customSettingsValues()[epiviz.plugins.charts.LinePlotType.CustomSettings.SHOW_LINES],h=this.customSettingsValues()[epiviz.plugins.charts.LinePlotType.CustomSettings.SHOW_ERROR_BARS],g=this.customSettingsValues()[epiviz.plugins.charts.LinePlotType.CustomSettings.POINT_RADIUS],l=this.customSettingsValues()[epiviz.plugins.charts.LinePlotType.CustomSettings.LINE_THICKNESS],
m=this.customSettingsValues()[epiviz.plugins.charts.LinePlotType.CustomSettings.INTERPOLATION],p=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.COL_LABEL],t=this,r=this._svg.select(".lines"),q=b.firstSeries().globalStartIndex(),w=b.firstSeries().globalEndIndex();b.foreach(function(a,b){var c=b.globalStartIndex(),d=b.globalEndIndex();c>q&&(q=c);d<w&&(w=d)});for(var u=w-q,x=epiviz.measurements.Measurement.Type.isOrdered(b.measurements()[0].type()),z,y,B=0;B<u;++B){var A=B+
q,C=b.firstSeries().getRowByGlobalIndex(A);if(!x||void 0==a.start()||void 0==a.end()||C.start()<a.end()&&C.end()>=a.start())void 0==z&&(z=A),y=A+1}q=z;w=y;u=y-z;this.width();var D=d3.svg.line().x(function(a){return c(a.x)}).y(function(a){return e(a.y)}).interpolate(m),H=function(a){return t._globalIndexColorLabels?t._globalIndexColorLabels[a.globalIndex()]:a.metadata(p)},G=function(a){return b.measurements().map(function(c,d){var e=b.getByGlobalIndex(c,a);return{x:d,y:e?e.value:null,errMinus:e&&e.valueAnnotation?
e.valueAnnotation.errMinus:null,errPlus:e&&e.valueAnnotation?e.valueAnnotation.errPlus:null}}).filter(function(a){return null!==a.y})};a=epiviz.utils.range(u,q);var L;n?(L=a.map(function(a){var c=b.firstSeries().getRowByGlobalIndex(a);return new epiviz.ui.charts.ChartObject(sprintf("line-series-%s",a),c.start(),c.end(),G(a),a,b.measurements().map(function(c,d){return[b.getByGlobalIndex(c,a)]}),b.measurements(),"")}),n=r.selectAll(".line-series").data(L,function(a){return a.id}),n.enter().insert("g",
":first-child").attr("class","line-series item").style("opacity","0").on("mouseover",function(a){t._hover.notify(new epiviz.ui.charts.VisEventArgs(t.id(),a))}).on("mouseout",function(){t._unhover.notify(new epiviz.ui.charts.VisEventArgs(t.id()))}).each(function(a){d3.select(this).append("path").attr("class","bg-line").attr("d",D(a.values)).style("shape-rendering","auto").style("stroke-width",10).style("stroke","#dddddd").style("stroke-opacity","0.1");d3.select(this).append("path").attr("class","main-line").attr("d",
D(a.values)).style("shape-rendering","auto")}),n.transition().duration(500).style("opacity","0.7").each(function(a){var c=d.getByKey(H(b.firstSeries().getRowByGlobalIndex(a.seriesIndex)));d3.select(this).selectAll(".bg-line").attr("d",D(a.values));d3.select(this).selectAll(".main-line").attr("d",D(a.values)).style("stroke",c).style("stroke-width",l)}),n.exit().transition().duration(500).style("opacity","0").remove()):r.selectAll(".line-series").remove();f?(f=r.selectAll(".points").data(L,function(a){return a.id}),
f.enter().append("g").attr("class","points").style("opacity","0"),f.each(function(a){d3.select(this).selectAll(".data-point").remove();var f=d3.select(this).selectAll(".data-point").data(a.values);f.enter().append("g").attr("class","data-point").each(function(f){d3.select(this).append("circle").attr("cx",function(a){return c(a.x)}).attr("cy",function(a){return e(a.y)}).attr("r",g).style("stroke-width",2).attr("fill","none").attr("stroke",d.getByKey(H(b.firstSeries().getRowByGlobalIndex(a.seriesIndex))));
d3.select(this).selectAll(".error-bar").remove();h&&void 0!=f.errMinus&&void 0!=f.errPlus&&(d3.select(this).append("line").attr("x1",c(f.x)).attr("x2",c(f.x)).attr("y1",e(f.errMinus)).attr("y2",e(f.errPlus)).style("stroke",d.getByKey(H(b.firstSeries().getRowByGlobalIndex(a.seriesIndex)))).style("stroke-width",2).attr("class","error-bar"),d3.select(this).append("line").attr("x1",c(f.x)-4).attr("x2",c(f.x)+4).attr("y1",e(f.errMinus)).attr("y2",e(f.errMinus)).style("stroke",d.getByKey(H(b.firstSeries().getRowByGlobalIndex(a.seriesIndex)))).style("stroke-width",
2).attr("class","error-bar"),d3.select(this).append("line").attr("x1",c(f.x)-4).attr("x2",c(f.x)+4).attr("y1",e(f.errPlus)).attr("y2",e(f.errPlus)).style("stroke",d.getByKey(H(b.firstSeries().getRowByGlobalIndex(a.seriesIndex)))).style("stroke-width",2).attr("class","error-bar"))});f.exit().remove()}).transition().duration(500).style("opacity","1"),f.exit().transition().duration(500).style("opacity","0").remove()):r.selectAll(".points").remove();var J={};a.forEach(function(a){a=H(b.firstSeries().getRowByGlobalIndex(a));
J[a]=a});this._svg.selectAll(".chart-title").remove();this._svg.selectAll(".chart-title-color").remove();f=this._svg.selectAll(".chart-title").data(Object.keys(J));f.enter().append("text").attr("class","chart-title").attr("font-weight","bold").attr("y",t.margins().top()-5);f.attr("fill",function(a){return d.getByKey(a)}).text(function(a){return a});var M=0,V=[];$("#"+this.id()+" .chart-title").each(function(a){V.push(M);M+=this.getBBox().width+15});f.attr("x",function(a,b){return t.margins().left()+
10+V[b]});this._svg.selectAll(".chart-title-color").data(Object.keys(J)).enter().append("circle").attr("class","chart-title-color").attr("cx",function(a,b){return t.margins().left()+4+V[b]}).attr("cy",t.margins().top()-9).attr("r",4).style("shape-rendering","auto").style("stroke-width","0").style("fill",function(a){return d.getByKey(a)});return L};epiviz.plugins.charts.LinePlot.prototype.colorLabels=function(){for(var a=[],b=0;b<this.colors().size()&&20>b;++b)a.push("Color "+(b+1));return a};
epiviz.plugins.charts.LinePlotType=function(a){epiviz.ui.charts.PlotType.call(this,a)};epiviz.plugins.charts.LinePlotType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.PlotType.prototype);epiviz.plugins.charts.LinePlotType.constructor=epiviz.plugins.charts.LinePlotType;epiviz.plugins.charts.LinePlotType.prototype.createNew=function(a,b,c){return new epiviz.plugins.charts.LinePlot(a,b,c)};epiviz.plugins.charts.LinePlotType.prototype.typeName=function(){return"epiviz.plugins.charts.LinePlot"};
epiviz.plugins.charts.LinePlotType.prototype.chartName=function(){return"Line Plot"};epiviz.plugins.charts.LinePlotType.prototype.chartHtmlAttributeName=function(){return"line-plot"};epiviz.plugins.charts.LinePlotType.prototype.measurementsFilter=function(){return function(a){return a.type()==epiviz.measurements.Measurement.Type.FEATURE}};epiviz.plugins.charts.LinePlotType.prototype.isRestrictedToSameDatasourceGroup=function(){return!0};
epiviz.plugins.charts.LinePlotType.prototype.customSettingsDefs=function(){return epiviz.ui.charts.PlotType.prototype.customSettingsDefs.call(this).concat([new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.COL_LABEL,epiviz.ui.charts.CustomSetting.Type.MEASUREMENTS_METADATA,"colLabel","Columns labels"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.ROW_LABEL,epiviz.ui.charts.CustomSetting.Type.MEASUREMENTS_ANNOTATION,"name","Row labels"),
new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LinePlotType.CustomSettings.SHOW_POINTS,epiviz.ui.charts.CustomSetting.Type.BOOLEAN,!1,"Show points"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LinePlotType.CustomSettings.SHOW_LINES,epiviz.ui.charts.CustomSetting.Type.BOOLEAN,!0,"Show lines"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LinePlotType.CustomSettings.SHOW_ERROR_BARS,epiviz.ui.charts.CustomSetting.Type.BOOLEAN,!0,"Show error bars"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LinePlotType.CustomSettings.POINT_RADIUS,
epiviz.ui.charts.CustomSetting.Type.NUMBER,4,"Point radius"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LinePlotType.CustomSettings.LINE_THICKNESS,epiviz.ui.charts.CustomSetting.Type.NUMBER,3,"Line thickness"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.Y_MIN,epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,"Min Y"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.Y_MAX,epiviz.ui.charts.CustomSetting.Type.NUMBER,
epiviz.ui.charts.CustomSetting.DEFAULT,"Max Y"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LinePlotType.CustomSettings.INTERPOLATION,epiviz.ui.charts.CustomSetting.Type.CATEGORICAL,"basis","Interpolation","linear step-before step-after basis basis-open basis-closed bundle cardinal cardinal-open monotone".split(" "))])};
epiviz.plugins.charts.LinePlotType.CustomSettings={SHOW_POINTS:"showPoints",SHOW_ERROR_BARS:"showErrorBars",SHOW_LINES:"showLines",POINT_RADIUS:"pointRadius",LINE_THICKNESS:"lineThickness",INTERPOLATION:"interpolation"};epiviz.plugins.charts.StackedLinePlot=function(a,b,c){epiviz.ui.charts.Plot.call(this,a,b,c);this._initialize()};epiviz.plugins.charts.StackedLinePlot.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Plot.prototype);epiviz.plugins.charts.StackedLinePlot.constructor=epiviz.plugins.charts.StackedLinePlot;
epiviz.plugins.charts.StackedLinePlot.prototype._initialize=function(){epiviz.ui.charts.Plot.prototype._initialize.call(this);this._svg.classed("stacked-line-plot",!0)};
epiviz.plugins.charts.StackedLinePlot.prototype.draw=function(a,b,c,e){epiviz.ui.charts.Plot.prototype.draw.call(this,a,b,c,e);b=this._lastData;a=this._lastRange;if(!b||!a)return[];b=this.customSettingsValues()[epiviz.plugins.charts.StackedLinePlotType.CustomSettings.ROW_GROUP_BY];var d=this,f=function(){for(var a=0;a<d._markers.length;a++)if(d._markers[a]._type==epiviz.ui.charts.markers.VisualizationMarker.Type.GROUP_BY_MEASUREMENTS){var b=d._markers[a].id();delete d._markersMap[b];delete d._markersIndices[b];
delete d._markers[a];d._markers.length--}};a=function(a){if(!a)return null;var b;if(a.id()in d._markersMap){b=d._markersIndices[a.id()];var c=d._markers[b];if(c==a||c.type()==a.type()&&c.preMarkStr()==a.preMarkStr()&&c.markStr()==a.markStr())return null;d._markers[b]=a}else f(),b=d._markers.length,d._markers.push(a),d._markersIndices[a.id()]=b;d._markersMap[a.id()]=a};this.customSettingsValues()[epiviz.plugins.charts.StackedLinePlotType.CustomSettings.USE_GROUP_BY]?(b=new epiviz.ui.charts.markers.VisualizationMarker(epiviz.ui.charts.markers.VisualizationMarker.Type.GROUP_BY_MEASUREMENTS,
null,null,"function(data){return null}","function(m, data, preMarkResult) {return m.annotation()['"+b+"'];}"),a(b)):f();(function(){d.transformData(d._lastRange,d._unalteredData).done(function(){d._drawPlot(d._lastRange,d._lastData,c,e)});d._markersModified.notify(new epiviz.ui.charts.VisEventArgs(d._id,d._markers))})()};
epiviz.plugins.charts.StackedLinePlot.prototype._drawPlot=function(a,b,c,e){var d=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.ROW_LABEL];c=this.customSettingsValues()[epiviz.plugins.charts.StackedLinePlotType.CustomSettings.INTERPOLATION];e=0==c.indexOf("step")?b.measurements().length:b.measurements().length-1;var f=epiviz.ui.charts.Axis;e=d3.scale.linear().domain([0,e]).range([0,this.width()-this.margins().sumAxis(f.X)]);this._clearAxes();this._drawAxes(e,void 0,b.measurements().length,
5,void 0,void 0,void 0,void 0,void 0,void 0,b.measurements().map(function(a){return"name"==d?a.name():(a=a.annotation())&&d in a?a[d]:"<NA>"}),void 0,0==c.indexOf("step"));c=this._svg.selectAll(".lines");c.empty()&&(c=this._svg.append("g").attr("class","lines items"),f=c.append("g").attr("class","selected"),c.append("g").attr("class","hovered"),f.append("g").attr("class","hovered"));c.attr("transform","translate("+this.margins().left()+", "+this.margins().top()+")");return this._drawLines(a,b,e)};
epiviz.plugins.charts.StackedLinePlot.prototype._drawLines=function(a,b,c){var e=epiviz.ui.charts.Axis,d=this.colors(),f=this.customSettingsValues()[epiviz.plugins.charts.StackedLinePlotType.CustomSettings.INTERPOLATION],n=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.COL_LABEL],h=this.customSettingsValues()[epiviz.plugins.charts.StackedLinePlotType.CustomSettings.OFFSET],g=this.customSettingsValues()[epiviz.plugins.charts.StackedLinePlotType.CustomSettings.SCALE_TO_PERCENT],
l=this,m=this._svg.select(".lines"),p=b.firstSeries().globalStartIndex(),t=b.firstSeries().globalEndIndex();b.foreach(function(a,b){var c=b.globalStartIndex(),d=b.globalEndIndex();c>p&&(p=c);d<t&&(t=d)});for(var r=t-p,q=epiviz.measurements.Measurement.Type.isOrdered(this.measurements().first().type()),w,u,x=0;x<r;++x){var z=x+p,y=b.firstSeries().getRowByGlobalIndex(z);y&&(!q||void 0==a.start()||void 0==a.end()||y.start()<a.end()&&y.end()>=a.start())&&(void 0==w&&(w=z),u=z+1)}var p=w,t=u,B=epiviz.utils.range(u-
w,p);if(0==B.length)return[];var A=null;g&&(A=new epiviz.measurements.MeasurementHashtable,b.measurements().forEach(function(a){var c=B.filter(function(c){return b.getByGlobalIndex(a,c)}).map(function(c){return b.getByGlobalIndex(a,c).value}).reduce(function(a,b){return a+b});A.put(a,c)}));var C=function(a){return l._globalIndexColorLabels?l._globalIndexColorLabels[a.globalIndex()]:a.metadata(n)},D=function(a){var c=[];"step-before"==f&&c.push({x:0,y:0});var d=b.measurements(),c=c.concat(d.map(function(d,
e){var f=g?A.get(d):1,f=f||1,h=b.getByGlobalIndex(d,a);return{x:c.length+e,y:h?h.value/f:null}}));"step-after"==f&&c.push({x:c.length,y:0});return c.filter(function(a){return null!==a.y})};a=B.filter(function(a){return b.firstSeries().getRowByGlobalIndex(a)}).map(function(a){var c=b.firstSeries().getRowByGlobalIndex(a),d=b.measurements();return new epiviz.ui.charts.ChartObject(sprintf("line-series-%s",a),c.start(),c.end(),D(a),a,d.map(function(c,d){return[b.getByGlobalIndex(c,a)]}),d,"")});var r=
B.map(function(a){return D(a)}),H=d3.layout.stack().offset(h)(r),G=d3.scale.linear().domain([Math.min(0,d3.min(H,function(a){return d3.min(a,function(a){return a.y0+a.y})})),d3.max(H,function(a){return d3.max(a,function(a){return a.y0+a.y})})]).range([this.height()-this.margins().sumAxis(e.Y),0]),L=d3.svg.area().x(function(a){return c(a.x)}).y0(function(a){return G(a.y0)}).y1(function(a){return G(a.y0+a.y)}).interpolate(f),e=m.selectAll(".line-series").data(a,function(a){return a.seriesIndex});e.enter().insert("path",
":first-child").attr("class","line-series item").attr("d",function(a,b){return L(H[b])}).style("opacity","0").style("shape-rendering","auto").style("fill",function(a,c){return d.getByKey(C(b.firstSeries().getRowByGlobalIndex(a.seriesIndex)))}).on("mouseover",function(a,b){l._hover.notify(new epiviz.ui.charts.VisEventArgs(l.id(),a))}).on("mouseout",function(){l._unhover.notify(new epiviz.ui.charts.VisEventArgs(l.id()))});e.transition().duration(500).style("opacity","0.7").attr("d",function(a,b){return L(H[b])}).style("fill",
function(a,c){return d.getByKey(C(b.firstSeries().getRowByGlobalIndex(a.seriesIndex)))});e.exit().transition().duration(500).style("opacity","0").remove();var J={};B.forEach(function(a){b.firstSeries().getByGlobalIndex(a)&&(a=C(b.firstSeries().getRowByGlobalIndex(a)),J[a]=a)});this._svg.selectAll(".chart-title").remove();this._svg.selectAll(".chart-title-color ").remove();e=this._svg.selectAll(".chart-title").data(Object.keys(J));e.enter().append("text").attr("class","chart-title").attr("font-weight",
"bold").attr("y",l.margins().top()-5);e.attr("fill",function(a){return d.getByKey(a)}).text(function(a){return a});var M=0,V=[];$("#"+this.id()+" .chart-title").each(function(a){V.push(M);M+=this.getBBox().width+15});e.attr("x",function(a,b){return l.margins().left()+10+V[b]});this._svg.selectAll(".chart-title-color").data(Object.keys(J)).enter().append("circle").attr("class","chart-title-color").attr("cx",function(a,b){return l.margins().left()+4+V[b]}).attr("cy",l.margins().top()-9).attr("r",4).style("shape-rendering",
"auto").style("stroke-width","0").attr("fill",function(a){return d.getByKey(a)});return a};epiviz.plugins.charts.StackedLinePlot.prototype.colorLabels=function(){for(var a=[],b=0;b<this.colors().size()&&20>b;++b)a.push("Color "+(b+1));return a};epiviz.plugins.charts.StackedLinePlotType=function(a){epiviz.ui.charts.PlotType.call(this,a)};epiviz.plugins.charts.StackedLinePlotType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.PlotType.prototype);
epiviz.plugins.charts.StackedLinePlotType.constructor=epiviz.plugins.charts.StackedLinePlotType;epiviz.plugins.charts.StackedLinePlotType.prototype.createNew=function(a,b,c){return new epiviz.plugins.charts.StackedLinePlot(a,b,c)};epiviz.plugins.charts.StackedLinePlotType.prototype.typeName=function(){return"epiviz.plugins.charts.StackedLinePlot"};epiviz.plugins.charts.StackedLinePlotType.prototype.chartName=function(){return"Stacked Plot"};
epiviz.plugins.charts.StackedLinePlotType.prototype.chartHtmlAttributeName=function(){return"stacked-line-plot"};epiviz.plugins.charts.StackedLinePlotType.prototype.measurementsFilter=function(){return function(a){return a.type()==epiviz.measurements.Measurement.Type.FEATURE}};epiviz.plugins.charts.StackedLinePlotType.prototype.isRestrictedToSameDatasourceGroup=function(){return!0};
epiviz.plugins.charts.StackedLinePlotType.prototype.customSettingsDefs=function(){return epiviz.ui.charts.PlotType.prototype.customSettingsDefs.call(this).concat([new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.COL_LABEL,epiviz.ui.charts.CustomSetting.Type.MEASUREMENTS_METADATA,"colLabel","Color by"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.ROW_LABEL,epiviz.ui.charts.CustomSetting.Type.MEASUREMENTS_ANNOTATION,"name","Labels"),
new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.StackedLinePlotType.CustomSettings.OFFSET,epiviz.ui.charts.CustomSetting.Type.CATEGORICAL,"zero","Offset",["zero","wiggle"]),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.StackedLinePlotType.CustomSettings.INTERPOLATION,epiviz.ui.charts.CustomSetting.Type.CATEGORICAL,"step-after","Interpolation","linear step-before step-after basis basis-open basis-closed bundle cardinal cardinal-open monotone".split(" ")),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.StackedLinePlotType.CustomSettings.SCALE_TO_PERCENT,
epiviz.ui.charts.CustomSetting.Type.BOOLEAN,!0,"Scale to Percent"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.StackedLinePlotType.CustomSettings.USE_GROUP_BY,epiviz.ui.charts.CustomSetting.Type.BOOLEAN,!1,"Use Group by"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.StackedLinePlotType.CustomSettings.ROW_GROUP_BY,epiviz.ui.charts.CustomSetting.Type.MEASUREMENTS_ANNOTATION,"name","Group By")])};
epiviz.plugins.charts.StackedLinePlotType.CustomSettings={INTERPOLATION:"interpolation",OFFSET:"offset",SCALE_TO_PERCENT:"scaleToPercent",ROW_GROUP_BY:"groupBy",USE_GROUP_BY:"useGroupBy"};epiviz.ui.charts.tree.NodeSelectionType={NONE:0,LEAVES:1,NODE:2};
epiviz.ui.charts.tree.Node=function(a,b,c,e,d,f,n,h,g,l,m,p){epiviz.ui.charts.VisObject.call(this);this.id=a;this.name=b;this.children=c;this.parentId=e;this.size=d;this.depth=f;this.nchildren=n;this.nleaves=h;this.selectionType=g||epiviz.ui.charts.tree.NodeSelectionType.NONE;this.order=l;this.globalDepth=m;this.taxonomy=p};epiviz.ui.charts.tree.Node.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.VisObject.prototype);epiviz.ui.charts.tree.Node.constructor=epiviz.ui.charts.tree.Node;
epiviz.ui.charts.tree.Node.prototype.getMetadata=function(a,b,c){return 0!=a||0!=b||"lineage"!=c?null:this.id};epiviz.ui.charts.tree.Node.prototype.metadataColumns=function(){return["lineage"]};epiviz.ui.charts.tree.Node.prototype.dimensions=function(){return[1,1]};epiviz.ui.charts.tree.Node.prototype.metadataLooseCompare=function(){return!0};epiviz.ui.charts.tree.Node.dfs=function(a,b){a&&(b(a)||a.children&&a.children.forEach(function(a){epiviz.ui.charts.tree.Node.dfs(a,b)}))};
epiviz.ui.charts.tree.Node.bfs=function(a,b){if(a){var c=[];c.push(a);for(var e=0;e<c.length&&!b(c[e]);++e)c[e].nchildren&&c[e].children.forEach(function(a){c.push(a)})}};epiviz.ui.charts.tree.Node.filter=function(a,b){if(!b(a))return null;var c={},e;for(e in a)a.hasOwnProperty(e)&&"children"!=e&&(c[e]=a[e]);a.children&&(c.children=[],a.children.forEach(function(a){a=epiviz.ui.charts.tree.Node.filter(a,b);null!==a&&c.children.push(a)}));return c};
epiviz.ui.charts.tree.UiNode=function(a,b,c,e,d,f,n,h,g,l,m,p,t,r,q,w,u){epiviz.ui.charts.tree.Node.call(this,a,b,c,e,d,f,n,h,g,l,m,p);this.x=t;this.dx=r;this.y=q;this.dy=w;this.parent=u||null};epiviz.ui.charts.tree.UiNode.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.tree.Node.prototype);epiviz.ui.charts.tree.UiNode.constructor=epiviz.ui.charts.tree.UiNode;
epiviz.ui.charts.tree.UiNode.deepCopy=function(a){var b=new epiviz.ui.charts.tree.UiNode(a.id,a.name,[],a.parentId,a.size,a.depth,a.nchildren,a.nleaves,a.selectionType,a.order,a.globalDepth,a.taxonomy,a.x,a.dx,a.y,a.dy,null);a.children&&a.children.length&&a.children.forEach(function(a){a=epiviz.ui.charts.tree.UiNode.deepCopy(a);b.children.push(a);a.parent=b});return b};
epiviz.ui.charts.tree.Sunburst=function(a,b,c){epiviz.ui.charts.Visualization.call(this,a,b,c);this._partition=d3.layout.partition().value(function(a){return a.nleaves});this._x=d3.scale.linear().range([0,2*Math.PI]);this._y=this._radius=null;var e=this;this._arc=d3.svg.arc().startAngle(function(a){return Math.max(0,Math.min(2*Math.PI,e._x(a.x)))}).endAngle(function(a){return Math.max(0,Math.min(2*Math.PI,e._x(a.x+a.dx)))}).innerRadius(function(a){return Math.max(0,e._y(a.y))}).outerRadius(function(a){return Math.max(0,
e._y(a.y+a.dy))});this._animationDelay=750;this._oldUiDataMap=this._rootDepth=this._oldRootDepth=this._subtreeDepth=this._oldSubtreeDepth=this._uiData=null;this._uiDataMap={};this._selectedNode=this._referenceNode=null;this._initialize()};epiviz.ui.charts.tree.Sunburst.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Visualization.prototype);epiviz.ui.charts.tree.Sunburst.constructor=epiviz.ui.charts.tree.Sunburst;
epiviz.ui.charts.tree.Sunburst.prototype._initialize=function(){epiviz.ui.charts.Visualization.prototype._initialize.call(this);this._radius=.5*Math.min(this.width(),this.height());this._y=d3.scale.pow().exponent(1.2).range([0,this._radius])};
epiviz.ui.charts.tree.Sunburst.prototype.draw=function(a){epiviz.ui.charts.Visualization.prototype.draw.call(this,a);var b=this;a?(this._oldRootDepth=this._rootDepth,this._rootDepth=a.depth,this._referenceNode=null,this._selectedNode=this._uiDataMap[a.id],this._uiData=this._partition.nodes(a),this._oldSubtreeDepth=this._subtreeDepth,this._subtreeDepth=0,this._oldUiDataMap=this._uiDataMap,this._uiDataMap={},this._uiData.forEach(function(a){b._uiDataMap[a.id]=a;b._referenceNode&&b._referenceNode.x||
!(a.id in b._oldUiDataMap)||(b._referenceNode=a);b._subtreeDepth<a.depth+1&&(b._subtreeDepth=a.depth+1)}),this._referenceNode||(this._referenceNode=this._uiData[0]),null==this._oldSubtreeDepth&&(this._oldSubtreeDepth=this._subtreeDepth),null==this._oldRootDepth&&(this._oldRootDepth=this._rootDepth)):a=this._lastData;var c=this.width(),e=this.height(),d=this._svg.select(".sunburst-canvas");d.empty()&&(d=this._svg.append("g").attr("class","sunburst-canvas").attr("transform",sprintf("translate(%s,%s) rotate(180)",
.5*c,.5*e)));if(a)return a=d.selectAll("g").data(this._uiData,function(a){return a.id}),c=a.enter().append("g").on("click",function(a){b._select.notify(new epiviz.ui.charts.VisEventArgs(b.id(),a))}),c.append("path").attr("id",function(a){return b.id()+"-"+a.id}).attr("class","node-arc").style("fill",function(a){return b.colors().getByKey((a.children&&a.children.length?a:a.parent).id)}),c.append("text").attr("class","unselectable-text node-label").append("textPath").attr("xlink:href",function(a){return"#"+
b.id()+"-"+a.id}).attr("dx","6").attr("dy",".35em").attr("startOffset",20).text(function(a){return a.name}),d.selectAll("g").selectAll("path").transition().duration(this._animationDelay).attrTween("d",function(a){return b._nodeArcTween(a)}),d.selectAll("g").selectAll("text").transition().duration(this._animationDelay).attrTween("transform",function(a){return b._nodeLabelTransformTween(a)}).each(function(a){d3.select(this.childNodes[0]).transition().duration(b._animationDelay).attrTween("startOffset",
function(a){return b._nodeLabelStartOffsetTween(a)})}),a.exit().selectAll("text").transition().duration(this._animationDelay).style("opacity",0),a.exit().transition().delay(this._animationDelay).remove(),this._uiData};
epiviz.ui.charts.tree.Sunburst.prototype._nodeTween=function(a){var b=this._oldUiDataMap[a.id],c=this._uiDataMap[a.id];if(!b&&!c)return function(b){return a};var e,d;b||(b=c.depth+this._rootDepth-this._oldRootDepth,e=0>b,d=0>b||b>=this._subtreeDepth,b=e?0:Math.min(1,b/this._oldSubtreeDepth),b={x:d?c.x:c.x<=this._referenceNode.x?0:1,dx:e?1:d?c.dx:0,y:b,dy:d?0:c.y+c.dy-b});c||(c=b.depth-this._rootDepth+this._oldRootDepth,e=0>c,d=0>c||c>=this._subtreeDepth,c=e?0:Math.min(1,c/this._subtreeDepth),c={x:d?
b.x:b.x<=this._selectedNode.x?0:1,dx:e?1:d?b.dx:0,y:c,dy:d?0:b.y+b.dy-c});var f=d3.interpolate(b.x,c.x),n=d3.interpolate(b.dx,c.dx),h=d3.interpolate(b.y,c.y),g=d3.interpolate(b.dy,c.dy);return function(a){return{x:f(a),dx:n(a),y:h(a),dy:g(a)}}};epiviz.ui.charts.tree.Sunburst.prototype._nodeArcTween=function(a){var b=this,c=this._nodeTween(a);return function(a){return b._arc(c(a))}};
epiviz.ui.charts.tree.Sunburst.prototype._nodeLabelTransformTween=function(a){var b=this,c=this._nodeTween(a);return function(a){a=c(a);var d=b._x(a.x+(1==a.dx?0:a.dx)/2),f=(b._y(a.y+a.dy)-b._y(a.y))/2,n=Math.cos(d)*f,d=Math.sin(d)*f;return"rotate("+(1==a.dx?180:0)+") translate("+-d+","+n+")"}};epiviz.ui.charts.tree.Sunburst.prototype._nodeLabelStartOffsetTween=function(a){var b=this,c=this._nodeTween(a);return function(a){a=c(a);return b._y(a.y+a.dy)*b._x(a.dx/2)}};
epiviz.ui.charts.tree.Sunburst.prototype._nodeLabelTransform=function(a){var b=1==a.dx?0:a.dx,c=this._y(a.y),e=this._y(a.y+a.dy),b=this._x(a.x+b/2),e=(e-c)/2,c=Math.cos(b)*e,b=Math.sin(b)*e;return"rotate("+(1==a.dx?180:0)+") translate("+-b+","+c+")"};epiviz.ui.charts.tree.Sunburst.prototype._nodeLabelStartOffset=function(a){return this._y(a.y+a.dy)*this._x(a.dx/2)};
epiviz.ui.charts.tree.Icicle=function(a,b,c){epiviz.ui.charts.tree.HierarchyVisualization.call(this,a,b,c);this._animationDelay=750;this._dragging=!1;this._charWidth=10;this._nodeMargin=3;this._nodeBorder=1;this._iconSize=16;this._yScale=this._xScale=null;this._rowCtrlWidth=50;this._initialize()};epiviz.ui.charts.tree.Icicle.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.tree.HierarchyVisualization.prototype);epiviz.ui.charts.tree.Icicle.constructor=epiviz.ui.charts.tree.Icicle;
epiviz.ui.charts.tree.Icicle.prototype._initialize=function(){epiviz.ui.charts.tree.HierarchyVisualization.prototype._initialize.call(this);this._svg.classed("icicle",!0)};
epiviz.ui.charts.tree.Icicle.prototype.draw=function(a,b){var c=epiviz.ui.charts.tree.HierarchyVisualization.prototype.draw.call(this,a,b),e=this,d=epiviz.ui.charts.Axis;b||(b=this._lastData);var f=this.width(),n=this.height();this._xScale=d3.scale.linear().range([this._rowCtrlWidth,f-this.margins().sumAxis(d.X)]);this._yScale=d3.scale.pow().exponent(1.5).range([0,n-this.margins().sumAxis(d.Y)]);d=this._svg.select(".items");f=this._svg.select(".defs");d.empty()&&(d=this._svg.append("g").attr("class",
"items"),n=d.append("g").attr("class","selected"),d.append("g").attr("class","hovered"),n.append("g").attr("class","hovered"));f.empty()&&(f=this._svg.select("defs").append("g").attr("class","defs"));d.attr("transform",sprintf("translate(%s,%s)",this.margins().left(),this.margins().top()));f.attr("transform",sprintf("translate(%s,%s)",this.margins().left(),this.margins().top()));if(!b)return[];var h=function(a){a=e._getOldNode(a);return Math.max(0,e._xScale(a.x+a.dx)-e._xScale(a.x)-2*e._nodeBorder)},
g=function(a){a=e._getOldNode(a);return Math.max(0,e._yScale(a.y+a.dy)-e._yScale(a.y)-2*e._nodeBorder)},l=function(a){return e._xScale(e._getOldNode(a).x)+e._nodeBorder},m=function(a){return e._yScale(e._getOldNode(a).y)+e._nodeBorder},p=function(a){a=e._getNewNode(a);return Math.max(0,e._xScale(a.x+a.dx)-e._xScale(a.x)-2*e._nodeBorder)},t=function(a){a=e._getNewNode(a);return Math.max(0,e._yScale(a.y+a.dy)-e._yScale(a.y)-2*e._nodeBorder)},r=function(a){return e._xScale(e._getNewNode(a).x)+e._nodeBorder},
q=function(a){return e._yScale(e._getNewNode(a).y)+e._nodeBorder},w=function(a,b,d){var e=null;c.forEach(function(b){var c=r(b);q(b);var f=p(b);t(b);c<=a&&a<c+f&&b.globalDepth==d&&(e=b)});return e},u=null,x=d3.behavior.drag().origin(function(a){return{x:0,y:0}}).on("dragstart",function(a){e._svg.selectAll(".item").sort(function(b,c){return b.id!=a.id?-1:1})}).on("drag",function(a){e._dragging=!0;d3.select(this).attr("transform","translate("+d3.event.x+","+d3.event.y+")");var b=d3.mouse(e._svg[0][0]);
(b=w(b[0],b[1],a.globalDepth))&&b.parentId==a.parentId&&(u=b,e._svg.selectAll(".item").classed("selected",!1).classed("dragstart",!0),e._svg.select("#"+e.id()+"-"+a.id).classed("selected",!0).classed("dragstart",!1),e._svg.select("#"+e.id()+"-"+b.id).classed("selected",!0).classed("dragstart",!1))}).on("dragend",function(c){if(e._dragging){e._svg.selectAll(".item").classed("selected",!1).classed("dragstart",!1);d3.select(this).attr("transform",null);var d=d3.mouse(e._svg[0][0]),f=u;if(f&&f.parentId==
c.parentId&&f.id!=c.id){var g=e._uiDataMap[c.parentId],h=r(f),l=p(f),m=e._calcNodeOrder(f),n=!1;d[0]>=h+.5*l&&(n=!0);var q=null,t;g.children.forEach(function(a){var b=e._calcNodeOrder(a);if(n&&b>m&&(void 0==t||b<t)||!n&&b<m&&(void 0==t||b>t))q=a,t=b});d=q||n?!q&&n?m+1:.5*(m+t):m-1;e.nodesOrder()[c.id]=d;e.autoPropagateChanges()?e.firePropagateHierarchyChanges():setTimeout(function(){e.draw(a,b)},0)}}}),n=d.selectAll(".item").data(c,function(a){return a.id}),z=f.selectAll("clipPath").data(c,function(a){return a.id}),
x=n.enter().append("g").attr("id",function(a){return e.id()+"-"+a.id}).attr("class",function(a){var b=e.selectedNodes()[a.id];void 0==b&&(b=a.selectionType||0);return"item "+epiviz.ui.charts.tree.HierarchyVisualization.SELECTION_CLASSES[b]}).on("click",function(a){if(e._dragging)e._dragging=!1;else if(e.selectMode()){var b=e._getNewNode(a);a.selectionType=b.selectionType=e.selectNode(b)}else e.onRequestHierarchy().notify(new epiviz.ui.charts.VisEventArgs(e.id(),new epiviz.ui.controls.VisConfigSelection(void 0,
void 0,e.datasourceGroup(),e.dataprovider(),void 0,void 0,void 0,a.id)))}).on("mouseover",function(a){e._hover.notify(new epiviz.ui.charts.VisEventArgs(e.id(),a))}).on("mouseout",function(){e._unhover.notify(new epiviz.ui.charts.VisEventArgs(e.id()))}).call(x);z.enter().append("clipPath").attr("id",function(a){return e.id()+"-clip-"+a.id}).append("rect").attr("x",function(a){return l(a)+e._nodeMargin}).attr("y",function(a){return m(a)+e._nodeMargin}).attr("width",function(a){return Math.max(0,h(a)-
2*e._nodeMargin)}).attr("height",function(a){return Math.max(0,g(a)-2*e._nodeMargin)});x.append("rect").attr("x",l).attr("y",m).attr("width",h).attr("height",g);x.append("text").attr("class","unselectable-text node-label").attr("clip-path",function(a){return"url(#"+e.id()+"-clip-"+a.id+")"}).text(function(a){var b=h(a)/e._charWidth;return b<a.name.length-3?a.name.substring(0,b)+"...":a.name}).attr("x",function(a){return l(a)+.5*h(a)}).attr("y",function(a){return m(a)+.5*g(a)});x.append("circle").attr("class",
"icon-bg").attr("cx",function(a){return l(a)+e._nodeMargin+.5*e._iconSize}).attr("cy",function(a){return m(a)+g(a)-e._nodeMargin-.5*e._iconSize}).attr("r",.5*e._iconSize+2).style("fill","#ffffff").style("opacity",0);x.append("svg:foreignObject").attr("class","icon-container").attr("clip-path",function(a){return"url(#"+e.id()+"-clip-"+a.id+")"}).attr("width",this._iconSize).attr("height",this._iconSize).attr("x",function(a){return l(a)+e._nodeMargin}).attr("y",function(a){return m(a)+g(a)-e._nodeMargin-
e._iconSize}).append("xhtml:span").attr("class","unselectable-text icon").on("mouseover",function(a){d3.select(d3.select(this).node().parentNode.parentNode).select(".icon-bg").style("opacity",.3)}).on("mouseout",function(a){d3.select(d3.select(this).node().parentNode.parentNode).select(".icon-bg").style("opacity",0)}).on("mousedown",function(a){d3.event.stopPropagation()}).on("click",function(a){var b=e._getNewNode(a);a.selectionType=b.selectionType=e.selectNode(b);d3.event.stopPropagation()});f.selectAll("rect").transition().duration(this._animationDelay).attr("x",
function(a){return r(a)+e._nodeMargin}).attr("y",function(a){return q(a)+e._nodeMargin}).attr("width",function(a){return Math.max(0,p(a)-2*e._nodeMargin)}).attr("height",function(a){return Math.max(0,t(a)-2*e._nodeMargin)});d.selectAll(".item").attr("class",function(a){var b=e.selectedNodes()[a.id];void 0==b&&(b=a.selectionType||0);return"item "+epiviz.ui.charts.tree.HierarchyVisualization.SELECTION_CLASSES[b]});d.selectAll(".item").selectAll("rect").transition().duration(this._animationDelay).style("fill",
function(a){return e.colors().getByKey(a.taxonomy)}).attr("x",r).attr("y",q).attr("width",p).attr("height",t);d.selectAll(".item").selectAll(".node-label").transition().duration(this._animationDelay).attr("x",function(a){return r(a)+.5*p(a)}).attr("y",function(a){return q(a)+.5*t(a)}).tween("text",function(a){var b=d3.interpolate(h(a),p(a));return function(c){c=Math.round(b(c)/e._charWidth);this.textContent=c<a.name.length-3?a.name.substring(0,c)+"...":a.name}});d.selectAll(".item").selectAll(".icon-bg").transition().duration(this._animationDelay).attr("cx",
function(a){return r(a)+e._nodeMargin+.5*e._iconSize}).attr("cy",function(a){return q(a)+t(a)-e._nodeMargin-.5*e._iconSize});d.selectAll(".item").selectAll(".icon-container").transition().duration(this._animationDelay).attr("x",function(a){return r(a)+e._nodeMargin}).attr("y",function(a){return q(a)+t(a)-e._nodeMargin-e._iconSize});n.exit().selectAll(".node-label").transition().duration(this._animationDelay).attr("x",function(a){return r(a)+.5*p(a)}).attr("y",function(a){return q(a)+.5*t(a)});n.exit().transition().delay(this._animationDelay).remove();
this._drawRowControls(b);return c};
epiviz.ui.charts.tree.Icicle.prototype._drawRowControls=function(a){var b=this,c=function(a,c){return b._yScale((c+1)/h)-b._yScale(c/h)-2},e=function(a,c){return b._yScale(c/h)+1},d=function(a,d){var e=c(a,d)-3;return Math.min(e,b._rowCtrlWidth-2-3)/2-5},f=this._svg.select(".row-ctrls");f.empty()&&(f=this._svg.append("g").attr("class","row-ctrls"));f.attr("transform",sprintf("translate(%s,%s)",this.margins().left(),this.margins().top()));var n=this.levelsTaxonomy(),h=n.length,n=f.selectAll(".row-ctrl").data(n),
g=n.enter().append("g").style("opacity",0).attr("class","row-ctrl custom-select");g.transition().duration(this._animationDelay).style("opacity",1);n.exit().transition().duration(this._animationDelay).style("opacity",0).remove();g.append("rect").style("fill",function(a){return b.colors().getByKey(a)});f.selectAll(".row-ctrl").select("rect").attr("x",function(a,b){return 1}).attr("width",function(a,c){return b._rowCtrlWidth-2}).attr("rx",10).attr("ry",10).transition().duration(this._animationDelay).attr("y",
e).attr("height",c).style("fill",function(a){return b.colors().getByKey(a)});g.append("circle").attr("class","icon-bg").style("fill","#ffffff").style("opacity",.5);f.selectAll(".icon-bg").transition().duration(this._animationDelay).attr("cx",function(a,c){return(b._rowCtrlWidth-2)/2+1}).attr("cy",function(a,b){return e(a,b)+c(a,b)/2}).attr("r",d);g.append("svg:foreignObject").attr("class","icon-container").attr("width",function(a,b){return 2*d(a,b)}).attr("height",function(a,b){return 2*d(a,b)}).append("xhtml:span").attr("class",
"unselectable-text icon large-icon");f.selectAll(".icon-container").style("visibility",function(a,c){return 2*d(a,c)+13<b._rowCtrlWidth-2?"hidden":"visible"}).transition().duration(this._animationDelay).attr("x",function(a,c){return 1+(b._rowCtrlWidth-2)/2-d(a,c)+5}).attr("y",function(a,b){return e(a,b)+c(a,b)/2-d(a,b)+5});n.on("mouseover",function(a,b){d3.select(this).style("opacity",.8)}).on("mouseout",function(a){d3.select(this).style("opacity",1)}).on("mousedown",function(a){d3.select(this).style("opacity",
.7)}).on("mouseup",function(a){d3.select(this).style("opacity",.8)}).on("click",function(c,d){b.selectLevel(a.globalDepth+d);d3.event.stopPropagation()})};epiviz.ui.charts.tree.Icicle.prototype.doHover=function(a){if(!this._dragging){var b=this._svg.select(".items");b.classed("unhovered",!0);b.selectAll(".item").filter(function(b){return a.overlapsWith(b)}).classed("hovered",!0);b.selectAll(".item").sort(function(b,e){return a.overlapsWith(b)?1:-1})}};
epiviz.ui.charts.tree.Icicle.prototype.doUnhover=function(){this._dragging||(this._svg.select(".items").classed("unhovered",!1),this._svg.select(".items").selectAll(".item").classed("hovered",!1))};epiviz.ui.charts.tree.Icicle.prototype.doSelect=function(a){this._svg.select(".items").selectAll(".item").filter(function(b){return a.overlapsWith(b)}).classed("selected",!0)};
epiviz.ui.charts.tree.Icicle.prototype.doDeselect=function(){this._svg.select(".items").selectAll(".selected").classed("selected",!1)};epiviz.ui.charts.tree.IcicleType=function(a){epiviz.ui.charts.DataStructureVisualizationType.call(this,a)};epiviz.ui.charts.tree.IcicleType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.tree.HierarchyVisualizationType.prototype);epiviz.ui.charts.tree.IcicleType.constructor=epiviz.ui.charts.tree.IcicleType;
epiviz.ui.charts.tree.IcicleType.prototype.createNew=function(a,b,c){return new epiviz.ui.charts.tree.Icicle(a,b,c)};epiviz.ui.charts.tree.IcicleType.prototype.typeName=function(){return"epiviz.ui.charts.tree.Icicle"};epiviz.ui.charts.tree.IcicleType.prototype.chartName=function(){return"Icicle"};epiviz.ui.charts.tree.IcicleType.prototype.chartHtmlAttributeName=function(){return"icicle"};epiviz.ui.charts.tree.decoration={};
epiviz.ui.charts.tree.decoration.TogglePropagateSelectionButton=function(a,b){epiviz.ui.charts.decoration.VisualizationDecoration.call(this,a,b);this._checked=this.isChartOptionButton=!0};epiviz.ui.charts.tree.decoration.TogglePropagateSelectionButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.VisualizationDecoration.prototype);epiviz.ui.charts.tree.decoration.TogglePropagateSelectionButton.constructor=epiviz.ui.charts.tree.decoration.TogglePropagateSelectionButton;
epiviz.ui.charts.tree.decoration.TogglePropagateSelectionButton.prototype.decorate=function(){epiviz.ui.charts.decoration.VisualizationDecoration.prototype.decorate.call(this);for(var a=0,b=this.otherDecoration();b;b=b.otherDecoration())b.isChartOptionButton&&++a;var c=this,b=sprintf("%s-propagate-selection-button",this.visualization().id());this.visualization().container().append(sprintf('<div id="%1$s-container" style="position: absolute; top: 5px; right: %2$spx"><input type="checkbox" id="%1$s" %3$s /><label for="%1$s" >Toggle propagate selection</label></div>',
b,5+30*a,this._checked?'checked="checked"':""));var e=$("#"+b),d=$("#"+b+"-container");e.button({text:!1,icons:{primary:"ui-icon ui-icon-refresh"}}).click(function(){c._checked=e.is(":checked");c.visualization().setAutoPropagateChanges(c._checked)});this.visualization().container().mousemove(function(){d.show()}).mouseleave(function(){d.hide()})};epiviz.ui.charts.tree.decoration.TogglePropagateSelectionButton.prototype.checked=function(){return this._checked};
epiviz.main=function(){var a=new epiviz.Config(epiviz.Config.SETTINGS),b=new epiviz.ui.LocationManager(a),c=new epiviz.measurements.MeasurementsManager,e=new epiviz.ui.charts.ChartFactory(a),d=new epiviz.ui.charts.ChartManager(a),f=new epiviz.ui.ControlManager(a,e,d,c,b),n=new epiviz.data.DataProviderFactory(a),n=new epiviz.data.DataManager(a,n),h=null;"false"==a.useCookie?(h=new epiviz.localstorage.LocalStorageManager(epiviz.localstorage.LocalStorageManager.MODE.INCOGNITO_MODE),h.clearWorkspace(),
a.defaultWorkspaceSettings.content.charts=null):h=new epiviz.localstorage.LocalStorageManager(epiviz.localstorage.LocalStorageManager.MODE.COOKIE_MODE);var g=new epiviz.workspaces.WorkspaceManager(a,b,c,d,e),l=new epiviz.workspaces.UserManager(a),m=new epiviz.ui.WebArgsManager(b,g),b=new epiviz.EpiViz(a,b,c,f,n,e,d,g,l,m,h);epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.initialize(a);b.start()};goog.exportSymbol("epiviz.main",epiviz.main);
