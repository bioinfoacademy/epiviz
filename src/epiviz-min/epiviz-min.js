(function(a,b){function e(a){var b=rb[a]={};y.each(a.split(C),function(a,c){b[c]=!0});return b}function c(a,c,d){if(d===b&&1===a.nodeType)if(d="data-"+c.replace(Wa,"-$1").toLowerCase(),d=a.getAttribute(d),"string"===typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:+d+""===d?+d:gb.test(d)?y.parseJSON(d):d}catch(e){}y.data(a,c,d)}else d=b;return d}function d(a){for(var b in a)if(("data"!==b||!y.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function f(){return!1}function n(){return!0}
function h(a){return!a||!a.parentNode||11===a.parentNode.nodeType}function g(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function m(a,b,c){b=b||0;if(y.isFunction(b))return y.grep(a,function(a,d){return!!b.call(a,d,a)===c});if(b.nodeType)return y.grep(a,function(a,d){return a===b===c});if("string"===typeof b){var d=y.grep(a,function(a){return 1===a.nodeType});if(ca.test(b))return y.filter(b,d,!c);b=y.filter(b,d)}return y.grep(a,function(a,d){return 0<=y.inArray(a,b)===c})}function p(a){var b=
oa.split("|");a=a.createDocumentFragment();if(a.createElement)for(;b.length;)a.createElement(b.pop());return a}function r(a,b){return a.getElementsByTagName(b)[0]||a.appendChild(a.ownerDocument.createElement(b))}function t(a,b){if(1===b.nodeType&&y.hasData(a)){var c,d,e;d=y._data(a);var f=y._data(b,d),g=d.events;if(g)for(c in delete f.handle,f.events={},g)for(d=0,e=g[c].length;d<e;d++)y.event.add(b,c,g[c][d]);f.data&&(f.data=y.extend({},f.data))}}function l(a,b){var c;1===b.nodeType&&(b.clearAttributes&&
b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),y.support.html5Clone&&a.innerHTML&&!y.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&bd.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.selected=a.defaultSelected:"input"===c||"textarea"===c?b.defaultValue=a.defaultValue:"script"===c&&b.text!==a.text&&(b.text=a.text),b.removeAttribute(y.expando))}
function q(a){return"undefined"!==typeof a.getElementsByTagName?a.getElementsByTagName("*"):"undefined"!==typeof a.querySelectorAll?a.querySelectorAll("*"):[]}function w(a){bd.test(a.type)&&(a.defaultChecked=a.checked)}function u(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=Mf.length;e--;)if(b=Mf[e]+c,b in a)return b;return d}function v(a,b){a=b||a;return"none"===y.css(a,"display")||!y.contains(a.ownerDocument,a)}function E(a,b){for(var c,d,e=[],f=0,g=a.length;f<g;f++)c=
a[f],c.style&&(e[f]=y._data(c,"olddisplay"),b?(e[f]||"none"!==c.style.display||(c.style.display=""),""===c.style.display&&v(c)&&(e[f]=y._data(c,"olddisplay",z(c.nodeName)))):(d=lb(c,"display"),e[f]||"none"===d||y._data(c,"olddisplay",d)));for(f=0;f<g;f++)c=a[f],!c.style||b&&"none"!==c.style.display&&""!==c.style.display||(c.style.display=b?e[f]||"":"none");return a}function A(a,b,c){return(a=R.exec(b))?Math.max(0,a[1]-(c||0))+(a[2]||"px"):b}function K(a,b,c,d){b=c===(d?"border":"content")?4:"width"===
b?1:0;for(var e=0;4>b;b+=2)"margin"===c&&(e+=y.css(a,c+pc[b],!0)),d?("content"===c&&(e-=parseFloat(lb(a,"padding"+pc[b]))||0),"margin"!==c&&(e-=parseFloat(lb(a,"border"+pc[b]+"Width"))||0)):(e+=parseFloat(lb(a,"padding"+pc[b]))||0,"padding"!==c&&(e+=parseFloat(lb(a,"border"+pc[b]+"Width"))||0));return e}function F(a,b,c){var d="width"===b?a.offsetWidth:a.offsetHeight,e=!0,f=y.support.boxSizing&&"border-box"===y.css(a,"boxSizing");if(0>=d||null==d){d=lb(a,b);if(0>d||null==d)d=a.style[b];if(be.test(d))return d;
e=f&&(y.support.boxSizingReliable||d===a.style[b]);d=parseFloat(d)||0}return d+K(a,b,c||(f?"border":"content"),e)+"px"}function z(a){if(Fa[a])return Fa[a];var b=y("<"+a+">").appendTo(M.body),c=b.css("display");b.remove();if("none"===c||""===c)zc=M.body.appendChild(zc||y.extend(M.createElement("iframe"),{frameBorder:0,width:0,height:0})),cd&&zc.createElement||(cd=(zc.contentWindow||zc.contentDocument).document,cd.write("<!doctype html><html><body>"),cd.close()),b=cd.body.appendChild(cd.createElement(a)),
c=lb(b,"display"),M.body.removeChild(zc);return Fa[a]=c}function B(a,b,c,d){var e;if(y.isArray(b))y.each(b,function(b,e){c||lg.test(a)?d(a,e):B(a+"["+("object"===typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==y.type(b))d(a,b);else for(e in b)B(a+"["+e+"]",b[e],c,d)}function H(a){return function(b,c){"string"!==typeof b&&(c=b,b="*");var d,e,f=b.toLowerCase().split(C),g=0,h=f.length;if(y.isFunction(c))for(;g<h;g++)d=f[g],(e=/^\+/.test(d))&&(d=d.substr(1)||"*"),d=a[d]=a[d]||[],d[e?"unshift":"push"](c)}}
function G(a,c,d,e,f,g){f=f||c.dataTypes[0];g=g||{};g[f]=!0;var h;f=a[f];for(var m=0,l=f?f.length:0,q=a===ce;m<l&&(q||!h);m++)h=f[m](c,d,e),"string"===typeof h&&(!q||g[h]?h=b:(c.dataTypes.unshift(h),h=G(a,c,d,e,h,g)));!q&&h||g["*"]||(h=G(a,c,d,e,"*",g));return h}function I(a,c){var d,e,f=y.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((f[d]?a:e||(e={}))[d]=c[d]);e&&y.extend(!0,a,e)}function N(){try{return new a.XMLHttpRequest}catch(b){}}function L(){setTimeout(function(){Bb=b},0);return Bb=y.now()}
function x(a,b){y.each(b,function(b,c){for(var d=(Pc[b]||[]).concat(Pc["*"]),e=0,f=d.length;e<f&&!d[e].call(a,b,c);e++);})}function S(a,b,c){var d=0,e=Gc.length,f=y.Deferred().always(function(){delete g.elem}),g=function(){for(var b=Bb||L(),b=Math.max(0,h.startTime+h.duration-b),c=1-(b/h.duration||0),d=0,e=h.tweens.length;d<e;d++)h.tweens[d].run(c);f.notifyWith(a,[h,c,b]);if(1>c&&e)return b;f.resolveWith(a,[h]);return!1},h=f.promise({elem:a,props:y.extend({},b),opts:y.extend(!0,{specialEasing:{}},
c),originalProperties:b,originalOptions:c,startTime:Bb||L(),duration:c.duration,tweens:[],createTween:function(b,c,d){b=y.Tween(a,h.opts,b,c,h.opts.specialEasing[b]||h.opts.easing);h.tweens.push(b);return b},stop:function(b){for(var c=0,d=b?h.tweens.length:0;c<d;c++)h.tweens[c].run(1);b?f.resolveWith(a,[h,b]):f.rejectWith(a,[h,b]);return this}});c=h.props;for(D(c,h.opts.specialEasing);d<e;d++)if(b=Gc[d].call(h,a,c,h.opts))return b;x(h,c);y.isFunction(h.opts.start)&&h.opts.start.call(a,h);y.fx.timer(y.extend(g,
{anim:h,queue:h.opts.queue,elem:a}));return h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always)}function D(a,b){var c,d,e,f,g;for(c in a)if(d=y.camelCase(c),e=b[d],f=a[c],y.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),(g=y.cssHooks[d])&&"expand"in g)for(c in f=g.expand(f),delete a[d],f)c in a||(a[c]=f[c],b[c]=e);else b[d]=e}function J(a,b,c,d,e){return new J.prototype.init(a,b,c,d,e)}function V(a,b){var c,d={height:a},e=0;for(b=b?1:
0;4>e;e+=2-b)c=pc[e],d["margin"+c]=d["padding"+c]=a;b&&(d.opacity=d.width=a);return d}function Y(a){return y.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var W,U,M=a.document,Q=a.location,X=a.navigator,ea=a.jQuery,O=a.$,aa=Array.prototype.push,ia=Array.prototype.slice,ta=Array.prototype.indexOf,da=Object.prototype.toString,ha=Object.prototype.hasOwnProperty,Ba=String.prototype.trim,y=function(a,b){return new y.fn.init(a,b,W)},za=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,pa=/\S/,
C=/\s+/,pb=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Ra=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,Ka=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Xa=/^[\],:{}\s]*$/,Kb=/(?:^|:|,)(?:\s*\[)+/g,Fb=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,hb=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,Ga=/^-ms-/,Za=/-([\da-z])/gi,ab=function(a,b){return(b+"").toUpperCase()},Gb=function(){M.addEventListener?(M.removeEventListener("DOMContentLoaded",Gb,!1),y.ready()):"complete"===M.readyState&&(M.detachEvent("onreadystatechange",
Gb),y.ready())},ib={};y.fn=y.prototype={constructor:y,init:function(a,c,d){var e;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if("string"===typeof a){e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&3<=a.length?[null,a,null]:Ra.exec(a);if(!e||!e[1]&&c)return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a);if(e[1])return a=(c=c instanceof y?c[0]:c)&&c.nodeType?c.ownerDocument||c:M,a=y.parseHTML(e[1],a,!0),Ka.test(e[1])&&y.isPlainObject(c)&&this.attr.call(a,
c,!0),y.merge(this,a);if((c=M.getElementById(e[2]))&&c.parentNode){if(c.id!==e[2])return d.find(a);this.length=1;this[0]=c}this.context=M;this.selector=a;return this}if(y.isFunction(a))return d.ready(a);a.selector!==b&&(this.selector=a.selector,this.context=a.context);return y.makeArray(a,this)},selector:"",jquery:"1.8.2",length:0,size:function(){return this.length},toArray:function(){return ia.call(this)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a,
b,c){a=y.merge(this.constructor(),a);a.prevObject=this;a.context=this.context;"find"===b?a.selector=this.selector+(this.selector?" ":"")+c:b&&(a.selector=this.selector+"."+b+"("+c+")");return a},each:function(a,b){return y.each(this,a,b)},ready:function(a){y.ready.promise().done(a);return this},eq:function(a){a=+a;return-1===a?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(ia.apply(this,arguments),"slice",
ia.call(arguments).join(","))},map:function(a){return this.pushStack(y.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:aa,sort:[].sort,splice:[].splice};y.fn.init.prototype=y.fn;y.extend=y.fn.extend=function(){var a,c,d,e,f,g=arguments[0]||{},h=1,m=arguments.length,l=!1;"boolean"===typeof g&&(l=g,g=arguments[1]||{},h=2);"object"===typeof g||y.isFunction(g)||(g={});m===h&&(g=this,--h);for(;h<m;h++)if(null!=(a=arguments[h]))for(c in a)d=
g[c],e=a[c],g!==e&&(l&&e&&(y.isPlainObject(e)||(f=y.isArray(e)))?(f?(f=!1,d=d&&y.isArray(d)?d:[]):d=d&&y.isPlainObject(d)?d:{},g[c]=y.extend(l,d,e)):e!==b&&(g[c]=e));return g};y.extend({noConflict:function(b){a.$===y&&(a.$=O);b&&a.jQuery===y&&(a.jQuery=ea);return y},isReady:!1,readyWait:1,holdReady:function(a){a?y.readyWait++:y.ready(!0)},ready:function(a){if(!0===a?!--y.readyWait:!y.isReady){if(!M.body)return setTimeout(y.ready,1);y.isReady=!0;!0!==a&&0<--y.readyWait||(U.resolveWith(M,[y]),y.fn.trigger&&
y(M).trigger("ready").off("ready"))}},isFunction:function(a){return"function"===y.type(a)},isArray:Array.isArray||function(a){return"array"===y.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):ib[da.call(a)]||"object"},isPlainObject:function(a){if(!a||"object"!==y.type(a)||a.nodeType||y.isWindow(a))return!1;try{if(a.constructor&&!ha.call(a,"constructor")&&!ha.call(a.constructor.prototype,
"isPrototypeOf"))return!1}catch(c){return!1}for(var d in a);return d===b||ha.call(a,d)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw Error(a);},parseHTML:function(a,b,c){var d;if(!a||"string"!==typeof a)return null;"boolean"===typeof b&&(c=b,b=0);b=b||M;if(d=Ka.exec(a))return[b.createElement(d[1])];d=y.buildFragment([a],b,c?null:[]);return y.merge([],(d.cacheable?y.clone(d.fragment):d.fragment).childNodes)},parseJSON:function(b){if(!b||"string"!==typeof b)return null;
b=y.trim(b);if(a.JSON&&a.JSON.parse)return a.JSON.parse(b);if(Xa.test(b.replace(Fb,"@").replace(hb,"]").replace(Kb,"")))return(new Function("return "+b))();y.error("Invalid JSON: "+b)},parseXML:function(c){var d,e;if(!c||"string"!==typeof c)return null;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(f){d=b}d&&d.documentElement&&!d.getElementsByTagName("parsererror").length||y.error("Invalid XML: "+c);
return d},noop:function(){},globalEval:function(b){b&&pa.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(Ga,"ms-").replace(Za,ab)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,c,d){var e,f=0,g=a.length,h=g===b||y.isFunction(a);if(d)if(h)for(e in a){if(!1===c.apply(a[e],d))break}else for(;f<g&&!1!==c.apply(a[f++],d););else if(h)for(e in a){if(!1===c.call(a[e],e,a[e]))break}else for(;f<g&&!1!==
c.call(a[f],f,a[f++]););return a},trim:Ba&&!Ba.call("\ufeff\u00a0")?function(a){return null==a?"":Ba.call(a)}:function(a){return null==a?"":(a+"").replace(pb,"")},makeArray:function(a,b){var c,d=b||[];null!=a&&(c=y.type(a),null==a.length||"string"===c||"function"===c||"regexp"===c||y.isWindow(a)?aa.call(d,a):y.merge(d,a));return d},inArray:function(a,b,c){var d;if(b){if(ta)return ta.call(b,a,c);d=b.length;for(c=c?0>c?Math.max(0,d+c):c:0;c<d;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,
c){var d=c.length,e=a.length,f=0;if("number"===typeof d)for(;f<d;f++)a[e++]=c[f];else for(;c[f]!==b;)a[e++]=c[f++];a.length=e;return a},grep:function(a,b,c){var d,e=[],f=0,g=a.length;for(c=!!c;f<g;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(a,c,d){var e,f,g=[],h=0,m=a.length;if(a instanceof y||m!==b&&"number"===typeof m&&(0<m&&a[0]&&a[m-1]||0===m||y.isArray(a)))for(;h<m;h++)e=c(a[h],h,d),null!=e&&(g[g.length]=e);else for(f in a)e=c(a[f],f,d),null!=e&&(g[g.length]=e);return g.concat.apply([],
g)},guid:1,proxy:function(a,c){var d,e;"string"===typeof c&&(d=a[c],c=a,a=d);if(!y.isFunction(a))return b;e=ia.call(arguments,2);d=function(){return a.apply(c,e.concat(ia.call(arguments)))};d.guid=a.guid=a.guid||y.guid++;return d},access:function(a,c,d,e,f,g,h){var m,l=null==d,q=0,n=a.length;if(d&&"object"===typeof d){for(q in d)y.access(a,c,q,d[q],1,g,e);f=1}else if(e!==b){m=h===b&&y.isFunction(e);l&&(m?(m=c,c=function(a,b,c){return m.call(y(a),c)}):(c.call(a,e),c=null));if(c)for(;q<n;q++)c(a[q],
d,m?e.call(a[q],q,c(a[q],d)):e,h);f=1}return f?a:l?c.call(a):n?c(a[0],d):g},now:function(){return(new Date).getTime()}});y.ready.promise=function(b){if(!U)if(U=y.Deferred(),"complete"===M.readyState)setTimeout(y.ready,1);else if(M.addEventListener)M.addEventListener("DOMContentLoaded",Gb,!1),a.addEventListener("load",y.ready,!1);else{M.attachEvent("onreadystatechange",Gb);a.attachEvent("onload",y.ready);var c=!1;try{c=null==a.frameElement&&M.documentElement}catch(d){}c&&c.doScroll&&function sd(){if(!y.isReady){try{c.doScroll("left")}catch(a){return setTimeout(sd,
50)}y.ready()}}()}return U.promise(b)};y.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){ib["[object "+b+"]"]=b.toLowerCase()});W=y(M);var rb={};y.Callbacks=function(a){a="string"===typeof a?rb[a]||e(a):y.extend({},a);var c,d,f,g,h,m,l=[],q=!a.once&&[],n=function(b){c=a.memory&&b;d=!0;m=g||0;g=0;h=l.length;for(f=!0;l&&m<h;m++)if(!1===l[m].apply(b[0],b[1])&&a.stopOnFalse){c=!1;break}f=!1;l&&(q?q.length&&n(q.shift()):c?l=[]:p.disable())},p={add:function(){if(l){var b=
l.length;(function Ee(b){y.each(b,function(b,c){var d=y.type(c);"function"!==d||a.unique&&p.has(c)?c&&c.length&&"string"!==d&&Ee(c):l.push(c)})})(arguments);f?h=l.length:c&&(g=b,n(c))}return this},remove:function(){l&&y.each(arguments,function(a,b){for(var c;-1<(c=y.inArray(b,l,c));)l.splice(c,1),f&&(c<=h&&h--,c<=m&&m--)});return this},has:function(a){return-1<y.inArray(a,l)},empty:function(){l=[];return this},disable:function(){l=q=c=b;return this},disabled:function(){return!l},lock:function(){q=
b;c||p.disable();return this},locked:function(){return!q},fireWith:function(a,b){b=b||[];b=[a,b.slice?b.slice():b];!l||d&&!q||(f?q.push(b):n(b));return this},fire:function(){p.fireWith(this,arguments);return this},fired:function(){return!!d}};return p};y.extend({Deferred:function(a){var b=[["resolve","done",y.Callbacks("once memory"),"resolved"],["reject","fail",y.Callbacks("once memory"),"rejected"],["notify","progress",y.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){e.done(arguments).fail(arguments);
return this},then:function(){var a=arguments;return y.Deferred(function(c){y.each(b,function(b,d){var f=d[0],g=a[b];e[d[1]](y.isFunction(g)?function(){var a=g.apply(this,arguments);if(a&&y.isFunction(a.promise))a.promise().done(c.resolve).fail(c.reject).progress(c.notify);else c[f+"With"](this===e?c:this,[a])}:c[f])});a=null}).promise()},promise:function(a){return null!=a?y.extend(a,d):d}},e={};d.pipe=d.then;y.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add;h&&g.add(function(){c=h},b[a^1][2].disable,
b[2][2].lock);e[f[0]]=g.fire;e[f[0]+"With"]=g.fireWith});d.promise(e);a&&a.call(e,e);return e},when:function(a){var b=0,c=ia.call(arguments),d=c.length,e=1!==d||a&&y.isFunction(a.promise)?d:0,f=1===e?a:y.Deferred(),g=function(a,b,c){return function(d){b[a]=this;c[a]=1<arguments.length?ia.call(arguments):d;c===h?f.notifyWith(b,c):--e||f.resolveWith(b,c)}},h,m,l;if(1<d)for(h=Array(d),m=Array(d),l=Array(d);b<d;b++)c[b]&&y.isFunction(c[b].promise)?c[b].promise().done(g(b,l,c)).fail(f.reject).progress(g(b,
m,h)):--e;e||f.resolveWith(l,c);return f.promise()}});y.support=function(){var b,c,d,e,f,g,h,m=M.createElement("div");m.setAttribute("className","t");m.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";c=m.getElementsByTagName("*");d=m.getElementsByTagName("a")[0];d.style.cssText="top:1px;float:left;opacity:.5";if(!c||!c.length)return{};e=M.createElement("select");f=e.appendChild(M.createElement("option"));c=m.getElementsByTagName("input")[0];b={leadingWhitespace:3===
m.firstChild.nodeType,tbody:!m.getElementsByTagName("tbody").length,htmlSerialize:!!m.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:"/a"===d.getAttribute("href"),opacity:/^0.5/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:"on"===c.value,optSelected:f.selected,getSetAttribute:"t"!==m.className,enctype:!!M.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==M.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===M.compatMode,
submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1};c.checked=!0;b.noCloneChecked=c.cloneNode(!0).checked;e.disabled=!0;b.optDisabled=!f.disabled;try{delete m.test}catch(l){b.deleteExpando=!1}!m.addEventListener&&m.attachEvent&&m.fireEvent&&(m.attachEvent("onclick",d=function(){b.noCloneEvent=!1}),m.cloneNode(!0).fireEvent("onclick"),m.detachEvent("onclick",
d));c=M.createElement("input");c.value="t";c.setAttribute("type","radio");b.radioValue="t"===c.value;c.setAttribute("checked","checked");c.setAttribute("name","t");m.appendChild(c);d=M.createDocumentFragment();d.appendChild(m.lastChild);b.checkClone=d.cloneNode(!0).cloneNode(!0).lastChild.checked;b.appendChecked=c.checked;d.removeChild(c);d.appendChild(m);if(m.attachEvent)for(g in{submit:!0,change:!0,focusin:!0})c="on"+g,h=c in m,h||(m.setAttribute(c,"return;"),h="function"===typeof m[c]),b[g+"Bubbles"]=
h;y(function(){var c,d,e,f=M.getElementsByTagName("body")[0];f&&(c=M.createElement("div"),c.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",f.insertBefore(c,f.firstChild),d=M.createElement("div"),c.appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",e=d.getElementsByTagName("td"),e[0].style.cssText="padding:0;margin:0;border:0;display:none",h=0===e[0].offsetHeight,e[0].style.display="",e[1].style.display="none",b.reliableHiddenOffsets=
h&&0===e[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",b.boxSizing=4===d.offsetWidth,b.doesNotIncludeMarginInBodyOffset=1!==f.offsetTop,a.getComputedStyle&&(b.pixelPosition="1%"!==(a.getComputedStyle(d,null)||{}).top,b.boxSizingReliable="4px"===(a.getComputedStyle(d,null)||{width:"4px"}).width,e=M.createElement("div"),e.style.cssText=
d.style.cssText="padding:0;margin:0;border:0;display:block;overflow:hidden;",e.style.marginRight=e.style.width="0",d.style.width="1px",d.appendChild(e),b.reliableMarginRight=!parseFloat((a.getComputedStyle(e,null)||{}).marginRight)),"undefined"!==typeof d.style.zoom&&(d.innerHTML="",d.style.cssText="padding:0;margin:0;border:0;display:block;overflow:hidden;width:1px;padding:1px;display:inline;zoom:1",b.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.style.overflow="visible",d.innerHTML=
"<div></div>",d.firstChild.style.width="5px",b.shrinkWrapBlocks=3!==d.offsetWidth,c.style.zoom=1),f.removeChild(c))});d.removeChild(m);c=d=e=f=c=d=m=null;return b}();var gb=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Wa=/([A-Z])/g;y.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(y.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?y.cache[a[y.expando]]:a[y.expando];return!!a&&!d(a)},data:function(a,
c,d,e){if(y.acceptData(a)){var f=y.expando,g="string"===typeof c,h=a.nodeType,m=h?y.cache:a,l=h?a[f]:a[f]&&f;if(l&&m[l]&&(e||m[l].data)||!g||d!==b){l||(h?a[f]=l=y.deletedIds.pop()||y.guid++:l=f);m[l]||(m[l]={},h||(m[l].toJSON=y.noop));if("object"===typeof c||"function"===typeof c)e?m[l]=y.extend(m[l],c):m[l].data=y.extend(m[l].data,c);a=m[l];e||(a.data||(a.data={}),a=a.data);d!==b&&(a[y.camelCase(c)]=d);g?(d=a[c],null==d&&(d=a[y.camelCase(c)])):d=a;return d}}},removeData:function(a,b,c){if(y.acceptData(a)){var e,
f,g,h=a.nodeType,m=h?y.cache:a,l=h?a[y.expando]:y.expando;if(m[l]){if(b&&(e=c?m[l]:m[l].data)){y.isArray(b)||(b in e?b=[b]:(b=y.camelCase(b),b=b in e?[b]:b.split(" ")));f=0;for(g=b.length;f<g;f++)delete e[b[f]];if(!(c?d:y.isEmptyObject)(e))return}if(!c&&(delete m[l].data,!d(m[l])))return;h?y.cleanData([a],!0):y.support.deleteExpando||m!=m.window?delete m[l]:m[l]=null}}},_data:function(a,b,c){return y.data(a,b,c,!0)},acceptData:function(a){var b=a.nodeName&&y.noData[a.nodeName.toLowerCase()];return!b||
!0!==b&&a.getAttribute("classid")===b}});y.fn.extend({data:function(a,d){var e,f,g,h,m,l=this[0],q=0,n=null;if(a===b){if(this.length&&(n=y.data(l),1===l.nodeType&&!y._data(l,"parsedAttrs"))){g=l.attributes;for(m=g.length;q<m;q++)h=g[q].name,h.indexOf("data-")||(h=y.camelCase(h.substring(5)),c(l,h,n[h]));y._data(l,"parsedAttrs",!0)}return n}if("object"===typeof a)return this.each(function(){y.data(this,a)});e=a.split(".",2);e[1]=e[1]?"."+e[1]:"";f=e[1]+"!";return y.access(this,function(d){if(d===b)return n=
this.triggerHandler("getData"+f,[e[0]]),n===b&&l&&(n=y.data(l,a),n=c(l,a,n)),n===b&&e[1]?this.data(e[0]):n;e[1]=d;this.each(function(){var b=y(this);b.triggerHandler("setData"+f,e);y.data(this,a,d);b.triggerHandler("changeData"+f,e)})},null,d,1<arguments.length,null,!1)},removeData:function(a){return this.each(function(){y.removeData(this,a)})}});y.extend({queue:function(a,b,c){var d;if(a)return b=(b||"fx")+"queue",d=y._data(a,b),c&&(!d||y.isArray(c)?d=y._data(a,b,y.makeArray(c)):d.push(c)),d||[]},
dequeue:function(a,b){b=b||"fx";var c=y.queue(a,b),d=c.length,e=c.shift(),f=y._queueHooks(a,b),g=function(){y.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--);e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f));!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return y._data(a,c)||y._data(a,c,{empty:y.Callbacks("once memory").add(function(){y.removeData(a,b+"queue",!0);y.removeData(a,c,!0)})})}});y.fn.extend({queue:function(a,c){var d=2;"string"!==typeof a&&(c=
a,a="fx",d--);return arguments.length<d?y.queue(this[0],a):c===b?this:this.each(function(){var b=y.queue(this,a,c);y._queueHooks(this,a);"fx"===a&&"inprogress"!==b[0]&&y.dequeue(this,a)})},dequeue:function(a){return this.each(function(){y.dequeue(this,a)})},delay:function(a,b){a=y.fx?y.fx.speeds[a]||a:a;return this.queue(b||"fx",function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var d,e=1,f=y.Deferred(),
g=this,h=this.length,m=function(){--e||f.resolveWith(g,[g])};"string"!==typeof a&&(c=a,a=b);for(a=a||"fx";h--;)(d=y._data(g[h],a+"queueHooks"))&&d.empty&&(e++,d.empty.add(m));m();return f.promise(c)}});var qa,Ha,sb,Ta=/[\t\r\n]/g,Ya=/\r/g,ra=/^(?:button|input)$/i,qc=/^(?:button|input|object|select|textarea)$/i,tb=/^a(?:rea|)$/i,xb=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Ab=y.support.getSetAttribute;y.fn.extend({attr:function(a,
b){return y.access(this,y.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){y.removeAttr(this,a)})},prop:function(a,b){return y.access(this,y.prop,a,b,1<arguments.length)},removeProp:function(a){a=y.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g,h;if(y.isFunction(a))return this.each(function(b){y(this).addClass(a.call(this,b,this.className))});if(a&&"string"===typeof a)for(b=a.split(C),c=0,d=
this.length;c<d;c++)if(e=this[c],1===e.nodeType)if(e.className||1!==b.length){f=" "+e.className+" ";g=0;for(h=b.length;g<h;g++)0>f.indexOf(" "+b[g]+" ")&&(f+=b[g]+" ");e.className=y.trim(f)}else e.className=a;return this},removeClass:function(a){var c,d,e,f,g,h,m;if(y.isFunction(a))return this.each(function(b){y(this).removeClass(a.call(this,b,this.className))});if(a&&"string"===typeof a||a===b)for(c=(a||"").split(C),h=0,m=this.length;h<m;h++)if(e=this[h],1===e.nodeType&&e.className){d=(" "+e.className+
" ").replace(Ta," ");f=0;for(g=c.length;f<g;f++)for(;0<=d.indexOf(" "+c[f]+" ");)d=d.replace(" "+c[f]+" "," ");e.className=a?y.trim(d):""}return this},toggleClass:function(a,b){var c=typeof a,d="boolean"===typeof b;return y.isFunction(a)?this.each(function(c){y(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var e,f=0,g=y(this),h=b,m=a.split(C);e=m[f++];)h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e);else if("undefined"===c||"boolean"===c)this.className&&
y._data(this,"__className__",this.className),this.className=this.className||!1===a?"":y._data(this,"__className__")||""})},hasClass:function(a){a=" "+a+" ";for(var b=0,c=this.length;b<c;b++)if(1===this[b].nodeType&&0<=(" "+this[b].className+" ").replace(Ta," ").indexOf(a))return!0;return!1},val:function(a){var c,d,e,f=this[0];if(arguments.length)return e=y.isFunction(a),this.each(function(d){var f=y(this);1===this.nodeType&&(d=e?a.call(this,d,f.val()):a,null==d?d="":"number"===typeof d?d+="":y.isArray(d)&&
(d=y.map(d,function(a){return null==a?"":a+""})),c=y.valHooks[this.type]||y.valHooks[this.nodeName.toLowerCase()],c&&"set"in c&&c.set(this,d,"value")!==b||(this.value=d))});if(f){if((c=y.valHooks[f.type]||y.valHooks[f.nodeName.toLowerCase()])&&"get"in c&&(d=c.get(f,"value"))!==b)return d;d=f.value;return"string"===typeof d?d.replace(Ya,""):null==d?"":d}}});y.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d=
a.selectedIndex,e=[],f=a.options,g="select-one"===a.type;if(0>d)return null;a=g?d:0;for(c=g?d+1:f.length;a<c;a++)if(b=f[a],!(!b.selected||(y.support.optDisabled?b.disabled:null!==b.getAttribute("disabled"))||b.parentNode.disabled&&y.nodeName(b.parentNode,"optgroup"))){b=y(b).val();if(g)return b;e.push(b)}return g&&!e.length&&f.length?y(f[d]).val():e},set:function(a,b){var c=y.makeArray(b);y(a).find("option").each(function(){this.selected=0<=y.inArray(y(this).val(),c)});c.length||(a.selectedIndex=
-1);return c}}},attrFn:{},attr:function(a,c,d,e){var f,g,h=a.nodeType;if(a&&3!==h&&8!==h&&2!==h){if(e&&y.isFunction(y.fn[c]))return y(a)[c](d);if("undefined"===typeof a.getAttribute)return y.prop(a,c,d);if(e=1!==h||!y.isXMLDoc(a))c=c.toLowerCase(),g=y.attrHooks[c]||(xb.test(c)?Ha:qa);if(d!==b)if(null===d)y.removeAttr(a,c);else{if(g&&"set"in g&&e&&(f=g.set(a,d,c))!==b)return f;a.setAttribute(c,d+"");return d}else{if(g&&"get"in g&&e&&null!==(f=g.get(a,c)))return f;f=a.getAttribute(c);return null===
f?b:f}}},removeAttr:function(a,b){var c,d,e,f,g=0;if(b&&1===a.nodeType)for(d=b.split(C);g<d.length;g++)if(e=d[g])c=y.propFix[e]||e,(f=xb.test(e))||y.attr(a,e,""),a.removeAttribute(Ab?e:c),f&&c in a&&(a[c]=!1)},attrHooks:{type:{set:function(a,b){if(ra.test(a.nodeName)&&a.parentNode)y.error("type property can't be changed");else if(!y.support.radioValue&&"radio"===b&&y.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b);c&&(a.value=c);return b}}},value:{get:function(a,b){return qa&&y.nodeName(a,
"button")?qa.get(a,b):b in a?a.value:null},set:function(a,b,c){if(qa&&y.nodeName(a,"button"))return qa.set(a,b,c);a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,f,g;g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g){if(g=1!==g||!y.isXMLDoc(a))c=y.propFix[c]||
c,f=y.propHooks[c];return d!==b?f&&"set"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get"in f&&null!==(e=f.get(a,c))?e:a[c]}},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):qc.test(a.nodeName)||tb.test(a.nodeName)&&a.href?0:b}}}});Ha={get:function(a,c){var d,e=y.prop(a,c);return!0===e||"boolean"!==typeof e&&(d=a.getAttributeNode(c))&&!1!==d.nodeValue?c.toLowerCase():b},set:function(a,b,c){!1===b?y.removeAttr(a,c):(b=y.propFix[c]||c,
b in a&&(a[b]=!0),a.setAttribute(c,c.toLowerCase()));return c}};Ab||(sb={name:!0,id:!0,coords:!0},qa=y.valHooks.button={get:function(a,c){var d;return(d=a.getAttributeNode(c))&&(sb[c]?""!==d.value:d.specified)?d.value:b},set:function(a,b,c){var d=a.getAttributeNode(c);d||(d=M.createAttribute(c),a.setAttributeNode(d));return d.value=b+""}},y.each(["width","height"],function(a,b){y.attrHooks[b]=y.extend(y.attrHooks[b],{set:function(a,c){if(""===c)return a.setAttribute(b,"auto"),c}})}),y.attrHooks.contenteditable=
{get:qa.get,set:function(a,b,c){""===b&&(b="false");qa.set(a,b,c)}});y.support.hrefNormalized||y.each(["href","src","width","height"],function(a,c){y.attrHooks[c]=y.extend(y.attrHooks[c],{get:function(a){a=a.getAttribute(c,2);return null===a?b:a}})});y.support.style||(y.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=b+""}});y.support.optSelected||(y.propHooks.selected=y.extend(y.propHooks.selected,{get:function(a){if(a=a.parentNode)a.selectedIndex,
a.parentNode&&a.parentNode.selectedIndex;return null}}));y.support.enctype||(y.propFix.enctype="encoding");y.support.checkOn||y.each(["radio","checkbox"],function(){y.valHooks[this]={get:function(a){return null===a.getAttribute("value")?"on":a.value}}});y.each(["radio","checkbox"],function(){y.valHooks[this]=y.extend(y.valHooks[this],{set:function(a,b){if(y.isArray(b))return a.checked=0<=y.inArray(y(a).val(),b)}})});var la=/^(?:textarea|input|select)$/i,jb=/^([^\.]*|)(?:\.(.+)|)$/,Aa=/(?:^|\s)hover(\.\S+|)\b/,
Lb=/^key/,Hb=/^(?:mouse|contextmenu)|click/,Sa=/^(?:focusinfocus|focusoutblur)$/,na=function(a){return y.event.special.hover?a:a.replace(Aa,"mouseenter$1 mouseleave$1")};y.event={add:function(a,c,d,e,f){var g,h,m,l,q,n,p,r,t;if(3!==a.nodeType&&8!==a.nodeType&&c&&d&&(g=y._data(a))){d.handler&&(p=d,d=p.handler,f=p.selector);d.guid||(d.guid=y.guid++);m=g.events;m||(g.events=m={});h=g.handle;h||(g.handle=h=function(a){return"undefined"===typeof y||a&&y.event.triggered===a.type?b:y.event.dispatch.apply(h.elem,
arguments)},h.elem=a);c=y.trim(na(c)).split(" ");for(g=0;g<c.length;g++)l=jb.exec(c[g])||[],q=l[1],n=(l[2]||"").split(".").sort(),t=y.event.special[q]||{},q=(f?t.delegateType:t.bindType)||q,t=y.event.special[q]||{},l=y.extend({type:q,origType:l[1],data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&y.expr.match.needsContext.test(f),namespace:n.join(".")},p),r=m[q],r||(r=m[q]=[],r.delegateCount=0,t.setup&&!1!==t.setup.call(a,e,n,h)||(a.addEventListener?a.addEventListener(q,h,!1):a.attachEvent&&
a.attachEvent("on"+q,h))),t.add&&(t.add.call(a,l),l.handler.guid||(l.handler.guid=d.guid)),f?r.splice(r.delegateCount++,0,l):r.push(l),y.event.global[q]=!0;a=null}},global:{},remove:function(a,b,c,d,e){var f,g,h,m,l,q,n,p,r,t,u=y.hasData(a)&&y._data(a);if(u&&(n=u.events)){b=y.trim(na(b||"")).split(" ");for(f=0;f<b.length;f++)if(g=jb.exec(b[f])||[],h=m=g[1],g=g[2],h){p=y.event.special[h]||{};h=(d?p.delegateType:p.bindType)||h;r=n[h]||[];l=r.length;g=g?new RegExp("(^|\\.)"+g.split(".").sort().join("\\.(?:.*\\.|)")+
"(\\.|$)"):null;for(q=0;q<r.length;q++)t=r[q],!e&&m!==t.origType||c&&c.guid!==t.guid||g&&!g.test(t.namespace)||d&&d!==t.selector&&("**"!==d||!t.selector)||(r.splice(q--,1),t.selector&&r.delegateCount--,p.remove&&p.remove.call(a,t));0===r.length&&l!==r.length&&(p.teardown&&!1!==p.teardown.call(a,g,u.handle)||y.removeEvent(a,h,u.handle),delete n[h])}else for(h in n)y.event.remove(a,h+b[f],c,d,!0);y.isEmptyObject(n)&&(delete u.handle,y.removeData(a,"events",!0))}},customEvent:{getData:!0,setData:!0,
changeData:!0},trigger:function(c,d,e,f){if(!e||3!==e.nodeType&&8!==e.nodeType){var g,h,m,l,q,n,p=c.type||c;m=[];if(!Sa.test(p+y.event.triggered)&&(0<=p.indexOf("!")&&(p=p.slice(0,-1),g=!0),0<=p.indexOf(".")&&(m=p.split("."),p=m.shift(),m.sort()),e&&!y.event.customEvent[p]||y.event.global[p]))if(c="object"===typeof c?c[y.expando]?c:new y.Event(p,c):new y.Event(p),c.type=p,c.isTrigger=!0,c.exclusive=g,c.namespace=m.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):
null,m=0>p.indexOf(":")?"on"+p:"",e){if(c.result=b,c.target||(c.target=e),d=null!=d?y.makeArray(d):[],d.unshift(c),l=y.event.special[p]||{},!l.trigger||!1!==l.trigger.apply(e,d)){n=[[e,l.bindType||p]];if(!f&&!l.noBubble&&!y.isWindow(e)){q=l.delegateType||p;g=Sa.test(q+p)?e:e.parentNode;for(h=e;g;g=g.parentNode)n.push([g,q]),h=g;h===(e.ownerDocument||M)&&n.push([h.defaultView||h.parentWindow||a,q])}for(h=0;h<n.length&&!c.isPropagationStopped();h++)g=n[h][0],c.type=n[h][1],(q=(y._data(g,"events")||
{})[c.type]&&y._data(g,"handle"))&&q.apply(g,d),(q=m&&g[m])&&y.acceptData(g)&&q.apply&&!1===q.apply(g,d)&&c.preventDefault();c.type=p;f||c.isDefaultPrevented()||l._default&&!1!==l._default.apply(e.ownerDocument,d)||"click"===p&&y.nodeName(e,"a")||!y.acceptData(e)||!m||!e[p]||("focus"===p||"blur"===p)&&0===c.target.offsetWidth||y.isWindow(e)||((h=e[m])&&(e[m]=null),y.event.triggered=p,e[p](),y.event.triggered=b,h&&(e[m]=h));return c.result}}else for(h in e=y.cache,e)e[h].events&&e[h].events[p]&&y.event.trigger(c,
d,e[h].handle.elem,!0)}},dispatch:function(c){c=y.event.fix(c||a.event);var d,e,f,g,h,m,l=(y._data(this,"events")||{})[c.type]||[],q=l.delegateCount,n=ia.call(arguments),p=!c.exclusive&&!c.namespace,r=y.event.special[c.type]||{},t=[];n[0]=c;c.delegateTarget=this;if(!r.preDispatch||!1!==r.preDispatch.call(this,c)){if(q&&(!c.button||"click"!==c.type))for(e=c.target;e!=this;e=e.parentNode||this)if(!0!==e.disabled||"click"!==c.type){g={};h=[];for(d=0;d<q;d++)f=l[d],m=f.selector,g[m]===b&&(g[m]=f.needsContext?
0<=y(m,this).index(e):y.find(m,this,null,[e]).length),g[m]&&h.push(f);h.length&&t.push({elem:e,matches:h})}l.length>q&&t.push({elem:this,matches:l.slice(q)});for(d=0;d<t.length&&!c.isPropagationStopped();d++)for(g=t[d],c.currentTarget=g.elem,e=0;e<g.matches.length&&!c.isImmediatePropagationStopped();e++)if(f=g.matches[e],p||!c.namespace&&!f.namespace||c.namespace_re&&c.namespace_re.test(f.namespace))c.data=f.data,c.handleObj=f,f=((y.event.special[f.origType]||{}).handle||f.handler).apply(g.elem,n),
f!==b&&(c.result=f,!1===f&&(c.preventDefault(),c.stopPropagation()));r.postDispatch&&r.postDispatch.call(this,c);return c.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,c){null==a.which&&(a.which=null!=c.charCode?c.charCode:c.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
filter:function(a,c){var d,e,f=c.button,g=c.fromElement;null==a.pageX&&null!=c.clientX&&(d=a.target.ownerDocument||M,e=d.documentElement,d=d.body,a.pageX=c.clientX+(e&&e.scrollLeft||d&&d.scrollLeft||0)-(e&&e.clientLeft||d&&d.clientLeft||0),a.pageY=c.clientY+(e&&e.scrollTop||d&&d.scrollTop||0)-(e&&e.clientTop||d&&d.clientTop||0));!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?c.toElement:g);a.which||f===b||(a.which=f&1?1:f&2?3:f&4?2:0);return a}},fix:function(a){if(a[y.expando])return a;var c,
b,d=a,e=y.event.fixHooks[a.type]||{},f=e.props?this.props.concat(e.props):this.props;a=y.Event(d);for(c=f.length;c;)b=f[--c],a[b]=d[b];a.target||(a.target=d.srcElement||M);3===a.target.nodeType&&(a.target=a.target.parentNode);a.metaKey=!!a.metaKey;return e.filter?e.filter(a,d):a},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,c,b){y.isWindow(this)&&(this.onbeforeunload=b)},teardown:function(a,c){this.onbeforeunload===c&&(this.onbeforeunload=
null)}}},simulate:function(a,c,b,d){a=y.extend(new y.Event,b,{type:a,isSimulated:!0,originalEvent:{}});d?y.event.trigger(a,null,c):y.event.dispatch.call(c,a);a.isDefaultPrevented()&&b.preventDefault()}};y.event.handle=y.event.dispatch;y.removeEvent=M.removeEventListener?function(a,c,b){a.removeEventListener&&a.removeEventListener(c,b,!1)}:function(a,c,b){c="on"+c;a.detachEvent&&("undefined"===typeof a[c]&&(a[c]=null),a.detachEvent(c,b))};y.Event=function(a,c){if(!(this instanceof y.Event))return new y.Event(a,
c);a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||!1===a.returnValue||a.getPreventDefault&&a.getPreventDefault()?n:f):this.type=a;c&&y.extend(this,c);this.timeStamp=a&&a.timeStamp||y.now();this[y.expando]=!0};y.Event.prototype={preventDefault:function(){this.isDefaultPrevented=n;var a=this.originalEvent;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=n;var a=this.originalEvent;a&&(a.stopPropagation&&
a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=n;this.stopPropagation()},isDefaultPrevented:f,isPropagationStopped:f,isImmediatePropagationStopped:f};y.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,c){y.event.special[a]={delegateType:c,bindType:c,handle:function(a){var b,d=a.relatedTarget,e=a.handleObj;if(!d||d!==this&&!y.contains(this,d))a.type=e.origType,b=e.handler.apply(this,arguments),a.type=c;return b}}});y.support.submitBubbles||
(y.event.special.submit={setup:function(){if(y.nodeName(this,"form"))return!1;y.event.add(this,"click._submit keypress._submit",function(a){a=a.target;(a=y.nodeName(a,"input")||y.nodeName(a,"button")?a.form:b)&&!y._data(a,"_submit_attached")&&(y.event.add(a,"submit._submit",function(a){a._submit_bubble=!0}),y._data(a,"_submit_attached",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&y.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(y.nodeName(this,
"form"))return!1;y.event.remove(this,"._submit")}});y.support.changeBubbles||(y.event.special.change={setup:function(){if(la.test(this.nodeName)){if("checkbox"===this.type||"radio"===this.type)y.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),y.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1);y.event.simulate("change",this,a,!0)});return!1}y.event.add(this,"beforeactivate._change",
function(a){a=a.target;la.test(a.nodeName)&&!y._data(a,"_change_attached")&&(y.event.add(a,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||y.event.simulate("change",this.parentNode,a,!0)}),y._data(a,"_change_attached",!0))})},handle:function(a){var c=a.target;if(this!==c||a.isSimulated||a.isTrigger||"radio"!==c.type&&"checkbox"!==c.type)return a.handleObj.handler.apply(this,arguments)},teardown:function(){y.event.remove(this,"._change");return!la.test(this.nodeName)}});
y.support.focusinBubbles||y.each({focus:"focusin",blur:"focusout"},function(a,c){var b=0,d=function(a){y.event.simulate(c,a.target,y.event.fix(a),!0)};y.event.special[c]={setup:function(){0===b++&&M.addEventListener(a,d,!0)},teardown:function(){0===--b&&M.removeEventListener(a,d,!0)}}});y.fn.extend({on:function(a,c,d,e,g){var h,m;if("object"===typeof a){"string"!==typeof c&&(d=d||c,c=b);for(m in a)this.on(m,c,d,a[m],g);return this}null==d&&null==e?(e=c,d=c=b):null==e&&("string"===typeof c?(e=d,d=
b):(e=d,d=c,c=b));if(!1===e)e=f;else if(!e)return this;1===g&&(h=e,e=function(a){y().off(a);return h.apply(this,arguments)},e.guid=h.guid||(h.guid=y.guid++));return this.each(function(){y.event.add(this,a,e,d,c)})},one:function(a,c,b,d){return this.on(a,c,b,d,1)},off:function(a,c,d){var e;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,y(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"===typeof a){for(e in a)this.off(e,c,a[e]);
return this}if(!1===c||"function"===typeof c)d=c,c=b;!1===d&&(d=f);return this.each(function(){y.event.remove(this,a,d,c)})},bind:function(a,c,b){return this.on(a,null,c,b)},unbind:function(a,c){return this.off(a,null,c)},live:function(a,c,b){y(this.context).on(a,this.selector,c,b);return this},die:function(a,c){y(this.context).off(a,this.selector||"**",c);return this},delegate:function(a,c,b,d){return this.on(c,a,b,d)},undelegate:function(a,c,b){return 1===arguments.length?this.off(a,"**"):this.off(c,
a||"**",b)},trigger:function(a,c){return this.each(function(){y.event.trigger(a,c,this)})},triggerHandler:function(a,c){if(this[0])return y.event.trigger(a,c,this[0],!0)},toggle:function(a){var c=arguments,b=a.guid||y.guid++,d=0,e=function(b){var e=(y._data(this,"lastToggle"+a.guid)||0)%d;y._data(this,"lastToggle"+a.guid,e+1);b.preventDefault();return c[e].apply(this,arguments)||!1};for(e.guid=b;d<c.length;)c[d++].guid=b;return this.click(e)},hover:function(a,c){return this.mouseenter(a).mouseleave(c||
a)}});y.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,c){y.fn[c]=function(a,b){null==b&&(b=a,a=null);return 0<arguments.length?this.on(c,null,a,b):this.trigger(c)};Lb.test(c)&&(y.event.fixHooks[c]=y.event.keyHooks);Hb.test(c)&&(y.event.fixHooks[c]=y.event.mouseHooks)});(function(a,c){function b(a,c,d,e){d=d||[];c=c||
J;var f,g,h,m,l=c.nodeType;if(!a||"string"!==typeof a)return d;if(1!==l&&9!==l)return[];h=E(c);if(!h&&!e&&(f=pb.exec(a)))if(m=f[1])if(9===l)if((g=c.getElementById(m))&&g.parentNode){if(g.id===m)return d.push(g),d}else return d;else{if(c.ownerDocument&&(g=c.ownerDocument.getElementById(m))&&x(c,g)&&g.id===m)return d.push(g),d}else{if(f[2])return S.apply(d,cb.call(c.getElementsByTagName(a),0)),d;if((m=f[3])&&ea&&c.getElementsByClassName)return S.apply(d,cb.call(c.getElementsByClassName(m),0)),d}return t(a.replace(bd,
"$1"),c,d,e,h)}function d(a){return function(c){return"input"===c.nodeName.toLowerCase()&&c.type===a}}function e(a){return function(c){var b=c.nodeName.toLowerCase();return("input"===b||"button"===b)&&c.type===a}}function f(a){return Ua(function(c){c=+c;return Ua(function(b,d){for(var e,f=a([],b.length,c),g=f.length;g--;)b[e=f[g]]&&(b[e]=!(d[e]=b[e]))})})}function g(a,c,b){if(a===c)return b;for(a=a.nextSibling;a;){if(a===c)return-1;a=a.nextSibling}return 1}function h(a,c){var d,e,f,g,m,l,q;if(m=C[z][a])return c?
0:m.slice(0);m=a;l=[];for(q=A.preFilter;m;){if(!d||(e=rc.exec(m)))e&&(m=m.slice(e[0].length)),l.push(f=[]);d=!1;if(e=zd.exec(m))f.push(d=new L(e.shift())),m=m.slice(d.length),d.type=e[0].replace(bd," ");for(g in A.filter)!(e=sc[g].exec(m))||q[g]&&!(e=q[g](e,J,!0))||(f.push(d=new L(e.shift())),m=m.slice(d.length),d.type=g,d.matches=e);if(!d)break}return c?m.length:m?b.error(a):C(a,l).slice(0)}function m(a,c,b){var d=c.dir,e=b&&"parentNode"===c.dir,f=H++;return c.first?function(c,b,f){for(;c=c[d];)if(e||
1===c.nodeType)return a(c,b,f)}:function(c,b,g){if(!g)for(var h,m=V+" "+f+" ",l=m+v;c=c[d];){if(e||1===c.nodeType){if((h=c[z])===l)return c.sizset;if("string"===typeof h&&0===h.indexOf(m)){if(c.sizset)return c}else{c[z]=l;if(a(c,b,g))return c.sizset=!0,c;c.sizset=!1}}}else for(;c=c[d];)if((e||1===c.nodeType)&&a(c,b,g))return c}}function l(a){return 1<a.length?function(c,b,d){for(var e=a.length;e--;)if(!a[e](c,b,d))return!1;return!0}:a[0]}function q(a,c,b,d,e){for(var f,g=[],h=0,m=a.length,l=null!=
c;h<m;h++)if(f=a[h])if(!b||b(f,d,e))g.push(f),l&&c.push(h);return g}function n(a,c,d,e,f,g){e&&!e[z]&&(e=n(e));f&&!f[z]&&(f=n(f,g));return Ua(function(g,h,m,l){if(!g||!f){var n,p,r=[],t=[],u=h.length;if(!(p=g)){p=c||"*";var v=m.nodeType?[m]:m,w=[];n=0;for(var A=v.length;n<A;n++)b(p,v[n],w,g);p=w}v=!a||!g&&c?p:q(p,r,a,m,l);w=d?f||(g?a:u||e)?[]:h:v;d&&d(v,w,m,l);if(e)for(p=q(w,t),e(p,[],m,l),m=p.length;m--;)if(n=p[m])w[t[m]]=!(v[t[m]]=n);if(g)for(m=a&&w.length;m--;){if(n=w[m])g[r[m]]=!(h[r[m]]=n)}else w=
q(w===h?w.splice(u,w.length):w),f?f(null,h,w,l):S.apply(h,w)}})}function p(a){var c,b,d,e=a.length,f=A.relative[a[0].type];b=f||A.relative[" "];for(var g=f?1:0,h=m(function(a){return a===c},b,!0),q=m(function(a){return-1<Y.call(c,a)},b,!0),r=[function(a,b,d){return!f&&(d||b!==K)||((c=b).nodeType?h(a,b,d):q(a,b,d))}];g<e;g++)if(b=A.relative[a[g].type])r=[m(l(r),b)];else{b=A.filter[a[g].type].apply(null,a[g].matches);if(b[z]){for(d=++g;d<e&&!A.relative[a[d].type];d++);return n(1<g&&l(r),1<g&&a.slice(0,
g-1).join("").replace(bd,"$1"),b,g<d&&p(a.slice(g,d)),d<e&&p(a=a.slice(d)),d<e&&a.join(""))}r.push(b)}return l(r)}function r(a,c){var d=0<c.length,e=0<a.length,f=function(g,h,m,l,n){var p,r,t=[],u=0,w="0",I=g&&[],E=null!=n,x=K,G=g||e&&A.find.TAG("*",n&&h.parentNode||h),B=V+=null==x?1:Math.E;E&&(K=h!==J&&h,v=f.el);for(;null!=(n=G[w]);w++){if(e&&n){for(p=0;r=a[p];p++)if(r(n,h,m)){l.push(n);break}E&&(V=B,v=++f.el)}d&&((n=!r&&n)&&u--,g&&I.push(n))}u+=w;if(d&&w!==u){for(p=0;r=c[p];p++)r(I,t,h,m);if(g){if(0<
u)for(;w--;)I[w]||t[w]||(t[w]=ma.call(l));t=q(t)}S.apply(l,t);E&&!g&&0<t.length&&1<u+c.length&&b.uniqueSort(l)}E&&(V=B,K=x);return I};f.el=0;return d?Ua(f):f}function t(a,c,b,d,e){var f,g,m,l,q=h(a);if(!d&&1===q.length){g=q[0]=q[0].slice(0);if(2<g.length&&"ID"===(m=g[0]).type&&9===c.nodeType&&!e&&A.relative[g[1].type]){c=A.find.ID(m.matches[0].replace(R,""),c,e)[0];if(!c)return b;a=a.slice(g.shift().length)}for(f=sc.POS.test(a)?-1:g.length-1;0<=f;f--){m=g[f];if(A.relative[l=m.type])break;if(l=A.find[l])if(d=
l(m.matches[0].replace(R,""),U.test(g[0].type)&&c.parentNode||c,e)){g.splice(f,1);a=d.length&&g.join("");if(!a)return S.apply(b,cb.call(d,0)),b;break}}}G(a,q)(d,c,e,b,U.test(a));return b}function u(){}var v,w,A,I,E,x,G,B,N,K,F=!0,z=("sizcache"+Math.random()).replace(".",""),L=String,J=a.document,D=J.documentElement,V=0,H=0,ma=[].pop,S=[].push,cb=[].slice,Y=[].indexOf||function(a){for(var c=0,b=this.length;c<b;c++)if(this[c]===a)return c;return-1},Ua=function(a,c){a[z]=null==c||c;return a},ac=function(){var a=
{},c=[];return Ua(function(b,d){c.push(b)>A.cacheLength&&delete a[c.shift()];return a[b]=d},a)},M=ac(),C=ac(),Q=ac(),ac="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[-\\w]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+"(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+".replace("w","w#")+")|)|)[\\x20\\t\\r\\n\\f]*\\]",W=":((?:\\\\.|[-\\w]|[^\\x00-\\xa0])+)(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+ac+")|[^:]|\\\\.)*|.*))\\)|)",bd=RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$",
"g"),rc=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,zd=/^[\x20\t\r\n\f]*([\x20\t\r\n\f>+~])[\x20\t\r\n\f]*/,O=new RegExp(W),pb=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,U=/[\x20\t\r\n\f]*[+~]/,X=/h\d/i,ta=/input|select|textarea|button/i,R=/\\(?!\\)/g,sc={ID:/^#((?:\\.|[-\w]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[-\w]|[^\x00-\xa0])+)/,NAME:/^\[name=['"]?((?:\\.|[-\w]|[^\x00-\xa0])+)['"]?\]/,TAG:new RegExp("^("+"(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:new RegExp("^"+ac),PSEUDO:new RegExp("^"+W),
POS:/:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i,CHILD:/^:(only|nth|first|last)-child(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},Xa=function(a){var c=J.createElement("div");try{return a(c)}catch(b){return!1}finally{}},ac=Xa(function(a){a.appendChild(J.createComment(""));
return!a.getElementsByTagName("*").length}),Ra=Xa(function(a){a.innerHTML="<a href='#'></a>";return a.firstChild&&"undefined"!==typeof a.firstChild.getAttribute&&"#"===a.firstChild.getAttribute("href")}),da=Xa(function(a){a.innerHTML="<select></select>";a=typeof a.lastChild.getAttribute("multiple");return"boolean"!==a&&"string"!==a}),ea=Xa(function(a){a.innerHTML="<div class='hidden e'></div><div class='hidden'></div>";if(!a.getElementsByClassName||!a.getElementsByClassName("e").length)return!1;a.lastChild.className=
"e";return 2===a.getElementsByClassName("e").length}),ha=Xa(function(a){a.id=z+0;a.innerHTML="<a name='"+z+"'></a><div name='"+z+"'></div>";D.insertBefore(a,D.firstChild);var c=J.getElementsByName&&J.getElementsByName(z).length===2+J.getElementsByName(z+0).length;w=!J.getElementById(z);D.removeChild(a);return c});try{cb.call(D.childNodes,0)[0].nodeType}catch(Aa){cb=function(a){for(var c,b=[];c=this[a];a++)b.push(c);return b}}b.matches=function(a,c){return b(a,null,null,c)};b.matchesSelector=function(a,
c){return 0<b(c,null,null,[a]).length};I=b.getText=function(a){var c,b="",d=0;if(c=a.nodeType)if(1===c||9===c||11===c){if("string"===typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)b+=I(a)}else{if(3===c||4===c)return a.nodeValue}else for(;c=a[d];d++)b+=I(c);return b};E=b.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1};x=b.contains=D.contains?function(a,c){var b=9===a.nodeType?a.documentElement:a,d=c&&c.parentNode;return a===
d||!!(d&&1===d.nodeType&&b.contains&&b.contains(d))}:D.compareDocumentPosition?function(a,c){return c&&!!(a.compareDocumentPosition(c)&16)}:function(a,c){for(;c=c.parentNode;)if(c===a)return!0;return!1};b.attr=function(a,c){var b,d=E(a);d||(c=c.toLowerCase());return(b=A.attrHandle[c])?b(a):d||da?a.getAttribute(c):(b=a.getAttributeNode(c))?"boolean"===typeof a[c]?a[c]?c:null:b.specified?b.value:null:null};A=b.selectors={cacheLength:50,createPseudo:Ua,match:sc,attrHandle:Ra?{}:{href:function(a){return a.getAttribute("href",
2)},type:function(a){return a.getAttribute("type")}},find:{ID:w?function(a,c,b){if("undefined"!==typeof c.getElementById&&!b)return(a=c.getElementById(a))&&a.parentNode?[a]:[]}:function(a,b,d){if("undefined"!==typeof b.getElementById&&!d)return(b=b.getElementById(a))?b.id===a||"undefined"!==typeof b.getAttributeNode&&b.getAttributeNode("id").value===a?[b]:c:[]},TAG:ac?function(a,c){if("undefined"!==typeof c.getElementsByTagName)return c.getElementsByTagName(a)}:function(a,c){var b=c.getElementsByTagName(a);
if("*"===a){for(var d,e=[],f=0;d=b[f];f++)1===d.nodeType&&e.push(d);return e}return b},NAME:ha&&function(a,c){if("undefined"!==typeof c.getElementsByName)return c.getElementsByName(name)},CLASS:ea&&function(a,c,b){if("undefined"!==typeof c.getElementsByClassName&&!b)return c.getElementsByClassName(a)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){a[1]=a[1].replace(R,"");a[3]=(a[4]||a[5]||
"").replace(R,"");"~="===a[2]&&(a[3]=" "+a[3]+" ");return a.slice(0,4)},CHILD:function(a){a[1]=a[1].toLowerCase();"nth"===a[1]?(a[2]||b.error(a[0]),a[3]=+(a[3]?a[4]+(a[5]||1):2*("even"===a[2]||"odd"===a[2])),a[4]=+(a[6]+a[7]||"odd"===a[2])):a[2]&&b.error(a[0]);return a},PSEUDO:function(a){var c,b;if(sc.CHILD.test(a[0]))return null;if(a[3])a[2]=a[3];else if(c=a[4])O.test(c)&&(b=h(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(c=c.slice(0,b),a[0]=a[0].slice(0,b)),a[2]=c;return a.slice(0,3)}},filter:{ID:w?
function(a){a=a.replace(R,"");return function(c){return c.getAttribute("id")===a}}:function(a){a=a.replace(R,"");return function(c){return(c="undefined"!==typeof c.getAttributeNode&&c.getAttributeNode("id"))&&c.value===a}},TAG:function(a){if("*"===a)return function(){return!0};a=a.replace(R,"").toLowerCase();return function(c){return c.nodeName&&c.nodeName.toLowerCase()===a}},CLASS:function(a){var c=M[z][a];c||(c=M(a,new RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)")));return function(a){return c.test(a.className||
"undefined"!==typeof a.getAttribute&&a.getAttribute("class")||"")}},ATTR:function(a,c,d){return function(e,f){var g=b.attr(e,a);if(null==g)return"!="===c;if(!c)return!0;g+="";return"="===c?g===d:"!="===c?g!==d:"^="===c?d&&0===g.indexOf(d):"*="===c?d&&-1<g.indexOf(d):"$="===c?d&&g.substr(g.length-d.length)===d:"~="===c?-1<(" "+g+" ").indexOf(d):"|="===c?g===d||g.substr(0,d.length+1)===d+"-":!1}},CHILD:function(a,c,b,d){return"nth"===a?function(a){var c,e;c=a.parentNode;if(1===b&&0===d)return!0;if(c)for(e=
0,c=c.firstChild;c&&(1!==c.nodeType||(e++,a!==c));c=c.nextSibling);e-=d;return e===b||0===e%b&&0<=e/b}:function(c){var b=c;switch(a){case "only":case "first":for(;b=b.previousSibling;)if(1===b.nodeType)return!1;if("first"===a)return!0;b=c;case "last":for(;b=b.nextSibling;)if(1===b.nodeType)return!1;return!0}}},PSEUDO:function(a,c){var d,e=A.pseudos[a]||A.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return e[z]?e(c):1<e.length?(d=[a,a,"",c],A.setFilters.hasOwnProperty(a.toLowerCase())?
Ua(function(a,b){for(var d,f=e(a,c),g=f.length;g--;)d=Y.call(a,f[g]),a[d]=!(b[d]=f[g])}):function(a){return e(a,0,d)}):e}},pseudos:{not:Ua(function(a){var c=[],b=[],d=G(a.replace(bd,"$1"));return d[z]?Ua(function(a,c,b,e){e=d(a,null,e,[]);for(var f=a.length;f--;)if(b=e[f])a[f]=!(c[f]=b)}):function(a,e,f){c[0]=a;d(c,null,f,b);return!b.pop()}}),has:Ua(function(a){return function(c){return 0<b(a,c).length}}),contains:Ua(function(a){return function(c){return-1<(c.textContent||c.innerText||I(c)).indexOf(a)}}),
enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var c=a.nodeName.toLowerCase();return"input"===c&&!!a.checked||"option"===c&&!!a.selected},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return!0===a.selected},parent:function(a){return!A.pseudos.empty(a)},empty:function(a){var c;for(a=a.firstChild;a;){if("@"<a.nodeName||3===(c=a.nodeType)||4===c)return!1;a=a.nextSibling}return!0},header:function(a){return X.test(a.nodeName)},
text:function(a){var c,b;return"input"===a.nodeName.toLowerCase()&&"text"===(c=a.type)&&(null==(b=a.getAttribute("type"))||b.toLowerCase()===c)},radio:d("radio"),checkbox:d("checkbox"),file:d("file"),password:d("password"),image:d("image"),submit:e("submit"),reset:e("reset"),button:function(a){var c=a.nodeName.toLowerCase();return"input"===c&&"button"===a.type||"button"===c},input:function(a){return ta.test(a.nodeName)},focus:function(a){var c=a.ownerDocument;return a===c.activeElement&&(!c.hasFocus||
c.hasFocus())&&!(!a.type&&!a.href)},active:function(a){return a===a.ownerDocument.activeElement},first:f(function(a,c,b){return[0]}),last:f(function(a,c,b){return[c-1]}),eq:f(function(a,c,b){return[0>b?b+c:b]}),even:f(function(a,c,b){for(b=0;b<c;b+=2)a.push(b);return a}),odd:f(function(a,c,b){for(b=1;b<c;b+=2)a.push(b);return a}),lt:f(function(a,c,b){for(c=0>b?b+c:b;0<=--c;)a.push(c);return a}),gt:f(function(a,c,b){for(b=0>b?b+c:b;++b<c;)a.push(b);return a})}};B=D.compareDocumentPosition?function(a,
c){return a===c?(N=!0,0):(a.compareDocumentPosition&&c.compareDocumentPosition?a.compareDocumentPosition(c)&4:a.compareDocumentPosition)?-1:1}:function(a,c){if(a===c)return N=!0,0;if(a.sourceIndex&&c.sourceIndex)return a.sourceIndex-c.sourceIndex;var b,d,e=[],f=[];b=a.parentNode;d=c.parentNode;var h=b;if(b===d)return g(a,c);if(!b)return-1;if(!d)return 1;for(;h;)e.unshift(h),h=h.parentNode;for(h=d;h;)f.unshift(h),h=h.parentNode;b=e.length;d=f.length;for(h=0;h<b&&h<d;h++)if(e[h]!==f[h])return g(e[h],
f[h]);return h===b?g(a,f[h],-1):g(e[h],c,1)};[0,0].sort(B);F=!N;b.uniqueSort=function(a){var c,b=1;N=F;a.sort(B);if(N)for(;c=a[b];b++)c===a[b-1]&&a.splice(b--,1);return a};b.error=function(a){throw Error("Syntax error, unrecognized expression: "+a);};G=b.compile=function(a,c){var b,d=[],e=[],f=Q[z][a];if(!f){c||(c=h(a));for(b=c.length;b--;)f=p(c[b]),f[z]?d.push(f):e.push(f);f=Q(a,r(e,d))}return f};J.querySelectorAll&&function(){var a,c=t,d=/'|\\/g,e=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,
f=[":focus"],g=[":active",":focus"],m=D.matchesSelector||D.mozMatchesSelector||D.webkitMatchesSelector||D.oMatchesSelector||D.msMatchesSelector;Xa(function(a){a.innerHTML="<select><option selected=''></option></select>";a.querySelectorAll("[selected]").length||f.push("\\[[\\x20\\t\\r\\n\\f]*(?:checked|disabled|ismap|multiple|readonly|selected|value)");a.querySelectorAll(":checked").length||f.push(":checked")});Xa(function(a){a.innerHTML="<p test=''></p>";a.querySelectorAll("[test^='']").length&&f.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:\"\"|'')");
a.innerHTML="<input type='hidden'/>";a.querySelectorAll(":enabled").length||f.push(":enabled",":disabled")});f=new RegExp(f.join("|"));t=function(a,b,e,g,m){if(!(g||m||f&&f.test(a))){var l,q,n=!0,p=z;q=b;l=9===b.nodeType&&a;if(1===b.nodeType&&"object"!==b.nodeName.toLowerCase()){l=h(a);(n=b.getAttribute("id"))?p=n.replace(d,"\\$&"):b.setAttribute("id",p);p="[id='"+p+"'] ";for(q=l.length;q--;)l[q]=p+l[q].join("");q=U.test(a)&&b.parentNode||b;l=l.join(",")}if(l)try{return S.apply(e,cb.call(q.querySelectorAll(l),
0)),e}catch(r){}finally{n||b.removeAttribute("id")}}return c(a,b,e,g,m)};m&&(Xa(function(c){a=m.call(c,"div");try{m.call(c,"[test!='']:sizzle"),g.push("!=",W)}catch(b){}}),g=new RegExp(g.join("|")),b.matchesSelector=function(c,d){d=d.replace(e,"='$1']");if(!(E(c)||g.test(d)||f&&f.test(d)))try{var h=m.call(c,d);if(h||a||c.document&&11!==c.document.nodeType)return h}catch(l){}return 0<b(d,null,null,[c]).length})}();A.pseudos.nth=A.pseudos.eq;A.filters=u.prototype=A.pseudos;A.setFilters=new u;b.attr=
y.attr;y.find=b;y.expr=b.selectors;y.expr[":"]=y.expr.pseudos;y.unique=b.uniqueSort;y.text=b.getText;y.isXMLDoc=b.isXML;y.contains=b.contains})(a);var Yb=/Until$/,Bc=/^(?:parents|prev(?:Until|All))/,ca=/^.[^:#\[\.,]*$/,ba=y.expr.match.needsContext,Ca={children:!0,contents:!0,next:!0,prev:!0};y.fn.extend({find:function(a){var c,b,d,e,f,g,h=this;if("string"!==typeof a)return y(a).filter(function(){c=0;for(b=h.length;c<b;c++)if(y.contains(h[c],this))return!0});g=this.pushStack("","find",a);c=0;for(b=
this.length;c<b;c++)if(d=g.length,y.find(a,this[c],g),0<c)for(e=d;e<g.length;e++)for(f=0;f<d;f++)if(g[f]===g[e]){g.splice(e--,1);break}return g},has:function(a){var c,b=y(a,this),d=b.length;return this.filter(function(){for(c=0;c<d;c++)if(y.contains(this,b[c]))return!0})},not:function(a){return this.pushStack(m(this,a,!1),"not",a)},filter:function(a){return this.pushStack(m(this,a,!0),"filter",a)},is:function(a){return!!a&&("string"===typeof a?ba.test(a)?0<=y(a,this.context).index(this[0]):0<y.filter(a,
this).length:0<this.filter(a).length)},closest:function(a,c){for(var b,d=0,e=this.length,f=[],g=ba.test(a)||"string"!==typeof a?y(a,c||this.context):0;d<e;d++)for(b=this[d];b&&b.ownerDocument&&b!==c&&11!==b.nodeType;){if(g?-1<g.index(b):y.find.matchesSelector(b,a)){f.push(b);break}b=b.parentNode}f=1<f.length?y.unique(f):f;return this.pushStack(f,"closest",a)},index:function(a){return a?"string"===typeof a?y.inArray(this[0],y(a)):y.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:
-1},add:function(a,c){var b="string"===typeof a?y(a,c):y.makeArray(a&&a.nodeType?[a]:a),d=y.merge(this.get(),b);return this.pushStack(h(b[0])||h(d[0])?d:y.unique(d))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});y.fn.andSelf=y.fn.addBack;y.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return y.dir(a,"parentNode")},parentsUntil:function(a,c,b){return y.dir(a,"parentNode",b)},next:function(a){return g(a,"nextSibling")},
prev:function(a){return g(a,"previousSibling")},nextAll:function(a){return y.dir(a,"nextSibling")},prevAll:function(a){return y.dir(a,"previousSibling")},nextUntil:function(a,c,b){return y.dir(a,"nextSibling",b)},prevUntil:function(a,c,b){return y.dir(a,"previousSibling",b)},siblings:function(a){return y.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return y.sibling(a.firstChild)},contents:function(a){return y.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:y.merge([],
a.childNodes)}},function(a,c){y.fn[a]=function(b,d){var e=y.map(this,c,b);Yb.test(a)||(d=b);d&&"string"===typeof d&&(e=y.filter(d,e));e=1<this.length&&!Ca[a]?y.unique(e):e;1<this.length&&Bc.test(a)&&(e=e.reverse());return this.pushStack(e,a,ia.call(arguments).join(","))}});y.extend({filter:function(a,c,b){b&&(a=":not("+a+")");return 1===c.length?y.find.matchesSelector(c[0],a)?[c[0]]:[]:y.find.matches(a,c)},dir:function(a,c,d){var e=[];for(a=a[c];a&&9!==a.nodeType&&(d===b||1!==a.nodeType||!y(a).is(d));)1===
a.nodeType&&e.push(a),a=a[c];return e},sibling:function(a,c){for(var b=[];a;a=a.nextSibling)1===a.nodeType&&a!==c&&b.push(a);return b}});var oa="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",La=/ jQuery\d+="(?:null|\d+)"/g,bb=/^\s+/,ja=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ja=/<([\w:]+)/,ma=/<tbody/i,cb=/<|&#?\w+;/,Ua=/<(?:script|style|link)/i,ac=/<(?:script|object|embed|option|style)/i,
rc=new RegExp("<(?:"+oa+")[\\s/>]","i"),bd=/^(?:checkbox|radio)$/,zd=/checked\s*(?:[^=]|=\s*.checked.)/i,sc=/\/(java|ecma)script/i,ve=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,mb={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,
"",""]},Qb=p(M),Qd=Qb.appendChild(M.createElement("div"));mb.optgroup=mb.option;mb.tbody=mb.tfoot=mb.colgroup=mb.caption=mb.thead;mb.th=mb.td;y.support.htmlSerialize||(mb._default=[1,"X<div>","</div>"]);y.fn.extend({text:function(a){return y.access(this,function(a){return a===b?y.text(this):this.empty().append((this[0]&&this[0].ownerDocument||M).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(y.isFunction(a))return this.each(function(c){y(this).wrapAll(a.call(this,c))});if(this[0]){var c=
y(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&c.insertBefore(this[0]);c.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return y.isFunction(a)?this.each(function(c){y(this).wrapInner(a.call(this,c))}):this.each(function(){var c=y(this),b=c.contents();b.length?b.wrapAll(a):c.append(a)})},wrap:function(a){var c=y.isFunction(a);return this.each(function(b){y(this).wrapAll(c?a.call(this,b):
a)})},unwrap:function(){return this.parent().each(function(){y.nodeName(this,"body")||y(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){1!==this.nodeType&&11!==this.nodeType||this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){1!==this.nodeType&&11!==this.nodeType||this.insertBefore(a,this.firstChild)})},before:function(){if(!h(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,
this)});if(arguments.length){var a=y.clean(arguments);return this.pushStack(y.merge(a,this),"before",this.selector)}},after:function(){if(!h(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=y.clean(arguments);return this.pushStack(y.merge(this,a),"after",this.selector)}},remove:function(a,c){for(var b,d=0;null!=(b=this[d]);d++)if(!a||y.filter(a,[b]).length)c||1!==b.nodeType||(y.cleanData(b.getElementsByTagName("*")),
y.cleanData([b])),b.parentNode&&b.parentNode.removeChild(b);return this},empty:function(){for(var a,c=0;null!=(a=this[c]);c++)for(1===a.nodeType&&y.cleanData(a.getElementsByTagName("*"));a.firstChild;)a.removeChild(a.firstChild);return this},clone:function(a,c){a=null==a?!1:a;c=null==c?a:c;return this.map(function(){return y.clone(this,a,c)})},html:function(a){return y.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return 1===c.nodeType?c.innerHTML.replace(La,""):b;if(!("string"!==
typeof a||Ua.test(a)||!y.support.htmlSerialize&&rc.test(a)||!y.support.leadingWhitespace&&bb.test(a)||mb[(Ja.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(ja,"<$1></$2>");try{for(;d<e;d++)c=this[d]||{},1===c.nodeType&&(y.cleanData(c.getElementsByTagName("*")),c.innerHTML=a);c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){if(!h(this[0])){if(y.isFunction(a))return this.each(function(c){var b=y(this),d=b.html();b.replaceWith(a.call(this,c,d))});"string"!==
typeof a&&(a=y(a).detach());return this.each(function(){var c=this.nextSibling,b=this.parentNode;y(this).remove();c?y(c).before(a):y(b).append(a)})}return this.length?this.pushStack(y(y.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){a=[].concat.apply([],a);var e,f,g,h=0,m=a[0],l=[],q=this.length;if(!y.support.checkClone&&1<q&&"string"===typeof m&&zd.test(m))return this.each(function(){y(this).domManip(a,c,d)});if(y.isFunction(m))return this.each(function(e){var f=
y(this);a[0]=m.call(this,e,c?f.html():b);f.domManip(a,c,d)});if(this[0]){e=y.buildFragment(a,this,l);g=e.fragment;f=g.firstChild;1===g.childNodes.length&&(g=f);if(f)for(c=c&&y.nodeName(f,"tr"),e=e.cacheable||q-1;h<q;h++)d.call(c&&y.nodeName(this[h],"table")?r(this[h],"tbody"):this[h],h===e?g:y.clone(g,!0,!0));g=f=null;l.length&&y.each(l,function(a,c){c.src?y.ajax?y.ajax({url:c.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):y.error("no ajax"):y.globalEval((c.text||c.textContent||
c.innerHTML||"").replace(ve,""));c.parentNode&&c.parentNode.removeChild(c)})}return this}});y.buildFragment=function(a,c,d){var e,f,g,h=a[0];c=c||M;c=!c.nodeType&&c[0]||c;c=c.ownerDocument||c;!(1===a.length&&"string"===typeof h&&512>h.length&&c===M&&"<"===h.charAt(0))||ac.test(h)||!y.support.checkClone&&zd.test(h)||!y.support.html5Clone&&rc.test(h)||(f=!0,e=y.fragments[h],g=e!==b);e||(e=c.createDocumentFragment(),y.clean(a,c,e,d),f&&(y.fragments[h]=g&&e));return{fragment:e,cacheable:f}};y.fragments=
{};y.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,c){y.fn[a]=function(b){var d,e=0,f=[];b=y(b);var g=b.length;d=1===this.length&&this[0].parentNode;if((null==d||d&&11===d.nodeType&&1===d.childNodes.length)&&1===g)return b[c](this[0]),this;for(;e<g;e++)d=(0<e?this.clone(!0):this).get(),y(b[e])[c](d),f=f.concat(d);return this.pushStack(f,a,b.selector)}});y.extend({clone:function(a,c,b){var d,e,f,g;y.support.html5Clone||y.isXMLDoc(a)||
!rc.test("<"+a.nodeName+">")?g=a.cloneNode(!0):(Qd.innerHTML=a.outerHTML,Qd.removeChild(g=Qd.firstChild));if(!(y.support.noCloneEvent&&y.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||y.isXMLDoc(a)))for(l(a,g),d=q(a),e=q(g),f=0;d[f];++f)e[f]&&l(d[f],e[f]);if(c&&(t(a,g),b))for(d=q(a),e=q(g),f=0;d[f];++f)t(d[f],e[f]);return g},clean:function(a,c,b,d){var e,f,g,h,m,l,q=c===M&&Qb,n=[];c&&"undefined"!==typeof c.createDocumentFragment||(c=M);for(e=0;null!=(g=a[e]);e++)if("number"===typeof g&&
(g+=""),g){if("string"===typeof g)if(cb.test(g)){q=q||p(c);l=c.createElement("div");q.appendChild(l);g=g.replace(ja,"<$1></$2>");f=(Ja.exec(g)||["",""])[1].toLowerCase();h=mb[f]||mb._default;m=h[0];for(l.innerHTML=h[1]+g+h[2];m--;)l=l.lastChild;if(!y.support.tbody)for(m=ma.test(g),h="table"!==f||m?"<table>"!==h[1]||m?[]:l.childNodes:l.firstChild&&l.firstChild.childNodes,f=h.length-1;0<=f;--f)y.nodeName(h[f],"tbody")&&!h[f].childNodes.length&&h[f].parentNode.removeChild(h[f]);!y.support.leadingWhitespace&&
bb.test(g)&&l.insertBefore(c.createTextNode(bb.exec(g)[0]),l.firstChild);g=l.childNodes;l.parentNode.removeChild(l)}else g=c.createTextNode(g);g.nodeType?n.push(g):y.merge(n,g)}l&&(g=l=q=null);if(!y.support.appendChecked)for(e=0;null!=(g=n[e]);e++)y.nodeName(g,"input")?w(g):"undefined"!==typeof g.getElementsByTagName&&y.grep(g.getElementsByTagName("input"),w);if(b)for(a=function(a){if(!a.type||sc.test(a.type))return d?d.push(a.parentNode?a.parentNode.removeChild(a):a):b.appendChild(a)},e=0;null!=
(g=n[e]);e++)y.nodeName(g,"script")&&a(g)||(b.appendChild(g),"undefined"!==typeof g.getElementsByTagName&&(g=y.grep(y.merge([],g.getElementsByTagName("script")),a),n.splice.apply(n,[e+1,0].concat(g)),e+=g.length));return n},cleanData:function(a,c){for(var b,d,e,f,g=0,h=y.expando,m=y.cache,l=y.support.deleteExpando,q=y.event.special;null!=(e=a[g]);g++)if(c||y.acceptData(e))if(b=(d=e[h])&&m[d]){if(b.events)for(f in b.events)q[f]?y.event.remove(e,f):y.removeEvent(e,f,b.handle);m[d]&&(delete m[d],l?delete e[h]:
e.removeAttribute?e.removeAttribute(h):e[h]=null,y.deletedIds.push(d))}}});(function(){var a,c;y.uaMatch=function(a){a=a.toLowerCase();a=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||0>a.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:a[1]||"",version:a[2]||"0"}};a=y.uaMatch(X.userAgent);c={};a.browser&&(c[a.browser]=!0,c.version=a.version);c.chrome?c.webkit=!0:c.webkit&&
(c.safari=!0);y.browser=c;y.sub=function(){function a(c,b){return new a.fn.init(c,b)}y.extend(!0,a,this);a.superclass=this;a.fn=a.prototype=this();a.fn.constructor=a;a.sub=this.sub;a.fn.init=function(b,d){d&&d instanceof y&&!(d instanceof a)&&(d=a(d));return y.fn.init.call(this,b,d,c)};a.fn.init.prototype=a.fn;var c=a(M);return a}})();var lb,zc,cd,gc=/alpha\([^)]*\)/i,bc=/opacity=([^)]*)/,nf=/^(top|right|bottom|left)$/,Ke=/^(none|table(?!-c[ea]).+)/,of=/^margin/,R=new RegExp("^("+za+")(.*)$","i"),
be=new RegExp("^("+za+")(?!px)[a-z%]+$","i"),pf=new RegExp("^([-+])=("+za+")","i"),Fa={},we={position:"absolute",visibility:"hidden",display:"block"},tg={letterSpacing:0,fontWeight:400},pc=["Top","Right","Bottom","Left"],Mf=["Webkit","O","Moz","ms"],ug=y.fn.toggle;y.fn.extend({css:function(a,c){return y.access(this,function(a,c,d){return d!==b?y.style(a,c,d):y.css(a,c)},a,c,1<arguments.length)},show:function(){return E(this,!0)},hide:function(){return E(this)},toggle:function(a,c){var b="boolean"===
typeof a;return y.isFunction(a)&&y.isFunction(c)?ug.apply(this,arguments):this.each(function(){(b?a:v(this))?y(this).show():y(this).hide()})}});y.extend({cssHooks:{opacity:{get:function(a,c){if(c){var b=lb(a,"opacity");return""===b?"1":b}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":y.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,g,h,m=y.camelCase(c),
l=a.style;c=y.cssProps[m]||(y.cssProps[m]=u(l,m));h=y.cssHooks[c]||y.cssHooks[m];if(d!==b){if(g=typeof d,"string"===g&&(f=pf.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat(y.css(a,c)),g="number"),!(null==d||"number"===g&&isNaN(d)||("number"!==g||y.cssNumber[m]||(d+="px"),h&&"set"in h&&(d=h.set(a,d,e))===b)))try{l[c]=d}catch(q){}}else return h&&"get"in h&&(f=h.get(a,!1,e))!==b?f:l[c]}},css:function(a,c,d,e){var f,g;g=y.camelCase(c);c=y.cssProps[g]||(y.cssProps[g]=u(a.style,g));(g=y.cssHooks[c]||y.cssHooks[g])&&
"get"in g&&(f=g.get(a,!0,e));f===b&&(f=lb(a,c));"normal"===f&&c in tg&&(f=tg[c]);return d||e!==b?(a=parseFloat(f),d||y.isNumeric(a)?a||0:f):f},swap:function(a,c,b){var d,e={};for(d in c)e[d]=a.style[d],a.style[d]=c[d];b=b.call(a);for(d in c)a.style[d]=e[d];return b}});a.getComputedStyle?lb=function(c,b){var d,e,f,g,h=a.getComputedStyle(c,null),m=c.style;h&&(d=h[b],""!==d||y.contains(c.ownerDocument,c)||(d=y.style(c,b)),be.test(d)&&of.test(b)&&(e=m.width,f=m.minWidth,g=m.maxWidth,m.minWidth=m.maxWidth=
m.width=d,d=h.width,m.width=e,m.minWidth=f,m.maxWidth=g));return d}:M.documentElement.currentStyle&&(lb=function(a,c){var b,d,e=a.currentStyle&&a.currentStyle[c],f=a.style;null==e&&f&&f[c]&&(e=f[c]);if(be.test(e)&&!nf.test(c)){b=f.left;if(d=a.runtimeStyle&&a.runtimeStyle.left)a.runtimeStyle.left=a.currentStyle.left;f.left="fontSize"===c?"1em":e;e=f.pixelLeft+"px";f.left=b;d&&(a.runtimeStyle.left=d)}return""===e?"auto":e});y.each(["height","width"],function(a,c){y.cssHooks[c]={get:function(a,b,d){if(b)return 0===
a.offsetWidth&&Ke.test(lb(a,"display"))?y.swap(a,we,function(){return F(a,c,d)}):F(a,c,d)},set:function(a,b,d){return A(a,b,d?K(a,c,d,y.support.boxSizing&&"border-box"===y.css(a,"boxSizing")):0)}}});y.support.opacity||(y.cssHooks.opacity={get:function(a,c){return bc.test((c&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":c?"1":""},set:function(a,c){var b=a.style,d=a.currentStyle,e=y.isNumeric(c)?"alpha(opacity="+100*c+")":"",f=d&&d.filter||b.filter||"";b.zoom=
1;if(1<=c&&""===y.trim(f.replace(gc,""))&&b.removeAttribute&&(b.removeAttribute("filter"),d&&!d.filter))return;b.filter=gc.test(f)?f.replace(gc,e):f+" "+e}});y(function(){y.support.reliableMarginRight||(y.cssHooks.marginRight={get:function(a,c){return y.swap(a,{display:"inline-block"},function(){if(c)return lb(a,"marginRight")})}});!y.support.pixelPosition&&y.fn.position&&y.each(["top","left"],function(a,c){y.cssHooks[c]={get:function(a,b){if(b){var d=lb(a,c);return be.test(d)?y(a).position()[c]+
"px":d}}}})});y.expr&&y.expr.filters&&(y.expr.filters.hidden=function(a){return 0===a.offsetWidth&&0===a.offsetHeight||!y.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||lb(a,"display"))},y.expr.filters.visible=function(a){return!y.expr.filters.hidden(a)});y.each({margin:"",padding:"",border:"Width"},function(a,c){y.cssHooks[a+c]={expand:function(b){var d="string"===typeof b?b.split(" "):[b],e={};for(b=0;4>b;b++)e[a+pc[b]+c]=d[b]||d[b-2]||d[0];return e}};of.test(a)||(y.cssHooks[a+
c].set=A)});var Tf=/%20/g,lg=/\[\]$/,Pg=/\r?\n/g,qf=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,rf=/^(?:select|textarea)/i;y.fn.extend({serialize:function(){return y.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?y.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||rf.test(this.nodeName)||qf.test(this.type))}).map(function(a,
c){var b=y(this).val();return null==b?null:y.isArray(b)?y.map(b,function(a,b){return{name:c.name,value:a.replace(Pg,"\r\n")}}):{name:c.name,value:b.replace(Pg,"\r\n")}}).get()}});y.param=function(a,c){var d,e=[],f=function(a,c){c=y.isFunction(c)?c():null==c?"":c;e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(c)};c===b&&(c=y.ajaxSettings&&y.ajaxSettings.traditional);if(y.isArray(a)||a.jquery&&!y.isPlainObject(a))y.each(a,function(){f(this.name,this.value)});else for(d in a)B(d,a[d],c,f);
return e.join("&").replace(Tf,"+")};var Cc,hc,sf=/#.*$/,tf=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Le=/^(?:GET|HEAD)$/,Dc=/^\/\//,xe=/\?/,Ad=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Rb=/([?&])_=[^&]*/,id=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Rd=y.fn.load,ce={},Tc={},Uf=["*/"]+["*"];try{hc=Q.href}catch(Sd){hc=M.createElement("a"),hc.href="",hc=hc.href}Cc=id.exec(hc.toLowerCase())||[];y.fn.load=function(a,c,d){if("string"!==typeof a&&Rd)return Rd.apply(this,arguments);if(!this.length)return this;
var e,f,g,h=this,m=a.indexOf(" ");0<=m&&(e=a.slice(m,a.length),a=a.slice(0,m));y.isFunction(c)?(d=c,c=b):c&&"object"===typeof c&&(f="POST");y.ajax({url:a,type:f,dataType:"html",data:c,complete:function(a,c){d&&h.each(d,g||[a.responseText,c,a])}}).done(function(a){g=arguments;h.html(e?y("<div>").append(a.replace(Ad,"")).find(e):a)});return this};y.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,c){y.fn[c]=function(a){return this.on(c,a)}});y.each(["get",
"post"],function(a,c){y[c]=function(a,d,e,f){y.isFunction(d)&&(f=f||e,e=d,d=b);return y.ajax({type:c,url:a,data:d,success:e,dataType:f})}});y.extend({getScript:function(a,c){return y.get(a,b,c,"script")},getJSON:function(a,c,b){return y.get(a,c,b,"json")},ajaxSetup:function(a,c){c?I(a,y.ajaxSettings):(c=a,a=y.ajaxSettings);I(a,c);return a},ajaxSettings:{url:hc,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(Cc[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",
processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Uf},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":y.parseJSON,"text xml":y.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:H(ce),ajaxTransport:H(Tc),ajax:function(a,c){function d(a,c,g,l){var n,A,I,x,G=c;if(2!==E){E=2;m&&clearTimeout(m);
h=b;f=l||"";B.readyState=0<a?4:0;if(g){x=p;l=B;var N,K,z,F,J=x.contents,L=x.dataTypes,D=x.responseFields;for(K in D)K in g&&(l[D[K]]=g[K]);for(;"*"===L[0];)L.shift(),N===b&&(N=x.mimeType||l.getResponseHeader("content-type"));if(N)for(K in J)if(J[K]&&J[K].test(N)){L.unshift(K);break}if(L[0]in g)z=L[0];else{for(K in g){if(!L[0]||x.converters[K+" "+L[0]]){z=K;break}F||(F=K)}z=z||F}z?(z!==L[0]&&L.unshift(z),x=g[z]):x=void 0}if(200<=a&&300>a||304===a)if(p.ifModified&&((g=B.getResponseHeader("Last-Modified"))&&
(y.lastModified[e]=g),(g=B.getResponseHeader("Etag"))&&(y.etag[e]=g)),304===a)G="notmodified",n=!0;else{a:{A=p;I=x;var V,H,G=A.dataTypes.slice();N=G[0];K={};z=0;A.dataFilter&&(I=A.dataFilter(I,A.dataType));if(G[1])for(V in A.converters)K[V.toLowerCase()]=A.converters[V];for(;g=G[++z];)if("*"!==g){if("*"!==N&&N!==g){V=K[N+" "+g]||K["* "+g];if(!V)for(H in K)if(n=H.split(" "),n[1]===g&&(V=K[N+" "+n[0]]||K["* "+n[0]])){!0===V?V=K[H]:!0!==K[H]&&(g=n[0],G.splice(z--,0,g));break}if(!0!==V)if(V&&A["throws"])I=
V(I);else try{I=V(I)}catch(ma){n={state:"parsererror",error:V?ma:"No conversion from "+N+" to "+g};break a}}N=g}n={state:"success",data:I}}G=n.state;A=n.data;I=n.error;n=!I}else if(I=G,!G||a)G="error",0>a&&(a=0);B.status=a;B.statusText=(c||G)+"";n?u.resolveWith(r,[A,G,B]):u.rejectWith(r,[B,G,I]);B.statusCode(w);w=b;q&&t.trigger("ajax"+(n?"Success":"Error"),[B,p,n?A:I]);v.fireWith(r,[B,G]);q&&(t.trigger("ajaxComplete",[B,p]),--y.active||y.event.trigger("ajaxStop"))}}"object"===typeof a&&(c=a,a=b);
c=c||{};var e,f,g,h,m,l,q,n,p=y.ajaxSetup({},c),r=p.context||p,t=r!==p&&(r.nodeType||r instanceof y)?y(r):y.event,u=y.Deferred(),v=y.Callbacks("once memory"),w=p.statusCode||{},A={},I={},E=0,x="canceled",B={readyState:0,setRequestHeader:function(a,c){if(!E){var b=a.toLowerCase();a=I[b]=I[b]||a;A[a]=c}return this},getAllResponseHeaders:function(){return 2===E?f:null},getResponseHeader:function(a){var c;if(2===E){if(!g)for(g={};c=tf.exec(f);)g[c[1].toLowerCase()]=c[2];c=g[a.toLowerCase()]}return c===
b?null:c},overrideMimeType:function(a){E||(p.mimeType=a);return this},abort:function(a){a=a||x;h&&h.abort(a);d(0,a);return this}};u.promise(B);B.success=B.done;B.error=B.fail;B.complete=v.add;B.statusCode=function(a){if(a){var c;if(2>E)for(c in a)w[c]=[w[c],a[c]];else c=a[B.status],B.always(c)}return this};p.url=((a||p.url)+"").replace(sf,"").replace(Dc,Cc[1]+"//");p.dataTypes=y.trim(p.dataType||"*").toLowerCase().split(C);null==p.crossDomain&&(l=id.exec(p.url.toLowerCase())||!1,p.crossDomain=l&&
l.join(":")+(l[3]?"":"http:"===l[1]?80:443)!==Cc.join(":")+(Cc[3]?"":"http:"===Cc[1]?80:443));p.data&&p.processData&&"string"!==typeof p.data&&(p.data=y.param(p.data,p.traditional));G(ce,p,c,B);if(2===E)return B;q=p.global;p.type=p.type.toUpperCase();p.hasContent=!Le.test(p.type);q&&0===y.active++&&y.event.trigger("ajaxStart");if(!p.hasContent&&(p.data&&(p.url+=(xe.test(p.url)?"&":"?")+p.data,delete p.data),e=p.url,!1===p.cache)){l=y.now();var N=p.url.replace(Rb,"$1_="+l);p.url=N+(N===p.url?(xe.test(p.url)?
"&":"?")+"_="+l:"")}(p.data&&p.hasContent&&!1!==p.contentType||c.contentType)&&B.setRequestHeader("Content-Type",p.contentType);p.ifModified&&(e=e||p.url,y.lastModified[e]&&B.setRequestHeader("If-Modified-Since",y.lastModified[e]),y.etag[e]&&B.setRequestHeader("If-None-Match",y.etag[e]));B.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Uf+"; q=0.01":""):p.accepts["*"]);for(n in p.headers)B.setRequestHeader(n,p.headers[n]);if(p.beforeSend&&
(!1===p.beforeSend.call(r,B,p)||2===E))return B.abort();x="abort";for(n in{success:1,error:1,complete:1})B[n](p[n]);if(h=G(Tc,p,c,B)){B.readyState=1;q&&t.trigger("ajaxSend",[B,p]);p.async&&0<p.timeout&&(m=setTimeout(function(){B.abort("timeout")},p.timeout));try{E=1,h.send(A,d)}catch(K){if(2>E)d(-1,K);else throw K;}}else d(-1,"No Transport");return B},active:0,lastModified:{},etag:{}});var ie=[],Cb=/\?/,Ib=/(=)\?(?=&|$)|\?\?/,tc=y.now();y.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=
ie.pop()||y.expando+"_"+tc++;this[a]=!0;return a}});y.ajaxPrefilter("json jsonp",function(c,d,e){var f,g,h,m=c.data,l=c.url,q=!1!==c.jsonp,p=q&&Ib.test(l),n=q&&!p&&"string"===typeof m&&!(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ib.test(m);if("jsonp"===c.dataTypes[0]||p||n)return f=c.jsonpCallback=y.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,g=a[f],p?c.url=l.replace(Ib,"$1"+f):n?c.data=m.replace(Ib,"$1"+f):q&&(c.url+=(Cb.test(l)?"&":"?")+c.jsonp+"="+f),c.converters["script json"]=
function(){h||y.error(f+" was not called");return h[0]},c.dataTypes[0]="json",a[f]=function(){h=arguments},e.always(function(){a[f]=g;c[f]&&(c.jsonpCallback=d.jsonpCallback,ie.push(f));h&&y.isFunction(g)&&g(h[0]);h=g=b}),"script"});y.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){y.globalEval(a);return a}}});y.ajaxPrefilter("script",function(a){a.cache===
b&&(a.cache=!1);a.crossDomain&&(a.type="GET",a.global=!1)});y.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=M.head||M.getElementsByTagName("head")[0]||M.documentElement;return{send:function(e,f){c=M.createElement("script");c.async="async";a.scriptCharset&&(c.charset=a.scriptCharset);c.src=a.url;c.onload=c.onreadystatechange=function(a,e){if(e||!c.readyState||/loaded|complete/.test(c.readyState))c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=b,e||f(200,"success")};
d.insertBefore(c,d.firstChild)},abort:function(){if(c)c.onload(0,1)}}}});var cc,ic=a.ActiveXObject?function(){for(var a in cc)cc[a](0,1)}:!1,Jc=0;y.ajaxSettings.xhr=a.ActiveXObject?function(){var c;if(!(c=!this.isLocal&&N()))a:{try{c=new a.ActiveXObject("Microsoft.XMLHTTP");break a}catch(b){}c=void 0}return c}:N;(function(a){y.extend(y.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})})(y.ajaxSettings.xhr());y.support.ajax&&y.ajaxTransport(function(c){if(!c.crossDomain||y.support.cors){var d;return{send:function(e,
f){var g,h,m=c.xhr();c.username?m.open(c.type,c.url,c.async,c.username,c.password):m.open(c.type,c.url,c.async);if(c.xhrFields)for(h in c.xhrFields)m[h]=c.xhrFields[h];c.mimeType&&m.overrideMimeType&&m.overrideMimeType(c.mimeType);c.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e)m.setRequestHeader(h,e[h])}catch(l){}m.send(c.hasContent&&c.data||null);d=function(a,e){var h,l,q,p,n;try{if(d&&(e||4===m.readyState))if(d=b,g&&(m.onreadystatechange=y.noop,ic&&
delete cc[g]),e)4!==m.readyState&&m.abort();else{h=m.status;q=m.getAllResponseHeaders();p={};(n=m.responseXML)&&n.documentElement&&(p.xml=n);try{p.text=m.responseText}catch(r){}try{l=m.statusText}catch(t){l=""}h||!c.isLocal||c.crossDomain?1223===h&&(h=204):h=p.text?200:404}}catch(u){e||f(-1,u)}p&&f(h,l,p,q)};c.async?4===m.readyState?setTimeout(d,0):(g=++Jc,ic&&(cc||(cc={},y(a).unload(ic)),cc[g]=d),m.onreadystatechange=d):d()},abort:function(){d&&d(0,1)}}}});var Bb,jd,Me=/^(?:toggle|show|hide)$/,Ea=
new RegExp("^(?:([-+])=|)("+za+")([a-z%]*)$","i"),je=/queueHooks$/,Gc=[function(a,c,b){var d,e,f,g,h,m,l=this,q=a.style,p={},n=[],r=a.nodeType&&v(a);b.queue||(h=y._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,m=h.empty.fire,h.empty.fire=function(){h.unqueued||m()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--;y.queue(a,"fx").length||h.empty.fire()})}));1===a.nodeType&&("height"in c||"width"in c)&&(b.overflow=[q.overflow,q.overflowX,q.overflowY],"inline"===y.css(a,"display")&&
"none"===y.css(a,"float")&&(y.support.inlineBlockNeedsLayout&&"inline"!==z(a.nodeName)?q.zoom=1:q.display="inline-block"));b.overflow&&(q.overflow="hidden",y.support.shrinkWrapBlocks||l.done(function(){q.overflow=b.overflow[0];q.overflowX=b.overflow[1];q.overflowY=b.overflow[2]}));for(d in c)e=c[d],Me.exec(e)&&(delete c[d],e!==(r?"hide":"show")&&n.push(d));if(e=n.length)for(f=y._data(a,"fxshow")||y._data(a,"fxshow",{}),r?y(a).show():l.done(function(){y(a).hide()}),l.done(function(){var c;y.removeData(a,
"fxshow",!0);for(c in p)y.style(a,c,p[c])}),d=0;d<e;d++)c=n[d],g=l.createTween(c,r?f[c]:0),p[c]=f[c]||y.style(a,c),c in f||(f[c]=g.start,r&&(g.end=g.start,g.start="width"===c||"height"===c?1:0))}],Pc={"*":[function(a,c){var b,d,e=this.createTween(a,c),f=Ea.exec(c),g=e.cur(),h=+g||0,m=1,l=20;if(f){b=+f[2];d=f[3]||(y.cssNumber[a]?"":"px");if("px"!==d&&h){h=y.css(e.elem,a,!0)||b||1;do m=m||".5",h/=m,y.style(e.elem,a,h+d);while(m!==(m=e.cur()/g)&&1!==m&&--l)}e.unit=d;e.start=h;e.end=f[1]?h+(f[1]+1)*b:
b}return e}]};y.Animation=y.extend(S,{tweener:function(a,c){y.isFunction(a)?(c=a,a=["*"]):a=a.split(" ");for(var b,d=0,e=a.length;d<e;d++)b=a[d],Pc[b]=Pc[b]||[],Pc[b].unshift(c)},prefilter:function(a,c){c?Gc.unshift(a):Gc.push(a)}});y.Tween=J;J.prototype={constructor:J,init:function(a,c,b,d,e,f){this.elem=a;this.prop=b;this.easing=e||"swing";this.options=c;this.start=this.now=this.cur();this.end=d;this.unit=f||(y.cssNumber[b]?"":"px")},cur:function(){var a=J.propHooks[this.prop];return a&&a.get?a.get(this):
J.propHooks._default.get(this)},run:function(a){var c,b=J.propHooks[this.prop];this.pos=this.options.duration?c=y.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):c=a;this.now=(this.end-this.start)*c+this.start;this.options.step&&this.options.step.call(this.elem,this.now,this);b&&b.set?b.set(this):J.propHooks._default.set(this);return this}};J.prototype.init.prototype=J.prototype;J.propHooks={_default:{get:function(a){return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?
(a=y.css(a.elem,a.prop,!1,""))&&"auto"!==a?a:0:a.elem[a.prop]},set:function(a){if(y.fx.step[a.prop])y.fx.step[a.prop](a);else a.elem.style&&(null!=a.elem.style[y.cssProps[a.prop]]||y.cssHooks[a.prop])?y.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}};J.propHooks.scrollTop=J.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}};y.each(["toggle","show","hide"],function(a,c){var b=y.fn[c];y.fn[c]=function(d,e,f){return null==d||"boolean"===typeof d||
!a&&y.isFunction(d)&&y.isFunction(e)?b.apply(this,arguments):this.animate(V(c,!0),d,e,f)}});y.fn.extend({fadeTo:function(a,c,b,d){return this.filter(v).css("opacity",0).show().end().animate({opacity:c},a,b,d)},animate:function(a,c,b,d){var e=y.isEmptyObject(a),f=y.speed(c,b,d);c=function(){var c=S(this,y.extend({},a),f);e&&c.stop(!0)};return e||!1===f.queue?this.each(c):this.queue(f.queue,c)},stop:function(a,c,d){var e=function(a){var c=a.stop;delete a.stop;c(d)};"string"!==typeof a&&(d=c,c=a,a=b);
c&&!1!==a&&this.queue(a||"fx",[]);return this.each(function(){var c=!0,b=null!=a&&a+"queueHooks",f=y.timers,g=y._data(this);if(b)g[b]&&g[b].stop&&e(g[b]);else for(b in g)g[b]&&g[b].stop&&je.test(b)&&e(g[b]);for(b=f.length;b--;)f[b].elem!==this||null!=a&&f[b].queue!==a||(f[b].anim.stop(d),c=!1,f.splice(b,1));!c&&d||y.dequeue(this,a)})}});y.each({slideDown:V("show"),slideUp:V("hide"),slideToggle:V("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,c){y.fn[a]=
function(a,b,d){return this.animate(c,a,b,d)}});y.speed=function(a,c,b){var d=a&&"object"===typeof a?y.extend({},a):{complete:b||!b&&c||y.isFunction(a)&&a,duration:a,easing:b&&c||c&&!y.isFunction(c)&&c};d.duration=y.fx.off?0:"number"===typeof d.duration?d.duration:d.duration in y.fx.speeds?y.fx.speeds[d.duration]:y.fx.speeds._default;if(null==d.queue||!0===d.queue)d.queue="fx";d.old=d.complete;d.complete=function(){y.isFunction(d.old)&&d.old.call(this);d.queue&&y.dequeue(this,d.queue)};return d};
y.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}};y.timers=[];y.fx=J.prototype.init;y.fx.tick=function(){for(var a,c=y.timers,b=0;b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||y.fx.stop()};y.fx.timer=function(a){a()&&y.timers.push(a)&&!jd&&(jd=setInterval(y.fx.tick,y.fx.interval))};y.fx.interval=13;y.fx.stop=function(){clearInterval(jd);jd=null};y.fx.speeds={slow:600,fast:200,_default:400};y.fx.step={};y.expr&&y.expr.filters&&(y.expr.filters.animated=
function(a){return y.grep(y.timers,function(c){return a===c.elem}).length});var ye=/^(?:body|html)$/i;y.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(c){y.offset.setOffset(this,a,c)});var c,d,e,f,g,h={top:0,left:0};if(e=(f=this[0])&&f.ownerDocument){if((d=e.body)===f)return y.offset.bodyOffset(f);c=e.documentElement;if(!y.contains(c,f))return h;"undefined"!==typeof f.getBoundingClientRect&&(h=f.getBoundingClientRect());e=Y(e);f=c.clientTop||d.clientTop||0;d=c.clientLeft||
d.clientLeft||0;g=e.pageYOffset||c.scrollTop;c=e.pageXOffset||c.scrollLeft;return{top:h.top+g-f,left:h.left+c-d}}};y.offset={bodyOffset:function(a){var c=a.offsetTop,b=a.offsetLeft;y.support.doesNotIncludeMarginInBodyOffset&&(c+=parseFloat(y.css(a,"marginTop"))||0,b+=parseFloat(y.css(a,"marginLeft"))||0);return{top:c,left:b}},setOffset:function(a,c,b){var d=y.css(a,"position");"static"===d&&(a.style.position="relative");var e=y(a),f=e.offset(),g=y.css(a,"top"),h=y.css(a,"left"),m={},l={};("absolute"===
d||"fixed"===d)&&-1<y.inArray("auto",[g,h])?(l=e.position(),d=l.top,h=l.left):(d=parseFloat(g)||0,h=parseFloat(h)||0);y.isFunction(c)&&(c=c.call(a,b,f));null!=c.top&&(m.top=c.top-f.top+d);null!=c.left&&(m.left=c.left-f.left+h);"using"in c?c.using.call(a,m):e.css(m)}};y.fn.extend({position:function(){if(this[0]){var a=this[0],c=this.offsetParent(),b=this.offset(),d=ye.test(c[0].nodeName)?{top:0,left:0}:c.offset();b.top-=parseFloat(y.css(a,"marginTop"))||0;b.left-=parseFloat(y.css(a,"marginLeft"))||
0;d.top+=parseFloat(y.css(c[0],"borderTopWidth"))||0;d.left+=parseFloat(y.css(c[0],"borderLeftWidth"))||0;return{top:b.top-d.top,left:b.left-d.left}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||M.body;a&&!ye.test(a.nodeName)&&"static"===y.css(a,"position");)a=a.offsetParent;return a||M.body})}});y.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);y.fn[a]=function(e){return y.access(this,function(a,e,f){var g=Y(a);if(f===b)return g?
c in g?g[c]:g.document.documentElement[e]:a[e];g?g.scrollTo(d?y(g).scrollLeft():f,d?f:y(g).scrollTop()):a[e]=f},a,e,arguments.length,null)}});y.each({Height:"height",Width:"width"},function(a,c){y.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,e){y.fn[e]=function(e,f){var g=arguments.length&&(d||"boolean"!==typeof e),h=d||(!0===e||!0===f?"margin":"border");return y.access(this,function(c,d,e){return y.isWindow(c)?c.document.documentElement["client"+a]:9===c.nodeType?(d=c.documentElement,
Math.max(c.body["scroll"+a],d["scroll"+a],c.body["offset"+a],d["offset"+a],d["client"+a])):e===b?y.css(c,d,e,h):y.style(c,d,e,h)},c,g?e:b,g,null)}})});a.jQuery=a.$=y;"function"===typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return y})})(window);
(function(a,b){function e(b,d){var e,f;e=b.nodeName.toLowerCase();if("area"===e){e=b.parentNode;f=e.name;if(!b.href||!f||"map"!==e.nodeName.toLowerCase())return!1;e=a("img[usemap=#"+f+"]")[0];return!!e&&c(e)}return(/input|select|textarea|button|object/.test(e)?!b.disabled:"a"===e?b.href||d:d)&&c(b)}function c(c){return a.expr.filters.visible(c)&&!a(c).parents().andSelf().filter(function(){return"hidden"===a.css(this,"visibility")}).length}var d=0,f=/^ui-id-\d+$/;a.ui=a.ui||{};a.ui.version||(a.extend(a.ui,
{version:"1.9.1",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({_focus:a.fn.focus,focus:function(c,b){return"number"===typeof c?this.each(function(){var d=this;setTimeout(function(){a(d).focus();b&&b.call(d)},c)}):this._focus.apply(this,arguments)},scrollParent:function(){var c;
c=a.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0);return/fixed/.test(this.css("position"))||!c.length?a(document):
c},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length){c=a(this[0]);for(var d;c.length&&c[0]!==document;){d=c.css("position");if("absolute"===d||"relative"===d||"fixed"===d)if(d=parseInt(c.css("zIndex"),10),!isNaN(d)&&0!==d)return d;c=c.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++d)})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&a(this).removeAttr("id")})}}),a("<a>").outerWidth(1).jquery||a.each(["Width",
"Height"],function(c,d){function e(c,b,d,g){a.each(f,function(){b-=parseFloat(a.css(c,"padding"+this))||0;d&&(b-=parseFloat(a.css(c,"border"+this+"Width"))||0);g&&(b-=parseFloat(a.css(c,"margin"+this))||0)});return b}var f="Width"===d?["Left","Right"]:["Top","Bottom"],p=d.toLowerCase(),r={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?r["inner"+d].call(this):this.each(function(){a(this).css(p,
e(this,c)+"px")})};a.fn["outer"+d]=function(c,b){return"number"!==typeof c?r["outer"+d].call(this,c):this.each(function(){a(this).css(p,e(this,c,!0,b)+"px")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(c){return function(b){return!!a.data(b,c)}}):function(c,b,d){return!!a.data(c,d[3])},focusable:function(c){return e(c,!isNaN(a.attr(c,"tabindex")))},tabbable:function(c){var b=a.attr(c,"tabindex"),d=isNaN(b);return(d||0<=b)&&e(c,!d)}}),a(function(){var c=document.body,
b=c.appendChild(b=document.createElement("div"));b.offsetHeight;a.extend(b.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});a.support.minHeight=100===b.offsetHeight;a.support.selectstart="onselectstart"in b;c.removeChild(b).style.display="none"}),function(){var c=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];a.ui.ie=c.length?!0:!1;a.ui.ie6=6===parseFloat(c[1],10)}(),a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+
".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.extend(a.ui,{plugin:{add:function(c,b,d){var e;c=a.ui[c].prototype;for(e in d)c.plugins[e]=c.plugins[e]||[],c.plugins[e].push([b,d[e]])},call:function(a,c,b){var d=a.plugins[c];if(d&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(c=0;c<d.length;c++)a.options[d[c][0]]&&d[c][1].apply(a.element,b)}},contains:a.contains,hasScroll:function(c,b){if("hidden"===
a(c).css("overflow"))return!1;var d=b&&"left"===b?"scrollLeft":"scrollTop",e=!1;if(0<c[d])return!0;c[d]=1;e=0<c[d];c[d]=0;return e},isOverAxis:function(a,c,b){return a>c&&a<c+b},isOver:function(c,b,d,e,f,r){return a.ui.isOverAxis(c,d,f)&&a.ui.isOverAxis(b,e,r)}}))})(jQuery);
(function(a,b){var e=0,c=Array.prototype.slice,d=a.cleanData;a.cleanData=function(c){for(var b=0,e;null!=(e=c[b]);b++)try{a(e).triggerHandler("remove")}catch(g){}d(c)};a.widget=function(c,b,d){var e,m,p,r,t=c.split(".")[0];c=c.split(".")[1];e=t+"-"+c;d||(d=b,b=a.Widget);a.expr[":"][e.toLowerCase()]=function(c){return!!a.data(c,e)};a[t]=a[t]||{};m=a[t][c];p=a[t][c]=function(a,c){if(!this._createWidget)return new p(a,c);arguments.length&&this._createWidget(a,c)};a.extend(p,m,{version:d.version,_proto:a.extend({},
d),_childConstructors:[]});r=new b;r.options=a.widget.extend({},r.options);a.each(d,function(c,e){a.isFunction(e)&&(d[c]=function(){var a=function(){return b.prototype[c].apply(this,arguments)},d=function(a){return b.prototype[c].apply(this,a)};return function(){var c=this._super,b=this._superApply,f;this._super=a;this._superApply=d;f=e.apply(this,arguments);this._super=c;this._superApply=b;return f}}())});p.prototype=a.widget.extend(r,{widgetEventPrefix:r.widgetEventPrefix||c},d,{constructor:p,namespace:t,
widgetName:c,widgetBaseClass:e,widgetFullName:e});m?(a.each(m._childConstructors,function(c,b){var d=b.prototype;a.widget(d.namespace+"."+d.widgetName,p,b._proto)}),delete m._childConstructors):b._childConstructors.push(p);a.widget.bridge(c,p)};a.widget.extend=function(d){for(var e=c.call(arguments,1),h=0,g=e.length,m,p;h<g;h++)for(m in e[h])p=e[h][m],e[h].hasOwnProperty(m)&&p!==b&&(a.isPlainObject(p)?d[m]=a.isPlainObject(d[m])?a.widget.extend({},d[m],p):a.widget.extend({},p):d[m]=p);return d};a.widget.bridge=
function(d,e){var h=e.prototype.widgetFullName;a.fn[d]=function(g){var m="string"===typeof g,p=c.call(arguments,1),r=this;g=!m&&p.length?a.widget.extend.apply(null,[g].concat(p)):g;m?this.each(function(){var c,e=a.data(this,h);if(!e)return a.error("cannot call methods on "+d+" prior to initialization; attempted to call method '"+g+"'");if(!a.isFunction(e[g])||"_"===g.charAt(0))return a.error("no such method '"+g+"' for "+d+" widget instance");c=e[g].apply(e,p);if(c!==e&&c!==b)return r=c&&c.jquery?
r.pushStack(c.get()):c,!1}):this.each(function(){var c=a.data(this,h);c?c.option(g||{})._init():new e(g,this)});return r}};a.Widget=function(){};a.Widget._childConstructors=[];a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(c,b){b=a(b||this.defaultElement||this)[0];this.element=a(b);this.uuid=e++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=a.widget.extend({},this.options,this._getCreateOptions(),
c);this.bindings=a();this.hoverable=a();this.focusable=a();b!==this&&(a.data(b,this.widgetName,this),a.data(b,this.widgetFullName,this),this._on(this.element,{remove:function(a){a.target===b&&this.destroy()}}),this.document=a(b.style?b.ownerDocument:b.document||b),this.window=a(this.document[0].defaultView||this.document[0].parentWindow));this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,
destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},
option:function(c,d){var e=c,g,m,p;if(0===arguments.length)return a.widget.extend({},this.options);if("string"===typeof c)if(e={},g=c.split("."),c=g.shift(),g.length){m=e[c]=a.widget.extend({},this.options[c]);for(p=0;p<g.length-1;p++)m[g[p]]=m[g[p]]||{},m=m[g[p]];c=g.pop();if(d===b)return m[c]===b?null:m[c];m[c]=d}else{if(d===b)return this.options[c]===b?null:this.options[c];e[c]=d}this._setOptions(e);return this},_setOptions:function(a){for(var c in a)this._setOption(c,a[c]);return this},_setOption:function(a,
c){this.options[a]=c;"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!c).attr("aria-disabled",c),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"));return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(c,b){var d,e=this;b?(c=d=a(c),this.bindings=this.bindings.add(c)):(b=c,c=this.element,d=this.widget());a.each(b,function(b,p){function n(){if(!0!==
e.options.disabled&&!a(this).hasClass("ui-state-disabled"))return("string"===typeof p?e[p]:p).apply(e,arguments)}"string"!==typeof p&&(n.guid=p.guid=p.guid||n.guid||a.guid++);var t=b.match(/^(\w+)\s*(.*)$/),l=t[1]+e.eventNamespace;(t=t[2])?d.delegate(t,l,n):c.bind(l,n)})},_off:function(a,c){c=(c||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;a.unbind(c).undelegate(c)},_delay:function(a,c){var b=this;return setTimeout(function(){return("string"===typeof a?b[a]:a).apply(b,arguments)},
c||0)},_hoverable:function(c){this.hoverable=this.hoverable.add(c);this._on(c,{mouseenter:function(c){a(c.currentTarget).addClass("ui-state-hover")},mouseleave:function(c){a(c.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(c){this.focusable=this.focusable.add(c);this._on(c,{focusin:function(c){a(c.currentTarget).addClass("ui-state-focus")},focusout:function(c){a(c.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(c,b,d){var e,m=this.options[c];d=d||{};b=a.Event(b);
b.type=(c===this.widgetEventPrefix?c:this.widgetEventPrefix+c).toLowerCase();b.target=this.element[0];if(c=b.originalEvent)for(e in c)e in b||(b[e]=c[e]);this.element.trigger(b,d);return!(a.isFunction(m)&&!1===m.apply(this.element[0],[b].concat(d))||b.isDefaultPrevented())}};a.each({show:"fadeIn",hide:"fadeOut"},function(c,b){a.Widget.prototype["_"+c]=function(d,e,m){"string"===typeof e&&(e={effect:e});var p,r=e?!0===e||"number"===typeof e?b:e.effect||b:c;e=e||{};"number"===typeof e&&(e={duration:e});
p=!a.isEmptyObject(e);e.complete=m;e.delay&&d.delay(e.delay);if(p&&a.effects&&(a.effects.effect[r]||!1!==a.uiBackCompat&&a.effects[r]))d[c](e);else if(r!==c&&d[r])d[r](e.duration,e.easing,m);else d.queue(function(b){a(this)[c]();m&&m.call(d[0]);b()})}});!1!==a.uiBackCompat&&(a.Widget.prototype._getCreateOptions=function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]})})(jQuery);
(function(a,b){var e=!1;a(document).mouseup(function(a){e=!1});a.widget("ui.mouse",{version:"1.9.1",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var c=this;this.element.bind("mousedown."+this.widgetName,function(a){return c._mouseDown(a)}).bind("click."+this.widgetName,function(b){if(!0===a.data(b.target,c.widgetName+".preventClickEvent"))return a.removeData(b.target,c.widgetName+".preventClickEvent"),b.stopImmediatePropagation(),!1});this.started=
!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(c){if(!e){this._mouseStarted&&this._mouseUp(c);this._mouseDownEvent=c;var b=this,f=1===c.which,n="string"===typeof this.options.cancel&&c.target.nodeName?a(c.target).closest(this.options.cancel).length:!1;if(!f||n||!this._mouseCapture(c))return!0;this.mouseDelayMet=
!this.options.delay;this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){b.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&(this._mouseStarted=!1!==this._mouseStart(c),!this._mouseStarted))return c.preventDefault(),!0;!0===a.data(c.target,this.widgetName+".preventClickEvent")&&a.removeData(c.target,this.widgetName+".preventClickEvent");this._mouseMoveDelegate=function(a){return b._mouseMove(a)};this._mouseUpDelegate=function(a){return b._mouseUp(a)};
a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);c.preventDefault();return e=!0}},_mouseMove:function(c){if(a.ui.ie&&!(9<=document.documentMode)&&!c.button)return this._mouseUp(c);if(this._mouseStarted)return this._mouseDrag(c),c.preventDefault();this._mouseDistanceMet(c)&&this._mouseDelayMet(c)&&((this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,c))?this._mouseDrag(c):this._mouseUp(c));return!this._mouseStarted},
_mouseUp:function(c){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);this._mouseStarted&&(this._mouseStarted=!1,c.target===this._mouseDownEvent.target&&a.data(c.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(c));return!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(a){return this.mouseDelayMet},
_mouseStart:function(a){},_mouseDrag:function(a){},_mouseStop:function(a){},_mouseCapture:function(a){return!0}})})(jQuery);
(function(a,b){function e(a,c,b){return[parseInt(a[0],10)*(r.test(a[0])?c/100:1),parseInt(a[1],10)*(r.test(a[1])?b/100:1)]}a.ui=a.ui||{};var c,d=Math.max,f=Math.abs,n=Math.round,h=/left|center|right/,g=/top|center|bottom/,m=/[\+\-]\d+%?/,p=/^\w+/,r=/%$/,t=a.fn.position;a.position={scrollbarWidth:function(){if(c!==b)return c;var d,e,f=a("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>");e=f.children()[0];a("body").append(f);d=e.offsetWidth;
f.css("overflow","scroll");e=e.offsetWidth;d===e&&(e=f[0].clientWidth);f.remove();return c=d-e},getScrollInfo:function(c){var b=c.isWindow?"":c.element.css("overflow-x"),d=c.isWindow?"":c.element.css("overflow-y"),d="scroll"===d||"auto"===d&&c.height<c.element[0].scrollHeight;return{width:"scroll"===b||"auto"===b&&c.width<c.element[0].scrollWidth?a.position.scrollbarWidth():0,height:d?a.position.scrollbarWidth():0}},getWithinInfo:function(c){c=a(c||window);var b=a.isWindow(c[0]);return{element:c,
isWindow:b,offset:c.offset()||{left:0,top:0},scrollLeft:c.scrollLeft(),scrollTop:c.scrollTop(),width:b?c.width():c.outerWidth(),height:b?c.height():c.outerHeight()}}};a.fn.position=function(c){if(!c||!c.of)return t.apply(this,arguments);c=a.extend({},c);var b,r,u,v,E,A=a(c.of),K=a.position.getWithinInfo(c.within),F=a.position.getScrollInfo(K),z=A[0],B=(c.collision||"flip").split(" "),H={};9===z.nodeType?(r=A.width(),u=A.height(),v={top:0,left:0}):a.isWindow(z)?(r=A.width(),u=A.height(),v={top:A.scrollTop(),
left:A.scrollLeft()}):z.preventDefault?(c.at="left top",r=u=0,v={top:z.pageY,left:z.pageX}):(r=A.outerWidth(),u=A.outerHeight(),v=A.offset());E=a.extend({},v);a.each(["my","at"],function(){var a=(c[this]||"").split(" "),b,d;1===a.length&&(a=h.test(a[0])?a.concat(["center"]):g.test(a[0])?["center"].concat(a):["center","center"]);a[0]=h.test(a[0])?a[0]:"center";a[1]=g.test(a[1])?a[1]:"center";b=m.exec(a[0]);d=m.exec(a[1]);H[this]=[b?b[0]:0,d?d[0]:0];c[this]=[p.exec(a[0])[0],p.exec(a[1])[0]]});1===B.length&&
(B[1]=B[0]);"right"===c.at[0]?E.left+=r:"center"===c.at[0]&&(E.left+=r/2);"bottom"===c.at[1]?E.top+=u:"center"===c.at[1]&&(E.top+=u/2);b=e(H.at,r,u);E.left+=b[0];E.top+=b[1];return this.each(function(){var g,h,m=a(this),p=m.outerWidth(),t=m.outerHeight(),z=parseInt(a.css(this,"marginLeft"),10)||0,D=parseInt(a.css(this,"marginTop"),10)||0,J=p+z+(parseInt(a.css(this,"marginRight"),10)||0)+F.width,V=t+D+(parseInt(a.css(this,"marginBottom"),10)||0)+F.height,Y=a.extend({},E),W=e(H.my,m.outerWidth(),m.outerHeight());
"right"===c.my[0]?Y.left-=p:"center"===c.my[0]&&(Y.left-=p/2);"bottom"===c.my[1]?Y.top-=t:"center"===c.my[1]&&(Y.top-=t/2);Y.left+=W[0];Y.top+=W[1];a.support.offsetFractions||(Y.left=n(Y.left),Y.top=n(Y.top));g={marginLeft:z,marginTop:D};a.each(["left","top"],function(d,e){if(a.ui.position[B[d]])a.ui.position[B[d]][e](Y,{targetWidth:r,targetHeight:u,elemWidth:p,elemHeight:t,collisionPosition:g,collisionWidth:J,collisionHeight:V,offset:[b[0]+W[0],b[1]+W[1]],my:c.my,at:c.at,within:K,elem:m})});a.fn.bgiframe&&
m.bgiframe();c.using&&(h=function(a){var b=v.left-Y.left,e=b+r-p,g=v.top-Y.top,h=g+u-t,q={target:{element:A,left:v.left,top:v.top,width:r,height:u},element:{element:m,left:Y.left,top:Y.top,width:p,height:t},horizontal:0>e?"left":0<b?"right":"center",vertical:0>h?"top":0<g?"bottom":"middle"};r<p&&f(b+e)<r&&(q.horizontal="center");u<t&&f(g+h)<u&&(q.vertical="middle");d(f(b),f(e))>d(f(g),f(h))?q.important="horizontal":q.important="vertical";c.using.call(this,a,q)});m.offset(a.extend(Y,{using:h}))})};
a.ui.position={fit:{left:function(a,c){var b=c.within,e=b.isWindow?b.scrollLeft:b.offset.left,f=b.width,g=a.left-c.collisionPosition.marginLeft,b=e-g,h=g+c.collisionWidth-f-e;c.collisionWidth>f?0<b&&0>=h?(e=a.left+b+c.collisionWidth-f-e,a.left+=b-e):a.left=0<h&&0>=b?e:b>h?e+f-c.collisionWidth:e:a.left=0<b?a.left+b:0<h?a.left-h:d(a.left-g,a.left)},top:function(a,c){var b=c.within,e=b.isWindow?b.scrollTop:b.offset.top,f=c.within.height,g=a.top-c.collisionPosition.marginTop,b=e-g,h=g+c.collisionHeight-
f-e;c.collisionHeight>f?0<b&&0>=h?(e=a.top+b+c.collisionHeight-f-e,a.top+=b-e):a.top=0<h&&0>=b?e:b>h?e+f-c.collisionHeight:e:a.top=0<b?a.top+b:0<h?a.top-h:d(a.top-g,a.top)}},flip:{left:function(a,c){var b=c.within,d=b.offset.left+b.scrollLeft,e=b.width,g=b.isWindow?b.scrollLeft:b.offset.left,h=a.left-c.collisionPosition.marginLeft,b=h-g,m=h+c.collisionWidth-e-g,h="left"===c.my[0]?-c.elemWidth:"right"===c.my[0]?c.elemWidth:0,p="left"===c.at[0]?c.targetWidth:"right"===c.at[0]?-c.targetWidth:0,n=-2*
c.offset[0];if(0>b){if(d=a.left+h+p+n+c.collisionWidth-e-d,0>d||d<f(b))a.left+=h+p+n}else 0<m&&(d=a.left-c.collisionPosition.marginLeft+h+p+n-g,0<d||f(d)<m)&&(a.left+=h+p+n)},top:function(a,c){var b=c.within,d=b.offset.top+b.scrollTop,e=b.height,g=b.isWindow?b.scrollTop:b.offset.top,h=a.top-c.collisionPosition.marginTop,b=h-g,m=h+c.collisionHeight-e-g,h="top"===c.my[1]?-c.elemHeight:"bottom"===c.my[1]?c.elemHeight:0,p="top"===c.at[1]?c.targetHeight:"bottom"===c.at[1]?-c.targetHeight:0,n=-2*c.offset[1];
0>b?(d=a.top+h+p+n+c.collisionHeight-e-d,a.top+h+p+n>b&&(0>d||d<f(b))&&(a.top+=h+p+n)):0<m&&(d=a.top-c.collisionPosition.marginTop+h+p+n-g,a.top+h+p+n>m&&(0<d||f(d)<m)&&(a.top+=h+p+n))}},flipfit:{left:function(){a.ui.position.flip.left.apply(this,arguments);a.ui.position.fit.left.apply(this,arguments)},top:function(){a.ui.position.flip.top.apply(this,arguments);a.ui.position.fit.top.apply(this,arguments)}}};(function(){var c,b,d,e,f=document.getElementsByTagName("body")[0];d=document.createElement("div");
c=document.createElement(f?"div":"body");b={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};f&&a.extend(b,{position:"absolute",left:"-1000px",top:"-1000px"});for(e in b)c.style[e]=b[e];c.appendChild(d);b=f||document.documentElement;b.insertBefore(c,b.firstChild);d.style.cssText="position: absolute; left: 10.7432222px;";d=a(d).offset().left;a.support.offsetFractions=10<d&&11>d;c.innerHTML="";b.removeChild(c)})();!1!==a.uiBackCompat&&function(a){var c=a.fn.position;a.fn.position=
function(d){if(!d||!d.offset)return c.call(this,d);var e=d.offset.split(" "),f=d.at.split(" ");1===e.length&&(e[1]=e[0]);/^\d/.test(e[0])&&(e[0]="+"+e[0]);/^\d/.test(e[1])&&(e[1]="+"+e[1]);1===f.length&&(/left|center|right/.test(f[0])?f[1]="center":(f[1]=f[0],f[0]="center"));return c.call(this,a.extend(d,{at:f[0]+e[0]+" "+f[1]+e[1],offset:b}))}}(jQuery)})(jQuery);
(function(a,b){a.widget("ui.draggable",a.ui.mouse,{version:"1.9.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"!=this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||
(this.element[0].style.position="relative");this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy()},_mouseCapture:function(b){var c=this.options;if(this.helper||c.disabled||a(b.target).is(".ui-resizable-handle"))return!1;this.handle=this._getHandle(b);if(!this.handle)return!1;a(!0===
c.iframeFix?"iframe":c.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1E3}).css(a(this).offset()).appendTo("body")});return!0},_mouseStart:function(b){var c=this.options;this.helper=this._createHelper(b);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();a.ui.ddmanager&&(a.ui.ddmanager.current=this);this._cacheMargins();
this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(b);this.originalPageX=b.pageX;this.originalPageY=b.pageY;
c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt);c.containment&&this._setContainment();if(!1===this._trigger("start",b))return this._clear(),!1;this._cacheHelperProportions();a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b);this._mouseDrag(b,!0);a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b);return!0},_mouseDrag:function(b,c){this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");if(!c){var d=this._uiHash();if(!1===this._trigger("drag",
b,d))return this._mouseUp({}),!1;this.position=d.position}this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px");this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");a.ui.ddmanager&&a.ui.ddmanager.drag(this,b);return!1},_mouseStop:function(b){var c=!1;a.ui.ddmanager&&!this.options.dropBehaviour&&(c=a.ui.ddmanager.drop(this,b));this.dropped&&(c=this.dropped,this.dropped=!1);for(var d=this.element[0],f=!1;d&&(d=d.parentNode);)d==
document&&(f=!0);if(!f&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!c||"valid"==this.options.revert&&c||!0===this.options.revert||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)){var n=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==n._trigger("stop",b)&&n._clear()})}else!1!==this._trigger("stop",b)&&this._clear();return!1},_mouseUp:function(b){a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});
a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b);return a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(b){var c=this.options.handle&&a(this.options.handle,this.element).length?!1:!0;a(this.options.handle,this.element).find("*").andSelf().each(function(){this==b.target&&(c=!0)});return c},_createHelper:function(b){var c=this.options;b=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],
[b])):"clone"==c.helper?this.element.clone().removeAttr("id"):this.element;b.parents("body").length||b.appendTo("parent"==c.appendTo?this.element[0].parentNode:c.appendTo);b[0]==this.element[0]||/(fixed|absolute)/.test(b.css("position"))||b.css("position","absolute");return b},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" "));a.isArray(b)&&(b={left:+b[0],top:+b[1]||0});"left"in b&&(this.offset.click.left=b.left+this.margins.left);"right"in b&&(this.offset.click.left=this.helperProportions.width-
b.right+this.margins.left);"top"in b&&(this.offset.click.top=b.top+this.margins.top);"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==
document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||
0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;"parent"==b.containment&&
(b.containment=this.helper[0].parentNode);if("document"==b.containment||"window"==b.containment)this.containment=["document"==b.containment?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==b.containment?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==b.containment?0:a(window).scrollLeft())+a("document"==b.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==b.containment?0:a(window).scrollTop())+
(a("document"==b.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(/^(document|window|parent)$/.test(b.containment)||b.containment.constructor==Array)b.containment.constructor==Array&&(this.containment=b.containment);else{var b=a(b.containment),c=b[0];if(c){b.offset();var d="hidden"!=a(c).css("overflow");this.containment=[(parseInt(a(c).css("borderLeftWidth"),10)||0)+(parseInt(a(c).css("paddingLeft"),10)||0),(parseInt(a(c).css("borderTopWidth"),
10)||0)+(parseInt(a(c).css("paddingTop"),10)||0),(d?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(d?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relative_container=b}}},
_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"==b?1:-1,f="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,n=/(html|body)/i.test(f[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():n?0:f.scrollTop())*d,left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"==this.cssPosition?
-this.scrollParent.scrollLeft():n?0:f.scrollLeft())*d}},_generatePosition:function(b){var c=this.options,d="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(d[0].tagName),n=b.pageX,h=b.pageY;if(this.originalPosition){var g;this.containment&&(this.relative_container?(g=this.relative_container.offset(),g=[this.containment[0]+g.left,this.containment[1]+g.top,this.containment[2]+
g.left,this.containment[3]+g.top]):g=this.containment,b.pageX-this.offset.click.left<g[0]&&(n=g[0]+this.offset.click.left),b.pageY-this.offset.click.top<g[1]&&(h=g[1]+this.offset.click.top),b.pageX-this.offset.click.left>g[2]&&(n=g[2]+this.offset.click.left),b.pageY-this.offset.click.top>g[3]&&(h=g[3]+this.offset.click.top));c.grid&&(h=c.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/c.grid[1])*c.grid[1]:this.originalPageY,h=g?h-this.offset.click.top<g[1]||h-this.offset.click.top>g[3]?
h-this.offset.click.top<g[1]?h+c.grid[1]:h-c.grid[1]:h:h,n=c.grid[0]?this.originalPageX+Math.round((n-this.originalPageX)/c.grid[0])*c.grid[0]:this.originalPageX,n=g?n-this.offset.click.left<g[0]||n-this.offset.click.left>g[2]?n-this.offset.click.left<g[0]?n+c.grid[0]:n-c.grid[0]:n:n)}return{top:h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():f?0:d.scrollTop()),left:n-this.offset.click.left-this.offset.relative.left-
this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():f?0:d.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]==this.element[0]||this.cancelHelperRemoval||this.helper.remove();this.helper=null;this.cancelHelperRemoval=!1},_trigger:function(b,c,d){d=d||this._uiHash();a.ui.plugin.call(this,b,[c,d]);"drag"==b&&(this.positionAbs=this._convertPositionTo("absolute"));return a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},
_uiHash:function(a){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var d=a(this).data("draggable"),f=d.options,n=a.extend({},c,{item:d.element});d.sortables=[];a(f.connectToSortable).each(function(){var c=a.data(this,"sortable");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,n))})},
stop:function(b,c){var d=a(this).data("draggable"),f=a.extend({},c,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"==d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",
b,f))})},drag:function(b,c){var d=a(this).data("draggable"),f=this;a.each(d.sortables,function(n){var h=!1,g=this;this.instance.positionAbs=d.positionAbs;this.instance.helperProportions=d.helperProportions;this.instance.offset.click=d.offset.click;this.instance._intersectsWith(this.instance.containerCache)&&(h=!0,a.each(d.sortables,function(){this.instance.positionAbs=d.positionAbs;this.instance.helperProportions=d.helperProportions;this.instance.offset.click=d.offset.click;this!=g&&this.instance._intersectsWith(this.instance.containerCache)&&
a.ui.contains(g.instance.element[0],this.instance.element[0])&&(h=!1);return h}));h?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(f).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=
d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=
!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}});a.ui.plugin.add("draggable","cursor",{start:function(b,c){var d=a("body"),f=a(this).data("draggable").options;d.css("cursor")&&(f._cursor=d.css("cursor"));d.css("cursor",f.cursor)},stop:function(b,
c){var d=a(this).data("draggable").options;d._cursor&&a("body").css("cursor",d._cursor)}});a.ui.plugin.add("draggable","opacity",{start:function(b,c){var d=a(c.helper),f=a(this).data("draggable").options;d.css("opacity")&&(f._opacity=d.css("opacity"));d.css("opacity",f.opacity)},stop:function(b,c){var d=a(this).data("draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity)}});a.ui.plugin.add("draggable","scroll",{start:function(b,c){var d=a(this).data("draggable");d.scrollParent[0]!=
document&&"HTML"!=d.scrollParent[0].tagName&&(d.overflowOffset=d.scrollParent.offset())},drag:function(b,c){var d=a(this).data("draggable"),f=d.options,n=!1;d.scrollParent[0]!=document&&"HTML"!=d.scrollParent[0].tagName?(f.axis&&"x"==f.axis||(d.overflowOffset.top+d.scrollParent[0].offsetHeight-b.pageY<f.scrollSensitivity?d.scrollParent[0].scrollTop=n=d.scrollParent[0].scrollTop+f.scrollSpeed:b.pageY-d.overflowOffset.top<f.scrollSensitivity&&(d.scrollParent[0].scrollTop=n=d.scrollParent[0].scrollTop-
f.scrollSpeed)),f.axis&&"y"==f.axis||(d.overflowOffset.left+d.scrollParent[0].offsetWidth-b.pageX<f.scrollSensitivity?d.scrollParent[0].scrollLeft=n=d.scrollParent[0].scrollLeft+f.scrollSpeed:b.pageX-d.overflowOffset.left<f.scrollSensitivity&&(d.scrollParent[0].scrollLeft=n=d.scrollParent[0].scrollLeft-f.scrollSpeed))):(f.axis&&"x"==f.axis||(b.pageY-a(document).scrollTop()<f.scrollSensitivity?n=a(document).scrollTop(a(document).scrollTop()-f.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<
f.scrollSensitivity&&(n=a(document).scrollTop(a(document).scrollTop()+f.scrollSpeed))),f.axis&&"y"==f.axis||(b.pageX-a(document).scrollLeft()<f.scrollSensitivity?n=a(document).scrollLeft(a(document).scrollLeft()-f.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<f.scrollSensitivity&&(n=a(document).scrollLeft(a(document).scrollLeft()+f.scrollSpeed))));!1!==n&&a.ui.ddmanager&&!f.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,b)}});a.ui.plugin.add("draggable","snap",{start:function(b,
c){var d=a(this).data("draggable"),f=d.options;d.snapElements=[];a(f.snap.constructor!=String?f.snap.items||":data(draggable)":f.snap).each(function(){var c=a(this),b=c.offset();this!=d.element[0]&&d.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),top:b.top,left:b.left})})},drag:function(b,c){for(var d=a(this).data("draggable"),f=d.options,n=f.snapTolerance,h=c.offset.left,g=h+d.helperProportions.width,m=c.offset.top,p=m+d.helperProportions.height,r=d.snapElements.length-
1;0<=r;r--){var t=d.snapElements[r].left,l=t+d.snapElements[r].width,q=d.snapElements[r].top,w=q+d.snapElements[r].height;if(t-n<h&&h<l+n&&q-n<m&&m<w+n||t-n<h&&h<l+n&&q-n<p&&p<w+n||t-n<g&&g<l+n&&q-n<m&&m<w+n||t-n<g&&g<l+n&&q-n<p&&p<w+n){if("inner"!=f.snapMode){var u=Math.abs(q-p)<=n,v=Math.abs(w-m)<=n,E=Math.abs(t-g)<=n,A=Math.abs(l-h)<=n;u&&(c.position.top=d._convertPositionTo("relative",{top:q-d.helperProportions.height,left:0}).top-d.margins.top);v&&(c.position.top=d._convertPositionTo("relative",
{top:w,left:0}).top-d.margins.top);E&&(c.position.left=d._convertPositionTo("relative",{top:0,left:t-d.helperProportions.width}).left-d.margins.left);A&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l}).left-d.margins.left)}var K=u||v||E||A;"outer"!=f.snapMode&&(u=Math.abs(q-m)<=n,v=Math.abs(w-p)<=n,E=Math.abs(t-h)<=n,A=Math.abs(l-g)<=n,u&&(c.position.top=d._convertPositionTo("relative",{top:q,left:0}).top-d.margins.top),v&&(c.position.top=d._convertPositionTo("relative",{top:w-d.helperProportions.height,
left:0}).top-d.margins.top),E&&(c.position.left=d._convertPositionTo("relative",{top:0,left:t}).left-d.margins.left),A&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l-d.helperProportions.width}).left-d.margins.left));!d.snapElements[r].snapping&&(u||v||E||A||K)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[r].item}));d.snapElements[r].snapping=u||v||E||A||K}else d.snapElements[r].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,
b,a.extend(d._uiHash(),{snapItem:d.snapElements[r].item})),d.snapElements[r].snapping=!1}}});a.ui.plugin.add("draggable","stack",{start:function(b,c){var d=a(this).data("draggable").options,d=a.makeArray(a(d.stack)).sort(function(c,b){return(parseInt(a(c).css("zIndex"),10)||0)-(parseInt(a(b).css("zIndex"),10)||0)});if(d.length){var f=parseInt(d[0].style.zIndex)||0;a(d).each(function(a){this.style.zIndex=f+a});this[0].style.zIndex=f+d.length}}});a.ui.plugin.add("draggable","zIndex",{start:function(b,
c){var d=a(c.helper),f=a(this).data("draggable").options;d.css("zIndex")&&(f._zIndex=d.css("zIndex"));d.css("zIndex",f.zIndex)},stop:function(b,c){var d=a(this).data("draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})})(jQuery);
(function(a,b){a.widget("ui.droppable",{version:"1.9.1",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var b=this.options,c=b.accept;this.isover=0;this.isout=1;this.accept=a.isFunction(c)?c:function(a){return a.is(c)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};a.ui.ddmanager.droppables[b.scope]=a.ui.ddmanager.droppables[b.scope]||[];a.ui.ddmanager.droppables[b.scope].push(this);
b.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var b=a.ui.ddmanager.droppables[this.options.scope],c=0;c<b.length;c++)b[c]==this&&b.splice(c,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(b,c){"accept"==b&&(this.accept=a.isFunction(c)?c:function(a){return a.is(c)});a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass);
c&&this._trigger("activate",b,this.ui(c))},_deactivate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);c&&this._trigger("deactivate",b,this.ui(c))},_over:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!=this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",b,this.ui(c)))},_out:function(b){var c=
a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!=this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(c)))},_drop:function(b,c){var d=c||a.ui.ddmanager.current;if(!d||(d.currentItem||d.element)[0]==this.element[0])return!1;var f=!1;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var c=a.data(this,"droppable");if(c.options.greedy&&
!c.options.disabled&&c.options.scope==d.options.scope&&c.accept.call(c.element[0],d.currentItem||d.element)&&a.ui.intersect(d,a.extend(c,{offset:c.element.offset()}),c.options.tolerance))return f=!0,!1});return f?!1:this.accept.call(this.element[0],d.currentItem||d.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(d)),this.element):!1},ui:function(a){return{draggable:a.currentItem||
a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}});a.ui.intersect=function(b,c,d){if(!c.offset)return!1;var f=(b.positionAbs||b.position.absolute).left,n=f+b.helperProportions.width,h=(b.positionAbs||b.position.absolute).top,g=h+b.helperProportions.height,m=c.offset.left,p=m+c.proportions.width,r=c.offset.top,t=r+c.proportions.height;switch(d){case "fit":return m<=f&&n<=p&&r<=h&&g<=t;case "intersect":return m<f+b.helperProportions.width/2&&n-b.helperProportions.width/2<p&&r<h+
b.helperProportions.height/2&&g-b.helperProportions.height/2<t;case "pointer":return a.ui.isOver((b.positionAbs||b.position.absolute).top+(b.clickOffset||b.offset.click).top,(b.positionAbs||b.position.absolute).left+(b.clickOffset||b.offset.click).left,r,m,c.proportions.height,c.proportions.width);case "touch":return(h>=r&&h<=t||g>=r&&g<=t||h<r&&g>t)&&(f>=m&&f<=p||n>=m&&n<=p||f<m&&n>p);default:return!1}};a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,c){var d=a.ui.ddmanager.droppables[b.options.scope]||
[],f=c?c.type:null,n=(b.currentItem||b.element).find(":data(droppable)").andSelf(),h=0;a:for(;h<d.length;h++)if(!(d[h].options.disabled||b&&!d[h].accept.call(d[h].element[0],b.currentItem||b.element))){for(var g=0;g<n.length;g++)if(n[g]==d[h].element[0]){d[h].proportions.height=0;continue a}d[h].visible="none"!=d[h].element.css("display");d[h].visible&&("mousedown"==f&&d[h]._activate.call(d[h],c),d[h].offset=d[h].element.offset(),d[h].proportions={width:d[h].element[0].offsetWidth,height:d[h].element[0].offsetHeight})}},
drop:function(b,c){var d=!1;a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance)&&(d=this._drop.call(this,c)||d),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,c)))});return d},dragStart:function(b,c){b.element.parentsUntil("body").bind("scroll.droppable",function(){b.options.refreshPositions||
a.ui.ddmanager.prepareOffsets(b,c)})},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c);a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var d=a.ui.intersect(b,this,this.options.tolerance);if(d=d||1!=this.isover?d&&0==this.isover?"isover":null:"isout"){var f;if(this.options.greedy){var n=this.options.scope,h=this.element.parents(":data(droppable)").filter(function(){return a.data(this,"droppable").options.scope===
n});h.length&&(f=a.data(h[0],"droppable"),f.greedyChild="isover"==d?1:0)}f&&"isover"==d&&(f.isover=0,f.isout=1,f._out.call(f,c));this[d]=1;this["isout"==d?"isover":"isout"]=0;this["isover"==d?"_over":"_out"].call(this,c);f&&"isout"==d&&(f.isout=0,f.isover=1,f._over.call(f,c))}}})},dragStop:function(b,c){b.element.parentsUntil("body").unbind("scroll.droppable");b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)}}})(jQuery);
(function(a,b){a.widget("ui.resizable",a.ui.mouse,{version:"1.9.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1E3},_create:function(){var c=this,b=this.options;this.element.addClass("ui-resizable");a.extend(this,{_aspectRatio:!!b.aspectRatio,aspectRatio:b.aspectRatio,originalElement:this.element,
_proportionallyResizeElements:[],_helper:b.helper||b.ghost||b.animate?b.helper||"ui-resizable-helper":null});this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(a('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),
this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",
zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize());this.handles=b.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var e=this.handles.split(",");
this.handles={};for(var h=0;h<e.length;h++){var g=a.trim(e[h]),m=a('<div class="ui-resizable-handle ui-resizable-'+g+'"></div>');m.css({zIndex:b.zIndex});"se"==g&&m.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[g]=".ui-resizable-"+g;this.element.append(m)}}this._renderAxis=function(c){c=c||this.element;for(var b in this.handles){this.handles[b].constructor==String&&(this.handles[b]=a(this.handles[b],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var d=
a(this.handles[b],this.element),e=0,e=/sw|ne|nw|se|n|s/.test(b)?d.outerHeight():d.outerWidth(),d=["padding",/ne|nw|n/.test(b)?"Top":/se|sw|s/.test(b)?"Bottom":/^e$/.test(b)?"Right":"Left"].join("");c.css(d,e);this._proportionallyResize()}a(this.handles[b])}};this._renderAxis(this.element);this._handles=a(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!c.resizing){if(this.className)var a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);c.axis=
a&&a[1]?a[1]:"se"}});b.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").mouseenter(function(){b.disabled||(a(this).removeClass("ui-resizable-autohide"),c._handles.show())}).mouseleave(function(){b.disabled||c.resizing||(a(this).addClass("ui-resizable-autohide"),c._handles.hide())}));this._mouseInit()},_destroy:function(){this._mouseDestroy();var c=function(c){a(c).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};
if(this.elementIsWrapper){c(this.element);var b=this.element;this.originalElement.css({position:b.css("position"),width:b.outerWidth(),height:b.outerHeight(),top:b.css("top"),left:b.css("left")}).insertAfter(b);b.remove()}this.originalElement.css("resize",this.originalResizeStyle);c(this.originalElement);return this},_mouseCapture:function(c){var b=!1,e;for(e in this.handles)a(this.handles[e])[0]==c.target&&(b=!0);return!this.options.disabled&&b},_mouseStart:function(c){var b=this.options,n=this.element.position(),
h=this.element;this.resizing=!0;this.documentScroll={top:a(document).scrollTop(),left:a(document).scrollLeft()};(h.is(".ui-draggable")||/absolute/.test(h.css("position")))&&h.css({position:"absolute",top:n.top,left:n.left});this._renderProxy();var n=e(this.helper.css("left")),g=e(this.helper.css("top"));b.containment&&(n+=a(b.containment).scrollLeft()||0,g+=a(b.containment).scrollTop()||0);this.offset=this.helper.offset();this.position={left:n,top:g};this.size=this._helper?{width:h.outerWidth(),height:h.outerHeight()}:
{width:h.width(),height:h.height()};this.originalSize=this._helper?{width:h.outerWidth(),height:h.outerHeight()}:{width:h.width(),height:h.height()};this.originalPosition={left:n,top:g};this.sizeDiff={width:h.outerWidth()-h.width(),height:h.outerHeight()-h.height()};this.originalMousePosition={left:c.pageX,top:c.pageY};this.aspectRatio="number"==typeof b.aspectRatio?b.aspectRatio:this.originalSize.width/this.originalSize.height||1;b=a(".ui-resizable-"+this.axis).css("cursor");a("body").css("cursor",
"auto"==b?this.axis+"-resize":b);h.addClass("ui-resizable-resizing");this._propagate("start",c);return!0},_mouseDrag:function(a){var c=this.helper,b=this.originalMousePosition,e=this._change[this.axis];if(!e)return!1;b=e.apply(this,[a,a.pageX-b.left||0,a.pageY-b.top||0]);this._updateVirtualBoundaries(a.shiftKey);if(this._aspectRatio||a.shiftKey)b=this._updateRatio(b,a);b=this._respectSize(b,a);this._propagate("resize",a);c.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+
"px",height:this.size.height+"px"});!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();this._updateCache(b);this._trigger("resize",a,this.ui());return!1},_mouseStop:function(c){this.resizing=!1;var b=this.options;if(this._helper){var e=this._proportionallyResizeElements,h=e.length&&/textarea/i.test(e[0].nodeName),e=h&&a.ui.hasScroll(e[0],"left")?0:this.sizeDiff.height,h=h?0:this.sizeDiff.width,h={width:this.helper.width()-h,height:this.helper.height()-e},e=parseInt(this.element.css("left"),
10)+(this.position.left-this.originalPosition.left)||null,g=parseInt(this.element.css("top"),10)+(this.position.top-this.originalPosition.top)||null;b.animate||this.element.css(a.extend(h,{top:g,left:e}));this.helper.height(this.size.height);this.helper.width(this.size.width);this._helper&&!b.animate&&this._proportionallyResize()}a("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",c);this._helper&&this.helper.remove();return!1},_updateVirtualBoundaries:function(a){var b=
this.options,e,h,g,b={minWidth:c(b.minWidth)?b.minWidth:0,maxWidth:c(b.maxWidth)?b.maxWidth:Infinity,minHeight:c(b.minHeight)?b.minHeight:0,maxHeight:c(b.maxHeight)?b.maxHeight:Infinity};if(this._aspectRatio||a)a=b.minHeight*this.aspectRatio,h=b.minWidth/this.aspectRatio,e=b.maxHeight*this.aspectRatio,g=b.maxWidth/this.aspectRatio,a>b.minWidth&&(b.minWidth=a),h>b.minHeight&&(b.minHeight=h),e<b.maxWidth&&(b.maxWidth=e),g<b.maxHeight&&(b.maxHeight=g);this._vBoundaries=b},_updateCache:function(a){this.offset=
this.helper.offset();c(a.left)&&(this.position.left=a.left);c(a.top)&&(this.position.top=a.top);c(a.height)&&(this.size.height=a.height);c(a.width)&&(this.size.width=a.width)},_updateRatio:function(a,b){var e=this.position,h=this.size,g=this.axis;c(a.height)?a.width=a.height*this.aspectRatio:c(a.width)&&(a.height=a.width/this.aspectRatio);"sw"==g&&(a.left=e.left+(h.width-a.width),a.top=null);"nw"==g&&(a.top=e.top+(h.height-a.height),a.left=e.left+(h.width-a.width));return a},_respectSize:function(a,
b){var e=this._vBoundaries,h=this.axis,g=c(a.width)&&e.maxWidth&&e.maxWidth<a.width,m=c(a.height)&&e.maxHeight&&e.maxHeight<a.height,p=c(a.width)&&e.minWidth&&e.minWidth>a.width,r=c(a.height)&&e.minHeight&&e.minHeight>a.height;p&&(a.width=e.minWidth);r&&(a.height=e.minHeight);g&&(a.width=e.maxWidth);m&&(a.height=e.maxHeight);var t=this.originalPosition.left+this.originalSize.width,l=this.position.top+this.size.height,q=/sw|nw|w/.test(h),h=/nw|ne|n/.test(h);p&&q&&(a.left=t-e.minWidth);g&&q&&(a.left=
t-e.maxWidth);r&&h&&(a.top=l-e.minHeight);m&&h&&(a.top=l-e.maxHeight);(e=!a.width&&!a.height)&&!a.left&&a.top?a.top=null:e&&!a.top&&a.left&&(a.left=null);return a},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var c=this.helper||this.element,b=0;b<this._proportionallyResizeElements.length;b++){var e=this._proportionallyResizeElements[b];if(!this.borderDif){var h=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],
g=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];this.borderDif=a.map(h,function(a,c){var b=parseInt(a,10)||0,d=parseInt(g[c],10)||0;return b+d})}e.css({height:c.height()-this.borderDif[0]-this.borderDif[2]||0,width:c.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var c=this.options;this.elementOffset=this.element.offset();if(this._helper){this.helper=this.helper||a('<div style="overflow:hidden;"></div>');var b=a.ui.ie6?1:0,e=a.ui.ie6?
2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+e,height:this.element.outerHeight()+e,position:"absolute",left:this.elementOffset.left-b+"px",top:this.elementOffset.top-b+"px",zIndex:++c.zIndex});this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(a,c,b){return{width:this.originalSize.width+c}},w:function(a,c,b){return{left:this.originalPosition.left+c,width:this.originalSize.width-c}},n:function(a,c,b){return{top:this.originalPosition.top+
b,height:this.originalSize.height-b}},s:function(a,c,b){return{height:this.originalSize.height+b}},se:function(c,b,e){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[c,b,e]))},sw:function(c,b,e){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[c,b,e]))},ne:function(c,b,e){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[c,b,e]))},nw:function(c,b,e){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,
[c,b,e]))}},_propagate:function(c,b){a.ui.plugin.call(this,c,[b,this.ui()]);"resize"!=c&&this._trigger(c,b,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});a.ui.plugin.add("resizable","alsoResize",{start:function(c,b){var e=a(this).data("resizable").options,h=function(c){a(c).each(function(){var c=a(this);c.data("resizable-alsoresize",
{width:parseInt(c.width(),10),height:parseInt(c.height(),10),left:parseInt(c.css("left"),10),top:parseInt(c.css("top"),10)})})};"object"!=typeof e.alsoResize||e.alsoResize.parentNode?h(e.alsoResize):e.alsoResize.length?(e.alsoResize=e.alsoResize[0],h(e.alsoResize)):a.each(e.alsoResize,function(a){h(a)})},resize:function(c,b){var e=a(this).data("resizable"),h=e.options,g=e.originalSize,m=e.originalPosition,p={height:e.size.height-g.height||0,width:e.size.width-g.width||0,top:e.position.top-m.top||
0,left:e.position.left-m.left||0},r=function(c,d){a(c).each(function(){var c=a(this),e=a(this).data("resizable-alsoresize"),g={},h=d&&d.length?d:c.parents(b.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(h,function(a,c){var b=(e[c]||0)+(p[c]||0);b&&0<=b&&(g[c]=b||null)});c.css(g)})};"object"!=typeof h.alsoResize||h.alsoResize.nodeType?r(h.alsoResize):a.each(h.alsoResize,function(a,c){r(a,c)})},stop:function(c,b){a(this).removeData("resizable-alsoresize")}});a.ui.plugin.add("resizable",
"animate",{stop:function(c,b){var e=a(this).data("resizable"),h=e.options,g=e._proportionallyResizeElements,m=g.length&&/textarea/i.test(g[0].nodeName),p=m&&a.ui.hasScroll(g[0],"left")?0:e.sizeDiff.height,m={width:e.size.width-(m?0:e.sizeDiff.width),height:e.size.height-p},p=parseInt(e.element.css("left"),10)+(e.position.left-e.originalPosition.left)||null,r=parseInt(e.element.css("top"),10)+(e.position.top-e.originalPosition.top)||null;e.element.animate(a.extend(m,r&&p?{top:r,left:p}:{}),{duration:h.animateDuration,
easing:h.animateEasing,step:function(){var b={width:parseInt(e.element.css("width"),10),height:parseInt(e.element.css("height"),10),top:parseInt(e.element.css("top"),10),left:parseInt(e.element.css("left"),10)};g&&g.length&&a(g[0]).css({width:b.width,height:b.height});e._updateCache(b);e._propagate("resize",c)}})}});a.ui.plugin.add("resizable","containment",{start:function(c,b){var n=a(this).data("resizable"),h=n.element,g=n.options.containment;if(h=g instanceof a?g.get(0):/parent/.test(g)?h.parent().get(0):
g)if(n.containerElement=a(h),/document/.test(g)||g==document)n.containerOffset={left:0,top:0},n.containerPosition={left:0,top:0},n.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight};else{var m=a(h),p=[];a(["Top","Right","Left","Bottom"]).each(function(a,c){p[a]=e(m.css("padding"+c))});n.containerOffset=m.offset();n.containerPosition=m.position();n.containerSize={height:m.innerHeight()-p[3],width:m.innerWidth()-
p[1]};var g=n.containerOffset,r=n.containerSize.height,t=n.containerSize.width,t=a.ui.hasScroll(h,"left")?h.scrollWidth:t,r=a.ui.hasScroll(h)?h.scrollHeight:r;n.parentData={element:h,left:g.left,top:g.top,width:t,height:r}}},resize:function(c,b){var e=a(this).data("resizable"),h=e.options,g=e.containerOffset,m=e.position,p=e._aspectRatio||c.shiftKey,r={top:0,left:0},t=e.containerElement;t[0]!=document&&/static/.test(t.css("position"))&&(r=g);m.left<(e._helper?g.left:0)&&(e.size.width+=e._helper?e.position.left-
g.left:e.position.left-r.left,p&&(e.size.height=e.size.width/e.aspectRatio),e.position.left=h.helper?g.left:0);m.top<(e._helper?g.top:0)&&(e.size.height+=e._helper?e.position.top-g.top:e.position.top,p&&(e.size.width=e.size.height*e.aspectRatio),e.position.top=e._helper?g.top:0);e.offset.left=e.parentData.left+e.position.left;e.offset.top=e.parentData.top+e.position.top;h=Math.abs(e.offset.left-r.left+e.sizeDiff.width);g=Math.abs((e._helper?e.offset.top-r.top:e.offset.top-g.top)+e.sizeDiff.height);
r=e.containerElement.get(0)==e.element.parent().get(0);m=/relative|absolute/.test(e.containerElement.css("position"));r&&m&&(h-=e.parentData.left);h+e.size.width>=e.parentData.width&&(e.size.width=e.parentData.width-h,p&&(e.size.height=e.size.width/e.aspectRatio));g+e.size.height>=e.parentData.height&&(e.size.height=e.parentData.height-g,p&&(e.size.width=e.size.height*e.aspectRatio))},stop:function(c,b){var e=a(this).data("resizable"),h=e.options,g=e.containerOffset,m=e.containerPosition,p=e.containerElement,
r=a(e.helper),t=r.offset(),l=r.outerWidth()-e.sizeDiff.width,r=r.outerHeight()-e.sizeDiff.height;e._helper&&!h.animate&&/relative/.test(p.css("position"))&&a(this).css({left:t.left-m.left-g.left,width:l,height:r});e._helper&&!h.animate&&/static/.test(p.css("position"))&&a(this).css({left:t.left-m.left-g.left,width:l,height:r})}});a.ui.plugin.add("resizable","ghost",{start:function(c,b){var e=a(this).data("resizable"),h=e.options,g=e.size;e.ghost=e.originalElement.clone();e.ghost.css({opacity:.25,
display:"block",position:"relative",height:g.height,width:g.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof h.ghost?h.ghost:"");e.ghost.appendTo(e.helper)},resize:function(c,b){var e=a(this).data("resizable");e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(c,b){var e=a(this).data("resizable");e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}});a.ui.plugin.add("resizable","grid",{resize:function(c,
b){var e=a(this).data("resizable"),h=e.options,g=e.size,m=e.originalSize,p=e.originalPosition,r=e.axis;h.grid="number"==typeof h.grid?[h.grid,h.grid]:h.grid;var t=Math.round((g.width-m.width)/(h.grid[0]||1))*(h.grid[0]||1),h=Math.round((g.height-m.height)/(h.grid[1]||1))*(h.grid[1]||1);/^(se|s|e)$/.test(r)?(e.size.width=m.width+t,e.size.height=m.height+h):/^(ne)$/.test(r)?(e.size.width=m.width+t,e.size.height=m.height+h,e.position.top=p.top-h):(/^(sw)$/.test(r)?(e.size.width=m.width+t,e.size.height=
m.height+h):(e.size.width=m.width+t,e.size.height=m.height+h,e.position.top=p.top-h),e.position.left=p.left-t)}});var e=function(a){return parseInt(a,10)||0},c=function(a){return!isNaN(parseInt(a,10))}})(jQuery);
(function(a,b){a.widget("ui.selectable",a.ui.mouse,{version:"1.9.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var b=this;this.element.addClass("ui-selectable");this.dragged=!1;var c;this.refresh=function(){c=a(b.options.filter,b.element[0]);c.addClass("ui-selectee");c.each(function(){var c=a(this),b=c.offset();a.data(this,"selectable-item",{element:this,$element:c,left:b.left,top:b.top,right:b.left+c.outerWidth(),bottom:b.top+c.outerHeight(),
startselected:!1,selected:c.hasClass("ui-selected"),selecting:c.hasClass("ui-selecting"),unselecting:c.hasClass("ui-unselecting")})})};this.refresh();this.selectees=c.addClass("ui-selectee");this._mouseInit();this.helper=a("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled");this._mouseDestroy()},_mouseStart:function(b){var c=this;this.opos=[b.pageX,
b.pageY];if(!this.options.disabled){var d=this.options;this.selectees=a(d.filter,this.element[0]);this._trigger("start",b);a(d.appendTo).append(this.helper);this.helper.css({left:b.clientX,top:b.clientY,width:0,height:0});d.autoRefresh&&this.refresh();this.selectees.filter(".ui-selected").each(function(){var d=a.data(this,"selectable-item");d.startselected=!0;b.metaKey||b.ctrlKey||(d.$element.removeClass("ui-selected"),d.selected=!1,d.$element.addClass("ui-unselecting"),d.unselecting=!0,c._trigger("unselecting",
b,{unselecting:d.element}))});a(b.target).parents().andSelf().each(function(){var d=a.data(this,"selectable-item");if(d){var n=!b.metaKey&&!b.ctrlKey||!d.$element.hasClass("ui-selected");d.$element.removeClass(n?"ui-unselecting":"ui-selected").addClass(n?"ui-selecting":"ui-unselecting");d.unselecting=!n;d.selecting=n;(d.selected=n)?c._trigger("selecting",b,{selecting:d.element}):c._trigger("unselecting",b,{unselecting:d.element});return!1}})}},_mouseDrag:function(b){var c=this;this.dragged=!0;if(!this.options.disabled){var d=
this.options,f=this.opos[0],n=this.opos[1],h=b.pageX,g=b.pageY;if(f>h)var m=h,h=f,f=m;n>g&&(m=g,g=n,n=m);this.helper.css({left:f,top:n,width:h-f,height:g-n});this.selectees.each(function(){var m=a.data(this,"selectable-item");if(m&&m.element!=c.element[0]){var r=!1;"touch"==d.tolerance?r=!(m.left>h||m.right<f||m.top>g||m.bottom<n):"fit"==d.tolerance&&(r=m.left>f&&m.right<h&&m.top>n&&m.bottom<g);r?(m.selected&&(m.$element.removeClass("ui-selected"),m.selected=!1),m.unselecting&&(m.$element.removeClass("ui-unselecting"),
m.unselecting=!1),m.selecting||(m.$element.addClass("ui-selecting"),m.selecting=!0,c._trigger("selecting",b,{selecting:m.element}))):(m.selecting&&((b.metaKey||b.ctrlKey)&&m.startselected?(m.$element.removeClass("ui-selecting"),m.selecting=!1,m.$element.addClass("ui-selected"),m.selected=!0):(m.$element.removeClass("ui-selecting"),m.selecting=!1,m.startselected&&(m.$element.addClass("ui-unselecting"),m.unselecting=!0),c._trigger("unselecting",b,{unselecting:m.element}))),!m.selected||b.metaKey||b.ctrlKey||
m.startselected||(m.$element.removeClass("ui-selected"),m.selected=!1,m.$element.addClass("ui-unselecting"),m.unselecting=!0,c._trigger("unselecting",b,{unselecting:m.element})))}});return!1}},_mouseStop:function(b){var c=this;this.dragged=!1;a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-unselecting");d.unselecting=!1;d.startselected=!1;c._trigger("unselected",b,{unselected:d.element})});a(".ui-selecting",this.element[0]).each(function(){var d=
a.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected");d.selecting=!1;d.selected=!0;d.startselected=!0;c._trigger("selected",b,{selected:d.element})});this._trigger("stop",b);this.helper.remove();return!1}})})(jQuery);
(function(a,b){a.widget("ui.sortable",a.ui.mouse,{version:"1.9.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1E3},_create:function(){var a=this.options;this.containerCache={};this.element.addClass("ui-sortable");
this.refresh();this.floating=this.items.length?"x"===a.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1;this.offset=this.element.offset();this._mouseInit();this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled");this._mouseDestroy();for(var a=this.items.length-1;0<=a;a--)this.items[a].item.removeData(this.widgetName+"-item");return this},_setOption:function(b,c){"disabled"===b?(this.options[b]=
c,this.widget().toggleClass("ui-sortable-disabled",!!c)):a.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(b,c){var d=this;if(this.reverting||this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(b);var f=null;a(b.target).parents().each(function(){if(a.data(this,d.widgetName+"-item")==d)return f=a(this),!1});a.data(b.target,d.widgetName+"-item")==d&&(f=a(b.target));if(!f)return!1;if(this.options.handle&&!c){var n=!1;a(this.options.handle,f).find("*").andSelf().each(function(){this==
b.target&&(n=!0)});if(!n)return!1}this.currentItem=f;this._removeCurrentsFromItems();return!0},_mouseStart:function(b,c,d){c=this.options;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(b);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};a.extend(this.offset,{click:{left:b.pageX-this.offset.left,
top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");this.originalPosition=this._generatePosition(b);this.originalPageX=b.pageX;this.originalPageY=b.pageY;c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};this.helper[0]!=this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();
c.containment&&this._setContainment();c.cursor&&(a("body").css("cursor")&&(this._storedCursor=a("body").css("cursor")),a("body").css("cursor",c.cursor));c.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",c.opacity));c.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",c.zIndex));this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset());
this._trigger("start",b,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!d)for(d=this.containers.length-1;0<=d;d--)this.containers[d]._trigger("activate",b,this._uiHash(this));a.ui.ddmanager&&(a.ui.ddmanager.current=this);a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b);this.dragging=!0;this.helper.addClass("ui-sortable-helper");this._mouseDrag(b);return!0},_mouseDrag:function(b){this.position=this._generatePosition(b);this.positionAbs=this._convertPositionTo("absolute");
this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var c=this.options,d=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<c.scrollSensitivity?this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop+c.scrollSpeed:b.pageY-this.overflowOffset.top<c.scrollSensitivity&&(this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop-c.scrollSpeed),this.overflowOffset.left+
this.scrollParent[0].offsetWidth-b.pageX<c.scrollSensitivity?this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft+c.scrollSpeed:b.pageX-this.overflowOffset.left<c.scrollSensitivity&&(this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft-c.scrollSpeed)):(b.pageY-a(document).scrollTop()<c.scrollSensitivity?d=a(document).scrollTop(a(document).scrollTop()-c.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<c.scrollSensitivity&&(d=a(document).scrollTop(a(document).scrollTop()+
c.scrollSpeed)),b.pageX-a(document).scrollLeft()<c.scrollSensitivity?d=a(document).scrollLeft(a(document).scrollLeft()-c.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<c.scrollSensitivity&&(d=a(document).scrollLeft(a(document).scrollLeft()+c.scrollSpeed)));!1!==d&&a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)}this.positionAbs=this._convertPositionTo("absolute");this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px");
this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(c=this.items.length-1;0<=c;c--){var d=this.items[c],f=d.item[0],n=this._intersectsWithPointer(d);if(n&&d.instance===this.currentContainer&&f!=this.currentItem[0]&&this.placeholder[1==n?"next":"prev"]()[0]!=f&&!a.contains(this.placeholder[0],f)&&("semi-dynamic"==this.options.type?!a.contains(this.element[0],f):1)){this.direction=1==n?"down":"up";if("pointer"==this.options.tolerance||this._intersectsWithSides(d))this._rearrange(b,
d);else break;this._trigger("change",b,this._uiHash());break}}this._contactContainers(b);a.ui.ddmanager&&a.ui.ddmanager.drag(this,b);this._trigger("sort",b,this._uiHash());this.lastPositionAbs=this.positionAbs;return!1},_mouseStop:function(b,c){if(b){a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b);if(this.options.revert){var d=this,f=this.placeholder.offset();this.reverting=!0;a(this.helper).animate({left:f.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==
document.body?0:this.offsetParent[0].scrollLeft),top:f.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){d._clear(b)})}else this._clear(b,c);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null});"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var b=this.containers.length-1;0<=b;b--)this.containers[b]._trigger("deactivate",
null,this._uiHash(this)),this.containers[b].containerCache.over&&(this.containers[b]._trigger("out",null,this._uiHash(this)),this.containers[b].containerCache.over=0)}this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):
a(this.domPosition.parent).prepend(this.currentItem));return this},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];b=b||{};a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[-=_](.+)/);c&&d.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))});!d.length&&b.key&&d.push(b.key+"=");return d.join("&")},toArray:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];b=b||{};c.each(function(){d.push(a(b.item||this).attr(b.attribute||
"id")||"")});return d},_intersectsWith:function(a){var c=this.positionAbs.left,b=c+this.helperProportions.width,f=this.positionAbs.top,n=f+this.helperProportions.height,h=a.left,g=h+a.width,m=a.top,p=m+a.height,r=this.offset.click.top,t=this.offset.click.left;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?f+r>m&&f+r<p&&c+t>h&&c+t<g:h<c+this.helperProportions.width/
2&&b-this.helperProportions.width/2<g&&m<f+this.helperProportions.height/2&&n-this.helperProportions.height/2<p},_intersectsWithPointer:function(b){var c="x"===this.options.axis||a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top,b.height);b="y"===this.options.axis||a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left,b.width);c=c&&b;b=this._getDragVerticalDirection();var d=this._getDragHorizontalDirection();return c?this.floating?d&&"right"==d||"down"==b?2:1:b&&("down"==
b?2:1):!1},_intersectsWithSides:function(b){var c=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top+b.height/2,b.height);b=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left+b.width/2,b.width);var d=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return this.floating&&f?"right"==f&&b||"left"==f&&!b:d&&("down"==d&&c||"up"==d&&!c)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!=a&&(0<a?"down":"up")},
_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!=a&&(0<a?"right":"left")},refresh:function(a){this._refreshItems(a);this.refreshPositions();return this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){var c=[],d=[],f=this._connectWith();if(f&&b)for(b=f.length-1;0<=b;b--)for(var n=a(f[b]),h=n.length-1;0<=h;h--){var g=a.data(n[h],this.widgetName);g&&
g!=this&&!g.options.disabled&&d.push([a.isFunction(g.options.items)?g.options.items.call(g.element):a(g.options.items,g.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),g])}d.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(b=d.length-1;0<=b;b--)d[b][0].each(function(){c.push(this)});return a(c)},_removeCurrentsFromItems:function(){var b=
this.currentItem.find(":data("+this.widgetName+"-item)");this.items=a.grep(this.items,function(a){for(var d=0;d<b.length;d++)if(b[d]==a.item[0])return!1;return!0})},_refreshItems:function(b){this.items=[];this.containers=[this];var c=this.items,d=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],f=this._connectWith();if(f&&this.ready)for(var n=f.length-1;0<=n;n--)for(var h=a(f[n]),g=h.length-1;0<=g;g--){var m=
a.data(h[g],this.widgetName);m&&m!=this&&!m.options.disabled&&(d.push([a.isFunction(m.options.items)?m.options.items.call(m.element[0],b,{item:this.currentItem}):a(m.options.items,m.element),m]),this.containers.push(m))}for(n=d.length-1;0<=n;n--)for(b=d[n][1],f=d[n][0],g=0,h=f.length;g<h;g++)m=a(f[g]),m.data(this.widgetName+"-item",b),c.push({item:m,instance:b,width:0,height:0,left:0,top:0})},refreshPositions:function(b){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());
for(var c=this.items.length-1;0<=c;c--){var d=this.items[c];if(d.instance==this.currentContainer||!this.currentContainer||d.item[0]==this.currentItem[0]){var f=this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item;b||(d.width=f.outerWidth(),d.height=f.outerHeight());f=f.offset();d.left=f.left;d.top=f.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(c=this.containers.length-1;0<=c;c--)f=this.containers[c].element.offset(),
this.containers[c].containerCache.left=f.left,this.containers[c].containerCache.top=f.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight();return this},_createPlaceholder:function(b){b=b||this;var c=b.options;if(!c.placeholder||c.placeholder.constructor==String){var d=c.placeholder;c.placeholder={element:function(){var c=a(document.createElement(b.currentItem[0].nodeName)).addClass(d||
b.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];d||(c.style.visibility="hidden");return c},update:function(a,n){if(!d||c.forcePlaceholderSize)n.height()||n.height(b.currentItem.innerHeight()-parseInt(b.currentItem.css("paddingTop")||0,10)-parseInt(b.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(b.currentItem.innerWidth()-parseInt(b.currentItem.css("paddingLeft")||0,10)-parseInt(b.currentItem.css("paddingRight")||0,10))}}}b.placeholder=a(c.placeholder.element.call(b.element,
b.currentItem));b.currentItem.after(b.placeholder);c.placeholder.update(b,b.placeholder)},_contactContainers:function(b){for(var c=null,d=null,f=this.containers.length-1;0<=f;f--)a.contains(this.currentItem[0],this.containers[f].element[0])||(this._intersectsWith(this.containers[f].containerCache)?c&&a.contains(this.containers[f].element[0],c.element[0])||(c=this.containers[f],d=f):this.containers[f].containerCache.over&&(this.containers[f]._trigger("out",b,this._uiHash(this)),this.containers[f].containerCache.over=
0));if(c)if(1===this.containers.length)this.containers[d]._trigger("over",b,this._uiHash(this)),this.containers[d].containerCache.over=1;else{for(var c=1E4,f=null,n=this.containers[d].floating?"left":"top",h=this.containers[d].floating?"width":"height",g=this.positionAbs[n]+this.offset.click[n],m=this.items.length-1;0<=m;m--)if(a.contains(this.containers[d].element[0],this.items[m].item[0])&&this.items[m].item[0]!=this.currentItem[0]){var p=this.items[m].item.offset()[n],r=!1;Math.abs(p-g)>Math.abs(p+
this.items[m][h]-g)&&(r=!0,p+=this.items[m][h]);Math.abs(p-g)<c&&(c=Math.abs(p-g),f=this.items[m],this.direction=r?"up":"down")}if(f||this.options.dropOnEmpty)this.currentContainer=this.containers[d],f?this._rearrange(b,f,null,!0):this._rearrange(b,null,this.containers[d].element,!0),this._trigger("change",b,this._uiHash()),this.containers[d]._trigger("change",b,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[d]._trigger("over",b,this._uiHash(this)),
this.containers[d].containerCache.over=1}},_createHelper:function(b){var c=this.options;b=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):"clone"==c.helper?this.currentItem.clone():this.currentItem;b.parents("body").length||a("parent"!=c.appendTo?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(b[0]);b[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),
top:this.currentItem.css("top"),left:this.currentItem.css("left")});(""==b[0].style.width||c.forceHelperSize)&&b.width(this.currentItem.width());(""==b[0].style.height||c.forceHelperSize)&&b.height(this.currentItem.height());return b},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" "));a.isArray(b)&&(b={left:+b[0],top:+b[1]||0});"left"in b&&(this.offset.click.left=b.left+this.margins.left);"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left);
"top"in b&&(this.offset.click.top=b.top+this.margins.top);"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&
"html"==this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,
left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;"parent"==b.containment&&(b.containment=this.helper[0].parentNode);if("document"==b.containment||"window"==b.containment)this.containment=[0-this.offset.relative.left-this.offset.parent.left,
0-this.offset.relative.top-this.offset.parent.top,a("document"==b.containment?document:window).width()-this.helperProportions.width-this.margins.left,(a("document"==b.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)){var c=a(b.containment)[0],b=a(b.containment).offset(),d="hidden"!=a(c).css("overflow");this.containment=[b.left+(parseInt(a(c).css("borderLeftWidth"),10)||
0)+(parseInt(a(c).css("paddingLeft"),10)||0)-this.margins.left,b.top+(parseInt(a(c).css("borderTopWidth"),10)||0)+(parseInt(a(c).css("paddingTop"),10)||0)-this.margins.top,b.left+(d?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,b.top+(d?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),
10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"==b?1:-1,f="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,n=/(html|body)/i.test(f[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():n?0:f.scrollTop())*d,left:c.left+this.offset.relative.left*
d+this.offset.parent.left*d-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():n?0:f.scrollLeft())*d}},_generatePosition:function(b){var c=this.options,d="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,f=/(html|body)/i.test(d[0].tagName);"relative"!=this.cssPosition||this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());
var n=b.pageX,h=b.pageY;this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(n=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(h=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(n=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(h=this.containment[3]+this.offset.click.top)),c.grid&&(h=this.originalPageY+Math.round((h-
this.originalPageY)/c.grid[1])*c.grid[1],h=this.containment?h-this.offset.click.top<this.containment[1]||h-this.offset.click.top>this.containment[3]?h-this.offset.click.top<this.containment[1]?h+c.grid[1]:h-c.grid[1]:h:h,n=this.originalPageX+Math.round((n-this.originalPageX)/c.grid[0])*c.grid[0],n=this.containment?n-this.offset.click.left<this.containment[0]||n-this.offset.click.left>this.containment[2]?n-this.offset.click.left<this.containment[0]?n+c.grid[0]:n-c.grid[0]:n:n));return{top:h-this.offset.click.top-
this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():f?0:d.scrollTop()),left:n-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():f?0:d.scrollLeft())}},_rearrange:function(a,c,b,f){b?b[0].appendChild(this.placeholder[0]):c.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?c.item[0]:c.item[0].nextSibling);var n=this.counter=this.counter?++this.counter:
1;this._delay(function(){n==this.counter&&this.refreshPositions(!f)})},_clear:function(b,c){this.reverting=!1;var d=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var f in this._storedCSS)if("auto"==this._storedCSS[f]||"static"==this._storedCSS[f])this._storedCSS[f]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&
!c&&d.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))});!this.fromOutside&&this.domPosition.prev==this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent==this.currentItem.parent()[0]||c||d.push(function(a){this._trigger("update",a,this._uiHash())});this===this.currentContainer||c||(d.push(function(a){this._trigger("remove",a,this._uiHash())}),d.push(function(a){return function(c){a._trigger("receive",c,this._uiHash(this))}}.call(this,this.currentContainer)),
d.push(function(a){return function(c){a._trigger("update",c,this._uiHash(this))}}.call(this,this.currentContainer)));for(f=this.containers.length-1;0<=f;f--)c||d.push(function(a){return function(c){a._trigger("deactivate",c,this._uiHash(this))}}.call(this,this.containers[f])),this.containers[f].containerCache.over&&(d.push(function(a){return function(c){a._trigger("out",c,this._uiHash(this))}}.call(this,this.containers[f])),this.containers[f].containerCache.over=0);this._storedCursor&&a("body").css("cursor",
this._storedCursor);this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex);this.dragging=!1;if(this.cancelHelperRemoval){if(!c){this._trigger("beforeStop",b,this._uiHash());for(f=0;f<d.length;f++)d[f].call(this,b);this._trigger("stop",b,this._uiHash())}return this.fromOutside=!1}c||this._trigger("beforeStop",b,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.helper[0]!=
this.currentItem[0]&&this.helper.remove();this.helper=null;if(!c){for(f=0;f<d.length;f++)d[f].call(this,b);this._trigger("stop",b,this._uiHash())}this.fromOutside=!1;return!0},_trigger:function(){!1===a.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}}})})(jQuery);
(function(a,b){var e=0,c={},d={};c.height=c.paddingTop=c.paddingBottom=c.borderTopWidth=c.borderBottomWidth="hide";d.height=d.paddingTop=d.paddingBottom=d.borderTopWidth=d.borderBottomWidth="show";a.widget("ui.accordion",{version:"1.9.1",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var c=this.accordionId=
"ui-accordion-"+(this.element.attr("id")||++e),b=this.options;this.prevShow=this.prevHide=a();this.element.addClass("ui-accordion ui-widget ui-helper-reset");this.headers=this.element.find(b.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all");this._hoverable(this.headers);this._focusable(this.headers);this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").hide();b.collapsible||!1!==b.active&&null!=b.active||(b.active=
0);0>b.active&&(b.active+=this.headers.length);this.active=this._findActive(b.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top");this.active.next().addClass("ui-accordion-content-active").show();this._createIcons();this.refresh();this.element.attr("role","tablist");this.headers.attr("role","tab").each(function(b){var d=a(this),e=d.attr("id"),p=d.next(),r=p.attr("id");e||(e=c+"-header-"+b,d.attr("id",e));r||(r=c+"-panel-"+b,p.attr("id",r));d.attr("aria-controls",
r);p.attr("aria-labelledby",e)}).next().attr("role","tabpanel");this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide();this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0);this._on(this.headers,{keydown:"_keydown"});this._on(this.headers.next(),{keydown:"_panelKeyDown"});this._setupEvents(b.event)},
_getCreateEventData:function(){return{header:this.active,content:this.active.length?this.active.next():a()}},_createIcons:function(){var b=this.options.icons;b&&(a("<span>").addClass("ui-accordion-header-icon ui-icon "+b.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(b.header).addClass(b.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},
_destroy:function(){var a;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")});this._destroyIcons();a=this.headers.next().css("display",
"").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")});"content"!==this.options.heightStyle&&a.css("height","")},_setOption:function(a,b){"active"===a?this._activate(b):("event"===a&&(this.options.event&&this._off(this.headers,this.options.event),
this._setupEvents(b)),this._super(a,b),"collapsible"!==a||b||!1!==this.options.active||this._activate(0),"icons"===a&&(this._destroyIcons(),b&&this._createIcons()),"disabled"===a&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!b))},_keydown:function(b){if(!b.altKey&&!b.ctrlKey){var c=a.ui.keyCode,d=this.headers.length,e=this.headers.index(b.target),m=!1;switch(b.keyCode){case c.RIGHT:case c.DOWN:m=this.headers[(e+1)%d];break;case c.LEFT:case c.UP:m=this.headers[(e-1+d)%d];
break;case c.SPACE:case c.ENTER:this._eventHandler(b);break;case c.HOME:m=this.headers[0];break;case c.END:m=this.headers[d-1]}m&&(a(b.target).attr("tabIndex",-1),a(m).attr("tabIndex",0),m.focus(),b.preventDefault())}},_panelKeyDown:function(b){b.keyCode===a.ui.keyCode.UP&&b.ctrlKey&&a(b.currentTarget).prev().focus()},refresh:function(){var b,c,d=this.options.heightStyle,e=this.element.parent();"fill"===d?(a.support.minHeight||(c=e.css("overflow"),e.css("overflow","hidden")),b=e.height(),this.element.siblings(":visible").each(function(){var c=
a(this),d=c.css("position");"absolute"!==d&&"fixed"!==d&&(b-=c.outerHeight(!0))}),c&&e.css("overflow",c),this.headers.each(function(){b-=a(this).outerHeight(!0)}),this.headers.next().each(function(){a(this).height(Math.max(0,b-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")):"auto"===d&&(b=0,this.headers.next().each(function(){b=Math.max(b,a(this).height("").height())}).height(b))},_activate:function(b){b=this._findActive(b)[0];b!==this.active[0]&&(b=b||this.active[0],this._eventHandler({target:b,
currentTarget:b,preventDefault:a.noop}))},_findActive:function(b){return"number"===typeof b?this.headers.eq(b):a()},_setupEvents:function(b){var c={};b&&(a.each(b.split(" "),function(a,b){c[b]="_eventHandler"}),this._on(this.headers,c))},_eventHandler:function(b){var c=this.options,d=this.active,e=a(b.currentTarget),m=e[0]===d[0],p=m&&c.collapsible,r=p?a():e.next(),t=d.next(),r={oldHeader:d,oldPanel:t,newHeader:p?a():e,newPanel:r};b.preventDefault();m&&!c.collapsible||!1===this._trigger("beforeActivate",
b,r)||(c.active=p?!1:this.headers.index(e),this.active=m?a():e,this._toggle(r),d.removeClass("ui-accordion-header-active ui-state-active"),c.icons&&d.children(".ui-accordion-header-icon").removeClass(c.icons.activeHeader).addClass(c.icons.header),m||(e.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),c.icons&&e.children(".ui-accordion-header-icon").removeClass(c.icons.header).addClass(c.icons.activeHeader),e.next().addClass("ui-accordion-content-active")))},
_toggle:function(b){var c=b.newPanel,d=this.prevShow.length?this.prevShow:b.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0);this.prevShow=c;this.prevHide=d;this.options.animate?this._animate(c,d,b):(d.hide(),c.show(),this._toggleComplete(b));d.attr({"aria-expanded":"false","aria-hidden":"true"});d.prev().attr("aria-selected","false");c.length&&d.length?d.prev().attr("tabIndex",-1):c.length&&this.headers.filter(function(){return 0===a(this).attr("tabIndex")}).attr("tabIndex",-1);c.attr({"aria-expanded":"true",
"aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(a,b,e){var g,m,p,r=this,t=0,l=a.length&&(!b.length||a.index()<b.index()),q=this.options.animate||{},l=l&&q.down||q,w=function(){r._toggleComplete(e)};"number"===typeof l&&(p=l);"string"===typeof l&&(m=l);m=m||l.easing||q.easing;p=p||l.duration||q.duration;if(!b.length)return a.animate(d,p,m,w);if(!a.length)return b.animate(c,p,m,w);g=a.show().outerHeight();b.animate(c,{duration:p,easing:m,step:function(a,b){b.now=
Math.round(a)}});a.hide().animate(d,{duration:p,easing:m,complete:w,step:function(a,c){c.now=Math.round(a);"height"!==c.prop?t+=c.now:"content"!==r.options.heightStyle&&(c.now=Math.round(g-b.outerHeight()-t),t=0)}})},_toggleComplete:function(a){var b=a.oldPanel;b.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all");b.length&&(b.parent()[0].className=b.parent()[0].className);this._trigger("activate",null,a)}});!1!==a.uiBackCompat&&(function(a,b){a.extend(b.options,
{navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}});var c=b._create;b._create=function(){if(this.options.navigation){var b=this,d=this.element.find(this.options.header),e=d.next(),r=d.add(e).find("a").filter(this.options.navigationFilter)[0];r&&d.add(e).each(function(c){if(a.contains(this,r))return b.options.active=Math.floor(c/2),!1})}c.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(a,b){a.extend(b.options,{heightStyle:null,autoHeight:!0,
clearStyle:!1,fillSpace:!1});var c=b._create,d=b._setOption;a.extend(b,{_create:function(){this.options.heightStyle=this.options.heightStyle||this._mergeHeightStyle();c.call(this)},_setOption:function(a){if("autoHeight"===a||"clearStyle"===a||"fillSpace"===a)this.options.heightStyle=this._mergeHeightStyle();d.apply(this,arguments)},_mergeHeightStyle:function(){var a=this.options;if(a.fillSpace)return"fill";if(a.clearStyle)return"content";if(a.autoHeight)return"auto"}})}(jQuery,jQuery.ui.accordion.prototype),
function(a,b){a.extend(b.options.icons,{activeHeader:null,headerSelected:"ui-icon-triangle-1-s"});var c=b._createIcons;b._createIcons=function(){this.options.icons&&(this.options.icons.activeHeader=this.options.icons.activeHeader||this.options.icons.headerSelected);c.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(a,b){b.activate=b._activate;var c=b._findActive;b._findActive=function(a){-1===a&&(a=!1);a&&"number"!==typeof a&&(a=this.headers.index(this.headers.filter(a)),-1===a&&(a=!1));
return c.call(this,a)}}(jQuery,jQuery.ui.accordion.prototype),jQuery.ui.accordion.prototype.resize=jQuery.ui.accordion.prototype.refresh,function(a,b){a.extend(b.options,{change:null,changestart:null});var c=b._trigger;b._trigger=function(a,b,d){var e=c.apply(this,arguments);if(!e)return!1;"beforeActivate"===a?e=c.call(this,"changestart",b,{oldHeader:d.oldHeader,oldContent:d.oldPanel,newHeader:d.newHeader,newContent:d.newPanel}):"activate"===a&&(e=c.call(this,"change",b,{oldHeader:d.oldHeader,oldContent:d.oldPanel,
newHeader:d.newHeader,newContent:d.newPanel}));return e}}(jQuery,jQuery.ui.accordion.prototype),function(a,b){a.extend(b.options,{animate:null,animated:"slide"});var c=b._create;b._create=function(){var a=this.options;null===a.animate&&(a.animate=a.animated?"slide"===a.animated?300:"bounceslide"===a.animated?{duration:200,down:{easing:"easeOutBounce",duration:1E3}}:a.animated:!1);c.call(this)}}(jQuery,jQuery.ui.accordion.prototype))})(jQuery);
(function(a,b){var e=0;a.widget("ui.autocomplete",{version:"1.9.1",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var b,d,e;this.isMultiLine=this._isMultiLine();this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"];this.isNewMenu=!0;this.element.addClass("ui-autocomplete-input").attr("autocomplete",
"off");this._on(this.element,{keydown:function(n){if(this.element.prop("readOnly"))d=e=b=!0;else{d=e=b=!1;var h=a.ui.keyCode;switch(n.keyCode){case h.PAGE_UP:b=!0;this._move("previousPage",n);break;case h.PAGE_DOWN:b=!0;this._move("nextPage",n);break;case h.UP:b=!0;this._keyEvent("previous",n);break;case h.DOWN:b=!0;this._keyEvent("next",n);break;case h.ENTER:case h.NUMPAD_ENTER:this.menu.active&&(b=!0,n.preventDefault(),this.menu.select(n));break;case h.TAB:this.menu.active&&this.menu.select(n);
break;case h.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(n),n.preventDefault());break;default:d=!0,this._searchTimeout(n)}}},keypress:function(e){if(b)b=!1,e.preventDefault();else if(!d){var f=a.ui.keyCode;switch(e.keyCode){case f.PAGE_UP:this._move("previousPage",e);break;case f.PAGE_DOWN:this._move("nextPage",e);break;case f.UP:this._keyEvent("previous",e);break;case f.DOWN:this._keyEvent("next",e)}}},input:function(a){e?(e=!1,a.preventDefault()):this._searchTimeout(a)},
focus:function(){this.selectedItem=null;this.previous=this._value()},blur:function(a){this.cancelBlur?delete this.cancelBlur:(clearTimeout(this.searching),this.close(a),this._change(a))}});this._initSource();this.menu=a("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:a(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu");this._on(this.menu.element,{mousedown:function(b){b.preventDefault();this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur});
var c=this.menu.element[0];a(b.target).closest(".ui-menu-item").length||this._delay(function(){var b=this;this.document.one("mousedown",function(d){d.target===b.element[0]||d.target===c||a.contains(c,d.target)||b.close()})})},menufocus:function(b,c){if(this.isNewMenu&&(this.isNewMenu=!1,b.originalEvent&&/^mouse/.test(b.originalEvent.type))){this.menu.blur();this.document.one("mousemove",function(){a(b.target).trigger(b.originalEvent)});return}var d=c.item.data("ui-autocomplete-item")||c.item.data("item.autocomplete");
!1!==this._trigger("focus",b,{item:d})?b.originalEvent&&/^key/.test(b.originalEvent.type)&&this._value(d.value):this.liveRegion.text(d.value)},menuselect:function(a,b){var c=b.item.data("ui-autocomplete-item")||b.item.data("item.autocomplete"),d=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=d,this._delay(function(){this.previous=d;this.selectedItem=c}));!1!==this._trigger("select",a,{item:c})&&this._value(c.value);this.term=this._value();this.close(a);
this.selectedItem=c}});this.liveRegion=a("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element);a.fn.bgiframe&&this.menu.element.bgiframe();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching);this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove()},_setOption:function(a,b){this._super(a,
b);"source"===a&&this._initSource();"appendTo"===a&&this.menu.element.appendTo(this.document.find(b||"body")[0]);"disabled"===a&&b&&this.xhr&&this.xhr.abort()},_isMultiLine:function(){return this.element.is("textarea")?!0:this.element.is("input")?!1:this.element.prop("isContentEditable")},_initSource:function(){var b,d,e=this;a.isArray(this.options.source)?(b=this.options.source,this.source=function(d,e){e(a.ui.autocomplete.filter(b,d.term))}):"string"===typeof this.options.source?(d=this.options.source,
this.source=function(b,c){e.xhr&&e.xhr.abort();e.xhr=a.ajax({url:d,data:b,dataType:"json",success:function(a){c(a)},error:function(){c([])}})}):this.source=this.options.source},_searchTimeout:function(a){clearTimeout(this.searching);this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,a))},this.options.delay)},search:function(a,b){a=null!=a?a:this._value();this.term=this._value();if(a.length<this.options.minLength)return this.close(b);if(!1!==this._trigger("search",
b))return this._search(a)},_search:function(a){this.pending++;this.element.addClass("ui-autocomplete-loading");this.cancelSearch=!1;this.source({term:a},this._response())},_response:function(){var a=this,b=++e;return function(f){b===e&&a.__response(f);a.pending--;a.pending||a.element.removeClass("ui-autocomplete-loading")}},__response:function(a){a&&(a=this._normalize(a));this._trigger("response",null,{content:a});!this.options.disabled&&a&&a.length&&!this.cancelSearch?(this._suggest(a),this._trigger("open")):
this._close()},close:function(a){this.cancelSearch=!0;this._close(a)},_close:function(a){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",a))},_change:function(a){this.previous!==this._value()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return"string"===typeof b?{label:b,value:b}:a.extend({label:b.label||b.value,value:b.value||b.label},b)})},
_suggest:function(b){var d=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(d,b);this.menu.refresh();d.show();this._resizeMenu();d.position(a.extend({of:this.element},this.options.position));this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,d){var e=this;a.each(d,function(a,d){e._renderItemData(b,d)})},_renderItemData:function(a,b){return this._renderItem(a,
b).data("ui-autocomplete-item",b)},_renderItem:function(b,d){return a("<li>").append(a("<a>").text(d.label)).appendTo(b)},_move:function(a,b){if(this.menu.element.is(":visible"))if(this.menu.isFirstItem()&&/^previous/.test(a)||this.menu.isLastItem()&&/^next/.test(a))this._value(this.term),this.menu.blur();else this.menu[a](b);else this.search(null,b)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(a,b){if(!this.isMultiLine||
this.menu.element.is(":visible"))this._move(a,b),b.preventDefault()}});a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(b,d){var e=new RegExp(a.ui.autocomplete.escapeRegex(d),"i");return a.grep(b,function(a){return e.test(a.label||a.value||a)})}});a.widget("ui.autocomplete",a.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(a){return a+(1<a?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},
__response:function(a){var b;this._superApply(arguments);this.options.disabled||this.cancelSearch||(b=a&&a.length?this.options.messages.results(a.length):this.options.messages.noResults,this.liveRegion.text(b))}})})(jQuery);
(function(a,b){var e,c,d,f,n=function(){var b=a(this).find(":ui-button");setTimeout(function(){b.button("refresh")},1)},h=function(b){var c=b.name,d=b.form,e=a([]);c&&(e=d?a(d).find("[name='"+c+"']"):a("[name='"+c+"']",b.ownerDocument).filter(function(){return!this.form}));return e};a.widget("ui.button",{version:"1.9.1",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+
this.eventNamespace,n);"boolean"!==typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled);this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var b=this,m=this.options,p="checkbox"===this.type||"radio"===this.type,r="ui-state-hover"+(p?"":" ui-state-active");null===m.label&&(m.label="input"===this.type?this.buttonElement.val():this.buttonElement.html());this.buttonElement.addClass("ui-button ui-widget ui-state-default ui-corner-all").attr("role",
"button").bind("mouseenter"+this.eventNamespace,function(){m.disabled||(a(this).addClass("ui-state-hover"),this===e&&a(this).addClass("ui-state-active"))}).bind("mouseleave"+this.eventNamespace,function(){m.disabled||a(this).removeClass(r)}).bind("click"+this.eventNamespace,function(a){m.disabled&&(a.preventDefault(),a.stopImmediatePropagation())});this.element.bind("focus"+this.eventNamespace,function(){b.buttonElement.addClass("ui-state-focus")}).bind("blur"+this.eventNamespace,function(){b.buttonElement.removeClass("ui-state-focus")});
p&&(this.element.bind("change"+this.eventNamespace,function(){f||b.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(a){m.disabled||(f=!1,c=a.pageX,d=a.pageY)}).bind("mouseup"+this.eventNamespace,function(a){m.disabled||c===a.pageX&&d===a.pageY||(f=!0)}));"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(m.disabled||f)return!1;a(this).toggleClass("ui-state-active");b.buttonElement.attr("aria-pressed",b.element[0].checked)}):"radio"===
this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(m.disabled||f)return!1;a(this).addClass("ui-state-active");b.buttonElement.attr("aria-pressed","true");var c=b.element[0];h(c).not(c).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(m.disabled)return!1;a(this).addClass("ui-state-active");e=this;b.document.one("mouseup",function(){e=null})}).bind("mouseup"+
this.eventNamespace,function(){if(m.disabled)return!1;a(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(b){if(m.disabled)return!1;b.keyCode!==a.ui.keyCode.SPACE&&b.keyCode!==a.ui.keyCode.ENTER||a(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace,function(){a(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(b){b.keyCode===a.ui.keyCode.SPACE&&a(this).click()}));this._setOption("disabled",m.disabled);
this._resetButton()},_determineButtonType:function(){var a,b;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button";"checkbox"===this.type||"radio"===this.type?(a=this.element.parents().last(),b="label[for='"+this.element.attr("id")+"']",this.buttonElement=a.find(b),this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||
(this.buttonElement=a.find(b))),this.element.addClass("ui-helper-hidden-accessible"),(a=this.element.is(":checked"))&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",a)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-state-hover ui-state-active  ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());
this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(a,b){this._super(a,b);"disabled"===a?b?this.element.prop("disabled",!0):this.element.prop("disabled",!1):this._resetButton()},refresh:function(){var b=this.element.is(":disabled")||this.element.hasClass("ui-button-disabled");b!==this.options.disabled&&this._setOption("disabled",b);"radio"===this.type?h(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("ui-state-active").attr("aria-pressed",
"true"):a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)this.options.label&&this.element.val(this.options.label);else{var b=this.buttonElement.removeClass("ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only"),
c=a("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),d=this.options.icons,e=d.primary&&d.secondary,f=[];d.primary||d.secondary?(this.options.text&&f.push("ui-button-text-icon"+(e?"s":d.primary?"-primary":"-secondary")),d.primary&&b.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>"),d.secondary&&b.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>"),this.options.text||(f.push(e?"ui-button-icons-only":
"ui-button-icon-only"),this.hasTitle||b.attr("title",a.trim(c)))):f.push("ui-button-text-only");b.addClass(f.join(" "))}}});a.widget("ui.buttonset",{version:"1.9.1",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(a,b){"disabled"===a&&this.buttons.button("option",a,b);this._super(a,b)},refresh:function(){var b=
"rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(b?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})})(jQuery);
(function(a,b){function e(){this.debug=!1;this._curInst=null;this._keyEvent=!1;this._disabledInputs=[];this._inDialog=this._datepickerShowing=!1;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass=
"ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),
weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,
beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1};a.extend(this._defaults,this.regional[""]);this.dpDiv=c(a('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function c(b){return b.delegate("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a",
"mouseout",function(){a(this).removeClass("ui-state-hover");-1!=this.className.indexOf("ui-datepicker-prev")&&a(this).removeClass("ui-datepicker-prev-hover");-1!=this.className.indexOf("ui-datepicker-next")&&a(this).removeClass("ui-datepicker-next-hover")}).delegate("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a","mouseover",function(){a.datepicker._isDisabledDatepicker(n.inline?b.parent()[0]:n.input[0])||(a(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),
a(this).addClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&a(this).addClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&a(this).addClass("ui-datepicker-next-hover"))})}function d(c,d){a.extend(c,d);for(var e in d)if(null==d[e]||d[e]==b)c[e]=d[e];return c}a.extend(a.ui,{datepicker:{version:"1.9.1"}});var f=(new Date).getTime(),n;a.extend(e.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",
arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){d(this._defaults,a||{});return this},_attachDatepicker:function(b,c){var d=null,e;for(e in this._defaults){var f=b.getAttribute("date:"+e);if(f){d=d||{};try{d[e]=eval(f)}catch(n){d[e]=f}}}e=b.nodeName.toLowerCase();f="div"==e||"span"==e;b.id||(this.uuid+=1,b.id="dp"+this.uuid);var l=this._newInst(a(b),f);l.settings=a.extend({},c||{},d||{});"input"==e?this._connectDatepicker(b,l):f&&this._inlineDatepicker(b,l)},_newInst:function(b,
d){return{id:b[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:b,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:d,dpDiv:d?c(a('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(b,c){var d=a(b);c.append=a([]);c.trigger=a([]);d.hasClass(this.markerClassName)||(this._attachments(d,c),d.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",
function(a,b,d){c.settings[b]=d}).bind("getData.datepicker",function(a,b){return this._get(c,b)}),this._autoSize(c),a.data(b,"datepicker",c),c.settings.disabled&&this._disableDatepicker(b))},_attachments:function(b,c){var d=this._get(c,"appendText"),e=this._get(c,"isRTL");c.append&&c.append.remove();d&&(c.append=a('<span class="'+this._appendClass+'">'+d+"</span>"),b[e?"before":"after"](c.append));b.unbind("focus",this._showDatepicker);c.trigger&&c.trigger.remove();d=this._get(c,"showOn");"focus"!=
d&&"both"!=d||b.focus(this._showDatepicker);if("button"==d||"both"==d){var d=this._get(c,"buttonText"),f=this._get(c,"buttonImage");c.trigger=a(this._get(c,"buttonImageOnly")?a("<img/>").addClass(this._triggerClass).attr({src:f,alt:d,title:d}):a('<button type="button"></button>').addClass(this._triggerClass).html(""==f?d:a("<img/>").attr({src:f,alt:d,title:d})));b[e?"before":"after"](c.trigger);c.trigger.click(function(){a.datepicker._datepickerShowing&&a.datepicker._lastInput==b[0]?a.datepicker._hideDatepicker():
(a.datepicker._datepickerShowing&&a.datepicker._lastInput!=b[0]&&a.datepicker._hideDatepicker(),a.datepicker._showDatepicker(b[0]));return!1})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var d=function(a){for(var b=0,c=0,d=0;d<a.length;d++)a[d].length>b&&(b=a[d].length,c=d);return c};b.setMonth(d(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort")));b.setDate(d(this._get(a,c.match(/DD/)?"dayNames":
"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(b,c){var d=a(b);d.hasClass(this.markerClassName)||(d.addClass(this.markerClassName).append(c.dpDiv).bind("setData.datepicker",function(a,b,d){c.settings[b]=d}).bind("getData.datepicker",function(a,b){return this._get(c,b)}),a.data(b,"datepicker",c),this._setDate(c,this._getDefaultDate(c),!0),this._updateDatepicker(c),this._updateAlternate(c),c.settings.disabled&&this._disableDatepicker(b),
c.dpDiv.css("display","block"))},_dialogDatepicker:function(b,c,e,f,r){b=this._dialogInst;b||(this.uuid+=1,this._dialogInput=a('<input type="text" id="dp'+this.uuid+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),a("body").append(this._dialogInput),b=this._dialogInst=this._newInst(this._dialogInput,!1),b.settings={},a.data(this._dialogInput[0],"datepicker",b));d(b.settings,f||{});c=c&&c.constructor==Date?this._formatDate(b,c):c;this._dialogInput.val(c);
this._pos=r?r.length?r:[r.pageX,r.pageY]:null;this._pos||(this._pos=[document.documentElement.clientWidth/2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)]);this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");b.settings.onSelect=e;this._inDialog=!0;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);a.blockUI&&a.blockUI(this.dpDiv);
a.data(this._dialogInput[0],"datepicker",b);return this},_destroyDatepicker:function(b){var c=a(b),d=a.data(b,"datepicker");if(c.hasClass(this.markerClassName)){var e=b.nodeName.toLowerCase();a.removeData(b,"datepicker");"input"==e?(d.append.remove(),d.trigger.remove(),c.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!=e&&"span"!=e||c.removeClass(this.markerClassName).empty()}},
_enableDatepicker:function(b){var c=a(b),d=a.data(b,"datepicker");if(c.hasClass(this.markerClassName)){var e=b.nodeName.toLowerCase();if("input"==e)b.disabled=!1,d.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==e||"span"==e)c=c.children("."+this._inlineClass),c.children().removeClass("ui-state-disabled"),c.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1);this._disabledInputs=a.map(this._disabledInputs,
function(a){return a==b?null:a})}},_disableDatepicker:function(b){var c=a(b),d=a.data(b,"datepicker");if(c.hasClass(this.markerClassName)){var e=b.nodeName.toLowerCase();if("input"==e)b.disabled=!0,d.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==e||"span"==e)c=c.children("."+this._inlineClass),c.children().addClass("ui-state-disabled"),c.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",
!0);this._disabledInputs=a.map(this._disabledInputs,function(a){return a==b?null:a});this._disabledInputs[this._disabledInputs.length]=b}},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]==a)return!0;return!1},_getInst:function(b){try{return a.data(b,"datepicker")}catch(c){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(c,e,f){var p=this._getInst(c);if(2==arguments.length&&"string"==typeof e)return"defaults"==
e?a.extend({},a.datepicker._defaults):p?"all"==e?a.extend({},p.settings):this._get(p,e):null;var r=e||{};"string"==typeof e&&(r={},r[e]=f);if(p){this._curInst==p&&this._hideDatepicker();var n=this._getDateDatepicker(c,!0),l=this._getMinMaxDate(p,"min"),q=this._getMinMaxDate(p,"max");d(p.settings,r);null!==l&&r.dateFormat!==b&&r.minDate===b&&(p.settings.minDate=this._formatDate(p,l));null!==q&&r.dateFormat!==b&&r.maxDate===b&&(p.settings.maxDate=this._formatDate(p,q));this._attachments(a(c),p);this._autoSize(p);
this._setDate(p,n);this._updateAlternate(p);this._updateDatepicker(p)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){(a=this._getInst(a))&&this._updateDatepicker(a)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);c&&!c.inline&&this._setDateFromField(c,b);return c?this._getDate(c):null},_doKeyDown:function(b){var c=
a.datepicker._getInst(b.target),d=!0,e=c.dpDiv.is(".ui-datepicker-rtl");c._keyEvent=!0;if(a.datepicker._datepickerShowing)switch(b.keyCode){case 9:a.datepicker._hideDatepicker();d=!1;break;case 13:return d=a("td."+a.datepicker._dayOverClass+":not(."+a.datepicker._currentClass+")",c.dpDiv),d[0]&&a.datepicker._selectDay(b.target,c.selectedMonth,c.selectedYear,d[0]),(b=a.datepicker._get(c,"onSelect"))?(d=a.datepicker._formatDate(c),b.apply(c.input?c.input[0]:null,[d,c])):a.datepicker._hideDatepicker(),
!1;case 27:a.datepicker._hideDatepicker();break;case 33:a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(c,"stepBigMonths"):-a.datepicker._get(c,"stepMonths"),"M");break;case 34:a.datepicker._adjustDate(b.target,b.ctrlKey?+a.datepicker._get(c,"stepBigMonths"):+a.datepicker._get(c,"stepMonths"),"M");break;case 35:(b.ctrlKey||b.metaKey)&&a.datepicker._clearDate(b.target);d=b.ctrlKey||b.metaKey;break;case 36:(b.ctrlKey||b.metaKey)&&a.datepicker._gotoToday(b.target);d=b.ctrlKey||b.metaKey;
break;case 37:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,e?1:-1,"D");d=b.ctrlKey||b.metaKey;b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,b.ctrlKey?-a.datepicker._get(c,"stepBigMonths"):-a.datepicker._get(c,"stepMonths"),"M");break;case 38:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,-7,"D");d=b.ctrlKey||b.metaKey;break;case 39:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,e?-1:1,"D");d=b.ctrlKey||b.metaKey;b.originalEvent.altKey&&a.datepicker._adjustDate(b.target,
b.ctrlKey?+a.datepicker._get(c,"stepBigMonths"):+a.datepicker._get(c,"stepMonths"),"M");break;case 40:(b.ctrlKey||b.metaKey)&&a.datepicker._adjustDate(b.target,7,"D");d=b.ctrlKey||b.metaKey;break;default:d=!1}else 36==b.keyCode&&b.ctrlKey?a.datepicker._showDatepicker(this):d=!1;d&&(b.preventDefault(),b.stopPropagation())},_doKeyPress:function(c){var d=a.datepicker._getInst(c.target);if(a.datepicker._get(d,"constrainInput")){var d=a.datepicker._possibleChars(a.datepicker._get(d,"dateFormat")),e=String.fromCharCode(c.charCode==
b?c.keyCode:c.charCode);return c.ctrlKey||c.metaKey||" ">e||!d||-1<d.indexOf(e)}},_doKeyUp:function(b){b=a.datepicker._getInst(b.target);if(b.input.val()!=b.lastVal)try{a.datepicker.parseDate(a.datepicker._get(b,"dateFormat"),b.input?b.input.val():null,a.datepicker._getFormatConfig(b))&&(a.datepicker._setDateFromField(b),a.datepicker._updateAlternate(b),a.datepicker._updateDatepicker(b))}catch(c){a.datepicker.log(c)}return!0},_showDatepicker:function(b){b=b.target||b;"input"!=b.nodeName.toLowerCase()&&
(b=a("input",b.parentNode)[0]);if(!a.datepicker._isDisabledDatepicker(b)&&a.datepicker._lastInput!=b){var c=a.datepicker._getInst(b);a.datepicker._curInst&&a.datepicker._curInst!=c&&(a.datepicker._curInst.dpDiv.stop(!0,!0),c&&a.datepicker._datepickerShowing&&a.datepicker._hideDatepicker(a.datepicker._curInst.input[0]));var e=a.datepicker._get(c,"beforeShow"),e=e?e.apply(b,[b,c]):{};if(!1!==e){d(c.settings,e);c.lastVal=null;a.datepicker._lastInput=b;a.datepicker._setDateFromField(c);a.datepicker._inDialog&&
(b.value="");a.datepicker._pos||(a.datepicker._pos=a.datepicker._findPos(b),a.datepicker._pos[1]+=b.offsetHeight);var f=!1;a(b).parents().each(function(){f|="fixed"==a(this).css("position");return!f});e={left:a.datepicker._pos[0],top:a.datepicker._pos[1]};a.datepicker._pos=null;c.dpDiv.empty();c.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});a.datepicker._updateDatepicker(c);e=a.datepicker._checkOffset(c,e,f);c.dpDiv.css({position:a.datepicker._inDialog&&a.blockUI?"static":f?"fixed":
"absolute",display:"none",left:e.left+"px",top:e.top+"px"});if(!c.inline){var e=a.datepicker._get(c,"showAnim"),r=a.datepicker._get(c,"duration"),n=function(){var b=c.dpDiv.find("iframe.ui-datepicker-cover");if(b.length){var d=a.datepicker._getBorders(c.dpDiv);b.css({left:-d[0],top:-d[1],width:c.dpDiv.outerWidth(),height:c.dpDiv.outerHeight()})}};c.dpDiv.zIndex(a(b).zIndex()+1);a.datepicker._datepickerShowing=!0;if(a.effects&&(a.effects.effect[e]||a.effects[e]))c.dpDiv.show(e,a.datepicker._get(c,
"showOptions"),r,n);else c.dpDiv[e||"show"](e?r:null,n);e&&r||n();c.input.is(":visible")&&!c.input.is(":disabled")&&c.input.focus();a.datepicker._curInst=c}}}},_updateDatepicker:function(b){this.maxRows=4;var c=a.datepicker._getBorders(b.dpDiv);n=b;b.dpDiv.empty().append(this._generateHTML(b));this._attachHandlers(b);var d=b.dpDiv.find("iframe.ui-datepicker-cover");d.length&&d.css({left:-c[0],top:-c[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()});b.dpDiv.find("."+this._dayOverClass+" a").mouseover();
c=this._getNumberOfMonths(b);d=c[1];b.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");1<d&&b.dpDiv.addClass("ui-datepicker-multi-"+d).css("width",17*d+"em");b.dpDiv[(1!=c[0]||1!=c[1]?"add":"remove")+"Class"]("ui-datepicker-multi");b.dpDiv[(this._get(b,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");b==a.datepicker._curInst&&a.datepicker._datepickerShowing&&b.input&&b.input.is(":visible")&&!b.input.is(":disabled")&&b.input[0]!=document.activeElement&&
b.input.focus();if(b.yearshtml){var e=b.yearshtml;setTimeout(function(){e===b.yearshtml&&b.yearshtml&&b.dpDiv.find("select.ui-datepicker-year:first").replaceWith(b.yearshtml);e=b.yearshtml=null},0)}},_getBorders:function(a){var b=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(b,c,d){var e=b.dpDiv.outerWidth(),f=b.dpDiv.outerHeight(),n=b.input?b.input.outerWidth():0,l=b.input?b.input.outerHeight():
0,q=document.documentElement.clientWidth+(d?0:a(document).scrollLeft()),w=document.documentElement.clientHeight+(d?0:a(document).scrollTop());c.left-=this._get(b,"isRTL")?e-n:0;c.left-=d&&c.left==b.input.offset().left?a(document).scrollLeft():0;c.top-=d&&c.top==b.input.offset().top+l?a(document).scrollTop():0;c.left-=Math.min(c.left,c.left+e>q&&q>e?Math.abs(c.left+e-q):0);c.top-=Math.min(c.top,c.top+f>w&&w>f?Math.abs(f+l):0);return c},_findPos:function(b){for(var c=this._getInst(b),c=this._get(c,
"isRTL");b&&("hidden"==b.type||1!=b.nodeType||a.expr.filters.hidden(b));)b=b[c?"previousSibling":"nextSibling"];b=a(b).offset();return[b.left,b.top]},_hideDatepicker:function(b){var c=this._curInst;if(c&&(!b||c==a.data(b,"datepicker"))&&this._datepickerShowing){b=this._get(c,"showAnim");var d=this._get(c,"duration"),e=function(){a.datepicker._tidyDialog(c)};if(a.effects&&(a.effects.effect[b]||a.effects[b]))c.dpDiv.hide(b,a.datepicker._get(c,"showOptions"),d,e);else c.dpDiv["slideDown"==b?"slideUp":
"fadeIn"==b?"fadeOut":"hide"](b?d:null,e);b||e();this._datepickerShowing=!1;(b=this._get(c,"onClose"))&&b.apply(c.input?c.input[0]:null,[c.input?c.input.val():"",c]);this._lastInput=null;this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),a.blockUI&&(a.unblockUI(),a("body").append(this.dpDiv)));this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(b){if(a.datepicker._curInst){b=
a(b.target);var c=a.datepicker._getInst(b[0]);(!(b[0].id==a.datepicker._mainDivId||0!=b.parents("#"+a.datepicker._mainDivId).length||b.hasClass(a.datepicker.markerClassName)||b.closest("."+a.datepicker._triggerClass).length||!a.datepicker._datepickerShowing||a.datepicker._inDialog&&a.blockUI)||b.hasClass(a.datepicker.markerClassName)&&a.datepicker._curInst!=c)&&a.datepicker._hideDatepicker()}},_adjustDate:function(b,c,d){b=a(b);var e=this._getInst(b[0]);this._isDisabledDatepicker(b[0])||(this._adjustInstDate(e,
c+("M"==d?this._get(e,"showCurrentAtPos"):0),d),this._updateDatepicker(e))},_gotoToday:function(b){b=a(b);var c=this._getInst(b[0]);if(this._get(c,"gotoCurrent")&&c.currentDay)c.selectedDay=c.currentDay,c.drawMonth=c.selectedMonth=c.currentMonth,c.drawYear=c.selectedYear=c.currentYear;else{var d=new Date;c.selectedDay=d.getDate();c.drawMonth=c.selectedMonth=d.getMonth();c.drawYear=c.selectedYear=d.getFullYear()}this._notifyChange(c);this._adjustDate(b)},_selectMonthYear:function(b,c,d){b=a(b);var e=
this._getInst(b[0]);e["selected"+("M"==d?"Month":"Year")]=e["draw"+("M"==d?"Month":"Year")]=parseInt(c.options[c.selectedIndex].value,10);this._notifyChange(e);this._adjustDate(b)},_selectDay:function(b,c,d,e){var f=a(b);a(e).hasClass(this._unselectableClass)||this._isDisabledDatepicker(f[0])||(f=this._getInst(f[0]),f.selectedDay=f.currentDay=a("a",e).html(),f.selectedMonth=f.currentMonth=c,f.selectedYear=f.currentYear=d,this._selectDate(b,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear)))},
_clearDate:function(b){b=a(b);this._getInst(b[0]);this._selectDate(b,"")},_selectDate:function(b,c){var d=a(b),d=this._getInst(d[0]);c=null!=c?c:this._formatDate(d);d.input&&d.input.val(c);this._updateAlternate(d);var e=this._get(d,"onSelect");e?e.apply(d.input?d.input[0]:null,[c,d]):d.input&&d.input.trigger("change");d.inline?this._updateDatepicker(d):(this._hideDatepicker(),this._lastInput=d.input[0],"object"!=typeof d.input[0]&&d.input.focus(),this._lastInput=null)},_updateAlternate:function(b){var c=
this._get(b,"altField");if(c){var d=this._get(b,"altFormat")||this._get(b,"dateFormat"),e=this._getDate(b),f=this.formatDate(d,e,this._getFormatConfig(b));a(c).each(function(){a(this).val(f)})}},noWeekends:function(a){a=a.getDay();return[0<a&&6>a,""]},iso8601Week:function(a){a=new Date(a.getTime());a.setDate(a.getDate()+4-(a.getDay()||7));var b=a.getTime();a.setMonth(0);a.setDate(1);return Math.floor(Math.round((b-a)/864E5)/7)+1},parseDate:function(b,c,d){if(null==b||null==c)throw"Invalid arguments";
c="object"==typeof c?c.toString():c+"";if(""==c)return null;for(var e=(d?d.shortYearCutoff:null)||this._defaults.shortYearCutoff,e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),f=(d?d.dayNamesShort:null)||this._defaults.dayNamesShort,n=(d?d.dayNames:null)||this._defaults.dayNames,l=(d?d.monthNamesShort:null)||this._defaults.monthNamesShort,q=(d?d.monthNames:null)||this._defaults.monthNames,w=d=-1,u=-1,v=-1,E=!1,A=function(a){(a=H+1<b.length&&b.charAt(H+1)==a)&&H++;return a},K=function(a){var b=
A(a);a=new RegExp("^\\d{1,"+("@"==a?14:"!"==a?20:"y"==a&&b?4:"o"==a?3:2)+"}");a=c.substring(B).match(a);if(!a)throw"Missing number at position "+B;B+=a[0].length;return parseInt(a[0],10)},F=function(b,d,e){b=a.map(A(b)?e:d,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)});var f=-1;a.each(b,function(a,b){var d=b[1];if(c.substr(B,d.length).toLowerCase()==d.toLowerCase())return f=b[0],B+=d.length,!1});if(-1!=f)return f+1;throw"Unknown name at position "+B;},z=function(){if(c.charAt(B)!=
b.charAt(H))throw"Unexpected literal at position "+B;B++},B=0,H=0;H<b.length;H++)if(E)"'"!=b.charAt(H)||A("'")?z():E=!1;else switch(b.charAt(H)){case "d":u=K("d");break;case "D":F("D",f,n);break;case "o":v=K("o");break;case "m":w=K("m");break;case "M":w=F("M",l,q);break;case "y":d=K("y");break;case "@":var G=new Date(K("@"));d=G.getFullYear();w=G.getMonth()+1;u=G.getDate();break;case "!":G=new Date((K("!")-this._ticksTo1970)/1E4);d=G.getFullYear();w=G.getMonth()+1;u=G.getDate();break;case "'":A("'")?
z():E=!0;break;default:z()}if(B<c.length&&(f=c.substr(B),!/^\s+/.test(f)))throw"Extra/unparsed characters found in date: "+f;-1==d?d=(new Date).getFullYear():100>d&&(d+=(new Date).getFullYear()-(new Date).getFullYear()%100+(d<=e?0:-100));if(-1<v){w=1;u=v;do{e=this._getDaysInMonth(d,w-1);if(u<=e)break;w++;u-=e}while(1)}G=this._daylightSavingAdjust(new Date(d,w-1,u));if(G.getFullYear()!=d||G.getMonth()+1!=w||G.getDate()!=u)throw"Invalid date";return G},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",
RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864E9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(a,b,c){if(!b)return"";var d=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,e=(c?c.dayNames:null)||this._defaults.dayNames,f=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort;c=(c?c.monthNames:null)||this._defaults.monthNames;var l=
function(b){(b=E+1<a.length&&a.charAt(E+1)==b)&&E++;return b},q=function(a,b,c){b=""+b;if(l(a))for(;b.length<c;)b="0"+b;return b},n=function(a,b,c,d){return l(a)?d[b]:c[b]},u="",v=!1;if(b)for(var E=0;E<a.length;E++)if(v)"'"!=a.charAt(E)||l("'")?u+=a.charAt(E):v=!1;else switch(a.charAt(E)){case "d":u+=q("d",b.getDate(),2);break;case "D":u+=n("D",b.getDay(),d,e);break;case "o":u+=q("o",Math.round(((new Date(b.getFullYear(),b.getMonth(),b.getDate())).getTime()-(new Date(b.getFullYear(),0,0)).getTime())/
864E5),3);break;case "m":u+=q("m",b.getMonth()+1,2);break;case "M":u+=n("M",b.getMonth(),f,c);break;case "y":u+=l("y")?b.getFullYear():(10>b.getYear()%100?"0":"")+b.getYear()%100;break;case "@":u+=b.getTime();break;case "!":u+=1E4*b.getTime()+this._ticksTo1970;break;case "'":l("'")?u+="'":v=!0;break;default:u+=a.charAt(E)}return u},_possibleChars:function(a){for(var b="",c=!1,d=function(b){(b=e+1<a.length&&a.charAt(e+1)==b)&&e++;return b},e=0;e<a.length;e++)if(c)"'"!=a.charAt(e)||d("'")?b+=a.charAt(e):
c=!1;else switch(a.charAt(e)){case "d":case "m":case "y":case "@":b+="0123456789";break;case "D":case "M":return null;case "'":d("'")?b+="'":c=!0;break;default:b+=a.charAt(e)}return b},_get:function(a,c){return a.settings[c]!==b?a.settings[c]:this._defaults[c]},_setDateFromField:function(a,b){if(a.input.val()!=a.lastVal){var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,e,f;e=f=this._getDefaultDate(a);var l=this._getFormatConfig(a);try{e=this.parseDate(c,d,l)||f}catch(q){this.log(q),
d=b?"":d}a.selectedDay=e.getDate();a.drawMonth=a.selectedMonth=e.getMonth();a.drawYear=a.selectedYear=e.getFullYear();a.currentDay=d?e.getDate():0;a.currentMonth=d?e.getMonth():0;a.currentYear=d?e.getFullYear():0;this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(b,c,d){var e=function(a){var b=new Date;b.setDate(b.getDate()+a);return b},f=function(c){try{return a.datepicker.parseDate(a.datepicker._get(b,
"dateFormat"),c,a.datepicker._getFormatConfig(b))}catch(d){}for(var e=(c.toLowerCase().match(/^c/)?a.datepicker._getDate(b):null)||new Date,f=e.getFullYear(),g=e.getMonth(),e=e.getDate(),m=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,p=m.exec(c);p;){switch(p[2]||"d"){case "d":case "D":e+=parseInt(p[1],10);break;case "w":case "W":e+=7*parseInt(p[1],10);break;case "m":case "M":g+=parseInt(p[1],10);e=Math.min(e,a.datepicker._getDaysInMonth(f,g));break;case "y":case "Y":f+=parseInt(p[1],10),e=Math.min(e,a.datepicker._getDaysInMonth(f,
g))}p=m.exec(c)}return new Date(f,g,e)};if(c=(c=null==c||""===c?d:"string"==typeof c?f(c):"number"==typeof c?isNaN(c)?d:e(c):new Date(c.getTime()))&&"Invalid Date"==c.toString()?d:c)c.setHours(0),c.setMinutes(0),c.setSeconds(0),c.setMilliseconds(0);return this._daylightSavingAdjust(c)},_daylightSavingAdjust:function(a){if(!a)return null;a.setHours(12<a.getHours()?a.getHours()+2:0);return a},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear;b=this._restrictMinMax(a,this._determineDate(a,
b,new Date));a.selectedDay=a.currentDay=b.getDate();a.drawMonth=a.selectedMonth=a.currentMonth=b.getMonth();a.drawYear=a.selectedYear=a.currentYear=b.getFullYear();e==a.selectedMonth&&f==a.selectedYear||c||this._notifyChange(a);this._adjustInstDate(a);a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){return!a.currentYear||a.input&&""==a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay))},_attachHandlers:function(b){var c=this._get(b,
"stepMonths"),d="#"+b.id.replace(/\\\\/g,"\\");b.dpDiv.find("[data-handler]").map(function(){a(this).bind(this.getAttribute("data-event"),{prev:function(){window["DP_jQuery_"+f].datepicker._adjustDate(d,-c,"M")},next:function(){window["DP_jQuery_"+f].datepicker._adjustDate(d,+c,"M")},hide:function(){window["DP_jQuery_"+f].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+f].datepicker._gotoToday(d)},selectDay:function(){window["DP_jQuery_"+f].datepicker._selectDay(d,+this.getAttribute("data-month"),
+this.getAttribute("data-year"),this);return!1},selectMonth:function(){window["DP_jQuery_"+f].datepicker._selectMonthYear(d,this,"M");return!1},selectYear:function(){window["DP_jQuery_"+f].datepicker._selectMonthYear(d,this,"Y");return!1}}[this.getAttribute("data-handler")])})},_generateHTML:function(b){var c=new Date,c=this._daylightSavingAdjust(new Date(c.getFullYear(),c.getMonth(),c.getDate())),d=this._get(b,"isRTL"),e=this._get(b,"showButtonPanel"),f=this._get(b,"hideIfNoPrevNext"),n=this._get(b,
"navigationAsDateFormat"),l=this._getNumberOfMonths(b),q=this._get(b,"showCurrentAtPos"),w=this._get(b,"stepMonths"),u=1!=l[0]||1!=l[1],v=this._daylightSavingAdjust(b.currentDay?new Date(b.currentYear,b.currentMonth,b.currentDay):new Date(9999,9,9)),E=this._getMinMaxDate(b,"min"),A=this._getMinMaxDate(b,"max"),q=b.drawMonth-q,K=b.drawYear;0>q&&(q+=12,K--);if(A)for(var F=this._daylightSavingAdjust(new Date(A.getFullYear(),A.getMonth()-l[0]*l[1]+1,A.getDate())),F=E&&F<E?E:F;this._daylightSavingAdjust(new Date(K,
q,1))>F;)q--,0>q&&(q=11,K--);b.drawMonth=q;b.drawYear=K;var F=this._get(b,"prevText"),F=n?this.formatDate(F,this._daylightSavingAdjust(new Date(K,q-w,1)),this._getFormatConfig(b)):F,F=this._canAdjustMonth(b,-1,K,q)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+F+'"><span class="ui-icon ui-icon-circle-triangle-'+(d?"e":"w")+'">'+F+"</span></a>":f?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+F+'"><span class="ui-icon ui-icon-circle-triangle-'+
(d?"e":"w")+'">'+F+"</span></a>",z=this._get(b,"nextText"),z=n?this.formatDate(z,this._daylightSavingAdjust(new Date(K,q+w,1)),this._getFormatConfig(b)):z,f=this._canAdjustMonth(b,1,K,q)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+z+'"><span class="ui-icon ui-icon-circle-triangle-'+(d?"w":"e")+'">'+z+"</span></a>":f?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+z+'"><span class="ui-icon ui-icon-circle-triangle-'+(d?"w":
"e")+'">'+z+"</span></a>",w=this._get(b,"currentText"),z=this._get(b,"gotoCurrent")&&b.currentDay?v:c,w=n?this.formatDate(w,z,this._getFormatConfig(b)):w,n=b.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(b,"closeText")+"</button>",e=e?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(d?n:"")+(this._isInRange(b,z)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+
w+"</button>":"")+(d?"":n)+"</div>":"",n=parseInt(this._get(b,"firstDay"),10),n=isNaN(n)?0:n,w=this._get(b,"showWeek"),z=this._get(b,"dayNames");this._get(b,"dayNamesShort");var B=this._get(b,"dayNamesMin"),H=this._get(b,"monthNames"),G=this._get(b,"monthNamesShort"),I=this._get(b,"beforeShowDay"),N=this._get(b,"showOtherMonths"),L=this._get(b,"selectOtherMonths");this._get(b,"calculateWeek");for(var x=this._getDefaultDate(b),S="",D=0;D<l[0];D++){var J="";this.maxRows=4;for(var V=0;V<l[1];V++){var Y=
this._daylightSavingAdjust(new Date(K,q,b.selectedDay)),W=" ui-corner-all",U="";if(u){U+='<div class="ui-datepicker-group';if(1<l[1])switch(V){case 0:U+=" ui-datepicker-group-first";W=" ui-corner-"+(d?"right":"left");break;case l[1]-1:U+=" ui-datepicker-group-last";W=" ui-corner-"+(d?"left":"right");break;default:U+=" ui-datepicker-group-middle",W=""}U+='">'}for(var U=U+('<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+W+'">'+(/all|left/.test(W)&&0==D?d?f:F:"")+(/all|right/.test(W)&&
0==D?d?F:f:"")+this._generateMonthYearHeader(b,q,K,E,A,0<D||0<V,H,G)+'</div><table class="ui-datepicker-calendar"><thead><tr>'),M=w?'<th class="ui-datepicker-week-col">'+this._get(b,"weekHeader")+"</th>":"",W=0;7>W;W++)var Q=(W+n)%7,M=M+("<th"+(5<=(W+n+6)%7?' class="ui-datepicker-week-end"':"")+'><span title="'+z[Q]+'">'+B[Q]+"</span></th>");U+=M+"</tr></thead><tbody>";M=this._getDaysInMonth(K,q);K==b.selectedYear&&q==b.selectedMonth&&(b.selectedDay=Math.min(b.selectedDay,M));W=(this._getFirstDayOfMonth(K,
q)-n+7)%7;M=Math.ceil((W+M)/7);this.maxRows=M=u?this.maxRows>M?this.maxRows:M:M;for(var Q=this._daylightSavingAdjust(new Date(K,q,1-W)),X=0;X<M;X++){for(var U=U+"<tr>",ea=w?'<td class="ui-datepicker-week-col">'+this._get(b,"calculateWeek")(Q)+"</td>":"",W=0;7>W;W++){var O=I?I.apply(b.input?b.input[0]:null,[Q]):[!0,""],aa=Q.getMonth()!=q,ia=aa&&!L||!O[0]||E&&Q<E||A&&Q>A,ea=ea+('<td class="'+(5<=(W+n+6)%7?" ui-datepicker-week-end":"")+(aa?" ui-datepicker-other-month":"")+(Q.getTime()==Y.getTime()&&
q==b.selectedMonth&&b._keyEvent||x.getTime()==Q.getTime()&&x.getTime()==Y.getTime()?" "+this._dayOverClass:"")+(ia?" "+this._unselectableClass+" ui-state-disabled":"")+(aa&&!N?"":" "+O[1]+(Q.getTime()==v.getTime()?" "+this._currentClass:"")+(Q.getTime()==c.getTime()?" ui-datepicker-today":""))+'"'+(aa&&!N||!O[2]?"":' title="'+O[2]+'"')+(ia?"":' data-handler="selectDay" data-event="click" data-month="'+Q.getMonth()+'" data-year="'+Q.getFullYear()+'"')+">"+(aa&&!N?"&#xa0;":ia?'<span class="ui-state-default">'+
Q.getDate()+"</span>":'<a class="ui-state-default'+(Q.getTime()==c.getTime()?" ui-state-highlight":"")+(Q.getTime()==v.getTime()?" ui-state-active":"")+(aa?" ui-priority-secondary":"")+'" href="#">'+Q.getDate()+"</a>")+"</td>");Q.setDate(Q.getDate()+1);Q=this._daylightSavingAdjust(Q)}U+=ea+"</tr>"}q++;11<q&&(q=0,K++);U+="</tbody></table>"+(u?"</div>"+(0<l[0]&&V==l[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"");J+=U}S+=J}S+=e+(a.ui.ie6&&!b.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':
"");b._keyEvent=!1;return S},_generateMonthYearHeader:function(a,b,c,d,e,f,l,q){var n=this._get(a,"changeMonth"),u=this._get(a,"changeYear"),v=this._get(a,"showMonthAfterYear"),E='<div class="ui-datepicker-title">',A="";if(f||!n)A+='<span class="ui-datepicker-month">'+l[b]+"</span>";else{l=d&&d.getFullYear()==c;for(var K=e&&e.getFullYear()==c,A=A+'<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">',F=0;12>F;F++)(!l||F>=d.getMonth())&&(!K||F<=e.getMonth())&&(A+='<option value="'+
F+'"'+(F==b?' selected="selected"':"")+">"+q[F]+"</option>");A+="</select>"}v||(E+=A+(!f&&n&&u?"":"&#xa0;"));if(!a.yearshtml)if(a.yearshtml="",f||!u)E+='<span class="ui-datepicker-year">'+c+"</span>";else{q=this._get(a,"yearRange").split(":");var z=(new Date).getFullYear();l=function(a){a=a.match(/c[+-].*/)?c+parseInt(a.substring(1),10):a.match(/[+-].*/)?z+parseInt(a,10):parseInt(a,10);return isNaN(a)?z:a};b=l(q[0]);q=Math.max(b,l(q[1]||""));b=d?Math.max(b,d.getFullYear()):b;q=e?Math.min(q,e.getFullYear()):
q;for(a.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';b<=q;b++)a.yearshtml+='<option value="'+b+'"'+(b==c?' selected="selected"':"")+">"+b+"</option>";a.yearshtml+="</select>";E+=a.yearshtml;a.yearshtml=null}E+=this._get(a,"yearSuffix");v&&(E+=(!f&&n&&u?"":"&#xa0;")+A);return E+"</div>"},_adjustInstDate:function(a,b,c){var d=a.drawYear+("Y"==c?b:0),e=a.drawMonth+("M"==c?b:0);b=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+("D"==c?b:0);d=this._restrictMinMax(a,
this._daylightSavingAdjust(new Date(d,e,b)));a.selectedDay=d.getDate();a.drawMonth=a.selectedMonth=d.getMonth();a.drawYear=a.selectedYear=d.getFullYear();"M"!=c&&"Y"!=c||this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),c=c&&b<c?c:b;return d&&c>d?d:c},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){a=this._get(a,
"numberOfMonths");return null==a?[1,1]:"number"==typeof a?[1,a]:a},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a);c=this._daylightSavingAdjust(new Date(c,d+(0>b?b:e[0]*e[1]),1));0>b&&c.setDate(this._getDaysInMonth(c.getFullYear(),
c.getMonth()));return this._isInRange(a,c)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!d||b.getTime()<=d.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff"),b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10);return{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,
"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);b=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),b,this._getFormatConfig(a))}});a.fn.datepicker=function(b){if(!this.length)return this;a.datepicker.initialized||(a(document).mousedown(a.datepicker._checkExternalClick).find(document.body).append(a.datepicker.dpDiv),
a.datepicker.initialized=!0);var c=Array.prototype.slice.call(arguments,1);return"string"==typeof b&&("isDisabled"==b||"getDate"==b||"widget"==b)||"option"==b&&2==arguments.length&&"string"==typeof arguments[1]?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this[0]].concat(c)):this.each(function(){"string"==typeof b?a.datepicker["_"+b+"Datepicker"].apply(a.datepicker,[this].concat(c)):a.datepicker._attachDatepicker(this,b)})};a.datepicker=new e;a.datepicker.initialized=!1;a.datepicker.uuid=
(new Date).getTime();a.datepicker.version="1.9.1";window["DP_jQuery_"+f]=a})(jQuery);
(function(a,b){var e={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},c={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};a.widget("ui.dialog",{version:"1.9.1",options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(b){var c=a(this).css(b).offset().top;0>c&&a(this).css("top",
b.top-c)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1E3},_create:function(){this.originalTitle=this.element.attr("title");"string"!==typeof this.originalTitle&&(this.originalTitle="");this.oldPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)};this.options.title=this.options.title||this.originalTitle;var b=this,c=this.options,e=c.title||"&#160;",h,g,m,p;h=(this.uiDialog=a("<div>")).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+
c.dialogClass).css({display:"none",outline:0,zIndex:c.zIndex}).attr("tabIndex",-1).keydown(function(e){c.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===a.ui.keyCode.ESCAPE&&(b.close(e),e.preventDefault())}).mousedown(function(a){b.moveToTop(!1,a)}).appendTo("body");this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(h);g=(this.uiDialogTitlebar=a("<div>")).addClass("ui-dialog-titlebar  ui-widget-header  ui-corner-all  ui-helper-clearfix").bind("mousedown",
function(){h.focus()}).prependTo(h);m=a("<a href='#'></a>").addClass("ui-dialog-titlebar-close  ui-corner-all").attr("role","button").click(function(a){a.preventDefault();b.close(a)}).appendTo(g);(this.uiDialogTitlebarCloseText=a("<span>")).addClass("ui-icon ui-icon-closethick").text(c.closeText).appendTo(m);e=a("<span>").uniqueId().addClass("ui-dialog-title").html(e).prependTo(g);p=(this.uiDialogButtonPane=a("<div>")).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix");(this.uiButtonSet=
a("<div>")).addClass("ui-dialog-buttonset").appendTo(p);h.attr({role:"dialog","aria-labelledby":e.attr("id")});g.find("*").add(g).disableSelection();this._hoverable(m);this._focusable(m);c.draggable&&a.fn.draggable&&this._makeDraggable();c.resizable&&a.fn.resizable&&this._makeResizable();this._createButtons(c.buttons);this._isOpen=!1;a.fn.bgiframe&&h.bgiframe();this._on(h,{keydown:function(b){if(c.modal&&b.keyCode===a.ui.keyCode.TAB){var d=a(":tabbable",h),e=d.filter(":first"),d=d.filter(":last");
if(b.target===d[0]&&!b.shiftKey)return e.focus(1),!1;if(b.target===e[0]&&b.shiftKey)return d.focus(1),!1}}})},_init:function(){this.options.autoOpen&&this.open()},_destroy:function(){var a,b=this.oldPosition;this.overlay&&this.overlay.destroy();this.uiDialog.hide();this.element.removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");this.uiDialog.remove();this.originalTitle&&this.element.attr("title",this.originalTitle);a=b.parent.children().eq(b.index);a.length&&a[0]!==this.element[0]?
a.before(this.element):b.parent.append(this.element)},widget:function(){return this.uiDialog},close:function(b){var c=this,e,h;if(this._isOpen&&!1!==this._trigger("beforeClose",b))return this._isOpen=!1,this.overlay&&this.overlay.destroy(),this.options.hide?this._hide(this.uiDialog,this.options.hide,function(){c._trigger("close",b)}):(this.uiDialog.hide(),this._trigger("close",b)),a.ui.dialog.overlay.resize(),this.options.modal&&(e=0,a(".ui-dialog").each(function(){this!==c.uiDialog[0]&&(h=a(this).css("z-index"),
isNaN(h)||(e=Math.max(e,h)))}),a.ui.dialog.maxZ=e),this},isOpen:function(){return this._isOpen},moveToTop:function(b,c){var e=this.options;if(e.modal&&!b||!e.stack&&!e.modal)return this._trigger("focus",c);e.zIndex>a.ui.dialog.maxZ&&(a.ui.dialog.maxZ=e.zIndex);this.overlay&&(a.ui.dialog.maxZ+=1,a.ui.dialog.overlay.maxZ=a.ui.dialog.maxZ,this.overlay.$el.css("z-index",a.ui.dialog.overlay.maxZ));e={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()};a.ui.dialog.maxZ+=1;this.uiDialog.css("z-index",
a.ui.dialog.maxZ);this.element.attr(e);this._trigger("focus",c);return this},open:function(){if(!this._isOpen){var b;b=this.options;var c=this.uiDialog;this._size();this._position(b.position);c.show(b.show);this.overlay=b.modal?new a.ui.dialog.overlay(this):null;this.moveToTop(!0);b=this.element.find(":tabbable");b.length||(b=this.uiDialogButtonPane.find(":tabbable"),b.length||(b=c));b.eq(0).focus();this._isOpen=!0;this._trigger("open");return this}},_createButtons:function(b){var c=this,e=!1;this.uiDialogButtonPane.remove();
this.uiButtonSet.empty();"object"===typeof b&&null!==b&&a.each(b,function(){return!(e=!0)});e?(a.each(b,function(b,d){d=a.isFunction(d)?{click:d,text:b}:d;var e=a("<button type='button'></button>").attr(d,!0).unbind("click").click(function(){d.click.apply(c.element[0],arguments)}).appendTo(c.uiButtonSet);a.fn.button&&e.button()}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)):this.uiDialog.removeClass("ui-dialog-buttons")},_makeDraggable:function(){function b(a){return{position:a.position,
offset:a.offset}}var c=this,e=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(e,g){a(this).addClass("ui-dialog-dragging");c._trigger("dragStart",e,b(g))},drag:function(a,e){c._trigger("drag",a,b(e))},stop:function(h,g){e.position=[g.position.left-c.document.scrollLeft(),g.position.top-c.document.scrollTop()];a(this).removeClass("ui-dialog-dragging");c._trigger("dragStop",h,b(g));a.ui.dialog.overlay.resize()}})},
_makeResizable:function(c){function e(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}c=c===b?this.options.resizable:c;var n=this,h=this.options,g=this.uiDialog.css("position");c="string"===typeof c?c:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:h.maxWidth,maxHeight:h.maxHeight,minWidth:h.minWidth,minHeight:this._minHeight(),handles:c,start:function(b,c){a(this).addClass("ui-dialog-resizing");
n._trigger("resizeStart",b,e(c))},resize:function(a,b){n._trigger("resize",a,e(b))},stop:function(b,c){a(this).removeClass("ui-dialog-resizing");h.height=a(this).height();h.width=a(this).width();n._trigger("resizeStop",b,e(c));a.ui.dialog.overlay.resize()}}).css("position",g).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(b){var c=[],e=[0,0],h;if(b){if("string"===
typeof b||"object"===typeof b&&"0"in b)c=b.split?b.split(" "):[b[0],b[1]],1===c.length&&(c[1]=c[0]),a.each(["left","top"],function(a,b){+c[a]===c[a]&&(e[a]=c[a],c[a]=b)}),b={my:c[0]+(0>e[0]?e[0]:"+"+e[0])+" "+c[1]+(0>e[1]?e[1]:"+"+e[1]),at:c.join(" ")};b=a.extend({},a.ui.dialog.prototype.options.position,b)}else b=a.ui.dialog.prototype.options.position;(h=this.uiDialog.is(":visible"))||this.uiDialog.show();this.uiDialog.position(b);h||this.uiDialog.hide()},_setOptions:function(b){var f=this,n={},
h=!1;a.each(b,function(a,b){f._setOption(a,b);a in e&&(h=!0);a in c&&(n[a]=b)});h&&this._size();this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",n)},_setOption:function(b,c){var e,h=this.uiDialog;switch(b){case "buttons":this._createButtons(c);break;case "closeText":this.uiDialogTitlebarCloseText.text(""+c);break;case "dialogClass":h.removeClass(this.options.dialogClass).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+c);break;case "disabled":c?h.addClass("ui-dialog-disabled"):
h.removeClass("ui-dialog-disabled");break;case "draggable":(e=h.is(":data(draggable)"))&&!c&&h.draggable("destroy");!e&&c&&this._makeDraggable();break;case "position":this._position(c);break;case "resizable":(e=h.is(":data(resizable)"))&&!c&&h.resizable("destroy");e&&"string"===typeof c&&h.resizable("option","handles",c);e||!1===c||this._makeResizable(c);break;case "title":a(".ui-dialog-title",this.uiDialogTitlebar).html(""+(c||"&#160;"))}this._super(b,c)},_size:function(){var b,c,e=this.options,
h=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0});e.minWidth>e.width&&(e.width=e.minWidth);b=this.uiDialog.css({height:"auto",width:e.width}).outerHeight();c=Math.max(0,e.minHeight-b);"auto"===e.height?a.support.minHeight?this.element.css({minHeight:c,height:"auto"}):(this.uiDialog.show(),b=this.element.css("height","auto").height(),h||this.uiDialog.hide(),this.element.height(Math.max(b,c))):this.element.height(Math.max(e.height-b,0));this.uiDialog.is(":data(resizable)")&&
this.uiDialog.resizable("option","minHeight",this._minHeight())}});a.extend(a.ui.dialog,{uuid:0,maxZ:0,getTitleId:function(a){a=a.attr("id");a||(a=this.uuid+=1);return"ui-dialog-title-"+a},overlay:function(b){this.$el=a.ui.dialog.overlay.create(b)}});a.extend(a.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:a.map("focus mousedown mouseup keydown keypress click".split(" "),function(a){return a+".dialog-overlay"}).join(" "),create:function(b){0===this.instances.length&&(setTimeout(function(){a.ui.dialog.overlay.instances.length&&
a(document).bind(a.ui.dialog.overlay.events,function(b){if(a(b.target).zIndex()<a.ui.dialog.overlay.maxZ)return!1})},1),a(window).bind("resize.dialog-overlay",a.ui.dialog.overlay.resize));var c=this.oldInstances.pop()||a("<div>").addClass("ui-widget-overlay");a(document).bind("keydown.dialog-overlay",function(e){var h=a.ui.dialog.overlay.instances;0!==h.length&&h[h.length-1]===c&&b.options.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===a.ui.keyCode.ESCAPE&&(b.close(e),e.preventDefault())});
c.appendTo(document.body).css({width:this.width(),height:this.height()});a.fn.bgiframe&&c.bgiframe();this.instances.push(c);return c},destroy:function(b){var c=a.inArray(b,this.instances),e=0;-1!==c&&this.oldInstances.push(this.instances.splice(c,1)[0]);0===this.instances.length&&a([document,window]).unbind(".dialog-overlay");b.height(0).width(0).remove();a.each(this.instances,function(){e=Math.max(e,this.css("z-index"))});this.maxZ=e},height:function(){var b,c;return a.ui.ie?(b=Math.max(document.documentElement.scrollHeight,
document.body.scrollHeight),c=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),b<c?a(window).height()+"px":b+"px"):a(document).height()+"px"},width:function(){var b,c;return a.ui.ie?(b=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),c=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),b<c?a(window).width()+"px":b+"px"):a(document).width()+"px"},resize:function(){var b=a([]);a.each(a.ui.dialog.overlay.instances,function(){b=b.add(this)});
b.css({width:0,height:0}).css({width:a.ui.dialog.overlay.width(),height:a.ui.dialog.overlay.height()})}});a.extend(a.ui.dialog.overlay.prototype,{destroy:function(){a.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);
(function(a,b){var e=!1;a.widget("ui.menu",{version:"1.9.1",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,
a.proxy(function(a){this.options.disabled&&a.preventDefault()},this));this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true");this._on({"mousedown .ui-menu-item > a":function(a){a.preventDefault()},"click .ui-state-disabled > a":function(a){a.preventDefault()},"click .ui-menu-item:has(a)":function(b){var d=a(b.target).closest(".ui-menu-item");!e&&d.not(".ui-state-disabled").length&&(e=!0,this.select(b),d.has(".ui-menu").length?this.expand(b):this.element.is(":focus")||
(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(b){var d=a(b.currentTarget);d.siblings().children(".ui-state-active").removeClass("ui-state-active");this.focus(b,d)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(a,b){var e=this.active||this.element.children(".ui-menu-item").eq(0);b||this.focus(a,e)},blur:function(b){this._delay(function(){a.contains(this.element[0],
this.document[0].activeElement)||this.collapseAll(b)})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(b){a(b.target).closest(".ui-menu").length||this.collapseAll(b);e=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();
this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var b=a(this);b.data("ui-menu-submenu-carat")&&b.remove()});this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(b){function d(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,
"\\$&")}var e,n,h,g,m=!0;switch(b.keyCode){case a.ui.keyCode.PAGE_UP:this.previousPage(b);break;case a.ui.keyCode.PAGE_DOWN:this.nextPage(b);break;case a.ui.keyCode.HOME:this._move("first","first",b);break;case a.ui.keyCode.END:this._move("last","last",b);break;case a.ui.keyCode.UP:this.previous(b);break;case a.ui.keyCode.DOWN:this.next(b);break;case a.ui.keyCode.LEFT:this.collapse(b);break;case a.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(b);break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:this._activate(b);
break;case a.ui.keyCode.ESCAPE:this.collapse(b);break;default:m=!1,e=this.previousFilter||"",n=String.fromCharCode(b.keyCode),h=!1,clearTimeout(this.filterTimer),n===e?h=!0:n=e+n,g=new RegExp("^"+d(n),"i"),e=this.activeMenu.children(".ui-menu-item").filter(function(){return g.test(a(this).children("a").text())}),e=h&&-1!==e.index(this.active.next())?this.active.nextAll(".ui-menu-item"):e,e.length||(n=String.fromCharCode(b.keyCode),g=new RegExp("^"+d(n),"i"),e=this.activeMenu.children(".ui-menu-item").filter(function(){return g.test(a(this).children("a").text())})),
e.length?(this.focus(b,e),1<e.length?(this.previousFilter=n,this.filterTimer=this._delay(function(){delete this.previousFilter},1E3)):delete this.previousFilter):delete this.previousFilter}m&&b.preventDefault()},_activate:function(a){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(a):this.select(a))},refresh:function(){var b,d=this.options.icons.submenu,e=this.element.find(this.options.menus+":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,
"aria-hidden":"true","aria-expanded":"false"});b=e.add(this.element);b.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()});b.children(":not(.ui-menu-item)").each(function(){var b=a(this);/[^\-\u2014\u2013\s]/.test(b.text())||b.addClass("ui-widget-content ui-menu-divider")});b.children(".ui-state-disabled").attr("aria-disabled","true");e.each(function(){var b=a(this),
c=b.prev("a"),e=a("<span>").addClass("ui-menu-icon ui-icon "+d).data("ui-menu-submenu-carat",!0);c.attr("aria-haspopup","true").prepend(e);b.attr("aria-labelledby",c.attr("id"))});this.active&&!a.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(a,b){var e;this.blur(a,a&&"focus"===a.type);this._scrollIntoView(b);this.active=b.first();e=this.active.children("a").addClass("ui-state-focus");this.options.role&&
this.element.attr("aria-activedescendant",e.attr("id"));this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active");a&&"keydown"===a.type?this._close():this.timer=this._delay(function(){this._close()},this.delay);e=b.children(".ui-menu");e.length&&/^mouse/.test(a.type)&&this._startOpening(e);this.activeMenu=b.parent();this._trigger("focus",a,{item:b})},_scrollIntoView:function(b){var d,e,n;this._hasScroll()&&(d=parseFloat(a.css(this.activeMenu[0],"borderTopWidth"))||
0,e=parseFloat(a.css(this.activeMenu[0],"paddingTop"))||0,d=b.offset().top-this.activeMenu.offset().top-d-e,e=this.activeMenu.scrollTop(),n=this.activeMenu.height(),b=b.height(),0>d?this.activeMenu.scrollTop(e+d):d+b>n&&this.activeMenu.scrollTop(e+d-n+b))},blur:function(a,b){b||clearTimeout(this.timer);this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",a,{item:this.active}))},_startOpening:function(a){clearTimeout(this.timer);"true"===a.attr("aria-hidden")&&
(this.timer=this._delay(function(){this._close();this._open(a)},this.delay))},_open:function(b){var d=a.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(b.parents(".ui-menu")).hide().attr("aria-hidden","true");b.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(d)},collapseAll:function(b,d){clearTimeout(this.timer);this.timer=this._delay(function(){var e=d?this.element:a(b&&b.target).closest(this.element.find(".ui-menu"));
e.length||(e=this.element);this._close(e);this.blur(b);this.activeMenu=e},this.delay)},_close:function(a){a||(a=this.active?this.active.parent():this.element);a.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(a){var b=this.active&&this.active.parent().closest(".ui-menu-item",this.element);b&&b.length&&(this._close(),this.focus(a,b))},expand:function(a){var b=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();
b&&b.length&&(this._open(b.parent()),this._delay(function(){this.focus(a,b)}))},next:function(a){this._move("next","first",a)},previous:function(a){this._move("prev","last",a)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(a,b,e){var n;this.active&&(n="first"===a||"last"===a?this.active["first"===a?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[a+
"All"](".ui-menu-item").eq(0));n&&n.length&&this.active||(n=this.activeMenu.children(".ui-menu-item")[b]());this.focus(e,n)},nextPage:function(b){var d,e,n;this.active?this.isLastItem()||(this._hasScroll()?(e=this.active.offset().top,n=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){d=a(this);return 0>d.offset().top-e-n}),this.focus(b,d)):this.focus(b,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())):this.next(b)},previousPage:function(b){var d,e,
n;this.active?this.isFirstItem()||(this._hasScroll()?(e=this.active.offset().top,n=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){d=a(this);return 0<d.offset().top-e+n}),this.focus(b,d)):this.focus(b,this.activeMenu.children(".ui-menu-item").first())):this.next(b)},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(b){this.active=this.active||a(b.target).closest(".ui-menu-item");var d={item:this.active};this.active.has(".ui-menu").length||
this.collapseAll(b,!0);this._trigger("select",b,d)}})})(jQuery);
(function(a,b){a.widget("ui.progressbar",{version:"1.9.1",options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()});this.valueDiv=a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);this.oldValue=this._value();this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");
this.valueDiv.remove()},value:function(a){if(a===b)return this._value();this._setOption("value",a);return this},_setOption:function(a,b){"value"===a&&(this.options.value=b,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete"));this._super(a,b)},_value:function(){var a=this.options.value;"number"!==typeof a&&(a=0);return Math.min(this.options.max,Math.max(this.min,a))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var a=this.value(),
b=this._percentage();this.oldValue!==a&&(this.oldValue=a,this._trigger("change"));this.valueDiv.toggle(a>this.min).toggleClass("ui-corner-right",a===this.options.max).width(b.toFixed(0)+"%");this.element.attr("aria-valuenow",a)}})})(jQuery);
(function(a,b){a.widget("ui.slider",a.ui.mouse,{version:"1.9.1",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var b,c,d=this.options,f=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),n=[];this._mouseSliding=this._keySliding=!1;this._animateOff=!0;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+
" ui-widget ui-widget-content ui-corner-all"+(d.disabled?" ui-slider-disabled ui-disabled":""));this.range=a([]);d.range&&(!0===d.range&&(d.values||(d.values=[this._valueMin(),this._valueMin()]),d.values.length&&2!==d.values.length&&(d.values=[d.values[0],d.values[0]])),this.range=a("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===d.range||"max"===d.range?" ui-slider-range-"+d.range:"")));c=d.values&&d.values.length||1;for(b=f.length;b<c;b++)n.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");
this.handles=f.add(a(n.join("")).appendTo(this.element));this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(a){a.preventDefault()}).mouseenter(function(){d.disabled||a(this).addClass("ui-state-hover")}).mouseleave(function(){a(this).removeClass("ui-state-hover")}).focus(function(){d.disabled?a(this).blur():(a(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),a(this).addClass("ui-state-focus"))}).blur(function(){a(this).removeClass("ui-state-focus")});
this.handles.each(function(b){a(this).data("ui-slider-handle-index",b)});this._on(this.handles,{keydown:function(b){var c,d,e,f=a(b.target).data("ui-slider-handle-index");switch(b.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(b.preventDefault(),!this._keySliding&&(this._keySliding=!0,a(b.target).addClass("ui-state-active"),c=this._start(b,f),!1===
c))return}e=this.options.step;c=this.options.values&&this.options.values.length?d=this.values(f):d=this.value();switch(b.keyCode){case a.ui.keyCode.HOME:d=this._valueMin();break;case a.ui.keyCode.END:d=this._valueMax();break;case a.ui.keyCode.PAGE_UP:d=this._trimAlignValue(c+(this._valueMax()-this._valueMin())/5);break;case a.ui.keyCode.PAGE_DOWN:d=this._trimAlignValue(c-(this._valueMax()-this._valueMin())/5);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(c===this._valueMax())return;d=this._trimAlignValue(c+
e);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(c===this._valueMin())return;d=this._trimAlignValue(c-e)}this._slide(b,f,d)},keyup:function(b){var c=a(b.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(b,c),this._change(b,c),a(b.target).removeClass("ui-state-active"))}});this._refreshValue();this._animateOff=!1},_destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all");
this._mouseDestroy()},_mouseCapture:function(b){var c,d,f,n,h,g=this;h=this.options;if(h.disabled)return!1;this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();c=this._normValueFromMouse({x:b.pageX,y:b.pageY});d=this._valueMax()-this._valueMin()+1;this.handles.each(function(b){var e=Math.abs(c-g.values(b));d>e&&(d=e,f=a(this),n=b)});!0===h.range&&this.values(1)===h.min&&(n+=1,f=a(this.handles[n]));if(!1===this._start(b,n))return!1;
this._mouseSliding=!0;this._handleIndex=n;f.addClass("ui-state-active").focus();h=f.offset();this._clickOffset=a(b.target).parents().andSelf().is(".ui-slider-handle")?{left:b.pageX-h.left-f.width()/2,top:b.pageY-h.top-f.height()/2-(parseInt(f.css("borderTopWidth"),10)||0)-(parseInt(f.css("borderBottomWidth"),10)||0)+(parseInt(f.css("marginTop"),10)||0)}:{left:0,top:0};this.handles.hasClass("ui-state-hover")||this._slide(b,n,c);return this._animateOff=!0},_mouseStart:function(){return!0},_mouseDrag:function(a){var b=
this._normValueFromMouse({x:a.pageX,y:a.pageY});this._slide(a,this._handleIndex,b);return!1},_mouseStop:function(a){this.handles.removeClass("ui-state-active");this._mouseSliding=!1;this._stop(a,this._handleIndex);this._change(a,this._handleIndex);this._clickOffset=this._handleIndex=null;return this._animateOff=!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){var b;"horizontal"===this.orientation?(b=this.elementSize.width,
a=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,a=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0));b=a/b;1<b&&(b=1);0>b&&(b=0);"vertical"===this.orientation&&(b=1-b);a=this._valueMax()-this._valueMin();b=this._valueMin()+b*a;return this._trimAlignValue(b)},_start:function(a,b){var d={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(d.value=this.values(b),d.values=this.values());
return this._trigger("start",a,d)},_slide:function(a,b,d){var f;this.options.values&&this.options.values.length?(f=this.values(b?0:1),2===this.options.values.length&&!0===this.options.range&&(0===b&&d>f||1===b&&d<f)&&(d=f),d!==this.values(b)&&(f=this.values(),f[b]=d,a=this._trigger("slide",a,{handle:this.handles[b],value:d,values:f}),this.values(b?0:1),!1!==a&&this.values(b,d,!0))):d!==this.value()&&(a=this._trigger("slide",a,{handle:this.handles[b],value:d}),!1!==a&&this.value(d))},_stop:function(a,
b){var d={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(d.value=this.values(b),d.values=this.values());this._trigger("stop",a,d)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var d={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(d.value=this.values(b),d.values=this.values());this._trigger("change",a,d)}},value:function(a){if(arguments.length)this.options.value=this._trimAlignValue(a),this._refreshValue(),
this._change(null,0);else return this._value()},values:function(b,c){var d,f,n;if(1<arguments.length)this.options.values[b]=this._trimAlignValue(c),this._refreshValue(),this._change(null,b);else if(arguments.length)if(a.isArray(arguments[0])){d=this.options.values;f=arguments[0];for(n=0;n<d.length;n+=1)d[n]=this._trimAlignValue(f[n]),this._change(null,n);this._refreshValue()}else return this.options.values&&this.options.values.length?this._values(b):this.value();else return this._values()},_setOption:function(b,
c){var d,f=0;a.isArray(this.options.values)&&(f=this.options.values.length);a.Widget.prototype._setOption.apply(this,arguments);switch(b){case "disabled":c?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",!1),this.element.removeClass("ui-disabled"));break;case "orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+
this.orientation);this._refreshValue();break;case "value":this._animateOff=!0;this._refreshValue();this._change(null,0);this._animateOff=!1;break;case "values":this._animateOff=!0;this._refreshValue();for(d=0;d<f;d+=1)this._change(null,d);this._animateOff=!1;break;case "min":case "max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var b,d;if(arguments.length)return b=this.options.values[a],
b=this._trimAlignValue(b);b=this.options.values.slice();for(d=0;d<b.length;d+=1)b[d]=this._trimAlignValue(b[d]);return b},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=0<this.options.step?this.options.step:1,d=(a-this._valueMin())%b;a-=d;2*Math.abs(d)>=b&&(a+=0<d?b:-b);return parseFloat(a.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var b,
c,d,f,n,h=this.options.range,g=this.options,m=this,p=this._animateOff?!1:g.animate,r={};if(this.options.values&&this.options.values.length)this.handles.each(function(d){c=(m.values(d)-m._valueMin())/(m._valueMax()-m._valueMin())*100;r["horizontal"===m.orientation?"left":"bottom"]=c+"%";a(this).stop(1,1)[p?"animate":"css"](r,g.animate);if(!0===m.options.range)if("horizontal"===m.orientation){if(0===d)m.range.stop(1,1)[p?"animate":"css"]({left:c+"%"},g.animate);if(1===d)m.range[p?"animate":"css"]({width:c-
b+"%"},{queue:!1,duration:g.animate})}else{if(0===d)m.range.stop(1,1)[p?"animate":"css"]({bottom:c+"%"},g.animate);if(1===d)m.range[p?"animate":"css"]({height:c-b+"%"},{queue:!1,duration:g.animate})}b=c});else{d=this.value();f=this._valueMin();n=this._valueMax();c=n!==f?(d-f)/(n-f)*100:0;r["horizontal"===this.orientation?"left":"bottom"]=c+"%";this.handle.stop(1,1)[p?"animate":"css"](r,g.animate);if("min"===h&&"horizontal"===this.orientation)this.range.stop(1,1)[p?"animate":"css"]({width:c+"%"},g.animate);
if("max"===h&&"horizontal"===this.orientation)this.range[p?"animate":"css"]({width:100-c+"%"},{queue:!1,duration:g.animate});if("min"===h&&"vertical"===this.orientation)this.range.stop(1,1)[p?"animate":"css"]({height:c+"%"},g.animate);if("max"===h&&"vertical"===this.orientation)this.range[p?"animate":"css"]({height:100-c+"%"},{queue:!1,duration:g.animate})}}})})(jQuery);
(function(a){function b(a){return function(){var b=this.element.val();a.apply(this,arguments);this._refresh();b!==this.element.val()&&this._trigger("change")}}a.widget("ui.spinner",{version:"1.9.1",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max);
this._setOption("min",this.options.min);this._setOption("step",this.options.step);this._value(this.element.val(),!0);this._draw();this._on(this._events);this._refresh();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var b={},c=this.element;a.each(["min","max","step"],function(a,f){var n=c.attr(f);void 0!==n&&n.length&&(b[f]=n)});return b},_events:{keydown:function(a){this._start(a)&&this._keydown(a)&&a.preventDefault()},keyup:"_stop",
focus:function(){this.previous=this.element.val()},blur:function(a){this.cancelBlur?delete this.cancelBlur:(this._refresh(),this.previous!==this.element.val()&&this._trigger("change",a))},mousewheel:function(a,b){if(b){if(!this.spinning&&!this._start(a))return!1;this._spin((0<b?1:-1)*this.options.step,a);clearTimeout(this.mousewheelTimer);this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(a)},100);a.preventDefault()}},"mousedown .ui-spinner-button":function(b){function c(){this.element[0]!==
this.document[0].activeElement&&(this.element.focus(),this.previous=d,this._delay(function(){this.previous=d}))}var d;d=this.element[0]===this.document[0].activeElement?this.previous:this.element.val();b.preventDefault();c.call(this);this.cancelBlur=!0;this._delay(function(){delete this.cancelBlur;c.call(this)});!1!==this._start(b)&&this._repeat(null,a(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(b){if(a(b.currentTarget).hasClass("ui-state-active")){if(!1===
this._start(b))return!1;this._repeat(null,a(b.currentTarget).hasClass("ui-spinner-up")?1:-1,b)}},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var a=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton");this.buttons=a.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all");this.buttons.height()>Math.ceil(.5*a.height())&&0<a.height()&&
a.height(a.height());this.options.disabled&&this.disable()},_keydown:function(b){var c=this.options,d=a.ui.keyCode;switch(b.keyCode){case d.UP:return this._repeat(null,1,b),!0;case d.DOWN:return this._repeat(null,-1,b),!0;case d.PAGE_UP:return this._repeat(null,c.page,b),!0;case d.PAGE_DOWN:return this._repeat(null,-c.page,b),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+
this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(a){if(!this.spinning&&!1===this._trigger("start",a))return!1;this.counter||(this.counter=1);return this.spinning=!0},_repeat:function(a,b,d){a=a||500;clearTimeout(this.timer);this.timer=this._delay(function(){this._repeat(40,b,d)},a);this._spin(b*this.options.step,d)},_spin:function(a,b){var d=this.value()||0;this.counter||
(this.counter=1);d=this._adjustValue(d+a*this._increment(this.counter));this.spinning&&!1===this._trigger("spin",b,{value:d})||(this._value(d),this.counter++)},_increment:function(b){var c=this.options.incremental;return c?a.isFunction(c)?c(b):Math.floor(b*b*b/5E4-b*b/500+17*b/200+1):1},_precision:function(){var a=this._precisionOf(this.options.step);null!==this.options.min&&(a=Math.max(a,this._precisionOf(this.options.min)));return a},_precisionOf:function(a){a=a.toString();var b=a.indexOf(".");
return-1===b?0:a.length-b-1},_adjustValue:function(a){var b,d=this.options;b=null!==d.min?d.min:0;a=Math.round((a-b)/d.step)*d.step;a=b+a;a=parseFloat(a.toFixed(this._precision()));return null!==d.max&&a>d.max?d.max:null!==d.min&&a<d.min?d.min:a},_stop:function(a){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",a))},_setOption:function(a,b){if("culture"===a||"numberFormat"===a){var d=this._parse(this.element.val());this.options[a]=
b;this.element.val(this._format(d))}else"max"!==a&&"min"!==a&&"step"!==a||"string"!==typeof b||(b=this._parse(b)),this._super(a,b),"disabled"===a&&(b?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:b(function(a){this._super(a);this._value(this.element.val())}),_parse:function(a){"string"===typeof a&&""!==a&&(a=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(a,10,this.options.culture):
+a);return""===a||isNaN(a)?null:a},_format:function(a){return""===a?"":window.Globalize&&this.options.numberFormat?Globalize.format(a,this.options.numberFormat,this.options.culture):a},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(a,b){var d;""!==a&&(d=this._parse(a),null!==d&&(b||(d=this._adjustValue(d)),a=this._format(d)));this.element.val(a);this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",
!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.uiSpinner.replaceWith(this.element)},stepUp:b(function(a){this._stepUp(a)}),_stepUp:function(a){this._spin((a||1)*this.options.step)},stepDown:b(function(a){this._stepDown(a)}),_stepDown:function(a){this._spin((a||1)*-this.options.step)},pageUp:b(function(a){this._stepUp((a||1)*this.options.page)}),pageDown:b(function(a){this._stepDown((a||1)*this.options.page)}),
value:function(a){if(!arguments.length)return this._parse(this.element.val());b(this._value).call(this,a)},widget:function(){return this.uiSpinner}})})(jQuery);
(function(a,b){function e(a){return 1<a.hash.length&&a.href.replace(d,"")===location.href.replace(d,"")}var c=0,d=/#.*$/;a.widget("ui.tabs",{version:"1.9.1",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var b=this,c=this.options,d=c.active,e=location.hash.substring(1);this.running=!1;this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",
c.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(b){a(this).is(".ui-state-disabled")&&b.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){a(this).closest("li").is(".ui-state-disabled")&&this.blur()});this._processTabs();null===d&&(e&&this.tabs.each(function(b,c){if(a(c).attr("aria-controls")===e)return d=b,!1}),null===d&&(d=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null===d||-1===d)&&(d=this.tabs.length?0:!1);!1!==
d&&(d=this.tabs.index(this.tabs.eq(d)),-1===d&&(d=c.collapsible?!1:0));c.active=d;!c.collapsible&&!1===c.active&&this.anchors.length&&(c.active=0);a.isArray(c.disabled)&&(c.disabled=a.unique(c.disabled.concat(a.map(this.tabs.filter(".ui-state-disabled"),function(a){return b.tabs.index(a)}))).sort());this.active=!1!==this.options.active&&this.anchors.length?this._findActive(this.options.active):a();this._refresh();this.active.length&&this.load(c.active)},_getCreateEventData:function(){return{tab:this.active,
panel:this.active.length?this._getPanelForTab(this.active):a()}},_tabKeydown:function(b){var c=a(this.document[0].activeElement).closest("li"),d=this.tabs.index(c),e=!0;if(!this._handlePageNav(b)){switch(b.keyCode){case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:d++;break;case a.ui.keyCode.UP:case a.ui.keyCode.LEFT:e=!1;d--;break;case a.ui.keyCode.END:d=this.anchors.length-1;break;case a.ui.keyCode.HOME:d=0;break;case a.ui.keyCode.SPACE:b.preventDefault();clearTimeout(this.activating);this._activate(d);
return;case a.ui.keyCode.ENTER:b.preventDefault();clearTimeout(this.activating);this._activate(d===this.options.active?!1:d);return;default:return}b.preventDefault();clearTimeout(this.activating);d=this._focusNextTab(d,e);b.ctrlKey||(c.attr("aria-selected","false"),this.tabs.eq(d).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",d)},this.delay))}},_panelKeydown:function(b){!this._handlePageNav(b)&&b.ctrlKey&&b.keyCode===a.ui.keyCode.UP&&(b.preventDefault(),
this.active.focus())},_handlePageNav:function(b){if(b.altKey&&b.keyCode===a.ui.keyCode.PAGE_UP)return this._activate(this._focusNextTab(this.options.active-1,!1)),!0;if(b.altKey&&b.keyCode===a.ui.keyCode.PAGE_DOWN)return this._activate(this._focusNextTab(this.options.active+1,!0)),!0},_findNextTab:function(b,c){function d(){b>e&&(b=0);0>b&&(b=e);return b}for(var e=this.tabs.length-1;-1!==a.inArray(d(),this.options.disabled);)b=c?b+1:b-1;return b},_focusNextTab:function(a,b){a=this._findNextTab(a,
b);this.tabs.eq(a).focus();return a},_setOption:function(a,b){"active"===a?this._activate(b):"disabled"===a?this._setupDisabled(b):(this._super(a,b),"collapsible"===a&&(this.element.toggleClass("ui-tabs-collapsible",b),b||!1!==this.options.active||this._activate(0)),"event"===a&&this._setupEvents(b),"heightStyle"===a&&this._setupHeightStyle(b))},_tabId:function(a){return a.attr("aria-controls")||"ui-tabs-"+ ++c},_sanitizeSelector:function(a){return a?a.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,
"\\$&"):""},refresh:function(){var b=this.options,c=this.tablist.children(":has(a[href])");b.disabled=a.map(c.filter(".ui-state-disabled"),function(a){return c.index(a)});this._processTabs();!1!==b.active&&this.anchors.length?this.active.length&&!a.contains(this.tablist[0],this.active[0])?this.tabs.length===b.disabled.length?(b.active=!1,this.active=a()):this._activate(this._findNextTab(Math.max(0,b.active-1),!1)):b.active=this.tabs.index(this.active):(b.active=!1,this.active=a());this._refresh()},
_refresh:function(){this._setupDisabled(this.options.disabled);this._setupEvents(this.options.event);this._setupHeightStyle(this.options.heightStyle);this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1});this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"});this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true",
"aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var b=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist");this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1});this.anchors=this.tabs.map(function(){return a("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1});this.panels=
a();this.anchors.each(function(c,d){var g,m,p,r=a(d).uniqueId().attr("id"),t=a(d).closest("li"),l=t.attr("aria-controls");e(d)?(g=d.hash,m=b.element.find(b._sanitizeSelector(g))):(p=b._tabId(t),g="#"+p,m=b.element.find(g),m.length||(m=b._createPanel(p),m.insertAfter(b.panels[c-1]||b.tablist)),m.attr("aria-live","polite"));m.length&&(b.panels=b.panels.add(m));l&&t.data("ui-tabs-aria-controls",l);t.attr({"aria-controls":g.substring(1),"aria-labelledby":r});m.attr("aria-labelledby",r)});this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role",
"tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(b){return a("<div>").attr("id",b).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(b){a.isArray(b)&&(b.length?b.length===this.anchors.length&&(b=!0):b=!1);for(var c=0,d;d=this.tabs[c];c++)!0===b||-1!==a.inArray(c,b)?a(d).addClass("ui-state-disabled").attr("aria-disabled","true"):a(d).removeClass("ui-state-disabled").removeAttr("aria-disabled");
this.options.disabled=b},_setupEvents:function(b){var c={click:function(a){a.preventDefault()}};b&&a.each(b.split(" "),function(a,b){c[b]="_eventHandler"});this._off(this.anchors.add(this.tabs).add(this.panels));this._on(this.anchors,c);this._on(this.tabs,{keydown:"_tabKeydown"});this._on(this.panels,{keydown:"_panelKeydown"});this._focusable(this.tabs);this._hoverable(this.tabs)},_setupHeightStyle:function(b){var c,d,e=this.element.parent();"fill"===b?(a.support.minHeight||(d=e.css("overflow"),e.css("overflow",
"hidden")),c=e.height(),this.element.siblings(":visible").each(function(){var b=a(this),d=b.css("position");"absolute"!==d&&"fixed"!==d&&(c-=b.outerHeight(!0))}),d&&e.css("overflow",d),this.element.children().not(this.panels).each(function(){c-=a(this).outerHeight(!0)}),this.panels.each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")):"auto"===b&&(c=0,this.panels.each(function(){c=Math.max(c,a(this).height("").height())}).height(c))},_eventHandler:function(b){var c=
this.options,d=this.active,e=a(b.currentTarget).closest("li"),m=e[0]===d[0],p=m&&c.collapsible,r=p?a():this._getPanelForTab(e),t=d.length?this._getPanelForTab(d):a(),d={oldTab:d,oldPanel:t,newTab:p?a():e,newPanel:r};b.preventDefault();e.hasClass("ui-state-disabled")||e.hasClass("ui-tabs-loading")||this.running||m&&!c.collapsible||!1===this._trigger("beforeActivate",b,d)||(c.active=p?!1:this.tabs.index(e),this.active=m?a():e,this.xhr&&this.xhr.abort(),t.length||r.length||a.error("jQuery UI Tabs: Mismatching fragment identifier."),
r.length&&this.load(this.tabs.index(e),b),this._toggle(b,d))},_toggle:function(b,c){function d(){m.running=!1;m._trigger("activate",b,c)}function e(){c.newTab.closest("li").addClass("ui-tabs-active ui-state-active");p.length&&m.options.show?m._show(p,m.options.show,d):(p.show(),d())}var m=this,p=c.newPanel,r=c.oldPanel;this.running=!0;r.length&&this.options.hide?this._hide(r,this.options.hide,function(){c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");e()}):(c.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),
r.hide(),e());r.attr({"aria-expanded":"false","aria-hidden":"true"});c.oldTab.attr("aria-selected","false");p.length&&r.length?c.oldTab.attr("tabIndex",-1):p.length&&this.tabs.filter(function(){return 0===a(this).attr("tabIndex")}).attr("tabIndex",-1);p.attr({"aria-expanded":"true","aria-hidden":"false"});c.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(b){b=this._findActive(b);b[0]!==this.active[0]&&(b.length||(b=this.active),b=b.find(".ui-tabs-anchor")[0],this._eventHandler({target:b,
currentTarget:b,preventDefault:a.noop}))},_findActive:function(b){return!1===b?a():this.tabs.eq(b)},_getIndex:function(a){"string"===typeof a&&(a=this.anchors.index(this.anchors.filter("[href$='"+a+"']")));return a},_destroy:function(){this.xhr&&this.xhr.abort();this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible");this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role");this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeData("href.tabs").removeData("load.tabs").removeUniqueId();
this.tabs.add(this.panels).each(function(){a.data(this,"ui-tabs-destroy")?a(this).remove():a(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")});this.tabs.each(function(){var b=a(this),c=b.data("ui-tabs-aria-controls");
c?b.attr("aria-controls",c):b.removeAttr("aria-controls")});"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(c){var d=this.options.disabled;!1!==d&&(c===b?d=!1:(c=this._getIndex(c),d=a.isArray(d)?a.map(d,function(a){return a!==c?a:null}):a.map(this.tabs,function(a,b){return b!==c?b:null})),this._setupDisabled(d))},disable:function(c){var d=this.options.disabled;if(!0!==d){if(c===b)d=!0;else{c=this._getIndex(c);if(-1!==a.inArray(c,d))return;d=a.isArray(d)?a.merge([c],
d).sort():[c]}this._setupDisabled(d)}},load:function(b,c){b=this._getIndex(b);var d=this,g=this.tabs.eq(b),m=g.find(".ui-tabs-anchor"),p=this._getPanelForTab(g),r={tab:g,panel:p};e(m[0])||(this.xhr=a.ajax(this._ajaxSettings(m,c,r)))&&"canceled"!==this.xhr.statusText&&(g.addClass("ui-tabs-loading"),p.attr("aria-busy","true"),this.xhr.success(function(a){setTimeout(function(){p.html(a);d._trigger("load",c,r)},1)}).complete(function(a,b){setTimeout(function(){"abort"===b&&d.panels.stop(!1,!0);g.removeClass("ui-tabs-loading");
p.removeAttr("aria-busy");a===d.xhr&&delete d.xhr},1)}))},_ajaxSettings:function(b,c,d){var e=this;return{url:b.attr("href"),beforeSend:function(b,f){return e._trigger("beforeLoad",c,a.extend({jqXHR:b,ajaxSettings:f},d))}}},_getPanelForTab:function(b){b=a(b).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+b))}});!1!==a.uiBackCompat&&(a.ui.tabs.prototype._ui=function(a,b){return{tab:a,panel:b,index:this.anchors.index(a)}},a.widget("ui.tabs",a.ui.tabs,{url:function(a,b){this.anchors.eq(a).attr("href",
b)}}),a.widget("ui.tabs",a.ui.tabs,{options:{ajaxOptions:null,cache:!1},_create:function(){this._super();var b=this;this._on({tabsbeforeload:function(c,d){a.data(d.tab[0],"cache.tabs")?c.preventDefault():d.jqXHR.success(function(){b.options.cache&&a.data(d.tab[0],"cache.tabs",!0)})}})},_ajaxSettings:function(b,c,d){var e=this.options.ajaxOptions;return a.extend({},e,{error:function(a,b){try{e.error(a,b,d.tab.closest("li").index(),d.tab[0])}catch(c){}}},this._superApply(arguments))},_setOption:function(a,
b){"cache"===a&&!1===b&&this.anchors.removeData("cache.tabs");this._super(a,b)},_destroy:function(){this.anchors.removeData("cache.tabs");this._super()},url:function(a){this.anchors.eq(a).removeData("cache.tabs");this._superApply(arguments)}}),a.widget("ui.tabs",a.ui.tabs,{abort:function(){this.xhr&&this.xhr.abort()}}),a.widget("ui.tabs",a.ui.tabs,{options:{spinner:"<em>Loading&#8230;</em>"},_create:function(){this._super();this._on({tabsbeforeload:function(a,b){if(a.target===this.element[0]&&this.options.spinner){var c=
b.tab.find("span"),d=c.html();c.html(this.options.spinner);b.jqXHR.complete(function(){c.html(d)})}}})}}),a.widget("ui.tabs",a.ui.tabs,{options:{enable:null,disable:null},enable:function(b){var c=this.options,d;if(b&&!0===c.disabled||a.isArray(c.disabled)&&-1!==a.inArray(b,c.disabled))d=!0;this._superApply(arguments);d&&this._trigger("enable",null,this._ui(this.anchors[b],this.panels[b]))},disable:function(b){var c=this.options,d;if(b&&!1===c.disabled||a.isArray(c.disabled)&&-1===a.inArray(b,c.disabled))d=
!0;this._superApply(arguments);d&&this._trigger("disable",null,this._ui(this.anchors[b],this.panels[b]))}}),a.widget("ui.tabs",a.ui.tabs,{options:{add:null,remove:null,tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},add:function(c,d,e){e===b&&(e=this.anchors.length);var g,m=this.options;d=a(m.tabTemplate.replace(/#\{href\}/g,c).replace(/#\{label\}/g,d));var p=c.indexOf("#")?this._tabId(d):c.replace("#","");d.addClass("ui-state-default ui-corner-top").data("ui-tabs-destroy",!0);
d.attr("aria-controls",p);c=e>=this.tabs.length;g=this.element.find("#"+p);g.length||(g=this._createPanel(p),c?0<e?g.insertAfter(this.panels.eq(-1)):g.appendTo(this.element):g.insertBefore(this.panels[e]));g.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").hide();c?d.appendTo(this.tablist):d.insertBefore(this.tabs[e]);m.disabled=a.map(m.disabled,function(a){return a>=e?++a:a});this.refresh();1===this.tabs.length&&!1===m.active&&this.option("active",0);this._trigger("add",null,this._ui(this.anchors[e],
this.panels[e]));return this},remove:function(b){b=this._getIndex(b);var c=this.options,d=this.tabs.eq(b).remove(),e=this._getPanelForTab(d).remove();d.hasClass("ui-tabs-active")&&2<this.anchors.length&&this._activate(b+(b+1<this.anchors.length?1:-1));c.disabled=a.map(a.grep(c.disabled,function(a){return a!==b}),function(a){return a>=b?--a:a});this.refresh();this._trigger("remove",null,this._ui(d.find("a")[0],e[0]));return this}}),a.widget("ui.tabs",a.ui.tabs,{length:function(){return this.anchors.length}}),
a.widget("ui.tabs",a.ui.tabs,{options:{idPrefix:"ui-tabs-"},_tabId:function(b){b=b.is("li")?b.find("a[href]"):b;b=b[0];return a(b).closest("li").attr("aria-controls")||b.title&&b.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF\-]/g,"")||this.options.idPrefix+ ++c}}),a.widget("ui.tabs",a.ui.tabs,{options:{panelTemplate:"<div></div>"},_createPanel:function(b){return a(this.options.panelTemplate).attr("id",b).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)}}),
a.widget("ui.tabs",a.ui.tabs,{_create:function(){var a=this.options;null===a.active&&a.selected!==b&&(a.active=-1===a.selected?!1:a.selected);this._super();a.selected=a.active;!1===a.selected&&(a.selected=-1)},_setOption:function(a,b){if("selected"!==a)return this._super(a,b);var c=this.options;this._super("active",-1===b?!1:b);c.selected=c.active;!1===c.selected&&(c.selected=-1)},_eventHandler:function(){this._superApply(arguments);this.options.selected=this.options.active;!1===this.options.selected&&
(this.options.selected=-1)}}),a.widget("ui.tabs",a.ui.tabs,{options:{show:null,select:null},_create:function(){this._super();!1!==this.options.active&&this._trigger("show",null,this._ui(this.active.find(".ui-tabs-anchor")[0],this._getPanelForTab(this.active)[0]))},_trigger:function(a,b,c){var d=this._superApply(arguments);if(!d)return!1;"beforeActivate"===a&&c.newTab.length?d=this._super("select",b,{tab:c.newTab.find(".ui-tabs-anchor")[0],panel:c.newPanel[0],index:c.newTab.closest("li").index()}):
"activate"===a&&c.newTab.length&&(d=this._super("show",b,{tab:c.newTab.find(".ui-tabs-anchor")[0],panel:c.newPanel[0],index:c.newTab.closest("li").index()}));return d}}),a.widget("ui.tabs",a.ui.tabs,{select:function(a){a=this._getIndex(a);if(-1===a)if(this.options.collapsible&&-1!==this.options.selected)a=this.options.selected;else return;this.anchors.eq(a).trigger(this.options.event+this.eventNamespace)}}),function(){var b=0;a.widget("ui.tabs",a.ui.tabs,{options:{cookie:null},_create:function(){var a=
this.options,b;null==a.active&&a.cookie&&(b=parseInt(this._cookie(),10),-1===b&&(b=!1),a.active=b);this._super()},_cookie:function(c){var d=[this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++b)];arguments.length&&(d.push(!1===c?-1:c),d.push(this.options.cookie));return a.cookie.apply(null,d)},_refresh:function(){this._super();this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_eventHandler:function(){this._superApply(arguments);this.options.cookie&&this._cookie(this.options.active,
this.options.cookie)},_destroy:function(){this._super();this.options.cookie&&this._cookie(null,this.options.cookie)}})}(),a.widget("ui.tabs",a.ui.tabs,{_trigger:function(b,c,d){d=a.extend({},d);"load"===b&&(d.panel=d.panel[0],d.tab=d.tab.find(".ui-tabs-anchor")[0]);return this._super(b,c,d)}}),a.widget("ui.tabs",a.ui.tabs,{options:{fx:null},_getFx:function(){var b,c,d=this.options.fx;d&&(a.isArray(d)?(b=d[0],c=d[1]):b=c=d);return d?{show:c,hide:b}:null},_toggle:function(a,b){function c(){e.running=
!1;e._trigger("activate",a,b)}function d(){b.newTab.closest("li").addClass("ui-tabs-active ui-state-active");p.length&&t.show?p.animate(t.show,t.show.duration,function(){c()}):(p.show(),c())}var e=this,p=b.newPanel,r=b.oldPanel,t=this._getFx();if(!t)return this._super(a,b);e.running=!0;r.length&&t.hide?r.animate(t.hide,t.hide.duration,function(){b.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active");d()}):(b.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r.hide(),
d())}}))})(jQuery);
(function(a){function b(b,c){var e=(b.attr("aria-describedby")||"").split(/\s+/);e.push(c);b.data("ui-tooltip-id",c).attr("aria-describedby",a.trim(e.join(" ")))}function e(b){var c=b.data("ui-tooltip-id"),e=(b.attr("aria-describedby")||"").split(/\s+/),c=a.inArray(c,e);-1!==c&&e.splice(c,1);b.removeData("ui-tooltip-id");(e=a.trim(e.join(" ")))?b.attr("aria-describedby",e):b.removeAttr("aria-describedby")}var c=0;a.widget("ui.tooltip",{version:"1.9.1",options:{content:function(){return a(this).attr("title")},hide:!0,
items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flipfit"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"});this.tooltips={};this.parents={};this.options.disabled&&this._disable()},_setOption:function(b,c){var e=this;"disabled"===b?(this[c?"_disable":"_enable"](),this.options[b]=c):(this._super(b,c),"content"===b&&a.each(this.tooltips,function(a,b){e._updateContent(b)}))},_disable:function(){var b=
this;a.each(this.tooltips,function(c,e){var h=a.Event("blur");h.target=h.currentTarget=e[0];b.close(h,!0)});this.element.find(this.options.items).andSelf().each(function(){var b=a(this);b.is("[title]")&&b.data("ui-tooltip-title",b.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).andSelf().each(function(){var b=a(this);b.data("ui-tooltip-title")&&b.attr("title",b.data("ui-tooltip-title"))})},open:function(b){var c=this,e=a(b?b.target:this.element).closest(this.options.items);
e.length&&(this.options.track&&e.data("ui-tooltip-id")?(this._find(e).position(a.extend({of:e},this.options.position)),this._off(this.document,"mousemove")):(e.attr("title")&&e.data("ui-tooltip-title",e.attr("title")),e.data("tooltip-open",!0),b&&"mouseover"===b.type&&e.parents().each(function(){var b;a(this).data("tooltip-open")&&(b=a.Event("blur"),b.target=b.currentTarget=this,c.close(b,!0));this.title&&(a(this).uniqueId(),c.parents[this.id]={element:this,title:this.title},this.title="")}),this._updateContent(e,
b)))},_updateContent:function(a,b){var c;c=this.options.content;var e=this;if("string"===typeof c)return this._open(b,a,c);(c=c.call(a[0],function(c){a.data("tooltip-open")&&e._delay(function(){this._open(b,a,c)})}))&&this._open(b,a,c)},_open:function(c,e,n){function h(a){p.of=a;g.is(":hidden")||g.position(p)}var g,m,p=a.extend({},this.options.position);n&&(g=this._find(e),g.length?g.find(".ui-tooltip-content").html(n):(e.is("[title]")&&(c&&"mouseover"===c.type?e.attr("title",""):e.removeAttr("title")),
g=this._tooltip(e),b(e,g.attr("id")),g.find(".ui-tooltip-content").html(n),this.options.track&&c&&/^mouse/.test(c.originalEvent.type)?(this._on(this.document,{mousemove:h}),h(c)):g.position(a.extend({of:e},this.options.position)),g.hide(),this._show(g,this.options.show),this.options.show&&this.options.show.delay&&(m=setInterval(function(){g.is(":visible")&&(h(p.of),clearInterval(m))},a.fx.interval)),this._trigger("open",c,{tooltip:g}),n={keyup:function(b){b.keyCode===a.ui.keyCode.ESCAPE&&(b=a.Event(b),
b.currentTarget=e[0],this.close(b,!0))},remove:function(){this._removeTooltip(g)}},c&&"mouseover"!==c.type||(n.mouseleave="close"),c&&"focusin"!==c.type||(n.focusout="close"),this._on(e,n)))},close:function(b){var c=this,n=a(b?b.currentTarget:this.element),h=this._find(n);this.closing||(n.data("ui-tooltip-title")&&n.attr("title",n.data("ui-tooltip-title")),e(n),h.stop(!0),this._hide(h,this.options.hide,function(){c._removeTooltip(a(this))}),n.removeData("tooltip-open"),this._off(n,"mouseleave focusout keyup"),
n[0]!==this.element[0]&&this._off(n,"remove"),this._off(this.document,"mousemove"),b&&"mouseleave"===b.type&&a.each(this.parents,function(a,b){b.element.title=b.title;delete c.parents[a]}),this.closing=!0,this._trigger("close",b,{tooltip:h}),this.closing=!1)},_tooltip:function(b){var e="ui-tooltip-"+c++,n=a("<div>").attr({id:e,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));a("<div>").addClass("ui-tooltip-content").appendTo(n);n.appendTo(this.document[0].body);
a.fn.bgiframe&&n.bgiframe();this.tooltips[e]=b;return n},_find:function(b){return(b=b.data("ui-tooltip-id"))?a("#"+b):a()},_removeTooltip:function(a){a.remove();delete this.tooltips[a.attr("id")]},_destroy:function(){var b=this;a.each(this.tooltips,function(c,e){var h=a.Event("blur");h.target=h.currentTarget=e[0];b.close(h,!0);a("#"+c).remove();e.data("ui-tooltip-title")&&(e.attr("title",e.data("ui-tooltip-title")),e.removeData("ui-tooltip-title"))})}})})(jQuery);
jQuery.effects||function(a,b){var e=!1!==a.uiBackCompat;a.effects={effect:{}};(function(b,d){function e(a,b,c){var d=t[b.type]||{};if(null==a)return c||!b.def?null:b.def;a=d.floor?~~a:parseFloat(a);return isNaN(a)?b.def:d.mod?(a+d.mod)%d.mod:0>a?0:d.max<a?d.max:a}function n(a){var d=p(),e=d._rgba=[];a=a.toLowerCase();u(m,function(b,c){var f,g=c.re.exec(a);f=g&&c.parse(g);g=c.space||"rgba";if(f)return f=d[g](f),d[r[g].cache]=f[r[g].cache],e=d._rgba=f._rgba,!1});return e.length?("0,0,0,0"===e.join()&&
b.extend(e,w.transparent),d):w[a]}function h(a,b,c){c=(c+1)%1;return 1>6*c?a+(b-a)*c*6:1>2*c?b:2>3*c?a+(b-a)*(2/3-c)*6:a}var g=/^([\-+])=\s*(\d+\.?\d*)/,m=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,
parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],p=b.Color=function(a,d,e,f){return new b.Color.fn.parse(a,d,e,f)},r={rgba:{props:{red:{idx:0,type:"byte"},
green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},t={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},l=p.support={},q=b("<p>")[0],w,u=b.each;q.style.cssText="background-color:rgba(1,1,1,.5)";l.rgba=-1<q.style.backgroundColor.indexOf("rgba");u(r,function(a,b){b.cache="_"+a;b.props.alpha={idx:3,type:"percent",def:1}});p.fn=b.extend(p.prototype,{parse:function(g,l,m,
h){if(g===d)return this._rgba=[null,null,null,null],this;if(g.jquery||g.nodeType)g=b(g).css(l),l=d;var q=this,t=b.type(g),B=this._rgba=[];l!==d&&(g=[g,l,m,h],t="array");if("string"===t)return this.parse(n(g)||w._default);if("array"===t)return u(r.rgba.props,function(a,b){B[b.idx]=e(g[b.idx],b)}),this;if("object"===t)return g instanceof p?u(r,function(a,b){g[b.cache]&&(q[b.cache]=g[b.cache].slice())}):u(r,function(b,c){var d=c.cache;u(c.props,function(a,b){if(!q[d]&&c.to){if("alpha"===a||null==g[a])return;
q[d]=c.to(q._rgba)}q[d][b.idx]=e(g[a],b,!0)});q[d]&&0>a.inArray(null,q[d].slice(0,3))&&(q[d][3]=1,c.from&&(q._rgba=c.from(q[d])))}),this},is:function(a){var b=p(a),c=!0,d=this;u(r,function(a,e){var f,g=b[e.cache];g&&(f=d[e.cache]||e.to&&e.to(d._rgba)||[],u(e.props,function(a,b){if(null!=g[b.idx])return c=g[b.idx]===f[b.idx]}));return c});return c},_space:function(){var a=[],b=this;u(r,function(c,d){b[d.cache]&&a.push(c)});return a.pop()},transition:function(a,b){var c=p(a),d=c._space(),g=r[d],l=0===
this.alpha()?p("transparent"):this,m=l[g.cache]||g.to(l._rgba),h=m.slice(),c=c[g.cache];u(g.props,function(a,d){var g=d.idx,l=m[g],q=c[g],p=t[d.type]||{};null!==q&&(null===l?h[g]=q:(p.mod&&(q-l>p.mod/2?l+=p.mod:l-q>p.mod/2&&(l-=p.mod)),h[g]=e((q-l)*b+l,d)))});return this[d](h)},blend:function(a){if(1===this._rgba[3])return this;var d=this._rgba.slice(),e=d.pop(),f=p(a)._rgba;return p(b.map(d,function(a,b){return(1-e)*f[b]+e*a}))},toRgbaString:function(){var a="rgba(",d=b.map(this._rgba,function(a,
b){return null==a?2<b?1:0:a});1===d[3]&&(d.pop(),a="rgb(");return a+d.join()+")"},toHslaString:function(){var a="hsla(",d=b.map(this.hsla(),function(a,b){null==a&&(a=2<b?1:0);b&&3>b&&(a=Math.round(100*a)+"%");return a});1===d[3]&&(d.pop(),a="hsl(");return a+d.join()+")"},toHexString:function(a){var d=this._rgba.slice(),e=d.pop();a&&d.push(~~(255*e));return"#"+b.map(d,function(a){a=(a||0).toString(16);return 1===a.length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":
this.toRgbaString()}});p.fn.parse.prototype=p.fn;r.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/255,c=a[1]/255,d=a[2]/255;a=a[3];var e=Math.max(b,c,d),f=Math.min(b,c,d),g=e-f,l=e+f,m=.5*l,l=0===m||1===m?m:.5>=m?g/l:g/(2-l);return[Math.round(f===e?0:b===e?60*(c-d)/g+360:c===e?60*(d-b)/g+120:60*(b-c)/g+240)%360,l,m,null==a?1:a]};r.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/360,c=a[1],d=a[2];a=
a[3];c=.5>=d?d*(1+c):d+c-d*c;d=2*d-c;return[Math.round(255*h(d,c,b+1/3)),Math.round(255*h(d,c,b)),Math.round(255*h(d,c,b-1/3)),a]};u(r,function(a,l){var m=l.props,h=l.cache,q=l.to,r=l.from;p.fn[a]=function(a){q&&!this[h]&&(this[h]=q(this._rgba));if(a===d)return this[h].slice();var g,l=b.type(a),n="array"===l||"object"===l?a:arguments,t=this[h].slice();u(m,function(a,b){var c=n["object"===l?a:b.idx];null==c&&(c=t[b.idx]);t[b.idx]=e(c,b)});return r?(g=p(r(t)),g[h]=t,g):p(t)};u(m,function(d,e){p.fn[d]||
(p.fn[d]=function(f){var l=b.type(f),m="alpha"===d?this._hsla?"hsla":"rgba":a,h=this[m](),q=h[e.idx];if("undefined"===l)return q;"function"===l&&(f=f.call(this,q),l=b.type(f));if(null==f&&e.empty)return this;"string"===l&&(l=g.exec(f))&&(f=q+parseFloat(l[2])*("+"===l[1]?1:-1));h[e.idx]=f;return this[m](h)})})});u("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),function(a,d){b.cssHooks[d]=
{set:function(a,e){var f,g="";if("string"!==b.type(e)||(f=n(e))){e=p(f||e);if(!l.rgba&&1!==e._rgba[3]){for(f="backgroundColor"===d?a.parentNode:a;(""===g||"transparent"===g)&&f&&f.style;)try{g=b.css(f,"backgroundColor"),f=f.parentNode}catch(m){}e=e.blend(g&&"transparent"!==g?g:"_default")}e=e.toRgbaString()}try{a.style[d]=e}catch(h){}}};b.fx.step[d]=function(a){a.colorInit||(a.start=p(a.elem,d),a.end=p(a.end),a.colorInit=!0);b.cssHooks[d].set(a.elem,a.start.transition(a.end,a.pos))}});b.cssHooks.borderColor=
{expand:function(a){var b={};u(["Top","Right","Bottom","Left"],function(c,d){b["border"+d+"Color"]=a});return b}};w=b.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(jQuery);(function(){function c(){var b=this.ownerDocument.defaultView?
this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,c={},d,e;if(b&&b.length&&b[0]&&b[b[0]])for(e=b.length;e--;)d=b[e],"string"===typeof b[d]&&(c[a.camelCase(d)]=b[d]);else for(d in b)"string"===typeof b[d]&&(c[d]=b[d]);return c}var d=["add","remove","toggle"],e={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};a.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(b,c){a.fx.step[c]=
function(a){if("none"!==a.end&&!a.setAttr||1===a.pos&&!a.setAttr)jQuery.style(a.elem,c,a.end),a.setAttr=!0}});a.effects.animateClass=function(b,h,g,m){var p=a.speed(h,g,m);return this.queue(function(){var g=a(this),m=g.attr("class")||"",l,h=p.children?g.find("*").andSelf():g,h=h.map(function(){return{el:a(this),start:c.call(this)}});l=function(){a.each(d,function(a,c){if(b[c])g[c+"Class"](b[c])})};l();h=h.map(function(){this.end=c.call(this.el[0]);var b=this.start,d=this.end,g={},l,m;for(l in d)m=
d[l],b[l]===m||e[l]||!a.fx.step[l]&&isNaN(parseFloat(m))||(g[l]=m);this.diff=g;return this});g.attr("class",m);h=h.map(function(){var b=this,c=a.Deferred(),d=jQuery.extend({},p,{queue:!1,complete:function(){c.resolve(b)}});this.el.animate(this.diff,d);return c.promise()});a.when.apply(a,h.get()).done(function(){l();a.each(arguments,function(){var b=this.el;a.each(this.diff,function(a){b.css(a,"")})});p.complete.call(g[0])})})};a.fn.extend({_addClass:a.fn.addClass,addClass:function(b,c,d,e){return c?
a.effects.animateClass.call(this,{add:b},c,d,e):this._addClass(b)},_removeClass:a.fn.removeClass,removeClass:function(b,c,d,e){return c?a.effects.animateClass.call(this,{remove:b},c,d,e):this._removeClass(b)},_toggleClass:a.fn.toggleClass,toggleClass:function(c,d,e,f,p){return"boolean"===typeof d||d===b?e?a.effects.animateClass.call(this,d?{add:c}:{remove:c},e,f,p):this._toggleClass(c,d):a.effects.animateClass.call(this,{toggle:c},d,e,f)},switchClass:function(b,c,d,e,f){return a.effects.animateClass.call(this,
{add:c,remove:b},d,e,f)}})})();(function(){function c(b,c,d,e){a.isPlainObject(b)&&(c=b,b=b.effect);b={effect:b};null==c&&(c={});a.isFunction(c)&&(e=c,d=null,c={});if("number"===typeof c||a.fx.speeds[c])e=d,d=c,c={};a.isFunction(d)&&(e=d,d=null);c&&a.extend(b,c);d=d||c.duration;b.duration=a.fx.off?0:"number"===typeof d?d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default;b.complete=e||c.complete;return b}function d(b){return!b||"number"===typeof b||a.fx.speeds[b]?!0:"string"!==typeof b||a.effects.effect[b]?
!1:e&&a.effects[b]?!1:!0}a.extend(a.effects,{version:"1.9.1",save:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.data("ui-effects-"+b[c],a[0].style[b[c]])},restore:function(a,c){var d,e;for(e=0;e<c.length;e++)null!==c[e]&&(d=a.data("ui-effects-"+c[e]),d===b&&(d=""),a.css(c[e],d))},setMode:function(a,b){"toggle"===b&&(b=a.is(":hidden")?"show":"hide");return b},getBaseline:function(a,b){var c,d;switch(a[0]){case "top":c=0;break;case "middle":c=.5;break;case "bottom":c=1;break;default:c=a[0]/
b.height}switch(a[1]){case "left":d=0;break;case "center":d=.5;break;case "right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e={width:b.width(),height:b.height()},m=document.activeElement;try{m.id}catch(p){m=
document.body}b.wrap(d);(b[0]===m||a.contains(b[0],m))&&a(m).focus();d=b.parent();"static"===b.css("position")?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d);isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"}));b.css(e);return d.css(c).show()},removeWrapper:function(b){var c=document.activeElement;
b.parent().is(".ui-effects-wrapper")&&(b.parent().replaceWith(b),(b[0]===c||a.contains(b[0],c))&&a(c).focus());return b},setTransition:function(b,c,d,e){e=e||{};a.each(c,function(a,c){var r=b.cssUnit(c);0<r[0]&&(e[c]=r[0]*d+r[1])});return e}});a.fn.extend({effect:function(){function b(c){function e(){a.isFunction(g)&&g.call(f[0]);a.isFunction(c)&&c()}var f=a(this),g=d.complete,h=d.mode;(f.is(":hidden")?"hide"===h:"show"===h)?e():m.call(f[0],d,e)}var d=c.apply(this,arguments),h=d.mode,g=d.queue,m=
a.effects.effect[d.effect],p=!m&&e&&a.effects[d.effect];return a.fx.off||!m&&!p?h?this[h](d.duration,d.complete):this.each(function(){d.complete&&d.complete.call(this)}):m?!1===g?this.each(b):this.queue(g||"fx",b):p.call(this,{options:d,duration:d.duration,callback:d.complete,mode:d.mode})},_show:a.fn.show,show:function(a){if(d(a))return this._show.apply(this,arguments);var b=c.apply(this,arguments);b.mode="show";return this.effect.call(this,b)},_hide:a.fn.hide,hide:function(a){if(d(a))return this._hide.apply(this,
arguments);var b=c.apply(this,arguments);b.mode="hide";return this.effect.call(this,b)},__toggle:a.fn.toggle,toggle:function(b){if(d(b)||"boolean"===typeof b||a.isFunction(b))return this.__toggle.apply(this,arguments);var e=c.apply(this,arguments);e.mode="toggle";return this.effect.call(this,e)},cssUnit:function(b){var c=this.css(b),d=[];a.each(["em","px","%","pt"],function(a,b){0<c.indexOf(b)&&(d=[parseFloat(c),b])});return d}})})();(function(){var b={};a.each(["Quad","Cubic","Quart","Quint","Expo"],
function(a,e){b[e]=function(b){return Math.pow(b,a+2)}});a.extend(b,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var b,c=4;a<((b=Math.pow(2,--c))-1)/11;);return 1/Math.pow(4,3-c)-7.5625*Math.pow((3*b-2)/22-a,2)}});a.each(b,function(b,c){a.easing["easeIn"+b]=c;a.easing["easeOut"+b]=function(a){return 1-
c(1-a)};a.easing["easeInOut"+b]=function(a){return.5>a?c(2*a)/2:1-c(-2*a+2)/2}})})()}(jQuery);
(function(a,b){var e=/up|down|vertical/,c=/up|left|vertical|horizontal/;a.effects.effect.blind=function(b,f){var n=a(this),h="position top bottom left right height width".split(" "),g=a.effects.setMode(n,b.mode||"hide"),m=b.direction||"up",p=e.test(m),r=p?"height":"width",t=p?"top":"left",m=c.test(m),l={},q="show"===g,w,u,v;n.parent().is(".ui-effects-wrapper")?a.effects.save(n.parent(),h):a.effects.save(n,h);n.show();w=a.effects.createWrapper(n).css({overflow:"hidden"});u=w[r]();v=parseFloat(w.css(t))||
0;l[r]=q?u:0;m||(n.css(p?"bottom":"right",0).css(p?"top":"left","auto").css({position:"absolute"}),l[t]=q?v:u+v);q&&(w.css(r,0),m||w.css(t,v+u));w.animate(l,{duration:b.duration,easing:b.easing,queue:!1,complete:function(){"hide"===g&&n.hide();a.effects.restore(n,h);a.effects.removeWrapper(n);f()}})}})(jQuery);
(function(a,b){a.effects.effect.bounce=function(b,c){var d=a(this),f="position top bottom left right height width".split(" "),n=a.effects.setMode(d,b.mode||"effect"),h="hide"===n,g="show"===n,m=b.direction||"up",n=b.distance,p=b.times||5,r=2*p+(g||h?1:0),t=b.duration/r,l=b.easing,q="up"===m||"down"===m?"top":"left",m="up"===m||"left"===m,w,u,v=d.queue(),E=v.length;(g||h)&&f.push("opacity");a.effects.save(d,f);d.show();a.effects.createWrapper(d);n||(n=d["top"===q?"outerHeight":"outerWidth"]()/3);g&&
(u={opacity:1},u[q]=0,d.css("opacity",0).css(q,m?2*-n:2*n).animate(u,t,l));h&&(n/=Math.pow(2,p-1));u={};for(g=u[q]=0;g<p;g++)w={},w[q]=(m?"-=":"+=")+n,d.animate(w,t,l).animate(u,t,l),n=h?2*n:n/2;h&&(w={opacity:0},w[q]=(m?"-=":"+=")+n,d.animate(w,t,l));d.queue(function(){h&&d.hide();a.effects.restore(d,f);a.effects.removeWrapper(d);c()});1<E&&v.splice.apply(v,[1,0].concat(v.splice(E,r+1)));d.dequeue()}})(jQuery);
(function(a,b){a.effects.effect.clip=function(b,c){var d=a(this),f="position top bottom left right height width".split(" "),n="show"===a.effects.setMode(d,b.mode||"hide"),h="vertical"===(b.direction||"vertical"),g=h?"height":"width",h=h?"top":"left",m={},p,r;a.effects.save(d,f);d.show();p=a.effects.createWrapper(d).css({overflow:"hidden"});p="IMG"===d[0].tagName?p:d;r=p[g]();n&&(p.css(g,0),p.css(h,r/2));m[g]=n?r:0;m[h]=n?0:r/2;p.animate(m,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){n||
d.hide();a.effects.restore(d,f);a.effects.removeWrapper(d);c()}})}})(jQuery);
(function(a,b){a.effects.effect.drop=function(b,c){var d=a(this),f="position top bottom left right opacity height width".split(" "),n=a.effects.setMode(d,b.mode||"hide"),h="show"===n,g=b.direction||"left",m="up"===g||"down"===g?"top":"left",g="up"===g||"left"===g?"pos":"neg",p={opacity:h?1:0},r;a.effects.save(d,f);d.show();a.effects.createWrapper(d);r=b.distance||d["top"===m?"outerHeight":"outerWidth"](!0)/2;h&&d.css("opacity",0).css(m,"pos"===g?-r:r);p[m]=(h?"pos"===g?"+=":"-=":"pos"===g?"-=":"+=")+
r;d.animate(p,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===n&&d.hide();a.effects.restore(d,f);a.effects.removeWrapper(d);c()}})}})(jQuery);
(function(a,b){a.effects.effect.explode=function(b,c){function d(){t.push(this);t.length===f*n&&(h.css({visibility:"visible"}),a(t).remove(),g||h.hide(),c())}var f=b.pieces?Math.round(Math.sqrt(b.pieces)):3,n=f,h=a(this),g="show"===a.effects.setMode(h,b.mode||"hide"),m=h.show().css("visibility","hidden").offset(),p=Math.ceil(h.outerWidth()/n),r=Math.ceil(h.outerHeight()/f),t=[],l,q,w,u,v,E;for(l=0;l<f;l++)for(u=m.top+l*r,E=l-(f-1)/2,q=0;q<n;q++)w=m.left+q*p,v=q-(n-1)/2,h.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",
visibility:"visible",left:-q*p,top:-l*r}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:p,height:r,left:w+(g?v*p:0),top:u+(g?E*r:0),opacity:g?0:1}).animate({left:w+(g?0:v*p),top:u+(g?0:E*r),opacity:g?1:0},b.duration||500,b.easing,d)}})(jQuery);(function(a,b){a.effects.effect.fade=function(b,c){var d=a(this),f=a.effects.setMode(d,b.mode||"toggle");d.animate({opacity:f},{queue:!1,duration:b.duration,easing:b.easing,complete:c})}})(jQuery);
(function(a,b){a.effects.effect.fold=function(b,c){var d=a(this),f="position top bottom left right height width".split(" "),n=a.effects.setMode(d,b.mode||"hide"),h="show"===n,g="hide"===n,n=b.size||15,m=/([0-9]+)%/.exec(n),p=!!b.horizFirst,r=h!==p,t=r?["width","height"]:["height","width"],l=b.duration/2,q,w={},u={};a.effects.save(d,f);d.show();q=a.effects.createWrapper(d).css({overflow:"hidden"});r=r?[q.width(),q.height()]:[q.height(),q.width()];m&&(n=parseInt(m[1],10)/100*r[g?0:1]);h&&q.css(p?{height:0,
width:n}:{height:n,width:0});w[t[0]]=h?r[0]:n;u[t[1]]=h?r[1]:0;q.animate(w,l,b.easing).animate(u,l,b.easing,function(){g&&d.hide();a.effects.restore(d,f);a.effects.removeWrapper(d);c()})}})(jQuery);
(function(a,b){a.effects.effect.highlight=function(b,c){var d=a(this),f=["backgroundImage","backgroundColor","opacity"],n=a.effects.setMode(d,b.mode||"show"),h={backgroundColor:d.css("backgroundColor")};"hide"===n&&(h.opacity=0);a.effects.save(d,f);d.show().css({backgroundImage:"none",backgroundColor:b.color||"#ffff99"}).animate(h,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){"hide"===n&&d.hide();a.effects.restore(d,f);c()}})}})(jQuery);
(function(a,b){a.effects.effect.pulsate=function(b,c){var d=a(this),f=a.effects.setMode(d,b.mode||"show"),n="show"===f,h="hide"===f,f=2*(b.times||5)+(n||"hide"===f?1:0),g=b.duration/f,m=0,p=d.queue(),r=p.length;if(n||!d.is(":visible"))d.css("opacity",0).show(),m=1;for(n=1;n<f;n++)d.animate({opacity:m},g,b.easing),m=1-m;d.animate({opacity:m},g,b.easing);d.queue(function(){h&&d.hide();c()});1<r&&p.splice.apply(p,[1,0].concat(p.splice(r,f+1)));d.dequeue()}})(jQuery);
(function(a,b){a.effects.effect.puff=function(b,c){var d=a(this),f=a.effects.setMode(d,b.mode||"hide"),n="hide"===f,h=parseInt(b.percent,10)||150,g=h/100,m={height:d.height(),width:d.width()};a.extend(b,{effect:"scale",queue:!1,fade:!0,mode:f,complete:c,percent:n?h:100,from:n?m:{height:m.height*g,width:m.width*g}});d.effect(b)};a.effects.effect.scale=function(b,c){var d=a(this),f=a.extend(!0,{},b),n=a.effects.setMode(d,b.mode||"effect"),h=parseInt(b.percent,10)||(0===parseInt(b.percent,10)?0:"hide"===
n?0:100),g=b.direction||"both",m=b.origin,p={height:d.height(),width:d.width(),outerHeight:d.outerHeight(),outerWidth:d.outerWidth()},r="horizontal"!==g?h/100:1,h="vertical"!==g?h/100:1;f.effect="size";f.queue=!1;f.complete=c;"effect"!==n&&(f.origin=m||["middle","center"],f.restore=!0);f.from=b.from||("show"===n?{height:0,width:0}:p);f.to={height:p.height*r,width:p.width*h,outerHeight:p.outerHeight*r,outerWidth:p.outerWidth*h};f.fade&&("show"===n&&(f.from.opacity=0,f.to.opacity=1),"hide"===n&&(f.from.opacity=
1,f.to.opacity=0));d.effect(f)};a.effects.effect.size=function(b,c){var d,f,n,h,g,m,p=a(this),r="position top bottom left right width height overflow opacity".split(" ");g="position top bottom left right overflow opacity".split(" ");var t=["width","height","overflow"],l=["fontSize"],q=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],w=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],u=a.effects.setMode(p,b.mode||"effect"),v=b.restore||"effect"!==u,E=b.scale||
"both";m=b.origin||["middle","center"];var A=p.css("position"),K=v?r:g,F={height:0,width:0};"show"===u&&p.show();g={height:p.height(),width:p.width(),outerHeight:p.outerHeight(),outerWidth:p.outerWidth()};"toggle"===b.mode&&"show"===u?(p.from=b.to||F,p.to=b.from||g):(p.from=b.from||("show"===u?F:g),p.to=b.to||("hide"===u?F:g));n=p.from.height/g.height;h=p.from.width/g.width;d=p.to.height/g.height;f=p.to.width/g.width;if("box"===E||"both"===E)n!==d&&(K=K.concat(q),p.from=a.effects.setTransition(p,
q,n,p.from),p.to=a.effects.setTransition(p,q,d,p.to)),h!==f&&(K=K.concat(w),p.from=a.effects.setTransition(p,w,h,p.from),p.to=a.effects.setTransition(p,w,f,p.to));"content"!==E&&"both"!==E||n===d||(K=K.concat(l).concat(t),p.from=a.effects.setTransition(p,l,n,p.from),p.to=a.effects.setTransition(p,l,d,p.to));a.effects.save(p,K);p.show();a.effects.createWrapper(p);p.css("overflow","hidden").css(p.from);m&&(m=a.effects.getBaseline(m,g),p.from.top=(g.outerHeight-p.outerHeight())*m.y,p.from.left=(g.outerWidth-
p.outerWidth())*m.x,p.to.top=(g.outerHeight-p.to.outerHeight)*m.y,p.to.left=(g.outerWidth-p.to.outerWidth)*m.x);p.css(p.from);if("content"===E||"both"===E)q=q.concat(["marginTop","marginBottom"]).concat(l),w=w.concat(["marginLeft","marginRight"]),t=r.concat(q).concat(w),p.find("*[width]").each(function(){var c=a(this),g=c.height(),l=c.width();v&&a.effects.save(c,t);c.from={height:g*n,width:l*h};c.to={height:g*d,width:l*f};n!==d&&(c.from=a.effects.setTransition(c,q,n,c.from),c.to=a.effects.setTransition(c,
q,d,c.to));h!==f&&(c.from=a.effects.setTransition(c,w,h,c.from),c.to=a.effects.setTransition(c,w,f,c.to));c.css(c.from);c.animate(c.to,b.duration,b.easing,function(){v&&a.effects.restore(c,t)})});p.animate(p.to,{queue:!1,duration:b.duration,easing:b.easing,complete:function(){0===p.to.opacity&&p.css("opacity",p.from.opacity);"hide"===u&&p.hide();a.effects.restore(p,K);v||("static"===A?p.css({position:"relative",top:p.to.top,left:p.to.left}):a.each(["top","left"],function(a,b){p.css(b,function(b,c){var d=
parseInt(c,10),e=a?p.to.left:p.to.top;return"auto"===c?e+"px":d+e+"px"})}));a.effects.removeWrapper(p);c()}})}})(jQuery);
(function(a,b){a.effects.effect.shake=function(b,c){var d=a(this),f="position top bottom left right height width".split(" "),n=a.effects.setMode(d,b.mode||"effect"),h=b.direction||"left",g=b.distance||20,m=b.times||3,p=2*m+1,r=Math.round(b.duration/p),t="up"===h||"down"===h?"top":"left",l="up"===h||"left"===h,h={},q={},w={},u=d.queue(),v=u.length;a.effects.save(d,f);d.show();a.effects.createWrapper(d);h[t]=(l?"-=":"+=")+g;q[t]=(l?"+=":"-=")+2*g;w[t]=(l?"-=":"+=")+2*g;d.animate(h,r,b.easing);for(g=
1;g<m;g++)d.animate(q,r,b.easing).animate(w,r,b.easing);d.animate(q,r,b.easing).animate(h,r/2,b.easing).queue(function(){"hide"===n&&d.hide();a.effects.restore(d,f);a.effects.removeWrapper(d);c()});1<v&&u.splice.apply(u,[1,0].concat(u.splice(v,p+1)));d.dequeue()}})(jQuery);
(function(a,b){a.effects.effect.slide=function(b,c){var d=a(this),f="position top bottom left right width height".split(" "),n=a.effects.setMode(d,b.mode||"show"),h="show"===n,g=b.direction||"left",m="up"===g||"down"===g?"top":"left",g="up"===g||"left"===g,p,r={};a.effects.save(d,f);d.show();p=b.distance||d["top"===m?"outerHeight":"outerWidth"](!0);a.effects.createWrapper(d).css({overflow:"hidden"});h&&d.css(m,g?isNaN(p)?"-"+p:-p:p);r[m]=(h?g?"+=":"-=":g?"-=":"+=")+p;d.animate(r,{queue:!1,duration:b.duration,
easing:b.easing,complete:function(){"hide"===n&&d.hide();a.effects.restore(d,f);a.effects.removeWrapper(d);c()}})}})(jQuery);
(function(a,b){a.effects.effect.transfer=function(b,c){var d=a(this),f=a(b.to),n="fixed"===f.css("position"),h=a("body"),g=n?h.scrollTop():0,h=n?h.scrollLeft():0,m=f.offset(),f={top:m.top-g,left:m.left-h,height:f.innerHeight(),width:f.innerWidth()},m=d.offset(),p=a('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(b.className).css({top:m.top-g,left:m.left-h,height:d.innerHeight(),width:d.innerWidth(),position:n?"fixed":"absolute"}).animate(f,b.duration,b.easing,function(){p.remove();
c()})}})(jQuery);
(function(a){a.widget("ui.multiAccordion",{options:{active:0,showAll:null,hideAll:null,_classes:{accordion:"ui-accordion ui-widget ui-helper-reset ui-accordion-icons",h3:"ui-accordion-header ui-helper-reset ui-state-default ui-corner-all",div:"ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom",divActive:"ui-accordion-content-active",span:"ui-icon ui-icon-triangle-1-e",stateDefault:"ui-state-default",stateHover:"ui-state-hover"}},_create:function(){var b=this,e=b.options,c=b.element,
d=c.children("h3");c.children("div");c.addClass(e._classes.accordion);d.each(function(c){var d=a(this);d.addClass(e._classes.h3).prepend('<span class="{class}"></span>'.replace(/{class}/,e._classes.span));b._isActive(c)&&b._showTab(d)});c.children("div").each(function(b){a(this).addClass(e._classes.div)});d.bind("click",function(c){c.preventDefault();c=a(this);var d={tab:c,content:c.next("div")};b._trigger("click",null,d);c.hasClass(e._classes.stateDefault)?b._showTab(c):b._hideTab(c)});d.bind("mouseover",
function(){a(this).addClass(e._classes.stateHover)});d.bind("mouseout",function(){a(this).removeClass(e._classes.stateHover)});b._trigger("init",null,c)},destroy:function(){var a=this.element,e=a.children("h3"),c=a.children("div");a.children("span").remove();var d=this.options;a.children("h3").unbind("click mouseover mouseout");a.removeClass(d._classes.accordion);e.removeClass(d._classes.h3).removeClass("ui-state-default ui-corner-all ui-state-active ui-corner-top").children("span").remove();c.removeClass(d._classes.div+
" "+d._classes.divActive).show()},_showTab:function(a){var e=a.children("span.ui-icon"),c=a.next(),d=this.options;a.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top");e.removeClass("ui-icon-triangle-1-e").addClass("ui-icon-triangle-1-s");c.slideDown("fast",function(){c.addClass(d._classes.divActive)});a={tab:a,content:a.next("div")};this._trigger("tabShown",null,a)},_hideTab:function(a){var e=a.children("span.ui-icon"),c=a.next(),d=this.options;a.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all");
e.removeClass("ui-icon-triangle-1-s").addClass("ui-icon-triangle-1-e");c.slideUp("fast",function(){c.removeClass(d._classes.divActive)});a={tab:a,content:a.next("div")};this._trigger("tabHidden",null,a)},_isActive:function(a){var e=this.options;if("boolean"!=typeof e.active||e.active)if(void 0!=e.active.length)for(var c=0;c<e.active.length;c++){if(e.active[c]==a)return!0}else return e.active==a;return!1},_getActiveTabs:function(){var b=[];this.element.children("div").each(function(e){var c=a(this);
c.is(":visible")&&b.push({index:e,tab:c.prev("h3"),content:c})});return 0==b.length?void 0:b},getActiveTabs:function(){var b=[];this.element.children("div").each(function(e){a(this).is(":visible")&&b.push(e)});return 0==b.length?[-1]:b},_setActiveTabs:function(b){var e=this,c=this.element;"undefined"!=typeof b&&c.children("div").each(function(c){var f=a(this).prev("h3");b.hasObject(c)?e._showTab(f):e._hideTab(f)})},_generateTabsArrayFromOptions:function(b){var e=[],c=this.element,d=c.children("h3").size();
if("array"===a.type(b))return b;if("number"===a.type(b))return[b];if("string"===a.type(b))switch(b.toLowerCase()){case "all":d=c.children("h3").size();for(b=0;b<d;b++)e.push(b);return e;case "none":return e=[-1]}},_setOption:function(b,e){a.Widget.prototype._setOption.apply(this,arguments);var c=this.element;switch(b){case "active":this._setActiveTabs(this._generateTabsArrayFromOptions(e));break;case "getActiveTabs":var c=this.element,d;c.children("div").each(function(b){a(this).is(":visible")&&(d=
d?d:[],d.push(b))});return 0==d.length?[-1]:d}}});Array.prototype.hasObject=Array.indexOf?function(a){return-1!==this.indexOf(a)}:function(a){for(var e=this.length+1;e-=1;)if(this[e-1]===a)return!0;return!1}})(jQuery);
(function(a){a.widget("ui.selectmenu",{options:{appendTo:"body",typeAhead:1E3,style:"dropdown",positionOptions:{my:"left top",at:"left bottom",offset:null},width:null,menuWidth:null,handleWidth:26,maxHeight:null,icons:null,format:null,escapeHtml:!1,bgImage:function(){}},_create:function(){var b=this,e=this.options,c=(this.element.attr("id")||"ui-selectmenu-"+Math.random().toString(16).slice(2,10)).replace(/(:|\.)/g,"");this.ids=[c,c+"-button",c+"-menu"];this._safemouseup=!0;this.isOpen=!1;this.newelement=
a("<a />",{"class":this.widgetBaseClass+" ui-widget ui-state-default ui-corner-all",id:this.ids[1],role:"button",href:"#nogo",tabindex:this.element.attr("disabled")?1:0,"aria-haspopup":!0,"aria-owns":this.ids[2]});this.newelementWrap=a("<span />").append(this.newelement).insertAfter(this.element);(c=this.element.attr("tabindex"))&&this.newelement.attr("tabindex",c);this.newelement.data("selectelement",this.element);this.selectmenuIcon=a('<span class="'+this.widgetBaseClass+'-icon ui-icon"></span>').prependTo(this.newelement);
this.newelement.prepend('<span class="'+b.widgetBaseClass+'-status" />');this.element.bind({"click.selectmenu":function(a){b.newelement.focus();a.preventDefault()}});this.newelement.bind("mousedown.selectmenu",function(a){b._toggle(a,!0);"popup"==e.style&&(b._safemouseup=!1,setTimeout(function(){b._safemouseup=!0},300));return!1}).bind("click.selectmenu",function(){return!1}).bind("keydown.selectmenu",function(c){var e=!1;switch(c.keyCode){case a.ui.keyCode.ENTER:e=!0;break;case a.ui.keyCode.SPACE:b._toggle(c);
break;case a.ui.keyCode.UP:c.altKey?b.open(c):b._moveSelection(-1);break;case a.ui.keyCode.DOWN:c.altKey?b.open(c):b._moveSelection(1);break;case a.ui.keyCode.LEFT:b._moveSelection(-1);break;case a.ui.keyCode.RIGHT:b._moveSelection(1);break;case a.ui.keyCode.TAB:e=!0;break;case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.HOME:b.index(0);break;case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.END:b.index(b._optionLis.length);break;default:e=!0}return e}).bind("keypress.selectmenu",function(a){0<a.which&&b._typeAhead(a.which,
"mouseup");return!0}).bind("mouseover.selectmenu",function(){e.disabled||a(this).addClass("ui-state-hover")}).bind("mouseout.selectmenu",function(){e.disabled||a(this).removeClass("ui-state-hover")}).bind("focus.selectmenu",function(){e.disabled||a(this).addClass("ui-state-focus")}).bind("blur.selectmenu",function(){e.disabled||a(this).removeClass("ui-state-focus")});a(document).bind("mousedown.selectmenu-"+this.ids[0],function(a){b.isOpen&&b.close(a)});this.element.bind("click.selectmenu",function(){b._refreshValue()}).bind("focus.selectmenu",
function(){b.newelement&&b.newelement[0].focus()});e.width||(e.width=this.element.outerWidth());this.newelement.width(e.width);this.element.hide();this.list=a("<ul />",{"class":"ui-widget ui-widget-content","aria-hidden":!0,role:"listbox","aria-labelledby":this.ids[1],id:this.ids[2]});this.listWrap=a("<div />",{"class":b.widgetBaseClass+"-menu"}).append(this.list).appendTo(e.appendTo);this.list.bind("keydown.selectmenu",function(c){var e=!1;switch(c.keyCode){case a.ui.keyCode.UP:c.altKey?b.close(c,
!0):b._moveFocus(-1);break;case a.ui.keyCode.DOWN:c.altKey?b.close(c,!0):b._moveFocus(1);break;case a.ui.keyCode.LEFT:b._moveFocus(-1);break;case a.ui.keyCode.RIGHT:b._moveFocus(1);break;case a.ui.keyCode.HOME:b._moveFocus(":first");break;case a.ui.keyCode.PAGE_UP:b._scrollPage("up");break;case a.ui.keyCode.PAGE_DOWN:b._scrollPage("down");break;case a.ui.keyCode.END:b._moveFocus(":last");break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:b.close(c,!0);a(c.target).parents("li:eq(0)").trigger("mouseup");
break;case a.ui.keyCode.TAB:e=!0;b.close(c,!0);a(c.target).parents("li:eq(0)").trigger("mouseup");break;case a.ui.keyCode.ESCAPE:b.close(c,!0);break;default:e=!0}return e}).bind("keypress.selectmenu",function(a){0<a.which&&b._typeAhead(a.which,"focus");return!0}).bind("mousedown.selectmenu mouseup.selectmenu",function(){return!1});a(window).bind("resize.selectmenu-"+this.ids[0],a.proxy(b.close,this))},_init:function(){var b=this,e=this.options,c=[];this.element.find("option").each(function(){var d=
a(this);c.push({value:d.attr("value"),text:b._formatText(d.text(),d),selected:d.attr("selected"),disabled:d.attr("disabled"),classes:d.attr("class"),typeahead:d.attr("typeahead"),parentOptGroup:d.parent("optgroup"),bgImage:e.bgImage.call(d)})});var d="popup"==b.options.style?" ui-state-active":"";this.list.html("");if(c.length)for(var f=0;f<c.length;f++){var n={role:"presentation"};c[f].disabled&&(n["class"]=this.namespace+"-state-disabled");var h={html:c[f].text||"&nbsp;",href:"#nogo",tabindex:-1,
role:"option","aria-selected":!1};c[f].disabled&&(h["aria-disabled"]=c[f].disabled);c[f].typeahead&&(h.typeahead=c[f].typeahead);h=a("<a/>",h).bind("focus.selectmenu",function(){a(this).parent().mouseover()}).bind("blur.selectmenu",function(){a(this).parent().mouseout()});n=a("<li/>",n).append(h).data("index",f).addClass(c[f].classes).data("optionClasses",c[f].classes||"").bind("mouseup.selectmenu",function(c){!b._safemouseup||b._disabled(c.currentTarget)||b._disabled(a(c.currentTarget).parents("ul>li."+
b.widgetBaseClass+"-group "))||(b.index(a(this).data("index")),b.select(c),b.close(c,!0));return!1}).bind("click.selectmenu",function(){return!1}).bind("mouseover.selectmenu",function(){a(this).hasClass(b.namespace+"-state-disabled")||a(this).parent("ul").parent("li").hasClass(b.namespace+"-state-disabled")||(b._selectedOptionLi().addClass(d),b._focusedOptionLi().removeClass(b.widgetBaseClass+"-item-focus ui-state-hover"),a(this).removeClass("ui-state-active").addClass(b.widgetBaseClass+"-item-focus ui-state-hover"))}).bind("mouseout.selectmenu",
function(){a(this).is(b._selectedOptionLi())&&a(this).addClass(d);a(this).removeClass(b.widgetBaseClass+"-item-focus ui-state-hover")});c[f].parentOptGroup.length?(h=b.widgetBaseClass+"-group-"+this.element.find("optgroup").index(c[f].parentOptGroup),this.list.find("li."+h).length?this.list.find("li."+h+":last ul").append(n):a(' <li role="presentation" class="'+b.widgetBaseClass+"-group "+h+(c[f].parentOptGroup.attr("disabled")?" "+this.namespace+'-state-disabled" aria-disabled="true"':'"')+'><span class="'+
b.widgetBaseClass+'-group-label">'+c[f].parentOptGroup.attr("label")+"</span><ul></ul></li> ").appendTo(this.list).find("ul").append(n)):n.appendTo(this.list);if(e.icons)for(var g in e.icons)n.is(e.icons[g].find)&&(n.data("optionClasses",c[f].classes+" "+b.widgetBaseClass+"-hasIcon").addClass(b.widgetBaseClass+"-hasIcon"),h=e.icons[g].icon||"",n.find("a:eq(0)").prepend('<span class="'+b.widgetBaseClass+"-item-icon ui-icon "+h+'"></span>'),c[f].bgImage&&n.find("span").css("background-image",c[f].bgImage))}else a('<li role="presentation"><a href="#nogo" tabindex="-1" role="option"></a></li>').appendTo(this.list);
f="dropdown"==e.style;this.newelement.toggleClass(b.widgetBaseClass+"-dropdown",f).toggleClass(b.widgetBaseClass+"-popup",!f);this.list.toggleClass(b.widgetBaseClass+"-menu-dropdown ui-corner-bottom",f).toggleClass(b.widgetBaseClass+"-menu-popup ui-corner-all",!f).find("li:first").toggleClass("ui-corner-top",!f).end().find("li:last").addClass("ui-corner-bottom");this.selectmenuIcon.toggleClass("ui-icon-triangle-1-s",f).toggleClass("ui-icon-triangle-2-n-s",!f);"dropdown"==e.style?this.list.width(e.menuWidth?
e.menuWidth:e.width):this.list.width(e.menuWidth?e.menuWidth:e.width-e.handleWidth);this.list.css("height","auto");f=this.listWrap.height();g=a(window).height();g=e.maxHeight?Math.min(e.maxHeight,g):g/3;f>g&&this.list.height(g);this._optionLis=this.list.find("li:not(."+b.widgetBaseClass+"-group)");this.element.attr("disabled")?this.disable():this.enable();this._refreshValue();this._selectedOptionLi().addClass(this.widgetBaseClass+"-item-focus");clearTimeout(this.refreshTimeout);this.refreshTimeout=
window.setTimeout(function(){b._refreshPosition()},200)},destroy:function(){this.element.removeData(this.widgetName).removeClass(this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled").removeAttr("aria-disabled").unbind(".selectmenu");a(window).unbind(".selectmenu-"+this.ids[0]);a(document).unbind(".selectmenu-"+this.ids[0]);this.newelementWrap.remove();this.listWrap.remove();this.element.unbind(".selectmenu").show();a.Widget.prototype.destroy.apply(this,arguments)},_typeAhead:function(a,
e){var c=this,d=String.fromCharCode(a).toLowerCase(),f=null,n=null;c._typeAhead_timer&&(window.clearTimeout(c._typeAhead_timer),c._typeAhead_timer=void 0);c._typeAhead_chars=(void 0===c._typeAhead_chars?"":c._typeAhead_chars).concat(d);2>c._typeAhead_chars.length||c._typeAhead_chars.substr(-2,1)===d&&c._typeAhead_cycling?(c._typeAhead_cycling=!0,f=d):(c._typeAhead_cycling=!1,f=c._typeAhead_chars);for(var d=("focus"!==e?this._selectedOptionLi().data("index"):this._focusedOptionLi().data("index"))||
0,h=0;h<this._optionLis.length;h++)if(this._optionLis.eq(h).text().substr(0,f.length).toLowerCase()===f)if(c._typeAhead_cycling){if(null===n&&(n=h),h>d){n=h;break}}else n=h;null!==n&&this._optionLis.eq(n).find("a").trigger(e);c._typeAhead_timer=window.setTimeout(function(){c._typeAhead_timer=void 0;c._typeAhead_chars=void 0;c._typeAhead_cycling=void 0},c.options.typeAhead)},_uiHash:function(){var b=this.index();return{index:b,option:a("option",this.element).get(b),value:this.element[0].value}},open:function(a){var e=
this.options;if("true"!=this.newelement.attr("aria-disabled")){this._closeOthers(a);this.newelement.addClass("ui-state-active");this.list.attr("aria-hidden",!1);this.listWrap.addClass(this.widgetBaseClass+"-open");var c=this._selectedOptionLi();"dropdown"==e.style?this.newelement.removeClass("ui-corner-all").addClass("ui-corner-top"):this.list.css("left",-5E3).scrollTop(this.list.scrollTop()+c.position().top-this.list.outerHeight()/2+c.outerHeight()/2).css("left","auto");this._refreshPosition();e=
c.find("a");e.length&&e[0].focus();this.isOpen=!0;this._trigger("open",a,this._uiHash())}},close:function(a,e){this.newelement.is(".ui-state-active")&&(this.newelement.removeClass("ui-state-active"),this.listWrap.removeClass(this.widgetBaseClass+"-open"),this.list.attr("aria-hidden",!0),"dropdown"==this.options.style&&this.newelement.removeClass("ui-corner-top").addClass("ui-corner-all"),e&&this.newelement.focus(),this.isOpen=!1,this._trigger("close",a,this._uiHash()))},change:function(a){this.element.trigger("change");
this._trigger("change",a,this._uiHash())},select:function(a){if(this._disabled(a.currentTarget))return!1;this._trigger("select",a,this._uiHash())},widget:function(){return this.listWrap.add(this.newelementWrap)},_closeOthers:function(b){a("."+this.widgetBaseClass+".ui-state-active").not(this.newelement).each(function(){a(this).data("selectelement").selectmenu("close",b)});a("."+this.widgetBaseClass+".ui-state-hover").trigger("mouseout")},_toggle:function(a,e){this.isOpen?this.close(a,e):this.open(a)},
_formatText:function(b,e){this.options.format?b=this.options.format(b,e):this.options.escapeHtml&&(b=a("<div />").text(b).html());return b},_selectedIndex:function(){return this.element[0].selectedIndex},_selectedOptionLi:function(){return this._optionLis.eq(this._selectedIndex())},_focusedOptionLi:function(){return this.list.find("."+this.widgetBaseClass+"-item-focus")},_moveSelection:function(a,e){if(!this.options.disabled){var c=parseInt(this._selectedOptionLi().data("index")||0,10)+a;0>c&&(c=
0);c>this._optionLis.size()-1&&(c=this._optionLis.size()-1);if(c===e)return!1;this._optionLis.eq(c).hasClass(this.namespace+"-state-disabled")?(0<a?++a:--a,this._moveSelection(a,c)):this._optionLis.eq(c).trigger("mouseover").trigger("mouseup")}},_moveFocus:function(a,e){var c=isNaN(a)?parseInt(this._optionLis.filter(a).data("index"),10):parseInt(this._focusedOptionLi().data("index")||0,10)+a;0>c&&(c=0);c>this._optionLis.size()-1&&(c=this._optionLis.size()-1);if(c===e)return!1;var d=this.widgetBaseClass+
"-item-"+Math.round(1E3*Math.random());this._focusedOptionLi().find("a:eq(0)").attr("id","");this._optionLis.eq(c).hasClass(this.namespace+"-state-disabled")?(0<a?++a:--a,this._moveFocus(a,c)):this._optionLis.eq(c).find("a:eq(0)").attr("id",d).focus();this.list.attr("aria-activedescendant",d)},_scrollPage:function(a){var e=Math.floor(this.list.outerHeight()/this._optionLis.first().outerHeight());this._moveFocus("up"==a?-e:e)},_setOption:function(a,e){this.options[a]=e;"disabled"==a&&(e&&this.close(),
this.element.add(this.newelement).add(this.list)[e?"addClass":"removeClass"](this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled").attr("aria-disabled",e))},disable:function(a,e){"undefined"==typeof a?this._setOption("disabled",!0):"optgroup"==e?this._disableOptgroup(a):this._disableOption(a)},enable:function(a,e){"undefined"==typeof a?this._setOption("disabled",!1):"optgroup"==e?this._enableOptgroup(a):this._enableOption(a)},_disabled:function(b){return a(b).hasClass(this.namespace+
"-state-disabled")},_disableOption:function(a){var e=this._optionLis.eq(a);e&&(e.addClass(this.namespace+"-state-disabled").find("a").attr("aria-disabled",!0),this.element.find("option").eq(a).attr("disabled","disabled"))},_enableOption:function(a){var e=this._optionLis.eq(a);e&&(e.removeClass(this.namespace+"-state-disabled").find("a").attr("aria-disabled",!1),this.element.find("option").eq(a).removeAttr("disabled"))},_disableOptgroup:function(a){var e=this.list.find("li."+this.widgetBaseClass+"-group-"+
a);e&&(e.addClass(this.namespace+"-state-disabled").attr("aria-disabled",!0),this.element.find("optgroup").eq(a).attr("disabled","disabled"))},_enableOptgroup:function(a){var e=this.list.find("li."+this.widgetBaseClass+"-group-"+a);e&&(e.removeClass(this.namespace+"-state-disabled").attr("aria-disabled",!1),this.element.find("optgroup").eq(a).removeAttr("disabled"))},index:function(b){if(arguments.length){if(this._disabled(a(this._optionLis[b]))||b==this._selectedIndex())return!1;this.element[0].selectedIndex=
b;this._refreshValue();this.change()}else return this._selectedIndex()},value:function(a){if(arguments.length&&a!=this.element[0].value)this.element[0].value=a,this._refreshValue(),this.change();else return this.element[0].value},_refreshValue:function(){var a="popup"==this.options.style?" ui-state-active":"",e=this.widgetBaseClass+"-item-"+Math.round(1E3*Math.random());this.list.find("."+this.widgetBaseClass+"-item-selected").removeClass(this.widgetBaseClass+"-item-selected"+a).find("a").attr("aria-selected",
"false").attr("id","");this._selectedOptionLi().addClass(this.widgetBaseClass+"-item-selected"+a).find("a").attr("aria-selected","true").attr("id",e);var a=this.newelement.data("optionClasses")?this.newelement.data("optionClasses"):"",c=this._selectedOptionLi().data("optionClasses")?this._selectedOptionLi().data("optionClasses"):"";this.newelement.removeClass(a).data("optionClasses",c).addClass(c).find("."+this.widgetBaseClass+"-status").html(this._selectedOptionLi().find("a:eq(0)").html());this.list.attr("aria-activedescendant",
e)},_refreshPosition:function(){var a=this.options;if("popup"==a.style&&!a.positionOptions.offset)var e=this._selectedOptionLi(),e="0 "+(this.list.offset().top-e.offset().top-(this.newelement.outerHeight()+e.outerHeight())/2);this.listWrap.removeAttr("style").zIndex(this.element.zIndex()+1).position({of:a.positionOptions.of||this.newelement,my:a.positionOptions.my,at:a.positionOptions.at,offset:a.positionOptions.offset||e,collision:a.positionOptions.collision||("popup"==a.style?"fit":"flip")})}})})(jQuery);
(function(a){a.widget("ui.panel",{options:{event:"click",collapsible:!0,collapseType:"default",collapsed:!1,accordion:!1,collapseSpeed:"fast",draggable:!1,trueVerticalText:!0,vHeight:"220px",stackable:!0,width:"auto",controls:!1,cookie:null,widgetClass:"ui-helper-reset ui-widget ui-panel",headerClass:"ui-helper-reset ui-widget-header ui-panel-header ui-corner-top",contentClass:"ui-helper-reset ui-widget-content ui-panel-content ui-corner-bottom",contentTextClass:"ui-panel-content-text",rightboxClass:"ui-panel-rightbox",
controlsClass:"ui-panel-controls",titleClass:"ui-panel-title",titleTextClass:"ui-panel-title-text",iconClass:"ui-icon",hoverClass:"ui-state-disabled",collapsePnlClass:"ui-panel-clps-pnl",headerIconClpsd:"ui-icon-triangle-1-e",headerIcon:"ui-icon-triangle-1-s",slideRIconClpsd:"ui-icon-arrowthickstop-1-w",slideRIcon:"ui-icon-arrowthickstop-1-e",slideLIconClpsd:"ui-icon-arrowthickstop-1-e",slideLIcon:"ui-icon-arrowthickstop-1-w"},_init:function(){this._panelize()},_panelize:function(){if(this.element.is("div")){var b=
this,e=this.options;this.panelBox=this.element;"auto"==e.width?e.width=this.panelBox.css("width"):this.panelBox.css("width",e.width);this.panelBox.attr("role","panel");e.id=this.panelBox.attr("id");this.headerBox=this.element.children(":first");this.contentBox=this.element.children().eq(1);e.content=this.contentBox.html();this.contentBox.wrapInner("<div/>");this.contentTextBox=this.contentBox.children(":first").addClass(e.contentTextClass);this.headerBox.wrapInner("<div><span/></div>");this.titleBox=
this.headerBox.children(":first");this.titleTextBox=this.titleBox.children(":first");this.titleText=this.titleTextBox.html();this.headerBox.prepend("<span/>");this.rightBox=this.headerBox.children(":first").addClass(e.rightboxClass);0!=e.controls?(this.rightBox.append("<span/>"),this.controlsBox=this.rightBox.children(":first").addClass(e.controlsClass).html(e.controls)):this.controlsBox=null;this.panelBox.addClass(e.widgetClass);this.headerBox.addClass(e.headerClass);this.titleBox.addClass(e.titleClass);
this.titleTextBox.addClass(e.titleTextClass);this.contentBox.addClass(e.contentClass);if(e.collapsible){switch(e.collapseType){case "slide-right":var c=0;e.controls&&(c=1);this.rightBox.append("<span><span/></span>");this.collapsePanel=this.rightBox.children().eq(c).addClass(e.collapsePnlClass);this.collapseButton=this.collapsePanel.children(":first").addClass(e.slideRIcon);this.iconBtnClpsd=e.slideRIconClpsd;this.iconBtn=e.slideRIcon;this.ctrlBox=this.controlsBox;break;case "slide-left":this.headerBox.prepend("<span><span/></span>");
this.collapsePanel=this.headerBox.children(":first").addClass(e.collapsePnlClass);this.collapseButton=this.collapsePanel.children(":first").addClass(e.slideLIcon);this.iconBtnClpsd=e.slideLIconClpsd;this.iconBtn=e.slideLIcon;this.ctrlBox=this.rightBox;break;default:this.headerBox.prepend("<span><span/></span>"),this.collapseButton=this.headerBox.children(":first").addClass(e.headerIcon),this.iconBtnClpsd=e.headerIconClpsd,this.iconBtn=e.headerIcon,this.ctrlBox=this.controlsBox}this._buttonHover(this.collapseButton);
this.collapseButton.addClass(e.iconClass);e.event&&(this.collapseButton.bind(e.event+".panel",function(a){return b._clickHandler.call(b,a,this)}),this.titleTextBox.bind(e.event+".panel",function(a){return b._clickHandler.call(b,a,this)}));e.accordion&&(e.collapsed=!0,e.trueVerticalText=!1);e.cookie&&(0==b._cookie()?e.collapsed=!1:e.collapsed=!0);this.panelBox.data("collapsed",e.collapsed);e.stackable&&-1<a.inArray(e.collapseType,["slide-right","slide-left"])&&(this.panelDock=this.panelBox.siblings("div[role=panelDock]:first"),
this.panelFrame=this.panelBox.siblings("div[role=panelFrame]:first"),0==this.panelDock.length&&(this.panelDock=this.panelBox.parent(0).prepend("<div>").children(":first"),this.panelFrame=this.panelDock.after("<div>").next(":first"),this.panelDock.attr("role","panelDock").css("float","slide-left"==e.collapseType?"left":"right"),this.panelFrame.attr("role","panelFrame").css({"float":"slide-left"==e.collapseType?"left":"right",overflow:"hidden"})),e.collapsed?this.panelDock.append(this.panelBox):this.panelFrame.append(this.panelBox));
e.collapsed&&b.toggle(0,!0)}else this.titleTextBox.css("cursor","default");!e.accordion&&e.draggable&&a.fn.draggable&&this._makeDraggable();this.panelBox.show()}},_cookie:function(){var b=this.cookie||(this.cookie=this.options.cookie.name||"ui-panel-"+this.options.id);return a.cookie.apply(null,[b].concat(a.makeArray(arguments)))},_makeDraggable:function(){this.panelBox.draggable({containment:"document",handle:".ui-panel-header",cancel:".ui-panel-content",cursor:"move"})},_clickHandler:function(a,
e){var c=this.options;if(c.disabled)return!1;this.toggle(c.collapseSpeed);return!1},toggle:function(b,e){var c=this.options,d=this.panelBox,f=this.contentBox,n=this.headerBox,h=this.titleTextBox,g=this.titleText,m=this.ctrlBox,p=this.panelDock,r="";jQuery.support.leadingWhitespace||(r="-ie");"none"==f.css("display")?this._trigger("unfold"):this._trigger("fold");m&&m.toggle(0);"default"==c.collapseType?0==b?(m&&m.hide(),f.hide()):f.slideToggle(b):(0==b?(c.collapsed=!1,m&&m.hide(),f.hide()):f.toggle(),
0==c.collapsed?(c.trueVerticalText?(n.toggleClass("ui-panel-vtitle").css("height",c.vHeight),""==r&&(f="height:"+(parseInt(c.vHeight)-50)+"px;width:100%;position:absolute;bottom:0;left:0;",h.empty().append('<div style="'+f+'z-index:3;"></div><object style="'+f+'z-index:2;" type="image/svg+xml" data="data:image/svg+xml;charset=utf-8,<svg xmlns=\'http://www.w3.org/2000/svg\'><text x=\'-'+(parseInt(c.vHeight)-60)+"px' y='16px' style='font-weight:"+h.css("font-weight")+";font-family:"+h.css("font-family").replace(/"/g,
"")+";font-size:"+h.css("font-size")+";fill:"+h.css("color")+";' transform='rotate(-90)' text-rendering='optimizeSpeed'>"+g+'</text></svg>"></object>').css("height",c.vHeight)),h.toggleClass("ui-panel-vtext"+r)):(n.attr("align","center"),h.html(h.text().replace(/(.)/g,"$1<BR>"))),c.stackable&&(e?p.append(d):p.prepend(d))):(c.stackable&&this.panelFrame.append(d),c.trueVerticalText?(n.toggleClass("ui-panel-vtitle").css("height","auto"),h.empty().append(g),h.toggleClass("ui-panel-vtext"+r)):(n.attr("align",
"left"),h.html(h.text().replace(/<BR>/g," ")))));if((0!=b||c.trueVerticalText)&&null==c.cookie||!e&&null!=c.cookie)c.collapsed=!c.collapsed;this.panelBox.data("collapsed",c.collapsed);e||(c.cookie&&this._cookie(Number(c.collapsed),c.cookie),c.accordion&&a("."+c.accordion+"[role='panel'][id!='"+c.id+"']:not(:data(collapsed))").panel("toggle",b,!0));this.collapseButton.toggleClass(this.iconBtnClpsd).toggleClass(this.iconBtn);n.toggleClass("ui-corner-all")},content:function(a){this.contentTextBox.html(a)},
destroy:function(){var b=this.options;this.headerBox.html(this.titleText).removeAttr("align").removeAttr("style").removeClass("ui-panel-vtitle ui-corner-all "+b.headerClass);this.contentBox.removeClass(b.contentClass).removeAttr("style").html(b.content);this.panelBox.removeAttr("role").removeAttr("style").removeData("collapsed").unbind(".panel").removeClass(b.widgetClass);b.stackable&&-1<a.inArray(b.collapseType,["slide-right","slide-left"])&&(this.panelDock.before(this.panelBox),0==this.panelDock.children("div[role=panel]").length&&
0==this.panelFrame.children("div[role=panel]").length&&(this.panelDock.remove(),this.panelFrame.remove()));b.cookie&&this._cookie(null,b.cookie);return this},_buttonHover:function(b){var e=this.options;b.bind({mouseover:function(){a(this).addClass(e.hoverClass)},mouseout:function(){a(this).removeClass(e.hoverClass)}})}});a.extend(a.ui.panel,{version:"0.6"})})(jQuery);
(function(a){a.widget("ui.multiselect",{options:{sortable:!0,searchable:!0,doubleClickable:!0,animated:"fast",show:"slideDown",hide:"slideUp",dividerLocation:.6,availableFirst:!1,nodeComparator:function(a,e){var c=a.text(),d=e.text();return c==d?0:c<d?-1:1}},_create:function(){this.element.hide();this.id=this.element.attr("id");this.container=a('<div class="ui-multiselect ui-helper-clearfix ui-widget"></div>').insertAfter(this.element);this.count=0;this.selectedContainer=a('<div class="selected"></div>').appendTo(this.container);
this.availableContainer=a('<div class="available"></div>')[this.options.availableFirst?"prependTo":"appendTo"](this.container);this.selectedActions=a('<div class="actions ui-widget-header ui-helper-clearfix"><span class="count">0 '+a.ui.multiselect.locale.itemsCount+'</span><a href="#" class="remove-all">'+a.ui.multiselect.locale.removeAll+"</a></div>").appendTo(this.selectedContainer);this.availableActions=a('<div class="actions ui-widget-header ui-helper-clearfix"><input type="text" class="search empty ui-widget-content ui-corner-all"/><a href="#" class="add-all">'+
a.ui.multiselect.locale.addAll+"</a></div>").appendTo(this.availableContainer);this.selectedList=a('<ul class="selected connected-list"><li class="ui-helper-hidden-accessible"></li></ul>').bind("selectstart",function(){return!1}).appendTo(this.selectedContainer);this.availableList=a('<ul class="available connected-list"><li class="ui-helper-hidden-accessible"></li></ul>').bind("selectstart",function(){return!1}).appendTo(this.availableContainer);var b=this;this.container.width(this.element.width()+
1);this.selectedContainer.width(Math.floor(this.element.width()*this.options.dividerLocation));this.availableContainer.width(Math.floor(this.element.width()*(1-this.options.dividerLocation)));this.selectedList.height(Math.max(this.element.height()-this.selectedActions.height(),1));this.availableList.height(Math.max(this.element.height()-this.availableActions.height(),1));this.options.animated||(this.options.show="show",this.options.hide="hide");this._populateLists(this.element.find("option"));this.options.sortable&&
this.selectedList.sortable({placeholder:"ui-state-highlight",axis:"y",update:function(e,c){b.selectedList.find("li").each(function(){a(this).data("optionLink")&&a(this).data("optionLink").remove().appendTo(b.element)})},receive:function(e,c){c.item.data("optionLink").attr("selected",!0);b.count+=1;b._updateCount();b.selectedList.children(".ui-draggable").each(function(){a(this).removeClass("ui-draggable");a(this).data("optionLink",c.item.data("optionLink"));a(this).data("idx",c.item.data("idx"));
b._applyItemState(a(this),!0)});setTimeout(function(){c.item.remove()},1)}});this.options.searchable?this._registerSearchEvents(this.availableContainer.find("input.search")):a(".search").hide();this.container.find(".remove-all").click(function(){b._populateLists(b.element.find("option").removeAttr("selected"));return!1});this.container.find(".add-all").click(function(){var e=b.element.find("option").not(":selected");1<b.availableList.children("li:hidden").length?b.availableList.children("li").each(function(b){a(this).is(":visible")&&
a(e[b-1]).attr("selected","selected")}):e.attr("selected","selected");b._populateLists(b.element.find("option"));return!1})},destroy:function(){this.element.show();this.container.remove();a.Widget.prototype.destroy.apply(this,arguments)},_populateLists:function(b){this.selectedList.children(".ui-element").remove();this.availableList.children(".ui-element").remove();this.count=0;var e=this;a(b.map(function(a){var b=e._getOptionNode(this).appendTo(this.selected?e.selectedList:e.availableList).show();
this.selected&&(e.count+=1);e._applyItemState(b,this.selected);b.data("idx",a);return b[0]}));this._updateCount();e._order.apply(this.availableContainer.find("input.search"),[e.availableList])},_updateCount:function(){this.element.trigger("change");this.selectedContainer.find("span.count").text(this.count+" "+a.ui.multiselect.locale.itemsCount)},_getOptionNode:function(b){b=a(b);var e=a('<li class="ui-state-default ui-element" title="'+b.text()+'"><span class="ui-icon"/>'+b.text()+'<a href="#" class="action"><span class="ui-corner-all ui-icon"/></a></li>').hide();
e.data("optionLink",b);return e},_cloneWithData:function(a){var e=a.clone(!1,!1);e.data("optionLink",a.data("optionLink"));e.data("idx",a.data("idx"));return e},_setSelected:function(b,e){b.data("optionLink").attr("selected",e);if(e){var c=this._cloneWithData(b);b[this.options.hide](this.options.animated,function(){a(this).remove()});c.appendTo(this.selectedList).hide()[this.options.show](this.options.animated);this._applyItemState(c,!0);return c}var d=this.availableList.find("li"),f=this.options.nodeComparator,
c=null,n=b.data("idx"),h=f(b,a(d[n]));if(h)for(;0<=n&&n<d.length;){if(0<h?n++:n--,h!=f(b,a(d[n]))){c=d[0<h?n:n+1];break}}else c=d[n];d=this._cloneWithData(b);c?d.insertBefore(a(c)):d.appendTo(this.availableList);b[this.options.hide](this.options.animated,function(){a(this).remove()});d.hide()[this.options.show](this.options.animated);this._applyItemState(d,!1);return d},_applyItemState:function(a,e){e?(this.options.sortable?a.children("span").addClass("ui-icon-arrowthick-2-n-s").removeClass("ui-helper-hidden").addClass("ui-icon"):
a.children("span").removeClass("ui-icon-arrowthick-2-n-s").addClass("ui-helper-hidden").removeClass("ui-icon"),a.find("a.action span").addClass("ui-icon-minus").removeClass("ui-icon-plus"),this._registerRemoveEvents(a.find("a.action"))):(a.children("span").removeClass("ui-icon-arrowthick-2-n-s").addClass("ui-helper-hidden").removeClass("ui-icon"),a.find("a.action span").addClass("ui-icon-plus").removeClass("ui-icon-minus"),this._registerAddEvents(a.find("a.action")));this._registerDoubleClickEvents(a);
this._registerHoverEvents(a)},_order:function(b){var e=a(this),c=b.children("li");b=c.map(function(){return a(this).text().toLowerCase()});var d=a.trim(e.val().toLowerCase()),f=[];d?(c.hide(),b.each(function(a){-1<this.indexOf(d)&&f.push(a)}),a.each(f,function(){a(c[this]).show()})):c.show()},_registerDoubleClickEvents:function(b){this.options.doubleClickable&&b.dblclick(function(e){0===a(e.target).closest(".action").length&&b.find("a.action").click()})},_registerHoverEvents:function(b){b.removeClass("ui-state-hover");
b.mouseover(function(){a(this).addClass("ui-state-hover")});b.mouseout(function(){a(this).removeClass("ui-state-hover")})},_registerAddEvents:function(b){var e=this;b.click(function(){e._setSelected(a(this).parent(),!0);e.count+=1;e._updateCount();return!1});this.options.sortable&&b.each(function(){a(this).parent().draggable({connectToSortable:e.selectedList,helper:function(){var b=e._cloneWithData(a(this)).width(a(this).width()-50);b.width(a(this).width());return b},appendTo:e.container,containment:e.container,
revert:"invalid"})})},_registerRemoveEvents:function(b){var e=this;b.click(function(){e._setSelected(a(this).parent(),!1);e.count-=1;e._updateCount();return!1})},_registerSearchEvents:function(b){var e=this;b.focus(function(){a(this).addClass("ui-state-active")}).blur(function(){a(this).removeClass("ui-state-active")}).keypress(function(a){if(13==a.keyCode)return!1}).keyup(function(){e._order.apply(this,[e.availableList])})},selectedValues:function(){var b=[];this.selectedList.find("li").each(function(e,
c){var d=a(c).data("optionLink");d&&b.push(d.val())});return b}});a.extend(a.ui.multiselect,{locale:{addAll:"Add all",removeAll:"Remove all",itemsCount:"items selected"}})})(jQuery);
(function(a,b,e){var c=/\r/g,d=/^(button|checkbox|hidden|image|radio|range|reset|submit)$/i,f=["Page_ClientValidate"],n=!1,h="placeholder"in document.createElement("input");a.watermark=a.watermark||{version:"3.1.4",runOnce:!0,options:{className:"watermark",useNative:!0,hideBeforeUnload:!0},hide:function(b){a(b).filter("input:data(watermark),textarea:data(watermark)").each(function(){a.watermark._hide(a(this))})},_hide:function(a,d){var e=a[0],f=(e.value||"").replace(c,""),h=a.data("watermarkText")||
"",l=a.data("watermarkMaxLength")||0,q=a.data("watermarkClass"),n,u;h.length&&f==h&&(e.value="",a.data("watermarkPassword")&&"text"===(a.attr("type")||"")&&(n=a.data("watermarkPassword")||[],u=a.parent()||[],n.length&&u.length&&(u[0].removeChild(a[0]),u[0].appendChild(n[0]),a=n)),l&&(a.attr("maxLength",l),a.removeData("watermarkMaxLength")),d&&(a.attr("autocomplete","off"),b.setTimeout(function(){a.select()},1)));q&&a.removeClass(q)},show:function(b){a(b).filter("input:data(watermark),textarea:data(watermark)").each(function(){a.watermark._show(a(this))})},
_show:function(b){var d=b[0],e=(d.value||"").replace(c,""),f=b.data("watermarkText")||"",h=b.attr("type")||"",l=b.data("watermarkClass"),q,w,u;0!=e.length&&e!=f||b.data("watermarkFocus")?a.watermark._hide(b):(n=!0,b.data("watermarkPassword")&&"password"===h&&(q=b.data("watermarkPassword")||[],w=b.parent()||[],q.length&&w.length&&(w[0].removeChild(b[0]),w[0].appendChild(q[0]),b=q,b.attr("maxLength",f.length),d=b[0])),("text"===h||"search"===h)&&(u=b.attr("maxLength")||0,0<u&&f.length>u&&(b.data("watermarkMaxLength",
u),b.attr("maxLength",f.length))),l&&b.addClass(l),d.value=f)},hideAll:function(){n&&(a.watermark.hide(":watermarkable"),n=!1)},showAll:function(){a.watermark.show(":watermarkable")}};a.fn.watermark=a.fn.watermark||function(d,e){if(!this.length)return this;var f=!1,r="string"==typeof d;return r&&(d=d.replace(c,"")),"object"==typeof e?(f="string"==typeof e.className,e=a.extend({},a.watermark.options,e)):"string"==typeof e?(f=!0,e=a.extend({},a.watermark.options,{className:e})):e=a.watermark.options,
"function"!=typeof e.useNative&&(e.useNative=e.useNative?function(){return!0}:function(){return!1}),this.each(function(){var t=a(this),l,q,n,u;if(t.is(":watermarkable")){if(t.data("watermark"))(r||f)&&(a.watermark._hide(t),r&&t.data("watermarkText",d),f&&t.data("watermarkClass",e.className));else{if(h&&e.useNative.call(this,t)&&"TEXTAREA"!==(t.attr("tagName")||"")){r&&t.attr("placeholder",d);return}t.data("watermarkText",r?d:"");t.data("watermarkClass",e.className);t.data("watermark",1);"password"===
(t.attr("type")||"")?(l=t.wrap("<span>").parent(),q=a(l.html().replace(/type=["']?password["']?/i,'type="text"')),q.data("watermarkText",t.data("watermarkText")),q.data("watermarkClass",t.data("watermarkClass")),q.data("watermark",1),q.attr("maxLength",d.length),q.focus(function(){a.watermark._hide(q,!0)}).bind("dragenter",function(){a.watermark._hide(q)}).bind("dragend",function(){b.setTimeout(function(){q.blur()},1)}),t.blur(function(){a.watermark._show(t)}).bind("dragleave",function(){a.watermark._show(t)}),
q.data("watermarkPassword",t),t.data("watermarkPassword",q)):t.focus(function(){t.data("watermarkFocus",1);a.watermark._hide(t,!0)}).blur(function(){t.data("watermarkFocus",0);a.watermark._show(t)}).bind("dragenter",function(){a.watermark._hide(t)}).bind("dragleave",function(){a.watermark._show(t)}).bind("dragend",function(){b.setTimeout(function(){a.watermark._show(t)},1)}).bind("drop",function(a){var b=t[0];a=a.originalEvent.dataTransfer.getData("Text");(b.value||"").replace(c,"").replace(a,"")===
t.data("watermarkText")&&(b.value=a);t.focus()});this.form&&(n=this.form,u=a(n),u.data("watermarkSubmit")||(u.submit(a.watermark.hideAll),n.submit?(u.data("watermarkSubmit",n.submit),n.submit=function(b,c){return function(){var d=c.data("watermarkSubmit");a.watermark.hideAll();d.apply?d.apply(b,Array.prototype.slice.call(arguments)):d()}}(n,u)):(u.data("watermarkSubmit",1),n.submit=function(b){return function(){a.watermark.hideAll();delete b.submit;b.submit()}}(n))))}a.watermark._show(t)}})};a.watermark.runOnce&&
(a.watermark.runOnce=!1,a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},watermarkable:function(a){var b,c=a.nodeName;return"TEXTAREA"===c?!0:"INPUT"!==c?!1:(b=a.getAttribute("type"),!b||!d.test(b))}}),function(b){a.fn.val=function(){var d=Array.prototype.slice.call(arguments),f;return this.length?d.length?(b.apply(this,d),a.watermark.show(this),this):this.data("watermark")?(f=(this[0].value||
"").replace(c,""),f===(this.data("watermarkText")||"")?"":f):b.apply(this):d.length?this:e}}(a.fn.val),f.length&&a(function(){for(var c,d,e=f.length-1;0<=e;e--)c=f[e],d=b[c],"function"==typeof d&&(b[c]=function(b){return function(){return a.watermark.hideAll(),b.apply(null,Array.prototype.slice.call(arguments))}}(d))}),a(b).bind("beforeunload",function(){a.watermark.options.hideBeforeUnload&&a.watermark.hideAll()}))})(jQuery,window);
(function(a){var b=Math.min,e=Math.max,c=Math.floor,d=function(b){return"string"===a.type(b)},f=function(b,c){if(a.isArray(c))for(var e=0,f=c.length;e<f;e++){var g=c[e];try{d(g)&&(g=eval(g)),a.isFunction(g)&&g(b)}catch(h){}}};a.layout={version:"1.3.rc30.79",revision:.033007,browser:{},effects:{slide:{all:{duration:"fast"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},west:{direction:"left"}},drop:{all:{duration:"slow"},north:{direction:"up"},south:{direction:"down"},east:{direction:"right"},
west:{direction:"left"}},scale:{all:{duration:"fast"}},blind:{},clip:{},explode:{},fade:{},fold:{},puff:{},size:{all:{easing:"swing"}}},config:{optionRootKeys:"effects panes north south west east center".split(" "),allPanes:["north","south","west","east","center"],borderPanes:["north","south","west","east"],oppositeEdge:{north:"south",south:"north",east:"west",west:"east"},offscreenCSS:{left:"-99999px",right:"auto"},offscreenReset:"offscreenReset",hidden:{visibility:"hidden"},visible:{visibility:"visible"},
resizers:{cssReq:{position:"absolute",padding:0,margin:0,fontSize:"1px",textAlign:"left",overflow:"hidden"},cssDemo:{background:"#DDD",border:"none"}},togglers:{cssReq:{position:"absolute",display:"block",padding:0,margin:0,overflow:"hidden",textAlign:"center",fontSize:"1px",cursor:"pointer",zIndex:1},cssDemo:{background:"#AAA"}},content:{cssReq:{position:"relative"},cssDemo:{overflow:"auto",padding:"10px"},cssDemoPane:{overflow:"hidden",padding:0}},panes:{cssReq:{position:"absolute",margin:0},cssDemo:{padding:"10px",
background:"#FFF",border:"1px solid #BBB",overflow:"auto"}},north:{side:"top",sizeType:"Height",dir:"horz",cssReq:{top:0,bottom:"auto",left:0,right:0,width:"auto"}},south:{side:"bottom",sizeType:"Height",dir:"horz",cssReq:{top:"auto",bottom:0,left:0,right:0,width:"auto"}},east:{side:"right",sizeType:"Width",dir:"vert",cssReq:{left:"auto",right:0,top:"auto",bottom:"auto",height:"auto"}},west:{side:"left",sizeType:"Width",dir:"vert",cssReq:{left:0,right:"auto",top:"auto",bottom:"auto",height:"auto"}},
center:{dir:"center",cssReq:{left:"auto",right:"auto",top:"auto",bottom:"auto",height:"auto",width:"auto"}}},callbacks:{},getParentPaneElem:function(b){b=a(b);if(b=b.data("layout")||b.data("parentLayout")){b=b.container;if(b.data("layoutPane"))return b;b=b.closest("."+a.layout.defaults.panes.paneClass);if(b.data("layoutPane"))return b}return null},getParentPaneInstance:function(b){return(b=a.layout.getParentPaneElem(b))?b.data("layoutPane"):null},getParentLayoutInstance:function(b){return(b=a.layout.getParentPaneElem(b))?
b.data("parentLayout"):null},getEventObject:function(a){return"object"===typeof a&&a.stopPropagation?a:null},parsePaneName:function(b){var c=a.layout.getEventObject(b);c&&(c.stopPropagation(),b=a(this).data("layoutEdge"));b&&!/^(west|east|north|south|center)$/.test(b)&&(a.layout.msg('LAYOUT ERROR - Invalid pane-name: "'+b+'"'),b="error");return b},plugins:{draggable:!!a.fn.draggable,effects:{core:!!a.effects,slide:a.effects&&(a.effects.slide||a.effects.effect&&a.effects.effect.slide)}},onCreate:[],
onLoad:[],onReady:[],onDestroy:[],onUnload:[],afterOpen:[],afterClose:[],scrollbarWidth:function(){return window.scrollbarWidth||a.layout.getScrollbarSize("width")},scrollbarHeight:function(){return window.scrollbarHeight||a.layout.getScrollbarSize("height")},getScrollbarSize:function(b){var c=a('<div style="position: absolute; top: -10000px; left: -10000px; width: 100px; height: 100px; overflow: scroll;"></div>').appendTo("body"),d={width:c.css("width")-c[0].clientWidth,height:c.height()-c[0].clientHeight};
c.remove();window.scrollbarWidth=d.width;window.scrollbarHeight=d.height;return b.match(/^(width|height)$/)?d[b]:d},showInvisibly:function(a,b){if(a&&a.length&&(b||"none"===a.css("display"))){var c=a[0].style,c={display:c.display||"",visibility:c.visibility||""};a.css({display:"block",visibility:"hidden"});return c}return{}},getElementDimensions:function(b,c){var d={css:{},inset:{}},f=d.css,g={bottom:0},h=a.layout.cssNum,n=b.offset(),u,v,E;d.offsetLeft=n.left;d.offsetTop=n.top;c||(c={});a.each(["Left",
"Right","Top","Bottom"],function(e,h){u=f["border"+h]=a.layout.borderWidth(b,h);v=f["padding"+h]=a.layout.cssNum(b,"padding"+h);E=h.toLowerCase();d.inset[E]=0<=c[E]?c[E]:v;g[E]=d.inset[E]+u});f.width=b.width();f.height=b.height();f.top=h(b,"top",!0);f.bottom=h(b,"bottom",!0);f.left=h(b,"left",!0);f.right=h(b,"right",!0);d.outerWidth=b.outerWidth();d.outerHeight=b.outerHeight();d.innerWidth=e(0,d.outerWidth-g.left-g.right);d.innerHeight=e(0,d.outerHeight-g.top-g.bottom);d.layoutWidth=b.innerWidth();
d.layoutHeight=b.innerHeight();return d},getElementStyles:function(a,b){var c={},d=a[0].style,e=b.split(","),f=["Top","Bottom","Left","Right"],g=["Color","Style","Width"],h,n,E,A,K,F;for(A=0;A<e.length;A++)if(h=e[A],h.match(/(border|padding|margin)$/))for(K=0;4>K;K++)if(n=f[K],"border"===h)for(F=0;3>F;F++)E=g[F],c[h+n+E]=d[h+n+E];else c[h+n]=d[h+n];else c[h]=d[h];return c},cssWidth:function(b,c){if(0>=c)return 0;var d=a.layout.browser.boxModel?a.support.boxSizing?b.css("boxSizing"):"content-box":
"border-box",f=a.layout.borderWidth,g=a.layout.cssNum,h=c;"border-box"!==d&&(h-=f(b,"Left")+f(b,"Right"));"content-box"===d&&(h-=g(b,"paddingLeft")+g(b,"paddingRight"));return e(0,h)},cssHeight:function(b,c){if(0>=c)return 0;var d=a.layout.browser.boxModel?a.support.boxSizing?b.css("boxSizing"):"content-box":"border-box",f=a.layout.borderWidth,g=a.layout.cssNum,h=c;"border-box"!==d&&(h-=f(b,"Top")+f(b,"Bottom"));"content-box"===d&&(h-=g(b,"paddingTop")+g(b,"paddingBottom"));return e(0,h)},cssNum:function(b,
c,d){b.jquery||(b=a(b));var e=a.layout.showInvisibly(b);c=a.css(b[0],c,!0);d=d&&"auto"==c?c:Math.round(parseFloat(c)||0);b.css(e);return d},borderWidth:function(b,c){b.jquery&&(b=b[0]);var d="border"+c.substr(0,1).toUpperCase()+c.substr(1);return"none"===a.css(b,d+"Style",!0)?0:Math.round(parseFloat(a.css(b,d+"Width",!0))||0)},isMouseOverElem:function(b,c){var d=a(c||this),e=d.offset(),f=e.top,e=e.left,g=e+d.outerWidth(),d=f+d.outerHeight(),h=b.pageX,n=b.pageY;return a.layout.browser.msie&&0>h&&0>
n||h>=e&&h<=g&&n>=f&&n<=d},msg:function(b,c,d,e){a.isPlainObject(b)&&window.debugData?("string"===typeof c?(e=d,d=c):"object"===typeof d&&(e=d,d=null),d=d||"log( <object> )",e=a.extend({sort:!1,returnHTML:!1,display:!1},e),!0===c||e.display?debugData(b,d,e):window.console&&console.log(debugData(b,d,e))):c?alert(b):window.console?console.log(b):(c=a("#layoutLogger"),c.length||(c=a('<div id="layoutLogger" style="position: '+(a.support.fixedPosition?"fixed":"absolute")+'; top: 5px; z-index: 999999; max-width: 25%; overflow: hidden; border: 1px solid #000; border-radius: 5px; background: #FBFBFB; box-shadow: 0 2px 10px rgba(0,0,0,0.3);"><div style="font-size: 13px; font-weight: bold; padding: 5px 10px; background: #F6F6F6; border-radius: 5px 5px 0 0; cursor: move;"><span style="float: right; padding-left: 7px; cursor: pointer;" title="Remove Console" onclick="$(this).closest(\'#layoutLogger\').remove()">X</span>Layout console.log</div><ul style="font-size: 13px; font-weight: none; list-style: none; margin: 0; padding: 0 0 2px;"></ul></div>').appendTo("body"),
c.css("left",a(window).width()-c.outerWidth()-5),a.ui.draggable&&c.draggable({handle:":first-child"})),c.children("ul").append('<li style="padding: 4px 10px; margin: 0; border-top: 1px solid #CCC;">'+b.replace(/\</g,"&lt;").replace(/\>/g,"&gt;")+"</li>"))}};var n=navigator.userAgent.toLowerCase(),h=/(chrome)[ \/]([\w.]+)/.exec(n)||/(webkit)[ \/]([\w.]+)/.exec(n)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(n)||/(msie) ([\w.]+)/.exec(n)||0>n.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(n)||
[],n=h[1]||"",h=h[2]||0,g="msie"===n;a.layout.browser={version:h,safari:"webkit"===n,webkit:"chrome"===n,msie:g,isIE6:g&&6==h,boxModel:!g||!1!==a.support.boxModel};n&&(a.layout.browser[n]=!0);g&&a(function(){a.layout.browser.boxModel=a.support.boxModel});a.layout.defaults={name:"",containerClass:"ui-layout-container",inset:null,scrollToBookmarkOnLoad:!0,resizeWithWindow:!0,resizeWithWindowDelay:200,resizeWithWindowMaxDelay:0,maskPanesEarly:!1,onresizeall_start:null,onresizeall_end:null,onload_start:null,
onload_end:null,onunload_start:null,onunload_end:null,initPanes:!0,showErrorMessages:!0,showDebugMessages:!1,zIndex:null,zIndexes:{pane_normal:0,content_mask:1,resizer_normal:0,pane_sliding:100,pane_animate:1E3,resizer_drag:1E4},errors:{pane:"pane",selector:"selector",addButtonError:"Error Adding Button\nInvalid ",containerMissing:"UI Layout Initialization Error\nThe specified layout-container does not exist.",centerPaneMissing:"UI Layout Initialization Error\nThe center-pane element does not exist.\nThe center-pane is a required element.",
noContainerHeight:"UI Layout Initialization Warning\nThe layout-container \"CONTAINER\" has no height.\nTherefore the layout is 0-height and hence 'invisible'!",callbackError:"UI Layout Callback Error\nThe EVENT callback is not a valid function."},panes:{applyDemoStyles:!1,closable:!0,resizable:!0,slidable:!0,initClosed:!1,initHidden:!1,contentSelector:".ui-layout-content",contentIgnoreSelector:".ui-layout-ignore",findNestedContent:!1,paneClass:"ui-layout-pane",resizerClass:"ui-layout-resizer",togglerClass:"ui-layout-toggler",
buttonClass:"ui-layout-button",minSize:0,maxSize:0,spacing_open:6,spacing_closed:6,togglerLength_open:50,togglerLength_closed:50,togglerAlign_open:"center",togglerAlign_closed:"center",togglerContent_open:"",togglerContent_closed:"",resizerDblClickToggle:!0,autoResize:!0,autoReopen:!0,resizerDragOpacity:1,maskContents:!1,maskObjects:!1,maskZindex:null,resizingGrid:!1,livePaneResizing:!1,liveContentResizing:!1,liveResizingTolerance:1,sliderCursor:"pointer",slideTrigger_open:"click",slideTrigger_close:"mouseleave",
slideDelay_open:300,slideDelay_close:300,hideTogglerOnSlide:!1,preventQuickSlideClose:a.layout.browser.webkit,preventPrematureSlideClose:!1,tips:{Open:"Open",Close:"Close",Resize:"Resize",Slide:"Slide Open",Pin:"Pin",Unpin:"Un-Pin",noRoomToOpen:"Not enough room to show this panel.",minSizeWarning:"Panel has reached its minimum size",maxSizeWarning:"Panel has reached its maximum size"},showOverflowOnHover:!1,enableCursorHotkey:!0,customHotkeyModifier:"SHIFT",fxName:"slide",fxSpeed:null,fxSettings:{},
fxOpacityFix:!0,animatePaneSizing:!1,children:null,containerSelector:"",initChildren:!0,destroyChildren:!0,resizeChildren:!0,triggerEventsOnLoad:!1,triggerEventsDuringLiveResize:!0,onshow_start:null,onshow_end:null,onhide_start:null,onhide_end:null,onopen_start:null,onopen_end:null,onclose_start:null,onclose_end:null,onresize_start:null,onresize_end:null,onsizecontent_start:null,onsizecontent_end:null,onswap_start:null,onswap_end:null,ondrag_start:null,ondrag_end:null},north:{paneSelector:".ui-layout-north",
size:"auto",resizerCursor:"n-resize",customHotkey:""},south:{paneSelector:".ui-layout-south",size:"auto",resizerCursor:"s-resize",customHotkey:""},east:{paneSelector:".ui-layout-east",size:200,resizerCursor:"e-resize",customHotkey:""},west:{paneSelector:".ui-layout-west",size:200,resizerCursor:"w-resize",customHotkey:""},center:{paneSelector:".ui-layout-center",minWidth:0,minHeight:0}};a.layout.optionsMap={layout:"name instanceKey stateManagement effects inset zIndexes errors zIndex scrollToBookmarkOnLoad showErrorMessages maskPanesEarly outset resizeWithWindow resizeWithWindowDelay resizeWithWindowMaxDelay onresizeall onresizeall_start onresizeall_end onload onload_start onload_end onunload onunload_start onunload_end".split(" "),
center:"paneClass contentSelector contentIgnoreSelector findNestedContent applyDemoStyles triggerEventsOnLoad showOverflowOnHover maskContents maskObjects liveContentResizing containerSelector children initChildren resizeChildren destroyChildren onresize onresize_start onresize_end onsizecontent onsizecontent_start onsizecontent_end".split(" "),noDefault:["paneSelector","resizerCursor","customHotkey"]};a.layout.transformData=function(b,c){var d=c?{panes:{},center:{}}:{},e,f,g,h,n,v,E;if("object"!==
typeof b)return d;for(f in b)for(e=d,n=b[f],g=f.split("__"),E=g.length-1,v=0;v<=E;v++)h=g[v],v===E?a.isPlainObject(n)?e[h]=a.layout.transformData(n):e[h]=n:(e[h]||(e[h]={}),e=e[h]);return d};a.layout.backwardCompatibility={map:{applyDefaultStyles:"applyDemoStyles",childOptions:"children",initChildLayout:"initChildren",destroyChildLayout:"destroyChildren",resizeChildLayout:"resizeChildren",resizeNestedLayout:"resizeChildren",resizeWhileDragging:"livePaneResizing",resizeContentWhileDragging:"liveContentResizing",
triggerEventsWhileDragging:"triggerEventsDuringLiveResize",maskIframesOnResize:"maskContents",useStateCookie:"stateManagement.enabled","cookie.autoLoad":"stateManagement.autoLoad","cookie.autoSave":"stateManagement.autoSave","cookie.keys":"stateManagement.stateKeys","cookie.name":"stateManagement.cookie.name","cookie.domain":"stateManagement.cookie.domain","cookie.path":"stateManagement.cookie.path","cookie.expires":"stateManagement.cookie.expires","cookie.secure":"stateManagement.cookie.secure",
noRoomToOpenTip:"tips.noRoomToOpen",togglerTip_open:"tips.Close",togglerTip_closed:"tips.Open",resizerTip:"tips.Resize",sliderTip:"tips.Slide"},renameOptions:function(b){function c(a,d){for(var e=a.split("."),f=e.length-1,g={branch:b,key:e[f]},l=0,h;l<f;l++)h=e[l],g.branch=void 0==g.branch[h]?d?g.branch[h]={}:{}:g.branch[h];return g}var d=a.layout.backwardCompatibility.map,e,f,g,h;for(h in d)e=c(h),g=e.branch[e.key],void 0!==g&&(f=c(d[h],!0),f.branch[f.key]=g,delete e.branch[e.key])},renameAllOptions:function(b){var c=
a.layout.backwardCompatibility.renameOptions;c(b);b.defaults&&("object"!==typeof b.panes&&(b.panes={}),a.extend(!0,b.panes,b.defaults),delete b.defaults);b.panes&&c(b.panes);a.each(a.layout.config.allPanes,function(a,d){b[d]&&c(b[d])});return b}};a.fn.layout=function(g){function h(b){if(!b)return!0;var c=b.keyCode;if(33>c)return!0;var d={38:"north",40:"south",37:"west",39:"east"},e=b.shiftKey,f=b.ctrlKey,g,l,m,p;f&&37<=c&&40>=c&&F[d[c]].enableCursorHotkey?p=d[c]:(f||e)&&a.each(q.borderPanes,function(a,
b){g=F[b];l=g.customHotkey;m=g.customHotkeyModifier;if((e&&"SHIFT"==m||f&&"CTRL"==m||f&&e)&&l&&c===(isNaN(l)||9>=l?l.toUpperCase().charCodeAt(0):l))return p=b,!1});if(!p||!ba[p]||!F[p].closable||z[p].isHidden)return!0;gb(p);b.stopPropagation();return b.returnValue=!1}function r(b){if(Q()){this&&this.tagName&&(b=this);var c;d(b)?c=ba[b]:a(b).data("layoutRole")?c=a(b):a(b).parents().each(function(){if(a(this).data("layoutRole"))return c=a(this),!1});if(c&&c.length){var e=c.data("layoutEdge");b=z[e];
b.cssSaved&&n(e);if(b.isSliding||b.isResizing||b.isClosed)b.cssSaved=!1;else{var f={zIndex:F.zIndexes.resizer_normal+1},g={},l=c.css("overflow"),h=c.css("overflowX"),m=c.css("overflowY");"visible"!=l&&(g.overflow=l,f.overflow="visible");h&&!h.match(/(visible|auto)/)&&(g.overflowX=h,f.overflowX="visible");m&&!m.match(/(visible|auto)/)&&(g.overflowY=h,f.overflowY="visible");b.cssSaved=g;c.css(f);a.each(q.allPanes,function(a,b){b!=e&&n(b)})}}}}function n(b){if(Q()){this&&this.tagName&&(b=this);var c;
d(b)?c=ba[b]:a(b).data("layoutRole")?c=a(b):a(b).parents().each(function(){if(a(this).data("layoutRole"))return c=a(this),!1});if(c&&c.length){b=c.data("layoutEdge");b=z[b];var e=b.cssSaved||{};b.isSliding||b.isResizing||c.css("zIndex",F.zIndexes.pane_normal);c.css(e);b.cssSaved=!1}}}var l=a.layout.browser,q=a.layout.config,w=a.layout.cssWidth,u=a.layout.cssHeight,v=a.layout.getElementDimensions,E=a.layout.getElementStyles,A=a.layout.getEventObject,K=a.layout.parsePaneName,F=a.extend(!0,{},a.layout.defaults);
F.effects=a.extend(!0,{},a.layout.effects);var z={id:"layout"+a.now(),initialized:!1,paneResizing:!1,panesSliding:{},container:{innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0,layoutWidth:0,layoutHeight:0},north:{childIdx:0},south:{childIdx:0},east:{childIdx:0},west:{childIdx:0},center:{childIdx:0}},B={north:null,south:null,east:null,west:null,center:null},H={data:{},set:function(a,b,c){H.clear(a);H.data[a]=setTimeout(b,c)},clear:function(a){var b=H.data;b[a]&&(clearTimeout(b[a]),delete b[a])}},
G=function(b,c,d){var e=F;(e.showErrorMessages&&!d||d&&e.showDebugMessages)&&a.layout.msg(e.name+" / "+b,!1!==c);return!1},I=function(b,c,e){var f=c&&d(c),g=f?z[c]:z,l=f?F[c]:F,h=F.name,q=b+(b.match(/_/)?"":"_end"),m=q.match(/_end$/)?q.substr(0,q.length-4):"",p=l[q]||l[m],r="NC",n=[];f||"boolean"!==a.type(c)||(e=c,c="");if(p)try{d(p)&&(p.match(/,/)?(n=p.split(","),p=eval(n[0])):p=eval(p)),a.isFunction(p)&&(r=n.length?p(n[1]):f?p(c,ba[c],g,l,h):p(ma,g,l,h))}catch(t){G(F.errors.callbackError.replace(/EVENT/,
a.trim((c||"")+" "+q)),!1),"string"===a.type(t)&&string.length&&G("Exception:  "+t,!1)}e||!1===r||(f?(e=ba[c],l=F[c],g=z[c],e.triggerHandler("layoutpane"+q,[c,e,g,l,h]),m&&e.triggerHandler("layoutpane"+m,[c,e,g,l,h])):(ca.triggerHandler("layout"+q,[ma,g,l,h]),m&&ca.triggerHandler("layout"+m,[ma,g,l,h])));f&&"onresize_end"===b&&Hb(c+"",!0);return r},N=function(a){if(!l.mozilla){var b=ba[a];"IFRAME"===z[a].tagName?b.css(q.hidden).css(q.visible):b.find("IFRAME").css(q.hidden).css(q.visible)}},L=function(a){var b=
ba[a];a=q[a].dir;b={minWidth:1001-w(b,1E3),minHeight:1001-u(b,1E3)};"horz"===a&&(b.minSize=b.minHeight);"vert"===a&&(b.minSize=b.minWidth);return b},x=function(b,c,e){var f=b;d(b)?f=ba[b]:b.jquery||(f=a(b));b=u(f,c);f.css({height:b,visibility:"visible"});0<b&&0<f.innerWidth()?e&&f.data("autoHidden")&&(f.show().data("autoHidden",!1),l.mozilla||f.css(q.hidden).css(q.visible)):e&&!f.data("autoHidden")&&f.hide().data("autoHidden",!0)},S=function(b,e,f){f||(f=q[b].dir);d(e)&&e.match(/%/)&&(e="100%"===
e?-1:parseInt(e,10)/100);if(0===e)return 0;if(1<=e)return parseInt(e,10);var g=F,l=0;"horz"==f?l=ja.innerHeight-(ba.north?g.north.spacing_open:0)-(ba.south?g.south.spacing_open:0):"vert"==f&&(l=ja.innerWidth-(ba.west?g.west.spacing_open:0)-(ba.east?g.east.spacing_open:0));if(-1===e)return l;if(0<e)return c(l*e);if("center"==b)return 0;f="horz"===f?"height":"width";g=ba[b];b="height"===f?Ca[b]:!1;var l=a.layout.showInvisibly(g),h=g.css(f),m=b?b.css(f):0;g.css(f,"auto");b&&b.css(f,"auto");e="height"===
f?g.outerHeight():g.outerWidth();g.css(f,h).css(l);b&&b.css(f,m);return e},D=function(a,b){var c=ba[a],d=F[a],e=z[a],f=b?d.spacing_open:0,d=b?d.spacing_closed:0;return!c||e.isHidden?0:e.isClosed||e.isSliding&&b?d:"horz"===q[a].dir?c.outerHeight()+f:c.outerWidth()+f},J=function(a,c){if(Q()){var d=F[a],f=z[a],g=q[a],l=g.dir;g.sizeType.toLowerCase();var g=void 0!=c?c:f.isSliding,h=d.spacing_open,m=q.oppositeEdge[a],p=z[m],r=ba[m],n=!r||!1===p.isVisible||p.isSliding?0:"horz"==l?r.outerHeight():r.outerWidth(),
m=(!r||p.isHidden?0:F[m][!1!==p.isClosed?"spacing_closed":"spacing_open"])||0,p="horz"==l?ja.innerHeight:ja.innerWidth,r=L("center"),r="horz"==l?e(F.center.minHeight,r.minHeight):e(F.center.minWidth,r.minWidth),g=p-h-(g?0:S("center",r,l)+n+m),l=f.minSize=e(S(a,d.minSize),L(a).minSize),g=f.maxSize=b(d.maxSize?S(a,d.maxSize):1E5,g),f=f.resizerPosition={},h=ja.inset.top,n=ja.inset.left,m=ja.innerWidth,p=ja.innerHeight,d=d.spacing_open;switch(a){case "north":f.min=h+l;f.max=h+g;break;case "west":f.min=
n+l;f.max=n+g;break;case "south":f.min=h+p-g-d;f.max=h+p-l-d;break;case "east":f.min=n+m-g-d,f.max=n+m-l-d}}},V=function(b,c){var d=a(b),e=d.data("layoutRole"),f=d.data("layoutEdge"),g=F[f][e+"Class"],f="-"+f,l=d.hasClass(g+"-closed")?"-closed":"-open",h="-closed"===l?"-open":"-closed",l=g+"-hover "+(g+f+"-hover ")+(g+l+"-hover ")+(g+f+l+"-hover ");c&&(l+=g+h+"-hover "+(g+f+h+"-hover "));"resizer"==e&&d.hasClass(g+"-sliding")&&(l+=g+"-sliding-hover "+(g+f+"-sliding-hover "));return a.trim(l)},Y=function(b,
c){var d=a(c||this);b&&"toggler"===d.data("layoutRole")&&b.stopPropagation();d.addClass(V(d))},W=function(b,c){var d=a(c||this);d.removeClass(V(d,!0))},U=function(b){b=a(this).data("layoutEdge");var c=z[b];c.isClosed||c.isResizing||z.paneResizing||(a.fn.disableSelection&&a("body").disableSelection(),F.maskPanesEarly&&Fb(b,{resizing:!0}))},M=function(b,c){var d=c||this,e=a(d).data("layoutEdge"),f=e+"ResizerLeave";H.clear(e+"_openSlider");H.clear(f);c?z.paneResizing||(a.fn.enableSelection&&a("body").enableSelection(),
F.maskPanesEarly&&hb()):H.set(f,function(){M(b,d)},200)},Q=function(){return z.initialized||z.creatingLayout?!0:X()},X=function(b){var c=F;if(!ca.is(":visible"))return!b&&l.webkit&&"BODY"===ca[0].tagName&&setTimeout(function(){X(!0)},50),!1;if(!y("center").length)return G(c.errors.centerPaneMissing);z.creatingLayout=!0;a.extend(ja,v(ca,c.inset));za();c.scrollToBookmarkOnLoad&&(b=self.location,b.hash&&b.replace(b.hash));ma.hasParentLayout?c.resizeWithWindow=!1:c.resizeWithWindow&&a(window).bind("resize."+
Ja,ia);delete z.creatingLayout;z.initialized=!0;f(ma,a.layout.onReady);I("onload_end");return!0},ea=function(b,c){var d=K.call(this,b),e=ba[d];if(e){var f=Ca[d],g=z[d],l=F[d],h=F.stateManagement||{},l=c?l.children=c:l.children;if(a.isPlainObject(l))l=[l];else if(!l||!a.isArray(l))return;a.each(l,function(b,c){a.isPlainObject(c)&&(c.containerSelector?e.find(c.containerSelector):f||e).each(function(){var b=a(this),e=b.data("layout");if(!e){O({container:b,options:c},g);if(h.includeChildren&&z.stateData[d]){var e=
(z.stateData[d].children||{})[c.instanceKey],f=c.stateManagement||(c.stateManagement={autoLoad:!0});!0===f.autoLoad&&e&&(f.autoSave=!1,f.includeChildren=!0,f.autoLoad=a.extend(!0,{},e))}(e=b.layout(c))&&aa(d,e)}})})}},O=function(a,b){var c=a.container,d=a.options,e=d.stateManagement,f=d.instanceKey||c.data("layoutInstanceKey");f||(f=(e&&e.cookie?e.cookie.name:"")||d.name);f=f?f.replace(/[^\w-]/gi,"_").replace(/_{2,}/g,"_"):"layout"+ ++b.childIdx;d.instanceKey=f;c.data("layoutInstanceKey",f);return f},
aa=function(b,c){var d=ba[b],e=B[b],f=z[b];a.isPlainObject(e)&&(a.each(e,function(a,b){b.destroyed&&delete e[a]}),a.isEmptyObject(e)&&(e=B[b]=null));c||e||(c=d.data("layout"));c&&(c.hasParentLayout=!0,d=c.options,O(c,f),e||(e=B[b]={}),e[d.instanceKey]=c.container.data("layout"));ma[b].children=B[b];c||ea(b)},ia=function(){var a=F,b=Number(a.resizeWithWindowDelay);10>b&&(b=100);H.clear("winResize");H.set("winResize",function(){H.clear("winResize");H.clear("winResizeRepeater");var b=v(ca,a.inset);b.innerWidth===
ja.innerWidth&&b.innerHeight===ja.innerHeight||Lb()},b);H.data.winResizeRepeater||ta()},ta=function(){var a=Number(F.resizeWithWindowMaxDelay);0<a&&H.set("winResizeRepeater",function(){ta();Lb()},a)},da=function(){I("onunload_start");f(ma,a.layout.onUnload);I("onunload_end")},ha=function(b){b=b?b.split(","):q.borderPanes;a.each(b,function(b,c){var d=F[c];if(d.enableCursorHotkey||d.customHotkey)return a(document).bind("keydown."+Ja,h),!1})},Ba=function(){function b(c){var d=F[c],e=F.panes;d.fxSettings||
(d.fxSettings={});e.fxSettings||(e.fxSettings={});a.each(["_open","_close","_size"],function(b,f){var g="fxName"+f,l="fxSpeed"+f,h="fxSettings"+f,q=d[g]=d[g]||e[g]||d.fxName||e.fxName||"none",m=a.effects&&(a.effects[q]||a.effects.effect&&a.effects.effect[q]);"none"!==q&&F.effects[q]&&m||(q=d[g]="none");q=F.effects[q]||{};g=q.all||null;q=q[c]||null;d[l]=d[l]||e[l]||d.fxSpeed||e.fxSpeed||null;d[h]=a.extend(!0,{},g,q,e.fxSettings,d.fxSettings,e[h],d[h])});delete d.fxName;delete d.fxSpeed;delete d.fxSettings}
var c,d,f,l,h,p;g=a.layout.transformData(g,!0);g=a.layout.backwardCompatibility.renameAllOptions(g);if(!a.isEmptyObject(g.panes)){c=a.layout.optionsMap.noDefault;l=0;for(h=c.length;l<h;l++)f=c[l],delete g.panes[f];c=a.layout.optionsMap.layout;l=0;for(h=c.length;l<h;l++)f=c[l],delete g.panes[f]}c=a.layout.optionsMap.layout;var r=a.layout.config.optionRootKeys;for(f in g)l=g[f],0>a.inArray(f,r)&&0>a.inArray(f,c)&&(g.panes[f]||(g.panes[f]=a.isPlainObject(l)?a.extend(!0,{},l):l),delete g[f]);a.extend(!0,
F,g);a.each(q.allPanes,function(e,l){q[l]=a.extend(!0,{},q.panes,q[l]);d=F.panes;p=F[l];if("center"===l)for(c=a.layout.optionsMap.center,e=0,h=c.length;e<h;e++)f=c[e],g.center[f]||!g.panes[f]&&p[f]||(p[f]=d[f]);else p=F[l]=a.extend(!0,{},d,p),b(l),p.resizerClass||(p.resizerClass="ui-layout-resizer"),p.togglerClass||(p.togglerClass="ui-layout-toggler");p.paneClass||(p.paneClass="ui-layout-pane")});l=g.zIndex;r=F.zIndexes;0<l&&(r.pane_normal=l,r.content_mask=e(l+1,r.content_mask),r.resizer_normal=e(l+
2,r.resizer_normal));delete F.panes},y=function(a){a=F[a].paneSelector;if("#"===a.substr(0,1))return ca.find(a).eq(0);var b=ca.children(a).eq(0);return b.length?b:ca.children("form:first").children(a).eq(0)},za=function(b){K(b);a.each(q.allPanes,function(a,b){pa(b,!0)});Ra();a.each(q.borderPanes,function(a,b){ba[b]&&z[b].isVisible&&(J(b),Ab(b))});Aa("center");a.each(q.allPanes,function(a,b){C(b)})},pa=function(a,c){if(c||Q()){var d=F[a],f=z[a],g=q[a],l=g.dir,h="center"===a,m={},p=ba[a],v,I;p?Za(a,
!1,!0,!1):Ca[a]=!1;p=ba[a]=y(a);if(p.length){p.data("layoutCSS")||p.data("layoutCSS",E(p,"position,top,left,bottom,right,width,height,overflow,zIndex,display,backgroundColor,padding,margin,border"));ma[a]={name:a,pane:ba[a],content:Ca[a],options:F[a],state:z[a],children:B[a]};p.data({parentLayout:ma,layoutPane:ma[a],layoutEdge:a,layoutRole:"pane"}).css(g.cssReq).css("zIndex",F.zIndexes.pane_normal).css(d.applyDemoStyles?g.cssDemo:{}).addClass(d.paneClass+" "+d.paneClass+"-"+a).bind("mouseenter."+
Ja,Y).bind("mouseleave."+Ja,W);g={hide:"",show:"",toggle:"",close:"",open:"",slideOpen:"",slideClose:"",slideToggle:"",size:"sizePane",sizePane:"sizePane",sizeContent:"",sizeHandles:"",enableClosable:"",disableClosable:"",enableSlideable:"",disableSlideable:"",enableResizable:"",disableResizable:"",swapPanes:"swapPanes",swap:"swapPanes",move:"swapPanes",removePane:"removePane",remove:"removePane",createChildren:"",resizeChildren:"",resizeAll:"resizeAll",resizeLayout:"resizeAll"};for(I in g)p.bind("layoutpane"+
I.toLowerCase()+"."+Ja,ma[g[I]||I]);Ka(a,!1);h||(v=f.size=S(a,d.size),h=S(a,d.minSize)||1,I=S(a,d.maxSize)||1E5,0<v&&(v=e(b(v,I),h)),f.autoResize=d.autoResize,f.isClosed=!1,f.isSliding=!1,f.isResizing=!1,f.isHidden=!1,f.pins||(f.pins=[]));f.tagName=p[0].tagName;f.edge=a;f.noRoom=!1;f.isVisible=!0;pb(a);"horz"===l?m.height=u(p,v):"vert"===l&&(m.width=w(p,v));p.css(m);"horz"!=l&&Aa(a,!0);z.initialized&&(Ra(a),ha(a));d.initClosed&&d.closable&&!d.initHidden?qa(a,!0,!0):d.initHidden||d.initClosed?ib(a):
f.noRoom||p.css("display","block");p.css("visibility","visible");d.showOverflowOnHover&&p.hover(r,n);z.initialized&&C(a)}else ba[a]=!1}},C=function(a){var b=ba[a],c=z[a],d=F[a];b&&(b.data("layout")&&aa(a,b.data("layout")),c.isVisible&&(z.initialized?Lb():Sa(a),d.triggerEventsOnLoad?I("onresize_end",a):Hb(a,!0)),d.initChildren&&d.children&&ea(a))},pb=function(b){b=b?b.split(","):q.borderPanes;a.each(b,function(a,b){var c=ba[b],d=oa[b],e=z[b],f=q[b].side,g={};if(c){switch(b){case "north":g.top=ja.inset.top;
g.left=ja.inset.left;g.right=ja.inset.right;break;case "south":g.bottom=ja.inset.bottom;g.left=ja.inset.left;g.right=ja.inset.right;break;case "west":g.left=ja.inset.left;break;case "east":g.right=ja.inset.right}c.css(g);d&&e.isClosed?d.css(f,ja.inset[f]):d&&!e.isHidden&&d.css(f,ja.inset[f]+D(b))}})},Ra=function(b){b=b?b.split(","):q.borderPanes;a.each(b,function(b,c){var d=ba[c];oa[c]=!1;La[c]=!1;if(d){var d=F[c],e=z[c],f="#"===d.paneSelector.substr(0,1)?d.paneSelector.substr(1):"",g=d.resizerClass,
l=d.togglerClass,h="-"+c,m=ma[c],p=m.resizer=oa[c]=a("<div></div>"),m=m.toggler=d.closable?La[c]=a("<div></div>"):!1;!e.isVisible&&d.slidable&&p.attr("title",d.tips.Slide).css("cursor",d.sliderCursor);p.attr("id",f?f+"-resizer":"").data({parentLayout:ma,layoutPane:ma[c],layoutEdge:c,layoutRole:"resizer"}).css(q.resizers.cssReq).css("zIndex",F.zIndexes.resizer_normal).css(d.applyDemoStyles?q.resizers.cssDemo:{}).addClass(g+" "+g+h).hover(Y,W).hover(U,M).appendTo(ca);d.resizerDblClickToggle&&p.bind("dblclick."+
Ja,gb);m&&(m.attr("id",f?f+"-toggler":"").data({parentLayout:ma,layoutPane:ma[c],layoutEdge:c,layoutRole:"toggler"}).css(q.togglers.cssReq).css(d.applyDemoStyles?q.togglers.cssDemo:{}).addClass(l+" "+l+h).hover(Y,W).bind("mouseenter",U).appendTo(p),d.togglerContent_open&&a("<span>"+d.togglerContent_open+"</span>").data({layoutEdge:c,layoutRole:"togglerContent"}).data("layoutRole","togglerContent").data("layoutEdge",c).addClass("content content-open").css("display","none").appendTo(m),d.togglerContent_closed&&
a("<span>"+d.togglerContent_closed+"</span>").data({layoutEdge:c,layoutRole:"togglerContent"}).addClass("content content-closed").css("display","none").appendTo(m),Yb(c));Xa(c);e.isVisible?Ta(c):(Ha(c),tb(c,!0))}});na()},Ka=function(a,b){if(Q()){var c=F[a],d=c.contentSelector,e=ma[a],f=ba[a],g;d&&(g=e.content=Ca[a]=c.findNestedContent?f.find(d).eq(0):f.children(d).eq(0));g&&g.length?(g.data("layoutRole","content"),g.data("layoutCSS")||g.data("layoutCSS",E(g,"height")),g.css(q.content.cssReq),c.applyDemoStyles&&
(g.css(q.content.cssDemo),f.css(q.content.cssDemoPane)),f.css("overflowX").match(/(scroll|auto)/)&&f.css("overflow","hidden"),z[a].content={},!1!==b&&Sa(a)):e.content=Ca[a]=!1}},Xa=function(b){var c=a.layout.plugins.draggable;b=b?b.split(","):q.borderPanes;a.each(b,function(b,e){var f=F[e];if(!c||!ba[e]||!f.resizable)return f.resizable=!1,!0;var g=z[e],l=F.zIndexes,h=q[e],m="horz"==h.dir?"top":"left",p=oa[e],r=f.resizerClass,n=0,t,u,v=r+"-drag",w=r+"-"+e+"-drag",x=r+"-dragging",A=r+"-"+e+"-dragging",
G=r+"-dragging-limit",E=r+"-"+e+"-dragging-limit",B=!1;g.isClosed||p.attr("title",f.tips.Resize).css("cursor",f.resizerCursor);p.draggable({containment:ca[0],axis:"horz"==h.dir?"y":"x",delay:0,distance:1,grid:f.resizingGrid,helper:"clone",opacity:f.resizerDragOpacity,addClasses:!1,zIndex:l.resizer_drag,start:function(b,c){f=F[e];g=z[e];u=f.livePaneResizing;if(!1===I("ondrag_start",e))return!1;g.isResizing=!0;z.paneResizing=e;H.clear(e+"_closeSlider");J(e);t=g.resizerPosition;n=c.position[m];p.addClass(v+
" "+w);B=!1;a("body").disableSelection();Fb(e,{resizing:!0})},drag:function(a,b){B||(b.helper.addClass(x+" "+A).css({right:"auto",bottom:"auto"}).children().css("visibility","hidden"),B=!0,g.isSliding&&ba[e].css("zIndex",l.pane_sliding));var c=0;b.position[m]<t.min?(b.position[m]=t.min,c=-1):b.position[m]>t.max&&(b.position[m]=t.max,c=1);c?(b.helper.addClass(G+" "+E),window.defaultStatus=0<c&&e.match(/(north|west)/)||0>c&&e.match(/(south|east)/)?f.tips.maxSizeWarning:f.tips.minSizeWarning):(b.helper.removeClass(G+
" "+E),window.defaultStatus="");u&&Math.abs(b.position[m]-n)>=f.liveResizingTolerance&&(n=b.position[m],d(a,b,e))},stop:function(b,c){a("body").enableSelection();window.defaultStatus="";p.removeClass(v+" "+w);g.isResizing=!1;z.paneResizing=!1;d(b,c,e,!0)}})});var d=function(a,b,c,d){var e=b.position,f=q[c];a=F[c];b=z[c];var g;switch(c){case "north":g=e.top;break;case "west":g=e.left;break;case "south":g=ja.layoutHeight-e.top-a.spacing_open;break;case "east":g=ja.layoutWidth-e.left-a.spacing_open}g-=
ja.inset[f.side];d?(!1!==I("ondrag_end",c)&&la(c,g,!1,!0),hb(!0),b.isSliding&&Fb(c,{resizing:!0})):Math.abs(g-b.size)<a.liveResizingTolerance||(la(c,g,!1,!0),bb.each(Kb))}},Kb=function(){var b=a(this),c=b.data("layoutMask"),c=z[c];"IFRAME"==c.tagName&&c.isVisible&&b.css({top:c.offsetTop,left:c.offsetLeft,width:c.outerWidth,height:c.outerHeight})},Fb=function(b,c){var d=q[b],e=["center"],f=F.zIndexes,g=a.extend({objectsOnly:!1,animation:!1,resizing:!0,sliding:z[b].isSliding},c),l,h;g.resizing&&e.push(b);
g.sliding&&e.push(q.oppositeEdge[b]);"horz"===d.dir&&(e.push("west"),e.push("east"));a.each(e,function(a,b){h=z[b];l=F[b];h.isVisible&&(l.maskObjects||!g.objectsOnly&&l.maskContents)&&Ga(b).each(function(){Kb.call(this);this.style.zIndex=h.isSliding?f.pane_sliding+1:f.pane_normal+1;this.style.display="block"})})},hb=function(b){if(b||!z.paneResizing)bb.hide();else if(!b&&!a.isEmptyObject(z.panesSliding)){b=bb.length-1;for(var c,d;0<=b;b--)d=bb.eq(b),c=d.data("layoutMask"),F[c].maskObjects||d.hide()}},
Ga=function(b){for(var c=a([]),d,e=0,f=bb.length;e<f;e++)d=bb.eq(e),d.data("layoutMask")===b&&(c=c.add(d));if(c.length)return c;c=ba[b];d=z[b];var e=F[b],f=F.zIndexes,g=a([]),l,h,q,m,p;if(e.maskContents||e.maskObjects)for(p=0;p<(e.maskObjects?2:1);p++)l=e.maskObjects&&0==p,h=document.createElement(l?"iframe":"div"),q=a(h).data("layoutMask",b),h.className="ui-layout-mask ui-layout-mask-"+b,m=h.style,m.display="block",m.position="absolute",m.background="#FFF",l&&(h.frameborder=0,h.src="about:blank",
m.opacity=0,m.filter="Alpha(Opacity='0')",m.border=0),"IFRAME"==d.tagName?(m.zIndex=f.pane_normal+1,ca.append(h)):(q.addClass("ui-layout-mask-inside-pane"),m.zIndex=e.maskZindex||f.content_mask,m.top=0,m.left=0,m.width="100%",m.height="100%",c.append(h)),g=g.add(h),bb=bb.add(h);return g},Za=function(b,c,d,e){if(Q()){b=K.call(this,b);var f=ba[b],g=Ca[b],l=oa[b],h=La[b];f&&a.isEmptyObject(f.data())&&(f=!1);g&&a.isEmptyObject(g.data())&&(g=!1);l&&a.isEmptyObject(l.data())&&(l=!1);h&&a.isEmptyObject(h.data())&&
(h=!1);f&&f.stop(!0,!0);var q=F[b],m=B[b],p=a.isPlainObject(m)&&!a.isEmptyObject(m);e=void 0!==e?e:q.destroyChildren;p&&e&&(a.each(m,function(a,b){b.destroyed||b.destroy(!0);b.destroyed&&delete m[a]}),a.isEmptyObject(m)&&(m=B[b]=null,p=!1));f&&c&&!p?f.remove():f&&f[0]&&(c=q.paneClass,e=c+"-"+b,c=[c,c+"-open",c+"-closed",c+"-sliding",e,e+"-open",e+"-closed",e+"-sliding"],a.merge(c,V(f,!0)),f.removeClass(c.join(" ")).removeData("parentLayout").removeData("layoutPane").removeData("layoutRole").removeData("layoutEdge").removeData("autoHidden").unbind("."+
Ja),p&&g?(g.width(g.width()),a.each(m,function(a,b){b.resizeAll()})):g&&g.css(g.data("layoutCSS")).removeData("layoutCSS").removeData("layoutRole"),f.data("layout")||f.css(f.data("layoutCSS")).removeData("layoutCSS"));h&&h.remove();l&&l.remove();ma[b]=ba[b]=Ca[b]=oa[b]=La[b]=!1;d||Lb()}},ab=function(a){var b=ba[a],c=b[0].style;F[a].useOffscreenClose?(b.data(q.offscreenReset)||b.data(q.offscreenReset,{left:c.left,right:c.right}),b.css(q.offscreenCSS)):b.hide().removeData(q.offscreenReset)},Gb=function(a){var b=
ba[a];a=F[a];var c=q.offscreenCSS,d=b.data(q.offscreenReset),e=b[0].style;b.show().removeData(q.offscreenReset);a.useOffscreenClose&&d&&(e.left==c.left&&(e.left=d.left),e.right==c.right&&(e.right=d.right))},ib=function(a,b){if(Q()){var c=K.call(this,a),d=F[c],e=z[c],f=oa[c];!ba[c]||e.isHidden||z.initialized&&!1===I("onhide_start",c)||(e.isSliding=!1,delete z.panesSliding[c],f&&f.hide(),!z.initialized||e.isClosed?(e.isClosed=!0,e.isHidden=!0,e.isVisible=!1,z.initialized||ab(c),Aa("horz"===q[c].dir?
"":"center"),(z.initialized||d.triggerEventsOnLoad)&&I("onhide_end",c)):(e.isHiding=!0,qa(c,!1,b)))}},rb=function(a,b,c,d){if(Q()){a=K.call(this,a);var e=z[a];ba[a]&&e.isHidden&&!1!==I("onshow_start",a)&&(e.isShowing=!0,e.isSliding=!1,delete z.panesSliding[a],!1===b?qa(a,!0):sb(a,!1,c,d))}},gb=function(a,b){if(Q()){var c=A(a),d=K.call(this,a),e=z[d];c&&c.stopImmediatePropagation();e.isHidden?rb(d):e.isClosed?sb(d,!!b):qa(d)}},Wa=function(a,b){var c=z[a];ab(a);c.isClosed=!0;c.isVisible=!1;b&&Ha(a)},
qa=function(a,b,c,d){function e(){h.isMoving=!1;tb(f,!0);var a=q.oppositeEdge[f];z[a].noRoom&&(J(a),Ab(a));d||!z.initialized&&!l.triggerEventsOnLoad||(p||I("onclose_end",f),p&&I("onshow_end",f),r&&I("onhide_end",f))}var f=K.call(this,a);if(!z.initialized&&ba[f])Wa(f,!0);else if(Q()){var g=ba[f],l=F[f],h=z[f],m,p,r;ca.queue(function(a){if(!g||!l.closable&&!h.isShowing&&!h.isHiding||!b&&h.isClosed&&!h.isShowing)return a();var d=!h.isShowing&&!1===I("onclose_start",f);p=h.isShowing;r=h.isHiding;delete h.isShowing;
delete h.isHiding;if(d)return a();m=!c&&!h.isClosed&&"none"!=l.fxName_close;h.isMoving=!0;h.isClosed=!0;h.isVisible=!1;r?h.isHidden=!0:p&&(h.isHidden=!1);h.isSliding?xb(f,!1):Aa("horz"===q[f].dir?"":"center",!1);Ha(f);m?(qc(f,!0),g.hide(l.fxName_close,l.fxSettings_close,l.fxSpeed_close,function(){qc(f,!1);h.isClosed&&e();a()})):(ab(f),e(),a())})}},Ha=function(b){if(oa[b]){var c=oa[b],d=La[b],e=F[b],f=q[b].side,g=e.resizerClass,l=e.togglerClass,h="-"+b;c.css(f,ja.inset[f]).removeClass(g+"-open "+g+
h+"-open").removeClass(g+"-sliding "+g+h+"-sliding").addClass(g+"-closed "+g+h+"-closed");e.resizable&&a.layout.plugins.draggable&&c.draggable("disable").removeClass("ui-state-disabled").css("cursor","default").attr("title","");d&&(d.removeClass(l+"-open "+l+h+"-open").addClass(l+"-closed "+l+h+"-closed").attr("title",e.tips.Open),d.children(".content-open").hide(),d.children(".content-closed").css("display","block"));Bc(b,!1);z.initialized&&na()}},sb=function(a,b,c,d){function e(){h.isMoving=!1;
N(f);h.isSliding||Aa("vert"==q[f].dir?"center":"",!1);Ta(f)}if(Q()){var f=K.call(this,a),g=ba[f],l=F[f],h=z[f],m,p;ca.queue(function(a){if(!g||!l.resizable&&!l.closable&&!h.isShowing||h.isVisible&&!h.isSliding)return a();if(h.isHidden&&!h.isShowing)a(),rb(f,!0);else{h.autoResize&&h.size!=l.size?jb(f,l.size,!0,!0,!0):J(f,b);var q=I("onopen_start",f);if("abort"===q)return a();"NC"!==q&&J(f,b);if(h.minSize>h.maxSize)return Bc(f,!1),!d&&l.tips.noRoomToOpen&&alert(l.tips.noRoomToOpen),a();b?xb(f,!0):h.isSliding?
xb(f,!1):l.slidable&&tb(f,!1);h.noRoom=!1;Ab(f);p=h.isShowing;delete h.isShowing;m=!c&&h.isClosed&&"none"!=l.fxName_open;h.isMoving=!0;h.isVisible=!0;h.isClosed=!1;p&&(h.isHidden=!1);m?(qc(f,!0),g.show(l.fxName_open,l.fxSettings_open,l.fxSpeed_open,function(){qc(f,!1);h.isVisible&&e();a()})):(Gb(f),e(),a())}})}},Ta=function(b,c){var d=ba[b],e=oa[b],f=La[b],g=F[b],l=z[b],h=q[b].side,m=g.resizerClass,p=g.togglerClass,r="-"+b;e.css(h,ja.inset[h]+D(b)).removeClass(m+"-closed "+m+r+"-closed").addClass(m+
"-open "+m+r+"-open");l.isSliding?e.addClass(m+"-sliding "+m+r+"-sliding"):e.removeClass(m+"-sliding "+m+r+"-sliding");W(0,e);g.resizable&&a.layout.plugins.draggable?e.draggable("enable").css("cursor",g.resizerCursor).attr("title",g.tips.Resize):l.isSliding||e.css("cursor","default");f&&(f.removeClass(p+"-closed "+p+r+"-closed").addClass(p+"-open "+p+r+"-open").attr("title",g.tips.Close),W(0,f),f.children(".content-closed").hide(),f.children(".content-open").css("display","block"));Bc(b,!l.isSliding);
a.extend(l,v(d));z.initialized&&(na(),Sa(b,!0));!c&&(z.initialized||g.triggerEventsOnLoad)&&d.is(":visible")&&(I("onopen_end",b),l.isShowing&&I("onshow_end",b),z.initialized&&I("onresize_end",b))},Ya=function(a){function b(){e.isClosed?e.isMoving||sb(d,!0):xb(d,!0)}if(Q()){var c=A(a),d=K.call(this,a),e=z[d];a=F[d].slideDelay_open;c&&c.stopImmediatePropagation();e.isClosed&&c&&"mouseenter"===c.type&&0<a?H.set(d+"_openSlider",b,a):b()}},ra=function(b){function c(){g.isClosed?xb(f,!1):g.isMoving||qa(f)}
if(Q()){var d=A(b),f=K.call(this,b);b=F[f];var g=z[f],l=g.isMoving?1E3:300;g.isClosed||g.isResizing||("click"===b.slideTrigger_close?c():b.preventQuickSlideClose&&g.isMoving||b.preventPrematureSlideClose&&d&&a.layout.isMouseOverElem(d,ba[f])||(d?H.set(f+"_closeSlider",c,e(b.slideDelay_close,l)):c()))}},qc=function(a,b){var c=ba[a],d=z[a],e=F[a],f=F.zIndexes;b?(Fb(a,{animation:!0,objectsOnly:!0}),c.css({zIndex:f.pane_animate}),"south"==a?c.css({top:ja.inset.top+ja.innerHeight-c.outerHeight()}):"east"==
a&&c.css({left:ja.inset.left+ja.innerWidth-c.outerWidth()})):(hb(),c.css({zIndex:d.isSliding?f.pane_sliding:f.pane_normal}),"south"==a?c.css({top:"auto"}):"east"!=a||c.css("left").match(/\-99999/)||c.css({left:"auto"}),l.msie&&e.fxOpacityFix&&"slide"!=e.fxName_open&&c.css("filter")&&1==c.css("opacity")&&c[0].style.removeAttribute("filter"))},tb=function(a,b){var c=F[a],d=oa[a],e=c.slideTrigger_open.toLowerCase();if(d&&(!b||c.slidable)){e.match(/mouseover/)?e=c.slideTrigger_open="mouseenter":e.match(/(click|dblclick|mouseenter)/)||
(e=c.slideTrigger_open="click");if(c.resizerDblClickToggle&&e.match(/click/))d[b?"unbind":"bind"]("dblclick."+Ja,gb);d[b?"bind":"unbind"](e+"."+Ja,Ya).css("cursor",b?c.sliderCursor:"default").attr("title",b?c.tips.Slide:"")}},xb=function(a,b){function c(b){H.clear(a+"_closeSlider");b.stopPropagation()}var d=F[a],e=z[a],f=F.zIndexes,g=d.slideTrigger_close.toLowerCase(),l=b?"bind":"unbind",h=ba[a],m=oa[a];H.clear(a+"_closeSlider");b?(e.isSliding=!0,z.panesSliding[a]=!0,tb(a,!1)):(e.isSliding=!1,delete z.panesSliding[a]);
h.css("zIndex",b?f.pane_sliding:f.pane_normal);m.css("zIndex",b?f.pane_sliding+2:f.resizer_normal);g.match(/(click|mouseleave)/)||(g=d.slideTrigger_close="mouseleave");m[l](g,ra);"mouseleave"===g&&(h[l]("mouseleave."+Ja,ra),m[l]("mouseenter."+Ja,c),h[l]("mouseenter."+Ja,c));b?"click"!==g||d.resizable||(m.css("cursor",b?d.sliderCursor:"default"),m.attr("title",b?d.tips.Close:"")):H.clear(a+"_closeSlider")},Ab=function(b,c,d,e){c=F[b];var f=z[b],g=q[b],l=ba[b],h=oa[b],m="vert"===g.dir,p=!1;if("center"===
b||m&&f.noVerticalRoom)(p=0<=f.maxHeight)&&f.noRoom?(Gb(b),h&&h.show(),f.isVisible=!0,f.noRoom=!1,m&&(f.noVerticalRoom=!1),N(b)):p||f.noRoom||(ab(b),h&&h.hide(),f.isVisible=!1,f.noRoom=!0);"center"!==b&&(f.minSize<=f.maxSize?(f.size>f.maxSize?jb(b,f.maxSize,d,!0,e):f.size<f.minSize?jb(b,f.minSize,d,!0,e):h&&f.isVisible&&l.is(":visible")&&(d=f.size+ja.inset[g.side],a.layout.cssNum(h,g.side)!=d&&h.css(g.side,d)),f.noRoom&&(f.wasOpen&&c.closable?c.autoReopen?sb(b,!1,!0,!0):f.noRoom=!1:rb(b,f.wasOpen,
!0,!0))):f.noRoom||(f.noRoom=!0,f.wasOpen=!f.isClosed&&!f.isSliding,f.isClosed||(c.closable?qa(b,!0,!0):ib(b,!0))))},la=function(a,b,c,d,e){if(Q()){a=K.call(this,a);var f=F[a],g=z[a];e=e||f.livePaneResizing&&!g.isResizing;g.autoResize=!1;jb(a,b,c,d,e)}},jb=function(c,d,f,g,l){function h(){for(var b="width"===A?n.outerWidth():n.outerHeight(),b=[{pane:m,count:1,target:d,actual:b,correct:d===b,attempt:d,cssSize:L}],c=b[0],g={},p="Inaccurate size after resizing the "+m+"-pane.";!c.correct;){g={pane:m,
count:c.count+1,target:d};g.attempt=c.actual>d?e(0,c.attempt-(c.actual-d)):e(0,c.attempt+(d-c.actual));g.cssSize=("horz"==q[m].dir?u:w)(ba[m],g.attempt);n.css(A,g.cssSize);g.actual="width"==A?n.outerWidth():n.outerHeight();g.correct=d===g.actual;1===b.length&&(G(p,!1,!0),G(c,!1,!0));G(g,!1,!0);if(3<b.length)break;b.push(g);c=b[b.length-1]}r.size=d;a.extend(r,v(n));r.isVisible&&n.is(":visible")&&(t&&t.css(x,d+ja.inset[x]),Sa(m));!f&&!E&&z.initialized&&r.isVisible&&I("onresize_end",m);f||(r.isSliding||
Aa("horz"==q[m].dir?"":"center",E,l),na());c=q.oppositeEdge[m];d<N&&z[c].noRoom&&(J(c),Ab(c,!1,f));1<b.length&&G(p+"\nSee the Error Console for details.",!0,!0)}if(Q()){var m=K.call(this,c),p=F[m],r=z[m],n=ba[m],t=oa[m],x=q[m].side,A=q[m].sizeType.toLowerCase(),E=r.isResizing&&!p.triggerEventsDuringLiveResize,B=!0!==g&&p.animatePaneSizing,N,L;ca.queue(function(c){J(m);N=r.size;d=S(m,d);d=e(d,S(m,p.minSize));d=b(d,r.maxSize);if(d<r.minSize)c(),Ab(m,!1,f);else{if(!l&&d===N)return c();r.newSize=d;!f&&
z.initialized&&r.isVisible&&I("onresize_start",m);L=("horz"==q[m].dir?u:w)(ba[m],d);if(B&&n.is(":visible")){var g=a.layout.effects.size[m]||a.layout.effects.size.all,g=p.fxSettings_size.easing||g.easing,t=F.zIndexes,x={};x[A]=L+"px";r.isMoving=!0;n.css({zIndex:t.pane_animate}).show().animate(x,p.fxSpeed_size,g,function(){n.css({zIndex:r.isSliding?t.pane_sliding:t.pane_normal});r.isMoving=!1;delete r.newSize;h();c()})}else n.css(A,L),delete r.newSize,n.is(":visible")?h():(r.size=d,a.extend(r,v(n))),
c()}})}},Aa=function(b,c,d){b=(b?b:"east,west,center").split(",");a.each(b,function(b,f){if(ba[f]){var g=F[f],h=z[f],m=ba[f],q=!0,p={},r=a.layout.showInvisibly(m),n={top:D("north",!0),bottom:D("south",!0),left:D("west",!0),right:D("east",!0),width:0,height:0};n.width=ja.innerWidth-n.left-n.right;n.height=ja.innerHeight-n.bottom-n.top;n.top+=ja.inset.top;n.bottom+=ja.inset.bottom;n.left+=ja.inset.left;n.right+=ja.inset.right;a.extend(h,v(m));if("center"===f){if(!d&&h.isVisible&&n.width===h.outerWidth&&
n.height===h.outerHeight)return m.css(r),!0;a.extend(h,L(f),{maxWidth:n.width,maxHeight:n.height});p=n;h.newWidth=p.width;h.newHeight=p.height;p.width=w(m,p.width);p.height=u(m,p.height);q=0<=p.width&&0<=p.height;if(!z.initialized&&g.minWidth>n.width){var g=g.minWidth-h.outerWidth,n=F.east.minSize||0,t=F.west.minSize||0,x=z.east.size,A=z.west.size,G=x,E=A;0<g&&z.east.isVisible&&x>n&&(G=e(x-n,x-g),g-=x-G);0<g&&z.west.isVisible&&A>t&&(E=e(A-t,A-g),g-=A-E);if(0===g){x&&x!=n&&jb("east",G,!0,!0,d);A&&
A!=t&&jb("west",E,!0,!0,d);Aa("center",c,d);m.css(r);return}}}else{h.isVisible&&!h.noVerticalRoom&&a.extend(h,v(m),L(f));if(!d&&!h.noVerticalRoom&&n.height===h.outerHeight)return m.css(r),!0;p.top=n.top;p.bottom=n.bottom;h.newSize=n.height;p.height=u(m,n.height);h.maxHeight=p.height;q=0<=h.maxHeight;q||(h.noVerticalRoom=!0)}q?(!c&&z.initialized&&I("onresize_start",f),m.css(p),"center"!==f&&na(f),!h.noRoom||h.isClosed||h.isHidden||Ab(f),h.isVisible&&(a.extend(h,v(m)),z.initialized&&Sa(f))):!h.noRoom&&
h.isVisible&&Ab(f);m.css(r);delete h.newSize;delete h.newWidth;delete h.newHeight;if(!h.isVisible)return!0;"center"===f&&(h=l.isIE6||!l.boxModel,ba.north&&(h||"IFRAME"==z.north.tagName)&&ba.north.css("width",w(ba.north,ja.innerWidth)),ba.south&&(h||"IFRAME"==z.south.tagName)&&ba.south.css("width",w(ba.south,ja.innerWidth)));!c&&z.initialized&&I("onresize_end",f)}})},Lb=function(b){K(b);if(ca.is(":visible"))if(z.initialized){if(!0===b&&a.isPlainObject(F.outset)&&ca.css(F.outset),a.extend(ja,v(ca,F.inset)),
ja.outerHeight){!0===b&&pb();if(!1===I("onresizeall_start"))return!1;var c,d,e;a.each(["south","north","east","west"],function(a,b){ba[b]&&(d=F[b],e=z[b],e.autoResize&&e.size!=d.size?jb(b,d.size,!0,!0,!0):(J(b),Ab(b,!1,!0,!0)))});Aa("",!0,!0);na();a.each(q.allPanes,function(a,b){(c=ba[b])&&z[b].isVisible&&I("onresize_end",b)});I("onresizeall_end")}}else X()},Hb=function(b,c){var d=K.call(this,b);F[d].resizeChildren&&(c||aa(d),d=B[d],a.isPlainObject(d)&&a.each(d,function(a,b){b.destroyed||b.resizeAll()}))},
Sa=function(b,c){if(Q()){var d=K.call(this,b),d=d?d.split(","):q.allPanes;a.each(d,function(a,b){function d(a){return e(m.css.paddingBottom,parseInt(a.css("marginBottom"),10)||0)}function f(){var a=F[b].contentIgnoreSelector,a=l.nextAll().not(".ui-layout-mask").not(a||":lt(0)"),c=a.filter(":visible"),e=c.filter(":last");q={top:l[0].offsetTop,height:l.outerHeight(),numFooters:a.length,hiddenFooters:a.length-c.length,spaceBelow:0};q.spaceAbove=q.top;q.bottom=q.top+q.height;q.spaceBelow=e.length?e[0].offsetTop+
e.outerHeight()-q.bottom+d(e):d(l)}var g=ba[b],l=Ca[b],h=F[b],m=z[b],q=m.content;if(!g||!l||!g.is(":visible"))return!0;if(!l.length&&(Ka(b,!1),!l))return;if(!1!==I("onsizecontent_start",b)){if(!m.isMoving&&!m.isResizing||h.liveContentResizing||c||void 0==q.top)f(),0<q.hiddenFooters&&"hidden"===g.css("overflow")&&(g.css("overflow","visible"),f(),g.css("overflow","hidden"));g=m.innerHeight-(q.spaceAbove-m.css.paddingTop)-(q.spaceBelow-m.css.paddingBottom);l.is(":visible")&&q.height==g||(x(l,g,!0),q.height=
g);z.initialized&&I("onsizecontent_end",b)}})}},na=function(b){b=(b=K.call(this,b))?b.split(","):q.borderPanes;a.each(b,function(b,e){var f=F[e],g=z[e],l=ba[e],h=oa[e],m=La[e],p;if(l&&h){var r=q[e].dir,n=g.isClosed?"_closed":"_open",t=f["spacing"+n],v=f["togglerAlign"+n],n=f["togglerLength"+n],x;if(0===t)h.hide();else{g.noRoom||g.isHidden||h.show();"horz"===r?(x=ja.innerWidth,g.resizerLength=x,l=a.layout.cssNum(l,"left"),h.css({width:w(h,x),height:u(h,t),left:-9999<l?l:ja.inset.left})):(x=l.outerHeight(),
g.resizerLength=x,h.css({height:u(h,x),width:w(h,t),top:ja.inset.top+D("north",!0)}));W(f,h);if(m){if(0===n||g.isSliding&&f.hideTogglerOnSlide){m.hide();return}m.show();if(!(0<n)||"100%"===n||n>x)n=x,v=0;else if(d(v))switch(v){case "top":case "left":v=0;break;case "bottom":case "right":v=x-n;break;default:v=c((x-n)/2)}else l=parseInt(v,10),v=0<=v?l:x-n+l;if("horz"===r){var A=w(m,n);m.css({width:A,height:u(m,t),left:v,top:0});m.children(".content").each(function(){p=a(this);p.css("marginLeft",c((A-
p.outerWidth())/2))})}else{var I=u(m,n);m.css({height:I,width:w(m,t),top:v,left:0});m.children(".content").each(function(){p=a(this);p.css("marginTop",c((I-p.outerHeight())/2))})}W(0,m)}z.initialized||!f.initHidden&&!g.isHidden||(h.hide(),m&&m.hide())}}})},Yb=function(a){if(Q()){var b=K.call(this,a);a=La[b];var c=F[b];a&&(c.closable=!0,a.bind("click."+Ja,function(a){a.stopPropagation();gb(b)}).css("visibility","visible").css("cursor","pointer").attr("title",z[b].isClosed?c.tips.Open:c.tips.Close).show())}},
Bc=function(b,c){a.layout.plugins.buttons&&a.each(z[b].pins,function(d,e){a.layout.buttons.setPinState(ma,a(e),b,c)})},ca=a(this).eq(0);if(!ca.length)return G(F.errors.containerMissing);if(ca.data("layoutContainer")&&ca.data("layout"))return ca.data("layout");var ba={},Ca={},oa={},La={},bb=a([]),ja=z.container,Ja=z.id,ma={options:F,state:z,container:ca,panes:ba,contents:Ca,resizers:oa,togglers:La,hide:ib,show:rb,toggle:gb,open:sb,close:qa,slideOpen:Ya,slideClose:ra,slideToggle:function(a){a=K.call(this,
a);gb(a,!0)},setSizeLimits:J,_sizePane:jb,sizePane:la,sizeContent:Sa,swapPanes:function(b,c){function d(b){var c=ba[b],e=Ca[b];return c?{pane:b,P:c?c[0]:!1,C:e?e[0]:!1,state:a.extend(!0,{},z[b]),options:a.extend(!0,{},F[b])}:!1}function f(b,c){if(b){var d=b.P,g=b.C,l=b.pane,h=q[c],p=a.extend(!0,{},z[c]),r=F[c],n={resizerCursor:r.resizerCursor};a.each(["fxName","fxSpeed","fxSettings"],function(a,b){n[b+"_open"]=r[b+"_open"];n[b+"_close"]=r[b+"_close"];n[b+"_size"]=r[b+"_size"]});ba[c]=a(d).data({layoutPane:ma[c],
layoutEdge:c}).css(q.hidden).css(h.cssReq);Ca[c]=g?a(g):!1;F[c]=a.extend(!0,{},b.options,n);z[c]=a.extend(!0,{},b.state);d.className=d.className.replace(new RegExp(r.paneClass+"-"+l,"g"),r.paneClass+"-"+c);Ra(c);h.dir!=q[l].dir?(d=m[c]||0,J(c),d=e(d,z[c].minSize),la(c,d,!0,!0)):oa[c].css(h.side,ja.inset[h.side]+(z[c].isVisible?D(c):0));b.state.isVisible&&!p.isVisible?Ta(c,!0):(Ha(c),tb(c,!0));b=null}}if(Q()){var g=K.call(this,b);z[g].edge=c;z[c].edge=g;if(!1===I("onswap_start",g)||!1===I("onswap_start",
c))z[g].edge=g,z[c].edge=c;else{var l=d(g),h=d(c),m={};m[g]=l?l.state.size:0;m[c]=h?h.state.size:0;ba[g]=!1;ba[c]=!1;z[g]={};z[c]={};La[g]&&La[g].remove();La[c]&&La[c].remove();oa[g]&&oa[g].remove();oa[c]&&oa[c].remove();oa[g]=oa[c]=La[g]=La[c]=!1;f(l,c);f(h,g);l=h=m=null;ba[g]&&ba[g].css(q.visible);ba[c]&&ba[c].css(q.visible);Lb();I("onswap_end",g);I("onswap_end",c)}}},showMasks:Fb,hideMasks:hb,initContent:Ka,addPane:pa,removePane:Za,createChildren:ea,refreshChildren:aa,enableClosable:Yb,disableClosable:function(a,
b){if(Q()){var c=K.call(this,a),d=La[c];d&&(F[c].closable=!1,z[c].isClosed&&sb(c,!1,!0),d.unbind("."+Ja).css("visibility",b?"hidden":"visible").css("cursor","default").attr("title",""))}},enableSlidable:function(a){if(Q()){a=K.call(this,a);var b=oa[a];b&&b.data("draggable")&&(F[a].slidable=!0,z[a].isClosed&&tb(a,!0))}},disableSlidable:function(a){if(Q()){a=K.call(this,a);var b=oa[a];b&&(F[a].slidable=!1,z[a].isSliding?qa(a,!1,!0):(tb(a,!1),b.css("cursor","default").attr("title",""),W(null,b[0])))}},
enableResizable:function(a){if(Q()){a=K.call(this,a);var b=oa[a],c=F[a];b&&b.data("draggable")&&(c.resizable=!0,b.draggable("enable"),z[a].isClosed||b.css("cursor",c.resizerCursor).attr("title",c.tips.Resize))}},disableResizable:function(a){if(Q()){a=K.call(this,a);var b=oa[a];b&&b.data("draggable")&&(F[a].resizable=!1,b.draggable("disable").css("cursor","default").attr("title",""),W(null,b[0]))}},allowOverflow:r,resetOverflow:n,destroy:function(b,c){a(window).unbind("."+Ja);a(document).unbind("."+
Ja);"object"===typeof b?K(b):c=b;ca.clearQueue().removeData("layout").removeData("layoutContainer").removeClass(F.containerClass).unbind("."+Ja);bb.remove();a.each(q.allPanes,function(a,b){Za(b,!1,!0,c)});ca.data("layoutCSS")&&!ca.data("layoutRole")&&ca.css(ca.data("layoutCSS")).removeData("layoutCSS");"BODY"===ja.tagName&&(ca=a("html")).data("layoutCSS")&&ca.css(ca.data("layoutCSS")).removeData("layoutCSS");f(ma,a.layout.onDestroy);da();for(var d in ma)d.match(/^(container|options)$/)||delete ma[d];
ma.destroyed=!0;return ma},initPanes:Q,resizeAll:Lb,runCallbacks:I,hasParentLayout:!1,children:B,north:!1,south:!1,west:!1,east:!1,center:!1};return"cancel"===function(){Ba();var b=F,c=z;c.creatingLayout=!0;f(ma,a.layout.onCreate);if(!1===I("onload_start"))return"cancel";var d=ca[0],e=a("html"),g=ja.tagName=d.tagName,h=ja.id=d.id,m=ja.className=d.className,d=F,q=d.name,p={},r=ca.data("parentLayout"),n=ca.data("layoutEdge"),t=r&&n,u=a.layout.cssNum,w;ja.selector=ca.selector.split(".slice")[0];ja.ref=
(d.name?d.name+" layout / ":"")+g+(h?"#"+h:m?".["+m+"]":"");ja.isBody="BODY"===g;t||ja.isBody||(g=ca.closest("."+a.layout.defaults.panes.paneClass),r=g.data("parentLayout"),n=g.data("layoutEdge"),t=r&&n);ca.data({layout:ma,layoutContainer:Ja}).addClass(d.containerClass);g={destroy:"",initPanes:"",resizeAll:"resizeAll",resize:"resizeAll"};for(q in g)ca.bind("layout"+q.toLowerCase()+"."+Ja,ma[g[q]||q]);t&&(ma.hasParentLayout=!0,r.refreshChildren(n,ma));ca.data("layoutCSS")||(ja.isBody?(ca.data("layoutCSS",
a.extend(E(ca,"position,margin,padding,border"),{height:ca.css("height"),overflow:ca.css("overflow"),overflowX:ca.css("overflowX"),overflowY:ca.css("overflowY")})),e.data("layoutCSS",a.extend(E(e,"padding"),{height:"auto",overflow:e.css("overflow"),overflowX:e.css("overflowX"),overflowY:e.css("overflowY")}))):ca.data("layoutCSS",E(ca,"position,margin,padding,border,top,bottom,left,right,width,height,overflow,overflowX,overflowY")));try{p={overflow:"hidden",overflowX:"hidden",overflowY:"hidden"};ca.css(p);
d.inset&&!a.isPlainObject(d.inset)&&(w=parseInt(d.inset,10)||0,d.inset={top:w,bottom:w,left:w,right:w});if(ja.isBody)d.outset?a.isPlainObject(d.outset)||(w=parseInt(d.outset,10)||0,d.outset={top:w,bottom:w,left:w,right:w}):d.outset={top:u(e,"paddingTop"),bottom:u(e,"paddingBottom"),left:u(e,"paddingLeft"),right:u(e,"paddingRight")},e.css(p).css({height:"100%",border:"none",padding:0,margin:0}),l.isIE6?(ca.css({width:"100%",height:"100%",border:"none",padding:0,margin:0,position:"relative"}),d.inset||
(d.inset=v(ca).inset)):(ca.css({width:"auto",height:"auto",margin:0,position:"absolute"}),ca.css(d.outset)),a.extend(ja,v(ca,d.inset));else{var x=ca.css("position");x&&x.match(/(fixed|absolute|relative)/)||ca.css("position","relative");ca.is(":visible")&&(a.extend(ja,v(ca,d.inset)),1>ja.innerHeight&&G(d.errors.noContainerHeight.replace(/CONTAINER/,ja.ref)))}u(ca,"minWidth")&&ca.parent().css("overflowX","auto");u(ca,"minHeight")&&ca.parent().css("overflowY","auto")}catch(A){}ha();a(window).bind("unload."+
Ja,da);f(ma,a.layout.onLoad);b.initPanes&&X();delete c.creatingLayout;return z.initialized}()?null:ma}})(jQuery);
(function(a){a.ui||(a.ui={});a.ui.cookie={acceptsCookies:!!navigator.cookieEnabled,read:function(b){for(var e=document.cookie,e=e?e.split(";"):[],c,d=0,f=e.length;d<f;d++)if(c=a.trim(e[d]).split("="),c[0]==b)return decodeURIComponent(c[1]);return null},write:function(b,e,c){var d="",f="",n=!1;c=c||{};var h=c.expires||null,g=a.type(h);"date"===g?f=h:"string"===g&&0<h&&(h=parseInt(h,10),g="number");"number"===g&&(f=new Date,0<h?f.setDate(f.getDate()+h):(f.setFullYear(1970),n=!0));f&&(d+=";expires="+
f.toUTCString());c.path&&(d+=";path="+c.path);c.domain&&(d+=";domain="+c.domain);c.secure&&(d+=";secure");document.cookie=b+"="+(n?"":encodeURIComponent(e))+d},clear:function(b){a.ui.cookie.write(b,"",{expires:-1})}};a.cookie||(a.cookie=function(b,e,c){var d=a.ui.cookie;if(null===e)d.clear(b);else{if(void 0===e)return d.read(b);d.write(b,e,c)}});a.layout.plugins.stateManagement=!0;a.layout.config.optionRootKeys.push("stateManagement");a.layout.defaults.stateManagement={enabled:!1,autoSave:!0,autoLoad:!0,
animateLoad:!0,includeChildren:!0,stateKeys:"north.size,south.size,east.size,west.size,north.isClosed,south.isClosed,east.isClosed,west.isClosed,north.isHidden,south.isHidden,east.isHidden,west.isHidden",cookie:{name:"",domain:"",path:"",expires:"",secure:!1}};a.layout.optionsMap.layout.push("stateManagement");a.layout.state={saveCookie:function(b,e,c){var d=b.options,f=d.stateManagement;c=a.extend(!0,{},f.cookie,c||null);b=b.state.stateData=b.readState(e||f.stateKeys);a.ui.cookie.write(c.name||d.name||
"Layout",a.layout.state.encodeJSON(b),c);return a.extend(!0,{},b)},deleteCookie:function(b){b=b.options;a.ui.cookie.clear(b.stateManagement.cookie.name||b.name||"Layout")},readCookie:function(b){b=b.options;return(b=a.ui.cookie.read(b.stateManagement.cookie.name||b.name||"Layout"))?a.layout.state.decodeJSON(b):{}},loadCookie:function(b){var e=a.layout.state.readCookie(b);e&&(b.state.stateData=a.extend(!0,{},e),b.loadState(e));return e},loadState:function(b,e,c){if(a.isPlainObject(e)&&!a.isEmptyObject(e))if(e=
b.state.stateData=a.layout.transformData(e),c=a.extend({animateLoad:!1,includeChildren:b.options.stateManagement.includeChildren},c),b.state.initialized){var d=!c.animateLoad,f,n,h,g;a.each(a.layout.config.borderPanes,function(c,l){r=e[l];a.isPlainObject(r)&&(s=r.size,f=r.initClosed,n=r.initHidden,ar=r.autoResize,h=b.state[l],g=h.isVisible,ar&&(h.autoResize=ar),g||b._sizePane(l,s,!1,!1,!1),!0===n?b.hide(l,d):!0===f?b.close(l,!1,d):!1===f?b.open(l,!1,d):!1===n&&b.show(l,!1,d),g&&b._sizePane(l,s,!1,
!1,d))});if(c.includeChildren){var m,p;a.each(b.children,function(b,c){(m=e[b]?e[b].children:0)&&c&&a.each(c,function(a,b){p=m[a];b&&p&&b.loadState(p)})})}}else{var r=a.extend(!0,{},e);a.each(a.layout.config.allPanes,function(a,b){r[b]&&delete r[b].children});a.extend(!0,b.options,r)}},readState:function(b,e){"string"===a.type(e)&&(e={keys:e});e||(e={});var c=b.options.stateManagement,d=e.includeChildren,d=void 0!==d?d:c.includeChildren,c=e.stateKeys||c.stateKeys,f={isClosed:"initClosed",isHidden:"initHidden"},
n=b.state,h=a.layout.config.allPanes,g={},m,p,r,t,l,q;a.isArray(c)&&(c=c.join(","));for(var c=c.replace(/__/g,".").split(","),w=0,u=c.length;w<u;w++)m=c[w].split("."),p=m[0],m=m[1],0>a.inArray(p,h)||(r=n[p][m],void 0!=r&&("isClosed"==m&&n[p].isSliding&&(r=!0),(g[p]||(g[p]={}))[f[m]?f[m]:m]=r));d&&a.each(h,function(c,d){l=b.children[d];t=n.stateData[d];a.isPlainObject(l)&&!a.isEmptyObject(l)&&(q=g[d]||(g[d]={}),q.children||(q.children={}),a.each(l,function(b,c){c.state.initialized?q.children[b]=a.layout.state.readState(c):
t&&t.children&&t.children[b]&&(q.children[b]=a.extend(!0,{},t.children[b]))}))});return g},encodeJSON:function(b){function e(b){var d=[],f=0,n,h,g,m=a.isArray(b);for(n in b)h=b[n],g=typeof h,"string"==g?h='"'+h+'"':"object"==g&&(h=e(h)),d[f++]=(m?"":'"'+n+'":')+h;return(m?"[":"{")+d.join(",")+(m?"]":"}")}return e(b)},decodeJSON:function(b){try{return a.parseJSON?a.parseJSON(b):window.eval("("+b+")")||{}}catch(e){return{}}},_create:function(b){var e=a.layout.state,c=b.options.stateManagement;a.extend(b,
{readCookie:function(){return e.readCookie(b)},deleteCookie:function(){e.deleteCookie(b)},saveCookie:function(a,c){return e.saveCookie(b,a,c)},loadCookie:function(){return e.loadCookie(b)},loadState:function(a,c){e.loadState(b,a,c)},readState:function(a){return e.readState(b,a)},encodeJSON:e.encodeJSON,decodeJSON:e.decodeJSON});b.state.stateData={};if(c.autoLoad)if(a.isPlainObject(c.autoLoad))a.isEmptyObject(c.autoLoad)||b.loadState(c.autoLoad);else if(c.enabled)if(a.isFunction(c.autoLoad)){var d=
{};try{d=c.autoLoad(b,b.state,b.options,b.options.name||"")}catch(f){}d&&a.isPlainObject(d)&&!a.isEmptyObject(d)&&b.loadState(d)}else b.loadCookie()},_unload:function(b){var e=b.options.stateManagement;if(e.enabled&&e.autoSave)if(a.isFunction(e.autoSave))try{e.autoSave(b,b.state,b.options,b.options.name||"")}catch(c){}else b.saveCookie()}};a.layout.onCreate.push(a.layout.state._create);a.layout.onUnload.push(a.layout.state._unload);a.layout.plugins.buttons=!0;a.layout.defaults.autoBindCustomButtons=
!1;a.layout.optionsMap.layout.push("autoBindCustomButtons");a.layout.buttons={init:function(b){var e=b.options.name||"",c;a.each("toggle open close pin toggle-slide open-slide".split(" "),function(d,f){a.each(a.layout.config.borderPanes,function(d,h){a(".ui-layout-button-"+f+"-"+h).each(function(){c=a(this).data("layoutName")||a(this).attr("layoutName");void 0!=c&&c!==e||b.bindButton(this,f,h)})})})},get:function(b,e,c,d){var f=a(e);b=b.options;var n=b.errors.addButtonError;f.length?0>a.inArray(c,
a.layout.config.borderPanes)?(a.layout.msg(n+" "+b.errors.pane+": "+c,!0),f=a("")):(e=b[c].buttonClass+"-"+d,f.addClass(e+" "+e+"-"+c).data("layoutName",b.name)):a.layout.msg(n+" "+b.errors.selector+": "+e,!0);return f},bind:function(b,e,c,d){var f=a.layout.buttons;switch(c.toLowerCase()){case "toggle":f.addToggle(b,e,d);break;case "open":f.addOpen(b,e,d);break;case "close":f.addClose(b,e,d);break;case "pin":f.addPin(b,e,d);break;case "toggle-slide":f.addToggle(b,e,d,!0);break;case "open-slide":f.addOpen(b,
e,d,!0)}return b},addToggle:function(b,e,c,d){a.layout.buttons.get(b,e,c,"toggle").click(function(a){b.toggle(c,!!d);a.stopPropagation()});return b},addOpen:function(b,e,c,d){a.layout.buttons.get(b,e,c,"open").attr("title",b.options[c].tips.Open).click(function(a){b.open(c,!!d);a.stopPropagation()});return b},addClose:function(b,e,c){a.layout.buttons.get(b,e,c,"close").attr("title",b.options[c].tips.Close).click(function(a){b.close(c);a.stopPropagation()});return b},addPin:function(b,e,c){var d=a.layout.buttons,
f=d.get(b,e,c,"pin");if(f.length){var n=b.state[c];f.click(function(e){d.setPinState(b,a(this),c,n.isSliding||n.isClosed);n.isSliding||n.isClosed?b.open(c):b.close(c);e.stopPropagation()});d.setPinState(b,f,c,!n.isClosed&&!n.isSliding);n.pins.push(e)}return b},setPinState:function(a,e,c,d){var f=e.attr("pin");if(!f||d!==("down"==f)){a=a.options[c];var f=a.buttonClass+"-pin",n=f+"-"+c;c=f+"-up "+n+"-up";f=f+"-down "+n+"-down";e.attr("pin",d?"down":"up").attr("title",d?a.tips.Unpin:a.tips.Pin).removeClass(d?
c:f).addClass(d?f:c)}},syncPinBtns:function(b,e,c){a.each(b.state[e].pins,function(d,f){a.layout.buttons.setPinState(b,a(f),e,c)})},_load:function(b){var e=a.layout.buttons;a.extend(b,{bindButton:function(a,c,n){return e.bind(b,a,c,n)},addToggleBtn:function(a,c,n){return e.addToggle(b,a,c,n)},addOpenBtn:function(a,c,n){return e.addOpen(b,a,c,n)},addCloseBtn:function(a,c){return e.addClose(b,a,c)},addPinBtn:function(a,c){return e.addPin(b,a,c)}});for(var c=0;4>c;c++)b.state[a.layout.config.borderPanes[c]].pins=
[];b.options.autoBindCustomButtons&&e.init(b)},_unload:function(a){}};a.layout.onLoad.push(a.layout.buttons._load);a.layout.plugins.browserZoom=!0;a.layout.defaults.browserZoomCheckInterval=1E3;a.layout.optionsMap.layout.push("browserZoomCheckInterval");a.layout.browserZoom={_init:function(b){!1!==a.layout.browserZoom.ratio()&&a.layout.browserZoom._setTimer(b)},_setTimer:function(b){if(!b.destroyed){var e=b.options,c=b.state,d=b.hasParentLayout?5E3:Math.max(e.browserZoomCheckInterval,100);setTimeout(function(){if(!b.destroyed&&
e.resizeWithWindow){var d=a.layout.browserZoom.ratio();d!==c.browserZoom&&(c.browserZoom=d,b.resizeAll());a.layout.browserZoom._setTimer(b)}},d)}},ratio:function(){function b(a,b){return(parseInt(a,10)/parseInt(b,10)*100).toFixed()}var e=window,c=screen,d=document,f=d.documentElement||d.body,n=a.layout.browser,h=n.version,g,m,p;return n.msie&&8<h||!n.msie?!1:c.deviceXDPI&&c.systemXDPI?b(c.deviceXDPI,c.systemXDPI):n.webkit&&(g=d.body.getBoundingClientRect)?b(g.left-g.right,d.body.offsetWidth):n.webkit&&
(m=e.outerWidth)?b(m,e.innerWidth):(m=c.width)&&(p=f.clientWidth)?b(m,p):!1}};a.layout.onReady.push(a.layout.browserZoom._init)})(jQuery);
(function(a){function b(b,c){var d=document.createElementNS("http://www.w3.org/2000/svg",b||"svg");c&&a.each(c,function(a,b){d.setAttributeNS(null,a,b)});return a(d)}a.fn.activity=function(b){this.each(function(){var d=a(this),f=d.data("activity");f&&(clearInterval(f.data("interval")),f.remove(),d.removeData("activity"));if(!1!==b){b=a.extend({color:d.css("color")},a.fn.activity.defaults,b);var f=e(d,b).css("position","absolute").prependTo(b.outside?"body":d),p=d.outerHeight()-f.height(),r=d.outerWidth()-
f.width(),p="top"==b.valign?b.padding:"bottom"==b.valign?p-b.padding:Math.floor(p/2),r="left"==b.align?b.padding:"right"==b.align?r-b.padding:Math.floor(r/2),n=d.offset();b.outside?f.css({top:n.top+"px",left:n.left+"px"}):(p-=f.offset().top-n.top,r-=f.offset().left-n.left);f.css({marginTop:p+"px",marginLeft:r+"px"});c(f,b.segments,Math.round(10/b.speed)/10);d.data("activity",f)}});return this};a.fn.activity.defaults={segments:12,space:3,length:7,width:4,speed:1.2,align:"center",valign:"center",padding:4};
a.fn.activity.getOpacity=function(a,b){var c=a.steps||a.segments-1,d=void 0!==a.opacity?a.opacity:1/c;return 1-Math.min(b,c)*(1-d)/c};var e=function(){return a("<div>").addClass("busy")},c=function(){};if(document.createElementNS&&document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect)if(e=function(c,d){for(var e=2*d.width+d.space,f=e+d.length+Math.ceil(d.width/2)+1,r=b().width(2*f).height(2*f),n=b("g",{"stroke-width":d.width,"stroke-linecap":"round",stroke:d.color}).appendTo(b("g",
{transform:"translate("+f+","+f+")"}).appendTo(r)),l=0;l<d.segments;l++)n.append(b("line",{x1:0,y1:e,x2:0,y2:e+d.length,transform:"rotate("+360/d.segments*l+", 0, 0)",opacity:a.fn.activity.getOpacity(d,l)}));return a("<div>").append(r).width(2*f).height(2*f)},void 0!==document.createElement("div").style.WebkitAnimationName)var d={},c=function(a,b,c){if(!d[b]){for(var e="spin"+b,f="@-webkit-keyframes "+e+" {",n=0;n<b;n++)var l=Math.round(1E5/b*n)/1E3,q=Math.round(1E5/b*(n+1)-1)/1E3,w="% { -webkit-transform:rotate("+
Math.round(360/b*n)+"deg); }\n",f=f+(l+w+q+w);document.styleSheets[0].insertRule(f+"100% { -webkit-transform:rotate(100deg); }\n}");d[b]=e}a.css("-webkit-animation",d[b]+" "+c+"s linear infinite")};else c=function(a,b,c){var d=0,e=a.find("g g").get(0);a.data("interval",setInterval(function(){e.setAttributeNS(null,"transform","rotate("+ ++d%b*(360/b)+")")},1E3*c/b))};else{var f=a("<shape>").css("behavior","url(#default#VML)").appendTo("body");if(f.get(0).adj){var n=document.createStyleSheet();a.each(["group",
"shape","stroke"],function(){n.addRule(this,"behavior:url(#default#VML);")});e=function(b,c){for(var d=2*c.width+c.space,e=2*(d+c.length+Math.ceil(c.width/2)+1),f=-Math.ceil(e/2),f=a("<group>",{coordsize:e+" "+e,coordorigin:f+" "+f}).css({top:f,left:f,width:e,height:e}),n=0;n<c.segments;n++)f.append(a("<shape>",{path:"m "+d+",0  l "+(d+c.length)+",0"}).css({width:e,height:e,rotation:360/c.segments*n+"deg"}).append(a("<stroke>",{color:c.color,weight:c.width+"px",endcap:"round",opacity:a.fn.activity.getOpacity(c,
n)})));return a("<group>",{coordsize:e+" "+e}).css({width:e,height:e,overflow:"hidden"}).append(f)};c=function(a,b,c){var d=0,e=a.get(0);a.data("interval",setInterval(function(){e.style.rotation=++d%b*(360/b)},1E3*c/b))}}a(f).remove()}})(jQuery);jQuery.fn.farbtastic=function(a){$.farbtastic(this,a);return this};jQuery.farbtastic=function(a,b){a=$(a).get(0);return a.farbtastic||(a.farbtastic=new jQuery._farbtastic(a,b))};
jQuery._farbtastic=function(a,b){var e=this;$(a).html('<div class="farbtastic"><div class="color"></div><div class="wheel"></div><div class="overlay"></div><div class="h-marker marker"></div><div class="sl-marker marker"></div></div>');var c=$(".farbtastic",a);e.wheel=$(".wheel",a).get(0);e.radius=84;e.square=100;e.width=194;navigator.appVersion.match(/MSIE [0-6]\./)&&$("*",c).each(function(){if("none"!=this.currentStyle.backgroundImage){var a=this.currentStyle.backgroundImage,a=this.currentStyle.backgroundImage.substring(5,
a.length-2);$(this).css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, sizingMethod=crop, src='"+a+"')"})}});e.linkTo=function(a){"object"==typeof e.callback&&$(e.callback).unbind("keyup",e.updateValue);e.color=null;if("function"==typeof a)e.callback=a;else if("object"==typeof a||"string"==typeof a)e.callback=$(a),e.callback.bind("keyup",e.updateValue),e.callback.get(0).value&&e.setColor(e.callback.get(0).value);return this};e.updateValue=function(a){this.value&&
this.value!=e.color&&e.setColor(this.value)};e.setColor=function(a){var b=e.unpack(a);e.color!=a&&b&&(e.color=a,e.rgb=b,e.hsl=e.RGBToHSL(e.rgb),e.updateDisplay());return this};e.setHSL=function(a){e.hsl=a;e.rgb=e.HSLToRGB(a);e.color=e.pack(e.rgb);e.updateDisplay();return this};e.widgetCoords=function(a){var b,c,h=a.target||a.srcElement,g=e.wheel;if("undefined"!=typeof a.offsetX){var m={x:a.offsetX,y:a.offsetY};for(a=h;a;)a.mouseX=m.x,a.mouseY=m.y,m.x+=a.offsetLeft,m.y+=a.offsetTop,a=a.offsetParent;
a=g;for(m=g=0;a;){if("undefined"!=typeof a.mouseX){b=a.mouseX-g;c=a.mouseY-m;break}g+=a.offsetLeft;m+=a.offsetTop;a=a.offsetParent}for(a=h;a;)a.mouseX=void 0,a.mouseY=void 0,a=a.offsetParent}else m=e.absolutePosition(g),b=(a.pageX||0*(a.clientX+$("html").get(0).scrollLeft))-m.x,c=(a.pageY||0*(a.clientY+$("html").get(0).scrollTop))-m.y;return{x:b-e.width/2,y:c-e.width/2}};e.mousedown=function(a){document.dragging||($(document).bind("mousemove",e.mousemove).bind("mouseup",e.mouseup),document.dragging=
!0);var b=e.widgetCoords(a);e.circleDrag=2*Math.max(Math.abs(b.x),Math.abs(b.y))>e.square;e.mousemove(a);return!1};e.mousemove=function(a){var b=e.widgetCoords(a);e.circleDrag?(a=Math.atan2(b.x,-b.y)/6.28,0>a&&(a+=1),e.setHSL([a,e.hsl[1],e.hsl[2]])):(a=Math.max(0,Math.min(1,-(b.x/e.square)+.5)),b=Math.max(0,Math.min(1,-(b.y/e.square)+.5)),e.setHSL([e.hsl[0],a,b]));return!1};e.mouseup=function(){$(document).unbind("mousemove",e.mousemove);$(document).unbind("mouseup",e.mouseup);document.dragging=!1};
e.updateDisplay=function(){var a=6.28*e.hsl[0];$(".h-marker",c).css({left:Math.round(Math.sin(a)*e.radius+e.width/2)+"px",top:Math.round(-Math.cos(a)*e.radius+e.width/2)+"px"});$(".sl-marker",c).css({left:Math.round(e.square*(.5-e.hsl[1])+e.width/2)+"px",top:Math.round(e.square*(.5-e.hsl[2])+e.width/2)+"px"});$(".color",c).css("backgroundColor",e.pack(e.HSLToRGB([e.hsl[0],1,.5])));"object"==typeof e.callback?($(e.callback).css({backgroundColor:e.color,color:.5<e.hsl[2]?"#000":"#fff"}),$(e.callback).each(function(){this.value&&
this.value!=e.color&&(this.value=e.color)})):"function"==typeof e.callback&&e.callback.call(e,e.color)};e.absolutePosition=function(a){var b={x:a.offsetLeft,y:a.offsetTop};a.offsetParent&&(a=e.absolutePosition(a.offsetParent),b.x+=a.x,b.y+=a.y);return b};e.pack=function(a){var b=Math.round(255*a[0]),c=Math.round(255*a[1]);a=Math.round(255*a[2]);return"#"+(16>b?"0":"")+b.toString(16)+(16>c?"0":"")+c.toString(16)+(16>a?"0":"")+a.toString(16)};e.unpack=function(a){if(7==a.length)return[parseInt("0x"+
a.substring(1,3))/255,parseInt("0x"+a.substring(3,5))/255,parseInt("0x"+a.substring(5,7))/255];if(4==a.length)return[parseInt("0x"+a.substring(1,2))/15,parseInt("0x"+a.substring(2,3))/15,parseInt("0x"+a.substring(3,4))/15]};e.HSLToRGB=function(a){var b,c=a[0];b=a[1];a=a[2];b=.5>=a?a*(b+1):a+b-a*b;a=2*a-b;return[this.hueToRGB(a,b,c+.33333),this.hueToRGB(a,b,c),this.hueToRGB(a,b,c-.33333)]};e.hueToRGB=function(a,b,c){c=0>c?c+1:1<c?c-1:c;return 1>6*c?a+(b-a)*c*6:1>2*c?b:2>3*c?a+(b-a)*(.66666-c)*6:a};
e.RGBToHSL=function(a){var b,c,e,g,m=a[0],p=a[1],r=a[2];b=Math.min(m,Math.min(p,r));a=Math.max(m,Math.max(p,r));c=a-b;g=(b+a)/2;e=0;0<g&&1>g&&(e=c/(.5>g?2*g:2-2*g));b=0;0<c&&(a==m&&a!=p&&(b+=(p-r)/c),a==p&&a!=r&&(b+=2+(r-m)/c),a==r&&a!=m&&(b+=4+(m-p)/c),b/=6);return[b,e,g]};$("*",c).mousedown(e.mousedown);e.setColor("#000000");b&&e.linkTo(b)}(function(a,b,e){(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):jQuery&&!jQuery.fn.dataTable&&a(jQuery)})(function(c){var d=function(f){function n(a,
f){var g=d.defaults.columns,l=a.aoColumns.length,g=c.extend({},d.models.oColumn,g,{sSortingClass:a.oClasses.sSortable,sSortingClassJUI:a.oClasses.sSortJUI,nTh:f?f:b.createElement("th"),sTitle:g.sTitle?g.sTitle:f?f.innerHTML:"",aDataSort:g.aDataSort?g.aDataSort:[l],mData:g.mData?g.oDefaults:l});a.aoColumns.push(g);a.aoPreSearchCols[l]===e||null===a.aoPreSearchCols[l]?a.aoPreSearchCols[l]=c.extend({},d.models.oSearch):(g=a.aoPreSearchCols[l],g.bRegex===e&&(g.bRegex=!0),g.bSmart===e&&(g.bSmart=!0),g.bCaseInsensitive===
e&&(g.bCaseInsensitive=!0));h(a,l,null)}function h(a,b,d){var f=a.aoColumns[b];d!==e&&null!==d&&(d.mDataProp&&!d.mData&&(d.mData=d.mDataProp),d.sType!==e&&(f.sType=d.sType,f._bAutoType=!1),c.extend(f,d),na(f,d,"sWidth","sWidthOrig"),d.iDataSort!==e&&(f.aDataSort=[d.iDataSort]),na(f,d,"aDataSort"));var g=f.mRender?H(f.mRender):null,l=H(f.mData);f.fnGetData=function(a,b){var c=l(a,b);return f.mRender&&b&&""!==b?g(c,b,a):c};f.fnSetData=G(f.mData);a.oFeatures.bSort||(f.bSortable=!1);!f.bSortable||-1==
c.inArray("asc",f.asSorting)&&-1==c.inArray("desc",f.asSorting)?(f.sSortingClass=a.oClasses.sSortableNone,f.sSortingClassJUI=""):-1==c.inArray("asc",f.asSorting)&&-1==c.inArray("desc",f.asSorting)?(f.sSortingClass=a.oClasses.sSortable,f.sSortingClassJUI=a.oClasses.sSortJUI):-1!=c.inArray("asc",f.asSorting)&&-1==c.inArray("desc",f.asSorting)?(f.sSortingClass=a.oClasses.sSortableAsc,f.sSortingClassJUI=a.oClasses.sSortJUIAscAllowed):-1==c.inArray("asc",f.asSorting)&&-1!=c.inArray("desc",f.asSorting)&&
(f.sSortingClass=a.oClasses.sSortableDesc,f.sSortingClassJUI=a.oClasses.sSortJUIDescAllowed)}function g(a){if(!1===a.oFeatures.bAutoWidth)return!1;Ha(a);for(var b=0,c=a.aoColumns.length;b<c;b++)a.aoColumns[b].nTh.style.width=a.aoColumns[b].sWidth}function m(a,b){var c=t(a,"bVisible");return"number"===typeof c[b]?c[b]:null}function p(a,b){var d=t(a,"bVisible"),d=c.inArray(b,d);return-1!==d?d:null}function r(a){return t(a,"bVisible").length}function t(a,b){var d=[];c.map(a.aoColumns,function(a,c){a[b]&&
d.push(c)});return d}function l(a){for(var b=d.ext.aTypes,c=b.length,e=0;e<c;e++){var f=b[e](a);if(null!==f)return f}return"string"}function q(a,b){for(var c=b.split(","),d=[],e=0,f=a.aoColumns.length;e<f;e++)for(var g=0;g<f;g++)if(a.aoColumns[e].sName==c[g]){d.push(g);break}return d}function w(a){for(var b="",c=0,d=a.aoColumns.length;c<d;c++)b+=a.aoColumns[c].sName+",";return b.length==d?"":b.slice(0,-1)}function u(a,b,d,e){var f,g,l,h,m;if(b)for(f=b.length-1;0<=f;f--){var q=b[f].aTargets;c.isArray(q)||
Sa(a,1,"aTargets must be an array of targets, not a "+typeof q);g=0;for(l=q.length;g<l;g++)if("number"===typeof q[g]&&0<=q[g]){for(;a.aoColumns.length<=q[g];)n(a);e(q[g],b[f])}else if("number"===typeof q[g]&&0>q[g])e(a.aoColumns.length+q[g],b[f]);else if("string"===typeof q[g])for(h=0,m=a.aoColumns.length;h<m;h++)("_all"==q[g]||c(a.aoColumns[h].nTh).hasClass(q[g]))&&e(h,b[f])}if(d)for(f=0,a=d.length;f<a;f++)e(f,d[f])}function v(a,b){var e;e=c.isArray(b)?b.slice():c.extend(!0,{},b);var f=a.aoData.length,
g=c.extend(!0,{},d.models.oRow);g._aData=e;a.aoData.push(g);for(var h,g=0,m=a.aoColumns.length;g<m;g++)e=a.aoColumns[g],"function"===typeof e.fnRender&&e.bUseRendered&&null!==e.mData?B(a,f,g,x(a,f,g)):B(a,f,g,z(a,f,g)),e._bAutoType&&"string"!=e.sType&&(h=z(a,f,g,"type"),null!==h&&""!==h&&(h=l(h),null===e.sType?e.sType=h:e.sType!=h&&"html"!=e.sType&&(e.sType="string")));a.aiDisplayMaster.push(f);a.oFeatures.bDeferRender||S(a,f);return f}function E(a){var b,e,f,g,h,m,q;if(a.bDeferLoading||null===a.sAjaxSource)for(b=
a.nTBody.firstChild;b;){if("TR"==b.nodeName.toUpperCase())for(e=a.aoData.length,b._DT_RowIndex=e,a.aoData.push(c.extend(!0,{},d.models.oRow,{nTr:b})),a.aiDisplayMaster.push(e),h=b.firstChild,f=0;h;){m=h.nodeName.toUpperCase();if("TD"==m||"TH"==m)B(a,e,f,c.trim(h.innerHTML)),f++;h=h.nextSibling}b=b.nextSibling}g=Lb(a);f=[];b=0;for(e=g.length;b<e;b++)for(h=g[b].firstChild;h;)m=h.nodeName.toUpperCase(),"TD"!=m&&"TH"!=m||f.push(h),h=h.nextSibling;e=0;for(g=a.aoColumns.length;e<g;e++){q=a.aoColumns[e];
null===q.sTitle&&(q.sTitle=q.nTh.innerHTML);var p=q._bAutoType,r="function"===typeof q.fnRender,n=null!==q.sClass,t=q.bVisible,u,v;if(p||r||n||!t)for(m=0,b=a.aoData.length;m<b;m++)h=a.aoData[m],u=f[m*g+e],p&&"string"!=q.sType&&(v=z(a,m,e,"type"),""!==v&&(v=l(v),null===q.sType?q.sType=v:q.sType!=v&&"html"!=q.sType&&(q.sType="string"))),q.mRender?u.innerHTML=z(a,m,e,"display"):q.mData!==e&&(u.innerHTML=z(a,m,e,"display")),r&&(v=x(a,m,e),u.innerHTML=v,q.bUseRendered&&B(a,m,e,v)),n&&(u.className+=" "+
q.sClass),t?h._anHidden[e]=null:(h._anHidden[e]=u,u.parentNode.removeChild(u)),q.fnCreatedCell&&q.fnCreatedCell.call(a.oInstance,u,z(a,m,e,"display"),h._aData,m,e)}if(0!==a.aoRowCreatedCallback.length)for(b=0,e=a.aoData.length;b<e;b++)h=a.aoData[b],ba(a,"aoRowCreatedCallback",null,[h.nTr,h._aData,b])}function A(a,b){return b._DT_RowIndex!==e?b._DT_RowIndex:null}function K(a,b,c){b=Hb(a,b);var d=0;for(a=a.aoColumns.length;d<a;d++)if(b[d]===c)return d;return-1}function F(a,b,c,d){for(var e=[],f=0,g=
d.length;f<g;f++)e.push(z(a,b,d[f],c));return e}function z(a,b,c,d){var f=a.aoColumns[c];if((c=f.fnGetData(a.aoData[b]._aData,d))===e)return a.iDrawError!=a.iDraw&&null===f.sDefaultContent&&(Sa(a,0,"Requested unknown parameter "+("function"==typeof f.mData?"{mData function}":"'"+f.mData+"'")+" from the data source for row "+b),a.iDrawError=a.iDraw),f.sDefaultContent;if(null===c&&null!==f.sDefaultContent)c=f.sDefaultContent;else if("function"===typeof c)return c();return"display"==d&&null===c?"":c}
function B(a,b,c,d){a.aoColumns[c].fnSetData(a.aoData[b]._aData,d)}function H(a){if(null===a)return function(a,b){return null};if("function"===typeof a)return function(b,c,d){return a(b,c,d)};if("string"!==typeof a||-1===a.indexOf(".")&&-1===a.indexOf("["))return function(b,c){return b[a]};var b=function(a,c,d){var f=d.split("."),g;if(""!==d){var l=0;for(g=f.length;l<g;l++){if(d=f[l].match(La)){f[l]=f[l].replace(La,"");""!==f[l]&&(a=a[f[l]]);g=[];f.splice(0,l+1);for(var f=f.join("."),l=0,h=a.length;l<
h;l++)g.push(b(a[l],c,f));a=d[0].substring(1,d[0].length-1);a=""===a?g:g.join(a);break}if(null===a||a[f[l]]===e)return e;a=a[f[l]]}}return a};return function(c,d){return b(c,d,a)}}function G(a){if(null===a)return function(a,b){};if("function"===typeof a)return function(b,c){a(b,"set",c)};if("string"!==typeof a||-1===a.indexOf(".")&&-1===a.indexOf("["))return function(b,c){b[a]=c};var b=function(a,c,d){d=d.split(".");var f,g,l=0;for(g=d.length-1;l<g;l++){if(f=d[l].match(La)){d[l]=d[l].replace(La,"");
a[d[l]]=[];f=d.slice();f.splice(0,l+1);g=f.join(".");for(var h=0,m=c.length;h<m;h++)f={},b(f,c[h],g),a[d[l]].push(f);return}if(null===a[d[l]]||a[d[l]]===e)a[d[l]]={};a=a[d[l]]}a[d[d.length-1].replace(La,"")]=c};return function(c,d){return b(c,d,a)}}function I(a){for(var b=[],c=a.aoData.length,d=0;d<c;d++)b.push(a.aoData[d]._aData);return b}function N(a){a.aoData.splice(0,a.aoData.length);a.aiDisplayMaster.splice(0,a.aiDisplayMaster.length);a.aiDisplay.splice(0,a.aiDisplay.length);Ga(a)}function L(a,
b){for(var c=-1,d=0,e=a.length;d<e;d++)a[d]==b?c=d:a[d]>b&&a[d]--; -1!=c&&a.splice(c,1)}function x(a,b,c){var d=a.aoColumns[c];return d.fnRender({iDataRow:b,iDataColumn:c,oSettings:a,aData:a.aoData[b]._aData,mDataProp:d.mData},z(a,b,c,"display"))}function S(a,c){var d=a.aoData[c],e;if(null===d.nTr){d.nTr=b.createElement("tr");d.nTr._DT_RowIndex=c;d._aData.DT_RowId&&(d.nTr.id=d._aData.DT_RowId);d._aData.DT_RowClass&&(d.nTr.className=d._aData.DT_RowClass);for(var f=0,g=a.aoColumns.length;f<g;f++){var l=
a.aoColumns[f];e=b.createElement(l.sCellType);e.innerHTML="function"!==typeof l.fnRender||l.bUseRendered&&null!==l.mData?z(a,c,f,"display"):x(a,c,f);null!==l.sClass&&(e.className=l.sClass);l.bVisible?(d.nTr.appendChild(e),d._anHidden[f]=null):d._anHidden[f]=e;l.fnCreatedCell&&l.fnCreatedCell.call(a.oInstance,e,z(a,c,f,"display"),d._aData,c,f)}ba(a,"aoRowCreatedCallback",null,[d.nTr,d._aData,c])}}function D(a){var d,e,f;if(0!==c("th, td",a.nTHead).length)for(d=0,f=a.aoColumns.length;d<f;d++)e=a.aoColumns[d].nTh,
e.setAttribute("role","columnheader"),a.aoColumns[d].bSortable&&(e.setAttribute("tabindex",a.iTabIndex),e.setAttribute("aria-controls",a.sTableId)),null!==a.aoColumns[d].sClass&&c(e).addClass(a.aoColumns[d].sClass),a.aoColumns[d].sTitle!=e.innerHTML&&(e.innerHTML=a.aoColumns[d].sTitle);else{var g=b.createElement("tr");d=0;for(f=a.aoColumns.length;d<f;d++)e=a.aoColumns[d].nTh,e.innerHTML=a.aoColumns[d].sTitle,e.setAttribute("tabindex","0"),null!==a.aoColumns[d].sClass&&c(e).addClass(a.aoColumns[d].sClass),
g.appendChild(e);c(a.nTHead).html("")[0].appendChild(g);U(a.aoHeader,a.nTHead)}c(a.nTHead).children("tr").attr("role","row");if(a.bJUI)for(d=0,f=a.aoColumns.length;d<f;d++){e=a.aoColumns[d].nTh;g=b.createElement("div");g.className=a.oClasses.sSortJUIWrapper;c(e).contents().appendTo(g);var l=b.createElement("span");l.className=a.oClasses.sSortIcon;g.appendChild(l);e.appendChild(g)}if(a.oFeatures.bSort)for(d=0;d<a.aoColumns.length;d++)!1!==a.aoColumns[d].bSortable?xb(a,a.aoColumns[d].nTh,d):c(a.aoColumns[d].nTh).addClass(a.oClasses.sSortableNone);
""!==a.oClasses.sFooterTH&&c(a.nTFoot).children("tr").children("th").addClass(a.oClasses.sFooterTH);if(null!==a.nTFoot)for(e=M(a,null,a.aoFooter),d=0,f=a.aoColumns.length;d<f;d++)e[d]&&(a.aoColumns[d].nTf=e[d],a.aoColumns[d].sClass&&c(e[d]).addClass(a.aoColumns[d].sClass))}function J(a,b,c){var d,f,g,l=[],h=[],m=a.aoColumns.length,q;c===e&&(c=!1);d=0;for(f=b.length;d<f;d++){l[d]=b[d].slice();l[d].nTr=b[d].nTr;for(g=m-1;0<=g;g--)a.aoColumns[g].bVisible||c||l[d].splice(g,1);h.push([])}d=0;for(f=l.length;d<
f;d++){if(a=l[d].nTr)for(;g=a.firstChild;)a.removeChild(g);g=0;for(b=l[d].length;g<b;g++)if(q=m=1,h[d][g]===e){a.appendChild(l[d][g].cell);for(h[d][g]=1;l[d+m]!==e&&l[d][g].cell==l[d+m][g].cell;)h[d+m][g]=1,m++;for(;l[d][g+q]!==e&&l[d][g].cell==l[d][g+q].cell;){for(c=0;c<m;c++)h[d+c][g+q]=1;q++}l[d][g].cell.rowSpan=m;l[d][g].cell.colSpan=q}}}function V(a){var d=ba(a,"aoPreDrawCallback","preDraw",[a]);if(-1!==c.inArray(!1,d))ib(a,!1);else{var f,g,d=[],l=0,h=a.asStripeClasses.length;f=a.aoOpenRows.length;
a.bDrawing=!0;a.iInitDisplayStart!==e&&-1!=a.iInitDisplayStart&&(a._iDisplayStart=a.oFeatures.bServerSide?a.iInitDisplayStart:a.iInitDisplayStart>=a.fnRecordsDisplay()?0:a.iInitDisplayStart,a.iInitDisplayStart=-1,Ga(a));if(a.bDeferLoading)a.bDeferLoading=!1,a.iDraw++;else if(!a.oFeatures.bServerSide)a.iDraw++;else if(!a.bDestroying&&!Q(a))return;if(0!==a.aiDisplay.length){var m=a._iDisplayStart;g=a._iDisplayEnd;a.oFeatures.bServerSide&&(m=0,g=a.aoData.length);for(;m<g;m++){var q=a.aoData[a.aiDisplay[m]];
null===q.nTr&&S(a,a.aiDisplay[m]);var p=q.nTr;if(0!==h){var n=a.asStripeClasses[l%h];q._sRowStripe!=n&&(c(p).removeClass(q._sRowStripe).addClass(n),q._sRowStripe=n)}ba(a,"aoRowCallback",null,[p,a.aoData[a.aiDisplay[m]]._aData,l,m]);d.push(p);l++;if(0!==f)for(q=0;q<f;q++)if(p==a.aoOpenRows[q].nParent){d.push(a.aoOpenRows[q].nTr);break}}}else d[0]=b.createElement("tr"),a.asStripeClasses[0]&&(d[0].className=a.asStripeClasses[0]),f=a.oLanguage,h=f.sZeroRecords,1!=a.iDraw||null===a.sAjaxSource||a.oFeatures.bServerSide?
f.sEmptyTable&&0===a.fnRecordsTotal()&&(h=f.sEmptyTable):h=f.sLoadingRecords,f=b.createElement("td"),f.setAttribute("valign","top"),f.colSpan=r(a),f.className=a.oClasses.sRowEmpty,f.innerHTML=Ka(a,h),d[l].appendChild(f);ba(a,"aoHeaderCallback","header",[c(a.nTHead).children("tr")[0],I(a),a._iDisplayStart,a.fnDisplayEnd(),a.aiDisplay]);ba(a,"aoFooterCallback","footer",[c(a.nTFoot).children("tr")[0],I(a),a._iDisplayStart,a.fnDisplayEnd(),a.aiDisplay]);l=b.createDocumentFragment();f=b.createDocumentFragment();
if(a.nTBody){h=a.nTBody.parentNode;f.appendChild(a.nTBody);if(!a.oScroll.bInfinite||!a._bInitComplete||a.bSorted||a.bFiltered)for(;f=a.nTBody.firstChild;)a.nTBody.removeChild(f);f=0;for(g=d.length;f<g;f++)l.appendChild(d[f]);a.nTBody.appendChild(l);null!==h&&h.appendChild(a.nTBody)}ba(a,"aoDrawCallback","draw",[a]);a.bSorted=!1;a.bFiltered=!1;a.bDrawing=!1;a.oFeatures.bServerSide&&(ib(a,!1),a._bInitComplete||Kb(a))}}function Y(a){a.oFeatures.bSort?tb(a,a.oPreviousSearch):a.oFeatures.bFilter?ia(a,
a.oPreviousSearch):(Ga(a),V(a))}function W(a){var b=c("<div></div>")[0];a.nTable.parentNode.insertBefore(b,a.nTable);a.nTableWrapper=c('<div id="'+a.sTableId+'_wrapper" class="'+a.oClasses.sWrapper+'" role="grid"></div>')[0];a.nTableReinsertBefore=a.nTable.nextSibling;for(var e=a.nTableWrapper,f=a.sDom.split(""),g,l,h,m,q,p,r,n=0;n<f.length;n++){l=0;h=f[n];if("<"==h){m=c("<div></div>")[0];q=f[n+1];if("'"==q||'"'==q){p="";for(r=2;f[n+r]!=q;)p+=f[n+r],r++;"H"==p?p=a.oClasses.sJUIHeader:"F"==p&&(p=a.oClasses.sJUIFooter);
-1!=p.indexOf(".")?(q=p.split("."),m.id=q[0].substr(1,q[0].length-1),m.className=q[1]):"#"==p.charAt(0)?m.id=p.substr(1,p.length-1):m.className=p;n+=r}e.appendChild(m);e=m}else if(">"==h)e=e.parentNode;else if("l"==h&&a.oFeatures.bPaginate&&a.oFeatures.bLengthChange)g=hb(a),l=1;else if("f"==h&&a.oFeatures.bFilter)g=aa(a),l=1;else if("r"==h&&a.oFeatures.bProcessing)g=Gb(a),l=1;else if("t"==h)g=rb(a),l=1;else if("i"==h&&a.oFeatures.bInfo)g=pb(a),l=1;else if("p"==h&&a.oFeatures.bPaginate)g=Za(a),l=1;
else if(0!==d.ext.aoFeatures.length)for(m=d.ext.aoFeatures,r=0,q=m.length;r<q;r++)if(h==m[r].cFeature){(g=m[r].fnInit(a))&&(l=1);break}1==l&&null!==g&&("object"!==typeof a.aanFeatures[h]&&(a.aanFeatures[h]=[]),a.aanFeatures[h].push(g),e.appendChild(g))}b.parentNode.replaceChild(a.nTableWrapper,b)}function U(a,b){var d=c(b).children("tr"),e,f,g,l,h,m,q,p,r,n;a.splice(0,a.length);g=0;for(m=d.length;g<m;g++)a.push([]);g=0;for(m=d.length;g<m;g++)for(e=d[g],f=e.firstChild;f;){if("TD"==f.nodeName.toUpperCase()||
"TH"==f.nodeName.toUpperCase()){p=1*f.getAttribute("colspan");r=1*f.getAttribute("rowspan");p=p&&0!==p&&1!==p?p:1;r=r&&0!==r&&1!==r?r:1;l=0;for(h=a[g];h[l];)l++;q=l;n=1===p?!0:!1;for(h=0;h<p;h++)for(l=0;l<r;l++)a[g+l][q+h]={cell:f,unique:n},a[g+l].nTr=e}f=f.nextSibling}}function M(a,b,c){var d=[];c||(c=a.aoHeader,b&&(c=[],U(c,b)));b=0;for(var e=c.length;b<e;b++)for(var f=0,g=c[b].length;f<g;f++)!c[b][f].unique||d[f]&&a.bSortCellsTop||(d[f]=c[b][f].cell);return d}function Q(a){if(a.bAjaxDataGet){a.iDraw++;
ib(a,!0);var b=X(a);ea(a,b);a.fnServerData.call(a.oInstance,a.sAjaxSource,b,function(b){O(a,b)},a);return!1}return!0}function X(a){var b=a.aoColumns.length,c=[],d,e,f,g;c.push({name:"sEcho",value:a.iDraw});c.push({name:"iColumns",value:b});c.push({name:"sColumns",value:w(a)});c.push({name:"iDisplayStart",value:a._iDisplayStart});c.push({name:"iDisplayLength",value:!1!==a.oFeatures.bPaginate?a._iDisplayLength:-1});for(f=0;f<b;f++)d=a.aoColumns[f].mData,c.push({name:"mDataProp_"+f,value:"function"===
typeof d?"function":d});if(!1!==a.oFeatures.bFilter)for(c.push({name:"sSearch",value:a.oPreviousSearch.sSearch}),c.push({name:"bRegex",value:a.oPreviousSearch.bRegex}),f=0;f<b;f++)c.push({name:"sSearch_"+f,value:a.aoPreSearchCols[f].sSearch}),c.push({name:"bRegex_"+f,value:a.aoPreSearchCols[f].bRegex}),c.push({name:"bSearchable_"+f,value:a.aoColumns[f].bSearchable});if(!1!==a.oFeatures.bSort){var l=0;d=null!==a.aaSortingFixed?a.aaSortingFixed.concat(a.aaSorting):a.aaSorting.slice();for(f=0;f<d.length;f++)for(e=
a.aoColumns[d[f][0]].aDataSort,g=0;g<e.length;g++)c.push({name:"iSortCol_"+l,value:e[g]}),c.push({name:"sSortDir_"+l,value:d[f][1]}),l++;c.push({name:"iSortingCols",value:l});for(f=0;f<b;f++)c.push({name:"bSortable_"+f,value:a.aoColumns[f].bSortable})}return c}function ea(a,b){ba(a,"aoServerParams","serverParams",[b])}function O(a,b){if(b.sEcho!==e){if(1*b.sEcho<a.iDraw)return;a.iDraw=1*b.sEcho}(!a.oScroll.bInfinite||a.oScroll.bInfinite&&(a.bSorted||a.bFiltered))&&N(a);a._iRecordsTotal=parseInt(b.iTotalRecords,
10);a._iRecordsDisplay=parseInt(b.iTotalDisplayRecords,10);var c=w(a),c=b.sColumns!==e&&""!==c&&b.sColumns!=c,d;c&&(d=q(a,b.sColumns));for(var f=H(a.sAjaxDataProp)(b),g=0,l=f.length;g<l;g++)if(c){for(var h=[],m=0,p=a.aoColumns.length;m<p;m++)h.push(f[g][d[m]]);v(a,h)}else v(a,f[g]);a.aiDisplay=a.aiDisplayMaster.slice();a.bAjaxDataGet=!1;V(a);a.bAjaxDataGet=!0;ib(a,!1)}function aa(a){var d=a.oPreviousSearch,e=a.oLanguage.sSearch,e=-1!==e.indexOf("_INPUT_")?e.replace("_INPUT_",'<input type="text" />'):
""===e?'<input type="text" />':e+' <input type="text" />',f=b.createElement("div");f.className=a.oClasses.sFilter;f.innerHTML="<label>"+e+"</label>";a.aanFeatures.f||(f.id=a.sTableId+"_order");e=c('input[type="text"]',f);f._DT_Input=e[0];e.val(d.sSearch.replace('"',"&quot;"));e.bind("keyup.DT",function(b){b=a.aanFeatures.f;for(var e=""===this.value?"":this.value,f=0,g=b.length;f<g;f++)b[f]!=c(this).parents("div.dataTables_filter")[0]&&c(b[f]._DT_Input).val(e);e!=d.sSearch&&ia(a,{sSearch:e,bRegex:d.bRegex,
bSmart:d.bSmart,bCaseInsensitive:d.bCaseInsensitive})});e.attr("aria-controls",a.sTableId).bind("keypress.DT",function(a){if(13==a.keyCode)return!1});return f}function ia(a,b,d){var e=a.oPreviousSearch,f=a.aoPreSearchCols,g=function(a){e.sSearch=a.sSearch;e.bRegex=a.bRegex;e.bSmart=a.bSmart;e.bCaseInsensitive=a.bCaseInsensitive};if(a.oFeatures.bServerSide)g(b);else{ha(a,b.sSearch,d,b.bRegex,b.bSmart,b.bCaseInsensitive);g(b);for(b=0;b<a.aoPreSearchCols.length;b++)da(a,f[b].sSearch,b,f[b].bRegex,f[b].bSmart,
f[b].bCaseInsensitive);ta(a)}a.bFiltered=!0;c(a.oInstance).trigger("filter",a);a._iDisplayStart=0;Ga(a);V(a);Ba(a,0)}function ta(a){for(var b=d.ext.afnFiltering,c=t(a,"bSearchable"),e=0,f=b.length;e<f;e++)for(var g=0,l=0,h=a.aiDisplay.length;l<h;l++){var m=a.aiDisplay[l-g];b[e](a,F(a,m,"filter",c),m)||(a.aiDisplay.splice(l-g,1),g++)}}function da(a,b,c,d,e,f){if(""!==b){var g=0;b=za(b,d,e,f);for(d=a.aiDisplay.length-1;0<=d;d--)e=pa(z(a,a.aiDisplay[d],c,"filter"),a.aoColumns[c].sType),b.test(e)||(a.aiDisplay.splice(d,
1),g++)}}function ha(a,b,c,e,f,g){e=za(b,e,f,g);f=a.oPreviousSearch;c||(c=0);0!==d.ext.afnFiltering.length&&(c=1);if(0>=b.length)a.aiDisplay.splice(0,a.aiDisplay.length),a.aiDisplay=a.aiDisplayMaster.slice();else if(a.aiDisplay.length==a.aiDisplayMaster.length||f.sSearch.length>b.length||1==c||0!==b.indexOf(f.sSearch))for(a.aiDisplay.splice(0,a.aiDisplay.length),Ba(a,1),b=0;b<a.aiDisplayMaster.length;b++)e.test(a.asDataSearch[b])&&a.aiDisplay.push(a.aiDisplayMaster[b]);else for(b=c=0;b<a.asDataSearch.length;b++)e.test(a.asDataSearch[b])||
(a.aiDisplay.splice(b-c,1),c++)}function Ba(a,b){if(!a.oFeatures.bServerSide){a.asDataSearch=[];for(var c=t(a,"bSearchable"),d=1===b?a.aiDisplayMaster:a.aiDisplay,e=0,f=d.length;e<f;e++)a.asDataSearch[e]=y(a,F(a,d[e],"filter",c))}}function y(a,b){var d=b.join("  ");-1!==d.indexOf("&")&&(d=c("<div>").html(d).text());return d.replace(/[\n\r]/g," ")}function za(a,b,c,d){if(c){a=b?a.split(" "):C(a).split(" ");a="^(?=.*?"+a.join(")(?=.*?")+").*$";try{return new RegExp(a,d?"i":"")}catch(e){return RegExp("")}}else return a=
b?a:C(a),new RegExp(a,d?"i":"")}function pa(a,b){return"function"===typeof d.ext.ofnSearch[b]?d.ext.ofnSearch[b](a):null===a?"":"html"==b?a.replace(/[\r\n]/g," ").replace(/<.*?>/g,""):"string"===typeof a?a.replace(/[\r\n]/g," "):a}function C(a){return a.replace(RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\|\\$|\\^|\\-)","g"),"\\$1")}function pb(a){var c=b.createElement("div");c.className=a.oClasses.sInfo;a.aanFeatures.i||(a.aoDrawCallback.push({fn:Ra,sName:"information"}),c.id=a.sTableId+
"_info");a.nTable.setAttribute("aria-describedby",a.sTableId+"_info");return c}function Ra(a){if(a.oFeatures.bInfo&&0!==a.aanFeatures.i.length){var b=a.oLanguage,d=a._iDisplayStart+1,e=a.fnDisplayEnd(),f=a.fnRecordsTotal(),g=a.fnRecordsDisplay(),l;l=0===g?b.sInfoEmpty:b.sInfo;g!=f&&(l+=" "+b.sInfoFiltered);l+=b.sInfoPostFix;l=Ka(a,l);null!==b.fnInfoCallback&&(l=b.fnInfoCallback.call(a.oInstance,a,d,e,f,g,l));a=a.aanFeatures.i;b=0;for(d=a.length;b<d;b++)c(a[b]).html(l)}}function Ka(a,b){var c=a.fnFormatNumber(a._iDisplayStart+
1),d=a.fnDisplayEnd(),d=a.fnFormatNumber(d),e=a.fnRecordsDisplay(),e=a.fnFormatNumber(e),f=a.fnRecordsTotal(),f=a.fnFormatNumber(f);a.oScroll.bInfinite&&(c=a.fnFormatNumber(1));return b.replace(/_START_/g,c).replace(/_END_/g,d).replace(/_TOTAL_/g,e).replace(/_MAX_/g,f)}function Xa(a){var b,c,d=a.iInitDisplayStart;if(!1===a.bInitialised)setTimeout(function(){Xa(a)},200);else{W(a);D(a);J(a,a.aoHeader);a.nTFoot&&J(a,a.aoFooter);ib(a,!0);a.oFeatures.bAutoWidth&&Ha(a);b=0;for(c=a.aoColumns.length;b<c;b++)null!==
a.aoColumns[b].sWidth&&(a.aoColumns[b].nTh.style.width=ra(a.aoColumns[b].sWidth));a.oFeatures.bSort?tb(a):a.oFeatures.bFilter?ia(a,a.oPreviousSearch):(a.aiDisplay=a.aiDisplayMaster.slice(),Ga(a),V(a));null===a.sAjaxSource||a.oFeatures.bServerSide?a.oFeatures.bServerSide||(ib(a,!1),Kb(a)):(c=[],ea(a,c),a.fnServerData.call(a.oInstance,a.sAjaxSource,c,function(c){var e=""!==a.sAjaxDataProp?H(a.sAjaxDataProp)(c):c;for(b=0;b<e.length;b++)v(a,e[b]);a.iInitDisplayStart=d;a.oFeatures.bSort?tb(a):(a.aiDisplay=
a.aiDisplayMaster.slice(),Ga(a),V(a));ib(a,!1);Kb(a,c)},a))}}function Kb(a,b){a._bInitComplete=!0;ba(a,"aoInitComplete","init",[a,b])}function Fb(a){var b=d.defaults.oLanguage;!a.sEmptyTable&&a.sZeroRecords&&"No data available in table"===b.sEmptyTable&&na(a,a,"sZeroRecords","sEmptyTable");!a.sLoadingRecords&&a.sZeroRecords&&"Loading..."===b.sLoadingRecords&&na(a,a,"sZeroRecords","sLoadingRecords")}function hb(a){if(a.oScroll.bInfinite)return null;var d='<select size="1" '+('name="'+a.sTableId+'_length"')+
">",e,f,g=a.aLengthMenu;if(2==g.length&&"object"===typeof g[0]&&"object"===typeof g[1])for(e=0,f=g[0].length;e<f;e++)d+='<option value="'+g[0][e]+'">'+g[1][e]+"</option>";else for(e=0,f=g.length;e<f;e++)d+='<option value="'+g[e]+'">'+g[e]+"</option>";d+="</select>";g=b.createElement("div");a.aanFeatures.l||(g.id=a.sTableId+"_length");g.className=a.oClasses.sLength;g.innerHTML="<label>"+a.oLanguage.sLengthMenu.replace("_MENU_",d)+"</label>";c('select option[value="'+a._iDisplayLength+'"]',g).attr("selected",
!0);c("select",g).bind("change.DT",function(b){b=c(this).val();var d=a.aanFeatures.l;e=0;for(f=d.length;e<f;e++)d[e]!=this.parentNode&&c("select",d[e]).val(b);a._iDisplayLength=parseInt(b,10);Ga(a);a.fnDisplayEnd()==a.fnRecordsDisplay()&&(a._iDisplayStart=a.fnDisplayEnd()-a._iDisplayLength,0>a._iDisplayStart&&(a._iDisplayStart=0));-1==a._iDisplayLength&&(a._iDisplayStart=0);V(a)});c("select",g).attr("aria-controls",a.sTableId);return g}function Ga(a){a._iDisplayEnd=!1===a.oFeatures.bPaginate?a.aiDisplay.length:
a._iDisplayStart+a._iDisplayLength>a.aiDisplay.length||-1==a._iDisplayLength?a.aiDisplay.length:a._iDisplayStart+a._iDisplayLength}function Za(a){if(a.oScroll.bInfinite)return null;var c=b.createElement("div");c.className=a.oClasses.sPaging+a.sPaginationType;d.ext.oPagination[a.sPaginationType].fnInit(a,c,function(a){Ga(a);V(a)});a.aanFeatures.p||a.aoDrawCallback.push({fn:function(a){d.ext.oPagination[a.sPaginationType].fnUpdate(a,function(a){Ga(a);V(a)})},sName:"pagination"});return c}function ab(a,
b){var d=a._iDisplayStart;if("number"===typeof b)a._iDisplayStart=b*a._iDisplayLength,a._iDisplayStart>a.fnRecordsDisplay()&&(a._iDisplayStart=0);else if("first"==b)a._iDisplayStart=0;else if("previous"==b)a._iDisplayStart=0<=a._iDisplayLength?a._iDisplayStart-a._iDisplayLength:0,0>a._iDisplayStart&&(a._iDisplayStart=0);else if("next"==b)0<=a._iDisplayLength?a._iDisplayStart+a._iDisplayLength<a.fnRecordsDisplay()&&(a._iDisplayStart+=a._iDisplayLength):a._iDisplayStart=0;else if("last"==b)if(0<=a._iDisplayLength){var e=
parseInt((a.fnRecordsDisplay()-1)/a._iDisplayLength,10)+1;a._iDisplayStart=(e-1)*a._iDisplayLength}else a._iDisplayStart=0;else Sa(a,0,"Unknown paging action: "+b);c(a.oInstance).trigger("page",a);return d!=a._iDisplayStart}function Gb(a){var c=b.createElement("div");a.aanFeatures.r||(c.id=a.sTableId+"_processing");c.innerHTML=a.oLanguage.sProcessing;c.className=a.oClasses.sProcessing;a.nTable.parentNode.insertBefore(c,a.nTable);return c}function ib(a,b){if(a.oFeatures.bProcessing)for(var d=a.aanFeatures.r,
e=0,f=d.length;e<f;e++)d[e].style.visibility=b?"visible":"hidden";c(a.oInstance).trigger("processing",[a,b])}function rb(a){if(""===a.oScroll.sX&&""===a.oScroll.sY)return a.nTable;var d=b.createElement("div"),e=b.createElement("div"),f=b.createElement("div"),g=b.createElement("div"),l=b.createElement("div"),h=b.createElement("div"),m=a.nTable.cloneNode(!1),q=a.nTable.cloneNode(!1),p=a.nTable.getElementsByTagName("thead")[0],r=0===a.nTable.getElementsByTagName("tfoot").length?null:a.nTable.getElementsByTagName("tfoot")[0],
n=a.oClasses;e.appendChild(f);l.appendChild(h);g.appendChild(a.nTable);d.appendChild(e);d.appendChild(g);f.appendChild(m);m.appendChild(p);null!==r&&(d.appendChild(l),h.appendChild(q),q.appendChild(r));d.className=n.sScrollWrapper;e.className=n.sScrollHead;f.className=n.sScrollHeadInner;g.className=n.sScrollBody;l.className=n.sScrollFoot;h.className=n.sScrollFootInner;a.oScroll.bAutoCss&&(e.style.overflow="hidden",e.style.position="relative",l.style.overflow="hidden",g.style.overflow="auto");e.style.border=
"0";e.style.width="100%";l.style.border="0";f.style.width=""!==a.oScroll.sXInner?a.oScroll.sXInner:"100%";m.removeAttribute("id");m.style.marginLeft="0";a.nTable.style.marginLeft="0";null!==r&&(q.removeAttribute("id"),q.style.marginLeft="0");f=c(a.nTable).children("caption");0<f.length&&(f=f[0],"top"===f._captionSide?m.appendChild(f):"bottom"===f._captionSide&&r&&q.appendChild(f));""!==a.oScroll.sX&&(e.style.width=ra(a.oScroll.sX),g.style.width=ra(a.oScroll.sX),null!==r&&(l.style.width=ra(a.oScroll.sX)),
c(g).scroll(function(a){e.scrollLeft=this.scrollLeft;null!==r&&(l.scrollLeft=this.scrollLeft)}));""!==a.oScroll.sY&&(g.style.height=ra(a.oScroll.sY));a.aoDrawCallback.push({fn:gb,sName:"scrolling"});a.oScroll.bInfinite&&c(g).scroll(function(){!a.bDrawing&&0!==c(this).scrollTop()&&c(this).scrollTop()+c(this).height()>c(a.nTable).height()-a.oScroll.iLoadGap&&a.fnDisplayEnd()<a.fnRecordsDisplay()&&(ab(a,"next"),Ga(a),V(a))});a.nScrollHead=e;a.nScrollFoot=l;return d}function gb(a){var b=a.nScrollHead.getElementsByTagName("div")[0],
d=b.getElementsByTagName("table")[0],e=a.nTable.parentNode,f,g,l,h,q,p,r,n,t=[],u=[],v=null!==a.nTFoot?a.nScrollFoot.getElementsByTagName("div")[0]:null,w=null!==a.nTFoot?v.getElementsByTagName("table")[0]:null,x=a.oBrowser.bScrollOversize,I=function(a){r=a.style;r.paddingTop="0";r.paddingBottom="0";r.borderTopWidth="0";r.borderBottomWidth="0";r.height=0};c(a.nTable).children("thead, tfoot").remove();f=c(a.nTHead).clone()[0];a.nTable.insertBefore(f,a.nTable.childNodes[0]);l=a.nTHead.getElementsByTagName("tr");
h=f.getElementsByTagName("tr");null!==a.nTFoot&&(q=c(a.nTFoot).clone()[0],a.nTable.insertBefore(q,a.nTable.childNodes[1]),p=a.nTFoot.getElementsByTagName("tr"),q=q.getElementsByTagName("tr"));""===a.oScroll.sX&&(e.style.width="100%",b.parentNode.style.width="100%");var A=M(a,f);f=0;for(g=A.length;f<g;f++)n=m(a,f),A[f].style.width=a.aoColumns[n].sWidth;null!==a.nTFoot&&Wa(function(a){a.style.width=""},q);a.oScroll.bCollapse&&""!==a.oScroll.sY&&(e.style.height=e.offsetHeight+a.nTHead.offsetHeight+"px");
f=c(a.nTable).outerWidth();""===a.oScroll.sX?(a.nTable.style.width="100%",x&&(c("tbody",e).height()>e.offsetHeight||"scroll"==c(e).css("overflow-y"))&&(a.nTable.style.width=ra(c(a.nTable).outerWidth()-a.oScroll.iBarWidth))):""!==a.oScroll.sXInner?a.nTable.style.width=ra(a.oScroll.sXInner):f==c(e).width()&&c(e).height()<c(a.nTable).height()?(a.nTable.style.width=ra(f-a.oScroll.iBarWidth),c(a.nTable).outerWidth()>f-a.oScroll.iBarWidth&&(a.nTable.style.width=ra(f))):a.nTable.style.width=ra(f);f=c(a.nTable).outerWidth();
Wa(I,h);Wa(function(a){t.push(ra(c(a).width()))},h);Wa(function(a,b){a.style.width=t[b]},l);c(h).height(0);null!==a.nTFoot&&(Wa(I,q),Wa(function(a){u.push(ra(c(a).width()))},q),Wa(function(a,b){a.style.width=u[b]},p),c(q).height(0));Wa(function(a,b){a.innerHTML="";a.style.width=t[b]},h);null!==a.nTFoot&&Wa(function(a,b){a.innerHTML="";a.style.width=u[b]},q);c(a.nTable).outerWidth()<f?(l=e.scrollHeight>e.offsetHeight||"scroll"==c(e).css("overflow-y")?f+a.oScroll.iBarWidth:f,x&&(e.scrollHeight>e.offsetHeight||
"scroll"==c(e).css("overflow-y"))&&(a.nTable.style.width=ra(l-a.oScroll.iBarWidth)),e.style.width=ra(l),a.nScrollHead.style.width=ra(l),null!==a.nTFoot&&(a.nScrollFoot.style.width=ra(l)),""===a.oScroll.sX?Sa(a,1,"The table cannot fit into the current element which will cause column misalignment. The table has been drawn at its minimum possible width."):""!==a.oScroll.sXInner&&Sa(a,1,"The table cannot fit into the current element which will cause column misalignment. Increase the sScrollXInner value or remove it to allow automatic calculation")):
(e.style.width=ra("100%"),a.nScrollHead.style.width=ra("100%"),null!==a.nTFoot&&(a.nScrollFoot.style.width=ra("100%")));""===a.oScroll.sY&&x&&(e.style.height=ra(a.nTable.offsetHeight+a.oScroll.iBarWidth));""!==a.oScroll.sY&&a.oScroll.bCollapse&&(e.style.height=ra(a.oScroll.sY),x=""!==a.oScroll.sX&&a.nTable.offsetWidth>e.offsetWidth?a.oScroll.iBarWidth:0,a.nTable.offsetHeight<e.offsetHeight&&(e.style.height=ra(a.nTable.offsetHeight+x)));x=c(a.nTable).outerWidth();d.style.width=ra(x);b.style.width=
ra(x);d=c(a.nTable).height()>e.clientHeight||"scroll"==c(e).css("overflow-y");b.style.paddingRight=d?a.oScroll.iBarWidth+"px":"0px";null!==a.nTFoot&&(w.style.width=ra(x),v.style.width=ra(x),v.style.paddingRight=d?a.oScroll.iBarWidth+"px":"0px");c(e).scroll();if(a.bSorted||a.bFiltered)e.scrollTop=0}function Wa(a,b,c){for(var d=0,e=0,f=b.length,g,l;e<f;){g=b[e].firstChild;for(l=c?c[e].firstChild:null;g;)1===g.nodeType&&(c?a(g,l,d):a(g,d),d++),g=g.nextSibling,l=c?l.nextSibling:null;e++}}function qa(a,
c){if(!a||null===a||""===a)return 0;c||(c=b.body);var d,e=b.createElement("div");e.style.width=ra(a);c.appendChild(e);d=e.offsetWidth;c.removeChild(e);return d}function Ha(a){var d=0,e,f=0,g=a.aoColumns.length,l,h,m=c("th",a.nTHead),q=a.nTable.getAttribute("width");h=a.nTable.parentNode;for(l=0;l<g;l++)a.aoColumns[l].bVisible&&(f++,null!==a.aoColumns[l].sWidth&&(e=qa(a.aoColumns[l].sWidthOrig,h),null!==e&&(a.aoColumns[l].sWidth=ra(e)),d++));if(g==m.length&&0===d&&f==g&&""===a.oScroll.sX&&""===a.oScroll.sY)for(l=
0;l<a.aoColumns.length;l++)e=c(m[l]).width(),null!==e&&(a.aoColumns[l].sWidth=ra(e));else{d=a.nTable.cloneNode(!1);l=a.nTHead.cloneNode(!0);f=b.createElement("tbody");e=b.createElement("tr");d.removeAttribute("id");d.appendChild(l);null!==a.nTFoot&&(d.appendChild(a.nTFoot.cloneNode(!0)),Wa(function(a){a.style.width=""},d.getElementsByTagName("tr")));d.appendChild(f);f.appendChild(e);f=c("thead th",d);0===f.length&&(f=c("tbody tr:eq(0)>td",d));m=M(a,l);for(l=f=0;l<g;l++){var p=a.aoColumns[l];p.bVisible&&
null!==p.sWidthOrig&&""!==p.sWidthOrig?m[l-f].style.width=ra(p.sWidthOrig):p.bVisible?m[l-f].style.width="":f++}for(l=0;l<g;l++)a.aoColumns[l].bVisible&&(f=Ta(a,l),null!==f&&(f=f.cloneNode(!0),""!==a.aoColumns[l].sContentPadding&&(f.innerHTML+=a.aoColumns[l].sContentPadding),e.appendChild(f)));h.appendChild(d);""!==a.oScroll.sX&&""!==a.oScroll.sXInner?d.style.width=ra(a.oScroll.sXInner):""!==a.oScroll.sX?(d.style.width="",c(d).width()<h.offsetWidth&&(d.style.width=ra(h.offsetWidth))):""!==a.oScroll.sY?
d.style.width=ra(h.offsetWidth):q&&(d.style.width=ra(q));d.style.visibility="hidden";sb(a,d);g=c("tbody tr:eq(0)",d).children();0===g.length&&(g=M(a,c("thead",d)[0]));if(""!==a.oScroll.sX){for(l=f=h=0;l<a.aoColumns.length;l++)a.aoColumns[l].bVisible&&(h=null===a.aoColumns[l].sWidthOrig?h+c(g[f]).outerWidth():h+(parseInt(a.aoColumns[l].sWidth.replace("px",""),10)+(c(g[f]).outerWidth()-c(g[f]).width())),f++);d.style.width=ra(h);a.nTable.style.width=ra(h)}for(l=f=0;l<a.aoColumns.length;l++)a.aoColumns[l].bVisible&&
(h=c(g[f]).width(),null!==h&&0<h&&(a.aoColumns[l].sWidth=ra(h)),f++);g=c(d).css("width");a.nTable.style.width=-1!==g.indexOf("%")?g:ra(c(d).outerWidth());d.parentNode.removeChild(d)}q&&(a.nTable.style.width=ra(q))}function sb(a,b){""===a.oScroll.sX&&""!==a.oScroll.sY?(c(b).width(),b.style.width=ra(c(b).outerWidth()-a.oScroll.iBarWidth)):""!==a.oScroll.sX&&(b.style.width=ra(c(b).outerWidth()))}function Ta(a,c){var d=Ya(a,c);if(0>d)return null;if(null===a.aoData[d].nTr){var e=b.createElement("td");
e.innerHTML=z(a,d,c,"");return e}return Hb(a,d)[c]}function Ya(a,b){for(var c=-1,d=-1,e=0;e<a.aoData.length;e++){var f=z(a,e,b,"display")+"",f=f.replace(/<.*?>/g,"");f.length>c&&(c=f.length,d=e)}return d}function ra(a){if(null===a)return"0px";if("number"==typeof a)return 0>a?"0px":a+"px";var b=a.charCodeAt(a.length-1);return 48>b||57<b?a:a+"px"}function qc(){var a=b.createElement("p"),c=a.style;c.width="100%";c.height="200px";c.padding="0px";var d=b.createElement("div"),c=d.style;c.position="absolute";
c.top="0px";c.left="0px";c.visibility="hidden";c.width="200px";c.height="150px";c.padding="0px";c.overflow="hidden";d.appendChild(a);b.body.appendChild(d);c=a.offsetWidth;d.style.overflow="scroll";a=a.offsetWidth;c==a&&(a=d.clientWidth);b.body.removeChild(d);return c-a}function tb(a,b){var f,g,l,h,m,q,r=[],n=[],t=d.ext.oSort,u=a.aoData,v=a.aoColumns,w=a.oLanguage.oAria;if(!a.oFeatures.bServerSide&&(0!==a.aaSorting.length||null!==a.aaSortingFixed)){r=null!==a.aaSortingFixed?a.aaSortingFixed.concat(a.aaSorting):
a.aaSorting.slice();for(f=0;f<r.length;f++)if(g=r[f][0],l=p(a,g),h=a.aoColumns[g].sSortDataType,d.ext.afnSortData[h])if(m=d.ext.afnSortData[h].call(a.oInstance,a,g,l),m.length===u.length)for(l=0,h=u.length;l<h;l++)B(a,l,g,m[l]);else Sa(a,0,"Returned data sort array (col "+g+") is the wrong length");f=0;for(g=a.aiDisplayMaster.length;f<g;f++)n[a.aiDisplayMaster[f]]=f;var x=r.length,I;f=0;for(g=u.length;f<g;f++)for(l=0;l<x;l++)for(I=v[r[l][0]].aDataSort,m=0,q=I.length;m<q;m++)h=v[I[m]].sType,h=t[(h?
h:"string")+"-pre"],u[f]._aSortData[I[m]]=h?h(z(a,f,I[m],"sort")):z(a,f,I[m],"sort");a.aiDisplayMaster.sort(function(a,b){var c,d,e,f,g;for(c=0;c<x;c++)for(g=v[r[c][0]].aDataSort,d=0,e=g.length;d<e;d++)if(f=v[g[d]].sType,f=t[(f?f:"string")+"-"+r[c][1]](u[a]._aSortData[g[d]],u[b]._aSortData[g[d]]),0!==f)return f;return t["numeric-asc"](n[a],n[b])})}b!==e&&!b||a.oFeatures.bDeferRender||Ab(a);f=0;for(g=a.aoColumns.length;f<g;f++)h=v[f].sTitle.replace(/<.*?>/g,""),l=v[f].nTh,l.removeAttribute("aria-sort"),
l.removeAttribute("aria-label"),v[f].bSortable?0<r.length&&r[0][0]==f?(l.setAttribute("aria-sort","asc"==r[0][1]?"ascending":"descending"),l.setAttribute("aria-label",h+("asc"==(v[f].asSorting[r[0][2]+1]?v[f].asSorting[r[0][2]+1]:v[f].asSorting[0])?w.sSortAscending:w.sSortDescending))):l.setAttribute("aria-label",h+("asc"==v[f].asSorting[0]?w.sSortAscending:w.sSortDescending)):l.setAttribute("aria-label",h);a.bSorted=!0;c(a.oInstance).trigger("sort",a);a.oFeatures.bFilter?ia(a,a.oPreviousSearch,1):
(a.aiDisplay=a.aiDisplayMaster.slice(),a._iDisplayStart=0,Ga(a),V(a))}function xb(a,b,c,d){Bc(b,{},function(b){if(!1!==a.aoColumns[c].bSortable){var e=function(){var d,e;if(b.shiftKey){for(var f=!1,g=0;g<a.aaSorting.length;g++)if(a.aaSorting[g][0]==c){f=!0;d=a.aaSorting[g][0];e=a.aaSorting[g][2]+1;a.aoColumns[d].asSorting[e]?(a.aaSorting[g][1]=a.aoColumns[d].asSorting[e],a.aaSorting[g][2]=e):a.aaSorting.splice(g,1);break}!1===f&&a.aaSorting.push([c,a.aoColumns[c].asSorting[0],0])}else 1==a.aaSorting.length&&
a.aaSorting[0][0]==c?(d=a.aaSorting[0][0],e=a.aaSorting[0][2]+1,a.aoColumns[d].asSorting[e]||(e=0),a.aaSorting[0][1]=a.aoColumns[d].asSorting[e],a.aaSorting[0][2]=e):(a.aaSorting.splice(0,a.aaSorting.length),a.aaSorting.push([c,a.aoColumns[c].asSorting[0],0]));tb(a)};a.oFeatures.bProcessing?(ib(a,!0),setTimeout(function(){e();a.oFeatures.bServerSide||ib(a,!1)},0)):e();"function"==typeof d&&d(a)}})}function Ab(a){var b,d,e,f,g,l=a.aoColumns.length,h=a.oClasses;for(b=0;b<l;b++)a.aoColumns[b].bSortable&&
c(a.aoColumns[b].nTh).removeClass(h.sSortAsc+" "+h.sSortDesc+" "+a.aoColumns[b].sSortingClass);d=null!==a.aaSortingFixed?a.aaSortingFixed.concat(a.aaSorting):a.aaSorting.slice();for(b=0;b<a.aoColumns.length;b++)if(a.aoColumns[b].bSortable){g=a.aoColumns[b].sSortingClass;f=-1;for(e=0;e<d.length;e++)if(d[e][0]==b){g="asc"==d[e][1]?h.sSortAsc:h.sSortDesc;f=e;break}c(a.aoColumns[b].nTh).addClass(g);a.bJUI&&(g=c("span."+h.sSortIcon,a.aoColumns[b].nTh),g.removeClass(h.sSortJUIAsc+" "+h.sSortJUIDesc+" "+
h.sSortJUI+" "+h.sSortJUIAscAllowed+" "+h.sSortJUIDescAllowed),g.addClass(-1==f?a.aoColumns[b].sSortingClassJUI:"asc"==d[f][1]?h.sSortJUIAsc:h.sSortJUIDesc))}else c(a.aoColumns[b].nTh).addClass(a.aoColumns[b].sSortingClass);g=h.sSortColumn;if(a.oFeatures.bSort&&a.oFeatures.bSortClasses){a=Hb(a);f=[];for(b=0;b<l;b++)f.push("");b=0;for(e=1;b<d.length;b++)h=parseInt(d[b][0],10),f[h]=g+e,3>e&&e++;g=new RegExp(g+"[123]");var m;b=0;for(d=a.length;b<d;b++)h=b%l,e=a[b].className,m=f[h],h=e.replace(g,m),h!=
e?a[b].className=c.trim(h):0<m.length&&-1==e.indexOf(m)&&(a[b].className=e+" "+m)}}function la(a){if(a.oFeatures.bStateSave&&!a.bDestroying){var b,d;b=a.oScroll.bInfinite;var e={iCreate:(new Date).getTime(),iStart:b?0:a._iDisplayStart,iEnd:b?a._iDisplayLength:a._iDisplayEnd,iLength:a._iDisplayLength,aaSorting:c.extend(!0,[],a.aaSorting),oSearch:c.extend(!0,{},a.oPreviousSearch),aoSearchCols:c.extend(!0,[],a.aoPreSearchCols),abVisCols:[]};b=0;for(d=a.aoColumns.length;b<d;b++)e.abVisCols.push(a.aoColumns[b].bVisible);
ba(a,"aoStateSaveParams","stateSaveParams",[a,e]);a.fnStateSave.call(a.oInstance,a,e)}}function jb(a,b){if(a.oFeatures.bStateSave){var d=a.fnStateLoad.call(a.oInstance,a);if(d){var e=ba(a,"aoStateLoadParams","stateLoadParams",[a,d]);if(-1===c.inArray(!1,e)){a.oLoadedState=c.extend(!0,{},d);a._iDisplayStart=d.iStart;a.iInitDisplayStart=d.iStart;a._iDisplayEnd=d.iEnd;a._iDisplayLength=d.iLength;a.aaSorting=d.aaSorting.slice();a.saved_aaSorting=d.aaSorting.slice();c.extend(a.oPreviousSearch,d.oSearch);
c.extend(!0,a.aoPreSearchCols,d.aoSearchCols);b.saved_aoColumns=[];for(e=0;e<d.abVisCols.length;e++)b.saved_aoColumns[e]={},b.saved_aoColumns[e].bVisible=d.abVisCols[e];ba(a,"aoStateLoaded","stateLoaded",[a,d])}}}}function Aa(a){for(var b=0;b<d.settings.length;b++)if(d.settings[b].nTable===a)return d.settings[b];return null}function Lb(a){var b=[];a=a.aoData;for(var c=0,d=a.length;c<d;c++)null!==a[c].nTr&&b.push(a[c].nTr);return b}function Hb(a,b){var c=[],d,f,g,l,h,m;f=0;var q=a.aoData.length;b!==
e&&(f=b,q=b+1);for(g=f;g<q;g++)if(m=a.aoData[g],null!==m.nTr){f=[];for(d=m.nTr.firstChild;d;)l=d.nodeName.toLowerCase(),"td"!=l&&"th"!=l||f.push(d),d=d.nextSibling;l=d=0;for(h=a.aoColumns.length;l<h;l++)a.aoColumns[l].bVisible?c.push(f[l-d]):(c.push(m._anHidden[l]),d++)}return c}function Sa(b,c,e){b=null===b?"DataTables warning: "+e:"DataTables warning (table id = '"+b.sTableId+"'): "+e;if(0===c)if("alert"==d.ext.sErrMode)alert(b);else throw Error(b);else a.console&&console.log&&console.log(b)}function na(a,
b,c,d){d===e&&(d=c);b[c]!==e&&(a[d]=b[c])}function Yb(a,b){var d,e;for(e in b)b.hasOwnProperty(e)&&(d=b[e],"object"===typeof f[e]&&null!==d&&!1===c.isArray(d)?c.extend(!0,a[e],d):a[e]=d);return a}function Bc(a,b,d){c(a).bind("click.DT",b,function(b){a.blur();d(b)}).bind("keypress.DT",b,function(a){13===a.which&&d(a)}).bind("selectstart.DT",function(){return!1})}function ca(a,b,c,d){c&&a[b].push({fn:c,sName:d})}function ba(a,b,d,e){b=a[b];for(var f=[],g=b.length-1;0<=g;g--)f.push(b[g].fn.apply(a.oInstance,
e));null!==d&&c(a.oInstance).trigger(d,e);return f}function Ca(a){var d=c('<div style="position:absolute; top:0; left:0; height:1px; width:1px; overflow:hidden"><div style="position:absolute; top:1px; left:1px; width:100px; overflow:scroll;"><div id="DT_BrowserTest" style="width:100%; height:10px;"></div></div></div>')[0];b.body.appendChild(d);a.oBrowser.bScrollOversize=100===c("#DT_BrowserTest",d)[0].offsetWidth?!0:!1;b.body.removeChild(d)}function oa(a){return function(){var b=[Aa(this[d.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));
return d.ext.oApi[a].apply(this,b)}}var La=/\[.*?\]$/,bb=a.JSON?JSON.stringify:function(a){var b=typeof a;if("object"!==b||null===a)return"string"===b&&(a='"'+a+'"'),a+"";var d,e,f=[],g=c.isArray(a);for(d in a)e=a[d],b=typeof e,"string"===b?e='"'+e+'"':"object"===b&&null!==e&&(e=bb(e)),f.push((g?"":'"'+d+'":')+e);return(g?"[":"{")+f+(g?"]":"}")};this.$=function(a,b){var e,f,g=[],l;f=Aa(this[d.ext.iApiIndex]);var h=f.aoData,m=f.aiDisplay,q=f.aiDisplayMaster;b||(b={});b=c.extend({},{filter:"none",order:"current",
page:"all"},b);if("current"==b.page)for(e=f._iDisplayStart,f=f.fnDisplayEnd();e<f;e++)(l=h[m[e]].nTr)&&g.push(l);else if("current"==b.order&&"none"==b.filter)for(e=0,f=q.length;e<f;e++)(l=h[q[e]].nTr)&&g.push(l);else if("current"==b.order&&"applied"==b.filter)for(e=0,f=m.length;e<f;e++)(l=h[m[e]].nTr)&&g.push(l);else if("original"==b.order&&"none"==b.filter)for(e=0,f=h.length;e<f;e++)(l=h[e].nTr)&&g.push(l);else if("original"==b.order&&"applied"==b.filter)for(e=0,f=h.length;e<f;e++)l=h[e].nTr,-1!==
c.inArray(e,m)&&l&&g.push(l);else Sa(f,1,"Unknown selection options");g=c(g);e=g.filter(a);g=g.find(a);return c([].concat(c.makeArray(e),c.makeArray(g)))};this._=function(a,b){var c=[],d,e,f=this.$(a,b);d=0;for(e=f.length;d<e;d++)c.push(this.fnGetData(f[d]));return c};this.fnAddData=function(a,b){if(0===a.length)return[];var c=[],f,g=Aa(this[d.ext.iApiIndex]);if("object"===typeof a[0]&&null!==a[0])for(var l=0;l<a.length;l++){f=v(g,a[l]);if(-1==f)return c;c.push(f)}else{f=v(g,a);if(-1==f)return c;
c.push(f)}g.aiDisplay=g.aiDisplayMaster.slice();(b===e||b)&&Y(g);return c};this.fnAdjustColumnSizing=function(a){var b=Aa(this[d.ext.iApiIndex]);g(b);a===e||a?this.fnDraw(!1):""===b.oScroll.sX&&""===b.oScroll.sY||this.oApi._fnScrollDraw(b)};this.fnClearTable=function(a){var b=Aa(this[d.ext.iApiIndex]);N(b);(a===e||a)&&V(b)};this.fnClose=function(a){for(var b=Aa(this[d.ext.iApiIndex]),c=0;c<b.aoOpenRows.length;c++)if(b.aoOpenRows[c].nParent==a)return(a=b.aoOpenRows[c].nTr.parentNode)&&a.removeChild(b.aoOpenRows[c].nTr),
b.aoOpenRows.splice(c,1),0;return 1};this.fnDeleteRow=function(a,b,f){var g=Aa(this[d.ext.iApiIndex]),l,h;a="object"===typeof a?A(g,a):a;var m=g.aoData.splice(a,1);l=0;for(h=g.aoData.length;l<h;l++)null!==g.aoData[l].nTr&&(g.aoData[l].nTr._DT_RowIndex=l);l=c.inArray(a,g.aiDisplay);g.asDataSearch.splice(l,1);L(g.aiDisplayMaster,a);L(g.aiDisplay,a);"function"===typeof b&&b.call(this,g,m);g._iDisplayStart>=g.fnRecordsDisplay()&&(g._iDisplayStart-=g._iDisplayLength,0>g._iDisplayStart&&(g._iDisplayStart=
0));if(f===e||f)Ga(g),V(g);return m};this.fnDestroy=function(a){var b=Aa(this[d.ext.iApiIndex]),g=b.nTableWrapper.parentNode,l=b.nTBody,h,m;a=a===e?!1:a;b.bDestroying=!0;ba(b,"aoDestroyCallback","destroy",[b]);if(!a)for(h=0,m=b.aoColumns.length;h<m;h++)!1===b.aoColumns[h].bVisible&&this.fnSetColumnVis(h,!0);c(b.nTableWrapper).find("*").andSelf().unbind(".DT");c("tbody>tr>td."+b.oClasses.sRowEmpty,b.nTable).parent().remove();b.nTable!=b.nTHead.parentNode&&(c(b.nTable).children("thead").remove(),b.nTable.appendChild(b.nTHead));
b.nTFoot&&b.nTable!=b.nTFoot.parentNode&&(c(b.nTable).children("tfoot").remove(),b.nTable.appendChild(b.nTFoot));b.nTable.parentNode.removeChild(b.nTable);c(b.nTableWrapper).remove();b.aaSorting=[];b.aaSortingFixed=[];Ab(b);c(Lb(b)).removeClass(b.asStripeClasses.join(" "));c("th, td",b.nTHead).removeClass([b.oClasses.sSortable,b.oClasses.sSortableAsc,b.oClasses.sSortableDesc,b.oClasses.sSortableNone].join(" "));b.bJUI&&(c("th span."+b.oClasses.sSortIcon+", td span."+b.oClasses.sSortIcon,b.nTHead).remove(),
c("th, td",b.nTHead).each(function(){var a=c("div."+b.oClasses.sSortJUIWrapper,this),d=a.contents();c(this).append(d);a.remove()}));!a&&b.nTableReinsertBefore?g.insertBefore(b.nTable,b.nTableReinsertBefore):a||g.appendChild(b.nTable);h=0;for(m=b.aoData.length;h<m;h++)null!==b.aoData[h].nTr&&l.appendChild(b.aoData[h].nTr);!0===b.oFeatures.bAutoWidth&&(b.nTable.style.width=ra(b.sDestroyWidth));if(m=b.asDestroyStripes.length)for(a=c(l).children("tr"),h=0;h<m;h++)a.filter(":nth-child("+m+"n + "+h+")").addClass(b.asDestroyStripes[h]);
h=0;for(m=d.settings.length;h<m;h++)d.settings[h]==b&&d.settings.splice(h,1);f=b=null};this.fnDraw=function(a){var b=Aa(this[d.ext.iApiIndex]);!1===a?(Ga(b),V(b)):Y(b)};this.fnFilter=function(a,f,g,l,h,m){var q=Aa(this[d.ext.iApiIndex]);if(q.oFeatures.bFilter){if(g===e||null===g)g=!1;if(l===e||null===l)l=!0;if(h===e||null===h)h=!0;if(m===e||null===m)m=!0;if(f===e||null===f){if(ia(q,{sSearch:a+"",bRegex:g,bSmart:l,bCaseInsensitive:m},1),h&&q.aanFeatures.f)for(f=q.aanFeatures.f,g=0,l=f.length;g<l;g++)try{f[g]._DT_Input!=
b.activeElement&&c(f[g]._DT_Input).val(a)}catch(p){c(f[g]._DT_Input).val(a)}}else c.extend(q.aoPreSearchCols[f],{sSearch:a+"",bRegex:g,bSmart:l,bCaseInsensitive:m}),ia(q,q.oPreviousSearch,1)}};this.fnGetData=function(a,b){var c=Aa(this[d.ext.iApiIndex]);if(a!==e){var f=a;if("object"===typeof a){var g=a.nodeName.toLowerCase();"tr"===g?f=A(c,a):"td"===g&&(f=A(c,a.parentNode),b=K(c,f,a))}return b!==e?z(c,f,b,""):c.aoData[f]!==e?c.aoData[f]._aData:null}return I(c)};this.fnGetNodes=function(a){var b=Aa(this[d.ext.iApiIndex]);
return a!==e?b.aoData[a]!==e?b.aoData[a].nTr:null:Lb(b)};this.fnGetPosition=function(a){var b=Aa(this[d.ext.iApiIndex]),c=a.nodeName.toUpperCase();return"TR"==c?A(b,a):"TD"==c||"TH"==c?(c=A(b,a.parentNode),a=K(b,c,a),[c,p(b,a),a]):null};this.fnIsOpen=function(a){for(var b=Aa(this[d.ext.iApiIndex]),c=0;c<b.aoOpenRows.length;c++)if(b.aoOpenRows[c].nParent==a)return!0;return!1};this.fnOpen=function(a,e,f){var g=Aa(this[d.ext.iApiIndex]),l=Lb(g);if(-1!==c.inArray(a,l)){this.fnClose(a);var l=b.createElement("tr"),
h=b.createElement("td");l.appendChild(h);h.className=f;h.colSpan=r(g);"string"===typeof e?h.innerHTML=e:c(h).html(e);e=c("tr",g.nTBody);-1!=c.inArray(a,e)&&c(l).insertAfter(a);g.aoOpenRows.push({nTr:l,nParent:a});return l}};this.fnPageChange=function(a,b){var c=Aa(this[d.ext.iApiIndex]);ab(c,a);Ga(c);(b===e||b)&&V(c)};this.fnSetColumnVis=function(a,b,c){var f=Aa(this[d.ext.iApiIndex]),l,h,m=f.aoColumns,q=f.aoData,p,n;if(m[a].bVisible!=b){if(b){for(l=h=0;l<a;l++)m[l].bVisible&&h++;n=h>=r(f);if(!n)for(l=
a;l<m.length;l++)if(m[l].bVisible){p=l;break}l=0;for(h=q.length;l<h;l++)null!==q[l].nTr&&(n?q[l].nTr.appendChild(q[l]._anHidden[a]):q[l].nTr.insertBefore(q[l]._anHidden[a],Hb(f,l)[p]))}else for(l=0,h=q.length;l<h;l++)null!==q[l].nTr&&(p=Hb(f,l)[a],q[l]._anHidden[a]=p,p.parentNode.removeChild(p));m[a].bVisible=b;J(f,f.aoHeader);f.nTFoot&&J(f,f.aoFooter);l=0;for(h=f.aoOpenRows.length;l<h;l++)f.aoOpenRows[l].nTr.colSpan=r(f);if(c===e||c)g(f),V(f);la(f)}};this.fnSettings=function(){return Aa(this[d.ext.iApiIndex])};
this.fnSort=function(a){var b=Aa(this[d.ext.iApiIndex]);b.aaSorting=a;tb(b)};this.fnSortListener=function(a,b,c){xb(Aa(this[d.ext.iApiIndex]),a,b,c)};this.fnUpdate=function(a,b,f,l,h){var m=Aa(this[d.ext.iApiIndex]);b="object"===typeof b?A(m,b):b;if(c.isArray(a)&&f===e)for(m.aoData[b]._aData=a.slice(),f=0;f<m.aoColumns.length;f++)this.fnUpdate(z(m,b,f),b,f,!1,!1);else if(c.isPlainObject(a)&&f===e)for(m.aoData[b]._aData=c.extend(!0,{},a),f=0;f<m.aoColumns.length;f++)this.fnUpdate(z(m,b,f),b,f,!1,!1);
else{B(m,b,f,a);a=z(m,b,f,"display");var q=m.aoColumns[f];null!==q.fnRender&&(a=x(m,b,f),q.bUseRendered&&B(m,b,f,a));null!==m.aoData[b].nTr&&(Hb(m,b)[f].innerHTML=a)}f=c.inArray(b,m.aiDisplay);m.asDataSearch[f]=y(m,F(m,b,"filter",t(m,"bSearchable")));(h===e||h)&&g(m);(l===e||l)&&Y(m);return 0};this.fnVersionCheck=d.ext.fnVersionCheck;this.oApi={_fnExternApiFunc:oa,_fnInitialise:Xa,_fnInitComplete:Kb,_fnLanguageCompat:Fb,_fnAddColumn:n,_fnColumnOptions:h,_fnAddData:v,_fnCreateTr:S,_fnGatherData:E,
_fnBuildHead:D,_fnDrawHead:J,_fnDraw:V,_fnReDraw:Y,_fnAjaxUpdate:Q,_fnAjaxParameters:X,_fnAjaxUpdateDraw:O,_fnServerParams:ea,_fnAddOptionsHtml:W,_fnFeatureHtmlTable:rb,_fnScrollDraw:gb,_fnAdjustColumnSizing:g,_fnFeatureHtmlFilter:aa,_fnFilterComplete:ia,_fnFilterCustom:ta,_fnFilterColumn:da,_fnFilter:ha,_fnBuildSearchArray:Ba,_fnBuildSearchRow:y,_fnFilterCreateSearch:za,_fnDataToSearch:pa,_fnSort:tb,_fnSortAttachListener:xb,_fnSortingClasses:Ab,_fnFeatureHtmlPaginate:Za,_fnPageChange:ab,_fnFeatureHtmlInfo:pb,
_fnUpdateInfo:Ra,_fnFeatureHtmlLength:hb,_fnFeatureHtmlProcessing:Gb,_fnProcessingDisplay:ib,_fnVisibleToColumnIndex:m,_fnColumnIndexToVisible:p,_fnNodeToDataIndex:A,_fnVisbleColumns:r,_fnCalculateEnd:Ga,_fnConvertToWidth:qa,_fnCalculateColumnWidths:Ha,_fnScrollingWidthAdjust:sb,_fnGetWidestNode:Ta,_fnGetMaxLenString:Ya,_fnStringToCss:ra,_fnDetectType:l,_fnSettingsFromNode:Aa,_fnGetDataMaster:I,_fnGetTrNodes:Lb,_fnGetTdNodes:Hb,_fnEscapeRegex:C,_fnDeleteIndex:L,_fnReOrderIndex:q,_fnColumnOrdering:w,
_fnLog:Sa,_fnClearTable:N,_fnSaveState:la,_fnLoadState:jb,_fnCreateCookie:function(d,e,f,g,l){var h=new Date;h.setTime(h.getTime()+1E3*f);f=a.location.pathname.split("/");d=d+"_"+f.pop().replace(/[\/:]/g,"").toLowerCase();var m;null!==l?(m="function"===typeof c.parseJSON?c.parseJSON(e):eval("("+e+")"),e=l(d,m,h.toGMTString(),f.join("/")+"/")):e=d+"="+encodeURIComponent(e)+"; expires="+h.toGMTString()+"; path="+f.join("/")+"/";d=b.cookie.split(";");l=e.split(";")[0].length;h=[];if(4096<l+b.cookie.length+
10){for(var q=0,p=d.length;q<p;q++)if(-1!=d[q].indexOf(g)){var r=d[q].split("=");try{(m=eval("("+decodeURIComponent(r[1])+")"))&&m.iCreate&&h.push({name:r[0],time:m.iCreate})}catch(n){}}for(h.sort(function(a,b){return b.time-a.time});4096<l+b.cookie.length+10;){if(0===h.length)return;g=h.pop();b.cookie=g.name+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT; path="+f.join("/")+"/"}}b.cookie=e},_fnReadCookie:function(c){var d=a.location.pathname.split("/");c=c+"_"+d[d.length-1].replace(/[\/:]/g,"").toLowerCase()+
"=";for(var d=b.cookie.split(";"),e=0;e<d.length;e++){for(var f=d[e];" "==f.charAt(0);)f=f.substring(1,f.length);if(0===f.indexOf(c))return decodeURIComponent(f.substring(c.length,f.length))}return null},_fnDetectHeader:U,_fnGetUniqueThs:M,_fnScrollBarWidth:qc,_fnApplyToChildren:Wa,_fnMap:na,_fnGetRowData:F,_fnGetCellData:z,_fnSetCellData:B,_fnGetObjectDataFn:H,_fnSetObjectDataFn:G,_fnApplyColumnDefs:u,_fnBindAction:Bc,_fnExtend:Yb,_fnCallbackReg:ca,_fnCallbackFire:ba,_fnJsonString:bb,_fnRender:x,
_fnNodeToColumnIndex:K,_fnInfoMacros:Ka,_fnBrowserDetect:Ca,_fnGetColumns:t};c.extend(d.ext.oApi,this.oApi);for(var ja in d.ext.oApi)ja&&(this[ja]=oa(ja));var Ja=this;this.each(function(){var a=0,g,l,m;l=this.getAttribute("id");var q=!1,p=!1;if("table"!=this.nodeName.toLowerCase())Sa(null,0,"Attempted to initialise DataTables on a node which is not a table: "+this.nodeName);else{a=0;for(g=d.settings.length;a<g;a++){if(d.settings[a].nTable==this){if(f===e||f.bRetrieve)return d.settings[a].oInstance;
if(f.bDestroy){d.settings[a].oInstance.fnDestroy();break}else{Sa(d.settings[a],0,"Cannot reinitialise DataTable.\n\nTo retrieve the DataTables object for this table, pass no arguments or see the docs for bRetrieve and bDestroy");return}}if(d.settings[a].sTableId==this.id){d.settings.splice(a,1);break}}if(null===l||""===l)this.id=l="DataTables_Table_"+d.ext._oExternConfig.iNextUnique++;var r=c.extend(!0,{},d.models.oSettings,{nTable:this,oApi:Ja.oApi,oInit:f,sDestroyWidth:c(this).width(),sInstance:l,
sTableId:l});d.settings.push(r);r.oInstance=1===Ja.length?Ja:c(this).dataTable();f||(f={});f.oLanguage&&Fb(f.oLanguage);f=Yb(c.extend(!0,{},d.defaults),f);na(r.oFeatures,f,"bPaginate");na(r.oFeatures,f,"bLengthChange");na(r.oFeatures,f,"bFilter");na(r.oFeatures,f,"bSort");na(r.oFeatures,f,"bInfo");na(r.oFeatures,f,"bProcessing");na(r.oFeatures,f,"bAutoWidth");na(r.oFeatures,f,"bSortClasses");na(r.oFeatures,f,"bServerSide");na(r.oFeatures,f,"bDeferRender");na(r.oScroll,f,"sScrollX","sX");na(r.oScroll,
f,"sScrollXInner","sXInner");na(r.oScroll,f,"sScrollY","sY");na(r.oScroll,f,"bScrollCollapse","bCollapse");na(r.oScroll,f,"bScrollInfinite","bInfinite");na(r.oScroll,f,"iScrollLoadGap","iLoadGap");na(r.oScroll,f,"bScrollAutoCss","bAutoCss");na(r,f,"asStripeClasses");na(r,f,"asStripClasses","asStripeClasses");na(r,f,"fnServerData");na(r,f,"fnFormatNumber");na(r,f,"sServerMethod");na(r,f,"aaSorting");na(r,f,"aaSortingFixed");na(r,f,"aLengthMenu");na(r,f,"sPaginationType");na(r,f,"sAjaxSource");na(r,
f,"sAjaxDataProp");na(r,f,"iCookieDuration");na(r,f,"sCookiePrefix");na(r,f,"sDom");na(r,f,"bSortCellsTop");na(r,f,"iTabIndex");na(r,f,"oSearch","oPreviousSearch");na(r,f,"aoSearchCols","aoPreSearchCols");na(r,f,"iDisplayLength","_iDisplayLength");na(r,f,"bJQueryUI","bJUI");na(r,f,"fnCookieCallback");na(r,f,"fnStateLoad");na(r,f,"fnStateSave");na(r.oLanguage,f,"fnInfoCallback");ca(r,"aoDrawCallback",f.fnDrawCallback,"user");ca(r,"aoServerParams",f.fnServerParams,"user");ca(r,"aoStateSaveParams",f.fnStateSaveParams,
"user");ca(r,"aoStateLoadParams",f.fnStateLoadParams,"user");ca(r,"aoStateLoaded",f.fnStateLoaded,"user");ca(r,"aoRowCallback",f.fnRowCallback,"user");ca(r,"aoRowCreatedCallback",f.fnCreatedRow,"user");ca(r,"aoHeaderCallback",f.fnHeaderCallback,"user");ca(r,"aoFooterCallback",f.fnFooterCallback,"user");ca(r,"aoInitComplete",f.fnInitComplete,"user");ca(r,"aoPreDrawCallback",f.fnPreDrawCallback,"user");r.oFeatures.bServerSide&&r.oFeatures.bSort&&r.oFeatures.bSortClasses?ca(r,"aoDrawCallback",Ab,"server_side_sort_classes"):
r.oFeatures.bDeferRender&&ca(r,"aoDrawCallback",Ab,"defer_sort_classes");f.bJQueryUI?(c.extend(r.oClasses,d.ext.oJUIClasses),f.sDom===d.defaults.sDom&&"lfrtip"===d.defaults.sDom&&(r.sDom='<"H"lfr>t<"F"ip>')):c.extend(r.oClasses,d.ext.oStdClasses);c(this).addClass(r.oClasses.sTable);if(""!==r.oScroll.sX||""!==r.oScroll.sY)r.oScroll.iBarWidth=qc();r.iInitDisplayStart===e&&(r.iInitDisplayStart=f.iDisplayStart,r._iDisplayStart=f.iDisplayStart);f.bStateSave&&(r.oFeatures.bStateSave=!0,jb(r,f),ca(r,"aoDrawCallback",
la,"state_save"));null!==f.iDeferLoading&&(r.bDeferLoading=!0,a=c.isArray(f.iDeferLoading),r._iRecordsDisplay=a?f.iDeferLoading[0]:f.iDeferLoading,r._iRecordsTotal=a?f.iDeferLoading[1]:f.iDeferLoading);null!==f.aaData&&(p=!0);""!==f.oLanguage.sUrl?(r.oLanguage.sUrl=f.oLanguage.sUrl,c.getJSON(r.oLanguage.sUrl,null,function(a){Fb(a);c.extend(!0,r.oLanguage,f.oLanguage,a);Xa(r)}),q=!0):c.extend(!0,r.oLanguage,f.oLanguage);null===f.asStripeClasses&&(r.asStripeClasses=[r.oClasses.sStripeOdd,r.oClasses.sStripeEven]);
g=r.asStripeClasses.length;r.asDestroyStripes=[];if(g){l=!1;m=c(this).children("tbody").children("tr:lt("+g+")");for(a=0;a<g;a++)m.hasClass(r.asStripeClasses[a])&&(l=!0,r.asDestroyStripes.push(r.asStripeClasses[a]));l&&m.removeClass(r.asStripeClasses.join(" "))}l=[];a=this.getElementsByTagName("thead");0!==a.length&&(U(r.aoHeader,a[0]),l=M(r));if(null===f.aoColumns)for(m=[],a=0,g=l.length;a<g;a++)m.push(null);else m=f.aoColumns;a=0;for(g=m.length;a<g;a++)f.saved_aoColumns!==e&&f.saved_aoColumns.length==
g&&(null===m[a]&&(m[a]={}),m[a].bVisible=f.saved_aoColumns[a].bVisible),n(r,l?l[a]:null);u(r,f.aoColumnDefs,m,function(a,b){h(r,a,b)});a=0;for(g=r.aaSorting.length;a<g;a++){r.aaSorting[a][0]>=r.aoColumns.length&&(r.aaSorting[a][0]=0);var t=r.aoColumns[r.aaSorting[a][0]];r.aaSorting[a][2]===e&&(r.aaSorting[a][2]=0);f.aaSorting===e&&r.saved_aaSorting===e&&(r.aaSorting[a][1]=t.asSorting[0]);l=0;for(m=t.asSorting.length;l<m;l++)if(r.aaSorting[a][1]==t.asSorting[l]){r.aaSorting[a][2]=l;break}}Ab(r);Ca(r);
a=c(this).children("caption").each(function(){this._captionSide=c(this).css("caption-side")});g=c(this).children("thead");0===g.length&&(g=[b.createElement("thead")],this.appendChild(g[0]));r.nTHead=g[0];g=c(this).children("tbody");0===g.length&&(g=[b.createElement("tbody")],this.appendChild(g[0]));r.nTBody=g[0];r.nTBody.setAttribute("role","alert");r.nTBody.setAttribute("aria-live","polite");r.nTBody.setAttribute("aria-relevant","all");g=c(this).children("tfoot");0===g.length&&0<a.length&&(""!==
r.oScroll.sX||""!==r.oScroll.sY)&&(g=[b.createElement("tfoot")],this.appendChild(g[0]));0<g.length&&(r.nTFoot=g[0],U(r.aoFooter,r.nTFoot));if(p)for(a=0;a<f.aaData.length;a++)v(r,f.aaData[a]);else E(r);r.aiDisplay=r.aiDisplayMaster.slice();r.bInitialised=!0;!1===q&&Xa(r)}});Ja=null;return this};d.fnVersionCheck=function(a){var b=function(a,b){for(;a.length<b;)a+="0";return a},c=d.ext.sVersion.split(".");a=a.split(".");for(var e="",m="",p=0,r=a.length;p<r;p++)e+=b(c[p],3),m+=b(a[p],3);return parseInt(e,
10)>=parseInt(m,10)};d.fnIsDataTable=function(a){for(var b=d.settings,c=0;c<b.length;c++)if(b[c].nTable===a||b[c].nScrollHead===a||b[c].nScrollFoot===a)return!0;return!1};d.fnTables=function(a){var b=[];jQuery.each(d.settings,function(d,e){(!a||!0===a&&c(e.nTable).is(":visible"))&&b.push(e.nTable)});return b};d.version="1.9.4";d.settings=[];d.models={};d.models.ext={afnFiltering:[],afnSortData:[],aoFeatures:[],aTypes:[],fnVersionCheck:d.fnVersionCheck,iApiIndex:0,ofnSearch:{},oApi:{},oStdClasses:{},
oJUIClasses:{},oPagination:{},oSort:{},sVersion:d.version,sErrMode:"alert",_oExternConfig:{iNextUnique:0}};d.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0};d.models.oRow={nTr:null,_aData:[],_aSortData:[],_anHidden:[],_sRowStripe:""};d.models.oColumn={aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bUseRendered:null,bVisible:null,_bAutoType:!0,fnCreatedCell:null,fnGetData:null,fnRender:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,
sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null};d.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollAutoCss:!0,bScrollCollapse:!1,bScrollInfinite:!1,bServerSide:!1,
bSort:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCookieCallback:null,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(a){if(1E3>a)return a;var b=a+"";a=b.split("");for(var c="",b=b.length,d=0;d<b;d++)0===d%3&&0!==d&&(c=this.oLanguage.sInfoThousands+c),c=a[b-d-1]+c;return c},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:function(a,b,d,e){e.jqXHR=c.ajax({url:a,data:b,success:function(a){a.sError&&
e.oApi._fnLog(e,0,a.sError);c(e.oInstance).trigger("xhr",[e,a]);d(a)},dataType:"json",cache:!1,type:e.sServerMethod,error:function(a,b,c){"parsererror"==b&&e.oApi._fnLog(e,0,"DataTables warning: JSON data from server could not be parsed. This is caused by a JSON formatting error.")}})},fnServerParams:null,fnStateLoad:function(a){a=this.oApi._fnReadCookie(a.sCookiePrefix+a.sInstance);var b;try{b="function"===typeof c.parseJSON?c.parseJSON(a):eval("("+a+")")}catch(d){b=null}return b},fnStateLoadParams:null,
fnStateLoaded:null,fnStateSave:function(a,b){this.oApi._fnCreateCookie(a.sCookiePrefix+a.sInstance,this.oApi._fnJsonString(b),a.iCookieDuration,a.sCookiePrefix,a.fnCookieCallback)},fnStateSaveParams:null,iCookieDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iScrollLoadGap:100,iTabIndex:0,oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},
sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sInfoThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sUrl:"",sZeroRecords:"No matching records found"},oSearch:c.extend({},d.models.oSearch),sAjaxDataProp:"aaData",sAjaxSource:null,sCookiePrefix:"SpryMedia_DataTables_",sDom:"lfrtip",
sPaginationType:"two_button",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET"};d.defaults.columns={aDataSort:null,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bUseRendered:!0,bVisible:!0,fnCreatedCell:null,fnRender:null,iDataSort:-1,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null};d.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,
bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortClasses:null,bStateSave:null},oScroll:{bAutoCss:null,bCollapse:null,bInfinite:null,iBarWidth:0,iLoadGap:null,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1},aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aoColumns:[],aoHeader:[],aoFooter:[],asDataSearch:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:null,asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,
aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,sPaginationType:"two_button",iCookieDuration:0,sCookiePrefix:"",fnCookieCallback:null,aoStateSave:[],aoStateLoad:[],oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,
bAjaxDataGet:!0,jqXHR:null,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iDisplayEnd:10,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return this.oFeatures.bServerSide?parseInt(this._iRecordsTotal,10):this.aiDisplayMaster.length},fnRecordsDisplay:function(){return this.oFeatures.bServerSide?
parseInt(this._iRecordsDisplay,10):this.aiDisplay.length},fnDisplayEnd:function(){return this.oFeatures.bServerSide?!1===this.oFeatures.bPaginate||-1==this._iDisplayLength?this._iDisplayStart+this.aiDisplay.length:Math.min(this._iDisplayStart+this._iDisplayLength,this._iRecordsDisplay):this._iDisplayEnd},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null};d.ext=c.extend(!0,{},d.models.ext);c.extend(d.ext.oStdClasses,{sTable:"dataTable",sPagePrevEnabled:"paginate_enabled_previous",
sPagePrevDisabled:"paginate_disabled_previous",sPageNextEnabled:"paginate_enabled_next",sPageNextDisabled:"paginate_disabled_next",sPageJUINext:"",sPageJUIPrev:"",sPageButton:"paginate_button",sPageButtonActive:"paginate_active",sPageButtonStaticDisabled:"paginate_button paginate_button_disabled",sPageFirst:"first",sPagePrevious:"previous",sPageNext:"next",sPageLast:"last",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",
sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",
sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sFooterTH:"",sJUIHeader:"",sJUIFooter:""});c.extend(d.ext.oJUIClasses,d.ext.oStdClasses,{sPagePrevEnabled:"fg-button ui-button ui-state-default ui-corner-left",sPagePrevDisabled:"fg-button ui-button ui-state-default ui-corner-left ui-state-disabled",sPageNextEnabled:"fg-button ui-button ui-state-default ui-corner-right",sPageNextDisabled:"fg-button ui-button ui-state-default ui-corner-right ui-state-disabled",
sPageJUINext:"ui-icon ui-icon-circle-arrow-e",sPageJUIPrev:"ui-icon ui-icon-circle-arrow-w",sPageButton:"fg-button ui-button ui-state-default",sPageButtonActive:"fg-button ui-button ui-state-default ui-state-disabled",sPageButtonStaticDisabled:"fg-button ui-button ui-state-default ui-state-disabled",sPageFirst:"first ui-corner-tl ui-corner-bl",sPageLast:"last ui-corner-tr ui-corner-br",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:"ui-state-default",
sSortDesc:"ui-state-default",sSortable:"ui-state-default",sSortableAsc:"ui-state-default",sSortableDesc:"ui-state-default",sSortableNone:"ui-state-default",sSortJUIAsc:"css_right ui-icon ui-icon-triangle-1-n",sSortJUIDesc:"css_right ui-icon ui-icon-triangle-1-s",sSortJUI:"css_right ui-icon ui-icon-carat-2-n-s",sSortJUIAscAllowed:"css_right ui-icon ui-icon-carat-1-n",sSortJUIDescAllowed:"css_right ui-icon ui-icon-carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",
sScrollHead:"dataTables_scrollHead ui-state-default",sScrollFoot:"dataTables_scrollFoot ui-state-default",sFooterTH:"ui-state-default",sJUIHeader:"fg-toolbar ui-toolbar ui-widget-header ui-corner-tl ui-corner-tr ui-helper-clearfix",sJUIFooter:"fg-toolbar ui-toolbar ui-widget-header ui-corner-bl ui-corner-br ui-helper-clearfix"});c.extend(d.ext.oPagination,{two_button:{fnInit:function(a,b,d){var e=a.oLanguage.oPaginate,m=function(b){a.oApi._fnPageChange(a,b.data.action)&&d(a)},e=a.bJUI?'<a class="'+
a.oClasses.sPagePrevDisabled+'" tabindex="'+a.iTabIndex+'" role="button"><span class="'+a.oClasses.sPageJUIPrev+'"></span></a><a class="'+a.oClasses.sPageNextDisabled+'" tabindex="'+a.iTabIndex+'" role="button"><span class="'+a.oClasses.sPageJUINext+'"></span></a>':'<a class="'+a.oClasses.sPagePrevDisabled+'" tabindex="'+a.iTabIndex+'" role="button">'+e.sPrevious+'</a><a class="'+a.oClasses.sPageNextDisabled+'" tabindex="'+a.iTabIndex+'" role="button">'+e.sNext+"</a>";c(b).append(e);var p=c("a",b),
e=p[0],p=p[1];a.oApi._fnBindAction(e,{action:"previous"},m);a.oApi._fnBindAction(p,{action:"next"},m);a.aanFeatures.p||(b.id=a.sTableId+"_paginate",e.id=a.sTableId+"_previous",p.id=a.sTableId+"_next",e.setAttribute("aria-controls",a.sTableId),p.setAttribute("aria-controls",a.sTableId))},fnUpdate:function(a,b){if(a.aanFeatures.p)for(var c=a.oClasses,d=a.aanFeatures.p,e,p=0,r=d.length;p<r;p++)if(e=d[p].firstChild)e.className=0===a._iDisplayStart?c.sPagePrevDisabled:c.sPagePrevEnabled,e=e.nextSibling,
e.className=a.fnDisplayEnd()==a.fnRecordsDisplay()?c.sPageNextDisabled:c.sPageNextEnabled}},iFullNumbersShowPages:5,full_numbers:{fnInit:function(a,b,d){var e=a.oLanguage.oPaginate,m=a.oClasses,p=function(b){a.oApi._fnPageChange(a,b.data.action)&&d(a)};c(b).append('<a  tabindex="'+a.iTabIndex+'" class="'+m.sPageButton+" "+m.sPageFirst+'">'+e.sFirst+'</a><a  tabindex="'+a.iTabIndex+'" class="'+m.sPageButton+" "+m.sPagePrevious+'">'+e.sPrevious+'</a><span></span><a tabindex="'+a.iTabIndex+'" class="'+
m.sPageButton+" "+m.sPageNext+'">'+e.sNext+'</a><a tabindex="'+a.iTabIndex+'" class="'+m.sPageButton+" "+m.sPageLast+'">'+e.sLast+"</a>");var r=c("a",b),e=r[0],m=r[1],t=r[2],r=r[3];a.oApi._fnBindAction(e,{action:"first"},p);a.oApi._fnBindAction(m,{action:"previous"},p);a.oApi._fnBindAction(t,{action:"next"},p);a.oApi._fnBindAction(r,{action:"last"},p);a.aanFeatures.p||(b.id=a.sTableId+"_paginate",e.id=a.sTableId+"_first",m.id=a.sTableId+"_previous",t.id=a.sTableId+"_next",r.id=a.sTableId+"_last")},
fnUpdate:function(a,b){if(a.aanFeatures.p){var e=d.ext.oPagination.iFullNumbersShowPages,g=Math.floor(e/2),m=Math.ceil(a.fnRecordsDisplay()/a._iDisplayLength),p=Math.ceil(a._iDisplayStart/a._iDisplayLength)+1,r="",t,l=a.oClasses,q,w=a.aanFeatures.p,u=function(c){a.oApi._fnBindAction(this,{page:c+t-1},function(c){a.oApi._fnPageChange(a,c.data.page);b(a);c.preventDefault()})};-1===a._iDisplayLength?p=g=t=1:m<e?(t=1,g=m):p<=g?(t=1,g=e):p>=m-g?(t=m-e+1,g=m):(t=p-Math.ceil(e/2)+1,g=t+e-1);for(e=t;e<=g;e++)r+=
p!==e?'<a tabindex="'+a.iTabIndex+'" class="'+l.sPageButton+'">'+a.fnFormatNumber(e)+"</a>":'<a tabindex="'+a.iTabIndex+'" class="'+l.sPageButtonActive+'">'+a.fnFormatNumber(e)+"</a>";e=0;for(g=w.length;e<g;e++)q=w[e],q.hasChildNodes()&&(c("span:eq(0)",q).html(r).children("a").each(u),q=q.getElementsByTagName("a"),q=[q[0],q[1],q[q.length-2],q[q.length-1]],c(q).removeClass(l.sPageButton+" "+l.sPageButtonActive+" "+l.sPageButtonStaticDisabled),c([q[0],q[1]]).addClass(1==p?l.sPageButtonStaticDisabled:
l.sPageButton),c([q[2],q[3]]).addClass(0===m||p===m||-1===a._iDisplayLength?l.sPageButtonStaticDisabled:l.sPageButton))}}}});c.extend(d.ext.oSort,{"string-pre":function(a){"string"!=typeof a&&(a=null!==a&&a.toString?a.toString():"");return a.toLowerCase()},"string-asc":function(a,b){return a<b?-1:a>b?1:0},"string-desc":function(a,b){return a<b?1:a>b?-1:0},"html-pre":function(a){return a.replace(/<.*?>/g,"").toLowerCase()},"html-asc":function(a,b){return a<b?-1:a>b?1:0},"html-desc":function(a,b){return a<
b?1:a>b?-1:0},"date-pre":function(a){a=Date.parse(a);if(isNaN(a)||""===a)a=Date.parse("01/01/1970 00:00:00");return a},"date-asc":function(a,b){return a-b},"date-desc":function(a,b){return b-a},"numeric-pre":function(a){return"-"==a||""===a?0:1*a},"numeric-asc":function(a,b){return a-b},"numeric-desc":function(a,b){return b-a}});c.extend(d.ext.aTypes,[function(a){if("number"===typeof a)return"numeric";if("string"!==typeof a)return null;var b,c=!1;b=a.charAt(0);if(-1=="0123456789-".indexOf(b))return null;
for(var d=1;d<a.length;d++){b=a.charAt(d);if(-1=="0123456789.".indexOf(b))return null;if("."==b){if(c)return null;c=!0}}return"numeric"},function(a){var b=Date.parse(a);return null!==b&&!isNaN(b)||"string"===typeof a&&0===a.length?"date":null},function(a){return"string"===typeof a&&-1!=a.indexOf("<")&&-1!=a.indexOf(">")?"html":null}]);c.fn.DataTable=d;c.fn.dataTable=d;c.fn.dataTableSettings=d.settings;c.fn.dataTableExt=d.ext})}(window,document));
var ZeroClipboard_TableTools={version:"1.0.4-TableTools2",clients:{},moviePath:"",nextId:1,$:function(a){"string"==typeof a&&(a=document.getElementById(a));a.addClass||(a.hide=function(){this.style.display="none"},a.show=function(){this.style.display=""},a.addClass=function(a){this.removeClass(a);this.className+=" "+a},a.removeClass=function(a){this.className=this.className.replace(new RegExp("\\s*"+a+"\\s*")," ").replace(/^\s+/,"").replace(/\s+$/,"")},a.hasClass=function(a){return!!this.className.match(new RegExp("\\s*"+
a+"\\s*"))});return a},setMoviePath:function(a){this.moviePath=a},dispatch:function(a,b,e){(a=this.clients[a])&&a.receiveEvent(b,e)},register:function(a,b){this.clients[a]=b},getDOMObjectPosition:function(a){var b={left:0,top:0,width:a.width?a.width:a.offsetWidth,height:a.height?a.height:a.offsetHeight};""!=a.style.width&&(b.width=a.style.width.replace("px",""));""!=a.style.height&&(b.height=a.style.height.replace("px",""));for(;a;)b.left+=a.offsetLeft,b.top+=a.offsetTop,a=a.offsetParent;return b},
Client:function(a){this.handlers={};this.id=ZeroClipboard_TableTools.nextId++;this.movieId="ZeroClipboard_TableToolsMovie_"+this.id;ZeroClipboard_TableTools.register(this.id,this);a&&this.glue(a)}};
ZeroClipboard_TableTools.Client.prototype={id:0,ready:!1,movie:null,clipText:"",fileName:"",action:"copy",handCursorEnabled:!0,cssEffects:!0,handlers:null,sized:!1,glue:function(a,b){this.domElement=ZeroClipboard_TableTools.$(a);var e=99;this.domElement.style.zIndex&&(e=parseInt(this.domElement.style.zIndex)+1);var c=ZeroClipboard_TableTools.getDOMObjectPosition(this.domElement);this.div=document.createElement("div");var d=this.div.style;d.position="absolute";d.left="0px";d.top="0px";d.width=c.width+
"px";d.height=c.height+"px";d.zIndex=e;"undefined"!=typeof b&&""!=b&&(this.div.title=b);0!=c.width&&0!=c.height&&(this.sized=!0);this.domElement&&(this.domElement.appendChild(this.div),this.div.innerHTML=this.getHTML(c.width,c.height))},positionElement:function(){var a=ZeroClipboard_TableTools.getDOMObjectPosition(this.domElement),b=this.div.style;b.position="absolute";b.width=a.width+"px";b.height=a.height+"px";0!=a.width&&0!=a.height&&(this.sized=!0,b=this.div.childNodes[0],b.width=a.width,b.height=
a.height)},getHTML:function(a,b){var e="",c="id="+this.id+"&width="+a+"&height="+b;if(navigator.userAgent.match(/MSIE/))var d=location.href.match(/^https/i)?"https://":"http://",e=e+('<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+d+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=10,0,0,0" width="'+a+'" height="'+b+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+
ZeroClipboard_TableTools.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+c+'"/><param name="wmode" value="transparent"/></object>');else e+='<embed id="'+this.movieId+'" src="'+ZeroClipboard_TableTools.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+a+'" height="'+b+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+
c+'" wmode="transparent" />';return e},hide:function(){this.div&&(this.div.style.left="-2000px")},show:function(){this.reposition()},destroy:function(){if(this.domElement&&this.div){this.hide();this.div.innerHTML="";var a=document.getElementsByTagName("body")[0];try{a.removeChild(this.div)}catch(b){}this.div=this.domElement=null}},reposition:function(a){a&&((this.domElement=ZeroClipboard_TableTools.$(a))||this.hide());if(this.domElement&&this.div){a=ZeroClipboard_TableTools.getDOMObjectPosition(this.domElement);
var b=this.div.style;b.left=""+a.left+"px";b.top=""+a.top+"px"}},clearText:function(){this.clipText="";this.ready&&this.movie.clearText()},appendText:function(a){this.clipText+=a;this.ready&&this.movie.appendText(a)},setText:function(a){this.clipText=a;this.ready&&this.movie.setText(a)},setCharSet:function(a){this.charSet=a;this.ready&&this.movie.setCharSet(a)},setBomInc:function(a){this.incBom=a;this.ready&&this.movie.setBomInc(a)},setFileName:function(a){this.fileName=a;this.ready&&this.movie.setFileName(a)},
setAction:function(a){this.action=a;this.ready&&this.movie.setAction(a)},addEventListener:function(a,b){a=a.toString().toLowerCase().replace(/^on/,"");this.handlers[a]||(this.handlers[a]=[]);this.handlers[a].push(b)},setHandCursor:function(a){this.handCursorEnabled=a;this.ready&&this.movie.setHandCursor(a)},setCSSEffects:function(a){this.cssEffects=!!a},receiveEvent:function(a,b){a=a.toString().toLowerCase().replace(/^on/,"");switch(a){case "load":this.movie=document.getElementById(this.movieId);
if(!this.movie){var e=this;setTimeout(function(){e.receiveEvent("load",null)},1);return}if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/)){e=this;setTimeout(function(){e.receiveEvent("load",null)},100);this.ready=!0;return}this.ready=!0;this.movie.clearText();this.movie.appendText(this.clipText);this.movie.setFileName(this.fileName);this.movie.setAction(this.action);this.movie.setCharSet(this.charSet);this.movie.setBomInc(this.incBom);this.movie.setHandCursor(this.handCursorEnabled);
break;case "mouseover":this.domElement&&this.cssEffects&&this.recoverActive&&this.domElement.addClass("active");break;case "mouseout":this.domElement&&this.cssEffects&&(this.recoverActive=!1,this.domElement.hasClass("active")&&(this.domElement.removeClass("active"),this.recoverActive=!0));break;case "mousedown":this.domElement&&this.cssEffects&&this.domElement.addClass("active");break;case "mouseup":this.domElement&&this.cssEffects&&(this.domElement.removeClass("active"),this.recoverActive=!1)}if(this.handlers[a])for(var c=
0,d=this.handlers[a].length;c<d;c++){var f=this.handlers[a][c];if("function"==typeof f)f(this,b);else if("object"==typeof f&&2==f.length)f[0][f[1]](this,b);else if("string"==typeof f)window[f](this,b)}}};var TableTools;
(function(a,b,e){TableTools=function(b,d){!this instanceof TableTools&&alert("Warning: TableTools must be initialised with the keyword 'new'");this.s={that:this,dt:b.fnSettings(),print:{saveStart:-1,saveLength:-1,saveScroll:-1,funcEnd:function(){}},buttonCounter:0,select:{type:"",selected:[],preRowSelect:null,postSelected:null,postDeselected:null,all:!1,selectedClass:""},custom:{},swfPath:"",buttonSet:[],master:!1,tags:{}};this.dom={container:null,table:null,print:{hidden:[],message:null},collection:{collection:null,
background:null}};this.classes=a.extend(!0,{},TableTools.classes);this.s.dt.bJUI&&a.extend(!0,this.classes,TableTools.classes_themeroller);this.fnSettings=function(){return this.s};"undefined"==typeof d&&(d={});this._fnConstruct(d);return this};TableTools.prototype={fnGetSelected:function(a){var b=[],e=this.s.dt.aoData,n=this.s.dt.aiDisplay,h;if(a)for(a=0,h=n.length;a<h;a++)e[n[a]]._DTTT_selected&&b.push(e[n[a]].nTr);else for(a=0,h=e.length;a<h;a++)e[a]._DTTT_selected&&b.push(e[a].nTr);return b},
fnGetSelectedData:function(){var a=[],b=this.s.dt.aoData,e,n;e=0;for(n=b.length;e<n;e++)b[e]._DTTT_selected&&a.push(this.s.dt.oInstance.fnGetData(e));return a},fnIsSelected:function(a){a=this.s.dt.oInstance.fnGetPosition(a);return!0===this.s.dt.aoData[a]._DTTT_selected?!0:!1},fnSelectAll:function(a){var b=this._fnGetMasterSettings();this._fnRowSelect(!0===a?b.dt.aiDisplay:b.dt.aoData)},fnSelectNone:function(a){this._fnGetMasterSettings();this._fnRowDeselect(this.fnGetSelected(a))},fnSelect:function(a){"single"==
this.s.select.type?(this.fnSelectNone(),this._fnRowSelect(a)):"multi"==this.s.select.type&&this._fnRowSelect(a)},fnDeselect:function(a){this._fnRowDeselect(a)},fnGetTitle:function(a){var b="";"undefined"!=typeof a.sTitle&&""!==a.sTitle?b=a.sTitle:(a=e.getElementsByTagName("title"),0<a.length&&(b=a[0].innerHTML));return 4>"\u00a1".toString().length?b.replace(/[^a-zA-Z0-9_\u00A1-\uFFFF\.,\-_ !\(\)]/g,""):b.replace(/[^a-zA-Z0-9_\.,\-_ !\(\)]/g,"")},fnCalcColRatios:function(a){var b=this.s.dt.aoColumns;
a=this._fnColumnTargets(a.mColumns);var e=[],n=0,h=0,g,m;g=0;for(m=a.length;g<m;g++)a[g]&&(n=b[g].nTh.offsetWidth,h+=n,e.push(n));g=0;for(m=e.length;g<m;g++)e[g]/=h;return e.join("\t")},fnGetTableData:function(a){if(this.s.dt)return this._fnGetDataTablesData(a)},fnSetText:function(a,b){this._fnFlashSetText(a,b)},fnResizeButtons:function(){for(var a in ZeroClipboard_TableTools.clients)if(a){var b=ZeroClipboard_TableTools.clients[a];"undefined"!=typeof b.domElement&&b.domElement.parentNode&&b.positionElement()}},
fnResizeRequired:function(){for(var a in ZeroClipboard_TableTools.clients)if(a){var b=ZeroClipboard_TableTools.clients[a];if("undefined"!=typeof b.domElement&&b.domElement.parentNode==this.dom.container&&!1===b.sized)return!0}return!1},fnPrint:function(a,b){void 0===b&&(b={});void 0===a||a?this._fnPrintStart(b):this._fnPrintEnd()},fnInfo:function(b,d){var f=e.createElement("div");f.className=this.classes.print.info;f.innerHTML=b;e.body.appendChild(f);setTimeout(function(){a(f).fadeOut("normal",function(){e.body.removeChild(f)})},
d)},_fnConstruct:function(a){var b=this;this._fnCustomiseSettings(a);this.dom.container=e.createElement(this.s.tags.container);this.dom.container.className=this.classes.container;"none"!=this.s.select.type&&this._fnRowSelectConfig();this._fnButtonDefinations(this.s.buttonSet,this.dom.container);this.s.dt.aoDestroyCallback.push({sName:"TableTools",fn:function(){b.dom.container.innerHTML=""}})},_fnCustomiseSettings:function(b){"undefined"==typeof this.s.dt._TableToolsInit&&(this.s.master=!0,this.s.dt._TableToolsInit=
!0);this.dom.table=this.s.dt.nTable;this.s.custom=a.extend({},TableTools.DEFAULTS,b);this.s.swfPath=this.s.custom.sSwfPath;"undefined"!=typeof ZeroClipboard_TableTools&&(ZeroClipboard_TableTools.moviePath=this.s.swfPath);this.s.select.type=this.s.custom.sRowSelect;this.s.select.preRowSelect=this.s.custom.fnPreRowSelect;this.s.select.postSelected=this.s.custom.fnRowSelected;this.s.select.postDeselected=this.s.custom.fnRowDeselected;this.s.custom.sSelectedClass&&(this.classes.select.row=this.s.custom.sSelectedClass);
this.s.tags=this.s.custom.oTags;this.s.buttonSet=this.s.custom.aButtons},_fnButtonDefinations:function(b,d){for(var e,n=0,h=b.length;n<h;n++){if("string"==typeof b[n]){if("undefined"==typeof TableTools.BUTTONS[b[n]]){alert("TableTools: Warning - unknown button type: "+b[n]);continue}e=a.extend({},TableTools.BUTTONS[b[n]],!0)}else{if("undefined"==typeof TableTools.BUTTONS[b[n].sExtends]){alert("TableTools: Warning - unknown button type: "+b[n].sExtends);continue}e=a.extend({},TableTools.BUTTONS[b[n].sExtends],
!0);e=a.extend(e,b[n],!0)}d.appendChild(this._fnCreateButton(e,a(d).hasClass(this.classes.collection.container)))}},_fnCreateButton:function(a,b){var e=this._fnButtonBase(a,b);a.sAction.match(/flash/)?this._fnFlashConfig(e,a):"text"==a.sAction?this._fnTextConfig(e,a):"div"==a.sAction?this._fnTextConfig(e,a):"collection"==a.sAction&&(this._fnTextConfig(e,a),this._fnCollectionConfig(e,a));return e},_fnButtonBase:function(a,b){var f,n,h;b?(f="default"!==a.sTag?a.sTag:this.s.tags.collection.button,n=
"default"!==a.sLinerTag?a.sLiner:this.s.tags.collection.liner,h=this.classes.collection.buttons.normal):(f="default"!==a.sTag?a.sTag:this.s.tags.button,n="default"!==a.sLinerTag?a.sLiner:this.s.tags.liner,h=this.classes.buttons.normal);f=e.createElement(f);n=e.createElement(n);var g=this._fnGetMasterSettings();f.className=h+" "+a.sButtonClass;f.setAttribute("id","ToolTables_"+this.s.dt.sInstance+"_"+g.buttonCounter);f.appendChild(n);n.innerHTML=a.sButtonText;g.buttonCounter++;return f},_fnGetMasterSettings:function(){if(this.s.master)return this.s;
for(var a=TableTools._aInstances,b=0,e=a.length;b<e;b++)if(this.dom.table==a[b].s.dt.nTable)return a[b].s},_fnCollectionConfig:function(a,b){var f=e.createElement(this.s.tags.collection.container);f.style.display="none";f.className=this.classes.collection.container;b._collection=f;e.body.appendChild(f);this._fnButtonDefinations(b.aButtons,f)},_fnCollectionShow:function(c,d){var f=this,n=a(c).offset(),h=d._collection,g=n.left,n=n.top+a(c).outerHeight(),m=a(b).height(),p=a(e).height(),r=a(b).width(),
t=a(e).width();h.style.position="absolute";h.style.left=g+"px";h.style.top=n+"px";h.style.display="block";a(h).css("opacity",0);var l=e.createElement("div");l.style.position="absolute";l.style.left="0px";l.style.top="0px";l.style.height=(m>p?m:p)+"px";l.style.width=(r>t?r:t)+"px";l.className=this.classes.collection.background;a(l).css("opacity",0);e.body.appendChild(l);e.body.appendChild(h);m=a(h).outerWidth();r=a(h).outerHeight();g+m>t&&(h.style.left=t-m+"px");n+r>p&&(h.style.top=n-r-a(c).outerHeight()+
"px");this.dom.collection.collection=h;this.dom.collection.background=l;setTimeout(function(){a(h).animate({opacity:1},500);a(l).animate({opacity:.25},500)},10);this.fnResizeButtons();a(l).click(function(){f._fnCollectionHide.call(f,null,null)})},_fnCollectionHide:function(b,d){null!==d&&"collection"==d.sExtends||null===this.dom.collection.collection||(a(this.dom.collection.collection).animate({opacity:0},500,function(a){this.style.display="none"}),a(this.dom.collection.background).animate({opacity:0},
500,function(a){this.parentNode.removeChild(this)}),this.dom.collection.collection=null,this.dom.collection.background=null)},_fnRowSelectConfig:function(){if(this.s.master){var b=this,d=this.s.dt;a(d.nTable).addClass(this.classes.select.table);a("tr",d.nTBody).live("click",function(a){this.parentNode==d.nTBody&&null!==d.oInstance.fnGetData(this)&&(b.fnIsSelected(this)?b._fnRowDeselect(this,a):"single"==b.s.select.type?(b.fnSelectNone(),b._fnRowSelect(this,a)):"multi"==b.s.select.type&&b._fnRowSelect(this,
a))});d.oApi._fnCallbackReg(d,"aoRowCreatedCallback",function(e,n,h){d.aoData[h]._DTTT_selected&&a(e).addClass(b.classes.select.row)},"TableTools-SelectAll")}},_fnRowSelect:function(b,d){var e=this._fnSelectData(b),n=[],h,g;h=0;for(g=e.length;h<g;h++)e[h].nTr&&n.push(e[h].nTr);if(null===this.s.select.preRowSelect||this.s.select.preRowSelect.call(this,d,n,!0)){h=0;for(g=e.length;h<g;h++)e[h]._DTTT_selected=!0,e[h].nTr&&a(e[h].nTr).addClass(this.classes.select.row);null!==this.s.select.postSelected&&
this.s.select.postSelected.call(this,n);TableTools._fnEventDispatch(this,"select",n,!0)}},_fnRowDeselect:function(b,d){var e=this._fnSelectData(b),n=[],h,g;h=0;for(g=e.length;h<g;h++)e[h].nTr&&n.push(e[h].nTr);if(null===this.s.select.preRowSelect||this.s.select.preRowSelect.call(this,d,n,!1)){h=0;for(g=e.length;h<g;h++)e[h]._DTTT_selected=!1,e[h].nTr&&a(e[h].nTr).removeClass(this.classes.select.row);null!==this.s.select.postDeselected&&this.s.select.postDeselected.call(this,n);TableTools._fnEventDispatch(this,
"select",n,!1)}},_fnSelectData:function(a){var b=[],e,n,h;if(a.nodeName)e=this.s.dt.oInstance.fnGetPosition(a),b.push(this.s.dt.aoData[e]);else if("undefined"!==typeof a.length)for(n=0,h=a.length;n<h;n++)a[n].nodeName?(e=this.s.dt.oInstance.fnGetPosition(a[n]),b.push(this.s.dt.aoData[e])):"number"===typeof a[n]?b.push(this.s.dt.aoData[a[n]]):b.push(a[n]);else b.push(a);return b},_fnTextConfig:function(b,d){var e=this;null!==d.fnInit&&d.fnInit.call(this,b,d);""!==d.sToolTip&&(b.title=d.sToolTip);a(b).hover(function(){null!==
d.fnMouseover&&d.fnMouseover.call(this,b,d,null)},function(){null!==d.fnMouseout&&d.fnMouseout.call(this,b,d,null)});null!==d.fnSelect&&TableTools._fnEventListen(this,"select",function(a){d.fnSelect.call(e,b,d,a)});a(b).click(function(a){null!==d.fnClick&&d.fnClick.call(e,b,d,null);null!==d.fnComplete&&d.fnComplete.call(e,b,d,null,null);e._fnCollectionHide(b,d)})},_fnFlashConfig:function(a,b){var e=this,n=new ZeroClipboard_TableTools.Client;null!==b.fnInit&&b.fnInit.call(this,a,b);n.setHandCursor(!0);
"flash_save"==b.sAction?(n.setAction("save"),n.setCharSet("utf16le"==b.sCharSet?"UTF16LE":"UTF8"),n.setBomInc(b.bBomInc),n.setFileName(b.sFileName.replace("*",this.fnGetTitle(b)))):"flash_pdf"==b.sAction?(n.setAction("pdf"),n.setFileName(b.sFileName.replace("*",this.fnGetTitle(b)))):n.setAction("copy");n.addEventListener("mouseOver",function(h){null!==b.fnMouseover&&b.fnMouseover.call(e,a,b,n)});n.addEventListener("mouseOut",function(h){null!==b.fnMouseout&&b.fnMouseout.call(e,a,b,n)});n.addEventListener("mouseDown",
function(h){null!==b.fnClick&&b.fnClick.call(e,a,b,n)});n.addEventListener("complete",function(h,g){null!==b.fnComplete&&b.fnComplete.call(e,a,b,n,g);e._fnCollectionHide(a,b)});this._fnFlashGlue(n,a,b.sToolTip)},_fnFlashGlue:function(a,b,f){var n=this,h=b.getAttribute("id");e.getElementById(h)?a.glue(b,f):setTimeout(function(){n._fnFlashGlue(a,b,f)},100)},_fnFlashSetText:function(a,b){var e=this._fnChunkData(b,8192);a.clearText();for(var n=0,h=e.length;n<h;n++)a.appendText(e[n])},_fnColumnTargets:function(a){var b=
[],e=this.s.dt;if("object"==typeof a){i=0;for(iLen=e.aoColumns.length;i<iLen;i++)b.push(!1);i=0;for(iLen=a.length;i<iLen;i++)b[a[i]]=!0}else if("visible"==a)for(i=0,iLen=e.aoColumns.length;i<iLen;i++)b.push(e.aoColumns[i].bVisible?!0:!1);else if("hidden"==a)for(i=0,iLen=e.aoColumns.length;i<iLen;i++)b.push(e.aoColumns[i].bVisible?!1:!0);else if("sortable"==a)for(i=0,iLen=e.aoColumns.length;i<iLen;i++)b.push(e.aoColumns[i].bSortable?!0:!1);else for(i=0,iLen=e.aoColumns.length;i<iLen;i++)b.push(!0);
return b},_fnNewline:function(a){return"auto"==a.sNewLine?navigator.userAgent.match(/Windows/)?"\r\n":"\n":a.sNewLine},_fnGetDataTablesData:function(b){var d,e,n,h,g,m=[],p="",r=this.s.dt,t,l=new RegExp(b.sFieldBoundary,"g"),q=this._fnColumnTargets(b.mColumns);n="undefined"!=typeof b.bSelectedOnly?b.bSelectedOnly:!1;if(b.bHeader){g=[];d=0;for(e=r.aoColumns.length;d<e;d++)q[d]&&(p=r.aoColumns[d].sTitle.replace(/\n/g," ").replace(/<.*?>/g,"").replace(/^\s+|\s+$/g,""),p=this._fnHtmlDecode(p),g.push(this._fnBoundData(p,
b.sFieldBoundary,l)));m.push(g.join(b.sFieldSeperator))}var w=r.aiDisplay;h=this.fnGetSelected();if("none"!==this.s.select.type&&n&&0!==h.length)for(w=[],d=0,e=h.length;d<e;d++)w.push(r.oInstance.fnGetPosition(h[d]));n=0;for(h=w.length;n<h;n++){t=r.aoData[w[n]].nTr;g=[];d=0;for(e=r.aoColumns.length;d<e;d++)q[d]&&(p=r.oApi._fnGetCellData(r,w[n],d,"display"),b.fnCellRender?p=b.fnCellRender(p,d,t,w[n])+"":"string"==typeof p?(p=p.replace(/\n/g," "),p=p.replace(/<img.*?\s+alt\s*=\s*(?:"([^"]+)"|'([^']+)'|([^\s>]+)).*?>/gi,
"$1$2$3"),p=p.replace(/<.*?>/g,"")):p+="",p=p.replace(/^\s+/,"").replace(/\s+$/,""),p=this._fnHtmlDecode(p),g.push(this._fnBoundData(p,b.sFieldBoundary,l)));m.push(g.join(b.sFieldSeperator));b.bOpenRows&&(d=a.grep(r.aoOpenRows,function(a){return a.nParent===t}),1===d.length&&(p=this._fnBoundData(a("td",d[0].nTr).html(),b.sFieldBoundary,l),m.push(p)))}if(b.bFooter&&null!==r.nTFoot){g=[];d=0;for(e=r.aoColumns.length;d<e;d++)q[d]&&null!==r.aoColumns[d].nTf&&(p=r.aoColumns[d].nTf.innerHTML.replace(/\n/g,
" ").replace(/<.*?>/g,""),p=this._fnHtmlDecode(p),g.push(this._fnBoundData(p,b.sFieldBoundary,l)));m.push(g.join(b.sFieldSeperator))}return _sLastData=m.join(this._fnNewline(b))},_fnBoundData:function(a,b,e){return""===b?a:b+a.replace(e,b+b)+b},_fnChunkData:function(a,b){for(var e=[],n=a.length,h=0;h<n;h+=b)h+b<n?e.push(a.substring(h,h+b)):e.push(a.substring(h,n));return e},_fnHtmlDecode:function(a){if(-1===a.indexOf("&"))return a;var b=e.createElement("div");return a.replace(/&([^\s]*);/g,function(a,
c){if("#"===a.substr(1,1))return String.fromCharCode(Number(c.substr(1)));b.innerHTML=a;return b.childNodes[0].nodeValue})},_fnPrintStart:function(c){var d=this,f=this.s.dt;this._fnPrintHideNodes(f.nTable);this.s.print.saveStart=f._iDisplayStart;this.s.print.saveLength=f._iDisplayLength;c.bShowAll&&(f._iDisplayStart=0,f._iDisplayLength=-1,f.oApi._fnCalculateEnd(f),f.oApi._fnDraw(f));if(""!==f.oScroll.sX||""!==f.oScroll.sY)this._fnPrintScrollStart(f),a(this.s.dt.nTable).bind("draw.DTTT_Print",function(){d._fnPrintScrollStart(f)});
var n=f.aanFeatures,h;for(h in n)if("i"!=h&&"t"!=h&&1==h.length)for(var g=0,m=n[h].length;g<m;g++)this.dom.print.hidden.push({node:n[h][g],display:"block"}),n[h][g].style.display="none";a(e.body).addClass(this.classes.print.body);""!==c.sInfo&&this.fnInfo(c.sInfo,3E3);c.sMessage&&(this.dom.print.message=e.createElement("div"),this.dom.print.message.className=this.classes.print.message,this.dom.print.message.innerHTML=c.sMessage,e.body.insertBefore(this.dom.print.message,e.body.childNodes[0]));this.s.print.saveScroll=
a(b).scrollTop();b.scrollTo(0,0);a(e).bind("keydown.DTTT",function(a){27==a.keyCode&&(a.preventDefault(),d._fnPrintEnd.call(d,a))})},_fnPrintEnd:function(c){c=this.s.dt;var d=this.s.print,f=this.dom.print;this._fnPrintShowNodes();if(""!==c.oScroll.sX||""!==c.oScroll.sY)a(this.s.dt.nTable).unbind("draw.DTTT_Print"),this._fnPrintScrollEnd();b.scrollTo(0,d.saveScroll);null!==f.message&&(e.body.removeChild(f.message),f.message=null);a(e.body).removeClass("DTTT_Print");c._iDisplayStart=d.saveStart;c._iDisplayLength=
d.saveLength;c.oApi._fnCalculateEnd(c);c.oApi._fnDraw(c);a(e).unbind("keydown.DTTT")},_fnPrintScrollStart:function(){var b=this.s.dt;b.nScrollHead.getElementsByTagName("div")[0].getElementsByTagName("table");var d=b.nTable.parentNode,e=b.nTable.getElementsByTagName("thead");0<e.length&&b.nTable.removeChild(e[0]);null!==b.nTFoot&&(e=b.nTable.getElementsByTagName("tfoot"),0<e.length&&b.nTable.removeChild(e[0]));e=b.nTHead.cloneNode(!0);b.nTable.insertBefore(e,b.nTable.childNodes[0]);null!==b.nTFoot&&
(e=b.nTFoot.cloneNode(!0),b.nTable.insertBefore(e,b.nTable.childNodes[1]));""!==b.oScroll.sX&&(b.nTable.style.width=a(b.nTable).outerWidth()+"px",d.style.width=a(b.nTable).outerWidth()+"px",d.style.overflow="visible");""!==b.oScroll.sY&&(d.style.height=a(b.nTable).outerHeight()+"px",d.style.overflow="visible")},_fnPrintScrollEnd:function(){var a=this.s.dt,b=a.nTable.parentNode;""!==a.oScroll.sX&&(b.style.width=a.oApi._fnStringToCss(a.oScroll.sX),b.style.overflow="auto");""!==a.oScroll.sY&&(b.style.height=
a.oApi._fnStringToCss(a.oScroll.sY),b.style.overflow="auto")},_fnPrintShowNodes:function(){for(var a=this.dom.print.hidden,b=0,e=a.length;b<e;b++)a[b].node.style.display=a[b].display;a.splice(0,a.length)},_fnPrintHideNodes:function(b){for(var d=this.dom.print.hidden,e=b.parentNode,n=e.childNodes,h=0,g=n.length;h<g;h++)if(n[h]!=b&&1==n[h].nodeType){var m=a(n[h]).css("display");"none"!=m&&(d.push({node:n[h],display:m}),n[h].style.display="none")}"BODY"!=e.nodeName&&this._fnPrintHideNodes(e)}};TableTools._aInstances=
[];TableTools._aListeners=[];TableTools.fnGetMasters=function(){for(var a=[],b=0,e=TableTools._aInstances.length;b<e;b++)TableTools._aInstances[b].s.master&&a.push(TableTools._aInstances[b]);return a};TableTools.fnGetInstance=function(a){"object"!=typeof a&&(a=e.getElementById(a));for(var b=0,f=TableTools._aInstances.length;b<f;b++)if(TableTools._aInstances[b].s.master&&TableTools._aInstances[b].dom.table==a)return TableTools._aInstances[b];return null};TableTools._fnEventListen=function(a,b,e){TableTools._aListeners.push({that:a,
type:b,fn:e})};TableTools._fnEventDispatch=function(a,b,e,n){for(var h=TableTools._aListeners,g=0,m=h.length;g<m;g++)a.dom.table==h[g].that.dom.table&&h[g].type==b&&h[g].fn(e,n)};TableTools.buttonBase={sAction:"text",sTag:"default",sLinerTag:"default",sButtonClass:"DTTT_button_text",sButtonText:"Button text",sTitle:"",sToolTip:"",sCharSet:"utf8",bBomInc:!1,sFileName:"*.csv",sFieldBoundary:"",sFieldSeperator:"\t",sNewLine:"auto",mColumns:"all",bHeader:!0,bFooter:!0,bOpenRows:!1,bSelectedOnly:!1,fnMouseover:null,
fnMouseout:null,fnClick:null,fnSelect:null,fnComplete:null,fnInit:null,fnCellRender:null};TableTools.BUTTONS={csv:a.extend({},TableTools.buttonBase,{sAction:"flash_save",sButtonClass:"DTTT_button_csv",sButtonText:"CSV",sFieldBoundary:'"',sFieldSeperator:",",fnClick:function(a,b,e){this.fnSetText(e,this.fnGetTableData(b))}}),xls:a.extend({},TableTools.buttonBase,{sAction:"flash_save",sCharSet:"utf16le",bBomInc:!0,sButtonClass:"DTTT_button_xls",sButtonText:"Excel",fnClick:function(a,b,e){this.fnSetText(e,
this.fnGetTableData(b))}}),copy:a.extend({},TableTools.buttonBase,{sAction:"flash_copy",sButtonClass:"DTTT_button_copy",sButtonText:"Copy",fnClick:function(a,b,e){this.fnSetText(e,this.fnGetTableData(b))},fnComplete:function(a,b,e,n){a=n.split("\n").length;a=null===this.s.dt.nTFoot?a-1:a-2;this.fnInfo("<h6>Table copied</h6><p>Copied "+a+" row"+(1==a?"":"s")+" to the clipboard.</p>",1500)}}),pdf:a.extend({},TableTools.buttonBase,{sAction:"flash_pdf",sNewLine:"\n",sFileName:"*.pdf",sButtonClass:"DTTT_button_pdf",
sButtonText:"PDF",sPdfOrientation:"portrait",sPdfSize:"A4",sPdfMessage:"",fnClick:function(a,b,e){this.fnSetText(e,"title:"+this.fnGetTitle(b)+"\nmessage:"+b.sPdfMessage+"\ncolWidth:"+this.fnCalcColRatios(b)+"\norientation:"+b.sPdfOrientation+"\nsize:"+b.sPdfSize+"\n--/TableToolsOpts--\n"+this.fnGetTableData(b))}}),print:a.extend({},TableTools.buttonBase,{sInfo:"<h6>Print view</h6><p>Please use your browser's print function to print this table. Press escape when finished.",sMessage:null,bShowAll:!0,
sToolTip:"View print view",sButtonClass:"DTTT_button_print",sButtonText:"Print",fnClick:function(a,b){this.fnPrint(!0,b)}}),text:a.extend({},TableTools.buttonBase),select:a.extend({},TableTools.buttonBase,{sButtonText:"Select button",fnSelect:function(b,d){0!==this.fnGetSelected().length?a(b).removeClass(this.classes.buttons.disabled):a(b).addClass(this.classes.buttons.disabled)},fnInit:function(b,d){a(b).addClass(this.classes.buttons.disabled)}}),select_single:a.extend({},TableTools.buttonBase,{sButtonText:"Select button",
fnSelect:function(b,d){1==this.fnGetSelected().length?a(b).removeClass(this.classes.buttons.disabled):a(b).addClass(this.classes.buttons.disabled)},fnInit:function(b,d){a(b).addClass(this.classes.buttons.disabled)}}),select_all:a.extend({},TableTools.buttonBase,{sButtonText:"Select all",fnClick:function(a,b){this.fnSelectAll()},fnSelect:function(b,d){this.fnGetSelected().length==this.s.dt.fnRecordsDisplay()?a(b).addClass(this.classes.buttons.disabled):a(b).removeClass(this.classes.buttons.disabled)}}),
select_none:a.extend({},TableTools.buttonBase,{sButtonText:"Deselect all",fnClick:function(a,b){this.fnSelectNone()},fnSelect:function(b,d){0!==this.fnGetSelected().length?a(b).removeClass(this.classes.buttons.disabled):a(b).addClass(this.classes.buttons.disabled)},fnInit:function(b,d){a(b).addClass(this.classes.buttons.disabled)}}),ajax:a.extend({},TableTools.buttonBase,{sAjaxUrl:"/xhr.php",sButtonText:"Ajax button",fnClick:function(b,d){var e=this.fnGetTableData(d);a.ajax({url:d.sAjaxUrl,data:[{name:"tableData",
value:e}],success:d.fnAjaxComplete,dataType:"json",type:"POST",cache:!1,error:function(){alert("Error detected when sending table data to server")}})},fnAjaxComplete:function(a){alert("Ajax complete")}}),div:a.extend({},TableTools.buttonBase,{sAction:"div",sTag:"div",sButtonClass:"DTTT_nonbutton",sButtonText:"Text button"}),collection:a.extend({},TableTools.buttonBase,{sAction:"collection",sButtonClass:"DTTT_button_collection",sButtonText:"Collection",fnClick:function(a,b){this._fnCollectionShow(a,
b)}})};TableTools.classes={container:"DTTT_container",buttons:{normal:"DTTT_button",disabled:"DTTT_disabled"},collection:{container:"DTTT_collection",background:"DTTT_collection_background",buttons:{normal:"DTTT_button",disabled:"DTTT_disabled"}},select:{table:"DTTT_selectable",row:"DTTT_selected"},print:{body:"DTTT_Print",info:"DTTT_print_info",message:"DTTT_PrintMessage"}};TableTools.classes_themeroller={container:"DTTT_container ui-buttonset ui-buttonset-multi",buttons:{normal:"DTTT_button ui-button ui-state-default"},
collection:{container:"DTTT_collection ui-buttonset ui-buttonset-multi"}};TableTools.DEFAULTS={sSwfPath:"media/swf/copy_csv_xls_pdf.swf",sRowSelect:"none",sSelectedClass:null,fnPreRowSelect:null,fnRowSelected:null,fnRowDeselected:null,aButtons:["copy","csv","xls","pdf","print"],oTags:{container:"div",button:"a",liner:"span",collection:{container:"div",button:"a",liner:"span"}}};TableTools.prototype.CLASS="TableTools";TableTools.VERSION="2.1.4";TableTools.prototype.VERSION=TableTools.VERSION;"function"==
typeof a.fn.dataTable&&"function"==typeof a.fn.dataTableExt.fnVersionCheck&&a.fn.dataTableExt.fnVersionCheck("1.9.0")?a.fn.dataTableExt.aoFeatures.push({fnInit:function(a){a=new TableTools(a.oInstance,"undefined"!=typeof a.oInit.oTableTools?a.oInit.oTableTools:{});TableTools._aInstances.push(a);return a.dom.container},cFeature:"T",sFeature:"TableTools"}):alert("Warning: TableTools 2 requires DataTables 1.9.0 or newer - www.datatables.net/download");a.fn.DataTable.TableTools=TableTools})(jQuery,window,
document);
(function(a){function b(b,c,d){var e="text_filter";d&&(e="number_filter");e=a('<input type="text" class="search_init '+e+'" value="'+g+'"/>');m.html(e);d?m.wrapInner('<span class="filter_column filter_number" />'):m.wrapInner('<span class="filter_column filter_text" />');n[h]=g;var f=h;d&&!oTable.fnSettings().oFeatures.bServerSide?e.keyup(function(){oTable.fnFilter("^"+this.value,f,!0,!1)}):e.keyup(function(){oTable.fnFilter(this.value,f,b,c)});e.focus(function(){a(this).hasClass("search_init")&&(a(this).removeClass("search_init"),
this.value="")});e.blur(function(){""==this.value&&(a(this).addClass("search_init"),this.value=n[f])})}function e(){m.html(f(0));var b="tablerange_from_"+h,c=a('<input type="text" class="number_range_filter" id="'+b+'" rel="'+h+'"/>');m.append(c);m.append(f(1));var d="tablerange_to_"+h,c=a('<input type="text" class="number_range_filter" id="'+d+'" rel="'+h+'"/>');m.append(c);m.append(f(2));m.wrapInner('<span class="filterColumn filter_number_range" />');var e=h;t.push(h);a.fn.dataTableExt.afnFiltering.push(function(a,
c,f){a=1*document.getElementById(b).value;f=1*document.getElementById(d).value;c="-"==c[e]?0:1*c[e];return""==a&&""==f||""==a&&c<f||a<c&&""==f||a<c&&c<f?!0:!1});a("#"+b+",#"+d,m).keyup(function(){var a=1*document.getElementById(b).value,c=1*document.getElementById(d).value;0!=a&&0!=c&&a>c||oTable.fnDraw()})}function c(){m.html(f(0));var b="tablerange_from_"+h,c=a('<input type="text" class="date_range_filter" id="'+b+'" rel="'+h+'"/>');c.datepicker();m.append(c);m.append(f(1));var d="tablerange_to_"+
h,e=a('<input type="text" class="date_range_filter" id="'+d+'" rel="'+h+'"/>');m.append(e);m.append(f(2));m.wrapInner('<span class="filterColumn filter_date_range" />');e.datepicker();var g=h;t.push(h);a.fn.dataTableExt.afnFiltering.push(function(b,d,f){b=c.datepicker("getDate");f=e.datepicker("getDate");d=a.datepicker.parseDate(a.datepicker.regional[""].dateFormat,d[g]);return null==d?!1:null==b&&null==f||null==b&&d<f||b<d&&null==f||b<d&&d<f?!0:!1});a("#"+b+",#"+d,m).change(function(){oTable.fnDraw()})}
function d(b){var c=h,d='<select class="search_init select_filter"><option value="" class="search_init">'+g+"</option>",e,f=b.length;for(e=0;e<f;e++)d+='<option value="'+b[e]+'">'+b[e]+"</option>";b=a(d+"</select>");m.html(b);m.wrapInner('<span class="filterColumn filter_select" />');b.change(function(){""!=a(this).val()?a(this).removeClass("search_init"):a(this).addClass("search_init");oTable.fnFilter(a(this).val(),c)})}function f(a){switch(a){case 0:return p.substring(0,p.indexOf("{from}"));case 1:return p.substring(p.indexOf("{from}")+
6,p.indexOf("{to}"));default:return p.substring(p.indexOf("{to}")+4)}}var n,h,g,m,p="From {from} to {to}",r=[],t=[];a.fn.columnFilter=function(f){oTable=this;properties=a.extend({sPlaceHolder:"foot",sRangeSeparator:"~",iFilteringDelay:500,aoColumns:null,sRangeFormat:"From {from} to {to}"},f);return this.each(function(){n=[];var f="tfoot tr";"head:after"==properties.sPlaceHolder?f="thead tr:last":"head:before"==properties.sPlaceHolder&&(a("thead tr:last").detach().prependTo("thead"),f="thead tr:first");
a(f+" th",oTable).each(function(f){h=f;f={type:"text",bRegex:!1,bSmart:!0};if(null!=properties.aoColumns){if(properties.aoColumns.length<h||null==properties.aoColumns[h])return;f=properties.aoColumns[h]}g=a(this).text();m=a(a(this)[0]);if(null!=f)switch(p=null!=f.sRangeFormat?f.sRangeFormat:properties.sRangeFormat,f.type){case "number":b(!0,!1,!0);break;case "text":bRegex=null==f.bRegex?!1:f.bRegex;bSmart=null==f.bSmart?!1:f.bSmart;b(bRegex,bSmart,!1);break;case "select":d(f.values);break;case "number-range":e();
break;case "date-range":c()}});for(j=0;j<t.length;j++){var l=t[j];r.push(function(){return a("#range_from_"+l).val()+properties.sRangeSeparator+a("#range_to_"+l).val()})}if(oTable.fnSettings().oFeatures.bServerSide){var u=oTable.fnSettings().fnServerData;oTable.fnSettings().fnServerData=function(b,c,d){for(j=0;j<t.length;j++){var e=t[j];for(k=0;k<c.length;k++)c[k].name=="sSearch_"+e&&(c[k].value=r[j]())}c.push({name:"sRangeSeparator",value:properties.sRangeSeparator});null!=u?u(b,c,d):a.getJSON(b,
c,function(a){d(a)})}}})}})(jQuery);
(function(a){a.widget("ui.dropdownchecklist",{version:function(){alert("DropDownCheckList v1.4")},_appendDropContainer:function(b){var e=a("<div/>");e.addClass("ui-dropdownchecklist ui-dropdownchecklist-dropcontainer-wrapper");e.addClass("ui-widget");e.attr("id",b.attr("id")+"-ddw");e.css({position:"absolute",left:"-33000px",top:"-33000px"});var c=a("<div/>");c.addClass("ui-dropdownchecklist-dropcontainer ui-widget-content");e.append(c);e.insertAfter(b);e.isOpen=!1;return e},_isDropDownKeyShortcut:function(b,
e){return b.altKey&&a.ui.keyCode.DOWN==e},_isDropDownCloseKey:function(b,e){return a.ui.keyCode.ESCAPE==e||a.ui.keyCode.ENTER==e},_keyFocusChange:function(b,e,c){var d=a(":focusable");b=d.index(b);0<=b&&(b+=e,c&&(c=this.dropWrapper.find("input:not([disabled])"),e=d.index(c.get(0)),c=d.index(c.get(c.length-1)),b<e?b=c:b>c&&(b=e)),d.get(b).focus())},_handleKeyboard:function(b){var e=b.keyCode||b.which;!this.dropWrapper.isOpen&&this._isDropDownKeyShortcut(b,e)?(b.stopImmediatePropagation(),this._toggleDropContainer(!0)):
this.dropWrapper.isOpen&&this._isDropDownCloseKey(b,e)?(b.stopImmediatePropagation(),this._toggleDropContainer(!1),this.controlSelector.focus()):!this.dropWrapper.isOpen||"checkbox"!=b.target.type||e!=a.ui.keyCode.DOWN&&e!=a.ui.keyCode.UP||(b.stopImmediatePropagation(),this._keyFocusChange(b.target,e==a.ui.keyCode.DOWN?1:-1,!0))},_handleFocus:function(b,e,c){c&&!this.dropWrapper.isOpen?(b.stopImmediatePropagation(),e?(this.controlSelector.addClass("ui-state-hover"),null!=a.ui.dropdownchecklist.gLastOpened&&
a.ui.dropdownchecklist.gLastOpened._toggleDropContainer(!1)):this.controlSelector.removeClass("ui-state-hover")):c||e||(null!=b&&b.stopImmediatePropagation(),this.controlSelector.removeClass("ui-state-hover"),this._toggleDropContainer(!1))},_cancelBlur:function(a){null!=this.blurringItem&&(clearTimeout(this.blurringItem),this.blurringItem=null)},_appendControl:function(){var b=this,e=this.sourceSelect,c=this.options,d=a("<span/>");d.addClass("ui-dropdownchecklist ui-dropdownchecklist-selector-wrapper ui-widget");
d.css({display:"inline-block",cursor:"default",overflow:"hidden"});var f=e.attr("id"),f=null==f||""==f?"ddcl-"+a.ui.dropdownchecklist.gIDCounter++:"ddcl-"+f;d.attr("id",f);var n=a("<span/>");n.addClass("ui-dropdownchecklist-selector ui-state-default");n.css({display:"inline-block",overflow:"hidden","white-space":"nowrap"});f=e.attr("tabIndex");null==f?f=0:(f=parseInt(f),0>f&&(f=0));n.attr("tabIndex",f);n.keyup(function(a){b._handleKeyboard(a)});n.focus(function(a){b._handleFocus(a,!0,!0)});n.blur(function(a){b._handleFocus(a,
!1,!0)});d.append(n);if(null!=c.icon){var f=null==c.icon.placement?"left":c.icon.placement,h=a("<div/>");h.addClass("ui-icon");h.addClass(null!=c.icon.toOpen?c.icon.toOpen:"ui-icon-triangle-1-e");h.css({"float":f});n.append(h)}c=a("<span/>");c.addClass("ui-dropdownchecklist-text");c.css({display:"inline-block","white-space":"nowrap",overflow:"hidden"});n.append(c);d.hover(function(){b.disabled||n.addClass("ui-state-hover")},function(){b.disabled||n.removeClass("ui-state-hover")});d.click(function(a){b.disabled||
(a.stopImmediatePropagation(),b._toggleDropContainer(!b.dropWrapper.isOpen))});d.insertAfter(e);a(window).resize(function(){!b.disabled&&b.dropWrapper.isOpen&&b._toggleDropContainer(!0)});return d},_createDropItem:function(b,e,c,d,f,n,h,g){var m=this,p=this.options,r=this.sourceSelect,t=this.controlWrapper,l=a("<div/>");l.addClass("ui-dropdownchecklist-item");l.css({"white-space":"nowrap"});n=n?' checked="checked"':"";var q=h?' class="inactive"':' class="active"',w=t.attr("id"),t=w+"-i"+b;e=m.isMultiple?
a('<input disabled type="checkbox" id="'+t+'"'+n+q+' tabindex="'+e+'" />'):a('<input disabled type="radio" id="'+t+'" name="'+w+'"'+n+q+' tabindex="'+e+'" />');e=e.attr("index",b).val(c);l.append(e);b=a("<label for="+t+"/>");b.addClass("ui-dropdownchecklist-text");null!=f&&b.attr("style",f);b.css({cursor:"default"});b.html(d);g&&l.addClass("ui-dropdownchecklist-indent");l.addClass("ui-state-default");h&&l.addClass("ui-state-disabled");b.click(function(a){a.stopImmediatePropagation()});l.append(b);
l.hover(function(b){b=a(this);b.hasClass("ui-state-disabled")||b.addClass("ui-state-hover")},function(b){a(this).removeClass("ui-state-hover")});e.click(function(b){var c=a(this);b.stopImmediatePropagation();if(c.hasClass("active")){b=m.options.onItemClick;if(a.isFunction(b))try{b.call(m,c,r.get(0))}catch(d){c.prop("checked",!c.prop("checked"));m._syncSelected(c);return}m._syncSelected(c);m.sourceSelect.trigger("change","ddcl_internal");!m.isMultiple&&p.closeRadioOnClick&&m._toggleDropContainer(!1)}});
l.click(function(b){var c=a(this);b.stopImmediatePropagation();if(c.hasClass("ui-state-disabled"))c.focus(),m._cancelBlur();else{b=c.find("input");c=b.prop("checked");b.prop("checked",!c);var d=m.options.onItemClick;if(a.isFunction(d))try{d.call(m,b,r.get(0))}catch(e){b.prop("checked",c);m._syncSelected(b);return}m._syncSelected(b);m.sourceSelect.trigger("change","ddcl_internal");c||m.isMultiple||!p.closeRadioOnClick||m._toggleDropContainer(!1)}});l.focus(function(b){a(this);b.stopImmediatePropagation()});
l.keyup(function(a){m._handleKeyboard(a)});return l},_createGroupItem:function(b,e){var c=this,d=a("<div />");d.addClass("ui-dropdownchecklist-group ui-widget-header");e&&d.addClass("ui-state-disabled");d.css({"white-space":"nowrap"});var f=a("<span/>");f.addClass("ui-dropdownchecklist-text");f.css({cursor:"default"});f.text(b);d.append(f);d.click(function(b){var d=a(this);b.stopImmediatePropagation();d.focus();c._cancelBlur()});d.focus(function(b){a(this);b.stopImmediatePropagation()});return d},
_createCloseItem:function(b){var e=this,c=a("<div />");c.addClass("ui-state-default ui-dropdownchecklist-close ui-dropdownchecklist-item");c.css({"white-space":"nowrap","text-align":"right"});var d=a("<span/>");d.addClass("ui-dropdownchecklist-text");d.css({cursor:"default"});d.html(b);c.append(d);c.click(function(b){var c=a(this);b.stopImmediatePropagation();c.focus();e._toggleDropContainer(!1)});c.hover(function(b){a(this).addClass("ui-state-hover")},function(b){a(this).removeClass("ui-state-hover")});
c.focus(function(b){a(this);b.stopImmediatePropagation()});return c},_appendItems:function(){var b=this,e=this.options,c=this.sourceSelect,d=this.dropWrapper.find(".ui-dropdownchecklist-dropcontainer");c.children().each(function(c){var e=a(this);if(e.is("option"))b._appendOption(e,d,c,!1,!1);else if(e.is("optgroup")){var h=e.prop("disabled"),g=e.attr("label");""!=g&&(g=b._createGroupItem(g,h),d.append(g));b._appendOptions(e,d,c,!0,h)}});null!=e.explicitClose&&(e=b._createCloseItem(e.explicitClose),
d.append(e));e=d.outerWidth();c=d.outerHeight();return{width:e,height:c}},_appendOptions:function(b,e,c,d,f){var n=this;b.children("option").each(function(b){var g=a(this);n._appendOption(g,e,c+"."+b,d,f)})},_appendOption:function(a,e,c,d,f){var n=a.html();if(null!=n&&""!=n){var h=a.val(),g=a.attr("style"),m=a.prop("selected");a=f||a.prop("disabled");f=this.controlSelector.attr("tabindex");c=this._createDropItem(c,f,h,n,g,m,a,d);e.append(c)}},_syncSelected:function(b){var e=this.options,c=this.dropWrapper,
d=this.sourceSelect.get(0).options,f=c.find("input.active");if("exclusive"==e.firstItemChecksAll)if(null==b&&a(d[0]).prop("selected"))f.prop("checked",!1),a(f[0]).prop("checked",!0);else if(null!=b&&0==b.attr("index"))e=b.prop("checked"),f.prop("checked",!1),a(f[0]).prop("checked",e);else{var n=!0,h=null;f.each(function(b){0<b?a(this).prop("checked")||(n=!1):h=a(this)});null!=h&&(n&&f.prop("checked",!1),h.prop("checked",n))}else e.firstItemChecksAll&&(null==b&&a(d[0]).prop("selected")?f.prop("checked",
!0):null!=b&&0==b.attr("index")?f.prop("checked",b.prop("checked")):(n=!0,h=null,f.each(function(b){0<b?a(this).prop("checked")||(n=!1):h=a(this)}),null!=h&&h.prop("checked",n)));var g=0,f=c.find("input");f.each(function(b){var c=a(d[b+g]),e=c.html();if(null==e||""==e)g+=1,c=a(d[b+g]);c.prop("selected",a(this).prop("checked"))});this._updateControlText();null!=b&&b.focus()},_sourceSelectChangeHandler:function(a){this.dropWrapper.find("input").val(this.sourceSelect.val());this._updateControlText()},
_updateControlText:function(){var a=this.sourceSelect,e=this.options,c=this.controlWrapper,d=a.find("option:first"),a=a.find("option"),e=this._formatText(a,e.firstItemChecksAll,d),c=c.find(".ui-dropdownchecklist-text");c.html(e);c.attr("title",c.text())},_formatText:function(b,e,c){var d;if(a.isFunction(this.options.textFormatFunction))try{d=this.options.textFormatFunction(b)}catch(f){alert("textFormatFunction failed: "+f)}else e&&null!=c&&c.prop("selected")?d=c.html():(d="",b.each(function(){if(a(this).prop("selected")){""!=
d&&(d+=", ");var b=a(this).attr("style"),c=a("<span/>");c.html(a(this).html());null==b?d+=c.html():(c.attr("style",b),d+=a("<span/>").append(c).html())}}),""==d&&(d=null!=this.options.emptyText?this.options.emptyText:"&nbsp;"));return d},_toggleDropContainer:function(b){var e=function(b){if(null!=b&&b.dropWrapper.isOpen){b.dropWrapper.isOpen=!1;a.ui.dropdownchecklist.gLastOpened=null;var c=b.options;b.dropWrapper.css({top:"-33000px",left:"-33000px"});var n=b.controlSelector;n.removeClass("ui-state-active");
n.removeClass("ui-state-hover");n=b.controlWrapper.find(".ui-icon");0<n.length&&(n.removeClass(null!=c.icon.toClose?c.icon.toClose:"ui-icon-triangle-1-s"),n.addClass(null!=c.icon.toOpen?c.icon.toOpen:"ui-icon-triangle-1-e"));a(document).unbind("click",e);b.dropWrapper.find("input.active").prop("disabled",!0);if(a.isFunction(c.onComplete))try{c.onComplete.call(b,b.sourceSelect.get(0))}catch(h){alert("callback failed: "+h)}}},c=function(b){if(!b.dropWrapper.isOpen){b.dropWrapper.isOpen=!0;a.ui.dropdownchecklist.gLastOpened=
b;var c=b.options;null==c.positionHow||"absolute"==c.positionHow?b.dropWrapper.css({position:"absolute",top:b.controlWrapper.position().top+b.controlWrapper.outerHeight()+"px",left:b.controlWrapper.position().left+"px"}):"relative"==c.positionHow&&b.dropWrapper.css({position:"relative",top:"0px",left:"0px"});var n=0;if(null==c.zIndex){var h=b.controlWrapper.parents().map(function(){var b=a(this).css("z-index");return isNaN(b)?0:b}).get(),h=Math.max.apply(Math,h);0<=h&&(n=h+1)}else n=parseInt(c.zIndex);
0<n&&b.dropWrapper.css({"z-index":n});n=b.controlSelector;n.addClass("ui-state-active");n.removeClass("ui-state-hover");n=b.controlWrapper.find(".ui-icon");0<n.length&&(n.removeClass(null!=c.icon.toOpen?c.icon.toOpen:"ui-icon-triangle-1-e"),n.addClass(null!=c.icon.toClose?c.icon.toClose:"ui-icon-triangle-1-s"));a(document).bind("click",function(a){e(b)});c=b.dropWrapper.find("input.active");c.prop("disabled",!1);c=c.get(0);null!=c&&c.focus()}};b?(e(a.ui.dropdownchecklist.gLastOpened),c(this)):e(this)},
_setSize:function(a){var e=this.options,c=this.controlWrapper;a=a.width;null!=e.width?a=parseInt(e.width):null!=e.minWidth&&(e=parseInt(e.minWidth),a<e&&(a=e));var d=this.controlSelector;d.css({width:a+"px"});e=d.find(".ui-dropdownchecklist-text");d=d.find(".ui-icon");null!=d&&(a-=d.outerWidth()+4,e.css({width:a+"px"}));c.outerWidth()},_init:function(){var b=this,e=this.options;null==a.ui.dropdownchecklist.gIDCounter&&(a.ui.dropdownchecklist.gIDCounter=1);b.blurringItem=null;var c=b.element;b.initialDisplay=
c.css("display");c.css("display","none");b.initialMultiple=c.prop("multiple");b.isMultiple=b.initialMultiple;null!=e.forceMultiple&&(b.isMultiple=e.forceMultiple);c.prop("multiple",!0);b.sourceSelect=c;var d=b._appendControl();b.controlWrapper=d;b.controlSelector=d.find(".ui-dropdownchecklist-selector");var f=b._appendDropContainer(d);b.dropWrapper=f;var n=b._appendItems();b._updateControlText(d,f,c);b._setSize(n);e.firstItemChecksAll&&b._syncSelected(null);e.bgiframe&&"function"==typeof b.dropWrapper.bgiframe&&
b.dropWrapper.bgiframe();b.sourceSelect.change(function(a,c){"ddcl_internal"!=c&&b._sourceSelectChangeHandler(a)})},_refreshOption:function(a,e,c){var d=a.parent();e?(a.prop("disabled",!0),a.removeClass("active"),a.addClass("inactive"),d.addClass("ui-state-disabled")):(a.prop("disabled",!1),a.removeClass("inactive"),a.addClass("active"),d.removeClass("ui-state-disabled"));a.prop("checked",c)},_refreshGroup:function(a,e){e?a.addClass("ui-state-disabled"):a.removeClass("ui-state-disabled")},close:function(){this._toggleDropContainer(!1)},
refresh:function(){var b=this,e=this.sourceSelect,c=this.dropWrapper,d=c.find("input"),f=c.find(".ui-dropdownchecklist-group"),n=0,h=0;e.children().each(function(c){c=a(this);var e=c.prop("disabled");if(c.is("option")){c=c.prop("selected");var p=a(d[h]);b._refreshOption(p,e,c);h+=1}else c.is("optgroup")&&(""!=c.attr("label")&&(p=a(f[n]),b._refreshGroup(p,e),n+=1),c.children("option").each(function(){var c=a(this),f=e||c.prop("disabled"),c=c.prop("selected"),g=a(d[h]);b._refreshOption(g,f,c);h+=1}))});
b._syncSelected(null)},enable:function(){this.controlSelector.removeClass("ui-state-disabled");this.disabled=!1},disable:function(){this.controlSelector.addClass("ui-state-disabled");this.disabled=!0},destroy:function(){a.Widget.prototype.destroy.apply(this,arguments);this.sourceSelect.css("display",this.initialDisplay);this.sourceSelect.prop("multiple",this.initialMultiple);this.controlWrapper.unbind().remove();this.dropWrapper.remove()}});a.extend(a.ui.dropdownchecklist,{defaults:{width:null,maxDropHeight:null,
firstItemChecksAll:!1,closeRadioOnClick:!1,minWidth:50,positionHow:"absolute",bgiframe:!1,explicitClose:null}})})(jQuery);(function(a,b,e,c,d,f,n){a.GoogleAnalyticsObject=d;a[d]=a[d]||function(){(a[d].q=a[d].q||[]).push(arguments)};a[d].l=1*new Date;f=b.createElement(e);n=b.getElementsByTagName(e)[0];f.async=1;f.src=c;n.parentNode.insertBefore(f,n)})(window,document,"script","//www.google-analytics.com/analytics.js","ga");ga("create","UA-40113910-1","umd.edu");ga("send","pageview");
!function(){function a(a){return null!=a&&!isNaN(a)}function b(a){return a.length}function e(a,b){try{for(var c in b)Object.defineProperty(a.prototype,c,{value:b[c],enumerable:!1})}catch(d){a.prototype=b}}function c(){}function d(a){return ze+a in this}function f(){var a=[];this.forEach(function(b){a.push(b)});return a}function n(){var a=0,b;for(b in this)b.charCodeAt(0)===jc&&++a;return a}function h(){for(var a in this)if(a.charCodeAt(0)===jc)return!1;return!0}function g(){}function m(a,b,c){return function(){var d=
c.apply(b,arguments);return d===b?a:d}}function p(a,b){if(b in a)return b;b=b.charAt(0).toUpperCase()+b.substring(1);for(var c=0,d=uf.length;c<d;++c){var e=uf[c]+b;if(e in a)return e}}function r(){}function t(){}function l(a){function b(){for(var c=d,e=-1,f=c.length,g;++e<f;)(g=c[e].on)&&g.apply(this,arguments);return a}var d=[],e=new c;b.on=function(b,c){var f=e.get(b),g;if(2>arguments.length)return f&&f.on;f&&(f.on=null,d=d.slice(0,g=d.indexOf(f)).concat(d.slice(g+1)),e.remove(b));c&&d.push(e.set(b,
{on:c}));return a};return b}function q(){P.event.preventDefault()}function w(){for(var a=P.event,b;b=a.sourceEvent;)a=b;return a}function u(a){for(var b=new t,c=0,d=arguments.length;++c<d;)b[arguments[c]]=l(b);b.of=function(c,d){return function(e){try{var f=e.sourceEvent=P.event;e.target=a;P.event=e;b[e.type].apply(c,d)}finally{P.event=f}}};return b}function v(a){ke(a,Ma);return a}function E(a){return"function"===typeof a?a:function(){return Ne(a,this)}}function A(a){return"function"===typeof a?a:
function(){return fb(a,this)}}function K(a,b){function c(){this.removeAttribute(a)}function d(){this.removeAttributeNS(a.space,a.local)}function e(){this.setAttribute(a,b)}function f(){this.setAttributeNS(a.space,a.local,b)}function g(){var c=b.apply(this,arguments);null==c?this.removeAttribute(a):this.setAttribute(a,c)}function l(){var c=b.apply(this,arguments);null==c?this.removeAttributeNS(a.space,a.local):this.setAttributeNS(a.space,a.local,c)}a=P.ns.qualify(a);return null==b?a.local?d:c:"function"===
typeof b?a.local?l:g:a.local?f:e}function F(a){return a.trim().replace(/\s+/g," ")}function z(a){return new RegExp("(?:^|\\s+)"+P.requote(a)+"(?:\\s+|$)","g")}function B(a,b){function c(){for(var d=-1;++d<e;)a[d](this,b)}function d(){for(var c=-1,f=b.apply(this,arguments);++c<e;)a[c](this,f)}a=a.trim().split(/^|\s+/).map(H);var e=a.length;return"function"===typeof b?d:c}function H(a){var b=z(a);return function(c,d){if(e=c.classList)return d?e.add(a):e.remove(a);var e=c.getAttribute("class")||"";d?
(b.lastIndex=0,b.test(e)||c.setAttribute("class",F(e+" "+a))):c.setAttribute("class",F(e.replace(b," ")))}}function G(a,b,c){function d(){this.style.removeProperty(a)}function e(){this.style.setProperty(a,b,c)}function f(){var d=b.apply(this,arguments);null==d?this.style.removeProperty(a):this.style.setProperty(a,d,c)}return null==b?d:"function"===typeof b?f:e}function I(a,b){function c(){delete this[a]}function d(){this[a]=b}function e(){var c=b.apply(this,arguments);null==c?delete this[a]:this[a]=
c}return null==b?c:"function"===typeof b?e:d}function N(a){return"function"===typeof a?a:(a=P.ns.qualify(a)).local?function(){return this.ownerDocument.createElementNS(a.space,a.local)}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,a)}}function L(a){return function(){return vf(this,a)}}function x(a){arguments.length||(a=P.ascending);return function(b,c){return b&&c?a(b.__data__,c.__data__):!b-!c}}function S(a,b){for(var c=0,d=a.length;c<d;c++)for(var e=a[c],f=0,g=e.length,
l;f<g;f++)(l=e[f])&&b(l,f,c);return a}function D(a){ke(a,Cd);return a}function J(a){var b,c;return function(d,e,f){d=a[f].update;var g=d.length;f!=c&&(c=f,b=0);for(e>=b&&(b=e+1);!(e=d[b])&&++b<g;);return e}}function V(){var a=this.__transition__;a&&++a.active}function Y(a,b,c){function d(){var b=this[g];b&&(this.removeEventListener(a,b,b.$),delete this[g])}function e(){var f=h(b,Uc(arguments));d.call(this);this.addEventListener(a,this[g]=f,f.$=c);f._=b}function f(){var b=new RegExp("^__on([^.]+)"+
P.requote(a)+"$"),c,d;for(d in this)if(c=d.match(b)){var e=this[d];this.removeEventListener(c[1],e,e.$);delete this[d]}}var g="__on"+a,l=a.indexOf("."),h=W;0<l&&(a=a.substring(0,l));var m=Kc.get(a);m&&(a=m,h=U);return l?b?e:d:b?r:f}function W(a,b){return function(c){var d=P.event;P.event=c;b[0]=this.__data__;try{a.apply(this,b)}finally{P.event=d}}}function U(a,b){var c=W(a,b);return function(a){var b=a.relatedTarget;b&&(b===this||b.compareDocumentPosition(this)&8)||c.call(this,a)}}function M(){var a=
".dragsuppress-"+ ++Vf,b="click"+a,c=P.select(Va).on("touchmove"+a,q).on("dragstart"+a,q).on("selectstart"+a,q);if(kc){var d=Zb.style,e=d[kc];d[kc]="none"}return function(f){c.on(a,null);kc&&(d[kc]=e);if(f){var g=function(){c.on(b,null)};c.on(b,function(){q();g()},!0);setTimeout(g,0)}}}function Q(a,b){b.changedTouches&&(b=b.changedTouches[0]);var c=a.ownerSVGElement||a;if(c.createSVGPoint){var d=c.createSVGPoint();if(0>T&&(Va.scrollX||Va.scrollY)){var c=P.select("body").append("svg").style({position:"absolute",
top:0,left:0,margin:0,padding:0,border:"none"},"important"),e=c[0][0].getScreenCTM();T=!(e.f||e.e);c.remove()}T?(d.x=b.pageX,d.y=b.pageY):(d.x=b.clientX,d.y=b.clientY);d=d.matrixTransform(a.getScreenCTM().inverse());return[d.x,d.y]}c=a.getBoundingClientRect();return[b.clientX-c.left-a.clientLeft,b.clientY-c.top-a.clientTop]}function X(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function ea(a){return 1<a?0:-1>a?Z:Math.acos(a)}function O(a){return 1<a?Ec:-1>a?-Ec:Math.asin(a)}function aa(a){return((a=
Math.exp(a))+1/a)/2}function ia(a){return(a=Math.sin(a/2))*a}function ta(){}function da(a,b,c){return new ha(a,b,c)}function ha(a,b,c){this.h=a;this.s=b;this.l=c}function Ba(a,b,c){function d(a){360<a?a-=360:0>a&&(a+=360);return 60>a?e+(f-e)*a/60:180>a?f:240>a?e+(f-e)*(240-a)/60:e}var e,f;a=isNaN(a)?0:0>(a%=360)?a+360:a;b=isNaN(b)?0:0>b?0:1<b?1:b;c=0>c?0:1<c?1:c;f=.5>=c?c*(1+b):c+b-c*b;e=2*c-f;return Ga(Math.round(255*d(a+120)),Math.round(255*d(a)),Math.round(255*d(a-120)))}function y(a,b,c){return new za(a,
b,c)}function za(a,b,c){this.h=a;this.c=b;this.l=c}function pa(a,b,c){isNaN(a)&&(a=0);isNaN(b)&&(b=0);return C(c,Math.cos(a*=wa)*b,Math.sin(a)*b)}function C(a,b,c){return new pb(a,b,c)}function pb(a,b,c){this.l=a;this.a=b;this.b=c}function Ra(a,b,c){a=(a+16)/116;c=a-c/200;b=Xa(a+b/500)*vg;a=Xa(a)*Qg;c=Xa(c)*Bh;return Ga(Fb(3.2404542*b-1.5371385*a-.4985314*c),Fb(-.969266*b+1.8760108*a+.041556*c),Fb(.0556434*b-.2040259*a+1.0572252*c))}function Ka(a,b,c){return 0<a?y(Math.atan2(c,b)*ub,Math.sqrt(b*b+
c*c),a):y(NaN,NaN,a)}function Xa(a){return.206893034<a?a*a*a:(a-4/29)/7.787037}function Kb(a){return.008856<a?Math.pow(a,1/3):7.787037*a+4/29}function Fb(a){return Math.round(255*(.00304>=a?12.92*a:1.055*Math.pow(a,1/2.4)-.055))}function hb(a){return Ga(a>>16,a>>8&255,a&255)+""}function Ga(a,b,c){return new Za(a,b,c)}function Za(a,b,c){this.r=a;this.g=b;this.b=c}function ab(a){return 16>a?"0"+Math.max(0,a).toString(16):Math.min(255,a).toString(16)}function Gb(a,b,c){var d=0,e=0,f=0,g,l;if(g=/([a-z]+)\((.*)\)/i.exec(a))switch(l=
g[2].split(","),g[1]){case "hsl":return c(parseFloat(l[0]),parseFloat(l[1])/100,parseFloat(l[2])/100);case "rgb":return b(Wa(l[0]),Wa(l[1]),Wa(l[2]))}if(c=Rg.get(a))return b(c.r,c.g,c.b);null!=a&&"#"===a.charAt(0)&&(4===a.length?(d=a.charAt(1),d+=d,e=a.charAt(2),e+=e,f=a.charAt(3),f+=f):7===a.length&&(d=a.substring(1,3),e=a.substring(3,5),f=a.substring(5,7)),d=parseInt(d,16),e=parseInt(e,16),f=parseInt(f,16));return b(d,e,f)}function ib(a,b,c){var d=Math.min(a/=255,b/=255,c/=255),e=Math.max(a,b,c),
f=e-d,g=(e+d)/2;f?(d=.5>g?f/(e+d):f/(2-e-d),a=60*(a==e?(b-c)/f+(b<c?6:0):b==e?(c-a)/f+2:(a-b)/f+4)):(a=NaN,d=0<g&&1>g?0:a);return da(a,d,g)}function rb(a,b,c){a=gb(a);b=gb(b);c=gb(c);var d=Kb((.4124564*a+.3575761*b+.1804375*c)/vg),e=Kb((.2126729*a+.7151522*b+.072175*c)/Qg);a=Kb((.0193339*a+.119192*b+.9503041*c)/Bh);return C(116*e-16,500*(d-e),200*(e-a))}function gb(a){return.04045>=(a/=255)?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Wa(a){var b=parseFloat(a);return"%"===a.charAt(a.length-1)?Math.round(2.55*
b):b}function qa(a){return"function"===typeof a?a:function(){return a}}function Ha(a){return a}function sb(a){return function(b,c,d){2===arguments.length&&"function"===typeof c&&(d=c,c=null);return Ta(b,c,a,d)}}function Ta(a,b,c,d){function e(){var a=h.status,b;if(!a&&h.responseText||200<=a&&300>a||304===a){try{b=c.call(f,h)}catch(d){g.error.call(f,d);return}g.load.call(f,b)}else g.error.call(f,h)}var f={},g=P.dispatch("beforesend","progress","load","error"),l={},h=new XMLHttpRequest,m=null;!Va.XDomainRequest||
"withCredentials"in h||!/^(http(s)?:)?\/\//.test(a)||(h=new XDomainRequest);"onload"in h?h.onload=h.onerror=e:h.onreadystatechange=function(){3<h.readyState&&e()};h.onprogress=function(a){var b=P.event;P.event=a;try{g.progress.call(f,h)}finally{P.event=b}};f.header=function(a,b){a=(a+"").toLowerCase();if(2>arguments.length)return l[a];null==b?delete l[a]:l[a]=b+"";return f};f.mimeType=function(a){if(!arguments.length)return b;b=null==a?null:a+"";return f};f.responseType=function(a){if(!arguments.length)return m;
m=a;return f};f.response=function(a){c=a;return f};["get","post"].forEach(function(a){f[a]=function(){return f.send.apply(f,[a].concat(Uc(arguments)))}});f.send=function(c,d,e){2===arguments.length&&"function"===typeof d&&(e=d,d=null);h.open(c,a,!0);null==b||"accept"in l||(l.accept=b+",*/*");if(h.setRequestHeader)for(var q in l)h.setRequestHeader(q,l[q]);null!=b&&h.overrideMimeType&&h.overrideMimeType(b);null!=m&&(h.responseType=m);if(null!=e)f.on("error",e).on("load",function(a){e(null,a)});g.beforesend.call(f,
h);h.send(null==d?null:d);return f};f.abort=function(){h.abort();return f};P.rebind(f,g,"on");return null==d?f:f.get(Ya(d))}function Ya(a){return 1===a.length?function(b,c){a(null==b?c:null)}:a}function ra(){var a=qc(),a=tb()-a;24<a?(isFinite(a)&&(clearTimeout(Sg),Sg=setTimeout(ra,a)),Tg=0):(Tg=1,Ch(ra))}function qc(){var a=Date.now();for(le=Ob;le;)a>=le.t&&(le.f=le.c(a-le.t)),le=le.n;return a}function tb(){for(var a,b=Ob,c=Infinity;b;)b.f?b=a?a.n=b.n:Ob=b.n:(b.t<c&&(c=b.t),b=(a=b).n);dc=a;return c}
function xb(a,b){return b-(a?Math.ceil(Math.log(a)/Math.LN10):1)}function Ab(a){var b=a.decimal,c=a.thousands,d=a.grouping,e=a.currency,f=d?function(a){for(var b=a.length,e=[],f=0,g=d[0];0<b&&0<g;)e.push(a.substring(b-=g,b+g)),g=d[f=(f+1)%d.length];return e.reverse().join(c)}:Ha;return function(a){a=Wf.exec(a);var c=a[1]||" ",d=a[2]||">",g=a[3]||"",l=a[4]||"",h=a[5],m=+a[6],q=a[7],p=a[8],r=a[9],T=1,n="",Bd="",t=!1;p&&(p=+p.substring(1));if(h||"0"===c&&"="===d)h=c="0",d="=",q&&(m-=Math.floor((m-1)/
4));switch(r){case "n":q=!0;r="g";break;case "%":T=100;Bd="%";r="f";break;case "p":T=100;Bd="%";r="r";break;case "b":case "o":case "x":case "X":"#"===l&&(n="0"+r.toLowerCase());case "c":case "d":t=!0;p=0;break;case "s":T=-1,r="r"}"$"===l&&(n=e[0],Bd=e[1]);"r"!=r||p||(r="g");if(null!=p)if("g"==r)p=Math.max(1,Math.min(21,p));else if("e"==r||"f"==r)p=Math.max(0,Math.min(20,p));var r=lh.get(r)||la,u=h&&q;return function(a){if(t&&a%1)return"";var e=0>a||0===a&&0>1/a?(a=-a,"-"):g;if(0>T){var l=P.formatPrefix(a,
p);a=l.scale(a);Bd=l.symbol}else a*=T;a=r(a,p);var Z=a.lastIndexOf("."),l=0>Z?a:a.substring(0,Z);a=0>Z?"":b+a.substring(Z+1);!h&&q&&(l=f(l));var Z=n.length+l.length+a.length+(u?0:e.length),db=Z<m?Array(Z=m-Z+1).join(c):"";u&&(l=f(db+l));e+=n;a=l+a;return("<"===d?e+a+db:">"===d?db+e+a:"^"===d?db.substring(0,Z>>=1)+e+a+db.substring(Z):e+(u?a:db+a))+Bd}}}function la(a){return a+""}function jb(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}function Aa(a,b,c){function d(b){var c=
a(b),e=f(c,1);return b-c<e-b?c:e}function e(c){b(c=a(new Sb(c-1)),1);return c}function f(a,c){b(a=new Sb(+a),c);return a}function g(a,d,f){a=e(a);var l=[];if(1<f)for(;a<d;)c(a)%f||l.push(new Date(+a)),b(a,1);else for(;a<d;)l.push(new Date(+a)),b(a,1);return l}a.floor=a;a.round=d;a.ceil=e;a.offset=f;a.range=g;var l=a.utc=Lb(a);l.floor=l;l.round=Lb(d);l.ceil=Lb(e);l.offset=Lb(f);l.range=function(a,b,c){try{Sb=jb;var d=new jb;d._=a;return g(d,b,c)}finally{Sb=Date}};return a}function Lb(a){return function(b,
c){try{Sb=jb;var d=new jb;d._=b;return a(d,c)._}finally{Sb=Date}}}function Hb(a){function b(a){function d(b){for(var c=[],f=-1,g=0,l,h;++f<e;)if(37===a.charCodeAt(f)){c.push(a.substring(g,f));null!=(l=wg[g=a.charAt(++f)])&&(g=a.charAt(++f));if(h=x[g])g=h(b,null==l?"e"===g?" ":"0":l);c.push(g);g=f+1}c.push(a.substring(g,f));return c.join("")}var e=a.length;d.parse=function(b){var d={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(c(d,a,b,0)!=b.length)return null;"p"in d&&(d.H=d.H%12+12*d.p);b=null!=d.Z&&
Sb!==jb;var e=new (b?jb:Sb);"j"in d?e.setFullYear(d.y,0,d.j):"w"in d&&("W"in d||"U"in d)?(e.setFullYear(d.y,0,1),e.setFullYear(d.y,0,"W"in d?(d.w+6)%7+7*d.W-(e.getDay()+5)%7:d.w+7*d.U-(e.getDay()+6)%7)):e.setFullYear(d.y,d.m,d.d);e.setHours(d.H+Math.floor(d.Z/100),d.M+d.Z%100,d.S,d.L);return b?e._:e};d.toString=function(){return a};return d}function c(a,b,d,e){for(var f,g=0,l=b.length,h=d.length;g<l;){if(e>=h)return-1;f=b.charCodeAt(g++);if(37===f){if(f=b.charAt(g++),f=I[f in wg?b.charAt(g++):f],
!f||0>(e=f(a,d,e)))return-1}else if(f!=d.charCodeAt(e++))return-1}return e}var d=a.dateTime,e=a.date,f=a.time,g=a.periods,l=a.days,h=a.shortDays,m=a.months,q=a.shortMonths;b.utc=function(a){function c(a){try{Sb=jb;var b=new Sb;b._=a;return d(b)}finally{Sb=Date}}var d=b(a);c.parse=function(a){try{Sb=jb;var b=d.parse(a);return b&&b._}finally{Sb=Date}};c.toString=d.toString;return c};b.multi=b.utc.multi=zd;var p=P.map(),r=na(l),T=Yb(l),n=na(h),t=Yb(h),u=na(m),Z=Yb(m),v=na(q),w=Yb(q);g.forEach(function(a,
b){p.set(a.toLowerCase(),b)});var x={a:function(a){return h[a.getDay()]},A:function(a){return l[a.getDay()]},b:function(a){return q[a.getMonth()]},B:function(a){return m[a.getMonth()]},c:b(d),d:function(a,b){return Sa(a.getDate(),b,2)},e:function(a,b){return Sa(a.getDate(),b,2)},H:function(a,b){return Sa(a.getHours(),b,2)},I:function(a,b){return Sa(a.getHours()%12||12,b,2)},j:function(a,b){return Sa(1+fa.dayOfYear(a),b,3)},L:function(a,b){return Sa(a.getMilliseconds(),b,3)},m:function(a,b){return Sa(a.getMonth()+
1,b,2)},M:function(a,b){return Sa(a.getMinutes(),b,2)},p:function(a){return g[+(12<=a.getHours())]},S:function(a,b){return Sa(a.getSeconds(),b,2)},U:function(a,b){return Sa(fa.sundayOfYear(a),b,2)},w:function(a){return a.getDay()},W:function(a,b){return Sa(fa.mondayOfYear(a),b,2)},x:b(e),X:b(f),y:function(a,b){return Sa(a.getFullYear()%100,b,2)},Y:function(a,b){return Sa(a.getFullYear()%1E4,b,4)},Z:rc,"%":function(){return"%"}},I={a:function(a,b,c){n.lastIndex=0;return(b=n.exec(b.substring(c)))?(a.w=
t.get(b[0].toLowerCase()),c+b[0].length):-1},A:function(a,b,c){r.lastIndex=0;return(b=r.exec(b.substring(c)))?(a.w=T.get(b[0].toLowerCase()),c+b[0].length):-1},b:function(a,b,c){v.lastIndex=0;return(b=v.exec(b.substring(c)))?(a.m=w.get(b[0].toLowerCase()),c+b[0].length):-1},B:function(a,b,c){u.lastIndex=0;return(b=u.exec(b.substring(c)))?(a.m=Z.get(b[0].toLowerCase()),c+b[0].length):-1},c:function(a,b,d){return c(a,x.c.toString(),b,d)},d:ja,e:ja,H:ma,I:ma,j:Ja,L:ac,m:bb,M:cb,p:function(a,b,c){b=p.get(b.substring(c,
c+=2).toLowerCase());return null==b?-1:(a.p=b,c)},S:Ua,U:ca,w:Bc,W:ba,x:function(a,b,d){return c(a,x.x.toString(),b,d)},X:function(a,b,d){return c(a,x.X.toString(),b,d)},y:oa,Y:Ca,Z:La,"%":bd};return b}function Sa(a,b,c){var d=0>a?"-":"";a=(d?-a:a)+"";var e=a.length;return d+(e<c?Array(c-e+1).join(b)+a:a)}function na(a){return new RegExp("^(?:"+a.map(P.requote).join("|")+")","i")}function Yb(a){for(var b=new c,d=-1,e=a.length;++d<e;)b.set(a[d].toLowerCase(),d);return b}function Bc(a,b,c){vb.lastIndex=
0;return(b=vb.exec(b.substring(c,c+1)))?(a.w=+b[0],c+b[0].length):-1}function ca(a,b,c){vb.lastIndex=0;return(b=vb.exec(b.substring(c)))?(a.U=+b[0],c+b[0].length):-1}function ba(a,b,c){vb.lastIndex=0;return(b=vb.exec(b.substring(c)))?(a.W=+b[0],c+b[0].length):-1}function Ca(a,b,c){vb.lastIndex=0;return(b=vb.exec(b.substring(c,c+4)))?(a.y=+b[0],c+b[0].length):-1}function oa(a,b,c){vb.lastIndex=0;if(b=vb.exec(b.substring(c,c+2))){var d=+b[0];a=(a.y=d+(68<d?1900:2E3),c+b[0].length)}else a=-1;return a}
function La(a,b,c){return/^[+-]\d{4}$/.test(b=b.substring(c,c+5))?(a.Z=+b,c+5):-1}function bb(a,b,c){vb.lastIndex=0;return(b=vb.exec(b.substring(c,c+2)))?(a.m=b[0]-1,c+b[0].length):-1}function ja(a,b,c){vb.lastIndex=0;return(b=vb.exec(b.substring(c,c+2)))?(a.d=+b[0],c+b[0].length):-1}function Ja(a,b,c){vb.lastIndex=0;return(b=vb.exec(b.substring(c,c+3)))?(a.j=+b[0],c+b[0].length):-1}function ma(a,b,c){vb.lastIndex=0;return(b=vb.exec(b.substring(c,c+2)))?(a.H=+b[0],c+b[0].length):-1}function cb(a,
b,c){vb.lastIndex=0;return(b=vb.exec(b.substring(c,c+2)))?(a.M=+b[0],c+b[0].length):-1}function Ua(a,b,c){vb.lastIndex=0;return(b=vb.exec(b.substring(c,c+2)))?(a.S=+b[0],c+b[0].length):-1}function ac(a,b,c){vb.lastIndex=0;return(b=vb.exec(b.substring(c,c+3)))?(a.L=+b[0],c+b[0].length):-1}function rc(a){var b=a.getTimezoneOffset();a=0<b?"-":"+";var c=~~(ua(b)/60),b=ua(b)%60;return a+Sa(c,"0",2)+Sa(b,"0",2)}function bd(a,b,c){Dh.lastIndex=0;return(a=Dh.exec(b.substring(c,c+1)))?c+a[0].length:-1}function zd(a){for(var b=
a.length,c=-1;++c<b;)a[c][0]=this(a[c][0]);return function(b){for(var c=0,d=a[c];!d[1](b);)d=a[++c];return d[0](b)}}function sc(){}function ve(a,b,c){var d=c.s=a+b,e=d-a;c.t=a-(d-e)+(b-e)}function mb(a,b){if(a&&Eh.hasOwnProperty(a.type))Eh[a.type](a,b)}function Qb(a,b,c){var d=-1;c=a.length-c;var e;for(b.lineStart();++d<c;)e=a[d],b.point(e[0],e[1],e[2]);b.lineEnd()}function Qd(a,b){var c=-1,d=a.length;for(b.polygonStart();++c<d;)Qb(a[c],b,1);b.polygonEnd()}function lb(){function a(b,c){b*=wa;c=c*
wa/2+Z/4;var g=b-d,l=Math.cos(c),h=Math.sin(c),m=f*h,q=e*l+m*Math.cos(g),g=m*Math.sin(g);Td.add(Math.atan2(g,q));d=b;e=l;f=h}var b,c,d,e,f;Vc.point=function(g,l){Vc.point=a;d=(b=g)*wa;e=Math.cos(l=(c=l)*wa/2+Z/4);f=Math.sin(l)};Vc.lineEnd=function(){a(b,c)}}function zc(a){var b=a[0];a=a[1];var c=Math.cos(a);return[c*Math.cos(b),c*Math.sin(b),Math.sin(a)]}function cd(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]}function gc(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]}function bc(a,
b){a[0]+=b[0];a[1]+=b[1];a[2]+=b[2]}function nf(a,b){return[a[0]*b,a[1]*b,a[2]*b]}function Ke(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);a[0]/=b;a[1]/=b;a[2]/=b}function of(a){return[Math.atan2(a[1],a[0]),O(a[2])]}function R(a,b){return 1E-6>ua(a[0]-b[0])&&1E-6>ua(a[1]-b[1])}function be(a,b){a*=wa;var c=Math.cos(b*=wa);pf(c*Math.cos(a),c*Math.sin(a),Math.sin(b))}function pf(a,b,c){++me;ne+=(a-ne)/me;Ud+=(b-Ud)/me;Vd+=(c-Vd)/me}function Fa(){function a(e,f){e*=wa;var g=Math.cos(f*=wa),l=g*Math.cos(e),
g=g*Math.sin(e),h=Math.sin(f),m=Math.atan2(Math.sqrt((m=c*h-d*g)*m+(m=d*l-b*h)*m+(m=b*g-c*l)*m),b*l+c*g+d*h);kd+=m;ld+=m*(b+(b=l));Dd+=m*(c+(c=g));Wc+=m*(d+(d=h));pf(b,c,d)}var b,c,d;Ed.point=function(e,f){e*=wa;var g=Math.cos(f*=wa);b=g*Math.cos(e);c=g*Math.sin(e);d=Math.sin(f);Ed.point=a;pf(b,c,d)}}function we(){Ed.point=be}function tg(){function a(b,c){b*=wa;var g=Math.cos(c*=wa),l=g*Math.cos(b),g=g*Math.sin(b),h=Math.sin(c),m=e*h-f*g,q=f*l-d*h,p=d*g-e*l,r=Math.sqrt(m*m+q*q+p*p),T=d*l+e*g+f*h,
n=r&&-ea(T)/r,r=Math.atan2(r,T);Oe+=n*m;oe+=n*q;Fd+=n*p;kd+=r;ld+=r*(d+(d=l));Dd+=r*(e+(e=g));Wc+=r*(f+(f=h));pf(d,e,f)}var b,c,d,e,f;Ed.point=function(g,l){b=g;c=l;Ed.point=a;g*=wa;var h=Math.cos(l*=wa);d=h*Math.cos(g);e=h*Math.sin(g);f=Math.sin(l);pf(d,e,f)};Ed.lineEnd=function(){a(b,c);Ed.lineEnd=we;Ed.point=be}}function pc(){return!0}function Mf(a,b,c,d,e){var f=[],g=[];a.forEach(function(a){if(!(0>=(b=a.length-1))){var b,c=a[0],d=a[b];if(R(c,d)){e.lineStart();for(d=0;d<b;++d)e.point((c=a[d])[0],
c[1]);e.lineEnd()}else b=new Tf(c,a,null,!0),c=new Tf(c,null,b,!1),b.o=c,f.push(b),g.push(c),b=new Tf(d,a,null,!1),c=new Tf(d,null,b,!0),b.o=c,f.push(b),g.push(c)}});g.sort(b);ug(f);ug(g);if(f.length){a=0;b=c;for(c=g.length;a<c;++a)g[a].e=b=!b;b=f[0];for(var l,h;;){for(var m=b,q=!0;m.v;)if((m=m.n)===b)return;l=m.z;e.lineStart();do{m.v=m.o.v=!0;if(m.e){if(q)for(a=0,c=l.length;a<c;++a)e.point((h=l[a])[0],h[1]);else d(m.x,m.n.x,1,e);m=m.n}else{if(q)for(l=m.p.z,a=l.length-1;0<=a;--a)e.point((h=l[a])[0],
h[1]);else d(m.x,m.p.x,-1,e);m=m.p}m=m.o;l=m.z;q=!q}while(!m.v);e.lineEnd()}}}function ug(a){if(b=a.length){for(var b,c=0,d=a[0],e;++c<b;)d.n=e=a[c],e.p=d,d=e;d.n=e=a[0];e.p=d}}function Tf(a,b,c,d){this.x=a;this.z=b;this.o=c;this.e=d;this.v=!1;this.n=this.p=null}function lg(a,b,c,d){return function(e,f){function g(b,c){var d=e(b,c);a(b=d[0],c=d[1])&&f.point(b,c)}function l(a,b){var c=e(a,b);T.point(c[0],c[1])}function h(){t.point=l;T.lineStart()}function m(){t.point=g;T.lineEnd()}function q(a,b){I.push([a,
b]);var c=e(a,b);w.point(c[0],c[1])}function p(){w.lineStart();I=[]}function r(){q(I[0][0],I[0][1]);w.lineEnd();var a=w.clean(),b=v.buffer(),c=b.length;I.pop();x.push(I);I=null;if(c)if(a&1){var a=b[0],c=a.length-1,b=-1,d;for(f.lineStart();++b<c;)f.point((d=a[b])[0],d[1]);f.lineEnd()}else 1<c&&a&2&&b.push(b.pop().concat(b.shift())),u.push(b.filter(Pg))}var T=b(f),n=e.invert(d[0],d[1]),t={point:g,lineStart:h,lineEnd:m,polygonStart:function(){t.point=q;t.lineStart=p;t.lineEnd=r;u=[];x=[];f.polygonStart()},
polygonEnd:function(){t.point=g;t.lineStart=h;t.lineEnd=m;u=P.merge(u);var a,b=n;a=x;var d=b[0],e=b[1],l=[Math.sin(d),-Math.cos(d),0],q=0,p=0;Td.reset();for(var r=0,T=a.length;r<T;++r){var Bd=a[r],v=Bd.length;if(v)for(var w=Bd[0],I=w[0],b=w[1]/2+Z/4,A=Math.sin(b),G=Math.cos(b),B=1;;){B===v&&(B=0);var b=Bd[B],E=b[0],N=b[1]/2+Z/4,F=Math.sin(N),N=Math.cos(N),z=E-I,K=ua(z)>Z,A=A*F;Td.add(Math.atan2(A*Math.sin(z),G*N+A*Math.cos(z)));q+=K?z+(0<=z?lc:-lc):z;K^I>=d^E>=d&&(w=gc(zc(w),zc(b)),Ke(w),I=gc(l,w),
Ke(I),I=(K^0<=z?-1:1)*O(I[2]),e>I||e===I&&(w[0]||w[1]))&&(p+=K^0<=z?1:-1);if(!B++)break;I=E;A=F;G=N;w=b}}a=(-1E-6>q||1E-6>q&&0>Td)^p&1;u.length?Mf(u,rf,a,c,f):a&&(f.lineStart(),c(null,null,1,f),f.lineEnd());f.polygonEnd();u=x=null},sphere:function(){f.polygonStart();f.lineStart();c(null,null,1,f);f.lineEnd();f.polygonEnd()}},u,v=qf(),w=b(v),x,I;return t}}function Pg(a){return 1<a.length}function qf(){var a=[],b;return{lineStart:function(){a.push(b=[])},point:function(a,c){b.push([a,c])},lineEnd:r,
buffer:function(){var c=a;a=[];b=null;return c},rejoin:function(){1<a.length&&a.push(a.pop().concat(a.shift()))}}}function rf(a,b){return(0>(a=a.x)[0]?a[1]-Ec-1E-6:Ec-a[1])-(0>(b=b.x)[0]?b[1]-Ec-1E-6:Ec-b[1])}function Cc(a){function b(a,c){return Math.cos(a)*Math.cos(c)>e}function c(a,b,d){var f=zc(a),g=zc(b),l=[1,0,0],g=gc(f,g),h=cd(g,g),f=g[0],m=h-f*f;if(!m)return!d&&a;h=e*h/m;m=-e*f/m;f=gc(l,g);l=nf(l,h);g=nf(g,m);bc(l,g);g=cd(l,f);h=cd(f,f);m=g*g-h*(cd(l,l)-1);if(!(0>m)){var q=Math.sqrt(m),m=
nf(f,(-g-q)/h);bc(m,l);m=of(m);if(!d)return m;d=a[0];var p=b[0];a=a[1];b=b[1];var r;p<d&&(r=d,d=p,p=r);var T=p-d,n=1E-6>ua(T-Z);!n&&b<a&&(r=a,a=b,b=r);if(n||1E-6>T?n?0<a+b^m[1]<(1E-6>ua(m[0]-d)?a:b):a<=m[1]&&m[1]<=b:T>Z^(d<=m[0]&&m[0]<=p))return b=nf(f,(-g+q)/h),bc(b,l),[m,of(b)]}}function d(b,c){var e=f?a:Z-a,g=0;b<-e?g|=1:b>e&&(g|=2);c<-e?g|=4:c>e&&(g|=8);return g}var e=Math.cos(a),f=0<e,g=1E-6<ua(e),l=Gc(a,6*wa);return lg(b,function(a){var e,l,h,m,q;return{lineStart:function(){m=h=!1;q=1},point:function(p,
r){var T=[p,r],n,t=b(p,r),Bd=f?t?0:d(p,r):t?d(p+(0>p?Z:-Z),r):0;!e&&(m=h=t)&&a.lineStart();t!==h&&(n=c(e,T),R(e,n)||R(T,n))&&(T[0]+=1E-6,T[1]+=1E-6,t=b(T[0],T[1]));if(t!==h)q=0,t?(a.lineStart(),n=c(T,e),a.point(n[0],n[1])):(n=c(e,T),a.point(n[0],n[1]),a.lineEnd()),e=n;else if(g&&e&&f^t){var u;Bd&l||!(u=c(T,e,!0))||(q=0,f?(a.lineStart(),a.point(u[0][0],u[0][1]),a.point(u[1][0],u[1][1]),a.lineEnd()):(a.point(u[1][0],u[1][1]),a.lineEnd(),a.lineStart(),a.point(u[0][0],u[0][1])))}!t||e&&R(e,T)||a.point(T[0],
T[1]);e=T;h=t;l=Bd},lineEnd:function(){h&&a.lineEnd();e=null},clean:function(){return q|(m&&h)<<1}}},l,f?[0,-a]:[-Z,a-Z])}function hc(a,b,c,d){return function(e){var f=e.a,g=e.b,l=f.x,f=f.y,h=0,m=1,q=g.x-l,g=g.y-f,p;p=a-l;if(q||!(0<p)){p/=q;if(0>q){if(p<h)return;p<m&&(m=p)}else if(0<q){if(p>m)return;p>h&&(h=p)}p=c-l;if(q||!(0>p)){p/=q;if(0>q){if(p>m)return;p>h&&(h=p)}else if(0<q){if(p<h)return;p<m&&(m=p)}p=b-f;if(g||!(0<p)){p/=g;if(0>g){if(p<h)return;p<m&&(m=p)}else if(0<g){if(p>m)return;p>h&&(h=
p)}p=d-f;if(g||!(0>p)){p/=g;if(0>g){if(p>m)return;p>h&&(h=p)}else if(0<g){if(p<h)return;p<m&&(m=p)}0<h&&(e.a={x:l+h*q,y:f+h*g});1>m&&(e.b={x:l+m*q,y:f+m*g});return e}}}}}}function sf(a,b,c,d){function e(d,f){return 1E-6>ua(d[0]-a)?0<f?0:3:1E-6>ua(d[0]-c)?0<f?2:1:1E-6>ua(d[1]-b)?0<f?1:0:0<f?3:2}function f(a,b){return g(a.x,b.x)}function g(a,b){var c=e(a,1),d=e(b,1);return c!==d?c-d:0===c?b[1]-a[1]:1===c?a[0]-b[0]:2===c?a[1]-b[1]:b[0]-a[0]}return function(l){function h(f,l,m,q){var p=0,r=0;if(null==
f||(p=e(f,m))!==(r=e(l,m))||0>g(f,l)^0<m){do q.point(0===p||3===p?a:c,1<p?d:b);while((p=(p+m+4)%4)!==r)}else q.point(l[0],l[1])}function m(e,f){a<=e&&e<=c&&b<=f&&f<=d&&l.point(e,f)}function q(e,f){e=Math.max(-1E9,Math.min(1E9,e));f=Math.max(-1E9,Math.min(1E9,f));var g=a<=e&&e<=c&&b<=f&&f<=d;t&&u.push([e,f]);if(B)v=e,w=f,x=g,B=!1,g&&(l.lineStart(),l.point(e,f));else if(g&&G)l.point(e,f);else{var h={a:{x:I,y:A},b:{x:e,y:f}};T(h)?(G||(l.lineStart(),l.point(h.a.x,h.a.y)),l.point(h.b.x,h.b.y),g||l.lineEnd(),
db=!1):g&&(l.lineStart(),l.point(e,f),db=!1)}I=e;A=f;G=g}var p=l,r=qf(),T=hc(a,b,c,d),n,t,u,Z={point:m,lineStart:function(){Z.point=q;t&&t.push(u=[]);B=!0;G=!1;I=A=NaN},lineEnd:function(){n&&(q(v,w),x&&G&&r.rejoin(),n.push(r.buffer()));Z.point=m;G&&l.lineEnd()},polygonStart:function(){l=r;n=[];t=[];db=!0},polygonEnd:function(){l=p;n=P.merge(n);var b;b=[a,d];for(var c=0,e=t.length,g=b[1],m=0;m<e;++m)for(var q=1,r=t[m],T=r.length,Z=r[0],v;q<T;++q)v=r[q],Z[1]<=g?v[1]>g&&0<X(Z,v,b)&&++c:v[1]<=g&&0>X(Z,
v,b)&&--c,Z=v;b=0!==c;c=db&&b;e=n.length;if(c||e)l.polygonStart(),c&&(l.lineStart(),h(null,null,1,l),l.lineEnd()),e&&Mf(n,f,b,h,l),l.polygonEnd();n=t=u=null}},v,w,x,I,A,G,B,db;return Z}}function tf(a,b){function c(d,e){return d=a(d,e),b(d[0],d[1])}a.invert&&b.invert&&(c.invert=function(c,d){return c=b.invert(c,d),c&&a.invert(c[0],c[1])});return c}function Le(a){var b=0,c=Z/3,d=cc(a);a=d(b,c);a.parallels=function(a){return arguments.length?d(b=a[0]*Z/180,c=a[1]*Z/180):[b/Z*180,c/Z*180]};return a}function Dc(a,
b){function c(a,b){var d=Math.sqrt(f-2*e*Math.sin(b))/e;return[d*Math.sin(a*=e),g-d*Math.cos(a)]}var d=Math.sin(a),e=(d+Math.sin(b))/2,f=1+d*(2*e-d),g=Math.sqrt(f)/e;c.invert=function(a,b){var c=g-b;return[Math.atan2(a,c)/e,O((f-(a*a+c*c)*e*e)/(2*e))]};return c}function xe(){function a(b,c){xg+=e*b-d*c;d=b;e=c}var b,c,d,e;Gd.point=function(f,g){Gd.point=a;b=d=f;c=e=g};Gd.lineEnd=function(){a(b,c)}}function Ad(){function a(b,c){g.push("M",b,",",c,f)}function b(a,d){g.push("M",a,",",d);l.point=c}function c(a,
b){g.push("L",a,",",b)}function d(){l.point=a}function e(){g.push("Z")}var f=Rb(4.5),g=[],l={point:a,lineStart:function(){l.point=b},lineEnd:d,polygonStart:function(){l.lineEnd=e},polygonEnd:function(){l.lineEnd=d;l.point=a},pointRadius:function(a){f=Rb(a);return l},result:function(){if(g.length){var a=g.join("");g=[];return a}}};return l}function Rb(a){return"m0,"+a+"a"+a+","+a+" 0 1,1 0,"+-2*a+"a"+a+","+a+" 0 1,1 0,"+2*a+"z"}function id(a,b){ne+=a;Ud+=b;++Vd}function Rd(){function a(d,e){var f=
d-b,g=e-c,f=Math.sqrt(f*f+g*g);ld+=f*(b+d)/2;Dd+=f*(c+e)/2;Wc+=f;id(b=d,c=e)}var b,c;Wd.point=function(d,e){Wd.point=a;id(b=d,c=e)}}function ce(){Wd.point=id}function Tc(){function a(b,c){var f=b-d,g=c-e,f=Math.sqrt(f*f+g*g);ld+=f*(d+b)/2;Dd+=f*(e+c)/2;Wc+=f;f=e*b-d*c;Oe+=f*(d+b);oe+=f*(e+c);Fd+=3*f;id(d=b,e=c)}var b,c,d,e;Wd.point=function(f,g){Wd.point=a;id(b=d=f,c=e=g)};Wd.lineEnd=function(){a(b,c)}}function Uf(a){function b(c,d){a.moveTo(c,d);a.arc(c,d,g,0,lc)}function c(b,e){a.moveTo(b,e);l.point=
d}function d(b,c){a.lineTo(b,c)}function e(){l.point=b}function f(){a.closePath()}var g=4.5,l={point:b,lineStart:function(){l.point=c},lineEnd:e,polygonStart:function(){l.lineEnd=f},polygonEnd:function(){l.lineEnd=e;l.point=b},pointRadius:function(a){g=a;return l},result:r};return l}function Sd(a){function b(a){return(l?d:c)(a)}function c(b){return Ib(b,function(c,d){c=a(c,d);b.point(c[0],c[1])})}function d(b){function c(d,e){d=a(d,e);b.point(d[0],d[1])}function f(){w=NaN;G.point=g;b.lineStart()}
function g(c,d){var f=zc([c,d]),h=a(c,d);e(w,x,v,db,I,A,w=h[0],x=h[1],v=c,db=f[0],I=f[1],A=f[2],l,b);b.point(w,x)}function h(){G.point=c;b.lineEnd()}function m(){f();G.point=q;G.lineEnd=p}function q(a,b){g(r=a,b);T=w;n=x;t=db;u=I;Z=A;G.point=g}function p(){e(w,x,v,db,I,A,T,n,r,t,u,Z,l,b);G.lineEnd=h;h()}var r,T,n,t,u,Z,v,w,x,db,I,A,G={point:c,lineStart:f,lineEnd:h,polygonStart:function(){b.polygonStart();G.lineStart=m},polygonEnd:function(){b.polygonEnd();G.lineStart=f}};return G}function e(b,c,d,
l,h,m,q,p,r,T,n,t,u,Z){var v=q-b,w=p-c,x=v*v+w*w;if(x>4*f&&u--){var db=l+T,I=h+n,A=m+t,G=Math.sqrt(db*db+I*I+A*A),B=Math.asin(A/=G),E=1E-6>ua(ua(A)-1)||1E-6>ua(d-r)?(d+r)/2:Math.atan2(I,db),N=a(E,B),B=N[0],N=N[1],z=B-b,F=N-c,K=w*z-v*F;if(K*K/x>f||.3<ua((v*z+w*F)/x-.5)||l*T+h*n+m*t<g)e(b,c,d,l,h,m,B,N,E,db/=G,I/=G,A,u,Z),Z.point(B,N),e(B,N,E,db,I,A,q,p,r,T,n,t,u,Z)}}var f=.5,g=Math.cos(30*wa),l=16;b.precision=function(a){if(!arguments.length)return Math.sqrt(f);l=0<(f=a*a)&&16;return b};return b}function ie(a){var b=
Sd(function(b,c){return a([b*ub,c*ub])});return function(a){return ic(b(a))}}function Cb(a){this.stream=a}function Ib(a,b){return{point:b,sphere:function(){a.sphere()},lineStart:function(){a.lineStart()},lineEnd:function(){a.lineEnd()},polygonStart:function(){a.polygonStart()},polygonEnd:function(){a.polygonEnd()}}}function tc(a){return cc(function(){return a})()}function cc(a){function b(a){a=l(a[0]*wa,a[1]*wa);return[a[0]*m+Z,v-a[1]*m]}function c(a){return(a=l.invert((a[0]-Z)/m,(v-a[1])/m))&&[a[0]*
ub,a[1]*ub]}function d(){l=tf(g=jd(n,t,u),f);var a=f(r,T);Z=q-a[0]*m;v=p+a[1]*m;return e()}function e(){G&&(G.valid=!1,G=null);return b}var f,g,l,h=Sd(function(a,b){a=f(a,b);return[a[0]*m+Z,v-a[1]*m]}),m=150,q=480,p=250,r=0,T=0,n=0,t=0,u=0,Z,v,w=uc,x=Ha,I=null,A=null,G;b.stream=function(a){G&&(G.valid=!1);G=ic(w(g,h(x(a))));G.valid=!0;return G};b.clipAngle=function(a){if(!arguments.length)return I;w=null==a?(I=a,uc):Cc((I=+a)*wa);return e()};b.clipExtent=function(a){if(!arguments.length)return A;
x=(A=a)?sf(a[0][0],a[0][1],a[1][0],a[1][1]):Ha;return e()};b.scale=function(a){if(!arguments.length)return m;m=+a;return d()};b.translate=function(a){if(!arguments.length)return[q,p];q=+a[0];p=+a[1];return d()};b.center=function(a){if(!arguments.length)return[r*ub,T*ub];r=a[0]%360*wa;T=a[1]%360*wa;return d()};b.rotate=function(a){if(!arguments.length)return[n*ub,t*ub,u*ub];n=a[0]%360*wa;t=a[1]%360*wa;u=2<a.length?a[2]%360*wa:0;return d()};P.rebind(b,h,"precision");return function(){f=a.apply(this,
arguments);b.invert=f.invert&&c;return d()}}function ic(a){return Ib(a,function(b,c){a.point(b*wa,c*wa)})}function Jc(a,b){return[a,b]}function Bb(a,b){return[a>Z?a-lc:a<-Z?a+lc:a,b]}function jd(a,b,c){return a?b||c?tf(Ea(a),je(b,c)):Ea(a):b||c?je(b,c):Bb}function Me(a){return function(b,c){return b+=a,[b>Z?b-lc:b<-Z?b+lc:b,c]}}function Ea(a){var b=Me(a);b.invert=Me(-a);return b}function je(a,b){function c(a,b){var l=Math.cos(b),h=Math.cos(a)*l,l=Math.sin(a)*l,m=Math.sin(b),q=m*d+h*e;return[Math.atan2(l*
f-q*g,h*d-m*e),O(q*f+l*g)]}var d=Math.cos(a),e=Math.sin(a),f=Math.cos(b),g=Math.sin(b);c.invert=function(a,b){var c=Math.cos(b),l=Math.cos(a)*c,c=Math.sin(a)*c,h=Math.sin(b),m=h*f-c*g;return[Math.atan2(c*f+h*g,l*d+m*e),O(m*d-l*e)]};return c}function Gc(a,b){var c=Math.cos(a),d=Math.sin(a);return function(e,f,g,l){var h=g*b;if(null!=e){if(e=Pc(c,e),f=Pc(c,f),0<g?e<f:e>f)e+=g*lc}else e=a+g*lc,f=a-.5*h;for(var m;0<g?e>f:e<f;e-=h)l.point((m=of([c,-d*Math.cos(e),-d*Math.sin(e)]))[0],m[1])}}function Pc(a,
b){var c=zc(b);c[0]-=a;Ke(c);var d=ea(-c[1]);return((0>-c[2]?-d:d)+2*Math.PI-1E-6)%(2*Math.PI)}function ye(a,b,c){var d=P.range(a,b-1E-6,c).concat(b);return function(a){return d.map(function(b){return[a,b]})}}function Ig(a,b,c){var d=P.range(a,b-1E-6,c).concat(b);return function(a){return d.map(function(b){return[b,a]})}}function De(a){return a.source}function yc(a){return a.target}function kg(a,b,c,d){var e=Math.cos(b),f=Math.sin(b),g=Math.cos(d),l=Math.sin(d),h=e*Math.cos(a),m=e*Math.sin(a),q=g*
Math.cos(c),p=g*Math.sin(c),r=2*Math.asin(Math.sqrt(ia(d-b)+e*g*ia(c-a))),T=1/Math.sin(r);c=r?function(a){var b=Math.sin(a*=r)*T,c=Math.sin(r-a)*T;a=c*h+b*q;var d=c*m+b*p,b=c*f+b*l;return[Math.atan2(d,a)*ub,Math.atan2(b,Math.sqrt(a*a+d*d))*ub]}:function(){return[a*ub,b*ub]};c.distance=r;return c}function sd(a,b){function c(b,d){var e=Math.cos(b),f=Math.cos(d),e=a(e*f);return[e*f*Math.sin(b),e*Math.sin(d)]}c.invert=function(a,c){var d=Math.sqrt(a*a+c*c),e=b(d),f=Math.sin(e),e=Math.cos(e);return[Math.atan2(a*
f,d*e),Math.asin(d&&c*f/d)]};return c}function Lf(a,b){function c(a,b){var d=1E-6>ua(ua(b)-Ec)?0:f/Math.pow(Math.tan(Z/4+b/2),e);return[d*Math.sin(e*a),f-d*Math.cos(e*a)]}var d=Math.cos(a),e=a===b?Math.sin(a):Math.log(d/Math.cos(b))/Math.log(Math.tan(Z/4+b/2)/Math.tan(Z/4+a/2)),f=d*Math.pow(Math.tan(Z/4+a/2),e)/e;if(!e)return df;c.invert=function(a,b){var c=f-b,d=(0<e?1:0>e?-1:0)*Math.sqrt(a*a+c*c);return[Math.atan2(a,c)/e,2*Math.atan(Math.pow(f/d,1/e))-Ec]};return c}function Jg(a,b){function c(a,
b){var d=f-b;return[d*Math.sin(e*a),f-d*Math.cos(e*a)]}var d=Math.cos(a),e=a===b?Math.sin(a):(d-Math.cos(b))/(b-a),f=d/e+a;if(1E-6>ua(e))return Jc;c.invert=function(a,b){var c=f-b;return[Math.atan2(a,c)/e,f-(0<e?1:0>e?-1:0)*Math.sqrt(a*a+c*c)]};return c}function df(a,b){return[a,Math.log(Math.tan(Z/4+b/2))]}function mg(a){var b=tc(a),c=b.scale,d=b.translate,e=b.clipExtent,f;b.scale=function(){var a=c.apply(b,arguments);return a===b?f?b.clipExtent(null):b:a};b.translate=function(){var a=d.apply(b,
arguments);return a===b?f?b.clipExtent(null):b:a};b.clipExtent=function(a){var g=e.apply(b,arguments);if(g===b){if(f=null==a){var l=Z*c(),h=d();e([[h[0]-l,h[1]-l],[h[0]+l,h[1]+l]])}}else f&&(g=null);return g};return b.clipExtent(null)}function ef(a,b){return[Math.log(Math.tan(Z/4+b/2)),-a]}function Ac(a){return a[0]}function de(a){return a[1]}function Qc(a){for(var b=a.length,c=[0,1],d=2,e=2;e<b;e++){for(;1<d&&0>=X(a[c[d-2]],a[c[d-1]],a[e]);)--d;c[d++]=e}return c.slice(0,d)}function Ee(a,b){return a[0]-
b[0]||a[1]-b[1]}function ff(a,b,c){return(c[0]-b[0])*(a[1]-b[1])<(c[1]-b[1])*(a[0]-b[0])}function dd(a,b,c,d){var e=a[0],f=c[0],g=b[0]-e,l=d[0]-f;a=a[1];c=c[1];b=b[1]-a;d=d[1]-c;f=(l*(a-c)-d*(e-f))/(d*g-l*b);return[e+f*g,a+f*b]}function gf(a){var b=a[0];a=a[a.length-1];return!(b[0]-a[0]||b[1]-a[1])}function Fe(){ge(this);this.edge=this.site=this.circle=null}function Lg(a){var b=Fh.pop()||new Fe;b.site=a;return b}function mf(a){Da(a);Xf.remove(a);Fh.push(a);ge(a)}function qg(a,b){var c=a.site,d=c.x,
e=c.y,f=e-b;if(!f)return d;var g=a.P;if(!g)return-Infinity;var c=g.site,g=c.x,c=c.y,l=c-b;if(!l)return g;var h=g-d,m=1/f-1/l,q=h/l;return m?(-q+Math.sqrt(q*q-2*m*(h*h/(-2*l)-c+l/2+e-f/2)))/m+d:(d+g)/2}function Ge(a){this.site=a;this.edges=[]}function Rf(a,b){return b.angle-a.angle}function Sf(){ge(this);this.x=this.y=this.arc=this.site=this.cy=null}function Pd(a){var b=a.P,c=a.N;if(b&&c){var d=b.site,b=a.site,e=c.site;if(d!==e){var c=b.x,f=b.y,g=d.x-c,l=d.y-f,d=e.x-c,e=e.y-f,h=2*(g*e-l*d);if(!(-1E-12<=
h)){var m=g*g+l*l,q=d*d+e*e,l=(e*m-l*q)/h,g=(g*q-d*m)/h,e=g+f,f=Gh.pop()||new Sf;f.arc=a;f.site=b;f.x=l+c;f.y=e+Math.sqrt(l*l+g*g);f.cy=e;a.circle=f;a=null;for(b=yg._;b;)if(f.y<b.y||f.y===b.y&&f.x<=b.x)if(b.L)b=b.L;else{a=b.P;break}else if(b.R)b=b.R;else{a=b;break}yg.insert(a,f);a||(mh=f)}}}}function Da(a){var b=a.circle;b&&(b.P||(mh=b.N),yg.remove(b),Gh.push(b),ge(b),a.circle=null)}function Ng(a,b){var c=a.b;if(c)return!0;var d=a.a,c=b[0][0],e=b[1][0],f=b[0][1],g=b[1][1],l=a.l,h=a.r,m=l.x,l=l.y,
q=h.x,h=h.y,p=(m+q)/2,r;if(h===l){if(p<c||p>=e)return;if(m>q){if(!d)d={x:p,y:f};else if(d.y>=g)return;c={x:p,y:g}}else{if(!d)d={x:p,y:g};else if(d.y<f)return;c={x:p,y:f}}}else if(r=(m-q)/(h-l),p=(l+h)/2-r*p,-1>r||1<r)if(m>q){if(!d)d={x:(f-p)/r,y:f};else if(d.y>=g)return;c={x:(g-p)/r,y:g}}else{if(!d)d={x:(g-p)/r,y:g};else if(d.y<f)return;c={x:(f-p)/r,y:f}}else if(l<h){if(!d)d={x:c,y:r*c+p};else if(d.x>=e)return;c={x:e,y:r*e+p}}else{if(!d)d={x:e,y:r*e+p};else if(d.x<c)return;c={x:c,y:r*c+p}}a.a=d;a.b=
c;return!0}function rg(a,b){this.l=a;this.r=b;this.a=this.b=null}function xd(a,b,c,d){var e=new rg(a,b);Yf.push(e);c&&fc(e,a,b,c);d&&fc(e,b,a,d);wf[a.i].edges.push(new hf(e,a,b));wf[b.i].edges.push(new hf(e,b,a));return e}function kh(a,b,c){a=new rg(a,null);a.a=b;a.b=c;Yf.push(a);return a}function fc(a,b,c,d){a.a||a.b?a.l===c?a.b=d:a.a=d:(a.a=d,a.l=b,a.r=c)}function hf(a,b,c){var d=a.a,e=a.b;this.edge=a;this.site=b;this.angle=c?Math.atan2(c.y-b.y,c.x-b.x):a.l===b?Math.atan2(e.x-d.x,d.y-e.y):Math.atan2(d.x-
e.x,e.y-d.y)}function se(){this._=null}function ge(a){a.U=a.C=a.L=a.R=a.P=a.N=null}function vd(a,b){var c=b.R,d=b.U;d?d.L===b?d.L=c:d.R=c:a._=c;c.U=d;b.U=c;b.R=c.L;b.R&&(b.R.U=b);c.L=b}function wd(a,b){var c=b.L,d=b.U;d?d.L===b?d.L=c:d.R=c:a._=c;c.U=d;b.U=c;b.L=c.R;b.L&&(b.L.U=b);c.R=b}function Nb(a){for(;a.L;)a=a.L;return a}function gd(a,b){var c=a.sort(va).pop(),d,e,f;Yf=[];wf=Array(a.length);Xf=new se;for(yg=new se;;)if(f=mh,c&&(!f||c.y<f.y||c.y===f.y&&c.x<f.x)){if(c.x!==d||c.y!==e){wf[c.i]=new Ge(c);
d=c;for(var g=d.x,l=d.y,h=f=e=void 0,m=void 0,q=Xf._;q;)if(h=qg(q,l)-g,1E-6<h)q=q.L;else{var p=q,m=l,r=p.N;r?m=qg(r,m):(p=p.site,m=p.y===m?p.x:Infinity);m=g-m;if(1E-6<m){if(!q.R){e=q;break}q=q.R}else{-1E-6<h?(e=q.P,f=q):-1E-6<m?(e=q,f=q.N):e=f=q;break}}g=Lg(d);Xf.insert(e,g);if(e||f)if(e===f)Da(e),f=Lg(e.site),Xf.insert(g,f),g.edge=f.edge=xd(e.site,g.site),Pd(e),Pd(f);else if(f){Da(e);Da(f);var l=e.site,q=l.x,m=l.y,p=d.x-q,r=d.y-m,h=f.site,T=h.x-q,n=h.y-m,t=2*(p*n-r*T),u=p*p+r*r,Z=T*T+n*n,q={x:(n*
u-r*Z)/t+q,y:(p*Z-T*u)/t+m};fc(f.edge,l,h,q);g.edge=xd(l,d,null,q);f.edge=xd(d,h,null,q);Pd(e);Pd(f)}else g.edge=xd(e.site,g.site);d=c.x;e=c.y}c=a.pop()}else if(f){h=f.arc;f=h.circle;l=f.x;q=f.cy;f={x:l,y:q};p=h.P;m=h.N;g=[h];mf(h);for(h=p;h.circle&&1E-6>ua(l-h.circle.x)&&1E-6>ua(q-h.circle.cy);)p=h.P,g.unshift(h),mf(h),h=p;g.unshift(h);Da(h);for(p=m;p.circle&&1E-6>ua(l-p.circle.x)&&1E-6>ua(q-p.circle.cy);)m=p.N,g.push(p),mf(p),p=m;g.push(p);Da(p);l=g.length;q=void 0;for(q=1;q<l;++q)p=g[q],h=g[q-
1],fc(p.edge,h.site,p.site,f);h=g[0];p=g[l-1];p.edge=xd(h.site,p.site,null,f);Pd(h);Pd(p)}else break;if(b){c=Yf;d=hc(b[0][0],b[0][1],b[1][0],b[1][1]);for(e=c.length;e--;)if(f=c[e],!Ng(f,b)||!d(f)||1E-6>ua(f.a.x-f.b.x)&&1E-6>ua(f.a.y-f.b.y))f.a=f.b=null,c.splice(e,1);c=b[0][0];d=b[1][0];e=b[0][1];f=b[1][1];q=wf;for(m=q.length;m--;)if((p=q[m])&&p.prepare())for(T=p.edges,n=T.length,r=0;r<n;)if(t=T[r].end(),l=t.x,h=t.y,u=T[++r%n].start(),g=u.x,u=u.y,1E-6<ua(l-g)||1E-6<ua(h-u))T.splice(r,0,new hf(kh(p.site,
t,1E-6>ua(l-c)&&1E-6<f-h?{x:c,y:1E-6>ua(g-c)?u:f}:1E-6>ua(h-f)&&1E-6<d-l?{x:1E-6>ua(u-f)?g:d,y:f}:1E-6>ua(l-d)&&1E-6<h-e?{x:d,y:1E-6>ua(g-d)?u:e}:1E-6>ua(h-e)&&1E-6<l-c?{x:1E-6>ua(u-e)?g:c,y:e}:null),p.site,null)),++n}c={cells:wf,edges:Yf};Xf=yg=Yf=wf=null;return c}function va(a,b){return b.y-a.y||b.x-a.x}function he(a){return a.x}function Pf(a){return a.y}function Ic(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function qb(a,b,c,d,e,f){if(!a(b,c,d,e,f)){var g=.5*(c+e),l=.5*(d+f);b=b.nodes;
b[0]&&qb(a,b[0],c,d,g,l);b[1]&&qb(a,b[1],g,d,e,l);b[2]&&qb(a,b[2],c,l,g,f);b[3]&&qb(a,b[3],g,l,e,f)}}function fd(a,b){a=P.rgb(a);b=P.rgb(b);var c=a.r,d=a.g,e=a.b,f=b.r-c,g=b.g-d,l=b.b-e;return function(a){return"#"+ab(Math.round(c+f*a))+ab(Math.round(d+g*a))+ab(Math.round(e+l*a))}}function Hc(a,b){var c={},d={},e;for(e in a)e in b?c[e]=ud(a[e],b[e]):d[e]=a[e];for(e in b)e in a||(d[e]=b[e]);return function(a){for(e in c)d[e]=c[e](a);return d}}function yb(a,b){b-=a=+a;return function(c){return a+b*
c}}function Sc(a,b){var c,d,e=0,f=[],g=[],l,h;a+="";b+="";for(d=Ug.lastIndex=0;c=Ug.exec(b);++d)c.index&&f.push(b.substring(e,c.index)),g.push({i:f.length,x:c[0]}),f.push(null),e=Ug.lastIndex;e<b.length&&f.push(b.substring(e));d=0;for(l=g.length;(c=Ug.exec(a))&&d<l;++d)if(h=g[d],h.x==c[0]){if(h.i)if(null==f[h.i+1])for(f[h.i-1]+=h.x,f.splice(h.i,1),c=d+1;c<l;++c)g[c].i--;else for(f[h.i-1]+=h.x+f[h.i+1],f.splice(h.i,2),c=d+1;c<l;++c)g[c].i-=2;else if(null==f[h.i+1])f[h.i]=h.x;else for(f[h.i]=h.x+f[h.i+
1],f.splice(h.i+1,1),c=d+1;c<l;++c)g[c].i--;g.splice(d,1);l--;d--}else h.x=yb(parseFloat(c[0]),parseFloat(h.x));for(;d<l;)h=g.pop(),null==f[h.i+1]?f[h.i]=h.x:(f[h.i]=h.x+f[h.i+1],f.splice(h.i+1,1)),l--;return 1===f.length?null==f[0]?(h=g[0].x,function(a){return h(a)+""}):function(){return b}:function(a){for(d=0;d<l;++d)f[(h=g[d]).i]=h.x(a);return f.join("")}}function ud(a,b){for(var c=P.interpolators.length,d;0<=--c&&!(d=P.interpolators[c](a,b)););return d}function te(a,b){var c=[],d=[],e=a.length,
f=b.length,g=Math.min(a.length,b.length),l;for(l=0;l<g;++l)c.push(ud(a[l],b[l]));for(;l<e;++l)d[l]=a[l];for(;l<f;++l)d[l]=b[l];return function(a){for(l=0;l<g;++l)d[l]=c[l](a);return d}}function sg(a){return function(b){return 0>=b?0:1<=b?1:a(b)}}function Ie(a){return function(b){return 1-a(1-b)}}function Qf(a){return function(b){return.5*(.5>b?a(2*b):2-a(2-2*b))}}function Mg(a){return a*a}function Pb(a){return a*a*a}function hd(a){if(0>=a)return 0;if(1<=a)return 1;var b=a*a,c=b*a;return 4*(.5>a?c:
3*(a-b)+c-.75)}function Og(a){return 1-Math.cos(a*Ec)}function Kg(a){return Math.pow(2,10*(a-1))}function Je(a){return 1-Math.sqrt(1-a*a)}function ue(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}function Mb(a,b){b-=a;return function(c){return Math.round(a+b*c)}}function ng(a){var b=[a.a,a.b],c=[a.c,a.d],d=ed(b),e=b[0]*c[0]+b[1]*c[1],f=-e;c[0]+=f*b[0];c[1]+=f*b[1];f=ed(c)||0;b[0]*c[1]<c[0]*b[1]&&(b[0]*=-1,
b[1]*=-1,d*=-1,e*=-1);this.rotate=(d?Math.atan2(b[1],b[0]):Math.atan2(-c[0],c[1]))*ub;this.translate=[a.e,a.f];this.scale=[d,f];this.skew=f?Math.atan2(e,f)*ub:0}function ed(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]);b&&(a[0]/=b,a[1]/=b);return b}function Nf(a,b){var c=[],d=[],e,f=P.transform(a),g=P.transform(b),l=f.translate,h=g.translate,m=f.rotate,q=g.rotate,p=f.skew,r=g.skew,f=f.scale,g=g.scale;l[0]!=h[0]||l[1]!=h[1]?(c.push("translate(",null,",",null,")"),d.push({i:1,x:yb(l[0],h[0])},{i:3,x:yb(l[1],
h[1])})):h[0]||h[1]?c.push("translate("+h+")"):c.push("");m!=q?(180<m-q?q+=360:180<q-m&&(m+=360),d.push({i:c.push(c.pop()+"rotate(",null,")")-2,x:yb(m,q)})):q&&c.push(c.pop()+"rotate("+q+")");p!=r?d.push({i:c.push(c.pop()+"skewX(",null,")")-2,x:yb(p,r)}):r&&c.push(c.pop()+"skewX("+r+")");f[0]!=g[0]||f[1]!=g[1]?(e=c.push(c.pop()+"scale(",null,",",null,")"),d.push({i:e-4,x:yb(f[0],g[0])},{i:e-2,x:yb(f[1],g[1])})):1==g[0]&&1==g[1]||c.push(c.pop()+"scale("+g+")");e=d.length;return function(a){for(var b=
-1,f;++b<e;)c[(f=d[b]).i]=f.x(a);return c.join("")}}function ec(a,b){b=b-(a=+a)?1/(b-a):0;return function(c){return(c-a)*b}}function td(a,b){b=b-(a=+a)?1/(b-a):0;return function(c){return Math.max(0,Math.min(1,(c-a)*b))}}function og(a){var b=a.source;a=a.target;var c;var d=a;if(b===d)c=b;else{c=Of(b);for(var d=Of(d),e=c.pop(),f=d.pop(),g=null;e===f;)g=e,e=c.pop(),f=d.pop();c=g}for(d=[b];b!==c;)b=b.parent,d.push(b);for(b=d.length;a!==c;)d.splice(b,0,a),a=a.parent;return d}function Of(a){for(var b=
[],c=a.parent;null!=c;)b.push(a),a=c,c=c.parent;b.push(a);return b}function pg(a){a.fixed|=2}function kb(a){a.fixed&=-7}function Xb(a){a.fixed|=4;a.px=a.x;a.py=a.y}function ee(a){a.fixed&=-5}function jf(a,b,c){var d=0,e=0;a.charge=0;if(!a.leaf)for(var f=a.nodes,g=f.length,l=-1,h;++l<g;)h=f[l],null!=h&&(jf(h,b,c),a.charge+=h.charge,d+=h.charge*h.cx,e+=h.charge*h.cy);a.point&&(a.leaf||(a.point.x+=Math.random()-.5,a.point.y+=Math.random()-.5),b*=c[a.point.index],a.charge+=a.pointCharge=b,d+=b*a.point.x,
e+=b*a.point.y);a.cx=d/a.charge;a.cy=e/a.charge}function Rc(a,b){P.rebind(a,b,"sort","children","value");a.nodes=a;a.links=He;return a}function yd(a){return a.children}function kf(a){return a.value}function lf(a,b){return b.value-a.value}function He(a){return P.merge(a.map(function(a){return(a.children||[]).map(function(b){return{source:a,target:b}})}))}function sa(a){return a.x}function fe(a){return a.y}function Tb(a,b,c){a.y0=b;a.y=c}function Xc(a){return P.range(a.length)}function Pe(a){var b=
-1;a=a[0].length;for(var c=[];++b<a;)c[b]=0;return c}function Zf(a){for(var b=1,c=0,d=a[0][1],e,f=a.length;b<f;++b)(e=a[b][1])>d&&(c=b,d=e);return c}function xf(a){return a.reduce(zg,0)}function zg(a,b){return a+b[1]}function Hd(a,b){return $f(a,Math.ceil(Math.log(b.length)/Math.LN2+1))}function $f(a,b){for(var c=-1,d=+a[0],e=(a[1]-d)/b,f=[];++c<=b;)f[c]=e*c+d;return f}function Ag(a){return[P.min(a),P.max(a)]}function yf(a,b){return a.parent==b.parent?1:2}function pe(a){var b=a.children;return b&&
b.length?b[0]:a._tree.thread}function xa(a){var b=a.children,c;return b&&(c=b.length)?b[c-1]:a._tree.thread}function Xd(a,b){var c=a.children;if(c&&(e=c.length))for(var d,e,f=-1;++f<e;)0<b(d=Xd(c[f],b),a)&&(a=d);return a}function Qe(a,b){return a.x-b.x}function Id(a,b){return b.x-a.x}function Bg(a,b){return a.depth-b.depth}function Jd(a,b){function c(a,d){var e=a.children;if(e&&(h=e.length))for(var f,g=null,l=-1,h;++l<h;)f=e[l],c(f,g),g=f;b(a,d)}c(a,null)}function ag(a,b){return a.value-b.value}function zf(a,
b){var c=a._pack_next;a._pack_next=b;b._pack_prev=a;b._pack_next=c;c._pack_prev=b}function bg(a,b){a._pack_next=b;b._pack_prev=a}function md(a,b){var c=b.x-a.x,d=b.y-a.y,e=a.r+b.r;return.999*e*e>c*c+d*d}function Ub(a){function b(a){d=Math.min(a.x-a.r,d);e=Math.max(a.x+a.r,e);f=Math.min(a.y-a.r,f);g=Math.max(a.y+a.r,g)}if((c=a.children)&&(T=c.length)){var c,d=Infinity,e=-Infinity,f=Infinity,g=-Infinity,l,h,m,q,p,r,T;c.forEach(cg);l=c[0];l.x=-l.r;l.y=0;b(l);if(1<T&&(h=c[1],h.x=h.r,h.y=0,b(h),2<T))for(m=
c[2],nb(l,h,m),b(m),zf(l,m),l._pack_prev=m,zf(m,h),h=l._pack_next,q=3;q<T;q++){nb(l,h,m=c[q]);var n=0,t=1,u=1;for(p=h._pack_next;p!==h;p=p._pack_next,t++)if(md(p,m)){n=1;break}if(1==n)for(r=l._pack_prev;r!==p._pack_prev&&!md(r,m);r=r._pack_prev,u++);n?(t<u||t==u&&h.r<l.r?bg(l,h=p):bg(l=r,h),q--):(zf(l,m),h=m,b(m))}l=(d+e)/2;h=(f+g)/2;for(q=p=0;q<T;q++)m=c[q],m.x-=l,m.y-=h,p=Math.max(p,m.r+Math.sqrt(m.x*m.x+m.y*m.y));a.r=p;c.forEach(dg)}}function cg(a){a._pack_next=a._pack_prev=a}function dg(a){delete a._pack_next;
delete a._pack_prev}function Oa(a,b,c,d){var e=a.children;a.x=b+=d*a.x;a.y=c+=d*a.y;a.r*=d;if(e){a=-1;for(var f=e.length;++a<f;)Oa(e[a],b,c,d)}}function nb(a,b,c){var d=a.r+c.r,e=b.x-a.x,f=b.y-a.y;if(d&&(e||f)){var g=b.r+c.r,l=e*e+f*f,g=g*g,d=d*d;b=.5+(d-g)/(2*l);g=Math.sqrt(Math.max(0,2*g*(d+l)-(d-=l)*d-g*g))/(2*l);c.x=a.x+b*e+g*f;c.y=a.y+b*f-g*e}else c.x=a.x+d,c.y=a.y}function $b(a){return 1+P.max(a,function(a){return a.y})}function Vg(a){return a.reduce(function(a,b){return a+b.x},0)/a.length}
function Cg(a){var b=a.children;return b&&b.length?Cg(b[0]):a}function vc(a){var b=a.children,c;return b&&(c=b.length)?vc(b[c-1]):a}function Lc(a){return{x:a.x,y:a.y,dx:a.dx,dy:a.dy}}function Kd(a,b){var c=a.x+b[3],d=a.y+b[0],e=a.dx-b[1]-b[3],f=a.dy-b[0]-b[2];0>e&&(c+=e/2,e=0);0>f&&(d+=f/2,f=0);return{x:c,y:d,dx:e,dy:f}}function Re(a){var b=a[0];a=a[a.length-1];return b<a?[b,a]:[a,b]}function Af(a){return a.rangeExtent?a.rangeExtent():Re(a.range())}function Se(a,b,c,d){var e=c(a[0],a[1]),f=d(b[0],
b[1]);return function(a){return f(e(a))}}function Ae(a,b){var c=0,d=a.length-1,e=a[c],f=a[d],g;f<e&&(g=c,c=d,d=g,g=e,e=f,f=g);a[c]=b.floor(e);a[d]=b.ceil(f);return a}function Mc(a){return a?{floor:function(b){return Math.floor(b/a)*a},ceil:function(b){return Math.ceil(b/a)*a}}:Wh}function Wg(a,b,c,d){var e=[],f=[],g=0,l=Math.min(a.length,b.length)-1;a[l]<a[0]&&(a=a.slice().reverse(),b=b.slice().reverse());for(;++g<=l;)e.push(c(a[g-1],a[g])),f.push(d(b[g-1],b[g]));return function(b){var c=P.bisect(a,
b,1,l)-1;return f[c](e[c](b))}}function Vb(a,b,c,d){function e(){var h=2<Math.min(a.length,b.length)?Wg:Se,m=d?td:ec;g=h(a,b,m,c);l=h(b,a,m,ud);return f}function f(a){return g(a)}var g,l;f.invert=function(a){return l(a)};f.domain=function(b){if(!arguments.length)return a;a=b.map(Number);return e()};f.range=function(a){if(!arguments.length)return b;b=a;return e()};f.rangeRound=function(a){return f.range(a).interpolate(Mb)};f.clamp=function(a){if(!arguments.length)return d;d=a;return e()};f.interpolate=
function(a){if(!arguments.length)return c;c=a;return e()};f.ticks=function(b){return P.range.apply(P,Yc(a,b))};f.tickFormat=function(b,c){return Te(a,b,c)};f.nice=function(b){Ae(a,Mc(Yc(a,b)[2]));return e()};f.copy=function(){return Vb(a,b,c,d)};return e()}function Bf(a,b){return P.rebind(a,b,"range","rangeRound","interpolate","clamp")}function Yc(a,b){null==b&&(b=10);var c=Re(a),d=c[1]-c[0],e=Math.pow(10,Math.floor(Math.log(d/b)/Math.LN10)),d=b/d*e;.15>=d?e*=10:.35>=d?e*=5:.75>=d&&(e*=2);c[0]=Math.ceil(c[0]/
e)*e;c[1]=Math.floor(c[1]/e)*e+.5*e;c[2]=e;return c}function Te(a,b,c){var d=Yc(a,b);return P.format(c?c.replace(Wf,function(a,b,c,e,f,g,l,h,m,q){return[b,c,e,f,g,l,h,m||"."+ka(q,d),q].join("")}):",."+nd(d[2])+"f")}function nd(a){return-Math.floor(Math.log(a)/Math.LN10+.01)}function ka(a,b){var c=nd(b[2]);return a in nh?Math.abs(c-nd(Math.max(Math.abs(b[0]),Math.abs(b[1]))))+ +("e"!==a):c-2*("%"===a)}function Ia(a,b,c,d){function e(a){return(c?Math.log(0>a?0:a):-Math.log(0<a?0:-a))/Math.log(b)}function f(a){return c?
Math.pow(b,a):-Math.pow(b,-a)}function g(b){return a(e(b))}g.invert=function(b){return f(a.invert(b))};g.domain=function(b){if(!arguments.length)return d;c=0<=b[0];a.domain((d=b.map(Number)).map(e));return g};g.base=function(c){if(!arguments.length)return b;b=+c;a.domain(d.map(e));return g};g.nice=function(){var b=Ae(d.map(e),c?Math:Xh);a.domain(b);d=b.map(f);return g};g.ticks=function(){var a=Re(d),g=[],l=a[0],a=a[1],h=Math.floor(e(l)),m=Math.ceil(e(a)),q=b%1?2:b;if(isFinite(m-h)){if(c){for(;h<m;h++)for(var p=
1;p<q;p++)g.push(f(h)*p);g.push(f(h))}else for(g.push(f(h));h++<m;)for(p=q-1;0<p;p--)g.push(f(h)*p);for(h=0;g[h]<l;h++);for(m=g.length;g[m-1]>a;m--);g=g.slice(h,m)}return g};g.tickFormat=function(a,b){if(!arguments.length)return oh;2>arguments.length?b=oh:"function"!==typeof b&&(b=P.format(b));var d=Math.max(.1,a/g.ticks().length),l=c?(h=1E-12,Math.ceil):(h=-1E-12,Math.floor),h;return function(a){return a/f(l(e(a)+h))<=d?b(a):""}};g.copy=function(){return Ia(a.copy(),b,c,d)};return Bf(g,a)}function eg(a,
b,c){function d(b){return a(e(b))}var e=od(b),f=od(1/b);d.invert=function(b){return f(a.invert(b))};d.domain=function(b){if(!arguments.length)return c;a.domain((c=b.map(Number)).map(e));return d};d.ticks=function(a){return P.range.apply(P,Yc(c,a))};d.tickFormat=function(a,b){return Te(c,a,b)};d.nice=function(a){return d.domain(Ae(c,Mc(Yc(c,a)[2])))};d.exponent=function(g){if(!arguments.length)return b;e=od(b=g);f=od(1/b);a.domain(c.map(e));return d};d.copy=function(){return eg(a.copy(),b,c)};return Bf(d,
a)}function od(a){return function(b){return 0>b?-Math.pow(-b,a):Math.pow(b,a)}}function qe(a,b){function d(c){return g[((f.get(c)||"range"===b.t&&f.set(c,a.push(c)))-1)%g.length]}function e(b,c){return P.range(a.length).map(function(a){return b+c*a})}var f,g,l;d.domain=function(e){if(!arguments.length)return a;a=[];f=new c;for(var g=-1,l=e.length,h;++g<l;)f.has(h=e[g])||f.set(h,a.push(h));return d[b.t].apply(d,b.a)};d.range=function(a){if(!arguments.length)return g;g=a;l=0;b={t:"range",a:arguments};
return d};d.rangePoints=function(c,f){2>arguments.length&&(f=0);var h=c[0],m=c[1],q=(m-h)/(Math.max(1,a.length-1)+f);g=e(2>a.length?(h+m)/2:h+q*f/2,q);l=0;b={t:"rangePoints",a:arguments};return d};d.rangeBands=function(c,f,h){2>arguments.length&&(f=0);3>arguments.length&&(h=f);var m=c[1]<c[0],q=c[m-0],p=(c[1-m]-q)/(a.length-f+2*h);g=e(q+p*h,p);m&&g.reverse();l=p*(1-f);b={t:"rangeBands",a:arguments};return d};d.rangeRoundBands=function(c,f,h){2>arguments.length&&(f=0);3>arguments.length&&(h=f);var m=
c[1]<c[0],q=c[m-0],p=c[1-m],r=Math.floor((p-q)/(a.length-f+2*h));g=e(q+Math.round((p-q-(a.length-f)*r)/2),r);m&&g.reverse();l=Math.round(r*(1-f));b={t:"rangeRoundBands",a:arguments};return d};d.rangeBand=function(){return l};d.rangeExtent=function(){return Re(b.a[0])};d.copy=function(){return qe(a,b)};return d.domain(a)}function Cf(a,b){function c(){var f=0,g=b.length;for(e=[];++f<g;)e[f-1]=P.quantile(a,f/g);return d}function d(a){if(!isNaN(a=+a))return b[P.bisect(e,a)]}var e;d.domain=function(b){if(!arguments.length)return a;
a=b.filter(function(a){return!isNaN(a)}).sort(P.ascending);return c()};d.range=function(a){if(!arguments.length)return b;b=a;return c()};d.quantiles=function(){return e};d.invertExtent=function(c){c=b.indexOf(c);return 0>c?[NaN,NaN]:[0<c?e[c-1]:a[0],c<e.length?e[c]:a[a.length-1]]};d.copy=function(){return Cf(a,b)};return c()}function Yd(a,b,c){function d(b){return c[Math.max(0,Math.min(g,Math.floor(f*(b-a))))]}function e(){f=c.length/(b-a);g=c.length-1;return d}var f,g;d.domain=function(c){if(!arguments.length)return[a,
b];a=+c[0];b=+c[c.length-1];return e()};d.range=function(a){if(!arguments.length)return c;c=a;return e()};d.invertExtent=function(b){b=c.indexOf(b);b=0>b?NaN:b/f+a;return[b,b+1/f]};d.copy=function(){return Yd(a,b,c)};return e()}function Ue(a,b){function c(d){if(d<=d)return b[P.bisect(a,d)]}c.domain=function(b){if(!arguments.length)return a;a=b;return c};c.range=function(a){if(!arguments.length)return b;b=a;return c};c.invertExtent=function(c){c=b.indexOf(c);return[a[c-1],a[c]]};c.copy=function(){return Ue(a,
b)};return c}function Ve(a){function b(a){return+a}b.invert=b;b.domain=b.range=function(c){if(!arguments.length)return a;a=c.map(b);return b};b.ticks=function(b){return P.range.apply(P,Yc(a,b))};b.tickFormat=function(b,c){return Te(a,b,c)};b.copy=function(){return Ve(a)};return b}function Dg(a){return a.innerRadius}function Df(a){return a.outerRadius}function wc(a){return a.startAngle}function We(a){return a.endAngle}function Nc(a){function b(g){function h(){m.push("M",f(a(q),l))}for(var m=[],q=[],
p=-1,r=g.length,T,n=qa(c),t=qa(d);++p<r;)e.call(this,T=g[p],p)?q.push([+n.call(this,T,p),+t.call(this,T,p)]):q.length&&(h(),q=[]);q.length&&h();return m.length?m.join(""):null}var c=Ac,d=de,e=pc,f=$a,g=f.key,l=.7;b.x=function(a){if(!arguments.length)return c;c=a;return b};b.y=function(a){if(!arguments.length)return d;d=a;return b};b.defined=function(a){if(!arguments.length)return e;e=a;return b};b.interpolate=function(a){if(!arguments.length)return g;g="function"===typeof a?f=a:(f=ph.get(a)||$a).key;
return b};b.tension=function(a){if(!arguments.length)return l;l=a;return b};return b}function $a(a){return a.join("L")}function Db(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("V",(d=a[b])[1],"H",d[0]);return e.join("")}function Ld(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d=a[b])[0],"V",d[1]);return e.join("")}function Oc(a,b){if(1>b.length||a.length!=b.length&&a.length!=b.length+2)return $a(a);var c=a.length!=b.length,d="",e=a[0],f=a[1],g=b[0],l=g,
h=1;c&&(d+="Q"+(f[0]-2*g[0]/3)+","+(f[1]-2*g[1]/3)+","+f[0]+","+f[1],e=a[1],h=2);if(1<b.length)for(l=b[1],f=a[h],h++,d+="C"+(e[0]+g[0])+","+(e[1]+g[1])+","+(f[0]-l[0])+","+(f[1]-l[1])+","+f[0]+","+f[1],e=2;e<b.length;e++,h++)f=a[h],l=b[e],d+="S"+(f[0]-l[0])+","+(f[1]-l[1])+","+f[0]+","+f[1];c&&(c=a[h],d+="Q"+(f[0]+2*l[0]/3)+","+(f[1]+2*l[1]/3)+","+c[0]+","+c[1]);return d}function Ef(a,b){for(var c=[],d=(1-b)/2,e,f=a[0],g=a[1],l=1,h=a.length;++l<h;)e=f,f=g,g=a[l],c.push([d*(g[0]-e[0]),d*(g[1]-e[1])]);
return c}function Zd(a){if(3>a.length)return $a(a);var b=1,c=a.length,d=a[0],e=d[0],f=d[1],g=[e,e,e,(d=a[1])[0]],l=[f,f,f,d[1]],e=[e,",",f,"L",Qa(Xe,g),",",Qa(Xe,l)];for(a.push(a[c-1]);++b<=c;)d=a[b],g.shift(),g.push(d[0]),l.shift(),l.push(d[1]),wb(e,g,l);a.pop();e.push("L",d);return e.join("")}function Qa(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}function wb(a,b,c){a.push("C",Qa(Hh,b),",",Qa(Hh,c),",",Qa(Xg,b),",",Qa(Xg,c),",",Qa(Xe,b),",",Qa(Xe,c))}function Md(a,b){return(b[1]-a[1])/(b[0]-
a[0])}function Nd(a){for(var b,c=-1,d=a.length,e,f;++c<d;)b=a[c],e=b[0],f=b[1]+Ff,b[0]=e*Math.cos(f),b[1]=e*Math.sin(f);return a}function Gf(a){function b(h){function r(){T.push("M",l(a(t),p),q,m(a(n.reverse()),p),"Z")}for(var T=[],n=[],t=[],u=-1,Z=h.length,v,w=qa(c),x=qa(e),I=c===d?function(){return G}:qa(d),A=e===f?function(){return db}:qa(f),G,db;++u<Z;)g.call(this,v=h[u],u)?(n.push([G=+w.call(this,v,u),db=+x.call(this,v,u)]),t.push([+I.call(this,v,u),+A.call(this,v,u)])):n.length&&(r(),n=[],t=
[]);n.length&&r();return T.length?T.join(""):null}var c=Ac,d=Ac,e=0,f=de,g=pc,l=$a,h=l.key,m=l,q="L",p=.7;b.x=function(a){if(!arguments.length)return d;c=d=a;return b};b.x0=function(a){if(!arguments.length)return c;c=a;return b};b.x1=function(a){if(!arguments.length)return d;d=a;return b};b.y=function(a){if(!arguments.length)return f;e=f=a;return b};b.y0=function(a){if(!arguments.length)return e;e=a;return b};b.y1=function(a){if(!arguments.length)return f;f=a;return b};b.defined=function(a){if(!arguments.length)return g;
g=a;return b};b.interpolate=function(a){if(!arguments.length)return h;h="function"===typeof a?l=a:(l=ph.get(a)||$a).key;m=l.reverse||l;q=l.closed?"M":"L";return b};b.tension=function(a){if(!arguments.length)return p;p=a;return b};return b}function mc(a){return a.radius}function pd(a){return[a.x,a.y]}function Zc(a){return function(){var b=a.apply(this,arguments),c=b[0],b=b[1]+Ff;return[c*Math.cos(b),c*Math.sin(b)]}}function Na(){return 64}function Yg(){return"circle"}function nc(a){a=Math.sqrt(a/Z);
return"M0,"+a+"A"+a+","+a+" 0 1,1 0,"+-a+"A"+a+","+a+" 0 1,1 0,"+a+"Z"}function $c(a,b){ke(a,Wb);a.id=b;return a}function eb(a,b,c,d){var e=a.id;return S(a,"function"===typeof c?function(a,f,g){a.__transition__[e].tween.set(b,d(c.call(a,a.__data__,f,g)))}:(c=d(c),function(a){a.__transition__[e].tween.set(b,c)}))}function Ye(a){null==a&&(a="");return function(){this.textContent=a}}function $d(a,b,d,e){var f=a.__transition__||(a.__transition__={active:0,count:0}),g=f[d];if(!g){var l=e.time,g=f[d]={tween:new c,
time:l,ease:e.ease,delay:e.delay,duration:e.duration};++f.count;P.timer(function(c){function e(c){if(f.active>d)return m();f.active=d;g.event&&g.event.start.call(a,q,b);g.tween.forEach(function(c,d){(d=d.call(a,q,b))&&t.push(d)});P.timer(function(){n.c=h(c||1)?pc:h;return 1},0,l)}function h(c){if(f.active!==d)return m();c/=T;for(var e=p(c),l=t.length;0<l;)t[--l].call(a,e);if(1<=c)return g.event&&g.event.end.call(a,q,b),m()}function m(){--f.count?delete f[d]:delete a.__transition__;return 1}var q=
a.__data__,p=g.ease,r=g.delay,T=g.duration,n=le,t=[];n.t=r+l;if(r<=c)return e(c-r);n.c=e},0,l)}}function zb(a,b){a.attr("transform",function(a){return"translate("+b(a)+",0)"})}function Fc(a,b){a.attr("transform",function(a){return"translate(0,"+b(a)+")"})}function fg(a){return a.toISOString()}function re(a,b,c){function d(b){return a(b)}function e(a,c){var d=(a[1]-a[0])/c,f=P.bisect(Eg,d);return f==Eg.length?[b.year,Yc(a.map(function(a){return a/31536E6}),c)[2]]:f?b[d/Eg[f-1]<Eg[f]/d?f-1:f]:[Ih,Yc(a,
c)[2]]}d.invert=function(b){return Jb(a.invert(b))};d.domain=function(b){if(!arguments.length)return a.domain().map(Jb);a.domain(b);return d};d.nice=function(a,b){function c(d){return!isNaN(d)&&!a.range(d,Jb(+d+1),b).length}var f=d.domain(),g=Re(f);if(g=null==a?e(g,10):"number"===typeof a&&e(g,a))a=g[0],b=g[1];return d.domain(Ae(f,1<b?{floor:function(b){for(;c(b=a.floor(b));)b=Jb(b-1);return b},ceil:function(b){for(;c(b=a.ceil(b));)b=Jb(+b+1);return b}}:a))};d.ticks=function(a,b){var c=Re(d.domain()),
f=null==a?e(c,10):"number"===typeof a?e(c,a):!a.range&&[{range:a},b];f&&(a=f[0],b=f[1]);return a.range(c[0],Jb(+c[1]+1),1>b?1:b)};d.tickFormat=function(){return c};d.copy=function(){return re(a.copy(),b,c)};return Bf(d,a)}function Jb(a){return new Date(a)}function Zg(a){return JSON.parse(a.responseText)}function Ze(a){var b=ya.createRange();b.selectNode(ya.body);return b.createContextualFragment(a.responseText)}var P={version:"3.4.1"};Date.now||(Date.now=function(){return+new Date});var xc=[].slice,
Uc=function(a){return xc.call(a)},ya=document,Zb=ya.documentElement,Va=window;try{Uc(Zb.childNodes)[0].nodeType}catch($e){Uc=function(a){for(var b=a.length,c=Array(b);b--;)c[b]=a[b];return c}}try{ya.createElement("div").style.setProperty("opacity",0,"")}catch(ad){var Eb=Va.Element.prototype,qd=Eb.setAttribute,gg=Eb.setAttributeNS,Be=Va.CSSStyleDeclaration.prototype,oc=Be.setProperty;Eb.setAttribute=function(a,b){qd.call(this,a,b+"")};Eb.setAttributeNS=function(a,b,c){gg.call(this,a,b,c+"")};Be.setProperty=
function(a,b,c){oc.call(this,a,b+"",c)}}P.ascending=function(a,b){return a<b?-1:a>b?1:a>=b?0:NaN};P.descending=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN};P.min=function(a,b){var c=-1,d=a.length,e,f;if(1===arguments.length){for(;++c<d&&!(null!=(e=a[c])&&e<=e);)e=void 0;for(;++c<d;)null!=(f=a[c])&&e>f&&(e=f)}else{for(;++c<d&&!(null!=(e=b.call(a,a[c],c))&&e<=e);)e=void 0;for(;++c<d;)null!=(f=b.call(a,a[c],c))&&e>f&&(e=f)}return e};P.max=function(a,b){var c=-1,d=a.length,e,f;if(1===arguments.length){for(;++c<
d&&!(null!=(e=a[c])&&e<=e);)e=void 0;for(;++c<d;)null!=(f=a[c])&&f>e&&(e=f)}else{for(;++c<d&&!(null!=(e=b.call(a,a[c],c))&&e<=e);)e=void 0;for(;++c<d;)null!=(f=b.call(a,a[c],c))&&f>e&&(e=f)}return e};P.extent=function(a,b){var c=-1,d=a.length,e,f,g;if(1===arguments.length){for(;++c<d&&!(null!=(e=g=a[c])&&e<=e);)e=g=void 0;for(;++c<d;)null!=(f=a[c])&&(e>f&&(e=f),g<f&&(g=f))}else{for(;++c<d&&!(null!=(e=g=b.call(a,a[c],c))&&e<=e);)e=void 0;for(;++c<d;)null!=(f=b.call(a,a[c],c))&&(e>f&&(e=f),g<f&&(g=
f))}return[e,g]};P.sum=function(a,b){var c=0,d=a.length,e,f=-1;if(1===arguments.length)for(;++f<d;)isNaN(e=+a[f])||(c+=e);else for(;++f<d;)isNaN(e=+b.call(a,a[f],f))||(c+=e);return c};P.mean=function(b,c){var d=b.length,e,f=0,g=-1,l=0;if(1===arguments.length)for(;++g<d;)a(e=b[g])&&(f+=(e-f)/++l);else for(;++g<d;)a(e=c.call(b,b[g],g))&&(f+=(e-f)/++l);return l?f:void 0};P.quantile=function(a,b){var c=(a.length-1)*b+1,d=Math.floor(c),e=+a[d-1];return(c-=d)?e+c*(a[d]-e):e};P.median=function(b,c){1<arguments.length&&
(b=b.map(c));b=b.filter(a);return b.length?P.quantile(b.sort(P.ascending),.5):void 0};P.bisector=function(a){return{left:function(b,c,d,e){3>arguments.length&&(d=0);4>arguments.length&&(e=b.length);for(;d<e;){var f=d+e>>>1;a.call(b,b[f],f)<c?d=f+1:e=f}return d},right:function(b,c,d,e){3>arguments.length&&(d=0);4>arguments.length&&(e=b.length);for(;d<e;){var f=d+e>>>1;c<a.call(b,b[f],f)?e=f:d=f+1}return d}}};var ob=P.bisector(function(a){return a});P.bisectLeft=ob.left;P.bisect=P.bisectRight=ob.right;
P.shuffle=function(a){for(var b=a.length,c,d;b;)d=Math.random()*b--|0,c=a[b],a[b]=a[d],a[d]=c;return a};P.permute=function(a,b){for(var c=b.length,d=Array(c);c--;)d[c]=a[b[c]];return d};P.pairs=function(a){for(var b=0,c=a.length-1,d=a[0],e=Array(0>c?0:c);b<c;)e[b]=[d,d=a[++b]];return e};P.zip=function(){if(!(f=arguments.length))return[];for(var a=-1,c=P.min(arguments,b),d=Array(c);++a<c;)for(var e=-1,f,g=d[a]=Array(f);++e<f;)g[e]=arguments[e][a];return d};P.transpose=function(a){return P.zip.apply(P,
a)};P.keys=function(a){var b=[],c;for(c in a)b.push(c);return b};P.values=function(a){var b=[],c;for(c in a)b.push(a[c]);return b};P.entries=function(a){var b=[],c;for(c in a)b.push({key:c,value:a[c]});return b};P.merge=function(a){var b=a.length,c;c=-1;for(var d=0,e,f;++c<b;)d+=a[c].length;for(e=Array(d);0<=--b;)for(f=a[b],c=f.length;0<=--c;)e[--d]=f[c];return e};var ua=Math.abs;P.range=function(a,b,c){3>arguments.length&&(c=1,2>arguments.length&&(b=a,a=0));if(Infinity===(b-a)/c)throw Error("infinite range");
var d=[],e;e=ua(c);for(var f=1;e*f%1;)f*=10;e=f;var f=-1,g;a*=e;b*=e;c*=e;if(0>c)for(;(g=a+c*++f)>b;)d.push(g/e);else for(;(g=a+c*++f)<b;)d.push(g/e);return d};P.map=function(a){var b=new c;if(a instanceof c)a.forEach(function(a,c){b.set(a,c)});else for(var d in a)b.set(d,a[d]);return b};e(c,{has:d,get:function(a){return this[ze+a]},set:function(a,b){return this[ze+a]=b},remove:function(a){a=ze+a;return a in this&&delete this[a]},keys:f,values:function(){var a=[];this.forEach(function(b,c){a.push(c)});
return a},entries:function(){var a=[];this.forEach(function(b,c){a.push({key:b,value:c})});return a},size:n,empty:h,forEach:function(a){for(var b in this)b.charCodeAt(0)===jc&&a.call(this,b.substring(1),this[b])}});var ze="\x00",jc=ze.charCodeAt(0);P.nest=function(){function a(b,f,h){if(h>=e.length)return l?l.call(d,f):g?f.sort(g):f;for(var m=-1,q=f.length,p=e[h++],r,T,n=new c,t;++m<q;)(t=n.get(r=p(T=f[m])))?t.push(T):n.set(r,[T]);b?(T=b(),f=function(c,d){T.set(c,a(b,d,h))}):(T={},f=function(c,d){T[c]=
a(b,d,h)});n.forEach(f);return T}function b(a,c){if(c>=e.length)return a;var d=[],g=f[c++];a.forEach(function(a,e){d.push({key:a,values:b(e,c)})});return g?d.sort(function(a,b){return g(a.key,b.key)}):d}var d={},e=[],f=[],g,l;d.map=function(b,c){return a(c,b,0)};d.entries=function(c){return b(a(P.map,c,0),0)};d.key=function(a){e.push(a);return d};d.sortKeys=function(a){f[e.length-1]=a;return d};d.sortValues=function(a){g=a;return d};d.rollup=function(a){l=a;return d};return d};P.set=function(a){var b=
new g;if(a)for(var c=0,d=a.length;c<d;++c)b.add(a[c]);return b};e(g,{has:d,add:function(a){this[ze+a]=!0;return a},remove:function(a){a=ze+a;return a in this&&delete this[a]},values:f,size:n,empty:h,forEach:function(a){for(var b in this)b.charCodeAt(0)===jc&&a.call(this,b.substring(1))}});P.behavior={};P.rebind=function(a,b){for(var c=1,d=arguments.length,e;++c<d;)a[e=arguments[c]]=m(a,b,b[e]);return a};var uf="webkit ms moz Moz o O".split(" ");P.dispatch=function(){for(var a=new t,b=-1,c=arguments.length;++b<
c;)a[arguments[b]]=l(a);return a};t.prototype.on=function(a,b){var c=a.indexOf("."),d="";0<=c&&(d=a.substring(c+1),a=a.substring(0,c));if(a)return 2>arguments.length?this[a].on(d):this[a].on(d,b);if(2===arguments.length){if(null==b)for(a in this)if(this.hasOwnProperty(a))this[a].on(d,null);return this}};P.event=null;P.requote=function(a){return a.replace(Od,"\\$&")};var Od=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ke={}.__proto__?function(a,b){a.__proto__=b}:function(a,b){for(var c in b)a[c]=b[c]},Ne=function(a,
b){return b.querySelector(a)},fb=function(a,b){return b.querySelectorAll(a)},Fg=Zb[p(Zb,"matchesSelector")],vf=function(a,b){return Fg.call(a,b)};"function"===typeof Sizzle&&(Ne=function(a,b){return Sizzle(a,b)[0]||null},fb=function(a,b){return Sizzle.uniqueSort(Sizzle(a,b))},vf=Sizzle.matchesSelector);P.selection=function(){return hg};var Ma=P.selection.prototype=[];Ma.select=function(a){var b=[],c,d,e,f;a=E(a);for(var g=-1,l=this.length;++g<l;){b.push(c=[]);c.parentNode=(e=this[g]).parentNode;for(var h=
-1,m=e.length;++h<m;)(f=e[h])?(c.push(d=a.call(f,f.__data__,h,g)),d&&"__data__"in f&&(d.__data__=f.__data__)):c.push(null)}return v(b)};Ma.selectAll=function(a){var b=[],c,d;a=A(a);for(var e=-1,f=this.length;++e<f;)for(var g=this[e],l=-1,h=g.length;++l<h;)if(d=g[l])b.push(c=Uc(a.call(d,d.__data__,l,e))),c.parentNode=d;return v(b)};var Gg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};
P.ns={prefix:Gg,qualify:function(a){var b=a.indexOf(":"),c=a;0<=b&&(c=a.substring(0,b),a=a.substring(b+1));return Gg.hasOwnProperty(c)?{space:Gg[c],local:a}:a}};Ma.attr=function(a,b){if(2>arguments.length){if("string"===typeof a){var c=this.node();a=P.ns.qualify(a);return a.local?c.getAttributeNS(a.space,a.local):c.getAttribute(a)}for(b in a)this.each(K(b,a[b]));return this}return this.each(K(a,b))};Ma.classed=function(a,b){if(2>arguments.length){if("string"===typeof a){var c=this.node(),d=(a=a.trim().split(/^|\s+/)).length,
e=-1;if(b=c.classList)for(;++e<d;){if(!b.contains(a[e]))return!1}else for(b=c.getAttribute("class");++e<d;)if(!z(a[e]).test(b))return!1;return!0}for(b in a)this.each(B(b,a[b]));return this}return this.each(B(a,b))};Ma.style=function(a,b,c){var d=arguments.length;if(3>d){if("string"!==typeof a){2>d&&(b="");for(c in a)this.each(G(c,a[c],b));return this}if(2>d)return Va.getComputedStyle(this.node(),null).getPropertyValue(a);c=""}return this.each(G(a,b,c))};Ma.property=function(a,b){if(2>arguments.length){if("string"===
typeof a)return this.node()[a];for(b in a)this.each(I(b,a[b]));return this}return this.each(I(a,b))};Ma.text=function(a){return arguments.length?this.each("function"===typeof a?function(){var b=a.apply(this,arguments);this.textContent=null==b?"":b}:null==a?function(){this.textContent=""}:function(){this.textContent=a}):this.node().textContent};Ma.html=function(a){return arguments.length?this.each("function"===typeof a?function(){var b=a.apply(this,arguments);this.innerHTML=null==b?"":b}:null==a?function(){this.innerHTML=
""}:function(){this.innerHTML=a}):this.node().innerHTML};Ma.append=function(a){a=N(a);return this.select(function(){return this.appendChild(a.apply(this,arguments))})};Ma.insert=function(a,b){a=N(a);b=E(b);return this.select(function(){return this.insertBefore(a.apply(this,arguments),b.apply(this,arguments)||null)})};Ma.remove=function(){return this.each(function(){var a=this.parentNode;a&&a.removeChild(this)})};Ma.data=function(a,b){function d(a,e){var f,g=a.length,l=e.length,p=Math.min(g,l),r=Array(l),
T=Array(l),n=Array(g),t,u;if(b){var p=new c,Z=new c,v=[],w;for(f=-1;++f<g;)w=b.call(t=a[f],t.__data__,f),p.has(w)?n[f]=t:p.set(w,t),v.push(w);for(f=-1;++f<l;)w=b.call(e,u=e[f],f),(t=p.get(w))?(r[f]=t,t.__data__=u):Z.has(w)||(T[f]={__data__:u}),Z.set(w,u),p.remove(w);for(f=-1;++f<g;)p.has(v[f])&&(n[f]=a[f])}else{for(f=-1;++f<p;)t=a[f],u=e[f],t?(t.__data__=u,r[f]=t):T[f]={__data__:u};for(;f<l;++f)T[f]={__data__:e[f]};for(;f<g;++f)n[f]=a[f]}T.update=r;T.parentNode=r.parentNode=n.parentNode=a.parentNode;
h.push(T);m.push(r);q.push(n)}var e=-1,f=this.length,g,l;if(!arguments.length){for(a=Array(f=(g=this[0]).length);++e<f;)if(l=g[e])a[e]=l.__data__;return a}var h=D([]),m=v([]),q=v([]);if("function"===typeof a)for(;++e<f;)d(g=this[e],a.call(g,g.parentNode.__data__,e));else for(;++e<f;)d(g=this[e],a);m.enter=function(){return h};m.exit=function(){return q};return m};Ma.datum=function(a){return arguments.length?this.property("__data__",a):this.property("__data__")};Ma.filter=function(a){var b=[],c,d,
e;"function"!==typeof a&&(a=L(a));for(var f=0,g=this.length;f<g;f++){b.push(c=[]);c.parentNode=(d=this[f]).parentNode;for(var l=0,h=d.length;l<h;l++)(e=d[l])&&a.call(e,e.__data__,l,f)&&c.push(e)}return v(b)};Ma.order=function(){for(var a=-1,b=this.length;++a<b;)for(var c=this[a],d=c.length-1,e=c[d],f;0<=--d;)if(f=c[d])e&&e!==f.nextSibling&&e.parentNode.insertBefore(f,e),e=f;return this};Ma.sort=function(a){a=x.apply(this,arguments);for(var b=-1,c=this.length;++b<c;)this[b].sort(a);return this.order()};
Ma.each=function(a){return S(this,function(b,c,d){a.call(b,b.__data__,c,d)})};Ma.call=function(a){var b=Uc(arguments);a.apply(b[0]=this,b);return this};Ma.empty=function(){return!this.node()};Ma.node=function(){for(var a=0,b=this.length;a<b;a++)for(var c=this[a],d=0,e=c.length;d<e;d++){var f=c[d];if(f)return f}return null};Ma.size=function(){var a=0;this.each(function(){++a});return a};var Cd=[];P.selection.enter=D;P.selection.enter.prototype=Cd;Cd.append=Ma.append;Cd.empty=Ma.empty;Cd.node=Ma.node;
Cd.call=Ma.call;Cd.size=Ma.size;Cd.select=function(a){for(var b=[],c,d,e,f,g,l=-1,h=this.length;++l<h;){e=(f=this[l]).update;b.push(c=[]);c.parentNode=f.parentNode;for(var m=-1,q=f.length;++m<q;)(g=f[m])?(c.push(e[m]=d=a.call(f.parentNode,g.__data__,m,l)),d.__data__=g.__data__):c.push(null)}return v(b)};Cd.insert=function(a,b){2>arguments.length&&(b=J(this));return Ma.insert.call(this,a,b)};Ma.transition=function(){for(var a=ae||++qh,b=[],c,d,e=$g||{time:Date.now(),ease:hd,delay:0,duration:250},f=
-1,g=this.length;++f<g;){b.push(c=[]);for(var l=this[f],h=-1,m=l.length;++h<m;)(d=l[h])&&$d(d,h,a,e),c.push(d)}return $c(b,a)};Ma.interrupt=function(){return this.each(V)};P.select=function(a){a=["string"===typeof a?Ne(a,ya):a];a.parentNode=Zb;return v([a])};P.selectAll=function(a){a=Uc("string"===typeof a?fb(a,ya):a);a.parentNode=Zb;return v([a])};var hg=P.select(Zb);Ma.on=function(a,b,c){var d=arguments.length;if(3>d){if("string"!==typeof a){2>d&&(b=!1);for(c in a)this.each(Y(c,a[c],b));return this}if(2>
d)return(d=this.node()["__on"+a])&&d._;c=!1}return this.each(Y(a,b,c))};var Kc=P.map({mouseenter:"mouseover",mouseleave:"mouseout"});Kc.forEach(function(a){"on"+a in ya&&Kc.remove(a)});var kc="onselectstart"in ya?null:p(Zb.style,"userSelect"),Vf=0;P.mouse=function(a){return Q(a,w())};var T=/WebKit/.test(Va.navigator.userAgent)?-1:0;P.touches=function(a,b){2>arguments.length&&(b=w().touches);return b?Uc(b).map(function(b){var c=Q(a,b);c.identifier=b.identifier;return c}):[]};P.behavior.drag=function(){function a(){this.on("mousedown.drag",
e).on("touchstart.drag",f)}function b(a,e,f,g){return function(){var b=this.parentNode,l=c.of(this,arguments),h=P.event.target,m=a(),q=null==m?"drag":"drag-"+m,p=e(b,m),r=0,T,n=P.select(Va).on(f+"."+q,function(){var a=e(b,m),c=a[0]-p[0],d=a[1]-p[1];r=r|c|d;p=a;l({type:"drag",x:a[0]+T[0],y:a[1]+T[1],dx:c,dy:d})}).on(g+"."+q,function(){n.on(f+"."+q,null).on(g+"."+q,null);t(r&&P.event.target===h);l({type:"dragend"})}),t=M();d?(T=d.apply(this,arguments),T=[T.x-p[0],T.y-p[1]]):T=[0,0];l({type:"dragstart"})}}
var c=u(a,"drag","dragstart","dragend"),d=null,e=b(r,P.mouse,"mousemove","mouseup"),f=b(function(){return P.event.changedTouches[0].identifier},function(a,b){return P.touches(a).filter(function(a){return a.identifier===b})[0]},"touchmove","touchend");a.origin=function(b){if(!arguments.length)return d;d=b;return a};return P.rebind(a,c,"on")};var Z=Math.PI,lc=2*Z,Ec=Z/2,wa=Z/180,ub=180/Z,af=Math.SQRT2;P.interpolateZoom=function(a,b){function c(a){var b=a*n;if(T){a=aa(r);var g,m=af*b+r;g=((m=Math.exp(2*
m))-1)/(m+1);g*=a;var p=r,m=((p=Math.exp(p))-1/p)/2;g=f/(2*q)*(g-m);return[d+g*l,e+g*h,f*a/aa(af*b+r)]}return[d+a*l,e+a*h,f*Math.exp(af*b)]}var d=a[0],e=a[1],f=a[2],g=b[2],l=b[0]-d,h=b[1]-e,m=l*l+h*h,q=Math.sqrt(m),p=(g*g-f*f+4*m)/(4*f*q),m=(g*g-f*f-4*m)/(4*g*q),r=Math.log(Math.sqrt(p*p+1)-p),T=Math.log(Math.sqrt(m*m+1)-m)-r,n=(T||Math.log(g/f))/af;c.duration=1E3*n;return c};P.behavior.zoom=function(){function a(b){b.on("mousedown.zoom",h).on(Yh+".zoom",p).on("mousemove.zoom",r).on("dblclick.zoom",
T).on("touchstart.zoom",m)}function b(a){return[(a[0]-n.x)/n.k,(a[1]-n.y)/n.k]}function c(a){n.k=Math.max(w[0],Math.min(w[1],a))}function d(a,b){b=[b[0]*n.k+n.x,b[1]*n.k+n.y];n.x+=a[0]-b[0];n.y+=a[1]-b[1]}function e(){B&&B.domain(G.range().map(function(a){return(a-n.x)/n.k}).map(G.invert));N&&N.domain(E.range().map(function(a){return(a-n.y)/n.k}).map(E.invert))}function f(a){a({type:"zoomstart"})}function g(a){e();a({type:"zoom",scale:n.k,translate:[n.x,n.y]})}function l(a){a({type:"zoomend"})}function h(){var a=
this,c=A.of(a,arguments),e=P.event.target,m=0,q=P.select(Va).on("mousemove.zoom",function(){m=1;d(P.mouse(a),p);g(c)}).on("mouseup.zoom",function(){q.on("mousemove.zoom",Va===a?r:null).on("mouseup.zoom",null);T(m&&P.event.target===e);l(c)}),p=b(P.mouse(a)),T=M();V.call(a);f(c)}function m(){function a(){var c=P.touches(p);u=n.k;c.forEach(function(a){a.identifier in T&&(T[a.identifier]=b(a))});return c}function e(){for(var b=P.event.changedTouches,f=0,l=b.length;f<l;++f)T[b[f].identifier]=null;l=a();
f=Date.now();1===l.length?(500>f-I&&(b=l[0],l=T[b.identifier],c(2*n.k),d(b,l),q(),g(r)),I=f):1<l.length&&(b=l[0],l=l[1],f=b[0]-l[0],b=b[1]-l[1],t=f*f+b*b)}var p=this,r=A.of(p,arguments),T={},t=0,u,Z=P.event.changedTouches[0].identifier,v="touchmove.zoom-"+Z,w="touchend.zoom-"+Z,x=P.select(Va).on(v,function(){for(var a=P.touches(p),b,e,f,l,h=0,m=a.length;h<m;++h,l=null)if(f=a[h],l=T[f.identifier]){if(e)break;b=f;e=l}if(l){var q=(q=f[0]-b[0])*q+(q=f[1]-b[1])*q,a=t&&Math.sqrt(q/t);b=[(b[0]+f[0])/2,(b[1]+
f[1])/2];e=[(e[0]+l[0])/2,(e[1]+l[1])/2];c(a*u)}I=null;d(b,e);g(r)}).on(w,function(){if(P.event.touches.length){for(var b=P.event.changedTouches,c=0,d=b.length;c<d;++c)delete T[b[c].identifier];for(var e in T)return void a()}x.on(v,null).on(w,null);G.on("mousedown.zoom",h).on("touchstart.zoom",m);B();l(r)}),G=P.select(p).on("mousedown.zoom",null).on("touchstart.zoom",e),B=M();V.call(p);e();f(r)}function p(){var a=A.of(this,arguments);x?clearTimeout(x):(V.call(this),f(a));x=setTimeout(function(){x=
null;l(a)},50);q();var e=Z||P.mouse(this);t||(t=b(e));c(Math.pow(2,.002*Hf())*n.k);d(e,t);g(a)}function r(){t=null}function T(){var a=A.of(this,arguments),e=P.mouse(this),h=b(e),m=Math.log(n.k)/Math.LN2;f(a);c(Math.pow(2,P.event.shiftKey?Math.ceil(m)-1:Math.floor(m)+1));d(e,h);g(a);l(a)}var n={x:0,y:0,k:1},t,Z,v=[960,500],w=bf,x,I,A=u(a,"zoomstart","zoom","zoomend"),G,B,E,N;a.event=function(a){a.each(function(){var a=A.of(this,arguments),b=n;ae?P.select(this).transition().each("start.zoom",function(){n=
this.__chart__||{x:0,y:0,k:1};f(a)}).tween("zoom:zoom",function(){var c=v[0],d=c/2,e=v[1]/2,f=P.interpolateZoom([(d-n.x)/n.k,(e-n.y)/n.k,c/n.k],[(d-b.x)/b.k,(e-b.y)/b.k,c/b.k]);return function(b){b=f(b);var l=c/b[2];this.__chart__=n={x:d-b[0]*l,y:e-b[1]*l,k:l};g(a)}}).each("end.zoom",function(){l(a)}):(this.__chart__=n,f(a),g(a),l(a))})};a.translate=function(b){if(!arguments.length)return[n.x,n.y];n={x:+b[0],y:+b[1],k:n.k};e();return a};a.scale=function(b){if(!arguments.length)return n.k;n={x:n.x,
y:n.y,k:+b};e();return a};a.scaleExtent=function(b){if(!arguments.length)return w;w=null==b?bf:[+b[0],+b[1]];return a};a.center=function(b){if(!arguments.length)return Z;Z=b&&[+b[0],+b[1]];return a};a.size=function(b){if(!arguments.length)return v;v=b&&[+b[0],+b[1]];return a};a.x=function(b){if(!arguments.length)return B;B=b;G=b.copy();n={x:0,y:0,k:1};return a};a.y=function(b){if(!arguments.length)return N;N=b;E=b.copy();n={x:0,y:0,k:1};return a};return P.rebind(a,A,"on")};var bf=[0,Infinity],Hf,
Yh="onwheel"in ya?(Hf=function(){return-P.event.deltaY*(P.event.deltaMode?120:1)},"wheel"):"onmousewheel"in ya?(Hf=function(){return P.event.wheelDelta},"mousewheel"):(Hf=function(){return-P.event.detail},"MozMousePixelScroll");ta.prototype.toString=function(){return this.rgb()+""};P.hsl=function(a,b,c){return 1===arguments.length?a instanceof ha?da(a.h,a.s,a.l):Gb(""+a,ib,da):da(+a,+b,+c)};var rh=ha.prototype=new ta;rh.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);return da(this.h,this.s,
this.l/a)};rh.darker=function(a){a=Math.pow(.7,arguments.length?a:1);return da(this.h,this.s,a*this.l)};rh.rgb=function(){return Ba(this.h,this.s,this.l)};P.hcl=function(a,b,c){return 1===arguments.length?a instanceof za?y(a.h,a.c,a.l):a instanceof pb?Ka(a.l,a.a,a.b):Ka((a=rb((a=P.rgb(a)).r,a.g,a.b)).l,a.a,a.b):y(+a,+b,+c)};var sh=za.prototype=new ta;sh.brighter=function(a){return y(this.h,this.c,Math.min(100,this.l+If*(arguments.length?a:1)))};sh.darker=function(a){return y(this.h,this.c,Math.max(0,
this.l-If*(arguments.length?a:1)))};sh.rgb=function(){return pa(this.h,this.c,this.l).rgb()};P.lab=function(a,b,c){return 1===arguments.length?a instanceof pb?C(a.l,a.a,a.b):a instanceof za?pa(a.l,a.c,a.h):rb((a=P.rgb(a)).r,a.g,a.b):C(+a,+b,+c)};var If=18,vg=.95047,Qg=1,Bh=1.08883,th=pb.prototype=new ta;th.brighter=function(a){return C(Math.min(100,this.l+If*(arguments.length?a:1)),this.a,this.b)};th.darker=function(a){return C(Math.max(0,this.l-If*(arguments.length?a:1)),this.a,this.b)};th.rgb=function(){return Ra(this.l,
this.a,this.b)};P.rgb=function(a,b,c){return 1===arguments.length?a instanceof Za?Ga(a.r,a.g,a.b):Gb(""+a,Ga,Ba):Ga(~~a,~~b,~~c)};var ah=Za.prototype=new ta;ah.brighter=function(a){a=Math.pow(.7,arguments.length?a:1);var b=this.r,c=this.g,d=this.b;if(!b&&!c&&!d)return Ga(30,30,30);b&&30>b&&(b=30);c&&30>c&&(c=30);d&&30>d&&(d=30);return Ga(Math.min(255,~~(b/a)),Math.min(255,~~(c/a)),Math.min(255,~~(d/a)))};ah.darker=function(a){a=Math.pow(.7,arguments.length?a:1);return Ga(~~(a*this.r),~~(a*this.g),
~~(a*this.b))};ah.hsl=function(){return ib(this.r,this.g,this.b)};ah.toString=function(){return"#"+ab(this.r)+ab(this.g)+ab(this.b)};var Rg=P.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,
darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,
fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,
lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,
navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,
slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Rg.forEach(function(a,b){Rg.set(a,Ga(b>>16,b>>8&255,b&255))});P.functor=qa;P.xhr=sb(Ha);P.dsv=function(a,b){function c(a,f,g){3>arguments.length&&(g=f,f=null);var l=Ta(a,b,null==f?d:e(f),g);l.row=function(a){return arguments.length?
l.response(null==(f=a)?d:e(a)):f};return l}function d(a){return c.parse(a.responseText)}function e(a){return function(b){return c.parse(b.responseText,a)}}function f(b){return b.map(l).join(a)}function l(a){return h.test(a)?'"'+a.replace(/\"/g,'""')+'"':a}var h=new RegExp('["'+a+"\n]"),m=a.charCodeAt(0);c.parse=function(a,b){var d;return c.parseRows(a,function(a,c){if(d)return d(a,c-1);var e=new Function("d","return {"+a.map(function(a,b){return JSON.stringify(a)+": d["+b+"]"}).join(",")+"}");d=b?
function(a,c){return b(e(a),c)}:e})};c.parseRows=function(a,b){function c(){if(l>=g)return e;if(p)return p=!1,d;var b=l;if(34===a.charCodeAt(b)){for(var f=b;f++<g;)if(34===a.charCodeAt(f)){if(34!==a.charCodeAt(f+1))break;++f}l=f+2;var h=a.charCodeAt(f+1);13===h?(p=!0,10===a.charCodeAt(f+2)&&++l):10===h&&(p=!0);return a.substring(b+1,f).replace(/""/g,'"')}for(;l<g;){h=a.charCodeAt(l++);f=1;if(10===h)p=!0;else if(13===h)p=!0,10===a.charCodeAt(l)&&(++l,++f);else if(h!==m)continue;return a.substring(b,
l-f)}return a.substring(b)}for(var d={},e={},f=[],g=a.length,l=0,h=0,q,p;(q=c())!==e;){for(var r=[];q!==d&&q!==e;)r.push(q),q=c();b&&!(r=b(r,h++))||f.push(r)}return f};c.format=function(b){if(Array.isArray(b[0]))return c.formatRows(b);var d=new g,e=[];b.forEach(function(a){for(var b in a)d.has(b)||e.push(d.add(b))});return[e.map(l).join(a)].concat(b.map(function(b){return e.map(function(a){return l(b[a])}).join(a)})).join("\n")};c.formatRows=function(a){return a.map(f).join("\n")};return c};P.csv=
P.dsv(",","text/csv");P.tsv=P.dsv("\t","text/tab-separated-values");var Ob,dc,Tg,Sg,le,Ch=Va[p(Va,"requestAnimationFrame")]||function(a){setTimeout(a,17)};P.timer=function(a,b,c){var d=arguments.length;2>d&&(b=0);3>d&&(c=Date.now());d={c:a,t:c+b,f:!1,n:null};dc?dc.n=d:Ob=d;dc=d;Tg||(Sg=clearTimeout(Sg),Tg=1,Ch(ra))};P.timer.flush=function(){qc();tb()};P.round=function(a,b){return b?Math.round(a*(b=Math.pow(10,b)))/b:Math.round(a)};var uh="y z a f p n \u00b5 m  k M G T P E Z Y".split(" ").map(function(a,
b){var c=Math.pow(10,3*ua(8-b));return{scale:8<b?function(a){return a/c}:function(a){return a*c},symbol:a}});P.formatPrefix=function(a,b){var c=0;a&&(0>a&&(a*=-1),b&&(a=P.round(a,xb(a,b))),c=1+Math.floor(1E-12+Math.log(a)/Math.LN10),c=Math.max(-24,Math.min(24,3*Math.floor((0>=c?c+1:c-1)/3))));return uh[8+c/3]};var Wf=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,lh=P.map({b:function(a){return a.toString(2)},c:function(a){return String.fromCharCode(a)},o:function(a){return a.toString(8)},
x:function(a){return a.toString(16)},X:function(a){return a.toString(16).toUpperCase()},g:function(a,b){return a.toPrecision(b)},e:function(a,b){return a.toExponential(b)},f:function(a,b){return a.toFixed(b)},r:function(a,b){return(a=P.round(a,xb(a,b))).toFixed(Math.max(0,Math.min(20,xb(a*(1+1E-15),b))))}}),fa=P.time={},Sb=Date;jb.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},
getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){rd.setUTCDate.apply(this._,arguments)},setDay:function(){rd.setUTCDay.apply(this._,arguments)},setFullYear:function(){rd.setUTCFullYear.apply(this._,
arguments)},setHours:function(){rd.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){rd.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){rd.setUTCMinutes.apply(this._,arguments)},setMonth:function(){rd.setUTCMonth.apply(this._,arguments)},setSeconds:function(){rd.setUTCSeconds.apply(this._,arguments)},setTime:function(){rd.setTime.apply(this._,arguments)}};var rd=Date.prototype;fa.year=Aa(function(a){a=fa.day(a);a.setMonth(0,1);return a},function(a,b){a.setFullYear(a.getFullYear()+
b)},function(a){return a.getFullYear()});fa.years=fa.year.range;fa.years.utc=fa.year.utc.range;fa.day=Aa(function(a){var b=new Sb(2E3,0);b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate());return b},function(a,b){a.setDate(a.getDate()+b)},function(a){return a.getDate()-1});fa.days=fa.day.range;fa.days.utc=fa.day.utc.range;fa.dayOfYear=function(a){var b=fa.year(a);return Math.floor((a-b-6E4*(a.getTimezoneOffset()-b.getTimezoneOffset()))/864E5)};"sunday monday tuesday wednesday thursday friday saturday".split(" ").forEach(function(a,
b){b=7-b;var c=fa[a]=Aa(function(a){(a=fa.day(a)).setDate(a.getDate()-(a.getDay()+b)%7);return a},function(a,b){a.setDate(a.getDate()+7*Math.floor(b))},function(a){var c=fa.year(a).getDay();return Math.floor((fa.dayOfYear(a)+(c+b)%7)/7)-(c!==b)});fa[a+"s"]=c.range;fa[a+"s"].utc=c.utc.range;fa[a+"OfYear"]=function(a){var c=fa.year(a).getDay();return Math.floor((fa.dayOfYear(a)+(c+b)%7)/7)}});fa.week=fa.sunday;fa.weeks=fa.sunday.range;fa.weeks.utc=fa.sunday.utc.range;fa.weekOfYear=fa.sundayOfYear;var wg=
{"-":"",_:" ",0:"0"},vb=/^\s*\d+/,Dh=/^%/;P.locale=function(a){return{numberFormat:Ab(a),timeFormat:Hb(a)}};var Jh=P.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});
P.format=Jh.numberFormat;P.geo={};sc.prototype={s:0,t:0,add:function(a){ve(a,this.t,bh);ve(bh.s,this.s,this);this.s?this.t+=bh.t:this.s=bh.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var bh=new sc;P.geo.stream=function(a,b){if(a&&Kh.hasOwnProperty(a.type))Kh[a.type](a,b);else mb(a,b)};var Kh={Feature:function(a,b){mb(a.geometry,b)},FeatureCollection:function(a,b){for(var c=a.features,d=-1,e=c.length;++d<e;)mb(c[d].geometry,b)}},Eh={Sphere:function(a,b){b.sphere()},Point:function(a,
b){a=a.coordinates;b.point(a[0],a[1],a[2])},MultiPoint:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)a=c[d],b.point(a[0],a[1],a[2])},LineString:function(a,b){Qb(a.coordinates,b,0)},MultiLineString:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)Qb(c[d],b,0)},Polygon:function(a,b){Qd(a.coordinates,b)},MultiPolygon:function(a,b){for(var c=a.coordinates,d=-1,e=c.length;++d<e;)Qd(c[d],b)},GeometryCollection:function(a,b){for(var c=a.geometries,d=-1,e=c.length;++d<e;)mb(c[d],
b)}};P.geo.area=function(a){Ce=0;P.geo.stream(a,Vc);return Ce};var Ce,Td=new sc,Vc={sphere:function(){Ce+=4*Z},point:r,lineStart:r,lineEnd:r,polygonStart:function(){Td.reset();Vc.lineStart=lb},polygonEnd:function(){var a=2*Td;Ce+=0>a?4*Z+a:a;Vc.lineStart=Vc.lineEnd=Vc.point=r}};P.geo.bounds=function(){function a(b,c){w.push(x=[q=b,r=b]);c<p&&(p=c);c>T&&(T=c)}function b(c,d){var e=zc([c*wa,d*wa]);if(Z){var f=gc(Z,e),f=gc([f[1],-f[0],0],f);Ke(f);var f=of(f),g=c-n,h=0<g?1:-1,m=f[0]*ub*h,g=180<ua(g);
g^(h*n<m&&m<h*c)?(f=f[1]*ub,f>T&&(T=f)):(m=(m+360)%360-180,g^(h*n<m&&m<h*c))?(f=-f[1]*ub,f<p&&(p=f)):(d<p&&(p=d),d>T&&(T=d));g?c<n?l(q,c)>l(q,r)&&(r=c):l(c,r)>l(q,r)&&(q=c):r>=q?(c<q&&(q=c),c>r&&(r=c)):c>n?l(q,c)>l(q,r)&&(r=c):l(c,r)>l(q,r)&&(q=c)}else a(c,d);Z=e;n=c}function c(){I.point=b}function d(){x[0]=q;x[1]=r;I.point=a;Z=null}function e(a,c){if(Z){var d=a-n;v+=180<ua(d)?d+(0<d?360:-360):d}else t=a,u=c;Vc.point(a,c);b(a,c)}function f(){Vc.lineStart()}function g(){e(t,u);Vc.lineEnd();1E-6<ua(v)&&
(q=-(r=180));x[0]=q;x[1]=r;Z=null}function l(a,b){return 0>(b-=a)?b+360:b}function h(a,b){return a[0]-b[0]}function m(a,b){return b[0]<=b[1]?b[0]<=a&&a<=b[1]:a<b[0]||b[1]<a}var q,p,r,T,n,t,u,Z,v,w,x,I={point:a,lineStart:c,lineEnd:d,polygonStart:function(){I.point=e;I.lineStart=f;I.lineEnd=g;v=0;Vc.polygonStart()},polygonEnd:function(){Vc.polygonEnd();I.point=a;I.lineStart=c;I.lineEnd=d;0>Td?(q=-(r=180),p=-(T=90)):1E-6<v?T=90:-1E-6>v&&(p=-90);x[0]=q;x[1]=r}};return function(a){T=r=-(q=p=Infinity);
w=[];P.geo.stream(a,I);if(a=w.length){w.sort(h);for(var b=1,c=w[0],d,e=[c];b<a;++b)d=w[b],m(d[0],c)||m(d[1],c)?(l(c[0],d[1])>l(c[0],c[1])&&(c[1]=d[1]),l(d[0],c[1])>l(c[0],c[1])&&(c[0]=d[0])):e.push(c=d);var f=-Infinity,g;a=e.length-1;b=0;for(c=e[a];b<=a;c=d,++b)d=e[b],(g=l(c[1],d[0]))>f&&(f=g,q=d[0],r=c[1])}w=x=null;return Infinity===q||Infinity===p?[[NaN,NaN],[NaN,NaN]]:[[q,p],[r,T]]}}();P.geo.centroid=function(a){me=kd=ne=Ud=Vd=ld=Dd=Wc=Oe=oe=Fd=0;P.geo.stream(a,Ed);a=Oe;var b=oe,c=Fd,d=a*a+b*b+
c*c;return 1E-12>d&&(a=ld,b=Dd,c=Wc,1E-6>kd&&(a=ne,b=Ud,c=Vd),d=a*a+b*b+c*c,1E-12>d)?[NaN,NaN]:[Math.atan2(b,a)*ub,O(c/Math.sqrt(d))*ub]};var me,kd,ne,Ud,Vd,ld,Dd,Wc,Oe,oe,Fd,Ed={sphere:r,point:be,lineStart:Fa,lineEnd:we,polygonStart:function(){Ed.lineStart=tg},polygonEnd:function(){Ed.lineStart=Fa}},uc=lg(pc,function(a){var b=NaN,c=NaN,d=NaN,e;return{lineStart:function(){a.lineStart();e=1},point:function(f,g){var l=0<f?Z:-Z,h=ua(f-b);if(1E-6>ua(h-Z))a.point(b,c=0<(c+g)/2?Ec:-Ec),a.point(d,c),a.lineEnd(),
a.lineStart(),a.point(l,c),a.point(f,c),e=0;else if(d!==l&&h>=Z){1E-6>ua(b-d)&&(b-=1E-6*d);1E-6>ua(f-l)&&(f-=1E-6*l);var h=b,m=c,q=f,p,r,T=Math.sin(h-q);c=1E-6<ua(T)?Math.atan((Math.sin(m)*(r=Math.cos(g))*Math.sin(q)-Math.sin(g)*(p=Math.cos(m))*Math.sin(h))/(p*r*T)):(m+g)/2;a.point(d,c);a.lineEnd();a.lineStart();a.point(l,c);e=0}a.point(b=f,c=g);d=l},lineEnd:function(){a.lineEnd();b=c=NaN},clean:function(){return 2-e}}},function(a,b,c,d){null==a?(c*=Ec,d.point(-Z,c),d.point(0,c),d.point(Z,c),d.point(Z,
0),d.point(Z,-c),d.point(0,-c),d.point(-Z,-c),d.point(-Z,0),d.point(-Z,c)):1E-6<ua(a[0]-b[0])?(a=a[0]<b[0]?Z:-Z,c=c*a/2,d.point(-a,c),d.point(0,c),d.point(a,c)):d.point(b[0],b[1])},[-Z,-Z/2]);P.geo.clipExtent=function(){var a,b,c,d,e,f,g={stream:function(a){e&&(e.valid=!1);e=f(a);e.valid=!0;return e},extent:function(l){if(!arguments.length)return[[a,b],[c,d]];f=sf(a=+l[0][0],b=+l[0][1],c=+l[1][0],d=+l[1][1]);e&&(e.valid=!1,e=null);return g}};return g.extent([[0,0],[960,500]])};(P.geo.conicEqualArea=
function(){return Le(Dc)}).raw=Dc;P.geo.albers=function(){return P.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)};P.geo.albersUsa=function(){function a(b){var c=b[0];b=b[1];e=null;(g(c,b),e)||(l(c,b),e)||h(c,b);return e}var b=P.geo.albers(),c=P.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),d=P.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),e,f={point:function(a,b){e=[a,b]}},g,l,h;a.invert=function(a){var e=
b.scale(),f=b.translate(),g=(a[0]-f[0])/e,e=(a[1]-f[1])/e;return(.12<=e&&.234>e&&-.425<=g&&-.214>g?c:.166<=e&&.234>e&&-.214<=g&&-.115>g?d:b).invert(a)};a.stream=function(a){var e=b.stream(a),f=c.stream(a),g=d.stream(a);return{point:function(a,b){e.point(a,b);f.point(a,b);g.point(a,b)},sphere:function(){e.sphere();f.sphere();g.sphere()},lineStart:function(){e.lineStart();f.lineStart();g.lineStart()},lineEnd:function(){e.lineEnd();f.lineEnd();g.lineEnd()},polygonStart:function(){e.polygonStart();f.polygonStart();
g.polygonStart()},polygonEnd:function(){e.polygonEnd();f.polygonEnd();g.polygonEnd()}}};a.precision=function(e){if(!arguments.length)return b.precision();b.precision(e);c.precision(e);d.precision(e);return a};a.scale=function(e){if(!arguments.length)return b.scale();b.scale(e);c.scale(.35*e);d.scale(e);return a.translate(b.translate())};a.translate=function(e){if(!arguments.length)return b.translate();var m=b.scale(),q=+e[0],p=+e[1];g=b.translate(e).clipExtent([[q-.455*m,p-.238*m],[q+.455*m,p+.238*
m]]).stream(f).point;l=c.translate([q-.307*m,p+.201*m]).clipExtent([[q-.425*m+1E-6,p+.12*m+1E-6],[q-.214*m-1E-6,p+.234*m-1E-6]]).stream(f).point;h=d.translate([q-.205*m,p+.212*m]).clipExtent([[q-.214*m+1E-6,p+.166*m+1E-6],[q-.115*m-1E-6,p+.234*m-1E-6]]).stream(f).point;return a};return a.scale(1070)};var ch,xg,Gd={point:r,lineStart:r,lineEnd:r,polygonStart:function(){xg=0;Gd.lineStart=xe},polygonEnd:function(){Gd.lineStart=Gd.lineEnd=Gd.point=r;ch+=ua(xg/2)}},ig,Hg,dh,eh,Zh={point:function(a,b){a<
ig&&(ig=a);a>dh&&(dh=a);b<Hg&&(Hg=b);b>eh&&(eh=b)},lineStart:r,lineEnd:r,polygonStart:r,polygonEnd:r},Wd={point:id,lineStart:Rd,lineEnd:ce,polygonStart:function(){Wd.lineStart=Tc},polygonEnd:function(){Wd.point=id;Wd.lineStart=Rd;Wd.lineEnd=ce}};P.geo.path=function(){function a(b){b&&("function"===typeof c&&g.pointRadius(+c.apply(this,arguments)),l&&l.valid||(l=f(g)),P.geo.stream(b,l));return g.result()}function b(){l=null;return a}var c=4.5,d,e,f,g,l;a.area=function(a){ch=0;P.geo.stream(a,f(Gd));
return ch};a.centroid=function(a){ne=Ud=Vd=ld=Dd=Wc=Oe=oe=Fd=0;P.geo.stream(a,f(Wd));return Fd?[Oe/Fd,oe/Fd]:Wc?[ld/Wc,Dd/Wc]:Vd?[ne/Vd,Ud/Vd]:[NaN,NaN]};a.bounds=function(a){dh=eh=-(ig=Hg=Infinity);P.geo.stream(a,f(Zh));return[[ig,Hg],[dh,eh]]};a.projection=function(a){if(!arguments.length)return d;f=(d=a)?a.stream||ie(a):Ha;return b()};a.context=function(a){if(!arguments.length)return e;g=null==(e=a)?new Ad:new Uf(a);"function"!==typeof c&&g.pointRadius(c);return b()};a.pointRadius=function(b){if(!arguments.length)return c;
c="function"===typeof b?b:(g.pointRadius(+b),+b);return a};return a.projection(P.geo.albersUsa()).context(null)};P.geo.transform=function(a){return{stream:function(b){b=new Cb(b);for(var c in a)b[c]=a[c];return b}}};Cb.prototype={point:function(a,b){this.stream.point(a,b)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};
P.geo.projection=tc;P.geo.projectionMutator=cc;(P.geo.equirectangular=function(){return tc(Jc)}).raw=Jc.invert=Jc;P.geo.rotation=function(a){function b(c){c=a(c[0]*wa,c[1]*wa);return c[0]*=ub,c[1]*=ub,c}a=jd(a[0]%360*wa,a[1]*wa,2<a.length?a[2]*wa:0);b.invert=function(b){b=a.invert(b[0]*wa,b[1]*wa);return b[0]*=ub,b[1]*=ub,b};return b};Bb.invert=Jc;P.geo.circle=function(){function a(){var c="function"===typeof b?b.apply(this,arguments):b,d=jd(-c[0]*wa,-c[1]*wa,0).invert,f=[];e(null,null,1,{point:function(a,
b){f.push(a=d(a,b));a[0]*=ub;a[1]*=ub}});return{type:"Polygon",coordinates:[f]}}var b=[0,0],c,d=6,e;a.origin=function(c){if(!arguments.length)return b;b=c;return a};a.angle=function(b){if(!arguments.length)return c;e=Gc((c=+b)*wa,d*wa);return a};a.precision=function(b){if(!arguments.length)return d;e=Gc(c*wa,(d=+b)*wa);return a};return a.angle(90)};P.geo.distance=function(a,b){var c=(b[0]-a[0])*wa,d=a[1]*wa,e=b[1]*wa,f=Math.sin(c),c=Math.cos(c),g=Math.sin(d),d=Math.cos(d),l=Math.sin(e),e=Math.cos(e),
h;return Math.atan2(Math.sqrt((h=e*f)*h+(h=d*l-g*e*c)*h),g*l+d*e*c)};P.geo.graticule=function(){function a(){return{type:"MultiLineString",coordinates:b()}}function b(){return P.range(Math.ceil(f/r)*r,e,r).map(u).concat(P.range(Math.ceil(m/T)*T,h,T).map(Z)).concat(P.range(Math.ceil(d/q)*q,c,q).filter(function(a){return 1E-6<ua(a%r)}).map(n)).concat(P.range(Math.ceil(l/p)*p,g,p).filter(function(a){return 1E-6<ua(a%T)}).map(t))}var c,d,e,f,g,l,h,m,q=10,p=q,r=90,T=360,n,t,u,Z,v=2.5;a.lines=function(){return b().map(function(a){return{type:"LineString",
coordinates:a}})};a.outline=function(){return{type:"Polygon",coordinates:[u(f).concat(Z(h).slice(1),u(e).reverse().slice(1),Z(m).reverse().slice(1))]}};a.extent=function(b){return arguments.length?a.majorExtent(b).minorExtent(b):a.minorExtent()};a.majorExtent=function(b){if(!arguments.length)return[[f,m],[e,h]];f=+b[0][0];e=+b[1][0];m=+b[0][1];h=+b[1][1];f>e&&(b=f,f=e,e=b);m>h&&(b=m,m=h,h=b);return a.precision(v)};a.minorExtent=function(b){if(!arguments.length)return[[d,l],[c,g]];d=+b[0][0];c=+b[1][0];
l=+b[0][1];g=+b[1][1];d>c&&(b=d,d=c,c=b);l>g&&(b=l,l=g,g=b);return a.precision(v)};a.step=function(b){return arguments.length?a.majorStep(b).minorStep(b):a.minorStep()};a.majorStep=function(b){if(!arguments.length)return[r,T];r=+b[0];T=+b[1];return a};a.minorStep=function(b){if(!arguments.length)return[q,p];q=+b[0];p=+b[1];return a};a.precision=function(b){if(!arguments.length)return v;v=+b;n=ye(l,g,90);t=Ig(d,c,v);u=ye(m,h,90);Z=Ig(f,e,v);return a};return a.majorExtent([[-180,-89.999999],[180,89.999999]]).minorExtent([[-180,
-80.000001],[180,80.000001]])};P.geo.greatArc=function(){function a(){return{type:"LineString",coordinates:[c||b.apply(this,arguments),e||d.apply(this,arguments)]}}var b=De,c,d=yc,e;a.distance=function(){return P.geo.distance(c||b.apply(this,arguments),e||d.apply(this,arguments))};a.source=function(d){if(!arguments.length)return b;b=d;c="function"===typeof d?null:d;return a};a.target=function(b){if(!arguments.length)return d;d=b;e="function"===typeof b?null:b;return a};a.precision=function(){return arguments.length?
a:0};return a};P.geo.interpolate=function(a,b){return kg(a[0]*wa,a[1]*wa,b[0]*wa,b[1]*wa)};P.geo.length=function(a){fh=0;P.geo.stream(a,jg);return fh};var fh,jg={sphere:r,point:r,lineStart:function(){function a(e,f){var g=Math.sin(f*=wa),l=Math.cos(f),h=ua((e*=wa)-b),m=Math.cos(h);fh+=Math.atan2(Math.sqrt((h=l*Math.sin(h))*h+(h=d*g-c*l*m)*h),c*g+d*l*m);b=e;c=g;d=l}var b,c,d;jg.point=function(e,f){b=e*wa;c=Math.sin(f*=wa);d=Math.cos(f);jg.point=a};jg.lineEnd=function(){jg.point=jg.lineEnd=r}},lineEnd:r,
polygonStart:r,polygonEnd:r},Lh=sd(function(a){return Math.sqrt(2/(1+a))},function(a){return 2*Math.asin(a/2)});(P.geo.azimuthalEqualArea=function(){return tc(Lh)}).raw=Lh;var Mh=sd(function(a){return(a=Math.acos(a))&&a/Math.sin(a)},Ha);(P.geo.azimuthalEquidistant=function(){return tc(Mh)}).raw=Mh;(P.geo.conicConformal=function(){return Le(Lf)}).raw=Lf;(P.geo.conicEquidistant=function(){return Le(Jg)}).raw=Jg;var Nh=sd(function(a){return 1/a},Math.atan);(P.geo.gnomonic=function(){return tc(Nh)}).raw=
Nh;df.invert=function(a,b){return[a,2*Math.atan(Math.exp(b))-Ec]};(P.geo.mercator=function(){return mg(df)}).raw=df;var Oh=sd(function(){return 1},Math.asin);(P.geo.orthographic=function(){return tc(Oh)}).raw=Oh;var Ph=sd(function(a){return 1/(1+a)},function(a){return 2*Math.atan(a)});(P.geo.stereographic=function(){return tc(Ph)}).raw=Ph;ef.invert=function(a,b){return[-b,2*Math.atan(Math.exp(a))-Ec]};(P.geo.transverseMercator=function(){var a=mg(ef),b=a.center,c=a.rotate;a.center=function(a){return a?
b([-a[1],a[0]]):(a=b(),[-a[1],a[0]])};a.rotate=function(a){return a?c([a[0],a[1],2<a.length?a[2]+90:90]):(a=c(),[a[0],a[1],a[2]-90])};return a.rotate([0,0])}).raw=ef;P.geom={};P.geom.hull=function(a){function b(a){if(3>a.length)return[];var e=qa(c),f=qa(d),g,l=a.length,h=[],m=[];for(g=0;g<l;g++)h.push([+e.call(this,a[g],g),+f.call(this,a[g],g),g]);h.sort(Ee);for(g=0;g<l;g++)m.push([h[g][0],-h[g][1]]);var e=Qc(h),m=Qc(m),f=m[0]===e[0],l=m[m.length-1]===e[e.length-1],q=[];for(g=e.length-1;0<=g;--g)q.push(a[h[e[g]][2]]);
for(g=+f;g<m.length-l;++g)q.push(a[h[m[g]][2]]);return q}var c=Ac,d=de;if(arguments.length)return b(a);b.x=function(a){return arguments.length?(c=a,b):c};b.y=function(a){return arguments.length?(d=a,b):d};return b};P.geom.polygon=function(a){ke(a,gh);return a};var gh=P.geom.polygon.prototype=[];gh.area=function(){for(var a=-1,b=this.length,c,d=this[b-1],e=0;++a<b;)c=d,d=this[a],e+=c[1]*d[0]-c[0]*d[1];return.5*e};gh.centroid=function(a){var b=-1,c=this.length,d=0,e=0,f,g=this[c-1],l;for(arguments.length||
(a=-1/(6*this.area()));++b<c;)f=g,g=this[b],l=f[0]*g[1]-g[0]*f[1],d+=(f[0]+g[0])*l,e+=(f[1]+g[1])*l;return[d*a,e*a]};gh.clip=function(a){for(var b,c=gf(a),d=-1,e=this.length-gf(this),f,g,l=this[e-1],h,m,q;++d<e;){b=a.slice();a.length=0;h=this[d];m=b[(g=b.length-c)-1];for(f=-1;++f<g;)q=b[f],ff(q,l,h)?(ff(m,l,h)||a.push(dd(m,q,l,h)),a.push(q)):ff(m,l,h)&&a.push(dd(m,q,l,h)),m=q;c&&a.push(a[0]);l=h}return a};var Yf,wf,Xf,Fh=[],mh,yg,Gh=[];Ge.prototype.prepare=function(){for(var a=this.edges,b=a.length,
c;b--;)c=a[b].edge,c.b&&c.a||a.splice(b,1);a.sort(Rf);return a.length};hf.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};se.prototype={insert:function(a,b){var c,d,e;if(a){b.P=a;if(b.N=a.N)a.N.P=b;a.N=b;if(a.R){for(a=a.R;a.L;)a=a.L;a.L=b}else a.R=b;c=a}else this._?(a=Nb(this._),b.P=null,b.N=a,a.P=a.L=b,c=a):(b.P=b.N=null,this._=b,c=null);b.L=b.R=null;b.U=c;b.C=!0;for(a=b;c&&c.C;)d=c.U,c===
d.L?(e=d.R)&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.R&&(vd(this,c),a=c,c=a.U),c.C=!1,d.C=!0,wd(this,d)):(e=d.L)&&e.C?(c.C=e.C=!1,d.C=!0,a=d):(a===c.L&&(wd(this,c),a=c,c=a.U),c.C=!1,d.C=!0,vd(this,d)),c=a.U;this._.C=!1},remove:function(a){a.N&&(a.N.P=a.P);a.P&&(a.P.N=a.N);a.N=a.P=null;var b=a.U,c=a.L,d=a.R,e,f;e=c?d?Nb(d):c:d;b?b.L===a?b.L=e:b.R=e:this._=e;c&&d?(f=e.C,e.C=a.C,e.L=c,c.U=e,e!==d?(b=e.U,e.U=a.U,a=e.R,b.L=a,e.R=d,d.U=e):(e.U=b,b=e,a=e.R)):(f=a.C,a=e);a&&(a.U=b);if(!f)if(a&&a.C)a.C=!1;else{do{if(a===
this._)break;if(a===b.L){if(a=b.R,a.C&&(a.C=!1,b.C=!0,vd(this,b),a=b.R),a.L&&a.L.C||a.R&&a.R.C){a.R&&a.R.C||(a.L.C=!1,a.C=!0,wd(this,a),a=b.R);a.C=b.C;b.C=a.R.C=!1;vd(this,b);a=this._;break}}else if(a=b.L,a.C&&(a.C=!1,b.C=!0,wd(this,b),a=b.L),a.L&&a.L.C||a.R&&a.R.C){a.L&&a.L.C||(a.R.C=!1,a.C=!0,vd(this,a),a=b.L);a.C=b.C;b.C=a.L.C=!1;wd(this,b);a=this._;break}a.C=!0;a=b;b=b.U}while(!a.C);a&&(a.C=!1)}}};P.geom.voronoi=function(a){function b(a){var d=Array(a.length),e=l[0][0],f=l[0][1],g=l[1][0],h=l[1][1];
gd(c(a),l).cells.forEach(function(b,c){var l=b.edges,m=b.site;(d[c]=l.length?l.map(function(a){a=a.start();return[a.x,a.y]}):m.x>=e&&m.x<=g&&m.y>=f&&m.y<=h?[[e,h],[g,h],[g,f],[e,f]]:[]).point=a[c]});return d}function c(a){return a.map(function(a,b){return{x:1E-6*Math.round(f(a,b)/1E-6),y:1E-6*Math.round(g(a,b)/1E-6),i:b}})}var d=Ac,e=de,f=d,g=e,l=hh;if(a)return b(a);b.links=function(a){return gd(c(a)).edges.filter(function(a){return a.l&&a.r}).map(function(b){return{source:a[b.l.i],target:a[b.r.i]}})};
b.triangles=function(a){var b=[];gd(c(a)).cells.forEach(function(c,d){for(var e=c.site,f=c.edges.sort(Rf),g=-1,l=f.length,h,m=f[l-1].edge,m=m.l===e?m.r:m.l;++g<l;)h=m,m=f[g].edge,m=m.l===e?m.r:m.l,d<h.i&&d<m.i&&0>(e.x-m.x)*(h.y-e.y)-(e.x-h.x)*(m.y-e.y)&&b.push([a[d],a[h.i],a[m.i]])});return b};b.x=function(a){return arguments.length?(f=qa(d=a),b):d};b.y=function(a){return arguments.length?(g=qa(e=a),b):e};b.clipExtent=function(a){if(!arguments.length)return l===hh?null:l;l=null==a?hh:a;return b};
b.size=function(a){return arguments.length?b.clipExtent(a&&[[0,0],a]):l===hh?null:l&&l[1]};return b};var hh=[[-1E6,-1E6],[1E6,1E6]];P.geom.delaunay=function(a){return P.geom.voronoi().triangles(a)};P.geom.quadtree=function(a,b,c,d,e){function f(a){function m(a,b,c,d,e,f,g,l){if(!isNaN(c)&&!isNaN(d))if(a.leaf){var h=a.x,p=a.y;if(null!=h){if(!(.01>ua(h-c)+ua(p-d))){var r=a.point;a.x=a.y=a.point=null;q(a,r,h,p,e,f,g,l)}q(a,b,c,d,e,f,g,l)}else a.x=c,a.y=d,a.point=b}else q(a,b,c,d,e,f,g,l)}function q(a,
b,c,d,e,f,g,l){var h=.5*(e+g),p=.5*(f+l),r=c>=h,T=d>=p,n=(T<<1)+r;a.leaf=!1;a=a.nodes[n]||(a.nodes[n]=Ic());r?e=h:g=h;T?f=p:l=p;m(a,b,c,d,e,f,g,l)}var p,r=qa(g),T=qa(l),n,t,u,Z,v,w,x,I;if(null!=b)v=b,w=c,x=d,I=e;else if(x=I=-(v=w=Infinity),n=[],t=[],Z=a.length,h)for(u=0;u<Z;++u)p=a[u],p.x<v&&(v=p.x),p.y<w&&(w=p.y),p.x>x&&(x=p.x),p.y>I&&(I=p.y),n.push(p.x),t.push(p.y);else for(u=0;u<Z;++u){var A=+r(p=a[u],u);p=+T(p,u);A<v&&(v=A);p<w&&(w=p);A>x&&(x=A);p>I&&(I=p);n.push(A);t.push(p)}A=x-v;p=I-w;A>p?
I=w+A:x=v+p;var G=Ic();G.add=function(a){m(G,a,+r(a,++u),+T(a,u),v,w,x,I)};G.visit=function(a){qb(a,G,v,w,x,I)};u=-1;if(null==b){for(;++u<Z;)m(G,a[u],n[u],t[u],v,w,x,I);--u}else a.forEach(G.add);n=t=a=p=null;return G}var g=Ac,l=de,h;if(h=arguments.length)return g=he,l=Pf,3===h&&(e=c,d=b,c=b=0),f(a);f.x=function(a){return arguments.length?(g=a,f):g};f.y=function(a){return arguments.length?(l=a,f):l};f.extent=function(a){if(!arguments.length)return null==b?null:[[b,c],[d,e]];null==a?b=c=d=e=null:(b=
+a[0][0],c=+a[0][1],d=+a[1][0],e=+a[1][1]);return f};f.size=function(a){if(!arguments.length)return null==b?null:[d-b,e-c];null==a?b=c=d=e=null:(b=c=0,d=+a[0],e=+a[1]);return f};return f};P.interpolateRgb=fd;P.interpolateObject=Hc;P.interpolateNumber=yb;P.interpolateString=Sc;var Ug=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;P.interpolate=ud;P.interpolators=[function(a,b){var c=typeof b;return("string"===c?Rg.has(b)||/^(#|rgb\(|hsl\()/.test(b)?fd:Sc:b instanceof ta?fd:"object"===c?Array.isArray(b)?
te:Hc:yb)(a,b)}];P.interpolateArray=te;var Qh=function(){return Ha},$h=P.map({linear:Qh,poly:function(a){return function(b){return Math.pow(b,a)}},quad:function(){return Mg},cubic:function(){return Pb},sin:function(){return Og},exp:function(){return Kg},circle:function(){return Je},elastic:function(a,b){var c;2>arguments.length&&(b=.45);arguments.length?c=b/lc*Math.asin(1/a):(a=1,c=b/4);return function(d){return 1+a*Math.pow(2,-10*d)*Math.sin((d-c)*lc/b)}},back:function(a){a||(a=1.70158);return function(b){return b*
b*((a+1)*b-a)}},bounce:function(){return ue}}),ai=P.map({"in":Ha,out:Ie,"in-out":Qf,"out-in":function(a){return Qf(Ie(a))}});P.ease=function(a){var b=a.indexOf("-"),c=0<=b?a.substring(0,b):a,b=0<=b?a.substring(b+1):"in",c=$h.get(c)||Qh,b=ai.get(b)||Ha;return sg(b(c.apply(null,xc.call(arguments,1))))};P.interpolateHcl=function(a,b){a=P.hcl(a);b=P.hcl(b);var c=a.h,d=a.c,e=a.l,f=b.h-c,g=b.c-d,l=b.l-e;isNaN(g)&&(g=0,d=isNaN(d)?b.c:d);isNaN(f)?(f=0,c=isNaN(c)?b.h:c):180<f?f-=360:-180>f&&(f+=360);return function(a){return pa(c+
f*a,d+g*a,e+l*a)+""}};P.interpolateHsl=function(a,b){a=P.hsl(a);b=P.hsl(b);var c=a.h,d=a.s,e=a.l,f=b.h-c,g=b.s-d,l=b.l-e;isNaN(g)&&(g=0,d=isNaN(d)?b.s:d);isNaN(f)?(f=0,c=isNaN(c)?b.h:c):180<f?f-=360:-180>f&&(f+=360);return function(a){return Ba(c+f*a,d+g*a,e+l*a)+""}};P.interpolateLab=function(a,b){a=P.lab(a);b=P.lab(b);var c=a.l,d=a.a,e=a.b,f=b.l-c,g=b.a-d,l=b.b-e;return function(a){return Ra(c+f*a,d+g*a,e+l*a)+""}};P.interpolateRound=Mb;P.transform=function(a){var b=ya.createElementNS(P.ns.prefix.svg,
"g");return(P.transform=function(a){if(null!=a){b.setAttribute("transform",a);var c=b.transform.baseVal.consolidate()}return new ng(c?c.matrix:bi)})(a)};ng.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var bi={a:1,b:0,c:0,d:1,e:0,f:0};P.interpolateTransform=Nf;P.layout={};P.layout.bundle=function(){return function(a){for(var b=[],c=-1,d=a.length;++c<d;)b.push(og(a[c]));return b}};P.layout.chord=function(){function a(){var c=
{},p=[],r=P.range(g),T=[],n,t,u,Z,v;d=[];e=[];n=0;for(Z=-1;++Z<g;){t=0;for(v=-1;++v<g;)t+=f[Z][v];p.push(t);T.push(P.range(g));n+=t}h&&r.sort(function(a,b){return h(p[a],p[b])});m&&T.forEach(function(a,b){a.sort(function(a,c){return m(f[b][a],f[b][c])})});n=(lc-l*g)/n;t=0;for(Z=-1;++Z<g;){u=t;for(v=-1;++v<g;){var w=r[Z],x=T[w][v],I=f[w][x],A=t,G=t+=I*n;c[w+"-"+x]={index:w,subindex:x,startAngle:A,endAngle:G,value:I}}e[w]={index:w,startAngle:u,endAngle:t,value:(t-u)/n};t+=l}for(Z=-1;++Z<g;)for(v=Z-
1;++v<g;)r=c[Z+"-"+v],T=c[v+"-"+Z],(r.value||T.value)&&d.push(r.value<T.value?{source:T,target:r}:{source:r,target:T});q&&b()}function b(){d.sort(function(a,b){return q((a.source.value+a.target.value)/2,(b.source.value+b.target.value)/2)})}var c={},d,e,f,g,l=0,h,m,q;c.matrix=function(a){if(!arguments.length)return f;g=(f=a)&&f.length;d=e=null;return c};c.padding=function(a){if(!arguments.length)return l;l=a;d=e=null;return c};c.sortGroups=function(a){if(!arguments.length)return h;h=a;d=e=null;return c};
c.sortSubgroups=function(a){if(!arguments.length)return m;m=a;d=null;return c};c.sortChords=function(a){if(!arguments.length)return q;q=a;d&&b();return c};c.chords=function(){d||a();return d};c.groups=function(){e||a();return e};return c};P.layout.force=function(){function a(b){return function(a,c,d,e){if(a.point!==b){d=a.cx-b.x;var f=a.cy-b.y;c=e-c;e=d*d+f*f;if(c*c/T<e)return e<p&&(c=a.charge/e,b.px-=d*c,b.py-=f*c),!0;a.point&&e&&e<p&&(c=a.pointCharge/e,b.px-=d*c,b.py-=f*c)}return!a.charge}}function b(a){a.px=
P.event.x;a.py=P.event.y;c.resume()}var c={},d=P.dispatch("start","tick","end"),e=[1,1],f,g,l=.9,h=ci,m=ih,q=-30,p=vh,r=.1,T=.64,n=[],t=[],u,Z,v;c.tick=function(){if(.005>(g*=.99))return d.end({type:"end",alpha:g=0}),!0;var b=n.length,c=t.length,f,h,m,p,T,w,x;for(f=0;f<c;++f)if(h=t[f],m=h.source,p=h.target,w=p.x-m.x,x=p.y-m.y,T=w*w+x*x)T=g*Z[f]*((T=Math.sqrt(T))-u[f])/T,w*=T,x*=T,p.x-=w*(T=m.weight/(p.weight+m.weight)),p.y-=x*T,m.x+=w*(T=1-T),m.y+=x*T;if(T=g*r)if(w=e[0]/2,x=e[1]/2,f=-1,T)for(;++f<
b;)h=n[f],h.x+=(w-h.x)*T,h.y+=(x-h.y)*T;if(q)for(jf(c=P.geom.quadtree(n),g,v),f=-1;++f<b;)(h=n[f]).fixed||c.visit(a(h));for(f=-1;++f<b;)h=n[f],h.fixed?(h.x=h.px,h.y=h.py):(h.x-=(h.px-(h.px=h.x))*l,h.y-=(h.py-(h.py=h.y))*l);d.tick({type:"tick",alpha:g})};c.nodes=function(a){if(!arguments.length)return n;n=a;return c};c.links=function(a){if(!arguments.length)return t;t=a;return c};c.size=function(a){if(!arguments.length)return e;e=a;return c};c.linkDistance=function(a){if(!arguments.length)return h;
h="function"===typeof a?a:+a;return c};c.distance=c.linkDistance;c.linkStrength=function(a){if(!arguments.length)return m;m="function"===typeof a?a:+a;return c};c.friction=function(a){if(!arguments.length)return l;l=+a;return c};c.charge=function(a){if(!arguments.length)return q;q="function"===typeof a?a:+a;return c};c.chargeDistance=function(a){if(!arguments.length)return Math.sqrt(p);p=a*a;return c};c.gravity=function(a){if(!arguments.length)return r;r=+a;return c};c.theta=function(a){if(!arguments.length)return Math.sqrt(T);
T=a*a;return c};c.alpha=function(a){if(!arguments.length)return g;a=+a;g?g=0<a?a:0:0<a&&(d.start({type:"start",alpha:g=a}),P.timer(c.tick));return c};c.start=function(){function a(c,e){if(!p){p=Array(d);for(g=0;g<d;++g)p[g]=[];for(g=0;g<l;++g){var f=t[g];p[f.source.index].push(f.target);p[f.target.index].push(f.source)}}for(var f=p[b],g=-1,l=f.length,h;++g<l;)if(!isNaN(h=f[g][c]))return h;return Math.random()*e}var b,d=n.length,f=t.length,g=e[0],l=e[1],p,r;for(b=0;b<d;++b)(r=n[b]).index=b,r.weight=
0;for(b=0;b<f;++b)r=t[b],"number"==typeof r.source&&(r.source=n[r.source]),"number"==typeof r.target&&(r.target=n[r.target]),++r.source.weight,++r.target.weight;for(b=0;b<d;++b)r=n[b],isNaN(r.x)&&(r.x=a("x",g)),isNaN(r.y)&&(r.y=a("y",l)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);u=[];if("function"===typeof h)for(b=0;b<f;++b)u[b]=+h.call(this,t[b],b);else for(b=0;b<f;++b)u[b]=h;Z=[];if("function"===typeof m)for(b=0;b<f;++b)Z[b]=+m.call(this,t[b],b);else for(b=0;b<f;++b)Z[b]=m;v=[];if("function"===
typeof q)for(b=0;b<d;++b)v[b]=+q.call(this,n[b],b);else for(b=0;b<d;++b)v[b]=q;return c.resume()};c.resume=function(){return c.alpha(.1)};c.stop=function(){return c.alpha(0)};c.drag=function(){f||(f=P.behavior.drag().origin(Ha).on("dragstart.force",pg).on("drag.force",b).on("dragend.force",kb));if(!arguments.length)return f;this.on("mouseover.force",Xb).on("mouseout.force",ee).call(f)};return P.rebind(c,d,"on")};var ci=20,ih=1,vh=Infinity;P.layout.hierarchy=function(){function a(b,g,l){var h=e.call(c,
b,g);b.depth=g;l.push(b);if(h&&(q=h.length)){var m=-1,q,p=b.children=Array(q),r=0;g+=1;for(var T;++m<q;)T=p[m]=a(h[m],g,l),T.parent=b,r+=T.value;d&&p.sort(d);f&&(b.value=r)}else delete b.children,f&&(b.value=+f.call(c,b,g)||0);return b}function b(a,d){var e=a.children,g=0;if(e&&(h=e.length))for(var l=-1,h,m=d+1;++l<h;)g+=b(e[l],m);else f&&(g=+f.call(c,a,d)||0);f&&(a.value=g);return g}function c(b){var d=[];a(b,0,d);return d}var d=lf,e=yd,f=kf;c.sort=function(a){if(!arguments.length)return d;d=a;return c};
c.children=function(a){if(!arguments.length)return e;e=a;return c};c.value=function(a){if(!arguments.length)return f;f=a;return c};c.revalue=function(a){b(a,0);return a};return c};P.layout.partition=function(){function a(b,c,d,e){var f=b.children;b.x=c;b.y=b.depth*e;b.dx=d;b.dy=e;if(f&&(l=f.length)){var g=-1,l,h;for(d=b.value?d/b.value:0;++g<l;)a(h=f[g],c,b=h.value*d,e),c+=b}}function b(a){a=a.children;var c=0;if(a&&(e=a.length))for(var d=-1,e;++d<e;)c=Math.max(c,b(a[d]));return 1+c}function c(f,
g){var l=d.call(this,f,g);a(l[0],0,e[0],e[1]/b(l[0]));return l}var d=P.layout.hierarchy(),e=[1,1];c.size=function(a){if(!arguments.length)return e;e=a;return c};return Rc(c,d)};P.layout.pie=function(){function a(f){var g=f.map(function(c,d){return+b.call(a,c,d)}),l=+("function"===typeof d?d.apply(this,arguments):d),h=(("function"===typeof e?e.apply(this,arguments):e)-l)/P.sum(g),m=P.range(f.length);null!=c&&m.sort(c===wh?function(a,b){return g[b]-g[a]}:function(a,b){return c(f[a],f[b])});var q=[];
m.forEach(function(a){var b;q[a]={data:f[a],value:b=g[a],startAngle:l,endAngle:l+=b*h}});return q}var b=Number,c=wh,d=0,e=lc;a.value=function(c){if(!arguments.length)return b;b=c;return a};a.sort=function(b){if(!arguments.length)return c;c=b;return a};a.startAngle=function(b){if(!arguments.length)return d;d=b;return a};a.endAngle=function(b){if(!arguments.length)return e;e=b;return a};return a};var wh={};P.layout.stack=function(){function a(l,h){var m=l.map(function(c,d){return b.call(a,c,d)}),q=
m.map(function(b){return b.map(function(b,c){return[f.call(a,b,c),g.call(a,b,c)]})}),p=c.call(a,q,h),m=P.permute(m,p),q=P.permute(q,p),p=d.call(a,q,h),r=m.length,T=m[0].length,n,t,u;for(t=0;t<T;++t)for(e.call(a,m[0][t],u=p[t],q[0][t][1]),n=1;n<r;++n)e.call(a,m[n][t],u+=q[n-1][t][1],q[n][t][1]);return l}var b=Ha,c=Xc,d=Pe,e=Tb,f=sa,g=fe;a.values=function(c){if(!arguments.length)return b;b=c;return a};a.order=function(b){if(!arguments.length)return c;c="function"===typeof b?b:di.get(b)||Xc;return a};
a.offset=function(b){if(!arguments.length)return d;d="function"===typeof b?b:ei.get(b)||Pe;return a};a.x=function(b){if(!arguments.length)return f;f=b;return a};a.y=function(b){if(!arguments.length)return g;g=b;return a};a.out=function(b){if(!arguments.length)return e;e=b;return a};return a};var di=P.map({"inside-out":function(a){var b=a.length,c,d=a.map(Zf),e=a.map(xf),f=P.range(b).sort(function(a,b){return d[a]-d[b]}),g=0,l=0,h=[],m=[];for(a=0;a<b;++a)c=f[a],g<l?(g+=e[c],h.push(c)):(l+=e[c],m.push(c));
return m.reverse().concat(h)},reverse:function(a){return P.range(a.length).reverse()},"default":Xc}),ei=P.map({silhouette:function(a){var b=a.length,c=a[0].length,d=[],e=0,f,g,l,h=[];for(g=0;g<c;++g){for(l=f=0;f<b;f++)l+=a[f][g][1];l>e&&(e=l);d.push(l)}for(g=0;g<c;++g)h[g]=(e-d[g])/2;return h},wiggle:function(a){var b=a.length,c=a[0],d=c.length,e,f,g,l,h,m,q,p,r,T=[];T[0]=p=r=0;for(f=1;f<d;++f){for(l=e=0;e<b;++e)l+=a[e][f][1];h=e=0;for(q=c[f][0]-c[f-1][0];e<b;++e){g=0;for(m=(a[e][f][1]-a[e][f-1][1])/
(2*q);g<e;++g)m+=(a[g][f][1]-a[g][f-1][1])/q;h+=m*a[e][f][1]}T[f]=p-=l?h/l*q:0;p<r&&(r=p)}for(f=0;f<d;++f)T[f]-=r;return T},expand:function(a){var b=a.length,c=a[0].length,d=1/b,e,f,g,l=[];for(f=0;f<c;++f){for(g=e=0;e<b;e++)g+=a[e][f][1];if(g)for(e=0;e<b;e++)a[e][f][1]/=g;else for(e=0;e<b;e++)a[e][f][1]=d}for(f=0;f<c;++f)l[f]=0;return l},zero:Pe});P.layout.histogram=function(){function a(f,g){var l=[],h=f.map(c,this),m=d.call(this,h,g),q=e.call(this,m,h,g),p;g=-1;for(var r=h.length,T=q.length-1,n=
b?1:1/r;++g<T;)p=l[g]=[],p.dx=q[g+1]-(p.x=q[g]),p.y=0;if(0<T)for(g=-1;++g<r;)p=h[g],p>=m[0]&&p<=m[1]&&(p=l[P.bisect(q,p,1,T)-1],p.y+=n,p.push(f[g]));return l}var b=!0,c=Number,d=Ag,e=Hd;a.value=function(b){if(!arguments.length)return c;c=b;return a};a.range=function(b){if(!arguments.length)return d;d=qa(b);return a};a.bins=function(b){if(!arguments.length)return e;e="number"===typeof b?function(a){return $f(a,b)}:qa(b);return a};a.frequency=function(c){if(!arguments.length)return b;b=!!c;return a};
return a};P.layout.tree=function(){function a(f,g){function l(a,b){var d=a.children,e=a._tree;if(d&&(f=d.length)){for(var f,g=d[0],h,m=g,q,p=-1;++p<f;){q=d[p];l(q,h);var r=q;if(h){for(var T=r,n=r,t=r.parent.children[0],u=T._tree.mod,Z=n._tree.mod,v=h._tree.mod,w=t._tree.mod,x=void 0;h=xa(h),T=pe(T),h&&T;){t=pe(t);n=xa(n);n._tree.ancestor=r;x=h._tree.prelim+v-T._tree.prelim-u+c(h,T);if(0<x){var I=h._tree.ancestor.parent==r.parent?h._tree.ancestor:m,A=r,G=x,I=I._tree,A=A._tree,B=G/(A.number-I.number);
I.change+=B;A.change-=B;A.shift+=G;A.prelim+=G;A.mod+=G;u+=x;Z+=x}v+=h._tree.mod;u+=T._tree.mod;w+=t._tree.mod;Z+=n._tree.mod}h&&!xa(n)&&(n._tree.thread=h,n._tree.mod+=v-Z);T&&!pe(t)&&(t._tree.thread=T,t._tree.mod+=u-w,m=r)}h=q}f=d=0;p=a.children;for(r=p.length;0<=--r;)m=p[r]._tree,m.prelim+=d,m.mod+=d,d+=m.shift+(f+=m.change);g=.5*(g._tree.prelim+q._tree.prelim);b?(e.prelim=b._tree.prelim+c(a,b),e.mod=e.prelim-g):e.prelim=g}else b&&(e.prelim=b._tree.prelim+c(a,b))}function h(a,b){a.x=a._tree.prelim+
b;var c=a.children;if(c&&(e=c.length)){var d=-1,e;for(b+=a._tree.mod;++d<e;)h(c[d],b)}}var m=b.call(this,f,g),q=m[0];Jd(q,function(a,b){a._tree={ancestor:a,prelim:0,mod:0,change:0,shift:0,number:b?b._tree.number+1:0}});l(q);h(q,-q._tree.prelim);var p=Xd(q,Id),r=Xd(q,Qe),T=Xd(q,Bg),n=p.x-c(p,r)/2,t=r.x+c(r,p)/2,u=T.depth||1;Jd(q,e?function(a){a.x*=d[0];a.y=a.depth*d[1];delete a._tree}:function(a){a.x=(a.x-n)/(t-n)*d[0];a.y=a.depth/u*d[1];delete a._tree});return m}var b=P.layout.hierarchy().sort(null).value(null),
c=yf,d=[1,1],e=!1;a.separation=function(b){if(!arguments.length)return c;c=b;return a};a.size=function(b){if(!arguments.length)return e?null:d;e=null==(d=b);return a};a.nodeSize=function(b){if(!arguments.length)return e?d:null;e=null!=(d=b);return a};return Rc(a,b)};P.layout.pack=function(){function a(f,g){var l=b.call(this,f,g),h=l[0],m=d[0],q=d[1],p=null==e?Math.sqrt:"function"===typeof e?e:function(){return e};h.x=h.y=0;Jd(h,function(a){a.r=+p(a.value)});Jd(h,Ub);if(c){var r=c*(e?1:Math.max(2*
h.r/m,2*h.r/q))/2;Jd(h,function(a){a.r+=r});Jd(h,Ub);Jd(h,function(a){a.r-=r})}Oa(h,m/2,q/2,e?1:1/Math.max(2*h.r/m,2*h.r/q));return l}var b=P.layout.hierarchy().sort(ag),c=0,d=[1,1],e;a.size=function(b){if(!arguments.length)return d;d=b;return a};a.radius=function(b){if(!arguments.length)return e;e=null==b||"function"===typeof b?b:+b;return a};a.padding=function(b){if(!arguments.length)return c;c=+b;return a};return Rc(a,b)};P.layout.cluster=function(){function a(f,g){var l=b.call(this,f,g),h=l[0],
m,q=0;Jd(h,function(a){var b=a.children;b&&b.length?(a.x=Vg(b),a.y=$b(b)):(a.x=m?q+=c(a,m):0,a.y=0,m=a)});var p=Cg(h),r=vc(h),T=p.x-c(p,r)/2,n=r.x+c(r,p)/2;Jd(h,e?function(a){a.x=(a.x-h.x)*d[0];a.y=(h.y-a.y)*d[1]}:function(a){a.x=(a.x-T)/(n-T)*d[0];a.y=(1-(h.y?a.y/h.y:1))*d[1]});return l}var b=P.layout.hierarchy().sort(null).value(null),c=yf,d=[1,1],e=!1;a.separation=function(b){if(!arguments.length)return c;c=b;return a};a.size=function(b){if(!arguments.length)return e?null:d;e=null==(d=b);return a};
a.nodeSize=function(b){if(!arguments.length)return e?d:null;e=null!=(d=b);return a};return Rc(a,b)};P.layout.treemap=function(){function a(b,c){for(var d=-1,e=b.length,f,g;++d<e;)g=(f=b[d]).value*(0>c?0:c),f.area=isNaN(g)||0>=g?0:g}function b(c){var e=c.children;if(e&&e.length){var f=m(c),g=[],l=e.slice(),h=Infinity,q,p="slice"===r?f.dx:"dice"===r?f.dy:"slice-dice"===r?c.depth&1?f.dy:f.dx:Math.min(f.dx,f.dy);a(l,f.dx*f.dy/c.value);for(g.area=0;0<(c=l.length);){g.push(c=l[c-1]);g.area+=c.area;if(!(c=
"squarify"!==r)){q=p;c=g.area;for(var n=void 0,t=0,u=Infinity,Z=-1,v=g.length;++Z<v;)if(n=g[Z].area)n<u&&(u=n),n>t&&(t=n);c*=c;q*=q;c=(q=c?Math.max(q*t*T/c,c/(q*u*T)):Infinity)<=h}c?(l.pop(),h=q):(g.area-=g.pop().area,d(g,p,f,!1),p=Math.min(f.dx,f.dy),g.length=g.area=0,h=Infinity)}g.length&&(d(g,p,f,!0),g.length=g.area=0);e.forEach(b)}}function c(b){var e=b.children;if(e&&e.length){var f=m(b),g=e.slice(),l=[];a(g,f.dx*f.dy/b.value);for(l.area=0;b=g.pop();)l.push(b),l.area+=b.area,null!=b.z&&(d(l,
b.z?f.dx:f.dy,f,!g.length),l.length=l.area=0);e.forEach(c)}}function d(a,b,c,e){var f=-1,l=a.length,h=c.x,m=c.y,q=b?g(a.area/b):0,p;if(b==c.dx){if(e||q>c.dy)q=c.dy;for(;++f<l;)p=a[f],p.x=h,p.y=m,p.dy=q,h+=p.dx=Math.min(c.x+c.dx-h,q?g(p.area/q):0);p.z=!0;p.dx+=c.x+c.dx-h;c.y+=q;c.dy-=q}else{if(e||q>c.dx)q=c.dx;for(;++f<l;)p=a[f],p.x=h,p.y=m,p.dx=q,m+=p.dy=Math.min(c.y+c.dy-m,q?g(p.area/q):0);p.z=!1;p.dy+=c.y+c.dy-m;c.x+=q;c.dx-=q}}function e(d){d=p||f(d);var g=d[0];g.x=0;g.y=0;g.dx=l[0];g.dy=l[1];
p&&f.revalue(g);a([g],g.dx*g.dy/g.value);(p?c:b)(g);q&&(p=d);return d}var f=P.layout.hierarchy(),g=Math.round,l=[1,1],h=null,m=Lc,q=!1,p,r="squarify",T=.5*(1+Math.sqrt(5));e.size=function(a){if(!arguments.length)return l;l=a;return e};e.padding=function(a){function b(c){var d=a.call(e,c,c.depth);return null==d?Lc(c):Kd(c,"number"===typeof d?[d,d,d,d]:d)}function c(b){return Kd(b,a)}if(!arguments.length)return h;var d;m=null==(h=a)?Lc:"function"===(d=typeof a)?b:"number"===d?(a=[a,a,a,a],c):c;return e};
e.round=function(a){if(!arguments.length)return g!=Number;g=a?Math.round:Number;return e};e.sticky=function(a){if(!arguments.length)return q;q=a;p=null;return e};e.ratio=function(a){if(!arguments.length)return T;T=a;return e};e.mode=function(a){if(!arguments.length)return r;r=a+"";return e};return Rc(e,f)};P.random={normal:function(a,b){var c=arguments.length;2>c&&(b=1);1>c&&(a=0);return function(){var c,d;do c=2*Math.random()-1,d=2*Math.random()-1,d=c*c+d*d;while(!d||1<d);return a+b*c*Math.sqrt(-2*
Math.log(d)/d)}},logNormal:function(){var a=P.random.normal.apply(P,arguments);return function(){return Math.exp(a())}},bates:function(a){var b=P.random.irwinHall(a);return function(){return b()/a}},irwinHall:function(a){return function(){for(var b=0,c=0;c<a;c++)b+=Math.random();return b}}};P.scale={};var Wh={floor:Ha,ceil:Ha};P.scale.linear=function(){return Vb([0,1],[0,1],ud,!1)};var nh={s:1,g:1,p:1,r:1,e:1};P.scale.log=function(){return Ia(P.scale.linear().domain([0,1]),10,!0,[1,10])};var oh=P.format(".0e"),
Xh={floor:function(a){return-Math.ceil(-a)},ceil:function(a){return-Math.floor(-a)}};P.scale.pow=function(){return eg(P.scale.linear(),1,[0,1])};P.scale.sqrt=function(){return P.scale.pow().exponent(.5)};P.scale.ordinal=function(){return qe([],{t:"range",a:[[]]})};P.scale.category10=function(){return P.scale.ordinal().range(fi)};P.scale.category20=function(){return P.scale.ordinal().range(gi)};P.scale.category20b=function(){return P.scale.ordinal().range(Jf)};P.scale.category20c=function(){return P.scale.ordinal().range(Pa)};
var fi=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(hb),gi=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(hb),Jf=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(hb),Pa=[3244733,7057110,10406625,
13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(hb);P.scale.quantile=function(){return Cf([],[])};P.scale.quantize=function(){return Yd(0,1,[0,1])};P.scale.threshold=function(){return Ue([.5],[0,1])};P.scale.identity=function(){return Ve([0,1])};P.svg={};P.svg.arc=function(){function a(){var f=b.apply(this,arguments),g=c.apply(this,arguments),l=d.apply(this,arguments)+Ff,h=e.apply(this,arguments)+
Ff,m=(h<l&&(m=l,l=h,h=m),h-l),q=m<Z?"0":"1",p=Math.cos(l),l=Math.sin(l),r=Math.cos(h),h=Math.sin(h);return m>=cf?f?"M0,"+g+"A"+g+","+g+" 0 1,1 0,"+-g+"A"+g+","+g+" 0 1,1 0,"+g+"M0,"+f+"A"+f+","+f+" 0 1,0 0,"+-f+"A"+f+","+f+" 0 1,0 0,"+f+"Z":"M0,"+g+"A"+g+","+g+" 0 1,1 0,"+-g+"A"+g+","+g+" 0 1,1 0,"+g+"Z":f?"M"+g*p+","+g*l+"A"+g+","+g+" 0 "+q+",1 "+g*r+","+g*h+"L"+f*r+","+f*h+"A"+f+","+f+" 0 "+q+",0 "+f*p+","+f*l+"Z":"M"+g*p+","+g*l+"A"+g+","+g+" 0 "+q+",1 "+g*r+","+g*h+"L0,0Z"}var b=Dg,c=Df,d=wc,
e=We;a.innerRadius=function(c){if(!arguments.length)return b;b=qa(c);return a};a.outerRadius=function(b){if(!arguments.length)return c;c=qa(b);return a};a.startAngle=function(b){if(!arguments.length)return d;d=qa(b);return a};a.endAngle=function(b){if(!arguments.length)return e;e=qa(b);return a};a.centroid=function(){var a=(b.apply(this,arguments)+c.apply(this,arguments))/2,f=(d.apply(this,arguments)+e.apply(this,arguments))/2+Ff;return[Math.cos(f)*a,Math.sin(f)*a]};return a};var Ff=-Ec,cf=lc-1E-6;
P.svg.line=function(){return Nc(Ha)};var ph=P.map({linear:$a,"linear-closed":function(a){return $a(a)+"Z"},step:function(a){for(var b=0,c=a.length,d=a[0],e=[d[0],",",d[1]];++b<c;)e.push("H",(d[0]+(d=a[b])[0])/2,"V",d[1]);1<c&&e.push("H",d[0]);return e.join("")},"step-before":Db,"step-after":Ld,basis:Zd,"basis-open":function(a){if(4>a.length)return $a(a);for(var b=[],c=-1,d=a.length,e,f=[0],g=[0];3>++c;)e=a[c],f.push(e[0]),g.push(e[1]);b.push(Qa(Xe,f)+","+Qa(Xe,g));for(--c;++c<d;)e=a[c],f.shift(),
f.push(e[0]),g.shift(),g.push(e[1]),wb(b,f,g);return b.join("")},"basis-closed":function(a){for(var b,c=-1,d=a.length,e=d+4,f,g=[],l=[];4>++c;)f=a[c%d],g.push(f[0]),l.push(f[1]);b=[Qa(Xe,g),",",Qa(Xe,l)];for(--c;++c<e;)f=a[c%d],g.shift(),g.push(f[0]),l.shift(),l.push(f[1]),wb(b,g,l);return b.join("")},bundle:function(a,b){var c=a.length-1;if(c)for(var d=a[0][0],e=a[0][1],f=a[c][0]-d,g=a[c][1]-e,l=-1,h,m;++l<=c;)h=a[l],m=l/c,h[0]=b*h[0]+(1-b)*(d+m*f),h[1]=b*h[1]+(1-b)*(e+m*g);return Zd(a)},cardinal:function(a,
b){return 3>a.length?$a(a):a[0]+Oc(a,Ef(a,b))},"cardinal-open":function(a,b){return 4>a.length?$a(a):a[1]+Oc(a.slice(1,a.length-1),Ef(a,b))},"cardinal-closed":function(a,b){return 3>a.length?$a(a):a[0]+Oc((a.push(a[0]),a),Ef([a[a.length-2]].concat(a,[a[1]]),b))},monotone:function(a){if(3>a.length)a=$a(a);else{var b=a[0],c=[],d,e,f,g;d=0;e=a.length-1;var l=[];f=a[1];for(g=l[0]=Md(a[0],f);++d<e;)l[d]=(g+(g=Md(f,f=a[d+1])))/2;l[d]=g;for(var h=-1,m=a.length-1;++h<m;)d=Md(a[h],a[h+1]),1E-6>ua(d)?l[h]=
l[h+1]=0:(e=l[h]/d,f=l[h+1]/d,g=e*e+f*f,9<g&&(g=3*d/Math.sqrt(g),l[h]=g*e,l[h+1]=g*f));for(h=-1;++h<=m;)g=(a[Math.min(m,h+1)][0]-a[Math.max(0,h-1)][0])/(6*(1+l[h]*l[h])),c.push([g||0,l[h]*g||0]);a=b+Oc(a,c)}return a}});ph.forEach(function(a,b){b.key=a;b.closed=/-closed$/.test(a)});var Hh=[0,2/3,1/3,0],Xg=[0,1/3,2/3,0],Xe=[0,1/6,2/3,1/6];P.svg.line.radial=function(){var a=Nc(Nd);a.radius=a.x;delete a.x;a.angle=a.y;delete a.y;return a};Db.reverse=Ld;Ld.reverse=Db;P.svg.area=function(){return Gf(Ha)};
P.svg.area.radial=function(){var a=Gf(Nd);a.radius=a.x;delete a.x;a.innerRadius=a.x0;delete a.x0;a.outerRadius=a.x1;delete a.x1;a.angle=a.y;delete a.y;a.startAngle=a.y0;delete a.y0;a.endAngle=a.y1;delete a.y1;return a};P.svg.chord=function(){function a(f,g){var l=b(this,d,f,g),h=b(this,e,f,g);return"M"+l.p0+c(l.r,l.p1,l.a1-l.a0)+(l.a0==h.a0&&l.a1==h.a1?"Q 0,0 "+l.p0:"Q 0,0 "+h.p0+c(h.r,h.p1,h.a1-h.a0)+("Q 0,0 "+l.p0))+"Z"}function b(a,c,d,e){var h=c.call(a,d,e);c=f.call(a,h,e);d=g.call(a,h,e)+Ff;
a=l.call(a,h,e)+Ff;return{r:c,a0:d,a1:a,p0:[c*Math.cos(d),c*Math.sin(d)],p1:[c*Math.cos(a),c*Math.sin(a)]}}function c(a,b,d){return"A"+a+","+a+" 0 "+ +(d>Z)+",1 "+b}var d=De,e=yc,f=mc,g=wc,l=We;a.radius=function(b){if(!arguments.length)return f;f=qa(b);return a};a.source=function(b){if(!arguments.length)return d;d=qa(b);return a};a.target=function(b){if(!arguments.length)return e;e=qa(b);return a};a.startAngle=function(b){if(!arguments.length)return g;g=qa(b);return a};a.endAngle=function(b){if(!arguments.length)return l;
l=qa(b);return a};return a};P.svg.diagonal=function(){function a(e,f){var g=b.call(this,e,f),l=c.call(this,e,f),h=(g.y+l.y)/2,g=[g,{x:g.x,y:h},{x:l.x,y:h},l],g=g.map(d);return"M"+g[0]+"C"+g[1]+" "+g[2]+" "+g[3]}var b=De,c=yc,d=pd;a.source=function(c){if(!arguments.length)return b;b=qa(c);return a};a.target=function(b){if(!arguments.length)return c;c=qa(b);return a};a.projection=function(b){if(!arguments.length)return d;d=b;return a};return a};P.svg.diagonal.radial=function(){var a=P.svg.diagonal(),
b=pd,c=a.projection;a.projection=function(a){return arguments.length?c(Zc(b=a)):b};return a};P.svg.symbol=function(){function a(d,e){return(Kf.get(b.call(this,d,e))||nc)(c.call(this,d,e))}var b=Yg,c=Na;a.type=function(c){if(!arguments.length)return b;b=qa(c);return a};a.size=function(b){if(!arguments.length)return c;c=qa(b);return a};return a};var Kf=P.map({circle:nc,cross:function(a){a=Math.sqrt(a/5)/2;return"M"+-3*a+","+-a+"H"+-a+"V"+-3*a+"H"+a+"V"+-a+"H"+3*a+"V"+a+"H"+a+"V"+3*a+"H"+-a+"V"+a+"H"+
-3*a+"Z"},diamond:function(a){a=Math.sqrt(a/(2*Rh));var b=a*Rh;return"M0,"+-a+"L"+b+",0 0,"+a+" "+-b+",0Z"},square:function(a){a=Math.sqrt(a)/2;return"M"+-a+","+-a+"L"+a+","+-a+" "+a+","+a+" "+-a+","+a+"Z"},"triangle-down":function(a){a=Math.sqrt(a/jh);var b=a*jh/2;return"M0,"+b+"L"+a+","+-b+" "+-a+","+-b+"Z"},"triangle-up":function(a){a=Math.sqrt(a/jh);var b=a*jh/2;return"M0,"+-b+"L"+a+","+b+" "+-a+","+b+"Z"}});P.svg.symbolTypes=Kf.keys();var jh=Math.sqrt(3),Rh=Math.tan(30*wa),Wb=[],qh=0,ae,$g;Wb.call=
Ma.call;Wb.empty=Ma.empty;Wb.node=Ma.node;Wb.size=Ma.size;P.transition=function(a){return arguments.length?ae?a.transition():a:hg.transition()};P.transition.prototype=Wb;Wb.select=function(a){var b=this.id,c=[],d,e,f;a=E(a);for(var g=-1,l=this.length;++g<l;){c.push(d=[]);for(var h=this[g],m=-1,q=h.length;++m<q;)(f=h[m])&&(e=a.call(f,f.__data__,m,g))?("__data__"in f&&(e.__data__=f.__data__),$d(e,m,b,f.__transition__[b]),d.push(e)):d.push(null)}return $c(c,b)};Wb.selectAll=function(a){var b=this.id,
c=[],d,e,f,g;a=A(a);for(var l=-1,h=this.length;++l<h;)for(var m=this[l],q=-1,p=m.length;++q<p;)if(d=m[q]){g=d.__transition__[b];e=a.call(d,d.__data__,q,l);c.push(d=[]);for(var r=-1,T=e.length;++r<T;)(f=e[r])&&$d(f,r,b,g),d.push(f)}return $c(c,b)};Wb.filter=function(a){var b=[],c,d,e;"function"!==typeof a&&(a=L(a));for(var f=0,g=this.length;f<g;f++){b.push(c=[]);d=this[f];for(var l=0,h=d.length;l<h;l++)(e=d[l])&&a.call(e,e.__data__,l,f)&&c.push(e)}return $c(b,this.id)};Wb.tween=function(a,b){var c=
this.id;return 2>arguments.length?this.node().__transition__[c].tween.get(a):S(this,null==b?function(b){b.__transition__[c].tween.remove(a)}:function(d){d.__transition__[c].tween.set(a,b)})};Wb.attr=function(a,b){function c(){this.removeAttribute(l)}function d(){this.removeAttributeNS(l.space,l.local)}function e(a){return null==a?c:(a+="",function(){var b=this.getAttribute(l),c;return b!==a&&(c=g(b,a),function(a){this.setAttribute(l,c(a))})})}function f(a){return null==a?d:(a+="",function(){var b=
this.getAttributeNS(l.space,l.local),c;return b!==a&&(c=g(b,a),function(a){this.setAttributeNS(l.space,l.local,c(a))})})}if(2>arguments.length){for(b in a)this.attr(b,a[b]);return this}var g="transform"==a?Nf:ud,l=P.ns.qualify(a);return eb(this,"attr."+a,b,l.local?f:e)};Wb.attrTween=function(a,b){function c(a,d){var f=b.call(this,a,d,this.getAttribute(e));return f&&function(a){this.setAttribute(e,f(a))}}function d(a,c){var f=b.call(this,a,c,this.getAttributeNS(e.space,e.local));return f&&function(a){this.setAttributeNS(e.space,
e.local,f(a))}}var e=P.ns.qualify(a);return this.tween("attr."+a,e.local?d:c)};Wb.style=function(a,b,c){function d(){this.style.removeProperty(a)}var e=arguments.length;if(3>e){if("string"!==typeof a){2>e&&(b="");for(c in a)this.style(c,a[c],b);return this}c=""}return eb(this,"style."+a,b,function(b){return null==b?d:(b+="",function(){var d=Va.getComputedStyle(this,null).getPropertyValue(a),e;return d!==b&&(e=ud(d,b),function(b){this.style.setProperty(a,e(b),c)})})})};Wb.styleTween=function(a,b,c){3>
arguments.length&&(c="");return this.tween("style."+a,function(d,e){var f=b.call(this,d,e,Va.getComputedStyle(this,null).getPropertyValue(a));return f&&function(b){this.style.setProperty(a,f(b),c)}})};Wb.text=function(a){return eb(this,"text",a,Ye)};Wb.remove=function(){return this.each("end.transition",function(){var a;2>this.__transition__.count&&(a=this.parentNode)&&a.removeChild(this)})};Wb.ease=function(a){var b=this.id;if(1>arguments.length)return this.node().__transition__[b].ease;"function"!==
typeof a&&(a=P.ease.apply(P,arguments));return S(this,function(c){c.__transition__[b].ease=a})};Wb.delay=function(a){var b=this.id;return S(this,"function"===typeof a?function(c,d,e){c.__transition__[b].delay=+a.call(c,c.__data__,d,e)}:(a=+a,function(c){c.__transition__[b].delay=a}))};Wb.duration=function(a){var b=this.id;return S(this,"function"===typeof a?function(c,d,e){c.__transition__[b].duration=Math.max(1,a.call(c,c.__data__,d,e))}:(a=Math.max(1,a),function(c){c.__transition__[b].duration=
a}))};Wb.each=function(a,b){var c=this.id;if(2>arguments.length){var d=$g,e=ae;ae=c;S(this,function(b,d,e){$g=b.__transition__[c];a.call(b,b.__data__,d,e)});$g=d;ae=e}else S(this,function(d){d=d.__transition__[c];(d.event||(d.event=P.dispatch("start","end"))).on(a,b)});return this};Wb.transition=function(){for(var a=this.id,b=++qh,c=[],d,e,f,g,l=0,h=this.length;l<h;l++){c.push(d=[]);e=this[l];for(var m=0,q=e.length;m<q;m++){if(f=e[m])g=Object.create(f.__transition__[a]),g.delay+=g.duration,$d(f,m,
b,g);d.push(f)}}return $c(c,b)};P.svg.axis=function(){function a(m){m.each(function(){var a=P.select(this),m=this.__chart__||b,q=this.__chart__=b.copy(),p=null==l?q.ticks?q.ticks.apply(q,g):q.domain():l,r=null==h?q.tickFormat?q.tickFormat.apply(q,g):Ha:h,T=a.selectAll(".tick").data(p,q),p=T.enter().insert("g",".domain").attr("class","tick").style("opacity",1E-6),n=P.transition(T.exit()).style("opacity",1E-6).remove(),t=P.transition(T).style("opacity",1),u,Z=Af(q),a=a.selectAll(".domain").data([0]),
a=(a.enter().append("path").attr("class","domain"),P.transition(a));p.append("line");p.append("text");var v=p.select("line"),w=t.select("line"),r=T.select("text").text(r),T=p.select("text"),x=t.select("text");switch(c){case "bottom":u=zb;v.attr("y2",d);T.attr("y",Math.max(d,0)+f);w.attr("x2",0).attr("y2",d);x.attr("x",0).attr("y",Math.max(d,0)+f);r.attr("dy",".71em").style("text-anchor","middle");a.attr("d","M"+Z[0]+","+e+"V0H"+Z[1]+"V"+e);break;case "top":u=zb;v.attr("y2",-d);T.attr("y",-(Math.max(d,
0)+f));w.attr("x2",0).attr("y2",-d);x.attr("x",0).attr("y",-(Math.max(d,0)+f));r.attr("dy","0em").style("text-anchor","middle");a.attr("d","M"+Z[0]+","+-e+"V0H"+Z[1]+"V"+-e);break;case "left":u=Fc;v.attr("x2",-d);T.attr("x",-(Math.max(d,0)+f));w.attr("x2",-d).attr("y2",0);x.attr("x",-(Math.max(d,0)+f)).attr("y",0);r.attr("dy",".32em").style("text-anchor","end");a.attr("d","M"+-e+","+Z[0]+"H0V"+Z[1]+"H"+-e);break;case "right":u=Fc,v.attr("x2",d),T.attr("x",Math.max(d,0)+f),w.attr("x2",d).attr("y2",
0),x.attr("x",Math.max(d,0)+f).attr("y",0),r.attr("dy",".32em").style("text-anchor","start"),a.attr("d","M"+e+","+Z[0]+"H0V"+Z[1]+"H"+e)}if(q.rangeBand)var I=q,A=I.rangeBand()/2,m=q=function(a){return I(a)+A};else m.rangeBand?m=q:n.call(u,q);p.call(u,m);t.call(u,q)})}var b=P.scale.linear(),c=Sh,d=6,e=6,f=3,g=[10],l=null,h;a.scale=function(c){if(!arguments.length)return b;b=c;return a};a.orient=function(b){if(!arguments.length)return c;c=b in hi?b+"":Sh;return a};a.ticks=function(){if(!arguments.length)return g;
g=arguments;return a};a.tickValues=function(b){if(!arguments.length)return l;l=b;return a};a.tickFormat=function(b){if(!arguments.length)return h;h=b;return a};a.tickSize=function(b){var c=arguments.length;if(!c)return d;d=+b;e=+arguments[c-1];return a};a.innerTickSize=function(b){if(!arguments.length)return d;d=+b;return a};a.outerTickSize=function(b){if(!arguments.length)return e;e=+b;return a};a.tickPadding=function(b){if(!arguments.length)return f;f=+b;return a};a.tickSubdivide=function(){return arguments.length&&
a};return a};var Sh="bottom",hi={top:1,right:1,bottom:1,left:1};P.svg.brush=function(){function a(f){f.each(function(){var f=P.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",e).on("touchstart.brush",e),h=f.selectAll(".background").data([0]);h.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");f.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor",
"move");var m=f.selectAll(".resize").data(t,Ha);m.exit().remove();m.enter().append("g").attr("class",function(a){return"resize "+a}).style("cursor",function(a){return ii[a]}).append("rect").attr("x",function(a){return/[ew]$/.test(a)?-3:null}).attr("y",function(a){return/^[ns]/.test(a)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");m.style("display",a.empty()?"none":null);f=P.transition(f);h=P.transition(h);g&&(m=Af(g),h.attr("x",m[0]).attr("width",m[1]-m[0]),c(f));l&&(m=Af(l),
h.attr("y",m[0]).attr("height",m[1]-m[0]),d(f));b(f)})}function b(a){a.selectAll(".resize").attr("transform",function(a){return"translate("+h[+/e$/.test(a)]+","+m[+/^s/.test(a)]+")"})}function c(a){a.select(".extent").attr("x",h[0]);a.selectAll(".extent,.n>rect,.s>rect").attr("width",h[1]-h[0])}function d(a){a.select(".extent").attr("y",m[0]);a.selectAll(".extent,.e>rect,.w>rect").attr("height",m[1]-m[0])}function e(){function t(){var a=P.mouse(v),e=!1;F&&(a[0]+=F[0],a[1]+=F[1]);db||(P.event.altKey?
(N||(N=[(h[0]+h[1])/2,(m[0]+m[1])/2]),z[0]=h[+(a[0]<N[0])],z[1]=m[+(a[1]<N[1])]):N=null);G&&u(a,g,0)&&(c(I),e=!0);B&&u(a,l,1)&&(d(I),e=!0);e&&(b(I),x({type:"brush",mode:db?"move":"resize"}))}function u(a,b,c){var d=Af(b);b=d[0];var e=d[1],d=z[c],f=c?m:h,g=f[1]-f[0];db&&(b-=d,e-=g+d);a=(c?n:T)?Math.max(b,Math.min(e,a[c])):a[c];db?b=(a+=d)+g:(N&&(d=Math.max(b,Math.min(e,2*N[c]-a))),d<a?(b=a,a=d):b=d);if(f[0]!=a||f[1]!=b)return c?r=null:p=null,f[0]=a,f[1]=b,!0}function Z(){t();I.style("pointer-events",
"all").selectAll(".resize").style("display",a.empty()?"none":null);P.select("body").style("cursor",null);K.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);E();x({type:"brushend"})}var v=this,w=P.select(P.event.target),x=f.of(v,arguments),I=P.select(v),A=w.datum(),G=!/^(n|s)$/.test(A)&&g,B=!/^(e|w)$/.test(A)&&l,db=w.classed("extent"),E=M(),N,z=P.mouse(v),F,K=P.select(Va).on("keydown.brush",function(){32==
P.event.keyCode&&(db||(N=null,z[0]-=h[1],z[1]-=m[1],db=2),q())}).on("keyup.brush",function(){32==P.event.keyCode&&2==db&&(z[0]+=h[1],z[1]+=m[1],db=0,q())});if(P.event.changedTouches)K.on("touchmove.brush",t).on("touchend.brush",Z);else K.on("mousemove.brush",t).on("mouseup.brush",Z);I.interrupt().selectAll("*").interrupt();if(db)z[0]=h[0]-z[0],z[1]=m[0]-z[1];else if(A){var lc=+/w$/.test(A),A=+/^n/.test(A);F=[h[1-lc]-z[0],m[1-A]-z[1]];z[0]=h[lc];z[1]=m[A]}else P.event.altKey&&(N=z.slice());I.style("pointer-events",
"none").selectAll(".resize").style("display",null);P.select("body").style("cursor",w.style("cursor"));x({type:"brushstart"});t()}var f=u(a,"brushstart","brush","brushend"),g=null,l=null,h=[0,0],m=[0,0],p,r,T=!0,n=!0,t=xh[0];a.event=function(a){a.each(function(){var a=f.of(this,arguments),b={x:h,y:m,i:p,j:r},c=this.__chart__||b;this.__chart__=b;ae?P.select(this).transition().each("start.brush",function(){p=c.i;r=c.j;h=c.x;m=c.y;a({type:"brushstart"})}).tween("brush:brush",function(){var c=te(h,b.x),
d=te(m,b.y);p=r=null;return function(e){h=b.x=c(e);m=b.y=d(e);a({type:"brush",mode:"resize"})}}).each("end.brush",function(){p=b.i;r=b.j;a({type:"brush",mode:"resize"});a({type:"brushend"})}):(a({type:"brushstart"}),a({type:"brush",mode:"resize"}),a({type:"brushend"}))})};a.x=function(b){if(!arguments.length)return g;g=b;t=xh[!g<<1|!l];return a};a.y=function(b){if(!arguments.length)return l;l=b;t=xh[!g<<1|!l];return a};a.clamp=function(b){if(!arguments.length)return g&&l?[T,n]:g?T:l?n:null;g&&l?(T=
!!b[0],n=!!b[1]):g?T=!!b:l&&(n=!!b);return a};a.extent=function(b){var c,d,e,f,q;if(!arguments.length)return g&&(p?(c=p[0],d=p[1]):(c=h[0],d=h[1],g.invert&&(c=g.invert(c),d=g.invert(d)),d<c&&(q=c,c=d,d=q))),l&&(r?(e=r[0],f=r[1]):(e=m[0],f=m[1],l.invert&&(e=l.invert(e),f=l.invert(f)),f<e&&(q=e,e=f,f=q))),g&&l?[[c,e],[d,f]]:g?[c,d]:l&&[e,f];g&&(c=b[0],d=b[1],l&&(c=c[0],d=d[0]),p=[c,d],g.invert&&(c=g(c),d=g(d)),d<c&&(q=c,c=d,d=q),c!=h[0]||d!=h[1])&&(h=[c,d]);l&&(e=b[0],f=b[1],g&&(e=e[1],f=f[1]),r=[e,
f],l.invert&&(e=l(e),f=l(f)),f<e&&(q=e,e=f,f=q),e!=m[0]||f!=m[1])&&(m=[e,f]);return a};a.clear=function(){a.empty()||(h=[0,0],m=[0,0],p=r=null);return a};a.empty=function(){return!!g&&h[0]==h[1]||!!l&&m[0]==m[1]};return P.rebind(a,f,"on")};var ii={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},xh=["n e s w nw ne se sw".split(" "),["e","w"],["n","s"],[]],yh=fa.format=Jh.timeFormat,Th=yh.utc,Uh=Th("%Y-%m-%dT%H:%M:%S.%LZ");
yh.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?fg:Uh;fg.parse=function(a){a=new Date(a);return isNaN(a)?null:a};fg.toString=Uh.toString;fa.second=Aa(function(a){return new Sb(1E3*Math.floor(a/1E3))},function(a,b){a.setTime(a.getTime()+1E3*Math.floor(b))},function(a){return a.getSeconds()});fa.seconds=fa.second.range;fa.seconds.utc=fa.second.utc.range;fa.minute=Aa(function(a){return new Sb(6E4*Math.floor(a/6E4))},function(a,b){a.setTime(a.getTime()+6E4*Math.floor(b))},function(a){return a.getMinutes()});
fa.minutes=fa.minute.range;fa.minutes.utc=fa.minute.utc.range;fa.hour=Aa(function(a){var b=a.getTimezoneOffset()/60;return new Sb(36E5*(Math.floor(a/36E5-b)+b))},function(a,b){a.setTime(a.getTime()+36E5*Math.floor(b))},function(a){return a.getHours()});fa.hours=fa.hour.range;fa.hours.utc=fa.hour.utc.range;fa.month=Aa(function(a){a=fa.day(a);a.setDate(1);return a},function(a,b){a.setMonth(a.getMonth()+b)},function(a){return a.getMonth()});fa.months=fa.month.range;fa.months.utc=fa.month.utc.range;var Eg=
[1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,2592E6,7776E6,31536E6],zh=[[fa.second,1],[fa.second,5],[fa.second,15],[fa.second,30],[fa.minute,1],[fa.minute,5],[fa.minute,15],[fa.minute,30],[fa.hour,1],[fa.hour,3],[fa.hour,6],[fa.hour,12],[fa.day,1],[fa.day,2],[fa.week,1],[fa.month,1],[fa.month,3],[fa.year,1]],ji=yh.multi([[".%L",function(a){return a.getMilliseconds()}],[":%S",function(a){return a.getSeconds()}],["%I:%M",function(a){return a.getMinutes()}],["%I %p",
function(a){return a.getHours()}],["%a %d",function(a){return a.getDay()&&1!=a.getDate()}],["%b %d",function(a){return 1!=a.getDate()}],["%B",function(a){return a.getMonth()}],["%Y",pc]]),Ih={range:function(a,b,c){return P.range(+a,+b,c).map(Jb)},floor:Ha,ceil:Ha};zh.year=fa.year;fa.scale=function(){return re(P.scale.linear(),zh,ji)};var Ah=zh.map(function(a){return[a[0].utc,a[1]]}),ki=Th.multi([[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%I:%M",
function(a){return a.getUTCMinutes()}],["%I %p",function(a){return a.getUTCHours()}],["%a %d",function(a){return a.getUTCDay()&&1!=a.getUTCDate()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],["%Y",pc]]);Ah.year=fa.year.utc;fa.scale.utc=function(){return re(P.scale.linear(),Ah,ki)};P.text=sb(function(a){return a.responseText});P.json=function(a,b){return Ta(a,"application/json",Zg,b)};P.html=function(a,b){return Ta(a,"text/html",Ze,b)};P.xml=sb(function(a){return a.responseXML});
"function"===typeof define&&define.amd?define(P):"object"===typeof module&&module.exports?module.exports=P:this.d3=P}();function str_repeat(a,b){for(var e=[];0<b;e[--b]=a);return e.join("")}
function sprintf(){for(var a=0,b,e=arguments[a++],c=[],d,f,n;e;){if(d=/^[^\x25]+/.exec(e))c.push(d[0]);else if(d=/^\x25{2}/.exec(e))c.push("%");else if(d=/^\x25(?:(\d+)\$)?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(e)){if(null==(b=arguments[d[1]||a++])||void 0==b)throw"Too few arguments.";if(/[^s]/.test(d[7])&&"number"!=typeof b)throw"Expecting number but found "+typeof b;switch(d[7]){case "b":b=b.toString(2);break;case "c":b=String.fromCharCode(b);break;case "d":b=parseInt(b);break;
case "e":b=d[6]?b.toExponential(d[6]):b.toExponential();break;case "f":b=d[6]?parseFloat(b).toFixed(d[6]):parseFloat(b);break;case "o":b=b.toString(8);break;case "s":b=(b=String(b))&&d[6]?b.substring(0,d[6]):b;break;case "u":b=Math.abs(b);break;case "x":b=b.toString(16);break;case "X":b=b.toString(16).toUpperCase()}b=/[def]/.test(d[7])&&d[2]&&0<=b?"+"+b:b;f=d[3]?"0"==d[3]?"0":d[3].charAt(1):" ";n=d[5]-String(b).length-0;f=d[5]?str_repeat(f,n):"";c.push(""+(d[4]?b+f:f+b))}else throw"Huh ?!";e=e.substring(d[0].length)}return c.join("")}
(function(a,b){var e,c,d,f,n,h,g,m,p,r,t,l,q,w,u,v,E,A,K,F,z,B,H,G;e=function(a){return new e.prototype.init(a)};"undefined"!==typeof require&&"undefined"!==typeof exports&&"undefined"!==typeof module?module.exports=e:a.Globalize=e;e.cultures={};e.prototype={constructor:e,init:function(a){this.cultures=e.cultures;this.cultureSelector=a;return this}};e.prototype.init.prototype=e.prototype;e.cultures["default"]={name:"en",englishName:"English",nativeName:"English",isRTL:!1,language:"en",numberFormat:{pattern:["-n"],
decimals:2,",":",",".":".",groupSizes:[3],"+":"+","-":"-",NaN:"NaN",negativeInfinity:"-Infinity",positiveInfinity:"Infinity",percent:{pattern:["-n %","n %"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"%"},currency:{pattern:["($n)","$n"],decimals:2,groupSizes:[3],",":",",".":".",symbol:"$"}},calendars:{standard:{name:"Gregorian_USEnglish","/":"/",":":":",firstDay:0,days:{names:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),namesAbbr:"Sun Mon Tue Wed Thu Fri Sat".split(" "),
namesShort:"Su Mo Tu We Th Fr Sa".split(" ")},months:{names:"January February March April May June July August September October November December ".split(" "),namesAbbr:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec ".split(" ")},AM:["AM","am","AM"],PM:["PM","pm","PM"],eras:[{name:"A.D.",start:null,offset:0}],twoDigitYearMax:2029,patterns:{d:"M/d/yyyy",D:"dddd, MMMM dd, yyyy",t:"h:mm tt",T:"h:mm:ss tt",f:"dddd, MMMM dd, yyyy h:mm tt",F:"dddd, MMMM dd, yyyy h:mm:ss tt",M:"MMMM dd",Y:"yyyy MMMM",
S:"yyyy'-'MM'-'dd'T'HH':'mm':'ss"}}},messages:{}};e.cultures["default"].calendar=e.cultures["default"].calendars.standard;e.cultures.en=e.cultures["default"];e.cultureSelector="en";c=/^0x[a-f0-9]+$/i;d=/^[+\-]?infinity$/i;f=/^[+\-]?\d*\.?\d*(e[+\-]?\d+)?$/;n=/^\s+|\s+$/g;h=function(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0,d=a.length;c<d;c++)if(a[c]===b)return c;return-1};g=function(a,b){return a.substr(a.length-b.length)===b};m=function(){var a,c,d,e,f,g=arguments[0]||{},l=1,h=arguments.length,
q=!1;"boolean"===typeof g&&(q=g,g=arguments[1]||{},l=2);for("object"===typeof g||r(g)||(g={});l<h;l++)if(null!=(a=arguments[l]))for(c in a)d=g[c],e=a[c],g!==e&&(q&&e&&(t(e)||(f=p(e)))?(f?(f=!1,d=d&&p(d)?d:[]):d=d&&t(d)?d:{},g[c]=m(q,d,e)):e!==b&&(g[c]=e));return g};p=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)};r=function(a){return"[object Function]"===Object.prototype.toString.call(a)};t=function(a){return"[object Object]"===Object.prototype.toString.call(a)};
l=function(a,b){return 0===a.indexOf(b)};q=function(a){return(a+"").replace(n,"")};w=function(a){return isNaN(a)?NaN:Math[0>a?"ceil":"floor"](a)};u=function(a,b,c){var d;for(d=a.length;d<b;d+=1)a=c?"0"+a:a+"0";return a};v=function(a,b){for(var c=0,d=!1,e=0,f=a.length;e<f;e++){var g=a.charAt(e);switch(g){case "'":d?b.push("'"):c++;d=!1;break;case "\\":d&&b.push("\\");d=!d;break;default:b.push(g),d=!1}}return c};E=function(a,b){b=b||"F";var c;c=a.patterns;var d=b.length;if(1===d){c=c[b];if(!c)throw"Invalid date format string '"+
b+"'.";b=c}else 2===d&&"%"===b.charAt(0)&&(b=b.charAt(1));return b};A=function(a,b,c){function d(a,b){var c;c=a+"";return 1<b&&c.length<b?(c=p[b-2]+c,c.substr(c.length-b,b)):c}function e(){if(r||n)return r;r=t.test(b);n=!0;return r}function f(a,b){if(G)return G[b];switch(b){case 0:return a.getFullYear();case 1:return a.getMonth();case 2:return a.getDate();default:throw"Invalid part value "+b;}}var g=c.calendar,l=g.convert;if(!b||!b.length||"i"===b){if(c&&c.name.length)if(l)c=A(a,g.patterns.F,c);else{c=
new Date(a.getTime());var h=z(a,g.eras);c.setFullYear(B(a,g,h));c=c.toLocaleString()}else c=a.toString();return c}var h=g.eras,m="s"===b;b=E(g,b);c=[];var q,p=["0","00","000"],r,n,t=/([^d]|^)(d|dd)([^d]|$)/g,u=0,w=F(),G;for(!m&&l&&(G=l.fromGregorian(a));;){q=w.lastIndex;l=w.exec(b);q=b.slice(q,l?l.index:b.length);u+=v(q,c);if(!l)break;if(u%2)c.push(l[0]);else switch(q=l[0],l=q.length,q){case "ddd":case "dddd":c.push((3===l?g.days.namesAbbr:g.days.names)[a.getDay()]);break;case "d":case "dd":r=!0;
c.push(d(f(a,2),l));break;case "MMM":case "MMMM":q=f(a,1);c.push(g.monthsGenitive&&e()?g.monthsGenitive[3===l?"namesAbbr":"names"][q]:g.months[3===l?"namesAbbr":"names"][q]);break;case "M":case "MM":c.push(d(f(a,1)+1,l));break;case "y":case "yy":case "yyyy":q=G?G[0]:B(a,g,z(a,h),m);4>l&&(q%=100);c.push(d(q,l));break;case "h":case "hh":q=a.getHours()%12;0===q&&(q=12);c.push(d(q,l));break;case "H":case "HH":c.push(d(a.getHours(),l));break;case "m":case "mm":c.push(d(a.getMinutes(),l));break;case "s":case "ss":c.push(d(a.getSeconds(),
l));break;case "t":case "tt":q=12>a.getHours()?g.AM?g.AM[0]:" ":g.PM?g.PM[0]:" ";c.push(1===l?q.charAt(0):q);break;case "f":case "ff":case "fff":c.push(d(a.getMilliseconds(),3).substr(0,l));break;case "z":case "zz":q=a.getTimezoneOffset()/60;c.push((0>=q?"+":"-")+d(Math.floor(Math.abs(q)),l));break;case "zzz":q=a.getTimezoneOffset()/60;c.push((0>=q?"+":"-")+d(Math.floor(Math.abs(q)),2)+":"+d(Math.abs(a.getTimezoneOffset()%60),2));break;case "g":case "gg":g.eras&&c.push(g.eras[z(a,h)].name);break;
case "/":c.push(g["/"]);break;default:throw"Invalid date format pattern '"+q+"'.";}}return c.join("")};(function(){var a;a=function(a,b,c){var d=c.groupSizes,e=d[0],f=1,g=Math.pow(10,b),g=Math.round(a*g)/g;isFinite(g)||(g=a);a=g+"";var g="",g=a.split(/e/i),l=1<g.length?parseInt(g[1],10):0;a=g[0];g=a.split(".");a=g[0];g=1<g.length?g[1]:"";0<l?(g=u(g,l,!1),a+=g.slice(0,l),g=g.substr(l)):0>l&&(l=-l,a=u(a,l+1,!0),g=a.slice(-l,a.length)+g,a=a.slice(0,-l));g=0<b?c["."]+(g.length>b?g.slice(0,b):u(g,b)):
"";b=a.length-1;c=c[","];for(l="";0<=b;){if(0===e||e>b)return a.slice(0,b+1)+(l.length?c+l+g:g);l=a.slice(b-e+1,b+1)+(l.length?c+l:"");b-=e;f<d.length&&(e=d[f],f++)}return a.slice(0,b+1)+c+l+g};K=function(b,c,d){if(!isFinite(b))return Infinity===b?d.numberFormat.positiveInfinity:-Infinity===b?d.numberFormat.negativeInfinity:d.numberFormat.NaN;if(!c||"i"===c)return d.name.length?b.toLocaleString():b.toString();c=c||"D";d=d.numberFormat;var e=Math.abs(b),f=-1;1<c.length&&(f=parseInt(c.slice(1),10));
var g=c.charAt(0).toUpperCase(),l;switch(g){case "D":c="n";e=w(e);-1!==f&&(e=u(""+e,f,!0));0>b&&(e="-"+e);break;case "N":l=d;case "C":l=l||d.currency;case "P":l=l||d.percent;c=0>b?l.pattern[0]:l.pattern[1]||"n";-1===f&&(f=l.decimals);e=a(e*("P"===g?100:1),f,l);break;default:throw"Bad number format specifier: "+g;}b=/n|\$|-|%/g;for(l="";;){f=b.lastIndex;g=b.exec(c);l+=c.slice(f,g?g.index:c.length);if(!g)break;switch(g[0]){case "n":l+=e;break;case "$":l+=d.currency.symbol;break;case "-":/[1-9]/.test(e)&&
(l+=d["-"]);break;case "%":l+=d.percent.symbol}}return l}})();F=function(){return/\/|dddd|ddd|dd|d|MMMM|MMM|MM|M|yyyy|yy|y|hh|h|HH|H|mm|m|ss|s|tt|t|fff|ff|f|zzz|zz|z|gg|g/g};z=function(a,b){if(!b)return 0;for(var c,d=a.getTime(),e=0,f=b.length;e<f;e++)if(c=b[e].start,null===c||d>=c)return e;return 0};B=function(a,b,c,d){a=a.getFullYear();!d&&b.eras&&(a-=b.eras[c].offset);return a};(function(){var a,b,c,d,e,f,g;a=function(a,b){if(100>b){var c=new Date,d=z(c),c=B(c,a,d),d=a.twoDigitYearMax,d="string"===
typeof d?(new Date).getFullYear()%100+parseInt(d,10):d;b+=c-c%100;b>d&&(b-=100)}return b};b=function(a,b,c){var d=a.days,e=a._upperDays;e||(a._upperDays=e=[g(d.names),g(d.namesAbbr),g(d.namesShort)]);b=f(b);c?(a=h(e[1],b),-1===a&&(a=h(e[2],b))):a=h(e[0],b);return a};c=function(a,b,c){var d=a.months,e=a.monthsGenitive||a.months,l=a._upperMonths,m=a._upperMonthsGen;l||(a._upperMonths=l=[g(d.names),g(d.namesAbbr)],a._upperMonthsGen=m=[g(e.names),g(e.namesAbbr)]);b=f(b);a=h(c?l[1]:l[0],b);0>a&&(a=h(c?
m[1]:m[0],b));return a};d=function(a,b){var c=a._parseRegExp;if(c){var d=c[b];if(d)return d}else a._parseRegExp=c={};for(var d=E(a,b).replace(/([\^\$\.\*\+\?\|\[\]\(\)\{\}])/g,"\\\\$1"),e=["^"],f=[],g=0,l=0,h=F(),m;null!==(m=h.exec(d));){var q=d.slice(g,m.index),g=h.lastIndex,l=l+v(q,e);if(l%2)e.push(m[0]);else{var q=m[0],p=q.length;switch(q){case "dddd":case "ddd":case "MMMM":case "MMM":case "gg":case "g":q="(\\D+)";break;case "tt":case "t":q="(\\D*)";break;case "yyyy":case "fff":case "ff":case "f":q=
"(\\d{"+p+"})";break;case "dd":case "d":case "MM":case "M":case "yy":case "y":case "HH":case "H":case "hh":case "h":case "mm":case "m":case "ss":case "s":q="(\\d\\d?)";break;case "zzz":q="([+-]?\\d\\d?:\\d{2})";break;case "zz":case "z":q="([+-]?\\d\\d?)";break;case "/":q="(\\/)";break;default:throw"Invalid date format pattern '"+q+"'.";}q&&e.push(q);f.push(m[0])}}v(d.slice(g),e);e.push("$");d={regExp:e.join("").replace(/\s+/g,"\\s+"),groups:f};return c[b]=d};e=function(a,b,c){return a<b||a>c};f=function(a){return a.split("\u00a0").join(" ").toUpperCase()};
g=function(a){for(var b=[],c=0,d=a.length;c<d;c++)b[c]=f(a[c]);return b};H=function(f,g,h){f=q(f);h=h.calendar;g=d(h,g);var m=(new RegExp(g.regExp)).exec(f);if(null===m)return null;var p=g.groups,r=g=f=null,n=null,t=null,u=0,v,w=0,A=0,G=0;v=null;for(var B=!1,E=0,z=p.length;E<z;E++){var F=m[E+1];if(F){var K=p[E],J=K.length,D=parseInt(F,10);switch(K){case "dd":case "d":n=D;if(e(n,1,31))return null;break;case "MMM":case "MMMM":r=c(h,F,3===J);if(e(r,0,11))return null;break;case "M":case "MM":r=D-1;if(e(r,
0,11))return null;break;case "y":case "yy":case "yyyy":g=4>J?a(h,D):D;if(e(g,0,9999))return null;break;case "h":case "hh":u=D;12===u&&(u=0);if(e(u,0,11))return null;break;case "H":case "HH":u=D;if(e(u,0,23))return null;break;case "m":case "mm":w=D;if(e(w,0,59))return null;break;case "s":case "ss":A=D;if(e(A,0,59))return null;break;case "tt":case "t":B=h.PM&&(F===h.PM[0]||F===h.PM[1]||F===h.PM[2]);if(!B&&(!h.AM||F!==h.AM[0]&&F!==h.AM[1]&&F!==h.AM[2]))return null;break;case "f":case "ff":case "fff":G=
D*Math.pow(10,3-J);if(e(G,0,999))return null;break;case "ddd":case "dddd":t=b(h,F,3===J);if(e(t,0,6))return null;break;case "zzz":K=F.split(/:/);if(2!==K.length)return null;v=parseInt(K[0],10);if(e(v,-12,13))return null;K=parseInt(K[1],10);if(e(K,0,59))return null;v=60*v+(l(F,"-")?-K:K);break;case "z":case "zz":v=D;if(e(v,-12,13))return null;v*=60;break;case "g":case "gg":if(!F||!h.eras)return null;F=q(F.toLowerCase());K=0;for(J=h.eras.length;K<J;K++)if(F===h.eras[K].name.toLowerCase()){f=K;break}if(null===
f)return null}}}m=new Date;p=(E=h.convert)?E.fromGregorian(m)[0]:m.getFullYear();null===g?g=p:h.eras&&(g+=h.eras[f||0].offset);null===r&&(r=0);null===n&&(n=1);if(E){if(m=E.toGregorian(g,r,n),null===m)return null}else if(m.setFullYear(g,r,n),m.getDate()!==n||null!==t&&m.getDay()!==t)return null;B&&12>u&&(u+=12);m.setHours(u,w,A,G);null!==v&&(h=m.getMinutes()-(v+m.getTimezoneOffset()),m.setHours(m.getHours()+parseInt(h/60,10),h%60));return m}})();G=function(a,b,c){var d=b["-"];b=b["+"];var e;switch(c){case "n -":d=
" "+d,b=" "+b;case "n-":g(a,d)?e=["-",a.substr(0,a.length-d.length)]:g(a,b)&&(e=["+",a.substr(0,a.length-b.length)]);break;case "- n":d+=" ",b+=" ";case "-n":l(a,d)?e=["-",a.substr(d.length)]:l(a,b)&&(e=["+",a.substr(b.length)]);break;case "(n)":l(a,"(")&&g(a,")")&&(e=["-",a.substr(1,a.length-2)])}return e||["",a]};e.prototype.findClosestCulture=function(a){return e.findClosestCulture.call(this,a)};e.prototype.format=function(a,b,c){return e.format.call(this,a,b,c)};e.prototype.localize=function(a,
b){return e.localize.call(this,a,b)};e.prototype.parseInt=function(a,b,c){return e.parseInt.call(this,a,b,c)};e.prototype.parseFloat=function(a,b,c){return e.parseFloat.call(this,a,b,c)};e.prototype.culture=function(a){return e.culture.call(this,a)};e.addCultureInfo=function(a,b,c){var d={},e=!1;"string"!==typeof a?(c=a,a=this.culture().name,d=this.cultures[a]):"string"!==typeof b?(c=b,e=null==this.cultures[a],d=this.cultures[a]||this.cultures["default"]):(e=!0,d=this.cultures[b]);this.cultures[a]=
m(!0,{},d,c);e&&(this.cultures[a].calendar=this.cultures[a].calendars.standard)};e.findClosestCulture=function(a){var b;if(!a)return this.findClosestCulture(this.cultureSelector)||this.cultures["default"];"string"===typeof a&&(a=a.split(","));if(p(a)){var c,d=this.cultures,e=a,f,g=e.length,l=[];for(f=0;f<g;f++)a=q(e[f]),a=a.split(";"),c=q(a[0]),1===a.length?a=1:(a=q(a[1]),0===a.indexOf("q=")?(a=a.substr(2),a=parseFloat(a),a=isNaN(a)?0:a):a=1),l.push({lang:c,pri:a});l.sort(function(a,b){return a.pri<
b.pri?1:a.pri>b.pri?-1:0});for(f=0;f<g;f++)if(c=l[f].lang,b=d[c])return b;for(f=0;f<g;f++){c=l[f].lang;do{e=c.lastIndexOf("-");if(-1===e)break;c=c.substr(0,e);if(b=d[c])return b}while(1)}for(f=0;f<g;f++){c=l[f].lang;for(var h in d)if(e=d[h],e.language==c)return e}}else if("object"===typeof a)return a;return b||null};e.format=function(a,b,c){c=this.findClosestCulture(c);a instanceof Date?a=A(a,b,c):"number"===typeof a&&(a=K(a,b,c));return a};e.localize=function(a,b){return this.findClosestCulture(b).messages[a]||
this.cultures["default"].messages[a]};e.parseDate=function(a,b,c){c=this.findClosestCulture(c);var d,e;if(b){if("string"===typeof b&&(b=[b]),b.length){e=0;for(var f=b.length;e<f;e++){var g=b[e];if(g&&(d=H(a,g,c)))break}}}else for(e in b=c.calendar.patterns,b)if(d=H(a,b[e],c))break;return d||null};e.parseInt=function(a,b,c){return w(e.parseFloat(a,b,c))};e.parseFloat=function(a,b,e){"number"!==typeof b&&(e=b,b=10);var g=this.findClosestCulture(e);e=NaN;var l=g.numberFormat;-1<a.indexOf(g.numberFormat.currency.symbol)&&
(a=a.replace(g.numberFormat.currency.symbol,""),a=a.replace(g.numberFormat.currency["."],g.numberFormat["."]));-1<a.indexOf(g.numberFormat.percent.symbol)&&(a=a.replace(g.numberFormat.percent.symbol,""));a=a.replace(/ /g,"");if(d.test(a))e=parseFloat(a);else if(!b&&c.test(a))e=parseInt(a,16);else{g=G(a,l,l.pattern[0]);b=g[0];g=g[1];""===b&&"(n)"!==l.pattern[0]&&(g=G(a,l,"(n)"),b=g[0],g=g[1]);""===b&&"-n"!==l.pattern[0]&&(g=G(a,l,"-n"),b=g[0],g=g[1]);b=b||"+";var h;a=g.indexOf("e");0>a&&(a=g.indexOf("E"));
0>a?(h=g,a=null):(h=g.substr(0,a),a=g.substr(a+1));var m=l["."],q=h.indexOf(m);0>q?(g=h,h=null):(g=h.substr(0,q),h=h.substr(q+m.length));m=l[","];g=g.split(m).join("");q=m.replace(/\u00A0/g," ");m!==q&&(g=g.split(q).join(""));b+=g;null!==h&&(b+="."+h);null!==a&&(l=G(a,l,"-n"),b+="e"+(l[0]||"+")+l[1]);f.test(b)&&(e=parseFloat(b))}return e};e.culture=function(a){"undefined"!==typeof a&&(this.cultureSelector=a);return this.findClosestCulture(a)||this.cultures["default"]}})(this);
Array.indexOf||(Array.prototype.indexOf=function(a,b){for(var e=b||0;e<this.length;e++)if(this[e]===a)return e;return-1});
var Parser=function(a){function b(a){function b(){}b.prototype=a;return new b}function e(a,b,c,d){this.type_=a;this.index_=b||0;this.prio_=c||0;this.number_=void 0!==d&&null!==d?d:0;this.toString=function(){switch(this.type_){case 0:return this.number_;case 1:case 2:case 3:return this.index_;case 4:return"CALL";default:return"Invalid Token"}}}function c(a,b,c,d){this.tokens=a;this.ops1=b;this.ops2=c;this.functions=d}function d(a){return"string"===typeof a?(v.lastIndex=0,v.test(a)?"'"+a.replace(v,
function(a){var b=E[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+"'":"'"+a+"'"):a}function f(a,b){return Number(a)+Number(b)}function n(a,b){return a-b}function h(a,b){return a*b}function g(a,b){return a/b}function m(a,b){return a%b}function p(a,b){return""+a+b}function r(a){return-a}function t(a){return Math.random()*(a||1)}function l(a){for(var b=a=Math.floor(a);1<a;)b*=--a;return b}function q(a,b){return Math.sqrt(a*a+b*b)}function w(a,b){if("[object Array]"!=
Object.prototype.toString.call(a))return[a,b];a=a.slice();a.push(b);return a}function u(){this.success=!1;this.expression=this.errormsg="";this.tmpprio=this.tokenindex=this.tokenprio=this.tokennumber=this.pos=0;this.ops1={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sqrt:Math.sqrt,log:Math.log,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,"-":r,exp:Math.exp};this.ops2={"+":f,"-":n,"*":h,"/":g,"%":m,"^":Math.pow,",":w,"||":p};this.functions={random:t,
fac:l,min:Math.min,max:Math.max,pyt:q,pow:Math.pow,atan2:Math.atan2};this.consts={E:Math.E,PI:Math.PI}}var v=/[\\\'\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,E={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"};c.prototype={simplify:function(a){a=a||{};for(var d=[],f=[],g,l,h,m=this.tokens.length,q=0,q=0;q<m;q++)if(h=this.tokens[q],g=h.type_,0===g)d.push(h);else if(3===g&&h.index_ in a)h=new e(0,
0,0,a[h.index_]),d.push(h);else if(2===g&&1<d.length)l=d.pop(),g=d.pop(),h=this.ops2[h.index_],h=new e(0,0,0,h(g.number_,l.number_)),d.push(h);else if(1===g&&0<d.length)g=d.pop(),h=this.ops1[h.index_],h=new e(0,0,0,h(g.number_)),d.push(h);else{for(;0<d.length;)f.push(d.shift());f.push(h)}for(;0<d.length;)f.push(d.shift());return new c(f,b(this.ops1),b(this.ops2),b(this.functions))},substitute:function(a,d){d instanceof c||(d=(new u).parse(String(d)));for(var f=[],g=this.tokens.length,l,h=0,h=0;h<
g;h++)if(l=this.tokens[h],3===l.type_&&l.index_===a)for(l=0;l<d.tokens.length;l++){var m=d.tokens[l],m=new e(m.type_,m.index_,m.prio_,m.number_);f.push(m)}else f.push(l);return new c(f,b(this.ops1),b(this.ops2),b(this.functions))},evaluate:function(a){a=a||{};for(var b=[],c,d,e,f=this.tokens.length,g=0,g=0;g<f;g++)if(e=this.tokens[g],c=e.type_,0===c)b.push(e.number_);else if(2===c)d=b.pop(),c=b.pop(),e=this.ops2[e.index_],b.push(e(c,d));else if(3===c)if(e.index_ in a)b.push(a[e.index_]);else if(e.index_ in
this.functions)b.push(this.functions[e.index_]);else throw Error("undefined variable: "+e.index_);else if(1===c)c=b.pop(),e=this.ops1[e.index_],b.push(e(c));else if(4===c)if(c=b.pop(),e=b.pop(),e.apply&&e.call)"[object Array]"==Object.prototype.toString.call(c)?b.push(e.apply(void 0,c)):b.push(e.call(void 0,c));else throw Error(e+" is not a function");else throw Error("invalid Expression");if(1<b.length)throw Error("invalid Expression (parity)");return b[0]},toString:function(a){for(var b=[],c,e,
f,g=this.tokens.length,l=0,l=0;l<g;l++)if(f=this.tokens[l],c=f.type_,0===c)b.push(d(f.number_));else if(2===c)e=b.pop(),c=b.pop(),f=f.index_,a&&"^"==f?b.push("Math.pow("+c+","+e+")"):b.push("("+c+f+e+")");else if(3===c)b.push(f.index_);else if(1===c)c=b.pop(),f=f.index_,"-"===f?b.push("("+f+c+")"):b.push(f+"("+c+")");else if(4===c)c=b.pop(),f=b.pop(),b.push(f+"("+c+")");else throw Error("invalid Expression");if(1<b.length)throw Error("invalid Expression (parity)");return b[0]},variables:function(){for(var a=
this.tokens.length,b=[],c=0;c<a;c++){var d=this.tokens[c];3===d.type_&&-1==b.indexOf(d.index_)&&b.push(d.index_)}return b},toJSFunction:function(a,b){return new Function(a,"with(Parser.values) { return "+this.simplify(b).toString(!0)+"; }")}};u.parse=function(a){return(new u).parse(a)};u.evaluate=function(a,b){return u.parse(a).evaluate(b)};u.Expression=c;u.values={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sqrt:Math.sqrt,log:Math.log,abs:Math.abs,ceil:Math.ceil,
floor:Math.floor,round:Math.round,random:t,fac:l,exp:Math.exp,min:Math.min,max:Math.max,pyt:q,pow:Math.pow,atan2:Math.atan2,E:Math.E,PI:Math.PI};u.prototype={parse:function(a){this.errormsg="";this.success=!0;var d=[],f=[];this.tmpprio=0;var g=77,l=0;this.expression=a;for(this.pos=0;this.pos<this.expression.length;)this.isOperator()?this.isSign()&&g&64?(this.isNegativeSign()&&(this.tokenprio=2,this.tokenindex="-",l++,this.addfunc(f,d,1)),g=77):this.isComment()||(0===(g&2)&&this.error_parsing(this.pos,
"unexpected operator"),l+=2,this.addfunc(f,d,2),g=77):this.isNumber()?(0===(g&1)&&this.error_parsing(this.pos,"unexpected number"),a=new e(0,0,0,this.tokennumber),f.push(a),g=50):this.isString()?(0===(g&1)&&this.error_parsing(this.pos,"unexpected string"),a=new e(0,0,0,this.tokennumber),f.push(a),g=50):this.isLeftParenth()?(0===(g&8)&&this.error_parsing(this.pos,'unexpected "("'),g&128&&(l+=2,this.tokenprio=-2,this.tokenindex=-1,this.addfunc(f,d,4)),g=333):this.isRightParenth()?(g&256?(a=new e(0,
0,0,[]),f.push(a)):0===(g&16)&&this.error_parsing(this.pos,'unexpected ")"'),g=186):this.isComma()?(0===(g&32)&&this.error_parsing(this.pos,'unexpected ","'),this.addfunc(f,d,2),l+=2,g=77):this.isConst()?(0===(g&1)&&this.error_parsing(this.pos,"unexpected constant"),a=new e(0,0,0,this.tokennumber),f.push(a),g=50):this.isOp2()?(0===(g&4)&&this.error_parsing(this.pos,"unexpected function"),this.addfunc(f,d,2),l+=2,g=8):this.isOp1()?(0===(g&4)&&this.error_parsing(this.pos,"unexpected function"),this.addfunc(f,
d,1),l++,g=8):this.isVar()?(0===(g&1)&&this.error_parsing(this.pos,"unexpected variable"),a=new e(3,this.tokenindex,0,0),f.push(a),g=186):this.isWhite()||(""===this.errormsg?this.error_parsing(this.pos,"unknown character"):this.error_parsing(this.pos,this.errormsg));for((0>this.tmpprio||10<=this.tmpprio)&&this.error_parsing(this.pos,'unmatched "()"');0<d.length;)a=d.pop(),f.push(a);l+1!==f.length&&this.error_parsing(this.pos,"parity");return new c(f,b(this.ops1),b(this.ops2),b(this.functions))},evaluate:function(a,
b){return this.parse(a).evaluate(b)},error_parsing:function(a,b){this.success=!1;this.errormsg="parse error [column "+a+"]: "+b;throw Error(this.errormsg);},addfunc:function(a,b,c){for(c=new e(c,this.tokenindex,this.tokenprio+this.tmpprio,0);0<b.length;)if(c.prio_<=b[b.length-1].prio_)a.push(b.pop());else break;b.push(c)},isNumber:function(){for(var a=!1,b="";this.pos<this.expression.length;){var c=this.expression.charCodeAt(this.pos);if(48<=c&&57>=c||46===c)b+=this.expression.charAt(this.pos),this.pos++,
this.tokennumber=parseFloat(b),a=!0;else break}return a},unescape:function(a,b){for(var c=[],d=!1,e=0;e<a.length;e++){var f=a.charAt(e);if(d){switch(f){case "'":c.push("'");break;case "\\":c.push("\\");break;case "/":c.push("/");break;case "b":c.push("\b");break;case "f":c.push("\f");break;case "n":c.push("\n");break;case "r":c.push("\r");break;case "t":c.push("\t");break;case "u":d=parseInt(a.substring(e+1,e+5),16);c.push(String.fromCharCode(d));e+=4;break;default:throw this.error_parsing(b+e,"Illegal escape sequence: '\\"+
f+"'");}d=!1}else"\\"==f?d=!0:c.push(f)}return c.join("")},isString:function(){var a=!1,b="",c=this.pos;if(this.pos<this.expression.length&&"'"==this.expression.charAt(this.pos))for(this.pos++;this.pos<this.expression.length;)if("'"!=this.expression.charAt(this.pos)||"\\"==b.slice(-1))b+=this.expression.charAt(this.pos),this.pos++;else{this.pos++;this.tokennumber=this.unescape(b,c);a=!0;break}return a},isConst:function(){var a,b;for(b in this.consts){var c=b.length;a=this.expression.substr(this.pos,
c);if(b===a)return this.tokennumber=this.consts[b],this.pos+=c,!0}return!1},isOperator:function(){var a=this.expression.charCodeAt(this.pos);if(43===a)this.tokenprio=0,this.tokenindex="+";else if(45===a)this.tokenprio=0,this.tokenindex="-";else if(124===a)if(124===this.expression.charCodeAt(this.pos+1))this.pos++,this.tokenprio=0,this.tokenindex="||";else return!1;else if(42===a)this.tokenprio=1,this.tokenindex="*";else if(47===a)this.tokenprio=2,this.tokenindex="/";else if(37===a)this.tokenprio=
2,this.tokenindex="%";else if(94===a)this.tokenprio=3,this.tokenindex="^";else return!1;this.pos++;return!0},isSign:function(){var a=this.expression.charCodeAt(this.pos-1);return 45===a||43===a?!0:!1},isPositiveSign:function(){return 43===this.expression.charCodeAt(this.pos-1)?!0:!1},isNegativeSign:function(){return 45===this.expression.charCodeAt(this.pos-1)?!0:!1},isLeftParenth:function(){return 40===this.expression.charCodeAt(this.pos)?(this.pos++,this.tmpprio+=10,!0):!1},isRightParenth:function(){return 41===
this.expression.charCodeAt(this.pos)?(this.pos++,this.tmpprio-=10,!0):!1},isComma:function(){return 44===this.expression.charCodeAt(this.pos)?(this.pos++,this.tokenprio=-1,this.tokenindex=",",!0):!1},isWhite:function(){var a=this.expression.charCodeAt(this.pos);return 32===a||9===a||10===a||13===a?(this.pos++,!0):!1},isOp1:function(){for(var a="",b=this.pos;b<this.expression.length;b++){var c=this.expression.charAt(b);if(c.toUpperCase()===c.toLowerCase()&&(b===this.pos||"_"!=c&&("0">c||"9"<c)))break;
a+=c}return 0<a.length&&a in this.ops1?(this.tokenindex=a,this.tokenprio=5,this.pos+=a.length,!0):!1},isOp2:function(){for(var a="",b=this.pos;b<this.expression.length;b++){var c=this.expression.charAt(b);if(c.toUpperCase()===c.toLowerCase()&&(b===this.pos||"_"!=c&&("0">c||"9"<c)))break;a+=c}return 0<a.length&&a in this.ops2?(this.tokenindex=a,this.tokenprio=5,this.pos+=a.length,!0):!1},isVar:function(){for(var a="",b=this.pos;b<this.expression.length;b++){var c=this.expression.charAt(b);if(c.toUpperCase()===
c.toLowerCase()&&(b===this.pos||"_"!=c&&("0">c||"9"<c)))break;a+=c}return 0<a.length?(this.tokenindex=a,this.tokenprio=4,this.pos+=a.length,!0):!1},isComment:function(){return 47===this.expression.charCodeAt(this.pos-1)&&42===this.expression.charCodeAt(this.pos)?(this.pos=this.expression.indexOf("*/",this.pos)+2,1===this.pos&&(this.pos=this.expression.length),!0):!1}};return a.Parser=u}("undefined"===typeof exports?{}:exports);
(function(a){if("object"==typeof exports&&"object"==typeof module)module.exports=a();else{if("function"==typeof define&&define.amd)return define([],a);this.CodeMirror=a()}})(function(){function a(c,d){if(!(this instanceof a))return new a(c,d);this.options=d=d||{};Rc(Db,d,!1);l(d);var e=d.value;"string"==typeof e&&(e=new Jb(e,d.mode));this.doc=e;var f=this.display=new b(c,e);f.wrapper.CodeMirror=this;m(this);h(this);d.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");d.autofocus&&
!Ae&&Qb(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new og};Oa&&11>nb&&setTimeout(yd(mb,this,!0),20);zc(this);ke||($f(),ke=!0);var g=this;Ca(this,function(){g.curOp.forceUpdate=!0;gd(g,e);d.autofocus&&!Ae||Xc()==f.input?setTimeout(yd(Cc,g),20):hc(g);for(var a in Ld)if(Ld.hasOwnProperty(a))Ld[a](g,d[a],Oc);E(g);for(a=0;a<wb.length;++a)wb[a](g)})}function b(a,b){var c=this.input=sa("textarea",null,
null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none");$b?c.style.width="1000px":c.setAttribute("wrap","off");Se&&(c.style.border="1px solid black");c.setAttribute("autocorrect","off");c.setAttribute("autocapitalize","off");c.setAttribute("spellcheck","false");this.inputDiv=sa("div",[c],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");this.scrollbarH=sa("div",[sa("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");this.scrollbarV=
sa("div",[sa("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar");this.scrollbarFiller=sa("div",null,"CodeMirror-scrollbar-filler");this.gutterFiller=sa("div",null,"CodeMirror-gutter-filler");this.lineDiv=sa("div",null,"CodeMirror-code");this.selectionDiv=sa("div",null,null,"position: relative; z-index: 1");this.cursorDiv=sa("div",null,"CodeMirror-cursors");this.measure=sa("div",null,"CodeMirror-measure");this.lineMeasure=sa("div",null,"CodeMirror-measure");this.lineSpace=sa("div",[this.measure,
this.lineMeasure,this.selectionDiv,this.cursorDiv,this.lineDiv],null,"position: relative; outline: none");this.mover=sa("div",[sa("div",[this.lineSpace],"CodeMirror-lines")],null,"position: relative");this.sizer=sa("div",[this.mover],"CodeMirror-sizer");this.heightForcer=sa("div",null,null,"position: absolute; height: "+ad+"px; width: 1px;");this.gutters=sa("div",null,"CodeMirror-gutters");this.lineGutter=null;this.scroller=sa("div",[this.sizer,this.heightForcer,this.gutters],"CodeMirror-scroll");
this.scroller.setAttribute("tabIndex","-1");this.wrapper=sa("div",[this.inputDiv,this.scrollbarH,this.scrollbarV,this.scrollbarFiller,this.gutterFiller,this.scroller],"CodeMirror");Oa&&8>nb&&(this.gutters.style.zIndex=-1,this.scroller.style.paddingRight=0);Se&&(c.style.width="0px");$b||(this.scroller.draggable=!0);Kd&&(this.inputDiv.style.height="1px",this.inputDiv.style.position="absolute");Oa&&8>nb&&(this.scrollbarH.style.minHeight=this.scrollbarV.style.minWidth="18px");a.appendChild?a.appendChild(this.wrapper):
a(this.wrapper);this.viewFrom=this.viewTo=b.first;this.view=[];this.externalMeasured=null;this.lastSizeC=this.viewOffset=0;this.lineNumWidth=this.lineNumInnerWidth=this.lineNumChars=this.updateLineNumbers=null;this.prevInput="";this.pollingFast=this.alignWidgets=!1;this.poll=new og;this.cachedCharWidth=this.cachedTextHeight=this.cachedPaddingH=null;this.inaccurateSelection=!1;this.maxLine=null;this.maxLineLength=0;this.maxLineChanged=!1;this.wheelDX=this.wheelDY=this.wheelStartX=this.wheelStartY=
null;this.shift=!1;this.selForContextMenu=null}function e(b){b.doc.mode=a.getMode(b.options,b.doc.modeOption);c(b)}function c(a){a.doc.iter(function(a){a.stateAfter&&(a.stateAfter=null);a.styles&&(a.styles=null)});a.doc.frontier=a.doc.first;rb(a,100);a.state.modeGen++;a.curOp&&ma(a)}function d(a){var b=Yb(a.display),c=a.options.lineWrapping,d=c&&Math.max(5,a.display.scroller.clientWidth/Bc(a.display)-3);return function(e){if(dd(a.doc,e))return 0;var f=0;if(e.widgets)for(var g=0;g<e.widgets.length;g++)e.widgets[g].height&&
(f+=e.widgets[g].height);return c?f+(Math.ceil(e.text.length/d)||1)*b:f+b}}function f(a){var b=a.doc,c=d(a);b.iter(function(a){var b=c(a);b!=a.height&&Ic(a,b)})}function n(a){var b=pd[a.options.keyMap].style;a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(b?" cm-keymap-"+b:"")}function h(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-");xb(a)}function g(a){m(a);ma(a);setTimeout(function(){v(a)},
20)}function m(a){var b=a.display.gutters,c=a.options.gutters;fe(b);for(var d=0;d<c.length;++d){var e=c[d],f=b.appendChild(sa("div",null,"CodeMirror-gutter "+e));"CodeMirror-linenumbers"==e&&(a.display.lineGutter=f,f.style.width=(a.display.lineNumWidth||1)+"px")}b.style.display=d?"":"none";p(a)}function p(a){var b=a.display.gutters.offsetWidth;a.display.sizer.style.marginLeft=b+"px";a.display.scrollbarH.style.left=a.options.fixedGutter?b+"px":0}function r(a){if(0==a.height)return 0;for(var b=a.text.length,
c,d=a;c=Ac(d,!0);)c=c.find(0,!0),d=c.from.line,b+=c.from.ch-c.to.ch;for(d=a;c=Ac(d,!1);)c=c.find(0,!0),b-=d.text.length-c.from.ch,d=c.to.line,b+=d.text.length-c.to.ch;return b}function t(a){var b=a.display;a=a.doc;b.maxLine=va(a,a.first);b.maxLineLength=r(b.maxLine);b.maxLineChanged=!0;a.iter(function(a){var c=r(a);c>b.maxLineLength&&(b.maxLineLength=c,b.maxLine=a)})}function l(a){var b=Xb(a.gutters,"CodeMirror-linenumbers");-1==b&&a.lineNumbers?a.gutters=a.gutters.concat(["CodeMirror-linenumbers"]):
-1<b&&!a.lineNumbers&&(a.gutters=a.gutters.slice(0),a.gutters.splice(b,1))}function q(a){var b=a.display.scroller;return{clientHeight:b.clientHeight,barHeight:a.display.scrollbarV.clientHeight,scrollWidth:b.scrollWidth,clientWidth:b.clientWidth,hScrollbarTakesSpace:a.display.scroller.clientHeight-a.display.wrapper.clientHeight<ad-3,barWidth:a.display.scrollbarH.clientWidth,docHeight:Math.round(a.doc.height+Ha(a.display))}}function w(a,b){b||(b=q(a));var c=a.display,d=Ag(c.measure),e=b.docHeight+ad,
f=b.scrollWidth>b.clientWidth;f&&b.scrollWidth<=b.clientWidth+1&&0<d&&!b.hScrollbarTakesSpace&&(f=!1);var g=e>b.clientHeight;g?(c.scrollbarV.style.display="block",c.scrollbarV.style.bottom=f?d+"px":"0",c.scrollbarV.firstChild.style.height=Math.max(0,e-b.clientHeight+(b.barHeight||c.scrollbarV.clientHeight))+"px"):(c.scrollbarV.style.display="",c.scrollbarV.firstChild.style.height="0");f?(c.scrollbarH.style.display="block",c.scrollbarH.style.right=g?d+"px":"0",c.scrollbarH.firstChild.style.width=b.scrollWidth-
b.clientWidth+(b.barWidth||c.scrollbarH.clientWidth)+"px"):(c.scrollbarH.style.display="",c.scrollbarH.firstChild.style.width="0");f&&g?(c.scrollbarFiller.style.display="block",c.scrollbarFiller.style.height=c.scrollbarFiller.style.width=d+"px"):c.scrollbarFiller.style.display="";f&&a.options.coverGutterNextToScrollbar&&a.options.fixedGutter?(c.gutterFiller.style.display="block",c.gutterFiller.style.height=d+"px",c.gutterFiller.style.width=c.gutters.offsetWidth+"px"):c.gutterFiller.style.display=
"";!a.state.checkedOverlayScrollbar&&0<b.clientHeight&&(0===d&&(c.scrollbarV.style.minWidth=c.scrollbarH.style.minHeight=Mc&&!Re?"12px":"18px",d=function(b){(b.target||b.srcElement)!=c.scrollbarV&&(b.target||b.srcElement)!=c.scrollbarH&&oa(a,nf)(b)},ya(c.scrollbarV,"mousedown",d),ya(c.scrollbarH,"mousedown",d)),a.state.checkedOverlayScrollbar=!0)}function u(a,b,c){var d=c&&null!=c.top?Math.max(0,c.top):a.scroller.scrollTop,d=Math.floor(d-a.lineSpace.offsetTop),e=c&&null!=c.bottom?c.bottom:d+a.wrapper.clientHeight,
d=fd(b,d),e=fd(b,e);if(c&&c.ensure){var f=c.ensure.from.line;c=c.ensure.to.line;if(f<d)return{from:f,to:fd(b,Hc(va(b,f))+a.wrapper.clientHeight)};if(Math.min(c,b.lastLine())>=e)return{from:fd(b,Hc(va(b,c))-a.wrapper.clientHeight),to:c}}return{from:d,to:Math.max(e,d+1)}}function v(a){var b=a.display,c=b.view;if(b.alignWidgets||b.gutters.firstChild&&a.options.fixedGutter){for(var d=K(b)-b.scroller.scrollLeft+a.doc.scrollLeft,e=b.gutters.offsetWidth,f=d+"px",g=0;g<c.length;g++)if(!c[g].hidden){a.options.fixedGutter&&
c[g].gutter&&(c[g].gutter.style.left=f);var l=c[g].alignable;if(l)for(var h=0;h<l.length;h++)l[h].style.left=f}a.options.fixedGutter&&(b.gutters.style.left=d+e+"px")}}function E(a){if(!a.options.lineNumbers)return!1;var b=a.doc,b=A(a.options,b.first+b.size-1),c=a.display;if(b.length!=c.lineNumChars){var d=c.measure.appendChild(sa("div",[sa("div",b)],"CodeMirror-linenumber CodeMirror-gutter-elt")),e=d.firstChild.offsetWidth,d=d.offsetWidth-e;c.lineGutter.style.width="";c.lineNumInnerWidth=Math.max(e,
c.lineGutter.offsetWidth-d);c.lineNumWidth=c.lineNumInnerWidth+d;c.lineNumChars=c.lineNumInnerWidth?b.length:-1;c.lineGutter.style.width=c.lineNumWidth+"px";p(a);return!0}return!1}function A(a,b){return String(a.lineNumberFormatter(b+a.firstLineNumber))}function K(a){return a.scroller.getBoundingClientRect().left-a.sizer.getBoundingClientRect().left}function F(a,b,c){var d=a.display;this.viewport=b;this.visible=u(d,a.doc,b);this.editorIsHidden=!d.wrapper.offsetWidth;this.wrapperHeight=d.wrapper.clientHeight;
this.oldViewFrom=d.viewFrom;this.oldViewTo=d.viewTo;this.oldScrollerWidth=d.scroller.clientWidth;this.force=c;this.dims=L(a)}function z(a,b){var c=a.display,d=a.doc;if(b.editorIsHidden)return Ua(a),!1;if(!b.force&&b.visible.from>=c.viewFrom&&b.visible.to<=c.viewTo&&(null==c.updateLineNumbers||c.updateLineNumbers>=c.viewTo)&&0==bd(a))return!1;E(a)&&(Ua(a),b.dims=L(a));var e=d.first+d.size,f=Math.max(b.visible.from-a.options.viewportMargin,d.first),g=Math.min(e,b.visible.to+a.options.viewportMargin);
c.viewFrom<f&&20>f-c.viewFrom&&(f=Math.max(d.first,c.viewFrom));c.viewTo>g&&20>c.viewTo-g&&(g=Math.min(e,c.viewTo));nd&&(f=Ee(a.doc,f),g=ff(a.doc,g));d=f!=c.viewFrom||g!=c.viewTo||c.lastSizeC!=b.wrapperHeight;e=a.display;0==e.view.length||f>=e.viewTo||g<=e.viewFrom?(e.view=Ja(a,f,g),e.viewFrom=f):(e.viewFrom>f?e.view=Ja(a,f,e.viewFrom).concat(e.view):e.viewFrom<f&&(e.view=e.view.slice(ac(a,f))),e.viewFrom=f,e.viewTo<g?e.view=e.view.concat(Ja(a,e.viewTo,g)):e.viewTo>g&&(e.view=e.view.slice(0,ac(a,
g))));e.viewTo=g;c.viewOffset=Hc(va(a.doc,c.viewFrom));a.display.mover.style.top=c.viewOffset+"px";g=bd(a);if(!d&&0==g&&!b.force&&(null==c.updateLineNumbers||c.updateLineNumbers>=c.viewTo))return!1;f=Xc();4<g&&(c.lineDiv.style.display="none");x(a,c.updateLineNumbers,b.dims);4<g&&(c.lineDiv.style.display="");f&&Xc()!=f&&f.offsetHeight&&f.focus();fe(c.cursorDiv);fe(c.selectionDiv);d&&(c.lastSizeC=b.wrapperHeight,rb(a,400));c.updateLineNumbers=null;return!0}function B(a,b){for(var c=b.viewport,d=!0;;d=
!1){if(!d||!a.options.lineWrapping||b.oldScrollerWidth==a.display.scroller.clientWidth)if(c&&null!=c.top&&(c={top:Math.min(a.doc.height+Ha(a.display)-ad-a.display.scroller.clientHeight,c.top)}),b.visible=u(a.display,a.doc,c),b.visible.from>=a.display.viewFrom&&b.visible.to<=a.display.viewTo)break;if(!z(a,b))break;I(a);d=q(a);ab(a);G(a,d);w(a,d)}Mb(a,"update",a);a.display.viewFrom==b.oldViewFrom&&a.display.viewTo==b.oldViewTo||Mb(a,"viewportChange",a,a.display.viewFrom,a.display.viewTo)}function H(a,
b){var c=new F(a,b);z(a,c)&&(I(a),B(a,c),c=q(a),ab(a),G(a,c),w(a,c))}function G(a,b){a.display.sizer.style.minHeight=a.display.heightForcer.style.top=b.docHeight+"px";a.display.gutters.style.height=Math.max(b.docHeight,b.clientHeight-ad)+"px"}function I(a){a=a.display;for(var b=a.lineDiv.offsetTop,c=0;c<a.view.length;c++){var d=a.view[c],e;if(!d.hidden){if(Oa&&8>nb){var f=d.node.offsetTop+d.node.offsetHeight;e=f-b;b=f}else e=d.node.getBoundingClientRect(),e=e.bottom-e.top;f=d.line.height-e;2>e&&(e=
Yb(a));if(.001<f||-.001>f)if(Ic(d.line,e),N(d.line),d.rest)for(e=0;e<d.rest.length;e++)N(d.rest[e])}}}function N(a){if(a.widgets)for(var b=0;b<a.widgets.length;++b)a.widgets[b].height=a.widgets[b].node.offsetHeight}function L(a){for(var b=a.display,c={},d={},e=b.gutters.firstChild,f=0;e;e=e.nextSibling,++f)c[a.options.gutters[f]]=e.offsetLeft,d[a.options.gutters[f]]=e.offsetWidth;return{fixedPos:K(b),gutterTotalWidth:b.gutters.offsetWidth,gutterLeft:c,gutterWidth:d,wrapperWidth:b.wrapper.clientWidth}}
function x(a,b,c){function d(b){var c=b.nextSibling;$b&&Mc&&a.display.currentWheelTarget==b?b.style.display="none":b.parentNode.removeChild(b);return c}for(var e=a.display,f=a.options.lineNumbers,g=e.lineDiv,l=g.firstChild,h=e.view,e=e.viewFrom,m=0;m<h.length;m++){var q=h[m];if(!q.hidden)if(q.node){for(;l!=q.node;)l=d(l);l=f&&null!=b&&b<=e&&q.lineNumber;q.changes&&(-1<Xb(q.changes,"gutter")&&(l=!1),S(a,q,e,c));l&&(fe(q.lineNumber),q.lineNumber.appendChild(document.createTextNode(A(a.options,e))));
l=q.node.nextSibling}else{var p=W(a,q,e,c);g.insertBefore(p,l)}e+=q.size}for(;l;)l=d(l)}function S(a,b,c,d){for(var e=0;e<b.changes.length;e++){var f=b.changes[e];if("text"==f){var f=b,g=f.text.className,l=J(a,f);f.text==f.node&&(f.node=l.pre);f.text.parentNode.replaceChild(l.pre,f.text);f.text=l.pre;l.bgClass!=f.bgClass||l.textClass!=f.textClass?(f.bgClass=l.bgClass,f.textClass=l.textClass,V(f)):g&&(f.text.className=g)}else if("gutter"==f)Y(a,b,c,d);else if("class"==f)V(b);else if("widget"==f){f=
b;g=d;f.alignable&&(f.alignable=null);for(var l=f.node.firstChild,h=void 0;l;l=h)h=l.nextSibling,"CodeMirror-linewidget"==l.className&&f.node.removeChild(l);U(f,g)}}b.changes=null}function D(a){a.node==a.text&&(a.node=sa("div",null,null,"position: relative"),a.text.parentNode&&a.text.parentNode.replaceChild(a.node,a.text),a.node.appendChild(a.text),Oa&&8>nb&&(a.node.style.zIndex=2));return a.node}function J(a,b){var c=a.display.externalMeasured;return c&&c.line==b.line?(a.display.externalMeasured=
null,b.measure=c.measure,c.built):rg(a,b)}function V(a){var b=a.bgClass?a.bgClass+" "+(a.line.bgClass||""):a.line.bgClass;b&&(b+=" CodeMirror-linebackground");if(a.background)b?a.background.className=b:(a.background.parentNode.removeChild(a.background),a.background=null);else if(b){var c=D(a);a.background=c.insertBefore(sa("div",null,b),c.firstChild)}a.line.wrapClass?D(a).className=a.line.wrapClass:a.node!=a.text&&(a.node.className="");a.text.className=(a.textClass?a.textClass+" "+(a.line.textClass||
""):a.line.textClass)||""}function Y(a,b,c,d){b.gutter&&(b.node.removeChild(b.gutter),b.gutter=null);var e=b.line.gutterMarkers;if(a.options.lineNumbers||e){var f=D(b),f=b.gutter=f.insertBefore(sa("div",null,"CodeMirror-gutter-wrapper","position: absolute; left: "+(a.options.fixedGutter?d.fixedPos:-d.gutterTotalWidth)+"px"),b.text);!a.options.lineNumbers||e&&e["CodeMirror-linenumbers"]||(b.lineNumber=f.appendChild(sa("div",A(a.options,c),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+d.gutterLeft["CodeMirror-linenumbers"]+
"px; width: "+a.display.lineNumInnerWidth+"px")));if(e)for(b=0;b<a.options.gutters.length;++b){c=a.options.gutters[b];var g=e.hasOwnProperty(c)&&e[c];g&&f.appendChild(sa("div",[g],"CodeMirror-gutter-elt","left: "+d.gutterLeft[c]+"px; width: "+d.gutterWidth[c]+"px"))}}}function W(a,b,c,d){var e=J(a,b);b.text=b.node=e.pre;e.bgClass&&(b.bgClass=e.bgClass);e.textClass&&(b.textClass=e.textClass);V(b);Y(a,b,c,d);U(b,d);return b.node}function U(a,b){M(a.line,a,b,!0);if(a.rest)for(var c=0;c<a.rest.length;c++)M(a.rest[c],
a,b,!1)}function M(a,b,c,d){if(a.widgets){var e=D(b),f=0;for(a=a.widgets;f<a.length;++f){var g=a[f],l=sa("div",[g.node],"CodeMirror-linewidget");g.handleMouseEvents||(l.ignoreEvents=!0);var h=g,m=l,q=c;if(h.noHScroll){(b.alignable||(b.alignable=[])).push(m);var p=q.wrapperWidth;m.style.left=q.fixedPos+"px";h.coverGutter||(p-=q.gutterTotalWidth,m.style.paddingLeft=q.gutterTotalWidth+"px");m.style.width=p+"px"}h.coverGutter&&(m.style.zIndex=5,m.style.position="relative",h.noHScroll||(m.style.marginLeft=
-q.gutterTotalWidth+"px"));d&&g.above?e.insertBefore(l,b.gutter||b.text):e.appendChild(l);Mb(g,"redraw")}}}function Q(a){return ka(a.line,a.ch)}function X(a,b){return 0>Ia(a,b)?b:a}function ea(a,b){return 0>Ia(a,b)?a:b}function O(a,b){this.ranges=a;this.primIndex=b}function aa(a,b){this.anchor=a;this.head=b}function ia(a,b){var c=a[b];a.sort(function(a,b){return Ia(a.from(),b.from())});b=Xb(a,c);for(c=1;c<a.length;c++){var d=a[c],e=a[c-1];if(0<=Ia(e.to(),d.from())){var f=ea(e.from(),d.from()),g=X(e.to(),
d.to()),d=e.empty()?d.from()==d.head:e.from()==e.head;c<=b&&--b;a.splice(--c,2,new aa(d?g:f,d?f:g))}}return new O(a,b)}function ta(a,b){return new O([new aa(a,b||a)],0)}function da(a,b){if(b.line<a.first)return ka(a.first,0);var c=a.first+a.size-1;if(b.line>c)return ka(c,va(a,c).text.length);var c=va(a,b.line).text.length,d=b.ch,c=null==d||d>c?ka(b.line,c):0>d?ka(b.line,0):b;return c}function ha(a,b){return b>=a.first&&b<a.first+a.size}function Ba(a,b,c,d){return a.cm&&a.cm.display.shift||a.extend?
(a=b.anchor,d&&(b=0>Ia(c,a),b!=0>Ia(d,a)?(a=c,c=d):b!=0>Ia(c,d)&&(c=d)),new aa(a,c)):new aa(d||c,c)}function y(a,b,c,d){Ra(a,new O([Ba(a,a.sel.primary(),b,c)],0),d)}function za(a,b,c){for(var d=[],e=0;e<a.sel.ranges.length;e++)d[e]=Ba(a,a.sel.ranges[e],b[e],null);b=ia(d,a.sel.primIndex);Ra(a,b,c)}function pa(a,b,c,d){var e=a.sel.ranges.slice(0);e[b]=c;Ra(a,ia(e,a.sel.primIndex),d)}function C(a,b){var c={ranges:b.ranges,update:function(b){this.ranges=[];for(var c=0;c<b.length;c++)this.ranges[c]=new aa(da(a,
b[c].anchor),da(a,b[c].head))}};Va(a,"beforeSelectionChange",a,c);a.cm&&Va(a.cm,"beforeSelectionChange",a.cm,c);return c.ranges!=b.ranges?ia(c.ranges,c.ranges.length-1):b}function pb(a,b,c){var d=a.history.done,e=kb(d);e&&e.ranges?(d[d.length-1]=b,Ka(a,b,c)):Ra(a,b,c)}function Ra(a,b,c){Ka(a,b,c);b=a.sel;var d=a.cm?a.cm.curOp.id:NaN,e=a.history,f=c&&c.origin,g;if(!(g=d==e.lastSelOp)&&(g=f&&e.lastSelOrigin==f)&&!(g=e.lastModTime==e.lastSelTime&&e.lastOrigin==f)){g=kb(e.done);var l=f.charAt(0);g="*"==
l||"+"==l&&g.ranges.length==b.ranges.length&&g.somethingSelected()==b.somethingSelected()&&new Date-a.history.lastSelTime<=(a.cm?a.cm.options.historyEventDelay:500)}g?e.done[e.done.length-1]=b:Ie(b,e.done);e.lastSelTime=+new Date;e.lastSelOrigin=f;e.lastSelOp=d;c&&!1!==c.clearRedo&&te(e.undone)}function Ka(a,b,c){if(ec(a,"beforeSelectionChange")||a.cm&&ec(a.cm,"beforeSelectionChange"))b=C(a,b);var d=c&&c.bias||(0>Ia(b.primary().head,a.sel.primary().head)?-1:1);Xa(a,Fb(a,b,d,!0));c&&!1===c.scroll||
!a.cm||Ib(a.cm)}function Xa(a,b){b.equals(a.sel)||(a.sel=b,a.cm&&(a.cm.curOp.updateInput=a.cm.curOp.selectionChanged=!0,Nf(a.cm)),Mb(a,"cursorActivity",a))}function Kb(a){Xa(a,Fb(a,a.sel,null,!1),qd)}function Fb(a,b,c,d){for(var e,f=0;f<b.ranges.length;f++){var g=b.ranges[f],l=hb(a,g.anchor,c,d),h=hb(a,g.head,c,d);if(e||l!=g.anchor||h!=g.head)e||(e=b.ranges.slice(0,f)),e[f]=new aa(l,h)}return e?ia(e,b.primIndex):b}function hb(a,b,c,d){var e=!1,f=b,g=c||1;a.cantEdit=!1;a:for(;;){var l=va(a,f.line);
if(l.markedSpans)for(var h=0;h<l.markedSpans.length;++h){var m=l.markedSpans[h],q=m.marker;if((null==m.from||(q.inclusiveLeft?m.from<=f.ch:m.from<f.ch))&&(null==m.to||(q.inclusiveRight?m.to>=f.ch:m.to>f.ch))){if(d&&(Va(q,"beforeCursorEnter"),q.explicitlyCleared))if(l.markedSpans){--h;continue}else break;if(q.atomic){h=q.find(0>g?-1:1);if(0==Ia(h,f)&&(h.ch+=g,0>h.ch?h=h.line>a.first?da(a,ka(h.line-1)):null:h.ch>l.text.length&&(h=h.line<a.first+a.size-1?ka(h.line+1,0):null),!h)){if(e){if(!d)return hb(a,
b,c,!0);a.cantEdit=!0;return ka(a.first,0)}e=!0;h=b;g=-g}f=h;continue a}}}return f}}function Ga(a){for(var b=a.display,c=a.doc,d={},e=d.cursors=document.createDocumentFragment(),f=d.selection=document.createDocumentFragment(),g=0;g<c.sel.ranges.length;g++){var l=c.sel.ranges[g],h=l.empty();if(h||a.options.showCursorWhenSelecting){var m=a,q=e,p=Aa(m,l.head,"div",null,null,!m.options.singleCursorHeightPerLine),r=q.appendChild(sa("div","\u00a0","CodeMirror-cursor"));r.style.left=p.left+"px";r.style.top=
p.top+"px";r.style.height=Math.max(0,p.bottom-p.top)*m.options.cursorHeight+"px";p.other&&(m=q.appendChild(sa("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor")),m.style.display="",m.style.left=p.other.left+"px",m.style.top=p.other.top+"px",m.style.height=.85*(p.other.bottom-p.other.top)+"px")}h||Gb(a,l,f)}a.options.moveInputWithCursor&&(a=Aa(a,c.sel.primary().head,"div"),c=b.wrapper.getBoundingClientRect(),e=b.lineDiv.getBoundingClientRect(),d.teTop=Math.max(0,Math.min(b.wrapper.clientHeight-
10,a.top+e.top-c.top)),d.teLeft=Math.max(0,Math.min(b.wrapper.clientWidth-10,a.left+e.left-c.left)));return d}function Za(a,b){Tb(a.display.cursorDiv,b.cursors);Tb(a.display.selectionDiv,b.selection);null!=b.teTop&&(a.display.inputDiv.style.top=b.teTop+"px",a.display.inputDiv.style.left=b.teLeft+"px")}function ab(a){Za(a,Ga(a))}function Gb(a,b,c){function d(a,b,c,e){0>b&&(b=0);b=Math.round(b);e=Math.round(e);l.appendChild(sa("div",null,"CodeMirror-selected","position: absolute; left: "+a+"px; top: "+
b+"px; width: "+(null==c?q-a:c)+"px; height: "+(e-b)+"px"))}function e(b,c,f){var l=va(g,b),h=l.text.length,p,r;pe(yb(l),c||0,null==f?h:f,function(e,g,n){var t=jb(a,ka(b,e),"div",l,"left"),u,v;e==g?(u=t,n=v=t.left):(u=jb(a,ka(b,g-1),"div",l,"right"),"rtl"==n&&(n=t,t=u,u=n),n=t.left,v=u.right);null==c&&0==e&&(n=m);3<u.top-t.top&&(d(n,t.top,null,t.bottom),n=m,t.bottom<u.top&&d(n,t.bottom,null,u.top));null==f&&g==h&&(v=q);if(!p||t.top<p.top||t.top==p.top&&t.left<p.left)p=t;if(!r||u.bottom>r.bottom||
u.bottom==r.bottom&&u.right>r.right)r=u;n<m+1&&(n=m);d(n,u.top,v-n,u.bottom)});return{start:p,end:r}}var f=a.display,g=a.doc,l=document.createDocumentFragment(),h=sb(a.display),m=h.left,q=f.lineSpace.offsetWidth-h.right,f=b.from();b=b.to();if(f.line==b.line)e(f.line,f.ch,b.ch);else{var p=va(g,f.line),h=va(g,b.line),h=Qc(p)==Qc(h),f=e(f.line,f.ch,h?p.text.length+1:null).end;b=e(b.line,h?0:null,b.ch).start;h&&(f.top<b.top-2?(d(f.right,f.top,null,f.bottom),d(m,b.top,b.left,b.bottom)):d(f.right,f.top,
b.left-f.right,f.bottom));f.bottom<b.top&&d(m,f.bottom,null,b.top)}c.appendChild(l)}function ib(a){if(a.state.focused){var b=a.display;clearInterval(b.blinker);var c=!0;b.cursorDiv.style.visibility="";0<a.options.cursorBlinkRate?b.blinker=setInterval(function(){b.cursorDiv.style.visibility=(c=!c)?"":"hidden"},a.options.cursorBlinkRate):0>a.options.cursorBlinkRate&&(b.cursorDiv.style.visibility="hidden")}}function rb(a,b){a.doc.mode.startState&&a.doc.frontier<a.display.viewTo&&a.state.highlight.set(b,
yd(gb,a))}function gb(a){var b=a.doc;b.frontier<b.first&&(b.frontier=b.first);if(!(b.frontier>=a.display.viewTo)){var c=+new Date+a.options.workTime,d=Nd(b.mode,qa(a,b.frontier)),e=[];b.iter(b.frontier,Math.min(b.first+b.size,a.display.viewTo+500),function(f){if(b.frontier>=a.display.viewFrom){var g=f.styles,l=Sf(a,f,d,!0);f.styles=l.styles;var h=f.styleClasses;(l=l.classes)?f.styleClasses=l:h&&(f.styleClasses=null);h=!g||g.length!=f.styles.length||h!=l&&(!h||!l||h.bgClass!=l.bgClass||h.textClass!=
l.textClass);for(l=0;!h&&l<g.length;++l)h=g[l]!=f.styles[l];h&&e.push(b.frontier);f.stateAfter=Nd(b.mode,d)}else Da(a,f.text,d),f.stateAfter=0==b.frontier%5?Nd(b.mode,d):null;++b.frontier;if(+new Date>c)return rb(a,a.options.workDelay),!0});e.length&&Ca(a,function(){for(var b=0;b<e.length;b++)cb(a,e[b],"text")})}}function Wa(a,b,c){for(var d,e,f=a.doc,g=c?-1:b-(a.doc.mode.innerMode?1E3:100);b>g;--b){if(b<=f.first)return f.first;var l=va(f,b-1);if(l.stateAfter&&(!c||b<=f.frontier))return b;l=oc(l.text,
null,a.options.tabSize);if(null==e||d>l)e=b-1,d=l}return e}function qa(a,b,c){var d=a.doc,e=a.display;if(!d.mode.startState)return!0;var f=Wa(a,b,c),g=f>d.first&&va(d,f-1).stateAfter,g=g?Nd(d.mode,g):Gf(d.mode);d.iter(f,b,function(c){Da(a,c.text,g);c.stateAfter=f==b-1||0==f%5||f>=e.viewFrom&&f<e.viewTo?Nd(d.mode,g):null;++f});c&&(d.frontier=f);return g}function Ha(a){return a.mover.offsetHeight-a.lineSpace.offsetHeight}function sb(a){if(a.cachedPaddingH)return a.cachedPaddingH;var b=Tb(a.measure,
sa("pre","x")),b=window.getComputedStyle?window.getComputedStyle(b):b.currentStyle,b={left:parseInt(b.paddingLeft),right:parseInt(b.paddingRight)};isNaN(b.left)||isNaN(b.right)||(a.cachedPaddingH=b);return b}function Ta(a,b){if(b>=a.display.viewFrom&&b<a.display.viewTo)return a.display.view[ac(a,b)];var c=a.display.externalMeasured;if(c&&b>=c.lineN&&b<c.lineN+c.size)return c}function Ya(a,b){var c=qb(b),d=Ta(a,c);d&&!d.text?d=null:d&&d.changes&&S(a,d,c,L(a));if(!d){var e;e=Qc(b);d=qb(e);e=a.display.externalMeasured=
new ja(a.doc,e,d);e.lineN=d;d=e.built=rg(a,e);e.text=d.pre;Tb(a.display.lineMeasure,d.pre);d=e}a:if(e=d,e.line==b)c={map:e.measure.map,cache:e.measure.cache};else{for(var f=0;f<e.rest.length;f++)if(e.rest[f]==b){c={map:e.measure.maps[f],cache:e.measure.caches[f]};break a}for(f=0;f<e.rest.length;f++)if(qb(e.rest[f])>c){c={map:e.measure.maps[f],cache:e.measure.caches[f],before:!0};break a}c=void 0}return{line:b,view:d,rect:null,map:c.map,cache:c.cache,before:c.before,hasHeights:!1}}function ra(a,b,
c,d,e){b.before&&(c=-1);var f=c+(d||"");if(b.cache.hasOwnProperty(f))a=b.cache[f];else{b.rect||(b.rect=b.view.text.getBoundingClientRect());if(!b.hasHeights){var g=b.view,l=b.rect,h=a.options.lineWrapping,m=h&&a.display.scroller.clientWidth;if(!g.measure.heights||h&&g.measure.width!=m){var q=g.measure.heights=[];if(h)for(g.measure.width=m,g=g.text.firstChild.getClientRects(),h=0;h<g.length-1;h++){var m=g[h],p=g[h+1];2<Math.abs(m.bottom-p.bottom)&&q.push((m.bottom+p.top)/2-l.top)}q.push(l.bottom-l.top)}b.hasHeights=
!0}var l=d,q=b.map,r,n,t,u;for(d=0;d<q.length;d+=3){var v=q[d],w=q[d+1];if(c<v)n=0,t=1,u="left";else if(c<w)n=c-v,t=n+1;else if(d==q.length-3||c==w&&q[d+3]>c)t=w-v,n=t-1,c>=w&&(u="right");if(null!=n){r=q[d+2];v==w&&l==(r.insertLeft?"left":"right")&&(u=l);if("left"==l&&0==n)for(;d&&q[d-2]==q[d-3]&&q[d-1].insertLeft;)r=q[(d-=3)+2],u="left";if("right"==l&&n==w-v)for(;d<q.length-3&&q[d+3]==q[d+4]&&!q[d+5].insertLeft;)r=q[(d+=3)+2],u="right";break}}if(3==r.nodeType)for(;;){for(;n&&He(b.line.text.charAt(v+
n));)--n;for(;v+t<w&&He(b.line.text.charAt(v+t));)++t;if(Oa&&9>nb&&0==n&&t==w-v)c=r.parentNode.getBoundingClientRect();else if(Oa&&a.options.lineWrapping){var G=Od(r,n,t).getClientRects();c=G.length?G["right"==l?G.length-1:0]:eg}else c=Od(r,n,t).getBoundingClientRect()||eg;if(c.left||c.right||0==n)break;t=n;n-=1;u="right"}else 0<n&&(u=l="right"),c=a.options.lineWrapping&&1<(G=r.getClientRects()).length?G["right"==l?G.length-1:0]:r.getBoundingClientRect();!(Oa&&9>nb)||n||c&&(c.left||c.right)||(c=(r=
r.parentNode.getClientRects()[0])?{left:r.left,right:r.left+Bc(a.display),top:r.top,bottom:r.bottom}:eg);if(Oa&&11>nb){r=c;if(n=window.screen&&null!=screen.logicalXDPI&&screen.logicalXDPI!=screen.deviceXDPI)null!=hg?n=hg:(v=Tb(a.display.measure,sa("span","x")),n=v.getBoundingClientRect(),v=Od(v,0,1).getBoundingClientRect(),n=hg=1<Math.abs(n.left-v.left));n?(n=screen.logicalXDPI/screen.deviceXDPI,v=screen.logicalYDPI/screen.deviceYDPI,c={left:r.left*n,right:r.right*n,top:r.top*v,bottom:r.bottom*v}):
c=r}r=c.top-b.rect.top;n=c.bottom-b.rect.top;v=(r+n)/2;w=b.view.measure.heights;for(d=0;d<w.length-1&&!(v<w[d]);d++);u={left:("right"==u?c.right:c.left)-b.rect.left,right:("left"==u?c.left:c.right)-b.rect.left,top:d?w[d-1]:0,bottom:w[d]};c.left||c.right||(u.bogus=!0);a.options.singleCursorHeightPerLine||(u.rtop=r,u.rbottom=n);a=u;a.bogus||(b.cache[f]=a)}return{left:a.left,right:a.right,top:e?a.rtop:a.top,bottom:e?a.rbottom:a.bottom}}function qc(a){if(a.measure&&(a.measure.cache={},a.measure.heights=
null,a.rest))for(var b=0;b<a.rest.length;b++)a.measure.caches[b]={}}function tb(a){a.display.externalMeasure=null;fe(a.display.lineMeasure);for(var b=0;b<a.display.view.length;b++)qc(a.display.view[b])}function xb(a){tb(a);a.display.cachedCharWidth=a.display.cachedTextHeight=a.display.cachedPaddingH=null;a.options.lineWrapping||(a.display.maxLineChanged=!0);a.display.lineNumChars=null}function Ab(a,b,c,d){if(b.widgets)for(var e=0;e<b.widgets.length;++e)if(b.widgets[e].above){var f=Fe(b.widgets[e]);
c.top+=f;c.bottom+=f}if("line"==d)return c;d||(d="local");b=Hc(b);b="local"==d?b+a.display.lineSpace.offsetTop:b-a.display.viewOffset;if("page"==d||"window"==d)a=a.display.lineSpace.getBoundingClientRect(),b+=a.top+("window"==d?0:window.pageYOffset||(document.documentElement||document.body).scrollTop),d=a.left+("window"==d?0:window.pageXOffset||(document.documentElement||document.body).scrollLeft),c.left+=d,c.right+=d;c.top+=b;c.bottom+=b;return c}function la(a,b,c){if("div"==c)return b;var d=b.left;
b=b.top;"page"==c?(d-=window.pageXOffset||(document.documentElement||document.body).scrollLeft,b-=window.pageYOffset||(document.documentElement||document.body).scrollTop):"local"!=c&&c||(c=a.display.sizer.getBoundingClientRect(),d+=c.left,b+=c.top);a=a.display.lineSpace.getBoundingClientRect();return{left:d-a.left,top:b-a.top}}function jb(a,b,c,d,e){d||(d=va(a.doc,b.line));var f=d;b=b.ch;d=ra(a,Ya(a,d),b,e);return Ab(a,f,d,c)}function Aa(a,b,c,d,e,f){function g(b,l){var h=ra(a,e,b,l?"right":"left",
f);l?h.left=h.right:h.right=h.left;return Ab(a,d,h,c)}function l(a,b){var c=h[b],d=c.level%2;a==xa(c)&&b&&c.level<h[b-1].level?(c=h[--b],a=Xd(c)-(c.level%2?0:1),d=!0):a==Xd(c)&&b<h.length-1&&c.level<h[b+1].level&&(c=h[++b],a=xa(c)-c.level%2,d=!1);return d&&a==c.to&&a>c.from?g(a-1):g(a,d)}d=d||va(a.doc,b.line);e||(e=Ya(a,d));var h=yb(d);b=b.ch;if(!h)return g(b);var m=ag(h,b),m=l(b,m);null!=kc&&(m.other=l(b,kc));return m}function Lb(a,b){var c=0;b=da(a.doc,b);a.options.lineWrapping||(c=Bc(a.display)*
b.ch);var d=va(a.doc,b.line),e=Hc(d)+a.display.lineSpace.offsetTop;return{left:c,right:c,top:e,bottom:e+d.height}}function Hb(a,b,c,d){a=ka(a,b);a.xRel=d;c&&(a.outside=!0);return a}function Sa(a,b,c){var d=a.doc;c+=a.display.viewOffset;if(0>c)return Hb(d.first,0,!0,-1);var e=fd(d,c),f=d.first+d.size-1;if(e>f)return Hb(d.first+d.size-1,va(d,f).text.length,!0,1);0>b&&(b=0);for(d=va(d,e);;)if(e=na(a,d,e,b,c),f=(d=Ac(d,!1))&&d.find(0,!0),d&&(e.ch>f.from.ch||e.ch==f.from.ch&&0<e.xRel))e=qb(d=f.to.line);
else return e}function na(a,b,c,d,e){function f(d){d=Aa(a,ka(c,d),"line",b,m);l=!0;if(g>d.bottom)return d.left-h;if(g<d.top)return d.left+h;l=!1;return d.left}var g=e-Hc(b),l=!1,h=2*a.display.wrapper.clientWidth,m=Ya(a,b),q=yb(b),p=b.text.length;e=Qe(b);var r=Id(b),n=f(e),t=l,u=f(r),v=l;if(d>u)return Hb(c,r,v,1);for(;;){if(q?r==e||r==bg(b,e,1):1>=r-e){q=d<n||d-n<=u-d?e:r;for(d-=q==e?n:u;He(b.text.charAt(q));)++q;return Hb(c,q,q==e?t:v,-1>d?-1:1<d?1:0)}var w=Math.ceil(p/2),G=e+w;if(q)for(var G=e,x=
0;x<w;++x)G=bg(b,G,1);x=f(G);if(x>d){r=G;u=x;if(v=l)u+=1E3;p=w}else e=G,n=x,t=l,p-=w}}function Yb(a){if(null!=a.cachedTextHeight)return a.cachedTextHeight;if(null==od){od=sa("pre");for(var b=0;49>b;++b)od.appendChild(document.createTextNode("x")),od.appendChild(sa("br"));od.appendChild(document.createTextNode("x"))}Tb(a.measure,od);b=od.offsetHeight/50;3<b&&(a.cachedTextHeight=b);fe(a.measure);return b||1}function Bc(a){if(null!=a.cachedCharWidth)return a.cachedCharWidth;var b=sa("span","xxxxxxxxxx"),
c=sa("pre",[b]);Tb(a.measure,c);b=b.getBoundingClientRect();b=(b.right-b.left)/10;2<b&&(a.cachedCharWidth=b);return b||10}function ca(a){a.curOp={cm:a,viewChanged:!1,startHeight:a.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,id:++Cf};qe?qe.ops.push(a.curOp):a.curOp.ownsGroup=qe={ops:[a.curOp],delayedCallbacks:[]}}function ba(a){if(a=a.curOp.ownsGroup)try{var b=
a.delayedCallbacks,c=0;do{for(;c<b.length;c++)b[c]();for(var d=0;d<a.ops.length;d++){var e=a.ops[d];if(e.cursorActivityHandlers)for(;e.cursorActivityCalled<e.cursorActivityHandlers.length;)e.cursorActivityHandlers[e.cursorActivityCalled++](e.cm)}}while(c<b.length)}finally{qe=null;for(b=0;b<a.ops.length;b++)a.ops[b].cm.curOp=null;a=a.ops;for(b=0;b<a.length;b++)e=a[b],c=e.cm,d=c.display,e.updateMaxLine&&t(c),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<
d.viewFrom||e.scrollToPos.to.line>=d.viewTo)||d.maxLineChanged&&c.options.lineWrapping,e.update=e.mustUpdate&&new F(c,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate);for(b=0;b<a.length;b++)e=a[b],e.updatedDisplay=e.mustUpdate&&z(e.cm,e.update);for(b=0;b<a.length;b++){e=a[b];c=e.cm;d=c.display;e.updatedDisplay&&I(c);e.barMeasure=q(c);if(d.maxLineChanged&&!c.options.lineWrapping){var f=e,g;g=d.maxLine.text.length;g=ra(c,Ya(c,d.maxLine),g,void 0);f.adjustWidthTo=g.left+3;e.maxScrollLeft=
Math.max(0,d.sizer.offsetLeft+e.adjustWidthTo+ad-d.scroller.clientWidth)}if(e.updatedDisplay||e.selectionChanged)e.newSelectionNodes=Ga(c)}for(b=0;b<a.length;b++)e=a[b],c=e.cm,null!=e.adjustWidthTo&&(c.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<c.doc.scrollLeft&&we(c,Math.min(c.display.scroller.scrollLeft,e.maxScrollLeft),!0),c.display.maxLineChanged=!1),e.newSelectionNodes&&Za(c,e.newSelectionNodes),e.updatedDisplay&&G(c,e.barMeasure),(e.updatedDisplay||e.startHeight!=c.doc.height)&&
w(c,e.barMeasure),e.selectionChanged&&ib(c),c.state.focused&&e.updateInput&&mb(c,e.typing);for(b=0;b<a.length;b++){e=a[b];c=e.cm;d=c.display;f=c.doc;null!=e.adjustWidthTo&&1<Math.abs(e.barMeasure.scrollWidth-c.display.scroller.scrollWidth)&&w(c);e.updatedDisplay&&B(c,e.update);null==d.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(d.wheelStartX=d.wheelStartY=null);null!=e.scrollTop&&d.scroller.scrollTop!=e.scrollTop&&(g=Math.max(0,Math.min(d.scroller.scrollHeight-d.scroller.clientHeight,
e.scrollTop)),d.scroller.scrollTop=d.scrollbarV.scrollTop=f.scrollTop=g);null!=e.scrollLeft&&d.scroller.scrollLeft!=e.scrollLeft&&(g=Math.max(0,Math.min(d.scroller.scrollWidth-d.scroller.clientWidth,e.scrollLeft)),d.scroller.scrollLeft=d.scrollbarH.scrollLeft=f.scrollLeft=g,v(c));if(e.scrollToPos){var l;a:{g=c;l=da(f,e.scrollToPos.from);var h=da(f,e.scrollToPos.to),m=e.scrollToPos.margin;for(null==m&&(m=0);;){var p=!1,r=Aa(g,l),n=h&&h!=l?Aa(g,h):r,n=ie(g,Math.min(r.left,n.left),Math.min(r.top,n.top)-
m,Math.max(r.left,n.left),Math.max(r.bottom,n.bottom)+m),u=g.doc.scrollTop,x=g.doc.scrollLeft;null!=n.scrollTop&&(Fa(g,n.scrollTop),1<Math.abs(g.doc.scrollTop-u)&&(p=!0));null!=n.scrollLeft&&(we(g,n.scrollLeft),1<Math.abs(g.doc.scrollLeft-x)&&(p=!0));if(!p){l=r;break a}}}e.scrollToPos.isCursor&&c.state.focused&&(g=c,h=l,m=g.display,p=m.sizer.getBoundingClientRect(),l=null,0>h.top+p.top?l=!0:h.bottom+p.top>(window.innerHeight||document.documentElement.clientHeight)&&(l=!1),null==l||Af||(h=sa("div",
"\u200b",null,"position: absolute; top: "+(h.top-m.viewOffset-g.display.lineSpace.offsetTop)+"px; height: "+(h.bottom-h.top+ad)+"px; left: "+h.left+"px; width: 2px;"),g.display.lineSpace.appendChild(h),h.scrollIntoView(l),g.display.lineSpace.removeChild(h)))}g=e.maybeHiddenMarkers;l=e.maybeUnhiddenMarkers;if(g)for(h=0;h<g.length;++h)g[h].lines.length||Va(g[h],"hide");if(l)for(h=0;h<l.length;++h)l[h].lines.length&&Va(l[h],"unhide");d.wrapper.offsetHeight&&(f.scrollTop=c.display.scroller.scrollTop);
e.updatedDisplay&&$b&&(c.options.lineWrapping&&(d=c,f=e.barMeasure,d.display.sizer.offsetWidth+d.display.gutters.offsetWidth<d.display.scroller.clientWidth-1&&(d.display.sizer.style.minHeight=d.display.heightForcer.style.top="0px",d.display.gutters.style.height=f.docHeight+"px")),e.barMeasure.scrollWidth>e.barMeasure.clientWidth&&e.barMeasure.scrollWidth<e.barMeasure.clientWidth+1&&!(c.display.scroller.clientHeight-c.display.wrapper.clientHeight<ad-3)&&w(c));e.changeObjs&&Va(c,"changes",c,e.changeObjs)}}}
function Ca(a,b){if(a.curOp)return b();ca(a);try{return b()}finally{ba(a)}}function oa(a,b){return function(){if(a.curOp)return b.apply(a,arguments);ca(a);try{return b.apply(a,arguments)}finally{ba(a)}}}function La(a){return function(){if(this.curOp)return a.apply(this,arguments);ca(this);try{return a.apply(this,arguments)}finally{ba(this)}}}function bb(a){return function(){var b=this.cm;if(!b||b.curOp)return a.apply(this,arguments);ca(b);try{return a.apply(this,arguments)}finally{ba(b)}}}function ja(a,
b,c){for(var d=this.line=b,e;d=Ac(d,!1);)d=d.find(1,!0).line,(e||(e=[])).push(d);this.size=(this.rest=e)?qb(kb(this.rest))-c+1:1;this.node=this.text=null;this.hidden=dd(a,b)}function Ja(a,b,c){var d=[],e;for(e=b;e<c;)b=new ja(a.doc,va(a.doc,e),e),e+=b.size,d.push(b);return d}function ma(a,b,c,d){null==b&&(b=a.doc.first);null==c&&(c=a.doc.first+a.doc.size);d||(d=0);var e=a.display;d&&c<e.viewTo&&(null==e.updateLineNumbers||e.updateLineNumbers>b)&&(e.updateLineNumbers=b);a.curOp.viewChanged=!0;if(b>=
e.viewTo)nd&&Ee(a.doc,b)<e.viewTo&&Ua(a);else if(c<=e.viewFrom)nd&&ff(a.doc,c+d)>e.viewFrom?Ua(a):(e.viewFrom+=d,e.viewTo+=d);else if(b<=e.viewFrom&&c>=e.viewTo)Ua(a);else if(b<=e.viewFrom){var f=rc(a,c,c+d,1);f?(e.view=e.view.slice(f.index),e.viewFrom=f.lineN,e.viewTo+=d):Ua(a)}else if(c>=e.viewTo)(f=rc(a,b,b,-1))?(e.view=e.view.slice(0,f.index),e.viewTo=f.lineN):Ua(a);else{var f=rc(a,b,b,-1),g=rc(a,c,c+d,1);f&&g?(e.view=e.view.slice(0,f.index).concat(Ja(a,f.lineN,g.lineN)).concat(e.view.slice(g.index)),
e.viewTo+=d):Ua(a)}if(a=e.externalMeasured)c<a.lineN?a.lineN+=d:b<a.lineN+a.size&&(e.externalMeasured=null)}function cb(a,b,c){a.curOp.viewChanged=!0;var d=a.display,e=a.display.externalMeasured;e&&b>=e.lineN&&b<e.lineN+e.size&&(d.externalMeasured=null);b<d.viewFrom||b>=d.viewTo||(a=d.view[ac(a,b)],null!=a.node&&(a=a.changes||(a.changes=[]),-1==Xb(a,c)&&a.push(c)))}function Ua(a){a.display.viewFrom=a.display.viewTo=a.doc.first;a.display.view=[];a.display.viewOffset=0}function ac(a,b){if(b>=a.display.viewTo)return null;
b-=a.display.viewFrom;if(0>b)return null;for(var c=a.display.view,d=0;d<c.length;d++)if(b-=c[d].size,0>b)return d}function rc(a,b,c,d){var e=ac(a,b),f=a.display.view;if(!nd||c==a.doc.first+a.doc.size)return{index:e,lineN:c};for(var g=0,l=a.display.viewFrom;g<e;g++)l+=f[g].size;if(l!=b){if(0<d){if(e==f.length-1)return null;b=l+f[e].size-b;e++}else b=l-b;c+=b}for(;Ee(a.doc,c)!=c;){if(e==(0>d?0:f.length-1))return null;c+=d*f[e-(0>d?1:0)].size;e+=d}return{index:e,lineN:c}}function bd(a){a=a.display.view;
for(var b=0,c=0;c<a.length;c++){var d=a[c];d.hidden||d.node&&!d.changes||++b}return b}function zd(a){a.display.pollingFast||a.display.poll.set(a.options.pollInterval,function(){ve(a);a.state.focused&&zd(a)})}function sc(a){function b(){ve(a)||c?(a.display.pollingFast=!1,zd(a)):(c=!0,a.display.poll.set(60,b))}var c=!1;a.display.pollingFast=!0;a.display.poll.set(20,b)}function ve(a){var b=a.display.input,c=a.display.prevInput,d=a.doc;if(!a.state.focused||Gg(b)&&!c||lb(a)||a.options.disableInput)return!1;
a.state.pasteIncoming&&a.state.fakedLastChar&&(b.value=b.value.substring(0,b.value.length-1),a.state.fakedLastChar=!1);var e=b.value;if(e==c&&!a.somethingSelected())return!1;if(Oa&&9<=nb&&a.display.inputHasSelection===e||Mc&&/[\uf700-\uf7ff]/.test(e))return mb(a),!1;var f=!a.curOp;f&&ca(a);a.display.shift=!1;8203!=e.charCodeAt(0)||d.sel!=a.display.selForContextMenu||c||(c="\u200b");for(var g=0,l=Math.min(c.length,e.length);g<l&&c.charCodeAt(g)==e.charCodeAt(g);)++g;var l=e.slice(g),h=Ma(l),m=null;
a.state.pasteIncoming&&1<d.sel.ranges.length&&(Yd&&Yd.join("\n")==l?m=0==d.sel.ranges.length%Yd.length&&ee(Yd,Ma):h.length==d.sel.ranges.length&&(m=ee(h,function(a){return[a]})));for(var q=d.sel.ranges.length-1;0<=q;q--){var p=d.sel.ranges[q],r=p.from(),n=p.to();g<c.length?r=ka(r.line,r.ch-(c.length-g)):a.state.overwrite&&p.empty()&&!a.state.pasteIncoming&&(n=ka(n.line,Math.min(va(d,n.line).text.length,n.ch+kb(h).length)));var t=a.curOp.updateInput,n={from:r,to:n,text:m?m[q%m.length]:h,origin:a.state.pasteIncoming?
"paste":a.state.cutIncoming?"cut":"+input"};Rb(a.doc,n);Mb(a,"inputRead",a,n);if(l&&!a.state.pasteIncoming&&a.options.electricChars&&a.options.smartIndent&&100>p.head.ch&&(!q||d.sel.ranges[q-1].head.line!=p.head.line))if(r=a.getModeAt(p.head),r.electricChars)for(n=0;n<r.electricChars.length;n++){if(-1<l.indexOf(r.electricChars.charAt(n))){cc(a,p.head.line,"smart");break}}else r.electricInput&&(n=$a(n),r.electricInput.test(va(d,n.line).text.slice(0,n.ch))&&cc(a,p.head.line,"smart"))}Ib(a);a.curOp.updateInput=
t;a.curOp.typing=!0;1E3<e.length||-1<e.indexOf("\n")?b.value=a.display.prevInput="":a.display.prevInput=e;f&&ba(a);a.state.pasteIncoming=a.state.cutIncoming=!1;return!0}function mb(a,b){var c,d,e=a.doc;a.somethingSelected()?(a.display.prevInput="",c=e.sel.primary(),d=(c=Cd&&(100<c.to().line-c.from().line||1E3<(d=a.getSelection()).length))?"-":d||a.getSelection(),a.display.input.value=d,a.state.focused&&ua(a.display.input),Oa&&9<=nb&&(a.display.inputHasSelection=d)):b||(a.display.prevInput=a.display.input.value=
"",Oa&&9<=nb&&(a.display.inputHasSelection=null));a.display.inaccurateSelection=c}function Qb(a){"nocursor"==a.options.readOnly||Ae&&Xc()==a.display.input||a.display.input.focus()}function Qd(a){a.state.focused||(Qb(a),Cc(a))}function lb(a){return a.options.readOnly||a.doc.cantEdit}function zc(a){function b(){a.state.focused&&setTimeout(yd(Qb,a),0)}function c(b){ed(a,b)||Uc(b)}function d(b){if(a.somethingSelected())Yd=a.getSelections(),e.inaccurateSelection&&(e.prevInput="",e.inaccurateSelection=
!1,e.input.value=Yd.join("\n"),ua(e.input));else{for(var c=[],f=[],g=0;g<a.doc.sel.ranges.length;g++){var l=a.doc.sel.ranges[g].head.line,l={anchor:ka(l,0),head:ka(l+1,0)};f.push(l);c.push(a.getRange(l.anchor,l.head))}"cut"==b.type?a.setSelections(f,null,qd):(e.prevInput="",e.input.value=c.join("\n"),ua(e.input));Yd=c}"cut"==b.type&&(a.state.cutIncoming=!0)}var e=a.display;ya(e.scroller,"mousedown",oa(a,nf));Oa&&11>nb?ya(e.scroller,"dblclick",oa(a,function(b){if(!ed(a,b)){var c=bc(a,b);!c||be(a,b,
"gutterClick",!0,Mb)||gc(a.display,b)||(P(b),b=Me(a,c),y(a.doc,b.anchor,b.head))}})):ya(e.scroller,"dblclick",function(b){ed(a,b)||P(b)});ya(e.lineSpace,"selectstart",function(a){gc(e,a)||P(a)});Yc||ya(e.scroller,"contextmenu",function(b){sf(a,b)});ya(e.scroller,"scroll",function(){e.scroller.clientHeight&&(Fa(a,e.scroller.scrollTop),we(a,e.scroller.scrollLeft,!0),Va(a,"scroll",a))});ya(e.scrollbarV,"scroll",function(){e.scroller.clientHeight&&Fa(a,e.scrollbarV.scrollTop)});ya(e.scrollbarH,"scroll",
function(){e.scroller.clientHeight&&we(a,e.scrollbarH.scrollLeft)});ya(e.scroller,"mousewheel",function(b){tg(a,b)});ya(e.scroller,"DOMMouseScroll",function(b){tg(a,b)});ya(e.scrollbarH,"mousedown",b);ya(e.scrollbarV,"mousedown",b);ya(e.wrapper,"scroll",function(){e.wrapper.scrollTop=e.wrapper.scrollLeft=0});ya(e.input,"keyup",function(b){qf.call(a,b)});ya(e.input,"input",function(){Oa&&9<=nb&&a.display.inputHasSelection&&(a.display.inputHasSelection=null);sc(a)});ya(e.input,"keydown",oa(a,lg));ya(e.input,
"keypress",oa(a,rf));ya(e.input,"focus",yd(Cc,a));ya(e.input,"blur",yd(hc,a));a.options.dragDrop&&(ya(e.scroller,"dragstart",function(b){if(Oa&&(!a.state.draggingText||100>+new Date-Dg))Uc(b);else if(!ed(a,b)&&!gc(a.display,b)&&(b.dataTransfer.setData("Text",a.getSelection()),b.dataTransfer.setDragImage&&!Lc)){var c=sa("img",null,null,"position: fixed; left: 0; top: 0;");c.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";vc&&(c.width=c.height=1,a.display.wrapper.appendChild(c),
c._top=c.offsetTop);b.dataTransfer.setDragImage(c,0,0);vc&&c.parentNode.removeChild(c)}}),ya(e.scroller,"dragenter",c),ya(e.scroller,"dragover",c),ya(e.scroller,"drop",oa(a,pf)));ya(e.scroller,"paste",function(b){gc(e,b)||(a.state.pasteIncoming=!0,Qb(a),sc(a))});ya(e.input,"paste",function(){if($b&&!a.state.fakedLastChar&&!(200>new Date-a.state.lastMiddleDown)){var b=e.input.selectionStart,c=e.input.selectionEnd;e.input.value+="$";e.input.selectionEnd=c;e.input.selectionStart=b;a.state.fakedLastChar=
!0}a.state.pasteIncoming=!0;sc(a)});ya(e.input,"cut",d);ya(e.input,"copy",d);Kd&&ya(e.sizer,"mouseup",function(){Xc()==e.input&&e.input.blur();Qb(a)})}function cd(a){var b=a.display;b.cachedCharWidth=b.cachedTextHeight=b.cachedPaddingH=null;a.setSize()}function gc(a,b){for(var c=b.target||b.srcElement;c!=a.wrapper;c=c.parentNode)if(!c||c.ignoreEvents||c.parentNode==a.sizer&&c!=a.mover)return!0}function bc(a,b,c,d){var e=a.display;if(!c&&(c=b.target||b.srcElement,c==e.scrollbarH||c==e.scrollbarV||
c==e.scrollbarFiller||c==e.gutterFiller))return null;var f,g,e=e.lineSpace.getBoundingClientRect();try{f=b.clientX-e.left,g=b.clientY-e.top}catch(l){return null}b=Sa(a,f,g);var h;d&&1==b.xRel&&(h=va(a.doc,b.line).text).length==b.ch&&(d=oc(h,h.length,a.options.tabSize)-h.length,b=ka(b.line,Math.max(0,Math.round((f-sb(a.display).left)/Bc(a.display))-d)));return b}function nf(a){if(!ed(this,a)){var b=this.display;b.shift=a.shiftKey;if(gc(b,a))$b||(b.scroller.draggable=!1,setTimeout(function(){b.scroller.draggable=
!0},100));else if(!be(this,a,"gutterClick",!0,Mb)){var c=bc(this,a);window.focus();switch(ue(a)){case 1:c?Ke(this,a,c):(a.target||a.srcElement)==b.scroller&&P(a);break;case 2:$b&&(this.state.lastMiddleDown=+new Date);c&&y(this.doc,c);setTimeout(yd(Qb,this),20);P(a);break;case 3:Yc&&sf(this,a)}}}}function Ke(a,b,c){setTimeout(yd(Qd,a),0);var d=+new Date,e;Ve&&Ve.time>d-400&&0==Ia(Ve.pos,c)?e="triple":Ue&&Ue.time>d-400&&0==Ia(Ue.pos,c)?(e="double",Ve={time:d,pos:c}):(e="single",Ue={time:d,pos:c});var d=
a.doc.sel,f=Mc?b.metaKey:b.ctrlKey;a.options.dragDrop&&Ne&&!lb(a)&&"single"==e&&-1<d.contains(c)&&d.somethingSelected()?of(a,b,c,f):R(a,b,c,e,f)}function of(a,b,c,d){var e=a.display,f=oa(a,function(g){$b&&(e.scroller.draggable=!1);a.state.draggingText=!1;Zb(document,"mouseup",f);Zb(e.scroller,"drop",f);10>Math.abs(b.clientX-g.clientX)+Math.abs(b.clientY-g.clientY)&&(P(g),d||y(a.doc,c),Qb(a),Oa&&9==nb&&setTimeout(function(){document.body.focus();Qb(a)},20))});$b&&(e.scroller.draggable=!0);a.state.draggingText=
f;e.scroller.dragDrop&&e.scroller.dragDrop();ya(document,"mouseup",f);ya(e.scroller,"drop",f)}function R(a,b,c,d,e){function f(b){if(0!=Ia(n,b))if(n=b,"rect"==d){for(var e=[],g=a.options.tabSize,l=oc(va(m,c.line).text,c.ch,g),h=oc(va(m,b.line).text,b.ch,g),t=Math.min(l,h),l=Math.max(l,h),h=Math.min(c.line,b.line),u=Math.min(a.lastLine(),Math.max(c.line,b.line));h<=u;h++){var v=va(m,h).text,w=Of(v,t,g);t==l?e.push(new aa(ka(h,w),ka(h,w))):v.length>w&&e.push(new aa(ka(h,w),ka(h,Of(v,l,g))))}e.length||
e.push(new aa(c,c));Ra(m,ia(r.ranges.slice(0,p).concat(e),p),{origin:"*mouse",scroll:!1});a.scrollIntoView(b)}else e=q,g=e.anchor,t=b,"single"!=d&&(b="double"==d?Me(a,b):new aa(ka(b.line,0),da(m,ka(b.line+1,0))),0<Ia(b.anchor,g)?(t=b.head,g=ea(e.from(),b.anchor)):(t=b.anchor,g=X(e.to(),b.head))),e=r.ranges.slice(0),e[p]=new aa(da(m,g),t),Ra(m,ia(e,p),gg)}function g(b){var c=++v,e=bc(a,b,!0,"rect"==d);if(e)if(0!=Ia(e,n)){Qd(a);f(e);var l=u(h,m);(e.line>=l.to||e.line<l.from)&&setTimeout(oa(a,function(){v==
c&&g(b)}),150)}else{var q=b.clientY<t.top?-20:b.clientY>t.bottom?20:0;q&&setTimeout(oa(a,function(){v==c&&(h.scroller.scrollTop+=q,g(b))}),50)}}function l(b){v=Infinity;P(b);Qb(a);Zb(document,"mousemove",w);Zb(document,"mouseup",G);m.history.lastSelOrigin=null}var h=a.display,m=a.doc;P(b);var q,p,r=m.sel;e&&!b.shiftKey?(p=m.sel.contains(c),q=-1<p?m.sel.ranges[p]:new aa(c,c)):q=m.sel.primary();b.altKey?(d="rect",e||(q=new aa(c,c)),c=bc(a,b,!0,!0),p=-1):"double"==d?(b=Me(a,c),q=a.display.shift||m.extend?
Ba(m,q,b.anchor,b.head):b):"triple"==d?(b=new aa(ka(c.line,0),da(m,ka(c.line+1,0))),q=a.display.shift||m.extend?Ba(m,q,b.anchor,b.head):b):q=Ba(m,q,c);e?-1<p?pa(m,p,q,gg):(p=m.sel.ranges.length,Ra(m,ia(m.sel.ranges.concat([q]),p),{scroll:!1,origin:"*mouse"})):(p=0,Ra(m,new O([q],0),gg),r=m.sel);var n=c,t=h.wrapper.getBoundingClientRect(),v=0,w=oa(a,function(a){ue(a)?g(a):l(a)}),G=oa(a,l);ya(document,"mousemove",w);ya(document,"mouseup",G)}function be(a,b,c,d,e){try{var f=b.clientX,g=b.clientY}catch(l){return!1}if(f>=
Math.floor(a.display.gutters.getBoundingClientRect().right))return!1;d&&P(b);d=a.display;var h=d.lineDiv.getBoundingClientRect();if(g>h.bottom||!ec(a,c))return Je(b);g-=h.top-d.viewOffset;for(h=0;h<a.options.gutters.length;++h){var m=d.gutters.childNodes[h];if(m&&m.getBoundingClientRect().right>=f)return f=fd(a.doc,g),e(a,c,a,f,a.options.gutters[h],b),Je(b)}}function pf(a){var b=this;if(!ed(b,a)&&!gc(b.display,a)){P(a);Oa&&(Dg=+new Date);var c=bc(b,a,!0),d=a.dataTransfer.files;if(c&&!lb(b))if(d&&
d.length&&window.FileReader&&window.File){var e=d.length,f=Array(e),g=0;a=function(a,d){var l=new FileReader;l.onload=oa(b,function(){f[d]=l.result;if(++g==e){c=da(b.doc,c);var a={from:c,to:c,text:Ma(f.join("\n")),origin:"paste"};Rb(b.doc,a);pb(b.doc,ta(c,$a(a)))}});l.readAsText(a)};for(var l=0;l<e;++l)a(d[l],l)}else if(b.state.draggingText&&-1<b.doc.sel.contains(c))b.state.draggingText(a),setTimeout(yd(Qb,b),20);else try{if(f=a.dataTransfer.getData("Text")){if(b.state.draggingText&&(Mc?!a.metaKey:
!a.ctrlKey))var h=b.listSelections();Ka(b.doc,ta(c,c));if(h)for(l=0;l<h.length;++l)Sd(b.doc,"",h[l].anchor,h[l].head,"drag");b.replaceSelection(f,"around","paste");Qb(b)}}catch(m){}}}function Fa(a,b){2>Math.abs(a.doc.scrollTop-b)||(a.doc.scrollTop=b,Ub||H(a,{top:b}),a.display.scroller.scrollTop!=b&&(a.display.scroller.scrollTop=b),a.display.scrollbarV.scrollTop!=b&&(a.display.scrollbarV.scrollTop=b),Ub&&H(a),rb(a,100))}function we(a,b,c){(c?b==a.doc.scrollLeft:2>Math.abs(a.doc.scrollLeft-b))||(b=
Math.min(b,a.display.scroller.scrollWidth-a.display.scroller.clientWidth),a.doc.scrollLeft=b,v(a),a.display.scroller.scrollLeft!=b&&(a.display.scroller.scrollLeft=b),a.display.scrollbarH.scrollLeft!=b&&(a.display.scrollbarH.scrollLeft=b))}function tg(a,b){var c=b.wheelDeltaX,d=b.wheelDeltaY;null==c&&b.detail&&b.axis==b.HORIZONTAL_AXIS&&(c=b.detail);null==d&&b.detail&&b.axis==b.VERTICAL_AXIS?d=b.detail:null==d&&(d=b.wheelDelta);var e=a.display,f=e.scroller;if(c&&f.scrollWidth>f.clientWidth||d&&f.scrollHeight>
f.clientHeight){if(d&&Mc&&$b){var g=b.target,l=e.view;a:for(;g!=f;g=g.parentNode)for(var h=0;h<l.length;h++)if(l[h].node==g){a.display.currentWheelTarget=g;break a}}!c||Ub||vc||null==wc?(d&&null!=wc&&(g=d*wc,l=a.doc.scrollTop,h=l+e.wrapper.clientHeight,0>g?l=Math.max(0,l+g-50):h=Math.min(a.doc.height,h+g+50),H(a,{top:l,bottom:h})),20>Df&&(null==e.wheelStartX?(e.wheelStartX=f.scrollLeft,e.wheelStartY=f.scrollTop,e.wheelDX=c,e.wheelDY=d,setTimeout(function(){if(null!=e.wheelStartX){var a=f.scrollLeft-
e.wheelStartX,b=f.scrollTop-e.wheelStartY,a=b&&e.wheelDY&&b/e.wheelDY||a&&e.wheelDX&&a/e.wheelDX;e.wheelStartX=e.wheelStartY=null;a&&(wc=(wc*Df+a)/(Df+1),++Df)}},200)):(e.wheelDX+=c,e.wheelDY+=d))):(d&&Fa(a,Math.max(0,Math.min(f.scrollTop+d*wc,f.scrollHeight-f.clientHeight))),we(a,Math.max(0,Math.min(f.scrollLeft+c*wc,f.scrollWidth-f.clientWidth))),P(b),e.wheelStartX=null)}}function pc(a,b,c){if("string"==typeof b&&(b=mc[b],!b))return!1;a.display.pollingFast&&ve(a)&&(a.display.pollingFast=!1);var d=
a.display.shift,e=!1;try{lb(a)&&(a.state.suppressEdits=!0),c&&(a.display.shift=!1),e=b(a)!=Eb}finally{a.display.shift=d,a.state.suppressEdits=!1}return e}function Mf(a){var b=a.state.keyMaps.slice(0);a.options.extraKeys&&b.push(a.options.extraKeys);b.push(a.options.keyMap);return b}function ug(a,b){var c=je(a.options.keyMap),d=c.auto;clearTimeout(We);d&&!Na(b)&&(We=setTimeout(function(){je(a.options.keyMap)==c&&(a.options.keyMap=d.call?d.call(null,a):d,n(a))},50));var e=Yg(b,!0),f=!1;if(!e)return!1;
f=Mf(a);if(f=b.shiftKey?Zc("Shift-"+e,f,function(b){return pc(a,b,!0)})||Zc(e,f,function(b){if("string"==typeof b?/^go[A-Z]/.test(b):b.motion)return pc(a,b)}):Zc(e,f,function(b){return pc(a,b)}))P(b),ib(a),Mb(a,"keyHandled",a,e,b);return f}function Tf(a,b,c){var d=Zc("'"+c+"'",Mf(a),function(b){return pc(a,b,!0)});d&&(P(b),ib(a),Mb(a,"keyHandled",a,"'"+c+"'",b));return d}function lg(a){Qd(this);if(!ed(this,a)){Oa&&11>nb&&27==a.keyCode&&(a.returnValue=!1);var b=a.keyCode;this.display.shift=16==b||
a.shiftKey;var c=ug(this,a);vc&&(Nc=c?b:null,!c&&88==b&&!Cd&&(Mc?a.metaKey:a.ctrlKey)&&this.replaceSelection("",null,"cut"));18!=b||/\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className)||Pg(this)}}function Pg(a){function b(a){18!=a.keyCode&&a.altKey||(Zf(c,"CodeMirror-crosshair"),Zb(document,"keyup",b),Zb(document,"mouseover",b))}var c=a.display.lineDiv;xf(c,"CodeMirror-crosshair");ya(document,"keyup",b);ya(document,"mouseover",b)}function qf(a){16==a.keyCode&&(this.doc.sel.shift=!1);ed(this,
a)}function rf(a){if(!(ed(this,a)||a.ctrlKey&&!a.altKey||Mc&&a.metaKey)){var b=a.keyCode,c=a.charCode;vc&&b==Nc?(Nc=null,P(a)):(vc&&(!a.which||10>a.which)||Kd)&&ug(this,a)||(b=String.fromCharCode(null==c?b:c),Tf(this,a,b)||(Oa&&9<=nb&&(this.display.inputHasSelection=null),sc(this)))}}function Cc(a){"nocursor"!=a.options.readOnly&&(a.state.focused||(Va(a,"focus",a),a.state.focused=!0,xf(a.display.wrapper,"CodeMirror-focused"),a.curOp||a.display.selForContextMenu==a.doc.sel||(mb(a),$b&&setTimeout(yd(mb,
a,!0),0))),zd(a),ib(a))}function hc(a){a.state.focused&&(Va(a,"blur",a),a.state.focused=!1,Zf(a.display.wrapper,"CodeMirror-focused"));clearInterval(a.display.blinker);setTimeout(function(){a.state.focused||(a.display.shift=!1)},150)}function sf(a,b){function c(){if(null!=e.input.selectionStart){var b=a.somethingSelected(),d=e.input.value="\u200b"+(b?e.input.value:"");e.prevInput=b?"":"\u200b";e.input.selectionStart=1;e.input.selectionEnd=d.length;e.selForContextMenu=a.doc.sel}}function d(){e.inputDiv.style.position=
"relative";e.input.style.cssText=l;Oa&&9>nb&&(e.scrollbarV.scrollTop=e.scroller.scrollTop=g);zd(a);if(null!=e.input.selectionStart){(!Oa||Oa&&9>nb)&&c();var b=0,f=function(){e.selForContextMenu==a.doc.sel&&0==e.input.selectionStart?oa(a,mc.selectAll)(a):10>b++?e.detectingSelectAll=setTimeout(f,500):mb(a)};e.detectingSelectAll=setTimeout(f,200)}}if(!ed(a,b,"contextmenu")){var e=a.display;if(!gc(e,b)&&!tf(a,b)){var f=bc(a,b),g=e.scroller.scrollTop;if(f&&!vc){a.options.resetSelectionOnContextMenu&&-1==
a.doc.sel.contains(f)&&oa(a,Ra)(a.doc,ta(f),qd);var l=e.input.style.cssText;e.inputDiv.style.position="absolute";e.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(b.clientY-5)+"px; left: "+(b.clientX-5)+"px; z-index: 1000; background: "+(Oa?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";if($b)var h=window.scrollY;Qb(a);$b&&window.scrollTo(null,h);mb(a);a.somethingSelected()||
(e.input.value=e.prevInput=" ");e.selForContextMenu=a.doc.sel;clearTimeout(e.detectingSelectAll);Oa&&9<=nb&&c();if(Yc){Uc(b);var m=function(){Zb(window,"mouseup",m);setTimeout(d,20)};ya(window,"mouseup",m)}else setTimeout(d,50)}}}}function tf(a,b){return ec(a,"gutterContextMenu")?be(a,b,"gutterContextMenu",!1,Va):!1}function Le(a,b){if(0>Ia(a,b.from))return a;if(0>=Ia(a,b.to))return $a(b);var c=a.line+b.text.length-(b.to.line-b.from.line)-1,d=a.ch;a.line==b.to.line&&(d+=$a(b).ch-b.to.ch);return ka(c,
d)}function Dc(a,b){for(var c=[],d=0;d<a.sel.ranges.length;d++){var e=a.sel.ranges[d];c.push(new aa(Le(e.anchor,b),Le(e.head,b)))}return ia(c,a.sel.primIndex)}function xe(a,b,c){return a.line==b.line?ka(c.line,a.ch-b.ch+c.ch):ka(c.line+(a.line-b.line),a.ch)}function Ad(a,b,c){b={canceled:!1,from:b.from,to:b.to,text:b.text,origin:b.origin,cancel:function(){this.canceled=!0}};c&&(b.update=function(b,c,d,e){b&&(this.from=da(a,b));c&&(this.to=da(a,c));d&&(this.text=d);void 0!==e&&(this.origin=e)});Va(a,
"beforeChange",a,b);a.cm&&Va(a.cm,"beforeChange",a.cm,b);return b.canceled?null:{from:b.from,to:b.to,text:b.text,origin:b.origin}}function Rb(a,b,c){if(a.cm){if(!a.cm.curOp)return oa(a.cm,Rb)(a,b,c);if(a.cm.state.suppressEdits)return}if(ec(a,"beforeChange")||a.cm&&ec(a.cm,"beforeChange"))if(b=Ad(a,b,!0),!b)return;if(c=Te&&!c&&Jg(a,b.from,b.to))for(var d=c.length-1;0<=d;--d)id(a,{from:c[d].from,to:c[d].to,text:d?[""]:b.text});else id(a,b)}function id(a,b){if(1!=b.text.length||""!=b.text[0]||0!=Ia(b.from,
b.to)){var c=Dc(a,b);sg(a,b,c,a.cm?a.cm.curOp.id:NaN);Tc(a,b,c,kg(a,b));var d=[];Nb(a,function(a,c){c||-1!=Xb(d,a.history)||(Kg(a.history,b),d.push(a.history));Tc(a,b,null,kg(a,b))})}}function Rd(a,b,c){if(!a.cm||!a.cm.state.suppressEdits){for(var d=a.history,e,f=a.sel,g="undo"==b?d.done:d.undone,l="undo"==b?d.undone:d.done,h=0;h<g.length&&(e=g[h],c?!e.ranges||e.equals(a.sel):e.ranges);h++);if(h!=g.length){for(d.lastOrigin=d.lastSelOrigin=null;;)if(e=g.pop(),e.ranges){Ie(e,l);if(c&&!e.equals(a.sel)){Ra(a,
e,{clearRedo:!1});return}f=e}else break;c=[];Ie(f,l);l.push({changes:c,generation:d.generation});d.generation=e.generation||++d.maxGeneration;d=ec(a,"beforeChange")||a.cm&&ec(a.cm,"beforeChange");for(h=e.changes.length-1;0<=h;--h){var m=e.changes[h];m.origin=b;if(d&&!Ad(a,m,!1)){g.length=0;break}c.push(ud(a,m));f=h?Dc(a,m):kb(g);Tc(a,m,f,Lf(a,m));!h&&a.cm&&a.cm.scrollIntoView({from:m.from,to:$a(m)});var q=[];Nb(a,function(a,b){b||-1!=Xb(q,a.history)||(Kg(a.history,m),q.push(a.history));Tc(a,m,null,
Lf(a,m))})}}}}function ce(a,b){if(0!=b&&(a.first+=b,a.sel=new O(ee(a.sel.ranges,function(a){return new aa(ka(a.anchor.line+b,a.anchor.ch),ka(a.head.line+b,a.head.ch))}),a.sel.primIndex),a.cm)){ma(a.cm,a.first,a.first-b,b);for(var c=a.cm.display,d=c.viewFrom;d<c.viewTo;d++)cb(a.cm,d,"gutter")}}function Tc(a,b,c,d){if(a.cm&&!a.cm.curOp)return oa(a.cm,Tc)(a,b,c,d);if(b.to.line<a.first)ce(a,b.text.length-1-(b.to.line-b.from.line));else if(!(b.from.line>a.lastLine())){if(b.from.line<a.first){var e=b.text.length-
1-(a.first-b.from.line);ce(a,e);b={from:ka(a.first,0),to:ka(b.to.line+e,b.to.ch),text:[kb(b.text)],origin:b.origin}}e=a.lastLine();b.to.line>e&&(b={from:b.from,to:ka(e,va(a,e).text.length),text:[b.text[0]],origin:b.origin});b.removed=he(a,b.from,b.to);c||(c=Dc(a,b));a.cm?Uf(a.cm,b,d):ge(a,b,d);Ka(a,c,qd)}}function Uf(a,b,c){var e=a.doc,f=a.display,g=b.from,l=b.to,h=!1,m=g.line;a.options.lineWrapping||(m=qb(Qc(va(e,g.line))),e.iter(m,l.line+1,function(a){if(a==f.maxLine)return h=!0}));-1<e.sel.contains(b.from,
b.to)&&Nf(a);ge(e,b,c,d(a));a.options.lineWrapping||(e.iter(m,g.line+b.text.length,function(a){var b=r(a);b>f.maxLineLength&&(f.maxLine=a,f.maxLineLength=b,f.maxLineChanged=!0,h=!1)}),h&&(a.curOp.updateMaxLine=!0));e.frontier=Math.min(e.frontier,g.line);rb(a,400);c=b.text.length-(l.line-g.line)-1;g.line!=l.line||1!=b.text.length||se(a.doc,b)?ma(a,g.line,l.line+1,c):cb(a,g.line,"text");c=ec(a,"changes");if((e=ec(a,"change"))||c)b={from:g,to:l,text:b.text,removed:b.removed,origin:b.origin},e&&Mb(a,
"change",a,b),c&&(a.curOp.changeObjs||(a.curOp.changeObjs=[])).push(b);a.display.selForContextMenu=null}function Sd(a,b,c,d,e){d||(d=c);if(0>Ia(d,c)){var f=d;d=c;c=f}"string"==typeof b&&(b=Ma(b));Rb(a,{from:c,to:d,text:b,origin:e})}function ie(a,b,c,d,e){var f=a.display,g=Yb(a.display);0>c&&(c=0);var l=a.curOp&&null!=a.curOp.scrollTop?a.curOp.scrollTop:f.scroller.scrollTop,h=f.scroller.clientHeight-ad,m={};e-c>h&&(e=c+h);var q=a.doc.height+Ha(f),p=c<g,g=e>q-g;c<l?m.scrollTop=p?0:c:e>l+h&&(e=Math.min(c,
(g?q:e)-h),e!=l&&(m.scrollTop=e));a=a.curOp&&null!=a.curOp.scrollLeft?a.curOp.scrollLeft:f.scroller.scrollLeft;f=f.scroller.clientWidth-ad-f.gutters.offsetWidth;(l=d-b>f)&&(d=c+h);10>b?m.scrollLeft=0:b<a?m.scrollLeft=Math.max(0,b-(l?0:10)):d>f+a-3&&(m.scrollLeft=d+(l?0:10)-f);return m}function Cb(a,b,c){null==b&&null==c||tc(a);null!=b&&(a.curOp.scrollLeft=(null==a.curOp.scrollLeft?a.doc.scrollLeft:a.curOp.scrollLeft)+b);null!=c&&(a.curOp.scrollTop=(null==a.curOp.scrollTop?a.doc.scrollTop:a.curOp.scrollTop)+
c)}function Ib(a){tc(a);var b=a.getCursor(),c=b,d=b;a.options.lineWrapping||(c=b.ch?ka(b.line,b.ch-1):b,d=ka(b.line,b.ch+1));a.curOp.scrollToPos={from:c,to:d,margin:a.options.cursorScrollMargin,isCursor:!0}}function tc(a){var b=a.curOp.scrollToPos;if(b){a.curOp.scrollToPos=null;var c=Lb(a,b.from),d=Lb(a,b.to),b=ie(a,Math.min(c.left,d.left),Math.min(c.top,d.top)-b.margin,Math.max(c.right,d.right),Math.max(c.bottom,d.bottom)+b.margin);a.scrollTo(b.scrollLeft,b.scrollTop)}}function cc(a,b,c,d){var e=
a.doc,f;null==c&&(c="add");"smart"==c&&(e.mode.indent?f=qa(a,b):c="prev");var g=a.options.tabSize,l=va(e,b),h=oc(l.text,null,g);l.stateAfter&&(l.stateAfter=null);var m=l.text.match(/^\s*/)[0],q;if(!d&&!/\S/.test(l.text))q=0,c="not";else if("smart"==c&&(q=e.mode.indent(f,l.text.slice(m.length),l.text),q==Eb||150<q)){if(!d)return;c="prev"}"prev"==c?q=b>e.first?oc(va(e,b-1).text,null,g):0:"add"==c?q=h+a.options.indentUnit:"subtract"==c?q=h-a.options.indentUnit:"number"==typeof c&&(q=h+c);q=Math.max(0,
q);c="";d=0;if(a.options.indentWithTabs)for(a=Math.floor(q/g);a;--a)d+=g,c+="\t";d<q&&(c+=pg(q-d));if(c!=m)Sd(e,c,ka(b,0),ka(b,m.length),"+input");else for(a=0;a<e.sel.ranges.length;a++)if(g=e.sel.ranges[a],g.head.line==b&&g.head.ch<m.length){d=ka(b,m.length);pa(e,a,new aa(d,d));break}l.stateAfter=null}function ic(a,b,c,d){var e=b,f=b;"number"==typeof b?f=va(a,Math.max(a.first,Math.min(b,a.first+a.size-1))):e=qb(b);if(null==e)return null;d(f,e)&&a.cm&&cb(a.cm,e,c);return f}function Jc(a,b){for(var c=
a.doc.sel.ranges,d=[],e=0;e<c.length;e++){for(var f=b(c[e]);d.length&&0>=Ia(f.from,kb(d).to);){var g=d.pop();if(0>Ia(g.from,f.from)){f.from=g.from;break}}d.push(f)}Ca(a,function(){for(var b=d.length-1;0<=b;b--)Sd(a.doc,"",d[b].from,d[b].to,"+delete");Ib(a)})}function Bb(a,b,c,d,e){function f(b){var d=(e?bg:md)(m,l,c,!0);if(null==d){if(b=!b)b=g+c,b<a.first||b>=a.first+a.size?b=q=!1:(g=b,b=m=va(a,b));if(b)l=e?(0>c?Id:Qe)(m):0>c?m.text.length:0;else return q=!1}else l=d;return!0}var g=b.line,l=b.ch,
h=c,m=va(a,g),q=!0;if("char"==d)f();else if("column"==d)f(!0);else if("word"==d||"group"==d){var p=null;d="group"==d;b=a.cm&&a.cm.getHelper(b,"wordChars");for(var r=!0;!(0>c)||f(!r);r=!1){var n=m.text.charAt(l)||"\n",n=kf(n,b)?"w":d&&"\n"==n?"n":!d||/\s/.test(n)?null:"p";!d||r||n||(n="s");if(p&&p!=n){0>c&&(c=1,f());break}n&&(p=n);if(0<c&&!f(!r))break}}h=hb(a,ka(g,l),h,!0);q||(h.hitSide=!0);return h}function jd(a,b,c,d){var e=a.doc,f=b.left,g;"page"==d?(g=Math.min(a.display.wrapper.clientHeight,window.innerHeight||
document.documentElement.clientHeight),g=b.top+c*(g-(0>c?1.5:.5)*Yb(a.display))):"line"==d&&(g=0<c?b.bottom+3:b.top-3);for(;;){b=Sa(a,f,g);if(!b.outside)break;if(0>c?0>=g:g>=e.height){b.hitSide=!0;break}g+=5*c}return b}function Me(a,b){var c=va(a.doc,b.line).text,d=b.ch,e=b.ch;if(c){var f=a.getHelper(b,"wordChars");(0>b.xRel||e==c.length)&&d?--d:++e;for(var g=c.charAt(d),g=kf(g,f)?function(a){return kf(a,f)}:/\s/.test(g)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&!kf(a)};0<d&&
g(c.charAt(d-1));)--d;for(;e<c.length&&g(c.charAt(e));)++e}return new aa(ka(b.line,d),ka(b.line,e))}function Ea(b,c,d,e){a.defaults[b]=c;d&&(Ld[b]=e?function(a,b,c){c!=Oc&&d(a,b,c)}:d)}function je(a){return"string"==typeof a?pd[a]:a}function Gc(a,b,c,d,e){if(d&&d.shared)return Pc(a,b,c,d,e);if(a.cm&&!a.cm.curOp)return oa(a.cm,Gc)(a,b,c,d,e);var f=new $c(a,e);e=Ia(b,c);d&&Rc(d,f,!1);if(0<e||0==e&&!1!==f.clearWhenEmpty)return f;f.replacedWith&&(f.collapsed=!0,f.widgetNode=sa("span",[f.replacedWith],
"CodeMirror-widget"),d.handleMouseEvents||(f.widgetNode.ignoreEvents=!0),d.insertLeft&&(f.widgetNode.insertLeft=!0));if(f.collapsed){if(de(a,b.line,b,c,f)||b.line!=c.line&&de(a,c.line,b,c,f))throw Error("Inserting collapsed marker partially overlapping an existing one");nd=!0}f.addToHistory&&sg(a,{from:b,to:c,origin:"markText"},a.sel,NaN);var g=b.line,l=a.cm,h;a.iter(g,c.line+1,function(a){l&&f.collapsed&&!l.options.lineWrapping&&Qc(a)==l.display.maxLine&&(h=!0);f.collapsed&&g!=b.line&&Ic(a,0);var d=
new De(f,g==b.line?b.ch:null,g==c.line?c.ch:null);a.markedSpans=a.markedSpans?a.markedSpans.concat([d]):[d];d.marker.attachLine(a);++g});f.collapsed&&a.iter(b.line,c.line+1,function(b){dd(a,b)&&Ic(b,0)});f.clearOnEnter&&ya(f,"beforeCursorEnter",function(){f.clear()});f.readOnly&&(Te=!0,(a.history.done.length||a.history.undone.length)&&a.clearHistory());f.collapsed&&(f.id=++eb,f.atomic=!0);if(l){h&&(l.curOp.updateMaxLine=!0);if(f.collapsed)ma(l,b.line,c.line+1);else if(f.className||f.title||f.startStyle||
f.endStyle)for(d=b.line;d<=c.line;d++)cb(l,d,"text");f.atomic&&Kb(l.doc);Mb(l,"markerAdded",l,f)}return f}function Pc(a,b,c,d,e){d=Rc(d);d.shared=!1;var f=[Gc(a,b,c,d,e)],g=f[0],l=d.widgetNode;Nb(a,function(a){l&&(d.widgetNode=l.cloneNode(!0));f.push(Gc(a,da(a,b),da(a,c),d,e));for(var h=0;h<a.linked.length;++h)if(a.linked[h].isParent)return;g=kb(f)});return new Ye(f,g)}function ye(a){return a.findMarks(ka(a.first,0),a.clipPos(ka(a.lastLine())),function(a){return a.parent})}function Ig(a){for(var b=
0;b<a.length;b++){var c=a[b],d=[c.primary.doc];Nb(c.primary.doc,function(a){d.push(a)});for(var e=0;e<c.markers.length;e++){var f=c.markers[e];-1==Xb(d,f.doc)&&(f.parent=null,c.markers.splice(e--,1))}}}function De(a,b,c){this.marker=a;this.from=b;this.to=c}function yc(a,b){if(a)for(var c=0;c<a.length;++c){var d=a[c];if(d.marker==b)return d}}function kg(a,b){var c=ha(a,b.from.line)&&va(a,b.from.line).markedSpans,d=ha(a,b.to.line)&&va(a,b.to.line).markedSpans;if(!c&&!d)return null;var e=b.from.ch,f=
b.to.ch,g=0==Ia(b.from,b.to);if(c)for(var l=0,h;l<c.length;++l){var m=c[l],q=m.marker;if(null==m.from||(q.inclusiveLeft?m.from<=e:m.from<e)||!(m.from!=e||"bookmark"!=q.type||g&&m.marker.insertLeft)){var p=null==m.to||(q.inclusiveRight?m.to>=e:m.to>e);(h||(h=[])).push(new De(q,m.from,p?null:m.to))}}c=h;if(d)for(var l=0,r;l<d.length;++l)if(h=d[l],m=h.marker,null==h.to||(m.inclusiveRight?h.to>=f:h.to>f)||h.from==f&&"bookmark"==m.type&&(!g||h.marker.insertLeft))q=null==h.from||(m.inclusiveLeft?h.from<=
f:h.from<f),(r||(r=[])).push(new De(m,q?null:h.from-f,null==h.to?null:h.to-f));d=r;g=1==b.text.length;r=kb(b.text).length+(g?e:0);if(c)for(f=0;f<c.length;++f)if(l=c[f],null==l.to)(h=yc(d,l.marker),h)?g&&(l.to=null==h.to?null:h.to+r):l.to=e;if(d)for(f=0;f<d.length;++f)l=d[f],null!=l.to&&(l.to+=r),null==l.from?(h=yc(c,l.marker),h||(l.from=r,g&&(c||(c=[])).push(l))):(l.from+=r,g&&(c||(c=[])).push(l));c&&(c=sd(c));d&&d!=c&&(d=sd(d));e=[c];if(!g){var g=b.text.length-2,n;if(0<g&&c)for(f=0;f<c.length;++f)null==
c[f].to&&(n||(n=[])).push(new De(c[f].marker,null,null));for(f=0;f<g;++f)e.push(n);e.push(d)}return e}function sd(a){for(var b=0;b<a.length;++b){var c=a[b];null!=c.from&&c.from==c.to&&!1!==c.marker.clearWhenEmpty&&a.splice(b--,1)}return a.length?a:null}function Lf(a,b){var c;if(c=b["spans_"+a.id]){for(var d=0,e=[];d<b.text.length;++d)e.push(Mg(c[d]));c=e}else c=null;d=kg(a,b);if(!c)return d;if(!d)return c;for(e=0;e<c.length;++e){var f=c[e],g=d[e];if(f&&g){var l=0;a:for(;l<g.length;++l){for(var h=
g[l],m=0;m<f.length;++m)if(f[m].marker==h.marker)continue a;f.push(h)}}else g&&(c[e]=g)}return c}function Jg(a,b,c){var d=null;a.iter(b.line,c.line+1,function(a){if(a.markedSpans)for(var b=0;b<a.markedSpans.length;++b){var c=a.markedSpans[b].marker;!c.readOnly||d&&-1!=Xb(d,c)||(d||(d=[])).push(c)}});if(!d)return null;a=[{from:b,to:c}];for(b=0;b<d.length;++b){c=d[b];for(var e=c.find(0),f=0;f<a.length;++f){var g=a[f];if(!(0>Ia(g.to,e.from)||0<Ia(g.from,e.to))){var l=[f,1],h=Ia(g.from,e.from),m=Ia(g.to,
e.to);(0>h||!c.inclusiveLeft&&!h)&&l.push({from:g.from,to:e.from});(0<m||!c.inclusiveRight&&!m)&&l.push({from:e.to,to:g.to});a.splice.apply(a,l);f+=l.length-1}}}return a}function df(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c)b[c].marker.detachLine(a);a.markedSpans=null}}function mg(a,b){if(b){for(var c=0;c<b.length;++c)b[c].marker.attachLine(a);a.markedSpans=b}}function ef(a,b){var c=a.lines.length-b.lines.length;if(0!=c)return c;var c=a.find(),d=b.find(),e=Ia(c.from,d.from)||(a.inclusiveLeft?
-1:0)-(b.inclusiveLeft?-1:0);return e?-e:(c=Ia(c.to,d.to)||(a.inclusiveRight?1:0)-(b.inclusiveRight?1:0))?c:b.id-a.id}function Ac(a,b){var c=nd&&a.markedSpans,d;if(c)for(var e,f=0;f<c.length;++f)e=c[f],e.marker.collapsed&&null==(b?e.from:e.to)&&(!d||0>ef(d,e.marker))&&(d=e.marker);return d}function de(a,b,c,d,e){a=va(a,b);if(a=nd&&a.markedSpans)for(b=0;b<a.length;++b){var f=a[b];if(f.marker.collapsed){var g=f.marker.find(0),l=Ia(g.from,c)||(f.marker.inclusiveLeft?-1:0)-(e.inclusiveLeft?-1:0),h=Ia(g.to,
d)||(f.marker.inclusiveRight?1:0)-(e.inclusiveRight?1:0);if(!(0<=l&&0>=h||0>=l&&0<=h)&&(0>=l&&(0<Ia(g.to,c)||f.marker.inclusiveRight&&e.inclusiveLeft)||0<=l&&(0>Ia(g.from,d)||f.marker.inclusiveLeft&&e.inclusiveRight)))return!0}}}function Qc(a){for(var b;b=Ac(a,!0);)a=b.find(-1,!0).line;return a}function Ee(a,b){var c=va(a,b),d=Qc(c);return c==d?b:qb(d)}function ff(a,b){if(b>a.lastLine())return b;var c=va(a,b),d;if(!dd(a,c))return b;for(;d=Ac(c,!1);)c=d.find(1,!0).line;return qb(c)+1}function dd(a,
b){var c=nd&&b.markedSpans;if(c)for(var d,e=0;e<c.length;++e)if(d=c[e],d.marker.collapsed&&(null==d.from||!d.marker.widgetNode&&0==d.from&&d.marker.inclusiveLeft&&gf(a,b,d)))return!0}function gf(a,b,c){if(null==c.to)return b=c.marker.find(1,!0),gf(a,b.line,yc(b.line.markedSpans,c.marker));if(c.marker.inclusiveRight&&c.to==b.text.length)return!0;for(var d,e=0;e<b.markedSpans.length;++e)if(d=b.markedSpans[e],d.marker.collapsed&&!d.marker.widgetNode&&d.from==c.to&&(null==d.to||d.to!=c.from)&&(d.marker.inclusiveLeft||
c.marker.inclusiveRight)&&gf(a,b,d))return!0}function Fe(a){if(null!=a.height)return a.height;var b;a:{b=document.body;var c=a.node;if(b.contains)b=b.contains(c);else{for(;c=c.parentNode;)if(c==b){b=!0;break a}b=void 0}}b||(b="position: relative;",a.coverGutter&&(b+="margin-left: -"+a.cm.getGutterElement().offsetWidth+"px;"),Tb(a.cm.display.measure,sa("div",[a.node],null,b)));return a.height=a.node.offsetHeight}function Lg(a,b,c,d){var e=new $d(a,c,d);e.noHScroll&&(a.display.alignWidgets=!0);ic(a.doc,
b,"widget",function(b){var c=b.widgets||(b.widgets=[]);null==e.insertAt?c.push(e):c.splice(Math.min(c.length-1,Math.max(0,e.insertAt)),0,e);e.line=b;dd(a.doc,b)||(c=Hc(b)<a.doc.scrollTop,Ic(b,b.height+Fe(e)),c&&Cb(a,null,e.height),a.curOp.forceUpdate=!0);return!0});return e}function mf(a,b){if(a)for(;;){var c=a.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!c)break;a=a.slice(0,c.index)+a.slice(c.index+c[0].length);var d=c[1]?"bgClass":"textClass";null==b[d]?b[d]=c[2]:(new RegExp("(?:^|s)"+c[2]+"(?:$|s)")).test(b[d])||
(b[d]+=" "+c[2])}return a}function qg(b,c){if(b.blankLine)return b.blankLine(c);if(b.innerMode){var d=a.innerMode(b,c);if(d.mode.blankLine)return d.mode.blankLine(d.state)}}function Ge(a,b,c){for(var d=0;10>d;d++){var e=a.token(b,c);if(b.pos>b.start)return e}throw Error("Mode "+a.name+" failed to advance stream.");}function Rf(b,c,d,e,f,g,l){var h=d.flattenSpans;null==h&&(h=b.options.flattenSpans);var m=0,q=null,p=new nc(c,b.options.tabSize),r;for(""==c&&mf(qg(d,e),g);!p.eol();){p.pos>b.options.maxHighlightLength?
(h=!1,l&&Da(b,c,e,p.pos),p.pos=c.length,r=null):r=mf(Ge(d,p,e),g);if(b.options.addModeClass){var n=a.innerMode(d,e).mode.name;n&&(r="m-"+(r?n+" "+r:n))}h&&q==r||(m<p.start&&f(p.start,q),m=p.start,q=r);p.start=p.pos}for(;m<p.pos;)b=Math.min(p.pos,m+5E4),f(b,q),m=b}function Sf(a,b,c,d){var e=[a.state.modeGen],f={};Rf(a,b.text,a.doc.mode,c,function(a,b){e.push(a,b)},f,d);for(c=0;c<a.state.overlays.length;++c){var g=a.state.overlays[c],l=1,h=0;Rf(a,b.text,g.mode,!0,function(a,b){for(var c=l;h<a;){var d=
e[l];d>a&&e.splice(l,1,a,e[l+1],d);l+=2;h=Math.min(a,d)}if(b)if(g.opaque)e.splice(c,l-c,a,"cm-overlay "+b),l=c+2;else for(;c<l;c+=2)d=e[c+1],e[c+1]=(d?d+" ":"")+"cm-overlay "+b},f)}return{styles:e,classes:f.bgClass||f.textClass?f:null}}function Pd(a,b){if(!b.styles||b.styles[0]!=a.state.modeGen){var c=Sf(a,b,b.stateAfter=qa(a,qb(b)));b.styles=c.styles;c.classes?b.styleClasses=c.classes:b.styleClasses&&(b.styleClasses=null)}return b.styles}function Da(a,b,c,d){var e=a.doc.mode,f=new nc(b,a.options.tabSize);
f.start=f.pos=d||0;for(""==b&&qg(e,c);!f.eol()&&f.pos<=a.options.maxHighlightLength;)Ge(e,f,c),f.start=f.pos}function Ng(a,b){if(!a||/^\s*$/.test(a))return null;var c=b.addModeClass?fg:Fc;return c[a]||(c[a]=a.replace(/\S+/g,"cm-$&"))}function rg(a,b){var c=sa("span",null,null,$b?"padding-right: .1px":null),c={pre:sa("pre",[c]),content:c,col:0,pos:0,cm:a};b.measure={};for(var d=0;d<=(b.rest?b.rest.length:0);d++){var e=d?b.rest[d-1]:b.line,f;c.pos=0;c.addToken=xd;(Oa||$b)&&a.getOption("lineWrapping")&&
(c.addToken=kh(c.addToken));var g;if(null!=vf)g=vf;else{g=Tb(a.display.measure,document.createTextNode("A\u062eA"));var l=Od(g,0,1).getBoundingClientRect();g=l.left==l.right?!1:vf=3>Od(g,1,2).getBoundingClientRect().right-l.right}g&&(f=yb(e))&&(c.addToken=fc(c.addToken,f));c.map=[];a:{g=c;var l=Pd(a,e),h=e.markedSpans,m=e.text,q=0;if(h)for(var p=m.length,r=0,n=1,t="",u=void 0,v=0,w=void 0,G=void 0,x=void 0,A=void 0,E=void 0;;){if(v==r){for(var w=G=x=A="",E=null,v=Infinity,I=[],B=0;B<h.length;++B){var z=
h[B],N=z.marker;z.from<=r&&(null==z.to||z.to>r)?(null!=z.to&&v>z.to&&(v=z.to,G=""),N.className&&(w+=" "+N.className),N.startStyle&&z.from==r&&(x+=" "+N.startStyle),N.endStyle&&z.to==v&&(G+=" "+N.endStyle),N.title&&!A&&(A=N.title),N.collapsed&&(!E||0>ef(E.marker,N))&&(E=z)):z.from>r&&v>z.from&&(v=z.from);"bookmark"==N.type&&z.from==r&&N.widgetNode&&I.push(N)}if(E&&(E.from||0)==r&&(hf(g,(null==E.to?p+1:E.to)-r,E.marker,null==E.from),null==E.to))break a;if(!E&&I.length)for(B=0;B<I.length;++B)hf(g,0,
I[B])}if(r>=p)break;for(I=Math.min(p,v);;){if(t){B=r+t.length;E||(z=B>I?t.slice(0,I-r):t,g.addToken(g,z,u?u+w:w,x,r+z.length==v?G:"",A));if(B>=I){t=t.slice(I-r);r=I;break}r=B;x=""}t=m.slice(q,q=l[n++]);u=Ng(l[n++],g.cm.options)}}else for(var n=1;n<l.length;n+=2)g.addToken(g,m.slice(q,q=l[n]),Ng(l[n+1],g.cm.options))}e.styleClasses&&(e.styleClasses.bgClass&&(c.bgClass=zg(e.styleClasses.bgClass,c.bgClass||"")),e.styleClasses.textClass&&(c.textClass=zg(e.styleClasses.textClass,c.textClass||"")));0==
c.map.length&&c.map.push(0,0,c.content.appendChild(yf(a.display.measure)));0==d?(b.measure.map=c.map,b.measure.cache={}):((b.measure.maps||(b.measure.maps=[])).push(c.map),(b.measure.caches||(b.measure.caches=[])).push({}))}Va(a,"renderLine",a,b.line,c.pre);c.pre.className&&(c.textClass=zg(c.pre.className,c.textClass||""));return c}function xd(a,b,c,d,e,f){if(b){var g=a.cm.options.specialChars,l=!1;if(g.test(b))for(var h=document.createDocumentFragment(),m=0;;){g.lastIndex=m;var q=g.exec(b),p=q?q.index-
m:b.length-m;if(p){var r=document.createTextNode(b.slice(m,m+p));Oa&&9>nb?h.appendChild(sa("span",[r])):h.appendChild(r);a.map.push(a.pos,a.pos+p,r);a.col+=p;a.pos+=p}if(!q)break;m+=p+1;"\t"==q[0]?(r=a.cm.options.tabSize,q=r-a.col%r,r=h.appendChild(sa("span",pg(q),"cm-tab")),a.col+=q):(r=a.cm.options.specialCharPlaceholder(q[0]),Oa&&9>nb?h.appendChild(sa("span",[r])):h.appendChild(r),a.col+=1);a.map.push(a.pos,a.pos+1,r);a.pos++}else{a.col+=b.length;var h=document.createTextNode(b);a.map.push(a.pos,
a.pos+b.length,h);Oa&&9>nb&&(l=!0);a.pos+=b.length}if(c||d||e||l)return b=c||"",d&&(b+=d),e&&(b+=e),d=sa("span",[h],b),f&&(d.title=f),a.content.appendChild(d);a.content.appendChild(h)}}function kh(a){function b(a){for(var c=" ",d=0;d<a.length-2;++d)c+=d%2?" ":"\u00a0";return c+" "}return function(c,d,e,f,g,l){a(c,d.replace(/ {3,}/g,b),e,f,g,l)}}function fc(a,b){return function(c,d,e,f,g,l){e=e?e+" cm-force-border":"cm-force-border";for(var h=c.pos,m=h+d.length;;){for(var q=0;q<b.length;q++){var p=
b[q];if(p.to>h&&p.from<=h)break}if(p.to>=m)return a(c,d,e,f,g,l);a(c,d.slice(0,p.to-h),e,f,null,l);f=null;d=d.slice(p.to-h);h=p.to}}}function hf(a,b,c,d){if(c=!d&&c.widgetNode)a.map.push(a.pos,a.pos+b,c),a.content.appendChild(c);a.pos+=b}function se(a,b){return 0==b.from.ch&&0==b.to.ch&&""==kb(b.text)&&(!a.cm||a.cm.options.wholeLineUpdateBefore)}function ge(a,b,c,d){function e(a,c,f){a.text=c;a.stateAfter&&(a.stateAfter=null);a.styles&&(a.styles=null);null!=a.order&&(a.order=null);df(a);mg(a,f);c=
d?d(a):1;c!=a.height&&Ic(a,c);Mb(a,"change",a,b)}var f=b.from,g=b.to,l=b.text,h=va(a,f.line),m=va(a,g.line),q=kb(l),p=c?c[l.length-1]:null,r=g.line-f.line;if(se(a,b)){for(var n=0,t=[];n<l.length-1;++n)t.push(new zb(l[n],c?c[n]:null,d));e(m,m.text,p);r&&a.remove(f.line,r);t.length&&a.insert(f.line,t)}else if(h==m)if(1==l.length)e(h,h.text.slice(0,f.ch)+q+h.text.slice(g.ch),p);else{t=[];for(n=1;n<l.length-1;++n)t.push(new zb(l[n],c?c[n]:null,d));t.push(new zb(q+h.text.slice(g.ch),p,d));e(h,h.text.slice(0,
f.ch)+l[0],c?c[0]:null);a.insert(f.line+1,t)}else if(1==l.length)e(h,h.text.slice(0,f.ch)+l[0]+m.text.slice(g.ch),c?c[0]:null),a.remove(f.line+1,r);else{e(h,h.text.slice(0,f.ch)+l[0],c?c[0]:null);e(m,q+m.text.slice(g.ch),p);n=1;for(t=[];n<l.length-1;++n)t.push(new zb(l[n],c?c[n]:null,d));1<r&&a.remove(f.line+1,r-1);a.insert(f.line+1,t)}Mb(a,"change",a,b)}function vd(a){this.lines=a;this.parent=null;for(var b=0,c=0;b<a.length;++b)a[b].parent=this,c+=a[b].height;this.height=c}function wd(a){this.children=
a;for(var b=0,c=0,d=0;d<a.length;++d){var e=a[d],b=b+e.chunkSize(),c=c+e.height;e.parent=this}this.size=b;this.height=c;this.parent=null}function Nb(a,b,c){function d(a,e,f){if(a.linked)for(var g=0;g<a.linked.length;++g){var l=a.linked[g];if(l.doc!=e){var h=f&&l.sharedHist;if(!c||h)b(l.doc,h),d(l.doc,a,h)}}}d(a,null,!0)}function gd(a,b){if(b.cm)throw Error("This document is already in use.");a.doc=b;b.cm=a;f(a);e(a);a.options.lineWrapping||t(a);a.options.mode=b.modeOption;ma(a)}function va(a,b){b-=
a.first;if(0>b||b>=a.size)throw Error("There is no line "+(b+a.first)+" in the document.");for(var c=a;!c.lines;)for(var d=0;;++d){var e=c.children[d],f=e.chunkSize();if(b<f){c=e;break}b-=f}return c.lines[b]}function he(a,b,c){var d=[],e=b.line;a.iter(b.line,c.line+1,function(a){a=a.text;e==c.line&&(a=a.slice(0,c.ch));e==b.line&&(a=a.slice(b.ch));d.push(a);++e});return d}function Pf(a,b,c){var d=[];a.iter(b,c,function(a){d.push(a.text)});return d}function Ic(a,b){var c=b-a.height;if(c)for(var d=a;d;d=
d.parent)d.height+=c}function qb(a){if(null==a.parent)return null;var b=a.parent;a=Xb(b.lines,a);for(var c=b.parent;c;b=c,c=c.parent)for(var d=0;c.children[d]!=b;++d)a+=c.children[d].chunkSize();return a+b.first}function fd(a,b){var c=a.first;a:do{for(var d=0;d<a.children.length;++d){var e=a.children[d],f=e.height;if(b<f){a=e;continue a}b-=f;c+=e.chunkSize()}return c}while(!a.lines);for(d=0;d<a.lines.length;++d){e=a.lines[d].height;if(b<e)break;b-=e}return c+d}function Hc(a){a=Qc(a);for(var b=0,c=
a.parent,d=0;d<c.lines.length;++d){var e=c.lines[d];if(e==a)break;else b+=e.height}for(a=c.parent;a;c=a,a=c.parent)for(d=0;d<a.children.length&&(e=a.children[d],e!=c);++d)b+=e.height;return b}function yb(a){var b=a.order;null==b&&(b=a.order=Vf(a.text));return b}function Sc(a){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOrigin=this.lastSelOrigin=this.lastOp=this.lastSelOp=null;this.generation=this.maxGeneration=a||1}function ud(a,b){var c={from:Q(b.from),
to:$a(b),text:he(a,b.from,b.to)};Qf(a,c,b.from.line,b.to.line+1);Nb(a,function(a){Qf(a,c,b.from.line,b.to.line+1)},!0);return c}function te(a){for(;a.length;)if(kb(a).ranges)a.pop();else break}function sg(a,b,c,d){var e=a.history;e.undone.length=0;var f=+new Date,g,l;if(l=e.lastOp==d||e.lastOrigin==b.origin&&b.origin&&("+"==b.origin.charAt(0)&&a.cm&&e.lastModTime>f-a.cm.options.historyEventDelay||"*"==b.origin.charAt(0)))e.lastOp==d?(te(e.done),g=kb(e.done)):e.done.length&&!kb(e.done).ranges?g=kb(e.done):
1<e.done.length&&!e.done[e.done.length-2].ranges?(e.done.pop(),g=kb(e.done)):g=void 0,l=g;if(l){var h=kb(g.changes);0==Ia(b.from,b.to)&&0==Ia(b.from,h.to)?h.to=$a(b):g.changes.push(ud(a,b))}else for((g=kb(e.done))&&g.ranges||Ie(a.sel,e.done),g={changes:[ud(a,b)],generation:e.generation},e.done.push(g);e.done.length>e.undoDepth;)e.done.shift(),e.done[0].ranges||e.done.shift();e.done.push(c);e.generation=++e.maxGeneration;e.lastModTime=e.lastSelTime=f;e.lastOp=e.lastSelOp=d;e.lastOrigin=e.lastSelOrigin=
b.origin;h||Va(a,"historyAdded")}function Ie(a,b){var c=kb(b);c&&c.ranges&&c.equals(a)||b.push(a)}function Qf(a,b,c,d){var e=b["spans_"+a.id],f=0;a.iter(Math.max(a.first,c),Math.min(a.first+a.size,d),function(c){c.markedSpans&&((e||(e=b["spans_"+a.id]={}))[f]=c.markedSpans);++f})}function Mg(a){if(!a)return null;for(var b=0,c;b<a.length;++b)a[b].marker.explicitlyCleared?c||(c=a.slice(0,b)):c&&c.push(a[b]);return c?c.length?c:null:a}function Pb(a,b,c){for(var d=0,e=[];d<a.length;++d){var f=a[d];if(f.ranges)e.push(c?
O.prototype.deepCopy.call(f):f);else{var f=f.changes,g=[];e.push({changes:g});for(var l=0;l<f.length;++l){var h=f[l],m;g.push({from:h.from,to:h.to,text:h.text});if(b)for(var q in h)(m=q.match(/^spans_(\d+)$/))&&-1<Xb(b,Number(m[1]))&&(kb(g)[q]=h[q],delete h[q])}}}return e}function hd(a,b,c,d){c<a.line?a.line+=d:b<a.line&&(a.line=b,a.ch=0)}function Og(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e],g=!0;if(f.ranges){f.copied||(f=a[e]=f.deepCopy(),f.copied=!0);for(var l=0;l<f.ranges.length;l++)hd(f.ranges[l].anchor,
b,c,d),hd(f.ranges[l].head,b,c,d)}else{for(l=0;l<f.changes.length;++l){var h=f.changes[l];if(c<h.from.line)h.from=ka(h.from.line+d,h.from.ch),h.to=ka(h.to.line+d,h.to.ch);else if(b<=h.to.line){g=!1;break}}g||(a.splice(0,e+1),e=0)}}}function Kg(a,b){var c=b.from.line,d=b.to.line,e=b.text.length-(d-c)-1;Og(a.done,c,d,e);Og(a.undone,c,d,e)}function Je(a){return null!=a.defaultPrevented?a.defaultPrevented:0==a.returnValue}function ue(a){var b=a.which;null==b&&(a.button&1?b=1:a.button&2?b=3:a.button&4&&
(b=2));Mc&&a.ctrlKey&&1==b&&(b=3);return b}function Mb(a,b){function c(a){return function(){a.apply(null,e)}}var d=a._handlers&&a._handlers[b];if(d){var e=Array.prototype.slice.call(arguments,2),f;qe?f=qe.delayedCallbacks:$e?f=$e:(f=$e=[],setTimeout(ng,0));for(var g=0;g<d.length;++g)f.push(c(d[g]))}}function ng(){var a=$e;$e=null;for(var b=0;b<a.length;++b)a[b]()}function ed(a,b,c){Va(a,c||b.type,a,b);return Je(b)||b.codemirrorIgnore}function Nf(a){var b=a._handlers&&a._handlers.cursorActivity;if(b){a=
a.curOp.cursorActivityHandlers||(a.curOp.cursorActivityHandlers=[]);for(var c=0;c<b.length;++c)-1==Xb(a,b[c])&&a.push(b[c])}}function ec(a,b){var c=a._handlers&&a._handlers[b];return c&&0<c.length}function td(a){a.prototype.on=function(a,b){ya(this,a,b)};a.prototype.off=function(a,b){Zb(this,a,b)}}function og(){this.id=null}function Of(a,b,c){for(var d=0,e=0;;){var f=a.indexOf("\t",d);-1==f&&(f=a.length);var g=f-d;if(f==a.length||e+g>=b)return d+Math.min(g,b-e);e+=f-d;e+=c-e%c;d=f+1;if(e>=b)return d}}
function pg(a){for(;ob.length<=a;)ob.push(kb(ob)+" ");return ob[a]}function kb(a){return a[a.length-1]}function Xb(a,b){for(var c=0;c<a.length;++c)if(a[c]==b)return c;return-1}function ee(a,b){for(var c=[],d=0;d<a.length;d++)c[d]=b(a[d],d);return c}function jf(a,b){var c;Object.create?c=Object.create(a):(c=function(){},c.prototype=a,c=new c);b&&Rc(b,c);return c}function Rc(a,b,c){b||(b={});for(var d in a)!a.hasOwnProperty(d)||!1===c&&b.hasOwnProperty(d)||(b[d]=a[d]);return b}function yd(a){var b=
Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b)}}function kf(a,b){return b?-1<b.source.indexOf("\\w")&&jc(a)?!0:b.test(a):jc(a)}function lf(a){for(var b in a)if(a.hasOwnProperty(b)&&a[b])return!1;return!0}function He(a){return 768<=a.charCodeAt(0)&&uf.test(a)}function sa(a,b,c,d){a=document.createElement(a);c&&(a.className=c);d&&(a.style.cssText=d);if("string"==typeof b)a.appendChild(document.createTextNode(b));else if(b)for(c=0;c<b.length;++c)a.appendChild(b[c]);
return a}function fe(a){for(var b=a.childNodes.length;0<b;--b)a.removeChild(a.firstChild);return a}function Tb(a,b){return fe(a).appendChild(b)}function Xc(){return document.activeElement}function Pe(a){return new RegExp("\\b"+a+"\\b\\s*")}function Zf(a,b){var c=Pe(b);c.test(a.className)&&(a.className=a.className.replace(c,""))}function xf(a,b){Pe(b).test(a.className)||(a.className+=" "+b)}function zg(a,b){for(var c=a.split(" "),d=0;d<c.length;d++)c[d]&&!Pe(c[d]).test(b)&&(b+=" "+c[d]);return b}function Hd(a){if(document.body.getElementsByClassName)for(var b=
document.body.getElementsByClassName("CodeMirror"),c=0;c<b.length;c++){var d=b[c].CodeMirror;d&&a(d)}}function $f(){var a;ya(window,"resize",function(){null==a&&(a=setTimeout(function(){fb=a=null;Hd(cd)},100))});ya(window,"blur",function(){Hd(hc)})}function Ag(a){if(null!=fb)return fb;var b=sa("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");Tb(a,b);b.offsetWidth&&(fb=b.offsetHeight-b.clientHeight);return fb||0}function yf(a){if(null==Fg){var b=sa("span","\u200b");Tb(a,sa("span",[b,
document.createTextNode("x")]));0!=a.firstChild.offsetHeight&&(Fg=1>=b.offsetWidth&&2<b.offsetHeight&&!(Oa&&8>nb))}return Fg?sa("span","\u200b"):sa("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px")}function pe(a,b,c,d){if(!a)return d(b,c,"ltr");for(var e=!1,f=0;f<a.length;++f){var g=a[f];if(g.from<c&&g.to>b||b==c&&g.to==b)d(Math.max(g.from,b),Math.min(g.to,c),1==g.level?"rtl":"ltr"),e=!0}e||d(b,c,"ltr")}function xa(a){return a.level%2?a.to:a.from}function Xd(a){return a.level%
2?a.from:a.to}function Qe(a){return(a=yb(a))?xa(a[0]):0}function Id(a){var b=yb(a);return b?Xd(kb(b)):a.text.length}function Bg(a,b){var c=va(a.doc,b),d=Qc(c);d!=c&&(b=qb(d));d=(c=yb(d))?c[0].level%2?Id(d):Qe(d):0;return ka(b,d)}function Jd(a,b){var c=Bg(a,b.line),d=va(a.doc,c.line),e=yb(d);return e&&0!=e[0].level?c:(d=Math.max(0,d.text.search(/\S/)),ka(c.line,b.line==c.line&&b.ch<=d&&b.ch?0:d))}function ag(a,b){kc=null;for(var c=0,d;c<a.length;++c){var e=a[c];if(e.from<b&&e.to>b)return c;if(e.from==
b||e.to==b)if(null==d)d=c;else{var f;f=e.level;var g=a[d].level,l=a[0].level;f=f==l?!0:g==l?!1:f<g;if(f)return e.from!=e.to&&(kc=d),c;e.from!=e.to&&(kc=c);break}}return d}function zf(a,b,c,d){if(!d)return b+c;do b+=c;while(0<b&&He(a.text.charAt(b)));return b}function bg(a,b,c,d){var e=yb(a);if(!e)return md(a,b,c,d);var f=ag(e,b),g=e[f];for(b=zf(a,b,g.level%2?-c:c,d);;){if(b>g.from&&b<g.to)return b;if(b==g.from||b==g.to){if(ag(e,b)==f)return b;g=e[f+c];return 0<c==g.level%2?g.to:g.from}g=e[f+=c];if(!g)return null;
b=0<c==g.level%2?zf(a,g.to,-1,d):zf(a,g.from,1,d)}}function md(a,b,c,d){b+=c;if(d)for(;0<b&&He(a.text.charAt(b));)b+=c;return 0>b||b>a.text.length?null:b}var Ub=/gecko\/\d/i.test(navigator.userAgent),cg=/MSIE \d/.test(navigator.userAgent),dg=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Oa=cg||dg,nb=Oa&&(cg?document.documentMode||6:dg[1]),$b=/WebKit\//.test(navigator.userAgent),Vg=$b&&/Qt\/\d+\.\d+/.test(navigator.userAgent),Cg=/Chrome\//.test(navigator.userAgent),vc=/Opera\//.test(navigator.userAgent),
Lc=/Apple Computer/.test(navigator.vendor),Kd=/KHTML\//.test(navigator.userAgent),Re=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),Af=/PhantomJS/.test(navigator.userAgent),Se=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Ae=Se||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),Mc=Se||/Mac/.test(navigator.platform),Wg=/win/i.test(navigator.platform),Vb=vc&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);Vb&&(Vb=Number(Vb[1]));
Vb&&15<=Vb&&(vc=!1,$b=!0);var Bf=Mc&&(Vg||vc&&(null==Vb||12.11>Vb)),Yc=Ub||Oa&&9<=nb,Te=!1,nd=!1,ka=a.Pos=function(a,b){if(!(this instanceof ka))return new ka(a,b);this.line=a;this.ch=b},Ia=a.cmpPos=function(a,b){return a.line-b.line||a.ch-b.ch};O.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(a){if(a==this)return!0;if(a.primIndex!=this.primIndex||a.ranges.length!=this.ranges.length)return!1;for(var b=0;b<this.ranges.length;b++){var c=this.ranges[b],d=a.ranges[b];
if(0!=Ia(c.anchor,d.anchor)||0!=Ia(c.head,d.head))return!1}return!0},deepCopy:function(){for(var a=[],b=0;b<this.ranges.length;b++)a[b]=new aa(Q(this.ranges[b].anchor),Q(this.ranges[b].head));return new O(a,this.primIndex)},somethingSelected:function(){for(var a=0;a<this.ranges.length;a++)if(!this.ranges[a].empty())return!0;return!1},contains:function(a,b){b||(b=a);for(var c=0;c<this.ranges.length;c++){var d=this.ranges[c];if(0<=Ia(b,d.from())&&0>=Ia(a,d.to()))return c}return-1}};aa.prototype={from:function(){return ea(this.anchor,
this.head)},to:function(){return X(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var eg={left:0,right:0,top:0,bottom:0},od,qe=null,Cf=0,Yd=null,Ue,Ve,Dg=0,Df=0,wc=null;Oa?wc=-.53:Ub?wc=15:Cg?wc=-.7:Lc&&(wc=-1/3);var We,Nc=null,$a=a.changeEnd=function(a){return a.text?ka(a.from.line+a.text.length-1,kb(a.text).length+(1==a.text.length?a.from.ch:0)):a.to};a.prototype={constructor:a,focus:function(){window.focus();Qb(this);sc(this)},setOption:function(a,
b){var c=this.options,d=c[a];if(c[a]!=b||"mode"==a)c[a]=b,Ld.hasOwnProperty(a)&&oa(this,Ld[a])(this,b,d)},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a,b){this.state.keyMaps[b?"push":"unshift"](a)},removeKeyMap:function(a){for(var b=this.state.keyMaps,c=0;c<b.length;++c)if(b[c]==a||"string"!=typeof b[c]&&b[c].name==a)return b.splice(c,1),!0},addOverlay:La(function(b,c){var d=b.token?b:a.getMode(this.options,b);if(d.startState)throw Error("Overlays may not be stateful.");
this.state.overlays.push({mode:d,modeSpec:b,opaque:c&&c.opaque});this.state.modeGen++;ma(this)}),removeOverlay:La(function(a){for(var b=this.state.overlays,c=0;c<b.length;++c){var d=b[c].modeSpec;if(d==a||"string"==typeof a&&d.name==a){b.splice(c,1);this.state.modeGen++;ma(this);break}}}),indentLine:La(function(a,b,c){"string"!=typeof b&&"number"!=typeof b&&(b=null==b?this.options.smartIndent?"smart":"prev":b?"add":"subtract");ha(this.doc,a)&&cc(this,a,b,c)}),indentSelection:La(function(a){for(var b=
this.doc.sel.ranges,c=-1,d=0;d<b.length;d++){var e=b[d];if(e.empty())e.head.line>c&&(cc(this,e.head.line,a,!0),c=e.head.line,d==this.doc.sel.primIndex&&Ib(this));else{for(var f=e.from(),e=e.to(),g=Math.max(c,f.line),c=Math.min(this.lastLine(),e.line-(e.ch?0:1))+1,e=g;e<c;++e)cc(this,e,a);e=this.doc.sel.ranges;0==f.ch&&b.length==e.length&&0<e[d].from().ch&&pa(this.doc,d,new aa(f,e[d].to()),qd)}}}),getTokenAt:function(a,b){var c=this.doc;a=da(c,a);for(var d=qa(this,a.line,b),e=this.doc.mode,c=va(c,
a.line),c=new nc(c.text,this.options.tabSize);c.pos<a.ch&&!c.eol();){c.start=c.pos;var f=Ge(e,c,d)}return{start:c.start,end:c.pos,string:c.current(),type:f||null,state:d}},getTokenTypeAt:function(a){a=da(this.doc,a);var b=Pd(this,va(this.doc,a.line)),c=0,d=(b.length-1)/2;a=a.ch;if(0==a)b=b[2];else for(;;){var e=c+d>>1;if((e?b[2*e-1]:0)>=a)d=e;else if(b[2*e+1]<a)c=e+1;else{b=b[2*e+2];break}}c=b?b.indexOf("cm-overlay "):-1;return 0>c?b:0==c?null:b.slice(0,c-1)},getModeAt:function(b){var c=this.doc.mode;
return c.innerMode?a.innerMode(c,this.getTokenAt(b).state).mode:c},getHelper:function(a,b){return this.getHelpers(a,b)[0]},getHelpers:function(a,b){var c=[];if(!Md.hasOwnProperty(b))return Md;var d=Md[b],e=this.getModeAt(a);if("string"==typeof e[b])d[e[b]]&&c.push(d[e[b]]);else if(e[b])for(var f=0;f<e[b].length;f++){var g=d[e[b][f]];g&&c.push(g)}else e.helperType&&d[e.helperType]?c.push(d[e.helperType]):d[e.name]&&c.push(d[e.name]);for(f=0;f<d._global.length;f++)g=d._global[f],g.pred(e,this)&&-1==
Xb(c,g.val)&&c.push(g.val);return c},getStateAfter:function(a,b){var c=this.doc;a=Math.max(c.first,Math.min(null==a?c.first+c.size-1:a,c.first+c.size-1));return qa(this,a+1,b)},cursorCoords:function(a,b){var c;c=this.doc.sel.primary();c=null==a?c.head:"object"==typeof a?da(this.doc,a):a?c.from():c.to();return Aa(this,c,b||"page")},charCoords:function(a,b){return jb(this,da(this.doc,a),b||"page")},coordsChar:function(a,b){a=la(this,a,b||"page");return Sa(this,a.left,a.top)},lineAtHeight:function(a,
b){a=la(this,{top:a,left:0},b||"page").top;return fd(this.doc,a+this.display.viewOffset)},heightAtLine:function(a,b){var c=!1,d=this.doc.first+this.doc.size-1;a<this.doc.first?a=this.doc.first:a>d&&(a=d,c=!0);d=va(this.doc,a);return Ab(this,d,{top:0,left:0},b||"page").top+(c?this.doc.height-Hc(d):0)},defaultTextHeight:function(){return Yb(this.display)},defaultCharWidth:function(){return Bc(this.display)},setGutterMarker:La(function(a,b,c){return ic(this.doc,a,"gutter",function(a){var d=a.gutterMarkers||
(a.gutterMarkers={});d[b]=c;!c&&lf(d)&&(a.gutterMarkers=null);return!0})}),clearGutter:La(function(a){var b=this,c=b.doc,d=c.first;c.iter(function(c){c.gutterMarkers&&c.gutterMarkers[a]&&(c.gutterMarkers[a]=null,cb(b,d,"gutter"),lf(c.gutterMarkers)&&(c.gutterMarkers=null));++d})}),addLineWidget:La(function(a,b,c){return Lg(this,a,b,c)}),removeLineWidget:function(a){a.clear()},lineInfo:function(a){if("number"==typeof a){if(!ha(this.doc,a))return null;var b=a;a=va(this.doc,a);if(!a)return null}else if(b=
qb(a),null==b)return null;return{line:b,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(a,b,c,d,e){var f=this.display;a=Aa(this,da(this.doc,a));var g=a.bottom,l=a.left;b.style.position="absolute";f.sizer.appendChild(b);if("over"==d)g=a.top;else if("above"==d||"near"==d){var h=Math.max(f.wrapper.clientHeight,this.doc.height),
m=Math.max(f.sizer.clientWidth,f.lineSpace.clientWidth);("above"==d||a.bottom+b.offsetHeight>h)&&a.top>b.offsetHeight?g=a.top-b.offsetHeight:a.bottom+b.offsetHeight<=h&&(g=a.bottom);l+b.offsetWidth>m&&(l=m-b.offsetWidth)}b.style.top=g+"px";b.style.left=b.style.right="";"right"==e?(l=f.sizer.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==e?l=0:"middle"==e&&(l=(f.sizer.clientWidth-b.offsetWidth)/2),b.style.left=l+"px");c&&(a=ie(this,l,g,l+b.offsetWidth,g+b.offsetHeight),null!=a.scrollTop&&
Fa(this,a.scrollTop),null!=a.scrollLeft&&we(this,a.scrollLeft))},triggerOnKeyDown:La(lg),triggerOnKeyPress:La(rf),triggerOnKeyUp:qf,execCommand:function(a){if(mc.hasOwnProperty(a))return mc[a](this)},findPosH:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);var f=0;for(a=da(this.doc,a);f<b&&(a=Bb(this.doc,a,e,c,d),!a.hitSide);++f);return a},moveH:La(function(a,b){var c=this;c.extendSelectionsBy(function(d){return c.display.shift||c.doc.extend||d.empty()?Bb(c.doc,d.head,a,b,c.options.rtlMoveVisually):0>
a?d.from():d.to()},Be)}),deleteH:La(function(a,b){var c=this.doc;this.doc.sel.somethingSelected()?c.replaceSelection("",null,"+delete"):Jc(this,function(d){var e=Bb(c,d.head,a,b,!1);return 0>a?{from:e,to:d.head}:{from:d.head,to:e}})}),findPosV:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);var f=0;for(a=da(this.doc,a);f<b&&(a=Aa(this,a,"div"),null==d?d=a.left:a.left=d,a=jd(this,a,e,c),!a.hitSide);++f);return a},moveV:La(function(a,b){var c=this,d=this.doc,e=[],f=!c.display.shift&&!d.extend&&d.sel.somethingSelected();
d.extendSelectionsBy(function(g){if(f)return 0>a?g.from():g.to();var l=Aa(c,g.head,"div");null!=g.goalColumn&&(l.left=g.goalColumn);e.push(l.left);var h=jd(c,l,a,b);"page"==b&&g==d.sel.primary()&&Cb(c,null,jb(c,h,"div").top-l.top);return h},Be);if(e.length)for(var g=0;g<d.sel.ranges.length;g++)d.sel.ranges[g].goalColumn=e[g]}),toggleOverwrite:function(a){if(null==a||a!=this.state.overwrite)(this.state.overwrite=!this.state.overwrite)?xf(this.display.cursorDiv,"CodeMirror-overwrite"):Zf(this.display.cursorDiv,
"CodeMirror-overwrite"),Va(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return Xc()==this.display.input},scrollTo:La(function(a,b){null==a&&null==b||tc(this);null!=a&&(this.curOp.scrollLeft=a);null!=b&&(this.curOp.scrollTop=b)}),getScrollInfo:function(){var a=this.display.scroller,b=ad;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-b,width:a.scrollWidth-b,clientHeight:a.clientHeight-b,clientWidth:a.clientWidth-b}},scrollIntoView:La(function(a,b){null==a?(a=
{from:this.doc.sel.primary().head,to:null},null==b&&(b=this.options.cursorScrollMargin)):"number"==typeof a?a={from:ka(a,0),to:null}:null==a.from&&(a={from:a,to:null});a.to||(a.to=a.from);a.margin=b||0;if(null!=a.from.line)tc(this),this.curOp.scrollToPos=a;else{var c=ie(this,Math.min(a.from.left,a.to.left),Math.min(a.from.top,a.to.top)-a.margin,Math.max(a.from.right,a.to.right),Math.max(a.from.bottom,a.to.bottom)+a.margin);this.scrollTo(c.scrollLeft,c.scrollTop)}}),setSize:La(function(a,b){function c(a){return"number"==
typeof a||/^\d+$/.test(String(a))?a+"px":a}var d=this;null!=a&&(d.display.wrapper.style.width=c(a));null!=b&&(d.display.wrapper.style.height=c(b));d.options.lineWrapping&&tb(this);var e=d.display.viewFrom;d.doc.iter(e,d.display.viewTo,function(a){if(a.widgets)for(var b=0;b<a.widgets.length;b++)if(a.widgets[b].noHScroll){cb(d,e,"widget");break}++e});d.curOp.forceUpdate=!0;Va(d,"refresh",this)}),operation:function(a){return Ca(this,a)},refresh:La(function(){var a=this.display.cachedTextHeight;ma(this);
this.curOp.forceUpdate=!0;xb(this);this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop);p(this);(null==a||.5<Math.abs(a-Yb(this.display)))&&f(this);Va(this,"refresh",this)}),swapDoc:La(function(a){var b=this.doc;b.cm=null;gd(this,a);xb(this);mb(this);this.scrollTo(a.scrollLeft,a.scrollTop);Mb(this,"swapDoc",this,b);return b}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};
td(a);var Db=a.defaults={},Ld=a.optionHandlers={},Oc=a.Init={toString:function(){return"CodeMirror.Init"}};Ea("value","",function(a,b){a.setValue(b)},!0);Ea("mode",null,function(a,b){a.doc.modeOption=b;e(a)},!0);Ea("indentUnit",2,e,!0);Ea("indentWithTabs",!1);Ea("smartIndent",!0);Ea("tabSize",4,function(a){c(a);xb(a);ma(a)},!0);Ea("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(a,b){a.options.specialChars=new RegExp(b.source+(b.test("\t")?"":"|\t"),"g");a.refresh()},
!0);Ea("specialCharPlaceholder",function(a){var b=sa("span","\u2022","cm-invalidchar");b.title="\\u"+a.charCodeAt(0).toString(16);return b},function(a){a.refresh()},!0);Ea("electricChars",!0);Ea("rtlMoveVisually",!Wg);Ea("wholeLineUpdateBefore",!0);Ea("theme","default",function(a){h(a);g(a)},!0);Ea("keyMap","default",n);Ea("extraKeys",null);Ea("lineWrapping",!1,function(a){a.options.lineWrapping?(xf(a.display.wrapper,"CodeMirror-wrap"),a.display.sizer.style.minWidth=""):(Zf(a.display.wrapper,"CodeMirror-wrap"),
t(a));f(a);ma(a);xb(a);setTimeout(function(){w(a)},100)},!0);Ea("gutters",[],function(a){l(a.options);g(a)},!0);Ea("fixedGutter",!0,function(a,b){a.display.gutters.style.left=b?K(a.display)+"px":"0";a.refresh()},!0);Ea("coverGutterNextToScrollbar",!1,w,!0);Ea("lineNumbers",!1,function(a){l(a.options);g(a)},!0);Ea("firstLineNumber",1,g,!0);Ea("lineNumberFormatter",function(a){return a},g,!0);Ea("showCursorWhenSelecting",!1,ab,!0);Ea("resetSelectionOnContextMenu",!0);Ea("readOnly",!1,function(a,b){"nocursor"==
b?(hc(a),a.display.input.blur(),a.display.disabled=!0):(a.display.disabled=!1,b||mb(a))});Ea("disableInput",!1,function(a,b){b||mb(a)},!0);Ea("dragDrop",!0);Ea("cursorBlinkRate",530);Ea("cursorScrollMargin",0);Ea("cursorHeight",1,ab,!0);Ea("singleCursorHeightPerLine",!0,ab,!0);Ea("workTime",100);Ea("workDelay",100);Ea("flattenSpans",!0,c,!0);Ea("addModeClass",!1,c,!0);Ea("pollInterval",100);Ea("undoDepth",200,function(a,b){a.doc.history.undoDepth=b});Ea("historyEventDelay",1250);Ea("viewportMargin",
10,function(a){a.refresh()},!0);Ea("maxHighlightLength",1E4,c,!0);Ea("moveInputWithCursor",!0,function(a,b){b||(a.display.inputDiv.style.top=a.display.inputDiv.style.left=0)});Ea("tabindex",null,function(a,b){a.display.input.tabIndex=b||""});Ea("autofocus",null);var Ef=a.modes={},Zd=a.mimeModes={};a.defineMode=function(b,c){a.defaults.mode||"null"==b||(a.defaults.mode=b);if(2<arguments.length){c.dependencies=[];for(var d=2;d<arguments.length;++d)c.dependencies.push(arguments[d])}Ef[b]=c};a.defineMIME=
function(a,b){Zd[a]=b};a.resolveMode=function(b){if("string"==typeof b&&Zd.hasOwnProperty(b))b=Zd[b];else if(b&&"string"==typeof b.name&&Zd.hasOwnProperty(b.name)){var c=Zd[b.name];"string"==typeof c&&(c={name:c});b=jf(c,b);b.name=c.name}else if("string"==typeof b&&/^[\w\-]+\/[\w\-]+\+xml$/.test(b))return a.resolveMode("application/xml");return"string"==typeof b?{name:b}:b||{name:"null"}};a.getMode=function(b,c){c=a.resolveMode(c);var d=Ef[c.name];if(!d)return a.getMode(b,"text/plain");d=d(b,c);if(Qa.hasOwnProperty(c.name)){var e=
Qa[c.name],f;for(f in e)e.hasOwnProperty(f)&&(d.hasOwnProperty(f)&&(d["_"+f]=d[f]),d[f]=e[f])}d.name=c.name;c.helperType&&(d.helperType=c.helperType);if(c.modeProps)for(f in c.modeProps)d[f]=c.modeProps[f];return d};a.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}});a.defineMIME("text/plain","null");var Qa=a.modeExtensions={};a.extendMode=function(a,b){var c=Qa.hasOwnProperty(a)?Qa[a]:Qa[a]={};Rc(b,c)};a.defineExtension=function(b,c){a.prototype[b]=c};a.defineDocExtension=function(a,
b){Jb.prototype[a]=b};a.defineOption=Ea;var wb=[];a.defineInitHook=function(a){wb.push(a)};var Md=a.helpers={};a.registerHelper=function(b,c,d){Md.hasOwnProperty(b)||(Md[b]=a[b]={_global:[]});Md[b][c]=d};a.registerGlobalHelper=function(b,c,d,e){a.registerHelper(b,c,e);Md[b]._global.push({pred:d,val:e})};var Nd=a.copyState=function(a,b){if(!0===b)return b;if(a.copyState)return a.copyState(b);var c={},d;for(d in b){var e=b[d];e instanceof Array&&(e=e.concat([]));c[d]=e}return c},Gf=a.startState=function(a,
b,c){return a.startState?a.startState(b,c):!0};a.innerMode=function(a,b){for(;a.innerMode;){var c=a.innerMode(b);if(!c||c.mode==a)break;b=c.state;a=c.mode}return c||{mode:a,state:b}};var mc=a.commands={selectAll:function(a){a.setSelection(ka(a.firstLine(),0),ka(a.lastLine()),qd)},singleSelection:function(a){a.setSelection(a.getCursor("anchor"),a.getCursor("head"),qd)},killLine:function(a){Jc(a,function(b){if(b.empty()){var c=va(a.doc,b.head.line).text.length;return b.head.ch==c&&b.head.line<a.lastLine()?
{from:b.head,to:ka(b.head.line+1,0)}:{from:b.head,to:ka(b.head.line,c)}}return{from:b.from(),to:b.to()}})},deleteLine:function(a){Jc(a,function(b){return{from:ka(b.from().line,0),to:da(a.doc,ka(b.to().line+1,0))}})},delLineLeft:function(a){Jc(a,function(a){return{from:ka(a.from().line,0),to:a.from()}})},delWrappedLineLeft:function(a){Jc(a,function(b){var c=a.charCoords(b.head,"div").top+5;return{from:a.coordsChar({left:0,top:c},"div"),to:b.from()}})},delWrappedLineRight:function(a){Jc(a,function(b){var c=
a.charCoords(b.head,"div").top+5,c=a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:c},"div");return{from:b.from(),to:c}})},undo:function(a){a.undo()},redo:function(a){a.redo()},undoSelection:function(a){a.undoSelection()},redoSelection:function(a){a.redoSelection()},goDocStart:function(a){a.extendSelection(ka(a.firstLine(),0))},goDocEnd:function(a){a.extendSelection(ka(a.lastLine()))},goLineStart:function(a){a.extendSelectionsBy(function(b){return Bg(a,b.head.line)},{origin:"+move",bias:1})},
goLineStartSmart:function(a){a.extendSelectionsBy(function(b){return Jd(a,b.head)},{origin:"+move",bias:1})},goLineEnd:function(a){a.extendSelectionsBy(function(b){b=b.head.line;for(var c,d=va(a.doc,b);c=Ac(d,!1);)d=c.find(1,!0).line,b=null;c=(c=yb(d))?c[0].level%2?Qe(d):Id(d):d.text.length;return ka(null==b?qb(d):b,c)},{origin:"+move",bias:-1})},goLineRight:function(a){a.extendSelectionsBy(function(b){b=a.charCoords(b.head,"div").top+5;return a.coordsChar({left:a.display.lineDiv.offsetWidth+100,
top:b},"div")},Be)},goLineLeft:function(a){a.extendSelectionsBy(function(b){b=a.charCoords(b.head,"div").top+5;return a.coordsChar({left:0,top:b},"div")},Be)},goLineLeftSmart:function(a){a.extendSelectionsBy(function(b){var c=a.charCoords(b.head,"div").top+5,c=a.coordsChar({left:0,top:c},"div");return c.ch<a.getLine(c.line).search(/\S/)?Jd(a,b.head):c},Be)},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,
"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goGroupRight:function(a){a.moveH(1,"group")},goGroupLeft:function(a){a.moveH(-1,"group")},goWordRight:function(a){a.moveH(1,"word")},delCharBefore:function(a){a.deleteH(-1,"char")},delCharAfter:function(a){a.deleteH(1,"char")},delWordBefore:function(a){a.deleteH(-1,"word")},
delWordAfter:function(a){a.deleteH(1,"word")},delGroupBefore:function(a){a.deleteH(-1,"group")},delGroupAfter:function(a){a.deleteH(1,"group")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("\t")},insertSoftTab:function(a){for(var b=[],c=a.listSelections(),d=a.options.tabSize,e=0;e<c.length;e++){var f=c[e].from(),f=oc(a.getLine(f.line),f.ch,d);b.push(Array(d-
f%d+1).join(" "))}a.replaceSelections(b)},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.execCommand("insertTab")},transposeChars:function(a){Ca(a,function(){for(var b=a.listSelections(),c=[],d=0;d<b.length;d++){var e=b[d].head,f=va(a.doc,e.line).text;if(f)if(e.ch==f.length&&(e=new ka(e.line,e.ch-1)),0<e.ch)e=new ka(e.line,e.ch+1),a.replaceRange(f.charAt(e.ch-1)+f.charAt(e.ch-2),ka(e.line,e.ch-2),e,"+transpose");else if(e.line>a.doc.first){var g=va(a.doc,e.line-1).text;g&&
a.replaceRange(f.charAt(0)+"\n"+g.charAt(g.length-1),ka(e.line-1,g.length-1),ka(e.line,1),"+transpose")}c.push(new aa(e,e))}a.setSelections(c)})},newlineAndIndent:function(a){Ca(a,function(){for(var b=a.listSelections().length,c=0;c<b;c++){var d=a.listSelections()[c];a.replaceRange("\n",d.anchor,d.head,"+input");a.indentLine(d.from().line+1,null,!0);Ib(a)}})},toggleOverwrite:function(a){a.toggleOverwrite()}},pd=a.keyMap={};pd.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",
End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"};pd.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft",
"Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};pd.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo",
"Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft",
"Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection",fallthrough:["basic","emacsy"]};pd.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};
pd["default"]=Mc?pd.macDefault:pd.pcDefault;var Zc=a.lookupKey=function(a,b,c){function d(b){b=je(b);var e=b[a];if(!1===e)return"stop";if(null!=e&&c(e))return!0;if(b.nofallthrough)return"stop";b=b.fallthrough;if(null==b)return!1;if("[object Array]"!=Object.prototype.toString.call(b))return d(b);for(e=0;e<b.length;++e){var f=d(b[e]);if(f)return f}return!1}for(var e=0;e<b.length;++e){var f=d(b[e]);if(f)return"stop"!=f}},Na=a.isModifierKey=function(a){a=Kc[a.keyCode];return"Ctrl"==a||"Alt"==a||"Shift"==
a||"Mod"==a},Yg=a.keyName=function(a,b){if(vc&&34==a.keyCode&&a["char"])return!1;var c=Kc[a.keyCode];if(null==c||a.altGraphKey)return!1;a.altKey&&(c="Alt-"+c);if(Bf?a.metaKey:a.ctrlKey)c="Ctrl-"+c;if(Bf?a.ctrlKey:a.metaKey)c="Cmd-"+c;!b&&a.shiftKey&&(c="Shift-"+c);return c};a.fromTextArea=function(b,c){function d(){b.value=m.getValue()}c||(c={});c.value=b.value;!c.tabindex&&b.tabindex&&(c.tabindex=b.tabindex);!c.placeholder&&b.placeholder&&(c.placeholder=b.placeholder);if(null==c.autofocus){var e=
Xc();c.autofocus=e==b||null!=b.getAttribute("autofocus")&&e==document.body}if(b.form&&(ya(b.form,"submit",d),!c.leaveSubmitMethodAlone)){var f=b.form,g=f.submit;try{var l=f.submit=function(){d();f.submit=g;f.submit();f.submit=l}}catch(h){}}b.style.display="none";var m=a(function(a){b.parentNode.insertBefore(a,b.nextSibling)},c);m.save=d;m.getTextArea=function(){return b};m.toTextArea=function(){d();b.parentNode.removeChild(m.getWrapperElement());b.style.display="";b.form&&(Zb(b.form,"submit",d),"function"==
typeof b.form.submit&&(b.form.submit=g))};return m};var nc=a.StringStream=function(a,b){this.pos=this.start=0;this.string=a;this.tabSize=b||8;this.lineStart=this.lastColumnPos=this.lastColumnValue=0};nc.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(a){var b=this.string.charAt(this.pos);
if("string"==typeof a?b==a:b&&(a.test?a.test(b):a(b)))return++this.pos,b},eatWhile:function(a){for(var b=this.pos;this.eat(a););return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){a=this.string.indexOf(a,this.pos);if(-1<a)return this.pos=a,!0},backUp:function(a){this.pos-=a},column:function(){this.lastColumnPos<this.start&&(this.lastColumnValue=
oc(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start);return this.lastColumnValue-(this.lineStart?oc(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return oc(this.string,null,this.tabSize)-(this.lineStart?oc(this.string,this.lineStart,this.tabSize):0)},match:function(a,b,c){if("string"==typeof a){var d=function(a){return c?a.toLowerCase():a},e=this.string.substr(this.pos,a.length);if(d(e)==d(a))return!1!==b&&(this.pos+=
a.length),!0}else{if((a=this.string.slice(this.pos).match(a))&&0<a.index)return null;a&&!1!==b&&(this.pos+=a[0].length);return a}},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(a,b){this.lineStart+=a;try{return b()}finally{this.lineStart-=a}}};var $c=a.TextMarker=function(a,b){this.lines=[];this.type=b;this.doc=a};td($c);$c.prototype.clear=function(){if(!this.explicitlyCleared){var a=this.doc.cm,b=a&&!a.curOp;b&&ca(a);if(ec(this,"clear")){var c=this.find();
c&&Mb(this,"clear",c.from,c.to)}for(var d=c=null,e=0;e<this.lines.length;++e){var f=this.lines[e],g=yc(f.markedSpans,this);a&&!this.collapsed?cb(a,qb(f),"text"):a&&(null!=g.to&&(d=qb(f)),null!=g.from&&(c=qb(f)));for(var l=f,h=f.markedSpans,m=g,q=void 0,p=0;p<h.length;++p)h[p]!=m&&(q||(q=[])).push(h[p]);l.markedSpans=q;null==g.from&&this.collapsed&&!dd(this.doc,f)&&a&&Ic(f,Yb(a.display))}if(a&&this.collapsed&&!a.options.lineWrapping)for(e=0;e<this.lines.length;++e)f=Qc(this.lines[e]),g=r(f),g>a.display.maxLineLength&&
(a.display.maxLine=f,a.display.maxLineLength=g,a.display.maxLineChanged=!0);null!=c&&a&&this.collapsed&&ma(a,c,d+1);this.lines.length=0;this.explicitlyCleared=!0;this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,a&&Kb(a.doc));a&&Mb(a,"markerCleared",a,this);b&&ba(a);this.parent&&this.parent.clear()}};$c.prototype.find=function(a,b){null==a&&"bookmark"==this.type&&(a=1);for(var c,d,e=0;e<this.lines.length;++e){var f=this.lines[e],g=yc(f.markedSpans,this);if(null!=g.from&&(c=ka(b?f:qb(f),g.from),
-1==a))return c;if(null!=g.to&&(d=ka(b?f:qb(f),g.to),1==a))return d}return c&&{from:c,to:d}};$c.prototype.changed=function(){var a=this.find(-1,!0),b=this,c=this.doc.cm;a&&c&&Ca(c,function(){var d=a.line,e=qb(a.line);if(e=Ta(c,e))qc(e),c.curOp.selectionChanged=c.curOp.forceUpdate=!0;c.curOp.updateMaxLine=!0;dd(b.doc,d)||null==b.height||(e=b.height,b.height=null,(e=Fe(b)-e)&&Ic(d,d.height+e))})};$c.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;b.maybeHiddenMarkers&&
-1!=Xb(b.maybeHiddenMarkers,this)||(b.maybeUnhiddenMarkers||(b.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(a)};$c.prototype.detachLine=function(a){this.lines.splice(Xb(this.lines,a),1);!this.lines.length&&this.doc.cm&&(a=this.doc.cm.curOp,(a.maybeHiddenMarkers||(a.maybeHiddenMarkers=[])).push(this))};var eb=0,Ye=a.SharedTextMarker=function(a,b){this.markers=a;this.primary=b;for(var c=0;c<a.length;++c)a[c].parent=this};td(Ye);Ye.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=
!0;for(var a=0;a<this.markers.length;++a)this.markers[a].clear();Mb(this,"clear")}};Ye.prototype.find=function(a,b){return this.primary.find(a,b)};var $d=a.LineWidget=function(a,b,c){if(c)for(var d in c)c.hasOwnProperty(d)&&(this[d]=c[d]);this.cm=a;this.node=b};td($d);$d.prototype.clear=function(){var a=this.cm,b=this.line.widgets,c=this.line,d=qb(c);if(null!=d&&b){for(var e=0;e<b.length;++e)b[e]==this&&b.splice(e--,1);b.length||(c.widgets=null);var f=Fe(this);Ca(a,function(){var b=-f;Hc(c)<(a.curOp&&
a.curOp.scrollTop||a.doc.scrollTop)&&Cb(a,null,b);cb(a,d,"widget");Ic(c,Math.max(0,c.height-f))})}};$d.prototype.changed=function(){var a=this.height,b=this.cm,c=this.line;this.height=null;var d=Fe(this)-a;d&&Ca(b,function(){b.curOp.forceUpdate=!0;Hc(c)<(b.curOp&&b.curOp.scrollTop||b.doc.scrollTop)&&Cb(b,null,d);Ic(c,c.height+d)})};var zb=a.Line=function(a,b,c){this.text=a;mg(this,b);this.height=c?c(this):1};td(zb);zb.prototype.lineNo=function(){return qb(this)};var Fc={},fg={};vd.prototype={chunkSize:function(){return this.lines.length},
removeInner:function(a,b){for(var c=a,d=a+b;c<d;++c){var e=this.lines[c];this.height-=e.height;var f=e;f.parent=null;df(f);Mb(e,"delete")}this.lines.splice(a,b)},collapse:function(a){a.push.apply(a,this.lines)},insertInner:function(a,b,c){this.height+=c;this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));for(a=0;a<b.length;++a)b[a].parent=this},iterN:function(a,b,c){for(b=a+b;a<b;++a)if(c(this.lines[a]))return!0}};wd.prototype={chunkSize:function(){return this.size},removeInner:function(a,
b){this.size-=b;for(var c=0;c<this.children.length;++c){var d=this.children[c],e=d.chunkSize();if(a<e){var f=Math.min(b,e-a),g=d.height;d.removeInner(a,f);this.height-=g-d.height;e==f&&(this.children.splice(c--,1),d.parent=null);if(0==(b-=f))break;a=0}else a-=e}25>this.size-b&&(1<this.children.length||!(this.children[0]instanceof vd))&&(c=[],this.collapse(c),this.children=[new vd(c)],this.children[0].parent=this)},collapse:function(a){for(var b=0;b<this.children.length;++b)this.children[b].collapse(a)},
insertInner:function(a,b,c){this.size+=b.length;this.height+=c;for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(a<=f){e.insertInner(a,b,c);if(e.lines&&50<e.lines.length){for(;50<e.lines.length;)a=e.lines.splice(e.lines.length-25,25),a=new vd(a),e.height-=a.height,this.children.splice(d+1,0,a),a.parent=this;this.maybeSpill()}break}a-=f}},maybeSpill:function(){if(!(10>=this.children.length)){var a=this;do{var b=a.children.splice(a.children.length-5,5),b=new wd(b);if(a.parent){a.size-=
b.size;a.height-=b.height;var c=Xb(a.parent.children,a);a.parent.children.splice(c+1,0,b)}else c=new wd(a.children),c.parent=a,a.children=[c,b],a=c;b.parent=a.parent}while(10<a.children.length);a.parent.maybeSpill()}},iterN:function(a,b,c){for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(a<f){f=Math.min(b,f-a);if(e.iterN(a,f,c))return!0;if(0==(b-=f))break;a=0}else a-=f}}};var re=0,Jb=a.Doc=function(a,b,c){if(!(this instanceof Jb))return new Jb(a,b,c);null==c&&(c=0);
wd.call(this,[new vd([new zb("",null)])]);this.first=c;this.scrollTop=this.scrollLeft=0;this.cantEdit=!1;this.cleanGeneration=1;this.frontier=c;c=ka(c,0);this.sel=ta(c);this.history=new Sc(null);this.id=++re;this.modeOption=b;"string"==typeof a&&(a=Ma(a));ge(this,{from:c,to:c,text:a});Ra(this,ta(c),qd)};Jb.prototype=jf(wd.prototype,{constructor:Jb,iter:function(a,b,c){c?this.iterN(a-this.first,b-a,c):this.iterN(this.first,this.first+this.size,a)},insert:function(a,b){for(var c=0,d=0;d<b.length;++d)c+=
b[d].height;this.insertInner(a-this.first,b,c)},remove:function(a,b){this.removeInner(a-this.first,b)},getValue:function(a){var b=Pf(this,this.first,this.first+this.size);return!1===a?b:b.join(a||"\n")},setValue:bb(function(a){var b=ka(this.first,0),c=this.first+this.size-1;Rb(this,{from:b,to:ka(c,va(this,c).text.length),text:Ma(a),origin:"setValue"},!0);Ra(this,ta(b))}),replaceRange:function(a,b,c,d){b=da(this,b);c=c?da(this,c):b;Sd(this,a,b,c,d)},getRange:function(a,b,c){a=he(this,da(this,a),da(this,
b));return!1===c?a:a.join(c||"\n")},getLine:function(a){return(a=this.getLineHandle(a))&&a.text},getLineHandle:function(a){if(ha(this,a))return va(this,a)},getLineNumber:function(a){return qb(a)},getLineHandleVisualStart:function(a){"number"==typeof a&&(a=va(this,a));return Qc(a)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(a){return da(this,a)},getCursor:function(a){var b=this.sel.primary();return null==
a||"head"==a?b.head:"anchor"==a?b.anchor:"end"==a||"to"==a||!1===a?b.to():b.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:bb(function(a,b,c){a=da(this,"number"==typeof a?ka(a,b||0):a);Ra(this,ta(a,null),c)}),setSelection:bb(function(a,b,c){var d=da(this,a);a=da(this,b||a);Ra(this,ta(d,a),c)}),extendSelection:bb(function(a,b,c){y(this,da(this,a),b&&da(this,b),c)}),extendSelections:bb(function(a,b){for(var c=[],
d=0;d<a.length;d++)c[d]=da(this,a[d]);za(this,c)}),extendSelectionsBy:bb(function(a,b){za(this,ee(this.sel.ranges,a),b)}),setSelections:bb(function(a,b,c){if(a.length){for(var d=0,e=[];d<a.length;d++)e[d]=new aa(da(this,a[d].anchor),da(this,a[d].head));null==b&&(b=Math.min(a.length-1,this.sel.primIndex));Ra(this,ia(e,b),c)}}),addSelection:bb(function(a,b,c){var d=this.sel.ranges.slice(0);d.push(new aa(da(this,a),da(this,b||a)));Ra(this,ia(d,d.length-1),c)}),getSelection:function(a){for(var b=this.sel.ranges,
c,d=0;d<b.length;d++){var e=he(this,b[d].from(),b[d].to());c=c?c.concat(e):e}return!1===a?c:c.join(a||"\n")},getSelections:function(a){for(var b=[],c=this.sel.ranges,d=0;d<c.length;d++){var e=he(this,c[d].from(),c[d].to());!1!==a&&(e=e.join(a||"\n"));b[d]=e}return b},replaceSelection:function(a,b,c){for(var d=[],e=0;e<this.sel.ranges.length;e++)d[e]=a;this.replaceSelections(d,b,c||"+input")},replaceSelections:bb(function(a,b,c){for(var d=[],e=this.sel,f=0;f<e.ranges.length;f++){var g=e.ranges[f];
d[f]={from:g.from(),to:g.to(),text:Ma(a[f]),origin:c}}if(f=b&&"end"!=b){f=[];c=a=ka(this.first,0);for(e=0;e<d.length;e++){var l=d[e],g=xe(l.from,a,c),h=xe($a(l),a,c);a=l.to;c=h;"around"==b?(l=this.sel.ranges[e],l=0>Ia(l.head,l.anchor),f[e]=new aa(l?h:g,l?g:h)):f[e]=new aa(g,g)}f=new O(f,this.sel.primIndex)}b=f;for(f=d.length-1;0<=f;f--)Rb(this,d[f]);b?pb(this,b):this.cm&&Ib(this.cm)}),undo:bb(function(){Rd(this,"undo")}),redo:bb(function(){Rd(this,"redo")}),undoSelection:bb(function(){Rd(this,"undo",
!0)}),redoSelection:bb(function(){Rd(this,"redo",!0)}),setExtending:function(a){this.extend=a},getExtending:function(){return this.extend},historySize:function(){for(var a=this.history,b=0,c=0,d=0;d<a.done.length;d++)a.done[d].ranges||++b;for(d=0;d<a.undone.length;d++)a.undone[d].ranges||++c;return{undo:b,redo:c}},clearHistory:function(){this.history=new Sc(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(a){a&&(this.history.lastOp=
this.history.lastSelOp=this.history.lastOrigin=null);return this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return{done:Pb(this.history.done),undone:Pb(this.history.undone)}},setHistory:function(a){var b=this.history=new Sc(this.history.maxGeneration);b.done=Pb(a.done.slice(0),null,!0);b.undone=Pb(a.undone.slice(0),null,!0)},addLineClass:bb(function(a,b,c){return ic(this,a,"class",function(a){var d="text"==b?"textClass":
"background"==b?"bgClass":"wrapClass";if(a[d]){if((new RegExp("(?:^|\\s)"+c+"(?:$|\\s)")).test(a[d]))return!1;a[d]+=" "+c}else a[d]=c;return!0})}),removeLineClass:bb(function(a,b,c){return ic(this,a,"class",function(a){var d="text"==b?"textClass":"background"==b?"bgClass":"wrapClass",e=a[d];if(e)if(null==c)a[d]=null;else{var f=e.match(new RegExp("(?:^|\\s+)"+c+"(?:$|\\s+)"));if(!f)return!1;var g=f.index+f[0].length;a[d]=e.slice(0,f.index)+(f.index&&g!=e.length?" ":"")+e.slice(g)||null}else return!1;
return!0})}),markText:function(a,b,c){return Gc(this,da(this,a),da(this,b),c,"range")},setBookmark:function(a,b){var c={replacedWith:b&&(null==b.nodeType?b.widget:b),insertLeft:b&&b.insertLeft,clearWhenEmpty:!1,shared:b&&b.shared};a=da(this,a);return Gc(this,a,a,c,"bookmark")},findMarksAt:function(a){a=da(this,a);var b=[],c=va(this,a.line).markedSpans;if(c)for(var d=0;d<c.length;++d){var e=c[d];(null==e.from||e.from<=a.ch)&&(null==e.to||e.to>=a.ch)&&b.push(e.marker.parent||e.marker)}return b},findMarks:function(a,
b,c){a=da(this,a);b=da(this,b);var d=[],e=a.line;this.iter(a.line,b.line+1,function(f){if(f=f.markedSpans)for(var g=0;g<f.length;g++){var l=f[g];e==a.line&&a.ch>l.to||null==l.from&&e!=a.line||e==b.line&&l.from>b.ch||c&&!c(l.marker)||d.push(l.marker.parent||l.marker)}++e});return d},getAllMarks:function(){var a=[];this.iter(function(b){if(b=b.markedSpans)for(var c=0;c<b.length;++c)null!=b[c].from&&a.push(b[c].marker)});return a},posFromIndex:function(a){var b,c=this.first;this.iter(function(d){d=d.text.length+
1;if(d>a)return b=a,!0;a-=d;++c});return da(this,ka(c,b))},indexFromPos:function(a){a=da(this,a);var b=a.ch;if(a.line<this.first||0>a.ch)return 0;this.iter(this.first,a.line,function(a){b+=a.text.length+1});return b},copy:function(a){var b=new Jb(Pf(this,this.first,this.first+this.size),this.modeOption,this.first);b.scrollTop=this.scrollTop;b.scrollLeft=this.scrollLeft;b.sel=this.sel;b.extend=!1;a&&(b.history.undoDepth=this.history.undoDepth,b.setHistory(this.getHistory()));return b},linkedDoc:function(a){a||
(a={});var b=this.first,c=this.first+this.size;null!=a.from&&a.from>b&&(b=a.from);null!=a.to&&a.to<c&&(c=a.to);b=new Jb(Pf(this,b,c),a.mode||this.modeOption,b);a.sharedHist&&(b.history=this.history);(this.linked||(this.linked=[])).push({doc:b,sharedHist:a.sharedHist});b.linked=[{doc:this,isParent:!0,sharedHist:a.sharedHist}];a=ye(this);for(c=0;c<a.length;c++){var d=a[c],e=d.find(),f=b.clipPos(e.from),e=b.clipPos(e.to);Ia(f,e)&&(f=Gc(b,f,e,d.primary,d.primary.type),d.markers.push(f),f.parent=d)}return b},
unlinkDoc:function(b){b instanceof a&&(b=b.doc);if(this.linked)for(var c=0;c<this.linked.length;++c)if(this.linked[c].doc==b){this.linked.splice(c,1);b.unlinkDoc(this);Ig(ye(this));break}if(b.history==this.history){var d=[b.id];Nb(b,function(a){d.push(a.id)},!0);b.history=new Sc(null);b.history.done=Pb(this.history.done,d);b.history.undone=Pb(this.history.undone,d)}},iterLinkedDocs:function(a){Nb(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm}});Jb.prototype.eachLine=
Jb.prototype.iter;var Zg=["iter","insert","remove","copy","getEditor"],Ze;for(Ze in Jb.prototype)Jb.prototype.hasOwnProperty(Ze)&&0>Xb(Zg,Ze)&&(a.prototype[Ze]=function(a){return function(){return a.apply(this.doc,arguments)}}(Jb.prototype[Ze]));td(Jb);var P=a.e_preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},xc=a.e_stopPropagation=function(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},Uc=a.e_stop=function(a){P(a);xc(a)},ya=a.on=function(a,b,c){a.addEventListener?
a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):(a=a._handlers||(a._handlers={}),(a[b]||(a[b]=[])).push(c))},Zb=a.off=function(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,!1);else if(a.detachEvent)a.detachEvent("on"+b,c);else if(a=a._handlers&&a._handlers[b])for(b=0;b<a.length;++b)if(a[b]==c){a.splice(b,1);break}},Va=a.signal=function(a,b){var c=a._handlers&&a._handlers[b];if(c)for(var d=Array.prototype.slice.call(arguments,2),e=0;e<c.length;++e)c[e].apply(null,d)},
$e=null,ad=30,Eb=a.Pass={toString:function(){return"CodeMirror.Pass"}},qd={scroll:!1},gg={origin:"*mouse"},Be={origin:"+move"};og.prototype.set=function(a,b){clearTimeout(this.id);this.id=setTimeout(b,a)};var oc=a.countColumn=function(a,b,c,d,e){null==b&&(b=a.search(/[^\s\u00a0]/),-1==b&&(b=a.length));d=d||0;for(e=e||0;;){var f=a.indexOf("\t",d);if(0>f||f>=b)return e+(b-d);e+=f-d;e+=c-e%c;d=f+1}},ob=[""],ua=function(a){a.select()};Se?ua=function(a){a.selectionStart=0;a.selectionEnd=a.value.length}:
Oa&&(ua=function(a){try{a.select()}catch(b){}});[].indexOf&&(Xb=function(a,b){return a.indexOf(b)});[].map&&(ee=function(a,b){return a.map(b)});var ze=/[\u00df\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,jc=a.isWordChar=function(a){return/\w/.test(a)||"\u0080"<a&&(a.toUpperCase()!=a.toLowerCase()||ze.test(a))},uf=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,
Od;Od=document.createRange?function(a,b,c){var d=document.createRange();d.setEnd(a,c);d.setStart(a,b);return d}:function(a,b,c){var d=document.body.createTextRange();d.moveToElementText(a.parentNode);d.collapse(!0);d.moveEnd("character",c);d.moveStart("character",b);return d};Oa&&11>nb&&(Xc=function(){try{return document.activeElement}catch(a){return document.body}});var ke=!1,Ne=function(){if(Oa&&9>nb)return!1;var a=sa("div");return"draggable"in a||"dragDrop"in a}(),fb,Fg,vf,Ma=a.splitLines=3!="\n\nb".split(/\n/).length?
function(a){for(var b=0,c=[],d=a.length;b<=d;){var e=a.indexOf("\n",b);-1==e&&(e=a.length);var f=a.slice(b,"\r"==a.charAt(e-1)?e-1:e),g=f.indexOf("\r");-1!=g?(c.push(f.slice(0,g)),b+=g+1):(c.push(f),b=e+1)}return c}:function(a){return a.split(/\r\n?|\n/)},Gg=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}return b&&b.parentElement()==a?0!=b.compareEndPoints("StartToEnd",b):!1},Cd=
function(){var a=sa("div");if("oncopy"in a)return!0;a.setAttribute("oncopy","return;");return"function"==typeof a.oncopy}(),hg=null,Kc={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",107:"=",109:"-",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",
192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};a.keyNames=Kc;(function(){for(var a=0;10>a;a++)Kc[a+48]=Kc[a+96]=String(a);for(a=65;90>=a;a++)Kc[a]=String.fromCharCode(a);for(a=1;12>=a;a++)Kc[a+111]=Kc[a+63235]="F"+a})();var kc,Vf=function(){function a(b){return 247>=b?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(b):
1424<=b&&1524>=b?"R":1536<=b&&1773>=b?"rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm".charAt(b-1536):1774<=b&&2220>=b?"r":8192<=b&&8203>=b?"w":8204==b?"b":"L"}function b(a,c,d){this.level=a;this.from=c;this.to=d}var c=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,d=/[stwN]/,e=/[LRr]/,f=/[Lb1n]/,g=/[1n]/;return function(l){if(!c.test(l))return!1;
for(var h=l.length,m=[],q=0,p;q<h;++q)m.push(a(l.charCodeAt(q)));for(var q=0,r="L";q<h;++q)p=m[q],"m"==p?m[q]=r:r=p;q=0;for(r="L";q<h;++q)p=m[q],"1"==p&&"r"==r?m[q]="n":e.test(p)&&(r=p,"r"==p&&(m[q]="R"));q=1;for(r=m[0];q<h-1;++q)p=m[q],"+"==p&&"1"==r&&"1"==m[q+1]?m[q]="1":","!=p||r!=m[q+1]||"1"!=r&&"n"!=r||(m[q]=r),r=p;for(q=0;q<h;++q)if(p=m[q],","==p)m[q]="N";else if("%"==p){for(r=q+1;r<h&&"%"==m[r];++r);var n=q&&"!"==m[q-1]||r<h&&"1"==m[r]?"1":"N";for(p=q;p<r;++p)m[p]=n;q=r-1}q=0;for(r="L";q<h;++q)p=
m[q],"L"==r&&"1"==p?m[q]="L":e.test(p)&&(r=p);for(q=0;q<h;++q)if(d.test(m[q])){for(r=q+1;r<h&&d.test(m[r]);++r);p="L"==(r<h?m[r]:"L");n="L"==(q?m[q-1]:"L")||p?"L":"R";for(p=q;p<r;++p)m[p]=n;q=r-1}for(var r=[],t,q=0;q<h;)if(f.test(m[q])){p=q;for(++q;q<h&&f.test(m[q]);++q);r.push(new b(0,p,q))}else{var u=q,n=r.length;for(++q;q<h&&"L"!=m[q];++q);for(p=u;p<q;)if(g.test(m[p])){u<p&&r.splice(n,0,new b(1,u,p));u=p;for(++p;p<q&&g.test(m[p]);++p);r.splice(n,0,new b(2,u,p));u=p}else++p;u<q&&r.splice(n,0,new b(1,
u,q))}1==r[0].level&&(t=l.match(/^\s+/))&&(r[0].from=t[0].length,r.unshift(new b(0,0,t[0].length)));1==kb(r).level&&(t=l.match(/\s+$/))&&(kb(r).to-=t[0].length,r.push(new b(0,h-t[0].length,h)));r[0].level!=kb(r).level&&r.push(new b(r[0].level,h,h));return r}}();a.version="4.5.0";return a});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function b(a,b,c,d){var f=a.getLineHandle(b.line),g=b.ch-1,f=0<=g&&h[f.text.charAt(g)]||h[f.text.charAt(++g)];if(!f)return null;var w=">"==f.charAt(1)?1:-1;if(c&&0<w!=(g==b.ch))return null;c=a.getTokenTypeAt(n(b.line,g+1));a=e(a,n(b.line,g+(0<w?1:0)),w,c||null,d);return null==a?null:{from:n(b.line,g),
to:a&&a.pos,match:a&&a.ch==f.charAt(0),forward:0<w}}function e(a,b,c,d,e){var f=e&&e.maxScanLineLength||1E4,g=e&&e.maxScanLines||1E3,u=[];e=e&&e.bracketRegex?e.bracketRegex:/[(){}[\]]/;for(var g=0<c?Math.min(b.line+g,a.lastLine()+1):Math.max(a.firstLine()-1,b.line-g),v=b.line;v!=g;v+=c){var E=a.getLine(v);if(E){var A=0<c?0:E.length-1,K=0<c?E.length:-1;if(!(E.length>f))for(v==b.line&&(A=b.ch-(0>c?1:0));A!=K;A+=c){var F=E.charAt(A);if(e.test(F)&&(void 0===d||a.getTokenTypeAt(n(v,A+1))==d))if(">"==h[F].charAt(1)==
0<c)u.push(F);else if(u.length)u.pop();else return{pos:n(v,A),ch:F}}}}return v-c==(0<c?a.lastLine():a.firstLine())?!1:null}function c(a,c,d){for(var e=a.state.matchBrackets.maxHighlightLineLength||1E3,g=[],h=a.listSelections(),w=0;w<h.length;w++){var u=h[w].empty()&&b(a,h[w].head,!1,d);if(u&&a.getLine(u.from.line).length<=e){var v=u.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket";g.push(a.markText(u.from,n(u.from.line,u.from.ch+1),{className:v}));u.to&&a.getLine(u.to.line).length<=
e&&g.push(a.markText(u.to,n(u.to.line,u.to.ch+1),{className:v}))}}if(g.length)if(f&&a.state.focused&&a.display.input.focus(),d=function(){a.operation(function(){for(var a=0;a<g.length;a++)g[a].clear()})},c)setTimeout(d,800);else return d}function d(a){a.operation(function(){g&&(g(),g=null);g=c(a,!1,a.state.matchBrackets)})}var f=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||8>document.documentMode),n=a.Pos,h={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},g=null;a.defineOption("matchBrackets",
!1,function(b,c,e){e&&e!=a.Init&&b.off("cursorActivity",d);c&&(b.state.matchBrackets="object"==typeof c?c:{},b.on("cursorActivity",d))});a.defineExtension("matchBrackets",function(){c(this,!0)});a.defineExtension("findMatchingBracket",function(a,c,d){return b(this,a,c,d)});a.defineExtension("scanForBracket",function(a,b,c,d){return e(this,a,b,c,d)})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function b(b){if(b.getOption("disableInput"))return a.Pass;for(var c=b.listSelections(),d,g=[],m=0;m<c.length;m++){var p=c[m].head,r=b.getTokenAt(p);if("comment"!=r.type)return a.Pass;var t=a.innerMode(b.getMode(),r.state).mode;if(!d)d=t;else if(d!=t)return a.Pass;t=null;if(d.blockCommentStart&&d.blockCommentContinue){var l=
r.string.indexOf(d.blockCommentEnd),q=b.getRange(a.Pos(p.line,0),a.Pos(p.line,r.end)),w;if(!(-1!=l&&l==r.string.length-d.blockCommentEnd.length&&p.ch>=l))if(0==r.string.indexOf(d.blockCommentStart)){if(t=q.slice(0,r.start),!/^\s*$/.test(t))for(t="",l=0;l<r.start;++l)t+=" "}else-1!=(w=q.indexOf(d.blockCommentContinue))&&w+d.blockCommentContinue.length>r.start&&/^\s*$/.test(q.slice(0,w))&&(t=q.slice(0,w));null!=t&&(t+=d.blockCommentContinue)}null==t&&d.lineComment&&e(b)&&(p=b.getLine(p.line),w=p.indexOf(d.lineComment),
-1<w&&(t=p.slice(0,w),t=/\S/.test(t)?null:t+(d.lineComment+p.slice(w+d.lineComment.length).match(/^\s*/)[0])));if(null==t)return a.Pass;g[m]="\n"+t}b.operation(function(){for(var a=c.length-1;0<=a;a--)b.replaceRange(g[a],c[a].from(),c[a].to(),"+insert")})}function e(a){return(a=a.getOption("continueComments"))&&"object"==typeof a?!1!==a.continueLineComment:!0}for(var c=["clike","css","javascript"],d=0;d<c.length;++d)a.extendMode(c[d],{blockCommentContinue:" * "});a.defineOption("continueComments",
null,function(c,d,e){e&&e!=a.Init&&c.removeKeyMap("continueComment");d&&(e="Enter","string"==typeof d?e=d:"object"==typeof d&&d.key&&(e=d.key),d={name:"continueComment"},d[e]=b,c.addKeyMap(d))})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){function b(a){a=a.search(c);return-1==a?0:a}var e={},c=/[^\s\u00a0]/,d=a.Pos;a.commands.toggleComment=function(a){for(var b=Infinity,c=a.listSelections(),e=null,m=c.length-1;0<=m;m--){var p=c[m].from(),r=c[m].to();p.line>=b||(r.line>=b&&(r=d(b,0)),b=p.line,null==e?a.uncomment(p,r)?e="un":(a.lineComment(p,
r),e="line"):"un"==e?a.uncomment(p,r):a.lineComment(p,r))}};a.defineExtension("lineComment",function(a,n,h){h||(h=e);var g=this,m=g.getModeAt(a),p=h.lineComment||m.lineComment;if(p){var r=g.getLine(a.line);if(null!=r){var t=Math.min(0!=n.ch||n.line==a.line?n.line+1:n.line,g.lastLine()+1),l=null==h.padding?" ":h.padding,q=h.commentBlankLines||a.line==n.line;g.operation(function(){if(h.indent)for(var e=r.slice(0,b(r)),m=a.line;m<t;++m){var n=g.getLine(m),E=e.length;if(q||c.test(n))n.slice(0,E)!=e&&
(E=b(n)),g.replaceRange(e+p+l,d(m,0),d(m,E))}else for(m=a.line;m<t;++m)(q||c.test(g.getLine(m)))&&g.replaceRange(p+l,d(m,0))})}}else if(h.blockCommentStart||m.blockCommentStart)h.fullLines=!0,g.blockComment(a,n,h)});a.defineExtension("blockComment",function(a,b,h){h||(h=e);var g=this,m=g.getModeAt(a),p=h.blockCommentStart||m.blockCommentStart,r=h.blockCommentEnd||m.blockCommentEnd;if(p&&r){var t=Math.min(b.line,g.lastLine());t!=a.line&&0==b.ch&&c.test(g.getLine(t))&&--t;var l=null==h.padding?" ":
h.padding;a.line>t||g.operation(function(){if(0!=h.fullLines){var e=c.test(g.getLine(t));g.replaceRange(l+r,d(t));g.replaceRange(p+l,d(a.line,0));var w=h.blockCommentLead||m.blockCommentLead;if(null!=w)for(var u=a.line+1;u<=t;++u)(u!=t||e)&&g.replaceRange(w+l,d(u,0))}else g.replaceRange(r,b),g.replaceRange(p,a)})}else(h.lineComment||m.lineComment)&&0!=h.fullLines&&g.lineComment(a,b,h)});a.defineExtension("uncomment",function(a,b,h){h||(h=e);var g=this,m=g.getModeAt(a),p=Math.min(b.line,g.lastLine()),
r=Math.min(a.line,p),t=h.lineComment||m.lineComment,l=[],q=null==h.padding?" ":h.padding,w;a:if(t){for(var u=r;u<=p;++u){var v=g.getLine(u),E=v.indexOf(t);-1<E&&!/comment/.test(g.getTokenTypeAt(d(u,E+1)))&&(E=-1);if(-1==E&&(u!=p||u==r)&&c.test(v))break a;if(-1<E&&c.test(v.slice(0,E)))break a;l.push(v)}g.operation(function(){for(var a=r;a<=p;++a){var b=l[a-r],c=b.indexOf(t),e=c+t.length;0>c||(b.slice(e,e+q.length)==q&&(e+=q.length),w=!0,g.replaceRange("",d(a,c),d(a,e)))}});if(w)return!0}var A=h.blockCommentStart||
m.blockCommentStart,K=h.blockCommentEnd||m.blockCommentEnd;if(!A||!K)return!1;var F=h.blockCommentLead||m.blockCommentLead,z=g.getLine(r),B=p==r?z:g.getLine(p),H=z.indexOf(A),G=B.lastIndexOf(K);-1==G&&r!=p&&(B=g.getLine(--p),G=B.lastIndexOf(K));if(-1==H||-1==G||!/comment/.test(g.getTokenTypeAt(d(r,H+1)))||!/comment/.test(g.getTokenTypeAt(d(p,G+1))))return!1;m=z.lastIndexOf(A,a.ch);h=-1==m?-1:z.slice(0,a.ch).indexOf(K,m+A.length);if(-1!=m&&-1!=h&&h+K.length!=a.ch)return!1;h=B.indexOf(K,b.ch);a=B.slice(b.ch).lastIndexOf(A,
h-b.ch);m=-1==h||-1==a?-1:b.ch+a;if(-1!=h&&-1!=m&&m!=b.ch)return!1;g.operation(function(){g.replaceRange("",d(p,G-(q&&B.slice(G-q.length,G)==q?q.length:0)),d(p,G+K.length));var a=H+A.length;q&&z.slice(a,a+q.length)==q&&(a+=q.length);g.replaceRange("",d(r,H),d(r,a));if(F)for(a=r+1;a<=p;++a){var b=g.getLine(a),e=b.indexOf(F);if(-1!=e&&!c.test(b.slice(0,e))){var f=e+F.length;q&&b.slice(f,f+q.length)==q&&(f+=q.length);g.replaceRange("",d(a,e),d(a,f))}}});return!0})});
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){a.defineMode("javascript",function(b,e){function c(a,b,c){tb=a;xb=c;return b}function d(a,b){var d=a.next();if('"'==d||"'"==d)return b.tokenize=f(d),b.tokenize(a,b);if("."==d&&a.match(/^\d+(?:[eE][+\-]?\d+)?/))return c("number","number");if("."==d&&a.match(".."))return c("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(d))return c(d);
if("="==d&&a.eat(">"))return c("=>","operator");if("0"==d&&a.eat(/x/i))return a.eatWhile(/[\da-f]/i),c("number","number");if(/\d/.test(d))return a.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),c("number","number");if("/"==d){if(a.eat("*"))return b.tokenize=n,n(a,b);if(a.eat("/"))return a.skipToEnd(),c("comment","comment");if("operator"==b.lastType||"keyword c"==b.lastType||"sof"==b.lastType||/^[\[{}\(,;:]$/.test(b.lastType)){a:for(var d=!1,e,g=!1;null!=(e=a.next());){if(!d){if("/"==e&&!g)break a;"["==
e?g=!0:g&&"]"==e&&(g=!1)}d=!d&&"\\"==e}a.eatWhile(/[gimy]/);return c("regexp","string-2")}a.eatWhile(ra);return c("operator","operator",a.current())}if("`"==d)return b.tokenize=h,h(a,b);if("#"==d)return a.skipToEnd(),c("error","error");if(ra.test(d))return a.eatWhile(ra),c("operator","operator",a.current());if(Ta.test(d))return a.eatWhile(Ta),d=a.current(),(e=Ya.propertyIsEnumerable(d)&&Ya[d])&&"."!=b.lastType?c(e.type,e.style,d):c("variable","variable",d)}function f(a){return function(b,e){var f=
!1,g;if(qa&&"@"==b.peek()&&b.match(qc))return e.tokenize=d,c("jsonld-keyword","meta");for(;null!=(g=b.next())&&(g!=a||f);)f=!f&&"\\"==g;f||(e.tokenize=d);return c("string","string")}}function n(a,b){for(var e=!1,f;f=a.next();){if("/"==f&&e){b.tokenize=d;break}e="*"==f}return c("comment","comment")}function h(a,b){for(var e=!1,f;null!=(f=a.next());){if(!e&&("`"==f||"$"==f&&a.eat("{"))){b.tokenize=d;break}e=!e&&"\\"==f}return c("quasi","string-2",a.current())}function g(a,b){b.fatArrowAt&&(b.fatArrowAt=
null);var c=a.string.indexOf("=>",a.start);if(!(0>c)){for(var d=0,e=!1,c=c-1;0<=c;--c){var f=a.string.charAt(c),g="([{}])".indexOf(f);if(0<=g&&3>g){if(!d){++c;break}if(0==--d)break}else if(3<=g&&6>g)++d;else if(Ta.test(f))e=!0;else if(e&&!d){++c;break}}e&&!d&&(b.fatArrowAt=c)}}function m(a,b,c,d,e,f){this.indented=a;this.column=b;this.type=c;this.prev=e;this.info=f;null!=d&&(this.align=d)}function p(){for(var a=arguments.length-1;0<=a;a--)la.cc.push(arguments[a])}function r(){p.apply(null,arguments);
return!0}function t(a){function b(c){for(;c;c=c.next)if(c.name==a)return!0;return!1}var c=la.state;c.context?(la.marked="def",b(c.localVars)||(c.localVars={name:a,next:c.localVars})):!b(c.globalVars)&&e.globalVars&&(c.globalVars={name:a,next:c.globalVars})}function l(){la.state.context={prev:la.state.context,vars:la.state.localVars};la.state.localVars=jb}function q(){la.state.localVars=la.state.context.vars;la.state.context=la.state.context.prev}function w(a,b){var c=function(){var c=la.state,d=c.indented;
if("stat"==c.lexical.type)d=c.lexical.indented;else for(var e=c.lexical;e&&")"==e.type&&e.align;e=e.prev)d=e.indented;c.lexical=new m(d,la.stream.column(),a,null,c.lexical,b)};c.lex=!0;return c}function u(){var a=la.state;a.lexical.prev&&(")"==a.lexical.type&&(a.indented=a.lexical.indented),a.lexical=a.lexical.prev)}function v(a){function b(c){return c==a?r():";"==a?p():r(b)}return b}function E(a,b){return"var"==a?r(w("vardef",b.length),ea,v(";"),u):"keyword a"==a?r(w("form"),A,E,u):"keyword b"==
a?r(w("form"),E,u):"{"==a?r(w("}"),M,u):";"==a?r():"if"==a?("else"==la.state.lexical.info&&la.state.cc[la.state.cc.length-1]==u&&la.state.cc.pop()(),r(w("form"),A,E,u,da)):"function"==a?r(C):"for"==a?r(w("form"),ha,E,u):"variable"==a?r(w("stat"),S):"switch"==a?r(w("form"),A,w("}","switch"),v("{"),M,u,u):"case"==a?r(A,v(":")):"default"==a?r(v(":")):"catch"==a?r(w("form"),l,v("("),pb,v(")"),E,u,q):"module"==a?r(w("form"),l,Fb,q,u):"class"==a?r(w("form"),Ra,u):"export"==a?r(w("form"),hb,u):"import"==
a?r(w("form"),Ga,u):p(w("stat"),A,v(";"),u)}function A(a){return F(a,!1)}function K(a){return F(a,!0)}function F(a,b){if(la.state.fatArrowAt==la.stream.start){var c=b?x:L;if("("==a)return r(l,w(")"),W(O,")"),u,v("=>"),c,q);if("variable"==a)return p(l,O,v("=>"),c,q)}c=b?G:H;return Ab.hasOwnProperty(a)?r(c):"function"==a?r(C,c):"keyword c"==a?r(b?B:z):"("==a?r(w(")"),z,rb,v(")"),u,c):"operator"==a||"spread"==a?r(b?K:A):"["==a?r(w("]"),Gb,u,c):"{"==a?U(J,"}",null,c):"quasi"==a?p(I,c):r()}function z(a){return a.match(/[;\}\)\],]/)?
p():p(A)}function B(a){return a.match(/[;\}\)\],]/)?p():p(K)}function H(a,b){return","==a?r(A):G(a,b,!1)}function G(a,b,c){var d=0==c?H:G,e=0==c?A:K;if("=>"==b)return r(l,c?x:L,q);if("operator"==a)return/\+\+|--/.test(b)?r(d):"?"==b?r(A,v(":"),e):r(e);if("quasi"==a)return p(I,d);if(";"!=a){if("("==a)return U(K,")","call",d);if("."==a)return r(D,d);if("["==a)return r(w("]"),z,v("]"),u,d)}}function I(a,b){return"quasi"!=a?p():"${"!=b.slice(b.length-2)?r(I):r(A,N)}function N(a){if("}"==a)return la.marked=
"string-2",la.state.tokenize=h,r(I)}function L(a){g(la.stream,la.state);return"{"==a?p(E):p(A)}function x(a){g(la.stream,la.state);return"{"==a?p(E):p(K)}function S(a){return":"==a?r(u,E):p(H,v(";"),u)}function D(a){if("variable"==a)return la.marked="property",r()}function J(a,b){if("variable"==a||"keyword"==la.style)return la.marked="property","get"==b||"set"==b?r(V):r(Y);if("number"==a||"string"==a)return la.marked=qa?"property":la.style+" property",r(Y);if("jsonld-keyword"==a)return r(Y);if("["==
a)return r(A,v("]"),Y)}function V(a){if("variable"!=a)return p(Y);la.marked="property";return r(C)}function Y(a){if(":"==a)return r(K);if("("==a)return p(C)}function W(a,b){function c(d){return","==d?(d=la.state.lexical,"call"==d.info&&(d.pos=(d.pos||0)+1),r(a,c)):d==b?r():r(v(b))}return function(d){return d==b?r():p(a,c)}}function U(a,b,c){for(var d=3;d<arguments.length;d++)la.cc.push(arguments[d]);return r(w(b,c),W(a,b),u)}function M(a){return"}"==a?r():p(E,M)}function Q(a){if(sb&&":"==a)return r(X)}
function X(a){if("variable"==a)return la.marked="variable-3",r()}function ea(){return p(O,Q,ia,ta)}function O(a,b){if("variable"==a)return t(b),r();if("["==a)return U(O,"]");if("{"==a)return U(aa,"}")}function aa(a,b){if("variable"==a&&!la.stream.match(/^\s*:/,!1))return t(b),r(ia);"variable"==a&&(la.marked="property");return r(v(":"),O,ia)}function ia(a,b){if("="==b)return r(K)}function ta(a){if(","==a)return r(ea)}function da(a,b){if("keyword b"==a&&"else"==b)return r(w("form","else"),E,u)}function ha(a){if("("==
a)return r(w(")"),Ba,v(")"),u)}function Ba(a){return"var"==a?r(ea,v(";"),za):";"==a?r(za):"variable"==a?r(y):p(A,v(";"),za)}function y(a,b){return"in"==b||"of"==b?(la.marked="keyword",r(A)):r(H,za)}function za(a,b){return";"==a?r(pa):"in"==b||"of"==b?(la.marked="keyword",r(A)):p(A,v(";"),pa)}function pa(a){")"!=a&&r(A)}function C(a,b){if("*"==b)return la.marked="keyword",r(C);if("variable"==a)return t(b),r(C);if("("==a)return r(l,w(")"),W(pb,")"),u,E,q)}function pb(a){return"spread"==a?r(pb):p(O,
Q)}function Ra(a,b){if("variable"==a)return t(b),r(Ka)}function Ka(a,b){if("extends"==b)return r(A,Ka);if("{"==a)return r(w("}"),Xa,u)}function Xa(a,b){if("variable"==a||"keyword"==la.style)return la.marked="property","get"==b||"set"==b?r(Kb,C,Xa):r(C,Xa);if("*"==b)return la.marked="keyword",r(Xa);if(";"==a)return r(Xa);if("}"==a)return r()}function Kb(a){if("variable"!=a)return p();la.marked="property";return r()}function Fb(a,b){if("string"==a)return r(E);if("variable"==a)return t(b),r(ab)}function hb(a,
b){return"*"==b?(la.marked="keyword",r(ab,v(";"))):"default"==b?(la.marked="keyword",r(A,v(";"))):p(E)}function Ga(a){return"string"==a?r():p(Za,ab)}function Za(a,b){if("{"==a)return U(Za,"}");"variable"==a&&t(b);return r()}function ab(a,b){if("from"==b)return la.marked="keyword",r(A)}function Gb(a){return"]"==a?r():p(K,ib)}function ib(a){return"for"==a?p(rb,v("]")):","==a?r(W(K,"]")):p(W(K,"]"))}function rb(a){if("for"==a)return r(ha,rb);if("if"==a)return r(A,rb)}var gb=b.indentUnit,Wa=e.statementIndent,
qa=e.jsonld,Ha=e.json||qa,sb=e.typescript,Ta=e.wordCharacters||/[\w$]/,Ya=function(){function a(b){return{type:b,style:"keyword"}}var b=a("keyword a"),c=a("keyword b"),d=a("keyword c"),e=a("operator"),f={type:"atom",style:"atom"},b={"if":a("if"),"while":b,"with":b,"else":c,"do":c,"try":c,"finally":c,"return":d,"break":d,"continue":d,"new":d,"delete":d,"throw":d,"debugger":d,"var":a("var"),"const":a("var"),let:a("var"),"function":a("function"),"catch":a("catch"),"for":a("for"),"switch":a("switch"),
"case":a("case"),"default":a("default"),"in":e,"typeof":e,"instanceof":e,"true":f,"false":f,"null":f,undefined:f,NaN:f,Infinity:f,"this":a("this"),module:a("module"),"class":a("class"),"super":a("atom"),yield:d,"export":a("export"),"import":a("import"),"extends":d};if(sb){var c={type:"variable",style:"variable-3"},c={"interface":a("interface"),"extends":a("extends"),constructor:a("constructor"),"public":a("public"),"private":a("private"),"protected":a("protected"),"static":a("static"),string:c,number:c,
bool:c,any:c},g;for(g in c)b[g]=c[g]}return b}(),ra=/[+\-*&%=<>!?|~^]/,qc=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,tb,xb,Ab={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},la={state:null,column:null,marked:null,cc:null},jb={name:"this",next:{name:"arguments"}};u.lex=!0;return{startState:function(a){a={tokenize:d,lastType:"sof",cc:[],lexical:new m((a||0)-gb,0,"block",!1),localVars:e.localVars,context:e.localVars&&{vars:e.localVars},
indented:0};e.globalVars&&"object"==typeof e.globalVars&&(a.globalVars=e.globalVars);return a},token:function(a,b){a.sol()&&(b.lexical.hasOwnProperty("align")||(b.lexical.align=!1),b.indented=a.indentation(),g(a,b));if(b.tokenize!=n&&a.eatSpace())return null;var c=b.tokenize(a,b);if("comment"==tb)return c;b.lastType="operator"!=tb||"++"!=xb&&"--"!=xb?tb:"incdec";a:{var d=tb,e=xb,f=b.cc;la.state=b;la.stream=a;la.marked=null;la.cc=f;la.style=c;b.lexical.hasOwnProperty("align")||(b.lexical.align=!0);
for(;;)if((f.length?f.pop():Ha?A:E)(d,e)){for(;f.length&&f[f.length-1].lex;)f.pop()();if(la.marked){c=la.marked;break a}if(d="variable"==d)b:{for(d=b.localVars;d;d=d.next)if(d.name==e){d=!0;break b}for(f=b.context;f;f=f.prev)for(d=f.vars;d;d=d.next)if(d.name==e){d=!0;break b}d=void 0}if(d){c="variable-2";break a}break a}}return c},indent:function(b,c){if(b.tokenize==n)return a.Pass;if(b.tokenize!=d)return 0;var f=c&&c.charAt(0),g=b.lexical;if(!/^\s*else\b/.test(c))for(var l=b.cc.length-1;0<=l;--l){var h=
b.cc[l];if(h==u)g=g.prev;else if(h!=da)break}"stat"==g.type&&"}"==f&&(g=g.prev);Wa&&")"==g.type&&"stat"==g.prev.type&&(g=g.prev);l=g.type;h=f==l;return"vardef"==l?g.indented+("operator"==b.lastType||","==b.lastType?g.info+1:0):"form"==l&&"{"==f?g.indented:"form"==l?g.indented+gb:"stat"==l?g.indented+("operator"==b.lastType||","==b.lastType?Wa||gb:0):"switch"!=g.info||h||0==e.doubleIndentSwitch?g.align?g.column+(h?0:1):g.indented+(h?0:gb):g.indented+(/^(?:case|default)\b/.test(c)?gb:2*gb)},electricChars:":{}",
blockCommentStart:Ha?null:"/*",blockCommentEnd:Ha?null:"*/",lineComment:Ha?null:"//",fold:"brace",helperType:Ha?"json":"javascript",jsonldMode:qa,jsonMode:Ha}});a.registerHelper("wordChars","javascript",/[\w$]/);a.defineMIME("text/javascript","javascript");a.defineMIME("text/ecmascript","javascript");a.defineMIME("application/javascript","javascript");a.defineMIME("application/x-javascript","javascript");a.defineMIME("application/ecmascript","javascript");a.defineMIME("application/json",{name:"javascript",
json:!0});a.defineMIME("application/x-json",{name:"javascript",json:!0});a.defineMIME("application/ld+json",{name:"javascript",jsonld:!0});a.defineMIME("text/typescript",{name:"javascript",typescript:!0});a.defineMIME("application/typescript",{name:"javascript",typescript:!0})});var COMPILED=!0,goog=goog||{};goog.global=this;
goog.exportPath_=function(a,b,e){a=a.split(".");e=e||goog.global;a[0]in e||!e.execScript||e.execScript("var "+a[0]);for(var c;a.length&&(c=a.shift());)a.length||void 0===b?e=e[c]?e[c]:e[c]={}:e[c]=b};goog.define=function(a,b){var e=b;COMPILED||goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,a)&&(e=goog.global.CLOSURE_DEFINES[a]);goog.exportPath_(a,e)};goog.DEBUG=!0;goog.LOCALE="en";goog.TRUSTED_SITE=!0;
goog.provide=function(a){if(!COMPILED){if(goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');delete goog.implicitNamespaces_[a];for(var b=a;(b=b.substring(0,b.lastIndexOf(".")))&&!goog.getObjectByName(b);)goog.implicitNamespaces_[b]=!0}goog.exportPath_(a)};goog.setTestOnly=function(a){if(COMPILED&&!goog.DEBUG)throw a=a||"",Error("Importing test-only code into non-debug environment"+a?": "+a:".");};
COMPILED||(goog.isProvided_=function(a){return!goog.implicitNamespaces_[a]&&!!goog.getObjectByName(a)},goog.implicitNamespaces_={});goog.getObjectByName=function(a,b){for(var e=a.split("."),c=b||goog.global,d;d=e.shift();)if(goog.isDefAndNotNull(c[d]))c=c[d];else return null;return c};goog.globalize=function(a,b){var e=b||goog.global,c;for(c in a)e[c]=a[c]};
goog.addDependency=function(a,b,e){if(goog.DEPENDENCIES_ENABLED){var c;a=a.replace(/\\/g,"/");for(var d=goog.dependencies_,f=0;c=b[f];f++)d.nameToPath[c]=a,a in d.pathToNames||(d.pathToNames[a]={}),d.pathToNames[a][c]=!0;for(c=0;b=e[c];c++)a in d.requires||(d.requires[a]={}),d.requires[a][b]=!0}};goog.ENABLE_DEBUG_LOADER=!0;
goog.require=function(a){if(!COMPILED&&!goog.isProvided_(a)){if(goog.ENABLE_DEBUG_LOADER){var b=goog.getPathFromDeps_(a);if(b){goog.included_[b]=!0;goog.writeScripts_();return}}a="goog.require could not find: "+a;goog.global.console&&goog.global.console.error(a);throw Error(a);}};goog.basePath="";goog.nullFunction=function(){};goog.identityFunction=function(a,b){return a};goog.abstractMethod=function(){throw Error("unimplemented abstract method");};
goog.addSingletonGetter=function(a){a.getInstance=function(){if(a.instance_)return a.instance_;goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=a);return a.instance_=new a}};goog.instantiatedSingletons_=[];goog.DEPENDENCIES_ENABLED=!COMPILED&&goog.ENABLE_DEBUG_LOADER;
goog.DEPENDENCIES_ENABLED&&(goog.included_={},goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},goog.inHtmlDocument_=function(){var a=goog.global.document;return"undefined"!=typeof a&&"write"in a},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var a=goog.global.document.getElementsByTagName("script"),b=a.length-1;0<=b;--b){var e=a[b].src,c=e.lastIndexOf("?"),c=-1==c?e.length:
c;if("base.js"==e.substr(c-7,7)){goog.basePath=e.substr(0,c-7);break}}},goog.importScript_=function(a){var b=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;!goog.dependencies_.written[a]&&b(a)&&(goog.dependencies_.written[a]=!0)},goog.writeScriptTag_=function(a){if(goog.inHtmlDocument_()){var b=goog.global.document;if("complete"==b.readyState){if(/\bdeps.js$/.test(a))return!1;throw Error('Cannot write "'+a+'" after document load');}b.write('<script type="text/javascript" src="'+a+'">\x3c/script>');
return!0}return!1},goog.writeScripts_=function(){function a(d){if(!(d in c.written)){if(!(d in c.visited)&&(c.visited[d]=!0,d in c.requires))for(var n in c.requires[d])if(!goog.isProvided_(n))if(n in c.nameToPath)a(c.nameToPath[n]);else throw Error("Undefined nameToPath for "+n);d in e||(e[d]=!0,b.push(d))}}var b=[],e={},c=goog.dependencies_,d;for(d in goog.included_)c.written[d]||a(d);for(d=0;d<b.length;d++)if(b[d])goog.importScript_(goog.basePath+b[d]);else throw Error("Undefined script input");
},goog.getPathFromDeps_=function(a){return a in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[a]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js"));
goog.typeOf=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var e=Object.prototype.toString.call(a);if("[object Window]"==e)return"object";if("[object Array]"==e||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==e||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b};goog.isDef=function(a){return void 0!==a};goog.isNull=function(a){return null===a};goog.isDefAndNotNull=function(a){return null!=a};goog.isArray=function(a){return"array"==goog.typeOf(a)};goog.isArrayLike=function(a){var b=goog.typeOf(a);return"array"==b||"object"==b&&"number"==typeof a.length};goog.isDateLike=function(a){return goog.isObject(a)&&"function"==typeof a.getFullYear};goog.isString=function(a){return"string"==typeof a};
goog.isBoolean=function(a){return"boolean"==typeof a};goog.isNumber=function(a){return"number"==typeof a};goog.isFunction=function(a){return"function"==goog.typeOf(a)};goog.isObject=function(a){var b=typeof a;return"object"==b&&null!=a||"function"==b};goog.getUid=function(a){return a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.hasUid=function(a){return!!a[goog.UID_PROPERTY_]};goog.removeUid=function(a){"removeAttribute"in a&&a.removeAttribute(goog.UID_PROPERTY_);try{delete a[goog.UID_PROPERTY_]}catch(b){}};
goog.UID_PROPERTY_="closure_uid_"+(1E9*Math.random()>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(a){var b=goog.typeOf(a);if("object"==b||"array"==b){if(a.clone)return a.clone();var b="array"==b?[]:{},e;for(e in a)b[e]=goog.cloneObject(a[e]);return b}return a};goog.bindNative_=function(a,b,e){return a.call.apply(a.bind,arguments)};
goog.bindJs_=function(a,b,e){if(!a)throw Error();if(2<arguments.length){var c=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(d,c);return a.apply(b,d)}}return function(){return a.apply(b,arguments)}};goog.bind=function(a,b,e){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(a,b){var e=Array.prototype.slice.call(arguments,1);return function(){var b=e.slice();b.push.apply(b,arguments);return a.apply(this,b)}};goog.mixin=function(a,b){for(var e in b)a[e]=b[e]};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};
goog.globalEval=function(a){if(goog.global.execScript)goog.global.execScript(a,"JavaScript");else if(goog.global.eval)if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),"undefined"!=typeof goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_)goog.global.eval(a);else{var b=goog.global.document,e=b.createElement("script");e.type="text/javascript";e.defer=!1;e.appendChild(b.createTextNode(a));b.body.appendChild(e);
b.body.removeChild(e)}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;goog.getCssName=function(a,b){var e=function(a){return goog.cssNameMapping_[a]||a},c=function(a){a=a.split("-");for(var b=[],c=0;c<a.length;c++)b.push(e(a[c]));return b.join("-")},c=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?e:c:function(a){return a};return b?a+"-"+c(b):c(a)};goog.setCssNameMapping=function(a,b){goog.cssNameMapping_=a;goog.cssNameMappingStyle_=b};
!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(a,b){var e=b||{},c;for(c in e){var d=(""+e[c]).replace(/\$/g,"$$$$");a=a.replace(new RegExp("\\{\\$"+c+"\\}","gi"),d)}return a};goog.getMsgWithFallback=function(a,b){return a};goog.exportSymbol=function(a,b,e){goog.exportPath_(a,b,e)};goog.exportProperty=function(a,b,e){a[b]=e};
goog.inherits=function(a,b){function e(){}e.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new e;a.prototype.constructor=a};
goog.base=function(a,b,e){var c=arguments.callee.caller;if(goog.DEBUG&&!c)throw Error("arguments.caller not defined.  goog.base() expects not to be running in strict mode. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(c.superClass_)return c.superClass_.constructor.apply(a,Array.prototype.slice.call(arguments,1));for(var d=Array.prototype.slice.call(arguments,2),f=!1,n=a.constructor;n;n=n.superClass_&&n.superClass_.constructor)if(n.prototype[b]===c)f=!0;else if(f)return n.prototype[b].apply(a,
d);if(a[b]===c)return a.constructor.prototype[b].apply(a,d);throw Error("goog.base called from a method of one name to a method of a different name");};goog.scope=function(a){a.call(goog.global)};goog.structs={};goog.structs.Collection=function(){};
(function(a){function b(){}function e(a,b){return function(){a.apply(b,arguments)}}function c(a){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof a)throw new TypeError("not a function");this._state=0;this._value=void 0;this._deferreds=[];m(a,this)}function d(a,b){for(;3===a._state;)a=a._value;0===a._state?a._deferreds.push(b):r(function(){var c=1===a._state?b.onFulfilled:b.onRejected;if(null===c)(1===a._state?f:n)(b.promise,a._value);else{var d;
try{d=c(a._value)}catch(e){n(b.promise,e);return}f(b.promise,d)}})}function f(a,b){try{if(b===a)throw new TypeError("A promise cannot be resolved with itself.");if(b&&("object"===typeof b||"function"===typeof b)){var d=b.then;if(b instanceof c){a._state=3;a._value=b;h(a);return}if("function"===typeof d){m(e(d,b),a);return}}a._state=1;a._value=b;h(a)}catch(f){n(a,f)}}function n(a,b){a._state=2;a._value=b;h(a)}function h(a){for(var b=0,c=a._deferreds.length;b<c;b++)d(a,a._deferreds[b]);a._deferreds=
null}function g(a,b,c){this.onFulfilled="function"===typeof a?a:null;this.onRejected="function"===typeof b?b:null;this.promise=c}function m(a,b){var c=!1;try{a(function(a){c||(c=!0,f(b,a))},function(a){c||(c=!0,n(b,a))})}catch(d){c||(c=!0,n(b,d))}}var p=setTimeout,r="function"===typeof setImmediate&&setImmediate||function(a){p(a,1)},t=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)};c.prototype["catch"]=function(a){return this.then(null,a)};c.prototype.then=function(a,
e){var f=new c(b);d(this,new g(a,e,f));return f};c.all=function(){var a=Array.prototype.slice.call(1===arguments.length&&t(arguments[0])?arguments[0]:arguments);return new c(function(b,c){function d(f,g){try{if(g&&("object"===typeof g||"function"===typeof g)){var h=g.then;if("function"===typeof h){h.call(g,function(a){d(f,a)},c);return}}a[f]=g;0===--e&&b(a)}catch(m){c(m)}}if(0===a.length)return b([]);for(var e=a.length,f=0;f<a.length;f++)d(f,a[f])})};c.resolve=function(a){return a&&"object"===typeof a&&
a.constructor===c?a:new c(function(b){b(a)})};c.reject=function(a){return new c(function(b,c){c(a)})};c.race=function(a){return new c(function(b,c){for(var d=0,e=a.length;d<e;d++)a[d].then(b,c)})};c._setImmediateFn=function(a){r=a};"undefined"!==typeof module&&module.exports?module.exports=c:a.Promise||(a.Promise=c)})(this);
(function(a){function b(a){this.ok=!1;"#"==a.charAt(0)&&(a=a.substr(1,6));a=a.replace(/ /g,"");a=a.toLowerCase();var c={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",
darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",
gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",
lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",
oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",
slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},d;for(d in c)a==d&&(a=c[d]);var f=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,
example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}];for(d=0;d<f.length;d++){var n=f[d].process,h=f[d].re.exec(a);h&&(channels=n(h),this.r=channels[0],this.g=channels[1],this.b=channels[2],this.ok=!0)}this.r=0>this.r||isNaN(this.r)?0:255<this.r?255:this.r;this.g=0>this.g||isNaN(this.g)?0:
255<this.g?255:this.g;this.b=0>this.b||isNaN(this.b)?0:255<this.b?255:this.b;this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"};this.toHex=function(){var a=this.r.toString(16),b=this.g.toString(16),c=this.b.toString(16);1==a.length&&(a="0"+a);1==b.length&&(b="0"+b);1==c.length&&(c="0"+c);return"#"+a+b+c};this.getHelpXML=function(){for(var a=[],d=0;d<f.length;d++)for(var e=f[d].example,h=0;h<e.length;h++)a[a.length]=e[h];for(var n in c)a[a.length]=n;e=document.createElement("ul");
e.setAttribute("id","rgbcolor-examples");for(d=0;d<a.length;d++)try{var l=document.createElement("li"),q=new b(a[d]),w=document.createElement("div");w.style.cssText="margin: 3px; border: 1px solid black; background:"+q.toHex()+"; color:"+q.toHex();w.appendChild(document.createTextNode("test"));var u=document.createTextNode(" "+a[d]+" -> "+q.toRGB()+" -> "+q.toHex());l.appendChild(w);l.appendChild(u);e.appendChild(l)}catch(v){}return e}}"undefined"!==typeof define&&define.amd?define(function(){return b}):
"undefined"!==typeof module&&module.exports&&(module.exports=b);a.RGBColor=b})("undefined"!==typeof window?window:this);
(function(a){function b(a,b,e,p,r,n){if(!(isNaN(n)||1>n)){n|=0;a=document.getElementById(a).getContext("2d");var l;try{try{l=a.getImageData(b,e,p,r)}catch(q){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),l=a.getImageData(b,e,p,r)}catch(w){throw alert("Cannot access local image"),Error("unable to access local image data: "+w);}}}catch(u){throw alert("Cannot access image"),Error("unable to access image data: "+u);}for(var v=l.data,E=l.width*l.height*4,A=0;A<E;A+=4){var K=
v[A+3]/255;v[A]*=K;v[A+1]*=K;v[A+2]*=K}var v=l.data,F,z,B,H,G,I,N,L,x,S,D,J,V,Y,W,U,M,Q,X,ea,O,aa,ia;F=n+n+1;var ta=p-1,E=r-1,A=n+1,K=A*(A+1)/2,da=new c,ha=da;for(B=1;B<F;B++)if(ha=ha.next=new c,B==A)var Ba=ha;ha.next=da;ha=B=null;I=G=0;var y=d[n],za=f[n];for(z=0;z<r;z++){W=U=M=Q=N=L=x=S=0;D=A*(X=v[G]);J=A*(ea=v[G+1]);V=A*(O=v[G+2]);Y=A*(aa=v[G+3]);N+=K*X;L+=K*ea;x+=K*O;S+=K*aa;ha=da;for(B=0;B<A;B++)ha.r=X,ha.g=ea,ha.b=O,ha.a=aa,ha=ha.next;for(B=1;B<A;B++)H=G+((ta<B?ta:B)<<2),N+=(ha.r=X=v[H])*(ia=
A-B),L+=(ha.g=ea=v[H+1])*ia,x+=(ha.b=O=v[H+2])*ia,S+=(ha.a=aa=v[H+3])*ia,W+=X,U+=ea,M+=O,Q+=aa,ha=ha.next;B=da;ha=Ba;for(F=0;F<p;F++)v[G]=N*y>>za,v[G+1]=L*y>>za,v[G+2]=x*y>>za,v[G+3]=S*y>>za,N-=D,L-=J,x-=V,S-=Y,D-=B.r,J-=B.g,V-=B.b,Y-=B.a,H=I+((H=F+n+1)<ta?H:ta)<<2,W+=B.r=v[H],U+=B.g=v[H+1],M+=B.b=v[H+2],Q+=B.a=v[H+3],N+=W,L+=U,x+=M,S+=Q,B=B.next,D+=X=ha.r,J+=ea=ha.g,V+=O=ha.b,Y+=aa=ha.a,W-=X,U-=ea,M-=O,Q-=aa,ha=ha.next,G+=4;I+=p}for(F=0;F<p;F++){U=M=Q=W=L=x=S=N=0;G=F<<2;D=A*(X=v[G]);J=A*(ea=v[G+
1]);V=A*(O=v[G+2]);Y=A*(aa=v[G+3]);N+=K*X;L+=K*ea;x+=K*O;S+=K*aa;ha=da;for(B=0;B<A;B++)ha.r=X,ha.g=ea,ha.b=O,ha.a=aa,ha=ha.next;H=p;for(B=1;B<=n;B++)G=H+F<<2,N+=(ha.r=X=v[G])*(ia=A-B),L+=(ha.g=ea=v[G+1])*ia,x+=(ha.b=O=v[G+2])*ia,S+=(ha.a=aa=v[G+3])*ia,W+=X,U+=ea,M+=O,Q+=aa,ha=ha.next,B<E&&(H+=p);G=F;B=da;ha=Ba;for(z=0;z<r;z++)H=G<<2,v[H]=N*y>>za,v[H+1]=L*y>>za,v[H+2]=x*y>>za,v[H+3]=S*y>>za,N-=D,L-=J,x-=V,S-=Y,D-=B.r,J-=B.g,V-=B.b,Y-=B.a,H=F+((H=z+A)<E?H:E)*p<<2,N+=W+=B.r=v[H],L+=U+=B.g=v[H+1],x+=
M+=B.b=v[H+2],S+=Q+=B.a=v[H+3],B=B.next,D+=X=ha.r,J+=ea=ha.g,V+=O=ha.b,Y+=aa=ha.a,W-=X,U-=ea,M-=O,Q-=aa,ha=ha.next,G+=p}p=l.data;r=l.width*l.height*4;for(n=0;n<r;n+=4)Ba=p[n+3],0!=Ba&&(Ba=255/Ba,p[n]*=Ba,p[n+1]*=Ba,p[n+2]*=Ba);a.putImageData(l,b,e)}}function e(a,b,e,p,r,n){if(!(isNaN(n)||1>n)){n|=0;a=document.getElementById(a).getContext("2d");var l;try{try{l=a.getImageData(b,e,p,r)}catch(q){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalBrowserRead"),l=a.getImageData(b,e,p,r)}catch(w){throw alert("Cannot access local image"),
Error("unable to access local image data: "+w);}}}catch(u){throw alert("Cannot access image"),Error("unable to access image data: "+u);}var v=l.data,E,A,K,F,z,B,H,G,I,N,L,x,S,D,J,V,Y,W,U;E=n+n+1;var M=p-1,Q=r-1,X=n+1,ea=X*(X+1)/2,O=new c,aa=O;for(K=1;K<E;K++)if(aa=aa.next=new c,K==X)var ia=aa;aa.next=O;aa=K=null;B=z=0;var ta=d[n],da=f[n];for(A=0;A<r;A++){S=D=J=H=G=I=0;N=X*(V=v[z]);L=X*(Y=v[z+1]);x=X*(W=v[z+2]);H+=ea*V;G+=ea*Y;I+=ea*W;aa=O;for(K=0;K<X;K++)aa.r=V,aa.g=Y,aa.b=W,aa=aa.next;for(K=1;K<
X;K++)F=z+((M<K?M:K)<<2),H+=(aa.r=V=v[F])*(U=X-K),G+=(aa.g=Y=v[F+1])*U,I+=(aa.b=W=v[F+2])*U,S+=V,D+=Y,J+=W,aa=aa.next;K=O;aa=ia;for(E=0;E<p;E++)v[z]=H*ta>>da,v[z+1]=G*ta>>da,v[z+2]=I*ta>>da,H-=N,G-=L,I-=x,N-=K.r,L-=K.g,x-=K.b,F=B+((F=E+n+1)<M?F:M)<<2,S+=K.r=v[F],D+=K.g=v[F+1],J+=K.b=v[F+2],H+=S,G+=D,I+=J,K=K.next,N+=V=aa.r,L+=Y=aa.g,x+=W=aa.b,S-=V,D-=Y,J-=W,aa=aa.next,z+=4;B+=p}for(E=0;E<p;E++){D=J=S=G=I=H=0;z=E<<2;N=X*(V=v[z]);L=X*(Y=v[z+1]);x=X*(W=v[z+2]);H+=ea*V;G+=ea*Y;I+=ea*W;aa=O;for(K=0;K<
X;K++)aa.r=V,aa.g=Y,aa.b=W,aa=aa.next;F=p;for(K=1;K<=n;K++)z=F+E<<2,H+=(aa.r=V=v[z])*(U=X-K),G+=(aa.g=Y=v[z+1])*U,I+=(aa.b=W=v[z+2])*U,S+=V,D+=Y,J+=W,aa=aa.next,K<Q&&(F+=p);z=E;K=O;aa=ia;for(A=0;A<r;A++)F=z<<2,v[F]=H*ta>>da,v[F+1]=G*ta>>da,v[F+2]=I*ta>>da,H-=N,G-=L,I-=x,N-=K.r,L-=K.g,x-=K.b,F=E+((F=A+X)<Q?F:Q)*p<<2,H+=S+=K.r=v[F],G+=D+=K.g=v[F+1],I+=J+=K.b=v[F+2],K=K.next,N+=V=aa.r,L+=Y=aa.g,x+=W=aa.b,S-=V,D-=Y,J-=W,aa=aa.next,z+=p}a.putImageData(l,b,e)}}function c(){this.a=this.b=this.g=this.r=0;
this.next=null}var d=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,
287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,
275,273,271,269,267,265,263,261,259],f=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,
23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24],n={image:function(a,c,d,f){a=document.getElementById(a);var r=a.naturalWidth,n=a.naturalHeight,l=document.getElementById(c);l.style.width=r+"px";l.style.height=n+"px";l.width=r;l.height=n;l=l.getContext("2d");
l.clearRect(0,0,r,n);l.drawImage(a,0,0);isNaN(d)||1>d||(f?b(c,0,0,r,n,d):e(c,0,0,r,n,d))},canvasRGBA:b,canvasRGB:e};"undefined"!==typeof define&&define.amd?define(function(){return n}):"undefined"!==typeof module&&module.exports&&(module.exports=n);a.stackBlur=n})("undefined"!==typeof window?window:this);
(function(a,b){"undefined"!==typeof define&&define.amd?define("canvgModule",["rgbcolor","stackblur"],b):"undefined"!==typeof module&&module.exports&&(module.exports=b(require("rgbcolor"),require("stackblur")));a.canvg=b(a.RGBColor,a.stackBlur)})("undefined"!==typeof window?window:this,function(a,b){function e(a){var b=[0,0,0],c=function(c,d){var e=a.match(c);null!=e&&(b[d]+=e.length,a=a.replace(c," "))};a=a.replace(/:not\(([^\)]*)\)/g,"     $1 ");a=a.replace(/{[^]*/gm," ");c(n,1);c(h,0);c(g,1);c(m,
2);c(p,1);c(r,1);a=a.replace(/[\*\s\+>~]/g," ");a=a.replace(/[#\.]/g," ");c(t,2);return b.join("")}function c(c){var d={opts:c,FRAMERATE:30,MAX_VIRTUAL_PIXELS:3E4,log:function(a){}};1==d.opts.log&&"undefined"!=typeof console&&(d.log=function(a){console.log(a)});d.init=function(a){var b=0;d.UniqueId=function(){b++;return"canvg"+b};d.Definitions={};d.Styles={};d.StylesSpecificity={};d.Animations=[];d.Images=[];d.ctx=a;d.ViewPort=new function(){this.viewPorts=[];this.Clear=function(){this.viewPorts=
[]};this.SetCurrent=function(a,b){this.viewPorts.push({width:a,height:b})};this.RemoveCurrent=function(){this.viewPorts.pop()};this.Current=function(){return this.viewPorts[this.viewPorts.length-1]};this.width=function(){return this.Current().width};this.height=function(){return this.Current().height};this.ComputeSize=function(a){return null!=a&&"number"==typeof a?a:"x"==a?this.width():"y"==a?this.height():Math.sqrt(Math.pow(this.width(),2)+Math.pow(this.height(),2))/Math.sqrt(2)}}};d.init();d.ImagesLoaded=
function(){for(var a=0;a<d.Images.length;a++)if(!d.Images[a].loaded)return!1;return!0};d.trim=function(a){return a.replace(/^\s+|\s+$/g,"")};d.compressSpaces=function(a){return a.replace(/[\s\r\t\n]+/gm," ")};d.ajax=function(a){var b;return(b=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"))?(b.open("GET",a,!1),b.send(null),b.responseText):null};d.parseXml=function(a){if("undefined"!=typeof Windows&&"undefined"!=typeof Windows.Data&&"undefined"!=typeof Windows.Data.Xml){var b=
new Windows.Data.Xml.Dom.XmlDocument,c=new Windows.Data.Xml.Dom.XmlLoadSettings;c.prohibitDtd=!1;b.loadXml(a,c);return b}if(window.DOMParser)return(new DOMParser).parseFromString(a,"text/xml");a=a.replace(/<!DOCTYPE svg[^>]*>/,"");b=new ActiveXObject("Microsoft.XMLDOM");b.async="false";b.loadXML(a);return b};d.Property=function(a,b){this.name=a;this.value=b};d.Property.prototype.getValue=function(){return this.value};d.Property.prototype.hasValue=function(){return null!=this.value&&""!==this.value};
d.Property.prototype.numValue=function(){if(!this.hasValue())return 0;var a=parseFloat(this.value);(this.value+"").match(/%$/)&&(a/=100);return a};d.Property.prototype.valueOrDefault=function(a){return this.hasValue()?this.value:a};d.Property.prototype.numValueOrDefault=function(a){return this.hasValue()?this.numValue():a};d.Property.prototype.addOpacity=function(b){var c=this.value;if(null!=b.value&&""!=b.value&&"string"==typeof this.value){var e=new a(this.value);e.ok&&(c="rgba("+e.r+", "+e.g+", "+
e.b+", "+b.numValue()+")")}return new d.Property(this.name,c)};d.Property.prototype.getDefinition=function(){var a=this.value.match(/#([^\)'"]+)/);a&&(a=a[1]);a||(a=this.value);return d.Definitions[a]};d.Property.prototype.isUrlDefinition=function(){return 0==this.value.indexOf("url(")};d.Property.prototype.getFillStyleDefinition=function(a,b){var c=this.getDefinition();if(null!=c&&c.createGradient)return c.createGradient(d.ctx,a,b);if(null!=c&&c.createPattern){if(c.getHrefAttribute().hasValue()){var e=
c.attribute("patternTransform"),c=c.getHrefAttribute().getDefinition();e.hasValue()&&(c.attribute("patternTransform",!0).value=e.value)}return c.createPattern(d.ctx,a)}return null};d.Property.prototype.getDPI=function(a){return 96};d.Property.prototype.getEM=function(a){var b=12,c=new d.Property("fontSize",d.Font.Parse(d.ctx.font).fontSize);c.hasValue()&&(b=c.toPixels(a));return b};d.Property.prototype.getUnits=function(){return(this.value+"").replace(/[0-9\.\-]/g,"")};d.Property.prototype.toPixels=
function(a,b){if(!this.hasValue())return 0;var c=this.value+"";if(c.match(/em$/))return this.numValue()*this.getEM(a);if(c.match(/ex$/))return this.numValue()*this.getEM(a)/2;if(c.match(/px$/))return this.numValue();if(c.match(/pt$/))return this.numValue()*this.getDPI(a)*(1/72);if(c.match(/pc$/))return 15*this.numValue();if(c.match(/cm$/))return this.numValue()*this.getDPI(a)/2.54;if(c.match(/mm$/))return this.numValue()*this.getDPI(a)/25.4;if(c.match(/in$/))return this.numValue()*this.getDPI(a);
if(c.match(/%$/))return this.numValue()*d.ViewPort.ComputeSize(a);c=this.numValue();return b&&1>c?c*d.ViewPort.ComputeSize(a):c};d.Property.prototype.toMilliseconds=function(){if(!this.hasValue())return 0;var a=this.value+"";if(a.match(/s$/))return 1E3*this.numValue();a.match(/ms$/);return this.numValue()};d.Property.prototype.toRadians=function(){if(!this.hasValue())return 0;var a=this.value+"";return a.match(/deg$/)?this.numValue()*(Math.PI/180):a.match(/grad$/)?this.numValue()*(Math.PI/200):a.match(/rad$/)?
this.numValue():this.numValue()*(Math.PI/180)};var g={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};d.Property.prototype.toTextBaseline=function(){return this.hasValue()?g[this.value]:null};d.Font=new function(){this.Styles="normal|italic|oblique|inherit";this.Variants="normal|small-caps|inherit";this.Weights=
"normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";this.CreateFont=function(a,b,c,e,f,g){g=null!=g?this.Parse(g):this.CreateFont("","","","","",d.ctx.font);return{fontFamily:f||g.fontFamily,fontSize:e||g.fontSize,fontStyle:a||g.fontStyle,fontWeight:c||g.fontWeight,fontVariant:b||g.fontVariant,toString:function(){return[this.fontStyle,this.fontVariant,this.fontWeight,this.fontSize,this.fontFamily].join(" ")}}};var a=this;this.Parse=function(b){var c={};b=d.trim(d.compressSpaces(b||
"")).split(" ");for(var e=!1,f=!1,g=!1,l=!1,h="",m=0;m<b.length;m++)f||-1==a.Styles.indexOf(b[m])?l||-1==a.Variants.indexOf(b[m])?g||-1==a.Weights.indexOf(b[m])?e?"inherit"!=b[m]&&(h+=b[m]):("inherit"!=b[m]&&(c.fontSize=b[m].split("/")[0]),f=l=g=e=!0):("inherit"!=b[m]&&(c.fontWeight=b[m]),f=l=g=!0):("inherit"!=b[m]&&(c.fontVariant=b[m]),f=l=!0):("inherit"!=b[m]&&(c.fontStyle=b[m]),f=!0);""!=h&&(c.fontFamily=h);return c}};d.ToNumberArray=function(a){a=d.trim(d.compressSpaces((a||"").replace(/,/g," "))).split(" ");
for(var b=0;b<a.length;b++)a[b]=parseFloat(a[b]);return a};d.Point=function(a,b){this.x=a;this.y=b};d.Point.prototype.angleTo=function(a){return Math.atan2(a.y-this.y,a.x-this.x)};d.Point.prototype.applyTransform=function(a){var b=this.x*a[1]+this.y*a[3]+a[5];this.x=this.x*a[0]+this.y*a[2]+a[4];this.y=b};d.CreatePoint=function(a){a=d.ToNumberArray(a);return new d.Point(a[0],a[1])};d.CreatePath=function(a){a=d.ToNumberArray(a);for(var b=[],c=0;c<a.length;c+=2)b.push(new d.Point(a[c],a[c+1]));return b};
d.BoundingBox=function(a,b,c,d){this.y2=this.x2=this.y1=this.x1=Number.NaN;this.x=function(){return this.x1};this.y=function(){return this.y1};this.width=function(){return this.x2-this.x1};this.height=function(){return this.y2-this.y1};this.addPoint=function(a,b){if(null!=a){if(isNaN(this.x1)||isNaN(this.x2))this.x2=this.x1=a;a<this.x1&&(this.x1=a);a>this.x2&&(this.x2=a)}if(null!=b){if(isNaN(this.y1)||isNaN(this.y2))this.y2=this.y1=b;b<this.y1&&(this.y1=b);b>this.y2&&(this.y2=b)}};this.addX=function(a){this.addPoint(a,
null)};this.addY=function(a){this.addPoint(null,a)};this.addBoundingBox=function(a){this.addPoint(a.x1,a.y1);this.addPoint(a.x2,a.y2)};this.addQuadraticCurve=function(a,b,c,d,e,f){c=a+2/3*(c-a);d=b+2/3*(d-b);this.addBezierCurve(a,b,c,c+1/3*(e-a),d,d+1/3*(f-b),e,f)};this.addBezierCurve=function(a,b,c,d,e,f,g,l){var h=[a,b],m=[c,d],p=[e,f],r=[g,l];this.addPoint(h[0],h[1]);this.addPoint(r[0],r[1]);for(i=0;1>=i;i++)a=function(a){return Math.pow(1-a,3)*h[i]+3*Math.pow(1-a,2)*a*m[i]+3*(1-a)*Math.pow(a,
2)*p[i]+Math.pow(a,3)*r[i]},b=6*h[i]-12*m[i]+6*p[i],c=-3*h[i]+9*m[i]-9*p[i]+3*r[i],d=3*m[i]-3*h[i],0==c?0!=b&&(b=-d/b,0<b&&1>b&&(0==i&&this.addX(a(b)),1==i&&this.addY(a(b)))):(d=Math.pow(b,2)-4*d*c,0>d||(e=(-b+Math.sqrt(d))/(2*c),0<e&&1>e&&(0==i&&this.addX(a(e)),1==i&&this.addY(a(e))),b=(-b-Math.sqrt(d))/(2*c),0<b&&1>b&&(0==i&&this.addX(a(b)),1==i&&this.addY(a(b)))))};this.isPointInBox=function(a,b){return this.x1<=a&&a<=this.x2&&this.y1<=b&&b<=this.y2};this.addPoint(a,b);this.addPoint(c,d)};d.Transform=
function(a){var b=this;this.Type={};this.Type.translate=function(a){this.p=d.CreatePoint(a);this.apply=function(a){a.translate(this.p.x||0,this.p.y||0)};this.unapply=function(a){a.translate(-1*this.p.x||0,-1*this.p.y||0)};this.applyToPoint=function(a){a.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0])}};this.Type.rotate=function(a){a=d.ToNumberArray(a);this.angle=new d.Property("angle",a[0]);this.cx=a[1]||0;this.cy=a[2]||0;this.apply=function(a){a.translate(this.cx,this.cy);a.rotate(this.angle.toRadians());
a.translate(-this.cx,-this.cy)};this.unapply=function(a){a.translate(this.cx,this.cy);a.rotate(-1*this.angle.toRadians());a.translate(-this.cx,-this.cy)};this.applyToPoint=function(a){var b=this.angle.toRadians();a.applyTransform([1,0,0,1,this.p.x||0,this.p.y||0]);a.applyTransform([Math.cos(b),Math.sin(b),-Math.sin(b),Math.cos(b),0,0]);a.applyTransform([1,0,0,1,-this.p.x||0,-this.p.y||0])}};this.Type.scale=function(a){this.p=d.CreatePoint(a);this.apply=function(a){a.scale(this.p.x||1,this.p.y||this.p.x||
1)};this.unapply=function(a){a.scale(1/this.p.x||1,1/this.p.y||this.p.x||1)};this.applyToPoint=function(a){a.applyTransform([this.p.x||0,0,0,this.p.y||0,0,0])}};this.Type.matrix=function(a){this.m=d.ToNumberArray(a);this.apply=function(a){a.transform(this.m[0],this.m[1],this.m[2],this.m[3],this.m[4],this.m[5])};this.unapply=function(a){var b=this.m[0],c=this.m[2],d=this.m[4],e=this.m[1],f=this.m[3],g=this.m[5],l=1/(b*(1*f-0*g)-c*(1*e-0*g)+d*(0*e-0*f));a.transform(l*(1*f-0*g),l*(0*g-1*e),l*(0*d-1*
c),l*(1*b-0*d),l*(c*g-d*f),l*(d*e-b*g))};this.applyToPoint=function(a){a.applyTransform(this.m)}};this.Type.SkewBase=function(a){this.base=b.Type.matrix;this.base(a);this.angle=new d.Property("angle",a)};this.Type.SkewBase.prototype=new this.Type.matrix;this.Type.skewX=function(a){this.base=b.Type.SkewBase;this.base(a);this.m=[1,0,Math.tan(this.angle.toRadians()),1,0,0]};this.Type.skewX.prototype=new this.Type.SkewBase;this.Type.skewY=function(a){this.base=b.Type.SkewBase;this.base(a);this.m=[1,Math.tan(this.angle.toRadians()),
0,1,0,0]};this.Type.skewY.prototype=new this.Type.SkewBase;this.transforms=[];this.apply=function(a){for(var b=0;b<this.transforms.length;b++)this.transforms[b].apply(a)};this.unapply=function(a){for(var b=this.transforms.length-1;0<=b;b--)this.transforms[b].unapply(a)};this.applyToPoint=function(a){for(var b=0;b<this.transforms.length;b++)this.transforms[b].applyToPoint(a)};a=d.trim(d.compressSpaces(a)).replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/);for(var c=0;c<
a.length;c++){var e=d.trim(a[c].split("(")[0]),f=a[c].split("(")[1].replace(")",""),g=this.Type[e];"undefined"!=typeof g&&(f=new g(f),f.type=e,this.transforms.push(f))}};d.AspectRatio=function(a,b,c,e,f,g,l,h,m,p){b=d.compressSpaces(b);b=b.replace(/^defer\s/,"");var r=b.split(" ")[0]||"xMidYMid";b=b.split(" ")[1]||"meet";var n=c/e,t=f/g,w=Math.min(n,t),S=Math.max(n,t);"meet"==b&&(e*=w,g*=w);"slice"==b&&(e*=S,g*=S);m=new d.Property("refX",m);p=new d.Property("refY",p);m.hasValue()&&p.hasValue()?a.translate(-w*
m.toPixels("x"),-w*p.toPixels("y")):(r.match(/^xMid/)&&("meet"==b&&w==t||"slice"==b&&S==t)&&a.translate(c/2-e/2,0),r.match(/YMid$/)&&("meet"==b&&w==n||"slice"==b&&S==n)&&a.translate(0,f/2-g/2),r.match(/^xMax/)&&("meet"==b&&w==t||"slice"==b&&S==t)&&a.translate(c-e,0),r.match(/YMax$/)&&("meet"==b&&w==n||"slice"==b&&S==n)&&a.translate(0,f-g));"none"==r?a.scale(n,t):"meet"==b?a.scale(w,w):"slice"==b&&a.scale(S,S);a.translate(null==l?0:-l,null==h?0:-h)};d.Element={};d.EmptyProperty=new d.Property("EMPTY",
"");d.Element.ElementBase=function(a){this.attributes={};this.styles={};this.stylesSpecificity={};this.children=[];this.attribute=function(a,b){var c=this.attributes[a];if(null!=c)return c;1==b&&(c=new d.Property(a,""),this.attributes[a]=c);return c||d.EmptyProperty};this.getHrefAttribute=function(){for(var a in this.attributes)if("href"==a||a.match(/:href$/))return this.attributes[a];return d.EmptyProperty};this.style=function(a,b,c){var e=this.styles[a];if(null!=e)return e;var f=this.attribute(a);
if(null!=f&&f.hasValue())return this.styles[a]=f;if(1!=c&&(c=this.parent,null!=c&&(c=c.style(a),null!=c&&c.hasValue())))return c;1==b&&(e=new d.Property(a,""),this.styles[a]=e);return e||d.EmptyProperty};this.render=function(a){if("none"!=this.style("display").value&&"hidden"!=this.style("visibility").value){a.save();if(this.style("mask").hasValue()){var b=this.style("mask").getDefinition();null!=b&&b.apply(a,this)}else this.style("filter").hasValue()?(b=this.style("filter").getDefinition(),null!=
b&&b.apply(a,this)):(this.setContext(a),this.renderChildren(a),this.clearContext(a));a.restore()}};this.setContext=function(a){};this.clearContext=function(a){};this.renderChildren=function(a){for(var b=0;b<this.children.length;b++)this.children[b].render(a)};this.addChild=function(a,b){var c=a;b&&(c=d.CreateElement(a));c.parent=this;"title"!=c.type&&this.children.push(c)};this.addStylesFromStyleDefinition=function(){for(var b in d.Styles)if("@"!=b[0]&&f(a,b)){var c=d.Styles[b],e=d.StylesSpecificity[b];
if(null!=c)for(var g in c){var l=this.stylesSpecificity[g];"undefined"==typeof l&&(l="000");e>l&&(this.styles[g]=c[g],this.stylesSpecificity[g]=e)}}};if(null!=a&&1==a.nodeType){for(var b=0;b<a.attributes.length;b++){var c=a.attributes[b];this.attributes[c.nodeName]=new d.Property(c.nodeName,c.value)}this.addStylesFromStyleDefinition();if(this.attribute("style").hasValue())for(c=this.attribute("style").value.split(";"),b=0;b<c.length;b++)if(""!=d.trim(c[b])){var e=c[b].split(":"),g=d.trim(e[0]),e=
d.trim(e[1]);this.styles[g]=new d.Property(g,e)}this.attribute("id").hasValue()&&null==d.Definitions[this.attribute("id").value]&&(d.Definitions[this.attribute("id").value]=this);for(b=0;b<a.childNodes.length;b++)c=a.childNodes[b],1==c.nodeType&&this.addChild(c,!0),!this.captureTextNodes||3!=c.nodeType&&4!=c.nodeType||""!=d.compressSpaces(c.value||c.text||c.textContent||"")&&this.addChild(new d.Element.tspan(c),!1)}};d.Element.RenderedElementBase=function(a){this.base=d.Element.ElementBase;this.base(a);
this.setContext=function(a){if(this.style("fill").isUrlDefinition()){var b=this.style("fill").getFillStyleDefinition(this,this.style("fill-opacity"));null!=b&&(a.fillStyle=b)}else this.style("fill").hasValue()&&(b=this.style("fill"),"currentColor"==b.value&&(b.value=this.style("color").value),"inherit"!=b.value&&(a.fillStyle="none"==b.value?"rgba(0,0,0,0)":b.value));this.style("fill-opacity").hasValue()&&(b=new d.Property("fill",a.fillStyle),b=b.addOpacity(this.style("fill-opacity")),a.fillStyle=
b.value);this.style("stroke").isUrlDefinition()?(b=this.style("stroke").getFillStyleDefinition(this,this.style("stroke-opacity")),null!=b&&(a.strokeStyle=b)):this.style("stroke").hasValue()&&(b=this.style("stroke"),"currentColor"==b.value&&(b.value=this.style("color").value),"inherit"!=b.value&&(a.strokeStyle="none"==b.value?"rgba(0,0,0,0)":b.value));this.style("stroke-opacity").hasValue()&&(b=new d.Property("stroke",a.strokeStyle),b=b.addOpacity(this.style("stroke-opacity")),a.strokeStyle=b.value);
this.style("stroke-width").hasValue()&&(b=this.style("stroke-width").toPixels(),a.lineWidth=0==b?.001:b);this.style("stroke-linecap").hasValue()&&(a.lineCap=this.style("stroke-linecap").value);this.style("stroke-linejoin").hasValue()&&(a.lineJoin=this.style("stroke-linejoin").value);this.style("stroke-miterlimit").hasValue()&&(a.miterLimit=this.style("stroke-miterlimit").value);this.style("stroke-dasharray").hasValue()&&"none"!=this.style("stroke-dasharray").value&&(b=d.ToNumberArray(this.style("stroke-dasharray").value),
"undefined"!=typeof a.setLineDash?a.setLineDash(b):"undefined"!=typeof a.webkitLineDash?a.webkitLineDash=b:"undefined"==typeof a.mozDash||1==b.length&&0==b[0]||(a.mozDash=b),b=this.style("stroke-dashoffset").numValueOrDefault(1),"undefined"!=typeof a.lineDashOffset?a.lineDashOffset=b:"undefined"!=typeof a.webkitLineDashOffset?a.webkitLineDashOffset=b:"undefined"!=typeof a.mozDashOffset&&(a.mozDashOffset=b));"undefined"!=typeof a.font&&(a.font=d.Font.CreateFont(this.style("font-style").value,this.style("font-variant").value,
this.style("font-weight").value,this.style("font-size").hasValue()?this.style("font-size").toPixels()+"px":"",this.style("font-family").value).toString());this.style("transform",!1,!0).hasValue()&&(new d.Transform(this.style("transform",!1,!0).value)).apply(a);this.style("clip-path",!1,!0).hasValue()&&(b=this.style("clip-path",!1,!0).getDefinition(),null!=b&&b.apply(a));this.style("opacity").hasValue()&&(a.globalAlpha=this.style("opacity").numValue())}};d.Element.RenderedElementBase.prototype=new d.Element.ElementBase;
d.Element.PathElementBase=function(a){this.base=d.Element.RenderedElementBase;this.base(a);this.path=function(a){null!=a&&a.beginPath();return new d.BoundingBox};this.renderChildren=function(a){this.path(a);d.Mouse.checkPath(this,a);""!=a.fillStyle&&("inherit"!=this.style("fill-rule").valueOrDefault("inherit")?a.fill(this.style("fill-rule").value):a.fill());""!=a.strokeStyle&&a.stroke();var b=this.getMarkers();if(null!=b){if(this.style("marker-start").isUrlDefinition()){var c=this.style("marker-start").getDefinition();
c.render(a,b[0][0],b[0][1])}if(this.style("marker-mid").isUrlDefinition())for(var c=this.style("marker-mid").getDefinition(),e=1;e<b.length-1;e++)c.render(a,b[e][0],b[e][1]);this.style("marker-end").isUrlDefinition()&&(c=this.style("marker-end").getDefinition(),c.render(a,b[b.length-1][0],b[b.length-1][1]))}};this.getBoundingBox=function(){return this.path()};this.getMarkers=function(){return null}};d.Element.PathElementBase.prototype=new d.Element.RenderedElementBase;d.Element.svg=function(a){this.base=
d.Element.RenderedElementBase;this.base(a);this.baseClearContext=this.clearContext;this.clearContext=function(a){this.baseClearContext(a);d.ViewPort.RemoveCurrent()};this.baseSetContext=this.setContext;this.setContext=function(a){a.strokeStyle="rgba(0,0,0,0)";a.lineCap="butt";a.lineJoin="miter";a.miterLimit=4;"undefined"!=typeof a.font&&"undefined"!=typeof window.getComputedStyle&&(a.font=window.getComputedStyle(a.canvas).getPropertyValue("font"));this.baseSetContext(a);this.attribute("x").hasValue()||
(this.attribute("x",!0).value=0);this.attribute("y").hasValue()||(this.attribute("y",!0).value=0);a.translate(this.attribute("x").toPixels("x"),this.attribute("y").toPixels("y"));var b=d.ViewPort.width(),c=d.ViewPort.height();this.attribute("width").hasValue()||(this.attribute("width",!0).value="100%");this.attribute("height").hasValue()||(this.attribute("height",!0).value="100%");if("undefined"==typeof this.root){var b=this.attribute("width").toPixels("x"),c=this.attribute("height").toPixels("y"),
e=0,f=0;this.attribute("refX").hasValue()&&this.attribute("refY").hasValue()&&(e=-this.attribute("refX").toPixels("x"),f=-this.attribute("refY").toPixels("y"));"visible"!=this.attribute("overflow").valueOrDefault("hidden")&&(a.beginPath(),a.moveTo(e,f),a.lineTo(b,f),a.lineTo(b,c),a.lineTo(e,c),a.closePath(),a.clip())}d.ViewPort.SetCurrent(b,c);if(this.attribute("viewBox").hasValue()){var e=d.ToNumberArray(this.attribute("viewBox").value),f=e[0],g=e[1],b=e[2],c=e[3];d.AspectRatio(a,this.attribute("preserveAspectRatio").value,
d.ViewPort.width(),b,d.ViewPort.height(),c,f,g,this.attribute("refX").value,this.attribute("refY").value);d.ViewPort.RemoveCurrent();d.ViewPort.SetCurrent(e[2],e[3])}}};d.Element.svg.prototype=new d.Element.RenderedElementBase;d.Element.rect=function(a){this.base=d.Element.PathElementBase;this.base(a);this.path=function(a){var b=this.attribute("x").toPixels("x"),c=this.attribute("y").toPixels("y"),e=this.attribute("width").toPixels("x"),f=this.attribute("height").toPixels("y"),g=this.attribute("rx").toPixels("x"),
l=this.attribute("ry").toPixels("y");this.attribute("rx").hasValue()&&!this.attribute("ry").hasValue()&&(l=g);this.attribute("ry").hasValue()&&!this.attribute("rx").hasValue()&&(g=l);g=Math.min(g,e/2);l=Math.min(l,f/2);null!=a&&(a.beginPath(),a.moveTo(b+g,c),a.lineTo(b+e-g,c),a.quadraticCurveTo(b+e,c,b+e,c+l),a.lineTo(b+e,c+f-l),a.quadraticCurveTo(b+e,c+f,b+e-g,c+f),a.lineTo(b+g,c+f),a.quadraticCurveTo(b,c+f,b,c+f-l),a.lineTo(b,c+l),a.quadraticCurveTo(b,c,b+g,c),a.closePath());return new d.BoundingBox(b,
c,b+e,c+f)}};d.Element.rect.prototype=new d.Element.PathElementBase;d.Element.circle=function(a){this.base=d.Element.PathElementBase;this.base(a);this.path=function(a){var b=this.attribute("cx").toPixels("x"),c=this.attribute("cy").toPixels("y"),e=this.attribute("r").toPixels();null!=a&&(a.beginPath(),a.arc(b,c,e,0,2*Math.PI,!0),a.closePath());return new d.BoundingBox(b-e,c-e,b+e,c+e)}};d.Element.circle.prototype=new d.Element.PathElementBase;d.Element.ellipse=function(a){this.base=d.Element.PathElementBase;
this.base(a);this.path=function(a){var b=4*((Math.sqrt(2)-1)/3),c=this.attribute("rx").toPixels("x"),e=this.attribute("ry").toPixels("y"),f=this.attribute("cx").toPixels("x"),g=this.attribute("cy").toPixels("y");null!=a&&(a.beginPath(),a.moveTo(f,g-e),a.bezierCurveTo(f+b*c,g-e,f+c,g-b*e,f+c,g),a.bezierCurveTo(f+c,g+b*e,f+b*c,g+e,f,g+e),a.bezierCurveTo(f-b*c,g+e,f-c,g+b*e,f-c,g),a.bezierCurveTo(f-c,g-b*e,f-b*c,g-e,f,g-e),a.closePath());return new d.BoundingBox(f-c,g-e,f+c,g+e)}};d.Element.ellipse.prototype=
new d.Element.PathElementBase;d.Element.line=function(a){this.base=d.Element.PathElementBase;this.base(a);this.getPoints=function(){return[new d.Point(this.attribute("x1").toPixels("x"),this.attribute("y1").toPixels("y")),new d.Point(this.attribute("x2").toPixels("x"),this.attribute("y2").toPixels("y"))]};this.path=function(a){var b=this.getPoints();null!=a&&(a.beginPath(),a.moveTo(b[0].x,b[0].y),a.lineTo(b[1].x,b[1].y));return new d.BoundingBox(b[0].x,b[0].y,b[1].x,b[1].y)};this.getMarkers=function(){var a=
this.getPoints(),b=a[0].angleTo(a[1]);return[[a[0],b],[a[1],b]]}};d.Element.line.prototype=new d.Element.PathElementBase;d.Element.polyline=function(a){this.base=d.Element.PathElementBase;this.base(a);this.points=d.CreatePath(this.attribute("points").value);this.path=function(a){var b=new d.BoundingBox(this.points[0].x,this.points[0].y);null!=a&&(a.beginPath(),a.moveTo(this.points[0].x,this.points[0].y));for(var c=1;c<this.points.length;c++)b.addPoint(this.points[c].x,this.points[c].y),null!=a&&a.lineTo(this.points[c].x,
this.points[c].y);return b};this.getMarkers=function(){for(var a=[],b=0;b<this.points.length-1;b++)a.push([this.points[b],this.points[b].angleTo(this.points[b+1])]);0<a.length&&a.push([this.points[this.points.length-1],a[a.length-1][1]]);return a}};d.Element.polyline.prototype=new d.Element.PathElementBase;d.Element.polygon=function(a){this.base=d.Element.polyline;this.base(a);this.basePath=this.path;this.path=function(a){var b=this.basePath(a);null!=a&&(a.lineTo(this.points[0].x,this.points[0].y),
a.closePath());return b}};d.Element.polygon.prototype=new d.Element.polyline;d.Element.path=function(a){this.base=d.Element.PathElementBase;this.base(a);a=this.attribute("d").value;a=a.replace(/,/gm," ");for(var b=0;2>b;b++)a=a.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\s])/gm,"$1 $2");a=a.replace(/([^\s])([MmZzLlHhVvCcSsQqTtAa])/gm,"$1 $2");a=a.replace(/([0-9])([+\-])/gm,"$1 $2");for(b=0;2>b;b++)a=a.replace(/(\.[0-9]*)(\.)/gm,"$1 $2");a=a.replace(/([Aa](\s+[0-9]+){3})\s+([01])\s*([01])/gm,"$1 $3 $4 ");
a=d.compressSpaces(a);a=d.trim(a);this.PathParser=new function(a){this.tokens=a.split(" ");this.reset=function(){this.i=-1;this.previousCommand=this.command="";this.start=new d.Point(0,0);this.control=new d.Point(0,0);this.current=new d.Point(0,0);this.points=[];this.angles=[]};this.isEnd=function(){return this.i>=this.tokens.length-1};this.isCommandOrEnd=function(){return this.isEnd()?!0:null!=this.tokens[this.i+1].match(/^[A-Za-z]$/)};this.isRelativeCommand=function(){switch(this.command){case "m":case "l":case "h":case "v":case "c":case "s":case "q":case "t":case "a":case "z":return!0}return!1};
this.getToken=function(){this.i++;return this.tokens[this.i]};this.getScalar=function(){return parseFloat(this.getToken())};this.nextCommand=function(){this.previousCommand=this.command;this.command=this.getToken()};this.getPoint=function(){var a=new d.Point(this.getScalar(),this.getScalar());return this.makeAbsolute(a)};this.getAsControlPoint=function(){var a=this.getPoint();return this.control=a};this.getAsCurrentPoint=function(){var a=this.getPoint();return this.current=a};this.getReflectedControlPoint=
function(){return"c"!=this.previousCommand.toLowerCase()&&"s"!=this.previousCommand.toLowerCase()&&"q"!=this.previousCommand.toLowerCase()&&"t"!=this.previousCommand.toLowerCase()?this.current:new d.Point(2*this.current.x-this.control.x,2*this.current.y-this.control.y)};this.makeAbsolute=function(a){this.isRelativeCommand()&&(a.x+=this.current.x,a.y+=this.current.y);return a};this.addMarker=function(a,b,c){null!=c&&0<this.angles.length&&null==this.angles[this.angles.length-1]&&(this.angles[this.angles.length-
1]=this.points[this.points.length-1].angleTo(c));this.addMarkerAngle(a,null==b?null:b.angleTo(a))};this.addMarkerAngle=function(a,b){this.points.push(a);this.angles.push(b)};this.getMarkerPoints=function(){return this.points};this.getMarkerAngles=function(){for(var a=0;a<this.angles.length;a++)if(null==this.angles[a])for(var b=a+1;b<this.angles.length;b++)if(null!=this.angles[b]){this.angles[a]=this.angles[b];break}return this.angles}}(a);this.path=function(a){var b=this.PathParser;b.reset();var c=
new d.BoundingBox;for(null!=a&&a.beginPath();!b.isEnd();)switch(b.nextCommand(),b.command){case "M":case "m":var e=b.getAsCurrentPoint();b.addMarker(e);c.addPoint(e.x,e.y);null!=a&&a.moveTo(e.x,e.y);for(b.start=b.current;!b.isCommandOrEnd();)e=b.getAsCurrentPoint(),b.addMarker(e,b.start),c.addPoint(e.x,e.y),null!=a&&a.lineTo(e.x,e.y);break;case "L":case "l":for(;!b.isCommandOrEnd();){var f=b.current,e=b.getAsCurrentPoint();b.addMarker(e,f);c.addPoint(e.x,e.y);null!=a&&a.lineTo(e.x,e.y)}break;case "H":case "h":for(;!b.isCommandOrEnd();)e=
new d.Point((b.isRelativeCommand()?b.current.x:0)+b.getScalar(),b.current.y),b.addMarker(e,b.current),b.current=e,c.addPoint(b.current.x,b.current.y),null!=a&&a.lineTo(b.current.x,b.current.y);break;case "V":case "v":for(;!b.isCommandOrEnd();)e=new d.Point(b.current.x,(b.isRelativeCommand()?b.current.y:0)+b.getScalar()),b.addMarker(e,b.current),b.current=e,c.addPoint(b.current.x,b.current.y),null!=a&&a.lineTo(b.current.x,b.current.y);break;case "C":case "c":for(;!b.isCommandOrEnd();){var g=b.current,
f=b.getPoint(),l=b.getAsControlPoint(),e=b.getAsCurrentPoint();b.addMarker(e,l,f);c.addBezierCurve(g.x,g.y,f.x,f.y,l.x,l.y,e.x,e.y);null!=a&&a.bezierCurveTo(f.x,f.y,l.x,l.y,e.x,e.y)}break;case "S":case "s":for(;!b.isCommandOrEnd();)g=b.current,f=b.getReflectedControlPoint(),l=b.getAsControlPoint(),e=b.getAsCurrentPoint(),b.addMarker(e,l,f),c.addBezierCurve(g.x,g.y,f.x,f.y,l.x,l.y,e.x,e.y),null!=a&&a.bezierCurveTo(f.x,f.y,l.x,l.y,e.x,e.y);break;case "Q":case "q":for(;!b.isCommandOrEnd();)g=b.current,
l=b.getAsControlPoint(),e=b.getAsCurrentPoint(),b.addMarker(e,l,l),c.addQuadraticCurve(g.x,g.y,l.x,l.y,e.x,e.y),null!=a&&a.quadraticCurveTo(l.x,l.y,e.x,e.y);break;case "T":case "t":for(;!b.isCommandOrEnd();)g=b.current,l=b.getReflectedControlPoint(),b.control=l,e=b.getAsCurrentPoint(),b.addMarker(e,l,l),c.addQuadraticCurve(g.x,g.y,l.x,l.y,e.x,e.y),null!=a&&a.quadraticCurveTo(l.x,l.y,e.x,e.y);break;case "A":case "a":for(;!b.isCommandOrEnd();){var g=b.current,h=b.getScalar(),m=b.getScalar(),f=b.getScalar()*
(Math.PI/180),p=b.getScalar(),l=b.getScalar(),e=b.getAsCurrentPoint(),r=new d.Point(Math.cos(f)*(g.x-e.x)/2+Math.sin(f)*(g.y-e.y)/2,-Math.sin(f)*(g.x-e.x)/2+Math.cos(f)*(g.y-e.y)/2),n=Math.pow(r.x,2)/Math.pow(h,2)+Math.pow(r.y,2)/Math.pow(m,2);1<n&&(h*=Math.sqrt(n),m*=Math.sqrt(n));p=(p==l?-1:1)*Math.sqrt((Math.pow(h,2)*Math.pow(m,2)-Math.pow(h,2)*Math.pow(r.y,2)-Math.pow(m,2)*Math.pow(r.x,2))/(Math.pow(h,2)*Math.pow(r.y,2)+Math.pow(m,2)*Math.pow(r.x,2)));isNaN(p)&&(p=0);var t=new d.Point(p*h*r.y/
m,p*-m*r.x/h),g=new d.Point((g.x+e.x)/2+Math.cos(f)*t.x-Math.sin(f)*t.y,(g.y+e.y)/2+Math.sin(f)*t.x+Math.cos(f)*t.y),u=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2))},w=function(a,b){return(a[0]*b[0]+a[1]*b[1])/(u(a)*u(b))},v=function(a,b){return(a[0]*b[1]<a[1]*b[0]?-1:1)*Math.acos(w(a,b))},p=v([1,0],[(r.x-t.x)/h,(r.y-t.y)/m]),n=[(r.x-t.x)/h,(r.y-t.y)/m],t=[(-r.x-t.x)/h,(-r.y-t.y)/m],r=v(n,t);-1>=w(n,t)&&(r=Math.PI);1<=w(n,t)&&(r=0);n=1-l?1:-1;t=p+r/2*n;v=new d.Point(g.x+h*Math.cos(t),
g.y+m*Math.sin(t));b.addMarkerAngle(v,t-n*Math.PI/2);b.addMarkerAngle(e,t-n*Math.PI);c.addPoint(e.x,e.y);null!=a&&(w=h>m?h:m,e=h>m?1:h/m,h=h>m?m/h:1,a.translate(g.x,g.y),a.rotate(f),a.scale(e,h),a.arc(0,0,w,p,p+r,1-l),a.scale(1/e,1/h),a.rotate(-f),a.translate(-g.x,-g.y))}break;case "Z":case "z":null!=a&&a.closePath(),b.current=b.start}return c};this.getMarkers=function(){for(var a=this.PathParser.getMarkerPoints(),b=this.PathParser.getMarkerAngles(),c=[],d=0;d<a.length;d++)c.push([a[d],b[d]]);return c}};
d.Element.path.prototype=new d.Element.PathElementBase;d.Element.pattern=function(a){this.base=d.Element.ElementBase;this.base(a);this.createPattern=function(a,b){var c=this.attribute("width").toPixels("x",!0),e=this.attribute("height").toPixels("y",!0),f=new d.Element.svg;f.attributes.viewBox=new d.Property("viewBox",this.attribute("viewBox").value);f.attributes.width=new d.Property("width",c+"px");f.attributes.height=new d.Property("height",e+"px");f.attributes.transform=new d.Property("transform",
this.attribute("patternTransform").value);f.children=this.children;var g=document.createElement("canvas");g.width=c;g.height=e;c=g.getContext("2d");this.attribute("x").hasValue()&&this.attribute("y").hasValue()&&c.translate(this.attribute("x").toPixels("x",!0),this.attribute("y").toPixels("y",!0));for(e=-1;1>=e;e++)for(var l=-1;1>=l;l++)c.save(),f.attributes.x=new d.Property("x",e*g.width),f.attributes.y=new d.Property("y",l*g.height),f.render(c),c.restore();return a.createPattern(g,"repeat")}};d.Element.pattern.prototype=
new d.Element.ElementBase;d.Element.marker=function(a){this.base=d.Element.ElementBase;this.base(a);this.baseRender=this.render;this.render=function(a,b,c){a.translate(b.x,b.y);"auto"==this.attribute("orient").valueOrDefault("auto")&&a.rotate(c);"strokeWidth"==this.attribute("markerUnits").valueOrDefault("strokeWidth")&&a.scale(a.lineWidth,a.lineWidth);a.save();var e=new d.Element.svg;e.attributes.viewBox=new d.Property("viewBox",this.attribute("viewBox").value);e.attributes.refX=new d.Property("refX",
this.attribute("refX").value);e.attributes.refY=new d.Property("refY",this.attribute("refY").value);e.attributes.width=new d.Property("width",this.attribute("markerWidth").value);e.attributes.height=new d.Property("height",this.attribute("markerHeight").value);e.attributes.fill=new d.Property("fill",this.attribute("fill").valueOrDefault("black"));e.attributes.stroke=new d.Property("stroke",this.attribute("stroke").valueOrDefault("none"));e.children=this.children;e.render(a);a.restore();"strokeWidth"==
this.attribute("markerUnits").valueOrDefault("strokeWidth")&&a.scale(1/a.lineWidth,1/a.lineWidth);"auto"==this.attribute("orient").valueOrDefault("auto")&&a.rotate(-c);a.translate(-b.x,-b.y)}};d.Element.marker.prototype=new d.Element.ElementBase;d.Element.defs=function(a){this.base=d.Element.ElementBase;this.base(a);this.render=function(a){}};d.Element.defs.prototype=new d.Element.ElementBase;d.Element.GradientBase=function(a){this.base=d.Element.ElementBase;this.base(a);this.stops=[];for(a=0;a<this.children.length;a++){var b=
this.children[a];"stop"==b.type&&this.stops.push(b)}this.getGradient=function(){};this.gradientUnits=function(){return this.attribute("gradientUnits").valueOrDefault("objectBoundingBox")};this.attributesToInherit=["gradientUnits"];this.inheritStopContainer=function(a){for(var b=0;b<this.attributesToInherit.length;b++){var c=this.attributesToInherit[b];!this.attribute(c).hasValue()&&a.attribute(c).hasValue()&&(this.attribute(c,!0).value=a.attribute(c).value)}};this.createGradient=function(a,b,c){var e=
this;this.getHrefAttribute().hasValue()&&(e=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(e));var f=function(a){return c.hasValue()?(new d.Property("color",a)).addOpacity(c).value:a};a=this.getGradient(a,b);if(null==a)return f(e.stops[e.stops.length-1].color);for(b=0;b<e.stops.length;b++)a.addColorStop(e.stops[b].offset,f(e.stops[b].color));return this.attribute("gradientTransform").hasValue()?(e=d.ViewPort.viewPorts[0],f=new d.Element.rect,f.attributes.x=new d.Property("x",-d.MAX_VIRTUAL_PIXELS/
3),f.attributes.y=new d.Property("y",-d.MAX_VIRTUAL_PIXELS/3),f.attributes.width=new d.Property("width",d.MAX_VIRTUAL_PIXELS),f.attributes.height=new d.Property("height",d.MAX_VIRTUAL_PIXELS),b=new d.Element.g,b.attributes.transform=new d.Property("transform",this.attribute("gradientTransform").value),b.children=[f],f=new d.Element.svg,f.attributes.x=new d.Property("x",0),f.attributes.y=new d.Property("y",0),f.attributes.width=new d.Property("width",e.width),f.attributes.height=new d.Property("height",
e.height),f.children=[b],b=document.createElement("canvas"),b.width=e.width,b.height=e.height,e=b.getContext("2d"),e.fillStyle=a,f.render(e),e.createPattern(b,"no-repeat")):a}};d.Element.GradientBase.prototype=new d.Element.ElementBase;d.Element.linearGradient=function(a){this.base=d.Element.GradientBase;this.base(a);this.attributesToInherit.push("x1");this.attributesToInherit.push("y1");this.attributesToInherit.push("x2");this.attributesToInherit.push("y2");this.getGradient=function(a,b){var c="objectBoundingBox"==
this.gradientUnits()?b.getBoundingBox():null;this.attribute("x1").hasValue()||this.attribute("y1").hasValue()||this.attribute("x2").hasValue()||this.attribute("y2").hasValue()||(this.attribute("x1",!0).value=0,this.attribute("y1",!0).value=0,this.attribute("x2",!0).value=1,this.attribute("y2",!0).value=0);var d="objectBoundingBox"==this.gradientUnits()?c.x()+c.width()*this.attribute("x1").numValue():this.attribute("x1").toPixels("x"),e="objectBoundingBox"==this.gradientUnits()?c.y()+c.height()*this.attribute("y1").numValue():
this.attribute("y1").toPixels("y"),f="objectBoundingBox"==this.gradientUnits()?c.x()+c.width()*this.attribute("x2").numValue():this.attribute("x2").toPixels("x"),c="objectBoundingBox"==this.gradientUnits()?c.y()+c.height()*this.attribute("y2").numValue():this.attribute("y2").toPixels("y");return d==f&&e==c?null:a.createLinearGradient(d,e,f,c)}};d.Element.linearGradient.prototype=new d.Element.GradientBase;d.Element.radialGradient=function(a){this.base=d.Element.GradientBase;this.base(a);this.attributesToInherit.push("cx");
this.attributesToInherit.push("cy");this.attributesToInherit.push("r");this.attributesToInherit.push("fx");this.attributesToInherit.push("fy");this.getGradient=function(a,b){var c=b.getBoundingBox();this.attribute("cx").hasValue()||(this.attribute("cx",!0).value="50%");this.attribute("cy").hasValue()||(this.attribute("cy",!0).value="50%");this.attribute("r").hasValue()||(this.attribute("r",!0).value="50%");var d="objectBoundingBox"==this.gradientUnits()?c.x()+c.width()*this.attribute("cx").numValue():
this.attribute("cx").toPixels("x"),e="objectBoundingBox"==this.gradientUnits()?c.y()+c.height()*this.attribute("cy").numValue():this.attribute("cy").toPixels("y"),f=d,g=e;this.attribute("fx").hasValue()&&(f="objectBoundingBox"==this.gradientUnits()?c.x()+c.width()*this.attribute("fx").numValue():this.attribute("fx").toPixels("x"));this.attribute("fy").hasValue()&&(g="objectBoundingBox"==this.gradientUnits()?c.y()+c.height()*this.attribute("fy").numValue():this.attribute("fy").toPixels("y"));c="objectBoundingBox"==
this.gradientUnits()?(c.width()+c.height())/2*this.attribute("r").numValue():this.attribute("r").toPixels();return a.createRadialGradient(f,g,0,d,e,c)}};d.Element.radialGradient.prototype=new d.Element.GradientBase;d.Element.stop=function(a){this.base=d.Element.ElementBase;this.base(a);this.offset=this.attribute("offset").numValue();0>this.offset&&(this.offset=0);1<this.offset&&(this.offset=1);a=this.style("stop-color",!0);""===a.value&&(a.value="#000");this.style("stop-opacity").hasValue()&&(a=a.addOpacity(this.style("stop-opacity")));
this.color=a.value};d.Element.stop.prototype=new d.Element.ElementBase;d.Element.AnimateBase=function(a){this.base=d.Element.ElementBase;this.base(a);d.Animations.push(this);this.duration=0;this.begin=this.attribute("begin").toMilliseconds();this.maxDuration=this.begin+this.attribute("dur").toMilliseconds();this.getProperty=function(){var a=this.attribute("attributeType").value,b=this.attribute("attributeName").value;return"CSS"==a?this.parent.style(b,!0):this.parent.attribute(b,!0)};this.initialValue=
null;this.initialUnits="";this.removed=!1;this.calcValue=function(){return""};this.update=function(a){null==this.initialValue&&(this.initialValue=this.getProperty().value,this.initialUnits=this.getProperty().getUnits());if(this.duration>this.maxDuration){if("indefinite"==this.attribute("repeatCount").value||"indefinite"==this.attribute("repeatDur").value)this.duration=0;else if("freeze"==this.attribute("fill").valueOrDefault("remove")&&!this.frozen)this.frozen=!0,this.parent.animationFrozen=!0,this.parent.animationFrozenValue=
this.getProperty().value;else if("remove"==this.attribute("fill").valueOrDefault("remove")&&!this.removed)return this.removed=!0,this.getProperty().value=this.parent.animationFrozen?this.parent.animationFrozenValue:this.initialValue,!0;return!1}this.duration+=a;a=!1;this.begin<this.duration&&(a=this.calcValue(),this.attribute("type").hasValue()&&(a=this.attribute("type").value+"("+a+")"),this.getProperty().value=a,a=!0);return a};this.from=this.attribute("from");this.to=this.attribute("to");this.values=
this.attribute("values");this.values.hasValue()&&(this.values.value=this.values.value.split(";"));this.progress=function(){var a={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(this.values.hasValue()){var b=a.progress*(this.values.value.length-1),c=Math.floor(b),e=Math.ceil(b);a.from=new d.Property("from",parseFloat(this.values.value[c]));a.to=new d.Property("to",parseFloat(this.values.value[e]));a.progress=(b-c)/(e-c)}else a.from=this.from,a.to=this.to;return a}};d.Element.AnimateBase.prototype=
new d.Element.ElementBase;d.Element.animate=function(a){this.base=d.Element.AnimateBase;this.base(a);this.calcValue=function(){var a=this.progress();return a.from.numValue()+(a.to.numValue()-a.from.numValue())*a.progress+this.initialUnits}};d.Element.animate.prototype=new d.Element.AnimateBase;d.Element.animateColor=function(b){this.base=d.Element.AnimateBase;this.base(b);this.calcValue=function(){var b=this.progress(),c=new a(b.from.value),d=new a(b.to.value);if(c.ok&&d.ok){var e=c.g+(d.g-c.g)*b.progress,
f=c.b+(d.b-c.b)*b.progress;return"rgb("+parseInt(c.r+(d.r-c.r)*b.progress,10)+","+parseInt(e,10)+","+parseInt(f,10)+")"}return this.attribute("from").value}};d.Element.animateColor.prototype=new d.Element.AnimateBase;d.Element.animateTransform=function(a){this.base=d.Element.AnimateBase;this.base(a);this.calcValue=function(){for(var a=this.progress(),b=d.ToNumberArray(a.from.value),c=d.ToNumberArray(a.to.value),e="",f=0;f<b.length;f++)e+=b[f]+(c[f]-b[f])*a.progress+" ";return e}};d.Element.animateTransform.prototype=
new d.Element.animate;d.Element.font=function(a){this.base=d.Element.ElementBase;this.base(a);this.horizAdvX=this.attribute("horiz-adv-x").numValue();this.isArabic=this.isRTL=!1;this.missingGlyph=this.fontFace=null;this.glyphs=[];for(a=0;a<this.children.length;a++){var b=this.children[a];"font-face"==b.type?(this.fontFace=b,b.style("font-family").hasValue()&&(d.Definitions[b.style("font-family").value]=this)):"missing-glyph"==b.type?this.missingGlyph=b:"glyph"==b.type&&(""!=b.arabicForm?(this.isArabic=
this.isRTL=!0,"undefined"==typeof this.glyphs[b.unicode]&&(this.glyphs[b.unicode]=[]),this.glyphs[b.unicode][b.arabicForm]=b):this.glyphs[b.unicode]=b)}};d.Element.font.prototype=new d.Element.ElementBase;d.Element.fontface=function(a){this.base=d.Element.ElementBase;this.base(a);this.ascent=this.attribute("ascent").value;this.descent=this.attribute("descent").value;this.unitsPerEm=this.attribute("units-per-em").numValue()};d.Element.fontface.prototype=new d.Element.ElementBase;d.Element.missingglyph=
function(a){this.base=d.Element.path;this.base(a);this.horizAdvX=0};d.Element.missingglyph.prototype=new d.Element.path;d.Element.glyph=function(a){this.base=d.Element.path;this.base(a);this.horizAdvX=this.attribute("horiz-adv-x").numValue();this.unicode=this.attribute("unicode").value;this.arabicForm=this.attribute("arabic-form").value};d.Element.glyph.prototype=new d.Element.path;d.Element.text=function(a){this.captureTextNodes=!0;this.base=d.Element.RenderedElementBase;this.base(a);this.baseSetContext=
this.setContext;this.setContext=function(a){this.baseSetContext(a);var b=this.style("dominant-baseline").toTextBaseline();null==b&&(b=this.style("alignment-baseline").toTextBaseline());null!=b&&(a.textBaseline=b)};this.getBoundingBox=function(){var a=this.attribute("x").toPixels("x"),b=this.attribute("y").toPixels("y"),c=this.parent.style("font-size").numValueOrDefault(d.Font.Parse(d.ctx.font).fontSize);return new d.BoundingBox(a,b-c,a+Math.floor(2*c/3)*this.children[0].getText().length,b)};this.renderChildren=
function(a){this.x=this.attribute("x").toPixels("x");this.y=this.attribute("y").toPixels("y");this.attribute("dx").hasValue()&&(this.x+=this.attribute("dx").toPixels("x"));this.attribute("dy").hasValue()&&(this.y+=this.attribute("dy").toPixels("y"));this.x+=this.getAnchorDelta(a,this,0);for(var b=0;b<this.children.length;b++)this.renderChild(a,this,this,b)};this.getAnchorDelta=function(a,b,c){var d=this.style("text-anchor").valueOrDefault("start");if("start"!=d){for(var e=0,f=c;f<b.children.length;f++){var g=
b.children[f];if(f>c&&g.attribute("x").hasValue())break;e+=g.measureTextRecursive(a)}return-1*("end"==d?e:e/2)}return 0};this.renderChild=function(a,b,c,d){var e=c.children[d];e.attribute("x").hasValue()?(e.x=e.attribute("x").toPixels("x")+b.getAnchorDelta(a,c,d),e.attribute("dx").hasValue()&&(e.x+=e.attribute("dx").toPixels("x"))):(e.attribute("dx").hasValue()&&(b.x+=e.attribute("dx").toPixels("x")),e.x=b.x);b.x=e.x+e.measureText(a);e.attribute("y").hasValue()?(e.y=e.attribute("y").toPixels("y"),
e.attribute("dy").hasValue()&&(e.y+=e.attribute("dy").toPixels("y"))):(e.attribute("dy").hasValue()&&(b.y+=e.attribute("dy").toPixels("y")),e.y=b.y);b.y=e.y;e.render(a);for(d=0;d<e.children.length;d++)b.renderChild(a,b,e,d)}};d.Element.text.prototype=new d.Element.RenderedElementBase;d.Element.TextElementBase=function(a){this.base=d.Element.RenderedElementBase;this.base(a);this.getGlyph=function(a,b,c){var d=b[c],e=null;if(a.isArabic){var f="isolated";(0==c||" "==b[c-1])&&c<b.length-2&&" "!=b[c+1]&&
(f="terminal");0<c&&" "!=b[c-1]&&c<b.length-2&&" "!=b[c+1]&&(f="medial");0<c&&" "!=b[c-1]&&(c==b.length-1||" "==b[c+1])&&(f="initial");"undefined"!=typeof a.glyphs[d]&&(e=a.glyphs[d][f],null==e&&"glyph"==a.glyphs[d].type&&(e=a.glyphs[d]))}else e=a.glyphs[d];null==e&&(e=a.missingGlyph);return e};this.renderChildren=function(a){var b=this.parent.style("font-family").getDefinition();if(null!=b){var c=this.parent.style("font-size").numValueOrDefault(d.Font.Parse(d.ctx.font).fontSize),e=this.parent.style("font-style").valueOrDefault(d.Font.Parse(d.ctx.font).fontStyle),
f=this.getText();b.isRTL&&(f=f.split("").reverse().join(""));for(var g=d.ToNumberArray(this.parent.attribute("dx").value),l=0;l<f.length;l++){var h=this.getGlyph(b,f,l),m=c/b.fontFace.unitsPerEm;a.translate(this.x,this.y);a.scale(m,-m);var p=a.lineWidth;a.lineWidth=a.lineWidth*b.fontFace.unitsPerEm/c;"italic"==e&&a.transform(1,0,.4,1,0,0);h.render(a);"italic"==e&&a.transform(1,0,-.4,1,0,0);a.lineWidth=p;a.scale(1/m,-1/m);a.translate(-this.x,-this.y);this.x+=c*(h.horizAdvX||b.horizAdvX)/b.fontFace.unitsPerEm;
"undefined"==typeof g[l]||isNaN(g[l])||(this.x+=g[l])}}else""!=a.fillStyle&&a.fillText(d.compressSpaces(this.getText()),this.x,this.y),""!=a.strokeStyle&&a.strokeText(d.compressSpaces(this.getText()),this.x,this.y)};this.getText=function(){};this.measureTextRecursive=function(a){for(var b=this.measureText(a),c=0;c<this.children.length;c++)b+=this.children[c].measureTextRecursive(a);return b};this.measureText=function(a){var b=this.parent.style("font-family").getDefinition();if(null!=b){a=this.parent.style("font-size").numValueOrDefault(d.Font.Parse(d.ctx.font).fontSize);
var c=0,e=this.getText();b.isRTL&&(e=e.split("").reverse().join(""));for(var f=d.ToNumberArray(this.parent.attribute("dx").value),g=0;g<e.length;g++){var l=this.getGlyph(b,e,g),c=c+(l.horizAdvX||b.horizAdvX)*a/b.fontFace.unitsPerEm;"undefined"==typeof f[g]||isNaN(f[g])||(c+=f[g])}return c}b=d.compressSpaces(this.getText());if(!a.measureText)return 10*b.length;a.save();this.setContext(a);b=a.measureText(b).width;a.restore();return b}};d.Element.TextElementBase.prototype=new d.Element.RenderedElementBase;
d.Element.tspan=function(a){this.captureTextNodes=!0;this.base=d.Element.TextElementBase;this.base(a);this.text=d.compressSpaces(a.value||a.text||a.textContent||"");this.getText=function(){return 0<this.children.length?"":this.text}};d.Element.tspan.prototype=new d.Element.TextElementBase;d.Element.tref=function(a){this.base=d.Element.TextElementBase;this.base(a);this.getText=function(){var a=this.getHrefAttribute().getDefinition();if(null!=a)return a.children[0].getText()}};d.Element.tref.prototype=
new d.Element.TextElementBase;d.Element.a=function(a){this.base=d.Element.TextElementBase;this.base(a);this.hasText=0<a.childNodes.length;for(var b=0;b<a.childNodes.length;b++)3!=a.childNodes[b].nodeType&&(this.hasText=!1);this.text=this.hasText?a.childNodes[0].value:"";this.getText=function(){return this.text};this.baseRenderChildren=this.renderChildren;this.renderChildren=function(a){if(this.hasText){this.baseRenderChildren(a);var b=new d.Property("fontSize",d.Font.Parse(d.ctx.font).fontSize);d.Mouse.checkBoundingBox(this,
new d.BoundingBox(this.x,this.y-b.toPixels("y"),this.x+this.measureText(a),this.y))}else 0<this.children.length&&(b=new d.Element.g,b.children=this.children,b.parent=this,b.render(a))};this.onclick=function(){window.open(this.getHrefAttribute().value)};this.onmousemove=function(){d.ctx.canvas.style.cursor="pointer"}};d.Element.a.prototype=new d.Element.TextElementBase;d.Element.image=function(a){this.base=d.Element.RenderedElementBase;this.base(a);var b=this.getHrefAttribute().value;if(""!=b){var c=
b.match(/\.svg$/);d.Images.push(this);this.loaded=!1;if(c)this.img=d.ajax(b),this.loaded=!0;else{this.img=document.createElement("img");1==d.opts.useCORS&&(this.img.crossOrigin="Anonymous");var e=this;this.img.onload=function(){e.loaded=!0};this.img.onerror=function(){d.log('ERROR: image "'+b+'" not found');e.loaded=!0};this.img.src=b}this.renderChildren=function(a){var b=this.attribute("x").toPixels("x"),e=this.attribute("y").toPixels("y"),f=this.attribute("width").toPixels("x"),g=this.attribute("height").toPixels("y");
0!=f&&0!=g&&(a.save(),c?a.drawSvg(this.img,b,e,f,g):(a.translate(b,e),d.AspectRatio(a,this.attribute("preserveAspectRatio").value,f,this.img.width,g,this.img.height,0,0),a.drawImage(this.img,0,0)),a.restore())};this.getBoundingBox=function(){var a=this.attribute("x").toPixels("x"),b=this.attribute("y").toPixels("y"),c=this.attribute("width").toPixels("x"),e=this.attribute("height").toPixels("y");return new d.BoundingBox(a,b,a+c,b+e)}}};d.Element.image.prototype=new d.Element.RenderedElementBase;d.Element.g=
function(a){this.base=d.Element.RenderedElementBase;this.base(a);this.getBoundingBox=function(){for(var a=new d.BoundingBox,b=0;b<this.children.length;b++)a.addBoundingBox(this.children[b].getBoundingBox());return a}};d.Element.g.prototype=new d.Element.RenderedElementBase;d.Element.symbol=function(a){this.base=d.Element.RenderedElementBase;this.base(a);this.render=function(a){}};d.Element.symbol.prototype=new d.Element.RenderedElementBase;d.Element.style=function(a){this.base=d.Element.ElementBase;
this.base(a);for(var b="",c=0;c<a.childNodes.length;c++)b+=a.childNodes[c].data;b=b.replace(/(\/\*([^*]|[\r\n]|(\*+([^*\/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"");b=d.compressSpaces(b);a=b.split("}");for(c=0;c<a.length;c++)if(""!=d.trim(a[c]))for(var f=a[c].split("{"),b=f[0].split(","),f=f[1].split(";"),g=0;g<b.length;g++){var l=d.trim(b[g]);if(""!=l){for(var h=d.Styles[l]||{},m=0;m<f.length;m++){var p=f[m].indexOf(":"),r=f[m].substr(0,p),p=f[m].substr(p+1,f[m].length-p);null!=r&&null!=p&&(h[d.trim(r)]=
new d.Property(d.trim(r),d.trim(p)))}d.Styles[l]=h;d.StylesSpecificity[l]=e(l);if("@font-face"==l)for(l=h["font-family"].value.replace(/"/g,""),h=h.src.value.split(","),m=0;m<h.length;m++)if(0<h[m].indexOf('format("svg")'))for(r=h[m].indexOf("url"),p=h[m].indexOf(")",r),r=h[m].substr(r+5,p-r-6),r=d.parseXml(d.ajax(r)).getElementsByTagName("font"),p=0;p<r.length;p++){var n=d.CreateElement(r[p]);d.Definitions[l]=n}}}};d.Element.style.prototype=new d.Element.ElementBase;d.Element.use=function(a){this.base=
d.Element.RenderedElementBase;this.base(a);this.baseSetContext=this.setContext;this.setContext=function(a){this.baseSetContext(a);this.attribute("x").hasValue()&&a.translate(this.attribute("x").toPixels("x"),0);this.attribute("y").hasValue()&&a.translate(0,this.attribute("y").toPixels("y"))};var b=this.getHrefAttribute().getDefinition();this.path=function(a){null!=b&&b.path(a)};this.getBoundingBox=function(){if(null!=b)return b.getBoundingBox()};this.renderChildren=function(a){if(null!=b){var c=b;
"symbol"==b.type&&(c=new d.Element.svg,c.type="svg",c.attributes.viewBox=new d.Property("viewBox",b.attribute("viewBox").value),c.attributes.preserveAspectRatio=new d.Property("preserveAspectRatio",b.attribute("preserveAspectRatio").value),c.attributes.overflow=new d.Property("overflow",b.attribute("overflow").value),c.children=b.children);"svg"==c.type&&(this.attribute("width").hasValue()&&(c.attributes.width=new d.Property("width",this.attribute("width").value)),this.attribute("height").hasValue()&&
(c.attributes.height=new d.Property("height",this.attribute("height").value)));var e=c.parent;c.parent=null;c.render(a);c.parent=e}}};d.Element.use.prototype=new d.Element.RenderedElementBase;d.Element.mask=function(a){this.base=d.Element.ElementBase;this.base(a);this.apply=function(a,b){var c=this.attribute("x").toPixels("x"),e=this.attribute("y").toPixels("y"),f=this.attribute("width").toPixels("x"),g=this.attribute("height").toPixels("y");if(0==f&&0==g){g=new d.BoundingBox;for(c=0;c<this.children.length;c++)g.addBoundingBox(this.children[c].getBoundingBox());
c=Math.floor(g.x1);e=Math.floor(g.y1);f=Math.floor(g.width());g=Math.floor(g.height())}var l=b.attribute("mask").value;b.attribute("mask").value="";var h=document.createElement("canvas");h.width=c+f;h.height=e+g;var m=h.getContext("2d");this.renderChildren(m);var p=document.createElement("canvas");p.width=c+f;p.height=e+g;var r=p.getContext("2d");b.render(r);r.globalCompositeOperation="destination-in";r.fillStyle=m.createPattern(h,"no-repeat");r.fillRect(0,0,c+f,e+g);a.fillStyle=r.createPattern(p,
"no-repeat");a.fillRect(0,0,c+f,e+g);b.attribute("mask").value=l};this.render=function(a){}};d.Element.mask.prototype=new d.Element.ElementBase;d.Element.clipPath=function(a){this.base=d.Element.ElementBase;this.base(a);this.apply=function(a){var b=CanvasRenderingContext2D.prototype.beginPath;CanvasRenderingContext2D.prototype.beginPath=function(){};var c=CanvasRenderingContext2D.prototype.closePath;CanvasRenderingContext2D.prototype.closePath=function(){};b.call(a);for(var e=0;e<this.children.length;e++){var f=
this.children[e];if("undefined"!=typeof f.path){var g=null;f.style("transform",!1,!0).hasValue()&&(g=new d.Transform(f.style("transform",!1,!0).value),g.apply(a));f.path(a);CanvasRenderingContext2D.prototype.closePath=c;g&&g.unapply(a)}}c.call(a);a.clip();CanvasRenderingContext2D.prototype.beginPath=b;CanvasRenderingContext2D.prototype.closePath=c};this.render=function(a){}};d.Element.clipPath.prototype=new d.Element.ElementBase;d.Element.filter=function(a){this.base=d.Element.ElementBase;this.base(a);
this.apply=function(a,b){var c=b.getBoundingBox(),d=Math.floor(c.x1),e=Math.floor(c.y1),f=Math.floor(c.width()),c=Math.floor(c.height()),g=b.style("filter").value;b.style("filter").value="";for(var l=0,h=0,m=0;m<this.children.length;m++)var p=this.children[m].extraFilterDistance||0,l=Math.max(l,p),h=Math.max(h,p);p=document.createElement("canvas");p.width=f+2*l;p.height=c+2*h;var r=p.getContext("2d");r.translate(-d+l,-e+h);b.render(r);for(m=0;m<this.children.length;m++)"function"==typeof this.children[m].apply&&
this.children[m].apply(r,0,0,f+2*l,c+2*h);a.drawImage(p,0,0,f+2*l,c+2*h,d-l,e-h,f+2*l,c+2*h);b.style("filter",!0).value=g};this.render=function(a){}};d.Element.filter.prototype=new d.Element.ElementBase;d.Element.feMorphology=function(a){this.base=d.Element.ElementBase;this.base(a);this.apply=function(a,b,c,d,e){}};d.Element.feMorphology.prototype=new d.Element.ElementBase;d.Element.feComposite=function(a){this.base=d.Element.ElementBase;this.base(a);this.apply=function(a,b,c,d,e){}};d.Element.feComposite.prototype=
new d.Element.ElementBase;d.Element.feColorMatrix=function(a){function b(a,d){var e=c[a];return e*(0>e?d-255:d)}this.base=d.Element.ElementBase;this.base(a);var c=d.ToNumberArray(this.attribute("values").value);switch(this.attribute("type").valueOrDefault("matrix")){case "saturate":a=c[0];c=[.213+.787*a,.715-.715*a,.072-.072*a,0,0,.213-.213*a,.715+.285*a,.072-.072*a,0,0,.213-.213*a,.715-.715*a,.072+.928*a,0,0,0,0,0,1,0,0,0,0,0,1];break;case "hueRotate":var e=c[0]*Math.PI/180;a=function(a,b,c){return a+
Math.cos(e)*b+Math.sin(e)*c};c=[a(.213,.787,-.213),a(.715,-.715,-.715),a(.072,-.072,.928),0,0,a(.213,-.213,.143),a(.715,.285,.14),a(.072,-.072,-.283),0,0,a(.213,-.213,-.787),a(.715,-.715,.715),a(.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break;case "luminanceToAlpha":c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1]}this.apply=function(a,c,d,e,f){var g=a.getImageData(0,0,e,f);for(d=0;d<f;d++)for(c=0;c<e;c++){var l=g.data[d*e*4+4*c+0],h=g.data[d*e*4+4*c+1],m=g.data[d*e*4+4*c+2],p=g.data[d*
e*4+4*c+3],r=b(0,l)+b(1,h)+b(2,m)+b(3,p)+b(4,1);g.data[d*e*4+4*c+0]=r;r=b(5,l)+b(6,h)+b(7,m)+b(8,p)+b(9,1);g.data[d*e*4+4*c+1]=r;r=b(10,l)+b(11,h)+b(12,m)+b(13,p)+b(14,1);g.data[d*e*4+4*c+2]=r;l=b(15,l)+b(16,h)+b(17,m)+b(18,p)+b(19,1);g.data[d*e*4+4*c+3]=l}a.clearRect(0,0,e,f);a.putImageData(g,0,0)}};d.Element.feColorMatrix.prototype=new d.Element.ElementBase;d.Element.feGaussianBlur=function(a){this.base=d.Element.ElementBase;this.base(a);this.extraFilterDistance=this.blurRadius=Math.floor(this.attribute("stdDeviation").numValue());
this.apply=function(a,c,e,f,g){"undefined"==typeof b.canvasRGBA?d.log("ERROR: StackBlur.js must be included for blur to work"):(a.canvas.id=d.UniqueId(),a.canvas.style.display="none",document.body.appendChild(a.canvas),b.canvasRGBA(a.canvas.id,c,e,f,g,this.blurRadius),document.body.removeChild(a.canvas))}};d.Element.feGaussianBlur.prototype=new d.Element.ElementBase;d.Element.title=function(a){};d.Element.title.prototype=new d.Element.ElementBase;d.Element.desc=function(a){};d.Element.desc.prototype=
new d.Element.ElementBase;d.Element.MISSING=function(a){d.log("ERROR: Element '"+a.nodeName+"' not yet implemented.")};d.Element.MISSING.prototype=new d.Element.ElementBase;d.CreateElement=function(a){var b=a.nodeName.replace(/^[^:]+:/,""),b=b.replace(/\-/g,""),c=null,c="undefined"!=typeof d.Element[b]?new d.Element[b](a):new d.Element.MISSING(a);c.type=a.nodeName;return c};d.load=function(a,b){d.loadXml(a,d.ajax(b))};d.loadXml=function(a,b){d.loadXmlDoc(a,d.parseXml(b))};d.loadXmlDoc=function(a,
b){d.init(a);var c=function(b){for(var c=a.canvas;c;)b.x-=c.offsetLeft,b.y-=c.offsetTop,c=c.offsetParent;window.scrollX&&(b.x+=window.scrollX);window.scrollY&&(b.y+=window.scrollY);return b};1!=d.opts.ignoreMouse&&(a.canvas.onclick=function(a){a=c(new d.Point(null!=a?a.clientX:event.clientX,null!=a?a.clientY:event.clientY));d.Mouse.onclick(a.x,a.y)},a.canvas.onmousemove=function(a){a=c(new d.Point(null!=a?a.clientX:event.clientX,null!=a?a.clientY:event.clientY));d.Mouse.onmousemove(a.x,a.y)});var e=
d.CreateElement(b.documentElement);e.root=!0;e.addStylesFromStyleDefinition();var f=!0,g=function(){d.ViewPort.Clear();a.canvas.parentNode&&d.ViewPort.SetCurrent(a.canvas.parentNode.clientWidth,a.canvas.parentNode.clientHeight);1!=d.opts.ignoreDimensions&&(e.style("width").hasValue()&&(a.canvas.width=e.style("width").toPixels("x"),a.canvas.style.width=a.canvas.width+"px"),e.style("height").hasValue()&&(a.canvas.height=e.style("height").toPixels("y"),a.canvas.style.height=a.canvas.height+"px"));var c=
a.canvas.clientWidth||a.canvas.width,g=a.canvas.clientHeight||a.canvas.height;1==d.opts.ignoreDimensions&&e.style("width").hasValue()&&e.style("height").hasValue()&&(c=e.style("width").toPixels("x"),g=e.style("height").toPixels("y"));d.ViewPort.SetCurrent(c,g);null!=d.opts.offsetX&&(e.attribute("x",!0).value=d.opts.offsetX);null!=d.opts.offsetY&&(e.attribute("y",!0).value=d.opts.offsetY);if(null!=d.opts.scaleWidth||null!=d.opts.scaleHeight){var l=null,h=null,m=d.ToNumberArray(e.attribute("viewBox").value);
null!=d.opts.scaleWidth&&(e.attribute("width").hasValue()?l=e.attribute("width").toPixels("x")/d.opts.scaleWidth:isNaN(m[2])||(l=m[2]/d.opts.scaleWidth));null!=d.opts.scaleHeight&&(e.attribute("height").hasValue()?h=e.attribute("height").toPixels("y")/d.opts.scaleHeight:isNaN(m[3])||(h=m[3]/d.opts.scaleHeight));null==l&&(l=h);null==h&&(h=l);e.attribute("width",!0).value=d.opts.scaleWidth;e.attribute("height",!0).value=d.opts.scaleHeight;e.style("transform",!0,!0).value+=" scale("+1/l+","+1/h+")"}1!=
d.opts.ignoreClear&&a.clearRect(0,0,c,g);e.render(a);f&&(f=!1,"function"==typeof d.opts.renderCallback&&d.opts.renderCallback(b))},l=!0;d.ImagesLoaded()&&(l=!1,g());d.intervalID=setInterval(function(){var a=!1;l&&d.ImagesLoaded()&&(l=!1,a=!0);1!=d.opts.ignoreMouse&&(a|=d.Mouse.hasEvents());if(1!=d.opts.ignoreAnimation)for(var b=0;b<d.Animations.length;b++)a|=d.Animations[b].update(1E3/d.FRAMERATE);"function"==typeof d.opts.forceRedraw&&1==d.opts.forceRedraw()&&(a=!0);a&&(g(),d.Mouse.runEvents())},
1E3/d.FRAMERATE)};d.stop=function(){d.intervalID&&clearInterval(d.intervalID)};d.Mouse=new function(){this.events=[];this.hasEvents=function(){return 0!=this.events.length};this.onclick=function(a,b){this.events.push({type:"onclick",x:a,y:b,run:function(a){if(a.onclick)a.onclick()}})};this.onmousemove=function(a,b){this.events.push({type:"onmousemove",x:a,y:b,run:function(a){if(a.onmousemove)a.onmousemove()}})};this.eventElements=[];this.checkPath=function(a,b){for(var c=0;c<this.events.length;c++){var d=
this.events[c];b.isPointInPath&&b.isPointInPath(d.x,d.y)&&(this.eventElements[c]=a)}};this.checkBoundingBox=function(a,b){for(var c=0;c<this.events.length;c++){var d=this.events[c];b.isPointInBox(d.x,d.y)&&(this.eventElements[c]=a)}};this.runEvents=function(){d.ctx.canvas.style.cursor="";for(var a=0;a<this.events.length;a++)for(var b=this.events[a],c=this.eventElements[a];c;)b.run(c),c=c.parent;this.events=[];this.eventElements=[]}};return d}var d=function(a,b,e){if(null==a&&null==b&&null==e)for(b=
document.querySelectorAll("svg"),a=0;a<b.length;a++){e=b[a];var f=document.createElement("canvas");f.width=e.clientWidth;f.height=e.clientHeight;e.parentNode.insertBefore(f,e);e.parentNode.removeChild(e);var g=document.createElement("div");g.appendChild(e);d(f,g.innerHTML)}else{"string"==typeof a&&(a=document.getElementById(a));null!=a.svg&&a.svg.stop();e=c(e||{});if(1!=a.childNodes.length||"OBJECT"!=a.childNodes[0].nodeName)a.svg=e;a=a.getContext("2d");"undefined"!=typeof b.documentElement?e.loadXmlDoc(a,
b):"<"==b.substr(0,1)?e.loadXml(a,b):e.load(a,b)}},f;if("undefined"!=typeof Element.prototype.matches)f=function(a,b){return a.matches(b)};else if("undefined"!=typeof Element.prototype.webkitMatchesSelector)f=function(a,b){return a.webkitMatchesSelector(b)};else if("undefined"!=typeof Element.prototype.mozMatchesSelector)f=function(a,b){return a.mozMatchesSelector(b)};else if("undefined"!=typeof Element.prototype.msMatchesSelector)f=function(a,b){return a.msMatchesSelector(b)};else if("undefined"!=
typeof Element.prototype.oMatchesSelector)f=function(a,b){return a.oMatchesSelector(b)};else{if("function"===typeof jQuery||"function"===typeof Zepto)f=function(a,b){return $(a).is(b)};"undefined"===typeof f&&(f=Sizzle.matchesSelector)}var n=/(\[[^\]]+\])/g,h=/(#[^\s\+>~\.\[:]+)/g,g=/(\.[^\s\+>~\.\[:]+)/g,m=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,p=/(:[\w-]+\([^\)]*\))/gi,r=/(:[^\s\+>~\.\[:]+)/g,t=/([^\s\+>~\.\[:]+)/g;"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.drawSvg=
function(a,b,c,e,f,g){b={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:b,offsetY:c,scaleWidth:e,scaleHeight:f};for(var h in g)g.hasOwnProperty(h)&&(b[h]=g[h]);d(this.canvas,a,b)});return d});
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self);b.html2canvas=a()}}(function(){return function b(e,c,d){function f(g,h){if(!c[g]){if(!e[g]){var p="function"==typeof require&&require;if(!h&&p)return p(g,!0);if(n)return n(g,!0);p=Error("Cannot find module '"+g+"'");throw p.code="MODULE_NOT_FOUND",
p;}p=c[g]={exports:{}};e[g][0].call(p.exports,function(b){var c=e[g][1][b];return f(c?c:b)},p,p.exports,b,e,c,d)}return c[g].exports}for(var n="function"==typeof require&&require,h=0;h<d.length;h++)f(d[h]);return f}({1:[function(b,e,c){(function(b){(function(f){function n(b){throw RangeError(F[b]);}function h(b,c){for(var d=b.length;d--;)b[d]=c(b[d]);return b}function g(b,c){return h(b.split(K),c).join(".")}function m(b){for(var c=[],d=0,e=b.length,f,g;d<e;)f=b.charCodeAt(d++),55296<=f&&56319>=f&&
d<e?(g=b.charCodeAt(d++),56320==(g&64512)?c.push(((f&1023)<<10)+(g&1023)+65536):(c.push(f),d--)):c.push(f);return c}function p(b){return h(b,function(b){var c="";65535<b&&(b-=65536,c+=B(b>>>10&1023|55296),b=56320|b&1023);return c+=B(b)}).join("")}function r(b,c){return b+22+75*(26>b)-((0!=c)<<5)}function t(b,c,d){var e=0;b=d?z(b/700):b>>1;for(b+=z(b/c);455<b;e+=36)b=z(b/35);return z(e+36*b/(b+38))}function l(b){var c=[],d=b.length,e,f=0,g=128,l=72,h,m,r,q,u;h=b.lastIndexOf("-");0>h&&(h=0);for(m=0;m<
h;++m)128<=b.charCodeAt(m)&&n("not-basic"),c.push(b.charCodeAt(m));for(h=0<h?h+1:0;h<d;){m=f;e=1;for(r=36;;r+=36){h>=d&&n("invalid-input");q=b.charCodeAt(h++);q=10>q-48?q-22:26>q-65?q-65:26>q-97?q-97:36;(36<=q||q>z((2147483647-f)/e))&&n("overflow");f+=q*e;u=r<=l?1:r>=l+26?26:r-l;if(q<u)break;q=36-u;e>z(2147483647/q)&&n("overflow");e*=q}e=c.length+1;l=t(f-m,e,0==m);z(f/e)>2147483647-g&&n("overflow");g+=z(f/e);f%=e;c.splice(f++,0,g)}return p(c)}function q(b){var c,d,e,f,g,l,h,p,q,u=[],w,v,A;b=m(b);
w=b.length;c=128;d=0;g=72;for(l=0;l<w;++l)q=b[l],128>q&&u.push(B(q));for((e=f=u.length)&&u.push("-");e<w;){h=2147483647;for(l=0;l<w;++l)q=b[l],q>=c&&q<h&&(h=q);v=e+1;h-c>z((2147483647-d)/v)&&n("overflow");d+=(h-c)*v;c=h;for(l=0;l<w;++l)if(q=b[l],q<c&&2147483647<++d&&n("overflow"),q==c){p=d;for(h=36;;h+=36){q=h<=g?1:h>=g+26?26:h-g;if(p<q)break;A=p-q;p=36-q;u.push(B(r(q+A%p,0)));p=z(A/p)}u.push(B(r(p,0)));g=t(d,v,e==f);d=0;++e}++d;++c}return u.join("")}var w="object"==typeof c&&c,u="object"==typeof e&&
e&&e.exports==w&&e,v="object"==typeof b&&b;if(v.global===v||v.window===v)f=v;var E=/^xn--/,A=/[^ -~]/,K=/\x2E|\u3002|\uFF0E|\uFF61/g,F={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},z=Math.floor,B=String.fromCharCode,H,v={version:"1.2.4",ucs2:{decode:m,encode:p},decode:l,encode:q,toASCII:function(b){return g(b,function(b){return A.test(b)?"xn--"+q(b):b})},toUnicode:function(b){return g(b,function(b){return E.test(b)?
l(b.slice(4).toLowerCase()):b})}};if(w&&!w.nodeType)if(u)u.exports=v;else for(H in v)v.hasOwnProperty(H)&&(w[H]=v[H]);else f.punycode=v})(this)}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],2:[function(b,e,c){function d(b,c){for(var e=3===b.nodeType?document.createTextNode(b.nodeValue):b.cloneNode(!1),f=b.firstChild;f;)!0!==c&&1===f.nodeType&&"SCRIPT"===f.nodeName||e.appendChild(d(f,c)),f=f.nextSibling;if(1===b.nodeType)if(e._scrollTop=
b.scrollTop,e._scrollLeft=b.scrollLeft,"CANVAS"===b.nodeName)try{e&&(e.width=b.width,e.height=b.height,e.getContext("2d").putImageData(b.getContext("2d").getImageData(0,0,b.width,b.height),0,0))}catch(r){n("Unable to copy canvas content from",b,r)}else if("TEXTAREA"===b.nodeName||"SELECT"===b.nodeName)e.value=b.value;return e}function f(b){if(1===b.nodeType)for(b.scrollTop=b._scrollTop,b.scrollLeft=b._scrollLeft,b=b.firstChild;b;)f(b),b=b.nextSibling}var n=b("./log");e.exports=function(b,c,e,p,r,
n,l){var q=d(b.documentElement,r.javascriptEnabled),w=c.createElement("iframe");w.className="html2canvas-container";w.style.visibility="hidden";w.style.position="fixed";w.style.left="-10000px";w.style.top="0px";w.style.border="0";w.width=e;w.height=p;w.scrolling="no";c.body.appendChild(w);return new Promise(function(c){var d=w.contentWindow.document;w.contentWindow.onload=w.onload=function(){var b=setInterval(function(){0<d.body.childNodes.length&&(f(d.documentElement),clearInterval(b),"view"===r.type&&
(w.contentWindow.scrollTo(n,l),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||w.contentWindow.scrollY===l&&w.contentWindow.scrollX===n||(d.documentElement.style.top=-l+"px",d.documentElement.style.left=-n+"px",d.documentElement.style.position="absolute")),c(w))},50)};d.open();d.write("<!DOCTYPE html><html></html>");!b.defaultView||n===b.defaultView.pageXOffset&&l===b.defaultView.pageYOffset||b.defaultView.scrollTo(n,l);d.replaceChild(d.adoptNode(q),d.documentElement);d.close()})}},{"./log":13}],
3:[function(b,e,c){function d(b){this.b=this.g=this.r=0;this.a=null;this.fromArray(b)||this.namedColor(b)||this.rgb(b)||this.rgba(b)||this.hex6(b)||this.hex3(b)}d.prototype.darken=function(b){b=1-b;return new d([Math.round(this.r*b),Math.round(this.g*b),Math.round(this.b*b),this.a])};d.prototype.isTransparent=function(){return 0===this.a};d.prototype.isBlack=function(){return 0===this.r&&0===this.g&&0===this.b};d.prototype.fromArray=function(b){Array.isArray(b)&&(this.r=Math.min(b[0],255),this.g=
Math.min(b[1],255),this.b=Math.min(b[2],255),3<b.length&&(this.a=b[3]));return Array.isArray(b)};var f=/^#([a-f0-9]{3})$/i;d.prototype.hex3=function(b){var c=null;null!==(c=b.match(f))&&(this.r=parseInt(c[1][0]+c[1][0],16),this.g=parseInt(c[1][1]+c[1][1],16),this.b=parseInt(c[1][2]+c[1][2],16));return null!==c};var n=/^#([a-f0-9]{6})$/i;d.prototype.hex6=function(b){var c=null;null!==(c=b.match(n))&&(this.r=parseInt(c[1].substring(0,2),16),this.g=parseInt(c[1].substring(2,4),16),this.b=parseInt(c[1].substring(4,
6),16));return null!==c};var h=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/;d.prototype.rgb=function(b){var c=null;null!==(c=b.match(h))&&(this.r=Number(c[1]),this.g=Number(c[2]),this.b=Number(c[3]));return null!==c};var g=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/;d.prototype.rgba=function(b){var c=null;null!==(c=b.match(g))&&(this.r=Number(c[1]),this.g=Number(c[2]),this.b=Number(c[3]),this.a=Number(c[4]));return null!==c};d.prototype.toString=function(){return null!==
this.a&&1!==this.a?"rgba("+[this.r,this.g,this.b,this.a].join()+")":"rgb("+[this.r,this.g,this.b].join()+")"};d.prototype.namedColor=function(b){b=b.toLowerCase();var c=m[b];if(c)this.r=c[0],this.g=c[1],this.b=c[2];else if("transparent"===b)return this.r=this.g=this.b=this.a=0,!0;return!!c};d.prototype.isColor=!0;var m={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,
235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,
50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,
128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,
160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,
21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,
230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,
224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};e.exports=d},{}],4:[function(b,e,c){function d(b,c){var d=K++;c=c||{};c.logging&&(w.options.logging=!0,w.options.start=Date.now());c.async="undefined"===typeof c.async?!0:c.async;c.allowTaint="undefined"===typeof c.allowTaint?!1:c.allowTaint;c.removeContainer="undefined"===typeof c.removeContainer?!0:c.removeContainer;c.javascriptEnabled="undefined"===typeof c.javascriptEnabled?
!1:c.javascriptEnabled;c.imageTimeout="undefined"===typeof c.imageTimeout?1E4:c.imageTimeout;c.renderer="function"===typeof c.renderer?c.renderer:t;c.strict=!!c.strict;if("string"===typeof b){if("string"!==typeof c.proxy)return Promise.reject("Proxy must be used when rendering url");var e=null!=c.width?c.width:window.innerWidth,g=null!=c.height?c.height:window.innerHeight;return E(p(b),c.proxy,document,e,g,c).then(function(b){return n(b.contentWindow.document.documentElement,b,c,e,g)})}var l=(void 0===
b?[document.documentElement]:b.length?b:[b])[0];l.setAttribute("data-html2canvas-node"+d,d);return f(l.ownerDocument,c,void 0!=c.width?c.width:l.ownerDocument.defaultView.innerWidth,void 0!=c.height?c.height:l.ownerDocument.defaultView.innerHeight,d).then(function(b){"function"===typeof c.onrendered&&(w("options.onrendered is deprecated, html2canvas returns a Promise containing the canvas"),c.onrendered(b));return b})}function f(b,c,d,e,f){return v(b,b,d,e,c,b.defaultView.pageXOffset,b.defaultView.pageYOffset).then(function(g){w("Document cloned");
var l="data-html2canvas-node"+f,h="["+l+"='"+f+"']";b.querySelector(h).removeAttribute(l);var l=g.contentWindow,m=l.document.querySelector(h);return("function"===typeof c.onclone?Promise.resolve(c.onclone(l.document)):Promise.resolve(!0)).then(function(){return n(m,g,c,d,e)})})}function n(b,c,d,e,f){var p=c.contentWindow,n=new r(p.document),t=new l(d,n),u=A(b);e="view"===d.type?e:g(p.document);f="view"===d.type?f:m(p.document);var v=new d.renderer(e,f,t,d,document);return(new q(b,v,n,t,d)).ready.then(function(){w("Finished rendering");
var e;e="view"===d.type?h(v.canvas,{width:v.canvas.width,height:v.canvas.height,top:0,left:0,x:0,y:0}):b===p.document.body||b===p.document.documentElement||null!=d.canvas?v.canvas:h(v.canvas,{width:null!=d.width?d.width:u.width,height:null!=d.height?d.height:u.height,top:u.top,left:u.left,x:0,y:0});d.removeContainer&&(c.parentNode.removeChild(c),w("Cleaned up container"));return e})}function h(b,c){var d=document.createElement("canvas"),e=Math.min(b.width-1,Math.max(0,c.left)),f=Math.min(b.width,
Math.max(1,c.left+c.width)),g=Math.min(b.height-1,Math.max(0,c.top)),l=Math.min(b.height,Math.max(1,c.top+c.height));d.width=c.width;d.height=c.height;f-=e;l-=g;w("Cropping canvas at:","left:",c.left,"top:",c.top,"width:",f,"height:",l);w("Resulting crop with width",c.width,"and height",c.height,"with x",e,"and y",g);d.getContext("2d").drawImage(b,e,g,f,l,c.x,c.y,f,l);return d}function g(b){return Math.max(Math.max(b.body.scrollWidth,b.documentElement.scrollWidth),Math.max(b.body.offsetWidth,b.documentElement.offsetWidth),
Math.max(b.body.clientWidth,b.documentElement.clientWidth))}function m(b){return Math.max(Math.max(b.body.scrollHeight,b.documentElement.scrollHeight),Math.max(b.body.offsetHeight,b.documentElement.offsetHeight),Math.max(b.body.clientHeight,b.documentElement.clientHeight))}function p(b){var c=document.createElement("a");c.href=b;c.href=c.href;return c}var r=b("./support"),t=b("./renderers/canvas"),l=b("./imageloader"),q=b("./nodeparser");c=b("./nodecontainer");var w=b("./log"),u=b("./utils"),v=b("./clone"),
E=b("./proxy").loadUrlDocument,A=u.getBounds,K=0;d.CanvasRenderer=t;d.NodeContainer=c;d.log=w;d.utils=u;b="undefined"===typeof document||"function"!==typeof Object.create||"function"!==typeof document.createElement("canvas").getContext?function(){return Promise.reject("No canvas support")}:d;e.exports=b},{"./clone":2,"./imageloader":11,"./log":13,"./nodecontainer":14,"./nodeparser":15,"./proxy":16,"./renderers/canvas":20,"./support":22,"./utils":26}],5:[function(b,e,c){function d(b){this.src=b;f("DummyImageContainer for",
b);if(!this.promise||!this.image){f("Initiating DummyImageContainer");d.prototype.image=new Image;var c=this.image;d.prototype.promise=new Promise(function(b,d){c.onload=b;c.onerror=d;c.src=n();!0===c.complete&&b(c)})}}var f=b("./log"),n=b("./utils").smallImage;e.exports=d},{"./log":13,"./utils":26}],6:[function(b,e,c){var d=b("./utils").smallImage;e.exports=function(b,c){var e=document.createElement("div"),g=document.createElement("img"),m=document.createElement("span"),p;e.style.visibility="hidden";
e.style.fontFamily=b;e.style.fontSize=c;e.style.margin=0;e.style.padding=0;document.body.appendChild(e);g.src=d();g.width=1;g.height=1;g.style.margin=0;g.style.padding=0;g.style.verticalAlign="baseline";m.style.fontFamily=b;m.style.fontSize=c;m.style.margin=0;m.style.padding=0;m.appendChild(document.createTextNode("Hidden Text"));e.appendChild(m);e.appendChild(g);p=g.offsetTop-m.offsetTop+1;e.removeChild(m);e.appendChild(document.createTextNode("Hidden Text"));e.style.lineHeight="normal";g.style.verticalAlign=
"super";g=g.offsetTop-e.offsetTop+1;document.body.removeChild(e);this.baseline=p;this.lineWidth=1;this.middle=g}},{"./utils":26}],7:[function(b,e,c){function d(){this.data={}}var f=b("./font");d.prototype.getMetrics=function(b,c){void 0===this.data[b+"-"+c]&&(this.data[b+"-"+c]=new f(b,c));return this.data[b+"-"+c]};e.exports=d},{"./font":6}],8:[function(b,e,c){function d(c,d,e){this.image=null;this.src=c;var p=this,r=f(c);this.promise=(d?new Promise(function(b){"about:blank"===c.contentWindow.document.URL||
null==c.contentWindow.document.documentElement?c.contentWindow.onload=c.onload=function(){b(c)}:b(c)}):this.proxyLoad(e.proxy,r,e)).then(function(c){return b("./core")(c.contentWindow.document.documentElement,{type:"view",width:c.width,height:c.height,proxy:e.proxy,javascriptEnabled:e.javascriptEnabled,removeContainer:e.removeContainer,allowTaint:e.allowTaint,imageTimeout:e.imageTimeout/2})}).then(function(b){return p.image=b})}var f=b("./utils").getBounds,n=b("./proxy").loadUrlDocument;d.prototype.proxyLoad=
function(b,c,d){var e=this.src;return n(e.src,b,e.ownerDocument,c.width,c.height,d)};e.exports=d},{"./core":4,"./proxy":16,"./utils":26}],9:[function(b,e,c){function d(b){this.src=b.value;this.colorStops=[];this.type=null;this.y1=this.x1=this.y0=this.x0=.5;this.promise=Promise.resolve(!0)}d.TYPES={LINEAR:1,RADIAL:2};d.REGEXP_COLORSTOP=/^\s*(rgba?\(\s*\d{1,3},\s*\d{1,3},\s*\d{1,3}(?:,\s*[0-9\.]+)?\s*\)|[a-z]{3,20}|#[a-f0-9]{3,6})(?:\s+(\d{1,3}(?:\.\d+)?)(%|px)?)?(?:\s|$)/i;e.exports=d},{}],10:[function(b,
e,c){e.exports=function(b,c){this.src=b;this.image=new Image;var e=this;this.tainted=null;this.promise=new Promise(function(h,g){e.image.onload=h;e.image.onerror=g;c&&(e.image.crossOrigin="anonymous");e.image.src=b;!0===e.image.complete&&h(e.image)})}},{}],11:[function(b,e,c){function d(b,c){this.link=null;this.options=b;this.support=c;this.origin=this.getOrigin(window.location.href)}var f=b("./log"),n=b("./imagecontainer"),h=b("./dummyimagecontainer"),g=b("./proxyimagecontainer"),m=b("./framecontainer"),
p=b("./svgcontainer"),r=b("./svgnodecontainer"),t=b("./lineargradientcontainer"),l=b("./webkitgradientcontainer"),q=b("./utils").bind;d.prototype.findImages=function(b){var c=[];b.reduce(function(b,c){switch(c.node.nodeName){case "IMG":return b.concat([{args:[c.node.src],method:"url"}]);case "svg":case "IFRAME":return b.concat([{args:[c.node],method:c.node.nodeName}])}return b},[]).forEach(this.addImage(c,this.loadImage),this);return c};d.prototype.findBackgroundImage=function(b,c){c.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(b,
this.loadImage),this);return b};d.prototype.addImage=function(b,c){return function(d){d.args.forEach(function(e){this.imageExists(b,e)||(b.splice(0,0,c.call(this,d)),f("Added image #"+b.length,"string"===typeof e?e.substring(0,100):e))},this)}};d.prototype.hasImageBackground=function(b){return"none"!==b.method};d.prototype.loadImage=function(b){return"url"===b.method?(b=b.args[0],!this.isSVG(b)||this.support.svg||this.options.allowTaint?b.match(/data:image\/.*;base64,/i)?new n(b.replace(/url\(['"]{0,}|['"]{0,}\)$/ig,
""),!1):this.isSameOrigin(b)||!0===this.options.allowTaint||this.isSVG(b)?new n(b,!1):this.support.cors&&!this.options.allowTaint&&this.options.useCORS?new n(b,!0):this.options.proxy?new g(b,this.options.proxy):new h(b):new p(b)):"linear-gradient"===b.method?new t(b):"gradient"===b.method?new l(b):"svg"===b.method?new r(b.args[0],this.support.svg):"IFRAME"===b.method?new m(b.args[0],this.isSameOrigin(b.args[0].src),this.options):new h(b)};d.prototype.isSVG=function(b){return"svg"===b.substring(b.length-
3).toLowerCase()||p.prototype.isInline(b)};d.prototype.imageExists=function(b,c){return b.some(function(b){return b.src===c})};d.prototype.isSameOrigin=function(b){return this.getOrigin(b)===this.origin};d.prototype.getOrigin=function(b){var c=this.link||(this.link=document.createElement("a"));c.href=b;c.href=c.href;return c.protocol+c.hostname+c.port};d.prototype.getPromise=function(b){return this.timeout(b,this.options.imageTimeout)["catch"](function(){return(new h(b.src)).promise.then(function(c){b.image=
c})})};d.prototype.get=function(b){var c=null;return this.images.some(function(d){return(c=d).src===b})?c:null};d.prototype.fetch=function(b){this.images=b.reduce(q(this.findBackgroundImage,this),this.findImages(b));this.images.forEach(function(b,c){b.promise.then(function(){f("Succesfully loaded image #"+(c+1),b)},function(d){f("Failed loading image #"+(c+1),b,d)})});this.ready=Promise.all(this.images.map(this.getPromise,this));f("Finished searching images");return this};d.prototype.timeout=function(b,
c){var d,e=Promise.race([b.promise,new Promise(function(e,g){d=setTimeout(function(){f("Timed out loading image",b);g(b)},c)})]).then(function(b){clearTimeout(d);return b});e["catch"](function(){clearTimeout(d)});return e};e.exports=d},{"./dummyimagecontainer":5,"./framecontainer":8,"./imagecontainer":10,"./lineargradientcontainer":12,"./log":13,"./proxyimagecontainer":17,"./svgcontainer":23,"./svgnodecontainer":24,"./utils":26,"./webkitgradientcontainer":27}],12:[function(b,e,c){function d(b){f.apply(this,
arguments);this.type=f.TYPES.LINEAR;var c=d.REGEXP_DIRECTION.test(b.args[0])||!f.REGEXP_COLORSTOP.test(b.args[0]);c?b.args[0].split(/\s+/).reverse().forEach(function(b,c){switch(b){case "left":this.x0=0;this.x1=1;break;case "top":this.y0=0;this.y1=1;break;case "right":this.x0=1;this.x1=0;break;case "bottom":this.y0=1;this.y1=0;break;case "to":var d=this.y0,e=this.x0;this.y0=this.y1;this.x0=this.x1;this.x1=e;this.y1=d;break;case "center":break;default:d=.01*parseFloat(b,10);if(isNaN(d))break;0===c?
(this.y0=d,this.y1=1-this.y0):(this.x0=d,this.x1=1-this.x0)}},this):(this.y0=0,this.y1=1);this.colorStops=b.args.slice(c?1:0).map(function(b){b=b.match(f.REGEXP_COLORSTOP);var c=+b[2],d=0===c?"%":b[3];return{color:new n(b[1]),stop:"%"===d?c/100:null}});null===this.colorStops[0].stop&&(this.colorStops[0].stop=0);null===this.colorStops[this.colorStops.length-1].stop&&(this.colorStops[this.colorStops.length-1].stop=1);this.colorStops.forEach(function(b,c){null===b.stop&&this.colorStops.slice(c).some(function(d,
e){return null!==d.stop?(b.stop=(d.stop-this.colorStops[c-1].stop)/(e+1)+this.colorStops[c-1].stop,!0):!1},this)},this)}var f=b("./gradientcontainer"),n=b("./color");d.prototype=Object.create(f.prototype);d.REGEXP_DIRECTION=/^\s*(?:to|left|right|top|bottom|center|\d{1,3}(?:\.\d+)?%?)(?:\s|$)/i;e.exports=d},{"./color":3,"./gradientcontainer":9}],13:[function(b,e,c){var d=function(){d.options.logging&&window.console&&window.console.log&&Function.prototype.bind.call(window.console.log,window.console).apply(window.console,
[Date.now()-d.options.start+"ms","html2canvas:"].concat([].slice.call(arguments,0)))};d.options={logging:!1};e.exports=d},{}],14:[function(b,e,c){function d(b,c){this.node=b;this.parent=c;this.borders=this.bounds=this.stack=null;this.clip=[];this.backgroundClip=[];this.computedStyles=this.visible=this.offsetBounds=null;this.colors={};this.styles={};this.transformMatrix=this.transformData=this.backgroundImages=null;this.isPseudoElement=!1;this.opacity=null}function f(b){if(b&&"matrix"===b[1])return b[2].split(",").map(function(b){return parseFloat(b.trim())});
if(b&&"matrix3d"===b[1])return b=b[2].split(",").map(function(b){return parseFloat(b.trim())}),[b[0],b[1],b[4],b[5],b[12],b[13]]}function n(b){return-1!==b.toString().indexOf("%")}function h(b){return b.replace("px","")}function g(b){return parseFloat(b)}var m=b("./color");b=b("./utils");var p=b.getBounds,r=b.parseBackgrounds,t=b.offsetBounds;d.prototype.cloneTo=function(b){b.visible=this.visible;b.borders=this.borders;b.bounds=this.bounds;b.clip=this.clip;b.backgroundClip=this.backgroundClip;b.computedStyles=
this.computedStyles;b.styles=this.styles;b.backgroundImages=this.backgroundImages;b.opacity=this.opacity};d.prototype.getOpacity=function(){return null===this.opacity?this.opacity=this.cssFloat("opacity"):this.opacity};d.prototype.assignStack=function(b){this.stack=b;b.children.push(this)};d.prototype.isElementVisible=function(){return this.node.nodeType===Node.TEXT_NODE?this.parent.visible:"none"!==this.css("display")&&"hidden"!==this.css("visibility")&&!this.node.hasAttribute("data-html2canvas-ignore")&&
("INPUT"!==this.node.nodeName||"hidden"!==this.node.getAttribute("type"))};d.prototype.css=function(b){this.computedStyles||(this.computedStyles=this.isPseudoElement?this.parent.computedStyle(this.before?":before":":after"):this.computedStyle(null));return this.styles[b]||(this.styles[b]=this.computedStyles[b])};d.prototype.prefixedCss=function(b){var c=["webkit","moz","ms","o"],d=this.css(b);void 0===d&&c.some(function(c){d=this.css(c+b.substr(0,1).toUpperCase()+b.substr(1));return void 0!==d},this);
return void 0===d?null:d};d.prototype.computedStyle=function(b){return this.node.ownerDocument.defaultView.getComputedStyle(this.node,b)};d.prototype.cssInt=function(b){b=parseInt(this.css(b),10);return isNaN(b)?0:b};d.prototype.color=function(b){return this.colors[b]||(this.colors[b]=new m(this.css(b)))};d.prototype.cssFloat=function(b){b=parseFloat(this.css(b));return isNaN(b)?0:b};d.prototype.fontWeight=function(){var b=this.css("fontWeight");switch(parseInt(b,10)){case 401:b="bold";break;case 400:b=
"normal"}return b};d.prototype.parseClip=function(){var b=this.css("clip").match(this.CLIP);return b?{top:parseInt(b[1],10),right:parseInt(b[2],10),bottom:parseInt(b[3],10),left:parseInt(b[4],10)}:null};d.prototype.parseBackgroundImages=function(){return this.backgroundImages||(this.backgroundImages=r(this.css("backgroundImage")))};d.prototype.cssList=function(b,c){var d=(this.css(b)||"").split(","),d=d[c||0]||d[0]||"auto",d=d.trim().split(" ");1===d.length&&(d=[d[0],n(d[0])?"auto":d[0]]);return d};
d.prototype.parseBackgroundSize=function(b,c,d){d=this.cssList("backgroundSize",d);var e;if(n(d[0]))e=b.width*parseFloat(d[0])/100;else{if(/contain|cover/.test(d[0]))return c=c.width/c.height,b.width/b.height<c^"contain"===d[0]?{width:b.height*c,height:b.height}:{width:b.width,height:b.width/c};e=parseInt(d[0],10)}b="auto"===d[0]&&"auto"===d[1]?c.height:"auto"===d[1]?e/c.width*c.height:n(d[1])?b.height*parseFloat(d[1])/100:parseInt(d[1],10);"auto"===d[0]&&(e=b/c.height*c.width);return{width:e,height:b}};
d.prototype.parseBackgroundPosition=function(b,c,d,e){d=this.cssList("backgroundPosition",d);var f;f=n(d[0])?(b.width-(e||c).width)*(parseFloat(d[0])/100):parseInt(d[0],10);b="auto"===d[1]?f/c.width*c.height:n(d[1])?(b.height-(e||c).height)*parseFloat(d[1])/100:parseInt(d[1],10);"auto"===d[0]&&(f=b/c.height*c.width);return{left:f,top:b}};d.prototype.parseBackgroundRepeat=function(b){return this.cssList("backgroundRepeat",b)[0]};d.prototype.parseTextShadows=function(){var b=this.css("textShadow"),
c=[];if(b&&"none"!==b)for(var b=b.match(this.TEXT_SHADOW_PROPERTY),d=0;b&&d<b.length;d++){var e=b[d].match(this.TEXT_SHADOW_VALUES);c.push({color:new m(e[0]),offsetX:e[1]?parseFloat(e[1].replace("px","")):0,offsetY:e[2]?parseFloat(e[2].replace("px","")):0,blur:e[3]?e[3].replace("px",""):0})}return c};d.prototype.parseTransform=function(){if(!this.transformData)if(this.hasTransform()){var b=this.parseBounds(),c=this.prefixedCss("transformOrigin").split(" ").map(h).map(g);c[0]+=b.left;c[1]+=b.top;this.transformData=
{origin:c,matrix:this.parseTransformMatrix()}}else this.transformData={origin:[0,0],matrix:[1,0,0,1,0,0]};return this.transformData};d.prototype.parseTransformMatrix=function(){if(!this.transformMatrix){var b=this.prefixedCss("transform");this.transformMatrix=(b=b?f(b.match(this.MATRIX_PROPERTY)):null)?b:[1,0,0,1,0,0]}return this.transformMatrix};d.prototype.parseBounds=function(){return this.bounds||(this.bounds=this.hasTransform()?t(this.node):p(this.node))};d.prototype.hasTransform=function(){return"1,0,0,1,0,0"!==
this.parseTransformMatrix().join(",")||this.parent&&this.parent.hasTransform()};d.prototype.getValue=function(){var b=this.node.value||"";"SELECT"===this.node.tagName?(b=this.node,b=(b=b.options[b.selectedIndex||0])?b.text||"":""):"password"===this.node.type&&(b=Array(b.length+1).join("\u2022"));return 0===b.length?this.node.placeholder||"":b};d.prototype.MATRIX_PROPERTY=/(matrix|matrix3d)\((.+)\)/;d.prototype.TEXT_SHADOW_PROPERTY=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g;d.prototype.TEXT_SHADOW_VALUES=
/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g;d.prototype.CLIP=/^rect\((\d+)px,? (\d+)px,? (\d+)px,? (\d+)px\)$/;e.exports=d},{"./color":3,"./utils":26}],15:[function(b,e,c){function d(b,c,d,e,f){D("Starting NodeParser");this.renderer=c;this.options=f;this.range=null;this.support=d;this.renderQueue=[];this.stack=new Q(!0,1,b.ownerDocument,null);d=new V(b,null);f.background&&c.rectangle(0,0,c.width,c.height,new M(f.background));if(b===b.ownerDocument.documentElement){var g=new V(d.color("backgroundColor").isTransparent()?
b.ownerDocument.body:b.ownerDocument.documentElement,null);c.rectangle(0,0,c.width,c.height,g.color("backgroundColor"))}d.visibile=d.isElementVisible();this.createPseudoHideStyles(b.ownerDocument);this.disableAnimations(b.ownerDocument);this.nodes=x([d].concat(this.getChildren(d)).filter(function(b){return b.visible=b.isElementVisible()}).map(this.getPseudoElements,this));this.fontMetrics=new U;D("Fetched nodes, total:",this.nodes.length);D("Calculate overflow clips");this.calculateOverflowClips();
D("Start fetching images");this.images=e.fetch(this.nodes.filter(B));this.ready=this.images.ready.then(X(function(){D("Images loaded, starting parsing");D("Creating stacking contexts");this.createStackingContexts();D("Sorting stacking contexts");this.sortStackingContexts(this.stack);this.parse(this.stack);D("Render queue created with "+this.renderQueue.length+" items");return new Promise(X(function(b){f.async?"function"===typeof f.async?f.async.call(this,this.renderQueue,b):0<this.renderQueue.length?
(this.renderIndex=0,this.asyncRenderer(this.renderQueue,b)):b():(this.renderQueue.forEach(this.paint,this),b())},this))},this))}function f(b){return b.replace(/(\-[a-z])/g,function(b){return b.toUpperCase().replace("-","")})}function n(){}function h(b,c,d,e){return b.map(function(f,g){if(0<f.width){var l=c.left,h=c.top,m=c.width,p=c.height-b[2].width;switch(g){case 0:p=b[0].width;f.args=r({c1:[l,h],c2:[l+m,h],c3:[l+m-b[1].width,h+p],c4:[l+b[3].width,h+p]},e[0],e[1],d.topLeftOuter,d.topLeftInner,d.topRightOuter,
d.topRightInner);break;case 1:l=c.left+c.width-b[1].width;m=b[1].width;f.args=r({c1:[l+m,h],c2:[l+m,h+p+b[2].width],c3:[l,h+p],c4:[l,h+b[0].width]},e[1],e[2],d.topRightOuter,d.topRightInner,d.bottomRightOuter,d.bottomRightInner);break;case 2:h=h+c.height-b[2].width;p=b[2].width;f.args=r({c1:[l+m,h+p],c2:[l,h+p],c3:[l+b[3].width,h],c4:[l+m-b[3].width,h]},e[2],e[3],d.bottomRightOuter,d.bottomRightInner,d.bottomLeftOuter,d.bottomLeftInner);break;case 3:m=b[3].width,f.args=r({c1:[l,h+p+b[2].width],c2:[l,
h],c3:[l+m,h+b[0].width],c4:[l+m,h+p]},e[3],e[0],d.bottomLeftOuter,d.bottomLeftInner,d.topLeftOuter,d.topLeftInner)}}return f})}function g(b,c,d,e){var f=4*((Math.sqrt(2)-1)/3),g=d*f,f=e*f;d=b+d;e=c+e;return{topLeft:p({x:b,y:e},{x:b,y:e-f},{x:d-g,y:c},{x:d,y:c}),topRight:p({x:b,y:c},{x:b+g,y:c},{x:d,y:e-f},{x:d,y:e}),bottomRight:p({x:d,y:c},{x:d,y:c+f},{x:b+g,y:e},{x:b,y:e}),bottomLeft:p({x:d,y:e},{x:d-g,y:e},{x:b,y:c+f},{x:b,y:c})}}function m(b,c,d){var e=b.left,f=b.top,l=b.width;b=b.height;var h=
c[0][0]<l/2?c[0][0]:l/2,m=c[0][1]<b/2?c[0][1]:b/2,p=c[1][0]<l/2?c[1][0]:l/2,r=c[1][1]<b/2?c[1][1]:b/2,q=c[2][0]<l/2?c[2][0]:l/2,n=c[2][1]<b/2?c[2][1]:b/2,t=c[3][0]<l/2?c[3][0]:l/2;c=c[3][1]<b/2?c[3][1]:b/2;var u=l-p,w=b-n,x=l-q,G=b-c;return{topLeftOuter:g(e,f,h,m).topLeft.subdivide(.5),topLeftInner:g(e+d[3].width,f+d[0].width,Math.max(0,h-d[3].width),Math.max(0,m-d[0].width)).topLeft.subdivide(.5),topRightOuter:g(e+u,f,p,r).topRight.subdivide(.5),topRightInner:g(e+Math.min(u,l+d[3].width),f+d[0].width,
u>l+d[3].width?0:p-d[3].width,r-d[0].width).topRight.subdivide(.5),bottomRightOuter:g(e+x,f+w,q,n).bottomRight.subdivide(.5),bottomRightInner:g(e+Math.min(x,l-d[3].width),f+Math.min(w,b+d[0].width),Math.max(0,q-d[1].width),n-d[2].width).bottomRight.subdivide(.5),bottomLeftOuter:g(e,f+G,t,c).bottomLeft.subdivide(.5),bottomLeftInner:g(e+d[3].width,f+G,Math.max(0,t-d[3].width),c-d[2].width).bottomLeft.subdivide(.5)}}function p(b,c,d,e){var f=function(b,c,d){return{x:b.x+(c.x-b.x)*d,y:b.y+(c.y-b.y)*d}};
return{start:b,startControl:c,endControl:d,end:e,subdivide:function(g){var l=f(b,c,g),h=f(c,d,g),m=f(d,e,g),r=f(l,h,g),h=f(h,m,g);g=f(r,h,g);return[p(b,l,r,g),p(g,h,m,e)]},curveTo:function(b){b.push(["bezierCurve",c.x,c.y,d.x,d.y,e.x,e.y])},curveToReversed:function(e){e.push(["bezierCurve",d.x,d.y,c.x,c.y,b.x,b.y])}}}function r(b,c,d,e,f,g,l){var h=[];0<c[0]||0<c[1]?(h.push(["line",e[1].start.x,e[1].start.y]),e[1].curveTo(h)):h.push(["line",b.c1[0],b.c1[1]]);0<d[0]||0<d[1]?(h.push(["line",g[0].start.x,
g[0].start.y]),g[0].curveTo(h),h.push(["line",l[0].end.x,l[0].end.y]),l[0].curveToReversed(h)):(h.push(["line",b.c2[0],b.c2[1]]),h.push(["line",b.c3[0],b.c3[1]]));0<c[0]||0<c[1]?(h.push(["line",f[1].end.x,f[1].end.y]),f[1].curveToReversed(h)):h.push(["line",b.c4[0],b.c4[1]]);return h}function t(b,c,d,e,f,g,l){0<c[0]||0<c[1]?(b.push(["line",e[0].start.x,e[0].start.y]),e[0].curveTo(b),e[1].curveTo(b)):b.push(["line",g,l]);(0<d[0]||0<d[1])&&b.push(["line",f[0].start.x,f[0].start.y])}function l(b){return 0>
b.cssInt("zIndex")}function q(b){return 0<b.cssInt("zIndex")}function w(b){return 0===b.cssInt("zIndex")}function u(b){return-1!==["inline","inline-block","inline-table"].indexOf(b.css("display"))}function v(b){return 0<b.node.data.trim().length}function E(b){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(c){c=b.css("border"+c+"Radius").split(" ");1>=c.length&&(c[1]=c[0]);return c.map(I)})}function A(b){return b.nodeType===Node.TEXT_NODE||b.nodeType===Node.ELEMENT_NODE}function K(b){return"static"!==
b.css("position")}function F(b){return"none"!==b.css("float")}function z(b){var c=this;return function(){return!b.apply(c,arguments)}}function B(b){return b.node.nodeType===Node.ELEMENT_NODE}function H(b){return b.node.nodeType===Node.TEXT_NODE}function G(b){return function(c,d){return c.cssInt("zIndex")+b.indexOf(c)/b.length-(d.cssInt("zIndex")+b.indexOf(d)/b.length)}}function I(b){return parseInt(b,10)}function N(b){return b.width}function L(b){return b.node.nodeType!==Node.ELEMENT_NODE||-1==="SCRIPT HEAD TITLE OBJECT BR OPTION".split(" ").indexOf(b.node.nodeName)}
function x(b){return[].concat.apply([],b)}function S(b){for(var c=[],d=0,e=!1,f;b.length;)-1!==[32,13,10,9,45].indexOf(b[d])===e?(f=b.splice(0,d),f.length&&c.push(J.ucs2.encode(f)),e=!e,d=0):d++,d>=b.length&&(f=b.splice(0,d),f.length&&c.push(J.ucs2.encode(f)));return c}var D=b("./log"),J=b("punycode"),V=b("./nodecontainer"),Y=b("./textcontainer"),W=b("./pseudoelementcontainer"),U=b("./fontmetrics"),M=b("./color"),Q=b("./stackingcontext");b=b("./utils");var X=b.bind,ea=b.getBounds,O=b.parseBackgrounds,
aa=b.offsetBounds;d.prototype.calculateOverflowClips=function(){this.nodes.forEach(function(b){if(B(b)){!0===b.isPseudoElement&&b.appendToDOM();b.borders=this.parseBorders(b);var c="hidden"===b.css("overflow")?[b.borders.clip]:[],d=b.parseClip();d&&-1!==["absolute","fixed"].indexOf(b.css("position"))&&c.push([["rect",b.bounds.left+d.left,b.bounds.top+d.top,d.right-d.left,d.bottom-d.top]]);b.clip=b.parent&&b.parent.clip.length?b.parent.clip.concat(c):c;b.backgroundClip="hidden"!==b.css("overflow")?
b.clip.concat([b.borders.clip]):b.clip;!0===b.isPseudoElement&&b.cleanDOM()}else H(b)&&(b.clip=b.parent&&b.parent.clip.length?b.parent.clip:[]);!0!==b.isPseudoElement&&(b.bounds=null)},this)};d.prototype.asyncRenderer=function(b,c,d){d=d||Date.now();this.paint(b[this.renderIndex++]);b.length===this.renderIndex?c():d+20>Date.now()?this.asyncRenderer(b,c,d):setTimeout(X(function(){this.asyncRenderer(b,c)},this),0)};d.prototype.createPseudoHideStyles=function(b){this.createStyles(b,"."+W.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+
':before { content: "" !important; display: none !important; }.'+W.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER+':after { content: "" !important; display: none !important; }')};d.prototype.disableAnimations=function(b){this.createStyles(b,"* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; -webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}")};
d.prototype.createStyles=function(b,c){var d=b.createElement("style");d.innerHTML=c;b.body.appendChild(d)};d.prototype.getPseudoElements=function(b){var c=[[b]];if(b.node.nodeType===Node.ELEMENT_NODE){var d=this.getPseudoElement(b,":before");b=this.getPseudoElement(b,":after");d&&c.push(d);b&&c.push(b)}return x(c)};d.prototype.getPseudoElement=function(b,c){var d=b.computedStyle(c);if(!d||!d.content||"none"===d.content||"-moz-alt-content"===d.content||"none"===d.display)return null;var e,g=d.content,
l=g.substr(0,1);e=l===g.substr(g.length-1)&&l.match(/'|"/)?g.substr(1,g.length-2):g;for(var h="url"===e.substr(0,3),g=document.createElement(h?"img":"html2canvaspseudoelement"),l=new W(g,b,c),m=d.length-1;0<=m;m--){var p=f(d.item(m));g.style[p]=d[p]}g.className=W.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+W.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER;if(h)return g.src=O(e)[0].args[0],[l];d=document.createTextNode(e);g.appendChild(d);return[l,new Y(d,l)]};d.prototype.getChildren=function(b){return x([].filter.call(b.node.childNodes,
A).map(function(c){var d=[c.nodeType!==Node.TEXT_NODE||c.parentNode instanceof SVGElement?new V(c,b):new Y(c,b)].filter(L);return c.nodeType===Node.ELEMENT_NODE&&d.length&&"TEXTAREA"!==c.tagName?d[0].isElementVisible()?d.concat(this.getChildren(d[0])):[]:d},this))};d.prototype.newStackingContext=function(b,c){var d=new Q(c,b.getOpacity(),b.node,b.parent);b.cloneTo(d);(c?d.getParentStack(this):d.parent.stack).contexts.push(d);b.stack=d};d.prototype.createStackingContexts=function(){this.nodes.forEach(function(b){var c;
if(c=B(b))(c=this.isRootElement(b)||1>b.getOpacity())||(c=b.css("position"),c="auto"!==(-1!==["absolute","relative","fixed"].indexOf(c)?b.css("zIndex"):"auto")),c=c||this.isBodyWithTransparentRoot(b)||b.hasTransform();c?this.newStackingContext(b,!0):B(b)&&(K(b)&&w(b)||-1!==["inline-block","inline-table"].indexOf(b.css("display"))||F(b))?this.newStackingContext(b,!1):b.assignStack(b.parent.stack)},this)};d.prototype.isBodyWithTransparentRoot=function(b){return"BODY"===b.node.nodeName&&b.parent.color("backgroundColor").isTransparent()};
d.prototype.isRootElement=function(b){return null===b.parent};d.prototype.sortStackingContexts=function(b){b.contexts.sort(G(b.contexts.slice(0)));b.contexts.forEach(this.sortStackingContexts,this)};d.prototype.parseTextBounds=function(b){return function(c,d,e){if("none"!==b.parent.css("textDecoration").substr(0,4)||0!==c.trim().length){if(this.support.rangeBounds&&!b.parent.hasTransform())return d=e.slice(0,d).join("").length,this.getRangeBounds(b.node,d,c.length);if(b.node&&"string"===typeof b.node.data)return c=
b.node.splitText(c.length),d=this.getWrapperBounds(b.node,b.parent.hasTransform()),b.node=c,d}else if(!this.support.rangeBounds||b.parent.hasTransform())b.node=b.node.splitText(c.length);return{}}};d.prototype.getWrapperBounds=function(b,c){var d=b.ownerDocument.createElement("html2canvaswrapper"),e=b.parentNode,f=b.cloneNode(!0);d.appendChild(b.cloneNode(!0));e.replaceChild(d,b);var g=c?aa(d):ea(d);e.replaceChild(f,d);return g};d.prototype.getRangeBounds=function(b,c,d){var e=this.range||(this.range=
b.ownerDocument.createRange());e.setStart(b,c);e.setEnd(b,c+d);return e.getBoundingClientRect()};d.prototype.parse=function(b){var c=b.contexts.filter(l),d=b.children.filter(B),e=d.filter(z(F)),f=e.filter(z(K)).filter(z(u)),d=d.filter(z(K)).filter(F),g=e.filter(z(K)).filter(u),e=b.contexts.concat(e.filter(K)).filter(w),h=b.children.filter(H).filter(v);b=b.contexts.filter(q);c.concat(f).concat(d).concat(g).concat(e).concat(h).concat(b).forEach(function(b){this.renderQueue.push(b);b instanceof Q&&(this.parse(b),
this.renderQueue.push(new n))},this)};d.prototype.paint=function(b){try{b instanceof n?this.renderer.ctx.restore():H(b)?(!0===b.parent.isPseudoElement&&b.parent.appendToDOM(),this.paintText(b),!0===b.parent.isPseudoElement&&b.parent.cleanDOM()):this.paintNode(b)}catch(c){if(D(c),this.options.strict)throw c;}};d.prototype.paintNode=function(b){b instanceof Q&&(this.renderer.setOpacity(b.opacity),this.renderer.ctx.save(),b.hasTransform()&&this.renderer.setTransform(b.parseTransform()));"INPUT"===b.node.nodeName&&
"checkbox"===b.node.type?this.paintCheckbox(b):"INPUT"===b.node.nodeName&&"radio"===b.node.type?this.paintRadio(b):this.paintElement(b)};d.prototype.paintElement=function(b){var c=b.parseBounds();this.renderer.clip(b.backgroundClip,function(){this.renderer.renderBackground(b,c,b.borders.borders.map(N))},this);this.renderer.clip(b.clip,function(){this.renderer.renderBorders(b.borders.borders)},this);this.renderer.clip(b.backgroundClip,function(){switch(b.node.nodeName){case "svg":case "IFRAME":var d=
this.images.get(b.node);d?this.renderer.renderImage(b,c,b.borders,d):D("Error loading <"+b.node.nodeName+">",b.node);break;case "IMG":(d=this.images.get(b.node.src))?this.renderer.renderImage(b,c,b.borders,d):D("Error loading <img>",b.node.src);break;case "CANVAS":this.renderer.renderImage(b,c,b.borders,{image:b.node});break;case "SELECT":case "INPUT":case "TEXTAREA":this.paintFormValue(b)}},this)};d.prototype.paintCheckbox=function(b){var c=b.parseBounds(),d=Math.min(c.width,c.height),e={width:d-
1,height:d-1,top:c.top,left:c.left},c=[3,3],f=[c,c,c,c],g=[1,1,1,1].map(function(b){return{color:new M("#A5A5A5"),width:b}}),l=m(e,f,g);this.renderer.clip(b.backgroundClip,function(){this.renderer.rectangle(e.left+1,e.top+1,e.width-2,e.height-2,new M("#DEDEDE"));this.renderer.renderBorders(h(g,e,l,f));b.node.checked&&(this.renderer.font(new M("#424242"),"normal","normal","bold",d-3+"px","arial"),this.renderer.text("\u2714",e.left+d/6,e.top+d-1))},this)};d.prototype.paintRadio=function(b){var c=b.parseBounds(),
d=Math.min(c.width,c.height)-2;this.renderer.clip(b.backgroundClip,function(){this.renderer.circleStroke(c.left+1,c.top+1,d,new M("#DEDEDE"),1,new M("#A5A5A5"));b.node.checked&&this.renderer.circle(Math.ceil(c.left+d/4)+1,Math.ceil(c.top+d/4)+1,Math.floor(d/2),new M("#424242"))},this)};d.prototype.paintFormValue=function(b){var c=b.getValue();if(0<c.length){var d=b.node.ownerDocument,e=d.createElement("html2canvaswrapper");"lineHeight textAlign fontFamily fontWeight fontSize color paddingLeft paddingTop paddingRight paddingBottom width height borderLeftStyle borderTopStyle borderLeftWidth borderTopWidth boxSizing whiteSpace wordWrap".split(" ").forEach(function(c){try{e.style[c]=
b.css(c)}catch(d){D("html2canvas: Parse: Exception caught in renderFormValue: "+d.message)}});var f=b.parseBounds();e.style.position="fixed";e.style.left=f.left+"px";e.style.top=f.top+"px";e.textContent=c;d.body.appendChild(e);this.paintText(new Y(e.firstChild,b));d.body.removeChild(e)}};d.prototype.paintText=function(b){b.applyTextTransform();var c=J.ucs2.decode(b.node.data),d=this.options.letterRendering&&!/^(normal|none|0px)$/.test(b.parent.css("letterSpacing"))||/[^\u0000-\u00ff]/.test(b.node.data)?
c.map(function(b){return J.ucs2.encode([b])}):S(c),c=b.parent.fontWeight(),e=b.parent.css("fontSize"),f=b.parent.css("fontFamily"),g=b.parent.parseTextShadows();this.renderer.font(b.parent.color("color"),b.parent.css("fontStyle"),b.parent.css("fontVariant"),c,e,f);g.length?this.renderer.fontShadow(g[0].color,g[0].offsetX,g[0].offsetY,g[0].blur):this.renderer.clearShadow();this.renderer.clip(b.parent.clip,function(){d.map(this.parseTextBounds(b),this).forEach(function(c,g){c&&(this.renderer.text(d[g],
c.left,c.bottom),this.renderTextDecoration(b.parent,c,this.fontMetrics.getMetrics(f,e)))},this)},this)};d.prototype.renderTextDecoration=function(b,c,d){switch(b.css("textDecoration").split(" ")[0]){case "underline":this.renderer.rectangle(c.left,Math.round(c.top+d.baseline+d.lineWidth),c.width,1,b.color("color"));break;case "overline":this.renderer.rectangle(c.left,Math.round(c.top),c.width,1,b.color("color"));break;case "line-through":this.renderer.rectangle(c.left,Math.ceil(c.top+d.middle+d.lineWidth),
c.width,1,b.color("color"))}};var ia={inset:[["darken",.6],["darken",.1],["darken",.1],["darken",.6]]};d.prototype.parseBorders=function(b){var c=b.parseBounds(),d=E(b),e=["Top","Right","Bottom","Left"].map(function(c,d){var e=b.css("border"+c+"Style"),f=b.color("border"+c+"Color");"inset"===e&&f.isBlack()&&(f=new M([255,255,255,f.a]));e=ia[e]?ia[e][d]:null;return{width:b.cssInt("border"+c+"Width"),color:e?f[e[0]](e[1]):f,args:null}}),f=m(c,d,e);return{clip:this.parseBackgroundClip(b,f,e,d,c),borders:h(e,
c,f,d)}};d.prototype.parseBackgroundClip=function(b,c,d,e,f){var g=[];switch(b.css("backgroundClip")){case "content-box":case "padding-box":t(g,e[0],e[1],c.topLeftInner,c.topRightInner,f.left+d[3].width,f.top+d[0].width);t(g,e[1],e[2],c.topRightInner,c.bottomRightInner,f.left+f.width-d[1].width,f.top+d[0].width);t(g,e[2],e[3],c.bottomRightInner,c.bottomLeftInner,f.left+f.width-d[1].width,f.top+f.height-d[2].width);t(g,e[3],e[0],c.bottomLeftInner,c.topLeftInner,f.left+d[3].width,f.top+f.height-d[2].width);
break;default:t(g,e[0],e[1],c.topLeftOuter,c.topRightOuter,f.left,f.top),t(g,e[1],e[2],c.topRightOuter,c.bottomRightOuter,f.left+f.width,f.top),t(g,e[2],e[3],c.bottomRightOuter,c.bottomLeftOuter,f.left+f.width,f.top+f.height),t(g,e[3],e[0],c.bottomLeftOuter,c.topLeftOuter,f.left,f.top+f.height)}return g};e.exports=d},{"./color":3,"./fontmetrics":7,"./log":13,"./nodecontainer":14,"./pseudoelementcontainer":18,"./stackingcontext":21,"./textcontainer":25,"./utils":26,punycode:1}],16:[function(b,e,c){function d(b,
c,d){var e="withCredentials"in new XMLHttpRequest;if(!c)return Promise.reject("No proxy configured");var g=n(e);b=h(c,b,g);return e?m(b):f(d,b,g).then(function(b){return t(b.content)})}function f(b,c,d){return new Promise(function(e,f){var g=b.createElement("script"),l=function(){delete window.html2canvas.proxy[d];b.body.removeChild(g)};window.html2canvas.proxy[d]=function(b){l();e(b)};g.src=c;g.onerror=function(b){l();f(b)};b.body.appendChild(g)})}function n(b){return b?"":"html2canvas_"+Date.now()+
"_"+ ++l+"_"+Math.round(1E5*Math.random())}function h(b,c,d){return b+"?url="+encodeURIComponent(c)+(d.length?"&callback=html2canvas.proxy."+d:"")}function g(b){return function(c){var d=new DOMParser,e;try{e=d.parseFromString(c,"text/html")}catch(f){p("DOMParser not supported, falling back to createHTMLDocument");e=document.implementation.createHTMLDocument("");try{e.open(),e.write(c),e.close()}catch(g){p("createHTMLDocument write not supported, falling back to document.body.innerHTML"),e.body.innerHTML=
c}}c=e.querySelector("base");c&&c.href.host||(c=e.createElement("base"),c.href=b,e.head.insertBefore(c,e.head.firstChild));return e}}var m=b("./xhr");e=b("./utils");var p=b("./log"),r=b("./clone"),t=e.decode64,l=0;c.Proxy=d;c.ProxyURL=function(b,c,d){var e="crossOrigin"in new Image,g=n(e);b=h(c,b,g);return e?Promise.resolve(b):f(d,b,g).then(function(b){return"data:"+b.type+";base64,"+b.content})};c.loadUrlDocument=function(b,c,e,f,l,h){return(new d(b,c,window.document)).then(g(b)).then(function(b){return r(b,
e,f,l,h,0,0)})}},{"./clone":2,"./log":13,"./utils":26,"./xhr":28}],17:[function(b,e,c){var d=b("./proxy").ProxyURL;e.exports=function(b,c){var e=document.createElement("a");e.href=b;this.src=b=e.href;this.image=new Image;var g=this;this.promise=new Promise(function(e,h){g.image.crossOrigin="Anonymous";g.image.onload=e;g.image.onerror=h;(new d(b,c,document)).then(function(b){g.image.src=b})["catch"](h)})}},{"./proxy":16}],18:[function(b,e,c){function d(b,c,d){f.call(this,b,c);this.isPseudoElement=
!0;this.before=":before"===d}var f=b("./nodecontainer");d.prototype.cloneTo=function(b){d.prototype.cloneTo.call(this,b);b.isPseudoElement=!0;b.before=this.before};d.prototype=Object.create(f.prototype);d.prototype.appendToDOM=function(){this.before?this.parent.node.insertBefore(this.node,this.parent.node.firstChild):this.parent.node.appendChild(this.node);this.parent.node.className+=" "+this.getHideClass()};d.prototype.cleanDOM=function(){this.node.parentNode.removeChild(this.node);this.parent.node.className=
this.parent.node.className.replace(this.getHideClass(),"")};d.prototype.getHideClass=function(){return this["PSEUDO_HIDE_ELEMENT_CLASS_"+(this.before?"BEFORE":"AFTER")]};d.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before";d.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after";e.exports=d},{"./nodecontainer":14}],19:[function(b,e,c){function d(b,c,d,e,f){this.width=b;this.height=c;this.images=d;this.options=e;this.document=f}var f=b("./log");
d.prototype.renderImage=function(b,c,d,e){var f=b.cssInt("paddingLeft"),r=b.cssInt("paddingTop"),t=b.cssInt("paddingRight");b=b.cssInt("paddingBottom");d=d.borders;t=c.width-(d[1].width+d[3].width+f+t);b=c.height-(d[0].width+d[2].width+r+b);this.drawImage(e,0,0,e.image.width||t,e.image.height||b,c.left+f+d[3].width,c.top+r+d[0].width,t,b)};d.prototype.renderBackground=function(b,c,d){0<c.height&&0<c.width&&(this.renderBackgroundColor(b,c),this.renderBackgroundImage(b,c,d))};d.prototype.renderBackgroundColor=
function(b,c){var d=b.color("backgroundColor");d.isTransparent()||this.rectangle(c.left,c.top,c.width,c.height,d)};d.prototype.renderBorders=function(b){b.forEach(this.renderBorder,this)};d.prototype.renderBorder=function(b){b.color.isTransparent()||null===b.args||this.drawShape(b.args,b.color)};d.prototype.renderBackgroundImage=function(b,c,d){b.parseBackgroundImages().reverse().forEach(function(e,p,r){switch(e.method){case "url":var t=this.images.get(e.args[0]);t?this.renderBackgroundRepeating(b,
c,t,r.length-(p+1),d):f("Error loading background-image",e.args[0]);break;case "linear-gradient":case "gradient":(p=this.images.get(e.value))?this.renderBackgroundGradient(p,c,d):f("Error loading background-image",e.args[0]);break;case "none":break;default:f("Unknown background-image type",e.args[0])}},this)};d.prototype.renderBackgroundRepeating=function(b,c,d,e,f){var r=b.parseBackgroundSize(c,d.image,e),t=b.parseBackgroundPosition(c,d.image,e,r);switch(b.parseBackgroundRepeat(e)){case "repeat-x":case "repeat no-repeat":this.backgroundRepeatShape(d,
t,r,c,c.left+f[3],c.top+t.top+f[0],99999,r.height,f);break;case "repeat-y":case "no-repeat repeat":this.backgroundRepeatShape(d,t,r,c,c.left+t.left+f[3],c.top+f[0],r.width,99999,f);break;case "no-repeat":this.backgroundRepeatShape(d,t,r,c,c.left+t.left+f[3],c.top+t.top+f[0],r.width,r.height,f);break;default:this.renderBackgroundRepeat(d,t,r,{top:c.top,left:c.left},f[3],f[0])}};e.exports=d},{"./log":13}],20:[function(b,e,c){function d(b,c){n.apply(this,arguments);this.canvas=this.options.canvas||this.document.createElement("canvas");
this.options.canvas||(this.canvas.width=b,this.canvas.height=c);this.ctx=this.canvas.getContext("2d");this.taintCtx=this.document.createElement("canvas").getContext("2d");this.ctx.textBaseline="bottom";this.variables={};g("Initialized CanvasRenderer with size",b,"x",c)}function f(b){return 0<b.length}var n=b("../renderer"),h=b("../lineargradientcontainer"),g=b("../log");d.prototype=Object.create(n.prototype);d.prototype.setFillStyle=function(b){this.ctx.fillStyle="object"===typeof b&&b.isColor?b.toString():
b;return this.ctx};d.prototype.rectangle=function(b,c,d,e,f){this.setFillStyle(f).fillRect(b,c,d,e)};d.prototype.circle=function(b,c,d,e){this.setFillStyle(e);this.ctx.beginPath();this.ctx.arc(b+d/2,c+d/2,d/2,0,2*Math.PI,!0);this.ctx.closePath();this.ctx.fill()};d.prototype.circleStroke=function(b,c,d,e,f,g){this.circle(b,c,d,e);this.ctx.strokeStyle=g.toString();this.ctx.stroke()};d.prototype.drawShape=function(b,c){this.shape(b);this.setFillStyle(c).fill()};d.prototype.taints=function(b){if(null===
b.tainted){this.taintCtx.drawImage(b.image,0,0);try{this.taintCtx.getImageData(0,0,1,1),b.tainted=!1}catch(c){this.taintCtx=document.createElement("canvas").getContext("2d"),b.tainted=!0}}return b.tainted};d.prototype.drawImage=function(b,c,d,e,f,g,h,n,v){this.taints(b)&&!this.options.allowTaint||this.ctx.drawImage(b.image,c,d,e,f,g,h,n,v)};d.prototype.clip=function(b,c,d){this.ctx.save();b.filter(f).forEach(function(b){this.shape(b).clip()},this);c.call(d);this.ctx.restore()};d.prototype.shape=function(b){this.ctx.beginPath();
b.forEach(function(b,c){"rect"===b[0]?this.ctx.rect.apply(this.ctx,b.slice(1)):this.ctx[0===c?"moveTo":b[0]+"To"].apply(this.ctx,b.slice(1))},this);this.ctx.closePath();return this.ctx};d.prototype.font=function(b,c,d,e,f,g){this.setFillStyle(b).font=[c,d,e,f,g].join(" ").split(",")[0]};d.prototype.fontShadow=function(b,c,d,e){this.setVariable("shadowColor",b.toString()).setVariable("shadowOffsetY",c).setVariable("shadowOffsetX",d).setVariable("shadowBlur",e)};d.prototype.clearShadow=function(){this.setVariable("shadowColor",
"rgba(0,0,0,0)")};d.prototype.setOpacity=function(b){this.ctx.globalAlpha=b};d.prototype.setTransform=function(b){this.ctx.translate(b.origin[0],b.origin[1]);this.ctx.transform.apply(this.ctx,b.matrix);this.ctx.translate(-b.origin[0],-b.origin[1])};d.prototype.setVariable=function(b,c){this.variables[b]!==c&&(this.variables[b]=this.ctx[b]=c);return this};d.prototype.text=function(b,c,d){this.ctx.fillText(b,c,d)};d.prototype.backgroundRepeatShape=function(b,c,d,e,f,g,h,n,v){f=[["line",Math.round(f),
Math.round(g)],["line",Math.round(f+h),Math.round(g)],["line",Math.round(f+h),Math.round(n+g)],["line",Math.round(f),Math.round(n+g)]];this.clip([f],function(){this.renderBackgroundRepeat(b,c,d,e,v[3],v[0])},this)};d.prototype.renderBackgroundRepeat=function(b,c,d,e,f,g){f=Math.round(e.left+c.left+f);c=Math.round(e.top+c.top+g);this.setFillStyle(this.ctx.createPattern(this.resizeImage(b,d),"repeat"));this.ctx.translate(f,c);this.ctx.fill();this.ctx.translate(-f,-c)};d.prototype.renderBackgroundGradient=
function(b,c){if(b instanceof h){var d=this.ctx.createLinearGradient(c.left+c.width*b.x0,c.top+c.height*b.y0,c.left+c.width*b.x1,c.top+c.height*b.y1);b.colorStops.forEach(function(b){d.addColorStop(b.stop,b.color.toString())});this.rectangle(c.left,c.top,c.width,c.height,d)}};d.prototype.resizeImage=function(b,c){var d=b.image;if(d.width===c.width&&d.height===c.height)return d;var e=document.createElement("canvas");e.width=c.width;e.height=c.height;e.getContext("2d").drawImage(d,0,0,d.width,d.height,
0,0,c.width,c.height);return e};e.exports=d},{"../lineargradientcontainer":12,"../log":13,"../renderer":19}],21:[function(b,e,c){function d(b,c,d,e){f.call(this,d,e);this.ownStacking=b;this.contexts=[];this.children=[];this.opacity=(this.parent?this.parent.stack.opacity:1)*c}var f=b("./nodecontainer");d.prototype=Object.create(f.prototype);d.prototype.getParentStack=function(b){var c=this.parent?this.parent.stack:null;return c?c.ownStacking?c:c.getParentStack(b):b.stack};e.exports=d},{"./nodecontainer":14}],
22:[function(b,e,c){function d(b){this.rangeBounds=this.testRangeBounds(b);this.cors=this.testCORS();this.svg=this.testSVG()}d.prototype.testRangeBounds=function(b){var c,d,e=!1;b.createRange&&(c=b.createRange(),c.getBoundingClientRect&&(d=b.createElement("boundtest"),d.style.height="123px",d.style.display="block",b.body.appendChild(d),c.selectNode(d),c=c.getBoundingClientRect(),c=c.height,123===c&&(e=!0),b.body.removeChild(d)));return e};d.prototype.testCORS=function(){return"undefined"!==typeof(new Image).crossOrigin};
d.prototype.testSVG=function(){var b=new Image,c=document.createElement("canvas"),d=c.getContext("2d");b.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{d.drawImage(b,0,0),c.toDataURL()}catch(e){return!1}return!0};e.exports=d},{}],23:[function(b,e,c){function d(b){this.src=b;this.image=null;var c=this;this.promise=this.hasFabric().then(function(){return c.isInline(b)?Promise.resolve(c.inlineFormatting(b)):f(b)}).then(function(b){return new Promise(function(d){window.html2canvas.svg.fabric.loadSVGFromString(b,
c.createCanvas.call(c,d))})})}var f=b("./xhr"),n=b("./utils").decode64;d.prototype.hasFabric=function(){return window.html2canvas.svg&&window.html2canvas.svg.fabric?Promise.resolve():Promise.reject(Error("html2canvas.svg.js is not loaded, cannot render svg"))};d.prototype.inlineFormatting=function(b){return/^data:image\/svg\+xml;base64,/.test(b)?this.decode64(this.removeContentType(b)):this.removeContentType(b)};d.prototype.removeContentType=function(b){return b.replace(/^data:image\/svg\+xml(;base64)?,/,
"")};d.prototype.isInline=function(b){return/^data:image\/svg\+xml/i.test(b)};d.prototype.createCanvas=function(b){var c=this;return function(d,e){var f=new window.html2canvas.svg.fabric.StaticCanvas("c");c.image=f.lowerCanvasEl;f.setWidth(e.width).setHeight(e.height).add(window.html2canvas.svg.fabric.util.groupSVGElements(d,e)).renderAll();b(f.lowerCanvasEl)}};d.prototype.decode64=function(b){return"function"===typeof window.atob?window.atob(b):n(b)};e.exports=d},{"./utils":26,"./xhr":28}],24:[function(b,
e,c){function d(b,c){this.src=b;this.image=null;var d=this;this.promise=c?new Promise(function(c,e){d.image=new Image;d.image.onload=c;d.image.onerror=e;d.image.src="data:image/svg+xml,"+(new XMLSerializer).serializeToString(b);!0===d.image.complete&&c(d.image)}):this.hasFabric().then(function(){return new Promise(function(c){window.html2canvas.svg.fabric.parseSVGDocument(b,d.createCanvas.call(d,c))})})}b=b("./svgcontainer");d.prototype=Object.create(b.prototype);e.exports=d},{"./svgcontainer":23}],
25:[function(b,e,c){function d(b,c){n.call(this,b,c)}function f(b,c,d){if(0<b.length)return c+d.toUpperCase()}var n=b("./nodecontainer");d.prototype=Object.create(n.prototype);d.prototype.applyTextTransform=function(){this.node.data=this.transform(this.parent.css("textTransform"))};d.prototype.transform=function(b){var c=this.node.data;switch(b){case "lowercase":return c.toLowerCase();case "capitalize":return c.replace(/(^|\s|:|-|\(|\))([a-z])/g,f);case "uppercase":return c.toUpperCase();default:return c}};
e.exports=d},{"./nodecontainer":14}],26:[function(b,e,c){c.smallImage=function(){return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"};c.bind=function(b,c){return function(){return b.apply(c,arguments)}};c.decode64=function(b){var c=b.length,e,h,g,m,p,r,t="";for(e=0;e<c;e+=4)h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(b[e]),g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(b[e+1]),m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(b[e+
2]),p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(b[e+3]),h=h<<2|g>>4,g=(g&15)<<4|m>>2,r=(m&3)<<6|p,t=64===m?t+String.fromCharCode(h):64===p||-1===p?t+String.fromCharCode(h,g):t+String.fromCharCode(h,g,r);return t};c.getBounds=function(b){if(b.getBoundingClientRect){var c=b.getBoundingClientRect(),e=null==b.offsetWidth?c.width:b.offsetWidth;return{top:c.top,bottom:c.bottom||c.top+c.height,right:c.left+e,left:c.left,width:e,height:null==b.offsetHeight?c.height:b.offsetHeight}}return{}};
c.offsetBounds=function(b){var e=b.offsetParent?c.offsetBounds(b.offsetParent):{top:0,left:0};return{top:b.offsetTop+e.top,bottom:b.offsetTop+b.offsetHeight+e.top,right:b.offsetLeft+e.left+b.offsetWidth,left:b.offsetLeft+e.left,width:b.offsetWidth,height:b.offsetHeight}};c.parseBackgrounds=function(b){var c,e,h,g,m,p=[],r=0,t=0,l,q,w=function(){c&&('"'===e.substr(0,1)&&(e=e.substr(1,e.length-2)),e&&q.push(e),"-"===c.substr(0,1)&&0<(g=c.indexOf("-",1)+1)&&(h=c.substr(0,g),c=c.substr(g)),p.push({prefix:h,
method:c.toLowerCase(),value:m,args:q,image:null}));q=[];c=h=e=m=""};q=[];c=h=e=m="";b.split("").forEach(function(b){if(!(0===r&&-1<" \r\n\t".indexOf(b))){switch(b){case '"':l?l===b&&(l=null):l=b;break;case "(":if(l)break;else{if(0===r){r=1;m+=b;return}t++}break;case ")":if(l)break;else if(1===r){if(0===t){r=0;m+=b;w();return}t--}break;case ",":if(!l){if(0===r){w();return}if(1===r&&0===t&&!c.match(/^url$/i)){q.push(e);e="";m+=b;return}}}m+=b;0===r?c+=b:e+=b}});w();return p}},{}],27:[function(b,e,
c){function d(b){f.apply(this,arguments);this.type="linear"===b.args[0]?f.TYPES.LINEAR:f.TYPES.RADIAL}var f=b("./gradientcontainer");d.prototype=Object.create(f.prototype);e.exports=d},{"./gradientcontainer":9}],28:[function(b,e,c){e.exports=function(b){return new Promise(function(c,e){var h=new XMLHttpRequest;h.open("GET",b);h.onload=function(){200===h.status?c(h.responseText):e(Error(h.statusText))};h.onerror=function(){e(Error("Network Error"))};h.send()})}},{}]},{},[4])(4)});
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self);(b.html2canvas||(b.html2canvas={})).svg=a()}}(function(){return function b(e,c,d){function f(g,h){if(!c[g]){if(!e[g]){var p="function"==typeof require&&require;if(!h&&p)return p(g,!0);if(n)return n(g,!0);p=Error("Cannot find module '"+g+
"'");throw p.code="MODULE_NOT_FOUND",p;}p=c[g]={exports:{}};e[g][0].call(p.exports,function(b){var c=e[g][1][b];return f(c?c:b)},p,p.exports,b,e,c,d)}return c[g].exports}for(var n="function"==typeof require&&require,h=0;h<d.length;h++)f(d[h]);return f}({1:[function(b,e,c){},{}],2:[function(b,e,c){function d(b,c,e){if(!(this instanceof d))return new d(b,c,e);var f=typeof b,g;if("number"===f)g=0<b?b>>>0:0;else if("string"===f)g=d.byteLength(b,c);else if("object"===f&&null!==b)"Buffer"===b.type&&K(b.data)&&
(b=b.data),g=0<+b.length?Math.floor(+b.length):0;else throw new TypeError("must start with number, buffer, array or string");if(g>F)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+F.toString(16)+" bytes");var l;d.TYPED_ARRAY_SUPPORT?l=d._augment(new Uint8Array(g)):(l=this,l.length=g,l._isBuffer=!0);if(d.TYPED_ARRAY_SUPPORT&&"number"===typeof b.byteLength)l._set(b);else{var h=b;if(K(h)||d.isBuffer(h)||h&&"object"===typeof h&&"number"===typeof h.length)if(d.isBuffer(b))for(c=
0;c<g;c++)l[c]=b.readUInt8(c);else for(c=0;c<g;c++)l[c]=(b[c]%256+256)%256;else if("string"===f)l.write(b,0,c);else if("number"===f&&!d.TYPED_ARRAY_SUPPORT&&!e)for(c=0;c<g;c++)l[c]=0}0<g&&g<=d.poolSize&&(l.parent=z);return l}function f(b,c,e){if(!(this instanceof f))return new f(b,c,e);b=new d(b,c,e);delete b.parent;return b}function n(b,c,d,e){for(var f=[],g=0;g<c.length;g++)f.push(c.charCodeAt(g)&255);return u(f,b,d,e)}function h(b,c,d){if(0!==b%1||0>b)throw new RangeError("offset is not uint");
if(b+c>d)throw new RangeError("Trying to access beyond buffer length");}function g(b,c,e,f,g,l){if(!d.isBuffer(b))throw new TypeError("buffer must be a Buffer instance");if(c>g||c<l)throw new RangeError("value is out of bounds");if(e+f>b.length)throw new RangeError("index out of range");}function m(b,c,d,e){0>c&&(c=65535+c+1);for(var f=0,g=Math.min(b.length-d,2);f<g;f++)b[d+f]=(c&255<<8*(e?f:1-f))>>>8*(e?f:1-f)}function p(b,c,d,e){0>c&&(c=4294967295+c+1);for(var f=0,g=Math.min(b.length-d,4);f<g;f++)b[d+
f]=c>>>8*(e?f:3-f)&255}function r(b,c,d,e,f,g){if(c>f||c<g)throw new RangeError("value is out of bounds");if(d+e>b.length)throw new RangeError("index out of range");if(0>d)throw new RangeError("index out of range");}function t(b,c,d,e,f){f||r(b,c,d,4,3.4028234663852886E38,-3.4028234663852886E38);A.write(b,c,d,e,23,4);return d+4}function l(b,c,d,e,f){f||r(b,c,d,8,1.7976931348623157E308,-1.7976931348623157E308);A.write(b,c,d,e,52,8);return d+8}function q(b){b=b.trim?b.trim():b.replace(/^\s+|\s+$/g,
"");b=b.replace(H,"");if(2>b.length)return"";for(;0!==b.length%4;)b+="=";return b}function w(b,c){var d,e=b.length,f=null;c=c||Infinity;for(var g=[],l=0;l<e;l++){d=b.charCodeAt(l);if(55295<d&&57344>d)if(f)if(56320>d){-1<(c-=3)&&g.push(239,191,189);f=d;continue}else d=f-55296<<10|d-56320|65536,f=null;else{56319<d?-1<(c-=3)&&g.push(239,191,189):l+1===e?-1<(c-=3)&&g.push(239,191,189):f=d;continue}else f&&(-1<(c-=3)&&g.push(239,191,189),f=null);if(128>d){if(0>(c-=1))break;g.push(d)}else if(2048>d){if(0>
(c-=2))break;g.push(d>>6|192,d&63|128)}else if(65536>d){if(0>(c-=3))break;g.push(d>>12|224,d>>6&63|128,d&63|128)}else if(2097152>d){if(0>(c-=4))break;g.push(d>>18|240,d>>12&63|128,d>>6&63|128,d&63|128)}else throw Error("Invalid code point");}return g}function u(b,c,d,e,f){f&&(e-=e%f);for(f=0;f<e&&!(f+d>=c.length||f>=b.length);f++)c[f+d]=b[f];return f}function v(b){try{return decodeURIComponent(b)}catch(c){return String.fromCharCode(65533)}}var E=b("base64-js"),A=b("ieee754"),K=b("is-array");c.Buffer=
d;c.SlowBuffer=f;c.INSPECT_MAX_BYTES=50;d.poolSize=8192;var F=1073741823,z={};d.TYPED_ARRAY_SUPPORT=function(){try{var b=new ArrayBuffer(0),c=new Uint8Array(b);c.foo=function(){return 42};return 42===c.foo()&&"function"===typeof c.subarray&&0===(new Uint8Array(1)).subarray(1,1).byteLength}catch(d){return!1}}();d.isBuffer=function(b){return!(null==b||!b._isBuffer)};d.compare=function(b,c){if(!d.isBuffer(b)||!d.isBuffer(c))throw new TypeError("Arguments must be Buffers");for(var e=b.length,f=c.length,
g=0,l=Math.min(e,f);g<l&&b[g]===c[g];g++);g!==l&&(e=b[g],f=c[g]);return e<f?-1:f<e?1:0};d.isEncoding=function(b){switch(String(b).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "binary":case "base64":case "raw":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};d.concat=function(b,c){if(!K(b))throw new TypeError("Usage: Buffer.concat(list[, length])");if(0===b.length)return new d(0);if(1===b.length)return b[0];var e;if(void 0===c)for(e=c=0;e<
b.length;e++)c+=b[e].length;var f=new d(c),g=0;for(e=0;e<b.length;e++){var l=b[e];l.copy(f,g);g+=l.length}return f};d.byteLength=function(b,c){var d;b+="";switch(c||"utf8"){case "ascii":case "binary":case "raw":d=b.length;break;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":d=2*b.length;break;case "hex":d=b.length>>>1;break;case "utf8":case "utf-8":d=w(b).length;break;case "base64":d=E.toByteArray(q(b)).length;break;default:d=b.length}return d};d.prototype.length=void 0;d.prototype.parent=
void 0;d.prototype.toString=function(b,c,d){var e=!1;c>>>=0;d=void 0===d||Infinity===d?this.length:d>>>0;b||(b="utf8");0>c&&(c=0);d>this.length&&(d=this.length);if(d<=c)return"";for(;;)switch(b){case "hex":b=c;c=this.length;if(!b||0>b)b=0;if(!d||0>d||d>c)d=c;for(c="";b<d;b++)e=this[b],e=16>e?"0"+e.toString(16):e.toString(16),c+=e;return c;case "utf8":case "utf-8":b=c;e=c="";for(d=Math.min(this.length,d);b<d;b++)127>=this[b]?(c+=v(e)+String.fromCharCode(this[b]),e=""):e+="%"+this[b].toString(16);return c+
v(e);case "ascii":b=c;c="";for(d=Math.min(this.length,d);b<d;b++)c+=String.fromCharCode(this[b]&127);return c;case "binary":b=c;c="";for(d=Math.min(this.length,d);b<d;b++)c+=String.fromCharCode(this[b]);return c;case "base64":return b=c,d=0===b&&d===this.length?E.fromByteArray(this):E.fromByteArray(this.slice(b,d)),d;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":d=this.slice(c,d);b="";for(c=0;c<d.length;c+=2)b+=String.fromCharCode(d[c]+256*d[c+1]);return b;default:if(e)throw new TypeError("Unknown encoding: "+
b);b=(b+"").toLowerCase();e=!0}};d.prototype.equals=function(b){if(!d.isBuffer(b))throw new TypeError("Argument must be a Buffer");return 0===d.compare(this,b)};d.prototype.inspect=function(){var b="",d=c.INSPECT_MAX_BYTES;0<this.length&&(b=this.toString("hex",0,d).match(/.{2}/g).join(" "),this.length>d&&(b+=" ... "));return"<Buffer "+b+">"};d.prototype.compare=function(b){if(!d.isBuffer(b))throw new TypeError("Argument must be a Buffer");return d.compare(this,b)};d.prototype.get=function(b){console.log(".get() is deprecated. Access using array indexes instead.");
return this.readUInt8(b)};d.prototype.set=function(b,c){console.log(".set() is deprecated. Access using array indexes instead.");return this.writeUInt8(b,c)};d.prototype.write=function(b,c,d,e){if(isFinite(c))isFinite(d)||(e=d,d=void 0);else{var f=e;e=c;c=d;d=f}c=Number(c)||0;if(0>d||0>c||c>this.length)throw new RangeError("attempt to write outside buffer bounds");f=this.length-c;d?(d=Number(d),d>f&&(d=f)):d=f;e=String(e||"utf8").toLowerCase();switch(e){case "hex":e=d;d=Number(c)||0;c=this.length-
d;e?(e=Number(e),e>c&&(e=c)):e=c;c=b.length;if(0!==c%2)throw Error("Invalid hex string");e>c/2&&(e=c/2);for(c=0;c<e;c++){f=parseInt(b.substr(2*c,2),16);if(isNaN(f))throw Error("Invalid hex string");this[d+c]=f}b=c;break;case "utf8":case "utf-8":e=c;b=u(w(b,this.length-e),this,e,d);break;case "ascii":b=n(this,b,c,d);break;case "binary":b=n(this,b,c,d);break;case "base64":e=c;b=u(E.toByteArray(q(b)),this,e,d);break;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":e=c;c=this.length-e;for(var g,
l=[],h=0;h<b.length&&!(0>(c-=2));h++)g=b.charCodeAt(h),f=g>>8,g%=256,l.push(g),l.push(f);b=u(l,this,e,d,2);break;default:throw new TypeError("Unknown encoding: "+e);}return b};d.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};d.prototype.slice=function(b,c){var e=this.length;b=~~b;c=void 0===c?e:~~c;0>b?(b+=e,0>b&&(b=0)):b>e&&(b=e);0>c?(c+=e,0>c&&(c=0)):c>e&&(c=e);c<b&&(c=b);if(d.TYPED_ARRAY_SUPPORT)e=d._augment(this.subarray(b,c));else for(var f=
c-b,e=new d(f,void 0,!0),g=0;g<f;g++)e[g]=this[g+b];e.length&&(e.parent=this.parent||this);return e};d.prototype.readUIntLE=function(b,c,d){b>>>=0;c>>>=0;d||h(b,c,this.length);d=this[b];for(var e=1,f=0;++f<c&&(e*=256);)d+=this[b+f]*e;return d};d.prototype.readUIntBE=function(b,c,d){b>>>=0;c>>>=0;d||h(b,c,this.length);d=this[b+--c];for(var e=1;0<c&&(e*=256);)d+=this[b+--c]*e;return d};d.prototype.readUInt8=function(b,c){c||h(b,1,this.length);return this[b]};d.prototype.readUInt16LE=function(b,c){c||
h(b,2,this.length);return this[b]|this[b+1]<<8};d.prototype.readUInt16BE=function(b,c){c||h(b,2,this.length);return this[b]<<8|this[b+1]};d.prototype.readUInt32LE=function(b,c){c||h(b,4,this.length);return(this[b]|this[b+1]<<8|this[b+2]<<16)+16777216*this[b+3]};d.prototype.readUInt32BE=function(b,c){c||h(b,4,this.length);return 16777216*this[b]+(this[b+1]<<16|this[b+2]<<8|this[b+3])};d.prototype.readIntLE=function(b,c,d){b>>>=0;c>>>=0;d||h(b,c,this.length);d=this[b];for(var e=1,f=0;++f<c&&(e*=256);)d+=
this[b+f]*e;d>=128*e&&(d-=Math.pow(2,8*c));return d};d.prototype.readIntBE=function(b,c,d){b>>>=0;c>>>=0;d||h(b,c,this.length);d=c;for(var e=1,f=this[b+--d];0<d&&(e*=256);)f+=this[b+--d]*e;f>=128*e&&(f-=Math.pow(2,8*c));return f};d.prototype.readInt8=function(b,c){c||h(b,1,this.length);return this[b]&128?-1*(255-this[b]+1):this[b]};d.prototype.readInt16LE=function(b,c){c||h(b,2,this.length);var d=this[b]|this[b+1]<<8;return d&32768?d|4294901760:d};d.prototype.readInt16BE=function(b,c){c||h(b,2,this.length);
var d=this[b+1]|this[b]<<8;return d&32768?d|4294901760:d};d.prototype.readInt32LE=function(b,c){c||h(b,4,this.length);return this[b]|this[b+1]<<8|this[b+2]<<16|this[b+3]<<24};d.prototype.readInt32BE=function(b,c){c||h(b,4,this.length);return this[b]<<24|this[b+1]<<16|this[b+2]<<8|this[b+3]};d.prototype.readFloatLE=function(b,c){c||h(b,4,this.length);return A.read(this,b,!0,23,4)};d.prototype.readFloatBE=function(b,c){c||h(b,4,this.length);return A.read(this,b,!1,23,4)};d.prototype.readDoubleLE=function(b,
c){c||h(b,8,this.length);return A.read(this,b,!0,52,8)};d.prototype.readDoubleBE=function(b,c){c||h(b,8,this.length);return A.read(this,b,!1,52,8)};d.prototype.writeUIntLE=function(b,c,d,e){b=+b;c>>>=0;d>>>=0;e||g(this,b,c,d,Math.pow(2,8*d),0);e=1;var f=0;for(this[c]=b&255;++f<d&&(e*=256);)this[c+f]=b/e>>>0&255;return c+d};d.prototype.writeUIntBE=function(b,c,d,e){b=+b;c>>>=0;d>>>=0;e||g(this,b,c,d,Math.pow(2,8*d),0);e=d-1;var f=1;for(this[c+e]=b&255;0<=--e&&(f*=256);)this[c+e]=b/f>>>0&255;return c+
d};d.prototype.writeUInt8=function(b,c,e){b=+b;c>>>=0;e||g(this,b,c,1,255,0);d.TYPED_ARRAY_SUPPORT||(b=Math.floor(b));this[c]=b;return c+1};d.prototype.writeUInt16LE=function(b,c,e){b=+b;c>>>=0;e||g(this,b,c,2,65535,0);d.TYPED_ARRAY_SUPPORT?(this[c]=b,this[c+1]=b>>>8):m(this,b,c,!0);return c+2};d.prototype.writeUInt16BE=function(b,c,e){b=+b;c>>>=0;e||g(this,b,c,2,65535,0);d.TYPED_ARRAY_SUPPORT?(this[c]=b>>>8,this[c+1]=b):m(this,b,c,!1);return c+2};d.prototype.writeUInt32LE=function(b,c,e){b=+b;c>>>=
0;e||g(this,b,c,4,4294967295,0);d.TYPED_ARRAY_SUPPORT?(this[c+3]=b>>>24,this[c+2]=b>>>16,this[c+1]=b>>>8,this[c]=b):p(this,b,c,!0);return c+4};d.prototype.writeUInt32BE=function(b,c,e){b=+b;c>>>=0;e||g(this,b,c,4,4294967295,0);d.TYPED_ARRAY_SUPPORT?(this[c]=b>>>24,this[c+1]=b>>>16,this[c+2]=b>>>8,this[c+3]=b):p(this,b,c,!1);return c+4};d.prototype.writeIntLE=function(b,c,d,e){b=+b;c>>>=0;e||g(this,b,c,d,Math.pow(2,8*d-1)-1,-Math.pow(2,8*d-1));e=0;var f=1,l=0>b?1:0;for(this[c]=b&255;++e<d&&(f*=256);)this[c+
e]=(b/f>>0)-l&255;return c+d};d.prototype.writeIntBE=function(b,c,d,e){b=+b;c>>>=0;e||g(this,b,c,d,Math.pow(2,8*d-1)-1,-Math.pow(2,8*d-1));e=d-1;var f=1,l=0>b?1:0;for(this[c+e]=b&255;0<=--e&&(f*=256);)this[c+e]=(b/f>>0)-l&255;return c+d};d.prototype.writeInt8=function(b,c,e){b=+b;c>>>=0;e||g(this,b,c,1,127,-128);d.TYPED_ARRAY_SUPPORT||(b=Math.floor(b));0>b&&(b=255+b+1);this[c]=b;return c+1};d.prototype.writeInt16LE=function(b,c,e){b=+b;c>>>=0;e||g(this,b,c,2,32767,-32768);d.TYPED_ARRAY_SUPPORT?(this[c]=
b,this[c+1]=b>>>8):m(this,b,c,!0);return c+2};d.prototype.writeInt16BE=function(b,c,e){b=+b;c>>>=0;e||g(this,b,c,2,32767,-32768);d.TYPED_ARRAY_SUPPORT?(this[c]=b>>>8,this[c+1]=b):m(this,b,c,!1);return c+2};d.prototype.writeInt32LE=function(b,c,e){b=+b;c>>>=0;e||g(this,b,c,4,2147483647,-2147483648);d.TYPED_ARRAY_SUPPORT?(this[c]=b,this[c+1]=b>>>8,this[c+2]=b>>>16,this[c+3]=b>>>24):p(this,b,c,!0);return c+4};d.prototype.writeInt32BE=function(b,c,e){b=+b;c>>>=0;e||g(this,b,c,4,2147483647,-2147483648);
0>b&&(b=4294967295+b+1);d.TYPED_ARRAY_SUPPORT?(this[c]=b>>>24,this[c+1]=b>>>16,this[c+2]=b>>>8,this[c+3]=b):p(this,b,c,!1);return c+4};d.prototype.writeFloatLE=function(b,c,d){return t(this,b,c,!0,d)};d.prototype.writeFloatBE=function(b,c,d){return t(this,b,c,!1,d)};d.prototype.writeDoubleLE=function(b,c,d){return l(this,b,c,!0,d)};d.prototype.writeDoubleBE=function(b,c,d){return l(this,b,c,!1,d)};d.prototype.copy=function(b,c,e,f){e||(e=0);f||0===f||(f=this.length);c>=b.length&&(c=b.length);c||(c=
0);0<f&&f<e&&(f=e);if(f===e||0===b.length||0===this.length)return 0;if(0>c)throw new RangeError("targetStart out of bounds");if(0>e||e>=this.length)throw new RangeError("sourceStart out of bounds");if(0>f)throw new RangeError("sourceEnd out of bounds");f>this.length&&(f=this.length);b.length-c<f-e&&(f=b.length-c+e);f-=e;if(1E3>f||!d.TYPED_ARRAY_SUPPORT)for(var g=0;g<f;g++)b[g+c]=this[g+e];else b._set(this.subarray(e,e+f),c);return f};d.prototype.fill=function(b,c,d){b||(b=0);c||(c=0);d||(d=this.length);
if(d<c)throw new RangeError("end < start");if(d!==c&&0!==this.length){if(0>c||c>=this.length)throw new RangeError("start out of bounds");if(0>d||d>this.length)throw new RangeError("end out of bounds");if("number"===typeof b)for(;c<d;c++)this[c]=b;else{b=w(b.toString());for(var e=b.length;c<d;c++)this[c]=b[c%e]}return this}};d.prototype.toArrayBuffer=function(){if("undefined"!==typeof Uint8Array){if(d.TYPED_ARRAY_SUPPORT)return(new d(this)).buffer;for(var b=new Uint8Array(this.length),c=0,e=b.length;c<
e;c+=1)b[c]=this[c];return b.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser");};var B=d.prototype;d._augment=function(b){b.constructor=d;b._isBuffer=!0;b._get=b.get;b._set=b.set;b.get=B.get;b.set=B.set;b.write=B.write;b.toString=B.toString;b.toLocaleString=B.toString;b.toJSON=B.toJSON;b.equals=B.equals;b.compare=B.compare;b.copy=B.copy;b.slice=B.slice;b.readUIntLE=B.readUIntLE;b.readUIntBE=B.readUIntBE;b.readUInt8=B.readUInt8;b.readUInt16LE=B.readUInt16LE;b.readUInt16BE=
B.readUInt16BE;b.readUInt32LE=B.readUInt32LE;b.readUInt32BE=B.readUInt32BE;b.readIntLE=B.readIntLE;b.readIntBE=B.readIntBE;b.readInt8=B.readInt8;b.readInt16LE=B.readInt16LE;b.readInt16BE=B.readInt16BE;b.readInt32LE=B.readInt32LE;b.readInt32BE=B.readInt32BE;b.readFloatLE=B.readFloatLE;b.readFloatBE=B.readFloatBE;b.readDoubleLE=B.readDoubleLE;b.readDoubleBE=B.readDoubleBE;b.writeUInt8=B.writeUInt8;b.writeUIntLE=B.writeUIntLE;b.writeUIntBE=B.writeUIntBE;b.writeUInt16LE=B.writeUInt16LE;b.writeUInt16BE=
B.writeUInt16BE;b.writeUInt32LE=B.writeUInt32LE;b.writeUInt32BE=B.writeUInt32BE;b.writeIntLE=B.writeIntLE;b.writeIntBE=B.writeIntBE;b.writeInt8=B.writeInt8;b.writeInt16LE=B.writeInt16LE;b.writeInt16BE=B.writeInt16BE;b.writeInt32LE=B.writeInt32LE;b.writeInt32BE=B.writeInt32BE;b.writeFloatLE=B.writeFloatLE;b.writeFloatBE=B.writeFloatBE;b.writeDoubleLE=B.writeDoubleLE;b.writeDoubleBE=B.writeDoubleBE;b.fill=B.fill;b.inspect=B.inspect;b.toArrayBuffer=B.toArrayBuffer;return b};var H=/[^+\/0-9A-z\-]/g},
{"base64-js":3,ieee754:4,"is-array":5}],3:[function(b,e,c){(function(b){function c(b){b=b.charCodeAt(0);if(43===b||45===b)return 62;if(47===b||95===b)return 63;if(48>b)return-1;if(58>b)return b-48+52;if(91>b)return b-65;if(123>b)return b-97+26}var e="undefined"!==typeof Uint8Array?Uint8Array:Array;b.toByteArray=function(b){function d(b){l[q++]=b}var m,p,r,t,l;if(0<b.length%4)throw Error("Invalid string. Length must be a multiple of 4");m=b.length;t="="===b.charAt(m-2)?2:"="===b.charAt(m-1)?1:0;l=
new e(3*b.length/4-t);p=0<t?b.length-4:b.length;var q=0;for(m=0;m<p;m+=4)r=c(b.charAt(m))<<18|c(b.charAt(m+1))<<12|c(b.charAt(m+2))<<6|c(b.charAt(m+3)),d((r&16711680)>>16),d((r&65280)>>8),d(r&255);2===t?(r=c(b.charAt(m))<<2|c(b.charAt(m+1))>>4,d(r&255)):1===t&&(r=c(b.charAt(m))<<10|c(b.charAt(m+1))<<4|c(b.charAt(m+2))>>2,d(r>>8&255),d(r&255));return l};b.fromByteArray=function(b){var c,d=b.length%3,e="",f,n;c=0;for(n=b.length-d;c<n;c+=3)f=(b[c]<<16)+(b[c+1]<<8)+b[c+2],f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(f>>
18&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(f>>12&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(f>>6&63)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(f&63),e+=f;switch(d){case 1:f=b[b.length-1];e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(f>>2);e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(f<<4&63);e+="==";break;case 2:f=(b[b.length-2]<<8)+
b[b.length-1],e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(f>>10),e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(f>>4&63),e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(f<<2&63),e+="="}return e}})("undefined"===typeof c?this.base64js={}:c)},{}],4:[function(b,e,c){c.read=function(b,c,e,h,g){var m;m=8*g-h-1;var p=(1<<m)-1,r=p>>1,t=-7;g=e?g-1:0;var l=e?-1:1,q=b[c+g];g+=l;e=q&(1<<-t)-1;q>>=-t;for(t+=m;0<t;e=256*
e+b[c+g],g+=l,t-=8);m=e&(1<<-t)-1;e>>=-t;for(t+=h;0<t;m=256*m+b[c+g],g+=l,t-=8);if(0===e)e=1-r;else{if(e===p)return m?NaN:Infinity*(q?-1:1);m+=Math.pow(2,h);e-=r}return(q?-1:1)*m*Math.pow(2,e-h)};c.write=function(b,c,e,h,g,m){var p,r=8*m-g-1,t=(1<<r)-1,l=t>>1,q=23===g?Math.pow(2,-24)-Math.pow(2,-77):0;m=h?0:m-1;var w=h?1:-1,u=0>c||0===c&&0>1/c?1:0;c=Math.abs(c);isNaN(c)||Infinity===c?(c=isNaN(c)?1:0,h=t):(h=Math.floor(Math.log(c)/Math.LN2),1>c*(p=Math.pow(2,-h))&&(h--,p*=2),c=1<=h+l?c+q/p:c+q*Math.pow(2,
1-l),2<=c*p&&(h++,p/=2),h+l>=t?(c=0,h=t):1<=h+l?(c=(c*p-1)*Math.pow(2,g),h+=l):(c=c*Math.pow(2,l-1)*Math.pow(2,g),h=0));for(;8<=g;b[e+m]=c&255,m+=w,c/=256,g-=8);h=h<<g|c;for(r+=g;0<r;b[e+m]=h&255,m+=w,h/=256,r-=8);b[e+m-w]|=128*u}},{}],5:[function(b,e,c){var d=Object.prototype.toString;e.exports=Array.isArray||function(b){return!!b&&"[object Array]"==d.call(b)}},{}],6:[function(b,e,c){(function(d){var e=e||{version:"1.4.11"};"undefined"!==typeof c&&(c.fabric=e);"undefined"!==typeof document&&"undefined"!==
typeof window?(e.document=document,e.window=window):(e.document=b("jsdom").jsdom("<!DOCTYPE html><html><head></head><body></body></html>"),e.window=e.document.createWindow());e.isTouchSupported="ontouchstart"in e.document.documentElement;e.isLikelyNode="undefined"!==typeof d&&"undefined"===typeof window;e.SHARED_ATTRIBUTES="display transform fill fill-opacity fill-rule opacity stroke stroke-dasharray stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width".split(" ");e.DPI=96;
var n=function(){function b(c){var d=this.face=c.face;this.glyphs=c.glyphs;this.w=c.w;this.baseSize=parseInt(d["units-per-em"],10);this.family=d["font-family"].toLowerCase();this.weight=d["font-weight"];this.style=d["font-style"]||"normal";this.viewBox=function(){var b=d.bbox.split(/\s+/),b={minX:parseInt(b[0],10),minY:parseInt(b[1],10),maxX:parseInt(b[2],10),maxY:parseInt(b[3],10)};b.width=b.maxX-b.minX;b.height=b.maxY-b.minY;b.toString=function(){return[this.minX,this.minY,this.width,this.height].join(" ")};
return b}();this.ascent=-parseInt(d.ascent,10);this.descent=-parseInt(d.descent,10);this.height=-this.ascent+this.descent}function c(){var b={},d={oblique:"italic",italic:"oblique"};this.add=function(c){(b[c.style]||(b[c.style]={}))[c.weight]=c};this.get=function(c,e){var f=b[c]||b[d[c]]||b.normal||b.italic||b.oblique;if(!f)return null;e={normal:400,bold:700}[e]||parseInt(e,10);if(f[e])return f[e];var g={1:1,99:0}[e%100],l=[],h,m;void 0===g&&(g=400<e);500==e&&(e=400);for(var p in f){p=parseInt(p,
10);if(!h||p<h)h=p;if(!m||p>m)m=p;l.push(p)}e<h&&(e=h);e>m&&(e=m);l.sort(function(b,c){return(g?b>e&&c>e?b<c:b>c:b<e&&c<e?b>c:b<c)?-1:1});return f[l[0]]}}function d(b){var c={},e={};this.get=function(d){return void 0!=c[d]?c[d]:b[d]};this.getSize=function(b,c){return e[b]||(e[b]=new E.Size(this.get(b),c))};this.extend=function(b){for(var d in b)c[d]=b[d];return this}}function p(b,c,d){b.addEventListener?b.addEventListener(c,d,!1):b.attachEvent&&b.attachEvent("on"+c,function(){return d.call(b,e.window.event)})}
function r(b){var c={};return function(d){c.hasOwnProperty(d)||(c[d]=b.apply(null,arguments));return c[d]}}function n(b){return e.document.getElementsByTagName(b)}function l(){for(var b={},c,d=0,e=arguments.length;d<e;++d)for(c in arguments[d])b[c]=arguments[d][c];return b}function q(b,c,d,g,l,h){var m=g.separate;if("none"==m)return B[g.engine].apply(null,arguments);var p=e.document.createDocumentFragment(),r=c.split(I[m]),q="words"==m;q&&A&&(/^\s/.test(c)&&r.unshift(""),/\s$/.test(c)&&r.push(""));
for(var n=0,t=r.length;n<t;++n)(m=B[g.engine](b,q?E.textAlign(r[n],d,n,t):r[n],d,g,l,h,n<t-1))&&p.appendChild(m);return p}function w(b,c){var d,e,f,g;f=K.get(b);f.options||(c.hover&&c.hoverables[b.nodeName.toLowerCase()]&&F.attach(b),f.options=c);for(var l=b.firstChild;l;l=f){f=l.nextSibling;g=!1;if(1==l.nodeType){if(!l.firstChild)continue;if(/cufon/.test(l.className))g=!0;else{arguments.callee(l,c);continue}}e||(e=E.getStyle(b).extend(c));if(!d)a:{(d=e)||(d=E.getStyle(b));for(var h=E.quotedList(d.get("fontFamily").toLowerCase()),
m=void 0,p=0,r=h.length;p<r;++p)if(m=h[p],H[m]){d=H[m].get(d.get("fontStyle"),d.get("fontWeight"));break a}d=null}if(d)if(g)B[c.engine](d,null,e,c,l,b);else g=l.data,"undefined"!=typeof G_vmlCanvasManager&&(g=g.replace(/\r/g,"\n")),""!==g&&((g=q(d,g,e,c,l,b))?l.parentNode.replaceChild(g,l):l.parentNode.removeChild(l))}}var u=function(){return u.replace.apply(null,arguments)},v=u.DOM={ready:function(){var b=!1,c={loaded:1,complete:1},d=[],g=function(){if(!b){b=!0;for(var c;c=d.shift();c());}};e.document.addEventListener&&
(e.document.addEventListener("DOMContentLoaded",g,!1),e.window.addEventListener("pageshow",g,!1));!e.window.opera&&e.document.readyState&&function(){c[e.document.readyState]?g():setTimeout(arguments.callee,10)}();e.document.readyState&&e.document.createStyleSheet&&function(){try{e.document.body.doScroll("left"),g()}catch(b){setTimeout(arguments.callee,1)}}();p(e.window,"load",g);return function(c){arguments.length?b?c():d.push(c):g()}}()},E=u.CSS={Size:function(b,c){this.value=parseFloat(b);this.unit=
String(b).match(/[a-z%]*$/)[0]||"px";this.convert=function(b){return b/c*this.value};this.convertFrom=function(b){return b/this.value*c};this.toString=function(){return this.value+this.unit}},getStyle:function(b){return new d(b.style)},quotedList:r(function(b){for(var c=[],d=/\s*((["'])([\s\S]*?[^\\])\2|[^,]+)\s*/g,e;e=d.exec(b);)c.push(e[3]||e[1]);return c}),ready:function(){var b=!1,c=[],d=Object.prototype.propertyIsEnumerable?n("style"):{length:0},g=n("link");v.ready(function(){for(var l=0,h,m=
0,p=g.length;h=g[m],m<p;++m)h.disabled||"stylesheet"!=h.rel.toLowerCase()||++l;if(e.document.styleSheets.length>=d.length+l)for(b=!0;l=c.shift();l());else setTimeout(arguments.callee,10)});return function(d){b?d():c.push(d)}}(),supports:function(b,c){var d=e.document.createElement("span").style;if(void 0===d[b])return!1;d[b]=c;return d[b]===c},textAlign:function(b,c,d,e){"right"==c.get("textAlign")?0<d&&(b=" "+b):d<e-1&&(b+=" ");return b},textDecoration:function(b,c){c||(c=this.getStyle(b));for(var d=
{underline:null,overline:null,"line-through":null},e=b;e.parentNode&&1==e.parentNode.nodeType;){var f=!0,g;for(g in d)d[g]||(-1!=c.get("textDecoration").indexOf(g)&&(d[g]=c.get("color")),f=!1);if(f)break;c=this.getStyle(e=e.parentNode)}return d},textShadow:r(function(b){if("none"==b)return null;for(var c=[],d={},e,f=0,g=/(#[a-f0-9]+|[a-z]+\(.*?\)|[a-z]+)|(-?[\d.]+[a-z%]*)|,/ig;e=g.exec(b);)","==e[0]?(c.push(d),d={},f=0):e[1]?d.color=e[1]:d[["offX","offY","blur"][f++]]=e[2];c.push(d);return c}),color:r(function(b){var c=
{};c.color=b.replace(/^rgba\((.*?),\s*([\d.]+)\)/,function(b,d,e){c.opacity=parseFloat(e);return"rgb("+d+")"});return c}),textTransform:function(b,c){return b[{uppercase:"toUpperCase",lowercase:"toLowerCase"}[c.get("textTransform")]||"toString"]()}},A=0==" ".split(/\s+/).length,K=new function(){var b={},c=0;this.get=function(d){d=d.cufid||(d.cufid=++c);return b[d]||(b[d]={})}},F=new function(){function b(c){c=c.relatedTarget;var e;(e=!c)||(e=this.contains?this.contains(c):this.compareDocumentPosition(c)&
16);e||d(this)}function c(b){d(this)}function d(b){setTimeout(function(){u.replace(b,K.get(b).options,!0)},10)}this.attach=function(d){void 0===d.onmouseenter?(p(d,"mouseover",b),p(d,"mouseout",b)):(p(d,"mouseenter",c),p(d,"mouseleave",c))}},z=[],B={},H={},G={engine:null,hover:!1,hoverables:{a:!0},printable:!0,selector:e.window.Sizzle||e.window.jQuery&&function(b){return jQuery(b)}||e.window.dojo&&dojo.query||e.window.$$&&function(b){return $$(b)}||e.window.$&&function(b){return $(b)}||e.document.querySelectorAll&&
function(b){return e.document.querySelectorAll(b)}||n,separate:"words",textShadow:"none"},I={words:/\s+/,characters:""};u.now=function(){v.ready();return u};u.refresh=function(){for(var b=z.splice(0,z.length),c=0,d=b.length;c<d;++c)u.replace.apply(null,b[c]);return u};u.registerEngine=function(b,c){if(!c)return u;B[b]=c;return u.set("engine",b)};u.registerFont=function(d){d=new b(d);var e=d.family;H[e]||(H[e]=new c);H[e].add(d);return u.set("fontFamily",'"'+e+'"')};u.replace=function(b,c,d){c=l(G,
c);if(!c.engine)return u;"string"==typeof c.textShadow&&c.textShadow&&(c.textShadow=E.textShadow(c.textShadow));d||z.push(arguments);if(b.nodeType||"string"==typeof b)b=[b];E.ready(function(){for(var d=0,e=b.length;d<e;++d){var f=b[d];"string"==typeof f?u.replace(c.selector(f),c,!0):w(f,c)}});return u};u.replaceElement=function(b,c){c=l(G,c);"string"==typeof c.textShadow&&c.textShadow&&(c.textShadow=E.textShadow(c.textShadow));return w(b,c)};u.engines=B;u.fonts=H;u.getOptions=function(){return l(G)};
u.set=function(b,c){G[b]=c;return u};return u}();n.registerEngine("canvas",function(){var b=n.CSS.supports("display","inline-block"),c=!b&&("BackCompat"==e.document.compatMode||/frameset|transitional/i.test(e.document.doctype.publicId)),d=e.document.createElement("style");d.type="text/css";c=e.document.createTextNode(".cufon-canvas{text-indent:0}@media screen,projection{.cufon-canvas{display:inline;display:inline-block;position:relative;vertical-align:middle"+(c?"":";font-size:1px;line-height:1px")+
"}.cufon-canvas .cufon-alt{display:-moz-inline-box;display:inline-block;width:0;height:0;overflow:hidden}"+(b?".cufon-canvas canvas{position:relative}":".cufon-canvas canvas{position:absolute}")+"}@media print{.cufon-canvas{padding:0 !important}.cufon-canvas canvas{display:none}.cufon-canvas .cufon-alt{display:inline}}");try{d.appendChild(c)}catch(p){d.setAttribute("type","text/css"),d.styleSheet.cssText=c.data}e.document.getElementsByTagName("head")[0].appendChild(d);return function(c,d,g,m,p,u){function v(b){U.fillStyle=
b||n.textOptions.color||g.get("color");var d=b=0;"right"===m.textAlign?U.translate(W[d],0):"center"===m.textAlign&&U.translate(W[d]/2,0);for(var e=0,f=S.length;e<f;++e)if("\n"===S[e]){d++;var h=-c.ascent-c.ascent/5*m.lineHeight;"right"===m.textAlign?(U.translate(-D,h),U.translate(W[d],0)):"center"===m.textAlign?(U.translate(-b-W[d-1]/2,h),U.translate(W[d]/2,0)):U.translate(-b,h);b=0}else{var p=c.glyphs[S[e]]||c.missingGlyph;if(p){h=Number(p.w||c.w)+F;Q&&(U.save(),U.strokeStyle=U.fillStyle,U.lineWidth+=
U.lineWidth,U.beginPath(),Q.underline&&(U.moveTo(0,-c.face["underline-position"]+.5),U.lineTo(h,-c.face["underline-position"]+.5)),Q.overline&&(U.moveTo(0,c.ascent+.5),U.lineTo(h,c.ascent+.5)),Q["line-through"]&&(U.moveTo(0,-c.descent+.5),U.lineTo(h,-c.descent+.5)),U.stroke(),U.restore());X&&(U.save(),U.transform(1,0,-.25,1,0,0));U.beginPath();if(p.d)if(p.code)for(var t=p.code,p=U,u=0,w=t.length;u<w;++u){var v=t[u];p[v.m].apply(p,v.a)}else{var t=p,p="m"+p.d,u=U,v=w=0,x=[],B=/([mrvxe])([^a-z]*)/g,
J=void 0,A=0;a:for(;J=B.exec(p);++A){var V=J[2].split(",");switch(J[1]){case "v":x[A]={m:"bezierCurveTo",a:[w+~~V[0],v+~~V[1],w+~~V[2],v+~~V[3],w+=~~V[4],v+=~~V[5]]};break;case "r":x[A]={m:"lineTo",a:[w+=~~V[0],v+=~~V[1]]};break;case "m":x[A]={m:"moveTo",a:[w=~~V[0],v=~~V[1]]};break;case "x":x[A]={m:"closePath",a:[]};break;case "e":break a}u[x[A].m].apply(u,x[A].a)}t.code=x}U.fill();m.strokeStyle&&(U.closePath(),U.save(),U.lineWidth=m.strokeWidth,U.strokeStyle=m.strokeStyle,U.stroke(),U.restore());
X&&U.restore();U.translate(h,0);b+=h}}}var E=null===d,A=c.viewBox,K=g.getSize("fontSize",c.baseSize),F=g.get("letterSpacing"),F="normal"==F?0:K.convertFrom(parseInt(F,10)),z=u=0,B=0,H=m.textShadow,G=[];n.textOptions.shadowOffsets=[];n.textOptions.shadows=null;if(H){n.textOptions.shadows=H;for(var I=0,N=H.length;I<N;++I){var L=H[I],x=K.convertFrom(parseFloat(L.offX)),L=K.convertFrom(parseFloat(L.offY));G[I]=[x,L]}}for(var S=n.CSS.textTransform(E?p.alt:d,g).split(""),D=0,L=null,x=0,J=1,V=[],I=0,N=S.length;I<
N;++I)if("\n"===S[I])J++,D>x&&(x=D),V.push(D),D=0;else{var Y=c.glyphs[S[I]]||c.missingGlyph;Y&&(D+=L=Number(Y.w||c.w)+F)}V.push(D);for(var D=Math.max(x,D),W=[],I=V.length;I--;)W[I]=D-V[I];if(null===L)return null;z+=A.width-L;B+=A.minX;E?(E=p,p=p.firstChild):(E=e.document.createElement("span"),E.className="cufon cufon-canvas",E.alt=d,p=e.document.createElement("canvas"),E.appendChild(p),m.printable&&(I=e.document.createElement("span"),I.className="cufon-alt",I.appendChild(e.document.createTextNode(d)),
E.appendChild(I)));d=E.style;N=p.style||{};L=K.convert(A.height-u+0);I=Math.ceil(L);L=I/L;p.width=Math.ceil(K.convert(D+z-B)*L);p.height=I;u+=A.minY;N.top=Math.round(K.convert(u-c.ascent))+"px";N.left=Math.round(K.convert(B))+"px";z=Math.ceil(K.convert(D*L));N=z+"px";L=K.convert(c.height);K=(m.lineHeight-1)*K.convert(-c.ascent/5)*(J-1);n.textOptions.width=z;n.textOptions.height=L*J+K;n.textOptions.lines=J;n.textOptions.totalLineHeight=K;b?(d.width=N,d.height=L+"px"):(d.paddingLeft=N,d.paddingBottom=
L-1+"px");var U=n.textOptions.context||p.getContext("2d"),M=I/A.height;n.textOptions.fontAscent=c.ascent*M;n.textOptions.boundaries=null;A=n.textOptions.shadowOffsets;for(I=G.length;I--;)A[I]=[G[I][0]*M,G[I][1]*M];U.save();U.scale(M,M);U.translate(-B-1/M*p.width/2+(n.fonts[c.family].offsetLeft||0),-u-n.textOptions.height/M/2+(n.fonts[c.family].offsetTop||0));U.lineWidth=c.face["underline-thickness"];U.save();var Q=n.getTextDecoration(m),X="italic"===m.fontStyle;U.save();(function(){U.save();var b=
0,d=0,e=[{left:0}];m.backgroundColor&&(U.save(),U.fillStyle=m.backgroundColor,U.translate(0,c.ascent),U.fillRect(0,0,D+10,(-c.ascent+c.descent)*J),U.restore());"right"===m.textAlign?(U.translate(W[d],0),e[0].left=W[d]*M):"center"===m.textAlign&&(U.translate(W[d]/2,0),e[0].left=W[d]/2*M);for(var f=0,g=S.length;f<g;++f)if("\n"===S[f]){d++;var l=-c.ascent-c.ascent/5*m.lineHeight,h=e[e.length-1],p={left:0};h.width=b*M;h.height=(-c.ascent+c.descent)*M;"right"===m.textAlign?(U.translate(-D,l),U.translate(W[d],
0),p.left=W[d]*M):"center"===m.textAlign?(U.translate(-b-W[d-1]/2,l),U.translate(W[d]/2,0),p.left=W[d]/2*M):U.translate(-b,l);e.push(p);b=0}else if(l=c.glyphs[S[f]]||c.missingGlyph)l=Number(l.w||c.w)+F,m.textBackgroundColor&&(U.save(),U.fillStyle=m.textBackgroundColor,U.translate(0,c.ascent),U.fillRect(0,0,l+10,-c.ascent+c.descent),U.restore()),U.translate(l,0),b+=l,f==g-1&&(e[e.length-1].width=b*M,e[e.length-1].height=(-c.ascent+c.descent)*M);U.restore();n.textOptions.boundaries=e})();if(H)for(I=
0,N=H.length;I<N;++I)L=H[I],U.save(),U.translate.apply(U,G[I]),v(L.color),U.restore();v();U.restore();U.restore();U.restore();return E}}());n.registerEngine("vml",function(){function b(c,d){if(/px$/i.test(d))return parseFloat(d);var e=c.style.left,f=c.runtimeStyle.left;c.runtimeStyle.left=c.currentStyle.left;c.style.left=d;var g=c.style.pixelLeft;c.style.left=e;c.runtimeStyle.left=f;return g}if(e.document.namespaces){var c=e.document.createElement("canvas");if(!(c&&c.getContext&&c.getContext.apply)&&
(null==e.document.namespaces.cvml&&e.document.namespaces.add("cvml","urn:schemas-microsoft-com:vml"),c=e.document.createElement("cvml:shape"),c.style.behavior="url(#default#VML)",c.coordsize))return c=null,e.document.write('<style type="text/css">.cufon-vml-canvas{text-indent:0}@media screen{cvml\\:shape,cvml\\:shadow{behavior:url(#default#VML);display:block;antialias:true;position:absolute}.cufon-vml-canvas{position:absolute;text-align:left}.cufon-vml{display:inline-block;position:relative;vertical-align:middle}.cufon-vml .cufon-alt{position:absolute;left:-10000in;font-size:1px}a .cufon-vml{cursor:pointer}}@media print{.cufon-vml *{display:none}.cufon-vml .cufon-alt{display:inline}}</style>'),
function(c,d,g,t,l,q,w){var u=null===d;u&&(d=l.alt);var v=c.viewBox,E;if(!(E=g.computedFontSize)){E=n.CSS.Size;var A;A=g.get("fontSize");A=b(q,/(?:em|ex|%)$/i.test(A)?"1em":A);E=g.computedFontSize=new E(A+"px",c.baseSize)}A=g.computedLSpacing;void 0==A&&(A=g.get("letterSpacing"),g.computedLSpacing=A="normal"==A?0:~~E.convertFrom(b(q,A)));if(u)q=l,l=l.firstChild;else{q=e.document.createElement("span");q.className="cufon cufon-vml";q.alt=d;l=e.document.createElement("span");l.className="cufon-vml-canvas";
q.appendChild(l);if(t.printable){var K=e.document.createElement("span");K.className="cufon-alt";K.appendChild(e.document.createTextNode(d));q.appendChild(K)}w||q.appendChild(e.document.createElement("cvml:shape"))}w=q.style;var F=l.style,z=E.convert(v.height),K=Math.ceil(z),z=K/z,B=v.minX,H=v.minY;F.height=K;F.top=Math.round(E.convert(H-c.ascent));F.left=Math.round(E.convert(B));w.height=E.convert(c.height)+"px";n.getTextDecoration(t);F=g.get("color");d=n.CSS.textTransform(d,g).split("");var G=g=
0,I=null,N;t=t.textShadow;for(var L=0,x=0,S=d.length;L<S;++L)(N=c.glyphs[d[L]]||c.missingGlyph)&&(g+=I=~~(N.w||c.w)+A);if(null===I)return null;N=-B+g+(v.width-I);for(var L=E.convert(N*z),I=Math.round(L),D=N+","+v.height,J,V="r"+D+"nsnf",L=0;L<S;++L)if(N=c.glyphs[d[L]]||c.missingGlyph){u?(v=l.childNodes[x],v.firstChild&&v.removeChild(v.firstChild)):(v=e.document.createElement("cvml:shape"),l.appendChild(v));v.stroked="f";v.coordsize=D;v.coordorigin=J=B-G+","+H;v.path=(N.d?"m"+N.d+"xe":"")+"m"+J+V;
v.fillcolor=F;J=v.style;J.width=I;J.height=K;if(t){J=t[0];var Y=t[1],W=n.CSS.color(J.color),U,M=e.document.createElement("cvml:shadow");M.on="t";M.color=W.color;M.offset=J.offX+","+J.offY;Y&&(U=n.CSS.color(Y.color),M.type="double",M.color2=U.color,M.offset2=Y.offX+","+Y.offY);M.opacity=W.opacity||U&&U.opacity||1;v.appendChild(M)}G+=~~(N.w||c.w)+A;++x}w.width=Math.max(Math.ceil(E.convert(g*z)),0);return q}}}());n.getTextDecoration=function(b){return{underline:"underline"===b.textDecoration,overline:"overline"===
b.textDecoration,"line-through":"line-through"===b.textDecoration}};"undefined"!=typeof c&&(c.Cufon=n);"object"!==typeof JSON&&(JSON={});(function(){function b(c){return 10>c?"0"+c:c}function c(b){f.lastIndex=0;return f.test(b)?'"'+b.replace(f,function(b){var c=q[b];return"string"===typeof c?c:"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+b+'"'}function d(b,e){var f,h,p,r,q=n,B,H=e[b];H&&"object"===typeof H&&"function"===typeof H.toJSON&&(H=H.toJSON(b));"function"===typeof w&&(H=
w.call(e,b,H));switch(typeof H){case "string":return c(H);case "number":return isFinite(H)?String(H):"null";case "boolean":case "null":return String(H);case "object":if(!H)return"null";n+=l;B=[];if("[object Array]"===Object.prototype.toString.apply(H)){r=H.length;for(f=0;f<r;f+=1)B[f]=d(f,H)||"null";p=0===B.length?"[]":n?"[\n"+n+B.join(",\n"+n)+"\n"+q+"]":"["+B.join(",")+"]";n=q;return p}if(w&&"object"===typeof w)for(r=w.length,f=0;f<r;f+=1)"string"===typeof w[f]&&(h=w[f],(p=d(h,H))&&B.push(c(h)+
(n?": ":":")+p));else for(h in H)Object.prototype.hasOwnProperty.call(H,h)&&(p=d(h,H))&&B.push(c(h)+(n?": ":":")+p);p=0===B.length?"{}":n?"{\n"+n+B.join(",\n"+n)+"\n"+q+"}":"{"+B.join(",")+"}";n=q;return p}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+b(this.getUTCMonth()+1)+"-"+b(this.getUTCDate())+"T"+b(this.getUTCHours())+":"+b(this.getUTCMinutes())+":"+b(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=
Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var e,f,n,l,q,w;"function"!==typeof JSON.stringify&&(f=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,q={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(b,c,e){var f;l=n="";if("number"===typeof e)for(f=0;f<e;f+=1)l+=" ";else"string"===typeof e&&(l=e);if((w=c)&&"function"!==typeof c&&("object"!==
typeof c||"number"!==typeof c.length))throw Error("JSON.stringify");return d("",{"":b})});"function"!==typeof JSON.parse&&(e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,JSON.parse=function(b,c){function d(b,e){var f,g,l=b[e];if(l&&"object"===typeof l)for(f in l)Object.prototype.hasOwnProperty.call(l,f)&&(g=d(l,f),void 0!==g?l[f]=g:delete l[f]);return c.call(b,e,l)}var f;b=String(b);e.lastIndex=0;e.test(b)&&(b=b.replace(e,function(b){return"\\u"+
("0000"+b.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(b.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return f=eval("("+b+")"),"function"===typeof c?d({"":f},""):f;throw new SyntaxError("JSON.parse");})})();(function(){function b(c,d){this.__eventListeners[c]&&(d?e.util.removeFromArray(this.__eventListeners[c],d):this.__eventListeners[c].length=0)}function c(b,
d){this.__eventListeners||(this.__eventListeners={});if(1===arguments.length)for(var e in b)this.on(e,b[e]);else this.__eventListeners[b]||(this.__eventListeners[b]=[]),this.__eventListeners[b].push(d);return this}function d(c,e){if(this.__eventListeners){if(0===arguments.length)this.__eventListeners={};else if(1===arguments.length&&"object"===typeof arguments[0])for(var f in c)b.call(this,f,c[f]);else b.call(this,c,e);return this}}function p(b,c){if(this.__eventListeners){var d=this.__eventListeners[b];
if(d){for(var e=0,f=d.length;e<f;e++)d[e].call(this,c||{});return this}}}e.Observable={observe:c,stopObserving:d,fire:p,on:c,off:d,trigger:p}})();e.Collection={add:function(){this._objects.push.apply(this._objects,arguments);for(var b=0,c=arguments.length;b<c;b++)this._onObjectAdded(arguments[b]);this.renderOnAddRemove&&this.renderAll();return this},insertAt:function(b,c,d){var e=this.getObjects();d?e[c]=b:e.splice(c,0,b);this._onObjectAdded(b);this.renderOnAddRemove&&this.renderAll();return this},
remove:function(){for(var b=this.getObjects(),c,d=0,e=arguments.length;d<e;d++)c=b.indexOf(arguments[d]),-1!==c&&(b.splice(c,1),this._onObjectRemoved(arguments[d]));this.renderOnAddRemove&&this.renderAll();return this},forEachObject:function(b,c){for(var d=this.getObjects(),e=d.length;e--;)b.call(c,d[e],e,d);return this},getObjects:function(b){return"undefined"===typeof b?this._objects:this._objects.filter(function(c){return c.type===b})},item:function(b){return this.getObjects()[b]},isEmpty:function(){return 0===
this.getObjects().length},size:function(){return this.getObjects().length},contains:function(b){return-1<this.getObjects().indexOf(b)},complexity:function(){return this.getObjects().reduce(function(b,c){return b+=c.complexity?c.complexity():0},0)}};(function(c){var d=Math.sqrt,m=Math.atan2,p=Math.PI/180;e.util={removeFromArray:function(b,c){var d=b.indexOf(c);-1!==d&&b.splice(d,1);return b},getRandomInt:function(b,c){return Math.floor(Math.random()*(c-b+1))+b},degreesToRadians:function(b){return b*
p},radiansToDegrees:function(b){return b/p},rotatePoint:function(b,c,d){var g=Math.sin(d);d=Math.cos(d);b.subtractEquals(c);return(new e.Point(b.x*d-b.y*g,b.x*g+b.y*d)).addEquals(c)},transformPoint:function(b,c,d){return d?new e.Point(c[0]*b.x+c[1]*b.y,c[2]*b.x+c[3]*b.y):new e.Point(c[0]*b.x+c[1]*b.y+c[4],c[2]*b.x+c[3]*b.y+c[5])},invertTransform:function(b){var c=b.slice(),c=1/(b[0]*b[3]-b[1]*b[2]),c=[c*b[3],-c*b[1],-c*b[2],c*b[0],0,0];b=e.util.transformPoint({x:b[4],y:b[5]},c);c[4]=-b.x;c[5]=-b.y;
return c},toFixed:function(b,c){return parseFloat(Number(b).toFixed(c))},parseUnit:function(b){var c=/\D{0,2}$/.exec(b);b=parseFloat(b);switch(c[0]){case "mm":return b*e.DPI/25.4;case "cm":return b*e.DPI/2.54;case "in":return b*e.DPI;case "pt":return b*e.DPI/72;case "pc":return b*e.DPI/72*12;default:return b}},falseFunction:function(){return!1},getKlass:function(b,c){b=e.util.string.camelize(b.charAt(0).toUpperCase()+b.slice(1));return e.util.resolveNamespace(c)[b]},resolveNamespace:function(b){if(!b)return e;
b=b.split(".");for(var d=b.length,g=c||e.window,m=0;m<d;++m)g=g[b[m]];return g},loadImage:function(b,c,d,g){if(b){var h=e.util.createImage();h.onload=function(){c&&c.call(d,h);h=h.onload=h.onerror=null};h.onerror=function(){e.log("Error loading "+h.src);c&&c.call(d,null,!0);h=h.onload=h.onerror=null};0!==b.indexOf("data")&&"undefined"!==typeof g&&(h.crossOrigin=g);h.src=b}else c&&c.call(d,b)},enlivenObjects:function(b,c,d,g){function h(){++p===n&&c&&c(m)}b=b||[];var m=[],p=0,n=b.length;n?b.forEach(function(b,
c){if(b&&b.type){var p=e.util.getKlass(b.type,d);p.async?p.fromObject(b,function(d,e){e||(m[c]=d,g&&g(b,m[c]));h()}):(m[c]=p.fromObject(b),g&&g(b,m[c]),h())}else h()}):c&&c(m)},groupSVGElements:function(b,c,d){b=new e.PathGroup(b,c);"undefined"!==typeof d&&b.setSourcePath(d);return b},populateWithProperties:function(b,c,d){if(d&&"[object Array]"===Object.prototype.toString.call(d))for(var e=0,f=d.length;e<f;e++)d[e]in b&&(c[d[e]]=b[d[e]])},drawDashedLine:function(b,c,e,f,h,p){f-=c;var n=h-e;h=d(f*
f+n*n);f=m(n,f);var n=p.length,E=0,A=!0;b.save();b.translate(c,e);b.moveTo(0,0);b.rotate(f);for(c=0;h>c;)c+=p[E++%n],c>h&&(c=h),b[A?"lineTo":"moveTo"](c,0),A=!A;b.restore()},createCanvasElement:function(b){b||(b=e.document.createElement("canvas"));b.getContext||"undefined"===typeof G_vmlCanvasManager||G_vmlCanvasManager.initElement(b);return b},createImage:function(){return e.isLikelyNode?new (b("canvas").Image):e.document.createElement("img")},createAccessors:function(b){b=b.prototype;for(var c=
b.stateProperties.length;c--;){var d=b.stateProperties[c],e=d.charAt(0).toUpperCase()+d.slice(1),f="set"+e,e="get"+e;b[e]||(b[e]=new Function('return this.get("'+d+'")'));b[f]||(b[f]=new Function("value",'return this.set("'+d+'", value)'))}},clipContext:function(b,c){c.save();c.beginPath();b.clipTo(c);c.clip()},multiplyTransformMatrices:function(b,c){for(var d=[[b[0],b[2],b[4]],[b[1],b[3],b[5]],[0,0,1]],e=[[c[0],c[2],c[4]],[c[1],c[3],c[5]],[0,0,1]],f=[],g=0;3>g;g++){f[g]=[];for(var h=0;3>h;h++){for(var m=
0,p=0;3>p;p++)m+=d[g][p]*e[p][h];f[g][h]=m}}return[f[0][0],f[1][0],f[0][1],f[1][1],f[0][2],f[1][2]]},getFunctionBody:function(b){return(String(b).match(/function[^{]*\{([\s\S]*)\}/)||{})[1]},isTransparent:function(b,c,d,e){0<e&&(c=c>e?c-e:0,d=d>e?d-e:0);var f=!0;b=b.getImageData(c,d,2*e||1,2*e||1);c=3;for(d=b.data.length;c<d&&(f=0>=b.data[c],!1!==f);c+=4);return f}}})("undefined"!==typeof c?c:this);(function(){function b(e,f,h,r,v,E,A){var K=n.call(arguments);if(p[K])return p[K];var F=Math.PI,z=F/
180*A,B=Math.sin(z),z=Math.cos(z),H=0,G=0;h=Math.abs(h);r=Math.abs(r);var I=-z*e-B*f,N=-z*f+B*e,L=h*h,x=r*r,S=N*N,D=I*I,J=4*L*x-L*S-x*D,V=0;0>J?(L=Math.sqrt(1-.25*J/(L*x)),h*=L,r*=L):V=(v===E?-.5:.5)*Math.sqrt(J/(L*S+x*D));S=V*h*N/r;D=-V*r*I/h;V=z*S-B*D+e/2;L=B*S+z*D+f/2;x=d(1,0,(I-S)/h,(N-D)/r);N=d((I-S)/h,(N-D)/r,(-I-S)/h,(-N-D)/r);0===E&&0<N?N-=2*F:1===E&&0>N&&(N+=2*F);F=Math.ceil(Math.abs(N/(.5*F)));I=[];N/=F;S=8/3*Math.sin(N/4)*Math.sin(N/4)/Math.sin(N/2);D=x+N;for(J=0;J<F;J++)I[J]=c(x,D,z,B,
h,r,V,L,S,H,G),H=I[J][4],G=I[J][5],x+=N,D+=N;return p[K]=I}function c(b,d,e,f,g,h,m,p,F,z,B){var H=n.call(arguments);if(r[H])return r[H];var G=Math.cos(b),I=Math.sin(b),N=Math.cos(d),L=Math.sin(d),x=e*g*N-f*h*L+m,S=f*g*N+e*h*L+p;r[H]=[z+F*(-e*g*I-f*h*G),B+F*(-f*g*I+e*h*G),x+F*(e*g*L+f*h*N),S+F*(f*g*L-e*h*N),x,S];return r[H]}function d(b,c,e,f){b=Math.atan2(c,b);e=Math.atan2(f,e);return e>=b?e-b:2*Math.PI-(b-e)}var p={},r={},n=Array.prototype.join;e.util.drawArc=function(c,d,e,f){var g=[[],[],[],[]];
f=b(f[5]-d,f[6]-e,f[0],f[1],f[3],f[4],f[2]);for(var m=0,p=f.length;m<p;m++)g[m][0]=f[m][0]+d,g[m][1]=f[m][1]+e,g[m][2]=f[m][2]+d,g[m][3]=f[m][3]+e,g[m][4]=f[m][4]+d,g[m][5]=f[m][5]+e,c.bezierCurveTo.apply(c,g[m])}})();(function(){function b(c,d,e){if(c&&0!==c.length){var f=c.length-1,g=d?c[f][d]:c[f];if(d)for(;f--;)e(c[f][d],g)&&(g=c[f][d]);else for(;f--;)e(c[f],g)&&(g=c[f]);return g}}var c=Array.prototype.slice;e.util.array={invoke:function(b,d){for(var e=c.call(arguments,2),f=[],l=0,h=b.length;l<
h;l++)f[l]=e.length?b[l][d].apply(b[l],e):b[l][d].call(b[l]);return f},min:function(c,d){return b(c,d,function(b,c){return b<c})},max:function(c,d){return b(c,d,function(b,c){return b>=c})}}})();(function(){function b(c,d){for(var e in d)c[e]=d[e];return c}e.util.object={extend:b,clone:function(c){return b({},c)}}})();(function(){e.util.string={camelize:function(b){return b.replace(/-+(.)?/g,function(b,c){return c?c.toUpperCase():""})},capitalize:function(b,c){return b.charAt(0).toUpperCase()+(c?
b.slice(1):b.slice(1).toLowerCase())},escapeXml:function(b){return b.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}}})();(function(){function b(){}function c(b){var e=this.constructor.superclass.prototype[b];return 1<arguments.length?e.apply(this,d.call(arguments,1)):e.call(this)}var d=Array.prototype.slice,p=function(){},r=function(){for(var b in{toString:1})if("toString"===b)return!1;return!0}(),n=function(b,c,d){for(var e in c)e in
b.prototype&&"function"===typeof b.prototype[e]&&-1<(c[e]+"").indexOf("callSuper")?b.prototype[e]=function(b){return function(){var e=this.constructor.superclass;this.constructor.superclass=d;var f=c[b].apply(this,arguments);this.constructor.superclass=e;if("initialize"!==b)return f}}(e):b.prototype[e]=c[e],r&&(c.toString!==Object.prototype.toString&&(b.prototype.toString=c.toString),c.valueOf!==Object.prototype.valueOf&&(b.prototype.valueOf=c.valueOf))};e.util.createClass=function(){function e(){this.initialize.apply(this,
arguments)}var f=null,r=d.call(arguments,0);"function"===typeof r[0]&&(f=r.shift());e.superclass=f;e.subclasses=[];f&&(b.prototype=f.prototype,e.prototype=new b,f.subclasses.push(e));for(var u=0,v=r.length;u<v;u++)n(e,r[u],f);e.prototype.initialize||(e.prototype.initialize=p);e.prototype.constructor=e;e.prototype.callSuper=c;return e}})();(function(){function b(c){var d=Array.prototype.slice.call(arguments,1),e,f,g=d.length;for(f=0;f<g;f++)if(e=typeof c[d[f]],!/^(?:function|object|unknown)$/.test(e))return!1;
return!0}function c(b,d){return function(c){d.call(r(b),c||e.window.event)}}function d(b,c){return function(d){if(v[b]&&v[b][c])for(var g=v[b][c],l=0,h=g.length;l<h;l++)g[l].call(this,d||e.window.event)}}function p(b,c,d){var e="touchend"===b.type?"changedTouches":"touches";return b[e]&&b[e][0]?b[e][0][c]-(b[e][0][c]-b[e][0][d])||b[d]:b[d]}var r,n,l=function(){var b=0;return function(c){return c.__uniqueID||(c.__uniqueID="uniqueID__"+b++)}}();(function(){var b={};r=function(c){return b[c]};n=function(c,
d){b[c]=d}})();var q=b(e.document.documentElement,"addEventListener","removeEventListener")&&b(e.window,"addEventListener","removeEventListener"),w=b(e.document.documentElement,"attachEvent","detachEvent")&&b(e.window,"attachEvent","detachEvent"),u={},v={};q?(q=function(b,c,d){b.addEventListener(c,d,!1)},w=function(b,c,d){b.removeEventListener(c,d,!1)}):w?(q=function(b,d,e){var f=l(b);n(f,b);u[f]||(u[f]={});u[f][d]||(u[f][d]=[]);e={handler:e,wrappedHandler:c(f,e)};u[f][d].push(e);b.attachEvent("on"+
d,e.wrappedHandler)},w=function(b,c,d){var e=l(b),f;if(u[e]&&u[e][c])for(var g=0,h=u[e][c].length;g<h;g++)(f=u[e][c][g])&&f.handler===d&&(b.detachEvent("on"+c,f.wrappedHandler),u[e][c][g]=null)}):(q=function(b,c,e){var f=l(b);v[f]||(v[f]={});if(!v[f][c]){v[f][c]=[];var g=b["on"+c];g&&v[f][c].push(g);b["on"+c]=d(f,c)}v[f][c].push(e)},w=function(b,c,d){b=l(b);if(v[b]&&v[b][c]){c=v[b][c];b=0;for(var e=c.length;b<e;b++)c[b]===d&&c.splice(b,1)}});e.util.addListener=q;e.util.removeListener=w;var E=function(b){return"unknown"!==
typeof b.clientX?b.clientX:0},A=function(b){return"unknown"!==typeof b.clientY?b.clientY:0};e.isTouchSupported&&(E=function(b){return p(b,"pageX","clientX")},A=function(b){return p(b,"pageY","clientY")});e.util.getPointer=function(b,c){b||(b=e.window.event);var d=e.util.getScrollLeftTop(b.target||("unknown"!==typeof b.srcElement?b.srcElement:null),c);return{x:E(b)+d.left,y:A(b)+d.top}};e.util.object.extend(e.util,e.Observable)})();(function(){var b=e.document.createElement("div"),c="string"===typeof b.style.filter,
d=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,p=function(b){return b};"string"===typeof b.style.opacity?p=function(b,c){b.style.opacity=c;return b}:c&&(p=function(b,c){var e=b.style;b.currentStyle&&!b.currentStyle.hasLayout&&(e.zoom=1);d.test(e.filter)?e.filter=e.filter.replace(d,.9999<=c?"":"alpha(opacity="+100*c+")"):e.filter+=" alpha(opacity="+100*c+")";return b});e.util.setStyle=function(b,c){var d=b.style;if(!d)return b;if("string"===typeof c)return b.style.cssText+=";"+c,-1<c.indexOf("opacity")?
p(b,c.match(/opacity:\s*(\d?\.?\d*)/)[1]):b;for(var e in c)"opacity"===e?p(b,c[e]):d["float"===e||"cssFloat"===e?"undefined"===typeof d.styleFloat?"cssFloat":"styleFloat":e]=c[e];return b}})();(function(){function b(c,d){var g=e.document.createElement(c),h;for(h in d)"class"===h?g.className=d[h]:"for"===h?g.htmlFor=d[h]:g.setAttribute(h,d[h]);return g}var c=Array.prototype.slice,d,p=function(b){return c.call(b,0)};try{d=p(e.document.childNodes)instanceof Array}catch(r){}d||(p=function(b){for(var c=
Array(b.length),d=b.length;d--;)c[d]=b[d];return c});var n;n=e.document.defaultView&&e.document.defaultView.getComputedStyle?function(b,c){return e.document.defaultView.getComputedStyle(b,null)[c]}:function(b,c){var d=b.style[c];!d&&b.currentStyle&&(d=b.currentStyle[c]);return d};(function(){var b=e.document.documentElement.style,c="userSelect"in b?"userSelect":"MozUserSelect"in b?"MozUserSelect":"WebkitUserSelect"in b?"WebkitUserSelect":"KhtmlUserSelect"in b?"KhtmlUserSelect":"";e.util.makeElementUnselectable=
function(b){"undefined"!==typeof b.onselectstart&&(b.onselectstart=e.util.falseFunction);c?b.style[c]="none":"string"===typeof b.unselectable&&(b.unselectable="on");return b};e.util.makeElementSelectable=function(b){"undefined"!==typeof b.onselectstart&&(b.onselectstart=null);c?b.style[c]="":"string"===typeof b.unselectable&&(b.unselectable="");return b}})();(function(){e.util.getScript=function(b,c){var d=e.document.getElementsByTagName("head")[0],g=e.document.createElement("script"),h=!0;g.onload=
g.onreadystatechange=function(b){!h||"string"===typeof this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(h=!1,c(b||e.window.event),g=g.onload=g.onreadystatechange=null)};g.src=b;d.appendChild(g)}})();e.util.getById=function(b){return"string"===typeof b?e.document.getElementById(b):b};e.util.toArray=p;e.util.makeElement=b;e.util.addClass=function(b,c){b&&-1===(" "+b.className+" ").indexOf(" "+c+" ")&&(b.className+=(b.className?" ":"")+c)};e.util.wrapElement=function(c,d,e){"string"===
typeof d&&(d=b(d,e));c.parentNode&&c.parentNode.replaceChild(d,c);d.appendChild(c);return d};e.util.getScrollLeftTop=function(b,c){var d,g,h=0,m=0,p=e.document.documentElement,r=e.document.body||{scrollLeft:0,scrollTop:0};for(g=b;b&&b.parentNode&&!d;)b=b.parentNode,b!==e.document&&"fixed"===e.util.getElementStyle(b,"position")&&(d=b),b!==e.document&&g!==c&&"absolute"===e.util.getElementStyle(b,"position")?m=h=0:b===e.document?(h=r.scrollLeft||p.scrollLeft||0,m=r.scrollTop||p.scrollTop||0):(h+=b.scrollLeft||
0,m+=b.scrollTop||0);return{left:h,top:m}};e.util.getElementOffset=function(b){var c;c=b&&b.ownerDocument;var d={left:0,top:0},g={left:0,top:0},h={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!c)return{left:0,top:0};for(var m in h)g[h[m]]+=parseInt(n(b,m),10)||0;c=c.documentElement;"undefined"!==typeof b.getBoundingClientRect&&(d=b.getBoundingClientRect());b=e.util.getScrollLeftTop(b,null);return{left:d.left+b.left-(c.clientLeft||0)+g.left,top:d.top+b.top-(c.clientTop||
0)+g.top}};e.util.getElementStyle=n})();(function(){function b(c,d){return c+(/\?/.test(c)?"&":"?")+d}function c(){}var d=function(){for(var b=[function(){return new ActiveXObject("Microsoft.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP.3.0")},function(){return new XMLHttpRequest}],c=b.length;c--;)try{if(b[c]())return b[c]}catch(d){}}();e.util.request=function(e,f){f||(f={});var n=f.method?f.method.toUpperCase():"GET",l=f.onComplete||
function(){},q=d(),w;q.onreadystatechange=function(){4===q.readyState&&(l(q),q.onreadystatechange=c)};"GET"===n&&(w=null,"string"===typeof f.parameters&&(e=b(e,f.parameters)));q.open(n,e,!0);"POST"!==n&&"PUT"!==n||q.setRequestHeader("Content-Type","application/x-www-form-urlencoded");q.send(w);return q}})();e.log=function(){};e.warn=function(){};"undefined"!==typeof console&&["log","warn"].forEach(function(b){"undefined"!==typeof console[b]&&console[b].apply&&(e[b]=function(){return console[b].apply(console,
arguments)})});(function(b){function c(b){return b in I?I[b]:b}function d(b,c,e){var f="[object Array]"===Object.prototype.toString.call(c),g;"fill"!==b&&"stroke"!==b||"none"!==c?"fillRule"===b?c="evenodd"===c?"destination-over":c:"strokeDashArray"===b?c=c.replace(/,/g," ").split(/\s+/).map(function(b){return parseInt(b)}):"transformMatrix"===b?c=e&&e.transformMatrix?G(e.transformMatrix,A.parseTransformAttribute(c)):A.parseTransformAttribute(c):"visible"===b?(c="none"===c||"hidden"===c?!1:!0,e&&!1===
e.visible&&(c=!1)):"originX"===b?c="start"===c?"left":"end"===c?"right":"center":g=f?c.map(H):H(c):c="";return!f&&isNaN(g)?c:g}function e(b){for(var c in N)if(b[c]&&"undefined"!==typeof b[N[c]]&&0!==b[c].indexOf("url(")){var d=new A.Color(b[c]);b[c]=d.setAlpha(B(d.getAlpha()*b[N[c]],2)).toRgba()}return b}function f(b,c){var d=b.match(/(normal|italic)?\s*(normal|small-caps)?\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\s*(\d+)px(?:\/(normal|[\d\.]+))?\s+(.*)/);if(d){var e=d[1],
g=d[3],l=d[4],h=d[5],d=d[6];e&&(c.fontStyle=e);g&&(c.fontWeight=isNaN(parseFloat(g))?g:parseFloat(g));l&&(c.fontSize=parseFloat(l));d&&(c.fontFamily=d);h&&(c.lineHeight="normal"===h?1:h)}}function n(b,e){var l,h;b.replace(/;$/,"").split(";").forEach(function(b){b=b.split(":");l=c(b[0].trim().toLowerCase());h=d(l,b[1].trim());"font"===l?f(h,e):e[l]=h})}function l(b){var c={},d;for(d in A.cssRules){var e=b,f=d.split(" "),g=void 0,l=!0;if((g=q(e,f.pop()))&&f.length){for(var l=f,h=void 0,m=!0;e.parentNode&&
1===e.parentNode.nodeType&&l.length;)m&&(h=l.pop()),e=e.parentNode,m=q(e,h);l=0===l.length}if(g&&l&&0===f.length)for(var p in A.cssRules[d])c[p]=A.cssRules[d][p]}return c}function q(b,c){var d=b.nodeName,e=b.getAttribute("class"),f=b.getAttribute("id"),d=new RegExp("^"+d,"i");c=c.replace(d,"");f&&c.length&&(d=new RegExp("#"+f+"(?![a-zA-Z\\-]+)","i"),c=c.replace(d,""));if(e&&c.length)for(e=e.split(" "),f=e.length;f--;)d=new RegExp("\\."+e[f]+"(?![a-zA-Z\\-]+)","i"),c=c.replace(d,"");return 0===c.length}
function w(b){for(var c=b.getElementsByTagName("use");c.length;){for(var d=c[0],e=d.getAttribute("xlink:href").substr(1),f=d.getAttribute("x")||0,g=d.getAttribute("y")||0,e=b.getElementById(e).cloneNode(!0),f=(d.getAttribute("transform")||"")+" translate("+f+", "+g+")",g=0,l=d.attributes,h=l.length;g<h;g++){var m=l.item(g);"x"!==m.nodeName&&"y"!==m.nodeName&&"xlink:href"!==m.nodeName&&("transform"===m.nodeName?f=f+" "+m.nodeValue:e.setAttribute(m.nodeName,m.nodeValue))}e.setAttribute("transform",
f);e.removeAttribute("id");d.parentNode.replaceChild(e,d)}}function u(b,c){c[3]=c[0]=c[0]>c[3]?c[3]:c[0];if(1!==c[0]||1!==c[3]||0!==c[4]||0!==c[5]){for(var d=b.ownerDocument.createElement("g");null!=b.firstChild;)d.appendChild(b.firstChild);d.setAttribute("transform","matrix("+c[0]+" "+c[1]+" "+c[2]+" "+c[3]+" "+c[4]+" "+c[5]+")");b.appendChild(d)}}function v(b){var c=b.objects;b=b.options;c=c.map(function(b){return A[F(b.type)].fromObject(b)});return{objects:c,options:b}}function E(b,c,d){c[d]&&
c[d].toSVG&&b.push('<pattern x="0" y="0" id="',d,'Pattern" ','width="',c[d].source.width,'" height="',c[d].source.height,'" patternUnits="userSpaceOnUse">','<image x="0" y="0" ','width="',c[d].source.width,'" height="',c[d].source.height,'" xlink:href="',c[d].source.src,'"></image></pattern>')}var A=b.fabric||(b.fabric={}),K=A.util.object.extend,F=A.util.string.capitalize,z=A.util.object.clone,B=A.util.toFixed,H=A.util.parseUnit,G=A.util.multiplyTransformMatrices,I={cx:"left",x:"left",r:"radius",
cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","stroke-dasharray":"strokeDashArray","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"originX"},
N={stroke:"strokeOpacity",fill:"fillOpacity"};A.parseTransformAttribute=function(){function b(c,d){var e=d[0];c[0]=Math.cos(e);c[1]=Math.sin(e);c[2]=-Math.sin(e);c[3]=Math.cos(e)}function c(b,d){var e=2===d.length?d[1]:d[0];b[0]=d[0];b[3]=e}function d(b,c){b[4]=c[0];2===c.length&&(b[5]=c[1])}var e=[1,0,0,1,0,0],f=/^\s*(?:(?:(?:(?:(matrix)\s*\(\s*((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))\s*\))|(?:(translate)\s*\(\s*((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?)))?\s*\))|(?:(scale)\s*\(\s*((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?)))?\s*\))|(?:(rotate)\s*\(\s*((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?)))?\s*\))|(?:(skewX)\s*\(\s*((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))\s*\))|(?:(skewY)\s*\(\s*((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))\s*\)))(?:(?:\s+,?\s*|,\s*)(?:(?:(matrix)\s*\(\s*((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))\s*\))|(?:(translate)\s*\(\s*((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?)))?\s*\))|(?:(scale)\s*\(\s*((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?)))?\s*\))|(?:(rotate)\s*\(\s*((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?)))?\s*\))|(?:(skewX)\s*\(\s*((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))\s*\))|(?:(skewY)\s*\(\s*((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))\s*\))))*)?)\s*$/,
g=RegExp("(?:(?:(matrix)\\s*\\(\\s*((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?))\\s*\\))|(?:(translate)\\s*\\(\\s*((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?))(?:(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?)))?\\s*\\))|(?:(scale)\\s*\\(\\s*((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?))(?:(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?)))?\\s*\\))|(?:(rotate)\\s*\\(\\s*((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?))(?:(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?))(?:\\s+,?\\s*|,\\s*)((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?)))?\\s*\\))|(?:(skewX)\\s*\\(\\s*((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?))\\s*\\))|(?:(skewY)\\s*\\(\\s*((?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?))\\s*\\)))",
"g");return function(l){var h=e.concat(),m=[];if(!l||l&&!f.test(l))return h;l.replace(g,function(f){var g=/(?:(?:(matrix)\s*\(\s*((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))\s*\))|(?:(translate)\s*\(\s*((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?)))?\s*\))|(?:(scale)\s*\(\s*((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?)))?\s*\))|(?:(rotate)\s*\(\s*((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))(?:\s+,?\s*|,\s*)((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?)))?\s*\))|(?:(skewX)\s*\(\s*((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))\s*\))|(?:(skewY)\s*\(\s*((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?))\s*\)))/.exec(f).filter(function(b){return""!==
b&&null!=b});f=g[1];g=g.slice(2).map(parseFloat);switch(f){case "translate":d(h,g);break;case "rotate":g[0]=A.util.degreesToRadians(g[0]);b(h,g);break;case "scale":c(h,g);break;case "skewX":h[2]=g[0];break;case "skewY":h[1]=g[0];break;case "matrix":h=g}m.push(h.concat());h=e.concat()});for(l=m[0];1<m.length;)m.shift(),l=A.util.multiplyTransformMatrices(l,m[0]);return l}}();A.parseSVGDocument=function(){var b=/^(path|circle|polygon|polyline|ellipse|rect|line|image|text)$/,c=/^\s*((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?)+)\s*,?\s*((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?)+)\s*,?\s*((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?)+)\s*,?\s*((?:[-+]?(?:\d+|\d*\.\d+)(?:e[-+]?\d+)?)+)\s*$/;
return function(d,e,f){if(d){var g=new Date;w(d);var l=d.getAttribute("viewBox"),h=H(d.getAttribute("width")||"100%"),m=H(d.getAttribute("height")||"100%"),p,r;if(l&&(l=l.match(c))){var q=parseFloat(l[1]),n=parseFloat(l[2]),t=1,v=1;p=parseFloat(l[3]);r=parseFloat(l[4]);h&&h!==p&&(t=h/p);m&&m!==r&&(v=m/r);u(d,[t,0,0,v,t*-q,v*-n])}l=A.util.toArray(d.getElementsByTagName("*"));if(0===l.length&&A.isLikelyNode){l=d.selectNodes('//*[name(.)!="svg"]');q=[];n=0;for(t=l.length;n<t;n++)q[n]=l[n];l=q}l=l.filter(function(c){var d;
if(d=b.test(c.tagName)){a:{for(d=/^(?:pattern|defs)$/;c&&(c=c.parentNode);)if(d.test(c.nodeName)){c=!0;break a}c=!1}d=!c}return d});if(!l||l&&!l.length)e&&e([],{});else{var B={width:h?h:p,height:m?m:r,widthAttr:h,heightAttr:m};A.gradientDefs=A.getGradientDefs(d);A.cssRules=A.getCSSRules(d);A.parseElements(l,function(b){A.documentParsingTime=new Date-g;e&&e(b,B)},z(B),f)}}}}();var L={has:function(b,c){c(!1)},get:function(){},set:function(){}};K(A,{getGradientDefs:function(b){var c=b.getElementsByTagName("linearGradient"),
d=b.getElementsByTagName("radialGradient"),e,f=0,g,l=[];b={};var h={};l.length=c.length+d.length;for(e=c.length;e--;)l[f++]=c[e];for(e=d.length;e--;)l[f++]=d[e];for(;f--;)c=l[f],d=c.getAttribute("xlink:href"),g=c.getAttribute("id"),d&&(h[g]=d.substr(1)),b[g]=c;for(g in h)for(f=b[h[g]].cloneNode(!0),c=b[g];f.firstChild;)c.appendChild(f.firstChild);return b},parseAttributes:function(b,f){if(b){var h,r={};b.parentNode&&/^symbol|[g|a]$/i.test(b.parentNode.nodeName)&&(r=A.parseAttributes(b.parentNode,
f));var q=f.reduce(function(e,f){if(h=b.getAttribute(f))f=c(f),h=d(f,h,r),e[f]=h;return e},{}),q=K(q,K(l(b),A.parseStyleAttribute(b)));return e(K(r,q))}},parseElements:function(b,c,d,e){(new A.ElementsParser(b,c,d,e)).parse()},parseStyleAttribute:function(b){var e={};b=b.getAttribute("style");if(!b)return e;if("string"===typeof b)n(b,e);else{var l,h,p;for(p in b)"undefined"!==typeof b[p]&&(l=c(p.toLowerCase()),h=d(l,b[p]),"font"===l?f(h,e):e[l]=h)}return e},parsePointsAttribute:function(b){if(!b)return null;
b=b.replace(/,/g," ").trim();b=b.split(/\s+/);var c=[],d,e;d=0;for(e=b.length;d<e;d+=2)c.push({x:parseFloat(b[d]),y:parseFloat(b[d+1])});return c},getCSSRules:function(b){b=b.getElementsByTagName("style");for(var e={},f,l=0,h=b.length;l<h;l++)f=b[0].textContent,f=f.replace(/\/\*[\s\S]*?\*\//g,""),f=f.match(/[^{]*\{[\s\S]*?\}/g),f=f.map(function(b){return b.trim()}),f.forEach(function(b){b=b.match(/([\s\S]*?)\s*\{([^}]*)\}/);for(var f={},l=b[2].trim().replace(/;$/,"").split(/\s*;\s*/),h=0,p=l.length;h<
p;h++){var r=l[h].split(/\s*:\s*/),q=c(r[0]),r=d(q,r[1],r[0]);f[q]=r}b=b[1];b.split(",").forEach(function(b){e[b.trim()]=A.util.object.clone(f)})});return e},loadSVGFromURL:function(b,c,d){function e(f){var g=f.responseXML;g&&!g.documentElement&&A.window.ActiveXObject&&f.responseText&&(g=new ActiveXObject("Microsoft.XMLDOM"),g.async="false",g.loadXML(f.responseText.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,"")));g&&g.documentElement&&A.parseSVGDocument(g.documentElement,function(d,e){L.set(b,{objects:A.util.array.invoke(d,
"toObject"),options:e});c(d,e)},d)}b=b.replace(/^\n\s*/,"").trim();L.has(b,function(d){d?L.get(b,function(b){b=v(b);c(b.objects,b.options)}):new A.util.request(b,{method:"get",onComplete:e})})},loadSVGFromString:function(b,c,d){b=b.trim();var e;if("undefined"!==typeof DOMParser){var f=new DOMParser;f&&f.parseFromString&&(e=f.parseFromString(b,"text/xml"))}else A.window.ActiveXObject&&(e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(b.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,
"")));A.parseSVGDocument(e.documentElement,function(b,d){c(b,d)},d)},createSVGFontFacesMarkup:function(b){for(var c="",d=0,e=b.length;d<e;d++)"text"===b[d].type&&b[d].path&&(c+=["@font-face {font-family: ",b[d].fontFamily,"; src: url('",b[d].path,"')}"].join(""));c&&(c=['<style type="text/css"><![CDATA[',c,"]]\x3e</style>"].join(""));return c},createSVGRefElementsMarkup:function(b){var c=[];E(c,b,"backgroundColor");E(c,b,"overlayColor");return c.join("")}})})("undefined"!==typeof c?c:this);e.ElementsParser=
function(b,c,d,e){this.elements=b;this.callback=c;this.options=d;this.reviver=e};e.ElementsParser.prototype.parse=function(){this.instances=Array(this.elements.length);this.numElements=this.elements.length;this.createObjects()};e.ElementsParser.prototype.createObjects=function(){for(var b=0,c=this.elements.length;b<c;b++)(function(b,c){setTimeout(function(){b.createObject(b.elements[c],c)},0)})(this,b)};e.ElementsParser.prototype.createObject=function(b,c){var d=e[e.util.string.capitalize(b.tagName)];
if(d&&d.fromElement)try{this._createObject(d,b,c)}catch(p){e.log(p)}else this.checkIfDone()};e.ElementsParser.prototype._createObject=function(b,c,d){b.async?b.fromElement(c,this.createCallback(d,c),this.options):(b=b.fromElement(c,this.options),this.resolveGradient(b,"fill"),this.resolveGradient(b,"stroke"),this.reviver&&this.reviver(c,b),this.instances[d]=b,this.checkIfDone())};e.ElementsParser.prototype.createCallback=function(b,c){var d=this;return function(e){d.resolveGradient(e,"fill");d.resolveGradient(e,
"stroke");d.reviver&&d.reviver(c,e);d.instances[b]=e;d.checkIfDone()}};e.ElementsParser.prototype.resolveGradient=function(b,c){var d=b.get(c);/^url\(/.test(d)&&(d=d.slice(5,d.length-1),e.gradientDefs[d]&&b.set(c,e.Gradient.fromElement(e.gradientDefs[d],b)))};e.ElementsParser.prototype.checkIfDone=function(){0===--this.numElements&&(this.instances=this.instances.filter(function(b){return null!=b}),this.callback(this.instances))};(function(b){function c(b,d){this.x=b;this.y=d}b=b.fabric||(b.fabric=
{});b.Point?b.warn("fabric.Point is already defined"):(b.Point=c,c.prototype={constructor:c,add:function(b){return new c(this.x+b.x,this.y+b.y)},addEquals:function(b){this.x+=b.x;this.y+=b.y;return this},scalarAdd:function(b){return new c(this.x+b,this.y+b)},scalarAddEquals:function(b){this.x+=b;this.y+=b;return this},subtract:function(b){return new c(this.x-b.x,this.y-b.y)},subtractEquals:function(b){this.x-=b.x;this.y-=b.y;return this},scalarSubtract:function(b){return new c(this.x-b,this.y-b)},
scalarSubtractEquals:function(b){this.x-=b;this.y-=b;return this},multiply:function(b){return new c(this.x*b,this.y*b)},multiplyEquals:function(b){this.x*=b;this.y*=b;return this},divide:function(b){return new c(this.x/b,this.y/b)},divideEquals:function(b){this.x/=b;this.y/=b;return this},eq:function(b){return this.x===b.x&&this.y===b.y},lt:function(b){return this.x<b.x&&this.y<b.y},lte:function(b){return this.x<=b.x&&this.y<=b.y},gt:function(b){return this.x>b.x&&this.y>b.y},gte:function(b){return this.x>=
b.x&&this.y>=b.y},lerp:function(b,d){return new c(this.x+(b.x-this.x)*d,this.y+(b.y-this.y)*d)},distanceFrom:function(b){var c=this.x-b.x;b=this.y-b.y;return Math.sqrt(c*c+b*b)},midPointFrom:function(b){return new c(this.x+(b.x-this.x)/2,this.y+(b.y-this.y)/2)},min:function(b){return new c(Math.min(this.x,b.x),Math.min(this.y,b.y))},max:function(b){return new c(Math.max(this.x,b.x),Math.max(this.y,b.y))},toString:function(){return this.x+","+this.y},setXY:function(b,c){this.x=b;this.y=c},setFromPoint:function(b){this.x=
b.x;this.y=b.y},swap:function(b){var c=this.x,d=this.y;this.x=b.x;this.y=b.y;b.x=c;b.y=d}})})("undefined"!==typeof c?c:this);(function(b){function c(b){this.status=b;this.points=[]}var d=b.fabric||(b.fabric={});d.Intersection?d.warn("fabric.Intersection is already defined"):(d.Intersection=c,d.Intersection.prototype={appendPoint:function(b){this.points.push(b)},appendPoints:function(b){this.points=this.points.concat(b)}},d.Intersection.intersectLineLine=function(b,e,f,l){var h,n=(l.x-f.x)*(b.y-f.y)-
(l.y-f.y)*(b.x-f.x);h=(e.x-b.x)*(b.y-f.y)-(e.y-b.y)*(b.x-f.x);f=(l.y-f.y)*(e.x-b.x)-(l.x-f.x)*(e.y-b.y);0!==f?(n/=f,h/=f,0<=n&&1>=n&&0<=h&&1>=h?(h=new c("Intersection"),h.points.push(new d.Point(b.x+n*(e.x-b.x),b.y+n*(e.y-b.y)))):h=new c):h=0===n||0===h?new c("Coincident"):new c("Parallel");return h},d.Intersection.intersectLinePolygon=function(b,d,e){for(var f=new c,h=e.length,m=0;m<h;m++){var n=c.intersectLineLine(b,d,e[m],e[(m+1)%h]);f.appendPoints(n.points)}0<f.points.length&&(f.status="Intersection");
return f},d.Intersection.intersectPolygonPolygon=function(b,d){for(var e=new c,f=b.length,h=0;h<f;h++){var m=c.intersectLinePolygon(b[h],b[(h+1)%f],d);e.appendPoints(m.points)}0<e.points.length&&(e.status="Intersection");return e},d.Intersection.intersectPolygonRectangle=function(b,e,f){var l=e.min(f),h=e.max(f);f=new d.Point(h.x,l.y);var n=new d.Point(l.x,h.y);e=c.intersectLinePolygon(l,f,b);f=c.intersectLinePolygon(f,h,b);h=c.intersectLinePolygon(h,n,b);b=c.intersectLinePolygon(n,l,b);l=new c;l.appendPoints(e.points);
l.appendPoints(f.points);l.appendPoints(h.points);l.appendPoints(b.points);0<l.points.length&&(l.status="Intersection");return l})})("undefined"!==typeof c?c:this);(function(b){function c(b){b?this._tryParsingColor(b):this.setSource([0,0,0,1])}function d(b,c,e){0>e&&(e+=1);1<e&&(e-=1);return e<1/6?b+6*(c-b)*e:.5>e?c:e<2/3?b+(c-b)*(2/3-e)*6:b}var e=b.fabric||(b.fabric={});e.Color?e.warn("fabric.Color is already defined."):(e.Color=c,e.Color.prototype={_tryParsingColor:function(b){var d;b in c.colorNameMap&&
(b=c.colorNameMap[b]);"transparent"===b?this.setSource([255,255,255,0]):((d=c.sourceFromHex(b))||(d=c.sourceFromRgb(b)),d||(d=c.sourceFromHsl(b)),d&&this.setSource(d))},_rgbToHsl:function(b,c,d){b/=255;c/=255;d/=255;var f,g,h,m=e.util.array.max([b,c,d]);g=e.util.array.min([b,c,d]);h=(m+g)/2;if(m===g)f=g=0;else{var n=m-g;g=.5<h?n/(2-m-g):n/(m+g);switch(m){case b:f=(c-d)/n+(c<d?6:0);break;case c:f=(d-b)/n+2;break;case d:f=(b-c)/n+4}f/=6}return[Math.round(360*f),Math.round(100*g),Math.round(100*h)]},
getSource:function(){return this._source},setSource:function(b){this._source=b},toRgb:function(){var b=this.getSource();return"rgb("+b[0]+","+b[1]+","+b[2]+")"},toRgba:function(){var b=this.getSource();return"rgba("+b[0]+","+b[1]+","+b[2]+","+b[3]+")"},toHsl:function(){var b=this.getSource(),b=this._rgbToHsl(b[0],b[1],b[2]);return"hsl("+b[0]+","+b[1]+"%,"+b[2]+"%)"},toHsla:function(){var b=this.getSource(),c=this._rgbToHsl(b[0],b[1],b[2]);return"hsla("+c[0]+","+c[1]+"%,"+c[2]+"%,"+b[3]+")"},toHex:function(){var b=
this.getSource(),c,d;c=b[0].toString(16);c=1===c.length?"0"+c:c;d=b[1].toString(16);d=1===d.length?"0"+d:d;b=b[2].toString(16);b=1===b.length?"0"+b:b;return c.toUpperCase()+d.toUpperCase()+b.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(b){var c=this.getSource();c[3]=b;this.setSource(c);return this},toGrayscale:function(){var b=this.getSource(),c=parseInt((.3*b[0]+.59*b[1]+.11*b[2]).toFixed(0),10);this.setSource([c,c,c,b[3]]);return this},toBlackWhite:function(b){var c=
this.getSource(),d=(.3*c[0]+.59*c[1]+.11*c[2]).toFixed(0),c=c[3],d=Number(d)<Number(b||127)?0:255;this.setSource([d,d,d,c]);return this},overlayWith:function(b){b instanceof c||(b=new c(b));var d=[],e=this.getAlpha(),f=this.getSource();b=b.getSource();for(var h=0;3>h;h++)d.push(Math.round(.5*f[h]+.5*b[h]));d[3]=e;this.setSource(d);return this}},e.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/,e.Color.reHSLa=
/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/,e.Color.reHex=/^#?([0-9a-f]{6}|[0-9a-f]{3})$/i,e.Color.colorNameMap={aqua:"#00FFFF",black:"#000000",blue:"#0000FF",fuchsia:"#FF00FF",gray:"#808080",green:"#008000",lime:"#00FF00",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#FFA500",purple:"#800080",red:"#FF0000",silver:"#C0C0C0",teal:"#008080",white:"#FFFFFF",yellow:"#FFFF00"},e.Color.fromRgb=function(b){return c.fromSource(c.sourceFromRgb(b))},
e.Color.sourceFromRgb=function(b){if(b=b.match(c.reRGBa)){var d=parseInt(b[1],10)/(/%$/.test(b[1])?100:1)*(/%$/.test(b[1])?255:1),e=parseInt(b[2],10)/(/%$/.test(b[2])?100:1)*(/%$/.test(b[2])?255:1),f=parseInt(b[3],10)/(/%$/.test(b[3])?100:1)*(/%$/.test(b[3])?255:1);return[parseInt(d,10),parseInt(e,10),parseInt(f,10),b[4]?parseFloat(b[4]):1]}},e.Color.fromRgba=c.fromRgb,e.Color.fromHsl=function(b){return c.fromSource(c.sourceFromHsl(b))},e.Color.sourceFromHsl=function(b){if(b=b.match(c.reHSLa)){var e=
(parseFloat(b[1])%360+360)%360/360,f=parseFloat(b[2])/(/%$/.test(b[2])?100:1),h=parseFloat(b[3])/(/%$/.test(b[3])?100:1);if(0===f)h=f=e=h;else var p=.5>=h?h*(f+1):h+f-h*f,n=2*h-p,h=d(n,p,e+1/3),f=d(n,p,e),e=d(n,p,e-1/3);return[Math.round(255*h),Math.round(255*f),Math.round(255*e),b[4]?parseFloat(b[4]):1]}},e.Color.fromHsla=c.fromHsl,e.Color.fromHex=function(b){return c.fromSource(c.sourceFromHex(b))},e.Color.sourceFromHex=function(b){if(b.match(c.reHex)){var d=b.slice(b.indexOf("#")+1),e=3===d.length;
b=e?d.charAt(0)+d.charAt(0):d.substring(0,2);var f=e?d.charAt(1)+d.charAt(1):d.substring(2,4),d=e?d.charAt(2)+d.charAt(2):d.substring(4,6);return[parseInt(b,16),parseInt(f,16),parseInt(d,16),1]}},e.Color.fromSource=function(b){var d=new c;d.setSource(b);return d})})("undefined"!==typeof c?c:this);(function(){function b(c){var d=c.getAttribute("style"),g=c.getAttribute("offset"),h,l,g=parseFloat(g)/(/%$/.test(g)?100:1),g=0>g?0:1<g?1:g;if(d){d=d.split(/\s*;\s*/);""===d[d.length-1]&&d.pop();for(var q=
d.length;q--;){var n=d[q].split(/\s*:\s*/),u=n[0].trim(),n=n[1].trim();"stop-color"===u?h=n:"stop-opacity"===u&&(l=n)}}h||(h=c.getAttribute("stop-color")||"rgb(0,0,0)");l||(l=c.getAttribute("stop-opacity"));h=new e.Color(h);c=h.getAlpha();l=isNaN(parseFloat(l))?1:parseFloat(l);l*=c;return{offset:g,color:h.toRgb(),opacity:l}}function c(b,d,e){var f,g=0,h=1,n="",u;for(u in d){f=parseFloat(d[u],10);h="string"===typeof d[u]&&/^\d+%$/.test(d[u])?.01:1;if("x1"===u||"x2"===u||"r2"===u)h*="objectBoundingBox"===
e?b.width:1,g="objectBoundingBox"===e?b.left||0:0;else if("y1"===u||"y2"===u)h*="objectBoundingBox"===e?b.height:1,g="objectBoundingBox"===e?b.top||0:0;d[u]=f*h+g}"ellipse"===b.type&&null!==d.r2&&"objectBoundingBox"===e&&b.rx!==b.ry&&(b=b.ry/b.rx,n=" scale(1, "+b+")",d.y1&&(d.y1/=b),d.y2&&(d.y2/=b));return n}e.Gradient=e.util.createClass({offsetX:0,offsetY:0,initialize:function(b){b||(b={});var c={};this.id=e.Object.__uid++;this.type=b.type||"linear";c={x1:b.coords.x1||0,y1:b.coords.y1||0,x2:b.coords.x2||
0,y2:b.coords.y2||0};"radial"===this.type&&(c.r1=b.coords.r1||0,c.r2=b.coords.r2||0);this.coords=c;this.colorStops=b.colorStops.slice();b.gradientTransform&&(this.gradientTransform=b.gradientTransform);this.offsetX=b.offsetX||this.offsetX;this.offsetY=b.offsetY||this.offsetY},addColorStop:function(b){for(var c in b){var d=new e.Color(b[c]);this.colorStops.push({offset:c,color:d.toRgb(),opacity:d.getAlpha()})}return this},toObject:function(){return{type:this.type,coords:this.coords,colorStops:this.colorStops,
offsetX:this.offsetX,offsetY:this.offsetY}},toSVG:function(b){var c=e.util.object.clone(this.coords),d;this.colorStops.sort(function(b,c){return b.offset-c.offset});if(!b.group||"path-group"!==b.group.type)for(var g in c)if("x1"===g||"x2"===g||"r2"===g)c[g]+=this.offsetX-b.width/2;else if("y1"===g||"y2"===g)c[g]+=this.offsetY-b.height/2;b='id="SVGID_'+this.id+'" gradientUnits="userSpaceOnUse"';this.gradientTransform&&(b+=' gradientTransform="matrix('+this.gradientTransform.join(" ")+')" ');"linear"===
this.type?d=["<linearGradient ",b,' x1="',c.x1,'" y1="',c.y1,'" x2="',c.x2,'" y2="',c.y2,'">\n']:"radial"===this.type&&(d=["<radialGradient ",b,' cx="',c.x2,'" cy="',c.y2,'" r="',c.r2,'" fx="',c.x1,'" fy="',c.y1,'">\n']);for(c=0;c<this.colorStops.length;c++)d.push("<stop ",'offset="',100*this.colorStops[c].offset+"%",'" style="stop-color:',this.colorStops[c].color,null!=this.colorStops[c].opacity?";stop-opacity: "+this.colorStops[c].opacity:";",'"/>\n');d.push("linear"===this.type?"</linearGradient>\n":
"</radialGradient>\n");return d.join("")},toLive:function(b){var c;if(this.type){"linear"===this.type?c=b.createLinearGradient(this.coords.x1,this.coords.y1,this.coords.x2,this.coords.y2):"radial"===this.type&&(c=b.createRadialGradient(this.coords.x1,this.coords.y1,this.coords.r1,this.coords.x2,this.coords.y2,this.coords.r2));b=0;for(var d=this.colorStops.length;b<d;b++){var g=this.colorStops[b].color,l=this.colorStops[b].opacity,h=this.colorStops[b].offset;"undefined"!==typeof l&&(g=(new e.Color(g)).setAlpha(l).toRgba());
c.addColorStop(parseFloat(h),g)}return c}}});e.util.object.extend(e.Gradient,{fromElement:function(d,p){var r=d.getElementsByTagName("stop"),n="linearGradient"===d.nodeName?"linear":"radial",l=d.getAttribute("gradientUnits")||"objectBoundingBox",q=d.getAttribute("gradientTransform"),w=[],u={};"linear"===n?u={x1:d.getAttribute("x1")||0,y1:d.getAttribute("y1")||0,x2:d.getAttribute("x2")||"100%",y2:d.getAttribute("y2")||0}:"radial"===n&&(u={x1:d.getAttribute("fx")||d.getAttribute("cx")||"50%",y1:d.getAttribute("fy")||
d.getAttribute("cy")||"50%",r1:0,x2:d.getAttribute("cx")||"50%",y2:d.getAttribute("cy")||"50%",r2:d.getAttribute("r")||"50%"});for(var v=r.length;v--;)w.push(b(r[v]));r=c(p,u,l);n=new e.Gradient({type:n,coords:u,colorStops:w,offsetX:-p.left,offsetY:-p.top});if(q||""!==r)n.gradientTransform=e.parseTransformAttribute((q||"")+r);return n},forObject:function(b,d){d||(d={});c(b,d.coords,"userSpaceOnUse");return new e.Gradient(d)}})})();e.Pattern=e.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,
initialize:function(b){b||(b={});this.id=e.Object.__uid++;if(b.source)if("string"===typeof b.source)if("undefined"!==typeof e.util.getFunctionBody(b.source))this.source=new Function(e.util.getFunctionBody(b.source));else{var c=this;this.source=e.util.createImage();e.util.loadImage(b.source,function(b){c.source=b})}else this.source=b.source;b.repeat&&(this.repeat=b.repeat);b.offsetX&&(this.offsetX=b.offsetX);b.offsetY&&(this.offsetY=b.offsetY)},toObject:function(){var b;"function"===typeof this.source?
b=String(this.source):"string"===typeof this.source.src&&(b=this.source.src);return{source:b,repeat:this.repeat,offsetX:this.offsetX,offsetY:this.offsetY}},toSVG:function(b){var c="function"===typeof this.source?this.source():this.source,d=c.width/b.getWidth();b=c.height/b.getHeight();var e="";c.src?e=c.src:c.toDataURL&&(e=c.toDataURL());return'<pattern id="SVGID_'+this.id+'" x="'+this.offsetX+'" y="'+this.offsetY+'" width="'+d+'" height="'+b+'"><image x="0" y="0" width="'+c.width+'" height="'+c.height+
'" xlink:href="'+e+'"></image></pattern>'},toLive:function(b){var c="function"===typeof this.source?this.source():this.source;return c&&("undefined"===typeof c.src||c.complete&&0!==c.naturalWidth&&0!==c.naturalHeight)?b.createPattern(c,this.repeat):""}});(function(b){var c=b.fabric||(b.fabric={});c.Shadow?c.warn("fabric.Shadow is already defined."):(c.Shadow=c.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,initialize:function(b){"string"===
typeof b&&(b=this._parseShadow(b));for(var d in b)this[d]=b[d];this.id=c.Object.__uid++},_parseShadow:function(b){b=b.trim();var d=c.Shadow.reOffsetsAndBlur.exec(b)||[];return{color:(b.replace(c.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:parseInt(d[1],10)||0,offsetY:parseInt(d[2],10)||0,blur:parseInt(d[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(b){var c="SourceAlpha";!b||b.fill!==this.color&&b.stroke!==this.color||
(c="SourceGraphic");return'<filter id="SVGID_'+this.id+'" y="-40%" height="180%"><feGaussianBlur in="'+c+'" stdDeviation="'+(this.blur?this.blur/3:0)+'"></feGaussianBlur><feOffset dx="'+this.offsetX+'" dy="'+this.offsetY+'"></feOffset><feMerge><feMergeNode></feMergeNode><feMergeNode in="SourceGraphic"></feMergeNode></feMerge></filter>'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY};var b={},d=c.Shadow.prototype;this.color!==
d.color&&(b.color=this.color);this.blur!==d.blur&&(b.blur=this.blur);this.offsetX!==d.offsetX&&(b.offsetX=this.offsetX);this.offsetY!==d.offsetY&&(b.offsetY=this.offsetY);return b}}),c.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:px)?(?:\s?|$))?(-?\d+(?:px)?(?:\s?|$))?(\d+(?:px)?)?(?:\s?|$)(?:$|\s)/)})("undefined"!==typeof c?c:this);(function(){if(e.StaticCanvas)e.warn("fabric.StaticCanvas is already defined.");else{var b=e.util.object.extend,c=e.util.getElementOffset,d=e.util.removeFromArray,p=Error("Could not initialize `canvas` element");
e.StaticCanvas=e.util.createClass({initialize:function(b,c){c||(c={});this._initStatic(b,c);e.StaticCanvas.activeInstance=this},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!0,renderOnAddRemove:!0,clipTo:null,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:[1,0,0,1,0,0],onBeforeScaleRotate:function(){},_initStatic:function(b,c){this._objects=[];this._createLowerCanvas(b);this._initOptions(c);this._setImageSmoothing();
c.overlayImage&&this.setOverlayImage(c.overlayImage,this.renderAll.bind(this));c.backgroundImage&&this.setBackgroundImage(c.backgroundImage,this.renderAll.bind(this));c.backgroundColor&&this.setBackgroundColor(c.backgroundColor,this.renderAll.bind(this));c.overlayColor&&this.setOverlayColor(c.overlayColor,this.renderAll.bind(this));this.calcOffset()},calcOffset:function(){this._offset=c(this.lowerCanvasEl);return this},setOverlayImage:function(b,c,d){return this.__setBgOverlayImage("overlayImage",
b,c,d)},setBackgroundImage:function(b,c,d){return this.__setBgOverlayImage("backgroundImage",b,c,d)},setOverlayColor:function(b,c){return this.__setBgOverlayColor("overlayColor",b,c)},setBackgroundColor:function(b,c){return this.__setBgOverlayColor("backgroundColor",b,c)},_setImageSmoothing:function(){var b=this.getContext();b.imageSmoothingEnabled=this.imageSmoothingEnabled;b.webkitImageSmoothingEnabled=this.imageSmoothingEnabled;b.mozImageSmoothingEnabled=this.imageSmoothingEnabled;b.msImageSmoothingEnabled=
this.imageSmoothingEnabled;b.oImageSmoothingEnabled=this.imageSmoothingEnabled},__setBgOverlayImage:function(b,c,d,g){"string"===typeof c?e.util.loadImage(c,function(c){this[b]=new e.Image(c,g);d&&d()},this):(this[b]=c,d&&d());return this},__setBgOverlayColor:function(b,c,d){if(c&&c.source){var g=this;e.util.loadImage(c.source,function(h){g[b]=new e.Pattern({source:h,repeat:c.repeat,offsetX:c.offsetX,offsetY:c.offsetY});d&&d()})}else this[b]=c,d&&d();return this},_createCanvasElement:function(){var b=
e.document.createElement("canvas");b.style||(b.style={});if(!b)throw p;this._initCanvasElement(b);return b},_initCanvasElement:function(b){e.util.createCanvasElement(b);if("undefined"===typeof b.getContext)throw p;},_initOptions:function(b){for(var c in b)this[c]=b[c];this.width=this.width||parseInt(this.lowerCanvasEl.width,10)||0;this.height=this.height||parseInt(this.lowerCanvasEl.height,10)||0;this.lowerCanvasEl.style&&(this.lowerCanvasEl.width=this.width,this.lowerCanvasEl.height=this.height,
this.lowerCanvasEl.style.width=this.width+"px",this.lowerCanvasEl.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(b){this.lowerCanvasEl=e.util.getById(b)||this._createCanvasElement();this._initCanvasElement(this.lowerCanvasEl);e.util.addClass(this.lowerCanvasEl,"lower-canvas");this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl);this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},
getHeight:function(){return this.height},setWidth:function(b,c){return this.setDimensions({width:b},c)},setHeight:function(b,c){return this.setDimensions({height:b},c)},setDimensions:function(b,c){var d;c=c||{};for(var e in b)d=b[e],c.cssOnly||(this._setBackstoreDimension(e,b[e]),d+="px"),c.backstoreOnly||this._setCssDimension(e,d);c.cssOnly||this.renderAll();this.calcOffset();return this},_setBackstoreDimension:function(b,c){this.lowerCanvasEl[b]=c;this.upperCanvasEl&&(this.upperCanvasEl[b]=c);this.cacheCanvasEl&&
(this.cacheCanvasEl[b]=c);this[b]=c;return this},_setCssDimension:function(b,c){this.lowerCanvasEl.style[b]=c;this.upperCanvasEl&&(this.upperCanvasEl.style[b]=c);this.wrapperEl&&(this.wrapperEl.style[b]=c);return this},getZoom:function(){return Math.sqrt(this.viewportTransform[0]*this.viewportTransform[3])},setViewportTransform:function(b){this.viewportTransform=b;this.renderAll();b=0;for(var c=this._objects.length;b<c;b++)this._objects[b].setCoords();return this},zoomToPoint:function(b,c){var d=
b;b=e.util.transformPoint(b,e.util.invertTransform(this.viewportTransform));this.viewportTransform[0]=c;this.viewportTransform[3]=c;var g=e.util.transformPoint(b,this.viewportTransform);this.viewportTransform[4]+=d.x-g.x;this.viewportTransform[5]+=d.y-g.y;this.renderAll();d=0;for(g=this._objects.length;d<g;d++)this._objects[d].setCoords();return this},setZoom:function(b){this.zoomToPoint(new e.Point(0,0),b);return this},absolutePan:function(b){this.viewportTransform[4]=-b.x;this.viewportTransform[5]=
-b.y;this.renderAll();b=0;for(var c=this._objects.length;b<c;b++)this._objects[b].setCoords();return this},relativePan:function(b){return this.absolutePan(new e.Point(-b.x-this.viewportTransform[4],-b.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},getActiveObject:function(){return null},getActiveGroup:function(){return null},_draw:function(b,c){if(c){b.save();var d=this.viewportTransform;b.transform(d[0],d[1],d[2],d[3],d[4],d[5]);c.render(b);b.restore();this.controlsAboveOverlay||
c._renderControls(b)}},_onObjectAdded:function(b){this.stateful&&b.setupState();b.canvas=this;b.setCoords();this.fire("object:added",{target:b});b.fire("added")},_onObjectRemoved:function(b){this.getActiveObject()===b&&(this.fire("before:selection:cleared",{target:b}),this._discardActiveObject(),this.fire("selection:cleared"));this.fire("object:removed",{target:b});b.fire("removed")},clearContext:function(b){b.clearRect(0,0,this.width,this.height);return this},getContext:function(){return this.contextContainer},
clear:function(){this._objects.length=0;this.discardActiveGroup&&this.discardActiveGroup();this.discardActiveObject&&this.discardActiveObject();this.clearContext(this.contextContainer);this.contextTop&&this.clearContext(this.contextTop);this.fire("canvas:cleared");this.renderAll();return this},renderAll:function(b){var c=this[!0===b&&this.interactive?"contextTop":"contextContainer"],d=this.getActiveGroup();this.contextTop&&this.selection&&!this._groupSelector&&this.clearContext(this.contextTop);b||
this.clearContext(c);this.fire("before:render");this.clipTo&&e.util.clipContext(this,c);this._renderBackground(c);this._renderObjects(c,d);this._renderActiveGroup(c,d);this.clipTo&&c.restore();this._renderOverlay(c);this.controlsAboveOverlay&&this.interactive&&this.drawControls(c);this.fire("after:render");return this},_renderObjects:function(b,c){var d,e;if(c)for(d=0,e=this._objects.length;d<e;++d)this._objects[d]&&!c.contains(this._objects[d])&&this._draw(b,this._objects[d]);else for(d=0,e=this._objects.length;d<
e;++d)this._draw(b,this._objects[d])},_renderActiveGroup:function(b,c){if(c){var d=[];this.forEachObject(function(b){c.contains(b)&&d.push(b)});c._set("objects",d);this._draw(b,c)}},_renderBackground:function(b){this.backgroundColor&&(b.fillStyle=this.backgroundColor.toLive?this.backgroundColor.toLive(b):this.backgroundColor,b.fillRect(this.backgroundColor.offsetX||0,this.backgroundColor.offsetY||0,this.width,this.height));this.backgroundImage&&this._draw(b,this.backgroundImage)},_renderOverlay:function(b){this.overlayColor&&
(b.fillStyle=this.overlayColor.toLive?this.overlayColor.toLive(b):this.overlayColor,b.fillRect(this.overlayColor.offsetX||0,this.overlayColor.offsetY||0,this.width,this.height));this.overlayImage&&this._draw(b,this.overlayImage)},renderTop:function(){var b=this.contextTop||this.contextContainer;this.clearContext(b);this.selection&&this._groupSelector&&this._drawSelection();var c=this.getActiveGroup();c&&c.render(b);this._renderOverlay(b);this.fire("after:render");return this},getCenter:function(){return{top:this.getHeight()/
2,left:this.getWidth()/2}},centerObjectH:function(b){this._centerObject(b,new e.Point(this.getCenter().left,b.getCenterPoint().y));this.renderAll();return this},centerObjectV:function(b){this._centerObject(b,new e.Point(b.getCenterPoint().x,this.getCenter().top));this.renderAll();return this},centerObject:function(b){var c=this.getCenter();this._centerObject(b,new e.Point(c.left,c.top));this.renderAll();return this},_centerObject:function(b,c){b.setPositionByOrigin(c,"center","center");return this},
toDatalessJSON:function(b){return this.toDatalessObject(b)},toObject:function(b){return this._toObjectMethod("toObject",b)},toDatalessObject:function(b){return this._toObjectMethod("toDatalessObject",b)},_toObjectMethod:function(c,d){var g=this.getActiveGroup();g&&this.discardActiveGroup();var m={objects:this._toObjects(c,d)};b(m,this.__serializeBgOverlay());e.util.populateWithProperties(this,m,d);g&&(this.setActiveGroup(new e.Group(g.getObjects(),{originX:"center",originY:"center"})),g.forEachObject(function(b){b.set("active",
!0)}),this._currentTransform&&(this._currentTransform.target=this.getActiveGroup()));return m},_toObjects:function(b,c){return this.getObjects().map(function(d){return this._toObject(d,b,c)},this)},_toObject:function(b,c,d){var e;this.includeDefaultValues||(e=b.includeDefaultValues,b.includeDefaultValues=!1);c=b[c](d);this.includeDefaultValues||(b.includeDefaultValues=e);return c},__serializeBgOverlay:function(){var b={background:this.backgroundColor&&this.backgroundColor.toObject?this.backgroundColor.toObject():
this.backgroundColor};this.overlayColor&&(b.overlay=this.overlayColor.toObject?this.overlayColor.toObject():this.overlayColor);this.backgroundImage&&(b.backgroundImage=this.backgroundImage.toObject());this.overlayImage&&(b.overlayImage=this.overlayImage.toObject());return b},svgViewportTransformation:!0,toSVG:function(b,c){b||(b={});var d=[];this._setSVGPreamble(d,b);this._setSVGHeader(d,b);this._setSVGBgOverlayColor(d,"backgroundColor");this._setSVGBgOverlayImage(d,"backgroundImage");this._setSVGObjects(d,
c);this._setSVGBgOverlayColor(d,"overlayColor");this._setSVGBgOverlayImage(d,"overlayImage");d.push("</svg>");return d.join("")},_setSVGPreamble:function(b,c){c.suppressPreamble||b.push('<?xml version="1.0" encoding="',c.encoding||"UTF-8",'" standalone="no" ?>','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(b,c){var d,g,h;c.viewBox?(d=c.viewBox.width,g=c.viewBox.height):(d=this.width,g=this.height,this.svgViewportTransformation||
(h=this.viewportTransform,d/=h[0],g/=h[3]));b.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',d,'" ','height="',g,'" ',this.backgroundColor&&!this.backgroundColor.toLive?'style="background-color: '+this.backgroundColor+'" ':null,c.viewBox?'viewBox="'+c.viewBox.x+" "+c.viewBox.y+" "+c.viewBox.width+" "+c.viewBox.height+'" ':null,'xml:space="preserve">',"<desc>Created with Fabric.js ",e.version,"</desc>","<defs>",e.createSVGFontFacesMarkup(this.getObjects()),
e.createSVGRefElementsMarkup(this),"</defs>")},_setSVGObjects:function(b,c){var d=this.getActiveGroup();d&&this.discardActiveGroup();for(var g=0,h=this.getObjects(),m=h.length;g<m;g++)b.push(h[g].toSVG(c));d&&(this.setActiveGroup(new e.Group(d.getObjects())),d.forEachObject(function(b){b.set("active",!0)}))},_setSVGBgOverlayImage:function(b,c){this[c]&&this[c].toSVG&&b.push(this[c].toSVG())},_setSVGBgOverlayColor:function(b,c){this[c]&&this[c].source?b.push('<rect x="',this[c].offsetX,'" y="',this[c].offsetY,
'" ','width="',"repeat-y"===this[c].repeat||"no-repeat"===this[c].repeat?this[c].source.width:this.width,'" height="',"repeat-x"===this[c].repeat||"no-repeat"===this[c].repeat?this[c].source.height:this.height,'" fill="url(#'+c+'Pattern)"',"></rect>"):this[c]&&"overlayColor"===c&&b.push('<rect x="0" y="0" ','width="',this.width,'" height="',this.height,'" fill="',this[c],'"',"></rect>")},sendToBack:function(b){d(this._objects,b);this._objects.unshift(b);return this.renderAll&&this.renderAll()},bringToFront:function(b){d(this._objects,
b);this._objects.push(b);return this.renderAll&&this.renderAll()},sendBackwards:function(b,c){var e=this._objects.indexOf(b);0!==e&&(e=this._findNewLowerIndex(b,e,c),d(this._objects,b),this._objects.splice(e,0,b),this.renderAll&&this.renderAll());return this},_findNewLowerIndex:function(b,c,d){if(d)for(d=c,c-=1;0<=c;--c){if(b.intersectsWithObject(this._objects[c])||b.isContainedWithinObject(this._objects[c])||this._objects[c].isContainedWithinObject(b)){d=c;break}}else d=c-1;return d},bringForward:function(b,
c){var e=this._objects.indexOf(b);e!==this._objects.length-1&&(e=this._findNewUpperIndex(b,e,c),d(this._objects,b),this._objects.splice(e,0,b),this.renderAll&&this.renderAll());return this},_findNewUpperIndex:function(b,c,d){if(d)for(d=c,c+=1;c<this._objects.length;++c){if(b.intersectsWithObject(this._objects[c])||b.isContainedWithinObject(this._objects[c])||this._objects[c].isContainedWithinObject(b)){d=c;break}}else d=c+1;return d},moveTo:function(b,c){d(this._objects,b);this._objects.splice(c,
0,b);return this.renderAll&&this.renderAll()},dispose:function(){this.clear();this.interactive&&this.removeListeners();return this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this.getObjects().length+" }>"}});b(e.StaticCanvas.prototype,e.Observable);b(e.StaticCanvas.prototype,e.Collection);b(e.StaticCanvas.prototype,e.DataURLExporter);b(e.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(b){var c=e.util.createCanvasElement();
if(!c||!c.getContext)return null;var d=c.getContext("2d");if(!d)return null;switch(b){case "getImageData":return"undefined"!==typeof d.getImageData;case "setLineDash":return"undefined"!==typeof d.setLineDash;case "toDataURL":return"undefined"!==typeof c.toDataURL;case "toDataURLWithQuality":try{return c.toDataURL("image/jpeg",0),!0}catch(g){}return!1;default:return null}}});e.StaticCanvas.prototype.toJSON=e.StaticCanvas.prototype.toObject}})();e.BaseBrush=e.util.createClass({color:"rgb(0, 0, 0)",
width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",setShadow:function(b){this.shadow=new e.Shadow(b);return this},_setBrushStyles:function(){var b=this.canvas.contextTop;b.strokeStyle=this.color;b.lineWidth=this.width;b.lineCap=this.strokeLineCap;b.lineJoin=this.strokeLineJoin},_setShadow:function(){if(this.shadow){var b=this.canvas.contextTop;b.shadowColor=this.shadow.color;b.shadowBlur=this.shadow.blur;b.shadowOffsetX=this.shadow.offsetX;b.shadowOffsetY=this.shadow.offsetY}},_resetShadow:function(){var b=
this.canvas.contextTop;b.shadowColor="";b.shadowBlur=b.shadowOffsetX=b.shadowOffsetY=0}});(function(){var b=e.util.array.min,c=e.util.array.max;e.PencilBrush=e.util.createClass(e.BaseBrush,{initialize:function(b){this.canvas=b;this._points=[]},onMouseDown:function(b){this._prepareForDrawing(b);this._captureDrawingPath(b);this._render()},onMouseMove:function(b){this._captureDrawingPath(b);this.canvas.clearContext(this.canvas.contextTop);this._render()},onMouseUp:function(){this._finalizeAndAddPath()},
_prepareForDrawing:function(b){b=new e.Point(b.x,b.y);this._reset();this._addPoint(b);this.canvas.contextTop.moveTo(b.x,b.y)},_addPoint:function(b){this._points.push(b)},_reset:function(){this._points.length=0;this._setBrushStyles();this._setShadow()},_captureDrawingPath:function(b){b=new e.Point(b.x,b.y);this._addPoint(b)},_render:function(){var b=this.canvas.contextTop,c=this.canvas.viewportTransform,d=this._points[0],e=this._points[1];b.save();b.transform(c[0],c[1],c[2],c[3],c[4],c[5]);b.beginPath();
2===this._points.length&&d.x===e.x&&d.y===e.y&&(d.x-=.5,e.x+=.5);b.moveTo(d.x,d.y);for(var c=1,f=this._points.length;c<f;c++)e=d.midPointFrom(e),b.quadraticCurveTo(d.x,d.y,e.x,e.y),d=this._points[c],e=this._points[c+1];b.lineTo(d.x,d.y);b.stroke();b.restore()},_getSVGPathData:function(){this.box=this.getPathBoundingBox(this._points);return this.convertPointsToSVGPath(this._points,this.box.minX,this.box.minY)},getPathBoundingBox:function(d){for(var e=[],f=[],n=d[0],l=d[1],q=n,w=1,u=d.length;w<u;w++){var v=
n.midPointFrom(l);e.push(q.x);e.push(v.x);f.push(q.y);f.push(v.y);n=d[w];l=d[w+1];q=v}e.push(n.x);f.push(n.y);return{minX:b(e),minY:b(f),maxX:c(e),maxY:c(f)}},convertPointsToSVGPath:function(b,c,d){var g=[],l=new e.Point(b[0].x-c,b[0].y-d),h=new e.Point(b[1].x-c,b[1].y-d);g.push("M ",b[0].x-c," ",b[0].y-d," ");for(var n=1,u=b.length;n<u;n++){var v=l.midPointFrom(h);g.push("Q ",l.x," ",l.y," ",v.x," ",v.y," ");l=new e.Point(b[n].x-c,b[n].y-d);n+1<b.length&&(h=new e.Point(b[n+1].x-c,b[n+1].y-d))}g.push("L ",
l.x," ",l.y," ");return g},createPath:function(b){b=new e.Path(b);b.fill=null;b.stroke=this.color;b.strokeWidth=this.width;b.strokeLineCap=this.strokeLineCap;b.strokeLineJoin=this.strokeLineJoin;this.shadow&&(this.shadow.affectStroke=!0,b.setShadow(this.shadow));return b},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath();var b=this._getSVGPathData().join("");if("M 0 0 Q 0 0 0 0 L 0 0"===b)this.canvas.renderAll();else{var c=this.box.minX+(this.box.maxX-this.box.minX)/2,d=this.box.minY+
(this.box.maxY-this.box.minY)/2;this.canvas.contextTop.arc(c,d,3,0,2*Math.PI,!1);b=this.createPath(b);b.set({left:c,top:d,originX:"center",originY:"center"});this.canvas.add(b);b.setCoords();this.canvas.clearContext(this.canvas.contextTop);this._resetShadow();this.canvas.renderAll();this.canvas.fire("path:created",{path:b})}}})})();e.CircleBrush=e.util.createClass(e.BaseBrush,{width:10,initialize:function(b){this.canvas=b;this.points=[]},drawDot:function(b){b=this.addPoint(b);var c=this.canvas.contextTop,
d=this.canvas.viewportTransform;c.save();c.transform(d[0],d[1],d[2],d[3],d[4],d[5]);c.fillStyle=b.fill;c.beginPath();c.arc(b.x,b.y,b.radius,0,2*Math.PI,!1);c.closePath();c.fill();c.restore()},onMouseDown:function(b){this.points.length=0;this.canvas.clearContext(this.canvas.contextTop);this._setShadow();this.drawDot(b)},onMouseMove:function(b){this.drawDot(b)},onMouseUp:function(){var b=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var c=[],d=0,p=this.points.length;d<p;d++){var r=
this.points[d],r=new e.Circle({radius:r.radius,left:r.x,top:r.y,originX:"center",originY:"center",fill:r.fill});this.shadow&&r.setShadow(this.shadow);c.push(r)}c=new e.Group(c,{originX:"center",originY:"center"});c.canvas=this.canvas;this.canvas.add(c);this.canvas.fire("path:created",{path:c});this.canvas.clearContext(this.canvas.contextTop);this._resetShadow();this.canvas.renderOnAddRemove=b;this.canvas.renderAll()},addPoint:function(b){b=new e.Point(b.x,b.y);var c=e.util.getRandomInt(Math.max(0,
this.width-20),this.width+20)/2,d=(new e.Color(this.color)).setAlpha(e.util.getRandomInt(0,100)/100).toRgba();b.radius=c;b.fill=d;this.points.push(b);return b}});e.SprayBrush=e.util.createClass(e.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(b){this.canvas=b;this.sprayChunks=[]},onMouseDown:function(b){this.sprayChunks.length=0;this.canvas.clearContext(this.canvas.contextTop);this._setShadow();this.addSprayChunk(b);this.render()},
onMouseMove:function(b){this.addSprayChunk(b);this.render()},onMouseUp:function(){var b=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var c=[],d=0,p=this.sprayChunks.length;d<p;d++)for(var r=this.sprayChunks[d],n=0,l=r.length;n<l;n++){var q=new e.Rect({width:r[n].width,height:r[n].width,left:r[n].x+1,top:r[n].y+1,originX:"center",originY:"center",fill:this.color});this.shadow&&q.setShadow(this.shadow);c.push(q)}this.optimizeOverlapping&&(c=this._getOptimizedRects(c));c=new e.Group(c,
{originX:"center",originY:"center"});c.canvas=this.canvas;this.canvas.add(c);this.canvas.fire("path:created",{path:c});this.canvas.clearContext(this.canvas.contextTop);this._resetShadow();this.canvas.renderOnAddRemove=b;this.canvas.renderAll()},_getOptimizedRects:function(b){for(var c={},d,e=0,f=b.length;e<f;e++)d=b[e].left+""+b[e].top,c[d]||(c[d]=b[e]);b=[];for(d in c)b.push(c[d]);return b},render:function(){var b=this.canvas.contextTop;b.fillStyle=this.color;var c=this.canvas.viewportTransform;
b.save();b.transform(c[0],c[1],c[2],c[3],c[4],c[5]);for(var c=0,d=this.sprayChunkPoints.length;c<d;c++){var e=this.sprayChunkPoints[c];"undefined"!==typeof e.opacity&&(b.globalAlpha=e.opacity);b.fillRect(e.x,e.y,e.width,e.width)}b.restore()},addSprayChunk:function(b){this.sprayChunkPoints=[];for(var c,d,p,r=this.width/2,n=0;n<this.density;n++)c=e.util.getRandomInt(b.x-r,b.x+r),d=e.util.getRandomInt(b.y-r,b.y+r),p=this.dotWidthVariance?e.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),
this.dotWidth+this.dotWidthVariance):this.dotWidth,c=new e.Point(c,d),c.width=p,this.randomOpacity&&(c.opacity=e.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(c);this.sprayChunks.push(this.sprayChunkPoints)}});e.PatternBrush=e.util.createClass(e.PencilBrush,{getPatternSrc:function(){var b=e.document.createElement("canvas"),c=b.getContext("2d");b.width=b.height=25;c.fillStyle=this.color;c.beginPath();c.arc(10,10,10,0,2*Math.PI,!1);c.closePath();c.fill();return b},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",
'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles");this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(b){b=this.callSuper("createPath",b);b.stroke=new e.Pattern({source:this.source||this.getPatternSrcFunction()});return b}});e.util.object.extend(e.StaticCanvas.prototype,{toDataURL:function(b){b||(b={});var c=b.format||"png",d=b.quality||
1,e=b.multiplier||1;b={left:b.left,top:b.top,width:b.width,height:b.height};return 1!==e?this.__toDataURLWithMultiplier(c,d,b,e):this.__toDataURL(c,d,b)},__toDataURL:function(b,c,d){this.renderAll(!0);var p=this.upperCanvasEl||this.lowerCanvasEl;d=this.__getCroppedCanvas(p,d);"jpg"===b&&(b="jpeg");b=e.StaticCanvas.supports("toDataURLWithQuality")?(d||p).toDataURL("image/"+b,c):(d||p).toDataURL("image/"+b);this.contextTop&&this.clearContext(this.contextTop);this.renderAll();return b},__getCroppedCanvas:function(b,
c){var d,p;if("left"in c||"top"in c||"width"in c||"height"in c)d=e.util.createCanvasElement(),p=d.getContext("2d"),d.width=c.width||this.width,d.height=c.height||this.height,p.drawImage(b,-c.left||0,-c.top||0);return d},__toDataURLWithMultiplier:function(b,c,d,e){var f=this.getWidth(),n=this.getHeight(),l=f*e,q=n*e,w=this.getActiveObject(),u=this.getActiveGroup(),v=this.contextTop||this.contextContainer;1<e&&this.setWidth(l).setHeight(q);v.scale(e,e);d.left&&(d.left*=e);d.top&&(d.top*=e);d.width?
d.width*=e:1>e&&(d.width=l);d.height?d.height*=e:1>e&&(d.height=q);u?this._tempRemoveBordersControlsFromGroup(u):w&&this.deactivateAll&&this.deactivateAll();this.renderAll(!0);b=this.__toDataURL(b,c,d);this.width=f;this.height=n;v.scale(1/e,1/e);this.setWidth(f).setHeight(n);u?this._restoreBordersControlsOnGroup(u):w&&this.setActiveObject&&this.setActiveObject(w);this.contextTop&&this.clearContext(this.contextTop);this.renderAll();return b},toDataURLWithMultiplier:function(b,c,d){return this.toDataURL({format:b,
multiplier:c,quality:d})},_tempRemoveBordersControlsFromGroup:function(b){b.origHasControls=b.hasControls;b.origBorderColor=b.borderColor;b.hasControls=!0;b.borderColor="rgba(0,0,0,0)";b.forEachObject(function(b){b.origBorderColor=b.borderColor;b.borderColor="rgba(0,0,0,0)"})},_restoreBordersControlsOnGroup:function(b){b.hideControls=b.origHideControls;b.borderColor=b.origBorderColor;b.forEachObject(function(b){b.borderColor=b.origBorderColor;delete b.origBorderColor})}});e.util.object.extend(e.StaticCanvas.prototype,
{loadFromDatalessJSON:function(b,c,d){return this.loadFromJSON(b,c,d)},loadFromJSON:function(b,c,d){if(b){var e="string"===typeof b?JSON.parse(b):b;this.clear();var f=this;this._enlivenObjects(e.objects,function(){f._setBgOverlay(e,c)},d);return this}},_setBgOverlay:function(b,c){var d=this,e={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(b.backgroundImage||b.overlayImage||b.background||b.overlay){var f=function(){e.backgroundImage&&e.overlayImage&&e.backgroundColor&&e.overlayColor&&
(d.renderAll(),c&&c())};this.__setBgOverlay("backgroundImage",b.backgroundImage,e,f);this.__setBgOverlay("overlayImage",b.overlayImage,e,f);this.__setBgOverlay("backgroundColor",b.background,e,f);this.__setBgOverlay("overlayColor",b.overlay,e,f);f()}else c&&c()},__setBgOverlay:function(b,c,d,p){var r=this;if(c)if("backgroundImage"===b||"overlayImage"===b)e.Image.fromObject(c,function(c){r[b]=c;d[b]=!0;p&&p()});else this["set"+e.util.string.capitalize(b,!0)](c,function(){d[b]=!0;p&&p()});else d[b]=
!0},_enlivenObjects:function(b,c,d){var p=this;if(b&&0!==b.length){var r=this.renderOnAddRemove;this.renderOnAddRemove=!1;e.util.enlivenObjects(b,function(b){b.forEach(function(b,c){p.insertAt(b,c,!0)});p.renderOnAddRemove=r;c&&c()},null,d)}else c&&c()},_toDataURL:function(b,c){this.clone(function(d){c(d.toDataURL(b))})},_toDataURLWithMultiplier:function(b,c,d){this.clone(function(e){d(e.toDataURLWithMultiplier(b,c))})},clone:function(b,c){var d=JSON.stringify(this.toJSON(c));this.cloneWithoutData(function(c){c.loadFromJSON(d,
function(){b&&b(c)})})},cloneWithoutData:function(b){var c=e.document.createElement("canvas");c.width=this.getWidth();c.height=this.getHeight();var d=new e.Canvas(c);d.clipTo=this.clipTo;this.backgroundImage?(d.setBackgroundImage(this.backgroundImage.src,function(){d.renderAll();b&&b(d)}),d.backgroundImageOpacity=this.backgroundImageOpacity,d.backgroundImageStretch=this.backgroundImageStretch):b&&b(d)}});(function(b){var c=b.fabric||(b.fabric={});b=c.util.object.extend;var d=c.util.toFixed,e=c.util.string.capitalize,
f=c.util.degreesToRadians,n=c.StaticCanvas.supports("setLineDash");c.Object||(c.Object=c.util.createClass({type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,cornerSize:12,transparentCorners:!0,hoverCursor:null,padding:0,borderColor:"rgba(102,153,255,0.75)",cornerColor:"rgba(102,153,255,0.5)",centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"source-over",backgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,
strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:10,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,transformMatrix:null,minScaleLimit:.01,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,hasRotatingPoint:!0,rotatingPointOffset:40,perPixelTargetFind:!1,includeDefaultValues:!0,clipTo:null,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockUniScaling:!1,lockScalingFlip:!1,stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeLineJoin strokeMiterLimit angle opacity fill fillRule shadow clipTo visible backgroundColor".split(" "),
initialize:function(b){b&&this.setOptions(b)},_initGradient:function(b){!b.fill||!b.fill.colorStops||b.fill instanceof c.Gradient||this.set("fill",new c.Gradient(b.fill))},_initPattern:function(b){!b.fill||!b.fill.source||b.fill instanceof c.Pattern||this.set("fill",new c.Pattern(b.fill));!b.stroke||!b.stroke.source||b.stroke instanceof c.Pattern||this.set("stroke",new c.Pattern(b.stroke))},_initClipping:function(b){b.clipTo&&"string"===typeof b.clipTo&&(b=c.util.getFunctionBody(b.clipTo),"undefined"!==
typeof b&&(this.clipTo=new Function("ctx",b)))},setOptions:function(b){for(var c in b)this.set(c,b[c]);this._initGradient(b);this._initPattern(b);this._initClipping(b)},transform:function(b,c){this.group&&this.group.transform(b,c);b.globalAlpha=this.opacity;var d=c?this._getLeftTopCoords():this.getCenterPoint();b.translate(d.x,d.y);b.rotate(f(this.angle));b.scale(this.scaleX*(this.flipX?-1:1),this.scaleY*(this.flipY?-1:1))},toObject:function(b){var e=c.Object.NUM_FRACTION_DIGITS,e={type:this.type,
originX:this.originX,originY:this.originY,left:d(this.left,e),top:d(this.top,e),width:d(this.width,e),height:d(this.height,e),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:d(this.strokeWidth,e),strokeDashArray:this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:d(this.strokeMiterLimit,e),scaleX:d(this.scaleX,e),scaleY:d(this.scaleY,e),angle:d(this.getAngle(),
e),flipX:this.flipX,flipY:this.flipY,opacity:d(this.opacity,e),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,clipTo:this.clipTo&&String(this.clipTo),backgroundColor:this.backgroundColor};this.includeDefaultValues||(e=this._removeDefaultValues(e));c.util.populateWithProperties(this,e,b);return e},toDatalessObject:function(b){return this.toObject(b)},_removeDefaultValues:function(b){var d=c.util.getKlass(b.type).prototype;d.stateProperties.forEach(function(c){b[c]===
d[c]&&delete b[c]});return b},toString:function(){return"#<fabric."+e(this.type)+">"},get:function(b){return this[b]},_setObject:function(b){for(var c in b)this._set(c,b[c])},set:function(b,c){"object"===typeof b?this._setObject(b):"function"===typeof c&&"clipTo"!==b?this._set(b,c(this.get(b))):this._set(b,c);return this},_set:function(b,e){if("scaleX"===b||"scaleY"===b)e=this._constrainScale(e);"scaleX"===b&&0>e?(this.flipX=!this.flipX,e*=-1):"scaleY"===b&&0>e?(this.flipY=!this.flipY,e*=-1):"width"===
b||"height"===b?this.minScaleLimit=d(Math.min(.1,1/Math.max(this.width,this.height)),2):"shadow"!==b||!e||e instanceof c.Shadow||(e=new c.Shadow(e));this[b]=e;return this},toggle:function(b){var c=this.get(b);"boolean"===typeof c&&this.set(b,!c);return this},setSourcePath:function(b){this.sourcePath=b;return this},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:[1,0,0,1,0,0]},render:function(b,d){if(0!==this.width&&0!==this.height&&this.visible){b.save();
this._setupFillRule(b);this._transform(b,d);this._setStrokeStyles(b);this._setFillStyles(b);if(this.group&&"path-group"===this.group.type){b.translate(-this.group.width/2,-this.group.height/2);var e=this.transformMatrix;e&&b.transform.apply(b,e)}b.globalAlpha=this.group?b.globalAlpha*this.opacity:this.opacity;this._setShadow(b);this.clipTo&&c.util.clipContext(this,b);this._render(b,d);this.clipTo&&b.restore();this._removeShadow(b);this._restoreFillRule(b);b.restore()}},_transform:function(b,c){var d=
this.transformMatrix;d&&!this.group&&b.setTransform.apply(b,d);c||this.transform(b)},_setStrokeStyles:function(b){this.stroke&&(b.lineWidth=this.strokeWidth,b.lineCap=this.strokeLineCap,b.lineJoin=this.strokeLineJoin,b.miterLimit=this.strokeMiterLimit,b.strokeStyle=this.stroke.toLive?this.stroke.toLive(b):this.stroke)},_setFillStyles:function(b){this.fill&&(b.fillStyle=this.fill.toLive?this.fill.toLive(b):this.fill)},_renderControls:function(b,d){var e=this.getViewportTransform();b.save();if(this.active&&
!d){var h;this.group&&(h=c.util.transformPoint(this.group.getCenterPoint(),e),b.translate(h.x,h.y),b.rotate(f(this.group.angle)));h=c.util.transformPoint(this.getCenterPoint(),e,null!=this.group);this.group&&(h.x*=this.group.scaleX,h.y*=this.group.scaleY);b.translate(h.x,h.y);b.rotate(f(this.angle));this.drawBorders(b);this.drawControls(b)}b.restore()},_setShadow:function(b){this.shadow&&(b.shadowColor=this.shadow.color,b.shadowBlur=this.shadow.blur,b.shadowOffsetX=this.shadow.offsetX,b.shadowOffsetY=
this.shadow.offsetY)},_removeShadow:function(b){this.shadow&&(b.shadowColor="",b.shadowBlur=b.shadowOffsetX=b.shadowOffsetY=0)},_renderFill:function(b){this.fill&&(b.save(),this.fill.toLive&&b.translate(-this.width/2+this.fill.offsetX||0,-this.height/2+this.fill.offsetY||0),this.fill.gradientTransform&&b.transform.apply(b,this.fill.gradientTransform),"destination-over"===this.fillRule?b.fill("evenodd"):b.fill(),b.restore(),this.shadow&&!this.shadow.affectStroke&&this._removeShadow(b))},_renderStroke:function(b){this.stroke&&
0!==this.strokeWidth&&(b.save(),this.strokeDashArray?(1&this.strokeDashArray.length&&this.strokeDashArray.push.apply(this.strokeDashArray,this.strokeDashArray),n?(b.setLineDash(this.strokeDashArray),this._stroke&&this._stroke(b)):this._renderDashedStroke&&this._renderDashedStroke(b),b.stroke()):(this.stroke.gradientTransform&&b.transform.apply(b,this.stroke.gradientTransform),this._stroke?this._stroke(b):b.stroke()),this._removeShadow(b),b.restore())},clone:function(b,d){return this.constructor.fromObject?
this.constructor.fromObject(this.toObject(d),b):new c.Object(this.toObject(d))},cloneAsImage:function(b){var d=this.toDataURL();c.util.loadImage(d,function(d){b&&b(new c.Image(d))});return this},toDataURL:function(b){b||(b={});var d=c.util.createCanvasElement(),e=this.getBoundingRect();d.width=e.width;d.height=e.height;c.util.wrapElement(d,"div");e=new c.Canvas(d);"jpg"===b.format&&(b.format="jpeg");"jpeg"===b.format&&(e.backgroundColor="#fff");var f={active:this.get("active"),left:this.getLeft(),
top:this.getTop()};this.set("active",!1);this.setPositionByOrigin(new c.Point(d.width/2,d.height/2),"center","center");d=this.canvas;e.add(this);b=e.toDataURL(b);this.set(f).setCoords();this.canvas=d;e.dispose();return b},isType:function(b){return this.type===b},complexity:function(){return 0},toJSON:function(b){return this.toObject(b)},setGradient:function(b,d){d||(d={});var e={colorStops:[]};e.type=d.type||(d.r1||d.r2?"radial":"linear");e.coords={x1:d.x1,y1:d.y1,x2:d.x2,y2:d.y2};if(d.r1||d.r2)e.coords.r1=
d.r1,e.coords.r2=d.r2;for(var f in d.colorStops){var h=new c.Color(d.colorStops[f]);e.colorStops.push({offset:f,color:h.toRgb(),opacity:h.getAlpha()})}return this.set(b,c.Gradient.forObject(this,e))},setPatternFill:function(b){return this.set("fill",new c.Pattern(b))},setShadow:function(b){return this.set("shadow",b?new c.Shadow(b):null)},setColor:function(b){this.set("fill",b);return this},setAngle:function(b){var c=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;c&&this._setOriginToCenter();
this.set("angle",b);c&&this._resetOrigin();return this},centerH:function(){this.canvas.centerObjectH(this);return this},centerV:function(){this.canvas.centerObjectV(this);return this},center:function(){this.canvas.centerObject(this);return this},remove:function(){this.canvas.remove(this);return this},getLocalPointer:function(b,c){c=c||this.canvas.getPointer(b);var d=this.translateToOriginPoint(this.getCenterPoint(),"left","top");return{x:c.x-d.x,y:c.y-d.y}},_setupFillRule:function(b){this.fillRule&&
(this._prevFillRule=b.globalCompositeOperation,b.globalCompositeOperation=this.fillRule)},_restoreFillRule:function(b){this.fillRule&&this._prevFillRule&&(b.globalCompositeOperation=this._prevFillRule)}}),c.util.createAccessors(c.Object),c.Object.prototype.rotate=c.Object.prototype.setAngle,b(c.Object.prototype,c.Observable),c.Object.NUM_FRACTION_DIGITS=2,c.Object.__uid=0)})("undefined"!==typeof c?c:this);(function(){var b=e.util.degreesToRadians;e.util.object.extend(e.Object.prototype,{translateToCenterPoint:function(c,
d,p){var n=c.x,t=c.y,l=this.stroke?this.strokeWidth:0;"left"===d?n=c.x+(this.getWidth()+l*this.scaleX)/2:"right"===d&&(n=c.x-(this.getWidth()+l*this.scaleX)/2);"top"===p?t=c.y+(this.getHeight()+l*this.scaleY)/2:"bottom"===p&&(t=c.y-(this.getHeight()+l*this.scaleY)/2);return e.util.rotatePoint(new e.Point(n,t),c,b(this.angle))},translateToOriginPoint:function(c,d,p){var n=c.x,t=c.y,l=this.stroke?this.strokeWidth:0;"left"===d?n=c.x-(this.getWidth()+l*this.scaleX)/2:"right"===d&&(n=c.x+(this.getWidth()+
l*this.scaleX)/2);"top"===p?t=c.y-(this.getHeight()+l*this.scaleY)/2:"bottom"===p&&(t=c.y+(this.getHeight()+l*this.scaleY)/2);return e.util.rotatePoint(new e.Point(n,t),c,b(this.angle))},getCenterPoint:function(){var b=new e.Point(this.left,this.top);return this.translateToCenterPoint(b,this.originX,this.originY)},getPointByOrigin:function(b,c){var d=this.getCenterPoint();return this.translateToOriginPoint(d,b,c)},toLocalPoint:function(c,d,p){var n=this.getCenterPoint(),t=this.stroke?this.strokeWidth:
0;d&&p?(d="left"===d?n.x-(this.getWidth()+t*this.scaleX)/2:"right"===d?n.x+(this.getWidth()+t*this.scaleX)/2:n.x,p="top"===p?n.y-(this.getHeight()+t*this.scaleY)/2:"bottom"===p?n.y+(this.getHeight()+t*this.scaleY)/2:n.y):(d=this.left,p=this.top);return e.util.rotatePoint(new e.Point(c.x,c.y),n,-b(this.angle)).subtractEquals(new e.Point(d,p))},setPositionByOrigin:function(b,c,d){b=this.translateToCenterPoint(b,c,d);b=this.translateToOriginPoint(b,this.originX,this.originY);this.set("left",b.x);this.set("top",
b.y)},adjustPosition:function(c){var d=b(this.angle),e=this.getWidth()/2,f=Math.cos(d)*e,e=Math.sin(d)*e,n=this.getWidth(),l=Math.cos(d)*n,d=Math.sin(d)*n;"center"===this.originX&&"left"===c||"right"===this.originX&&"center"===c?(this.left-=f,this.top-=e):"left"===this.originX&&"center"===c||"center"===this.originX&&"right"===c?(this.left+=f,this.top+=e):"left"===this.originX&&"right"===c?(this.left+=l,this.top+=d):"right"===this.originX&&"left"===c&&(this.left-=l,this.top-=d);this.setCoords();this.originX=
c},_setOriginToCenter:function(){this._originalOriginX=this.originX;this._originalOriginY=this.originY;var b=this.getCenterPoint();this.originY=this.originX="center";this.left=b.x;this.top=b.y},_resetOrigin:function(){var b=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX;this.originY=this._originalOriginY;this.left=b.x;this.top=b.y;this._originalOriginY=this._originalOriginX=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),
"left","center")}})})();(function(){var b=e.util.degreesToRadians;e.util.object.extend(e.Object.prototype,{oCoords:null,intersectsWithRect:function(b,c){var d=this.oCoords,h=new e.Point(d.tl.x,d.tl.y),n=new e.Point(d.tr.x,d.tr.y),l=new e.Point(d.bl.x,d.bl.y),d=new e.Point(d.br.x,d.br.y);return"Intersection"===e.Intersection.intersectPolygonRectangle([h,n,d,l],b,c).status},intersectsWithObject:function(b){function c(b){return{tl:new e.Point(b.tl.x,b.tl.y),tr:new e.Point(b.tr.x,b.tr.y),bl:new e.Point(b.bl.x,
b.bl.y),br:new e.Point(b.br.x,b.br.y)}}var d=c(this.oCoords);b=c(b.oCoords);return"Intersection"===e.Intersection.intersectPolygonPolygon([d.tl,d.tr,d.br,d.bl],[b.tl,b.tr,b.br,b.bl]).status},isContainedWithinObject:function(b){var c=b.getBoundingRect();b=new e.Point(c.left,c.top);c=new e.Point(c.left+c.width,c.top+c.height);return this.isContainedWithinRect(b,c)},isContainedWithinRect:function(b,c){var d=this.getBoundingRect();return d.left>=b.x&&d.left+d.width<=c.x&&d.top>=b.y&&d.top+d.height<=c.y},
containsPoint:function(b){var c=this._getImageLines(this.oCoords);b=this._findCrossPoints(b,c);return 0!==b&&1===b%2},_getImageLines:function(b){return{topline:{o:b.tl,d:b.tr},rightline:{o:b.tr,d:b.br},bottomline:{o:b.br,d:b.bl},leftline:{o:b.bl,d:b.tl}}},_findCrossPoints:function(b,c){var d,e,f,l=0,h;for(h in c)if(f=c[h],!(f.o.y<b.y&&f.d.y<b.y||f.o.y>=b.y&&f.d.y>=b.y)&&(f.o.x===f.d.x&&f.o.x>=b.x?d=f.o.x:(d=(f.d.y-f.o.y)/(f.d.x-f.o.x),e=b.y-0*b.x,f=f.o.y-d*f.o.x,d=-(e-f)/(0-d)),d>=b.x&&(l+=1),2===
l))break;return l},getBoundingRectWidth:function(){return this.getBoundingRect().width},getBoundingRectHeight:function(){return this.getBoundingRect().height},getBoundingRect:function(){this.oCoords||this.setCoords();var b=[this.oCoords.tl.x,this.oCoords.tr.x,this.oCoords.br.x,this.oCoords.bl.x],c=e.util.array.min(b),b=e.util.array.max(b),b=Math.abs(c-b),d=[this.oCoords.tl.y,this.oCoords.tr.y,this.oCoords.br.y,this.oCoords.bl.y],h=e.util.array.min(d),d=e.util.array.max(d),d=Math.abs(h-d);return{left:c,
top:h,width:b,height:d}},getWidth:function(){return this.width*this.scaleX},getHeight:function(){return this.height*this.scaleY},_constrainScale:function(b){return Math.abs(b)<this.minScaleLimit?0>b?-this.minScaleLimit:this.minScaleLimit:b},scale:function(b){b=this._constrainScale(b);0>b&&(this.flipX=!this.flipX,this.flipY=!this.flipY,b*=-1);this.scaleY=this.scaleX=b;this.setCoords();return this},scaleToWidth:function(b){var c=this.getBoundingRectWidth()/this.getWidth();return this.scale(b/this.width/
c)},scaleToHeight:function(b){var c=this.getBoundingRectHeight()/this.getHeight();return this.scale(b/this.height/c)},setCoords:function(){var c=1<this.strokeWidth?this.strokeWidth:0,d=b(this.angle),p=this.getViewportTransform(),n=function(b){return e.util.transformPoint(b,p)},t=this.width,l=this.height,q="round"===this.strokeLineCap||"square"===this.strokeLineCap,w="line"===this.type&&1===this.width,u="line"===this.type&&1===this.height,v=q&&u||"line"!==this.type,q=q&&w||"line"!==this.type;w?t=c:
u&&(l=c);v&&(t+=c);q&&(l+=c);this.currentWidth=t*this.scaleX;this.currentHeight=l*this.scaleY;0>this.currentWidth&&(this.currentWidth=Math.abs(this.currentWidth));var l=Math.sqrt(Math.pow(this.currentWidth/2,2)+Math.pow(this.currentHeight/2,2)),c=Math.atan(isFinite(this.currentHeight/this.currentWidth)?this.currentHeight/this.currentWidth:0),t=Math.cos(c+d)*l,l=Math.sin(c+d)*l,v=Math.sin(d),q=Math.cos(d),w=this.getCenterPoint(),E=new e.Point(this.currentWidth,this.currentHeight),A=new e.Point(w.x-
t,w.y-l),K=new e.Point(A.x+E.x*q,A.y+E.x*v),F=new e.Point(A.x-E.y*v,A.y+E.y*q),z=new e.Point(A.x+E.x/2*q,A.y+E.x/2*v),t=n(A),l=n(K),w=n(new e.Point(K.x-E.y*v,K.y+E.y*q)),u=n(F),A=n(new e.Point(A.x-E.y/2*v,A.y+E.y/2*q)),B=n(z),K=n(new e.Point(K.x-E.y/2*v,K.y+E.y/2*q)),v=n(new e.Point(F.x+E.x/2*q,F.y+E.x/2*v)),n=n(new e.Point(z.x,z.y)),q=Math.cos(c+d)*this.padding*Math.sqrt(2),d=Math.sin(c+d)*this.padding*Math.sqrt(2),t=t.add(new e.Point(-q,-d)),l=l.add(new e.Point(d,-q)),w=w.add(new e.Point(q,d)),
u=u.add(new e.Point(-d,q)),A=A.add(new e.Point((-q-d)/2,(-d+q)/2)),B=B.add(new e.Point((d-q)/2,-(d+q)/2)),K=K.add(new e.Point((d+q)/2,(d-q)/2)),v=v.add(new e.Point((q-d)/2,(q+d)/2)),n=n.add(new e.Point((d-q)/2,-(d+q)/2));this.oCoords={tl:t,tr:l,br:w,bl:u,ml:A,mt:B,mr:K,mb:v,mtr:n};this._setCornerCoords&&this._setCornerCoords();return this}})})();e.util.object.extend(e.Object.prototype,{sendToBack:function(){this.group?e.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas.sendToBack(this);
return this},bringToFront:function(){this.group?e.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas.bringToFront(this);return this},sendBackwards:function(b){this.group?e.StaticCanvas.prototype.sendBackwards.call(this.group,this,b):this.canvas.sendBackwards(this,b);return this},bringForward:function(b){this.group?e.StaticCanvas.prototype.bringForward.call(this.group,this,b):this.canvas.bringForward(this,b);return this},moveTo:function(b){this.group?e.StaticCanvas.prototype.moveTo.call(this.group,
this,b):this.canvas.moveTo(this,b);return this}});e.util.object.extend(e.Object.prototype,{getSvgStyles:function(){var b=this.fill?this.fill.toLive?"url(#SVGID_"+this.fill.id+")":this.fill:"none",c="destination-over"===this.fillRule?"evenodd":this.fillRule,d=this.stroke?this.stroke.toLive?"url(#SVGID_"+this.stroke.id+")":this.stroke:"none",e=this.strokeWidth?this.strokeWidth:"0",f=this.strokeDashArray?this.strokeDashArray.join(" "):"";return["stroke: ",d,"; stroke-width: ",e,"; stroke-dasharray: ",
f,"; stroke-linecap: ",this.strokeLineCap?this.strokeLineCap:"butt","; stroke-linejoin: ",this.strokeLineJoin?this.strokeLineJoin:"miter","; stroke-miterlimit: ",this.strokeMiterLimit?this.strokeMiterLimit:"4","; fill: ",b,"; fill-rule: ",c,"; opacity: ","undefined"!==typeof this.opacity?this.opacity:"1",";",this.shadow&&"text"!==this.type?"filter: url(#SVGID_"+this.shadow.id+");":"",this.visible?"":" visibility: hidden;"].join("")},getSvgTransform:function(){if(this.group)return"";var b=e.util.toFixed,
c=this.getAngle(),d=!this.canvas||this.canvas.svgViewportTransformation?this.getViewportTransform():[1,0,0,1,0,0],p=e.util.transformPoint(this.getCenterPoint(),d),n=e.Object.NUM_FRACTION_DIGITS,p="path-group"===this.type?"":"translate("+b(p.x,n)+" "+b(p.y,n)+")",c=0!==c?" rotate("+b(c,n)+")":"",b=1===this.scaleX&&1===this.scaleY&&1===d[0]&&1===d[3]?"":" scale("+b(this.scaleX*d[0],n)+" "+b(this.scaleY*d[3],n)+")",n="path-group"===this.type?this.width*d[0]:0,d="path-group"===this.type?this.height*d[3]:
0;return[p,c,b,this.flipX?" matrix(-1 0 0 1 "+n+" 0) ":"",this.flipY?" matrix(1 0 0 -1 0 "+d+")":""].join("")},getSvgTransformMatrix:function(){return this.transformMatrix?" matrix("+this.transformMatrix.join(" ")+")":""},_createBaseSVGMarkup:function(){var b=[];this.fill&&this.fill.toLive&&b.push(this.fill.toSVG(this,!1));this.stroke&&this.stroke.toLive&&b.push(this.stroke.toSVG(this,!1));this.shadow&&b.push(this.shadow.toSVG(this));return b}});e.util.object.extend(e.Object.prototype,{hasStateChanged:function(){return this.stateProperties.some(function(b){return this.get(b)!==
this.originalState[b]},this)},saveState:function(b){this.stateProperties.forEach(function(b){this.originalState[b]=this.get(b)},this);b&&b.stateProperties&&b.stateProperties.forEach(function(b){this.originalState[b]=this.get(b)},this);return this},setupState:function(){this.originalState={};this.saveState();return this}});(function(b){function c(b,d){var e=b.origin,f=b.axis1,g=b.axis2,h=b.dimension,m=d.nearest,p=d.center,n=d.farthest;return function(){switch(this.get(e)){case m:return Math.min(this.get(f),
this.get(g));case p:return Math.min(this.get(f),this.get(g))+.5*this.get(h);case n:return Math.max(this.get(f),this.get(g))}}}var d=b.fabric||(b.fabric={}),e=d.util.object.extend,f={x1:1,x2:1,y1:1,y2:1},n=d.StaticCanvas.supports("setLineDash");d.Line?d.warn("fabric.Line is already defined"):(d.Line=d.util.createClass(d.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,initialize:function(b,c){c=c||{};b||(b=[0,0,0,0]);this.callSuper("initialize",c);this.set("x1",b[0]);this.set("y1",b[1]);this.set("x2",b[2]);
this.set("y2",b[3]);this._setWidthHeight(c)},_setWidthHeight:function(b){b||(b={});this.width=Math.abs(this.x2-this.x1)||1;this.height=Math.abs(this.y2-this.y1)||1;this.left="left"in b?b.left:this._getLeftToOriginX();this.top="top"in b?b.top:this._getTopToOriginY()},_set:function(b,c){this[b]=c;"undefined"!==typeof f[b]&&this._setWidthHeight();return this},_getLeftToOriginX:c({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:c({origin:"originY",
axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(b,c){b.beginPath();if(c){var d=this.getCenterPoint();b.translate(d.x,d.y)}if(!this.strokeDashArray||this.strokeDashArray&&n){var d=this.x1<=this.x2?-1:1,e=this.y1<=this.y2?-1:1;b.moveTo(1===this.width?0:d*this.width/2,1===this.height?0:e*this.height/2);b.lineTo(1===this.width?0:-1*d*this.width/2,1===this.height?0:-1*e*this.height/2)}b.lineWidth=this.strokeWidth;d=b.strokeStyle;b.strokeStyle=
this.stroke||b.fillStyle;this.stroke&&this._renderStroke(b);b.strokeStyle=d},_renderDashedStroke:function(b){var c=this.x1<=this.x2?-1:1,e=this.y1<=this.y2?-1:1,c=1===this.width?0:c*this.width/2,e=1===this.height?0:e*this.height/2;b.beginPath();d.util.drawDashedLine(b,c,e,-c,-e,this.strokeDashArray);b.closePath()},toObject:function(b){return e(this.callSuper("toObject",b),{x1:this.get("x1"),y1:this.get("y1"),x2:this.get("x2"),y2:this.get("y2")})},toSVG:function(b){var c=this._createBaseSVGMarkup(),
d="";this.group||(d="translate("+(-this.width/2-(this.x1>this.x2?this.x2:this.x1))+", "+(-this.height/2-(this.y1>this.y2?this.y2:this.y1))+") ");c.push("<line ",'x1="',this.x1,'" y1="',this.y1,'" x2="',this.x2,'" y2="',this.y2,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),d,this.getSvgTransformMatrix(),'"/>\n');return b?b(c.join("")):c.join("")},complexity:function(){return 1}}),d.Line.ATTRIBUTE_NAMES=d.SHARED_ATTRIBUTES.concat(["x1","y1","x2","y2"]),d.Line.fromElement=function(b,
c){var f=d.parseAttributes(b,d.Line.ATTRIBUTE_NAMES);return new d.Line([f.x1||0,f.y1||0,f.x2||0,f.y2||0],e(f,c))},d.Line.fromObject=function(b){return new d.Line([b.x1,b.y1,b.x2,b.y2],b)})})("undefined"!==typeof c?c:this);(function(b){var c=b.fabric||(b.fabric={}),d=2*Math.PI,e=c.util.object.extend;c.Circle?c.warn("fabric.Circle is already defined."):(c.Circle=c.util.createClass(c.Object,{type:"circle",radius:0,initialize:function(b){b=b||{};this.callSuper("initialize",b);this.set("radius",b.radius||
0)},_set:function(b,c){this.callSuper("_set",b,c);"radius"===b&&this.setRadius(c);return this},toObject:function(b){return e(this.callSuper("toObject",b),{radius:this.get("radius")})},toSVG:function(b){var c=this._createBaseSVGMarkup(),d=0,e=0;this.group&&(d=this.left+this.radius,e=this.top+this.radius);c.push("<circle ",'cx="'+d+'" cy="'+e+'" ','r="',this.radius,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform()," ",this.getSvgTransformMatrix(),'"/>\n');return b?b(c.join("")):
c.join("")},_render:function(b,c){b.beginPath();b.arc(c?this.left+this.radius:0,c?this.top+this.radius:0,this.radius,0,d,!1);this._renderFill(b);this._renderStroke(b)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(b){this.radius=b;this.set("width",2*b).set("height",2*b)},complexity:function(){return 1}}),c.Circle.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat(["cx","cy","r"]),c.Circle.fromElement=
function(b,d){d||(d={});var f=c.parseAttributes(b,c.Circle.ATTRIBUTE_NAMES);if(!("radius"in f&&0<f.radius))throw Error("value of `r` attribute is required and can not be negative");f.left=f.left||0;f.top=f.top||0;f=new c.Circle(e(f,d));f.left-=f.radius;f.top-=f.radius;return f},c.Circle.fromObject=function(b){return new c.Circle(b)})})("undefined"!==typeof c?c:this);(function(b){var c=b.fabric||(b.fabric={});c.Triangle?c.warn("fabric.Triangle is already defined"):(c.Triangle=c.util.createClass(c.Object,
{type:"triangle",initialize:function(b){b=b||{};this.callSuper("initialize",b);this.set("width",b.width||100).set("height",b.height||100)},_render:function(b){var c=this.width/2,d=this.height/2;b.beginPath();b.moveTo(-c,d);b.lineTo(0,-d);b.lineTo(c,d);b.closePath();this._renderFill(b);this._renderStroke(b)},_renderDashedStroke:function(b){var d=this.width/2,e=this.height/2;b.beginPath();c.util.drawDashedLine(b,-d,e,0,-e,this.strokeDashArray);c.util.drawDashedLine(b,0,-e,d,e,this.strokeDashArray);
c.util.drawDashedLine(b,d,e,-d,e,this.strokeDashArray);b.closePath()},toSVG:function(b){var c=this._createBaseSVGMarkup(),d=this.width/2,e=this.height/2,d=[-d+" "+e,"0 "+-e,d+" "+e].join();c.push("<polygon ",'points="',d,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),'"/>');return b?b(c.join("")):c.join("")},complexity:function(){return 1}}),c.Triangle.fromObject=function(b){return new c.Triangle(b)})})("undefined"!==typeof c?c:this);(function(b){var c=b.fabric||(b.fabric=
{}),d=2*Math.PI,e=c.util.object.extend;c.Ellipse?c.warn("fabric.Ellipse is already defined."):(c.Ellipse=c.util.createClass(c.Object,{type:"ellipse",rx:0,ry:0,initialize:function(b){b=b||{};this.callSuper("initialize",b);this.set("rx",b.rx||0);this.set("ry",b.ry||0);this.set("width",2*this.get("rx"));this.set("height",2*this.get("ry"))},toObject:function(b){return e(this.callSuper("toObject",b),{rx:this.get("rx"),ry:this.get("ry")})},toSVG:function(b){var c=this._createBaseSVGMarkup(),d=0,e=0;this.group&&
(d=this.left+this.rx,e=this.top+this.ry);c.push("<ellipse ",'cx="',d,'" cy="',e,'" ','rx="',this.rx,'" ry="',this.ry,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n');return b?b(c.join("")):c.join("")},_render:function(b,c){b.beginPath();b.save();b.transform(1,0,0,this.ry/this.rx,0,0);b.arc(c?this.left+this.rx:0,c?(this.top+this.ry)*this.rx/this.ry:0,this.rx,0,d,!1);b.restore();this._renderFill(b);this._renderStroke(b)},complexity:function(){return 1}}),
c.Ellipse.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat(["cx","cy","rx","ry"]),c.Ellipse.fromElement=function(b,d){d||(d={});var f=c.parseAttributes(b,c.Ellipse.ATTRIBUTE_NAMES);f.left=f.left||0;f.top=f.top||0;f=new c.Ellipse(e(f,d));f.top-=f.ry;f.left-=f.rx;return f},c.Ellipse.fromObject=function(b){return new c.Ellipse(b)})})("undefined"!==typeof c?c:this);(function(b){var c=b.fabric||(b.fabric={}),d=c.util.object.extend;c.Rect?console.warn("fabric.Rect is already defined"):(b=c.Object.prototype.stateProperties.concat(),
b.push("rx","ry","x","y"),c.Rect=c.util.createClass(c.Object,{stateProperties:b,type:"rect",rx:0,ry:0,strokeDashArray:null,initialize:function(b){b=b||{};this.callSuper("initialize",b);this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(b,c){if(1===this.width&&1===this.height)b.fillRect(0,0,1,1);else{var d=this.rx?Math.min(this.rx,this.width/2):0,e=this.ry?Math.min(this.ry,this.height/2):0,f=this.width,g=this.height,h=c?this.left:
-this.width/2,m=c?this.top:-this.height/2,n=0!==d||0!==e;b.beginPath();b.moveTo(h+d,m);b.lineTo(h+f-d,m);n&&b.bezierCurveTo(h+f-.4477152502*d,m,h+f,m+.4477152502*e,h+f,m+e);b.lineTo(h+f,m+g-e);n&&b.bezierCurveTo(h+f,m+g-.4477152502*e,h+f-.4477152502*d,m+g,h+f-d,m+g);b.lineTo(h+d,m+g);n&&b.bezierCurveTo(h+.4477152502*d,m+g,h,m+g-.4477152502*e,h,m+g-e);b.lineTo(h,m+e);n&&b.bezierCurveTo(h,m+.4477152502*e,h+.4477152502*d,m,h+d,m);b.closePath();this._renderFill(b);this._renderStroke(b)}},_renderDashedStroke:function(b){var d=
-this.width/2,e=-this.height/2,f=this.width,h=this.height;b.beginPath();c.util.drawDashedLine(b,d,e,d+f,e,this.strokeDashArray);c.util.drawDashedLine(b,d+f,e,d+f,e+h,this.strokeDashArray);c.util.drawDashedLine(b,d+f,e+h,d,e+h,this.strokeDashArray);c.util.drawDashedLine(b,d,e+h,d,e,this.strokeDashArray);b.closePath()},toObject:function(b){b=d(this.callSuper("toObject",b),{rx:this.get("rx")||0,ry:this.get("ry")||0});this.includeDefaultValues||this._removeDefaultValues(b);return b},toSVG:function(b){var c=
this._createBaseSVGMarkup(),d=this.left,e=this.top;this.group||(d=-this.width/2,e=-this.height/2);c.push("<rect ",'x="',d,'" y="',e,'" rx="',this.get("rx"),'" ry="',this.get("ry"),'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n');return b?b(c.join("")):c.join("")},complexity:function(){return 1}}),c.Rect.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),c.Rect.fromElement=
function(b,e){if(!b)return null;e=e||{};var f=c.parseAttributes(b,c.Rect.ATTRIBUTE_NAMES);f.left=f.left||0;f.top=f.top||0;return new c.Rect(d(e?c.util.object.clone(e):{},f))},c.Rect.fromObject=function(b){return new c.Rect(b)})})("undefined"!==typeof c?c:this);(function(b){var c=b.fabric||(b.fabric={}),d=c.util.toFixed;c.Polyline?c.warn("fabric.Polyline is already defined"):(c.Polyline=c.util.createClass(c.Object,{type:"polyline",points:null,initialize:function(b,c){c=c||{};this.set("points",b);this.callSuper("initialize",
c);this._calcDimensions()},_calcDimensions:function(){return c.Polygon.prototype._calcDimensions.call(this)},_applyPointOffset:function(){return c.Polygon.prototype._applyPointOffset.call(this)},toObject:function(b){return c.Polygon.prototype.toObject.call(this,b)},toSVG:function(b){for(var c=[],e=this._createBaseSVGMarkup(),f=0,g=this.points.length;f<g;f++)c.push(d(this.points[f].x,2),",",d(this.points[f].y,2)," ");e.push("<polyline ",'points="',c.join(""),'" style="',this.getSvgStyles(),'" transform="',
this.getSvgTransform()," ",this.getSvgTransformMatrix(),'"/>\n');return b?b(e.join("")):e.join("")},_render:function(b){var c;b.beginPath();this._applyPointOffset&&(this.group&&"path-group"===this.group.type||this._applyPointOffset(),this._applyPointOffset=null);b.moveTo(this.points[0].x,this.points[0].y);for(var d=0,e=this.points.length;d<e;d++)c=this.points[d],b.lineTo(c.x,c.y);this._renderFill(b);this._renderStroke(b)},_renderDashedStroke:function(b){var d,e;b.beginPath();for(var f=0,h=this.points.length;f<
h;f++)d=this.points[f],e=this.points[f+1]||d,c.util.drawDashedLine(b,d.x,d.y,e.x,e.y,this.strokeDashArray)},complexity:function(){return this.get("points").length}}),c.Polyline.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat(),c.Polyline.fromElement=function(b,d){if(!b)return null;d||(d={});var e=c.parsePointsAttribute(b.getAttribute("points")),f=c.parseAttributes(b,c.Polyline.ATTRIBUTE_NAMES);return null===e?null:new c.Polyline(e,c.util.object.extend(f,d))},c.Polyline.fromObject=function(b){return new c.Polyline(b.points,
b,!0)})})("undefined"!==typeof c?c:this);(function(b){var c=b.fabric||(b.fabric={}),d=c.util.object.extend,e=c.util.array.min,f=c.util.array.max,n=c.util.toFixed;c.Polygon?c.warn("fabric.Polygon is already defined"):(c.Polygon=c.util.createClass(c.Object,{type:"polygon",points:null,initialize:function(b,c){c=c||{};this.points=b;this.callSuper("initialize",c);this._calcDimensions()},_calcDimensions:function(){var b=this.points,c=e(b,"x"),d=e(b,"y"),g=f(b,"x"),b=f(b,"y");this.width=g-c||1;this.height=
b-d||1;this.left=c;this.top=d},_applyPointOffset:function(){this.points.forEach(function(b){b.x-=this.left+this.width/2;b.y-=this.top+this.height/2},this)},toObject:function(b){return d(this.callSuper("toObject",b),{points:this.points.concat()})},toSVG:function(b){for(var c=[],d=this._createBaseSVGMarkup(),e=0,f=this.points.length;e<f;e++)c.push(n(this.points[e].x,2),",",n(this.points[e].y,2)," ");d.push("<polygon ",'points="',c.join(""),'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),
" ",this.getSvgTransformMatrix(),'"/>\n');return b?b(d.join("")):d.join("")},_render:function(b){var c;b.beginPath();this._applyPointOffset&&(this.group&&"path-group"===this.group.type||this._applyPointOffset(),this._applyPointOffset=null);b.moveTo(this.points[0].x,this.points[0].y);for(var d=0,e=this.points.length;d<e;d++)c=this.points[d],b.lineTo(c.x,c.y);this._renderFill(b);if(this.stroke||this.strokeDashArray)b.closePath(),this._renderStroke(b)},_renderDashedStroke:function(b){var d,e;b.beginPath();
for(var f=0,h=this.points.length;f<h;f++)d=this.points[f],e=this.points[f+1]||this.points[0],c.util.drawDashedLine(b,d.x,d.y,e.x,e.y,this.strokeDashArray);b.closePath()},complexity:function(){return this.points.length}}),c.Polygon.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat(),c.Polygon.fromElement=function(b,e){if(!b)return null;e||(e={});var f=c.parsePointsAttribute(b.getAttribute("points")),h=c.parseAttributes(b,c.Polygon.ATTRIBUTE_NAMES);return null===f?null:new c.Polygon(f,d(h,e))},c.Polygon.fromObject=
function(b){return new c.Polygon(b.points,b,!0)})})("undefined"!==typeof c?c:this);(function(b){function c(b){return"H"===b[0]?b[1]:b[b.length-2]}function d(b){return"V"===b[0]?b[1]:b[b.length-1]}var e=b.fabric||(b.fabric={}),f=e.util.array.min,n=e.util.array.max,l=e.util.object.extend,q=Object.prototype.toString,w=e.util.drawArc,u={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},v={m:"l",M:"L"};e.Path?e.warn("fabric.Path is already defined"):(e.Path=e.util.createClass(e.Object,{type:"path",path:null,initialize:function(b,
c){c=c||{};this.setOptions(c);if(!b)throw Error("`path` argument is required");var d="[object Array]"===q.call(b);if(this.path=d?b:b.match&&b.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi))d||(this.path=this._parsePath()),this._initializePath(c),c.sourcePath&&this.setSourcePath(c.sourcePath)},_initializePath:function(b){var c="width"in b&&null!=b.width,d="height"in b&&null!=b.width,e="left"in b,f="top"in b,g=e?this.left:0,h=f?this.top:0;c&&d?(f||(this.top=this.height/2),e||(this.left=this.width/2)):(l(this,
this._parseDimensions()),c&&(this.width=b.width),d&&(this.height=b.height));this.pathOffset=this.pathOffset||this._calculatePathOffset(g,h)},_calculatePathOffset:function(b,c){return{x:this.left-b-this.width/2,y:this.top-c-this.height/2}},_render:function(b,c){var d,e=null,f=0,g=0,h=0,l=0,m=0,p=0,q,n,r,t,u=-(this.width/2+this.pathOffset.x),v=-(this.height/2+this.pathOffset.y);c&&(u+=this.width/2,v+=this.height/2);for(var Y=0,W=this.path.length;Y<W;++Y){d=this.path[Y];switch(d[0]){case "l":h+=d[1];
l+=d[2];b.lineTo(h+u,l+v);break;case "L":h=d[1];l=d[2];b.lineTo(h+u,l+v);break;case "h":h+=d[1];b.lineTo(h+u,l+v);break;case "H":h=d[1];b.lineTo(h+u,l+v);break;case "v":l+=d[1];b.lineTo(h+u,l+v);break;case "V":l=d[1];b.lineTo(h+u,l+v);break;case "m":h+=d[1];l+=d[2];f=h;g=l;b.moveTo(h+u,l+v);break;case "M":h=d[1];l=d[2];f=h;g=l;b.moveTo(h+u,l+v);break;case "c":q=h+d[5];n=l+d[6];m=h+d[3];p=l+d[4];b.bezierCurveTo(h+d[1]+u,l+d[2]+v,m+u,p+v,q+u,n+v);h=q;l=n;break;case "C":h=d[5];l=d[6];m=d[3];p=d[4];b.bezierCurveTo(d[1]+
u,d[2]+v,m+u,p+v,h+u,l+v);break;case "s":q=h+d[3];n=l+d[4];m=m?2*h-m:h;p=p?2*l-p:l;b.bezierCurveTo(m+u,p+v,h+d[1]+u,l+d[2]+v,q+u,n+v);m=h+d[1];p=l+d[2];h=q;l=n;break;case "S":q=d[3];n=d[4];m=2*h-m;p=2*l-p;b.bezierCurveTo(m+u,p+v,d[1]+u,d[2]+v,q+u,n+v);h=q;l=n;m=d[1];p=d[2];break;case "q":q=h+d[3];n=l+d[4];m=h+d[1];p=l+d[2];b.quadraticCurveTo(m+u,p+v,q+u,n+v);h=q;l=n;break;case "Q":q=d[3];n=d[4];b.quadraticCurveTo(d[1]+u,d[2]+v,q+u,n+v);h=q;l=n;m=d[1];p=d[2];break;case "t":q=h+d[1];n=l+d[2];null===
e[0].match(/[QqTt]/)?(m=h,p=l):"t"===e[0]?(m=2*h-r,p=2*l-t):"q"===e[0]&&(m=2*h-m,p=2*l-p);r=m;t=p;b.quadraticCurveTo(m+u,p+v,q+u,n+v);h=q;l=n;m=h+d[1];p=l+d[2];break;case "T":q=d[1];n=d[2];m=2*h-m;p=2*l-p;b.quadraticCurveTo(m+u,p+v,q+u,n+v);h=q;l=n;break;case "a":w(b,h+u,l+v,[d[1],d[2],d[3],d[4],d[5],d[6]+h+u,d[7]+l+v]);h+=d[6];l+=d[7];break;case "A":w(b,h+u,l+v,[d[1],d[2],d[3],d[4],d[5],d[6]+u,d[7]+v]);h=d[6];l=d[7];break;case "z":case "Z":h=f,l=g,b.closePath()}e=d}},render:function(b,c){if(this.visible){b.save();
c&&b.translate(-this.width/2,-this.height/2);var d=this.transformMatrix;d&&b.transform(d[0],d[1],d[2],d[3],d[4],d[5]);c||this.transform(b);this._setStrokeStyles(b);this._setFillStyles(b);this._setShadow(b);this.clipTo&&e.util.clipContext(this,b);b.beginPath();b.globalAlpha=this.group?b.globalAlpha*this.opacity:this.opacity;this._render(b,c);this._renderFill(b);this._renderStroke(b);this.clipTo&&b.restore();this._removeShadow(b);b.restore()}},toString:function(){return"#<fabric.Path ("+this.complexity()+
'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(b){b=l(this.callSuper("toObject",b),{path:this.path.map(function(b){return b.slice()}),pathOffset:this.pathOffset});this.sourcePath&&(b.sourcePath=this.sourcePath);this.transformMatrix&&(b.transformMatrix=this.transformMatrix);return b},toDatalessObject:function(b){b=this.toObject(b);this.sourcePath&&(b.path=this.sourcePath);delete b.sourcePath;return b},toSVG:function(b){for(var c=[],d=this._createBaseSVGMarkup(),e=0,f=this.path.length;e<
f;e++)c.push(this.path[e].join(" "));c=c.join(" ");d.push("<path ",'d="',c,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'" stroke-linecap="round" ',"/>\n");return b?b(d.join("")):d.join("")},complexity:function(){return this.path.length},_parsePath:function(){for(var b=[],c=[],d,e,f=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/ig,g,h=0,l=this.path.length;h<l;h++){d=this.path[h];g=d.slice(1).trim();for(c.length=0;e=f.exec(g);)c.push(e[0]);
d=[d.charAt(0)];g=0;for(var m=c.length;g<m;g++)e=parseFloat(c[g]),isNaN(e)||d.push(e);e=d[0];g=u[e.toLowerCase()];m=v[e]||e;if(d.length-1>g)for(var p=1,q=d.length;p<q;p+=g)b.push([e].concat(d.slice(p,p+g))),e=m;else b.push(d)}return b},_parseDimensions:function(){var b=[],c=[],d={};this.path.forEach(function(e,f){this._getCoordsFromCommand(e,f,b,c,d)},this);var e=f(b),g=f(c),h=n(b),l=n(c),h=h-e,l=l-g;return{left:this.left+(e+h/2),top:this.top+(g+l/2),width:h,height:l}},_getCoordsFromCommand:function(b,
e,f,h,l){var p=!1;"H"!==b[0]&&(l.x=0===e?c(b):c(this.path[e-1]));"V"!==b[0]&&(l.y=0===e?d(b):d(this.path[e-1]));b[0]===b[0].toLowerCase()&&(p=!0);b=this._getXY(b,p,l);e=parseInt(b.x,10);isNaN(e)||f.push(e);e=parseInt(b.y,10);isNaN(e)||h.push(e)},_getXY:function(b,e,f){var h=e?f.x+c(b):"V"===b[0]?f.x:c(b);b=e?f.y+d(b):"H"===b[0]?f.y:d(b);return{x:h,y:b}}}),e.Path.fromObject=function(b,c){"string"===typeof b.path?e.loadSVGFromURL(b.path,function(d){d=d[0];var f=b.path;delete b.path;e.util.object.extend(d,
b);d.setSourcePath(f);c(d)}):c(new e.Path(b.path,b))},e.Path.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(["d"]),e.Path.fromElement=function(b,c,d){b=e.parseAttributes(b,e.Path.ATTRIBUTE_NAMES);c&&c(new e.Path(b.d,l(b,d)))},e.Path.async=!0)})("undefined"!==typeof c?c:this);(function(b){var c=b.fabric||(b.fabric={}),d=c.util.object.extend,e=c.util.array.invoke,f=c.Object.prototype.toObject;c.PathGroup?c.warn("fabric.PathGroup is already defined"):(c.PathGroup=c.util.createClass(c.Path,{type:"path-group",
fill:"",initialize:function(b,c){c=c||{};this.paths=b||[];for(var d=this.paths.length;d--;)this.paths[d].group=this;this.setOptions(c);c.widthAttr&&(this.scaleX=c.widthAttr/c.width);c.heightAttr&&(this.scaleY=c.heightAttr/c.height);this.setCoords();c.sourcePath&&this.setSourcePath(c.sourcePath)},render:function(b){if(this.visible){b.save();var d=this.transformMatrix;d&&b.transform(d[0],d[1],d[2],d[3],d[4],d[5]);this.transform(b);this._setShadow(b);this.clipTo&&c.util.clipContext(this,b);for(var d=
0,e=this.paths.length;d<e;++d)this.paths[d].render(b,!0);this.clipTo&&b.restore();this._removeShadow(b);b.restore()}},_set:function(b,c){if("fill"===b&&c&&this.isSameColor())for(var d=this.paths.length;d--;)this.paths[d]._set(b,c);return this.callSuper("_set",b,c)},toObject:function(b){b=d(f.call(this,b),{paths:e(this.getObjects(),"toObject",b)});this.sourcePath&&(b.sourcePath=this.sourcePath);return b},toDatalessObject:function(b){b=this.toObject(b);this.sourcePath&&(b.paths=this.sourcePath);return b},
toSVG:function(b){for(var c=this.getObjects(),d="translate("+this.left+" "+this.top+")",d=["<g ",'style="',this.getSvgStyles(),'" ','transform="',d,this.getSvgTransform(),'" ',">\n"],e=0,f=c.length;e<f;e++)d.push(c[e].toSVG(b));d.push("</g>\n");return b?b(d.join("")):d.join("")},toString:function(){return"#<fabric.PathGroup ("+this.complexity()+"): { top: "+this.top+", left: "+this.left+" }>"},isSameColor:function(){var b=(this.getObjects()[0].get("fill")||"").toLowerCase();return this.getObjects().every(function(c){return(c.get("fill")||
"").toLowerCase()===b})},complexity:function(){return this.paths.reduce(function(b,c){return b+(c&&c.complexity?c.complexity():0)},0)},getObjects:function(){return this.paths}}),c.PathGroup.fromObject=function(b,d){"string"===typeof b.paths?c.loadSVGFromURL(b.paths,function(e){var f=b.paths;delete b.paths;e=c.util.groupSVGElements(e,b,f);d(e)}):c.util.enlivenObjects(b.paths,function(e){delete b.paths;d(new c.PathGroup(e,b))})},c.PathGroup.async=!0)})("undefined"!==typeof c?c:this);(function(b){var c=
b.fabric||(b.fabric={}),d=c.util.object.extend,e=c.util.array.min,f=c.util.array.max,n=c.util.array.invoke;if(!c.Group){var l={lockMovementX:!0,lockMovementY:!0,lockRotation:!0,lockScalingX:!0,lockScalingY:!0,lockUniScaling:!0};c.Group=c.util.createClass(c.Object,c.Collection,{type:"group",initialize:function(b,c){c=c||{};this._objects=b||[];for(var e=this._objects.length;e--;)this._objects[e].group=this;this.originalState={};this.callSuper("initialize");this._calcBounds();this._updateObjectsCoords();
c&&d(this,c);this._setOpacityIfSame();this.setCoords();this.saveCoords()},_updateObjectsCoords:function(){this.forEachObject(this._updateObjectCoords,this)},_updateObjectCoords:function(b){var c=b.getLeft(),d=b.getTop();b.set({originalLeft:c,originalTop:d,left:c-this.left,top:d-this.top});b.setCoords();b.__origHasControls=b.hasControls;b.hasControls=!1},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(b){this._restoreObjectsState();b&&(this._objects.push(b),
b.group=this);this.forEachObject(this._setObjectActive,this);this._calcBounds();this._updateObjectsCoords();return this},_setObjectActive:function(b){b.set("active",!0);b.group=this},removeWithUpdate:function(b){this._moveFlippedObject(b);this._restoreObjectsState();this.forEachObject(this._setObjectActive,this);this.remove(b);this._calcBounds();this._updateObjectsCoords();return this},_onObjectAdded:function(b){b.group=this},_onObjectRemoved:function(b){delete b.group;b.set("active",!1)},delegatedProperties:{fill:!0,
opacity:!0,fontFamily:!0,fontWeight:!0,fontSize:!0,fontStyle:!0,lineHeight:!0,textDecoration:!0,textAlign:!0,backgroundColor:!0},_set:function(b,c){if(b in this.delegatedProperties){var d=this._objects.length;for(this[b]=c;d--;)this._objects[d].set(b,c)}else this[b]=c},toObject:function(b){return d(this.callSuper("toObject",b),{objects:n(this._objects,"toObject",b)})},render:function(b){if(this.visible){b.save();this.clipTo&&c.util.clipContext(this,b);for(var d=0,e=this._objects.length;d<e;d++)this._renderObject(this._objects[d],
b);this.clipTo&&b.restore();b.restore()}},_renderControls:function(b,c){this.callSuper("_renderControls",b,c);for(var d=0,e=this._objects.length;d<e;d++)this._objects[d]._renderControls(b)},_renderObject:function(b,c){var d=b.hasRotatingPoint;b.visible&&(b.hasRotatingPoint=!1,b.render(c),b.hasRotatingPoint=d)},_restoreObjectsState:function(){this._objects.forEach(this._restoreObjectState,this);return this},_moveFlippedObject:function(b){var c=b.get("originX"),d=b.get("originY"),e=b.getCenterPoint();
b.set({originX:"center",originY:"center",left:e.x,top:e.y});this._toggleFlipping(b);e=b.getPointByOrigin(c,d);b.set({originX:c,originY:d,left:e.x,top:e.y});return this},_toggleFlipping:function(b){this.flipX&&(b.toggle("flipX"),b.set("left",-b.get("left")),b.setAngle(-b.getAngle()));this.flipY&&(b.toggle("flipY"),b.set("top",-b.get("top")),b.setAngle(-b.getAngle()))},_restoreObjectState:function(b){this._setObjectPosition(b);b.setCoords();b.hasControls=b.__origHasControls;delete b.__origHasControls;
b.set("active",!1);b.setCoords();delete b.group;return this},_setObjectPosition:function(b){var c=this.getLeft(),d=this.getTop(),e=this._getRotatedLeftTop(b);b.set({angle:b.getAngle()+this.getAngle(),left:c+e.left,top:d+e.top,scaleX:b.get("scaleX")*this.get("scaleX"),scaleY:b.get("scaleY")*this.get("scaleY")})},_getRotatedLeftTop:function(b){var c=this.getAngle()*(Math.PI/180);return{left:-Math.sin(c)*b.getTop()*this.get("scaleY")+Math.cos(c)*b.getLeft()*this.get("scaleX"),top:Math.cos(c)*b.getTop()*
this.get("scaleY")+Math.sin(c)*b.getLeft()*this.get("scaleX")}},destroy:function(){this._objects.forEach(this._moveFlippedObject,this);return this._restoreObjectsState()},saveCoords:function(){this._originalLeft=this.get("left");this._originalTop=this.get("top");return this},hasMoved:function(){return this._originalLeft!==this.get("left")||this._originalTop!==this.get("top")},setObjectsCoords:function(){this.forEachObject(function(b){b.setCoords()});return this},_setOpacityIfSame:function(){var b=
this.getObjects(),c=b[0]?b[0].get("opacity"):1;b.every(function(b){return b.get("opacity")===c})&&(this.opacity=c)},_calcBounds:function(b){for(var c=[],d=[],e,f=0,g=this._objects.length;f<g;++f){e=this._objects[f];e.setCoords();for(var h in e.oCoords)c.push(e.oCoords[h].x),d.push(e.oCoords[h].y)}this.set(this._getBounds(c,d,b))},_getBounds:function(b,d,h){var l=c.util.invertTransform(this.getViewportTransform()),m=c.util.transformPoint(new c.Point(e(b),e(d)),l);b=c.util.transformPoint(new c.Point(f(b),
f(d)),l);d={width:b.x-m.x||0,height:b.y-m.y||0};h||(d.left=(m.x+b.x)/2||0,d.top=(m.y+b.y)/2||0);return d},toSVG:function(b){for(var c=["<g ",'transform="',this.getSvgTransform(),'">\n'],d=0,e=this._objects.length;d<e;d++)c.push(this._objects[d].toSVG(b));c.push("</g>\n");return b?b(c.join("")):c.join("")},get:function(b){if(b in l){if(this[b])return this[b];for(var c=0,d=this._objects.length;c<d;c++)if(this._objects[c][b])return!0;return!1}return b in this.delegatedProperties?this._objects[0]&&this._objects[0].get(b):
this[b]}});c.Group.fromObject=function(b,d){c.util.enlivenObjects(b.objects,function(e){delete b.objects;d&&d(new c.Group(e,b))})};c.Group.async=!0}})("undefined"!==typeof c?c:this);(function(b){var c=e.util.object.extend;b.fabric||(b.fabric={});b.fabric.Image?e.warn("fabric.Image is already defined."):(e.Image=e.util.createClass(e.Object,{type:"image",crossOrigin:"",initialize:function(b,c){c||(c={});this.filters=[];this.callSuper("initialize",c);this._initElement(b,c);this._initConfig(c);c.filters&&
(this.filters=c.filters,this.applyFilters())},getElement:function(){return this._element},setElement:function(b,c){this._originalElement=this._element=b;this._initConfig();0!==this.filters.length&&this.applyFilters(c);return this},setCrossOrigin:function(b){this.crossOrigin=b;this._element.crossOrigin=b;return this},getOriginalSize:function(){var b=this.getElement();return{width:b.width,height:b.height}},_stroke:function(b){b.save();this._setStrokeStyles(b);b.beginPath();b.strokeRect(-this.width/
2,-this.height/2,this.width,this.height);b.closePath();b.restore()},_renderDashedStroke:function(b){var c=-this.width/2,d=-this.height/2,g=this.width,h=this.height;b.save();this._setStrokeStyles(b);b.beginPath();e.util.drawDashedLine(b,c,d,c+g,d,this.strokeDashArray);e.util.drawDashedLine(b,c+g,d,c+g,d+h,this.strokeDashArray);e.util.drawDashedLine(b,c+g,d+h,c,d+h,this.strokeDashArray);e.util.drawDashedLine(b,c,d+h,c,d,this.strokeDashArray);b.closePath();b.restore()},toObject:function(b){return c(this.callSuper("toObject",
b),{src:this._originalElement.src||this._originalElement._src,filters:this.filters.map(function(b){return b&&b.toObject()}),crossOrigin:this.crossOrigin})},toSVG:function(b){var c=[],d=-this.width/2,e=-this.height/2;this.group&&(d=this.left,e=this.top);c.push('<g transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'">\n','<image xlink:href="',this.getSvgSrc(),'" x="',d,'" y="',e,'" style="',this.getSvgStyles(),'" width="',this.width,'" height="',this.height,'" preserveAspectRatio="none"',
"></image>\n");if(this.stroke||this.strokeDashArray){var f=this.fill;this.fill=null;c.push("<rect ",'x="',d,'" y="',e,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n');this.fill=f}c.push("</g>\n");return b?b(c.join("")):c.join("")},getSrc:function(){if(this.getElement())return this.getElement().src||this.getElement()._src},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},clone:function(b,c){this.constructor.fromObject(this.toObject(c),
b)},applyFilters:function(b){if(this._originalElement)if(0===this.filters.length)this._element=this._originalElement,b&&b();else{var c=this._originalElement,d=e.util.createCanvasElement(),g=e.util.createImage(),h=this;d.width=c.width;d.height=c.height;d.getContext("2d").drawImage(c,0,0,c.width,c.height);this.filters.forEach(function(b){b&&b.applyTo(d)});g.width=c.width;g.height=c.height;e.isLikelyNode?(g.src=d.toBuffer(void 0,e.Image.pngCompression),h._element=g,b&&b()):(g.onload=function(){h._element=
g;b&&b();g.onload=d=c=null},g.src=d.toDataURL("image/png"));return this}},_render:function(b,c){this._element&&b.drawImage(this._element,c?this.left:-this.width/2,c?this.top:-this.height/2,this.width,this.height);this._renderStroke(b)},_resetWidthHeight:function(){var b=this.getElement();this.set("width",b.width);this.set("height",b.height)},_initElement:function(b){this.setElement(e.util.getById(b));e.util.addClass(this.getElement(),e.Image.CSS_CANVAS)},_initConfig:function(b){b||(b={});this.setOptions(b);
this._setWidthHeight(b);this._element&&this.crossOrigin&&(this._element.crossOrigin=this.crossOrigin)},_initFilters:function(b,c){b.filters&&b.filters.length?e.util.enlivenObjects(b.filters,function(b){c&&c(b)},"fabric.Image.filters"):c&&c()},_setWidthHeight:function(b){this.width="width"in b?b.width:this.getElement()?this.getElement().width||0:0;this.height="height"in b?b.height:this.getElement()?this.getElement().height||0:0},complexity:function(){return 1}}),e.Image.CSS_CANVAS="canvas-img",e.Image.prototype.getSvgSrc=
e.Image.prototype.getSrc,e.Image.fromObject=function(b,c){e.util.loadImage(b.src,function(d){e.Image.prototype._initFilters.call(b,b,function(g){b.filters=g||[];g=new e.Image(d,b);c&&c(g)})},null,b.crossOrigin)},e.Image.fromURL=function(b,c,d){e.util.loadImage(b,function(b){c(new e.Image(b,d))},null,d&&d.crossOrigin)},e.Image.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(["x","y","width","height","xlink:href"]),e.Image.fromElement=function(b,d,h){b=e.parseAttributes(b,e.Image.ATTRIBUTE_NAMES);e.Image.fromURL(b["xlink:href"],
d,c(h?e.util.object.clone(h):{},b))},e.Image.async=!0,e.Image.pngCompression=1)})("undefined"!==typeof c?c:this);e.Image.filters=e.Image.filters||{};e.Image.filters.BaseFilter=e.util.createClass({type:"BaseFilter",toObject:function(){return{type:this.type}},toJSON:function(){return this.toObject()}});(function(b){var c=b.fabric||(b.fabric={}),d=c.util.object.extend;c.Image.filters.Brightness=c.util.createClass(c.Image.filters.BaseFilter,{type:"Brightness",initialize:function(b){b=b||{};this.brightness=
b.brightness||0},applyTo:function(b){var c=b.getContext("2d");b=c.getImageData(0,0,b.width,b.height);for(var d=b.data,e=this.brightness,f=0,g=d.length;f<g;f+=4)d[f]+=e,d[f+1]+=e,d[f+2]+=e;c.putImageData(b,0,0)},toObject:function(){return d(this.callSuper("toObject"),{brightness:this.brightness})}});c.Image.filters.Brightness.fromObject=function(b){return new c.Image.filters.Brightness(b)}})("undefined"!==typeof c?c:this);(function(b){var c=b.fabric||(b.fabric={}),d=c.util.object.extend;c.Image.filters.Convolute=
c.util.createClass(c.Image.filters.BaseFilter,{type:"Convolute",initialize:function(b){b=b||{};this.opaque=b.opaque;this.matrix=b.matrix||[0,0,0,0,1,0,0,0,0];this.tmpCtx=c.util.createCanvasElement().getContext("2d")},_createImageData:function(b,c){return this.tmpCtx.createImageData(b,c)},applyTo:function(b){var c=this.matrix,d=b.getContext("2d"),e=d.getImageData(0,0,b.width,b.height);b=Math.round(Math.sqrt(c.length));for(var f=Math.floor(b/2),g=e.data,h=e.width,e=e.height,m=this._createImageData(h,
e),n=m.data,A=this.opaque?1:0,K=0;K<e;K++)for(var F=0;F<h;F++){for(var z=K,B=F,H=4*(K*h+F),G=0,I=0,N=0,L=0,x=0;x<b;x++)for(var S=0;S<b;S++){var D=z+x-f,J=B+S-f;0>D||D>e||0>J||J>h||(D=4*(D*h+J),J=c[x*b+S],G+=g[D]*J,I+=g[D+1]*J,N+=g[D+2]*J,L+=g[D+3]*J)}n[H]=G;n[H+1]=I;n[H+2]=N;n[H+3]=L+A*(255-L)}d.putImageData(m,0,0)},toObject:function(){return d(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}});c.Image.filters.Convolute.fromObject=function(b){return new c.Image.filters.Convolute(b)}})("undefined"!==
typeof c?c:this);(function(b){var c=b.fabric||(b.fabric={}),d=c.util.object.extend;c.Image.filters.GradientTransparency=c.util.createClass(c.Image.filters.BaseFilter,{type:"GradientTransparency",initialize:function(b){b=b||{};this.threshold=b.threshold||100},applyTo:function(b){var c=b.getContext("2d");b=c.getImageData(0,0,b.width,b.height);for(var d=b.data,e=this.threshold,f=d.length,g=0,h=d.length;g<h;g+=4)d[g+3]=e+255*(f-g)/f;c.putImageData(b,0,0)},toObject:function(){return d(this.callSuper("toObject"),
{threshold:this.threshold})}});c.Image.filters.GradientTransparency.fromObject=function(b){return new c.Image.filters.GradientTransparency(b)}})("undefined"!==typeof c?c:this);(function(b){var c=b.fabric||(b.fabric={});c.Image.filters.Grayscale=c.util.createClass(c.Image.filters.BaseFilter,{type:"Grayscale",applyTo:function(b){var c=b.getContext("2d");b=c.getImageData(0,0,b.width,b.height);for(var d=b.data,e=b.width*b.height*4,f=0,g;f<e;)g=(d[f]+d[f+1]+d[f+2])/3,d[f]=g,d[f+1]=g,d[f+2]=g,f+=4;c.putImageData(b,
0,0)}});c.Image.filters.Grayscale.fromObject=function(){return new c.Image.filters.Grayscale}})("undefined"!==typeof c?c:this);(function(b){var c=b.fabric||(b.fabric={});c.Image.filters.Invert=c.util.createClass(c.Image.filters.BaseFilter,{type:"Invert",applyTo:function(b){var c=b.getContext("2d");b=c.getImageData(0,0,b.width,b.height);var d=b.data,e=d.length,f;for(f=0;f<e;f+=4)d[f]=255-d[f],d[f+1]=255-d[f+1],d[f+2]=255-d[f+2];c.putImageData(b,0,0)}});c.Image.filters.Invert.fromObject=function(){return new c.Image.filters.Invert}})("undefined"!==
typeof c?c:this);(function(b){var c=b.fabric||(b.fabric={}),d=c.util.object.extend;c.Image.filters.Mask=c.util.createClass(c.Image.filters.BaseFilter,{type:"Mask",initialize:function(b){b=b||{};this.mask=b.mask;this.channel=-1<[0,1,2,3].indexOf(b.channel)?b.channel:0},applyTo:function(b){if(this.mask){var d=b.getContext("2d");b=d.getImageData(0,0,b.width,b.height);var e=b.data,f=this.mask.getElement(),h=c.util.createCanvasElement(),m=this.channel,n=b.width*b.height*4;h.width=f.width;h.height=f.height;
h.getContext("2d").drawImage(f,0,0,f.width,f.height);h=h.getContext("2d").getImageData(0,0,f.width,f.height).data;for(f=0;f<n;f+=4)e[f+3]=h[f+m];d.putImageData(b,0,0)}},toObject:function(){return d(this.callSuper("toObject"),{mask:this.mask.toObject(),channel:this.channel})}});c.Image.filters.Mask.fromObject=function(b,d){c.util.loadImage(b.mask.src,function(e){b.mask=new c.Image(e,b.mask);d&&d(new c.Image.filters.Mask(b))})};c.Image.filters.Mask.async=!0})("undefined"!==typeof c?c:this);(function(b){var c=
b.fabric||(b.fabric={}),d=c.util.object.extend;c.Image.filters.Noise=c.util.createClass(c.Image.filters.BaseFilter,{type:"Noise",initialize:function(b){b=b||{};this.noise=b.noise||0},applyTo:function(b){var c=b.getContext("2d");b=c.getImageData(0,0,b.width,b.height);for(var d=b.data,e=this.noise,f,g=0,h=d.length;g<h;g+=4)f=(.5-Math.random())*e,d[g]+=f,d[g+1]+=f,d[g+2]+=f;c.putImageData(b,0,0)},toObject:function(){return d(this.callSuper("toObject"),{noise:this.noise})}});c.Image.filters.Noise.fromObject=
function(b){return new c.Image.filters.Noise(b)}})("undefined"!==typeof c?c:this);(function(b){var c=b.fabric||(b.fabric={}),d=c.util.object.extend;c.Image.filters.Pixelate=c.util.createClass(c.Image.filters.BaseFilter,{type:"Pixelate",initialize:function(b){b=b||{};this.blocksize=b.blocksize||4},applyTo:function(b){var c=b.getContext("2d");b=c.getImageData(0,0,b.width,b.height);var d=b.data,e=b.height,f=b.width,g,h,m,n,A,K,F;for(h=0;h<e;h+=this.blocksize)for(m=0;m<f;m+=this.blocksize){g=4*h*f+4*
m;n=d[g];A=d[g+1];K=d[g+2];F=d[g+3];for(var z=h,B=h+this.blocksize;z<B;z++)for(var H=m,G=m+this.blocksize;H<G;H++)g=4*z*f+4*H,d[g]=n,d[g+1]=A,d[g+2]=K,d[g+3]=F}c.putImageData(b,0,0)},toObject:function(){return d(this.callSuper("toObject"),{blocksize:this.blocksize})}});c.Image.filters.Pixelate.fromObject=function(b){return new c.Image.filters.Pixelate(b)}})("undefined"!==typeof c?c:this);(function(b){var c=b.fabric||(b.fabric={}),d=c.util.object.extend;c.Image.filters.RemoveWhite=c.util.createClass(c.Image.filters.BaseFilter,
{type:"RemoveWhite",initialize:function(b){b=b||{};this.threshold=b.threshold||30;this.distance=b.distance||20},applyTo:function(b){var c=b.getContext("2d");b=c.getImageData(0,0,b.width,b.height);for(var d=b.data,e=this.distance,f=255-this.threshold,g=Math.abs,h,m,n,A=0,K=d.length;A<K;A+=4)h=d[A],m=d[A+1],n=d[A+2],h>f&&m>f&&n>f&&g(h-m)<e&&g(h-n)<e&&g(m-n)<e&&(d[A+3]=1);c.putImageData(b,0,0)},toObject:function(){return d(this.callSuper("toObject"),{threshold:this.threshold,distance:this.distance})}});
c.Image.filters.RemoveWhite.fromObject=function(b){return new c.Image.filters.RemoveWhite(b)}})("undefined"!==typeof c?c:this);(function(b){var c=b.fabric||(b.fabric={});c.Image.filters.Sepia=c.util.createClass(c.Image.filters.BaseFilter,{type:"Sepia",applyTo:function(b){var c=b.getContext("2d");b=c.getImageData(0,0,b.width,b.height);var d=b.data,e=d.length,f,g;for(f=0;f<e;f+=4)g=.3*d[f]+.59*d[f+1]+.11*d[f+2],d[f]=g+100,d[f+1]=g+50,d[f+2]=g+255;c.putImageData(b,0,0)}});c.Image.filters.Sepia.fromObject=
function(){return new c.Image.filters.Sepia}})("undefined"!==typeof c?c:this);(function(b){var c=b.fabric||(b.fabric={});c.Image.filters.Sepia2=c.util.createClass(c.Image.filters.BaseFilter,{type:"Sepia2",applyTo:function(b){var c=b.getContext("2d");b=c.getImageData(0,0,b.width,b.height);var d=b.data,e=d.length,f,g,h,n;for(f=0;f<e;f+=4)g=d[f],h=d[f+1],n=d[f+2],d[f]=(.393*g+.769*h+.189*n)/1.351,d[f+1]=(.349*g+.686*h+.168*n)/1.203,d[f+2]=(.272*g+.534*h+.131*n)/2.14;c.putImageData(b,0,0)}});c.Image.filters.Sepia2.fromObject=
function(){return new c.Image.filters.Sepia2}})("undefined"!==typeof c?c:this);(function(b){var c=b.fabric||(b.fabric={}),d=c.util.object.extend;c.Image.filters.Tint=c.util.createClass(c.Image.filters.BaseFilter,{type:"Tint",initialize:function(b){b=b||{};this.color=b.color||"#000000";this.opacity="undefined"!==typeof b.opacity?b.opacity:(new c.Color(this.color)).getAlpha()},applyTo:function(b){var d=b.getContext("2d");b=d.getImageData(0,0,b.width,b.height);var e=b.data,f=e.length,h,m,n,v,E,A,K,F;
h=(new c.Color(this.color)).getSource();m=h[0]*this.opacity;n=h[1]*this.opacity;v=h[2]*this.opacity;F=1-this.opacity;for(h=0;h<f;h+=4)E=e[h],A=e[h+1],K=e[h+2],e[h]=m+E*F,e[h+1]=n+A*F,e[h+2]=v+K*F;d.putImageData(b,0,0)},toObject:function(){return d(this.callSuper("toObject"),{color:this.color,opacity:this.opacity})}});c.Image.filters.Tint.fromObject=function(b){return new c.Image.filters.Tint(b)}})("undefined"!==typeof c?c:this);(function(b){var c=b.fabric||(b.fabric={}),d=c.util.object.extend;c.Image.filters.Multiply=
c.util.createClass(c.Image.filters.BaseFilter,{type:"Multiply",initialize:function(b){b=b||{};this.color=b.color||"#000000"},applyTo:function(b){var d=b.getContext("2d");b=d.getImageData(0,0,b.width,b.height);var e=b.data,f=e.length,h,m;m=(new c.Color(this.color)).getSource();for(h=0;h<f;h+=4)e[h]*=m[0]/255,e[h+1]*=m[1]/255,e[h+2]*=m[2]/255;d.putImageData(b,0,0)},toObject:function(){return d(this.callSuper("toObject"),{color:this.color})}});c.Image.filters.Multiply.fromObject=function(b){return new c.Image.filters.Multiply(b)}})("undefined"!==
typeof c?c:this);(function(b){var c=b.fabric;c.Image.filters.Blend=c.util.createClass({type:"Blend",initialize:function(b){b=b||{};this.color=b.color||"#000";this.image=b.image||!1;this.mode=b.mode||"multiply";this.alpha=b.alpha||1},applyTo:function(b){var d=b.getContext("2d");b=d.getImageData(0,0,b.width,b.height);var e=b.data,f,h,n,w,u,v,E,A=!1;this.image?(A=!0,E=c.util.createCanvasElement(),E.width=this.image.width,E.height=this.image.height,E=new c.StaticCanvas(E),E.add(this.image),E=E.getContext("2d").getImageData(0,
0,E.width,E.height).data):(E=(new c.Color(this.color)).getSource(),f=E[0]*this.alpha,h=E[1]*this.alpha,n=E[2]*this.alpha);for(var K=0,F=e.length;K<F;K+=4)switch(w=e[K],u=e[K+1],v=e[K+2],A&&(f=E[K]*this.alpha,h=E[K+1]*this.alpha,n=E[K+2]*this.alpha),this.mode){case "multiply":e[K]=w*f/255;e[K+1]=u*h/255;e[K+2]=v*n/255;break;case "screen":e[K]=1-(1-w)*(1-f);e[K+1]=1-(1-u)*(1-h);e[K+2]=1-(1-v)*(1-n);break;case "add":e[K]=Math.min(255,w+f);e[K+1]=Math.min(255,u+h);e[K+2]=Math.min(255,v+n);break;case "diff":case "difference":e[K]=
Math.abs(w-f);e[K+1]=Math.abs(u-h);e[K+2]=Math.abs(v-n);break;case "subtract":w-=f;u-=h;v-=n;e[K]=0>w?0:w;e[K+1]=0>u?0:u;e[K+2]=0>v?0:v;break;case "darken":e[K]=Math.min(w,f);e[K+1]=Math.min(u,h);e[K+2]=Math.min(v,n);break;case "lighten":e[K]=Math.max(w,f),e[K+1]=Math.max(u,h),e[K+2]=Math.max(v,n)}d.putImageData(b,0,0)}});c.Image.filters.Blend.fromObject=function(b){return new c.Image.filters.Blend(b)}})("undefined"!==typeof c?c:this);(function(b){var c=b.fabric||(b.fabric={}),d=c.util.object.extend,
e=c.util.object.clone,f=c.util.toFixed,t=c.StaticCanvas.supports("setLineDash");c.Text?c.warn("fabric.Text is already defined"):(b=c.Object.prototype.stateProperties.concat(),b.push("fontFamily","fontWeight","fontSize","text","textDecoration","textAlign","fontStyle","lineHeight","textBackgroundColor","useNative","path"),c.Text=c.util.createClass(c.Object,{_dimensionAffectingProps:{fontSize:!0,fontWeight:!0,fontFamily:!0,textDecoration:!0,fontStyle:!0,lineHeight:!0,stroke:!0,strokeWidth:!0,text:!0},
_reNewline:/\r?\n/,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",textDecoration:"",textAlign:"left",fontStyle:"",lineHeight:1.3,textBackgroundColor:"",path:null,useNative:!0,stateProperties:b,stroke:null,shadow:null,initialize:function(b,c){c=c||{};this.text=b;this.__skipDimension=!0;this.setOptions(c);this.__skipDimension=!1;this._initDimensions()},_initDimensions:function(){if(!this.__skipDimension){var b=c.util.createCanvasElement();this._render(b.getContext("2d"))}},
toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_render:function(b){"undefined"===typeof n||!0===this.useNative?this._renderViaNative(b):this._renderViaCufon(b)},_renderViaNative:function(b){var d=this.text.split(this._reNewline);this._setTextStyles(b);this.width=this._getTextWidth(b,d);this.height=this._getTextHeight(b,d);this.clipTo&&c.util.clipContext(this,b);this._renderTextBackground(b,d);this._translateForTextAlign(b);
this._renderText(b,d);"left"!==this.textAlign&&"justify"!==this.textAlign&&b.restore();this._renderTextDecoration(b,d);this.clipTo&&b.restore();this._setBoundaries(b,d);this._totalLineHeight=0},_renderText:function(b,c){b.save();this._setShadow(b);this._setupFillRule(b);this._renderTextFill(b,c);this._renderTextStroke(b,c);this._restoreFillRule(b);this._removeShadow(b);b.restore()},_translateForTextAlign:function(b){"left"!==this.textAlign&&"justify"!==this.textAlign&&(b.save(),b.translate("center"===
this.textAlign?this.width/2:this.width,0))},_setBoundaries:function(b,c){this._boundaries=[];for(var d=0,e=c.length;d<e;d++){var f=this._getLineWidth(b,c[d]),g=this._getLineLeftOffset(f);this._boundaries.push({height:this.fontSize*this.lineHeight,width:f,left:g})}},_setTextStyles:function(b){this._setFillStyles(b);this._setStrokeStyles(b);b.textBaseline="alphabetic";this.skipTextAlign||(b.textAlign=this.textAlign);b.font=this._getFontDeclaration()},_getTextHeight:function(b,c){return this.fontSize*
c.length*this.lineHeight},_getTextWidth:function(b,c){for(var d=b.measureText(c[0]||"|").width,e=1,f=c.length;e<f;e++){var g=b.measureText(c[e]).width;g>d&&(d=g)}return d},_renderChars:function(b,c,d,e,f){c[b](d,e,f)},_renderTextLine:function(b,c,d,e,f,g){f-=this.fontSize/4;if("justify"!==this.textAlign)this._renderChars(b,c,d,e,f,g);else{var h=c.measureText(d).width,m=this.width;if(m>h){h=d.split(/\s+/);d=c.measureText(d.replace(/\s+/g,"")).width;for(var m=(m-d)/(h.length-1),p=d=0,n=h.length;p<n;p++)this._renderChars(b,
c,h[p],e+d,f,g),d+=c.measureText(h[p]).width+m}else this._renderChars(b,c,d,e,f,g)}},_getLeftOffset:function(){return c.isLikelyNode?0:-this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextFill:function(b,c){if(this.fill||this._skipFillStrokeCheck){this._boundaries=[];for(var d=0,e=0,f=c.length;e<f;e++){var g=this._getHeightOfLine(b,e,c),d=d+g;this._renderTextLine("fillText",b,c[e],this._getLeftOffset(),this._getTopOffset()+d,e)}}},_renderTextStroke:function(b,c){if(this.stroke&&
0!==this.strokeWidth||this._skipFillStrokeCheck){var d=0;b.save();this.strokeDashArray&&(1&this.strokeDashArray.length&&this.strokeDashArray.push.apply(this.strokeDashArray,this.strokeDashArray),t&&b.setLineDash(this.strokeDashArray));b.beginPath();for(var e=0,f=c.length;e<f;e++){var g=this._getHeightOfLine(b,e,c),d=d+g;this._renderTextLine("strokeText",b,c[e],this._getLeftOffset(),this._getTopOffset()+d,e)}b.closePath();b.restore()}},_getHeightOfLine:function(){return this.fontSize*this.lineHeight},
_renderTextBackground:function(b,c){this._renderTextBoxBackground(b);this._renderTextLinesBackground(b,c)},_renderTextBoxBackground:function(b){this.backgroundColor&&(b.save(),b.fillStyle=this.backgroundColor,b.fillRect(this._getLeftOffset(),this._getTopOffset(),this.width,this.height),b.restore())},_renderTextLinesBackground:function(b,c){if(this.textBackgroundColor){b.save();b.fillStyle=this.textBackgroundColor;for(var d=0,e=c.length;d<e;d++)if(""!==c[d]){var f=this._getLineWidth(b,c[d]),g=this._getLineLeftOffset(f);
b.fillRect(this._getLeftOffset()+g,this._getTopOffset()+d*this.fontSize*this.lineHeight,f,this.fontSize*this.lineHeight)}b.restore()}},_getLineLeftOffset:function(b){return"center"===this.textAlign?(this.width-b)/2:"right"===this.textAlign?this.width-b:0},_getLineWidth:function(b,c){return"justify"===this.textAlign?this.width:b.measureText(c).width},_renderTextDecoration:function(b,c){function d(g){for(var h=0,m=c.length;h<m;h++){var p=f._getLineWidth(b,c[h]),n=f._getLineLeftOffset(p);b.fillRect(f._getLeftOffset()+
n,~~(g+h*f._getHeightOfLine(b,h,c)-e),p,1)}}if(this.textDecoration){var e=this._getTextHeight(b,c)/2,f=this;-1<this.textDecoration.indexOf("underline")&&d(this.fontSize*this.lineHeight);-1<this.textDecoration.indexOf("line-through")&&d(this.fontSize*this.lineHeight-this.fontSize/2);-1<this.textDecoration.indexOf("overline")&&d(this.fontSize*this.lineHeight-this.fontSize)}},_getFontDeclaration:function(){return[c.isLikelyNode?this.fontWeight:this.fontStyle,c.isLikelyNode?this.fontStyle:this.fontWeight,
this.fontSize+"px",c.isLikelyNode?'"'+this.fontFamily+'"':this.fontFamily].join(" ")},render:function(b,c){if(this.visible){b.save();this._transform(b,c);var d=this.transformMatrix,e=this.group&&"path-group"===this.group.type;e&&b.translate(-this.group.width/2,-this.group.height/2);d&&b.transform(d[0],d[1],d[2],d[3],d[4],d[5]);e&&b.translate(this.left,this.top);this._render(b);b.restore()}},toObject:function(b){b=d(this.callSuper("toObject",b),{text:this.text,fontSize:this.fontSize,fontWeight:this.fontWeight,
fontFamily:this.fontFamily,fontStyle:this.fontStyle,lineHeight:this.lineHeight,textDecoration:this.textDecoration,textAlign:this.textAlign,path:this.path,textBackgroundColor:this.textBackgroundColor,useNative:this.useNative});this.includeDefaultValues||this._removeDefaultValues(b);return b},toSVG:function(b){var c=[],d=this.text.split(this._reNewline),e=this._getSVGLeftTopOffsets(d),f=this._getSVGTextAndBg(e.lineTop,e.textLeft,d),d=this._getSVGShadows(e.lineTop,d);e.textTop+=this._fontAscent?this._fontAscent/
5*this.lineHeight:0;this._wrapSVGTextAndBg(c,f,d,e);return b?b(c.join("")):c.join("")},_getSVGLeftTopOffsets:function(b){return{textLeft:-(this.width/2)+(this.group&&"path-group"===this.group.type?this.left:0),textTop:(this.useNative?this.fontSize-1:this.height/2-b.length*this.fontSize-this._totalLineHeight)+(this.group&&"path-group"===this.group.type?this.top:0),lineTop:this.useNative?this.fontSize*this.lineHeight:-this._fontAscent-this._fontAscent/5*this.lineHeight}},_wrapSVGTextAndBg:function(b,
c,d,e){b.push('<g transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'">\n',c.textBgRects.join(""),"<text ",this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",this.textDecoration?'text-decoration="'+this.textDecoration+'" ':"",'style="',this.getSvgStyles(),'" ','transform="translate(',f(e.textLeft,2)," ",
f(e.textTop,2),')">',d.join(""),c.textSpans.join(""),"</text>\n","</g>\n")},_getSVGShadows:function(b,d){var e=[],h,m,p=1;if(!this.shadow||!this._boundaries)return e;h=0;for(m=d.length;h<m;h++)""!==d[h]?(e.push('<tspan x="',f((this._boundaries&&this._boundaries[h]?this._boundaries[h].left:0)+p+this.shadow.offsetX,2),0===h||this.useNative?'" y':'" dy','="',f(this.useNative?b*h-this.height/2+this.shadow.offsetY:b+(0===h?this.shadow.offsetY:0),2),'" ',this._getFillAttributes(this.shadow.color),">",c.util.string.escapeXml(d[h]),
"</tspan>"),p=1):p++;return e},_getSVGTextAndBg:function(b,c,d){var e=[],f=[],g=1;this._setSVGBg(f);for(var h=0,m=d.length;h<m;h++)""!==d[h]?(this._setSVGTextLineText(d[h],h,e,b,g,f),g=1):g++,this.textBackgroundColor&&this._boundaries&&this._setSVGTextLineBg(f,h,c,b);return{textSpans:e,textBgRects:f}},_setSVGTextLineText:function(b,d,e,h,m){var p=this._boundaries&&this._boundaries[d]?f(this._boundaries[d].left,2):0;e.push('<tspan x="',p,'" ',0===d||this.useNative?"y":"dy",'="',f(this.useNative?h*
d-this.height/2:h*m,2),'" ',this._getFillAttributes(this.fill),">",c.util.string.escapeXml(b),"</tspan>")},_setSVGTextLineBg:function(b,c,d,e){b.push("<rect ",this._getFillAttributes(this.textBackgroundColor),' x="',f(d+this._boundaries[c].left,2),'" y="',f(e*c-this.height/2,2),'" width="',f(this._boundaries[c].width,2),'" height="',f(this._boundaries[c].height,2),'"></rect>\n')},_setSVGBg:function(b){this.backgroundColor&&this._boundaries&&b.push("<rect ",this._getFillAttributes(this.backgroundColor),
' x="',f(-this.width/2,2),'" y="',f(-this.height/2,2),'" width="',f(this.width,2),'" height="',f(this.height,2),'"></rect>')},_getFillAttributes:function(b){var d=b&&"string"===typeof b?new c.Color(b):"";return d&&d.getSource()&&1!==d.getAlpha()?'opacity="'+d.getAlpha()+'" fill="'+d.setAlpha(1).toRgb()+'"':'fill="'+b+'"'},_set:function(b,c){"fontFamily"===b&&this.path&&(this.path=this.path.replace(/(.*?)([^\/]*)(\.font\.js)/,"$1"+c+"$3"));this.callSuper("_set",b,c);b in this._dimensionAffectingProps&&
(this._initDimensions(),this.setCoords())},complexity:function(){return 1}}),c.Text.ATTRIBUTE_NAMES=c.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size text-decoration text-anchor".split(" ")),c.Text.DEFAULT_SVG_FONT_SIZE=16,c.Text.fromElement=function(b,d){if(!b)return null;var e=c.parseAttributes(b,c.Text.ATTRIBUTE_NAMES);d=c.util.object.extend(d?c.util.object.clone(d):{},e);"dx"in e&&(d.left+=e.dx);"dy"in e&&(d.top+=e.dy);"fontSize"in d||(d.fontSize=c.Text.DEFAULT_SVG_FONT_SIZE);
d.originX||(d.originX="left");var e=new c.Text(b.textContent,d),f=0;"left"===e.originX&&(f=e.getWidth()/2);"right"===e.originX&&(f=-e.getWidth()/2);e.set({left:e.getLeft()+f,top:e.getTop()-e.getHeight()/2});return e},c.Text.fromObject=function(b){return new c.Text(b.text,e(b))},c.util.createAccessors(c.Text))})("undefined"!==typeof c?c:this)}).call(this,b("buffer").Buffer)},{buffer:2,canvas:1,jsdom:1}]},{},[6])(6)});
var BlobBuilder=BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder||function(a){var b=function(a){return Object.prototype.toString.call(a).match(/^\[object\s(.*)\]$/)[1]},e=function(){this.data=[]},c=function(a,b,c){this.data=a;this.size=a.length;this.type=b;this.encoding=c},d=e.prototype,f=c.prototype,n=a.FileReaderSync,h=function(a){this.code=this[this.name=a]},g="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),
m=g.length,p=a.URL||a.webkitURL||a,r=p.createObjectURL,t=p.revokeObjectURL,l=p,q=a.btoa,w=a.atob,u=!1,v=function(a){u=!a},E=a.ArrayBuffer,A=a.Uint8Array;for(e.fake=f.fake=!0;m--;)h.prototype[g[m]]=m+1;try{A&&v.apply(0,new A(1))}catch(K){}p.createObjectURL||(l=a.URL={});l.createObjectURL=function(a){var b=a.type;null===b&&(b="application/octet-stream");if(a instanceof c)return b="data:"+b,"base64"===a.encoding?b+";base64,"+a.data:"URI"===a.encoding?b+","+decodeURIComponent(a.data):q?b+";base64,"+q(a.data):
b+","+encodeURIComponent(a.data);if(r)return r.call(p,a)};l.revokeObjectURL=function(a){"data:"!==a.substring(0,5)&&t&&t.call(p,a)};d.append=function(a){var d=this.data;if(A&&a instanceof E)if(u)d.push(String.fromCharCode.apply(String,new A(a)));else{d="";a=new A(a);for(var e=0,f=a.length;e<f;e++)d+=String.fromCharCode(a[e])}else if("Blob"===b(a)||"File"===b(a))if(n)e=new n,d.push(e.readAsBinaryString(a));else throw new h("NOT_READABLE_ERR");else a instanceof c?"base64"===a.encoding&&w?d.push(w(a.data)):
"URI"===a.encoding?d.push(decodeURIComponent(a.data)):"raw"===a.encoding&&d.push(a.data):("string"!==typeof a&&(a+=""),d.push(unescape(encodeURIComponent(a))))};d.getBlob=function(a){arguments.length||(a=null);return new c(this.data.join(""),a,"raw")};d.toString=function(){return"[object BlobBuilder]"};f.slice=function(a,b,d){var e=arguments.length;3>e&&(d=null);return new c(this.data.slice(a,1<e?b:this.data.length),d,this.encoding)};f.toString=function(){return"[object Blob]"};return e}(self),saveAs=
saveAs||navigator.msSaveBlob&&navigator.msSaveBlob.bind(navigator)||function(a){var b=a.document,e=a.URL||a.webkitURL||a,c=b.createElementNS("http://www.w3.org/1999/xhtml","a"),d="download"in c,f=function(c){var d=b.createEvent("MouseEvents");d.initMouseEvent("click",!0,!1,a,0,0,0,0,0,!1,!1,!1,!1,0,null);return c.dispatchEvent(d)},n=a.webkitRequestFileSystem,h=a.requestFileSystem||n||a.mozRequestFileSystem,g=function(b){(a.setImmediate||a.setTimeout)(function(){throw b;},0)},m=0,p=[],r=function(a,
b,c){b=[].concat(b);for(var d=b.length;d--;){var e=a["on"+b[d]];if("function"===typeof e)try{e.call(a,c||a)}catch(f){g(f)}}},t=function(b,e){var g=this,l=b.type,t=!1,A,K,F=function(){var c=(a.URL||a.webkitURL||a).createObjectURL(b);p.push(c);return c},z=function(){r(g,["writestart","progress","write","writeend"])},B=function(){if(t||!A)A=F(b);K&&(K.location.href=A);g.readyState=g.DONE;z()},H=function(a){return function(){if(g.readyState!==g.DONE)return a.apply(this,arguments)}},G={create:!0,exclusive:!1},
I;g.readyState=g.INIT;e||(e="download");if(d&&(A=F(b),c.href=A,c.download=e,f(c))){g.readyState=g.DONE;z();return}a.chrome&&l&&"application/octet-stream"!==l&&(I=b.slice||b.webkitSlice,b=I.call(b,0,b.size,"application/octet-stream"),t=!0);n&&"download"!==e&&(e+=".download");K="application/octet-stream"===l||n?a:a.open();h?(m+=b.size,h(a.TEMPORARY,m,H(function(a){a.root.getDirectory("saved",G,H(function(a){var c=function(){a.getFile(e,G,H(function(a){a.createWriter(H(function(c){c.onwriteend=function(b){K.location.href=
a.toURL();p.push(a);g.readyState=g.DONE;r(g,"writeend",b)};c.onerror=function(){var a=c.error;a.code!==a.ABORT_ERR&&B()};["writestart","progress","write","abort"].forEach(function(a){c["on"+a]=g["on"+a]});c.write(b);g.abort=function(){c.abort();g.readyState=g.DONE};g.readyState=g.WRITING}),B)}),B)};a.getFile(e,{create:!1},H(function(a){a.remove();c()}),H(function(a){a.code===a.NOT_FOUND_ERR?c():B()}))}),B)}),B)):B()},l=t.prototype;l.abort=function(){this.readyState=this.DONE;r(this,"abort")};l.readyState=
l.INIT=0;l.WRITING=1;l.DONE=2;l.error=l.onwritestart=l.onprogress=l.onwrite=l.onabort=l.onerror=l.onwriteend=null;a.addEventListener("unload",function(){for(var a=p.length;a--;){var b=p[a];"string"===typeof b?e.revokeObjectURL(b):b.remove()}p.length=0},!1);return function(a,b){return new t(a,b)}}(self),jsPDF=function(a){function b(b){var c={};this.subscribe=function(a,b,d){if("function"!==typeof b)return!1;c.hasOwnProperty(a)||(c[a]={});var e=Math.random().toString(35);c[a][e]=[b,!!d];return e};this.unsubscribe=
function(a){for(var b in c)if(c[b][a])return delete c[b][a],!0;return!1};this.publish=function(e){if(c.hasOwnProperty(e)){var h=Array.prototype.slice.call(arguments,1),g=[],m;for(m in c[e]){var p=c[e][m];try{p[0].apply(b,h)}catch(r){a.console&&console.error("jsPDF PubSub Error",r.message,r)}p[1]&&g.push(m)}g.length&&g.forEach(this.unsubscribe)}}}function e(d,f,n,h){var g={};"object"===typeof d&&(g=d,d=g.orientation,f=g.unit||f,n=g.format||n,h=g.compress||g.compressPdf||h);f=f||"mm";n=n||"a4";d=(""+
(d||"P")).toLowerCase();(""+n).toLowerCase();var m=!!h&&"function"===typeof Uint8Array,p=g.textColor||"0 g",r=g.drawColor||"0 G",t=g.fontSize||16,l=g.lineHeight||1.15,q=g.lineWidth||.200025,w=2,u=!1,v=[],E={},A={},K,F,z,B=0,H,G=[],I={},N=[],L=0,x=0,S=0,D,J,V,Y,W,U={title:"",subject:"",author:"",keywords:"",creator:""},M={},Q=new b(M),X=function(a){return a.toFixed(2)},ea=function(a){return("0"+parseInt(a)).slice(-2)},O=function(a){u?G[H].push(a):(S+=a.length+1,N.push(a))},aa=function(){w++;v[w]=S;
O(w+" 0 obj");return w},ia=function(a){O("stream");O(a);O("endstream")},ta=function(a,b){var c;c=a;var d,e,f,g,h,l,m;d=b||{};e=d.sourceEncoding||"Unicode";g=d.outputEncoding;if((d.autoencode||g)&&E[K].metadata&&E[K].metadata[e]&&E[K].metadata[e].encoding&&(e=E[K].metadata[e].encoding,!g&&E[K].encoding&&(g=E[K].encoding),!g&&e.codePages&&(g=e.codePages[0]),"string"===typeof g&&(g=e[g]),g)){l=!1;h=[];e=0;for(f=c.length;e<f;e++)(m=g[c.charCodeAt(e)])?h.push(String.fromCharCode(m)):h.push(c[e]),h[e].charCodeAt(0)>>
8&&(l=!0);c=h.join("")}for(e=c.length;void 0===l&&0!==e;)c.charCodeAt(e-1)>>8&&(l=!0),e--;if(l){h=d.noBOM?[]:[254,255];e=0;for(f=c.length;e<f;e++){m=c.charCodeAt(e);d=m>>8;if(d>>8)throw Error("Character at position "+e+" of string '"+c+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");h.push(d);h.push(m-(d<<8))}c=String.fromCharCode.apply(void 0,h)}return c.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},da=function(a,b){var d="string"===typeof b&&b.toLowerCase();if("string"===
typeof a){var e=a.toLowerCase();c.hasOwnProperty(e)&&(a=c[e][0]/F,b=c[e][1]/F)}Array.isArray(a)&&(b=a[1],a=a[0]);if(d){switch(d.substr(0,1)){case "l":b>a&&(d="s");break;case "p":a>b&&(d="s")}"s"===d&&(z=a,a=b,b=z)}u=!0;G[++B]=[];I[B]={width:Number(a)||D,height:Number(b)||J};Ba(B)},ha=function(){da.apply(this,arguments);O(X(q*F)+" w");O(r);0!==L&&O(L+" J");0!==x&&O(x+" j");Q.publish("addPage",{pageNumber:B})},Ba=function(a){0<a&&a<=B&&(H=a,D=I[a].width,J=I[a].height)},y=function(a,b){var c;a=void 0!==
a?a:E[K].fontName;b=void 0!==b?b:E[K].fontStyle;try{c=A[a][b]}catch(d){}if(!c)throw Error("Unable to look up font label for font '"+a+"', '"+b+"'. Refer to getFontList() for available fonts.");return c},za=function(){u=!1;w=2;N=[];v=[];O("%PDF-1.3");var b,c,d,f,g;g=a.adler32cs||e.adler32cs;m&&"undefined"===typeof g&&(m=!1);for(b=1;b<=B;b++){aa();d=(D=I[b].width)*F;c=(J=I[b].height)*F;O("<</Type /Page");O("/Parent 1 0 R");O("/Resources 2 0 R");O("/MediaBox [0 0 "+X(d)+" "+X(c)+"]");O("/Contents "+
(w+1)+" 0 R>>");O("endobj");c=G[b].join("\n");aa();if(m){d=[];for(f=c.length;f--;)d[f]=c.charCodeAt(f);f=g.from(c);c=new Deflater(6);c.append(new Uint8Array(d));c=c.flush();d=new Uint8Array(c.length+6);d.set(new Uint8Array([120,156]));d.set(c,2);d.set(new Uint8Array([f&255,f>>8&255,f>>16&255,f>>24&255]),c.length+2);c=String.fromCharCode.apply(null,d);O("<</Length "+c.length+" /Filter [/FlateDecode]>>")}else O("<</Length "+c.length+">>");ia(c);O("endobj")}v[1]=S;O("1 0 obj");O("<</Type /Pages");b=
"/Kids [";for(f=0;f<B;f++)b+=3+2*f+" 0 R ";O(b+"]");O("/Count "+B);O(">>");O("endobj");for(var h in E)E.hasOwnProperty(h)&&(b=E[h],b.objectNumber=aa(),O("<</BaseFont/"+b.PostScriptName+"/Type/Font"),"string"===typeof b.encoding&&O("/Encoding/"+b.encoding),O("/Subtype/Type1>>"),O("endobj"));Q.publish("putResources");v[2]=S;O("2 0 obj");O("<<");O("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]");O("/Font <<");for(var l in E)E.hasOwnProperty(l)&&O("/"+l+" "+E[l].objectNumber+" 0 R");O(">>");O("/XObject <<");
Q.publish("putXobjectDict");O(">>");O(">>");O("endobj");Q.publish("postPutResources");aa();O("<<");O("/Producer (jsPDF "+e.version+")");for(var p in U)U.hasOwnProperty(p)&&U[p]&&O("/"+p.substr(0,1).toUpperCase()+p.substr(1)+" ("+ta(U[p])+")");h=new Date;b=h.getTimezoneOffset();l=0>b?"+":"-";p=Math.floor(Math.abs(b/60));b=Math.abs(b%60);l=[l,ea(p),"'",ea(b),"'"].join("");O(["/CreationDate (D:",h.getFullYear(),ea(h.getMonth()+1),ea(h.getDate()),ea(h.getHours()),ea(h.getMinutes()),ea(h.getSeconds()),
l,")"].join(""));O(">>");O("endobj");aa();O("<<");O("/Type /Catalog");O("/Pages 1 0 R");Y||(Y="fullwidth");switch(Y){case "fullwidth":O("/OpenAction [3 0 R /FitH null]");break;case "fullheight":O("/OpenAction [3 0 R /FitV null]");break;case "fullpage":O("/OpenAction [3 0 R /Fit]");break;case "original":O("/OpenAction [3 0 R /XYZ null null 1]");break;default:h=""+Y,"%"===h.substr(h.length-1)&&(Y=parseInt(Y)/100),"number"===typeof Y&&O("/OpenAction [3 0 R /XYZ null null "+X(Y)+"]")}W||(W="continuous");
switch(W){case "continuous":O("/PageLayout /OneColumn");break;case "single":O("/PageLayout /SinglePage");break;case "two":case "twoleft":O("/PageLayout /TwoColumnLeft");break;case "tworight":O("/PageLayout /TwoColumnRight")}V&&O("/PageMode /"+V);Q.publish("putCatalog");O(">>");O("endobj");h=S;O("xref");O("0 "+(w+1));O("0000000000 65535 f ");for(l=1;l<=w;l++)O(("0000000000"+v[l]).slice(-10)+" 00000 n ");O("trailer");O("<<");O("/Size "+(w+1));O("/Root "+w+" 0 R");O("/Info "+(w-1)+" 0 R");O(">>");O("startxref");
O(h);O("%%EOF");u=!0;return N.join("\n")},pa=function(a){var b="S";if("F"===a)b="f";else if("FD"===a||"DF"===a)b="B";else if("f"===a||"f*"===a||"B"===a||"B*"===a)b=a;return b},C=function(){for(var a=za(),b=a.length,c=new ArrayBuffer(b),d=new Uint8Array(c);b--;)d[b]=a.charCodeAt(b);return c},pb=function(){return new Blob([C()],{type:"application/pdf"})},Ra=function(b){b.foo=function(){try{return b.apply(this,arguments)}catch(c){var d=c.stack||"";~d.indexOf(" at ")&&(d=d.split(" at ")[1]);d="Error in function "+
d.split("\n")[0].split("<")[0]+": "+c.message;if(a.console)a.console.error(d,c),a.alert&&alert(d);else throw Error(d);}};b.foo.bar=b;return b.foo}(function(b,c){var d="dataur"===(""+b).substr(0,6)?"data:application/pdf;base64,"+btoa(za()):0;switch(b){case void 0:return za();case "save":if(navigator.getUserMedia&&(void 0===a.URL||void 0===a.URL.createObjectURL))return M.output("dataurlnewwindow");saveAs(pb(),c);"function"===typeof saveAs.unload&&a.setTimeout&&setTimeout(saveAs.unload,911);break;case "arraybuffer":return C();
case "blob":return pb();case "bloburi":case "bloburl":return a.URL&&a.URL.createObjectURL(pb())||void 0;case "datauristring":case "dataurlstring":return d;case "dataurlnewwindow":var e=a.open(d);if(e||"undefined"===typeof safari)return e;case "datauri":case "dataurl":return a.document.location.href=d;default:throw Error('Output type "'+b+'" is not supported.');}});switch(f){case "pt":F=1;break;case "mm":F=72/25.4;break;case "cm":F=72/2.54;break;case "in":F=72;break;case "px":F=96/72;break;case "pc":F=
12;break;case "em":F=12;break;case "ex":F=6;break;default:throw"Invalid unit: "+f;}M.internal={pdfEscape:ta,getStyle:pa,getFont:function(){return E[y.apply(M,arguments)]},getFontSize:function(){return t},getLineHeight:function(){return t*l},write:function(a){O(1===arguments.length?a:Array.prototype.join.call(arguments," "))},getCoordinateString:function(a){return X(a*F)},getVerticalCoordinateString:function(a){return X((J-a)*F)},collections:{},newObject:aa,putStream:ia,events:Q,scaleFactor:F,pageSize:{width:function(){return D},
height:function(){return J}},output:function(a,b){return Ra(a,b)},getNumberOfPages:function(){return G.length-1},pages:G};M.addPage=function(){ha.apply(this,arguments);return this};M.setPage=function(){Ba.apply(this,arguments);return this};M.setDisplayMode=function(a,b,c){Y=a;W=b;V=c;return this};M.text=function(a,b,c,d,e){function f(a){a=a.split("\t").join(Array(g.TabLen||9).join(" "));return ta(a,d)}"number"===typeof a&&(z=c,c=b,b=a,a=z);"string"===typeof a&&a.match(/[\n\r]/)&&(a=a.split(/\r\n|\r|\n/g));
"number"===typeof d&&(e=d,d=null);var h="",m="Td",n;e&&(e*=Math.PI/180,h=Math.cos(e),m=Math.sin(e),h=[X(h),X(m),X(-1*m),X(h),""].join(" "),m="Tm");d=d||{};"noBOM"in d||(d.noBOM=!0);"autoencode"in d||(d.autoencode=!0);if("string"===typeof a)a=f(a);else if(a instanceof Array){e=a.concat();a=[];for(var q=e.length;q--;)a.push(f(e.shift()));e=Math.ceil((J-c)*F/(t*l));0<=e&&e<a.length+1&&(n=a.splice(e-1));a=a.join(") Tj\nT* (")}else throw Error('Type of text must be string or Array. "'+a+'" is not recognized.');
O("BT\n/"+K+" "+t+" Tf\n"+t*l+" TL\n"+p+"\n"+h+X(b*F)+" "+X((J-c)*F)+" "+m+"\n("+a+") Tj\nET");n&&(this.addPage(),this.text(n,b,1.7*t/F));return this};M.lstext=function(a,b,c,d){for(var e=0,f=a.length;e<f;e++,b+=d)this.text(a[e],b,c)};M.line=function(a,b,c,d){return this.lines([[c-a,d-b]],a,b)};M.clip=function(){O("W");O("S")};M.lines=function(a,b,c,d,e,f){var g,h,l,m,p,n,q,r;"number"===typeof a&&(z=c,c=b,b=a,a=z);d=d||[1,1];O((b*F).toFixed(3)+" "+((J-c)*F).toFixed(3)+" m ");g=d[0];d=d[1];h=a.length;
r=c;for(c=0;c<h;c++)l=a[c],2===l.length?(b=l[0]*g+b,r=l[1]*d+r,O((b*F).toFixed(3)+" "+((J-r)*F).toFixed(3)+" l")):(m=l[0]*g+b,p=l[1]*d+r,n=l[2]*g+b,q=l[3]*d+r,b=l[4]*g+b,r=l[5]*d+r,O((m*F).toFixed(3)+" "+((J-p)*F).toFixed(3)+" "+(n*F).toFixed(3)+" "+((J-q)*F).toFixed(3)+" "+(b*F).toFixed(3)+" "+((J-r)*F).toFixed(3)+" c"));f&&O(" h");null!==e&&O(pa(e));return this};M.rect=function(a,b,c,d,e){pa(e);O([X(a*F),X((J-b)*F),X(c*F),X(-d*F),"re"].join(" "));null!==e&&O(pa(e));return this};M.triangle=function(a,
b,c,d,e,f,g){this.lines([[c-a,d-b],[e-c,f-d],[a-e,b-f]],a,b,[1,1],g,!0);return this};M.roundedRect=function(a,b,c,d,e,f,g){var h=4/3*(Math.SQRT2-1);this.lines([[c-2*e,0],[e*h,0,e,f-f*h,e,f],[0,d-2*f],[0,f*h,-(e*h),f,-e,f],[-c+2*e,0],[-(e*h),0,-e,-(f*h),-e,-f],[0,-d+2*f],[0,-(f*h),e*h,-f,e,-f]],a+e,b,[1,1],g);return this};M.ellipse=function(a,b,c,d,e){var f=4/3*(Math.SQRT2-1)*c,g=4/3*(Math.SQRT2-1)*d;O([X((a+c)*F),X((J-b)*F),"m",X((a+c)*F),X((J-(b-g))*F),X((a+f)*F),X((J-(b-d))*F),X(a*F),X((J-(b-d))*
F),"c"].join(" "));O([X((a-f)*F),X((J-(b-d))*F),X((a-c)*F),X((J-(b-g))*F),X((a-c)*F),X((J-b)*F),"c"].join(" "));O([X((a-c)*F),X((J-(b+g))*F),X((a-f)*F),X((J-(b+d))*F),X(a*F),X((J-(b+d))*F),"c"].join(" "));O([X((a+f)*F),X((J-(b+d))*F),X((a+c)*F),X((J-(b+g))*F),X((a+c)*F),X((J-b)*F),"c"].join(" "));null!==e&&O(pa(e));return this};M.circle=function(a,b,c,d){return this.ellipse(a,b,c,c,d)};M.setProperties=function(a){for(var b in U)U.hasOwnProperty(b)&&a[b]&&(U[b]=a[b]);return this};M.setFontSize=function(a){t=
a;return this};M.setFont=function(a,b){K=y(a,b);return this};M.setFontStyle=M.setFontType=function(a){K=y(void 0,a);return this};M.getFontList=function(){var a={},b,c,d;for(b in A)if(A.hasOwnProperty(b))for(c in a[b]=d=[],A[b])A[b].hasOwnProperty(c)&&d.push(c);return a};M.setLineWidth=function(a){O((a*F).toFixed(2)+" w");return this};M.setDrawColor=function(a,b,c,d){a=void 0===b||void 0===d&&a===b===c?"string"===typeof a?a+" G":X(a/255)+" G":void 0===d?"string"===typeof a?[a,b,c,"RG"].join(" "):[X(a/
255),X(b/255),X(c/255),"RG"].join(" "):"string"===typeof a?[a,b,c,d,"K"].join(" "):[X(a),X(b),X(c),X(d),"K"].join(" ");O(a);return this};M.setFillColor=function(a,b,c,d){a=void 0===b||void 0===d&&a===b===c?"string"===typeof a?a+" g":X(a/255)+" g":void 0===d?"string"===typeof a?[a,b,c,"rg"].join(" "):[X(a/255),X(b/255),X(c/255),"rg"].join(" "):"string"===typeof a?[a,b,c,d,"k"].join(" "):[X(a),X(b),X(c),X(d),"k"].join(" ");O(a);return this};M.setTextColor=function(a,b,c){"string"===typeof a&&/^#[0-9A-Fa-f]{6}$/.test(a)&&
(c=parseInt(a.substr(1),16),a=c>>16&255,b=c>>8&255,c&=255);p=0===a&&0===b&&0===c||"undefined"===typeof b?(a/255).toFixed(3)+" g":[(a/255).toFixed(3),(b/255).toFixed(3),(c/255).toFixed(3),"rg"].join(" ");return this};M.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2};M.setLineCap=function(a){var b=this.CapJoinStyles[a];if(void 0===b)throw Error("Line cap style of '"+a+"' is not recognized. See or extend .CapJoinStyles property for valid styles");
L=b;O(b+" J");return this};M.setLineJoin=function(a){var b=this.CapJoinStyles[a];if(void 0===b)throw Error("Line join style of '"+a+"' is not recognized. See or extend .CapJoinStyles property for valid styles");x=b;O(b+" j");return this};M.output=Ra;M.save=function(a){M.output("save",a)};for(var Ka in e.API)e.API.hasOwnProperty(Ka)&&("events"===Ka&&e.API.events.length?function(a,b){var c,d,e;for(e=b.length-1;-1!==e;e--)c=b[e][0],d=b[e][1],a.subscribe.apply(a,[c].concat("function"===typeof d?[d]:d))}(Q,
e.API.events):M[Ka]=e.API[Ka]);(function(){for(var a=[["Helvetica","helvetica","normal"],["Helvetica-Bold","helvetica","bold"],["Helvetica-Oblique","helvetica","italic"],["Helvetica-BoldOblique","helvetica","bolditalic"],["Courier","courier","normal"],["Courier-Bold","courier","bold"],["Courier-Oblique","courier","italic"],["Courier-BoldOblique","courier","bolditalic"],["Times-Roman","times","normal"],["Times-Bold","times","bold"],["Times-Italic","times","italic"],["Times-BoldItalic","times","bolditalic"]],
b=0,c=a.length;b<c;b++){var d,e=a[b][0],f=a[b][1];d=a[b][2];var g="F"+(Object.keys(E).length+1).toString(10),e=E[g]={id:g,PostScriptName:e,fontName:f,fontStyle:d,encoding:"StandardEncoding",metadata:{}},h=g;A.hasOwnProperty(f)||(A[f]={});A[f][d]=h;Q.publish("addFont",e);d=g;g=a[b][0].split("-");e=g[0];g=g[1]||"";A.hasOwnProperty(e)||(A[e]={});A[e][g]=d}Q.publish("addFonts",{fonts:E,dictionary:A})})();K="F1";ha(n,d);Q.publish("initialized");return M}var c={a0:[2383.94,3370.39],a1:[1683.78,2383.94],
a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],
c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};e.API={events:[]};e.version="1.0.272-debug 2014-09-29T15:09:diegocr";"function"===typeof define&&define.amd?define("jsPDF",function(){return e}):a.jsPDF=e;return e}("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||this);
(function(a){a.addHTML=function(a,e,c,d,f){if("undefined"===typeof html2canvas&&"undefined"===typeof rasterizeHTML)throw Error("You need either https://github.com/niklasvh/html2canvas or https://github.com/cburgmer/rasterizeHTML.js");"number"!==typeof e&&(d=e,f=c);"function"===typeof d&&(f=d,d=null);var n=this.internal,h=n.scaleFactor,g=n.pageSize.width,m=n.pageSize.height;d=d||{};d.onrendered=function(a){e=parseInt(e)||0;c=parseInt(c)||0;var b=d.dim||{},n=b.h||0,l=b.w||Math.min(g,a.width/h)-e,q=
"JPEG";d.format&&(q=d.format);if(a.height>m&&d.pagesplit)n=function(){for(var b=0;;){var d=document.createElement("canvas");d.width=Math.min(g*h,a.width);d.height=Math.min(m*h,a.height-b);d.getContext("2d").drawImage(a,0,b,a.width,d.height,0,0,d.width,d.height);var n=[d,e,b?0:c,d.width/h,d.height/h,q,null,"SLOW"];this.addImage.apply(this,n);b+=d.height;if(b>=a.height)break;this.addPage()}f(l,b,null,n)}.bind(this),"CANVAS"===a.nodeName?(b=new Image,b.onload=n,b.src=a.toDataURL("image/png"),a=b):n();
else{var b=Math.random().toString(35),w=[a,e,c,l,n,q,b,"SLOW"];this.addImage.apply(this,w);f(l,n,b,w)}}.bind(this);return"undefined"===typeof html2canvas||d.rstz?"undefined"!==typeof rasterizeHTML?(n="drawDocument","string"===typeof a&&(n=/^http/.test(a)?"drawURL":"drawHTML"),d.width=d.width||g*h,rasterizeHTML[n](a,void 0,d).then(function(a){d.onrendered(a.image)},function(a){f(null,a)})):null:html2canvas(a,d)}})(jsPDF.API);
(function(a){var b=["jpeg","jpg","png"],e=function(a){var b=this.internal.newObject(),c=this.internal.write,d=this.internal.putStream;a.n=b;c("<</Type /XObject");c("/Subtype /Image");c("/Width "+a.w);c("/Height "+a.h);a.cs===this.color_spaces.INDEXED?c("/ColorSpace [/Indexed /DeviceRGB "+(a.pal.length/3-1)+" "+("smask"in a?b+2:b+1)+" 0 R]"):(c("/ColorSpace /"+a.cs),a.cs===this.color_spaces.DEVICE_CMYK&&c("/Decode [1 0 1 0 1 0 1 0]"));c("/BitsPerComponent "+a.bpc);"f"in a&&c("/Filter /"+a.f);"dp"in
a&&c("/DecodeParms <<"+a.dp+">>");if("trns"in a&&a.trns.constructor==Array){for(var f="",h=0,n=a.trns.length;h<n;h++)f+=a.trns[h]+" "+a.trns[h]+" ";c("/Mask ["+f+"]")}"smask"in a&&c("/SMask "+(b+1)+" 0 R");c("/Length "+a.data.length+">>");d(a.data);c("endobj");"smask"in a&&(b={w:a.w,h:a.h,cs:"DeviceGray",bpc:a.bpc,dp:"/Predictor 15 /Colors 1 /BitsPerComponent "+a.bpc+" /Columns "+a.w,data:a.smask},"f"in a&&(b.f=a.f),e.call(this,b));a.cs===this.color_spaces.INDEXED&&(this.internal.newObject(),c("<< /Length "+
a.pal.length+">>"),d(this.arrayBufferToBinaryString(new Uint8Array(a.pal))),c("endobj"))},c=function(){var a=this.internal.collections.addImage_images,b;for(b in a)e.call(this,a[b])},d=function(){var a=this.internal.collections.addImage_images,b=this.internal.write,c,d;for(d in a)c=a[d],b("/I"+c.i,c.n,"0","R")},f=function(b){b&&"string"===typeof b&&(b=b.toUpperCase());return b in a.image_compression?b:a.image_compression.NONE},n=function(a){var b=0;if(a){if(Object.keys)a=Object.keys(a).length;else{var b=
0,c;for(c in a)a.hasOwnProperty(c)&&b++;a=b}b=a}return b},h=function(a,b){var c;if(b)for(var d in b)if(a===b[d].alias){c=b[d];break}return c};a.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPERATION:"Seperation",DEVICE_N:"DeviceN"};a.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",
ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};a.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"};a.sHashCode=function(a){return Array.prototype.reduce&&a.split("").reduce(function(a,b){a=(a<<5)-a+b.charCodeAt(0);return a&a},0)};a.isString=function(a){return"string"===typeof a};a.extractInfoFromBase64DataURI=function(a){return/^data:([\w]+?\/([\w]+?));base64,(.+?)$/g.exec(a)};a.supportsArrayBuffer=
function(){return"undefined"!==typeof ArrayBuffer&&"undefined"!==typeof Uint8Array};a.isArrayBuffer=function(a){return this.supportsArrayBuffer()?a instanceof ArrayBuffer:!1};a.isArrayBufferView=function(a){return this.supportsArrayBuffer()&&"undefined"!==typeof Uint32Array?a instanceof Int8Array||a instanceof Uint8Array||"undefined"!==typeof Uint8ClampedArray&&a instanceof Uint8ClampedArray||a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof
Float32Array||a instanceof Float64Array:!1};a.binaryStringToUint8Array=function(a){for(var b=a.length,c=new Uint8Array(b),d=0;d<b;d++)c[d]=a.charCodeAt(d);return c};a.arrayBufferToBinaryString=function(a){this.isArrayBuffer(a)&&(a=new Uint8Array(a));for(var b="",c=a.byteLength,d=0;d<c;d++)b+=String.fromCharCode(a[d]);return b};a.arrayBufferToBase64=function(a){var b="";a=new Uint8Array(a);for(var c=a.byteLength,d=c%3,c=c-d,e,f,h,n,u=0;u<c;u+=3)n=a[u]<<16|a[u+1]<<8|a[u+2],e=(n&16515072)>>18,f=(n&258048)>>
12,h=(n&4032)>>6,n&=63,b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[f]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[h]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[n];1==d?(n=a[c],b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(n&252)>>2]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(n&3)<<4]+"=="):2==d&&(n=a[c]<<8|
a[c+1],b+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(n&64512)>>10]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(n&1008)>>4]+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(n&15)<<2]+"=");return b};a.createImageInfo=function(a,b,c,d,e,f,h,n,u,v,E,A){a={alias:n,w:b,h:c,cs:d,bpc:e,i:h,data:a};f&&(a.f=f);u&&(a.dp=u);v&&(a.trns=v);E&&(a.pal=E);A&&(a.smask=A);return a};a.addImage=function(e,m,p,r,t,l,q,w,u){if("string"!==typeof m){var v=
l;l=t;t=r;r=p;p=m;m=v}"object"===typeof e&&("object"!==typeof e||1!==e.nodeType)&&"imageData"in e&&(v=e,e=v.imageData,m=v.format||m,p=v.x||p||0,r=v.y||r||0,t=v.w||t,l=v.h||l,q=v.alias||q,w=v.compression||w,u=v.rotation||v.angle||u);if(isNaN(p)||isNaN(r))throw console.error("jsPDF.addImage: Invalid coordinates",arguments),Error("Invalid coordinates passed to jsPDF.addImage");v=this.internal.collections.addImage_images;v||(this.internal.collections.addImage_images=v={},this.internal.events.subscribe("putResources",
c),this.internal.events.subscribe("putXobjectDict",d));var E;if(!(E=h(e,v))){var A;if("object"===typeof e&&1===e.nodeType)a:{E=e;var K=m,F=u;if("IMG"===E.nodeName&&E.hasAttribute("src")){var z=""+E.getAttribute("src");if(!F&&0===z.indexOf("data:image/")){e=z;break a}!K&&/\.png(?:[?#].*)?$/i.test(z)&&(K="png")}if("CANVAS"===E.nodeName)z=E;else{z=document.createElement("canvas");z.width=E.clientWidth||E.width;z.height=E.clientHeight||E.height;var B=z.getContext("2d");if(!B)throw"addImage requires canvas to be supported by browser.";
if(F){var H,G,I,N,L,x;N=Math.PI/180;var S;"object"===typeof F&&(H=F.x,G=F.y,I=F.bg,F=F.angle);S=F*N;F=Math.abs(Math.cos(S));N=Math.abs(Math.sin(S));L=z.width;x=z.height;z.width=x*N+L*F;z.height=x*F+L*N;isNaN(H)&&(H=z.width/2);isNaN(G)&&(G=z.height/2);B.clearRect(0,0,z.width,z.height);B.fillStyle=I||"white";B.fillRect(0,0,z.width,z.height);B.save();B.translate(H,G);B.rotate(S);B.drawImage(E,-(L/2),-(x/2));B.rotate(-S);B.translate(-H,-G);B.restore()}else B.drawImage(E,0,0,z.width,z.height)}e=z.toDataURL("png"==
(""+K).toLowerCase()?"image/png":"image/jpeg")}if("undefined"===typeof q||null===q)q="string"===typeof e&&a.sHashCode(e);if(!(E=h(q,v))){this.isString(e)&&((H=this.extractInfoFromBase64DataURI(e))?(m=H[2],e=atob(H[3])):137===e.charCodeAt(0)&&80===e.charCodeAt(1)&&78===e.charCodeAt(2)&&71===e.charCodeAt(3)&&(m="png"));m=(m||"JPEG").toLowerCase();if(-1===b.indexOf(m))throw Error("addImage currently only supports formats "+b+", not '"+m+"'");if("function"!==typeof a["process"+m.toUpperCase()])throw Error("please ensure that the plugin for '"+
m+"' support is added");this.supportsArrayBuffer()&&(A=e,e=this.binaryStringToUint8Array(e));E=this["process"+m.toUpperCase()](e,n(v),q,f(w),A);if(!E)throw Error("An unkwown error occurred whilst processing the image");}}A=p;H=r;G=E;I=E.i;E=t;K=l;E||K||(K=E=-96);0>E&&(E=-72*G.w/E/this.internal.scaleFactor);0>K&&(K=-72*G.h/K/this.internal.scaleFactor);0===E&&(E=K*G.w/G.h);0===K&&(K=E*G.h/G.w);B=[E,K];K=this.internal.getCoordinateString;z=this.internal.getVerticalCoordinateString;E=B[0];B=B[1];v[I]=
G;this.internal.write("q",K(E),"0 0",K(B),K(A),z(H+B),"cm /I"+G.i,"Do Q");return this};a.processJPEG=function(a,b,c,d,e){d=this.color_spaces.DEVICE_RGB;var f=this.decode.DCT_DECODE,h;if(this.isString(a)){a:{e=a;var n,u;if(255===!e.charCodeAt(0)||216===!e.charCodeAt(1)||255===!e.charCodeAt(2)||224===!e.charCodeAt(3)||74===!e.charCodeAt(6)||70===!e.charCodeAt(7)||73===!e.charCodeAt(8)||70===!e.charCodeAt(9)||0===!e.charCodeAt(10))throw Error("getJpegSize requires a binary string jpeg file");n=256*e.charCodeAt(4)+
e.charCodeAt(5);h=4;for(u=e.length;h<u;){h+=n;if(255!==e.charCodeAt(h))throw Error("getJpegSize could not find the size of the image");if(192===e.charCodeAt(h+1)||193===e.charCodeAt(h+1)||194===e.charCodeAt(h+1)||195===e.charCodeAt(h+1)||196===e.charCodeAt(h+1)||197===e.charCodeAt(h+1)||198===e.charCodeAt(h+1)||199===e.charCodeAt(h+1)){u=256*e.charCodeAt(h+5)+e.charCodeAt(h+6);n=256*e.charCodeAt(h+7)+e.charCodeAt(h+8);e=e.charCodeAt(h+9);h=[n,u,e];break a}else h+=2,n=256*e.charCodeAt(h)+e.charCodeAt(h+
1)}h=void 0}return this.createImageInfo(a,h[0],h[1],1==h[3]?this.color_spaces.DEVICE_GRAY:d,8,f,b,c)}this.isArrayBuffer(a)&&(a=new Uint8Array(a));if(this.isArrayBufferView(a)){a:{n=a;if(65496!==(n[0]<<8|n[1]))throw Error("Supplied data is not a JPEG");u=n.length;for(var v=(n[4]<<8)+n[5],E=4;E<u;){E+=v;h=n.subarray(E,E+5);v=(h[2]<<8)+h[3];if((192===h[1]||194===h[1])&&255===h[0]&&7<v){h=E+5;h=n.subarray(h,h+5);n=(h[2]<<8)+h[3];u=(h[0]<<8)+h[1];h=h[4];h={width:n,height:u,numcomponents:h};break a}E+=
2}throw Error("getJpegSizeFromBytes could not find the size of the image");}a=e||this.arrayBufferToBinaryString(a);return this.createImageInfo(a,h.width,h.height,1==h.numcomponents?this.color_spaces.DEVICE_GRAY:d,8,f,b,c)}return null};a.processJPG=function(){return this.processJPEG.apply(this,arguments)}})(jsPDF.API);
(function(a){a.autoPrint=function(){var a;this.internal.events.subscribe("postPutResources",function(){a=this.internal.newObject();this.internal.write("<< /S/Named /Type/Action /N/Print >>","endobj")});this.internal.events.subscribe("putCatalog",function(){this.internal.write("/OpenAction "+a+" 0 R")});return this}})(jsPDF.API);
(function(a){var b,e,c,d,f={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},n=1,h={left:0,top:0,bottom:0};a.setHeaderFunction=function(a){d=a};a.getTextDimensions=function(a){b=this.internal.getFont().fontName;e=this.table_font_size||this.internal.getFontSize();c=this.internal.getFont().fontStyle;var d=19.049976/25.4,f;f=document.createElement("font");f.id="jsPDFCell";f.style.fontStyle=c;f.style.fontName=b;f.style.fontSize=e+"pt";f.textContent=a;document.body.appendChild(f);a={w:(f.offsetWidth+1)*
d,h:(f.offsetHeight+1)*d};document.body.removeChild(f);return a};a.cellAddPage=function(){var a=this.margins||h;this.addPage();f={x:a.left,y:a.top,w:void 0,h:void 0,ln:void 0};n+=1};a.cellInitialize=function(){f={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0};n=1};a.cell=function(a,b,c,d,e,l,n){var w=f;void 0!==w.ln&&(w.ln===l?(a=w.x+w.w,b=w.y):(w.y+w.h+d+13>=this.internal.pageSize.height-(this.margins||h).bottom&&(this.cellAddPage(),this.printHeaders&&this.tableHeaderRow&&this.printHeaderRow(l,!0)),
b=f.y+f.h));if(void 0!==e[0])if(this.printingHeaderRow?this.rect(a,b,c,d,"FD"):this.rect(a,b,c,d),"right"===n){if(e instanceof Array)for(n=0;n<e.length;n++){var w=e[n],u=this.getStringUnitWidth(w)*this.internal.getFontSize();this.text(w,a+c-u-3,b+this.internal.getLineHeight()*(n+1))}}else this.text(e,a+3,b+this.internal.getLineHeight());f={x:a,y:b,w:c,h:d,ln:l};return this};a.arrayMax=function(a,b){var c=a[0],d,e,f;d=0;for(e=a.length;d<e;d+=1)f=a[d],b?-1===b(c,f)&&(c=f):f>c&&(c=f);return c};a.table=
function(b,c,d,e,t){if(!d)throw"No data for PDF table";var l=[],q=[],w,u,v,E={},A={},K,F,z=[],B=[],H;v=!1;var G=!0;u=12;K=h;K.width=this.internal.pageSize.width;t&&(!0===t.autoSize&&(v=!0),!1===t.printHeaders&&(G=!1),t.fontSize&&(u=t.fontSize),t.margins&&(K=t.margins));this.lnMod=0;f={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0};n=1;this.printHeaders=G;this.margins=K;this.setFontSize(u);this.table_font_size=u;if(void 0===e||null===e)l=Object.keys(d[0]);else if(e[0]&&"string"!==typeof e[0])for(K=
19.049976/25.4,t=0,u=e.length;t<u;t+=1)w=e[t],l.push(w.name),q.push(w.prompt),A[w.name]=w.width*K;else l=e;if(v)for(H=function(a){return a[w]},t=0,u=l.length;t<u;t+=1){w=l[t];E[w]=d.map(H);z.push(this.getTextDimensions(q[t]||w).w);F=E[w];e=0;for(v=F.length;e<v;e+=1)K=F[e],z.push(this.getTextDimensions(K).w);A[w]=a.arrayMax(z)}if(G){E=this.calculateLineHeight(l,A,q.length?q:l);t=0;for(u=l.length;t<u;t+=1)w=l[t],B.push([b,c,A[w],E,String(q.length?q[t]:w)]);this.setTableHeaderRow(B);this.printHeaderRow(1,
!1)}t=0;for(u=d.length;t<u;t+=1)for(q=d[t],E=this.calculateLineHeight(l,A,q),e=0,B=l.length;e<B;e+=1)w=l[e],this.cell(b,c,A[w],E,q[w],t+2,w.align);this.lastCellPos=f;this.table_x=b;this.table_y=c;return this};a.calculateLineHeight=function(a,b,c){for(var d,e=0,f=0;f<a.length;f++)d=a[f],c[d]=this.splitTextToSize(String(c[d]),b[d]-3),d=this.internal.getLineHeight()*c[d].length+3,d>e&&(e=d);return e};a.setTableHeaderRow=function(a){this.tableHeaderRow=a};a.printHeaderRow=function(a,b){if(!this.tableHeaderRow)throw"Property tableHeaderRow does not exist.";
var c,e,h;this.printingHeaderRow=!0;void 0!==d&&(e=d(this,n),f={x:e[0],y:e[1],w:e[2],h:e[3],ln:-1});this.setFontStyle("bold");var l=[];e=0;for(h=this.tableHeaderRow.length;e<h;e+=1)this.setFillColor(200,200,200),c=this.tableHeaderRow[e],b&&(c[1]=this.margins&&this.margins.top||0,l.push(c)),c=[].concat(c),this.cell.apply(this,c.concat(a));0<l.length&&this.setTableHeaderRow(l);this.setFontStyle("normal");this.printingHeaderRow=!1}})(jsPDF.API);
(function(a){var b,e,c,d,f,n,h,g,m,p,r,t,l,q,w,u,v,E,A;b=function(){function a(){}return function(b){a.prototype=b;return new a}}();m=function(a){var b,c,d,e,f;c=0;d=a.length;for(f=e=!1;!e&&c!==d;)(b=a[c]=a[c].trimLeft())&&(e=!0),c++;for(c=d-1;d&&!f&&-1!==c;)(b=a[c]=a[c].trimRight())&&(f=!0),c--;e=/\s+$/g;f=!0;for(c=0;c!==d;)b=a[c].replace(/\s+/g," "),f&&(b=b.trimLeft()),b&&(f=e.test(b)),a[c]=b,c++;return a};p=function(a,b,c,d){this.pdf=a;this.x=b;this.y=c;this.settings=d;this.watchFunctions=[];this.init();
return this};r=function(a){var b,d;b=void 0;d=a.split(",");for(a=d.shift();!b&&a;)b=c[a.trim().toLowerCase()],a=d.shift();return b};t=function(a){a="auto"===a?"0px":a;-1<a.indexOf("em")&&!isNaN(Number(a.replace("em","")))&&(a=18.719*Number(a.replace("em",""))+"px");-1<a.indexOf("pt")&&!isNaN(Number(a.replace("pt","")))&&(a=1.333*Number(a.replace("pt",""))+"px");var b;if(b=l[a])return b;b={"xx-small":9,"x-small":11,small:13,medium:16,large:19,"x-large":23,"xx-large":28,auto:0}[{css_line_height_string:a}];
if(void 0!==b||(b=parseFloat(a)))return l[a]=b/16;b=a.match(/([\d\.]+)(px)/);return 3===b.length?l[a]=parseFloat(b[1])/16:l[a]=1};g=function(a){var b,c;c=function(a){var b;b=function(a){return document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(a,null):a.currentStyle?a.currentStyle:a.style}(a);return function(a){a=a.replace(/-\D/g,function(a){return a.charAt(1).toUpperCase()});return b[a]}}(a);a={};b=void 0;a["font-family"]=r(c("font-family"))||"times";
a["font-style"]=d[c("font-style")]||"normal";a["text-align"]=TextAlignMap[c("text-align")]||"left";b=f[c("font-weight")]||"normal";"bold"===b&&(a["font-style"]="normal"===a["font-style"]?b:b+a["font-style"]);a["font-size"]=t(c("font-size"))||1;a["line-height"]=t(c("line-height"))||1;a.display="inline"===c("display")?"inline":"block";b="block"===a.display;a["margin-top"]=b&&t(c("margin-top"))||0;a["margin-bottom"]=b&&t(c("margin-bottom"))||0;a["padding-top"]=b&&t(c("padding-top"))||0;a["padding-bottom"]=
b&&t(c("padding-bottom"))||0;a["margin-left"]=b&&t(c("margin-left"))||0;a["margin-right"]=b&&t(c("margin-right"))||0;a["padding-left"]=b&&t(c("padding-left"))||0;a["padding-right"]=b&&t(c("padding-right"))||0;a["float"]=n[c("cssFloat")]||"none";a.clear=h[c("clear")]||"none";return a};q=function(a,b,c){var d,e,f,g;f=!1;if(d=c["#"+a.id])if("function"===typeof d)f=d(a,b);else for(e=0,g=d.length;!f&&e!==g;)f=d[e](a,b),e++;d=c[a.nodeName];if(!f&&d)if("function"===typeof d)f=d(a,b);else for(e=0,g=d.length;!f&&
e!==g;)f=d[e](a,b),e++;return f};A=function(a,b){var c,d,e,f,g,h;c=[];d=[];e=0;h=a.rows[0].cells.length;for(f=a.clientWidth;e<h;)g=a.rows[0].cells[e],d[e]={name:g.textContent.toLowerCase().replace(/\s+/g,""),prompt:g.textContent.replace(/\r?\n/g,""),width:g.clientWidth/f*b.pdf.internal.pageSize.width},e++;for(e=1;e<a.rows.length;){h=a.rows[e];g={};for(f=0;f<h.cells.length;)g[d[f].name]=h.cells[f].textContent.replace(/\r?\n/g,""),f++;c.push(g);e++}return{rows:c,headers:d}};var K={SCRIPT:1,STYLE:1,
NOSCRIPT:1,OBJECT:1,EMBED:1,SELECT:1},F=1;e=function(a,b,c){var d,f,h,l,m,n;f=a.childNodes;d=void 0;a=g(a);if(l="block"===a.display)b.setBlockBoundary(),b.setBlockStyle(a);h=0;for(m=f.length;h<m;){d=f[h];if("object"===typeof d){b.executeWatchFunctions(d);if(1===d.nodeType&&"HEADER"===d.nodeName){var p=d,r=b.pdf.margins_doc.top;b.pdf.internal.events.subscribe("addPage",function(a){b.y=r;e(p,b,c);b.pdf.margins_doc.top=b.y+10;b.y+=10},!1)}if(8===d.nodeType&&"#comment"===d.nodeName)~d.textContent.indexOf("ADD_PAGE")&&
(b.pdf.addPage(),b.y=b.pdf.margins_doc.top);else if(1!==d.nodeType||K[d.nodeName])if(3===d.nodeType){var t=d.nodeValue;if(d.nodeValue&&"LI"===d.parentNode.nodeName)if("OL"===d.parentNode.parentNode.nodeName)t=F++ +". "+t;else{var u=2;20<16*a["font-size"]&&(u=3);n=function(a,b){this.pdf.circle(a,b,u,"FD")}}b.addText(t,a)}else"string"===typeof d&&b.addText(d,a);else{var v;"IMG"===d.nodeName&&(v=d.getAttribute("src"),v=w[b.pdf.sHashCode(v)||v]);if(v){b.pdf.internal.pageSize.height-b.pdf.margins_doc.bottom<
b.y+d.height&&b.y>b.pdf.margins_doc.top&&(b.pdf.addPage(),b.y=b.pdf.margins_doc.top,b.executeWatchFunctions(d));var t=g(d),E=b.x,M=12/b.pdf.internal.scaleFactor,Q=(t["margin-left"]+t["padding-left"])*M,X=(t["margin-right"]+t["padding-right"])*M,ea=(t["margin-top"]+t["padding-top"])*M,M=(t["margin-bottom"]+t["padding-bottom"])*M,E=void 0!==t["float"]&&"right"===t["float"]?E+(b.settings.width-d.width-X):E+Q;b.pdf.addImage(v,E,b.y+ea,d.width,d.height);v=void 0;"right"===t["float"]||"left"===t["float"]?
(b.watchFunctions.push(function(a,c,d,e){return b.y>=c?(b.x+=a,b.settings.width+=d,!0):e&&1===e.nodeType&&!K[e.nodeName]&&b.x+e.width>b.pdf.margins_doc.left+b.pdf.margins_doc.width?(b.x+=a,b.y=c,b.settings.width+=d,!0):!1}.bind(this,"left"===t["float"]?-d.width-Q-X:0,b.y+d.height+ea+M,d.width)),b.watchFunctions.push(function(a,c,d){return b.y<a&&c===b.pdf.internal.getNumberOfPages()?1===d.nodeType&&"both"===g(d).clear?(b.y=a,!0):!1:!0}.bind(this,b.y+d.height,b.pdf.internal.getNumberOfPages())),b.settings.width-=
d.width+Q+X,"left"===t["float"]&&(b.x+=d.width+Q+X)):b.y+=d.height+M}else"TABLE"===d.nodeName?(d=A(d,b),b.y+=10,b.pdf.table(b.x,b.y,d.rows,d.headers,{autoSize:!1,printHeaders:!0,margins:b.pdf.margins_doc}),b.y=b.pdf.lastCellPos.y+b.pdf.lastCellPos.h+20):"OL"===d.nodeName||"UL"===d.nodeName?(F=1,q(d,b,c)||e(d,b,c),b.y+=10):"LI"===d.nodeName?(t=b.x,b.x+="UL"===d.parentNode.nodeName?22:10,b.y+=3,q(d,b,c)||e(d,b,c),b.x=t):"BR"===d.nodeName?b.y+=a["font-size"]*b.pdf.internal.scaleFactor:q(d,b,c)||e(d,
b,c)}}h++}if(l)return b.setBlockBoundary(n)};w={};u=function(a,b,c,d){function e(){b.pdf.internal.events.publish("imagesLoaded");d(g)}function f(a,c,d){if(a){var l=new Image;g=++h;l.crossOrigin="";l.onerror=l.onload=function(){if(l.complete&&(0===l.src.indexOf("data:image/")&&(l.width=c||l.width||0,l.height=d||l.height||0),l.width+l.height)){var f=b.pdf.sHashCode(a)||a;w[f]=w[f]||l}--h||e()};l.src=a}}a=a.getElementsByTagName("img");c=a.length;for(var g,h=0;c--;)f(a[c].getAttribute("src"),a[c].width,
a[c].height);return h||e()};v=function(a,b,c){var d=a.getElementsByTagName("footer");if(0<d.length){d=d[0];a=b.pdf.internal.write;var f=b.y;b.pdf.internal.write=function(){};e(d,b,c);var g=Math.ceil(b.y-f)+5;b.y=f;b.pdf.internal.write=a;b.pdf.margins_doc.bottom+=g;a=function(a){a=void 0!==a?a.pageNumber:1;var f=b.y;b.y=b.pdf.internal.pageSize.height-b.pdf.margins_doc.bottom;b.pdf.margins_doc.bottom-=g;for(var h=d.getElementsByTagName("span"),l=0;l<h.length;++l)-1<(" "+h[l].className+" ").replace(/[\n\t]/g,
" ").indexOf(" pageCounter ")&&(h[l].innerHTML=a),-1<(" "+h[l].className+" ").replace(/[\n\t]/g," ").indexOf(" totalPages ")&&(h[l].innerHTML="###jsPDFVarTotalPages###");e(d,b,c);b.pdf.margins_doc.bottom+=g;b.y=f};for(var f=d.getElementsByTagName("span"),h=0;h<f.length;++h)-1<(" "+f[h].className+" ").replace(/[\n\t]/g," ").indexOf(" totalPages ")&&b.pdf.internal.events.subscribe("htmlRenderingFinished",b.pdf.putTotalPages.bind(b.pdf,"###jsPDFVarTotalPages###"),!0);b.pdf.internal.events.subscribe("addPage",
a,!1);a();K.FOOTER=1}};E=function(a,b,c,d,f,g){if(!b)return!1;"string"===typeof b||b.parentNode||(b=""+b.innerHTML);"string"===typeof b&&(b=function(a){var b,c;c="jsPDFhtmlText"+Date.now().toString()+(1E3*Math.random()).toFixed(0);b=document.createElement("div");b.style.cssText="position: absolute !important;clip: rect(1px 1px 1px 1px); /* IE6, IE7 */clip: rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height: 1px !important;width: 1px !important; top:auto;left:-100px;overflow: hidden;";
b.innerHTML='<iframe style="height:1px;width:1px" name="'+c+'" />';document.body.appendChild(b);b=window.frames[c];b.document.body.innerHTML=a;return b.document.body}(b.replace(/<\/?script[^>]*?>/gi,"")));var h=new p(a,c,d,f),l;u.call(this,b,h,f.elementHandlers,function(a){v(b,h,f.elementHandlers);e(b,h,f.elementHandlers);h.pdf.internal.events.publish("htmlRenderingFinished");l=h.dispose();"function"===typeof g?g(l):a&&console.error("jsPDF Warning: rendering issues? provide a callback to fromHTML!")});
return l||{x:h.x,y:h.y}};p.prototype.init=function(){this.paragraph={text:[],style:[]};return this.pdf.internal.write("q")};p.prototype.dispose=function(){this.pdf.internal.write("Q");return{x:this.x,y:this.y,ready:!0}};p.prototype.executeWatchFunctions=function(a){var b=!1,c=[];if(0<this.watchFunctions.length){for(var d=0;d<this.watchFunctions.length;++d)!0===this.watchFunctions[d](a)?b=!0:c.push(this.watchFunctions[d]);this.watchFunctions=c}return b};p.prototype.splitFragmentsIntoLines=function(a,
c){var d,e,f,g,h,l,m,n,p,q,r;m=this.pdf.internal.scaleFactor;g={};e=r=void 0;n=[];p=[n];d=0;for(q=this.settings.width;a.length;)if(h=a.shift(),r=c.shift(),h)if(e=r["font-family"],l=r["font-style"],f=g[e+l],f||(f=this.pdf.internal.getFont(e,l).metadata.Unicode,g[e+l]=f),e={widths:f.widths,kerning:f.kerning,fontSize:12*r["font-size"],textIndent:d},f=this.pdf.getStringUnitWidth(h,e)*e.fontSize/m,d+f>q){d=this.pdf.splitTextToSize(h,q,e);for(n.push([d.shift(),r]);d.length;)n=[[d.shift(),r]],p.push(n);
d=this.pdf.getStringUnitWidth(n[0][0],e)*e.fontSize/m}else n.push([h,r]),d+=f;if(void 0!==r["text-align"]&&("center"===r["text-align"]||"right"===r["text-align"]||"justify"===r["text-align"]))for(g=0;g<p.length;++g)n=this.pdf.getStringUnitWidth(p[g][0][0],e)*e.fontSize/m,0<g&&(p[g][0][1]=b(p[g][0][1])),n=q-n,"right"===r["text-align"]?p[g][0][1]["margin-left"]=n:"center"===r["text-align"]?p[g][0][1]["margin-left"]=n/2:"justify"===r["text-align"]&&(d=p[g][0][0].split(" ").length-1,p[g][0][1]["word-spacing"]=
n/d,g===p.length-1&&(p[g][0][1]["word-spacing"]=0));return p};p.prototype.RenderTextFragment=function(a,b){var c;c=0;this.pdf.internal.pageSize.height-this.pdf.margins_doc.bottom<this.y+this.pdf.internal.getFontSize()&&(this.pdf.internal.write("ET","Q"),this.pdf.addPage(),this.y=this.pdf.margins_doc.top,this.pdf.internal.write("q","BT 0 g",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td"),c=Math.max(c,b["line-height"],b["font-size"]),this.pdf.internal.write(0,
(-12*c).toFixed(2),"Td"));c=this.pdf.internal.getFont(b["font-family"],b["font-style"]);void 0!==b["word-spacing"]&&0<b["word-spacing"]&&this.pdf.internal.write(b["word-spacing"].toFixed(2),"Tw");this.pdf.internal.write("/"+c.id,(12*b["font-size"]).toFixed(2),"Tf","("+this.pdf.internal.pdfEscape(a)+") Tj");void 0!==b["word-spacing"]&&this.pdf.internal.write(0,"Tw")};p.prototype.renderParagraph=function(a){var b,c,d,e,f,g,h,l,n;c=m(this.paragraph.text);g=this.paragraph.style;l=(b=this.paragraph.blockstyle)||
{};this.paragraph={text:[],style:[],blockstyle:{},priorblockstyle:b};if(c.join("").trim()){g=this.splitFragmentsIntoLines(c,g);h=f=void 0;c=12/this.pdf.internal.scaleFactor;f=(Math.max((b["margin-top"]||0)-(l["margin-bottom"]||0),0)+(b["padding-top"]||0))*c;l=((b["margin-bottom"]||0)+(b["padding-bottom"]||0))*c;b=this.pdf.internal.write;e=d=void 0;this.y+=f;b("q","BT 0 g",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td");for(var p=0;g.length;){f=
g.shift();d=h=0;for(e=f.length;d!==e;)f[d][0].trim()&&(h=Math.max(h,f[d][1]["line-height"],f[d][1]["font-size"]),n=7*f[d][1]["font-size"]),d++;d=0;void 0!==f[0][1]["margin-left"]&&0<f[0][1]["margin-left"]&&(wantedIndent=this.pdf.internal.getCoordinateString(f[0][1]["margin-left"]),d=wantedIndent-p,p=wantedIndent);b(d,(-12*h).toFixed(2),"Td");d=0;for(e=f.length;d!==e;)f[d][0]&&this.RenderTextFragment(f[d][0],f[d][1]),d++;this.y+=h*c;if(this.executeWatchFunctions(f[0][1])&&0<g.length){var q=[],r=[];
g.forEach(function(a){for(var b=0,c=a.length;b!==c;)a[b][0]&&(q.push(a[b][0]+" "),r.push(a[b][1])),++b});g=this.splitFragmentsIntoLines(m(q),r);b("ET","Q");b("q","BT 0 g",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td")}}a&&"function"===typeof a&&a.call(this,this.x-9,this.y-n/2);b("ET","Q");return this.y+=l}};p.prototype.setBlockBoundary=function(a){return this.renderParagraph(a)};p.prototype.setBlockStyle=function(a){return this.paragraph.blockstyle=
a};p.prototype.addText=function(a,b){this.paragraph.text.push(a);return this.paragraph.style.push(b)};c={helvetica:"helvetica","sans-serif":"helvetica","times new roman":"times",serif:"times",times:"times",monospace:"courier",courier:"courier"};f={100:"normal",200:"normal",300:"normal",400:"normal",500:"bold",600:"bold",700:"bold",800:"bold",900:"bold",normal:"normal",bold:"bold",bolder:"bold",lighter:"normal"};d={normal:"normal",italic:"italic",oblique:"italic"};TextAlignMap={left:"left",right:"right",
center:"center",justify:"justify"};n={none:"none",right:"right",left:"left"};h={none:"none",both:"both"};l={normal:1};a.fromHTML=function(a,b,c,d,e,f){this.margins_doc=f||{top:0,bottom:0};d||(d={});d.elementHandlers||(d.elementHandlers={});return E(this,a,isNaN(b)?4:b,isNaN(c)?4:c,d,e)}})(jsPDF.API);
(function(a){var b,e,c;a.addJS=function(a){c=a;this.internal.events.subscribe("postPutResources",function(a){b=this.internal.newObject();this.internal.write("<< /Names [(EmbeddedJS) "+(b+1)+" 0 R] >>","endobj");e=this.internal.newObject();this.internal.write("<< /S /JavaScript /JS (",c,") >>","endobj")});this.internal.events.subscribe("putCatalog",function(){void 0!==b&&void 0!==e&&this.internal.write("/Names <</JavaScript "+b+" 0 R>>")});return this}})(jsPDF.API);
(function(a){var b=function(b,g,m,p){var r=5,t=d;switch(p){case a.image_compression.FAST:r=3;t=c;break;case a.image_compression.MEDIUM:r=6;t=f;break;case a.image_compression.SLOW:r=9,t=n}p=b.length/g;for(var l=new Uint8Array(b.length+p),q=[e,c,d,f,n],w=0,u,v,E;w<p;w++){E=w*g;u=b.subarray(E,E+g);if(t)l.set(t(u,m,v),E+w);else{for(var A=0,K=q.length,F=[];A<K;A++)F[A]=q[A](u,m,v);v=F.concat();for(var A=0,K=v.length,z=void 0,B=void 0,H=void 0;A<K;){for(var z=v[A].slice(1),G=0,I=z.length,N=0;G<I;)N+=Math.abs(z[G++]);
z=N;if(z<B||!B)B=z,H=A;A++}l.set(F[H],E+w)}v=u}b=l;g=Uint8Array;m=Math.LOG2E*Math.log(32768)-8<<4|8;t=m<<8;p=Math.min(3,0);t=t|p<<6|0;t+=31-t%31;g=new g([m,t&255]);m=1;t=0;p=b.length;for(q=0;0<p;){l=void 0<p?void 0:p;p-=l;do m+=b[q++],t+=m;while(--l);m%=65521;t%=65521}m=(t<<16|m)>>>0;t=new Deflater(r);r=t.append(b);b=t.flush();t=g.length+r.length+b.length;p=new Uint8Array(t+4);p.set(g);p.set(r,g.length);p.set(b,g.length+r.length);p[t++]=m>>>24&255;p[t++]=m>>>16&255;p[t++]=m>>>8&255;p[t++]=m&255;return a.arrayBufferToBinaryString(p)},
e=function(a,b,c){a=Array.apply([],a);a.unshift(0);return a},c=function(a,b,c){c=[];var d=0,e=a.length,f;for(c[0]=1;d<e;d++)f=a[d-b]||0,c[d+1]=a[d]-f+256&255;return c},d=function(a,b,c){b=[];var d=0,e=a.length,f;for(b[0]=2;d<e;d++)f=c&&c[d]||0,b[d+1]=a[d]-f+256&255;return b},f=function(a,b,c){var d=[],e=0,f=a.length,l,n;for(d[0]=3;e<f;e++)l=a[e-b]||0,n=c&&c[e]||0,d[e+1]=a[e]+256-(l+n>>>1)&255;return d},n=function(a,b,c){var d=[],e=0,f=a.length,l,n,w;for(d[0]=4;e<f;e++){l=a[e-b]||0;n=c&&c[e]||0;w=
c&&c[e-b]||0;var u=l+n-w,v=Math.abs(u-l),E=Math.abs(u-n),u=Math.abs(u-w);l=v<=E&&v<=u?l:E<=u?n:w;d[e+1]=a[e]-l+256&255}return d};a.processPNG=function(c,d,e,f,n){n=this.color_spaces.DEVICE_RGB;var t=this.decode.FLATE_DECODE,l=8,q,w,u,v,E;this.isArrayBuffer(c)&&(c=new Uint8Array(c));if(this.isArrayBufferView(c)){if("function"!==typeof PNG||"function"!==typeof FlateStream)throw Error("PNG support requires png.js and zlib.js");q=new PNG(c);c=q.imgData;l=q.bits;n=q.colorSpace;w=q.colors;if(-1!==[4,6].indexOf(q.colorType)){if(8===
q.bits){E=new window["Uint"+q.pixelBitlength+"Array"](q.decodePixels().buffer);var A=E.length,K=new Uint8Array(A*q.colors),F=new Uint8Array(A),z=q.pixelBitlength-q.bits,B=0;c=0;for(var H,G;B<A;B++){H=E[B];for(G=0;G<z;)K[c++]=H>>>G&255,G+=q.bits;F[B]=H>>>G&255}}if(16===q.bits){E=new Uint32Array(q.decodePixels().buffer);A=E.length;K=new Uint8Array(32/q.pixelBitlength*A*q.colors);F=new Uint8Array(32/q.pixelBitlength*A);l=1<q.colors;for(z=c=B=0;B<A;)H=E[B++],K[c++]=H>>>0&255,l&&(K[c++]=H>>>16&255,H=E[B++],
K[c++]=H>>>0&255),F[z++]=H>>>16&255;l=8}if(A=f!==a.image_compression.NONE)if(A="function"===typeof Deflater,!A)throw Error("requires deflate.js for compression");A?(c=b(K,q.width*q.colors,q.colors,f),E=b(F,q.width,1,f)):(c=K,E=F,t=null)}if(3===q.colorType&&(n=this.color_spaces.INDEXED,v=q.palette,q.transparency.indexed)){f=q.transparency.indexed;B=F=0;for(A=f.length;B<A;++B)F+=f[B];F/=255;if(F===A-1&&-1!==f.indexOf(0))u=[f.indexOf(0)];else if(F!==A){E=q.decodePixels();F=new Uint8Array(E.length);B=
0;for(A=E.length;B<A;B++)F[B]=f[E[B]];E=b(F,q.width,1)}}w=t===this.decode.FLATE_DECODE?"/Predictor 15 /Colors "+w+" /BitsPerComponent "+l+" /Columns "+q.width:"/Colors "+w+" /BitsPerComponent "+l+" /Columns "+q.width;if(this.isArrayBuffer(c)||this.isArrayBufferView(c))c=this.arrayBufferToBinaryString(c);if(E&&this.isArrayBuffer(E)||this.isArrayBufferView(E))E=this.arrayBufferToBinaryString(E);return this.createImageInfo(c,q.width,q.height,n,l,t,d,e,w,u,v,E)}throw Error("Unsupported PNG image data, try using JPEG instead.");
}})(jsPDF.API);
(function(a){a.addSVG=function(a,e,c,d,f){function n(a){for(var b=parseFloat(a[1]),c=parseFloat(a[2]),d=[],e=3,f=a.length;e<f;)"c"===a[e]?(d.push([parseFloat(a[e+1]),parseFloat(a[e+2]),parseFloat(a[e+3]),parseFloat(a[e+4]),parseFloat(a[e+5]),parseFloat(a[e+6])]),e+=7):"l"===a[e]?(d.push([parseFloat(a[e+1]),parseFloat(a[e+2])]),e+=3):e+=1;return[b,c,d]}if(void 0===e||void 0===c)throw Error("addSVG needs values for 'x' and 'y'");var h=function(a){var b=a.createElement("iframe"),c=a.createElement("style");c.type=
"text/css";c.styleSheet?c.styleSheet.cssText=".jsPDF_sillysvg_iframe {display:none;position:absolute;}":c.appendChild(a.createTextNode(".jsPDF_sillysvg_iframe {display:none;position:absolute;}"));a.getElementsByTagName("head")[0].appendChild(c);b.name="childframe";b.setAttribute("width",0);b.setAttribute("height",0);b.setAttribute("frameborder","0");b.setAttribute("scrolling","no");b.setAttribute("seamless","seamless");b.setAttribute("class","jsPDF_sillysvg_iframe");a.body.appendChild(b);return b}(document),
h=function(a,b){var c=(b.contentWindow||b.contentDocument).document;c.write(a);c.close();return c.getElementsByTagName("svg")[0]}(a,h);a=[1,1];var g=parseFloat(h.getAttribute("width")),m=parseFloat(h.getAttribute("height"));g&&m&&(d&&f?a=[d/g,f/m]:d?a=[d/g,d/g]:f&&(a=[f/m,f/m]));h=h.childNodes;d=0;for(f=h.length;d<f;d++)g=h[d],g.tagName&&"PATH"===g.tagName.toUpperCase()&&(g=n(g.getAttribute("d").split(" ")),g[0]=g[0]*a[0]+e,g[1]=g[1]*a[1]+c,this.lines.call(this,g[2],g[0],g[1],a));return this}})(jsPDF.API);
(function(a){var b=a.getCharWidthsArray=function(a,b){b||(b={});var c=b.widths?b.widths:this.internal.getFont().metadata.Unicode.widths,d=c.fof?c.fof:1,e=b.kerning?b.kerning:this.internal.getFont().metadata.Unicode.kerning,f=e.fof?e.fof:1,t,l,q,w=0,u=c[0]||d,v=[];t=0;for(l=a.length;t<l;t++)q=a.charCodeAt(t),v.push((c[q]||u)/d+(e[q]&&e[q][w]||0)/f),w=q;return v},e=function(a){for(var b=a.length,c=0;b;)b--,c+=a[b];return c},c=a.getStringUnitWidth=function(a,c){return e(b.call(this,a,c))},d=function(a,
b,c,d){for(var e=[],f=0,t=a.length,l=0;f!==t&&l+b[f]<c;)l+=b[f],f++;e.push(a.slice(0,f));c=f;for(l=0;f!==t;)l+b[f]>d&&(e.push(a.slice(c,f)),l=0,c=f),l+=b[f],f++;c!==f&&e.push(a.slice(c,f));return e},f=function(a,f,g){g||(g={});var m=[],p=[m],r=g.textIndent||0,t=0,l=0,q,w=a.split(" "),u=b(" ",g)[0],v,E,A;if(A=-1===g.lineIndent?w[0].length+2:g.lineIndent||0){var K=Array(A).join(" "),F=[];w.map(function(a){a=a.split(/\s*\n/);1<a.length?F=F.concat(a.map(function(a,b){return(b&&a.length?"\n":"")+a})):
F.push(a[0])});w=F;A=c(K,g)}v=0;for(E=w.length;v<E;v++){var z=0;a=w[v];A&&"\n"==a[0]&&(a=a.substr(1),z=1);q=b(a,g);l=e(q);if(r+t+l>f||z){if(l>f){r=d(a,q,f-(r+t),f);m.push(r.shift());for(m=[r.pop()];r.length;)p.push([r.shift()]);l=e(q.slice(a.length-m[0].length))}else m=[a];p.push(m);r=l+A}else m.push(a),r+=t+l;t=u}return p.map(A?function(a,b){return(b?K:"")+a.join(" ")}:function(a){return a.join(" ")})};a.splitTextToSize=function(a,b,c){c||(c={});var d=c.fontSize||this.internal.getFontSize(),e;var r=
c;e={0:1};var t={};r.widths&&r.kerning?e={widths:r.widths,kerning:r.kerning}:(r=this.internal.getFont(r.fontName,r.fontStyle),e=r.metadata.Unicode?{widths:r.metadata.Unicode.widths||e,kerning:r.metadata.Unicode.kerning||t}:{widths:e,kerning:t});a=Array.isArray(a)?a:a.split(/\r?\n/);b=1*this.internal.scaleFactor*b/d;e.textIndent=c.textIndent?1*c.textIndent*this.internal.scaleFactor/d:0;e.lineIndent=c.lineIndent;t=[];c=0;for(d=a.length;c<d;c++)t=t.concat(f(a[c],b,e));return t}})(jsPDF.API);
(function(a){var b=function(a){for(var b={},c=0;16>c;c++)b["klmnopqrstuvwxyz"[c]]="0123456789abcdef"[c];for(var d={},e=1,p,r=d,t=[],l,q="",w="",u,v=a.length-1,c=1;c!=v;)l=a[c],c+=1,"'"==l?p?(u=p.join(""),p=void 0):p=[]:p?p.push(l):"{"==l?(t.push([r,u]),r={},u=void 0):"}"==l?(l=t.pop(),l[0][l[1]]=r,u=void 0,r=l[0]):"-"==l?e=-1:void 0===u?b.hasOwnProperty(l)?(q+=b[l],u=parseInt(q,16)*e,e=1,q=""):q+=l:b.hasOwnProperty(l)?(w+=b[l],r[u]=parseInt(w,16)*e,e=1,u=void 0,w=""):w+=l;return d},e={codePages:["WinAnsiEncoding"],
WinAnsiEncoding:b("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:e,"Courier-Bold":e,"Courier-BoldOblique":e,"Courier-Oblique":e,Helvetica:e,"Helvetica-Bold":e,"Helvetica-BoldOblique":e,"Helvetica-Oblique":e,"Times-Roman":e,"Times-Bold":e,"Times-BoldItalic":e,"Times-Italic":e}},d={Unicode:{"Courier-Oblique":b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":b("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),
"Helvetica-Bold":b("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),
Courier:b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":b("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),
Helvetica:b("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),
"Helvetica-BoldOblique":b("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),
"Courier-Bold":b("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":b("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),
"Times-Roman":b("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),
"Helvetica-Oblique":b("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};
a.events.push(["addFonts",function(a){var b,e,g,m;for(e in a.fonts)if(a.fonts.hasOwnProperty(e)){b=a.fonts[e];if(g=d.Unicode[b.PostScriptName])m=b.metadata.Unicode?b.metadata.Unicode:b.metadata.Unicode={},m.widths=g.widths,m.kerning=g.kerning;if(g=c.Unicode[b.PostScriptName])m=b.metadata.Unicode?b.metadata.Unicode:b.metadata.Unicode={},m.encoding=g,g.codePages&&g.codePages.length&&(b.encoding=g.codePages[0])}}])})(jsPDF.API);
(function(a){a.putTotalPages=function(a){a=new RegExp(a,"g");for(var e=1;e<=this.internal.getNumberOfPages();e++)for(var c=0;c<this.internal.pages[e].length;c++)this.internal.pages[e][c]=this.internal.pages[e][c].replace(a,this.internal.getNumberOfPages());return this}})(jsPDF.API);
(function(a){a.URL=a.URL||a.webkitURL;if(a.Blob&&a.URL)try{new Blob;return}catch(b){}var e=a.BlobBuilder||a.WebKitBlobBuilder||a.MozBlobBuilder||function(a){var b=function(a){return Object.prototype.toString.call(a).match(/^\[object\s(.*)\]$/)[1]},e=function(){this.data=[]},n=function(a,b,c){this.data=a;this.size=a.length;this.type=b;this.encoding=c},h=e.prototype,g=n.prototype,m=a.FileReaderSync,p=function(a){this.code=this[this.name=a]},r="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),
t=r.length,l=a.URL||a.webkitURL||a,q=l.createObjectURL,w=l.revokeObjectURL,u=l,v=a.btoa,E=a.atob,A=a.ArrayBuffer,K=a.Uint8Array,F=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(n.fake=g.fake=!0;t--;)p.prototype[r[t]]=t+1;l.createObjectURL||(u=a.URL=function(a){var b=document.createElementNS("http://www.w3.org/1999/xhtml","a");b.href=a;"origin"in b||("data:"===b.protocol.toLowerCase()?b.origin=null:(a=a.match(F),b.origin=a&&a[1]));return b});u.createObjectURL=function(a){var b=a.type;null===b&&(b="application/octet-stream");
if(a instanceof n)return b="data:"+b,"base64"===a.encoding?b+";base64,"+a.data:"URI"===a.encoding?b+","+decodeURIComponent(a.data):v?b+";base64,"+v(a.data):b+","+encodeURIComponent(a.data);if(q)return q.call(l,a)};u.revokeObjectURL=function(a){"data:"!==a.substring(0,5)&&w&&w.call(l,a)};h.append=function(a){var c=this.data;if(K&&(a instanceof A||a instanceof K)){var e="";a=new K(a);for(var f=0,g=a.length;f<g;f++)e+=String.fromCharCode(a[f]);c.push(e)}else if("Blob"===b(a)||"File"===b(a))if(m)e=new m,
c.push(e.readAsBinaryString(a));else throw new p("NOT_READABLE_ERR");else a instanceof n?"base64"===a.encoding&&E?c.push(E(a.data)):"URI"===a.encoding?c.push(decodeURIComponent(a.data)):"raw"===a.encoding&&c.push(a.data):("string"!==typeof a&&(a+=""),c.push(unescape(encodeURIComponent(a))))};h.getBlob=function(a){arguments.length||(a=null);return new n(this.data.join(""),a,"raw")};h.toString=function(){return"[object BlobBuilder]"};g.slice=function(a,b,c){var d=arguments.length;3>d&&(c=null);return new n(this.data.slice(a,
1<d?b:this.data.length),c,this.encoding)};g.toString=function(){return"[object Blob]"};g.close=function(){this.size=0;delete this.data};return e}(a);a.Blob=function(a,b){var f=b?b.type||"":"",n=new e;if(a)for(var h=0,g=a.length;h<g;h++)n.append(a[h]);return n.getBlob(f)}})("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||this.content||this);
saveAs=saveAs||"undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(a){if("undefined"===typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var b=a.document,e=b.createElementNS("http://www.w3.org/1999/xhtml","a"),c="download"in e,d=function(c){var d=b.createEvent("MouseEvents");d.initMouseEvent("click",!0,!1,a,0,0,0,0,0,!1,!1,!1,!1,0,null);c.dispatchEvent(d)},f=a.webkitRequestFileSystem,n=a.requestFileSystem||f||a.mozRequestFileSystem,
h=function(b){(a.setImmediate||a.setTimeout)(function(){throw b;},0)},g=0,m=function(b){var c=function(){"string"===typeof b?(a.URL||a.webkitURL||a).revokeObjectURL(b):b.remove()};a.chrome?c():setTimeout(c,10)},p=function(a,b,c){b=[].concat(b);for(var d=b.length;d--;){var e=a["on"+b[d]];if("function"===typeof e)try{e.call(a,c||a)}catch(f){h(f)}}},r=function(b,h){var r=this,t=b.type,v=!1,E,A,K=function(){p(r,["writestart","progress","write","writeend"])},F=function(){if(v||!E)E=(a.URL||a.webkitURL||
a).createObjectURL(b);A?A.location.href=E:void 0==a.open(E,"_blank")&&"undefined"!==typeof safari&&(a.location.href=E);r.readyState=r.DONE;K();m(E)},z=function(a){return function(){if(r.readyState!==r.DONE)return a.apply(this,arguments)}},B={create:!0,exclusive:!1},H;r.readyState=r.INIT;h||(h="download");if(c)E=(a.URL||a.webkitURL||a).createObjectURL(b),e.href=E,e.download=h,d(e),r.readyState=r.DONE,K(),m(E);else{a.chrome&&t&&"application/octet-stream"!==t&&(H=b.slice||b.webkitSlice,b=H.call(b,0,
b.size,"application/octet-stream"),v=!0);f&&"download"!==h&&(h+=".download");if("application/octet-stream"===t||f)A=a;n?(g+=b.size,n(a.TEMPORARY,g,z(function(a){a.root.getDirectory("saved",B,z(function(a){var c=function(){a.getFile(h,B,z(function(a){a.createWriter(z(function(c){c.onwriteend=function(b){A.location.href=a.toURL();r.readyState=r.DONE;p(r,"writeend",b);m(a)};c.onerror=function(){var a=c.error;a.code!==a.ABORT_ERR&&F()};["writestart","progress","write","abort"].forEach(function(a){c["on"+
a]=r["on"+a]});c.write(b);r.abort=function(){c.abort();r.readyState=r.DONE};r.readyState=r.WRITING}),F)}),F)};a.getFile(h,{create:!1},z(function(a){a.remove();c()}),z(function(a){a.code===a.NOT_FOUND_ERR?c():F()}))}),F)}),F)):F()}},t=r.prototype;t.abort=function(){this.readyState=this.DONE;p(this,"abort")};t.readyState=t.INIT=0;t.WRITING=1;t.DONE=2;t.error=t.onwritestart=t.onprogress=t.onwrite=t.onabort=t.onerror=t.onwriteend=null;return function(a,b){return new r(a,b)}}}("undefined"!==typeof self&&
self||"undefined"!==typeof window&&window||this.content);"undefined"!==typeof module&&null!==module&&(module.exports=saveAs);
void function(a,b){"object"===typeof module?module.exports=b():0==="function"?define(b):a.adler32cs=b()}(jsPDF,function(){var a="function"===typeof ArrayBuffer&&"function"===typeof Uint8Array,b=null,e=function(){if(!a)return function(){return!1};try{var c=require("buffer");"function"===typeof c.Buffer&&(b=c.Buffer)}catch(d){}return function(a){return a instanceof ArrayBuffer||null!==b&&a instanceof b}}(),c=function(){return null!==b?function(a){return(new b(a,"utf8")).toString("binary")}:function(a){return unescape(encodeURIComponent(a))}}(),
d=function(a,b){for(var c=a&65535,d=a>>>16,e=0,f=b.length;e<f;e++)c=(c+(b.charCodeAt(e)&255))%65521,d=(d+c)%65521;return(d<<16|c)>>>0},f=function(a,b){for(var c=a&65535,d=a>>>16,e=0,f=b.length;e<f;e++)c=(c+b[e])%65521,d=(d+c)%65521;return(d<<16|c)>>>0},n={},h=n.Adler32=function(){var b=function(a){if(!(this instanceof b))throw new TypeError("Constructor cannot called be as a function.");if(!isFinite(a=null==a?1:+a))throw Error("First arguments needs to be a finite number.");this.checksum=a>>>0},m=
b.prototype={};m.constructor=b;b.from=function(a){a.prototype=m;return a}(function(a){if(!(this instanceof b))throw new TypeError("Constructor cannot called be as a function.");if(null==a)throw Error("First argument needs to be a string.");this.checksum=d(1,a.toString())});b.fromUtf8=function(a){a.prototype=m;return a}(function(a){if(!(this instanceof b))throw new TypeError("Constructor cannot called be as a function.");if(null==a)throw Error("First argument needs to be a string.");a=c(a.toString());
this.checksum=d(1,a)});a&&(b.fromBuffer=function(a){a.prototype=m;return a}(function(a){if(!(this instanceof b))throw new TypeError("Constructor cannot called be as a function.");if(!e(a))throw Error("First argument needs to be ArrayBuffer.");a=new Uint8Array(a);return this.checksum=f(1,a)}));m.update=function(a){if(null==a)throw Error("First argument needs to be a string.");a=a.toString();return this.checksum=d(this.checksum,a)};m.updateUtf8=function(a){if(null==a)throw Error("First argument needs to be a string.");
a=c(a.toString());return this.checksum=d(this.checksum,a)};a&&(m.updateBuffer=function(a){if(!e(a))throw Error("First argument needs to be ArrayBuffer.");a=new Uint8Array(a);return this.checksum=f(this.checksum,a)});m.clone=function(){return new h(this.checksum)};return b}();n.from=function(a){if(null==a)throw Error("First argument needs to be a string.");return d(1,a.toString())};n.fromUtf8=function(a){if(null==a)throw Error("First argument needs to be a string.");a=c(a.toString());return d(1,a)};
a&&(n.fromBuffer=function(a){if(!e(a))throw Error("First argument need to be ArrayBuffer.");a=new Uint8Array(a);return f(1,a)});return n});
var Deflater=function(a){function b(){var a=this;a.build_tree=function(b){var c=a.dyn_tree,d=a.stat_desc.static_tree,e=a.stat_desc.elems,f,g=-1,h;b.heap_len=0;b.heap_max=573;for(f=0;f<e;f++)0!==c[2*f]?(b.heap[++b.heap_len]=g=f,b.depth[f]=0):c[2*f+1]=0;for(;2>b.heap_len;)h=b.heap[++b.heap_len]=2>g?++g:0,c[2*h]=1,b.depth[h]=0,b.opt_len--,d&&(b.static_len-=d[2*h+1]);a.max_code=g;for(f=Math.floor(b.heap_len/2);1<=f;f--)b.pqdownheap(c,f);h=e;do f=b.heap[1],b.heap[1]=b.heap[b.heap_len--],b.pqdownheap(c,
1),d=b.heap[1],b.heap[--b.heap_max]=f,b.heap[--b.heap_max]=d,c[2*h]=c[2*f]+c[2*d],b.depth[h]=Math.max(b.depth[f],b.depth[d])+1,c[2*f+1]=c[2*d+1]=h,b.heap[1]=h++,b.pqdownheap(c,1);while(2<=b.heap_len);b.heap[--b.heap_max]=b.heap[1];f=a.dyn_tree;for(var g=a.stat_desc.static_tree,m=a.stat_desc.extra_bits,n=a.stat_desc.extra_base,K=a.stat_desc.max_length,F,z,B=0,e=0;15>=e;e++)b.bl_count[e]=0;f[2*b.heap[b.heap_max]+1]=0;for(h=b.heap_max+1;573>h;h++)d=b.heap[h],e=f[2*f[2*d+1]+1]+1,e>K&&(e=K,B++),f[2*d+
1]=e,d>a.max_code||(b.bl_count[e]++,F=0,d>=n&&(F=m[d-n]),z=f[2*d],b.opt_len+=z*(e+F),g&&(b.static_len+=z*(g[2*d+1]+F)));if(0!==B){do{for(e=K-1;0===b.bl_count[e];)e--;b.bl_count[e]--;b.bl_count[e+1]+=2;b.bl_count[K]--;B-=2}while(0<B);for(e=K;0!==e;e--)for(d=b.bl_count[e];0!==d;)g=b.heap[--h],g>a.max_code||(f[2*g+1]!=e&&(b.opt_len+=(e-f[2*g+1])*f[2*g],f[2*g+1]=e),d--)}f=a.max_code;h=b.bl_count;b=[];d=0;for(e=1;15>=e;e++)b[e]=d=d+h[e-1]<<1;for(h=0;h<=f;h++)if(g=c[2*h+1],0!==g){d=2*h;e=b[g]++;m=0;do m|=
e&1,e>>>=1,m<<=1;while(0<--g);c[d]=m>>>1}}}function e(a,b,c,d,e){this.static_tree=a;this.extra_bits=b;this.extra_base=c;this.elems=d;this.max_length=e}function c(a,b,c,d,e){this.good_length=a;this.max_lazy=b;this.nice_length=c;this.max_chain=d;this.func=e}function d(a,b,c,d){var e=a[2*b];a=a[2*c];return e<a||e==a&&d[b]<=d[c]}function f(){function a(){var b;for(b=0;286>b;b++)hb[2*b]=0;for(b=0;30>b;b++)Ga[2*b]=0;for(b=0;19>b;b++)Za[2*b]=0;hb[512]=1;Wa=Ha=N.opt_len=N.static_len=0}function c(a,b){var d,
e=-1,f,g=a[1],h=0,l=7,m=4;0===g&&(l=138,m=3);a[2*(b+1)+1]=65535;for(d=0;d<=b;d++)f=g,g=a[2*(d+1)+1],++h<l&&f==g||(h<m?Za[2*f]+=h:0!==f?(f!=e&&Za[2*f]++,Za[32]++):10>=h?Za[34]++:Za[36]++,h=0,e=f,0===g?(l=138,m=3):f==g?(l=6,m=3):(l=7,m=4))}function f(a){N.pending_buf[N.pending++]=a}function h(a){f(a&255);f(a>>>8&255)}function n(a,b){Ya>16-b?(Ta|=a<<Ya&65535,h(Ta),Ta=a>>>16-Ya,Ya+=b-16):(Ta|=a<<Ya&65535,Ya+=b)}function w(a,b){var c=2*a;n(b[c]&65535,b[c+1]&65535)}function u(a,b){var c,d=-1,e,f=a[1],g=
0,h=7,l=4;0===f&&(h=138,l=3);for(c=0;c<=b;c++)if(e=f,f=a[2*(c+1)+1],!(++g<h&&e==f)){if(g<l){do w(e,Za);while(0!==--g)}else 0!==e?(e!=d&&(w(e,Za),g--),w(16,Za),n(g-3,2)):10>=g?(w(17,Za),n(g-3,3)):(w(18,Za),n(g-11,7));g=0;d=e;0===f?(h=138,l=3):e==f?(h=6,l=3):(h=7,l=4)}}function v(){16==Ya?(h(Ta),Ya=Ta=0):8<=Ya&&(f(Ta&255),Ta>>>=8,Ya-=8)}function E(a,c){var d,e,f;N.pending_buf[qa+2*Wa]=a>>>8&255;N.pending_buf[qa+2*Wa+1]=a&255;N.pending_buf[rb+Wa]=c&255;Wa++;0===a?hb[2*c]++:(Ha++,a--,hb[2*(b._length_code[c]+
256+1)]++,Ga[2*b.d_code(a)]++);if(0===(Wa&8191)&&2<Ka){d=8*Wa;e=y-ta;for(f=0;30>f;f++)d+=Ga[2*f]*(5+b.extra_dbits[f]);if(Ha<Math.floor(Wa/2)&&d>>>3<Math.floor(e/2))return!0}return Wa==gb-1}function A(a,c){var d,e,f=0,g,h;if(0!==Wa){do d=N.pending_buf[qa+2*f]<<8&65280|N.pending_buf[qa+2*f+1]&255,e=N.pending_buf[rb+f]&255,f++,0===d?w(e,a):(g=b._length_code[e],w(g+256+1,a),h=b.extra_lbits[g],0!==h&&(e-=b.base_length[g],n(e,h)),d--,g=b.d_code(d),w(g,c),h=b.extra_dbits[g],0!==h&&(d-=b.base_dist[g],n(d,
h)));while(f<Wa)}w(256,a);sb=a[513]}function K(){8<Ya?h(Ta):0<Ya&&f(Ta&255);Ya=Ta=0}function F(a,b,c){K();sb=8;c&&(h(b),h(~b));N.pending_buf.set(W.subarray(a,a+b),N.pending);N.pending+=b}function z(d){var f=0<=ta?ta:-1,g=y-ta,h,l,m=0;if(0<Ka){ab.build_tree(N);Gb.build_tree(N);c(hb,ab.max_code);c(Ga,Gb.max_code);ib.build_tree(N);for(m=18;3<=m&&0===Za[2*b.bl_order[m]+1];m--);N.opt_len+=3*(m+1)+14;h=N.opt_len+3+7>>>3;l=N.static_len+3+7>>>3;l<=h&&(h=l)}else h=l=g+5;if(g+4<=h&&-1!=f)n(0+(d?1:0),3),F(f,
g,!0);else if(l==h)n(2+(d?1:0),3),A(e.static_ltree,e.static_dtree);else{n(4+(d?1:0),3);f=ab.max_code+1;g=Gb.max_code+1;m+=1;n(f-257,5);n(g-1,5);n(m-4,4);for(h=0;h<m;h++)n(Za[2*b.bl_order[h]+1],3);u(hb,f-1);u(Ga,g-1);A(hb,Ga)}a();d&&K();ta=y;L.flush_pending()}function B(){var a,b,c,d;do{d=U-pa-y;if(0===d&&0===y&&0===pa)d=J;else if(-1==d)d--;else if(y>=J+J-262){W.set(W.subarray(J,J+J),0);za-=J;y-=J;ta-=J;c=a=ea;do b=Q[--c]&65535,Q[c]=b>=J?b-J:0;while(0!==--a);c=a=J;do b=M[--c]&65535,M[c]=b>=J?b-J:0;
while(0!==--a);d+=J}if(0===L.avail_in)break;a=L.read_buf(W,y+pa,d);pa+=a;3<=pa&&(X=W[y]&255,X=(X<<ia^W[y+1]&255)&aa)}while(262>pa&&0!==L.avail_in)}function H(a){var b=65535,c;for(b>S-5&&(b=S-5);;){if(1>=pa){B();if(0===pa&&0==a)return 0;if(0===pa)break}y+=pa;pa=0;c=ta+b;if(0===y||y>=c)if(pa=y-c,y=c,z(!1),0===L.avail_out)return 0;if(y-ta>=J-262&&(z(!1),0===L.avail_out))return 0}z(4==a);return 0===L.avail_out?4==a?2:0:4==a?3:1}function G(a){var b=pb,c=y,d,e=C,f=y>J-262?y-(J-262):0,g=Fb,h=Y,l=y+258,m=
W[c+e-1],n=W[c+e];C>=Kb&&(b>>=2);g>pa&&(g=pa);do if(d=a,W[d+e]==n&&W[d+e-1]==m&&W[d]==W[c]&&W[++d]==W[c+1]){c+=2;for(d++;W[++c]==W[++d]&&W[++c]==W[++d]&&W[++c]==W[++d]&&W[++c]==W[++d]&&W[++c]==W[++d]&&W[++c]==W[++d]&&W[++c]==W[++d]&&W[++c]==W[++d]&&c<l;);d=258-(l-c);c=l-258;if(d>e){za=a;e=d;if(d>=g)break;m=W[c+e-1];n=W[c+e]}}while((a=M[a&h]&65535)>f&&0!==--b);return e<=pa?e:pa}function I(a){for(var b=0,c,d;;){if(262>pa){B();if(262>pa&&0==a)return 0;if(0===pa)break}3<=pa&&(X=(X<<ia^W[y+2]&255)&aa,
b=Q[X]&65535,M[y&Y]=Q[X],Q[X]=y);C=da;ha=za;da=2;0!==b&&C<Ra&&(y-b&65535)<=J-262&&(2!=Xa&&(da=G(b)),5>=da&&(1==Xa||3==da&&4096<y-za)&&(da=2));if(3<=C&&da<=C){d=y+pa-3;c=E(y-1-ha,C-3);pa-=C-1;C-=2;do++y<=d&&(X=(X<<ia^W[y+2]&255)&aa,b=Q[X]&65535,M[y&Y]=Q[X],Q[X]=y);while(0!==--C);Ba=0;da=2;y++;if(c&&(z(!1),0===L.avail_out))return 0}else if(0!==Ba){if((c=E(0,W[y-1]&255))&&z(!1),y++,pa--,0===L.avail_out)return 0}else Ba=1,y++,pa--}0!==Ba&&(E(0,W[y-1]&255),Ba=0);z(4==a);return 0===L.avail_out?4==a?2:0:
4==a?3:1}var N=this,L,x,S,D,J,V,Y,W,U,M,Q,X,ea,O,aa,ia,ta,da,ha,Ba,y,za,pa,C,pb,Ra,Ka,Xa,Kb,Fb,hb,Ga,Za,ab=new b,Gb=new b,ib=new b;N.depth=[];var rb,gb,Wa,qa,Ha,sb,Ta,Ya;N.bl_count=[];N.heap=[];hb=[];Ga=[];Za=[];N.pqdownheap=function(a,b){for(var c=N.heap,e=c[b],f=b<<1;f<=N.heap_len;){f<N.heap_len&&d(a,c[f+1],c[f],N.depth)&&f++;if(d(a,e,c[f],N.depth))break;c[b]=c[f];b=f;f<<=1}c[b]=e};N.deflateInit=function(b,c,d,f,h,l){f||(f=8);h||(h=8);l||(l=0);b.msg=null;-1==c&&(c=6);if(1>h||9<h||8!=f||9>d||15<
d||0>c||9<c||0>l||2<l)return-2;b.dstate=N;V=d;J=1<<V;Y=J-1;O=h+7;ea=1<<O;aa=ea-1;ia=Math.floor((O+3-1)/3);W=new Uint8Array(2*J);M=[];Q=[];gb=1<<h+6;N.pending_buf=new Uint8Array(4*gb);S=4*gb;qa=Math.floor(gb/2);rb=3*gb;Ka=c;Xa=l;b.total_in=b.total_out=0;b.msg=null;N.pending=0;N.pending_out=0;x=113;D=0;ab.dyn_tree=hb;ab.stat_desc=e.static_l_desc;Gb.dyn_tree=Ga;Gb.stat_desc=e.static_d_desc;ib.dyn_tree=Za;ib.stat_desc=e.static_bl_desc;Ya=Ta=0;sb=8;a();U=2*J;for(b=Q[ea-1]=0;b<ea-1;b++)Q[b]=0;Ra=g[Ka].max_lazy;
Kb=g[Ka].good_length;Fb=g[Ka].nice_length;pb=g[Ka].max_chain;pa=ta=y=0;da=C=2;return X=Ba=0};N.deflateEnd=function(){if(42!=x&&113!=x&&666!=x)return-2;W=M=Q=N.pending_buf=null;N.dstate=null;return 113==x?-3:0};N.deflateParams=function(a,b,c){var d=0;-1==b&&(b=6);if(0>b||9<b||0>c||2<c)return-2;g[Ka].func!=g[b].func&&0!==a.total_in&&(d=a.deflate(1));Ka!=b&&(Ka=b,Ra=g[Ka].max_lazy,Kb=g[Ka].good_length,Fb=g[Ka].nice_length,pb=g[Ka].max_chain);Xa=c;return d};N.deflateSetDictionary=function(a,b,c){a=c;
var d=0;if(!b||42!=x)return-2;if(3>a)return 0;a>J-262&&(a=J-262,d=c-a);W.set(b.subarray(d,d+a),0);ta=y=a;X=W[0]&255;X=(X<<ia^W[1]&255)&aa;for(b=0;b<=a-3;b++)X=(X<<ia^W[b+2]&255)&aa,M[b&Y]=Q[X],Q[X]=b;return 0};N.deflate=function(a,b){var c,d,h;if(4<b||0>b)return-2;if(!a.next_out||!a.next_in&&0!==a.avail_in||666==x&&4!=b)return a.msg=m[4],-2;if(0===a.avail_out)return a.msg=m[7],-5;L=a;c=D;D=b;42==x&&(d=8+(V-8<<4)<<8,h=(Ka-1&255)>>1,3<h&&(h=3),d|=h<<6,0!==y&&(d|=32),x=113,d+=31-d%31,f(d>>8&255),f(d&
255));if(0!==N.pending){if(L.flush_pending(),0===L.avail_out)return D=-1,0}else if(0===L.avail_in&&b<=c&&4!=b)return L.msg=m[7],-5;if(666==x&&0!==L.avail_in)return a.msg=m[7],-5;if(0!==L.avail_in||0!==pa||0!=b&&666!=x){c=-1;switch(g[Ka].func){case 0:c=H(b);break;case 1:a:{for(c=0;;){if(262>pa){B();if(262>pa&&0==b){c=0;break a}if(0===pa)break}3<=pa&&(X=(X<<ia^W[y+2]&255)&aa,c=Q[X]&65535,M[y&Y]=Q[X],Q[X]=y);0!==c&&(y-c&65535)<=J-262&&2!=Xa&&(da=G(c));if(3<=da)if(d=E(y-za,da-3),pa-=da,da<=Ra&&3<=pa){da--;
do y++,X=(X<<ia^W[y+2]&255)&aa,c=Q[X]&65535,M[y&Y]=Q[X],Q[X]=y;while(0!==--da);y++}else y+=da,da=0,X=W[y]&255,X=(X<<ia^W[y+1]&255)&aa;else d=E(0,W[y]&255),pa--,y++;if(d&&(z(!1),0===L.avail_out)){c=0;break a}}z(4==b);c=0===L.avail_out?4==b?2:0:4==b?3:1}break;case 2:c=I(b)}if(2==c||3==c)x=666;if(0==c||2==c)return 0===L.avail_out&&(D=-1),0;if(1==c){if(1==b)n(2,3),w(256,e.static_ltree),v(),9>1+sb+10-Ya&&(n(2,3),w(256,e.static_ltree),v()),sb=7;else if(n(0,3),F(0,0,!0),3==b)for(c=0;c<ea;c++)Q[c]=0;L.flush_pending();
if(0===L.avail_out)return D=-1,0}}return 4!=b?0:1}}function n(){this.total_out=this.avail_out=this.total_in=this.avail_in=this.next_out_index=this.next_in_index=0}var h=[0,1,2,3,4,4,5,5,6,6,6,6,7,7,7,7,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,
13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,0,0,16,17,18,18,19,19,20,20,20,20,21,21,21,21,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,24,
24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,29,29,29,29,29,29,29,29,
29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29];b._length_code=[0,1,2,3,4,5,6,7,8,8,9,9,10,10,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16,16,16,16,16,17,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,
22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28];b.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,
56,64,80,96,112,128,160,192,224,0];b.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576];b.d_code=function(a){return 256>a?h[a]:h[256+(a>>>7)]};b.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0];b.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];b.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7];b.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];e.static_ltree=
[12,8,140,8,76,8,204,8,44,8,172,8,108,8,236,8,28,8,156,8,92,8,220,8,60,8,188,8,124,8,252,8,2,8,130,8,66,8,194,8,34,8,162,8,98,8,226,8,18,8,146,8,82,8,210,8,50,8,178,8,114,8,242,8,10,8,138,8,74,8,202,8,42,8,170,8,106,8,234,8,26,8,154,8,90,8,218,8,58,8,186,8,122,8,250,8,6,8,134,8,70,8,198,8,38,8,166,8,102,8,230,8,22,8,150,8,86,8,214,8,54,8,182,8,118,8,246,8,14,8,142,8,78,8,206,8,46,8,174,8,110,8,238,8,30,8,158,8,94,8,222,8,62,8,190,8,126,8,254,8,1,8,129,8,65,8,193,8,33,8,161,8,97,8,225,8,17,8,145,8,
81,8,209,8,49,8,177,8,113,8,241,8,9,8,137,8,73,8,201,8,41,8,169,8,105,8,233,8,25,8,153,8,89,8,217,8,57,8,185,8,121,8,249,8,5,8,133,8,69,8,197,8,37,8,165,8,101,8,229,8,21,8,149,8,85,8,213,8,53,8,181,8,117,8,245,8,13,8,141,8,77,8,205,8,45,8,173,8,109,8,237,8,29,8,157,8,93,8,221,8,61,8,189,8,125,8,253,8,19,9,275,9,147,9,403,9,83,9,339,9,211,9,467,9,51,9,307,9,179,9,435,9,115,9,371,9,243,9,499,9,11,9,267,9,139,9,395,9,75,9,331,9,203,9,459,9,43,9,299,9,171,9,427,9,107,9,363,9,235,9,491,9,27,9,283,9,155,
9,411,9,91,9,347,9,219,9,475,9,59,9,315,9,187,9,443,9,123,9,379,9,251,9,507,9,7,9,263,9,135,9,391,9,71,9,327,9,199,9,455,9,39,9,295,9,167,9,423,9,103,9,359,9,231,9,487,9,23,9,279,9,151,9,407,9,87,9,343,9,215,9,471,9,55,9,311,9,183,9,439,9,119,9,375,9,247,9,503,9,15,9,271,9,143,9,399,9,79,9,335,9,207,9,463,9,47,9,303,9,175,9,431,9,111,9,367,9,239,9,495,9,31,9,287,9,159,9,415,9,95,9,351,9,223,9,479,9,63,9,319,9,191,9,447,9,127,9,383,9,255,9,511,9,0,7,64,7,32,7,96,7,16,7,80,7,48,7,112,7,8,7,72,7,40,
7,104,7,24,7,88,7,56,7,120,7,4,7,68,7,36,7,100,7,20,7,84,7,52,7,116,7,3,8,131,8,67,8,195,8,35,8,163,8,99,8,227,8];e.static_dtree=[0,5,16,5,8,5,24,5,4,5,20,5,12,5,28,5,2,5,18,5,10,5,26,5,6,5,22,5,14,5,30,5,1,5,17,5,9,5,25,5,5,5,21,5,13,5,29,5,3,5,19,5,11,5,27,5,7,5,23,5];e.static_l_desc=new e(e.static_ltree,b.extra_lbits,257,286,15);e.static_d_desc=new e(e.static_dtree,b.extra_dbits,0,30,15);e.static_bl_desc=new e(null,b.extra_blbits,0,19,7);var g=[new c(0,0,0,0,0),new c(4,4,8,4,1),new c(4,5,16,8,
1),new c(4,6,32,32,1),new c(4,4,16,16,2),new c(8,16,32,32,2),new c(8,16,128,128,2),new c(8,32,128,256,2),new c(32,128,258,1024,2),new c(32,258,258,4096,2)],m="need dictionary;stream end;;;stream error;data error;;buffer error;;".split(";");n.prototype={deflateInit:function(a,b){this.dstate=new f;b||(b=15);return this.dstate.deflateInit(this,a,b)},deflate:function(a){return this.dstate?this.dstate.deflate(this,a):-2},deflateEnd:function(){if(!this.dstate)return-2;var a=this.dstate.deflateEnd();this.dstate=
null;return a},deflateParams:function(a,b){return this.dstate?this.dstate.deflateParams(this,a,b):-2},deflateSetDictionary:function(a,b){return this.dstate?this.dstate.deflateSetDictionary(this,a,b):-2},read_buf:function(a,b,c){var d=this.avail_in;d>c&&(d=c);if(0===d)return 0;this.avail_in-=d;a.set(this.next_in.subarray(this.next_in_index,this.next_in_index+d),b);this.next_in_index+=d;this.total_in+=d;return d},flush_pending:function(){var a=this.dstate.pending;a>this.avail_out&&(a=this.avail_out);
0!==a&&(this.next_out.set(this.dstate.pending_buf.subarray(this.dstate.pending_out,this.dstate.pending_out+a),this.next_out_index),this.next_out_index+=a,this.dstate.pending_out+=a,this.total_out+=a,this.avail_out-=a,this.dstate.pending-=a,0===this.dstate.pending&&(this.dstate.pending_out=0))}};return function(a){var b=new n,c=new Uint8Array(512);"undefined"==typeof a&&(a=-1);b.deflateInit(a);b.next_out=c;this.append=function(a,d){var e,f=[],g=0,h=0,m=0,n;if(a.length){b.next_in_index=0;b.next_in=
a;b.avail_in=a.length;do{b.next_out_index=0;b.avail_out=512;e=b.deflate(0);if(0!=e)throw"deflating: "+b.msg;b.next_out_index&&(512==b.next_out_index?f.push(new Uint8Array(c)):f.push(new Uint8Array(c.subarray(0,b.next_out_index))));m+=b.next_out_index;d&&0<b.next_in_index&&b.next_in_index!=g&&(d(b.next_in_index),g=b.next_in_index)}while(0<b.avail_in||0===b.avail_out);n=new Uint8Array(m);f.forEach(function(a){n.set(a,h);h+=a.length});return n}};this.flush=function(){var a,d=[],e=0,f=0,g;do{b.next_out_index=
0;b.avail_out=512;a=b.deflate(4);if(1!=a&&0!=a)throw"deflating: "+b.msg;0<512-b.avail_out&&d.push(new Uint8Array(c.subarray(0,b.next_out_index)));f+=b.next_out_index}while(0<b.avail_in||0===b.avail_out);b.deflateEnd();g=new Uint8Array(f);d.forEach(function(a){g.set(a,e);e+=a.length});return g}}}(this);
(function(a){var b;b=function(){function b(a){var c,d,e,f;this.data=a;this.pos=8;this.palette=[];this.imgData=[];this.transparency={};this.animation=null;this.text={};for(e=null;;){c=this.readUInt32();f=a=void 0;f=[];for(a=0;4>a;++a)f.push(String.fromCharCode(this.data[this.pos++]));a=f.join("");switch(a){case "IHDR":this.width=this.readUInt32();this.height=this.readUInt32();this.bits=this.data[this.pos++];this.colorType=this.data[this.pos++];this.compressionMethod=this.data[this.pos++];this.filterMethod=
this.data[this.pos++];this.interlaceMethod=this.data[this.pos++];break;case "acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||Infinity,frames:[]};break;case "PLTE":this.palette=this.read(c);break;case "fcTL":e&&this.animation.frames.push(e);this.pos+=4;e={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()};a=this.readUInt16();c=this.readUInt16()||100;e.delay=1E3*a/c;e.disposeOp=this.data[this.pos++];e.blendOp=this.data[this.pos++];
e.data=[];break;case "IDAT":case "fdAT":"fdAT"===a&&(this.pos+=4,c-=4);a=(null!=e?e.data:void 0)||this.imgData;for(f=0;0<=c?f<c:f>c;0<=c?++f:--f)a.push(this.data[this.pos++]);break;case "tRNS":this.transparency={};switch(this.colorType){case 3:a=this.palette.length/3;this.transparency.indexed=this.read(c);if(this.transparency.indexed.length>a)throw Error("More transparent colors than palette size");c=a-this.transparency.indexed.length;if(0<c)for(a=0;0<=c?a<c:a>c;0<=c?++a:--a)this.transparency.indexed.push(255);
break;case 0:this.transparency.grayscale=this.read(c)[0];break;case 2:this.transparency.rgb=this.read(c)}break;case "tEXt":f=this.read(c);c=f.indexOf(0);a=String.fromCharCode.apply(String,f.slice(0,c));this.text[a]=String.fromCharCode.apply(String,f.slice(c+1));break;case "IEND":e&&this.animation.frames.push(e);a:{switch(this.colorType){case 0:case 3:case 4:e=1;break a;case 2:case 6:e=3;break a}e=void 0}this.colors=e;this.hasAlphaChannel=4===(d=this.colorType)||6===d;d=this.colors+(this.hasAlphaChannel?
1:0);this.pixelBitlength=this.bits*d;a:{switch(this.colors){case 1:d="DeviceGray";break a;case 3:d="DeviceRGB";break a}d=void 0}this.colorSpace=d;this.imgData=new Uint8Array(this.imgData);return;default:this.pos+=c}this.pos+=4;if(this.pos>this.data.length)throw Error("Incomplete or corrupt PNG file");}}var c,d,f;b.load=function(a,c,d){var f;"function"===typeof c&&(d=c);f=new XMLHttpRequest;f.open("GET",a,!0);f.responseType="arraybuffer";f.onload=function(){var a;a=new Uint8Array(f.response||f.mozResponseArrayBuffer);
a=new b(a);"function"===typeof(null!=c?c.getContext:void 0)&&a.render(c);return"function"===typeof d?d(a):void 0};return f.send(null)};b.prototype.read=function(a){var b,c;c=[];for(b=0;0<=a?b<a:b>a;0<=a?++b:--b)c.push(this.data[this.pos++]);return c};b.prototype.readUInt32=function(){var a,b,c,d;a=this.data[this.pos++]<<24;b=this.data[this.pos++]<<16;c=this.data[this.pos++]<<8;d=this.data[this.pos++];return a|b|c|d};b.prototype.readUInt16=function(){var a,b;a=this.data[this.pos++]<<8;b=this.data[this.pos++];
return a|b};b.prototype.decodePixels=function(a){var b,c,d,e,f,l,n,w,u,v,E,A,K,F,z;null==a&&(a=this.imgData);if(0===a.length)return new Uint8Array(0);a=new FlateStream(a);a=a.getBytes();w=this.pixelBitlength/8;A=w*this.width;u=new Uint8Array(A*this.height);l=a.length;for(c=v=E=0;v<l;){switch(a[v++]){case 0:for(b=0;b<A;b+=1)u[c++]=a[v++];break;case 1:for(e=K=0;K<A;e=K+=1)b=a[v++],f=e<w?0:u[c-w],u[c++]=(b+f)%256;break;case 2:for(e=f=0;f<A;e=f+=1)b=a[v++],d=(e-e%w)/w,K=E&&u[(E-1)*A+d*w+e%w],u[c++]=(K+
b)%256;break;case 3:for(e=z=0;z<A;e=z+=1)b=a[v++],d=(e-e%w)/w,f=e<w?0:u[c-w],K=E&&u[(E-1)*A+d*w+e%w],u[c++]=(b+Math.floor((f+K)/2))%256;break;case 4:for(e=z=0;z<A;e=z+=1)b=a[v++],d=(e-e%w)/w,f=e<w?0:u[c-w],0===E?K=F=0:(K=u[(E-1)*A+d*w+e%w],F=d&&u[(E-1)*A+(d-1)*w+e%w]),n=f+K-F,e=Math.abs(n-f),d=Math.abs(n-K),n=Math.abs(n-F),f=e<=d&&e<=n?f:d<=n?K:F,u[c++]=(b+f)%256;break;default:throw Error("Invalid filter algorithm: "+a[v-1]);}E++}return u};b.prototype.decodePalette=function(){var a,b,c,d,e,f,l,n,
w;c=this.palette;f=this.transparency.indexed||[];e=new Uint8Array((f.length||0)+c.length);b=l=a=d=0;for(n=c.length;l<n;b=l+=3)e[d++]=c[b],e[d++]=c[b+1],e[d++]=c[b+2],e[d++]=null!=(w=f[a++])?w:255;return e};b.prototype.copyToImageData=function(a,b){var c,d,e,f,l,n,w,u;d=this.colors;u=null;c=this.hasAlphaChannel;this.palette.length&&(u=null!=(e=this._decodedPalette)?e:this._decodedPalette=this.decodePalette(),d=4,c=!0);e=a.data||a;w=e.length;l=u||b;f=n=0;if(1===d)for(;f<w;)d=u?4*b[f/4]:n,n=l[d++],e[f++]=
n,e[f++]=n,e[f++]=n,e[f++]=c?l[d++]:255,n=d;else for(;f<w;)d=u?4*b[f/4]:n,e[f++]=l[d++],e[f++]=l[d++],e[f++]=l[d++],e[f++]=c?l[d++]:255,n=d};b.prototype.decode=function(){var a;a=new Uint8Array(this.width*this.height*4);this.copyToImageData(a,this.decodePixels());return a};try{d=a.document.createElement("canvas"),f=d.getContext("2d")}catch(n){return-1}c=function(a){f.width=a.width;f.height=a.height;f.clearRect(0,0,a.width,a.height);f.putImageData(a,0,0);a=new Image;a.src=d.toDataURL();return a};b.prototype.decodeFrames=
function(a){var b,d,e,f,n,l,q;if(this.animation){l=this.animation.frames;q=[];b=f=0;for(n=l.length;f<n;b=++f)b=l[b],d=a.createImageData(b.width,b.height),e=this.decodePixels(new Uint8Array(b.data)),this.copyToImageData(d,e),b.imageData=d,q.push(b.image=c(d));return q}};b.prototype.renderFrame=function(a,b){var c,d;d=this.animation.frames;c=d[b];d=d[b-1];0===b&&a.clearRect(0,0,this.width,this.height);1===(null!=d?d.disposeOp:void 0)?a.clearRect(d.xOffset,d.yOffset,d.width,d.height):2===(null!=d?d.disposeOp:
void 0)&&a.putImageData(d.imageData,d.xOffset,d.yOffset);0===c.blendOp&&a.clearRect(c.xOffset,c.yOffset,c.width,c.height);return a.drawImage(c.image,c.xOffset,c.yOffset)};b.prototype.animate=function(a){var b,c,d,e,f,l,n=this;c=0;l=this.animation;e=l.numFrames;d=l.frames;f=l.numPlays;return(b=function(){var l,u;l=c++%e;u=d[l];n.renderFrame(a,l);if(1<e&&c/e<f)return n.animation._timeout=setTimeout(b,u.delay)})()};b.prototype.stopAnimation=function(){var a;return clearTimeout(null!=(a=this.animation)?
a._timeout:void 0)};b.prototype.render=function(a){var b;a._png&&a._png.stopAnimation();a._png=this;a.width=this.width;a.height=this.height;a=a.getContext("2d");if(this.animation)return this.decodeFrames(a),this.animate(a);b=a.createImageData(this.width,this.height);this.copyToImageData(b,this.decodePixels());return a.putImageData(b,0,0)};return b}();a.PNG=b})("undefined"!==typeof window&&window||this);
var DecodeStream=function(){function a(){this.bufferLength=this.pos=0;this.eof=!1;this.buffer=null}a.prototype={ensureBuffer:function(a){var e=this.buffer,c=e?e.byteLength:0;if(a<c)return e;for(var d=512;d<a;)d<<=1;a=new Uint8Array(d);for(d=0;d<c;++d)a[d]=e[d];return this.buffer=a},getByte:function(){for(var a=this.pos;this.bufferLength<=a;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(a){var e=this.pos;if(a){this.ensureBuffer(e+a);for(a=e+a;!this.eof&&
this.bufferLength<a;)this.readBlock();var c=this.bufferLength;a>c&&(a=c)}else{for(;!this.eof;)this.readBlock();a=this.bufferLength}this.pos=a;return this.buffer.subarray(e,a)},lookChar:function(){for(var a=this.pos;this.bufferLength<=a;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var a=this.pos;this.bufferLength<=a;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(a,
e,c){for(var d=a+e;this.bufferLength<=d&&!this.eof;)this.readBlock();return new Stream(this.buffer,a,e,c)},skip:function(a){a||(a=1);this.pos+=a},reset:function(){this.pos=0}};return a}(),FlateStream=function(){function a(a){throw Error(a);}function b(b){var c=0,d=b[c++],e=b[c++];-1!=d&&-1!=e||a("Invalid header in flate stream");8!=(d&15)&&a("Unknown compression method in flate stream");0!=((d<<8)+e)%31&&a("Bad FCHECK in flate stream");e&32&&a("FDICT bit set in flate stream");this.bytes=b;this.bytesPos=
c;this.codeBuf=this.codeSize=0;DecodeStream.call(this)}if("undefined"!==typeof Uint32Array){var e=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),c=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),d=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,
657409,658433,724993,727041,794625,798721,868353,876545]),f=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59E4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,
524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,
524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,
524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,
524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,
524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,
524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,
524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],n=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];b.prototype=Object.create(DecodeStream.prototype);b.prototype.getBits=function(b){for(var c=this.codeSize,d=this.codeBuf,e=this.bytes,
f=this.bytesPos,n;c<b;)"undefined"==typeof(n=e[f++])&&a("Bad encoding in flate stream"),d|=n<<c,c+=8;this.codeBuf=d>>b;this.codeSize=c-b;this.bytesPos=f;return d&(1<<b)-1};b.prototype.getCode=function(b){var c=b[0],d=b[1];b=this.codeSize;for(var e=this.codeBuf,f=this.bytes,n=this.bytesPos;b<d;){var l;"undefined"==typeof(l=f[n++])&&a("Bad encoding in flate stream");e|=l<<b;b+=8}d=c[e&(1<<d)-1];c=d>>16;d&=65535;(0==b||b<c||0==c)&&a("Bad encoding in flate stream");this.codeBuf=e>>c;this.codeSize=b-c;
this.bytesPos=n;return d};b.prototype.generateHuffmanTable=function(a){for(var b=a.length,c=0,d=0;d<b;++d)a[d]>c&&(c=a[d]);for(var e=1<<c,f=new Uint32Array(e),l=1,n=0,w=2;l<=c;++l,n<<=1,w<<=1)for(var u=0;u<b;++u)if(a[u]==l){for(var v=0,E=n,d=0;d<l;++d)v=v<<1|E&1,E>>=1;for(d=v;d<e;d+=w)f[d]=l<<16|u;++n}return[f,c]};b.prototype.readBlock=function(){function b(a,c,d,e,f){for(a=a.getBits(d)+e;0<a--;)c[q++]=f}var g=this.getBits(3);g&1&&(this.eof=!0);g>>=1;if(0==g){var m=this.bytes,p=this.bytesPos,r;"undefined"==
typeof(r=m[p++])&&a("Bad block header in flate stream");var t=r;"undefined"==typeof(r=m[p++])&&a("Bad block header in flate stream");t|=r<<8;"undefined"==typeof(r=m[p++])&&a("Bad block header in flate stream");g=r;"undefined"==typeof(r=m[p++])&&a("Bad block header in flate stream");(g|r<<8)!=(~t&65535)&&a("Bad uncompressed block length in flate stream");this.codeSize=this.codeBuf=0;r=this.bufferLength;g=this.ensureBuffer(r+t);this.bufferLength=t=r+t;for(var l=r;l<t;++l){if("undefined"==typeof(r=m[p++])){this.eof=
!0;break}g[l]=r}this.bytesPos=p}else{if(1==g)p=f,r=n;else if(2==g){g=this.getBits(5)+257;r=this.getBits(5)+1;for(var m=this.getBits(4)+4,p=Array(e.length),q=0;q<m;)p[e[q++]]=this.getBits(3);p=this.generateHuffmanTable(p);q=m=0;r=g+r;for(t=Array(r);q<r;)l=this.getCode(p),16==l?b(this,t,2,3,m):17==l?b(this,t,3,3,m=0):18==l?b(this,t,7,11,m=0):t[q++]=m=l;p=this.generateHuffmanTable(t.slice(0,g));r=this.generateHuffmanTable(t.slice(g,r))}else a("Unknown block type in flate stream");t=(g=this.buffer)?g.length:
0;for(l=this.bufferLength;;){var w=this.getCode(p);if(256>w)l+1>=t&&(g=this.ensureBuffer(l+1),t=g.length),g[l++]=w;else{if(256==w){this.bufferLength=l;break}var w=w-257,w=c[w],u=w>>16;0<u&&(u=this.getBits(u));m=(w&65535)+u;w=this.getCode(r);w=d[w];u=w>>16;0<u&&(u=this.getBits(u));w=(w&65535)+u;l+m>=t&&(g=this.ensureBuffer(l+m),t=g.length);for(u=0;u<m;++u,++l)g[l]=g[l-w]}}}};return b}}();
(function(a){"undefined"===typeof a.btoa&&(a.btoa=function(a){var e,c,d,f,n=0,h=0,g="",g=[];if(!a)return a;do e=a.charCodeAt(n++),c=a.charCodeAt(n++),d=a.charCodeAt(n++),f=e<<16|c<<8|d,e=f>>18&63,c=f>>12&63,d=f>>6&63,f&=63,g[h++]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(c)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(d)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(f);
while(n<a.length);g=g.join("");a=a.length%3;return(a?g.slice(0,a-3):g)+"===".slice(a||3)});"undefined"===typeof a.atob&&(a.atob=function(a){var e,c,d,f,n,h=0,g=0;f="";var m=[];if(!a)return a;a+="";do e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(h++)),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(h++)),f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(h++)),n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(h++)),
d=e<<18|c<<12|f<<6|n,e=d>>16&255,c=d>>8&255,d&=255,64==f?m[g++]=String.fromCharCode(e):64==n?m[g++]=String.fromCharCode(e,c):m[g++]=String.fromCharCode(e,c,d);while(h<a.length);return f=m.join("")});Array.prototype.map||(Array.prototype.map=function(a){if(void 0===this||null===this||"function"!==typeof a)throw new TypeError;for(var e=Object(this),c=e.length>>>0,d=Array(c),f=1<arguments.length?arguments[1]:void 0,n=0;n<c;n++)n in e&&(d[n]=a.call(f,e[n],n,e));return d});Array.isArray||(Array.isArray=
function(a){return"[object Array]"===Object.prototype.toString.call(a)});Array.prototype.forEach||(Array.prototype.forEach=function(a,e){if(void 0===this||null===this||"function"!==typeof a)throw new TypeError;for(var c=Object(this),d=c.length>>>0,f=0;f<d;f++)f in c&&a.call(e,c[f],f,c)});Object.keys||(Object.keys=function(){var a=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),c="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),
d=c.length;return function(f){if("object"!==typeof f&&("function"!==typeof f||null===f))throw new TypeError;var n=[],h;for(h in f)a.call(f,h)&&n.push(h);if(e)for(h=0;h<d;h++)a.call(f,c[h])&&n.push(c[h]);return n}}());String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});String.prototype.trimLeft||(String.prototype.trimLeft=function(){return this.replace(/^\s+/g,"")});String.prototype.trimRight||(String.prototype.trimRight=function(){return this.replace(/\s+$/g,
"")})})("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||this);
(function(a,b){if("object"===typeof exports&&"object"===typeof module)module.exports=b(require("jQuery"));else if("function"===typeof define&&define.amd)define(["jQuery"],b);else{var e="object"===typeof exports?b(require("jQuery")):b(a.jQuery),c;for(c in e)("object"===typeof exports?exports:a)[c]=e[c]}})(this,function(a){return function(a){function e(d){if(c[d])return c[d].exports;var f=c[d]={exports:{},id:d,loaded:!1};a[d].call(f.exports,f,f.exports,e);f.loaded=!0;return f.exports}var c={};e.m=a;
e.c=c;e.p="";return e(0)}([function(a,e,c){var d,f,n=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1};d=c(1);c(2);e.Anno=function(){function a(b){var c,d,e;b.__proto__===Array.prototype?(d=b.shift(),e=b):d=b;d instanceof a&&console.warn("Anno constructor parameter is already an Anno object.");null==d&&console.warn("new Anno() created with no options. It's recommended to supply at least target and content.");for(c in d)"chainTo"!==c&&"start"!==
c&&"show"!==c&&"hide"!==c&&"hideAnno"!==c&&"chainSize"!==c&&"chainIndex"!==c&&"version"!==c||console.warn("Anno: Overriding '"+c+"' is not recommended. Can you override a delegated function instead?");for(c in d)b=d[c],this[c]=b;0<(null!=e?e.length:void 0)&&this.chainTo(new a(e))}a.setDefaults=function(b){var c,d,e;e=[];for(c in b)d=b[c],e.push(a.prototype[c]=d);return e};a.prototype.chainTo=function(b){null!=b?null==this._chainNext?(this._chainNext=b instanceof a?b:new a(b),this._chainNext._chainPrev=
this):this._chainNext.chainTo(b):console.error("Can't chainTo a null object.");return this};a.prototype._chainNext=null;a.prototype._chainPrev=null;a.chain=function(b){console.warn("Anno.chain([...]) is deprecated. Use `new Anno([...])` instead.");return new a(b)};a.prototype.chainSize=function(){return null!=this._chainNext?this._chainNext.chainSize():1+this.chainIndex()};a.prototype.chainIndex=function(a){var b;return null!=a?(b=function(a,c,d){var e;if(null!=a){e=a.chainIndex();if(0<=e&&e<c)return b(a._chainNext,
c,d);if(c<e&&e<=d)return b(a._chainPrev,c,d);if(e===c)return a}else return console.error("Couldn't switch to index '"+c+"'. Chain size "+("is '"+d+"'"))})(this,a,this.chainSize()):null!=this._chainPrev?1+this._chainPrev.chainIndex():0};a.prototype.show=function(){var a,b;a=this.targetFn();null!=this._annoElem&&console.warn("Anno elem for '"+this.target+"' has already been generated.  Did you call show() twice?");this._annoElem=this.annoElem();this.emphasiseTarget();this.showOverlay();a.after(this._annoElem);
this._annoElem.addClass("anno-target-"+this.arrowPositionFn());this.positionAnnoElem();setTimeout(function(a){return function(){return a._annoElem.removeClass("anno-hidden")}}(this),50);a.scrollintoview();setTimeout(function(a){return function(){return a._annoElem.scrollintoview()}}(this),300);b=this._annoElem.find("button").last();this.rightArrowClicksLastButton&&b.keydown(function(a){if(39===a.keyCode)return d(this).click()});this.autoFocusLastButton&&0===a.find(":focus").length&&b.focus();this._returnFromOnShow=
this.onShow(this,a,this._annoElem);return this};a.prototype.start=function(){return this.show()};a.prototype.rightArrowClicksLastButton=!0;a.prototype.autoFocusLastButton=!0;a.prototype.onShow=function(a,b,c){};a.prototype.hide=function(){this.hideAnno();setTimeout(this.hideOverlay,50);return this};a.prototype.hideAnno=function(){null!=this._annoElem?(this._annoElem.addClass("anno-hidden"),this.deemphasiseTarget(),this.onHide(this,this.targetFn(),this._annoElem,this._returnFromOnShow),function(a){return setTimeout(function(){return a.remove()},
300)}(this._annoElem),this._annoElem=null):console.warn("Can't hideAnno() for '"+this.target+"' when @_annoElem is null.  Did you call hideAnno() twice?");return this};a.prototype.onHide=function(a,b,c,d){};a.prototype.switchTo=function(a){if(null!=a)return this.hideAnno(),a.show();console.warn("Can't switchTo a null object. Hiding instead.");return this.hide()};a.prototype.switchToChainNext=function(){return this.switchTo(this._chainNext)};a.prototype.switchToChainPrev=function(){return this.switchTo(this._chainPrev)};
a.prototype.target="h1";a.prototype.targetFn=function(){var a;if("string"===typeof this.target)return a=d(this.target).filter(":not(.anno-placeholder)"),0===a.length&&console.error("Couldn't find Anno.target '"+this.target+"'."),1<a.length&&console.warn("Anno target '"+this.target+"' matched "+a.length+" elements. Targeting the first one."),a.first();if(this.target instanceof jQuery)return 1<this.target.length&&console.warn("Anno jQuery target matched "+this.target.length+" elements. Targeting the first one."),
this.target.first();if(this.target instanceof HTMLElement)return d(this.target);if("function"===typeof this.target)return this.target();console.error("Unrecognised Anno.target. Please supply a jQuery selector string, a jQuery object, a raw DOM element or a function returning a jQuery element. target:");return console.error(this.target)};a.prototype.annoElem=function(){this._annoElem=d("<div class='anno anno-hidden "+this.className+"'>\n<div class='anno-inner'>  <div class='anno-arrow'></div>  </div>\n</div>");
this._annoElem.find(".anno-inner").append(this.contentElem()).append(this.buttonsElem());return this._annoElem};a.prototype._annoElem=null;a.prototype.className="";a.prototype.content="Lorem ipsum dolor sit amet, consectetur adipiscing elit.";a.prototype.contentFn=function(){return this.content};a.prototype.contentElem=function(){return d("<div class='anno-content'>"+this.contentFn()+"</div>")};a.prototype.showOverlay=function(){var a;return 0===d(".anno-overlay").length?(d("body").append(a=this.overlayElem().addClass("anno-hidden")),
setTimeout(function(){return a.removeClass("anno-hidden")},10)):d(".anno-overlay").replaceWith(this.overlayElem())};a.prototype.overlayElem=function(){return d("<div class='anno-overlay "+this.overlayClassName+"'></div>").click(function(a){return function(b){return a.overlayClick.call(a,a,b)}}(this))};a.prototype.overlayClassName="";a.prototype.overlayClick=function(a,b){return a.hide()};a.prototype.hideOverlay=function(){d(".anno-overlay").addClass("anno-hidden");return setTimeout(function(){return d(".anno-overlay").remove()},
300)};a.prototype.emphasiseTarget=function(a){var b,c,d;null==a&&(a=this.targetFn());this._undoEmphasise=[];a.closest(":scrollable").on("mousewheel",function(a){a.preventDefault();return a.stopPropagation()});this._undoEmphasise.push(function(a){return a.closest(":scrollable").off("mousewheel")});"static"===a.css("position")&&(a.after(b=a.clone().addClass("anno-placeholder")),function(a){return function(b){return a._undoEmphasise.push(function(){return b.remove()})}}(this)(b),c=a.prop("style").position,
function(a){return function(b){return a._undoEmphasise.push(function(a){return a.css({position:b})})}}(this)(c),a.css({position:"absolute"}),a.outerWidth()!==b.outerWidth()&&(c=a.prop("style").width,function(a){return function(b){return a._undoEmphasise.push(function(a){return a.css({width:b})})}}(this)(c),a.css("width",b.outerWidth())),a.outerHeight()!==b.outerHeight()&&(c=a.prop("style").height,function(a){return function(b){return a._undoEmphasise.push(function(a){return a.css({height:b})})}}(this)(c),
a.css("height",b.outerHeight())),b=b.position(),d=a.position(),d.top!==b.top&&(c=a.prop("style").top,function(a){return function(b){return a._undoEmphasise.push(function(a){return a.css({top:b})})}}(this)(c),a.css("top",b.top)),d.left!==b.left&&(c=a.prop("style").left,function(a){return function(b){return a._undoEmphasise.push(function(a){return a.css({left:b})})}}(this)(c),a.css("left",b.left)));if("rgba(0, 0, 0, 0)"===a.css("backgroundColor")||"transparent"===a.css("backgroundColor"))console.warn("Anno.js target '"+
this.target+"' has a transparent bg; filling it white temporarily."),b=a.prop("style").background,function(a){return function(b){return a._undoEmphasise.push(function(a){return a.css({background:b})})}}(this)(b),a.css({background:"white"});b=a.prop("style").zIndex;(function(a){return function(b){return a._undoEmphasise.push(function(a){return a.css({zIndex:b})})}})(this)(b);a.css({zIndex:"1001"});return a};a.prototype._undoEmphasise=[];a.prototype.deemphasiseTarget=function(){var a,b,c,d,e;a=this.targetFn();
e=this._undoEmphasise;c=0;for(d=e.length;c<d;c++)b=e[c],b(a);return a};a.prototype.position=null;a.prototype.positionAnnoElem=function(a){var b,c,d;null==a&&(a=this._annoElem);d=this.positionFn();b=this.targetFn();c=b.position();switch(d){case "top":case "bottom":a.css({left:c.left+"px"});break;case "center-top":case "center-bottom":a.css({left:c.left+(b.outerWidth()/2-a.outerWidth()/2)+"px"});break;case "left":case "right":a.css({top:c.top+"px"});break;case "center-left":case "center-right":a.css({top:c.top+
(b.outerHeight()/2-a.outerHeight()/2)+"px"})}switch(d){case "top":case "center-top":a.css({top:c.top-a.outerHeight()+"px"});break;case "bottom":case "center-bottom":a.css({top:c.top+b.outerHeight()+"px"});break;case "left":case "center-left":a.css({left:c.left-a.outerWidth()+"px"});break;case "right":case "center-right":a.css({left:c.left+b.outerWidth()+"px"});break;default:null!=d.left||null!=d.right||null!=d.top||null!=d.bottom?a.css(d):console.error("Unrecognised position: '"+d+"'")}return a};
a.prototype.positionFn=function(){var b,c,e,f,t,l,q,w,u;if(null!=this.position)return this.position;if(null!=this._annoElem)return b=this.targetFn(),c=b.closest(":scrollable"),0===c.length&&(c=d("body")),t=b.offset(),f=c.offset(),e=t.left-f.left,f=t.top-f.top,l=t=void 0,t=e+b.outerWidth(),l=f+b.outerHeight(),b=c.width()||c.width(),c=c.height()||c.height(),q=this._annoElem.outerWidth(),w=this._annoElem.outerHeight(),u=[],q>e&&(u=u.concat(["left","center-left"])),w>f&&(u=u.concat(["top","center-top"])),
q+t>b&&(u=u.concat(["right","center-right"])),w+l>c&&(u=u.concat(["bottom","center-bottom"])),e=a.preferredPositions.filter(function(a){return 0>n.call(u,a)}),0===e.length?console.error("Anno couldn't guess a position for '"+this.target+"'. Please supply one in the constructor."):console.warn("Anno: guessing position:'"+e[0]+"' for "+("'"+this.target+"'. Possible Anno.preferredPositions: ["+e+"].")),this.position=e[0]};a.preferredPositions="bottom right left top center-bottom center-right center-left center-top".split(" ");
a.prototype.arrowPositionFn=function(){var a,b;if(null!=this.arrowPosition)return this.arrowPosition;if("string"===typeof this.positionFn())return{top:"bottom","center-top":"center-bottom",left:"right","center-left":"center-right",right:"left","center-right":"center-left",bottom:"top","center-bottom":"center-top"}[this.positionFn()];a=parseInt(this.positionFn().left,10);b=parseInt(this.positionFn().top,10);a=Math.abs(a)>Math.abs(b)?0>a?"center-right":"center-left":0>b?"center-bottom":"center-top";
console.warn("Guessing arrowPosition:'"+a+"' for "+this.target+". Include this in your constructor for consistency.");return a};a.prototype.arrowPosition=null;a.prototype.buttons=[{}];a.prototype.buttonsFn=function(){return this.buttons instanceof Array?this.buttons.map(function(a){return new f(a)}):[new f(this.buttons)]};a.prototype.buttonsElem=function(){var a;return d("<div class='anno-btn-container'></div>").append(function(){var b,c,d,e;d=this.buttonsFn();e=[];b=0;for(c=d.length;b<c;b++)a=d[b],
e.push(a.buttonElem(this));return e}.call(this))};return a}();e.AnnoButton=f=function(){function a(b){var c,d;for(c in b)d=b[c],this[c]=d}a.prototype.buttonElem=function(a){return d("<button class='anno-btn'></button>").html(this.textFn(a)).addClass(this.className).click(function(b){return function(c){return b.click.call(a,a,c)}}(this))};a.prototype.textFn=function(a){return null!=this.text?this.text:null!=a._chainNext?"Next":"Done"};a.prototype.text=null;a.prototype.className="";a.prototype.click=
function(a,b){return null!=a._chainNext?a.switchToChainNext():a.hide()};a.NextButton=new a({text:"Next",click:function(){return this.switchToChainNext()}});a.DoneButton=new a({text:"Done",click:function(){return this.hide()}});a.BackButton=new a({text:"Back",className:"anno-btn-low-importance",click:function(){return this.switchToChainPrev()}});return a}()},function(b,e,c){b.exports=a},function(a,e,c){(function(a){var b={vertical:{x:!1,y:!0},horizontal:{x:!0,y:!1},both:{x:!0,y:!0},x:{x:!0,y:!1},y:{x:!1,
y:!0}},c={duration:"fast",direction:"both"},e=/^(?:html)$/i,g=function(b){var c=a(window),f=e.test(b[0].nodeName),g;if(f)g={top:0,left:0,bottom:0,right:0};else{var m=b[0],n;n=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(m,null):m.currentStyle;var u=document.defaultView&&document.defaultView.getComputedStyle?!0:!1;g=parseFloat(u?n.borderTopWidth:a.css(m,"borderTopWidth"))||0;var v=parseFloat(u?n.borderLeftWidth:a.css(m,"borderLeftWidth"))||0,E=parseFloat(u?
n.borderBottomWidth:a.css(m,"borderBottomWidth"))||0,m=parseFloat(u?n.borderRightWidth:a.css(m,"borderRightWidth"))||0;g={top:g,left:v,bottom:E,right:m,vertical:g+E,horizontal:v+m}}c={top:(f?c:b).scrollTop(),left:(f?c:b).scrollLeft()};v={right:f?0:b.innerWidth()-b[0].clientWidth,bottom:f?0:b.innerHeight()-b[0].clientHeight};E=b[0].getBoundingClientRect();return{border:g,scroll:c,scrollbar:v,rect:{top:f?0:E.top,left:f?0:E.left,bottom:f?b[0].clientHeight:E.bottom,right:f?b[0].clientWidth:E.right}}};
a.fn.extend({scrollintoview:function(m){m=a.extend({},c,m);m.direction=b["string"===typeof m.direction&&m.direction.toLowerCase()]||b.both;var r="";!0===m.direction.x&&(r="horizontal");!0===m.direction.y&&(r=r?"both":"vertical");var t=this.eq(0),l=t.closest(":scrollable("+r+")");if(0<l.length){var l=l.eq(0),q=g(t),r=g(l),t=q.rect.top-(r.rect.top+r.border.top),w=r.rect.bottom-r.border.bottom-r.scrollbar.bottom-q.rect.bottom,u=q.rect.left-(r.rect.left+r.border.left),q=r.rect.right-r.border.right-r.scrollbar.right-
q.rect.right,v={};!0===m.direction.y&&(0>t?v.scrollTop=r.scroll.top+t:0<t&&0>w&&(v.scrollTop=r.scroll.top+Math.min(t,-w)));!0===m.direction.x&&(0>u?v.scrollLeft=r.scroll.left+u:0<u&&0>q&&(v.scrollLeft=r.scroll.left+Math.min(u,-q)));a.isEmptyObject(v)?a.isFunction(m.complete)&&m.complete.call(l[0]):(e.test(l[0].nodeName)&&(l=a("html,body")),l.animate(v,m.duration).eq(0).queue(function(b){a.isFunction(m.complete)&&m.complete.call(l[0]);b()}))}return this}});var m={auto:!0,scroll:!0,visible:!1,hidden:!1};
a.extend(a.expr[":"],{scrollable:function(a,c,d,g){c=b["string"===typeof d[3]&&d[3].toLowerCase()]||b.both;d=document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(a,null):a.currentStyle;var n=m[d.overflowX.toLowerCase()]||!1,w=m[d.overflowY.toLowerCase()]||!1,u=e.test(a.nodeName);if(!n&&!w&&!u)return!1;a={height:{scroll:a.scrollHeight,client:a.clientHeight},width:{scroll:a.scrollWidth,client:a.clientWidth},scrollableX:function(){return(n||u)&&this.width.scroll>
this.width.client},scrollableY:function(){return(w||u)&&this.height.scroll>this.height.client}};return c.y&&a.scrollableY()||c.x&&a.scrollableX()}})})(jQuery)}])});var epiviz={ui:{}};epiviz.ui.PrintManager=function(a,b,e,c){this._containerId=a?a:"pagemain";this._fName=b?b:"metaviz_"+Math.floor($.now()/1E3);this._fType=e?e:"pdf";this._workspaceId=c};
epiviz.ui.PrintManager.prototype.print=function(){function a(a){$(a).find(".domain").each(function(){$(this).css({fill:"none","stroke-width":"1px",stroke:"#000000","shape-rendering":"crispEdges"})});$(a).find(".gene-name").each(function(){$(this).remove()});epiviz.utils.stringContains($(a).attr("id"),"track-lines")&&$(a).find(".lines path").each(function(){$(this).css({fill:"none"})});$(a).find("text").each(function(){$(this).css({"font-size":"11px"})});$(a).find(".chart-legend").each(function(){$(this).css({border:"none",
background:"transparent"})});$(a).find(".row-legend").each(function(){$(this).attr("x","-50");$(this).css({"font-size":"11px"})})}var b=this,e=$("#"+b._containerId),c=e.find("svg");c.each(function(){var b,c;b=document.createElement("canvas");b.className="tempCanvas";a(this);c=(new XMLSerializer).serializeToString(this);c=c.replace(/xmlns=\"http:\/\/www\.w3\.org\/2000\/svg\"/,"");canvg(b,c,{useCORS:!0,renderCallback:function(){$(b).insertAfter(this);$(this).hide()}})});html2canvas(e,{timeout:0,width:e[0].scrollWidth+
200,height:e[0].scrollHeight+200,useCORS:!0}).then(function(a){var f=a.getContext("2d");f.mozImageSmoothingEnabled=!1;f.imageSmoothingEnabled=!1;var f=b._fName+"."+b._fType,n=b._fType,h=a.toDataURL("image/png");"pdf"==n?(a=new jsPDF("l","px",[.6*(1400<e[0].scrollWidth?e[0].scrollWidth:1400),.65*(1E3<e[0].scrollHeight?e[0].scrollHeight:1E3)]),n="http://metaviz.cbcb.umd.edu/?ws="+b._workspaceId,a.addImage("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQ4AAAAyCAYAAACtfjXHAAAVX0lEQVR4nO1de5QU1Zn/db27errnxVMcHAaF+AxmiKLBRN3Bo+7RELOAB4OS1YVN9piHyQmY1SSuiYKJa8IxcSFZwyZRw2BO3NWsCeJj1SO7hEHFVzAwIIg4wsz0dE/XVHU9ev+oLqem+lZ3VVd1z6j1O6fOzNS9db9bNfd+93vd78balm/BREWit1tgWk8/T2cbLlDZxnlGjJ1tUPRkytAnq0yCYXUpb1DsAGWoBwHspoz8U/zgq9szUxYOjXffAXQAWAdgSfHv7QDWAugJmc46AGuKv/cUaWwPmUaEDykOPbC0qudiE41xJHq7Of3Erit1ir3aoLjLdIoX/TxPG3kNMLaxWu5+Lv3GI5kpC/Va9bUC9sNkHnYMApgPoDckGk8A6CLcn4/wGVSEDyGqZRxUyP2oGo3pPZN4LXu73L74sMy1bFWZ5Of9Mg0A0CmO0SnhcplrfTg36ZN/FdTBf0y99zxXiz6XwRqUMg0AaAawMSQaq0BmGoAphUSIUDNQydyBk8e5Dw2sLt0x3HjqAYVJ3qJT3JSwGtYpfpbMNt+Xa+3cK+QHqmOt1WFJmbIumAwkKFbVgUaECERQknjia7w29MPG9J6GehPn1cwywNir0uLNeowl0qcNuY/Vhp9mtez9rJa7W8j3387q0l2sLm2iDfkxFPSDlejodLxd5lq2sFruqcTIkTmhv0gpSNKGHeUmvdf2OyvUcZNGIkx8rANQALALE3QBoPQYyylM4zeHU3P3NEiHLq4H0Qbp8CRWy3UrbOq3AHWCvYw28mley/yGLqgrEvLRWTolTFOZhotVJnm9yiS+KXOt31FpcY1Ki6t1SrgCMXpWQj46nTbyqwHjccBQ3eiqTOIimZ/8UnJ439rDDy6ja/R6Haj8zw46qctJNPZ+TER0wJwU9mtN2Sc+erAWlk4EX2RqgvdtHDrFzxqOz3hCyA/c0Zjew9SKoKj0XTYiTHlFZRK2wW8YvJb9E6+mP8e++eA0hUmt0GPsb3LC9INe2swJ09/VKW4TQF2eGni5ndZHbqON/HukujrFxbMNJ9859/Mbnm489sJJobzUWHiZsEFVCS+MZ6IyjgiVsan4s8f2+4TCWONojKZkruXm4eQpzyZGjrSFSSjR280I+YF1EjfpDzrFTzPvGnley9wvKsdPVZjkpQrb9Ij8sZVKEDqZlrPf0en493h1sJ3XMl8DjHdJ9SR+6gVSy7yXROXYlUHoEUBSIbYS7lW7kjSjlHGQ2o8YxwcXawHEYHrHBse5L0QQvSo6HT9P5if/WZTf/VQYRJLD+6fIJ13xlMy1rEGMjgEGROXY75PZ/acrTOp6iZ/yZhh07JD4qSMKk/qJkE+fAuAHKOglDEmlxSaJa3kkIR/9QYiqC0mSIK0a1aorJIbTg1L3ayUbSIQIVcPVHatT3FRJmPKkkB+4PgiBhHx0niSe+Gedjl9g3jFeTMh9F0n85KuyyVP2BWnbC2SuZRjALYI6dAZtKNtKKsToWE6Y/u25V214tOGtR5IhkCSt9D0olQqqVVdIDGcTSmNDmqtsP0KEiqAA5MsU8zLX9Atey9x++MFlMb+NC/n+q2R+0vM6xc9EQZd5LXsTQM3PCdOfqb7L1UHmWvYd/O21lxaNqFlnuSRMvUydcfELjcd3zgpIyrnSDxYvUkCWX3WFpKZsL7ZPCiqL1JUINQGVzB04nS6oW2Bat0lVoDCpWzqW/fL+1JFtrJdGDz+4LMZqw7fIbNPDeoxN0EZ+l6AOdipM8h4ARnjd94e25VsKOsVtonXl47Q+ssNZrjCpM4ZbztohqINBxHznZLUYRhjqCsmbYoWXk3ThoOpKF0yPxy6UekJ2Fcsmott3TfFy9rkAoBvuAXoRPILKJmbt02Ps1byaXkgb8ituFVVaXDkybeEjjcd3lo3mTB3Zxp68ZON/qEzD7YjFQBvKnTrFnSdzk14Pv/vVQafjB4S3Hv00q0t3wsHIdEqYqjINTwv5/r+pomnSRLUkgUGU7iHxq664qSkAWaKpVlVZBTNk/gmYMQWk9+oslj1RrOvFRewGK27B7fLirm22tbMO7tGzS4pl1vt5Za4W89zlsX4lNAMYAPn9rPfoLvNsue9V7hog0PON920cCtv0QuLos528NnQzCrpMqqzS4uXDzWc+nsq8kSKVNw7sToxM/dR/KmzTCgBpVpcX6xT/bQBa0I6GjVzHUk2lxW8L+f7FtJHP2Mv0GJtU2dR/C/kBv5OBtIrZVQjS5jOvNJoJdS01xUmnXH8q0XgCZli8n2c7YA7yboyPXaULJiPwOyG6YDICLyH664s/OxGO4XkVzG81iPq6XC0GG0hSHGMczcy4RFWYxnWCmv4kbSgvkx7Q6finc4n2pxqkw5Ps91OZv7RKjR97UmUSl9GGspfXsueotPhfQTpXD8hc66MNQ68v4LXsXvt9PcZyMtv4EK8NfcFHc5UYRxB1pZyaYtFxqit+BngnzEkUZEAtgcl46qkGrCrSDMKw1hTbKIetGP1fBpGuLFj2LTvz94pBmO7aai5LMg3E/IheFZlrfbVh8JVzeS2zgWSS0Ol454gw+VlR7jsBABIj70zNNbQ/o9LiuawuPSuOvHO+wiT/GqRj9cRQ87w3+L4d5/Ja5g9jCmI0rTCNm3k17dWzVIlxkIykS+Bt0JMmtNNT45Q6vE5gS2Ig1d8EYCnGDr4WmLEGJCmnE/WTPJbAfdPgegCLUDpx3NIOdMFdNbBgfe+gjKMLo9+aFINTK3Ta6AZKveDqjh1qna8oTOqrQj59NQr6sLNcp4RTFa75eVHumx0rqBqAAq9lHxLTr1+STcwaCNKp8UBmxiVDzKE/Xslq2TsczJJWmOTPeTX9JQ/NVGIcAHmgVBqIJG9KD6Htal2yJKbRAzMAaTVK+zwIc2LOxqgIb0cn/O0CtgKe3C4SjQ4XGtsxythIk8NiKEtRutIvQXl1x/oOHQjGPKxne1E/xmEtDs1FmoHSLlTcVi9zLVtE5dgC2pDfcpbpFDdL4ZqeU9nGaYnju87e133DNUOt8wNFfo4nch1LDZVJ/nNC7rvezOtRRIyOKWzTT3k1fWOFJpziH0l9IA2USuoByYhKasdNAiiHNYQ62+E9p8dakCf2EtR2n8VGlH6TTTCZghfRf6tL3XVwl9TsgXZhMI562jasxaEH5mIQCJ7ycUjCtNfEkaMLaEPZ6SzTKX66RovP5ps+1tm2fIuLS/eDhZww/X5ROnwFbch2SSumsKkNvJq+2eUx0upOmsi98K+ukAapV8ZRTl1pRukK2wtzNfYCaxVzW6VrtXmtE2QJzO+EcHvGi9SxBNXZciyjqL2tWsPyHln/28Bh7J4T+WQTs94Vc29dxOrSY84yneJaVCb1pJDvr8vu2nog2zD7jw1Df/kMq2Vte10oKGzTHbya/hEhIM6LmmLBj7riVU1xo1ducNsHsYW1qDywrIRE5dyw1upfC1sHiWa1+Va2olSlKcfI12P0+1QjddhTSYaVCa4cLA/KIMxvFApNXxnAssk5kpjd9zm6oD7gLNMprsF0YfZ/NoyOTQQMNc/bLfa/dB6vZt6w31fYpm+0L9v8UCrzRtx2u1wMhxNuxjkSvKopbvTKMQ7nwPeic6+BGQvgpoZYas5qkFW1MECKng0yIZwqA4lZ22F9I7+qWIet3XpIG6swKj2Fmu/Wd+rAoaazNGrPfdexWnazs0yPsbzKpn4n5I9fG0rvxgGJkbdTrJbbxmvZLezLG+ihqRcc5I/tXMir6efs9XQ6vmwkcdL/iMqxmcVbpBXKbTCTNqW5BYORBrCbRZw0UcsxDiezKzeYV8FkGG4xDz0wJYxFqG2+02aQbTJBQHq+3HezG0n9uK/tRtFa2ze6MGo8Xhs2vapyjqof/4quMsm/57Whf3OW6TGWltnmzayWvSl49+oLXhuaKfNTnleZxCID1HSxbaEAAJkTugaYw9suEfIDYyaWSouflPjJu3ktsxj+VBWgdJK6rXJOqYDEdMrRdDOOum3GI9HfD7Ix0qK3GqaUUY/s6n6/sxeQ3OTlGIddwvGjrlgSSq2lDcv2BJgMg2S8DoQgyYoL+7pXfZnXMj8uKYnRMZVJ3s1r2XvZlzfUKtNWqBDyx8/RaPH/dIo7k9Vyj4vp1y4davlEzirPdSyV//rwl64WlffucbhrW1Ew1sOfqgJ4iyIl6dqVBp1XdYV0zy6tdME0qrnFdwzCXMlmo/6Rj6S+BIUfSQ0YfWevjMNuTK0l42jGqNt1O0LwoJAQKNNX2/ItBQX4Oq+mhxU2dYuTDylM8p/YM25oE/ID1xS3t09I8FrmOpmbdB+AOK9lf8337bh+aMYlJSkI25ZvMSTgJlF+96DET/5XxGgaADRaOBlAxlG9kn5vSQ52hmOpK4O2v52otKr3oHQwWxZ1L3CeB0PCephM46OMTTDtB80wJYlKzNP6npUkxqDohvn/tlTH9/HA/95eUvm52SX3VgKwZ8a7rXhvs71SKMcjKGzTrUI+fSNglJxhotLilSrTsENU+sY7m3oJEvJRgdWljQqT2gwgLirH7t7XfcN1GQLTsEMSpm0Q88eXoKBLAKBTAgWgyVHNy0StpK6QjJeVBh2JWXkV75uL991W200YDa5yg7UZbI3tChOk9xuP/TH2TYt+AvhqKW1sLNLx41K3Yx6AXwL4XvFqhzmu73FWDO1cFZlruVfID1xNF9SSDXI6xZ2hsM1/FvIDl4VFLygapEPzZbapR6XFVXRB1YX8wI0SP/mbXmNRJH7q73ktexEKOjG3KbwxjnLqih9vSiW6Xg23lvTjZAxbMeopKSdF2Q2X1g7VMPZ12FFNkFutYP0/uir0oR4b2tYU6QRxu9oZRBrA1wF8FaWLYrgHMsncpIcF5fjFtJEvyfOpU1yTzLU8xurSjxr7d/Fh0vWDZPZNVlAHbxuJT9+h0/HTaCOfEeT3rpC5lnv9tqWwTTtpI7+ALmikvKZe/nGkeAyLYXjZm+LWphNug5oUiAaYDG1T8acVnu1FvK60Ec8NfiQGkiFzvHKCeN34ZpVtRW3c01aqAMBk7tWoQhcWLwuW7fJrpMqhn+SWE6bv4NWhc1hdeolET6XFbww3n7FTyB8/PWzalSAqfZ+REu0vymzzd/QYy9CG/GZc6VuQi894vNo2dTp+QI9RpHM0vXJ8N3XFGSPgRU0BRjOO2eGmejhp2/dgrIbJNPx4SkhqifN5rxJROTj7TYokrRcqbXyzb8OvhZpi37OzNgCNX9p+PwjgJzAlkBJpA6jREZASP/mwIL39KVaXNpPKdUo4S+Ym7Wa13Pp6HASVGDkyh9Wl30n81Kd1ijsdAHgt+4eGzJvnDsfb3qj0fGWMPRumiGoZB2CuHtWoKW603c562QTyXo1qbAakrFq9IDMeJ02/k570LdzcxbWGpXq4bXyzx26E7a628qc0I5jbdSVMe4aF22AyjJVuD9Ts7Nhsco6k0uIXhXz/P9AFdYRQhVOZxLeGU3P/wmvZLyR6u0M/yyUx8vZprJb9VS4+/TWVFq8CEKMLqibkj6/d133DFUNNZ6VDIhUktoCkrpDa88M4SJKJm0vVOdjsMQBe0QVyYJibEZX0vn6YBymAqpp+hwE7QyjHOGph27Bc5UHcrk7j50swPSjt5R6q+aHTMtf6C1F6ez5tyLtJ5TrFz1CY5K/l9sV7eTX95cb0HiEIvURvNyfk+z/ParltufgJr6pMcgVAMQBAG8pBQX7vIpmbtD7kDXkOG4JxKLbrrjJJoEtQiSm4JTt2g5/Q8/WEtq3MWF6MjlYiHSe2wv293CQGP5vGSPlArH57bcduGwgCu5HULvWsKvalFkZRy4NS4nb1Cafx8+teHqrLafXZxKzXxdyhBbya/j5dUIkTSqe4DoVt+ulwau5RUXnvV8nh/Vcmers9MZHGYy9MF/L9y3gt8yu5fXGfzLU+rDKJRQBV3IhmgNWlf08M9348F5/xfHhvBoA4SKk3C/O/lSu974pKIqzfQefVJWuBZIW3MoJtROlKau2qtcqdsKJJ3eB2gNR+eE9rZ3kPnOjEaKQraS+JlYB5P0ZjHoLCUvmsmA4LdmNzmEZRy4PSi2BMowljjZ/PFK+KqNlRj05kk3NUALcmRo5syXPNG1VaPJ9UT6f4JomfsgL8lBW0eGKe14ZeB/BKzNDfAQppoFAoxBhRo8UmwJgDUHOHJp07CzFygCpt5A/wavorEj/lMTV1qqe+HnrAuwt85jXdpIHn16ptDSw3Hd2vbuxVVbFgDUBS2r9V8LeZy2qr3ETphSkxkFZ7UuyHW84Pa7UlSTxWn/0kFAqCrUWaS2D2tVYb2iymPQjvuUfc4DR+ftHrg3VjHBZy8RmvHn5w2cJT/u5nV6tMYp1OCTPd6uoUz+kUPw9mYIov0EY+QxW0H8b7d9+dmbKQZGMJC5VCt71iPcgTqRqjWjWxDr0wYzW6Ub2HYju853tYD3I+kGpozofJIMbz9LpNMBlHJ0zmYfUl7Cxf1jaEXgTbo9OOscbPzTC9KZ5QF1XFibblWwoy1/pQw+Crc3ht6EZaHzkSVtusLh3jtey/iNLb7Sotfr/GTAPwtyu2HEinsQHVhXb7cck6n7PiNvy8g6Wa+F0B11ZBiwQrzWE13yqsnBg9GGXw9uRGYds2rP52wOfRCNcsuPX96/DUkw7Y2rSCvTxjXBiHBTOvaeO91Ks/70gO718h5Ad2oFAStV4ZBV0X8v1PJrN7r9Vf+lmbwiS/m23oqNdhvaTVuZrBaOnsPY6/q12tnOqKnyMht8LcvLYI7nkceoplixBso5uTVpDVeT3MHKWr4Z6QyNqctxZm+HyYm8CWYqx0uB7h70zdDm/JllzRJfeirW9MJtAfw2QenhFrW06KXRo/NEiH5o4I0z6LWOxvAZyvx1iiOkUb+eOUkX+SgvEnbuTdP2aTc46G1Qc/No4IET4oeG72mdavL2JU/T8I4GyUMo4LATxt+3tMxru62zgqYVicuRfAXQDuSh56NG5M/sRphRh9ms6ITSgYlEFxR1DQ9/R237CvbfkWAwCUJPF8qAgRIpRiJcbaDG+DT2kDmICMw47szCtG4LINeaJJShEifEDwXdvvVrCXb0xoxhEhQoRQsRhjI0IPYiwjsaPd8feYerFC4UNxokGECBEq4LnZZ34XZp6NwBhXr0qECBHqipJD1apFpKpEiPDRwWaYkaJejjBpwlgj6jP2wkhViRDhIwKbO9YLLkQZd2ykqkSIEME3IsYRIUIE34gYR4QIEXwjYhwRIkTwjcirEiFCBBLSKJPU5/8B11FP6b8S6U4AAAAASUVORK5CYII=",
"PNG",20,20,100,21),a.setFontSize(10),a.setTextColor(0,0,0),a.setFontSize(10),null!=b._workspaceId&&(a.text(350,25,"Workspace ID"),a.setTextColor(0,0,255),a.setFontSize(16),a.text(350,45,n)),a.addImage(h,"PNG",15,55),a.save(f)):(navigator.msSaveBlob?(h=a.msToBlob(),a=new Blob([h],{type:"image/png"}),navigator.msSaveBlob(a,f)):(a=new Blob([h],{type:"image/png"}),n=document.createElement("a"),void 0!==n.download?(URL.createObjectURL(a),n.setAttribute("href",h),n.setAttribute("download",f),n.style="visibility:hidden",
n.setAttribute("target","_blank"),document.body.appendChild(n),n.click(),document.body.removeChild(n)):(f=h.replace("image/png","image/octet-stream"),window.open(f))),e.find(".tempCanvas").remove(),c.each(function(){$(this).show()}))})};epiviz.deferred={};epiviz.deferred.Deferred=function(a){this._deferred=a||$.Deferred()};epiviz.deferred.Deferred.State={PENDING:"pending",RESOLVED:"resolved",REJECTED:"rejected"};
epiviz.deferred.Deferred.prototype.then=function(a,b,e){return new epiviz.deferred.Promise(this._deferred.then(a,b,e))};epiviz.deferred.Deferred.prototype.done=function(a,b){return new epiviz.deferred.Deferred(this._deferred.done(a,b))};epiviz.deferred.Deferred.prototype.fail=function(a,b){return new epiviz.deferred.Deferred(this._deferred.fail(a,b))};epiviz.deferred.Deferred.prototype.always=function(a,b){return new epiviz.deferred.Deferred(this._deferred.always(a,b))};
epiviz.deferred.Deferred.prototype.state=function(){return this._deferred.state()};epiviz.deferred.Deferred.prototype.notify=function(a){return new epiviz.deferred.Deferred(this._deferred.notify(a))};epiviz.deferred.Deferred.prototype.notifyWith=function(a,b){return new epiviz.deferred.Deferred(this._deferred.notifyWith(a,b))};epiviz.deferred.Deferred.prototype.progress=function(a,b){return new epiviz.deferred.Deferred(this._deferred.progress(a,b))};epiviz.deferred.Deferred.prototype.promise=function(a){return new epiviz.deferred.Promise(this._deferred.promise(a))};
epiviz.deferred.Deferred.prototype.reject=function(a){return new epiviz.deferred.Deferred(this._deferred.reject(a))};epiviz.deferred.Deferred.prototype.rejectWith=function(a,b){return new epiviz.deferred.Deferred(this._deferred.rejectWith(a,b))};epiviz.deferred.Deferred.prototype.resolve=function(a){return new epiviz.deferred.Deferred(this._deferred.resolve(a))};epiviz.deferred.Deferred.prototype.resolveWith=function(a,b){return new epiviz.deferred.Deferred(this._deferred.resolveWith(a,b))};
epiviz.deferred.Promise=function(a){this._promise=a};epiviz.deferred.Promise.prototype.then=function(a,b,e){return new epiviz.deferred.Promise(this._promise.then(a,b,e))};epiviz.deferred.Promise.prototype.done=function(a,b){return new epiviz.deferred.Deferred(this._promise.done(a,b))};epiviz.deferred.Promise.prototype.fail=function(a,b){return new epiviz.deferred.Deferred(this._promise.fail(a,b))};
epiviz.deferred.Promise.prototype.always=function(a,b){return new epiviz.deferred.Deferred(this._promise.always(a,b))};epiviz.deferred.Promise.prototype.state=function(){return this._promise.state()};epiviz.utils={};epiviz.utils.capitalizeFirstLetter=function(a){return a.charAt(0).toUpperCase()+a.slice(1)};epiviz.utils.stringContains=function(a,b){return-1!=a.indexOf(b)};epiviz.utils.stringStartsWith=function(a,b){return 0==a.indexOf(b)};
epiviz.utils.stringEndsWith=function(a,b){return a.lastIndexOf(b)==a.length-b.length};epiviz.utils.fillArray=function(a,b){a=a||0;for(var e=Array(a),c=0;c<a;++c)e[c]=b;return e};epiviz.utils.indexOf=function(a,b){for(var e=0;e<a.length;++e)if(b(a[e]))return e;return-1};epiviz.utils.arraysEqual=function(a,b){if(a==b)return!0;if(!a||!b||a.length!=b.length||a<b||b<a)return!1;for(var e=0;e<a.length;++e)if(a[e]!=b[e])return!1;return!0};
epiviz.utils.elementsEqual=function(a,b){if(a==b)return!0;if(!a||!b||a.length!=b.length)return!1;var e={},c;for(c=0;c<a.length;++c)a[c]in e||(e[a[c]]=0),++e[a[c]];for(c=0;c<b.length;++c){if(!e[b[c]])return!1;--e[b[c]]}return!0};epiviz.utils.range=function(a,b){b=b||0;a=a||0;for(var e=Array(a),c=0;c<a;++c)e[c]=c+b;return e};epiviz.utils.arrayAppend=function(a,b){a.push.apply(a,b)};epiviz.utils.arrayFlip=function(a){for(var b={},e=0;e<a.length;++e)b[a[e]]=e;return b};
epiviz.utils.indexOfMin=function(a,b){for(var e=null,c=null,d=0;d<a.length;++d)for(var f=b?d+1:0;f<a[d].length;++f)if(null==c||a[d][f]<c)c=a[d][f],e=[d,f];return{min:c,index:e}};epiviz.utils.arrayIntersection=function(a,b){var e={};a.forEach(function(a){e[a]=a});var c=[];b.forEach(function(a){a in e&&c.push(a)});return c};epiviz.utils.asyncFor=function(a,b,e){if(a){var c=function(d){d>=a?e&&e():b(d,function(a){a?e&&e():c(d+1)})};c(0)}else e&&e()};
epiviz.utils.deferredFor=function(a,b){for(var e=new epiviz.deferred.Deferred,c=new epiviz.deferred.Deferred,d=e.promise(),f=0;f<a;++f)(function(e){d=d.then(function(){var d=b(e);e==a-1&&d.then(function(){c.resolve()});return d})})(f);e.resolve();return c};epiviz.utils.mapCopy=function(a){var b={},e;for(e in a)a.hasOwnProperty(e)&&(b[e]=a[e]);return b};
epiviz.utils.mapEquals=function(a,b){if(a==b)return!0;if(!a||!b)return!1;for(var e in a)if(a.hasOwnProperty(e)&&(!b.hasOwnProperty(e)||a[e]!=b[e]))return!1;for(e in b)if(b.hasOwnProperty(e)&&!a.hasOwnProperty(e))return!1;return!0};epiviz.utils.mapCombine=function(a,b,e){var c={},d;if(b)for(d in b)b.hasOwnProperty(d)&&(c[d]=b[d]);if(a)for(d in a)a.hasOwnProperty(d)&&(e&&c[d]&&$.isArray(c[d])&&a[d]&&$.isArray(a[d])?c[d]=c[d].concat(a[d]):c[d]=a[d]);return c};
epiviz.utils.mapJoin=function(a,b,e){b||""===b||(b=":");e||""===e||(e=",");var c="",d;for(d in a)a.hasOwnProperty(d)&&(c&&(c+=e),c+=d+b+a[d]);return c};epiviz.utils.mapKeyIntersection=function(a,b){var e=[];if(!a||!b)return e;for(var c in a)a.hasOwnProperty(c)&&c in b&&e.push(c);return e};epiviz.utils.forEach=function(a,b){for(var e in a)if(a.hasOwnProperty(e)&&b(a[e],e,a))break};
epiviz.utils.evaluateFullyQualifiedTypeName=function(a){try{for(var b=a.split("."),e=b.pop(),c=window,d=0;d<b.length;++d)c=c[b[d]];var f=c[e];return"function"!==typeof f?(console.error("Unknown type name: "+a),null):f}catch(n){return console.error("Unknown type name: "+a),null}};epiviz.utils.applyConstructor=function(a,b){var e;e=function(){};e.prototype=a.prototype;e=new e;e.constructor=a;a.apply(e,b);return e};epiviz.utils.RAD_TO_DEG=180/Math.PI;epiviz.utils.DEG_TO_RAD=Math.PI/180;
epiviz.utils.getInternetExplorerVersion=function(){var a=-1;if("Microsoft Internet Explorer"==navigator.appName){var b=/MSIE ([0-9]{1,}[.0-9]{0,})/.exec(navigator.userAgent);null!=b&&(a=parseFloat(b[1]))}return a};epiviz.utils.generatePseudoGUID=function(a){for(var b="",e=0;e<a;++e)b+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.round(61*Math.random())];return b};epiviz.utils.colorize=function(a,b,e,c,d,f){return d3.scale.linear().domain([a,e,b]).range([c,f,d])};
epiviz.utils.colorizeBinary=function(a,b,e,c){return d3.scale.linear().domain([a,b]).range([e,c])};epiviz.utils.sign=function(a){return 0>a?-1:0==a?0:1};var caja={};epiviz.caja={};caja.initialize=function(){};epiviz.caja.cajole=function(a,b){var e=new epiviz.deferred.Deferred;setTimeout(function(){e.resolve(eval("("+a+")"))},0);return e};
epiviz.caja.run=function(a,b){var e=new epiviz.deferred.Deferred;setTimeout(function(){var b=document.getElementsByTagName("head")[0],d=document.createElement("script");d.type="text/javascript";d.src=a;d.onreadystatechange=d.onload=function(){e.resolve()};b.appendChild(d)},0);return e};epiviz.caja.chain=function(a,b){$.isArray(b)||(b=epiviz.utils.fillArray(a.length,b));return epiviz.utils.deferredFor(a.length,function(e){return epiviz.caja.run(a[e],b[e])})};
epiviz.caja.buildChartMethodContext=function(){return{epiviz:{ui:{charts:epiviz.ui.charts,controls:epiviz.ui.controls},utils:epiviz.utils,plugins:epiviz.plugins,measurements:epiviz.measurements,events:epiviz.events,deferred:epiviz.deferred,datatypes:epiviz.datatypes,data:{DataProvider:epiviz.data.DataProvider,Request:epiviz.data.Request,Response:epiviz.data.Response,WebServerDataProvider:{makeGetRequest:epiviz.data.WebServerDataProvider.makeGetRequest}},Config:epiviz.Config},d3:d3,$:$,sprintf:sprintf,
goog:goog}};Array.indexOf||(Array.prototype.indexOf=function(a,b){for(var e=b||0;e<this.length;e++)if(this[e]===a)return e;return-1});
epiviz.utils.ExpressionParser=function(a){function b(a){function b(){}b.prototype=a;return new b}function e(a,b,c,d){this.type_=a;this.index_=b||0;this.prio_=c||0;this.number_=void 0!==d&&null!==d?d:0;this.toString=function(){switch(this.type_){case 0:return this.number_;case 1:case 2:case 3:return this.index_;case 4:return"CALL";default:return"Invalid Token"}}}function c(a,b,c,d){this.tokens=a;this.ops1=b;this.ops2=c;this.functions=d}function d(a){return"string"===typeof a?(v.lastIndex=0,v.test(a)?
"'"+a.replace(v,function(a){var b=E[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+"'":"'"+a+"'"):a}function f(a,b){return Number(a)+Number(b)}function n(a,b){return a-b}function h(a,b){return a*b}function g(a,b){return a/b}function m(a,b){return a%b}function p(a,b){return""+a+b}function r(a){return-a}function t(a){return Math.random()*(a||1)}function l(a){for(var b=a=Math.floor(a);1<a;)b*=--a;return b}function q(a,b){return Math.sqrt(a*a+b*b)}function w(a,
b){if("[object Array]"!=Object.prototype.toString.call(a))return[a,b];a=a.slice();a.push(b);return a}function u(){this.success=!1;this.expression=this.errormsg="";this.tmpprio=this.tokenindex=this.tokenprio=this.tokennumber=this.pos=0;this.ops1={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sqrt:Math.sqrt,log:Math.log,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,"-":r,exp:Math.exp};this.ops2={"+":f,"-":n,"*":h,"/":g,"%":m,"^":Math.pow,",":w,"||":p};
this.functions={random:t,fac:l,min:Math.min,max:Math.max,pyt:q,pow:Math.pow,atan2:Math.atan2};this.consts={E:Math.E,PI:Math.PI}}var v=/[\\\'\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,E={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"};c.prototype={simplify:function(a){a=a||{};for(var d=[],f=[],g,h,l,m=this.tokens.length,n=0,n=0;n<m;n++)if(l=this.tokens[n],g=l.type_,0===g)d.push(l);else if(3===g&&
l.index_ in a)l=new e(0,0,0,a[l.index_]),d.push(l);else if(2===g&&1<d.length)h=d.pop(),g=d.pop(),l=this.ops2[l.index_],l=new e(0,0,0,l(g.number_,h.number_)),d.push(l);else if(1===g&&0<d.length)g=d.pop(),l=this.ops1[l.index_],l=new e(0,0,0,l(g.number_)),d.push(l);else{for(;0<d.length;)f.push(d.shift());f.push(l)}for(;0<d.length;)f.push(d.shift());return new c(f,b(this.ops1),b(this.ops2),b(this.functions))},substitute:function(a,d){d instanceof c||(d=(new u).parse(String(d)));for(var f=[],g=this.tokens.length,
h,l=0,l=0;l<g;l++)if(h=this.tokens[l],3===h.type_&&h.index_===a)for(h=0;h<d.tokens.length;h++){var m=d.tokens[h],m=new e(m.type_,m.index_,m.prio_,m.number_);f.push(m)}else f.push(h);return new c(f,b(this.ops1),b(this.ops2),b(this.functions))},evaluate:function(a){a=a||{};for(var b=[],c,d,e,f=this.tokens.length,g=0,g=0;g<f;g++)if(e=this.tokens[g],c=e.type_,0===c)b.push(e.number_);else if(2===c)d=b.pop(),c=b.pop(),e=this.ops2[e.index_],b.push(e(c,d));else if(3===c)if(e.index_ in a)b.push(a[e.index_]);
else if(e.index_ in this.functions)b.push(this.functions[e.index_]);else throw Error("undefined variable: "+e.index_);else if(1===c)c=b.pop(),e=this.ops1[e.index_],b.push(e(c));else if(4===c)if(c=b.pop(),e=b.pop(),e.apply&&e.call)"[object Array]"==Object.prototype.toString.call(c)?b.push(e.apply(void 0,c)):b.push(e.call(void 0,c));else throw Error(e+" is not a function");else throw Error("invalid Expression");if(1<b.length)throw Error("invalid Expression (parity)");return b[0]},evaluateArr:function(a){for(var b=
[],c=!1;!c;){var d={},e;for(e in a)if(a.hasOwnProperty(e)){if(b.length>=a[e].length){c=!0;break}d[e]=a[e][b.length]}c||b.push(this.evaluate(d))}return b},toString:function(a){for(var b=[],c,e,f,g=this.tokens.length,h=0,h=0;h<g;h++)if(f=this.tokens[h],c=f.type_,0===c)b.push(d(f.number_));else if(2===c)e=b.pop(),c=b.pop(),f=f.index_,a&&"^"==f?b.push("Math.pow("+c+","+e+")"):b.push("("+c+f+e+")");else if(3===c)b.push(f.index_);else if(1===c)c=b.pop(),f=f.index_,"-"===f?b.push("("+f+c+")"):b.push(f+"("+
c+")");else if(4===c)c=b.pop(),f=b.pop(),b.push(f+"("+c+")");else throw Error("invalid Expression");if(1<b.length)throw Error("invalid Expression (parity)");return b[0]},variables:function(){for(var a=this.tokens.length,b=[],c=0;c<a;c++){var d=this.tokens[c];3===d.type_&&-1==b.indexOf(d.index_)&&b.push(d.index_)}return b},toJSFunction:function(a,b){return new Function(a,"with(Parser.values) { return "+this.simplify(b).toString(!0)+"; }")}};u.parse=function(a){return(new u).parse(a)};u.evaluate=function(a,
b){return u.parse(a).evaluate(b)};u.Expression=c;u.values={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sqrt:Math.sqrt,log:Math.log,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,random:t,fac:l,exp:Math.exp,min:Math.min,max:Math.max,pyt:q,pow:Math.pow,atan2:Math.atan2,E:Math.E,PI:Math.PI};u.prototype={parse:function(a){this.errormsg="";this.success=!0;var d=[],f=[];this.tmpprio=0;var g=77,h=0;this.expression=a;for(this.pos=0;this.pos<this.expression.length;)this.isOperator()?
this.isSign()&&g&64?(this.isNegativeSign()&&(this.tokenprio=2,this.tokenindex="-",h++,this.addfunc(f,d,1)),g=77):this.isComment()||(0===(g&2)&&this.error_parsing(this.pos,"unexpected operator"),h+=2,this.addfunc(f,d,2),g=77):this.isNumber()?(0===(g&1)&&this.error_parsing(this.pos,"unexpected number"),a=new e(0,0,0,this.tokennumber),f.push(a),g=50):this.isString()?(0===(g&1)&&this.error_parsing(this.pos,"unexpected string"),a=new e(0,0,0,this.tokennumber),f.push(a),g=50):this.isLeftParenth()?(0===
(g&8)&&this.error_parsing(this.pos,'unexpected "("'),g&128&&(h+=2,this.tokenprio=-2,this.tokenindex=-1,this.addfunc(f,d,4)),g=333):this.isRightParenth()?(g&256?(a=new e(0,0,0,[]),f.push(a)):0===(g&16)&&this.error_parsing(this.pos,'unexpected ")"'),g=186):this.isComma()?(0===(g&32)&&this.error_parsing(this.pos,'unexpected ","'),this.addfunc(f,d,2),h+=2,g=77):this.isConst()?(0===(g&1)&&this.error_parsing(this.pos,"unexpected constant"),a=new e(0,0,0,this.tokennumber),f.push(a),g=50):this.isOp2()?(0===
(g&4)&&this.error_parsing(this.pos,"unexpected function"),this.addfunc(f,d,2),h+=2,g=8):this.isOp1()?(0===(g&4)&&this.error_parsing(this.pos,"unexpected function"),this.addfunc(f,d,1),h++,g=8):this.isVar()?(0===(g&1)&&this.error_parsing(this.pos,"unexpected variable"),a=new e(3,this.tokenindex,0,0),f.push(a),g=186):this.isWhite()||(""===this.errormsg?this.error_parsing(this.pos,"unknown character"):this.error_parsing(this.pos,this.errormsg));for((0>this.tmpprio||10<=this.tmpprio)&&this.error_parsing(this.pos,
'unmatched "()"');0<d.length;)a=d.pop(),f.push(a);h+1!==f.length&&this.error_parsing(this.pos,"parity");return new c(f,b(this.ops1),b(this.ops2),b(this.functions))},evaluate:function(a,b){return this.parse(a).evaluate(b)},error_parsing:function(a,b){this.success=!1;this.errormsg="parse error [column "+a+"]: "+b;throw Error(this.errormsg);},addfunc:function(a,b,c){for(c=new e(c,this.tokenindex,this.tokenprio+this.tmpprio,0);0<b.length;)if(c.prio_<=b[b.length-1].prio_)a.push(b.pop());else break;b.push(c)},
isNumber:function(){for(var a=!1,b="";this.pos<this.expression.length;){var c=this.expression.charCodeAt(this.pos);if(48<=c&&57>=c||46===c)b+=this.expression.charAt(this.pos),this.pos++,this.tokennumber=parseFloat(b),a=!0;else break}return a},unescape:function(a,b){for(var c=[],d=!1,e=0;e<a.length;e++){var f=a.charAt(e);if(d){switch(f){case "'":c.push("'");break;case "\\":c.push("\\");break;case "/":c.push("/");break;case "b":c.push("\b");break;case "f":c.push("\f");break;case "n":c.push("\n");break;
case "r":c.push("\r");break;case "t":c.push("\t");break;case "u":d=parseInt(a.substring(e+1,e+5),16);c.push(String.fromCharCode(d));e+=4;break;default:throw this.error_parsing(b+e,"Illegal escape sequence: '\\"+f+"'");}d=!1}else"\\"==f?d=!0:c.push(f)}return c.join("")},isString:function(){var a=!1,b="",c=this.pos;if(this.pos<this.expression.length&&"'"==this.expression.charAt(this.pos))for(this.pos++;this.pos<this.expression.length;)if("'"!=this.expression.charAt(this.pos)||"\\"==b.slice(-1))b+=this.expression.charAt(this.pos),
this.pos++;else{this.pos++;this.tokennumber=this.unescape(b,c);a=!0;break}return a},isConst:function(){var a,b;for(b in this.consts){var c=b.length;a=this.expression.substr(this.pos,c);if(b===a)return this.tokennumber=this.consts[b],this.pos+=c,!0}return!1},isOperator:function(){var a=this.expression.charCodeAt(this.pos);if(43===a)this.tokenprio=0,this.tokenindex="+";else if(45===a)this.tokenprio=0,this.tokenindex="-";else if(124===a)if(124===this.expression.charCodeAt(this.pos+1))this.pos++,this.tokenprio=
0,this.tokenindex="||";else return!1;else if(42===a)this.tokenprio=1,this.tokenindex="*";else if(47===a)this.tokenprio=2,this.tokenindex="/";else if(37===a)this.tokenprio=2,this.tokenindex="%";else if(94===a)this.tokenprio=3,this.tokenindex="^";else return!1;this.pos++;return!0},isSign:function(){var a=this.expression.charCodeAt(this.pos-1);return 45===a||43===a?!0:!1},isPositiveSign:function(){return 43===this.expression.charCodeAt(this.pos-1)?!0:!1},isNegativeSign:function(){return 45===this.expression.charCodeAt(this.pos-
1)?!0:!1},isLeftParenth:function(){return 40===this.expression.charCodeAt(this.pos)?(this.pos++,this.tmpprio+=10,!0):!1},isRightParenth:function(){return 41===this.expression.charCodeAt(this.pos)?(this.pos++,this.tmpprio-=10,!0):!1},isComma:function(){return 44===this.expression.charCodeAt(this.pos)?(this.pos++,this.tokenprio=-1,this.tokenindex=",",!0):!1},isWhite:function(){var a=this.expression.charCodeAt(this.pos);return 32===a||9===a||10===a||13===a?(this.pos++,!0):!1},isOp1:function(){for(var a=
"",b=this.pos;b<this.expression.length;b++){var c=this.expression.charAt(b);if(c.toUpperCase()===c.toLowerCase()&&(b===this.pos||"_"!=c&&("0">c||"9"<c)))break;a+=c}return 0<a.length&&a in this.ops1?(this.tokenindex=a,this.tokenprio=5,this.pos+=a.length,!0):!1},isOp2:function(){for(var a="",b=this.pos;b<this.expression.length;b++){var c=this.expression.charAt(b);if(c.toUpperCase()===c.toLowerCase()&&(b===this.pos||"_"!=c&&("0">c||"9"<c)))break;a+=c}return 0<a.length&&a in this.ops2?(this.tokenindex=
a,this.tokenprio=5,this.pos+=a.length,!0):!1},isVar:function(){for(var a="",b=this.pos;b<this.expression.length;b++){var c=this.expression.charAt(b);if(c.toUpperCase()===c.toLowerCase()&&(b===this.pos||"_"!=c&&("0">c||"9"<c)))break;a+=c}b=this.pos;c=this.expression.indexOf("}",this.pos);"{"==this.expression.charAt(b)&&c>b&&(a=this.expression.substring(b,c+1));return 0<a.length?(this.tokenindex=a,this.tokenprio=4,this.pos+=a.length,!0):!1},isComment:function(){return 47===this.expression.charCodeAt(this.pos-
1)&&42===this.expression.charCodeAt(this.pos)?(this.pos=this.expression.indexOf("*/",this.pos)+2,1===this.pos&&(this.pos=this.expression.length),!0):!1}};return a.Parser=u}("undefined"===typeof exports?{}:exports);epiviz.utils.Iterable=function(){};epiviz.utils.Iterable.prototype.foreach=function(a){};epiviz.utils.IterableArray=function(a){this._array=a};epiviz.utils.IterableArray.prototype.foreach=function(a){for(var b=0;b<this._array.length&&!a(this._array[b]);++b);};
epiviz.Config=function(a){this.workspacesDataProvider=this.dataProviders=this.defaultWorkspaceSettings=this.navigationDelay=this.navigationStepRatio=this.zoomoutRatio=this.zoominRatio=this.chartSaverLocation=this.dataServerLocation=null;this.useCookie=this.useCache=!1;this.cacheUpdateIntervalMilliseconds=3E4;this.colorPalettesMap=this.colorPalettes=this.clustering=this.chartCustomSettings=this.chartSettings=this.chartTypes=this.maxSearchResults=null;if(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=
a[b]);if("epivizr_standalone"!=a.configType&&(b=epiviz.ui.WebArgsManager.WEB_ARGS["websocket-host"])&&b.length)for(var e=0;e<b.length;++e)this.dataProviders.push(sprintf("epiviz.data.WebsocketDataProvider,%s,%s",epiviz.data.WebsocketDataProvider.DEFAULT_ID+"-"+e,b[e]))}var c={};this.colorPalettes.forEach(function(a){c[a.id()]=a});this.colorPalettesMap=c;"default"!=a.configType&&(this.useCookie=epiviz.ui.WebArgsManager.WEB_ARGS.useCookie)};epiviz.Config.SETTINGS={};
epiviz.Config.DEFAULT_DATA_PROVIDER_ID="umd";epiviz.Config.DEFAULT_WORKSPACE_NAME="Default Workspace";epiviz.Config.EPIVIZ_V1_COLORS="#025167 #e7003e #ffcd00 #057d9f #970026 #ffe373 #ff8100".split(" ");epiviz.Config.COLORS_BRIGHT="#1859a9 #ed2d2e #008c47 #010101 #f37d22 #662c91 #a11d20 #b33893".split(" ");epiviz.Config.COLORS_LIGHT="#b8d2eb #f2aeac #d8e4aa #cccccc #f2d1b0 #d4b2d3 #ddb8a9 #ebbfd9".split(" ");epiviz.Config.COLORS_MEDIUM="#599ad3 #f1595f #79c36a #727272 #f9a65a #9e66ab #cd7058 #d77fb3".split(" ");
epiviz.Config.COLORS_D3_CAT10="#1f77b4 #ff7f0e #2ca02c #d62728 #9467bd #8c564b #e377c2 #7f7f7f #bcbd22 #17becf".split(" ");epiviz.Config.COLORS_D3_CAT20="#1f77b4 #aec7e8 #ff7f0e #ffbb78 #2ca02c #98df8a #d62728 #ff9896 #9467bd #c5b0d5 #8c564b #c49c94 #e377c2 #f7b6d2 #7f7f7f #c7c7c7 #bcbd22 #dbdb8d #17becf #9edae5".split(" ");epiviz.Config.COLORS_D3_CAT20B="#393b79 #5254a3 #6b6ecf #9c9ede #637939 #8ca252 #b5cf6b #cedb9c #8c6d31 #bd9e39 #e7ba52 #e7cb94 #843c39 #ad494a #d6616b #e7969c #7b4173 #a55194 #ce6dbd #de9ed6".split(" ");
epiviz.Config.COLORS_D3_CAT20C="#3182bd #6baed6 #9ecae1 #c6dbef #e6550d #fd8d3c #fdae6b #fdd0a2 #31a354 #74c476 #a1d99b #c7e9c0 #756bb1 #9e9ac8 #bcbddc #dadaeb #636363 #969696 #bdbdbd #d9d9d9".split(" ");epiviz.Config.VisualizationPropertySettings={WIDTH:"width",HEIGHT:"height",MARGINS:"margins",COLORS:"colors",DECORATIONS:"decorations"};epiviz.events={};epiviz.events.EventListener=function(a){this._id=epiviz.events.EventListener._nextId++;this._updateCallback=a};
epiviz.events.EventListener._nextId=0;epiviz.events.EventListener.prototype.update=function(a){this._updateCallback(a)};epiviz.events.EventListener.prototype.id=function(){return this._id};epiviz.events.Event=function(){this._count=0;this._listeners={};this._firing=!1};epiviz.events.Event.prototype.addListener=function(a){this._listeners[a.id()]||++this._count;this._listeners[a.id()]=a};
epiviz.events.Event.prototype.removeListener=function(a){this._listeners[a.id()]&&(delete this._listeners[a.id()],--this._count)};epiviz.events.Event.prototype.notify=function(a){if(!this._firing&&0!=this._count){this._firing=!0;for(var b in this._listeners)this._listeners.hasOwnProperty(b)&&this._listeners[b].update(a);this._firing=!1}};epiviz.events.Event.prototype.isFiring=function(){return this._firing};epiviz.events.EventResult=function(){this.value=this.errorMessage=this.success=null};
epiviz.data={};epiviz.data.MessageType={REQUEST:"request",RESPONSE:"response"};epiviz.data.Request=function(a,b,e){this._id=a;this._args=b;this._method=e};epiviz.data.Request.Method={GET:"get",POST:"post"};
epiviz.data.Request.Action={GET_ROWS:"getRows",GET_VALUES:"getValues",GET_COMBINED:"getCombined",GET_MEASUREMENTS:"getMeasurements",SEARCH:"search",GET_SEQINFOS:"getSeqInfos",SAVE_WORKSPACE:"saveWorkspace",DELETE_WORKSPACE:"deleteWorkspace",GET_WORKSPACES:"getWorkspaces",GET_HIERARCHY:"getHierarchy",PROPAGATE_HIERARCHY_CHANGES:"propagateHierarchyChanges",GET_PCA:"getPCA",GET_DIVERSITY:"getDiversity",GET_CHART_SETTINGS:"getChartSettings",SET_CHART_SETTINGS:"setChartSettings",GET_AVAILABLE_CHARTS:"getAvailableCharts",
ADD_MEASUREMENTS:"addMeasurements",REMOVE_MEASUREMENTS:"removeMeasurements",ADD_SEQINFOS:"addSeqInfos",REMOVE_SEQNAMES:"removeSeqNames",ADD_CHART:"addChart",REMOVE_CHART:"removeChart",CLEAR_DATASOURCE_GROUP_CACHE:"clearDatasourceGroupCache",FLUSH_CACHE:"flushCache",NAVIGATE:"navigate",REDRAW:"redraw",GET_CURRENT_LOCATION:"getCurrentLocation",WRITE_DEBUG_MSG:"writeMsg",PRINT_WORKSPACE:"printWorkspace",LOAD_WORKSPACE:"loadWorkspace",REGISTER_CHART_TYPES:"registerChartTypes"};
epiviz.data.Request.createRequest=function(a,b){return new epiviz.data.Request(epiviz.data.Request._nextId++,a,b||epiviz.data.Request.Method.GET)};epiviz.data.Request.fromRawObject=function(a){return new epiviz.data.Request(a.requestId,a.data)};epiviz.data.Request._nextId=0;epiviz.data.Request.prototype.id=function(){return this._id};epiviz.data.Request.prototype.type=function(){return epiviz.data.MessageType.REQUEST};epiviz.data.Request.prototype.method=function(){return this._method};
epiviz.data.Request.prototype.joinArgs=function(a,b){a=a||"=";b=b||"&";var e=sprintf("requestId%s%s",a,this._id),c;for(c in this._args)if(this._args.hasOwnProperty(c))if(Array.isArray(this._args[c]))for(var d=0;d<this._args[c].length;++d)e+=sprintf("%s%s[]%s%s",b,c,a,this._args[c][d]);else e+=sprintf("%s%s%s%s",b,c,a,this._args[c]||"");return e};epiviz.data.Request.prototype.isEmpty=function(){for(var a in this._args)if(this._args.hasOwnProperty(a))return!1;return!0};
epiviz.data.Request.prototype.get=function(a){return a in this._args?this._args[a]:null};epiviz.data.Request.prototype.raw=function(){return{requestId:this._id,type:this.type(),data:epiviz.utils.mapCopy(this._args)}};epiviz.data.Request.emptyRequest=function(){return epiviz.data.Request.createRequest({})};
epiviz.data.Request.getRows=function(a,b){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.GET_ROWS,datasource:a.id(),seqName:b?b.seqName():void 0,start:b?b.start():void 0,end:b?b.end():void 0,metadata:a.metadata()})};
epiviz.data.Request.getValues=function(a,b){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.GET_VALUES,datasource:a.datasource().id(),measurement:a.id(),seqName:b?b.seqName():void 0,start:b?b.start():void 0,end:b?b.end():void 0})};
epiviz.data.Request.getCombined=function(a,b){var e={},c;for(c in a)a.hasOwnProperty(c)&&(e[c]=function(){var b=[];a[c].foreach(function(a){b.push(a.id())});return b}());return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.GET_COMBINED,seqName:b?b.seqName():void 0,start:b?b.start():void 0,end:b?b.end():void 0,measurements:e})};
epiviz.data.Request.getMeasurements=function(a){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.GET_MEASUREMENTS,datasourceGroup:a})};epiviz.data.Request.search=function(a,b,e){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.SEARCH,q:a||"",datasourceGroup:e,maxResults:b})};
epiviz.data.Request.getSeqInfos=function(a){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.GET_SEQINFOS,datasourceGroup:a})};epiviz.data.Request.saveWorkspace=function(a,b){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.SAVE_WORKSPACE,id:a.id(),name:a.name(),content:encodeURIComponent(JSON.stringify(a.raw(b).content))},epiviz.data.Request.Method.POST)};
epiviz.data.Request.deleteWorkspace=function(a){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.DELETE_WORKSPACE,id:a.id()},epiviz.data.Request.Method.POST)};epiviz.data.Request.getWorkspaces=function(a,b){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.GET_WORKSPACES,q:a||"",ws:b})};
epiviz.data.Request.getHierarchy=function(a,b){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.GET_HIERARCHY,datasourceGroup:a,nodeId:b})};epiviz.data.Request.propagateHierarchyChanges=function(a,b,e,c){return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.PROPAGATE_HIERARCHY_CHANGES,datasourceGroup:a,selection:b,order:e,selectedLevels:c})};
epiviz.data.Request.getPCA=function(a,b){var e={},c;for(c in a)a.hasOwnProperty(c)&&(e[c]=function(){var b=[];a[c].foreach(function(a){b.push(a.id())});return b}());return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.GET_PCA,measurements:e})};
epiviz.data.Request.getDiversity=function(a,b){var e={},c;for(c in a)a.hasOwnProperty(c)&&(e[c]=function(){var b=[];a[c].foreach(function(a){b.push(a.id())});return b}());return epiviz.data.Request.createRequest({version:epiviz.EpiViz.VERSION,action:epiviz.data.Request.Action.GET_DIVERSITY,measurements:e})};epiviz.data.RequestStack=function(){this._requests=[];this._callbacks={};this._dataMap={}};
epiviz.data.RequestStack.prototype.pushRequest=function(a,b){this._requests.push(a);this._callbacks[a.id()]=b};
epiviz.data.RequestStack.prototype.serveData=function(a){if(this._callbacks[a.id()])if(0<this._requests.length&&this._requests[0].id()==a.id()){var b=this._callbacks[a.id()];delete this._callbacks[a.id()];this._requests=this._requests.slice(1);for(b(a.data());0<this._requests.length&&this._requests[0].id()in this._dataMap;)b=this._callbacks[this._requests[0].id()],a=this._dataMap[this._requests[0].id()],delete this._callbacks[this._requests[0].id()],delete this._dataMap[this._requests[0].id()],this._requests=
this._requests.slice(1),b(a)}else this._dataMap[a.id()]=a.data()};epiviz.data.RequestStack.prototype.clear=function(){this._requests=[];this._callbacks={};this._dataMap={}};epiviz.data.Response=function(a,b){this._id=a;this._data=b};epiviz.data.Response.prototype.id=function(){return this._id};epiviz.data.Response.prototype.data=function(){var a=this._data,b=Object.keys(a);0<b.length&&-1!=b.indexOf("success")&&(b.splice(b.indexOf("success"),1),delete a.success);return a};
epiviz.data.Response.prototype.type=function(){return epiviz.data.MessageType.RESPONSE};epiviz.data.Response.prototype.raw=function(){return{requestId:this._id,type:this.type(),data:this._data}};epiviz.data.Response.fromRawObject=function(a){return new epiviz.data.Response(a.requestId,a.data)};epiviz.measurements={};
epiviz.measurements.Measurement=function(a,b,e,c,d,f,n,h,g,m,p,r,t){var l=epiviz.measurements.Measurement.Type;this._id=a;this._name=b;this._type=e;this._datasource=e==l.RANGE?this:new epiviz.measurements.Measurement(c,c,l.RANGE,c,d,f,null,"Blocks Track",null,null,null,r);this._datasourceGroup=d;this._dataprovider=f;this._formula=n||null;this._defaultChartType=h||null;this._annotation=g||null;this._minValue=m||0===m?m:null;this._maxValue=p||0===p?p:null;this._metadata=r||null;this._description=t||
null};epiviz.measurements.Measurement.Type={FEATURE:"feature",RANGE:"range",UNORDERED:"unordered"};epiviz.measurements.Measurement.Type.isOrdered=function(a){return a==epiviz.measurements.Measurement.Type.FEATURE||a==epiviz.measurements.Measurement.Type.RANGE};epiviz.measurements.Measurement.Type.hasValues=function(a){return a==epiviz.measurements.Measurement.Type.FEATURE||a==epiviz.measurements.Measurement.Type.UNORDERED};epiviz.measurements.Measurement.prototype.id=function(){return this._id};
epiviz.measurements.Measurement.prototype.name=function(){return this._name};epiviz.measurements.Measurement.prototype.type=function(){return this._type};epiviz.measurements.Measurement.prototype.datasource=function(){return this._datasource};epiviz.measurements.Measurement.prototype.datasourceId=function(){return this._datasource.id()};epiviz.measurements.Measurement.prototype.datasourceGroup=function(){return this._datasourceGroup};epiviz.measurements.Measurement.prototype.dataprovider=function(){return this._dataprovider};
epiviz.measurements.Measurement.prototype.formula=function(){return this._formula};epiviz.measurements.Measurement.prototype.formulaStr=function(){if(!this._formula)return"";var a=this._formula.referredMeasurements,b=this._formula.expression.toString(),e;for(e in a)a.hasOwnProperty(e)&&(b=b.replace(new RegExp("\\{"+e+"\\}","g")," {"+a[e].name()+"} "));return b};
epiviz.measurements.Measurement.prototype.evaluate=function(a){var b={},e;for(e in this._formula.referredMeasurements)if(this._formula.referredMeasurements.hasOwnProperty(e)){var c=this._formula.referredMeasurements[e];b["{"+e+"}"]=c.isComputed()?c.evaluate(a):a.get(c)}return this._formula.expression.evaluate(b)};
epiviz.measurements.Measurement.prototype.evaluateArr=function(a){var b={},e;for(e in this._formula.referredMeasurements)if(this._formula.referredMeasurements.hasOwnProperty(e)){var c=this._formula.referredMeasurements[e];b["{"+e+"}"]=c.isComputed()?c.evaluateArr(a):a.get(c)}return this._formula.expression.evaluateArr(b)};epiviz.measurements.Measurement.prototype.defaultChartType=function(){return this._defaultChartType};epiviz.measurements.Measurement.prototype.annotation=function(){return this._annotation};
epiviz.measurements.Measurement.prototype.minValue=function(){return this._minValue};epiviz.measurements.Measurement.prototype.maxValue=function(){return this._maxValue};epiviz.measurements.Measurement.prototype.metadata=function(){return this._metadata||[]};
epiviz.measurements.Measurement.prototype.componentMeasurements=function(){var a=new epiviz.measurements.MeasurementSet;if(!this._formula)return a.add(this),a;for(var b in this._formula.referredMeasurements)this._formula.referredMeasurements.hasOwnProperty(b)&&a.addAll(this._formula.referredMeasurements[b].componentMeasurements());return a};epiviz.measurements.Measurement.prototype.isComputed=function(){return this._formula?!0:!1};
epiviz.measurements.Measurement.prototype.raw=function(a){if(this._formula){var b=this._formula.referredMeasurements,e={},c;for(c in b)b.hasOwnProperty(c)&&(e[c]=a.get(b[c]))}return{id:this._id,name:this._name,type:this._type,datasourceId:this._datasource._id,datasourceGroup:this._datasourceGroup,dataprovider:this._dataprovider,formula:this._formula?{expression:this._formula.expression.toString(),referredMeasurements:e}:null,defaultChartType:this._defaultChartType,annotation:this._annotation,minValue:this._minValue,
maxValue:this._maxValue,metadata:this._metadata,description:this._description}};epiviz.measurements.Measurement.prototype.toString=function(){return this.name()};
epiviz.measurements.Measurement.fromRawObject=function(a,b){var e=null;if(a.formula){for(var e=epiviz.utils.ExpressionParser.parse(a.formula.expression),c={},d=e.variables(),f=0;f<d.length;++f)if(epiviz.utils.stringStartsWith(d[f],"{")&&epiviz.utils.stringEndsWith(d[f],"}")){var n=parseInt(d[f].substring(1,d[f].length-1));c[n]=b[a.formula.referredMeasurements[n]]}e={expression:e,referredMeasurements:c}}return new epiviz.measurements.Measurement(a.id,a.name,a.type,a.datasourceId,a.datasourceGroup,
a.dataprovider,e,a.defaultChartType,a.annotation,a.minValue,a.maxValue,a.metadata)};epiviz.measurements.MeasurementSet=function(a){this._measurementTree={};this._size=0;this._order=[];a&&this.addAll(a)};
epiviz.measurements.MeasurementSet.prototype.add=function(a){a.dataprovider()in this._measurementTree||(this._measurementTree[a.dataprovider()]={});a.type()in this._measurementTree[a.dataprovider()]||(this._measurementTree[a.dataprovider()][a.type()]={});a.datasourceGroup()in this._measurementTree[a.dataprovider()][a.type()]||(this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()]={});a.datasource().id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()]||(this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()]=
{});if(a.id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()])return!1;this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()]={measurement:a,index:this._order.length};this._order.push({measurement:a,contained:!0});++this._size;return!0};
epiviz.measurements.MeasurementSet.prototype.remove=function(a){if(!(a.dataprovider()in this._measurementTree&&a.type()in this._measurementTree[a.dataprovider()]&&a.datasourceGroup()in this._measurementTree[a.dataprovider()][a.type()]&&a.datasource().id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()]&&a.id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()]))return!1;this._order[this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()].index].contained=
!1;delete this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()];--this._size;return!0};epiviz.measurements.MeasurementSet.prototype.addAll=function(a){if(!a||!a.size())return!1;var b=!1,e=this;a.foreach(function(a){e.add(a)&&(b=!0);return!1});return b};epiviz.measurements.MeasurementSet.prototype.removeAll=function(a){var b=!1,e=this;a.foreach(function(a){e.remove(a)&&(b=!0);return!1});return b};
epiviz.measurements.MeasurementSet.prototype.foreach=function(a,b){for(var e=this.iterator(),c=e.first(),d=0;null!==c&&(b&&!b(c)||!a(c,d));c=e.next(),++d);};epiviz.measurements.MeasurementSet.prototype.iterator=function(){return new epiviz.measurements.MeasurementSet.Iterator(this)};epiviz.measurements.MeasurementSet.prototype.subset=function(a){var b=new epiviz.measurements.MeasurementSet;this.foreach(function(a){b.add(a)},a);return b};
epiviz.measurements.MeasurementSet.prototype.map=function(a){var b=new epiviz.measurements.MeasurementSet;this.foreach(function(e){b.add(a(e))});return b};epiviz.measurements.MeasurementSet.prototype.size=function(){return this._size};
epiviz.measurements.MeasurementSet.prototype.contains=function(a){return a.dataprovider()in this._measurementTree&&a.type()in this._measurementTree[a.dataprovider()]&&a.datasourceGroup()in this._measurementTree[a.dataprovider()][a.type()]&&a.datasource().id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()]?a.id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()]:!1};epiviz.measurements.MeasurementSet.prototype.first=function(){return this.iterator().first()};
epiviz.measurements.MeasurementSet.prototype.get=function(a){if(a>=this._size||0>a)return null;if(this._size==this._order.length)return this._order[a].measurement;var b=null;this.foreach(function(e,c){return c==a?(b=e,!0):!1});return b};epiviz.measurements.MeasurementSet.prototype.toArray=function(){var a=Array(this._size);this.foreach(function(b,e){a[e]=b});return a};
epiviz.measurements.MeasurementSet.prototype.sorted=function(a){a=this.toArray().sort(a);var b=new epiviz.measurements.MeasurementSet;a.forEach(function(a){b.add(a)});return b};epiviz.measurements.MeasurementSet.prototype.raw=function(){var a=Array(this._size);this.foreach(function(b,e){a[e]=b.raw()});return a};
epiviz.measurements.MeasurementSet.prototype.split=function(a){var b={};this.foreach(function(e,c){var d=a(e),f=b[d];void 0==f&&(f=new epiviz.measurements.MeasurementSet,b[d]=f);f.add(e)});return b};epiviz.measurements.MeasurementSet.Iterator=function(a){this._parent=a;this._lastIndex=null};
epiviz.measurements.MeasurementSet.Iterator.prototype.first=function(){if(0==this._parent.size())return null;for(var a=0;a<this._parent._order.length;++a)if(this._parent._order[a].contained)return this._lastIndex=a,this._parent._order[a].measurement;throw Error("Inconsistent MeasurementSet with size() > 0 and no first element");};
epiviz.measurements.MeasurementSet.Iterator.prototype.next=function(){if(null===this._lastIndex)throw Error("Iterator.next() called before calling Iterator.first()");for(var a=this._lastIndex+1;a<this._parent._order.length;++a)if(this._parent._order[a].contained)return this._lastIndex=a,this._parent._order[a].measurement;this._lastIndex=this._parent._order.length;return null};epiviz.measurements.MeasurementHashtable=function(){this._size=0;this._measurementTree={};this._order=[]};
epiviz.measurements.MeasurementHashtable.prototype.put=function(a,b){if(this.contains(a)){var e=this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()];this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()]={key:a,value:b,index:e.index};this._order[e.index]={key:a,value:b,contained:!0}}else a.dataprovider()in this._measurementTree||(this._measurementTree[a.dataprovider()]={}),a.type()in this._measurementTree[a.dataprovider()]||
(this._measurementTree[a.dataprovider()][a.type()]={}),a.datasourceGroup()in this._measurementTree[a.dataprovider()][a.type()]||(this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()]={}),a.datasource().id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()]||(this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()]={}),this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()]={key:a,
value:b,index:this._order.length},this._order.push({key:a,value:b,contained:!0}),++this._size};epiviz.measurements.MeasurementHashtable.prototype.get=function(a){return this.contains(a)?this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()].value:null};
epiviz.measurements.MeasurementHashtable.prototype.remove=function(a){if(!this.contains(a))return!1;var b=this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()];delete this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()][a.id()];this._order[b.index].contained=!1;--this._size;return!0};
epiviz.measurements.MeasurementHashtable.prototype.contains=function(a){return a.dataprovider()in this._measurementTree&&a.type()in this._measurementTree[a.dataprovider()]&&a.datasourceGroup()in this._measurementTree[a.dataprovider()][a.type()]&&a.datasource().id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()]?a.id()in this._measurementTree[a.dataprovider()][a.type()][a.datasourceGroup()][a.datasource().id()]:!1};
epiviz.measurements.MeasurementHashtable.prototype.clear=function(){this._size=0;this._measurementTree={};this._order=[]};epiviz.measurements.MeasurementHashtable.prototype.isEmpty=function(){return 0==this._size};epiviz.measurements.MeasurementHashtable.prototype.size=function(){return this._size};epiviz.measurements.MeasurementHashtable.prototype.foreach=function(a,b){for(var e=this.iterator(),c=e.first(),d=0;null!==c&&(b&&!b(c.key)||!a(c.key,c.value,d));c=e.next(),++d);};
epiviz.measurements.MeasurementHashtable.prototype.first=function(){return this.iterator().first()};epiviz.measurements.MeasurementHashtable.prototype.sorted=function(a){var b=new epiviz.measurements.MeasurementHashtable,e=this._order.slice(0);e.sort(function(b,d){return a(b.key,d.key)});e.forEach(function(a){a.contained&&b.put(a.key,a.value)});return b};epiviz.measurements.MeasurementHashtable.prototype.keys=function(){var a=[];this._order.forEach(function(b){b.contained&&a.push(b.key)});return a};
epiviz.measurements.MeasurementHashtable.prototype.iterator=function(){return new epiviz.measurements.MeasurementHashtable.Iterator(this)};epiviz.measurements.MeasurementHashtable.prototype.toString=function(){var a={};this.foreach(function(b,e){for(var c=b.id(),d=2;c in a;)c=b.id()+" ("+d++ +")";a[c]=e});return JSON.stringify(a)};epiviz.measurements.MeasurementHashtable.Iterator=function(a){this._parent=a;this._lastIndex=null};
epiviz.measurements.MeasurementHashtable.Iterator.prototype.first=function(){if(0==this._parent.size())return null;for(var a=0;a<this._parent._order.length;++a)if(this._parent._order[a].contained)return this._lastIndex=a,{key:this._parent._order[a].key,value:this._parent._order[a].value};throw Error("Inconsistent MeasurementHashtable with size() > 0 and no first element");};
epiviz.measurements.MeasurementHashtable.Iterator.prototype.next=function(){if(null===this._lastIndex)throw Error("Iterator.next() called before calling Iterator.first()");for(var a=this._lastIndex+1;a<this._parent._order.length;++a)if(this._parent._order[a].contained)return this._lastIndex=a,{key:this._parent._order[a].key,value:this._parent._order[a].value};this._lastIndex=this._parent._order.length;return null};
epiviz.measurements.MeasurementsManager=function(){this._requestMeasurements=new epiviz.events.Event;this._measurementsAdded=new epiviz.events.Event;this._measurementsRemoved=new epiviz.events.Event;this._computedMeasurementsAdded=new epiviz.events.Event;this._computedMeasurementsRemoved=new epiviz.events.Event;this._measurements=new epiviz.measurements.MeasurementSet;this._computedMeasurements=new epiviz.measurements.MeasurementSet};epiviz.measurements.MeasurementsManager.prototype.initialize=function(){this._requestMeasurements.notify()};
epiviz.measurements.MeasurementsManager.prototype.onRequestMeasurements=function(){return this._requestMeasurements};epiviz.measurements.MeasurementsManager.prototype.onMeasurementsAdded=function(){return this._measurementsAdded};epiviz.measurements.MeasurementsManager.prototype.onMeasurementsRemoved=function(){return this._measurementsRemoved};epiviz.measurements.MeasurementsManager.prototype.onComputedMeasurementsAdded=function(){return this._computedMeasurementsAdded};
epiviz.measurements.MeasurementsManager.prototype.onComputedMeasurementsRemoved=function(){return this._computedMeasurementsRemoved};epiviz.measurements.MeasurementsManager.prototype.measurements=function(){return this._measurements};epiviz.measurements.MeasurementsManager.prototype.computedMeasurements=function(){return this._computedMeasurements};
epiviz.measurements.MeasurementsManager.prototype.addMeasurements=function(a){if(a&&a.size()){var b=this;this._measurements.addAll(a);var e=new epiviz.measurements.MeasurementSet;a.foreach(function(a){a.isComputed()&&(e.add(a),b._computedMeasurements.add(a))});this._measurementsAdded.notify(a);0<e.size()&&this._computedMeasurementsAdded.notify(e)}};
epiviz.measurements.MeasurementsManager.prototype.removeMeasurements=function(a){var b=this;this._measurements.removeAll(a);var e=new epiviz.measurements.MeasurementSet;a.foreach(function(a){a.isComputed()&&(e.add(a),b._computedMeasurements.remove(a))});this._measurementsRemoved.notify(a);0<e.size()&&this._computedMeasurementsRemoved.notify(e)};epiviz.measurements.MeasurementsManager.prototype.addMeasurement=function(a){var b=new epiviz.measurements.MeasurementSet;b.add(a);this.addMeasurements(b)};
epiviz.measurements.MeasurementsManager.prototype.removeMeasurement=function(a){var b=new epiviz.measurements.MeasurementSet;b.add(a);this.removeMeasurements(b)};
epiviz.data.DataProvider=function(a){this._id=a;this._requestAddSeqInfos=new epiviz.events.Event;this._requestRemoveSeqNames=new epiviz.events.Event;this._requestAddMeasurements=new epiviz.events.Event;this._requestRemoveMeasurements=new epiviz.events.Event;this._requestAddChart=new epiviz.events.Event;this._requestRemoveChart=new epiviz.events.Event;this._requestFlushCache=new epiviz.events.Event;this._requestClearDatasourceGroupCache=new epiviz.events.Event;this._requestNavigate=new epiviz.events.Event;
this._requestRedraw=new epiviz.events.Event;this._requestCurrentLocation=new epiviz.events.Event;this._requestPrintWorkspace=new epiviz.events.Event;this._requestSetChartSettings=new epiviz.events.Event;this._requestGetChartSettings=new epiviz.events.Event;this._requestGetAvailableCharts=new epiviz.events.Event;this._requestLoadWorkspace=new epiviz.events.Event};epiviz.data.DataProvider.prototype.id=function(){return this._id};
epiviz.data.DataProvider.prototype.getData=function(a,b){b(epiviz.data.Response.fromRawObject({requestId:a.id(),data:null}))};epiviz.data.DataProvider.prototype.onRequestAddSeqInfos=function(){return this._requestAddSeqInfos};epiviz.data.DataProvider.prototype.onRequestRemoveSeqNames=function(){return this._requestRemoveSeqNames};epiviz.data.DataProvider.prototype.onRequestAddMeasurements=function(){return this._requestAddMeasurements};
epiviz.data.DataProvider.prototype.onRequestRemoveMeasurements=function(){return this._requestRemoveMeasurements};epiviz.data.DataProvider.prototype.onRequestAddChart=function(){return this._requestAddChart};epiviz.data.DataProvider.prototype.onRequestRemoveChart=function(){return this._requestRemoveChart};epiviz.data.DataProvider.prototype.onRequestFlushCache=function(){return this._requestFlushCache};epiviz.data.DataProvider.prototype.onRequestClearDatasourceGroupCache=function(){return this._requestClearDatasourceGroupCache};
epiviz.data.DataProvider.prototype.onRequestNavigate=function(){return this._requestNavigate};epiviz.data.DataProvider.prototype.onRequestRedraw=function(){return this._requestRedraw};epiviz.data.DataProvider.prototype.onRequestCurrentLocation=function(){return this._requestCurrentLocation};epiviz.data.DataProvider.prototype.onRequestPrintWorkspace=function(){return this._requestPrintWorkspace};epiviz.data.DataProvider.prototype.onRequestGetChartSettings=function(){return this._requestGetChartSettings};
epiviz.data.DataProvider.prototype.onRequestSetChartSettings=function(){return this._requestSetChartSettings};epiviz.data.DataProvider.prototype.onRequestGetAvailableCharts=function(){return this._requestGetAvailableCharts};epiviz.data.DataProvider.prototype.onRequestLoadWorkspace=function(){return this._requestLoadWorkspace};
epiviz.data.DataProviderFactory=function(a){this._config=a;this._providers={};for(var b=this._size=0;b<this._config.dataProviders.length;++b){a=$.isArray(this._config.dataProviders[b])?this._config.dataProviders[b]:this._config.dataProviders[b].split(",");var e=epiviz.utils.evaluateFullyQualifiedTypeName(a[0]);e&&(a=epiviz.utils.applyConstructor(e,a.slice(1)),this._providers[a.id()]=a,++this._size)}a=new epiviz.data.EmptyResponseDataProvider;this._providers[a.id()]=a;++this._size;a=this._config.workspacesDataProvider.split(",");
b=epiviz.utils.evaluateFullyQualifiedTypeName(a[0]);this._workspacesDataProvider=epiviz.utils.applyConstructor(b,a.slice(1))};epiviz.data.DataProviderFactory.prototype.foreach=function(a){for(var b in this._providers)if(this._providers.hasOwnProperty(b)&&a(this._providers[b]))break};epiviz.data.DataProviderFactory.prototype.isEmpty=function(){return!this._size};epiviz.data.DataProviderFactory.prototype.size=function(){return this._size};
epiviz.data.DataProviderFactory.prototype.get=function(a){return a in this._providers?this._providers[a]:null};epiviz.data.DataProviderFactory.prototype.workspacesDataProvider=function(){return this._workspacesDataProvider};
epiviz.data.Cache=function(a,b){this._config=a;this._dataProviderFactory=b;this._data={};this._measurementRequestStackMap=new epiviz.measurements.MeasurementHashtable;this._measurementPendingRequestsMap=new epiviz.measurements.MeasurementHashtable;this._lastRequest=null;if(0<this._config.cacheUpdateIntervalMilliseconds){var e=this;this._intervalId=window.setTimeout(function(){e._clearUnneededData()},a.cacheUpdateIntervalMilliseconds)}};
epiviz.data.Cache.prototype.getData=function(a,b,e){var c=epiviz.measurements.Measurement.Type,d=this;this._lastRequest=epiviz.datatypes.GenomicRange.fromStartEnd(a.seqName(),a.start()-a.width(),a.end()+a.width());0<this._config.cacheUpdateIntervalMilliseconds&&(window.clearInterval(this._intervalId),this._intervalId=window.setTimeout(function(){d._clearUnneededData()},this._config.cacheUpdateIntervalMilliseconds));var f=this._extractComputedMeasurements(b);this._updateComputedMeasurementsData(f);
this._serveAvailableData(a,b,e);f=[a,epiviz.datatypes.GenomicRange.fromStartEnd(a.seqName(),Math.max(a.start()-a.width(),0),a.start()),new epiviz.datatypes.GenomicRange(a.seqName(),a.end(),a.width())];this._calcMeasurementNeededRanges(f,b).foreach(function(f,h){var g=d._measurementRequestStackMap.get(f);g||(g=new epiviz.data.RequestStack,d._measurementRequestStackMap.put(f,g));var m;if(0==h.length)m=epiviz.data.Request.emptyRequest(),g.pushRequest(m,function(){d._handleResponse(e,a,b,m,null,f,null)}),
g.serveData(new epiviz.data.Response(m.id(),{}));else for(var p=0;p<h.length;++p){m=f.type()==c.RANGE?epiviz.data.Request.getRows(f,h[p]):epiviz.data.Request.getValues(f,h[p]);(function(c,h){g.pushRequest(h,function(g){d._handleResponse(e,a,b,h,c,f,g)})})(h[p],m);var r=d._measurementPendingRequestsMap.get(f);r||(r={},d._measurementPendingRequestsMap.put(f,r));r[m.id()]=h[p];(d._dataProviderFactory.get(f.dataprovider())||d._dataProviderFactory.get(epiviz.data.EmptyResponseDataProvider.DEFAULT_ID)).getData(m,
function(a){g.serveData(a)})}})};
epiviz.data.Cache.prototype._handleResponse=function(a,b,e,c,d,f,n){d&&(d=f.type()==epiviz.measurements.Measurement.Type.RANGE?new epiviz.datatypes.GenomicRangeArray(f,d,n.globalStartIndex,n.values,n.useOffset):new epiviz.datatypes.FeatureValueArray(f,d,n.globalStartIndex,n.values),this._mergeData(f,d));d=this._extractComputedMeasurements(e);this._updateComputedMeasurementsData(d);(f=this._measurementPendingRequestsMap.get(f))&&delete f[c.id()];this._serveAvailableData(b,e,a)};
epiviz.data.Cache.prototype._serveAvailableData=function(a,b,e){var c=epiviz.measurements.Measurement.Type,d=this,f=[],n;for(n in b)if(b.hasOwnProperty(n)){var h=b[n],g=!0,m=new epiviz.measurements.MeasurementHashtable;(function(b){h.foreach(function(e){var f=d._data[e.datasourceGroup()];if(!f||!f.rowData()||e.type()==c.FEATURE&&!f.values(e))return g=!1,!0;var h=f.rowData(),f=e.type()==c.FEATURE?f.values(e):null,h=a.subtract(h.boundaries());if(h.length||f&&(h=a.subtract(f.boundaries()),h.length))return g=
!1,!0;b.put(e,new epiviz.datatypes.MeasurementGenomicDataWrapper(e,d._data[e.datasourceGroup()]));return!1})})(m);g&&(e(n,new epiviz.datatypes.MapGenomicData(m)),f.push(n))}for(e=0;e<f.length;++e)delete b[f[e]]};
epiviz.data.Cache.prototype._calcMeasurementNeededRanges=function(a,b){var e=epiviz.measurements.Measurement.Type,c=this,d=new epiviz.measurements.MeasurementHashtable,f;for(f in b)if(b.hasOwnProperty(f)){var n=new epiviz.measurements.MeasurementSet;(function(a){b[f].foreach(function(b){b.componentMeasurements().foreach(function(b){a.add(b);a.add(b.datasource())});b.isComputed()||a.add(b.datasource())})})(n);n.foreach(function(b){var f=null,f=c._data[b.datasourceGroup()];if(!f||b.type()==e.FEATURE&&
!f.values(b))f=a.slice(0);else{var m=b.type()==e.FEATURE?f.values(b):f.rowData();if(m)for(var f=[],m=m.boundaries(),n=0;n<a.length;++n)f=f.concat(a[n].subtract(m));else f=a.slice(0)}if(m=c._measurementPendingRequestsMap.get(b))for(n=0;n<f.length;++n)for(var r in m)if(m.hasOwnProperty(r)){var t=f[n].subtract(m[r]);Array.prototype.splice.apply(f,[n,1].concat(t));if(0==t.length){--n;break}if(n>=f.length)break}d.put(b,f)})}return d};
epiviz.data.Cache.prototype._extractComputedMeasurements=function(a){var b=new epiviz.measurements.MeasurementSet,e;for(e in a)a.hasOwnProperty(e)&&a[e].foreach(function(a){a.isComputed()&&b.add(a)});return b};epiviz.data.Cache.prototype._mergeData=function(a,b){var e=epiviz.measurements.Measurement.Type,c=this._data[a.datasourceGroup()];c||(c=new epiviz.datatypes.PartialSummarizedExperiment,this._data[a.datasourceGroup()]=c);a.type()==e.RANGE?c.addRowData(b):c.addValues(b)};
epiviz.data.Cache.prototype._clearUnneededData=function(){if(this._lastRequest){console.log(sprintf("Clearing data outside of range [%7s%10s%10s]",this._lastRequest.seqName(),this._lastRequest.start(),this._lastRequest.end()));var a={},b;for(b in this._data)this._data.hasOwnProperty(b)&&(a[b]=this._data[b].trim(this._lastRequest));this._data=a}};
epiviz.data.Cache.prototype._updateComputedMeasurementsData=function(a){var b=this,e=epiviz.datatypes.GenomicRange;a.foreach(function(a){var d=b._data[a.datasourceGroup()];if(!d)return!1;var f=a.componentMeasurements(),n=null,h=null,g=null;f.foreach(function(a){a=d.values(a);if(!a||!a.boundaries())return g=h=n=null,!0;if(null===g)return n=a.globalStartIndex(),h=a.size(),g=a.boundaries(),null===n;if(a.boundaries().seqName()!=g.seqName())return h=0,!0;if(n<a.globalStartIndex()){h-=a.globalStartIndex()-
n;if(0>h)return h=0,!0;n=a.globalStartIndex();var b=a.boundaries().start(),c=g.end();h>a.size()&&(h=a.size(),c=a.boundaries().end());g=e.fromStartEnd(g.seqName(),b,c)}else if(b=a.size()-n+a.globalStartIndex(),h>b){h=b;if(0>=h)return h=0,!0;g=e.fromStartEnd(g.seqName(),g.start(),a.boundaries().end())}return 0==h?!0:!1});if(null===g)return!1;var m=d.values(a);if(m&&(null===n||m.globalStartIndex()<n&&m.globalStartIndex()+m.size()>n+h))return!1;var p=new epiviz.measurements.MeasurementHashtable,r=null;
if(m&&m.size())return f.foreach(function(a){var b=d.values(a),c=[];if(null!==n)for(var e=n;e<m.globalStartIndex();++e)c.push(b.getByGlobalIndex(e));p.put(a,c)}),r=new epiviz.datatypes.FeatureValueArray(a,e.fromStartEnd(g.seqName(),g.start(),m.boundaries().start()),n,a.evaluateArr(p)),b._mergeData(a,r),p=new epiviz.measurements.MeasurementHashtable,f.foreach(function(a){var b=d.values(a),c=[];if(null!==n)for(var e=m.globalStartIndex()+m.size();e<n+h;++e)c.push(b.getByGlobalIndex(e));p.put(a,c)}),r=
new epiviz.datatypes.FeatureValueArray(a,e.fromStartEnd(g.seqName(),m.boundaries().end(),g.end()),m.globalStartIndex()+m.size(),a.evaluateArr(p)),b._mergeData(a,r),!1;p=new epiviz.measurements.MeasurementHashtable;f.foreach(function(a){var b=d.values(a),c=[];if(null!==n)for(var e=n;e<n+h;++e)c.push(b.getByGlobalIndex(e));p.put(a,c)});r=new epiviz.datatypes.FeatureValueArray(a,g,n,a.evaluateArr(p));b._mergeData(a,r);return!1})};
epiviz.data.Cache.prototype.flush=function(){this._data={};this._measurementRequestStackMap.foreach(function(a,b){b.clear()});this._measurementPendingRequestsMap.clear()};
epiviz.data.Cache.prototype.clearDatasourceGroupCache=function(a){delete this._data[a];this._measurementRequestStackMap.foreach(function(b,d){b.datasourceGroup()==a&&d.clear()});var b=[];this._measurementPendingRequestsMap.foreach(function(c,d){c.datasourceGroup()==a&&b.push(c)});for(var e=0;e<b.length;++e)this._measurementPendingRequestsMap.put(b[e],{})};
epiviz.data.DataManager=function(a,b){this._config=a;this._measurements=new epiviz.measurements.MeasurementSet;this._dataProviderFactory=b;this._cache=new epiviz.data.Cache(a,b);this._combinedRequestsStacks={};this._requestAddMeasurements=new epiviz.events.Event;this._requestRemoveMeasurements=new epiviz.events.Event;this._requestAddChart=new epiviz.events.Event;this._requestRemoveChart=new epiviz.events.Event;this._requestPrintWorkspace=new epiviz.events.Event;this._requestLoadWorkspace=new epiviz.events.Event;
this._requestAddSeqInfos=new epiviz.events.Event;this._requestRemoveSeqNames=new epiviz.events.Event;this._requestNavigate=new epiviz.events.Event;this._requestRedraw=new epiviz.events.Event;this._flushCache=new epiviz.events.Event;this._clearDatasourceGroupCache=new epiviz.events.Event;this._requestCurrentLocation=new epiviz.events.Event;this._requestGetChartSettings=new epiviz.events.Event;this._requestSetChartSettings=new epiviz.events.Event;this._requestGetAvailableCharts=new epiviz.events.Event;
this._loadingCurrentDataSet=new epiviz.events.Event;this._registerProviderAddMeasurements();this._registerProviderRemoveMeasurements();this._registerProviderAddChart();this._registerProviderRemoveChart();this._registerProviderPrintWorkspace();this._registerProviderLoadWorkspace();this._registerProviderAddSeqInfos();this._registerProviderRemoveSeqNames();this._registerProviderNavigate();this._registerProviderRedraw();this._registerProviderFlushCache();this._registerProviderClearDatasourceGroupCache();
this._registerProviderGetCurrentLocation();this._registerProviderGetChartSettings();this._registerProviderSetChartSettings();this._registerProviderGetAvailableCharts()};epiviz.data.DataManager.prototype.onRequestAddMeasurements=function(){return this._requestAddMeasurements};epiviz.data.DataManager.prototype.onRequestRemoveMeasurements=function(){return this._requestRemoveMeasurements};epiviz.data.DataManager.prototype.onRequestAddChart=function(){return this._requestAddChart};
epiviz.data.DataManager.prototype.onRequestRemoveChart=function(){return this._requestRemoveChart};epiviz.data.DataManager.prototype.onRequestPrintWorkspace=function(){return this._requestPrintWorkspace};epiviz.data.DataManager.prototype.onRequestLoadWorkspace=function(){return this._requestLoadWorkspace};epiviz.data.DataManager.prototype.onRequestAddSeqInfos=function(){return this._requestAddSeqInfos};epiviz.data.DataManager.prototype.onRequestRemoveSeqNames=function(){return this._requestRemoveSeqNames};
epiviz.data.DataManager.prototype.onRequestNavigate=function(){return this._requestNavigate};epiviz.data.DataManager.prototype.onRequestRedraw=function(){return this._requestRedraw};epiviz.data.DataManager.prototype.onClearDatasourceGroupCache=function(){return this._clearDatasourceGroupCache};epiviz.data.DataManager.prototype.onFlushCache=function(){return this._flushCache};epiviz.data.DataManager.prototype.onRequestCurrentLocation=function(){return this._requestCurrentLocation};
epiviz.data.DataManager.prototype.onRequestGetChartSettings=function(){return this._requestGetChartSettings};epiviz.data.DataManager.prototype.onRequestSetChartSettings=function(){return this._requestSetChartSettings};epiviz.data.DataManager.prototype.onRequestGetAvailableCharts=function(){return this._requestGetAvailableCharts};
epiviz.data.DataManager.prototype.getSeqInfos=function(a){var b=this,e=0,c={},d=[];this._dataProviderFactory.foreach(function(f){f.getData(epiviz.data.Request.getSeqInfos(f.id()),function(f){if(f=f.data())if(Array.isArray(f))for(g=0;g<f.length;++g)f[g][0]in c||(d.push(epiviz.datatypes.SeqInfo.fromRawObject(f[g])),c[f[g][0]]=!0);else for(var h=Object.keys(f),g=0;g<h.length;g++)h[g]in c||(d.push(epiviz.datatypes.SeqInfo.fromRawObject([h[g],f[h[g]][0],f[h[g]][1]])),c[h[g]]=!0);++e<b._dataProviderFactory.size()||
a(d.sort(epiviz.datatypes.SeqInfo.compare))})})};epiviz.data.DataManager.prototype.updateChartSettings=function(a){this._dataProviderFactory.foreach(function(b){if(b.id().includes("websocket-")){var e=null;null!=a.colorMap&&(e=a.colorMap._colors);b.updateChartSettings(epiviz.data.Request.createRequest({action:epiviz.data.Request.Action.SET_CHART_SETTINGS,settings:a.settings,colorMap:e,chartId:a.chartId}),function(){})}})};
epiviz.data.DataManager.prototype.getMeasurements=function(a){var b=this,e=new epiviz.measurements.MeasurementSet,c=0;this._dataProviderFactory.foreach(function(d){d.getData(epiviz.data.Request.getMeasurements(d.id()),function(f){f=f.data();"default"==b._config.configType&&b._loadingCurrentDataSet.notify({dataset:d.id(),count:c,size:b._dataProviderFactory.size(),sampleSize:f.id.length});if(f)for(var n=f.id?f.id.length||0:0,h=0;h<n;++h)e.add(new epiviz.measurements.Measurement(f.id[h],f.name[h],$.isArray(f.type)?
f.type[h]:f.type,$.isArray(f.datasourceId)?f.datasourceId[h]:f.datasourceId,$.isArray(f.datasourceGroup)?f.datasourceGroup[h]:f.datasourceGroup,d.id(),null,$.isArray(f.defaultChartType)?f.defaultChartType[h]:f.defaultChartType,f.annotation[h],$.isArray(f.minValue)?f.minValue[h]:f.minValue,$.isArray(f.maxValue)?f.maxValue[h]:f.maxValue,$.isArray(f.metadata)&&$.isArray(f.metadata[0])?f.metadata[h]:f.metadata,f.datasourceDescription[h]));++c<b._dataProviderFactory.size()||a(e)})})};
epiviz.data.DataManager.prototype.getData=function(a,b,e){this._config.useCache?this._cache.getData(a,b,e):this._getDataNoCache(a,b,e)};
epiviz.data.DataManager.prototype._getDataNoCache=function(a,b,e){var c=this,d={},f;for(f in b)if(b.hasOwnProperty(f)){var n=b[f].split(function(a){return a.dataprovider()}),h;for(h in n)if(n.hasOwnProperty(h)){var g=d[h];void 0==g?d[h]=n[h]:g.addAll(n[h])}}var m={};epiviz.utils.forEach(d,function(d,f){var g=d.split(function(a){return a.datasource().id()}),h=epiviz.data.Request.getCombined(g,a),n=c._combinedRequestsStacks[f];void 0==n&&(n=new epiviz.data.RequestStack,c._combinedRequestsStacks[f]=
n);n.pushRequest(h,function(d){var h={};epiviz.utils.forEach(g,function(b,c){for(var e=b.first().datasource(),f=d[c],g=new epiviz.datatypes.PartialSummarizedExperiment,l=[],m=0;m<f.cols[Object.keys(f.cols)[0]].length;m++)l[m]=0;var n=f.globalStartIndex;isNaN(a._start)&&(a._start=n);isNaN(a._width)&&(a._width=f.rows.end[f.rows.end.length-1]-a._start);e=new epiviz.datatypes.GenomicRangeArray(e,a,n,f.rows);g.addRowData(e);b.foreach(function(b){b=new epiviz.datatypes.FeatureValueArray(b,a,n,f.cols[b.id()]||
l);g.addValues(b)});h[c]=g});m[f]=h;c._serveAvailableData(a,b,e,m)});(c._dataProviderFactory.get(f)||c._dataProviderFactory.get(epiviz.data.EmptyResponseDataProvider.DEFAULT_ID)).getData(h,function(a){n.serveData(a)})})};
epiviz.data.DataManager.prototype._serveAvailableData=function(a,b,e,c){var d=[];epiviz.utils.forEach(b,function(a,b){var h=!0,g=new epiviz.measurements.MeasurementHashtable;a.foreach(function(a){if(!(a.dataprovider()in c))return h=!1,!0;var b=new epiviz.datatypes.MeasurementGenomicDataWrapper(a,c[a.dataprovider()][a.datasource().id()]);g.put(a,b)});if(h){var m=new epiviz.datatypes.MapGenomicData(g);e(b,m);d.push(b)}});d.forEach(function(a){delete b[a]})};
epiviz.data.DataManager.prototype.getPCA=function(a,b,e){var c=this,d={},f;for(f in b)if(b.hasOwnProperty(f)){var n=b[f].split(function(a){return a.dataprovider()}),h;for(h in n)if(n.hasOwnProperty(h)){var g=d[h];void 0==g?d[h]=n[h]:g.addAll(n[h])}}epiviz.utils.forEach(d,function(b,d){var g=b.split(function(a){return a.datasource().id()}),h=epiviz.data.Request.getPCA(g,a),l=Object.keys(g)[0];(c._dataProviderFactory.get(d)||c._dataProviderFactory.get(epiviz.data.EmptyResponseDataProvider.DEFAULT_ID)).getData(h,
function(a){var b=a.data();"websocket"==a.data().dataprovidertype&&(b=b[l]);e(f,b)})})};
epiviz.data.DataManager.prototype.getDiversity=function(a,b,e){var c=this,d={},f;for(f in b)if(b.hasOwnProperty(f)){var n=b[f].split(function(a){return a.dataprovider()}),h;for(h in n)if(n.hasOwnProperty(h)){var g=d[h];void 0==g?d[h]=n[h]:g.addAll(n[h])}}epiviz.utils.forEach(d,function(b,d){var g=b.split(function(a){return a.datasource().id()}),h=epiviz.data.Request.getDiversity(g,a),l=Object.keys(g)[0];(c._dataProviderFactory.get(d)||c._dataProviderFactory.get(epiviz.data.EmptyResponseDataProvider.DEFAULT_ID)).getData(h,
function(a){var b=a.data();"websocket"==a.data().dataprovidertype&&(b=b[l]);e(f,b)})})};
epiviz.data.DataManager.prototype.getHierarchy=function(a,b){for(var e in a)if(a.hasOwnProperty(e))var c=a[e];var d=c.dataprovider;d||c.measurements.foreach(function(a){return a.dataprovider()?(d=a.dataprovider(),!0):!1});var f=c.datasourceGroup;f||c.measurements.foreach(function(a){return a.datasourceGroup()?(f=a.datasourceGroup(),!0):!1});(this._dataProviderFactory.get(d)||this._dataProviderFactory.get(epiviz.data.EmptyResponseDataProvider.DEFAULT_ID)).getData(epiviz.data.Request.getHierarchy(f,c.customData),
function(a){b(e,a.data())})};
epiviz.data.DataManager.prototype.propagateHierarchyChanges=function(a,b){for(var e in a)if(a.hasOwnProperty(e)){var c=a[e],d=c.dataprovider;d||c.measurements.foreach(function(a){return a.dataprovider()?(d=a.dataprovider(),!0):!1});var f=this._dataProviderFactory.get(d)||this._dataProviderFactory.get(epiviz.data.EmptyResponseDataProvider.DEFAULT_ID);(function(a,c,d){c.getData(epiviz.data.Request.propagateHierarchyChanges(d.datasourceGroup,d.customData.selection,d.customData.order,d.customData.selectedLevels),
function(e){setTimeout(function(){c.onRequestClearDatasourceGroupCache().notify({datasourceGroup:d.datasourceGroup,result:new epiviz.events.EventResult});c.onRequestRedraw().notify({result:new epiviz.events.EventResult});b(a,e.data())},0)})})(e,f,c)}};
epiviz.data.DataManager.prototype.getWorkspaces=function(a,b,e){var c=this._dataProviderFactory.workspacesDataProvider();if(!c)throw Error("Invalid data provider for workspaces (see Config.workspaceDataProvider)");c.getData(epiviz.data.Request.getWorkspaces(b,e),function(b){b=b.data();var c=[];if(b&&b.length)for(var e=0;e<b.length;++e)c.push({id:b[e].id,name:b[e].name,content:JSON.parse(b[e].content)});a(c)})};
epiviz.data.DataManager.prototype.saveWorkspace=function(a,b,e){var c=this._dataProviderFactory.workspacesDataProvider();if(!c)throw Error("Invalid data provider for workspaces (see Config.workspaceDataProvider)");c.getData(epiviz.data.Request.saveWorkspace(a,b),function(a){a=a.data();e(a)})};
epiviz.data.DataManager.prototype.deleteWorkspace=function(a){var b=this._dataProviderFactory.workspacesDataProvider();if(!b)throw Error("Invalid data provider for workspaces (see Config.workspaceDataProvider)");b.getData(epiviz.data.Request.deleteWorkspace(a),function(a){a.data()})};
epiviz.data.DataManager.prototype.search=function(a,b,e){var c=[];e=e._properties.visConfigSelection;var d=e.dataprovider;d||e.measurements.foreach(function(a){return a.dataprovider()?(d=a.dataprovider(),!0):!1});var f=e.datasourceGroup;f||e.measurements.foreach(function(a){return a.datasourceGroup()?(f=a.datasourceGroup(),!0):!1});(this._dataProviderFactory.get(d)||this._dataProviderFactory.get(epiviz.data.EmptyResponseDataProvider.DEFAULT_ID)).getData(epiviz.data.Request.search(b,this._config.maxSearchResults,
f),function(b){(b=b.data().nodes)&&epiviz.utils.arrayAppend(c,b);a(c)})};epiviz.data.DataManager.prototype.clearDatasourceGroupCache=function(a){this._cache.clearDatasourceGroupCache(a);this._clearDatasourceGroupCache.notify({datasourceGroup:a})};epiviz.data.DataManager.prototype._registerProviderAddMeasurements=function(){var a=this;this._dataProviderFactory.foreach(function(b){b.onRequestAddMeasurements().addListener(new epiviz.events.EventListener(function(b){a._requestAddMeasurements.notify(b)}))})};
epiviz.data.DataManager.prototype._registerProviderRemoveMeasurements=function(){var a=this;this._dataProviderFactory.foreach(function(b){b.onRequestRemoveMeasurements().addListener(new epiviz.events.EventListener(function(b){a._requestRemoveMeasurements.notify(b)}))})};epiviz.data.DataManager.prototype._registerProviderAddChart=function(){var a=this;this._dataProviderFactory.foreach(function(b){b.onRequestAddChart().addListener(new epiviz.events.EventListener(function(b){a._requestAddChart.notify(b)}))})};
epiviz.data.DataManager.prototype._registerProviderRemoveChart=function(){var a=this;this._dataProviderFactory.foreach(function(b){b.onRequestRemoveChart().addListener(new epiviz.events.EventListener(function(b){a._requestRemoveChart.notify(b)}))})};epiviz.data.DataManager.prototype._registerProviderPrintWorkspace=function(){var a=this;this._dataProviderFactory.foreach(function(b){b.onRequestPrintWorkspace().addListener(new epiviz.events.EventListener(function(b){a._requestPrintWorkspace.notify(b)}))})};
epiviz.data.DataManager.prototype._registerProviderLoadWorkspace=function(){var a=this;this._dataProviderFactory.foreach(function(b){b.onRequestLoadWorkspace().addListener(new epiviz.events.EventListener(function(b){a._requestLoadWorkspace.notify(b)}))})};
epiviz.data.DataManager.prototype._registerProviderAddSeqInfos=function(){var a=this;this._dataProviderFactory.foreach(function(b){b.onRequestAddSeqInfos().addListener(new epiviz.events.EventListener(function(b){for(var c=[],d=0;d<b.seqInfos.length;++d)c.push(epiviz.datatypes.SeqInfo.fromRawObject(b.seqInfos[d]));a._requestAddSeqInfos.notify({seqInfos:c,result:b.result})}))})};epiviz.data.DataManager.prototype._registerProviderRemoveSeqNames=function(){var a=this;this._dataProviderFactory.foreach(function(b){b.onRequestRemoveSeqNames().addListener(new epiviz.events.EventListener(function(b){a._requestRemoveSeqNames.notify(b)}))})};
epiviz.data.DataManager.prototype._registerProviderNavigate=function(){var a=this;this._dataProviderFactory.foreach(function(b){b.onRequestNavigate().addListener(new epiviz.events.EventListener(function(b){a._requestNavigate.notify(b)}))})};epiviz.data.DataManager.prototype._registerProviderRedraw=function(){var a=this;this._dataProviderFactory.foreach(function(b){b.onRequestRedraw().addListener(new epiviz.events.EventListener(function(b){a._requestRedraw.notify(b)}))})};
epiviz.data.DataManager.prototype._registerProviderClearDatasourceGroupCache=function(){var a=this;this._dataProviderFactory.foreach(function(b){b.onRequestClearDatasourceGroupCache().addListener(new epiviz.events.EventListener(function(b){a.clearDatasourceGroupCache(b.datasourceGroup);b.result.success=!0}))})};
epiviz.data.DataManager.prototype._registerProviderFlushCache=function(){var a=this;this._dataProviderFactory.foreach(function(b){b.onRequestFlushCache().addListener(new epiviz.events.EventListener(function(b){a.flushCache();b.result.success=!0}))})};epiviz.data.DataManager.prototype._registerProviderGetCurrentLocation=function(){var a=this;this._dataProviderFactory.foreach(function(b){b.onRequestCurrentLocation().addListener(new epiviz.events.EventListener(function(b){a._requestCurrentLocation.notify(b)}))})};
epiviz.data.DataManager.prototype._registerProviderSetChartSettings=function(){var a=this;this._dataProviderFactory.foreach(function(b){b.onRequestSetChartSettings().addListener(new epiviz.events.EventListener(function(b){a._requestSetChartSettings.notify(b)}))})};epiviz.data.DataManager.prototype._registerProviderGetChartSettings=function(){var a=this;this._dataProviderFactory.foreach(function(b){b.onRequestGetChartSettings().addListener(new epiviz.events.EventListener(function(b){a._requestGetChartSettings.notify(b)}))})};
epiviz.data.DataManager.prototype._registerProviderGetAvailableCharts=function(){var a=this;this._dataProviderFactory.foreach(function(b){b.onRequestGetChartSettings().addListener(new epiviz.events.EventListener(function(b){a._requestGetAvailableCharts.notify(b)}))})};epiviz.data.EmptyResponseDataProvider=function(){epiviz.data.DataProvider.call(this,epiviz.data.EmptyResponseDataProvider.DEFAULT_ID)};epiviz.data.EmptyResponseDataProvider.prototype=epiviz.utils.mapCopy(epiviz.data.DataProvider.prototype);
epiviz.data.EmptyResponseDataProvider.constructor=epiviz.data.EmptyResponseDataProvider;epiviz.data.EmptyResponseDataProvider.DEFAULT_ID="empty";
epiviz.data.EmptyResponseDataProvider.prototype.getData=function(a,b){var e=a.id();switch(a.get("action")){case epiviz.data.Request.Action.GET_ROWS:b(epiviz.data.Response.fromRawObject({data:{values:{id:null,start:[],end:[],strand:[],metadata:{my_metadata:[]}},globalStartIndex:null,useOffset:!1},requestId:e}));break;case epiviz.data.Request.Action.GET_VALUES:b(epiviz.data.Response.fromRawObject({data:{values:[],globalStartIndex:null},requestId:e}));break;case epiviz.data.Request.Action.GET_MEASUREMENTS:b(epiviz.data.Response.fromRawObject({requestId:a.id(),
data:{id:[],name:[],type:[],datasourceId:[],datasourceGroup:[],defaultChartType:[],annotation:[],minValue:[],maxValue:[],metadata:[]}}));break;case epiviz.data.Request.Action.GET_SEQINFOS:b(epiviz.data.Response.fromRawObject({requestId:a.id(),data:[]}));break;case epiviz.data.Request.Action.SEARCH:b(epiviz.data.Response.fromRawObject({requestId:a.id(),data:[]}));break;case epiviz.data.Request.Action.SAVE_WORKSPACE:b(epiviz.data.Response.fromRawObject({requestId:a.id(),data:[]}));break;case epiviz.data.Request.Action.DELETE_WORKSPACE:b(epiviz.data.Response.fromRawObject({requestId:a.id(),
data:[]}));break;case epiviz.data.Request.Action.GET_WORKSPACES:b(epiviz.data.Response.fromRawObject({requestId:a.id(),data:[]}));break;default:epiviz.data.DataProvider.prototype.getData.call(this,a,b)}};
epiviz.data.WebsocketDataProvider=function(a,b){epiviz.data.DataProvider.call(this,a||epiviz.data.WebsocketDataProvider.DEFAULT_ID);this._websocketHost=b;this._socket=null;this._useUI="true"!=epiviz.ui.WebArgsManager.WEB_ARGS.websocketNoUI;this._debug="true"==epiviz.ui.WebArgsManager.WEB_ARGS.debug;this._callbacks={};this._requestsStack=[];this._initialize()};epiviz.data.WebsocketDataProvider.prototype=epiviz.utils.mapCopy(epiviz.data.DataProvider.prototype);
epiviz.data.WebsocketDataProvider.constructor=epiviz.data.WebsocketDataProvider;epiviz.data.WebsocketDataProvider.DEFAULT_ID="websocket";
epiviz.data.WebsocketDataProvider.prototype._initialize=function(){if(this._websocketHost&&"None"!=this._websocketHost)try{this._socket=new WebSocket(this._websocketHost);this._log("WebSocket - status "+this._socket.readyState);var a=this;this._socket.onopen=function(){a._onSocketOpen()};this._socket.onmessage=function(b){a._onSocketMessage(b)};this._socket.onclose=function(){a._onSocketClose()}}catch(b){this._log(b.toString())}};
epiviz.data.WebsocketDataProvider.prototype._onSocketOpen=function(){for(var a=0;a<this._requestsStack.length;++a)this._socket.send(this._requestsStack[a]);this._requestsStack=[];this._registerAvailableCharts()};epiviz.data.WebsocketDataProvider.prototype._onSocketClose=function(){this._socket=null};epiviz.data.WebsocketDataProvider.prototype._sendMessage=function(a){this.connected()&&this._socket.readyState?this._socket.send(a):this._requestsStack.push(a)};
epiviz.data.WebsocketDataProvider.prototype._onSocketMessage=function(a){this._log("Local Controller Received: "+a.data);var b=JSON.parse(a.data);b.data.dataprovidertype="websocket";if(b.type==epiviz.data.MessageType.RESPONSE)a=epiviz.data.Response.fromRawObject(b),b=this._callbacks[a.id()],delete this._callbacks[a.id()],b(a);else if(b.type==epiviz.data.MessageType.REQUEST)switch(a=epiviz.data.Request.Action,b=epiviz.data.Request.fromRawObject(b),b.get("action")){case a.ADD_MEASUREMENTS:this._addMeasurements(b);
break;case a.REMOVE_MEASUREMENTS:this._removeMeasurements(b);break;case a.ADD_SEQINFOS:this._addSeqInfos(b);break;case a.REMOVE_SEQNAMES:this._removeSeqNames(b);break;case a.ADD_CHART:this._addChart(b);break;case a.REMOVE_CHART:this._removeChart(b);break;case a.CLEAR_DATASOURCE_GROUP_CACHE:this._clearDatasourceGroupCache(b);break;case a.FLUSH_CACHE:this._flushCache(b);break;case a.NAVIGATE:this._navigate(b);break;case a.REDRAW:this._redraw(b);break;case a.GET_CURRENT_LOCATION:this._getCurrentLocation(b);
break;case a.WRITE_DEBUG_MSG:this._writeDebugMsg(b);break;case a.PRINT_WORKSPACE:this._printWorkspace(b);break;case a.SET_CHART_SETTINGS:this._setChartSettings(b);break;case a.GET_CHART_SETTINGS:this._getChartSettings(b);break;case a.GET_AVAILABLE_CHARTS:this._getAvailableCharts(b);break;case a.LOAD_WORKSPACE:this._loadWorkspace(b)}};epiviz.data.WebsocketDataProvider.prototype._log=function(a){this._debug&&console.log(a)};
epiviz.data.WebsocketDataProvider.prototype._fireEvent=function(a,b){this._useUI?a.notify(b):b.result.success=!0};epiviz.data.WebsocketDataProvider.prototype.connected=function(){return null!=this._socket};epiviz.data.WebsocketDataProvider.prototype.getData=function(a,b){var e=JSON.stringify(a.raw());this._callbacks[a.id()]=b;this._sendMessage(e)};
epiviz.data.WebsocketDataProvider.prototype._addMeasurements=function(a){for(var b=new epiviz.events.EventResult,e=new epiviz.measurements.MeasurementSet,c=JSON.parse(a.get("measurements")),d=0;d<c.length;++d)e.add(new epiviz.measurements.Measurement(c[d].id,c[d].name,c[d].type,c[d].datasourceId,c[d].datasourceGroup,this.id(),null,c[d].defaultChartType,c[d].annotation,c[d].minValue,c[d].maxValue,c[d].metadata));this._fireEvent(this.onRequestAddMeasurements(),{measurements:e,result:b});a=new epiviz.data.Response(a.id(),
b);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._removeMeasurements=function(a){for(var b=new epiviz.events.EventResult,e=new epiviz.measurements.MeasurementSet,c=JSON.parse(a.get("measurements")),d=0;d<c.length;++d)e.add(new epiviz.measurements.Measurement(c[d].id,c[d].name,c[d].type,c[d].datasourceId,c[d].datasourceGroup,this.id(),null,c[d].defaultChartType,c[d].annotation,c[d].minValue,c[d].maxValue,c[d].metadata));this._fireEvent(this.onRequestRemoveMeasurements(),{measurements:e,result:b});a=new epiviz.data.Response(a.id(),
b);this._sendMessage(JSON.stringify(a.raw()))};epiviz.data.WebsocketDataProvider.prototype._addSeqInfos=function(a){var b=new epiviz.events.EventResult,e=JSON.parse(a.get("seqInfos"));this._fireEvent(this.onRequestAddSeqInfos(),{seqInfos:e,result:b});a=new epiviz.data.Response(a.id(),b);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._removeSeqNames=function(a){var b=new epiviz.events.EventResult,e=JSON.parse(a.get("seqNames"));this._fireEvent(this.onRequestRemoveSeqNames(),{seqNames:e,result:b});a=new epiviz.data.Response(a.id(),b);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._addChart=function(a){var b=new epiviz.events.EventResult,e,c,d;if(void 0!=a.get("measurements"))for(e=new epiviz.measurements.MeasurementSet,c=JSON.parse(a.get("measurements")),d=0;d<c.length;++d)e.add(new epiviz.measurements.Measurement(c[d].id,c[d].name,c[d].type,c[d].datasourceId,c[d].datasourceGroup,this.id(),null,c[d].defaultChartType,c[d].annotation,c[d].minValue,c[d].maxValue,c[d].metadata));c=a.get("datasource");d=a.get("datasourceGroup")||c;this._fireEvent(this.onRequestAddChart(),
{type:a.get("type"),visConfigSelection:new epiviz.ui.controls.VisConfigSelection(e,c,d),result:b});a=new epiviz.data.Response(a.id(),b);this._sendMessage(JSON.stringify(a.raw()))};epiviz.data.WebsocketDataProvider.prototype._removeChart=function(a){var b=a.get("chartId"),e=new epiviz.events.EventResult;this._fireEvent(this.onRequestRemoveChart(),{id:b,result:e});a=new epiviz.data.Response(a.id(),e);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._clearDatasourceGroupCache=function(a){var b=new epiviz.events.EventResult;this._fireEvent(this.onRequestClearDatasourceGroupCache(),{datasourceGroup:a.get("datasourceGroup"),result:b});a=new epiviz.data.Response(a.id(),b);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._flushCache=function(a){var b=new epiviz.events.EventResult;this._fireEvent(this.onRequestFlushCache(),{result:b});a=new epiviz.data.Response(a.id(),b);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._navigate=function(a){var b=JSON.parse(a.get("range")),e=new epiviz.events.EventResult;this._fireEvent(this.onRequestNavigate(),{range:epiviz.datatypes.GenomicRange.fromStartEnd(b.seqName,b.start,b.end),result:e});a=new epiviz.data.Response(a.id(),e);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._redraw=function(a){var b=new epiviz.events.EventResult;this._fireEvent(this.onRequestRedraw(),{result:b});a=new epiviz.data.Response(a.id(),b);this._sendMessage(JSON.stringify(a.raw()))};epiviz.data.WebsocketDataProvider.prototype._getCurrentLocation=function(a){var b=new epiviz.events.EventResult;this._fireEvent(this.onRequestCurrentLocation(),{result:b});a=new epiviz.data.Response(a.id(),b);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._writeDebugMsg=function(a){var b=a.get("msg"),e=document.createElement("pre");e.innerHTML=b.replace(/&/g,"&amp;").replace(/\\</g,"&lt;");a=new epiviz.data.Response(a.id(),{msg:"that msg"});document.getElementById("chart-container").appendChild(e);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._printWorkspace=function(a){var b=a.get("chartId"),e=a.get("fileName"),c=a.get("fileType"),d=new epiviz.events.EventResult;this._fireEvent(this.onRequestPrintWorkspace(),{chartId:b,fileName:e,fileType:c,result:d});a=new epiviz.data.Response(a.id(),d);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._setChartSettings=function(a){var b=a.get("chartId"),e=a.get("settings"),c=a.get("colorMap"),c=new epiviz.ui.charts.ColorPalette(c),d=new epiviz.events.EventResult;this._fireEvent(this.onRequestSetChartSettings(),{chartId:b,settings:e,colorMap:c,result:d});a=new epiviz.data.Response(a.id(),d);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._getChartSettings=function(a){var b=a.get("chartId"),e=new epiviz.events.EventResult;this._fireEvent(this.onRequestGetChartSettings(),{chartId:b,result:e});a=new epiviz.data.Response(a.id(),e);this._sendMessage(JSON.stringify(a.raw()))};epiviz.data.WebsocketDataProvider.prototype._getAvailableCharts=function(a){var b=new epiviz.events.EventResult;this._fireEvent(this.onRequestGetChartSettings(),{result:b});a=new epiviz.data.Response(a.id(),b);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebsocketDataProvider.prototype._registerAvailableCharts=function(){var a=new epiviz.events.EventResult;this._fireEvent(this.onRequestGetChartSettings(),{result:a});request=epiviz.data.Request.createRequest({action:epiviz.data.Request.Action.REGISTER_CHART_TYPES,data:a.value});a=JSON.stringify(request.raw());this._callbacks[request.id()]=function(a){};this._sendMessage(a)};
epiviz.data.WebsocketDataProvider.prototype.updateChartSettings=function(a,b){var e=JSON.stringify(a.raw());this._callbacks[a.id()]=b;this._sendMessage(e)};epiviz.data.WebsocketDataProvider.prototype._loadWorkspace=function(a){var b=a.get("workspaceId"),e=new epiviz.events.EventResult;this._fireEvent(this.onRequestLoadWorkspace(),{workspace:b});a=new epiviz.data.Response(a.id(),e);this._sendMessage(JSON.stringify(a.raw()))};
epiviz.data.WebServerDataProvider=function(a,b){epiviz.data.DataProvider.call(this,a||epiviz.Config.DEFAULT_DATA_PROVIDER_ID);this._serverEndpoint=b||epiviz.data.WebServerDataProvider.DEFAULT_SERVER_ENDPOINT};epiviz.data.WebServerDataProvider.prototype=epiviz.utils.mapCopy(epiviz.data.DataProvider.prototype);epiviz.data.WebServerDataProvider.constructor=epiviz.data.WebServerDataProvider;epiviz.data.WebServerDataProvider.DEFAULT_SERVER_ENDPOINT="data/main.php";
epiviz.data.WebServerDataProvider.prototype.getData=function(a,b){if(!a.isEmpty())if(a.method()==epiviz.data.Request.Method.GET){var e=sprintf("%s?%s",this._serverEndpoint,a.joinArgs());epiviz.data.WebServerDataProvider.makeGetRequest(e,function(a){b(epiviz.data.Response.fromRawObject(a))})}else epiviz.data.WebServerDataProvider.makePostRequest(this._serverEndpoint,a.joinArgs(),function(a){b(epiviz.data.Response.fromRawObject(a))})};
epiviz.data.WebServerDataProvider.makeGetRequest=function(a,b){var e=$.ajax({type:"get",url:a,dataType:"json",async:!0,cache:!1,processData:!0});e.done(function(a){b(a)});e.fail(function(a,b,e){});e.always(function(){})};epiviz.data.WebServerDataProvider.makePostRequest=function(a,b,e){a=$.ajax({type:"post",url:a,data:b,dataType:"json",async:!0,cache:!1,processData:!0});a.done(function(a,b,f){e(a)});a.fail(function(a,b,e){console.error("The following error occured: "+b,e)});a.always(function(){})};
epiviz.data.MetagenomicsDataProvider=function(){epiviz.data.DataProvider.call(this,"metagenomics-provider");this._selectedValues=this._values=[[1.431779586,1.192413264,0,0,5.246275888,0,0,0,0,0,0,0,0,0,5.176956182,0,0,0,5.155970401,6.190149838,0,0,0,0,0,0,0,0,3.698665367,0,2.13227898,0,2.211623187,2.367619226,1.61041097,0,5.385994425,4.139182844,4.372482843,0,0,2.878908183,2.91052254,2.301374909,0,2.952062239,0,0,0,0,0,0,0,0,0,0,6.122190562,0,3.358854664,0,1.385653692,2.766109149,6.099454438,4.340878996,
5.939634652,2.959707294,0,3.380142709,0,5.795596951,5.937850648,4.856588768,0,0,1.674904626,2.854876154,0,1.191371277,4.270740369,0,1.586888663,0,0,0,0,2.897552731,0,0,0,0,3.332623469,0,0,0,0,0,0,0,0,1.284976959,0,0,0,0,0,2.479401066,0,0,0,0,1.377092695,0,0,0,3.135561463],[3.483719988,1.836204539,0,1.992995304,5.402734039,1.569736026,0,0,4.371867824,0,0,0,1.262193429,3.863871272,6.051516389,0,0,0,3.64974824,7.298095577,0,0,0,0,0,0,0,0,5.042530097,0,4.52334967,0,3.417546061,3.220604739,0,0,3.583640746,
4.911014295,2.672729483,0,0,1.640918907,4.057049171,0,0,4.87292166,0,0,0,2.555337332,0,0,0,0,0,0,2.801189549,4.326546321,5.672425342,0,7.342433164,4.708466901,8.38125063,4.943561744,5.69886844,5.914613168,1.935406473,4.545532356,0,5.568781432,5.770864453,5.786486697,0,0,1.674904626,5.633094879,0,2.891124637,6.337477197,0,3.703106027,0,3.658543633,3.635588574,0,5.110546454,0,2.348450405,0,3.883764286,5.793023474,0,0,1.461730735,0,0,0,0,4.110953646,5.759180328,0,0,0,4.066891048,0,6.762235684,0,0,2.184629194,
1.844254505,4.444055644,0,5.116207142,3.834609931,6.918120174],[1.431779586,1.192413264,0,0,6.594730277,0,0,0,0,0,0,0,0,0,6.105158342,0,0,0,5.401020298,5.531926921,0,0,0,0,0,0,0,0,2.661346394,0,2.13227898,0,2.211623187,0,1.61041097,0,2.513383648,4.444642108,0,1.322794318,0,1.640918907,2.635783143,1.567855244,0,5.224508802,0,0,0,0,3.273593502,0,0,0,0,0,6.122190562,1.450539436,5.956779471,0,0,1.5529849,5.710154873,6.253733669,7.33429437,4.628121119,0,4.470957872,0,6.318097687,5.364607625,5.424856331,
0,0,0,3.879285317,1.255175933,1.834870601,5.412691363,0,3.172492646,0,1.554826783,0,0,4.042983171,0,0,0,1.338596694,5.221012467,0,0,1.461730735,0,0,1.797115738,0,3.658543633,1.953661285,0,0,0,2.405446283,0,3.880683284,0,0,0,0,2.885530704,0,2.381429107,0,4.299507612],[0,0,0,1.316327062,3.811828399,0,0,0,0,0,0,0,0,0,3.761584641,0,0,0,1.406082194,3.945166829,0,0,0,0,0,0,0,0,4.085653677,0,1.4287038,0,1.144473079,3.220604739,0,0,0,2.986448755,1.481358206,1.322794318,0,1.640918907,3.141217906,0,0,1.231253532,
0,0,0,0,0,0,0,0,0,0,1.994606741,0,3.598259323,0,4.559531286,3.861920818,7.326065032,3.286373665,4.443256343,2.959707294,0,2.179323699,0,2.819792025,4.006780657,3.522245428,0,0,0,2.24508439,1.916065792,1.191371277,2.93651056,0,2.324239181,0,2.285688951,1.94753258,0,1.195550809,0,0,0,0,4.509606186,0,0,3.526859546,0,0,0,0,0,3.032789935,0,0,0,2.405446283,0,2.975444667,0,0,3.016531724,0,0,0,4.46287892,0,4.780297015],[3.687570256,0,0,2.451788443,2.911066272,0,0,0,0,0,0,0,0,2.134165238,4.216294965,0,0,0,
0,1.612405897,0,0,0,0,0,0,0,0,0,0,0,0,1.774547779,0,0,0,0,0,0,0,0,0,0,0,0,2.334318467,0,0,0,0,0,0,0,0,0,0,0,3.893829897,2.712718048,0,2.079226691,4.202270685,4.808746813,2.644765483,0,4.296021802,1.935406473,2.512450001,0,1.594645054,4.279876905,3.284108206,1.590756464,0,0,1.804782814,1.255175933,1.191371277,2.93651056,0,1.586888663,0,2.285688951,0,0,3.797347749,0,1.241386551,0,1.338596694,4.389821626,0,0,1.461730735,0,0,0,0,3.902410173,3.266140317,0,0,0,0,0,5.045993892,0,1.358928018,5.557633431,
3.132909221,2.885530704,0,3.526859546,0,4.511395522],[0,6.16378224,0,1.316327062,1.666262603,3.149587113,0,0,5.651369874,4.243152632,0,0,0,3.155361395,6.66537163,1.554826783,2.992869351,0,0,6.344241104,0,0,0,0,2.350033433,0,0,0,4.390486707,0,4.413090928,0,5.591424995,3.596422408,0,2.212993723,5.679071268,4.021076095,5.775141191,1.322794318,0,3.98463569,3.939376164,0,0,2.952062239,0,0,0,0,0,0,0,0,0,0,1.994606741,3.272846047,3.358854664,0,3.797347749,3.127128728,6.619079845,2.170766959,0,3.481491606,
0,3.010569242,0,2.819792025,4.707393819,1.458514165,0,0,0,2.854876154,0,0,2.113629503,0,2.324239181,0,1.554826783,0,0,1.840219556,0,0,0,1.338596694,0,0,0,0,0,0,0,0,0,1.953661285,0,0,0,0,1.864734062,1.717354877,0,0,0,0,0,0,1.634715536,1.410544518,1.354808925],[4.168154907,4.247537068,0,1.316327062,5.609580256,1.569736026,0,0,0,0,1.28620039,0,1.262193429,2.733293055,5.814457673,0,0,0,4.686639201,5.397538194,0,0,0,0,0,0,0,0,0,0,2.603155617,0,2.546614229,0,0,0,3.919218828,5.314013565,1.481358206,1.322794318,
0,0,4.361537796,2.785322386,0,5.418830035,0,0,0,1.781999348,0,0,0,0,0,0,8.323743779,2.159049313,6.157253354,0,3.18023001,0,4.808746813,4.460464862,5.203555779,3.244061423,0,3.674088391,0,5.143370329,4.509413633,4.45805522,0,0,1.674904626,3.084284864,0,1.834870601,4.140691561,0,0,0,3.864522096,0,0,4.744508356,0,0,0,1.338596694,4.259183612,0,0,0,0,0,0,0,1.733606582,2.408805546,0,0,0,1.950591407,0,1.717354877,0,2.046103514,0,0,2.885530704,1.614406279,0,1.410544518,0],[0,1.192413264,0,0,4.019469864,2.303636946,
0,0,0,0,0,0,0,0,3.093845517,0,0,0,0,1.612405897,0,0,0,0,0,0,0,0,2.32039045,0,0,0,0,0,0,0,0,1.914596325,0,0,0,0,2.635783143,2.301374909,0,1.885737479,0,0,0,0,0,0,0,0,0,0,0,1.450539436,1.511899039,0,4.09837174,5.162542291,5.175330384,1.46012053,0,4.165843825,0,3.207157908,0,1.594645054,4.149781155,3.726587359,0,0,0,2.24508439,0,1.834870601,2.93651056,0,4.250663922,0,1.554826783,0,0,1.195550809,0,1.241386551,0,1.338596694,3.776543493,0,0,2.172734535,0,0,0,0,1.733606582,2.408805546,0,0,0,1.950591407,
1.214748986,3.637105643,0,0,3.016531724,0,2.068632354,0,4.59442283,0,3.37097252],[0,0,0,1.316327062,0,0,0,0,0,0,0,0,0,0,0,4.204912301,1.731263898,5.895075687,2.104447385,0,0,0,2.065128811,0,0,0,4.998802577,4.985265729,0,1.969178823,0,0,0,2.98819618,0,5.973110282,0,1.254014401,1.481358206,0,0,0,0,0,6.783920221,0,4.485860075,7.116079322,6.455458592,6.009316582,4.902157249,7.090579488,8.457444348,4.308067937,0,9.670062403,0,0,0,0,0,0,0,0,0,0,4.560645878,0,7.26890038,0,2.590991323,0,1.590756464,3.152109798,
6.398031074,0,4.022952592,1.191371277,0,1.377092695,0,5.109341881,0,0,0,0,2.632106894,3.199364361,3.679313849,2.83110867,0,3.533813815,4.660580583,0,5.325751405,4.401509522,0,2.963977331,0,0,0,2.68589141,4.656100179,0,0,0,0,0,0,0,0,0,1.634715536,0,0],[0,0,2.558261645,0,0,0,3.37097252,0,0,0,0,0,0,0,0,1.554826783,0,0,0,0,0,4.717893295,3.780189712,2.998738351,0,0,4.783910899,5.646155588,1.221294271,4.318348466,0,0,0,1.916065792,0,4.26166757,0,1.254014401,0,2.808592225,0,0,0,0,2.754273197,0,4.485860075,
5.206648839,3.877609802,5.488721907,3.650844232,4.926557629,7.621145557,3.3791203,0,6.894968358,0,0,0,0,0,0,0,0,0,0,0,0,3.711139607,0,0,0,1.590756464,0,3.580737915,0,1.255175933,1.834870601,0,0,0,3.605634704,0,0,0,0,4.326546321,4.750653296,2.303636946,1.338596694,0,1.866117748,5.226402442,0,4.545126266,2.122906148,0,2.963977331,0,0,0,0,3.046826728,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2.285688951,0,4.919116898,1.406082194,0,0,0,2.8815524,0,0,0,2.439564301,3.350844299,0,1.969178823,
0,0,0,1.255175933,0,4.512111935,0,1.254014401,0,0,0,0,0,0,5.365618534,0,2.02080583,6.186981576,5.395607493,3.056075924,4.408114953,5.586729427,5.85052519,3.3791203,0,8.827870296,0,0,0,2.172734535,0,0,0,0,0,0,1.935406473,0,6.977279923,0,0,0,2.814800039,3.681934901,6.06154884,0,4.84495056,1.834870601,0,1.377092695,0,3.810996399,0,0,0,1.195550809,3.510786446,2.348450405,4.370515798,0,0,2.653290576,6.039518498,0,6.088292283,5.584357216,0,2.137949557,0,0,3.437769124,3.569195185,3.046826728,0,0,0,0,0,0,
0,0,0,0,0,0],[7.166058622,5.562929062,0,0,0,1.569736026,0,0,0,3.317392333,0,0,0,0,0,0,2.495790119,0,3.64974824,7.94166956,4.09837174,0,0,4.45805522,0,0,0,0,3.83951414,0,3.241876309,2.894869795,5.662114442,1.255175933,5.529025621,0,1.361689044,10.31811713,5.399808132,0,0,0,5.766993135,0,0,10.35642231,0,0,0,3.056075924,3.273593502,0,0,0,0,0,0,7.886927515,6.57658932,0,6.068864939,0,0,5.742529189,0,0,0,3.207157908,0,0,0,7.683313658,0,0,0,4.472293286,2.711021318,1.191371277,1.413536412,0,7.18277747,0,
0,3.934112064,0,9.499010008,0,0,3.438628157,11.3419642,7.453095073,0,0,0,3.605634704,0,0,0,9.323133332,9.025457813,0,0,0,6.063989916,10.09991753,0,0,1.358928018,0,3.132909221,0,0,6.339850003,5.962545954,6.5132172],[2.607242384,1.192413264,0,0,2.418952549,5.335214496,0,0,0,0,4.896125461,0,4.45805522,1.090815163,3.466007268,0,4.451650978,0,1.406082194,0,0,0,0,0,0,0,0,0,2.32039045,3.662411471,2.957578397,4.620888419,2.211623187,6.048481206,0,0,0,1.914596325,0,1.322794318,2.017487427,1.640918907,1.851024161,
2.301374909,0,3.383215216,0,0,0,0,0,0,0,0,3.96333911,0,0,0,2.233797185,0,0,0,0,2.170766959,3.383215216,0,0,3.010569242,0,1.594645054,0,2.998738351,0,0,0,1.167924869,0,0,1.413536412,1.377092695,1.586888663,0,5.165257592,5.25334101,5.189186904,0,0,5.796241065,2.303636946,6.60481673,0,0,0,0,0,0,0,0,0,3.643192729,0,0,0,0,2.926952007,7.290999429,0,3.141551507,0,5.115980262,6.055178464,0,6.448170658,0,3.37097252],[0,4.247537068,0,7.627324571,4.638829373,0,0,0,0,0,0,0,3.764198849,1.090815163,9.297238893,
0,0,0,1.406082194,0,0,0,0,0,0,0,0,0,3.542563074,0,5.0508891,4.852847605,7.502930506,0,1.61041097,2.212993723,8.139575446,0,2.196679237,4.555970876,0,5.753981571,4.533829712,0,0,8.115201432,0,0,0,0,0,0,0,0,0,0,3.99325527,4.052930578,8.251263226,0,3.797347749,1.5529849,0,1.46012053,1.529467388,5.598651855,1.935406473,7.59947533,0,4.537434131,4.279876905,8.078048143,0,0,2.429204831,3.45615723,2.711021318,3.494361381,6.276852113,0,0,0,6.641505703,0,0,4.812332598,0,0,0,0,6.461304882,0,0,0,0,0,0,0,1.733606582,
3.466949588,0,0,0,4.066891048,3.532071506,6.531898878,0,1.358928018,0,0,2.534144363,0,1.634715536,0,2.040985264],[4.417752244,4.430656786,0,6.590662342,5.161186664,2.787748346,0,0,0,0,0,0,1.262193429,3.155361395,10.02054726,0,0,0,4.940306328,3.945166829,0,0,0,0,0,0,0,0,2.936928025,0,6.171246663,2.40377094,5.943281103,1.255175933,3.494023898,0,0,5.314013565,2.196679237,3.088736519,0,2.388819979,8.095345442,1.567855244,0,7.35819207,0,0,0,2.555337332,3.273593502,0,0,0,0,0,5.20245281,4.75470228,9.430220215,
0,2.545649577,3.127128728,6.658211483,7.210528482,11.02122881,6.173655965,2.733293055,6.960342713,0,10.04653152,6.735083971,7.155915068,0,1.571621765,0,6.013261752,3.220604739,4.245781516,5.761407417,1.377092695,2.809830944,0,3.418179486,3.934112064,0,7.222911731,0,0,0,0,9.867046044,0,0,0,0,0,0,0,5.06859083,6.373240186,0,0,0,4.066891048,3.357133596,8.094400839,0,3.579495955,3.540808171,1.844254505,6.524413414,0,6.943748633,8.296608074,4.40933806],[2.136055426,4.037748079,6.262933358,0,3.811828399,
6.919801759,0,0,0,2.455308789,6.188686675,2.926124712,5.998580568,6.127768499,5.748563718,0,3.655458089,0,0,0,0,0,0,0,0,0,0,0,3.83951414,6.290193531,3.683059916,8.256071986,2.211623187,4.84495056,2.35241283,0,3.583640746,0,3.759667491,3.524879916,3.879657956,3.535209466,0,2.301374909,0,4.937796138,0,0,0,1.781999348,3.273593502,0,0,0,0,0,0,3.272846047,2.712718048,0,0,1.5529849,1.888578717,0,1.529467388,2.134165238,0,1.121990524,2.331205908,0,3.84803047,0,0,0,0,1.804782814,0,1.834870601,0,0,2.324239181,
0,3.418179486,0,2.079226691,1.840219556,0,8.13274431,1.569736026,8.882484137,1.493074462,0,0,0,0,0,1.797115738,0,0,3.643192729,0,0,0,4.294594419,7.783238308,11.1138092,0,3.756976488,2.184629194,9.208657654,0,0,4.46287892,0,5.202634978],[2.136055426,6.715798815,0,6.374469421,3.277337944,2.787748346,0,0,1.792044962,3.317392333,0,0,0,1.704821959,8.698957643,0,0,0,7.159005373,4.794362379,0,0,2.065128811,0,5.243564207,0,0,0,5.355676609,0,3.683059916,0,6.79661711,4.69851443,2.839992687,4.26166757,8.225319066,
9.567229277,5.203290985,1.322794318,0,8.827786737,7.798586914,0,0,5.418830035,0,0,0,4.175777728,3.949615895,0,0,0,0,0,4.636949199,2.632106894,5.672425342,0,2.545649577,4.907541568,7.726632416,6.604697646,4.443256343,3.863871272,1.935406473,4.12685628,0,8.766010155,7.439035579,6.112321025,0,0,0,1.167924869,3.220604739,3.319889474,6.307483081,1.377092695,4.95699151,0,0,0,0,6.512899724,0,0,0,3.111909342,2.688101136,0,0,0,0,0,1.797115738,0,3.902410173,4.584271389,0,0,0,3.02915668,0,0,0,2.046103514,3.016531724,
2.62792129,1.377092695,1.614406279,1.634715536,1.410544518,2.50408572],[0,8.24954917,0,3.079218485,7.152835931,0,0,0,0,0,7.074815273,0,1.262193429,6.031368279,0,0,0,0,2.104447385,5.4662968,0,0,0,0,6.374469421,0,0,0,5.761878745,0,3.683059916,3.5520836,9.072883619,0,1.61041097,0,0,4.248348124,8.733798954,0,0,0,7.798586914,0,0,4.87292166,0,0,0,3.427082841,0,0,0,0,4.517137731,0,0,2.632106894,5.17732725,0,5.760907699,0,0,1.46012053,2.735603919,8.297188307,1.935406473,3.010569242,0,0,6.223071923,7.120101904,
0,0,3.823534849,5.596384969,2.98819618,3.121377237,8.006968945,1.377092695,9.662880605,0,0,0,1.385653692,4.598472787,0,0,0,7.161906168,0,0,0,0,0,0,0,0,1.733606582,4.894120843,0,0,0,0,2.926952007,0,0,0,3.016531724,0,0,0,8.858471847,0,3.573305055],[0,0,0,1.992995304,4.200951897,0,0,0,0,0,0,0,4.710107996,1.090815163,4.399205452,0,0,0,3.446387271,0,0,0,0,0,0,0,0,0,1.873071327,0,0,0,2.546614229,0,1.61041097,0,0,0,1.481358206,0,0,0,2.29611755,0,0,6.57500401,0,0,0,0,0,0,0,0,0,0,1.994606741,3.893829897,4.286771649,
0,3.955696773,0,3.562036104,2.170766959,3.8285856,5.993490151,0,5.084964667,0,3.472619051,2.121043177,4.064733345,0,0,0,3.282169857,2.711021318,1.191371277,7.920439558,0,0,0,7.031714558,0,0,3.656828487,0,0,0,0,3.571590925,0,0,1.461730735,0,0,6.874509697,0,1.733606582,4.962197967,0,0,0,5.593292122,0,5.547406345,0,2.046103514,0,0,0,1.614406279,0,2.109945405,2.040985264],[3.866150632,3.920180613,0,5.312815342,6.422613285,3.679313849,0,0,0,0,0,0,0,4.924980206,7.658247372,0,0,0,2.104447385,4.562776343,
2.079226691,0,0,0,0,0,0,0,1.221294271,0,1.4287038,0,6.442220582,5.709224853,2.839992687,0,0,3.418903812,4.602735444,1.322794318,0,2.388819979,1.204003557,1.567855244,0,6.037602452,0,0,0,0,0,0,0,0,0,0,2.801189549,8.63619108,4.648124521,0,8.475079652,7.514265748,7.529694344,4.859026111,0,7.745232773,5.003307476,6.460395665,0,4.26166757,7.879619164,7.991502025,0,2.305904344,2.921997488,6.790846122,4.141069016,3.918449926,6.337477197,2.068632354,6.269637347,0,4.204912301,0,0,6.553102814,0,2.348450405,
0,4.485860075,9.83873207,0,0,1.461730735,0,0,0,0,2.995800011,8.415814604,0,0,0,6.442278134,1.864734062,9.185459486,0,5.209209265,11.75590855,5.219920851,6.420626178,5.087025329,7.474453122,1.410544518,3.573305055],[6.965078686,2.618564793,0,1.992995304,10.59290385,0,0,0,0,0,3.802156015,0,1.924937051,5.300785568,5.995802653,0,1.731263898,1.871675903,5.955501257,5.531926921,2.897552731,0,0,0,0,0,0,0,2.661346394,0,7.611655227,2.40377094,5.02134636,0,3.735557761,0,0,5.038083001,5.45978414,0,0,1.640918907,
4.057049171,0,0,8.594118334,0,0,0,3.056075924,1.959834467,0,0,0,0,0,5.516523261,7.356774251,8.013503616,0,3.18023001,0,5.376448084,8.188430789,5.939634652,6.96265097,1.935406473,6.674919197,0,7.363139212,4.279876905,6.183453199,0,0,2.429204831,6.401581783,3.596422408,4.666202349,8.657004791,0,5.730754292,0,7.010186538,0,0,7.409664666,0,0,0,5.993020597,8.605052591,1.866117748,0,7.573447879,0,0,6.325672809,0,8.570120461,7.461785195,0,0,2.546614229,5.755117139,3.828838673,7.111654959,0,5.841420387,2.184629194,
5.920900463,6.249442918,2.845102004,3.976074161,2.932344535,4.511395522],[1.431779586,7.359653593,0,3.991238804,2.418952549,1.569736026,0,0,0,0,1.28620039,0,0,4.489859297,8.791850058,0,0,0,7.175568077,6.062717992,0,0,0,0,0,0,0,0,0,0,6.136969432,2.40377094,5.517092631,1.255175933,5.529025621,0,1.361689044,9.483173757,6.110621289,0,0,0,7.550290267,6.661015065,0,4.804992012,0,0,0,1.781999348,1.959834467,0,0,0,0,0,9.46245649,7.278413221,6.923272455,0,3.797347749,6.102201637,9.088107781,6.604697646,4.008481477,
5.598651855,0,5.550973073,0,3.182820685,4.961195168,6.750115474,0,0,0,4.105131291,2.367619226,2.617013534,3.220247532,0,3.703106027,0,1.554826783,1.94753258,0,7.036971196,0,0,0,5.641825282,4.908722257,0,0,0,0,0,0,0,4.454849206,4.962197967,0,0,0,0,2.311215911,4.271024917,0,3.377078116,0,0,4.731134649,0,0,1.410544518,1.354808925],[0,4.146452518,0,0,1.666262603,1.569736026,4.051052201,0,7.830362992,11.88636471,0,0,0,0,0,9.472289399,7.988117903,0,10.08368995,1.612405897,0,0,0,0,2.350033433,0,0,0,3.168216406,
1.297324055,0,4.001933649,0,0,9.149074161,2.212993723,3.381165997,6.572629376,4.09837174,0,0,10.10958722,0,6.383958854,0,2.334318467,0,0,0,10.82625781,4.197003578,0,4.041235755,2.047816235,0,0,0,0,8.36096898,0,0,7.483410394,0,1.46012053,0,0,0,1.121990524,2.331205908,0,0,4.568474378,0,0,2.921997488,3.084284864,4.141069016,8.966817321,1.413536412,6.711961034,0,0,0,3.635588574,4.228198043,3.127952731,0,0,0,4.980986765,6.731497682,0,0,6.755121839,0,0,0,2.137949557,10.22161522,8.378930116,2.097168659,
0,9.661273435,0,1.864734062,0,5.475028474,2.046103514,0,3.506233059,2.068632354,5.171989239,3.976074161,10.3926218,6.411293182],[6.480349619,5.814292081,0,5.078391452,5.161186664,0,0,0,0,0,0,0,0,3.620520142,8.990210888,0,0,0,2.573009698,3.738300805,0,0,0,0,0,0,0,0,3.168216406,0,4.811098905,0,4.510440908,1.255175933,2.35241283,0,0,4.843020605,3.316228807,3.524879916,0,0,5.83447311,1.567855244,0,7.234536645,0,0,0,0,1.959834467,0,0,0,0,0,8.875462831,2.159049313,8.660722242,0,3.619450877,2.283469031,
8.194224446,5.694548476,10.57152012,6.818446775,0,4.8696392,0,8.064293677,8.303360081,5.740051978,0,0,1.674904626,6.707238628,2.711021318,3.918449926,4.602558379,2.068632354,0,0,5.837982345,2.74723393,0,5.68152181,0,0,0,1.338596694,7.866072799,0,0,0,0,0,1.797115738,0,4.293124066,5.314446514,0,0,0,2.405446283,0,6.213863305,0,2.046103514,0,0,4.334091189,0,6.139012732,5.800288227,5.262402246],[6.70826126,3.920180613,0,3.991238804,2.418952549,2.303636946,0,0,0,0,0,0,6.500013095,7.714517186,0,0,1.731263898,
0,2.573009698,0,0,0,0,0,0,0,0,0,1.221294271,0,0,0,1.774547779,1.255175933,3.203757507,0,0,0,0,0,0,0,2.29611755,0,0,4.658711917,0,0,0,4.175777728,0,0,0,0,0,0,0,2.987759068,7.324263903,0,8.461941458,0,0,4.340878996,0,3.481491606,0,5.655688553,0,7.815334773,4.509413633,7.457997842,1.590756464,1.571621765,2.921997488,4.696976195,4.250242561,3.121377237,5.295339188,0,0,0,7.073830195,8.05915129,0,7.452805838,0,5.647119718,3.149587113,8.324504005,6.461304882,0,0,0,0,0,2.573009698,0,6.723164835,7.147760499,
3.81913209,0,0,4.39624901,3.957082868,10.12927417,0,0,9.203721128,0,6.279421452,3.741049922,3.768880774,1.410544518,6.488403286],[5.650649495,7.786559409,0,6.209947215,7.130626517,3.149587113,0,0,0,3.317392333,3.645101145,0,6.204126486,7.722257608,8.561801236,0,1.731263898,0,2.573009698,7.677393395,3.416491096,0,0,2.168803591,5.3917542,0,0,0,4.085653677,0,7.055062168,3.5520836,7.782201014,8.218248321,4.28395827,3.958420896,1.361689044,8.082591378,5.399808132,0,0,6.190494334,6.886797487,0,0,7.58777499,
0,0,0,4.666202349,3.949615895,0,0,0,0,0,7.111797466,5.352665029,8.930846828,0,9.64856054,5.444706535,9.066452874,7.416817859,9.900439642,6.902605057,5.237378775,7.013856313,2.331205908,8.29522395,7.997779953,7.353917933,1.590756464,2.790179778,4.519153412,8.29447179,4.446549919,4.036007806,8.293756619,2.534144363,4.646629049,0,7.903111157,7.588179213,0,9.364275888,0,6.783201494,3.149587113,7.114936233,9.579439147,0,0,2.172734535,0,0,0,0,7.651051691,7.777359249,0,0,0,6.989530728,4.183728784,9.613989597,
0,4.30592258,7.122029412,2.62792129,6.711961034,2.357189199,8.934932351,7.080320379,8.011279515],[1.431779586,6.084022716,0,6.18060584,5.672425342,1.569736026,0,0,6.362483709,0,0,0,5.866479193,1.090815163,9.320103183,0,0,0,1.406082194,0,0,0,0,2.998738351,2.350033433,0,0,0,3.698665367,0,3.241876309,0,7.001336624,0,2.839992687,0,4.420089118,3.2188198,7.603985209,0,0,3.244061423,5.278343442,2.785322386,0,7.536333628,0,0,0,1.781999348,0,0,0,0,0,0,6.800223825,0,5.563655308,0,6.769037991,4.708466901,0,
1.46012053,0,6.363800668,0,6.208306093,0,3.713829095,4.149781155,4.766795293,0,2.305904344,3.288643503,5.956457634,0,2.278309285,3.997747783,0,1.586888663,0,4.204912301,1.94753258,0,4.151712198,0,0,0,3.54885136,5.695345148,0,0,0,0,0,0,0,3.902410173,6.036836768,2.097168659,0,0,4.491209918,3.15801765,3.880683284,0,0,0,0,5.789549269,1.614406279,4.15721395,0,2.50408572],[5.323702816,6.850447992,0,3.991238804,0,1.569736026,0,0,0,0,0,0,0,3.155361395,9.661858648,0,0,0,6.135595009,6.959501133,0,0,0,0,3.201119623,
0,0,0,2.936928025,0,5.491636093,3.260581391,5.438721383,2.98819618,5.081263325,0,9.658046096,8.856748825,5.517366013,0,0,6.876829072,6.80505227,2.785322386,0,4.804992012,0,0,0,3.427082841,1.959834467,0,0,0,0,0,6.636732821,3.272846047,5.868079443,0,0,3.127128728,9.275935723,5.304835782,0,4.723762163,0,3.801280408,0,8.238452992,8.927073162,4.671039943,0,0,0,1.167924869,2.711021318,1.834870601,4.500203927,0,2.324239181,0,0,1.94753258,0,7.222911731,0,0,0,2.482114093,0,0,0,0,0,0,0,0,3.902410173,3.032789935,
0,0,0,3.796388312,0,0,0,0,0,2.62792129,0,0,2.871013559,0,1.354808925],[2.607242384,6.401691178,0,4.120471603,8.745710856,1.569736026,0,2.408805546,0,0,3.034610959,2.926124712,1.924937051,6.421993474,10.23423974,0,0,0,6.265054094,8.56049796,2.079226691,0,0,2.168803591,3.201119623,0,0,0,3.542563074,0,5.378828463,2.40377094,4.96653862,0,4.428536445,0,3.919218828,7.876959032,3.554918875,4.249294997,0,1.640918907,5.960643883,7.957358652,0,6.765756326,0,0,0,0,1.959834467,0,0,0,0,0,8.427453574,7.754250701,
7.165837518,0,4.228198043,4.477456875,8.855373588,7.26081863,4.87292166,7.369874558,0,5.13412428,0,4.768852641,7.245588536,7.457997842,0,0,2.429204831,6.38014525,1.916065792,2.891124637,6.582585057,0,5.360369907,0,1.554826783,1.94753258,0,7.398674744,0,0,0,4.02596074,4.389821626,0,0,7.106872831,0,0,0,0,5.341092099,6.92706272,0,0,0,6.124491676,1.214748986,6.458718649,0,3.141551507,2.184629194,0,6.877908857,0,3.235888264,0,4.511395522],[2.136055426,2.618564793,0,1.316327062,0,0,0,0,0,0,0,0,1.924937051,
2.134165238,4.216294965,0,0,0,0,1.612405897,0,0,0,0,0,0,0,0,3.698665367,0,0,2.40377094,2.546614229,2.367619226,0,0,0,3.751182392,1.481358206,0,0,1.640918907,2.29611755,0,0,1.885737479,0,0,0,0,0,0,0,0,0,0,0,0,4.537434131,0,1.385653692,0,4.941563173,0,1.529467388,1.430239906,0,1.121990524,0,1.594645054,0,2.168803591,0,0,1.674904626,1.804782814,0,0,1.413536412,0,0,0,1.554826783,3.258734268,0,4.744508356,0,1.241386551,0,2.02080583,4.509606186,0,0,0,0,0,0,0,1.733606582,3.466949588,0,0,0,1.950591407,0,
5.142615319,3.154638024,0,3.016531724,0,1.377092695,0,3.976074161,0,6.972814312],[2.961840268,9.52399021,0,0,0,4.226241501,0,0,10.7586622,8.738122561,0,0,1.924937051,7.197341658,9.648371133,3.658543633,6.141710064,1.871675903,0,8.95078088,2.897552731,0,0,0,7.292208467,0,0,0,3.83951414,1.297324055,8.310216768,5.714304486,9.890175932,9.146901396,2.839992687,3.958420896,8.481225984,5.781795617,6.961807519,0,0,6.952815269,7.927797274,0,0,4.733705155,0,0,0,3.056075924,4.902157249,0,0,0,0,0,5.419236999,
4.326546321,5.563655308,0,4.828801899,0,9.198411857,3.000947168,0,2.605196984,0,2.179323699,0,5.94500038,5.530636702,3.284108206,0,1.571621765,0,3.282169857,1.916065792,2.278309285,2.93651056,3.784457154,0,2.719532226,0,1.94753258,0,4.435972646,0,0,0,2.02080583,0,0,0,0,0,0,0,0,4.732344934,2.408805546,0,0,0,0,3.957082868,0,2.308177125,0,2.184629194,0,0,0,2.871013559,0,1.354808925],[3.687570256,2.279780641,0,0,3.277337944,2.303636946,0,0,5.502552596,2.455308789,0,0,0,0,3.093845517,0,6.23354183,0,1.406082194,
0,0,0,0,2.168803591,0,0,0,0,0,1.969178823,1.4287038,1.653483243,2.211623187,1.255175933,2.839992687,0,3.14556229,3.594588248,3.759667491,0,2.017487427,3.535209466,2.29611755,3.676698353,0,0,0,0,0,0,0,0,0,2.047816235,3.96333911,0,4.947233483,1.450539436,0,0,0,1.5529849,0,1.46012053,0,3.244061423,0,1.745427173,0,0,0,0,0,0,0,0,0,0,2.113629503,1.377092695,0,0,2.285688951,0,0,0,0,3.199364361,0,1.338596694,3.046059362,0,0,1.461730735,0,0,1.797115738,0,0,2.754273197,0,0,0,1.282537517,3.357133596,2.975444667,
3.154638024,0,4.227317234,0,0,1.614406279,3.235888264,0,4.051052201],[0,0,0,0,0,0,6.740374481,3.266140317,0,3.317392333,1.28620039,2.104447385,0,0,0,3.418179486,0,2.659730269,0,1.612405897,4.347299885,0,0,4.208089373,0,0,2.439564301,3.730089796,0,1.297324055,1.4287038,0,0,0,3.203757507,0,0,1.254014401,0,0,0,1.640918907,0,0,0,2.334318467,2.83110867,0,2.476695351,0,5.157127848,0,2.621674279,0,0,0,2.801189549,0,0,2.172734535,0,2.283469031,0,0,1.529467388,0,0,0,2.331205908,0,0,0,2.328878064,0,0,0,4.022952592,
1.191371277,0,2.885530704,0,7.96886519,0,0,0,0,3.510786446,0,0,2.02080583,0,0,0,0,3.605634704,6.225458174,4.378648964,0,0,0,3.437769124,4.113062664,3.417546061,0,0,0,0,0,0,0,0,0,0,0,0],[6.141790552,6.42345892,0,1.316327062,8.180557832,0,0,0,0,0,0,0,1.262193429,3.620520142,5.176956182,0,0,0,5.221244134,4.794362379,0,0,0,0,0,0,0,0,1.221294271,0,6.065870567,0,3.046826728,0,2.839992687,0,0,5.209885343,5.45978414,0,0,0,2.91052254,0,0,6.205085147,0,0,0,0,0,0,0,0,0,0,8.938262967,5.084444573,6.33323819,0,
1.385653692,1.5529849,2.679289883,8.477825594,6.292017702,4.977668006,0,4.545532356,0,4.26166757,2.94488983,4.338479271,0,0,0,5.309371451,2.367619226,2.617013534,5.46797168,2.068632354,2.809830944,0,4.814129086,1.94753258,0,5.915397533,0,0,0,5.727587442,5.793023474,0,0,5.173436064,0,0,3.446387271,0,5.767876484,5.206312682,0,0,0,3.639384767,0,5.142615319,0,3.141551507,0,2.62792129,4.215048346,0,3.526859546,2.109945405,4.780297015],[4.528027849,0,0,1.316327062,9.957796024,0,0,0,0,2.455308789,0,0,2.377347064,
6.514050916,0,0,0,0,5.456290025,0,0,0,0,0,0,0,0,0,0,0,4.413090928,1.653483243,0,0,2.35241283,0,0,2.709327299,2.196679237,0,0,0,0,0,0,5.549117811,0,0,0,0,0,0,0,0,0,0,0,3.510786446,8.103676361,0,6.32250971,0,0,8.657504609,4.563250245,7.309495623,0,2.179323699,0,2.819792025,0,1.458514165,0,0,2.429204831,5.166422948,2.98819618,2.617013534,6.113109407,1.377092695,0,0,3.129602515,1.94753258,0,5.752299708,0,0,0,3.54885136,0,1.866117748,0,0,0,0,5.974556572,0,5.06859083,0,0,0,3.417546061,7.837903493,0,7.928150758,
0,1.358928018,0,1.844254505,8.616084908,1.614406279,0,0,4.511395522],[0,1.192413264,5.640960842,0,3.277337944,5.999822492,0,0,0,0,4.072735074,3.827953141,5.377104329,5.38121297,3.093845517,0,4.729119939,1.871675903,0,0,0,0,0,0,0,0,0,0,2.32039045,4.208884861,2.13227898,8.344448314,0,2.711021318,1.61041097,0,2.049532294,1.254014401,0,0,1.335934953,1.640918907,0,1.567855244,0,3.558472286,0,0,0,1.781999348,0,0,0,0,3.052984456,0,0,0,1.511899039,0,0,0,0,1.46012053,0,0,0,1.121990524,0,0,1.419561476,0,0,
0,0,1.167924869,0,1.191371277,0,0,0,0,2.7684921,0,0,0,0,6.486660821,0,7.80891007,0,0,0,0,0,0,0,0,0,2.408805546,0,0,0,2.750747772,7.269000032,9.073492069,0,3.914995645,3.016531724,7.028278272,2.885530704,1.614406279,5.745010823,0,3.908687227],[7.513047234,1.836204539,0,1.316327062,7.666571366,0,0,0,0,0,1.95520039,0,0,6.956101292,9.018444845,0,0,0,2.573009698,4.897559156,0,0,0,0,0,0,0,0,3.36749764,0,0,0,1.774547779,0,3.203757507,0,0,3.2188198,3.030063897,2.001082698,0,0,1.204003557,0,0,4.102028745,
0,0,0,3.056075924,0,0,0,0,0,0,1.994606741,5.727731737,7.029338358,0,8.129449216,8.398987583,9.596139378,7.488916433,0,7.111533576,4.376707911,4.748587514,0,3.920428048,7.978746384,5.591044963,0,3.888178831,3.823534849,2.581961262,1.916065792,4.245781516,7.220006033,2.534144363,5.360369907,0,6.524898516,0,0,7.247621306,0,0,0,4.383889211,7.295354359,0,0,10.07439971,0,0,0,0,6.59019535,5.720391696,0,0,0,3.796388312,2.926952007,8.8977624,0,2.509654215,4.477456875,6.390625634,7.637226708,0,8.871499998,
0,5.834781143],[4.980037718,3.321557174,0,4.3486622,0,10.36836037,0,2.408805546,9.472405736,0,0,3.446387271,0,5.787570587,0,0,7.24614264,0,2.926124712,8.883234114,4.09837174,0,2.8815524,0,9.092973707,0,0,0,4.920973241,1.297324055,8.71640022,6.995591271,9.720440958,2.711021318,4.791503894,3.573991383,9.895324406,9.311405547,9.851653902,2.001082698,0,8.562695176,9.407195738,0,0,5.17154437,2.02080583,0,0,3.056075924,4.408114953,0,0,2.047816235,3.96333911,0,0,0,3.358854664,0,0,0,0,5.099082918,0,6.633795685,
0,4.748587514,0,0,0,4.856588768,0,0,4.212869647,5.115442623,2.711021318,2.617013534,1.413536412,0,0,0,0,0,0,0,1.450539436,0,0,0,0,0,0,0,2.719532226,0,0,0,0,1.953661285,0,0,0,0,0,0,0,0,0,0,0,0,0,2.109945405,2.50408572],[4.417752244,4.430656786,0,2.799346774,3.811828399,4.501664819,0,0,6.805259412,2.455308789,0,0,4.15244441,3.327622416,6.735083971,0,0,0,0,0,0,0,0,0,0,0,0,0,1.221294271,0,0,0,4.510440908,0,3.494023898,0,2.049532294,5.545547456,5.821596845,0,0,2.388819979,2.635783143,0,0,2.334318467,0,
0,0,0,0,0,0,0,0,0,1.994606741,3.893829897,4.142957954,0,6.201254421,5.082447626,5.851917827,4.067107018,1.529467388,6.682220941,4.870295053,3.674088391,0,5.223562965,5.679515464,5.168523102,0,0,0,3.282169857,2.367619226,4.144704051,4.390029428,1.377092695,4.757668911,0,7.134784472,1.94753258,0,3.32657446,0,5.480788824,1.569736026,4.754560657,5.884505736,0,0,0,3.605634704,0,0,0,7.823885596,2.408805546,0,0,0,6.620897252,0,3.880683284,0,5.01341333,10.86866387,7.489899942,0,5.400439335,7.253412105,0,
6.053557998],[3.687570256,5.97031664,0,5.013309151,4.759526397,4.932040333,0,0,5.149046272,0,0,0,0,4.165843825,7.778688025,1.554826783,0,0,1.406082194,3.945166829,0,0,0,0,0,0,0,0,4.642010819,0,2.13227898,1.653483243,7.168493046,4.446549919,2.35241283,0,0,3.594588248,8.709300025,0,0,0,2.91052254,1.567855244,0,3.383215216,0,0,0,0,0,0,0,0,0,0,3.315453761,6.640777491,3.983204757,0,7.004718846,6.256165336,7.251258487,3.524550291,3.095446785,6.583688373,3.918795874,5.272286719,0,4.96823042,7.180442304,
6.112321025,0,0,0,5.215663106,1.255175933,2.617013534,3.997747783,0,6.231668497,1.517123172,4.480124818,3.258734268,0,6.19491568,0,0,0,5.502792276,8.093984257,0,0,2.172734535,0,0,0,0,1.733606582,5.261392475,0,0,0,4.491209918,3.15801765,7.352894406,0,4.057402811,9.810833675,4.441310078,4.895011416,0,6.516114704,0,5.711546368],[0,1.192413264,0,0,2.911066272,0,0,0,0,0,0,0,0,1.090815163,3.093845517,0,0,0,1.406082194,3.738300805,0,0,0,0,0,0,0,0,1.873071327,0,2.957578397,0,2.818292015,1.255175933,1.61041097,
0,0,1.254014401,2.672729483,0,0,1.640918907,8.220436663,2.785322386,0,1.231253532,0,0,0,0,0,0,0,0,0,0,0,0,3.358854664,0,2.897552731,1.5529849,5.782776899,2.170766959,4.443256343,1.430239906,0,3.380142709,0,1.594645054,0,2.168803591,0,0,0,2.854876154,1.255175933,1.834870601,0,0,1.586888663,0,1.554826783,0,0,1.840219556,0,0,0,1.338596694,2.210938675,0,0,0,0,0,0,0,1.733606582,2.408805546,0,0,0,1.950591407,0,0,0,0,0,0,0,0,3.235888264,2.109945405,2.50408572],[0,1.192413264,0,4.718927108,6.777362535,0,
0,0,0,0,0,0,0,5.077600277,3.761584641,0,0,1.871675903,4.686639201,6.017610364,0,0,0,0,0,0,0,0,2.936928025,0,1.4287038,0,1.144473079,0,2.35241283,0,0,1.914596325,1.481358206,0,0,0,2.29611755,3.436052901,0,3.383215216,0,0,0,0,1.959834467,0,0,0,0,0,4.947233483,5.774158984,2.233797185,0,0,0,4.105696197,4.340878996,2.25507312,6.477929732,0,2.782901878,0,0,2.121043177,4.338479271,0,0,0,2.854876154,1.255175933,1.191371277,3.997747783,0,3.462057566,0,0,0,0,4.042983171,0,0,0,2.02080583,0,0,0,4.46287892,0,
0,0,0,2.498547749,3.266140317,0,0,2.546614229,4.185230436,0,5.475028474,0,0,2.184629194,0,7.566041877,0,6.787558938,0,3.750720028],[3.687570256,5.305985521,0,1.992995304,7.727032551,1.569736026,0,0,0,0,2.410489481,0,4.45805522,4.754283611,4.839868457,0,0,1.871675903,6.619995957,8.70975751,0,0,0,0,0,0,0,0,3.168216406,0,6.300749355,0,6.557966617,1.255175933,4.428536445,0,0,7.893860328,3.316228807,1.322794318,0,1.640918907,7.856545239,0,0,6.835514181,0,0,0,1.781999348,2.76135907,0,0,0,0,0,4.452563965,
8.382648374,9.24449598,0,8.070077652,4.042109164,7.442719388,6.253733669,2.25507312,8.132684881,3.918795874,5.621620971,0,4.768852641,6.865150378,4.856588768,0,0,0,6.636678857,2.98819618,3.494361381,7.497456681,0,6.34270266,0,3.864522096,3.635588574,0,7.132934991,0,3.199364361,0,6.060679408,7.360534445,0,0,3.731259476,0,0,0,0,5.497805431,8.12049114,0,0,3.046826728,7.269548707,1.214748986,7.038203308,0,0,0,1.844254505,7.398586627,2.845102004,7.386429788,8.413487598,3.37097252],[7.113963214,2.279780641,
0,1.992995304,0,7.993997007,0,0,5.849254867,0,1.95520039,0,1.262193429,2.464609202,7.067873466,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2.211623187,0,3.494023898,0,0,3.751182392,2.672729483,0,0,0,4.361537796,0,0,1.231253532,0,0,0,1.781999348,2.76135907,0,0,0,0,0,0,4.052930578,4.417540006,0,4.654982428,7.828489476,0,1.46012053,0,5.648250932,4.165843825,3.801280408,0,6.281098735,6.96524287,2.998738351,0,0,1.674904626,4.472293286,1.916065792,3.649991709,2.582960703,0,7.142419168,0,5.241142513,0,0,1.840219556,
0,0,0,4.834050577,8.265451259,0,0,0,0,0,0,0,0,5.314446514,0,0,0,4.491209918,2.311215911,3.637105643,0,0,0,0,1.377092695,2.357189199,7.422286123,0,0],[2.136055426,8.315062227,0,1.316327062,1.666262603,4.065919631,0,0,9.757443382,7.303330271,1.95520039,0,2.377347064,6.363800668,7.827378613,2.285688951,6.093504883,0,3.209582046,8.112283967,0,0,0,0,6.573833402,0,0,0,3.542563074,2.772076473,8.756463191,5.143016366,8.138894678,8.39508396,4.428536445,3.958420896,9.466456685,7.207643056,9.417421538,0,0,10.37654851,
7.49922223,0,0,2.676004571,0,0,0,2.555337332,3.650844232,0,3.499434968,0,3.052984456,0,4.947233483,7.070913857,5.383384298,0,4.228198043,1.5529849,8.438567099,5.540217969,2.735603919,3.685313026,0,2.179323699,0,5.299531819,4.961195168,3.284108206,0,0,0,4.829414324,0,1.834870601,4.787761347,0,0,1.517123172,2.285688951,2.74723393,0,4.042983171,0,0,0,2.02080583,2.210938675,0,0,0,0,0,0,0,2.995800011,4.0707841,0,0,0,3.639384767,3.688072423,0,2.308177125,0,2.184629194,3.132909221,0,0,1.634715536,0,4.299507612],
[1.431779586,0,0,1.316327062,3.277337944,3.149587113,0,0,0,0,2.410489481,0,4.924604901,6.150894666,0,0,0,0,1.406082194,0,0,0,0,0,4.677517484,0,0,0,3.698665367,1.969178823,4.020451209,0,6.359552821,0,1.61041097,0,0,5.262888697,1.481358206,4.555970876,6.353899882,0,1.204003557,1.567855244,0,6.57500401,0,0,0,0,0,0,0,0,0,0,0,6.135947076,3.983204757,0,3.797347749,0,0,3.728921218,3.383215216,3.244061423,0,3.010569242,0,3.182820685,0,0,0,0,1.674904626,5.115442623,1.255175933,1.191371277,4.951871382,0,2.809830944,
0,5.085158479,1.94753258,1.385653692,2.897552731,0,6.274231146,0,3.72600458,7.511659395,0,0,0,0,0,0,0,0,1.284976959,0,0,0,1.950591407,4.845042531,0,0,2.85992601,0,0,0,0,5.025868086,0,1.354808925],[7.041440688,1.192413264,0,4.873613724,0,0,0,0,0,0,1.28620039,0,5.051712816,1.704821959,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2.32039045,0,0,0,0,1.916065792,1.61041097,0,0,4.911014295,0,0,0,0,2.635783143,0,0,6.066901519,0,0,0,0,0,0,0,0,0,0,0,1.450539436,3.358854664,0,4.744508356,0,1.888578717,2.644765483,2.25507312,
0,0,3.534588978,0,0,0,5.096632231,0,0,0,3.751552406,2.98819618,2.617013534,1.413536412,1.377092695,0,0,5.241142513,0,0,2.623232518,0,5.994484645,1.569736026,5.957962862,6.872243316,0,0,0,0,0,1.797115738,0,6.280662885,4.298523491,0,0,0,3.262431434,0,6.495772719,0,0,9.390626345,0,2.068632354,2.845102004,7.76713902,0,1.354808925],[3.246250636,5.258332895,0,1.316327062,0,6.085958554,0,0,4.371867824,0,0,0,0,4.870295053,6.39084947,0,0,0,1.406082194,4.794362379,0,0,0,0,0,0,0,0,2.936928025,0,0,1.653483243,
5.074147944,2.367619226,1.61041097,0,2.863826449,2.709327299,6.688607531,0,0,0,2.635783143,0,0,0,0,0,0,0,1.959834467,0,0,0,0,0,0,1.450539436,3.358854664,0,4.559531286,5.379168854,7.199141747,2.170766959,0,6.882021243,0,3.380142709,0,5.896898074,6.405177105,3.522245428,0,0,0,0,2.711021318,1.191371277,3.220247532,0,3.909586503,0,0,1.94753258,0,3.32657446,0,0,0,1.338596694,0,0,0,0,0,0,0,0,3.658543633,4.49516583,0,0,0,1.282537517,0,0,0,0,0,0,0,0,3.976074161,0,1.354808925],[0,4.247537068,0,0,2.911066272,
0,4.299507612,0,6.273416669,12.8008047,0,0,0,0,0,9.111984814,8.817354675,0,10.41191995,2.354798077,0,0,0,0,0,1.962937906,0,0,0,0,0,4.183278629,0,1.255175933,10.35651976,3.573991383,2.049532294,6.370119833,4.891119492,0,1.335934953,9.688517039,0,6.916988055,0,0,0,0,0,4.798531072,4.755505094,0,3.499434968,0,0,0,0,0,4.537434131,0,0,7.483410394,0,0,0,0,0,0,0,3.472619051,0,4.064733345,0,2.305904344,1.674904626,1.167924869,3.753033567,5.048429162,0,4.334091189,0,0,0,3.635588574,3.18023001,0,0,0,0,4.754560657,
5.149046272,0,0,5.487346431,0,0,0,0,6.443714578,3.466949588,2.097168659,0,7.371984904,1.282537517,0,0,0,0,0,2.62792129,0,4.128858007,0,7.885630615,5.794861186],[6.176069411,5.562929062,0,0,3.811828399,0,0,0,0,0,0,0,1.262193429,3.327622416,1.812524025,0,0,0,0,4.431364327,0,0,0,0,2.350033433,0,0,0,2.661346394,0,5.378828463,5.384482695,3.83967659,7.658993826,0,0,0,5.411129491,5.727139723,0,0,2.388819979,3.340058983,0,0,2.334318467,0,0,0,2.555337332,0,0,0,0,0,0,0,1.450539436,3.598259323,0,4.347299885,
0,6.905915472,3.286373665,0,2.605196984,0,3.801280408,0,3.472619051,2.590991323,5.096632231,0,0,0,1.804782814,1.916065792,2.278309285,4.787761347,0,0,0,0,0,0,4.744508356,0,0,0,0,0,0,0,0,0,0,0,0,0,1.953661285,0,0,0,3.262431434,1.214748986,2.479401066,0,0,0,0,4.215048346,0,1.634715536,0,4.511395522],[3.687570256,5.814292081,0,1.316327062,1.666262603,3.149587113,0,0,2.56708501,2.455308789,0,0,0,4.813455122,5.450009229,0,0,0,0,5.397538194,0,0,0,0,2.350033433,0,0,0,1.221294271,0,3.683059916,2.40377094,
4.510440908,5.50407377,0,0,0,4.349831029,6.110621289,0,0,3.535209466,3.340058983,0,0,2.334318467,0,0,0,0,2.76135907,0,0,0,0,0,5.20245281,2.159049313,5.317915032,0,5.626062257,2.283469031,5.633682545,4.210477304,6.326344685,4.022743956,1.935406473,3.207157908,0,3.920428048,5.24225651,4.064733345,0,0,0,5.703825922,2.367619226,1.191371277,4.140691561,0,1.586888663,0,2.7684921,1.94753258,0,5.445615649,0,0,0,2.02080583,5.149046272,0,0,1.461730735,0,0,0,0,0,4.584271389,0,0,0,0,0,5.398826835,0,1.358928018,
3.016531724,3.132909221,0,0,4.46287892,3.834609931,1.354808925],[5.87590186,2.279780641,0,0,5.609580256,1.569736026,0,0,0,0,3.267999173,0,0,5.028499229,7.843250355,0,0,0,1.406082194,4.12605646,0,0,0,0,0,0,0,0,3.168216406,0,0,0,1.774547779,0,2.35241283,0,0,1.914596325,2.672729483,0,0,0,3.141217906,2.785322386,0,2.952062239,0,0,0,0,0,0,0,0,0,0,0,3.893829897,4.936856017,0,6.293137868,6.917940459,6.804915877,5.36737841,0,4.296021802,2.733293055,4.616440732,2.331205908,4.101113517,5.530636702,5.642443069,
0,0,0,2.581961262,1.255175933,2.278309285,5.412691363,0,5.78419553,0,4.71115338,0,0,6.061915528,0,0,0,3.883764286,5.793023474,0,0,7.904462971,0,0,0,0,4.600258688,3.266140317,0,0,0,1.282537517,1.214748986,6.731497682,0,1.358928018,3.924517728,4.25812051,4.444055644,0,6.702628384,0,5.794861186],[2.607242384,0,0,1.316327062,0,1.569736026,0,0,0,0,6.99569599,0,5.168523102,3.863871272,4.399205452,0,0,0,2.104447385,0,0,0,0,0,0,0,0,0,0,9.153585267,3.683059916,0,3.712214701,4.250242561,1.61041097,0,3.14556229,
1.254014401,0,3.524879916,4.576876036,0,0,0,0,5.059399127,0,0,0,3.056075924,2.76135907,0,0,0,0,0,0,4.556449605,3.803533211,0,1.385653692,0,1.888578717,0,1.529467388,3.685313026,0,4.026279325,0,5.058456442,2.590991323,2.168803591,0,0,0,3.996623167,0,1.191371277,6.702676902,0,0,0,4.600258688,0,2.079226691,1.195550809,0,5.016937469,1.569736026,0,6.400616031,0,0,0,0,0,0,0,0,1.953661285,0,0,0,3.02915668,5.478749586,1.717354877,0,3.579495955,0,0,0,0,2.871013559,0,4.511395522],[5.383601619,2.279780641,1.784498863,
0,3.277337944,4.370515798,0,0,0,2.455308789,3.943779694,0,3.43165101,0,3.466007268,0,4.729119939,1.871675903,1.406082194,0,0,0,0,5.020970229,0,0,0,0,1.873071327,2.772076473,2.957578397,4.620888419,0,5.58966543,0,0,2.863826449,3.418903812,3.030063897,0,2.017487427,3.777352843,2.29611755,3.436052901,0,3.183685535,0,0,0,0,0,0,0,0,4.517137731,0,0,0,3.598259323,0,0,0,0,0,2.735603919,0,0,1.121990524,0,1.594645054,0,1.458514165,0,0,0,0,0,0,0,0,0,0,6.430809089,4.392317423,3.797347749,0,0,2.690869819,1.569736026,
4.274159055,3.571590925,0,0,0,0,0,0,0,0,3.643192729,0,0,0,1.950591407,0,5.918781383,0,0,0,2.62792129,3.784457154,0,5.905624518,0,2.85410132],[3.246250636,5.105134247,0,1.992995304,6.04913827,0,0,0,0,6.931638542,0,0,2.721242624,5.171056616,3.093845517,0,1.731263898,0,5.087602875,7.316835547,2.079226691,0,0,0,0,0,0,0,3.542563074,0,3.861596037,0,4.723762163,0,2.35241283,0,3.583640746,5.952842061,3.030063897,1.322794318,0,0,5.867065253,0,0,5.590057368,0,0,0,1.781999348,1.959834467,0,0,0,0,0,3.693798993,
6.536898672,6.923272455,0,7.26890038,2.283469031,4.941563173,5.170977372,1.529467388,4.897896718,0,3.380142709,0,2.333539385,3.228850911,3.284108206,0,0,0,3.996623167,1.916065792,2.891124637,7.137165915,0,1.586888663,0,1.554826783,0,0,4.744508356,0,0,0,4.581096904,3.046059362,0,0,0,0,0,0,0,3.658543633,5.553883032,0,0,0,4.185230436,0,4.577929995,0,0,0,0,3.606691969,0,4.46287892,6.240826923,3.135561463],[4.168154907,0,0,1.316327062,0,2.787748346,0,0,0,2.455308789,6.70869935,0,5.424856331,4.336928853,
4.839868457,0,0,0,1.406082194,0,0,0,0,2.168803591,2.350033433,0,0,0,3.36749764,8.746754231,5.191128124,0,6.154168349,2.98819618,2.839992687,0,0,4.771663215,2.672729483,4.358925044,7.172854332,0,0,0,0,6.447138937,0,0,0,0,1.959834467,0,0,0,0,0,0,6.33490259,3.803533211,0,1.385653692,0,0,0,4.168411949,2.959707294,1.935406473,4.220876189,0,5.143370329,3.84803047,0,0,0,0,4.696976195,1.255175933,1.834870601,6.834720806,1.377092695,0,0,9.044754155,0,2.079226691,1.840219556,0,7.985201254,1.569736026,3.346859325,
8.290754801,0,0,0,0,0,0,0,1.733606582,1.284976959,0,0,0,4.185230436,7.231446308,0,0,6.02597568,0,0,2.068632354,0,3.526859546,0,4.180621815],[0,0,0,0,0,0,0,0,0,0,0,0,2.721242624,2.134165238,0,1.554826783,0,0,0,0,0,0,0,0,0,0,0,0,3.542563074,5.226629855,7.765415827,2.894869795,4.26001107,4.773589639,0,0,2.049532294,2.366007313,2.196679237,5.477144427,4.576876036,0,0,0,0,1.231253532,0,0,0,0,2.76135907,0,0,0,0,0,0,4.196215359,0,0,4.828801899,0,1.888578717,4.943561744,1.529467388,2.605196984,0,5.784442396,
0,1.594645054,1.419561476,0,0,0,1.674904626,4.105131291,2.711021318,2.278309285,3.220247532,0,3.462057566,0,4.044732979,1.94753258,2.545649577,3.925386939,0,0,4.621878817,6.156566334,4.509606186,0,0,0,0,2.122906148,0,0,0,3.032789935,0,0,0,0,0,1.717354877,0,3.579495955,0,0,0,0,6.841522968,2.109945405,1.354808925],[8.593947481,3.321557174,3.430278729,8.661332089,4.362134417,5.758878943,0,0,0,0,5.87169476,2.104447385,4.785206658,6.239861435,5.364607625,0,5.49452847,0,2.926124712,1.612405897,0,3.771698401,
0,0,0,0,0,0,3.83951414,3.051133618,3.683059916,1.653483243,6.154168349,6.675932571,4.28395827,5.075843758,6.572761196,5.154860176,4.372482843,7.007056739,2.827323338,0,5.460243622,2.785322386,0,5.706335436,0,0,0,1.781999348,3.273593502,0,0,0,3.96333911,0,1.994606741,5.470131927,0,6.471176049,4.09837174,5.625150633,1.888578717,2.170766959,3.623018727,1.430239906,1.935406473,2.512450001,0,2.333539385,1.419561476,1.458514165,0,0,2.921997488,4.105131291,0,2.617013534,3.839067509,2.885530704,0,0,7.501698346,
1.94753258,2.079226691,3.127952731,0,8.291929194,0,5.049199103,8.7580297,0,0,6.471176049,0,0,4.686639201,0,6.51881324,5.462819554,0,0,0,3.796388312,7.353001114,3.637105643,4.627339227,4.613188524,0,3.506233059,4.215048346,0,1.634715536,6.108385753,5.262402246],[0,1.192413264,1.784498863,0,1.666262603,2.303636946,0,0,3.068526802,0,0,0,1.262193429,0,0,0,4.729119939,0,0,0,0,0,0,0,0,0,0,0,0,1.297324055,2.603155617,2.40377094,1.144473079,0,0,0,2.863826449,3.751182392,3.030063897,1.322794318,4.666202349,
3.535209466,0,1.567855244,0,0,0,0,0,3.427082841,0,0,0,0,0,0,3.99325527,1.450539436,1.511899039,0,2.079226691,0,0,1.46012053,3.623018727,0,0,3.380142709,0,0,0,0,0,0,0,2.24508439,0,1.191371277,2.113629503,0,1.586888663,0,1.554826783,0,0,0,0,3.39914311,0,2.02080583,3.046059362,0,0,2.172734535,0,0,0,0,0,2.754273197,0,0,0,4.066891048,2.65168682,1.717354877,3.154638024,0,2.184629194,4.25812051,0,1.614406279,1.634715536,0,2.040985264],[4.630469553,2.279780641,0,3.991238804,0,0,0,0,0,0,0,0,1.924937051,1.704821959,
0,0,0,0,1.406082194,0,0,0,0,0,0,0,0,0,4.085653677,0,0,0,0,0,3.203757507,0,1.361689044,5.097652814,1.481358206,0,0,0,1.204003557,0,0,5.059399127,0,0,0,1.781999348,0,0,0,0,0,0,0,0,6.299716816,0,6.769037991,0,0,3.728921218,0,0,3.244061423,4.748587514,0,0,0,7.045692847,0,0,0,6.291064457,3.220604739,3.319889474,2.113629503,0,0,0,8.458509941,0,0,5.528611646,0,4.423836784,1.569736026,6.156566334,9.774413392,0,0,0,0,0,0,0,4.454849206,6.068067857,0,0,0,6.534350268,0,8.998019113,0,1.358928018,6.74662152,5.003965693,
6.055178464,4.565622299,5.854048158,0,2.50408572],[10.2981365,1.192413264,0,6.778640249,1.666262603,3.679313849,0,0,0,3.317392333,3.802156015,4.12941905,2.998738351,0,4.399205452,0,0,0,2.926124712,2.354798077,3.797347749,0,0,0,2.350033433,0,0,0,4.390486707,0,3.479267335,5.932766017,2.818292015,5.986713889,4.559936483,0,1.361689044,1.254014401,2.672729483,0,1.335934953,0,0,9.523119018,0,0,0,0,0,3.966628542,3.273593502,0,5.400439335,0,0,0,0,0,0,10.17415916,0,0,0,2.644765483,0,0,1.935406473,0,0,0,0,
0,0,1.571621765,1.674904626,0,2.367619226,3.918449926,2.113629503,0,2.324239181,0,7.662137036,2.74723393,7.914819105,3.925386939,2.159049313,5.292751623,0,3.72600458,7.953171845,0,0,0,0,0,5.252805925,0,4.454849206,0,0,0,5.221862105,3.639384767,1.864734062,0,8.601220263,0,8.354210299,3.802541477,2.534144363,0,1.634715536,8.092616913,2.50408572],[0,3.123017576,0,0,1.666262603,2.787748346,0,0,0,2.455308789,5.0292177,2.926124712,2.377347064,1.090815163,1.812524025,0,7.352378887,0,1.406082194,2.842544351,
0,2.383886536,3.780189712,2.998738351,0,0,0,0,1.221294271,5.169340701,2.603155617,5.932766017,0,4.619316948,0,2.212993723,0,3.2188198,3.759667491,2.460612703,2.47849835,4.723762163,2.91052254,4.619156995,0,2.334318467,0,0,0,0,2.76135907,0,0,2.047816235,0,0,0,0,0,0,0,3.127128728,0,0,3.8285856,2.134165238,0,2.512450001,0,0,0,0,0,0,0,3.45615723,0,1.191371277,0,0,2.324239181,0,3.129602515,6.288042101,4.828801899,0,0,7.172396808,1.569736026,4.834050577,2.688101136,0,0,0,0,0,1.797115738,0,6.323185711,6.098637164,
0,0,0,1.282537517,2.311215911,6.879029412,3.154638024,2.85992601,0,6.200434909,5.297875843,1.614406279,0,3.834609931,3.135561463],[8.090889725,0,0,5.605554037,0,1.569736026,0,0,0,2.455308789,0,3.827953141,4.15244441,0,0,0,0,0,3.209582046,1.612405897,4.09837174,0,0,0,3.201119623,0,0,0,2.936928025,0,2.957578397,0,3.244061423,1.255175933,4.28395827,0,0,0,4.705403237,0,9.465143294,0,0,10.0118341,0,1.885737479,0,0,0,2.555337332,1.959834467,0,6.087681547,3.3791203,0,0,0,0,0,13.00158412,0,1.5529849,0,2.170766959,
0,0,0,0,0,0,0,0,0,0,0,0,2.367619226,3.790456203,2.113629503,0,0,0,3.418179486,0,6.851950493,4.25281801,3.272846047,3.199364361,1.569736026,0,1.493074462,0,0,0,0,0,0,0,2.498547749,3.800230488,0,0,0,0,3.357133596,0,9.705618729,0,8.021619905,6.672938248,0,0,0,8.534565827,2.50408572],[8.345531382,1.192413264,0,4.718927108,1.666262603,1.569736026,0,0,0,2.455308789,0,2.104447385,0,0,3.093845517,0,0,0,2.104447385,2.354798077,0,0,0,0,0,0,0,0,1.873071327,0,0,4.489236399,0,3.89429641,0,0,0,0,1.481358206,0,
2.017487427,0,0,6.794671193,0,0,0,0,0,3.056075924,0,0,4.041235755,0,0,0,0,0,0,7.861576702,0,0,0,0,0,0,0,0,0,1.594645054,0,0,0,0,0,1.167924869,1.255175933,2.278309285,0,0,1.586888663,0,6.669242158,0,5.424098546,1.195550809,1.450539436,3.199364361,0,2.482114093,7.155433513,0,0,0,0,0,1.797115738,0,4.110953646,2.408805546,0,0,1.774547779,0,0,0,5.597853824,0,6.16836095,1.844254505,0,0,0,6.108385753,2.040985264],[0,2.279780641,4.361761497,2.799346774,0,0,6.781809081,2.408805546,1.792044962,0,0,2.104447385,
1.262193429,1.090815163,0,5.683348282,4.961735045,8.513181606,3.446387271,0,4.559531286,6.485549112,4.890564418,4.671039943,0,1.962937906,9.582116997,8.031969643,1.873071327,6.393868842,0,1.653483243,0,5.365339588,2.35241283,8.984288982,0,4.248348124,1.481358206,2.808592225,1.335934953,0,0,0,9.547138303,0,7.478729426,9.692349264,9.762514772,8.470286863,7.94640769,10.07343277,11.02477554,7.844486875,0,5.258031942,3.693798993,0,0,3.003160341,0,4.042109164,0,0,3.095446785,0,5.237378775,1.121990524,7.377840238,
1.594645054,0,0,2.328878064,5.862927691,6.731497682,0,6.926779189,1.834870601,0,0,2.324239181,7.05762372,2.7684921,0,0,1.840219556,3.714983524,7.731045772,6.96596603,4.383889211,0,3.830611616,7.38363434,0,9.683396535,7.587028641,4.540847341,7.418426334,0,2.408805546,6.056881974,6.162938571,7.285066294,0,0,0,3.154638024,0,0,3.802541477,5.984140876,6.31016769,3.235888264,0,2.50408572],[0,0,2.558261645,2.451788443,0,0,4.299507612,0,1.792044962,0,0,2.104447385,0,0,0,1.554826783,1.731263898,0,2.104447385,
0,3.797347749,5.690219044,4.080961764,0,2.350033433,0,4.22489809,5.457620072,0,0,0,1.653483243,0,0,0,0,0,2.709327299,0,0,0,2.388819979,0,0,3.643192729,0,5.34891761,0,0,3.966628542,0,2.782901878,0,2.047816235,0,0,1.994606741,0,0,0,0,0,0,0,0,0,0,0,0,0,2.121043177,0,4.256154097,1.571621765,4.519153412,0,0,1.834870601,0,1.377092695,0,4.150541524,1.554826783,0,2.545649577,0,2.159049313,0,0,0,0,1.866117748,2.335878518,0,3.605634704,5.479753142,3.741600477,0,0,1.284976959,0,0,5.125085065,0,0,0,0,0,0,0,4.085292151,
2.357189199,0,0,0],[0,1.192413264,5.492166606,0,0,0,6.182912545,3.266140317,1.792044962,0,0,2.926124712,1.924937051,0,0,0,1.731263898,2.659730269,0,0,0,6.098254231,3.780189712,0,3.201119623,0,9.539862209,5.353228024,0,3.051133618,0,0,1.144473079,4.250242561,0,7.425502029,0,4.248348124,1.481358206,2.001082698,1.335934953,0,0,0,7.987966359,0,5.641825282,8.201698417,8.150280528,5.565032398,6.714880751,8.205146382,7.461542736,6.191805688,0,5.002518037,3.315453761,0,0,4.212869647,0,0,0,0,1.529467388,0,
0,1.121990524,5.055632307,0,1.419561476,0,0,0,4.986490777,1.167924869,2.367619226,1.191371277,0,0,1.586888663,0,1.554826783,1.94753258,2.079226691,0,2.632106894,4.596479618,6.043533271,3.54885136,0,3.533813815,5.061286461,0,8.214753251,6.349381428,3.074803839,4.982411585,0,3.032789935,2.917885603,4.113062664,5.696201342,0,0,0,3.154638024,0,0,3.132909221,5.564557384,6.151840409,2.381429107,0,1.354808925],[7.857357954,3.920180613,7.93957203,8.165610958,4.019469864,7.19642303,0,0,0,0,5.835800508,4.591099532,
4.45805522,6.74435877,4.839868457,0,9.848800824,4.294034089,3.827953141,1.612405897,0,4.717893295,0,0,5.243564207,0,0,0,4.295856043,3.485952495,5.645856511,4.741524853,6.316371941,7.50227595,4.559936483,7.330916878,6.499558063,4.61739878,4.372482843,5.859399538,5.988684687,6.148024087,6.184041275,6.417504392,0,4.658711917,0,0,0,2.555337332,0,0,0,4.868546822,5.892249192,0,3.99325527,5.578750391,5.02154553,7.343438992,4.347299885,6.917940459,4.499630447,0,5.047689826,2.134165238,3.620520142,3.380142709,
0,2.333539385,0,2.642645028,0,0,0,5.520038125,2.367619226,3.121377237,4.698129705,2.534144363,0,0,6.104954231,0,4.09837174,4.042983171,0,8.839285436,3.149587113,7.362895574,7.899354181,0,0,7.178511976,0,0,4.195877697,0,5.941695955,6.157898619,0,0,0,6.318254678,8.880432722,5.863151442,5.475028474,6.495085564,5.444706535,3.802541477,3.16787499,0,4.59442283,5.800288227,5.711546368],[1.431779586,5.940432498,6.626431996,7.25750026,3.811828399,4.835876343,0,0,1.792044962,0,0,0,1.924937051,3.481491606,0,
0,7.974873692,2.659730269,0,3.206401401,0,4.465781641,0,0,0,0,0,0,0,0,0,3.260581391,0,8.142379729,3.494023898,5.075843758,1.361689044,5.154860176,2.196679237,1.322794318,5.723265523,4.938333643,7.550290267,2.785322386,0,0,0,0,0,0,3.273593502,0,0,5.271184915,0,0,0,4.052930578,0,6.527134005,0,6.060998989,0,0,4.168411949,0,0,2.782901878,0,0,0,1.458514165,0,0,0,0,1.255175933,0,1.413536412,0,5.288216512,0,0,1.94753258,7.159220301,0,0,8.966701177,2.787748346,5.957962862,9.197725102,0,0,0,0,0,0,0,0,1.284976959,
0,0,0,4.185230436,7.398893325,7.660872996,4.627339227,0,0,3.132909221,0,0,1.634715536,4.495623046,3.573305055],[10.02243611,6.189418066,7.507232477,7.214717226,5.070762648,6.988505781,2.85410132,0,0,2.455308789,5.0292177,5.749675863,1.924937051,4.415419518,3.761584641,0,8.802437647,4.083847062,2.926124712,3.738300805,0,5.119160024,0,0,2.350033433,0,3.835351761,0,4.562943583,6.785674076,2.957578397,5.384482695,7.093742069,7.209629115,2.839992687,8.451585789,4.706958126,5.817665772,3.759667491,8.001437781,
5.498484395,5.03472903,7.262493039,6.844849094,8.883450879,4.733705155,0,0,0,4.919735396,0,0,0,4.059526708,4.517137731,0,3.315453761,3.893829897,4.537434131,6.222731361,3.416491096,8.156501226,3.859324912,0,5.409711144,4.723762163,0,1.745427173,0,0,2.121043177,2.168803591,0,1.571621765,3.823534849,2.581961262,1.255175933,3.319889474,3.220247532,4.5462288,5.132088854,0,4.600258688,3.258734268,7.855772737,0,0,7.953791502,5.649977479,7.478729426,9.827249035,0,0,7.213040249,0,0,5.658352903,0,6.191661802,
7.729327733,0,0,0,4.958191223,7.589056155,7.08758421,4.627339227,7.132166813,4.477456875,4.603837708,6.972699994,2.357189199,5.687237536,7.655805104,4.051052201],[0,0,0,0,0,0,7.076349438,2.408805546,0,0,0,0,1.262193429,0,0,0,0,0,0,0,0,0,0,0,2.350033433,0,0,5.962310557,0,0,0,0,0,2.367619226,0,7.19430916,0,0,1.481358206,0,0,0,0,0,6.242462339,1.231253532,7.146418815,3.697779146,4.267898313,4.175777728,6.454590515,7.848070572,0,7.742586624,10.54114609,0,0,0,0,3.003160341,0,0,0,0,0,0,0,0,5.844275491,0,
1.419561476,0,0,3.681934901,0,0,6.636252534,0,0,0,0,1.517123172,0,0,0,0,2.159049313,0,5.532179496,2.83110867,0,0,3.185417178,0,2.719532226,6.288749972,3.074803839,6.368640084,0,3.466949588,5.907284721,5.717825408,0,0,1.214748986,0,0,0,0,3.506233059,0,5.771046951,1.634715536,0,1.354808925],[0,0,1.784498863,0,0,0,0,0,0,0,0,0,0,0,0,1.554826783,0,4.083847062,1.406082194,0,0,0,3.399737138,0,0,0,5.351310615,4.83831456,0,1.969178823,0,0,0,2.367619226,0,5.973110282,0,1.254014401,0,0,0,0,0,0,6.624994981,0,
4.02596074,6.683646032,6.598281987,3.056075924,5.470946812,6.658211483,5.566564109,5.920320184,0,4.691797695,0,0,0,2.172734535,0,0,0,0,0,0,0,0,5.739290647,0,0,0,2.328878064,1.571621765,5.621923334,0,4.446549919,0,0,0,1.586888663,2.719532226,1.554826783,0,0,0,2.159049313,1.241386551,4.621878817,2.02080583,0,5.145332406,2.335878518,0,6.202137508,4.152063608,0,3.485952495,0,0,2.917885603,2.68589141,4.656100179,0,0,0,0,0,0,0,1.377092695,0,2.381429107,0,0],[4.528027849,0,0,0,0,0,11.27474825,2.408805546,
0,2.455308789,0,2.104447385,0,1.090815163,0,0,0,3.166510337,0,1.612405897,0,2.383886536,0,0,0,2.764919656,4.22489809,0,3.36749764,0,0,0,0,0,4.123261,8.580515542,0,0,1.481358206,0,0,0,0,0,2.754273197,0,5.957962862,9.692349264,4.267898313,4.919735396,4.197003578,0,6.193080749,2.047816235,0,13.65665317,1.994606741,0,0,0,0,2.766109149,0,0,0,2.134165238,3.918795874,0,9.173959161,0,0,0,2.328878064,0,0,0,2.367619226,4.869937275,0,0,0,2.719532226,0,2.74723393,2.079226691,1.840219556,9.833857474,1.241386551,
2.303636946,4.485860075,0,0,14.14226438,3.003160341,4.150541524,9.549442283,0,3.868434131,0,4.747498523,0,0,3.417546061,0,0,0,0,0,3.924517728,3.506233059,0,1.614406279,0,0,2.50408572],[0,3.920180613,10.22177323,6.120069803,4.019469864,3.885528248,11.07881379,9.053036413,6.805259412,2.455308789,2.410489481,6.864329183,5.75880559,2.464609202,0,7.742668471,7.006861355,10.66474986,4.776242999,1.612405897,7.159220301,11.16247897,9.310062776,7.719664052,7.046005769,1.962937906,15.07231383,11.49866875,5.48997353,
9.030297144,2.957578397,3.5520836,1.144473079,10.53089601,5.818683874,12.90639527,2.513383648,8.90339786,5.055632307,6.902298152,4.829800069,4.326810316,0,3.88288323,13.77679107,2.676004571,11.51097734,14.04722138,13.9249527,10.91822696,12.4368033,14.10529712,13.10581572,11.920207,5.485285785,10.10378464,8.884603388,0,0,8.208170172,0,3.655971809,2.679289883,0,5.409711144,2.605196984,7.63473928,2.512450001,12.40524442,0,6.255064165,0,7.524334779,8.029867113,11.77625986,4.551140085,8.942469768,6.896031158,
0,4.444055644,3.909586503,8.082248174,6.462858902,5.019193565,6.658211483,4.598472787,7.928573538,10.14113656,12.32721446,9.707121629,3.776543493,11.23861009,10.90081487,3.91026138,14.12364955,12.55098721,9.078428271,12.00963584,3.902410173,7.617668006,9.823236711,10.11594834,12.29357811,3.46318473,2.65168682,5.805290094,6.803122871,2.046103514,4.227317234,7.550966038,10.36511003,10.67053762,7.71026267,2.932344535,5.075116721],[0,0,5.492166606,4.120471603,0,0,10.56215027,6.214821539,0,0,1.95520039,
2.926124712,3.764198849,0,0,1.554826783,0,2.659730269,1.406082194,0,3.416491096,5.803545321,0,0,4.120471603,0,2.439564301,10.21446067,2.661346394,1.297324055,0,2.40377094,0,7.668860402,3.942394077,11.1760031,3.14556229,1.254014401,5.203290985,3.088736519,3.342887714,2.878908183,0,0,10.90729647,2.334318467,11.23528784,8.65176068,8.894471732,6.511656246,11.18819934,12.07045642,0,11.66562412,14.97337823,0,3.315453761,0,0,5.745010823,0,1.5529849,0,0,0,2.605196984,0,2.179323699,10.8293647,2.333539385,
3.84803047,0,1.590756464,6.423117983,3.823534849,6.291064457,9.338345408,4.591353102,0,4.970459698,0,2.240129526,3.129602515,2.74723393,2.897552731,3.127952731,5.224779162,0,10.60008118,8.834968693,0,7.714209168,8.927274144,2.64689025,5.829492438,11.07595916,7.581909019,10.92167398,3.902410173,6.51597166,10.24957978,9.792578128,0,0,3.828838673,3.880683284,0,0,3.540808171,9.041403812,5.410529243,9.940230335,6.301857155,0,2.85410132],[2.607242384,0,3.725189149,1.316327062,1.666262603,0,5.911452658,
3.266140317,0,2.455308789,0,0,0,0,0,1.554826783,0,4.083847062,1.406082194,0,0,3.238606292,5.785030695,0,0,1.962937906,5.351310615,4.674679689,1.221294271,3.819620521,1.4287038,0,0,0,2.35241283,5.795596951,0,2.366007313,0,0,0,0,0,0,4.189142917,0,2.02080583,8.444208985,5.678869408,4.666202349,5.562021792,2.782901878,6.771455434,3.3791203,0,11.49023737,3.315453761,0,0,3.526859546,0,0,0,0,0,0,6.682220941,0,3.18023001,0,0,0,0,1.571621765,2.429204831,0,1.916065792,0,0,0,1.586888663,2.240129526,0,1.94753258,
1.385653692,0,10.29832866,3.199364361,4.501664819,3.111909342,0,5.679889633,4.103861162,5.880066808,2.719532226,4.401509522,0,7.298865258,1.733606582,2.408805546,0,4.113062664,4.510440908,0,0,2.479401066,0,0,0,0,3.16787499,1.614406279,2.381429107,0,2.040985264],[2.961840268,1.192413264,7.182436851,0,0,4.370515798,0,0,0,0,0,0,0,1.090815163,1.812524025,0,0,3.540808171,2.573009698,1.612405897,0,0,0,0,0,0,0,0,1.221294271,4.982411585,0,2.894869795,5.517092631,6.1646071,1.61041097,6.522135663,1.361689044,
3.2188198,3.316228807,3.323227235,3.342887714,3.777352843,3.514784765,5.466692498,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,3.526859546,0,0,0,0,3.623018727,0,0,1.121990524,0,0,0,0,0,0,0,0,2.367619226,0,0,0,0,0,0,1.94753258,7.253733135,1.195550809,0,5.607300033,0,6.411050936,4.993357104,0,0,3.526859546,0,0,0,0,4.600258688,3.032789935,0,0,0,2.750747772,6.606342866,0,0,4.057402811,3.016531724,0,0,0,1.634715536,3.656338884,0],[0,0,3.430278729,2.799346774,0,0,4.696111716,0,1.792044962,0,0,0,0,0,0,1.554826783,0,3.166510337,
0,0,2.079226691,5.567226054,3.399737138,2.168803591,3.201119623,0,6.165840811,5.731922848,0,3.819620521,0,0,0,2.711021318,0,4.725443724,0,1.254014401,0,1.322794318,1.335934953,0,0,0,7.118225095,0,4.834050577,3.697779146,4.827679842,4.358409986,2.76135907,4.616440732,5.400439335,4.704781788,0,0,0,0,0,0,0,1.5529849,0,0,0,0,0,0,3.18023001,0,0,0,2.814800039,1.571621765,5.684779374,1.167924869,1.255175933,0,0,1.377092695,0,3.605634704,0,0,0,0,2.159049313,4.423836784,3.438628157,0,0,4.286771649,2.335878518,
0,5.513892971,6.714614328,3.074803839,4.818179987,0,0,2.917885603,4.113062664,6.380668075,0,0,1.717354877,0,1.358928018,0,1.844254505,4.444055644,3.741049922,0,0,1.354808925],[1.431779586,0,0,0,0,0,0,0,0,0,3.943779694,0,1.924937051,0,0,0,5.824881237,0,1.406082194,0,0,2.383886536,3.399737138,0,2.350033433,0,0,0,0,4.842817613,0,4.956192292,0,2.711021318,0,2.212993723,0,2.986448755,0,2.460612703,1.335934953,0,1.851024161,1.567855244,0,1.885737479,0,0,0,0,0,0,0,0,0,0,0,0,1.511899039,0,0,1.5529849,0,0,
2.735603919,0,0,0,0,0,1.419561476,0,0,0,0,2.24508439,0,1.191371277,0,1.377092695,2.324239181,0,0,3.934112064,2.079226691,0,0,4.889930328,1.569736026,3.883764286,2.210938675,0,0,0,0,0,0,0,4.600258688,4.0707841,0,0,0,0,1.214748986,5.318374759,0,1.358928018,0,5.791922011,4.215048346,0,1.634715536,2.109945405,2.50408572],[0,1.192413264,0,0,0,1.569736026,0,0,0,0,0,0,0,0,0,2.7684921,0,6.382784969,2.573009698,0,0,0,2.065128811,2.168803591,0,0,6.744089636,3.350844299,0,1.969178823,0,0,0,2.367619226,0,5.075843758,
0,1.254014401,0,1.322794318,0,0,0,0,4.894120843,0,3.346859325,5.423449347,5.915538363,2.555337332,4.592240978,5.181663838,4.742717456,4.059526708,0,0,0,0,0,0,0,0,0,0,2.25507312,0,2.733293055,0,9.203861059,0,2.94488983,0,4.400587408,4.228932508,7.783314196,1.804782814,4.912947454,0,0,2.885530704,0,3.605634704,0,0,1.385653692,0,1.450539436,2.348450405,3.438628157,2.02080583,0,4.076645958,2.335878518,0,5.513892971,5.110908034,3.074803839,3.868434131,0,0,2.097168659,3.194114467,4.348406658,0,0,0,0,0,
0,0,0,0,0,0,0],[0,0,1.784498863,0,0,1.569736026,2.040985264,0,1.792044962,0,0,0,0,0,0,4.814129086,0,7.685009678,2.104447385,1.612405897,0,0,3.399737138,0,0,0,6.48374445,5.11862266,0,1.297324055,0,0,0,3.420716548,0,5.357552005,0,0,0,1.322794318,2.017487427,0,0,0,5.553883032,0,4.02596074,4.951406876,6.020745326,3.966628542,4.408114953,7.372481007,6.087681547,4.308067937,0,3.746566479,0,0,0,0,0,0,0,0,2.25507312,0,4.376707911,0,8.729236982,0,2.94488983,0,4.400587408,4.373221247,7.351210478,1.167924869,
6.27207808,2.278309285,0,2.068632354,0,4.944631639,1.554826783,0,1.385653692,0,1.450539436,3.730999452,5.335214496,2.83110867,0,5.34633784,4.103861162,0,6.886531074,6.225458174,2.573009698,5.498815294,0,0,2.917885603,2.68589141,5.397879187,0,0,0,2.308177125,0,0,1.844254505,2.068632354,0,1.634715536,0,0],[0,0,2.558261645,1.316327062,0,1.569736026,5.140284292,0,0,0,0,0,1.262193429,2.134165238,0,5.627887308,0,4.083847062,1.406082194,1.612405897,0,0,0,0,0,0,0,5.11862266,1.873071327,0,0,0,0,1.255175933,
0,5.697915317,0,1.914596325,0,0,0,0,0,0,4.189142917,0,5.957962862,3.697779146,6.29692668,2.555337332,5.157127848,5.753315082,0,6.420204441,8.51555597,0,0,0,0,0,0,0,0,0,1.529467388,0,0,0,6.611381826,0,0,0,2.328878064,4.373221247,3.823534849,1.167924869,7.154516178,1.191371277,0,0,0,1.517123172,0,0,0,0,1.450539436,0,5.469465561,3.883764286,0,3.533813815,4.408909843,0,0,4.799379421,0,5.263596571,0,0,5.078391452,4.113062664,0,0,1.214748986,1.717354877,0,0,2.184629194,0,2.068632354,5.087025329,1.634715536,
1.410544518,0],[0,0,4.923142205,0,0,2.787748346,5.668012347,0,2.56708501,0,0,0,1.262193429,1.090815163,0,5.837982345,2.495790119,8.369759748,3.827953141,0,2.897552731,5.43276212,3.780189712,3.522245428,2.350033433,0,7.984204186,5.889527292,0,2.425775589,0,1.653483243,0,4.351732608,0,7.651051691,0,3.594588248,0,1.322794318,0,0,0,0,7.739062817,1.231253532,6.436743374,8.110870074,8.345187499,5.232099142,6.356229318,8.393579734,8.392538732,6.570521936,0,5.979837894,2.801189549,0,0,3.003160341,0,1.5529849,
0,0,3.095446785,0,4.560645878,0,6.930355824,1.594645054,1.419561476,0,2.814800039,4.934790051,5.338912275,0,7.037541242,0,0,0,1.586888663,6.048255997,0,1.94753258,0,1.195550809,1.450539436,4.954831076,6.420308393,4.383889211,0,5.249332964,5.061286461,0,8.011133534,6.888130301,3.074803839,5.878311629,0,0,3.437769124,5.475028474,6.748696434,0,0,0,0,0,0,3.506233059,4.085292151,4.686067264,1.634715536,0,0],[0,0,3.969926522,0,0,0,6.697714591,2.408805546,0,0,0,0,1.262193429,0,0,0,1.731263898,2.659730269,
0,0,0,4.465781641,2.8815524,0,0,0,8.507128066,4.985265729,0,1.297324055,0,0,0,2.98819618,0,6.734093742,0,1.914596325,0,2.460612703,0,0,0,0,6.92706272,0,4.980986765,6.59706008,7.10838124,4.358409986,5.647687167,7.21002666,6.837969244,6.062439534,0,7.850584827,1.994606741,0,0,0,0,0,0,0,0,0,2.733293055,0,2.331205908,0,0,0,0,1.571621765,4.212869647,0,2.711021318,0,0,0,0,0,0,0,1.385653692,0,2.987759068,3.39914311,5.335214496,1.338596694,0,4.778998396,7.48492479,0,5.829492438,5.584357216,0,3.868434131,
0,0,2.917885603,3.866607,5.31255337,0,0,0,0,0,0,0,3.606691969,4.686067264,2.381429107,0,0],[0,0,0,0,0,0,0,0,0,0,3.267999173,0,9.497209808,0,4.561513432,0,0,0,0,0,0,0,0,0,0,0,0,0,4.856125012,4.318348466,5.740211665,0,1.144473079,2.98819618,3.735557761,0,0,0,0,5.52497401,3.1080144,0,4.361537796,0,0,5.506982492,0,0,0,1.781999348,1.959834467,0,0,0,0,0,0,7.245836901,4.750924052,0,1.385653692,0,0,0,5.409711144,2.134165238,0,3.010569242,0,1.594645054,2.121043177,0,0,0,1.674904626,1.167924869,1.255175933,
1.191371277,4.500203927,0,0,0,8.573059998,1.94753258,3.955696773,3.50113091,0,1.898600356,0,6.411050936,4.259183612,0,0,0,0,0,0,0,0,2.754273197,0,0,0,4.491209918,7.353001114,5.475028474,0,6.808785458,0,4.603837708,0,0,5.687237536,0,4.780297015],[0,1.192413264,4.361761497,0,0,0,5.262402246,2.408805546,1.792044962,0,1.28620039,0,1.262193429,0,0,4.480124818,1.731263898,7.419646466,2.104447385,1.612405897,0,4.465781641,4.329717796,2.998738351,0,0,9.192467398,4.985265729,0,2.772076473,0,0,0,4.535518061,
0,6.632003768,0,3.892431393,0,1.322794318,0,0,0,0,7.987966359,0,5.885183269,7.980122471,8.054415379,4.666202349,6.714880751,7.884439905,6.962448848,6.310520191,0,2.850235379,3.315453761,0,0,3.526859546,0,0,0,0,1.529467388,0,4.165843825,0,7.691011772,0,2.590991323,0,3.708455948,5.337986896,6.43506707,0,6.297739898,2.278309285,0,0,1.586888663,4.545126266,0,1.94753258,1.385653692,0,2.987759068,4.596479618,6.516506593,3.72600458,0,3.533813815,5.374546744,0,7.136117589,6.159261819,1.797115738,6.036192306,
0,0,3.81913209,3.194114467,4.909566239,0,0,0,0,0,0,2.62792129,5.410529243,4.996742825,0,0,0],[1.431779586,1.192413264,7.880923178,5.25768292,0,2.787748346,9.542157984,5.462819554,4.679792075,3.317392333,0,3.446387271,4.924604901,1.090815163,0,5.78825675,5.161999879,8.937702497,3.64974824,2.354798077,4.908441047,9.346046121,7.004372567,4.856588768,4.425714633,2.764919656,12.38547351,9.607591278,3.542563074,7.267359987,0,0,1.144473079,8.277485709,3.735557761,10.5845355,2.863826449,6.65424923,4.241927639,
6.769614506,3.721932779,1.640918907,0,0,10.93720469,0,9.287373505,11.17889217,11.33366338,8.647458426,10.02038587,11.53987154,11.64940898,9.985186151,0,9.531635732,6.35044447,0,0,6.412959757,0,3.655971809,1.888578717,0,3.8285856,1.430239906,6.21812878,0,10.06278604,1.594645054,3.84803047,1.458514165,6.15830744,6.046332965,9.315070092,2.24508439,8.211513698,4.428889598,0,1.377092695,2.324239181,6.792720629,4.480124818,5.545791903,4.744508356,3.127952731,6.424955845,8.41235756,10.18535347,8.179863449,
1.493074462,10.97411484,9.712624461,2.172734535,11.26391502,10.90723852,6.643999024,9.896908992,2.995800011,5.149046272,8.963938347,9.392737401,9.695379979,3.02915668,2.311215911,2.479401066,4.071271565,0,3.016531724,5.219920851,7.465312124,8.258116734,6.301857155,3.99325527,2.85410132],[0,0,6.216253721,3.31351837,1.666262603,2.787748346,8.719596731,5.833762524,3.439917863,0,0,2.926124712,3.764198849,0,0,0,0,1.871675903,1.406082194,0,2.079226691,6.265837555,0,2.168803591,5.649049992,0,0,8.718517118,
3.168216406,0,0,2.40377094,0,5.21183093,3.203757507,9.025139562,2.049532294,2.366007313,3.759667491,6.161294576,3.721932779,1.640918907,0,0,8.968666793,1.231253532,9.214980013,7.291756619,9.382984205,5.488721907,9.16303155,9.888832766,0,9.604422513,12.19448952,0,3.99325527,0,0,3.526859546,0,0,2.679289883,0,3.095446785,0,1.935406473,0,9.583325451,0,2.121043177,0,4.400587408,3.888178831,8.884143735,3.879285317,8.20474749,3.319889474,0,2.534144363,0,0,1.554826783,2.74723393,2.079226691,2.623232518,4.052930578,
3.574592237,10.30242304,6.872926631,1.493074462,8.882335744,8.045256717,1.461730735,5.325751405,9.378142081,5.343548546,9.219744746,2.995800011,2.408805546,7.869050191,8.175142711,0,0,4.28496235,2.975444667,0,0,2.184629194,8.133361856,7.299661556,8.286974483,5.564249792,5.022772646,2.040985264],[0,0,1.784498863,0,0,0,0,0,0,0,0,0,0,0,0,3.129602515,0,5.829115441,0,0,0,0,2.065128811,0,0,0,4.22489809,3.730089796,0,1.969178823,0,0,0,3.220604739,1.61041097,3.048363022,0,0,0,1.322794318,1.335934953,0,0,
0,2.754273197,0,2.83110867,2.804884553,4.267898313,1.781999348,3.273593502,4.616440732,4.434198304,3.3791203,0,3.746566479,1.994606741,0,0,0,0,0,0,0,2.25507312,0,3.918795874,1.745427173,5.626062257,0,1.419561476,0,2.328878064,3.152109798,4.650925763,0,4.69851443,0,0,0,0,3.078744666,0,0,0,0,1.450539436,1.898600356,4.370515798,3.111909342,0,3.533813815,3.716524438,0,5.513892971,4.152063608,0,3.868434131,0,0,3.81913209,3.194114467,3.95678572,0,0,0,0,0,0,1.844254505,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,1.95520039,
0,8.118541821,1.090815163,6.206805768,0,0,0,0,0,0,0,0,0,0,0,0,0,3.542563074,3.819620521,5.256446193,0,0,3.89429641,1.61041097,0,0,1.254014401,0,4.130643992,4.829800069,0,5.278343442,0,0,4.733705155,0,0,0,0,0,0,0,0,0,0,0,7.38696452,3.358854664,2.172734535,1.385653692,0,0,1.46012053,5.800045187,3.244061423,1.935406473,1.121990524,0,0,0,0,0,0,3.580737915,0,0,1.834870601,4.140691561,0,0,0,7.422423382,0,3.797347749,1.840219556,0,1.241386551,1.569736026,6.461986259,3.332623469,0,0,0,0,0,0,0,0,0,0,0,0,3.02915668,
5.478749586,3.343879368,0,6.788505178,0,1.844254505,0,0,3.768880774,0,3.37097252],[0,0,1.784498863,1.316327062,0,2.303636946,0,0,0,0,0,2.104447385,0,0,0,3.864522096,2.992869351,3.540808171,0,0,0,3.238606292,2.065128811,0,0,0,4.783910899,2.024136906,0,1.297324055,0,0,0,2.367619226,0,0,0,2.709327299,0,0,0,0,0,0,0,0,0,0,4.267898313,0,1.959834467,4.926557629,5.715519796,4.059526708,0,3.746566479,0,0,0,2.172734535,0,1.5529849,0,0,0,0,1.935406473,1.121990524,0,0,0,0,0,1.571621765,2.429204831,0,2.367619226,
0,0,0,0,3.366110529,0,1.94753258,1.385653692,0,1.450539436,2.348450405,3.438628157,2.02080583,0,3.830611616,4.408909843,0,3.605634704,5.366967571,0,2.963977331,0,0,0,0,3.417546061,1.282537517,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,2.451788443,0,0,0,0,0,0,1.95520039,0,1.924937051,0,0,4.044732979,7.974873692,0,3.64974824,0,3.416491096,6.098254231,0,0,0,1.962937906,5.757485889,0,0,0,2.13227898,0,0,1.255175933,4.123261,0,0,6.345758458,2.672729483,0,0,5.03472903,0,1.567855244,0,0,0,0,0,2.555337332,0,0,0,0,0,0,
4.636949199,0,0,3.526859546,0,0,0,0,0,0,0,0,0,0,1.419561476,0,0,0,0,1.167924869,1.255175933,1.191371277,0,10.54246637,0,6.341176101,0,3.635588574,0,0,10.83717288,0,0,6.461986259,4.389821626,1.866117748,5.061286461,0,8.91123296,11.75686132,9.875163881,4.632822139,8.017585323,6.036836768,10.63586677,6.107160206,1.774547779,0,0,0,4.841368559,0,2.184629194,4.25812051,9.985528256,7.203511989,0,1.410544518,0],[2.607242384,2.279780641,0,0,1.666262603,0,0,0,0,2.455308789,2.410489481,0,3.764198849,3.620520142,
0,0,3.361872552,0,1.406082194,2.842544351,0,0,0,0,0,0,0,0,0,0,0,4.489236399,1.774547779,4.250242561,0,4.512111935,0,2.986448755,0,3.701772154,3.54482311,3.777352843,3.340058983,5.647196877,2.754273197,2.952062239,0,0,0,0,3.650844232,0,0,0,0,0,0,1.450539436,2.712718048,0,0,0,1.888578717,0,0,0,0,1.121990524,0,0,0,0,0,0,2.429204831,0,0,0,0,0,0,0,0,4.57634937,0,0,0,7.327489844,1.569736026,5.23638729,2.210938675,0,0,0,0,0,0,0,1.733606582,0,0,0,0,0,3.15801765,1.717354877,0,3.579495955,4.227317234,3.802541477,
0,0,0,6.891718222,4.051052201],[0,0,0,0,5.609580256,0,0,0,0,0,3.267999173,0,4.547056303,5.028499229,3.093845517,0,0,0,0,0,2.897552731,0,0,0,6.854919464,0,0,0,5.689276823,6.804610833,3.479267335,3.794471647,2.211623187,0,0,0,0,2.986448755,0,0,5.498484395,0,0,0,0,3.85569963,0,0,0,2.555337332,0,0,3.499434968,2.047816235,0,0,0,0,2.233797185,0,0,0,0,1.46012053,2.25507312,1.430239906,1.935406473,2.179323699,0,4.101113517,2.590991323,3.284108206,0,0,4.650925763,0,0,2.617013534,0,0,0,0,6.897446821,8.605744063,
0,3.50113091,0,5.292751623,4.501664819,4.383889211,4.259183612,0,0,0,0,0,0,0,8.672343107,4.49516583,0,0,0,3.02915668,2.65168682,2.479401066,0,10.12313979,0,4.603837708,7.224602755,0,6.548923282,0,8.266100547],[0,1.192413264,6.01278502,4.873613724,1.666262603,0,7.577664117,4.189142917,3.439917863,0,0,0,4.15244441,0,0,6.021335104,3.899283315,7.228204647,2.573009698,0,5.311418736,7.638886473,4.329717796,2.998738351,3.201119623,3.65468791,9.826675029,8.065395484,0,5.169340701,0,2.40377094,0,6.27207808,
4.123261,8.495855027,1.361689044,4.843020605,2.672729483,4.460809457,4.021826362,0,0,3.147069949,8.935181988,0,7.551087933,9.213868199,9.291333673,5.488721907,8.290658139,9.547007911,9.835057386,10.6963653,0,7.549479764,3.693798993,0,0,4.212869647,0,0,0,0,3.623018727,0,5.980639838,0,8.475079652,0,2.94488983,0,5.13771792,4.624606221,7.853391641,1.167924869,6.733478455,2.891124637,0,0,1.586888663,6.202137508,0,5.712281331,2.897552731,0,4.928973727,7.277622004,10.2728869,6.872926631,2.210938675,8.176720638,
9.46240706,1.461730735,8.614935993,9.792637462,3.98654611,8.997755545,3.364898134,1.284976959,7.889142362,7.206908181,7.512527651,1.950591407,0,0,2.308177125,1.358928018,0,3.802541477,5.984140876,6.151840409,3.526859546,2.109945405,1.354808925],[0,3.920180613,3.725189149,7.285333305,0,1.569736026,11.27111573,0,0,6.271148941,0,0,1.262193429,0,0,6.494212166,1.731263898,7.007415012,1.406082194,0,13.12184158,5.284465404,7.004372567,9.508335009,0,10.59425698,5.185796394,7.326512203,3.698665367,0,0,5.714304486,
0,0,7.600050267,4.512111935,0,8.319941023,2.672729483,0,0,7.629603593,0,2.301374909,2.754273197,0,12.11181266,0,3.877609802,4.666202349,5.157127848,0,8.392538732,3.3791203,0,0,5.314912919,0,0,0,0,0,0,0,0,0,0,0,2.331205908,0,0,0,0,6.002620862,0,1.167924869,4.84495056,7.125561025,0,0,0,8.701375844,0,0,0,0,1.450539436,0,0,0,0,0,0,0,0,0,0,0,0,1.953661285,0,0,0,0,0,0,0,0,3.540808171,1.844254505,0,1.614406279,0,0,2.50408572],[0,1.836204539,3.969926522,5.365918206,0,2.787748346,3.750720028,0,0,3.317392333,
1.28620039,2.926124712,1.262193429,0,0,5.736755885,5.49452847,4.083847062,0,0,8.308926148,6.00654801,4.541824162,7.173493692,0,9.407821936,7.324558932,4.278349686,1.221294271,0,0,6.946234867,0,0,4.990992123,0,0,5.781795617,0,0,0,5.125085065,0,0,0,0,7.376234936,3.697779146,2.476695351,3.056075924,2.76135907,0,2.621674279,5.149046272,3.96333911,0,4.636949199,0,0,3.526859546,0,1.5529849,0,0,0,0,0,0,0,2.819792025,1.419561476,0,7.357357291,6.550010548,0,1.167924869,3.420716548,9.668140814,0,10.39108571,
1.586888663,7.365214591,1.554826783,1.94753258,0,0,9.869041819,0,1.569736026,5.34891761,4.259183612,0,4.103861162,0,6.886531074,10.42362357,8.158122222,2.963977331,5.63915138,3.466949588,8.693886794,5.287009679,7.968060061,0,2.311215911,0,3.154638024,0,3.016531724,0,7.705063709,5.715519796,0,0,0],[0,0,0,2.451788443,0,0,0,3.800230488,6.128572155,0,8.978988168,6.135595009,0,4.415419518,5.073105416,5.313234601,0,3.166510337,0,0,0,0,0,0,0,5.039316437,2.439564301,0,3.83951414,1.969178823,0,2.40377094,
2.818292015,1.255175933,0,0,0,2.366007313,0,2.808592225,2.47849835,0,1.851024161,0,2.754273197,5.372648029,2.02080583,0,0,2.555337332,0,0,0,4.059526708,0,0,0,2.987759068,5.723882117,0,1.385653692,0,0,3.000947168,2.735603919,0,0,1.745427173,3.18023001,0,4.149781155,2.998738351,0,0,7.550004155,3.084284864,3.420716548,3.121377237,0,0,0,0,2.285688951,1.94753258,2.079226691,0,1.450539436,2.690869819,3.149587113,0,0,0,0,0,0,0,0,0,0,1.953661285,0,0,0,0,0,0,0,6.126344967,0,0,0,1.614406279,0,0,0],[0,0,2.558261645,
5.466596974,0,0,0,7.118225095,0,0,0,2.104447385,0,0,0,1.554826783,0,0,0,0,2.079226691,2.383886536,0,0,2.350033433,7.245311565,3.300058915,6.539539444,1.221294271,3.819620521,0,0,0,6.322953225,2.839992687,0,0,1.914596325,0,3.088736519,0,0,0,0,0,1.231253532,0,11.10237258,3.340906893,4.798531072,1.959834467,0,0,0,0,0,0,0,0,0,0,4.042109164,0,0,1.529467388,0,11.9548966,0,0,0,0,0,5.736439364,0,0,0,1.255175933,2.278309285,0,0,0,1.517123172,0,3.258734268,4.228198043,1.195550809,5.946229733,2.348450405,3.679313849,
3.72600458,2.210938675,0,0,2.172734535,0,0,0,11.2281929,0,3.466949588,5.984021501,8.188642594,3.95678572,0,1.214748986,0,2.308177125,0,2.184629194,3.132909221,3.606691969,4.289591121,0,0,1.354808925],[0,0,3.059175851,5.691272871,0,1.569736026,2.040985264,7.574821861,0,0,0,0,1.924937051,0,0,0,0,0,1.406082194,0,2.897552731,0,0,2.168803591,0,8.140366707,0,4.985265729,2.936928025,5.740877225,0,0,0,4.141069016,1.61041097,0,1.361689044,0,1.481358206,0,1.335934953,0,0,0,0,0,0,11.30716331,2.476695351,4.175777728,
2.76135907,3.674088391,0,0,0,0,4.241111619,0,0,2.172734535,0,4.907541568,1.888578717,0,3.095446785,0,11.69951119,0,0,0,0,0,6.578446731,1.571621765,0,1.167924869,2.98819618,1.834870601,0,0,0,1.517123172,1.554826783,1.94753258,3.619450877,0,6.424955845,0,2.787748346,3.54885136,0,0,0,0,2.719532226,0,0,12.34003742,1.733606582,4.189142917,7.828006386,9.687147433,4.348406658,0,0,1.717354877,0,2.046103514,0,3.132909221,3.403903641,3.741049922,1.634715536,0,2.040985264],[1.431779586,2.618564793,9.572494082,
8.354815942,1.666262603,3.679313849,0,4.49516583,4.371867824,6.271148941,0,11.93608274,0,0,0,1.554826783,2.992869351,4.919116898,2.104447385,4.286771649,2.079226691,13.96359004,13.13382633,4.45805522,14.25761366,12.14205617,0,11.50019731,5.48997353,5.281730688,0,10.54964422,4.510440908,1.916065792,5.166217225,0,0,1.914596325,2.672729483,0,0,0,1.204003557,2.301374909,0,5.17154437,2.02080583,0,6.84743639,6.062934608,4.902157249,0,0,0,3.96333911,6.458718649,0,0,2.712718048,0,0,2.283469031,1.888578717,
1.46012053,0,2.134165238,3.918795874,0,2.331205908,0,2.121043177,1.458514165,3.177645127,8.223182989,1.674904626,0,3.89429641,5.256528169,0,4.444055644,3.172492646,10.35753767,6.966142118,3.934112064,6.911150334,1.195550809,11.21392444,3.574592237,4.226241501,4.754560657,8.514876907,9.974831857,5.947870554,10.72769658,0,0,2.573009698,9.674768755,8.704868748,6.51597166,11.89091832,0,1.774547779,7.282882644,9.458968628,3.637105643,0,2.509654215,2.184629194,5.981308477,1.377092695,3.499434968,0,5.923660085,
5.834781143],[1.431779586,1.192413264,0,4.718927108,0,4.501664819,0,7.162304506,1.792044962,0,3.943779694,0,2.377347064,2.134165238,2.590991323,0,7.543919978,7.007415012,0,0,2.897552731,4.160084164,0,0,0,0,0,0,1.873071327,4.982411585,2.13227898,0,0,4.141069016,2.35241283,0,0,2.986448755,0,0,0,0,0,1.567855244,0,1.231253532,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1.121990524,0,0,0,2.168803591,0,1.571621765,1.674904626,1.167924869,0,1.191371277,0,0,2.324239181,0,4.044732979,0,0,0,0,1.241386551,5.705455517,
3.111909342,0,5.679889633,0,0,0,0,1.797115738,3.485952495,0,0,0,0,0,2.405446283,0,0,0,4.613188524,0,1.844254505,2.068632354,4.434198304,0,2.109945405,1.354808925],[0,0,5.411588681,2.451788443,1.666262603,3.679313849,0,9.005430964,3.068526802,0,4.191103607,2.104447385,3.231372253,2.134165238,0,0,6.898806526,3.837728571,0,0,0,0,0,0,5.762313958,0,0,0,0,5.529493161,2.603155617,0,0,5.746973142,3.494023898,0,0,4.533604761,1.481358206,0,2.017487427,3.244061423,0,0,0,0,0,0,2.476695351,0,0,0,0,0,0,0,0,0,2.233797185,
0,0,0,0,0,2.735603919,2.605196984,0,0,0,0,0,0,0,3.152109798,2.921997488,0,1.255175933,1.834870601,0,0,1.586888663,0,8.630626934,0,1.385653692,0,0,1.241386551,2.787748346,0,0,4.911716941,0,0,0,0,2.573009698,8.093332221,2.995800011,1.953661285,0,0,9.072883619,0,1.214748986,3.343879368,0,6.867969916,0,0,3.784457154,7.054835054,0,2.578968745,0],[0,1.836204539,6.916529204,5.560705844,0,1.569736026,0,2.408805546,1.792044962,3.317392333,1.95520039,9.176317176,0,1.090815163,0,0,1.731263898,3.540808171,0,
4.12605646,0,11.27729476,9.962628962,0,11.68474144,11.33517187,0,9.624509553,3.36749764,3.819620521,1.4287038,8.548400241,3.417546061,0,2.35241283,0,0,0,0,0,0,0,0,0,0,3.558472286,0,0,2.476695351,3.056075924,2.76135907,0,0,0,3.052984456,4.691797695,0,0,1.511899039,0,0,1.5529849,2.679289883,0,1.529467388,0,1.935406473,0,3.18023001,0,2.94488983,0,4.256154097,5.957542834,0,0,3.220604739,3.790456203,0,4.334091189,1.586888663,8.642088679,5.570208734,0,3.797347749,0,8.857167078,2.967405176,1.569736026,2.83110867,
5.839489603,7.343191592,3.716524438,8.802884779,0,0,0,7.133972209,6.323185711,3.032789935,9.919180826,0,0,5.36157935,7.486517574,2.975444667,0,1.358928018,0,2.62792129,1.377092695,2.357189199,0,4.693521631,2.85410132],[0,0,0,3.691813713,0,0,0,4.189142917,1.792044962,3.317392333,0,0,0,0,0,2.7684921,6.440401912,7.0658601,1.406082194,0,0,2.383886536,8.199641089,2.168803591,0,4.412094224,7.511087906,7.555483079,1.221294271,0,0,0,0,0,5.166217225,3.048363022,0,2.366007313,2.196679237,0,0,4.165843825,0,
2.301374909,0,0,2.02080583,0,5.042796229,1.781999348,2.76135907,0,5.85052519,0,0,2.850235379,0,0,0,2.172734535,0,4.042109164,0,0,1.529467388,0,0,0,0,0,0,0,0,3.681934901,0,0,5.630629399,0,0,5.909423458,1.586888663,0,0,0,6.201254421,0,0,0,0,2.482114093,0,3.533813815,3.185417178,2.172734535,0,8.073907914,0,0,0,0,0,2.68589141,4.909566239,0,1.864734062,0,3.154638024,0,3.924517728,0,0,0,0,4.136170705,0],[1.431779586,0,0,6.209947215,0,2.303636946,0,7.401762269,6.178487015,3.853288573,0,0,0,1.704821959,1.812524025,
4.480124818,6.621287,5.759994393,2.104447385,0,6.747543328,4.160084164,8.215185177,0,0,0,5.757485889,8.251155639,2.32039045,0,0,0,0,1.916065792,5.246445546,0,0,2.366007313,2.196679237,1.322794318,0,5.438721383,0,0,4.584271389,0,0,0,3.340906893,6.259456223,4.592240978,0,6.193080749,3.3791203,3.052984456,3.746566479,0,2.987759068,0,2.172734535,1.385653692,5.50739594,1.888578717,1.46012053,2.735603919,0,0,0,0,0,0,0,1.590756464,7.05690755,0,0,4.773589639,3.121377237,0,6.473452899,1.586888663,0,1.554826783,
3.635588574,6.293137868,0,0,0,3.149587113,1.338596694,0,3.830611616,0,5.963555245,0,7.399044894,8.778467531,0,0,0,5.984021501,5.070762648,8.335541755,0,2.311215911,0,2.308177125,2.509654215,4.227317234,2.62792129,8.204227363,1.614406279,0,2.578968745,0],[0,0,0,0,0,0,0,0,0,3.853288573,0,0,0,1.704821959,0,3.418179486,1.731263898,0,0,0,6.033778214,3.771698401,0,2.168803591,2.350033433,0,2.439564301,0,0,1.297324055,0,0,0,3.420716548,0,0,0,0,0,1.322794318,2.017487427,2.388819979,0,0,0,0,2.83110867,4.24519686,
2.476695351,1.781999348,8.95192476,4.220876189,6.701726243,0,0,0,4.636949199,0,4.142957954,4.675895148,0,1.5529849,0,0,0,0,0,0,3.18023001,0,0,0,0,1.571621765,0,0,3.753033567,1.191371277,0,2.068632354,1.586888663,1.517123172,3.129602515,1.94753258,0,0,2.159049313,1.241386551,2.787748346,2.482114093,0,3.533813815,0,2.172734535,5.829492438,3.850281247,2.573009698,4.170470135,0,0,0,0,0,0,0,0,0,0,0,0,0,2.357189199,0,0,0],[0,0,0,2.799346774,0,1.569736026,2.040985264,6.214821539,8.661567508,0,1.28620039,
2.104447385,0,0,1.812524025,1.554826783,0,0,0,0,0,0,2.065128811,0,0,0,0,0,1.221294271,0,1.4287038,2.40377094,1.144473079,2.367619226,0,0,0,1.914596325,1.481358206,2.001082698,4.021826362,0,1.851024161,0,0,1.885737479,0,0,0,0,0,0,0,4.308067937,0,0,0,2.159049313,1.511899039,0,0,2.766109149,0,0,3.095446785,0,0,1.121990524,0,0,2.121043177,0,2.814800039,7.495752552,0,0,1.916065792,5.99777011,0,1.377092695,6.602771375,0,0,1.94753258,6.968016407,1.195550809,0,1.898600356,0,0,3.332623469,0,0,10.08142504,
0,0,0,0,0,3.266140317,0,0,0,0,5.196414538,0,0,4.517857264,0,0,0,1.614406279,0,2.109945405,0],[0,0,0,5.605554037,0,0,0,7.699722019,5.786261579,0,0,5.456290025,0,1.090815163,0,0,0,6.018584933,0,0,0,3.238606292,0,0,0,0,0,0,1.873071327,1.297324055,0,1.653483243,0,0,1.61041097,2.212993723,0,0,0,3.088736519,0,4.471606333,2.29611755,2.301374909,3.643192729,1.885737479,0,0,3.340906893,0,0,0,0,0,0,0,0,0,3.358854664,0,2.079226691,1.5529849,0,0,0,1.430239906,0,0,0,0,1.419561476,0,0,6.283978741,0,0,0,1.834870601,
0,4.895011416,3.703106027,0,1.554826783,1.94753258,4.559531286,0,0,1.241386551,1.569736026,0,0,0,0,4.0694851,3.605634704,0,0,0,0,3.032789935,0,0,0,0,1.214748986,0,3.684561532,3.756976488,0,0,6.420626178,3.947945664,0,1.410544518,0],[0,0,0,9.404294507,0,0,0,7.246617758,8.713280691,0,1.95520039,0,1.262193429,1.704821959,4.399205452,0,0,5.04066863,0,0,0,0,0,0,2.350033433,0,0,0,1.221294271,0,0,4.001933649,0,1.916065792,2.839992687,0,0,3.594588248,2.196679237,1.322794318,3.1080144,0,1.851024161,2.301374909,
0,1.885737479,0,0,0,0,1.959834467,0,0,0,5.892249192,0,0,4.326546321,4.417540006,0,0,2.283469031,2.679289883,2.644765483,4.776898533,2.959707294,0,0,0,0,3.466007268,0,0,8.402065998,0,2.24508439,2.711021318,4.245781516,0,6.308789707,5.557415738,0,2.285688951,4.181329765,7.191417465,0,0,1.898600356,4.065919631,3.54885136,0,4.286771649,0,7.279712389,0,0,0,0,0,0,0,0,0,1.950591407,4.630991991,0,0,7.284750801,0,1.844254505,5.830624043,2.845102004,0,6.419153128,2.50408572],[0,0,0,2.451788443,0,0,0,6.821059191,
6.836687811,2.455308789,1.95520039,0,1.262193429,0,2.590991323,0,0,5.353803769,0,0,0,3.238606292,0,0,0,0,0,0,1.221294271,1.297324055,0,2.894869795,0,3.753033567,1.61041097,0,0,1.914596325,0,1.322794318,0,0,1.204003557,1.567855244,0,2.676004571,0,0,0,0,1.959834467,0,2.621674279,0,0,0,0,1.450539436,3.358854664,0,1.385653692,1.5529849,0,0,2.25507312,1.430239906,0,0,0,0,0,1.458514165,0,6.246991173,0,0,0,0,0,5.564557384,2.324239181,0,0,3.258734268,5.055632307,1.195550809,0,3.39914311,0,2.482114093,0,0,
0,6.003554897,0,0,0,0,0,0,0,0,1.774547779,1.282537517,2.65168682,0,0,4.41577813,0,0,0,0,0,0,1.354808925],[0,1.836204539,0,6.979411351,1.666262603,0,7.320832174,13.47752713,6.955971935,2.455308789,0,4.378648964,1.924937051,0,0,3.658543633,1.731263898,3.540808171,0,0,5.626062257,3.771698401,0,0,0,3.953521681,0,3.730089796,1.221294271,1.297324055,0,0,0,3.89429641,1.61041097,0,0,0,0,0,0,0,0,0,0,0,4.670434283,5.206648839,3.340906893,2.555337332,8.934986157,4.220876189,0,2.861874491,0,2.850235379,3.315453761,
0,0,0,0,0,1.888578717,1.46012053,1.529467388,0,8.884937958,1.745427173,4.654982428,0,2.590991323,2.168803591,0,2.305904344,0,1.167924869,4.773589639,1.834870601,0,0,0,2.240129526,7.662137036,0,5.672425342,0,6.171070535,4.118615362,3.438628157,3.72600458,4.389821626,3.533813815,0,3.288643503,6.405973351,4.152063608,3.446387271,3.485952495,5.995274152,1.284976959,4.120471603,0,0,1.282537517,2.926952007,3.880683284,0,1.358928018,0,7.240877818,0,3.209051333,1.634715536,10.84429719,0],[0,0,3.059175851,
1.316327062,0,0,0,2.408805546,0,2.455308789,1.95520039,0,0,1.704821959,0,0,1.731263898,3.166510337,2.104447385,0,8.035020769,4.160084164,2.065128811,6.347303882,2.350033433,2.764919656,0,6.27960346,1.221294271,0,0,0,0,0,1.61041097,0,0,0,0,0,0,2.388819979,0,0,2.754273197,0,4.02596074,0,2.476695351,2.555337332,0,0,3.499434968,0,0,0,0,0,0,3.003160341,0,2.283469031,0,0,0,0,0,0,0,0,0,0,0,0,1.674904626,0,5.986713889,2.617013534,0,7.384863039,0,5.513892971,0,0,0,0,7.431097422,1.898600356,0,3.346859325,0,
0,0,0,3.605634704,8.09176372,0,0,1.733606582,0,6.056881974,0,0,0,0,0,0,0,0,1.844254505,3.16787499,5.087025329,0,0,2.040985264],[2.961840268,1.192413264,3.430278729,9.853300258,0,0,0,8.302205581,4.5340297,0,2.410489481,0,0,0,2.590991323,0,2.992869351,0,0,0,0,0,5.510518515,0,0,0,0,4.674679689,1.221294271,6.418663992,0,6.367110049,1.144473079,4.022952592,3.494023898,0,0,2.709327299,0,0,2.017487427,0,0,2.301374909,0,1.885737479,0,0,0,4.358409986,4.408114953,0,2.621674279,2.861874491,0,0,1.994606741,2.159049313,
0,8.444470042,0,0,0,1.46012053,4.168411949,0,0,0,0,0,0,2.642645028,0,1.571621765,1.674904626,0,0,2.278309285,0,7.478294727,4.250663922,0,2.285688951,4.739539538,7.466027109,3.127952731,7.646067294,0,0,1.338596694,2.688101136,2.653290576,0,4.675895148,0,0,5.585854981,0,0,4.584271389,2.917885603,9.788150887,9.154836494,4.066891048,3.15801765,0,8.754319795,3.756976488,0,4.603837708,2.068632354,9.59270747,0,3.99325527,1.354808925],[2.136055426,0,0,8.845541465,0,0,0,5.720391696,1.792044962,0,1.95520039,
0,0,0,0,0,2.992869351,0,0,0,0,0,2.8815524,0,0,0,0,4.030108559,1.221294271,4.318348466,0,4.741524853,0,1.255175933,2.35241283,0,0,0,0,0,0,1.640918907,0,2.301374909,0,0,0,0,3.340906893,1.781999348,0,0,4.041235755,0,0,0,0,0,1.511899039,6.910471793,1.385653692,0,0,1.46012053,3.095446785,0,0,0,0,0,0,2.642645028,0,0,0,0,0,0,0,5.238068927,2.809830944,1.517123172,0,4.57634937,4.828801899,0,4.928973727,0,0,0,1.493074462,1.866117748,0,2.172734535,0,0,0,0,0,0,4.582003125,5.717825408,7.371984904,3.02915668,2.65168682,
0,6.172852405,2.046103514,0,2.62792129,0,4.797226964,0,2.109945405,0]];this._cols="100365 100403 100476 100489 100618 100636 100704 100716 100722 100749 100759 100782 100798 100855 100857 100889 102020 102025 102027 102037 102105 102106 102132 102133 102158 102174 102184 102209 102421 200069 200079 200108 200127 200134 200140 200154 200158 200160 200161 200165 200167 200169 200170 200172 200196 200235 200244 200314 200327 200328 200330 200331 200347 200365 200367 200381 200392 400555 401017 401201 401593 401596 401600 401601 401605 401609 401704 401705 401727 401728 401732 401736 401739 401740 401754 401757 401760 401764 401796 401856 401869 401884 600620 600627 600646 600654 600683 600710 600761 600763 600765 600776 600782 600789 600803 600807 600813 600819 600901 600909 600917 600967 600970 600984 601007 601017 601021 601036 601045 601046 601053 601160 601186 601208 602054".split(" ");
this._observationType="Control Control Case Control Control Case Case Case Control Case Case Control Control Case Control Case Control Control Case Control Case Case Control Control Case Case Case Control Control Case Case Case Control Case Case Case Control Control Control Control Control Control Control Control Case Control Case Case Case Case Case Case Case Case Case Case Case Control Control Control Control Case Control Case Case Case Case Case Case Control Control Control Case Case Case Case Case Control Control Case Case Case Case Control Case Control Case Case Case Control Control Case Case Control Case Case Case Case Control Control Control Control Case Case Control Control Control Case Case Case Case Case Control Case Case".split(" ");
this._ageRange="12 - 18;12 - 18;6 - 12;18 - 24;12 - 18;24 - 60;12 - 18;18 - 24;18 - 24;12 - 18;24 - 60;24 - 60;24 - 60;18 - 24;24 - 60;6 - 12;12 - 18;6 - 12;6 - 12;18 - 24;0 - 6;6 - 12;6 - 12;0 - 6;18 - 24;6 - 12;0 - 6;0 - 6;18 - 24;24 - 60;24 - 60;6 - 12;24 - 60;24 - 60;12 - 18;6 - 12;12 - 18;12 - 18;12 - 18;18 - 24;24 - 60;6 - 12;24 - 60;12 - 18;6 - 12;24 - 60;6 - 12;6 - 12;6 - 12;6 - 12;0 - 6;6 - 12;6 - 12;6 - 12;6 - 12;0 - 6;0 - 6;24 - 60;24 - 60;6 - 12;24 - 60;6 - 12;6 - 12;24 - 60;24 - 60;24 - 60;0 - 6;24 - 60;0 - 6;24 - 60;18 - 24;24 - 60;6 - 12;6 - 12;24 - 60;24 - 60;6 - 12;6 - 12;24 - 60;12 - 18;18 - 24;0 - 6;24 - 60;24 - 60;24 - 60;24 - 60;6 - 12;24 - 60;24 - 60;24 - 60;24 - 60;18 - 24;6 - 12;24 - 60;0 - 6;6 - 12;12 - 18;18 - 24;18 - 24;18 - 24;6 - 12;6 - 12;12 - 18;24 - 60;24 - 60;12 - 18;18 - 24;24 - 60;6 - 12;12 - 18;12 - 18;24 - 60;24 - 60;24 - 60;18 - 24".split(";");
this._country="Gambia Gambia Gambia Gambia Gambia Gambia Gambia Gambia Gambia Gambia Gambia Gambia Gambia Gambia Gambia Gambia Gambia Gambia Gambia Gambia Gambia Gambia Gambia Gambia Gambia Gambia Gambia Gambia Gambia Mali Mali Mali Mali Mali Mali Mali Mali Mali Mali Mali Mali Mali Mali Mali Mali Mali Mali Mali Mali Mali Mali Mali Mali Mali Mali Mali Mali Kenya Kenya Kenya Kenya Kenya Kenya Kenya Kenya Kenya Kenya Kenya Kenya Kenya Kenya Kenya Kenya Kenya Kenya Kenya Kenya Kenya Kenya Kenya Kenya Kenya Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh Bangladesh".split(" ");
this._selectedRows=this._rows="316 319 327 396 397 411 440 2552 3384 5052 7349 10433 11630 12245 12817 13083 13536 13604 13661 13803 13871 13930 14782 15438 15597 16252 16382 17138 17411 19129 19270 20986 21611 21695 21761 22185 22345 22439 22475 23063 23209 23249 23294 23652 24034 24342 25124 25350 26067 26436 27295 27589 29214 29323 30331 31069 36412 41738 41965 43072 43449 44327 49450 55106 58381 58640 59842 62910 62990 62991 63503 63551 64795 64796 64986 64988 66023 70246 71135 71612 71624 71660 71687 71691 74643 75427 80484 80563 80645 83740 89655 91091 92355 92969 100517 102968 106895 108037 110457 121102 123236 134492 137811 142181 142560 153986 154352 154508 162189 162210 162397 170809 172372 182738 196401".split(" ");
this._selectedRowsRanges=this._rows.map(function(a,b){return[b,1]});var a=this,b=[];this._cols.forEach(function(c,d){var e=new epiviz.measurements.Measurement(c,a._cols[d],epiviz.measurements.Measurement.Type.FEATURE,"metagenomics","metagenomics",a.id(),null,"heatmap",{observationType:a._observationType[d],ageRange:a._ageRange[d],country:a._country[d]},0,15,["colLabel","bacteria","ancestors","lineage"].concat(epiviz.data.MetagenomicsDataProvider.LEVEL_NAMES));b.push(e)});this._measurements=b;var e=
{};this._cols.forEach(function(a,b){e[a]=b});this._colsIndices=e;var c={};this._rows.forEach(function(a,b){c[a]=b});this._rowIndices=c;this._hierarchy=null;this._hierarchyPathsMap={};this._ancestryMap={};this._taxonomyMap={};this._selectedPaths=[];this._selectedAncestry=[];this._selectedTaxonomy={};var d=epiviz.data.MetagenomicsDataProvider.LEVEL_NAMES;this._nodeMap={};this._nodeNameMap={};this._nodeRangeMap={};this._maxDepth=5;this._lastRootId=null;d3.json("tree.json",function(b,c){a._hierarchy=
c;epiviz.ui.charts.tree.Node.dfs(c,function(b){a._nodeMap[b.id]=b;a._nodeNameMap[b.name]=b});epiviz.ui.charts.tree.Node.dfs(c,function(b){b.depth=b.globalDepth;b.taxonomy=d[b.globalDepth];if(b.parentId){var c=a._nodeMap[b.parentId],e=b.id,f="",n={};for(n[d[b.globalDepth]]=b.name;c;)e+=","+c.id,f+=","+c.name,n[d[c.globalDepth]]=c.name,c=a._nodeMap[c.parentId];a._hierarchyPathsMap[b.name]=e;a._taxonomyMap[b.name]=n;0<f.length&&(f=f.substring(1));a._ancestryMap[b.name]=f}else a._hierarchyPathsMap[b.name]=
b.id,a._ancestryMap[b.name]=""});d.forEach(function(b){a._selectedTaxonomy[b]=[]});a._selectedRows.forEach(function(b,c){a._selectedPaths.push(a._hierarchyPathsMap[b]);a._selectedAncestry.push(a._ancestryMap[b]);d.forEach(function(c){a._selectedTaxonomy[c].push(a._taxonomyMap[b][c]||"<NA>")})});a._updateOrder();a._updateSelection()})};epiviz.data.MetagenomicsDataProvider.prototype=epiviz.utils.mapCopy(epiviz.data.DataProvider.prototype);epiviz.data.MetagenomicsDataProvider.constructor=epiviz.data.MetagenomicsDataProvider;
epiviz.data.MetagenomicsDataProvider.LEVEL_NAMES="Kingdom Phylum Class Order Family Genus Species OTU".split(" ");
epiviz.data.MetagenomicsDataProvider.prototype.getData=function(a,b){var e=this,c=a.id(),d=a.get("action"),f=a.get("seqName"),n=parseInt(a.get("start")),h=parseInt(a.get("end"));a.get("datasource");var g=a.get("measurement"),m=epiviz.data.MetagenomicsDataProvider.LEVEL_NAMES,p,r;"metagenomics"!=f||isNaN(n)||isNaN(h)||this._selectedRowsRanges.forEach(function(a,b){a[0]<=h&&a[0]+a[1]>n&&(void 0==p&&(p=b),r=b)});switch(d){case epiviz.data.Request.Action.GET_ROWS:var t;if("metagenomics"!=f){t={globalStartIndex:null,
values:{id:[],start:[],end:[],metadata:{colLabel:[],bacteria:[],ancestors:[],lineage:[]}}};m.forEach(function(a){t.values.metadata[a]=[]});b(epiviz.data.Response.fromRawObject({data:t,requestId:c}));break}t={globalStartIndex:n,values:{id:epiviz.utils.range(r-p+1,n),start:e._selectedRowsRanges.map(function(a){return a[0]}).slice(p,r+1),end:e._selectedRowsRanges.map(function(a){return a[0]+a[1]-1}).slice(p,r+1),metadata:{colLabel:this._selectedRows.slice(p,r+1),bacteria:this._selectedRows.slice(p,r+
1),ancestors:this._selectedAncestry.slice(p,r+1),lineage:this._selectedPaths.slice(p,r+1)}}};m.forEach(function(a){t.values.metadata[a]=e._selectedTaxonomy[a].slice(p,r+1).map(function(a){return 15>=a.length?a:a.substr(0,12)+"..."})});b(epiviz.data.Response.fromRawObject({data:t,requestId:c}));break;case epiviz.data.Request.Action.GET_VALUES:var l=this._colsIndices[g];if("metagenomics"!=f||void 0==l){b(epiviz.data.Response.fromRawObject({data:{values:[]},requestId:c}));break}var q=this._selectedValues.map(function(a,
b){return a[l]});b(epiviz.data.Response.fromRawObject({data:{globalStartIndex:n,values:q.slice(p,r+1)},requestId:c}));break;case epiviz.data.Request.Action.GET_MEASUREMENTS:b(epiviz.data.Response.fromRawObject({requestId:a.id(),data:{id:this._cols,name:this._cols,type:this._measurements.map(function(a){return a.type()}),datasourceId:this._measurements.map(function(a){return a.datasourceId()}),datasourceGroup:this._measurements.map(function(a){return a.datasourceGroup()}),defaultChartType:this._measurements.map(function(a){return a.defaultChartType()}),
annotation:this._measurements.map(function(a){return a.annotation()}),minValue:this._measurements.map(function(a){return a.minValue()}),maxValue:this._measurements.map(function(a){return a.maxValue()}),metadata:this._measurements.map(function(a){return a.metadata()})}}));break;case epiviz.data.Request.Action.GET_SEQINFOS:b(epiviz.data.Response.fromRawObject({requestId:a.id(),data:[["metagenomics",0,this._rows.length]]}));break;case epiviz.data.Request.Action.GET_HIERARCHY:a.get("datasourceGroup");
this._lastRootId=q=a.get("nodeId")||this._hierarchy.id;var w=this._nodeMap[q],u=w.parentId?this._nodeMap[w.parentId]:w,q=epiviz.ui.charts.tree.Node.filter(u,function(a){return(a.globalDepth!=w.globalDepth||a==w)&&a.globalDepth-u.globalDepth<e._maxDepth});b(epiviz.data.Response.fromRawObject({requestId:a.id(),data:q}));break;case epiviz.data.Request.Action.PROPAGATE_HIERARCHY_CHANGES:a.get("datasourceGroup");c=a.get("selection");d=a.get("order");if(!c&&!d)break;if(c)for(q in c)c.hasOwnProperty(q)&&
q in this._nodeMap&&(this._nodeMap[q].selectionType=c[q]);if(d)for(q in d)d.hasOwnProperty(q)&&q in this._nodeMap&&(this._nodeMap[q].order=d[q]);this._updateOrder();this._updateSelection();w=this._nodeMap[this._lastRootId];u=w.parentId?this._nodeMap[w.parentId]:w;q=epiviz.ui.charts.tree.Node.filter(u,function(a){return(a.globalDepth!=w.globalDepth||a==w)&&a.globalDepth-u.globalDepth<e._maxDepth});b(epiviz.data.Response.fromRawObject({requestId:a.id(),data:q}));break;default:epiviz.data.DataProvider.prototype.getData.call(this,
a,b)}};epiviz.data.MetagenomicsDataProvider.prototype._updateOrder=function(){epiviz.ui.charts.tree.Node.dfs(this._hierarchy,function(a){a.nchildren&&a.children.sort(function(a,e){return a.order-e.order})})};
epiviz.data.MetagenomicsDataProvider.prototype._updateSelection=function(){var a=this._hierarchy,b=this._getNodeSelection(a),e=this,c=epiviz.data.MetagenomicsDataProvider.LEVEL_NAMES;this._nodeRangeMap={};var d={};epiviz.ui.charts.tree.Node.bfs(a,function(a){var b=d[a.globalDepth]||0;d[a.globalDepth]=b+a.nleaves;e._nodeRangeMap[a.name]=b});this._selectedRows=b.rows;this._selectedValues=b.values;this._selectedPaths=[];this._selectedAncestry=[];this._selectedRowsRanges=[];this._selectedTaxonomy={};
c.forEach(function(a){e._selectedTaxonomy[a]=[]});this._selectedRows.forEach(function(a){e._selectedPaths.push(e._hierarchyPathsMap[a]);e._selectedAncestry.push(e._ancestryMap[a]);c.forEach(function(b){e._selectedTaxonomy[b].push(e._taxonomyMap[a][b]||"<NA>")});e._selectedRowsRanges.push([e._nodeRangeMap[a],e._nodeNameMap[a].nleaves])})};
epiviz.data.MetagenomicsDataProvider.prototype._getNodeSelection=function(a){var b=epiviz.ui.charts.tree.NodeSelectionType;if(a.selectionType==b.NONE)return{rows:[],values:[]};if(!a.nchildren)return{rows:[a.name],values:[this._values[this._rowIndices[a.name]]]};var e=this,c={rows:[],values:[]};if(a.selectionType==b.LEAVES)return a.children.forEach(function(a,b){var d=e._getNodeSelection(a);c.rows=c.rows.concat(d.rows);c.values=c.values.concat(d.values)}),c;if(a.selectionType==b.NODE){c.rows=[a.name];
var d=[];a.children.forEach(function(a,b){var c=e._getNodeSelection(a);d=d.concat(c.values)});c.values=[d.reduce(function(a,b){for(var c=[],d=0;d<e._cols.length;++d)c.push(a[d]+b[d]);return c}).map(function(a){return a/d.length})];return c}};
epiviz.data.EpivizApiDataProvider=function(a,b,e,c,d){epiviz.data.DataProvider.call(this,a);this._serverEndpoint=b;this._measurementAnnotations=e;this._selection={};this._order={};this._selectedLevels=d||{6:epiviz.ui.charts.tree.NodeSelectionType.NODE,7:epiviz.ui.charts.tree.NodeSelectionType.NODE};this._lastRoot="";this._maxDepth=c||2};epiviz.data.EpivizApiDataProvider.prototype=epiviz.utils.mapCopy(epiviz.data.DataProvider.prototype);epiviz.data.EpivizApiDataProvider.constructor=epiviz.data.EpivizApiDataProvider;
epiviz.data.EpivizApiDataProvider.REQUEST_MAPPING={getRows:"rows",getValues:"values",getMeasurements:"measurements",getSeqInfos:"partitions",getHierarchy:"hierarchy"};epiviz.data.EpivizApiDataProvider.prototype.getData=function(a,b){if(!a.isEmpty()){var e=this,c=e._adaptRequest(a);this._send(c,function(c){b(e._adaptResponse(a,c))})}};
epiviz.data.EpivizApiDataProvider.prototype._send=function(a,b){var e=$.ajax({type:"post",url:this._serverEndpoint,data:a,dataType:"json",async:!0,cache:!1,processData:!0});e.done(function(a,d,e){b(a)});e.fail(function(a,b,e){console.error("The following error occured: "+b,e)});e.always(function(){})};
epiviz.data.EpivizApiDataProvider.prototype._adaptRequest=function(a){switch(a.get("action")){case epiviz.data.Request.Action.GET_MEASUREMENTS:var b=a.get("datasourceGroup")||this._id;return new epiviz.data.EpivizApiDataProvider.Request(a.id(),"measurements",{datasource:b,annotation:JSON.stringify(this._measurementAnnotations)});case epiviz.data.Request.Action.GET_SEQINFOS:return b=a.get("datasourceGroup")||this._id,new epiviz.data.EpivizApiDataProvider.Request(a.id(),"partitions",{datasource:b});
case epiviz.data.Request.Action.GET_ROWS:var e=a.get("start"),c=a.get("end"),d=a.get("seqName"),b=a.get("datasourceGroup")||this._id;"[NA]"==d&&(d="");return new epiviz.data.EpivizApiDataProvider.Request(a.id(),"rows",{datasource:b,start:e,end:c,partition:JSON.stringify(d),selection:JSON.stringify(this._selection),order:JSON.stringify(this._order),selectedLevels:JSON.stringify(this._selectedLevels)});case epiviz.data.Request.Action.GET_VALUES:var e=a.get("start"),c=a.get("end"),d=a.get("seqName"),
f=a.get("measurement"),b=a.get("datasourceGroup")||this._id;"[NA]"==d&&(d="");return new epiviz.data.EpivizApiDataProvider.Request(a.id(),"values",{datasource:b,start:e,end:c,partition:JSON.stringify(d),measurement:JSON.stringify(f),selection:JSON.stringify(this._selection),order:JSON.stringify(this._order),selectedLevels:JSON.stringify(this._selectedLevels)});case epiviz.data.Request.Action.GET_COMBINED:return e=a.get("start"),c=a.get("end"),d=a.get("seqName"),f=a.get("measurements")[this._id],b=
a.get("datasourceGroup")||this._id,"[NA]"==d&&(d=""),new epiviz.data.EpivizApiDataProvider.Request(a.id(),"combined",{datasource:b,start:e,end:c,partition:JSON.stringify(d),measurements:JSON.stringify(f),selection:JSON.stringify(this._selection),order:JSON.stringify(this._order),selectedLevels:JSON.stringify(this._selectedLevels)});case epiviz.data.Request.Action.GET_HIERARCHY:return e=a.get("nodeId")||"",b=a.get("datasourceGroup")||this._id,this._lastRoot=e,new epiviz.data.EpivizApiDataProvider.Request(a.id(),
"hierarchy",{datasource:b,depth:this._maxDepth,nodeId:JSON.stringify(e),selection:JSON.stringify(this._selection),order:JSON.stringify(this._order),selectedLevels:JSON.stringify(this._selectedLevels)});case epiviz.data.Request.Action.PROPAGATE_HIERARCHY_CHANGES:var b=a.get("datasourceGroup")||this._id,c=a.get("order"),d=a.get("selection"),n=a.get("selectedLevels");if(n){var h=this,g=[];$.each(this._selection,function(a,b){var c=h._calcNodeDepth(a),d=n[c],c=h._selectedLevels[c];void 0!=d&&d!=c&&g.push(a)});
g.forEach(function(a){delete h._selection[a]})}if(d)for(e in d)d.hasOwnProperty(e)&&(f=n[h._calcNodeDepth(e)],void 0==f&&(f=epiviz.ui.charts.tree.NodeSelectionType.LEAVES),d[e]==f?delete this._selection[e]:this._selection[e]=d[e]);if(c)for(e in c)c.hasOwnProperty(e)&&(this._order[e]=c[e]);n&&0<Object.keys(n).length&&(this._selectedLevels=n);return new epiviz.data.EpivizApiDataProvider.Request(a.id(),"hierarchy",{datasource:b,depth:this._maxDepth,nodeId:JSON.stringify(this._lastRoot),selection:JSON.stringify(this._selection),
order:JSON.stringify(this._order),selectedLevels:JSON.stringify(this._selectedLevels)});case epiviz.data.Request.Action.SEARCH:return b=a.get("datasourceGroup")||this._id,e=a.get("maxResults"),c=a.get("q"),new epiviz.data.EpivizApiDataProvider.Request(a.id(),"search",{datasource:b,maxResults:e,q:c});case epiviz.data.Request.Action.GET_PCA:return f=a.get("measurements")[this._id],b=a.get("datasourceGroup")||this._id,new epiviz.data.EpivizApiDataProvider.Request(a.id(),"pca",{datasource:b,measurements:JSON.stringify(f),
selectedLevels:JSON.stringify(this._selectedLevels)});case epiviz.data.Request.Action.GET_DIVERSITY:return f=a.get("measurements")[this._id],b=a.get("datasourceGroup")||this._id,new epiviz.data.EpivizApiDataProvider.Request(a.id(),"diversity",{datasource:b,measurements:JSON.stringify(f),selectedLevels:JSON.stringify(this._selectedLevels)})}};
epiviz.data.EpivizApiDataProvider.prototype._adaptResponse=function(a,b){var e=b.result;switch(a.get("action")){case epiviz.data.Request.Action.GET_SEQINFOS:e=e.map(function(a){return null==a[0]?["[NA]"].concat(a.slice(1)):a});break;case epiviz.data.Request.Action.GET_ROWS:e.values.id=e.values.index;delete e.values.index;e.values.end&&(e.values.end=e.values.end.map(function(a){return a-1}));break;case epiviz.data.Request.Action.GET_COMBINED:e.rows.id=e.rows.index;delete e.rows.index;e.rows.end&&(e.rows.end=
e.rows.end.map(function(a){return a-1}));var c=Object.keys(a.get("measurements"))[0],d={};d[c]=e;e=d;break;case epiviz.data.Request.Action.SEARCH:c={},c.nodes=e,e=c}return epiviz.data.Response.fromRawObject({requestId:a.id(),data:e})};epiviz.data.EpivizApiDataProvider.prototype._calcNodeDepth=function(a){return parseInt(a.split("-")[0],16)};epiviz.data.EpivizApiDataProvider.Request=function(a,b,e){this.id=a;this.method=b;this.params=e};
epiviz.data.EpivizApiDataProvider.Response=function(a,b,e){this.id=a;this.error=b;this.result=e};epiviz.datatypes={};epiviz.datatypes.SeqInfo=function(a,b,e){this.seqName=a;this.min=b;this.max=e};epiviz.datatypes.SeqInfo.prototype.raw=function(){return[this.seqName,this.min,this.max]};epiviz.datatypes.SeqInfo.fromRawObject=function(a){return new epiviz.datatypes.SeqInfo(a[0],parseFloat(a[1]),parseFloat(a[2]))};
epiviz.datatypes.SeqInfo.compare=function(a,b){if(a.seqName==b.seqName)return 0;if(void 0==a.seqName)return-1;if(void 0==b.seqName)return 1;var e=a.seqName.replace(/\D/g,""),c=b.seqName.replace(/\D/g,"");return""==e||""==c||!epiviz.utils.stringStartsWith(a.seqName,e)&&!epiviz.utils.stringEndsWith(a.seqName,e)||!epiviz.utils.stringStartsWith(b.seqName,c)&&!epiviz.utils.stringEndsWith(b.seqName,c)?a.seqName<b.seqName?-1:a.seqName>b.seqName?1:0:parseInt(e)-parseInt(c)};
epiviz.datatypes.GenomicArray=function(a,b,e,c){this._measurement=a;this._boundaries=b;this._globalStartIndex=e;this._values=c};epiviz.datatypes.GenomicArray.prototype.boundaries=function(){return this._boundaries};epiviz.datatypes.GenomicArray.prototype.globalStartIndex=function(){return this._globalStartIndex};epiviz.datatypes.GenomicArray.prototype.measurement=function(){return this._measurement};
epiviz.datatypes.GenomicArray.prototype.get=function(a){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicArray.prototype.size=function(){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicArray.prototype.getByGlobalIndex=function(a){return this.get(a-this._globalStartIndex)};epiviz.datatypes.GenomicArray.prototype.concatValues=function(a,b){throw Error("unimplemented abstract method");};
epiviz.datatypes.GenomicArray.prototype.createNew=function(a,b,e,c){throw Error("unimplemented abstract method");};
epiviz.datatypes.GenomicArray.prototype.merge=function(a){if(!a||void 0==a.boundaries())return this;if(this.boundaries().seqName()!=a.boundaries().seqName()||this.boundaries().start()>a.boundaries().end()||a.boundaries().start()>this.boundaries().end())throw Error("Two genomic arrays can only be merged if they overlap or are in continuation to one another");var b=this.boundaries().start()<a.boundaries().start()?this:a,e=b==this?a:this;if(b.boundaries().end()>=e.boundaries().end())return b;var c=void 0!=
b.globalStartIndex()&&void 0!=e.globalStartIndex()?b.globalStartIndex()+b.size()-e.globalStartIndex():0;a=b.measurement();var d=void 0!=b.globalStartIndex()?b.globalStartIndex():e.globalStartIndex(),f=epiviz.datatypes.GenomicRange.fromStartEnd(b.boundaries().seqName(),b.boundaries().start(),e.boundaries().end()),b=b.concatValues(e,c);return this.createNew(a,f,d,b)};
epiviz.datatypes.GenomicRangeArray=function(a,b,e,c,d){epiviz.datatypes.GenomicArray.call(this,a,b,e,c);this._id=c.id;this._start=c.start;this._end=c.end;this._strand=c.strand||null;this._metadata=c.metadata;this._size=null;if(d)for(a=1;a<this._start.length;++a)this._start[a]+=this._start[a-1],this._end&&(this._end[a]+=this._end[a-1])};epiviz.datatypes.GenomicRangeArray.prototype=epiviz.utils.mapCopy(epiviz.datatypes.GenomicArray.prototype);epiviz.datatypes.GenomicRangeArray.constructor=epiviz.datatypes.GenomicRangeArray;
epiviz.datatypes.GenomicRangeArray.prototype.createNew=function(a,b,e,c){return new epiviz.datatypes.GenomicRangeArray(a,b,e,c)};epiviz.datatypes.GenomicRangeArray.prototype.get=function(a){return 0>a||a>=this.size()?null:new epiviz.datatypes.GenomicRangeArray.RowItemWrapper(this,a)};
epiviz.datatypes.GenomicRangeArray.prototype.size=function(){void 0==this._size&&(this._size=Math.max(this._id?this._id.length:0,this._start?this._start.length:0,this._end?this._end.length:0,this._metadata&&Object.keys(this._metadata).length?Math.max.apply(void 0,$.map(this._metadata,function(a){return a.length})):0));return this._size};
epiviz.datatypes.GenomicRangeArray.prototype.concatValues=function(a,b){var e=null;if(Array.isArray(this._strand)||Array.isArray(a._strand)||this._strand!=a._strand)var e=Array.isArray(this._strand)?this._strand:epiviz.utils.fillArray(this.size(),this._strand),c=Array.isArray(a._strand)?a._strand:epiviz.utils.fillArray(a.size(),a._strand),e=e.concat(c.slice(b));else e=this._strand;var c=this._id?this._id.concat(a._id.slice(b)):null,d=this._start.concat(a._start.slice(b)),f=this._end?this._end.concat(a._end.slice(b)):
null,n={},h;for(h in this._metadata)this._metadata.hasOwnProperty(h)&&(n[h]=this._metadata[h].concat(a._metadata[h].slice(b)));return{id:c,start:d,end:f,strand:e,metadata:n}};
epiviz.datatypes.GenomicRangeArray.prototype.trim=function(a){if(void 0==this.globalStartIndex()||!this.size()||!a||!this.boundaries()||this.boundaries().seqName()!=a.seqName())return null;var b=Math.max(this.boundaries().start(),a.start()),e=Math.min(this.boundaries().end(),a.end());if(e<=b)return null;a=epiviz.datatypes.GenomicRange.fromStartEnd(a.seqName(),b,e);for(var e=b=-1,c=0;c<this.size();++c)0>b&&this.end(c)>=a.start()&&(b=c),this._start[c]<a.end()&&(e=c+1);if(e<=b)return null;var d;if(0<=
b&&e>=b){c={id:this._id?this._id.slice(b,e):null,start:this._start.slice(b,e),end:this._end?this._end.slice(b,e):null,strand:Array.isArray(this._strand)?this._strand.slice(b,e):this._strand,metadata:{}};for(d in this._metadata)this._metadata.hasOwnProperty(d)&&(c.metadata[d]=this._metadata[d].slice(b,e));d=this.globalStartIndex()+b}else{c={id:this._id?[]:null,start:[],end:this._end?[]:null,strand:Array.isArray(this._strand)?[]:this._strand,metadata:{}};for(d in this._metadata)this._metadata.hasOwnProperty(d)&&
(c.metadata[d]=[]);d=null}return new epiviz.datatypes.GenomicRangeArray(this.measurement(),a,d,c)};epiviz.datatypes.GenomicRangeArray.prototype.ranges=function(){return this};epiviz.datatypes.GenomicRangeArray.prototype.foreach=function(a){for(var b=this.size(),e=0;e<b&&!a(this.get(e));++e);};epiviz.datatypes.GenomicRangeArray.prototype.metadataColumns=function(){return this._metadata?Object.keys(this._metadata):[]};
epiviz.datatypes.GenomicRangeArray.prototype.id=function(a){return this._id?this._id[a]:this.globalStartIndex()+a};epiviz.datatypes.GenomicRangeArray.prototype.start=function(a){return this._start?this._start[a]:void 0};epiviz.datatypes.GenomicRangeArray.prototype.end=function(a){return this._end?this._end[a]:this.start(a)};epiviz.datatypes.GenomicRangeArray.prototype.strand=function(a){return Array.isArray(this._strand)?this._strand[a]:this._strand};
epiviz.datatypes.GenomicRangeArray.prototype.metadata=function(a,b){return this._metadata&&this._metadata[a]?this._metadata[a][b]:null};epiviz.datatypes.GenomicRangeArray.prototype.rowMetadata=function(a){var b={},e;for(e in this._metadata)this._metadata.hasOwnProperty(e)&&(b[e]=this._metadata[e][a]);return b};
epiviz.datatypes.GenomicRangeArray.prototype.toString=function(){var a,b,e;this.boundaries()?(a=this.boundaries().seqName(),b=this.boundaries().start(),e=this.boundaries().end()):a=b=e="*";a=sprintf("%25s",this.measurement().name().substr(0,22))+sprintf(" [%6s%10s%10s]",a,b,e);b=sprintf("%10s:","id");e=sprintf("%10s:","idx");var c=sprintf("%10s:","chr"),d=sprintf("%10s:","start"),f=sprintf("%10s:","end");if(void 0!=this.globalStartIndex())for(var n=this.globalStartIndex();n<this.globalStartIndex()+
this.size();++n){var h=this.getByGlobalIndex(n);b+=sprintf("%10s",h.id());e+=sprintf("%10s",n);c+=sprintf("%10s",h.seqName());d+=sprintf("%10s",h.start());f+=sprintf("%10s",h.end())}return[a,b,e,c,d,f].join("\n")};epiviz.datatypes.GenomicRangeArray.RowItemWrapper=function(a,b){this._index=b;this._parent=a};epiviz.datatypes.GenomicRangeArray.RowItemWrapper.prototype.parent=function(){return this._parent};epiviz.datatypes.GenomicRangeArray.RowItemWrapper.prototype.id=function(){return this._parent.id(this._index)};
epiviz.datatypes.GenomicRangeArray.RowItemWrapper.prototype.seqName=function(){return this._parent.boundaries()?this._parent.boundaries().seqName():void 0};epiviz.datatypes.GenomicRangeArray.RowItemWrapper.prototype.start=function(){return this._parent.start(this._index)};epiviz.datatypes.GenomicRangeArray.RowItemWrapper.prototype.end=function(){return this._parent.end(this._index)};epiviz.datatypes.GenomicRangeArray.RowItemWrapper.prototype.index=function(){return this._index};
epiviz.datatypes.GenomicRangeArray.RowItemWrapper.prototype.globalIndex=function(){return this._index+this._parent.globalStartIndex()};epiviz.datatypes.GenomicRangeArray.RowItemWrapper.prototype.equals=function(a){return a?this==a?!0:a.seqName()==this.seqName()&&a.start()==this.start()&&a.end()==this.end():!1};epiviz.datatypes.GenomicRangeArray.RowItemWrapper.prototype.strand=function(){return this._parent.strand(this._index)};
epiviz.datatypes.GenomicRangeArray.RowItemWrapper.prototype.metadata=function(a){return this._parent.metadata(a,this._index)};epiviz.datatypes.GenomicRangeArray.RowItemWrapper.prototype.rowMetadata=function(){return this._parent.rowMetadata(this._index)};epiviz.datatypes.GenomicRangeArray.RowItemWrapper.prototype.overlapsWith=function(a){return a?this==a?!0:this.seqName()!=a.seqName()?!1:this.start()<a.end()&&this.end()>a.start():!1};
epiviz.datatypes.FeatureValueArray=function(a,b,e,c){var d=null,f=null;!c||$.isArray(c)?(d=c,f={values:c}):(d=c.values,f=c);epiviz.datatypes.GenomicArray.call(this,a,b,e,d);this._valuesAnnotation=f};epiviz.datatypes.FeatureValueArray.prototype=epiviz.utils.mapCopy(epiviz.datatypes.GenomicArray.prototype);epiviz.datatypes.FeatureValueArray.constructor=epiviz.datatypes.FeatureValueArray;
epiviz.datatypes.FeatureValueArray.prototype.createNew=function(a,b,e,c){return new epiviz.datatypes.FeatureValueArray(a,b,e,c)};epiviz.datatypes.FeatureValueArray.prototype.get=function(a){return this._values[a]};epiviz.datatypes.FeatureValueArray.prototype.getAnnotation=function(a){if(void 0==this._valuesAnnotation)return null;var b={},e;for(e in this._valuesAnnotation)this._valuesAnnotation.hasOwnProperty(e)&&(b[e]=this._valuesAnnotation[e][a]);return b};
epiviz.datatypes.FeatureValueArray.prototype.size=function(){return this._values?this._values.length:0};
epiviz.datatypes.FeatureValueArray.prototype.concatValues=function(a,b){if(!a||!a.size())return this._valuesAnnotation;this._valuesAnnotation&&this._valuesAnnotation.values||(this._valuesAnnotation={values:[]});var e={},c;for(c in this._valuesAnnotation)this._valuesAnnotation.hasOwnProperty(c)&&a._valuesAnnotation.hasOwnProperty(c)&&(e[c]=this._valuesAnnotation[c].concat(a._valuesAnnotation[c].slice(b)));return e};
epiviz.datatypes.FeatureValueArray.prototype.trim=function(a,b,e){if(void 0==this.globalStartIndex()||!this.size()||void 0==b||!a||!this.boundaries()||this.boundaries().seqName()!=a.seqName())return null;var c=Math.max(this.boundaries().start(),a.start()),d=Math.min(this.boundaries().end(),a.end());if(d<=c)return null;a=epiviz.datatypes.GenomicRange.fromStartEnd(a.seqName(),c,d);c=Math.max(b,this.globalStartIndex())-this.globalStartIndex();b=Math.min(b+e,this.globalStartIndex()+this.size())-this.globalStartIndex();
if(b<=c)return null;e={};for(var f in this._valuesAnnotation)this._valuesAnnotation.hasOwnProperty(f)&&(e[f]=this._valuesAnnotation[f].slice(c,b));return new epiviz.datatypes.FeatureValueArray(this.measurement(),a,c+this.globalStartIndex(),e)};
epiviz.datatypes.FeatureValueArray.prototype.toString=function(){var a,b,e;this.boundaries()?(a=this.boundaries().seqName(),b=this.boundaries().start(),e=this.boundaries().end()):a=b=e="*";a=sprintf("%25s",this.measurement().name().substr(0,22))+sprintf(" [%6s%10s%10s]",a,b,e);b=sprintf("%10s:","idx");e=sprintf("%10s:","val");if(void 0!=this.globalStartIndex())for(var c=this.globalStartIndex();c<this.globalStartIndex()+this.size();++c){var d=this.getByGlobalIndex(c);b+=sprintf("%10s",c);e+=sprintf("%10s",
d)}return[a,b,e].join("\n")};epiviz.datatypes.PartialSummarizedExperiment=function(){this._rowData=null;this._values=new epiviz.measurements.MeasurementHashtable};epiviz.datatypes.PartialSummarizedExperiment.prototype.ranges=function(){return this.rowData()};epiviz.datatypes.PartialSummarizedExperiment.prototype.rowData=function(){return this._rowData};
epiviz.datatypes.PartialSummarizedExperiment.prototype.addRowData=function(a){a&&(!this._rowData||this._rowData.boundaries().seqName()!=a.boundaries().seqName()||this._rowData.boundaries().start()>a.boundaries().end()||this._rowData.boundaries().end()<a.boundaries().start()||a.measurement().type()==epiviz.measurements.Measurement.Type.UNORDERED?this._rowData=a:this._rowData=this._rowData.merge(a))};
epiviz.datatypes.PartialSummarizedExperiment.prototype.addValues=function(a){if(a){var b=this._values.get(a.measurement());!b||b.boundaries().seqName()!=a.boundaries().seqName()||b.boundaries().start()>a.boundaries().end()||b.boundaries().end()<a.boundaries().start()||a.measurement().type()==epiviz.measurements.Measurement.Type.UNORDERED?this._values.put(a.measurement(),a):this._values.put(a.measurement(),b.merge(a))}};
epiviz.datatypes.PartialSummarizedExperiment.prototype.trim=function(a){var b=new epiviz.datatypes.PartialSummarizedExperiment;this._rowData&&b.addRowData(this._rowData.trim(a));b.rowData()&&this._values.foreach(function(e,c){b.addValues(c.trim(a,b.rowData().globalStartIndex(),b.rowData().size()))});return b};epiviz.datatypes.PartialSummarizedExperiment.prototype.values=function(a){return this._values.get(a)};
epiviz.datatypes.PartialSummarizedExperiment.prototype.calcMinGlobalIndex=function(){var a=this._rowData?this._rowData.globalStartIndex():null;this._values&&this._values.foreach(function(b,e){e&&void 0!=e.globalStartIndex()&&(void 0==a||a>e.globalStartIndex())&&(a=e.globalStartIndex())});return a};
epiviz.datatypes.PartialSummarizedExperiment.prototype.calcMaxGlobalIndex=function(){var a=this._rowData&&void 0!=this._rowData.globalStartIndex()?this._rowData.globalStartIndex()+this._rowData.size():null;this._values&&this._values.foreach(function(b,e){e&&void 0!=e.globalStartIndex()&&(void 0==a||a<e.globalStartIndex()+e.size())&&(a=e.globalStartIndex()+e.size())});return a};
epiviz.datatypes.PartialSummarizedExperiment.prototype.toString=function(){var a="",b=this.calcMinGlobalIndex(),e=this.calcMaxGlobalIndex(),a=a+sprintf("%25s",this._rowData&&this._rowData.measurement()?this._rowData.measurement().name().substr(0,22):"[undefined datasource]"),c,d,f,n,h;this._rowData&&this._rowData.boundaries()?(c=this._rowData.boundaries().seqName(),d=this._rowData.boundaries().start(),f=this._rowData.boundaries().end(),n=void 0!=this._rowData.globalStartIndex()?this._rowData.globalStartIndex():
"*",h=this._rowData.size()):(c=d=f=n="*",h=0);var a=a+sprintf(" [%6s%10s%10s] [globalStartIndex: %10s] [size: %7s]\n",c,d,f,n,h),g=sprintf("%15s%15s%15s%15s%15s","id","idx","chr","start","end");this._values&&this._values.foreach(function(b,e){a+=sprintf("%25s",b.name().substr(0,22));e&&e.boundaries()?(c=e.boundaries().seqName(),d=e.boundaries().start(),f=e.boundaries().end()):c=d=f="*";a+=sprintf(" [%6s%10s%10s] [globalStartIndex: %10s] [size: %7s]\n",c,d,f,void 0!=e.globalStartIndex()?e.globalStartIndex():
"*",e.size());g+=sprintf("%25s",b.name().substr(0,22))});for(var a=a+(g+"\n"),m=b;m<e;++m)this._rowData&&void 0!=this._rowData.globalStartIndex()&&this._rowData.globalStartIndex()<=m&&this._rowData.globalStartIndex()+this._rowData.size()>m?(n=this._rowData.getByGlobalIndex(m),b=n.id(),c=n.seqName(),d=n.start(),f=n.end()):b=c=d=f="*",a+=sprintf("%15s%15s%15s%15s%15s",b,m,c,d,f),this._values&&this._values.foreach(function(b,c){a=c&&void 0!=c.globalStartIndex()&&c.globalStartIndex()<=m&&c.globalStartIndex()+
c.size()>m?a+sprintf("%25s",c.getByGlobalIndex(m)):a+sprintf("%25s","*")}),a+="\n";return a};epiviz.datatypes.MeasurementGenomicData=function(){};epiviz.datatypes.MeasurementGenomicData.prototype.get=function(a){throw Error("unimplemented abstract method");};epiviz.datatypes.MeasurementGenomicData.prototype.getRow=function(a){throw Error("unimplemented abstract method");};epiviz.datatypes.MeasurementGenomicData.prototype.measurement=function(){throw Error("unimplemented abstract method");};
epiviz.datatypes.MeasurementGenomicData.prototype.globalStartIndex=function(){throw Error("unimplemented abstract method");};epiviz.datatypes.MeasurementGenomicData.prototype.globalEndIndex=function(){throw Error("unimplemented abstract method");};epiviz.datatypes.MeasurementGenomicData.prototype.size=function(){throw Error("unimplemented abstract method");};epiviz.datatypes.MeasurementGenomicData.prototype.getByGlobalIndex=function(a){throw Error("unimplemented abstract method");};
epiviz.datatypes.MeasurementGenomicData.prototype.getRowByGlobalIndex=function(a){throw Error("unimplemented abstract method");};epiviz.datatypes.MeasurementGenomicData.prototype.binarySearchStarts=function(a){throw Error("unimplemented abstract method");};epiviz.datatypes.MeasurementGenomicDataWrapper=function(a,b){this._measurement=a;this._container=b;this._globalStartIndex=this._size=null};
epiviz.datatypes.MeasurementGenomicDataWrapper.prototype.get=function(a){var b=this._container.rowData(),e=null,c=this.globalStartIndex(),d=null,f=null,n=e=null,h=this.size();if(!h||a>=h||0>a)return new epiviz.datatypes.GenomicData.ValueItem(n,d,f,this._measurement,e);if(void 0!=c){if(this._measurement.type()==epiviz.measurements.Measurement.Type.FEATURE||this._measurement.type()==epiviz.measurements.Measurement.Type.UNORDERED)e=this._container.values(this._measurement),d=c-e.globalStartIndex()+a,
f=e.get(d),e=e.getAnnotation(d);d=c-b.globalStartIndex()+a;d=b.get(d);n=c+a}return new epiviz.datatypes.GenomicData.ValueItem(n,d,f,this._measurement,e)};epiviz.datatypes.MeasurementGenomicDataWrapper.prototype.getRow=function(a){var b=this._container.rowData(),e=this.globalStartIndex(),c=null,d=this.size();if(!d||a>=d||0>a)return c;void 0!=e&&(a=e-b.globalStartIndex()+a,c=b.get(a));return c};epiviz.datatypes.MeasurementGenomicDataWrapper.prototype.measurement=function(){return this._measurement};
epiviz.datatypes.MeasurementGenomicDataWrapper.prototype.globalStartIndex=function(){if(null!==this._globalStartIndex)return this._globalStartIndex;var a=null,b=this._container.rowData().globalStartIndex();if(null===b)return b;if(this._measurement.type()==epiviz.measurements.Measurement.Type.FEATURE||this._measurement.type()==epiviz.measurements.Measurement.Type.UNORDERED){a=this._container.values(this._measurement);if(!a.globalStartIndex())return a.globalStartIndex();b=Math.max(b,a.globalStartIndex())}return this._globalStartIndex=
b};epiviz.datatypes.MeasurementGenomicDataWrapper.prototype.globalEndIndex=function(){var a=this.globalStartIndex();return null==a?null:a+this.size()};
epiviz.datatypes.MeasurementGenomicDataWrapper.prototype.size=function(){if(null!==this._size)return this._size;var a=this.globalStartIndex();if(void 0==a)return 0;var b=this._container.rowData(),e=this._container.values(this._measurement),b=b.size()-a+b.globalStartIndex();if(this._measurement.type()==epiviz.measurements.Measurement.Type.FEATURE||this._measurement.type()==epiviz.measurements.Measurement.Type.UNORDERED)b=Math.min(b,e.size()-a+e.globalStartIndex());return this._size=Math.max(0,b)};
epiviz.datatypes.MeasurementGenomicDataWrapper.prototype.getByGlobalIndex=function(a){var b=this.globalStartIndex();return void 0==b?new epiviz.datatypes.GenomicData.ValueItem(null,null,null,this._measurement,null):this.get(a-b)};epiviz.datatypes.MeasurementGenomicDataWrapper.prototype.getRowByGlobalIndex=function(a){var b=this.globalStartIndex();return void 0==b?null:this.getRow(a-b)};
epiviz.datatypes.MeasurementGenomicDataWrapper.prototype.binarySearchStarts=function(a){var b=this._container.rowData();if(0==this.size()||!b||0==b.size()||b.start(0)>=a.end()||b.start(b.size()-1)<=a.start())return{index:null,length:0};for(var e=0,c=b.size()-1,d,f=null;e<=c;)d=Math.floor(.5*(e+c)),b.start(d)==a.start()?(f=d,c=d-1):b.start(d)<a.start()?e=d+1:c=d-1;null===f&&(f=e);for(var e=0,c=b.size()-1,n=null;e<=c;)d=Math.floor(.5*(e+c)),b.start(d)==a.end()?(n=d,e=d+1):b.start(d)<a.end()?e=d+1:c=
d-1;null===n&&(n=e-1);a=Math.max(f+b.globalStartIndex(),this.globalStartIndex());b=Math.min(n+b.globalStartIndex(),this.globalStartIndex()+this.size()-1);return{index:a-this.globalStartIndex(),length:b-a+1}};epiviz.datatypes.MeasurementGenomicDataArrayWrapper=function(a,b,e){this._measurement=a;this._items=b;this._itemsByGlobalIndex=e};epiviz.datatypes.MeasurementGenomicDataArrayWrapper.prototype.get=function(a){return this._items&&0<=a&&a<this._items.length?this._items[a]:null};
epiviz.datatypes.MeasurementGenomicDataArrayWrapper.prototype.getRow=function(a){return this._items&&0<=a&&a<this._items.length?this._items[a].rowItem:null};epiviz.datatypes.MeasurementGenomicDataArrayWrapper.prototype.measurement=function(){return this._measurement};epiviz.datatypes.MeasurementGenomicDataArrayWrapper.prototype.globalStartIndex=function(){return this._items&&this._items.length?this._items[0].globalIndex:null};
epiviz.datatypes.MeasurementGenomicDataArrayWrapper.prototype.globalEndIndex=function(){return this._items&&this._items.length?this._items[this._items.length-1].globalIndex+1:null};epiviz.datatypes.MeasurementGenomicDataArrayWrapper.prototype.size=function(){return this._items?this._items.length:0};epiviz.datatypes.MeasurementGenomicDataArrayWrapper.prototype.getByGlobalIndex=function(a){return this._itemsByGlobalIndex&&a in this._itemsByGlobalIndex?this._itemsByGlobalIndex[a]:null};
epiviz.datatypes.MeasurementGenomicDataArrayWrapper.prototype.getRowByGlobalIndex=function(a){return this._itemsByGlobalIndex&&a in this._itemsByGlobalIndex?this._itemsByGlobalIndex[a].rowItem:null};
epiviz.datatypes.MeasurementGenomicDataArrayWrapper.prototype.binarySearchStarts=function(a){if(!this._items||!this._items.length||this._items[0].rowItem.start()>a.end()||this._items[this._items.length-1].rowItem.start()<a.start())return{index:null,length:0};for(var b=0,e=this._items.length-1,c,d=null;b<=e;)c=Math.floor(.5*(b+e)),this._items[c].rowItem.start()==a.start()?(d=c,e=c-1):this._items[c].rowItem.start()<a.start()?b=c+1:e=c-1;null===d&&(d=b);for(var b=0,e=this._items.length-1,f=null;b<=e;)c=
Math.floor(.5*(b+e)),this._items[c].rowItem.start()==a.end()?(f=c,b=c+1):this._items[c].rowItem.start()<a.end()?b=c+1:e=c-1;null===f&&(f=b-1);return{index:d,length:f+1-d}};epiviz.datatypes.GenomicData=function(){};epiviz.datatypes.GenomicData.prototype.ready=function(a){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.prototype.isReady=function(){throw Error("unimplemented abstract method");};
epiviz.datatypes.GenomicData.prototype.firstSeries=function(){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.prototype.getSeries=function(a){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.prototype.get=function(a,b){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.prototype.getRow=function(a,b){throw Error("unimplemented abstract method");};
epiviz.datatypes.GenomicData.prototype.measurements=function(){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.prototype.globalStartIndex=function(a){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.prototype.globalEndIndex=function(a){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.prototype.size=function(a){throw Error("unimplemented abstract method");};
epiviz.datatypes.GenomicData.prototype.getByGlobalIndex=function(a,b){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.prototype.getRowByGlobalIndex=function(a,b){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.prototype.binarySearchStarts=function(a,b){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.prototype.foreach=function(a){throw Error("unimplemented abstract method");};
epiviz.datatypes.GenomicData.ValueItem=function(a,b,e,c,d){this.globalIndex=a;this.rowItem=b;this.value=0===e||e?e:null;this.measurement=c;this.valueAnnotation=d};epiviz.datatypes.GenomicData.RowItem=function(){};epiviz.datatypes.GenomicData.RowItem.prototype.id=function(){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.RowItem.prototype.seqName=function(){throw Error("unimplemented abstract method");};
epiviz.datatypes.GenomicData.RowItem.prototype.start=function(){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.RowItem.prototype.end=function(){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.RowItem.prototype.globalIndex=function(){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.RowItem.prototype.strand=function(){throw Error("unimplemented abstract method");};
epiviz.datatypes.GenomicData.RowItem.prototype.metadata=function(a){throw Error("unimplemented abstract method");};epiviz.datatypes.GenomicData.RowItem.prototype.rowMetadata=function(){throw Error("unimplemented abstract method");};epiviz.datatypes.RowItemImpl=function(a,b,e,c,d,f,n){this._id=a;this._seqName=b;this._start=e;this._end=c;this._globalIndex=d;this._strand=f;this._rowMetadata=n};epiviz.datatypes.RowItemImpl.prototype.id=function(){return this._id};
epiviz.datatypes.RowItemImpl.prototype.seqName=function(){return this._seqName};epiviz.datatypes.RowItemImpl.prototype.start=function(){return this._start};epiviz.datatypes.RowItemImpl.prototype.end=function(){return this._end};epiviz.datatypes.RowItemImpl.prototype.globalIndex=function(){return this._globalIndex};epiviz.datatypes.RowItemImpl.prototype.strand=function(){return this._strand};epiviz.datatypes.RowItemImpl.prototype.metadata=function(a){a=this._rowMetadata[a];return void 0==a?null:a};
epiviz.datatypes.RowItemImpl.prototype.rowMetadata=function(){return this._rowMetadata};epiviz.datatypes.MapGenomicData=function(a){this._measurements=(this._map=a)?a.keys():null;this._mapLoaded=new epiviz.deferred.Deferred;this._map&&this._mapLoaded.resolve()};epiviz.datatypes.MapGenomicData.prototype.ready=function(a){this._mapLoaded.done(a)};epiviz.datatypes.MapGenomicData.prototype.isReady=function(){return this._mapLoaded.state()==epiviz.deferred.Deferred.State.RESOLVED};
epiviz.datatypes.MapGenomicData.prototype._setMap=function(a){if(this._map)throw Error("MapGenomicData is immutable");if(this._map=a)this._measurements=a.keys(),this._mapLoaded.resolve()};epiviz.datatypes.MapGenomicData.prototype.firstSeries=function(){return 0==this._map.size()?null:this._map.first().value};epiviz.datatypes.MapGenomicData.prototype.getSeries=function(a){return this._map.get(a)};epiviz.datatypes.MapGenomicData.prototype.get=function(a,b){var e=this._map.get(a);return e?e.get(b):null};
epiviz.datatypes.MapGenomicData.prototype.getRow=function(a,b){var e=this._map.get(a);return e?e.getRow(b):null};epiviz.datatypes.MapGenomicData.prototype.measurements=function(){return this._measurements};epiviz.datatypes.MapGenomicData.prototype.globalStartIndex=function(a){return(a=this._map.get(a))?a.globalStartIndex():null};epiviz.datatypes.MapGenomicData.prototype.globalEndIndex=function(a){return(a=this._map.get(a))?a.globalEndIndex():null};
epiviz.datatypes.MapGenomicData.prototype.size=function(a){return(a=this._map.get(a))?a.size():null};epiviz.datatypes.MapGenomicData.prototype.getByGlobalIndex=function(a,b){var e=this._map.get(a);return e?e.getByGlobalIndex(b):null};epiviz.datatypes.MapGenomicData.prototype.getRowByGlobalIndex=function(a,b){var e=this._map.get(a);return e?e.getRowByGlobalIndex(b):null};
epiviz.datatypes.MapGenomicData.prototype.binarySearchStarts=function(a,b){var e=this._map.get(a);return e?e.binarySearchStarts(b):{index:null,length:0}};epiviz.datatypes.MapGenomicData.prototype.foreach=function(a){this._map.foreach(function(b,e,c){a(b,e,c)})};epiviz.datatypes.ItemFilteredGenomicData=function(a,b){epiviz.datatypes.MapGenomicData.call(this);this._data=a;this._filter=b;this._deferredInit=null;this._initialize()};epiviz.datatypes.ItemFilteredGenomicData.prototype=epiviz.utils.mapCopy(epiviz.datatypes.MapGenomicData.prototype);
epiviz.datatypes.ItemFilteredGenomicData.constructor=epiviz.datatypes.ItemFilteredGenomicData;
epiviz.datatypes.ItemFilteredGenomicData.prototype._initialize=function(){if(this._deferredInit)return this._deferredInit;this._deferredInit=new epiviz.deferred.Deferred;var a=this,b=this._filter,e=this._data;e.ready(function(){b.preMark()(e).done(function(c){var d=new epiviz.measurements.MeasurementHashtable,f=e.measurements();epiviz.utils.deferredFor(f.length,function(a){var h=new epiviz.deferred.Deferred,g=f[a],m=[],p={};epiviz.utils.deferredFor(e.size(g),function(a){var d=new epiviz.deferred.Deferred,
f=e.get(g,a);b.mark()(f,e,c).done(function(a){a&&(m.push(f),p[f.globalIndex]=f);d.resolve()});return d}).done(function(){d.put(g,new epiviz.datatypes.MeasurementGenomicDataArrayWrapper(g,m,p));h.resolve()});return h}).done(function(){a._setMap(d);a._deferredInit.resolve()})})});return this._deferredInit};epiviz.datatypes.MeasurementOrderedGenomicData=function(a,b){epiviz.datatypes.MapGenomicData.call(this);this._data=a;this._order=b;this._deferredInit=null;this._initialize()};
epiviz.datatypes.MeasurementOrderedGenomicData.prototype=epiviz.utils.mapCopy(epiviz.datatypes.MapGenomicData.prototype);epiviz.datatypes.MeasurementOrderedGenomicData.constructor=epiviz.datatypes.MeasurementOrderedGenomicData;
epiviz.datatypes.MeasurementOrderedGenomicData.prototype._initialize=function(){if(this._deferredInit)return this._deferredInit;this._deferredInit=new epiviz.deferred.Deferred;var a=this,b=this._data,e=this._order;b.ready(function(){e.preMark()(b).done(function(c){var d=new epiviz.measurements.MeasurementHashtable,f=b.measurements(),n=new epiviz.measurements.MeasurementHashtable;epiviz.utils.deferredFor(f.length,function(a){var d=new epiviz.deferred.Deferred,m=f[a];e.mark()(m,b,c).done(function(a){n.put(m,
a);d.resolve()});return d}).done(function(){f.sort(function(a,b){var c=n.get(a),d=n.get(b);return c==d?0:c<d?-1:1});f.forEach(function(a){d.put(a,b.getSeries(a))});a._setMap(d);a._deferredInit.resolve()})})});return this._deferredInit};epiviz.datatypes.MeasurementAggregatedGenomicData=function(a,b,e){epiviz.datatypes.MapGenomicData.call(this);this._data=a;this._groupByMarker=b;this._aggregator=e;this._deferredInit=null;this._initialize()};
epiviz.datatypes.MeasurementAggregatedGenomicData.prototype=epiviz.utils.mapCopy(epiviz.datatypes.MapGenomicData.prototype);epiviz.datatypes.MeasurementAggregatedGenomicData.constructor=epiviz.datatypes.MeasurementAggregatedGenomicData;
epiviz.datatypes.MeasurementAggregatedGenomicData.prototype._initialize=function(){if(this._deferredInit)return this._deferredInit;this._deferredInit=new epiviz.deferred.Deferred;var a=this,b=this._groupByMarker,e=this._data;e.ready(function(){b.preMark()(e).done(function(c){var d=new epiviz.measurements.MeasurementHashtable,f={},n=e.measurements();epiviz.utils.deferredFor(n.length,function(a){var d=new epiviz.deferred.Deferred,m=n[a];b.mark()(m,e,c).done(function(a){a in f||(f[a]=[]);f[a].push(m);
d.resolve()});return d}).done(function(){var b={},c,m;for(c in f)if(f.hasOwnProperty(c)){m=f[c];var n=c+"-group",r=c,t=m[0].type(),l=m[0].datasourceId(),q=m[0].datasourceGroup(),w=m[0].dataprovider(),u=m[0].defaultChartType(),v=epiviz.utils.mapCopy(m[0].annotation()),E=m[0].minValue(),A=m[0].maxValue(),K=m[0].metadata(),F={};K.forEach(function(a){F[a]=a});f[c].forEach(function(a){l!=a.datasourceId()&&(l="*");q!=a.datasourceGroup()&&(q="*");w!=a.dataprovider()&&(w="*");u!=a.defaultChartType()&&(u=
"*");var b=a.annotation();if(v!=b)if(void 0==v)v=epiviz.utils.mapCopy(b);else if(void 0!=b)for(var c in b)b.hasOwnProperty(c)&&(c in v?v[c]!=b[c]&&(v[c]="*"):v[c]=b[c]);E=Math.min(E,a.minValue());A=Math.max(A,a.maxValue());a.metadata().forEach(function(a){a in F||(F[a]=a,K.push(a))})});b[c]=new epiviz.measurements.Measurement(n,r,t,l,q,w,null,u,v,E,A,K)}for(c in f)if(f.hasOwnProperty(c)){n=b[c];r=[];t={};m=f[c];for(var z=Math.min.apply(void 0,m.map(function(a){return e.globalStartIndex(a)})),B=Math.max.apply(void 0,
m.map(function(a){return e.globalEndIndex(a)})),H=z;H<B;++H){var G=m.map(function(a){return e.getByGlobalIndex(a,H)}).filter(function(a){return a});G.length&&(z=G.map(function(a){return a.value}),z=a._aggregator.aggregate(c,m,z),G=G[0].rowItem,G=new epiviz.datatypes.RowItemImpl(G.id(),G.seqName(),G.start(),G.end(),G.globalIndex(),G.strand(),G.rowMetadata()||{}),z=new epiviz.datatypes.GenomicData.ValueItem(H,G,z.value,n,{errMinus:z.errMinus,errPlus:z.errPlus}),r.push(z),t[H]=z)}m=new epiviz.datatypes.MeasurementGenomicDataArrayWrapper(n,
r,t);d.put(n,m)}a._setMap(d);a._deferredInit.resolve()})})});return this._deferredInit};epiviz.ui.controls={};epiviz.ui.controls.Control=function(a,b,e){this._container=a;this._title=b||"";this._id=e||epiviz.utils.generatePseudoGUID(6)};epiviz.ui.controls.Control.prototype.initialize=function(){};epiviz.ui.controls.Control.prototype.id=function(){return this._id};epiviz.ui.controls.Control.prototype.title=function(){return this._title};
epiviz.ui.controls.Dialog=function(a,b){this._container=$("#dialogs");this._title=a;this._id=epiviz.ui.controls.Dialog.generateId();this._handlers=b;this._container.append(sprintf('<div id="%s" title="%s" style="display: none;"></div>',this._id,this._title));this._dialog=null};epiviz.ui.controls.Dialog._nextIdIndex=0;epiviz.ui.controls.Dialog.generateId=function(){return sprintf("dialog-%s",epiviz.utils.generatePseudoGUID(5))};epiviz.ui.controls.Dialog.prototype.show=function(){};
epiviz.ui.charts={};epiviz.ui.charts.transform={};epiviz.ui.charts.transform.clustering={};epiviz.ui.charts.transform.clustering.ClusterNode=function(){};epiviz.ui.charts.transform.clustering.ClusterNode.prototype.weight=function(){};epiviz.ui.charts.transform.clustering.ClusterNode.prototype.children=function(){};epiviz.ui.charts.transform.clustering.ClusterNode.prototype.data=function(){};epiviz.ui.charts.transform.clustering.ClusterNode.prototype.sort=function(a){};
epiviz.ui.charts.transform.clustering.ClusterNode.prototype.copy=function(){};epiviz.ui.charts.transform.clustering.ClusterNode.prototype.distance=function(){};epiviz.ui.charts.transform.clustering.ClusterNode.prototype.sorted=function(){};epiviz.ui.charts.transform.clustering.ClusterSubtree=function(a,b){this._children=a;this._weight=null;this._distance=b;this._sorted=!1};
epiviz.ui.charts.transform.clustering.ClusterSubtree.prototype.weight=function(){if(void 0==this._weight){for(var a=0,b=0;b<this._children.length;++b)a+=this._children[b].weight();this._weight=a}return this._weight};epiviz.ui.charts.transform.clustering.ClusterSubtree.prototype.children=function(){return this._children};epiviz.ui.charts.transform.clustering.ClusterSubtree.prototype.data=function(){for(var a=[],b=0;b<this._children.length;++b)a=a.concat(this._children[b].data());return a};
epiviz.ui.charts.transform.clustering.ClusterSubtree.prototype.sort=function(a){if(!this.sorted()&&(this._children.sort(function(a,b){return a.weight()-b.weight()}),a)){for(var b=0;b<this._children.length;++b)this._children[b].sort(a);this._sorted=!0}};epiviz.ui.charts.transform.clustering.ClusterSubtree.prototype.copy=function(){for(var a=[],b=0;b<this._children.length;++b)a.push(this._children[b].copy());return new epiviz.ui.charts.transform.clustering.ClusterSubtree(a)};
epiviz.ui.charts.transform.clustering.ClusterSubtree.prototype.distance=function(){return this._distance};epiviz.ui.charts.transform.clustering.ClusterSubtree.prototype.sorted=function(){return this._sorted};epiviz.ui.charts.transform.clustering.ClusterLeaf=function(a){this._dataIndex=a};epiviz.ui.charts.transform.clustering.ClusterLeaf.prototype.weight=function(){return 1};epiviz.ui.charts.transform.clustering.ClusterLeaf.prototype.children=function(){return[]};
epiviz.ui.charts.transform.clustering.ClusterLeaf.prototype.data=function(){return[this._dataIndex]};epiviz.ui.charts.transform.clustering.ClusterLeaf.prototype.sort=function(){};epiviz.ui.charts.transform.clustering.ClusterLeaf.prototype.copy=function(){return new epiviz.ui.charts.transform.clustering.ClusterLeaf(this._dataIndex)};epiviz.ui.charts.transform.clustering.ClusterLeaf.prototype.distance=function(){return 0};epiviz.ui.charts.transform.clustering.ClusterLeaf.prototype.sorted=function(){return!0};
epiviz.ui.charts.transform.clustering.ClusterTree=function(a,b){this._root=a;this._data=b};epiviz.ui.charts.transform.clustering.ClusterTree.prototype.root=function(){return this._root};epiviz.ui.charts.transform.clustering.ClusterTree.prototype.orderedData=function(){this._root.sorted()||this._root.sort(!0);for(var a=this._root.data(),b=[],e=0;e<a.length;++e)b.push(this._data[a[e]]);return b};epiviz.ui.charts.transform.clustering.ClusteringMetric=function(){};
epiviz.ui.charts.transform.clustering.ClusteringMetric.prototype.distance=function(a,b){};epiviz.ui.charts.transform.clustering.ClusteringMetric.prototype.id=function(){};epiviz.ui.charts.transform.clustering.ClusteringLinkage=function(){};epiviz.ui.charts.transform.clustering.ClusteringLinkage.prototype.link=function(a,b){};epiviz.ui.charts.transform.clustering.ClusteringLinkage.prototype.id=function(){};epiviz.ui.charts.transform.clustering.HierarchicalClusteringAlgorithm=function(){};
epiviz.ui.charts.transform.clustering.HierarchicalClusteringAlgorithm.prototype.cluster=function(a,b,e){};epiviz.ui.charts.transform.clustering.HierarchicalClusteringAlgorithm.prototype.id=function(){};epiviz.ui.charts.transform.clustering.EuclideanMetric=function(){};
epiviz.ui.charts.transform.clustering.EuclideanMetric.prototype.distance=function(a,b){if(void 0==a||void 0==b)return null;var e=a.length,c=0,d=0,f=0,n;for(n=0;n<e;++n)if(void 0!=a[n]&&void 0!=b[n]){++c;var h=a[n]-b[n],d=d+h,f=f+h*h}0<c&&(d/=c);return f+(e-c)*d*d};epiviz.ui.charts.transform.clustering.EuclideanMetric.prototype.id=function(){return"euclidean"};epiviz.ui.charts.transform.clustering.CompleteLinkage=function(){};
epiviz.ui.charts.transform.clustering.CompleteLinkage.prototype.link=function(a,b){var e=Array(a.length-1);if(b[0]<b[1]){var c=b[0];b[0]=b[1];b[1]=c}for(var d=c=0;c<a.length;++c,++d)if(c==b[0]||c==b[1])--d;else{e[d]=a[c].slice(0);e[d].splice(b[0],1);e[d].splice(b[1],1);var f=[c<b[0]?a[c][b[0]]:a[b[0]][c],c<b[1]?a[c][b[1]]:a[b[1]][c]];e[d].push(Math.max(f[0],f[1]))}e[e.length-1]=Array(e.length);return e};epiviz.ui.charts.transform.clustering.CompleteLinkage.prototype.id=function(){return"complete"};
epiviz.ui.charts.transform.clustering.NoneClustering=function(){};epiviz.ui.charts.transform.clustering.NoneClustering.prototype.cluster=function(a,b,e){b=[];for(e=0;e<a.length;++e)b.push(new epiviz.ui.charts.transform.clustering.ClusterLeaf(e));b=new epiviz.ui.charts.transform.clustering.ClusterSubtree(b,0);return new epiviz.ui.charts.transform.clustering.ClusterTree(b,a)};epiviz.ui.charts.transform.clustering.NoneClustering.prototype.id=function(){return"none"};
epiviz.ui.charts.transform.clustering.AgglomerativeClustering=function(){};
epiviz.ui.charts.transform.clustering.AgglomerativeClustering.prototype.cluster=function(a,b,e){var c,d,f=Array(a.length);for(c=0;c<a.length;++c)for(f[c]=Array(a.length),d=c+1;d<a.length;++d)f[c][d]=b.distance(a[c],a[d]);b=[];for(c=0;c<a.length;++c)b.push(new epiviz.ui.charts.transform.clustering.ClusterLeaf(c));for(;1<b.length;){d=epiviz.utils.indexOfMin(f,!0);c=d.index;d=new epiviz.ui.charts.transform.clustering.ClusterSubtree([b[c[0]],b[c[1]]],d.min);if(c[0]<c[1]){var n=c[0];c[0]=c[1];c[1]=n}b.splice(c[0],
1);b.splice(c[1],1);b.push(d);f=e.link(f,c)}return new epiviz.ui.charts.transform.clustering.ClusterTree(b[0],a)};epiviz.ui.charts.transform.clustering.AgglomerativeClustering.prototype.id=function(){return"agglomerative"};
epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory=function(a){this._config=a;this._algorithms={};this._metrics={};this._linkages={};var b;for(b=0;b<a.clustering.algorithms.length;++b){var e=epiviz.utils.evaluateFullyQualifiedTypeName(a.clustering.algorithms[b]),e=epiviz.utils.applyConstructor(e);this._algorithms[e.id()]=e}for(b=0;b<a.clustering.metrics.length;++b)e=epiviz.utils.evaluateFullyQualifiedTypeName(a.clustering.metrics[b]),e=epiviz.utils.applyConstructor(e),this._metrics[e.id()]=
e;for(b=0;b<a.clustering.linkages.length;++b)e=epiviz.utils.evaluateFullyQualifiedTypeName(a.clustering.linkages[b]),e=epiviz.utils.applyConstructor(e),this._linkages[e.id()]=e};epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory._instance=null;epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.instance=function(){return epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory._instance};
epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.initialize=function(a){epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory._instance=new epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory(a)};epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.prototype.algorithm=function(a){return this._algorithms[a]};epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.prototype.metric=function(a){return this._metrics[a]};
epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.prototype.linkage=function(a){return this._linkages[a]};epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.prototype.algorithms=function(){return Object.keys(this._algorithms)};epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.prototype.metrics=function(){return Object.keys(this._metrics)};epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.prototype.linkages=function(){return Object.keys(this._linkages)};
epiviz.ui.charts.markers={};epiviz.ui.charts.markers.MeasurementAggregator=function(a,b){this._id=a;this._aggregator=b};epiviz.ui.charts.markers.MeasurementAggregator.prototype.aggregate=function(a,b,e){return this._aggregator(a,b,e)};epiviz.ui.charts.markers.MeasurementAggregator.prototype.id=function(){return this._id};
epiviz.ui.charts.markers.MeasurementAggregators={"mean-stdev":new epiviz.ui.charts.markers.MeasurementAggregator("mean-stdev",function(a,b,e){if(!e||0==e.length)return null;var c=e.reduce(function(a,b){return a+b})/e.length;a=e.map(function(a){return(a-c)*(a-c)}).reduce(function(a,b){return a+b})/e.length;a=Math.sqrt(a);return{value:c,errMinus:c-a,errPlus:c+a}}),quartiles:new epiviz.ui.charts.markers.MeasurementAggregator("quartiles",function(a,b,e){if(!e||0==e.length)return null;e=e.slice(0).sort(function(a,
b){return a-b});a=e.length;b=Math.floor(.5*a);var c=Math.ceil(.5*a);return{value:.5*(e[Math.floor(.5*(a-1))]+e[b]),errMinus:.5*(e[Math.floor(.5*(b-1))]+e[Math.floor(.5*b)]),errPlus:.5*(e[c+Math.floor(.5*(a-c-1))]+e[c+Math.floor(.5*(a-c))])}}),count:new epiviz.ui.charts.markers.MeasurementAggregator("count",function(a,b,e){return e&&0!=e.length?{value:e.length}:0}),min:new epiviz.ui.charts.markers.MeasurementAggregator("min",function(a,b,e){return e&&0!=e.length?{value:Math.min.apply(void 0,e)}:null}),
max:new epiviz.ui.charts.markers.MeasurementAggregator("max",function(a,b,e){return e&&0!=e.length?{value:Math.max.apply(void 0,e)}:null}),sum:new epiviz.ui.charts.markers.MeasurementAggregator("sum",function(a,b,e){return e&&0!=e.length?{value:e.reduce(function(a,b){return a+b})}:null})};
epiviz.ui.charts.markers.VisualizationMarker=function(a,b,e,c,d){this._type=a;this._id=b||epiviz.utils.generatePseudoGUID(6);this._name=e||"Custom Marker "+this._id;this._preMarkStr=c||"";this._markStr=d||"";var f=new epiviz.deferred.Deferred,n=null;epiviz.caja.cajole(this._preMarkStr).done(function(a){n=a;f.resolve()});this._preMark=function(a){var b=new epiviz.deferred.Deferred;f.done(function(){var c=n(a);b.resolve(c)});return b};var h=new epiviz.deferred.Deferred,g=null;epiviz.caja.cajole(this._markStr).done(function(a){g=
a;h.resolve()});this._mark=function(a,b,c){var d=new epiviz.deferred.Deferred;h.done(function(){var e=g(a,b,c);d.resolve(e)});return d}};epiviz.ui.charts.markers.VisualizationMarker.prototype.type=function(){return this._type};epiviz.ui.charts.markers.VisualizationMarker.prototype.id=function(){return this._id};epiviz.ui.charts.markers.VisualizationMarker.prototype.name=function(){return this._name};epiviz.ui.charts.markers.VisualizationMarker.prototype.preMark=function(){return this._preMark};
epiviz.ui.charts.markers.VisualizationMarker.prototype.mark=function(){return this._mark};epiviz.ui.charts.markers.VisualizationMarker.prototype.preMarkStr=function(){return this._preMarkStr};epiviz.ui.charts.markers.VisualizationMarker.prototype.markStr=function(){return this._markStr};epiviz.ui.charts.markers.VisualizationMarker.Type={FILTER:"filter",COLOR_BY_ROW:"colorByRow",ORDER_BY_MEASUREMENTS:"orderByMeasurements",COLOR_BY_MEASUREMENTS:"colorByMeasurements",GROUP_BY_MEASUREMENTS:"groupByMeasurements"};
epiviz.ui.charts.markers.VisualizationMarker.prototype.raw=function(){return{type:this._type,id:this._id,name:this._name,preMark:this._preMarkStr,mark:this._markStr}};epiviz.ui.charts.markers.VisualizationMarker.fromRawObject=function(a){return new epiviz.ui.charts.markers.VisualizationMarker(a.type,a.id,a.name,a.preMark,a.mark)};epiviz.ui.charts.Margins=function(a,b,e,c){this._top=a;this._left=b;this._bottom=e;this._right=c};
epiviz.ui.charts.Margins.ZERO_MARGIN=new epiviz.ui.charts.Margins(0,0,0,0);epiviz.ui.charts.Margins.prototype.top=function(){return this._top};epiviz.ui.charts.Margins.prototype.left=function(){return this._left};epiviz.ui.charts.Margins.prototype.bottom=function(){return this._bottom};epiviz.ui.charts.Margins.prototype.right=function(){return this._right};
epiviz.ui.charts.Margins.prototype.sumAxis=function(a){switch(a){case epiviz.ui.charts.Axis.X:return this._left+this._right;case epiviz.ui.charts.Axis.Y:return this._top+this._bottom;default:throw Error("Invalid argument: "+a);}};epiviz.ui.charts.Margins.prototype.raw=function(){return{top:this._top,left:this._left,bottom:this._bottom,right:this._right}};epiviz.ui.charts.Margins.fromRawObject=function(a){return new epiviz.ui.charts.Margins(a.top,a.left,a.bottom,a.right)};
epiviz.ui.charts.Margins.prototype.copy=function(){return new epiviz.ui.charts.Margins(this._top,this._left,this._bottom,this._right)};epiviz.ui.charts.Margins.prototype.equals=function(a){return a?this==a?!0:this._top==a._top&&this._left==a._left&&this._bottom==a._bottom&&this._right==a._right:!1};epiviz.ui.charts.ColorPalette=function(a,b,e,c){this._colors=a;this._id=e||epiviz.utils.generatePseudoGUID(6);this._name=b||"Custom ("+this._id+")";this._keyIndices=c||{};this._nKeys=0};
epiviz.ui.charts.ColorPalette.prototype.id=function(){return this._id};epiviz.ui.charts.ColorPalette.prototype.name=function(){return this._name};epiviz.ui.charts.ColorPalette.prototype.get=function(a){return this._colors[a%this._colors.length]};epiviz.ui.charts.ColorPalette.prototype.getByKey=function(a){var b=this._keyIndices[a];void 0==b&&(b=this._nKeys,this._keyIndices[a]=this._nKeys,++this._nKeys);return this.get(b)};
epiviz.ui.charts.ColorPalette.prototype.keyColorIndex=function(a){a=this._keyIndices[a];return void 0==a?-1:a};epiviz.ui.charts.ColorPalette.prototype.keyIndices=function(){return this._keyIndices};epiviz.ui.charts.ColorPalette.prototype.size=function(){return this._colors.length};epiviz.ui.charts.ColorPalette.prototype.equals=function(a){return this==a?!0:a?epiviz.utils.arraysEqual(this._colors,a._colors):!1};epiviz.ui.charts.ColorPalette.prototype.copy=function(){return new epiviz.ui.charts.ColorPalette(this._colors.slice(0))};
epiviz.ui.charts.ColorPalette.prototype.raw=function(a){return a&&this._id in a.colorPalettesMap?{id:this._id}:{id:this._id,name:this._name,colors:this._colors}};epiviz.ui.charts.ColorPalette.fromRawObject=function(a,b){if($.isArray(a))return new epiviz.ui.charts.ColorPalette(a);if(b&&a.id in b.colorPalettesMap)return b.colorPalettesMap[a.id];a.colors&&a.colors.length||(a.colors=epiviz.Config.COLORS_BRIGHT);return new epiviz.ui.charts.ColorPalette(a.colors,a.name,a.id)};
epiviz.ui.charts.Axis={X:"x",Y:"y"};epiviz.ui.charts.CustomSetting=function(a,b,e,c,d){this.id=a;this.type=b;this.defaultValue=e;this.label=c||a;this.possibleValues=d||null};epiviz.ui.charts.CustomSetting.Type={NUMBER:"number",STRING:"string",ARRAY:"array",BOOLEAN:"boolean",CATEGORICAL:"categorical",MEASUREMENTS_METADATA:"measurementsMetadata",MEASUREMENTS_ANNOTATION:"measurementsAnnotation"};epiviz.ui.charts.CustomSetting.DEFAULT="default";epiviz.ui.charts.VisObject=function(){};
epiviz.ui.charts.VisObject.prototype.regionStart=function(){return null};epiviz.ui.charts.VisObject.prototype.regionEnd=function(){return null};epiviz.ui.charts.VisObject.prototype.getMetadata=function(a,b,e){return null};epiviz.ui.charts.VisObject.prototype.getStart=function(a,b){return null};epiviz.ui.charts.VisObject.prototype.getEnd=function(a,b){return null};epiviz.ui.charts.VisObject.prototype.metadataColumns=function(){return null};
epiviz.ui.charts.VisObject.prototype.dimensions=function(){return[0,0]};epiviz.ui.charts.VisObject.prototype.metadataLooseCompare=function(){return!1};
epiviz.ui.charts.VisObject.prototype.overlapsWith=function(a){if(!a)return!1;if(this===a)return!0;var b,e,c,d=this.dimensions(),f=a.dimensions();if(!(d[0]&&f[0]||void 0!=this.regionStart()&&void 0!=a.regionStart()&&void 0!=this.regionEnd()&&void 0!=a.regionEnd()))return!1;if(!d[0]){if(!f[0])return this.regionStart()<a.regionEnd()&&this.regionEnd()>a.regionStart();for(e=0;e<f[1];++e)if(b=a.getStart(0,e),c=a.getEnd(0,e),void 0!=b&&void 0!=c&&this.regionStart()<c&&this.regionEnd()>b)return!0;return!1}var n=
epiviz.utils.arrayIntersection(this.metadataColumns(),a.metadataColumns());if(n.length){for(b=0;b<d[1];++b)for(e=0;e<f[1];++e){var h=!0;for(c=0;c<n.length;++c){var g=this.metadataLooseCompare()||a.metadataLooseCompare(),m=this.getMetadata(0,b,n[c]),p=a.getMetadata(0,e,n[c]);if(m!=p){if(!g){h=!1;break}m.length<=p.length?(g=m,m=p):g=p;if(!(new RegExp("^(.+,)?"+g+"(,.+)?$")).test(m)){h=!1;break}}}if(h)return!0}return!1}for(b=0;b<d[1];++b)for(e=0;e<f[1];++e)if(this.getStart(0,b)<a.getEnd(0,e)&&this.getEnd(0,
b)>a.getStart(0,e))return!0;return!1};epiviz.ui.charts.VisualizationProperties=function(a,b,e,c,d,f,n,h,g){this.width=a;this.height=b;this.margins=e;this.visConfigSelection=c;this.colors=d;this.modifiedMethods=f;this.customSettingsValues=n||{};this.customSettingsDefs=h||[];this.chartMarkers=g||[]};
epiviz.ui.charts.VisualizationProperties.prototype.copy=function(){var a=new epiviz.ui.controls.VisConfigSelection(this.visConfigSelection.measurements?new epiviz.measurements.MeasurementSet(this.visConfigSelection.measurements):void 0,this.visConfigSelection.datasource,this.visConfigSelection.datasourceGroup,this.visConfigSelection.dataprovider,epiviz.utils.mapCopy(this.visConfigSelection.annotation),this.visConfigSelection.defaultChartType,this.visConfigSelection.minSelectedMeasurements);return new epiviz.ui.charts.VisualizationProperties(this.width,
this.height,this.margins?this.margins.copy():this.margins,a,this.colors,this.modifiedMethods?epiviz.utils.mapCopy(this.modifiedMethods):this.modifiedMethods,this.customSettingsValues?epiviz.utils.mapCopy(this.customSettingsValues):this.customSettingsValues,this.customSettingsDefs?this.customSettingsDefs.slice(0):this.customSettingsDefs,this.chartMarkers.slice(0))};epiviz.ui.charts.VisEventArgs=function(a,b){this.id=a;this.args=b};
epiviz.ui.charts.DisplayType={MEASUREMENT_VIS:{name:"measurement-vis",PLOT:{name:"plot"},TRACK:{name:"track"}},DATA_STRUCTURE:{name:"data-structure",HIERARCHY:{name:"hierarchy"}}};epiviz.ui.charts.DisplayType.is=function(a,b){var e=function(a,b){if(a.name==b.name)return!0;for(var f in b)if(b.hasOwnProperty(f)&&"name"!=f&&e(a,b[f]))return!0;return!1};return e(a,b)};
epiviz.ui.charts.Visualization=function(a,b,e){this._id=a;this._container=b;this._properties=e;this._originalMethods={};this._hasModifiedMethods=!1;this._lastModifiedMethod="draw";var c=this;if(e.modifiedMethods){var d=new epiviz.deferred.Deferred,f=e.modifiedMethods,n=Object.keys(f),h={},g=0,m;for(m in f)f.hasOwnProperty(m)&&"_setModifiedMethods"!=m&&function(a){epiviz.caja.cajole(f[a],epiviz.caja.buildChartMethodContext()).done(function(b){b&&(h[a]=b,g+=1,g>=n.length&&d.resolve())})}(m);d.done(function(){for(var a in h)h.hasOwnProperty(a)&&
(c._originalMethods[a]=c[a],c[a]=h[a],c._lastModifiedMethod=a);c._hasModifiedMethods=!0;c.draw()})}this._customSettingsValues={};for(a=0;a<e.customSettingsDefs.length;++a)switch(b=e.customSettingsDefs[a],m=e.customSettingsValues[b.id],b.type){case epiviz.ui.charts.CustomSetting.Type.BOOLEAN:this._customSettingsValues[b.id]=!1===m||m?m:b.defaultValue;break;case epiviz.ui.charts.CustomSetting.Type.NUMBER:this._customSettingsValues[b.id]=0===m||m?m:b.defaultValue;break;case epiviz.ui.charts.CustomSetting.Type.STRING:this._customSettingsValues[b.id]=
""===m||m?m:b.defaultValue;break;case epiviz.ui.charts.CustomSetting.Type.MEASUREMENTS_METADATA:var p={};e.visConfigSelection.measurements.foreach(function(a){a.metadata().forEach(function(a){p[a]=a})});b.possibleValues=Object.keys(p);b.possibleValues.sort();m=m||b.defaultValue;this._customSettingsValues[b.id]=m in p?m:b.possibleValues.length?b.possibleValues[0]:"";break;case epiviz.ui.charts.CustomSetting.Type.MEASUREMENTS_ANNOTATION:p={name:"name"};e.visConfigSelection.measurements.foreach(function(a){(a=
a.annotation())&&Object.keys(a).forEach(function(a){p[a]=a})});b.possibleValues=Object.keys(p);b.possibleValues.sort();m=m||b.defaultValue;this._customSettingsValues[b.id]=m in p?m:b.possibleValues.length?b.possibleValues[0]:"";break;default:this._customSettingsValues[b.id]=m||b.defaultValue}this._svgId=sprintf("%s-svg",this._id);this._lastRange=this._lastData=this._unalteredData=this._svg=null;this._slide=0;this._zoom=1;this._markers=e.chartMarkers;this._markersMap={};this._markersIndices={};this._markers.forEach(function(a,
b){a&&(c._markersMap[a.id()]=a,c._markersIndices[a.id()]=b)});this._autoPropagateChanges=!0;this._hover=new epiviz.events.Event;this._unhover=new epiviz.events.Event;this._select=new epiviz.events.Event;this._deselect=new epiviz.events.Event;this._save=new epiviz.events.Event;this._remove=new epiviz.events.Event;this._colorsChanged=new epiviz.events.Event;this._methodsModified=new epiviz.events.Event;this._methodsReset=new epiviz.events.Event;this._markersModified=new epiviz.events.Event;this._customSettingsChanged=
new epiviz.events.Event;this._sizeChanged=new epiviz.events.Event;this._marginsChanged=new epiviz.events.Event;this._dataWaitStart=new epiviz.events.Event;this._dataWaitEnd=new epiviz.events.Event};epiviz.ui.charts.Visualization.SVG_MARGIN=20;
epiviz.ui.charts.Visualization.prototype._initialize=function(){"100%"==this._properties.height&&(this._properties.height=this._container.height()-epiviz.ui.charts.Visualization.SVG_MARGIN);"100%"==this._properties.width&&(this._properties.width=this._container.width()-epiviz.ui.charts.Visualization.SVG_MARGIN);var a=this.width(),b=this.height();this._container.addClass("visualization-container");this._container.append(sprintf('<svg id="%s" class="visualization" width="%s" height="%s"><style type="text/css"></style><defs></defs></svg>',
this._svgId,a,b));this._svg=d3.select("#"+this._svgId);this._widthDif=$("#"+this._svgId).width()-(this._container.width()-epiviz.ui.charts.Visualization.SVG_MARGIN);this._heightDif=b-(this._container.height()-epiviz.ui.charts.Visualization.SVG_MARGIN);this._properties.width=a;this._properties.height=b;var e=this;this._container.click(function(){e._deselect.notify(new epiviz.ui.charts.VisEventArgs(e._id))})};
epiviz.ui.charts.Visualization.prototype._clearAxes=function(a){a=a||this._svg;a.selectAll(".xAxis").remove();a.selectAll(".yAxis").remove()};
epiviz.ui.charts.Visualization.prototype._drawAxes=function(a,b,e,c,d,f,n,h,g,m,p,r,t,l){d=d||this._svg;h=h||this.margins();n=n||this.height();f=f||this.width();var q=d.select(".axes"),w=q.select(".xAxis-grid");l=q.select(".yAxis-grid");var u=q.select(".xAxis-line");m=q.select(".yAxis-line");q.empty()&&(q=d.append("g").attr("class","axes"));w.empty()&&(w=q.append("g").attr("class","xAxis xAxis-grid"));l.empty()&&(l=q.append("g").attr("class","yAxis yAxis-grid"));u.empty()&&(u=q.append("g").attr("class",
"xAxis xAxis-line"));m.empty()&&(m=q.append("g").attr("class","yAxis yAxis-line"));a&&(w.attr("transform","translate("+h.left()+", "+h.top()+")").selectAll("line.x").data(a.ticks(e)).enter().append("line").attr("x1",a).attr("x2",a).attr("y1",0).attr("y2",n-h.top()-h.bottom()).style("stroke","#eeeeee").style("shape-rendering","crispEdges"),d=g||(p?function(a){return p[a]}:function(a){var b=d3.format("s");a=Math.round(1E3*a)/1E3;return b(a)}),e=d3.svg.axis().scale(a).orient("bottom").ticks(e).tickFormat(d),
u.attr("transform","translate("+h.left()+", "+(n-h.bottom())+")").call(e),p&&(n="rotate(-90)",t&&(n+="translate(0,"+(a(.5)-a(0))+")"),u.selectAll("text").style("text-anchor","end").attr("dx","-.8em").attr("dy","-0.5em").attr("transform",n)));b&&(l.attr("transform","translate("+h.left()+", "+h.top()+")").selectAll("line.y").data(b.ticks(c-1)).enter().append("line").attr("x1",0).attr("x2",f-h.left()-h.right()).attr("y1",b).attr("y2",b).style("stroke","#eeeeee").style("shape-rendering","crispEdges"),
a=r?function(a){return r[a]}:function(a){var b=d3.format("s");a=Math.round(1E3*a)/1E3;return b(a)},b=d3.svg.axis().ticks(c-1).scale(b).orient("left").tickFormat(a),m.attr("transform","translate("+h.left()+", "+h.top()+")").call(b))};
epiviz.ui.charts.Visualization.prototype._drawTitle=function(){var a=this._svg.selectAll(".visualization-title"),b=epiviz.ui.charts.Visualization.CustomSettings;(b=this.customSettingsValues()[b.TITLE])&&""!=b.trim()?(a.empty()&&(a=this._svg.append("text").attr("class","visualization-title").attr("text-anchor","middle")),a.attr("x",.5*this.width()).attr("y",25).text(b)):a.empty()||a.remove()};
epiviz.ui.charts.Visualization.prototype.resize=function(a,b){a&&(this._properties.width=a);b&&(this._properties.height=b);this.draw();this._sizeChanged.notify(new epiviz.ui.charts.VisEventArgs(this._id,{width:this._properties.width,height:this._properties.height}))};epiviz.ui.charts.Visualization.prototype.updateSize=function(){this.resize(this._widthDif+this._container.width()-epiviz.ui.charts.Visualization.SVG_MARGIN,this._heightDif+this._container.height()-epiviz.ui.charts.Visualization.SVG_MARGIN)};
epiviz.ui.charts.Visualization.prototype.draw=function(a,b){void 0!=a&&(this._lastRange=a);void 0!=b&&(this._unalteredData=this._lastData=b,this._dataWaitEnd.notify(new epiviz.ui.charts.VisEventArgs(this._id)));this._svg.attr("width",this.width()).attr("height",this.height());this._drawTitle();return[]};epiviz.ui.charts.Visualization.prototype.container=function(){return this._container};epiviz.ui.charts.Visualization.prototype.id=function(){return this._id};
epiviz.ui.charts.Visualization.prototype.properties=function(){return this._properties};epiviz.ui.charts.Visualization.prototype.height=function(){return this._properties.height};epiviz.ui.charts.Visualization.prototype.width=function(){return this._properties.width};epiviz.ui.charts.Visualization.prototype.margins=function(){return this._properties.margins};epiviz.ui.charts.Visualization.prototype.colors=function(){return this._properties.colors};
epiviz.ui.charts.Visualization.prototype.setColors=function(a){a&&!a.equals(this._properties.colors)&&(this._properties.colors=a,this.draw(),this._colorsChanged.notify(new epiviz.ui.charts.VisEventArgs(this._id,this._properties.colors)))};epiviz.ui.charts.Visualization.prototype.colorLabels=function(){var a=Array(this.measurements().size());this.measurements().foreach(function(b,e){a[e]=b.name()});return a};epiviz.ui.charts.Visualization.prototype.measurements=function(){return this.properties().visConfigSelection.measurements};
epiviz.ui.charts.Visualization.prototype.customSettingsValues=function(){return this._customSettingsValues};
epiviz.ui.charts.Visualization.prototype.setCustomSettingsValues=function(a){if(this._customSettingsValues!=a&&a&&!epiviz.utils.mapEquals(this._customSettingsValues,a)){var b=epiviz.ui.charts.Visualization.CustomSettings,e=a[b.TITLE]||"",c=(this._customSettingsValues[b.TITLE]||"").trim().length,e=e.trim().length;if(!(c*e)&&c+e){var c=20*epiviz.utils.sign(e-c),e=a[b.MARGIN_TOP]||this._properties.margins.top(),d=a[b.MARGIN_LEFT]||this._properties.margins.left(),f=a[b.MARGIN_RIGHT]||this._properties.margins.right(),
n=a[b.MARGIN_BOTTOM]||this._properties.margins.bottom();a[b.MARGIN_TOP]=e+c;a[b.MARGIN_LEFT]=d;a[b.MARGIN_RIGHT]=f;a[b.MARGIN_BOTTOM]=n}c=this._customSettingsValues[epiviz.ui.charts.ChartType.CustomSettings.MEASUREMENT_GROUPS_AGGREGATOR];e=a[epiviz.ui.charts.ChartType.CustomSettings.MEASUREMENT_GROUPS_AGGREGATOR];this._customSettingsValues=a;b.MARGIN_TOP in a&&b.MARGIN_BOTTOM in a&&b.MARGIN_LEFT in a&&b.MARGIN_RIGHT in a&&(this._properties.margins=new epiviz.ui.charts.Margins(a[b.MARGIN_TOP],a[b.MARGIN_LEFT],
a[b.MARGIN_BOTTOM],a[b.MARGIN_RIGHT]),this._marginsChanged.notify(new epiviz.ui.charts.VisEventArgs(this._id,this._properties.margins)));if(c!=e){var h=this;this.transformData(this._lastRange,this._unalteredData).done(function(){h.draw()})}else this.draw();this._customSettingsChanged.notify(new epiviz.ui.charts.VisEventArgs(this._id,a))}};
epiviz.ui.charts.Visualization.prototype.setModifiedMethods=function(a){var b=this,e=!1;if(a){var c=Object.keys(a),d=new epiviz.deferred.Deferred,f=0,n={},h;for(h in a)a.hasOwnProperty(h)&&"_setModifiedMethods"!=h&&this[h].toString()!=a[h]&&(h in this._originalMethods||(this._originalMethods[h]=this[h]),function(b){epiviz.caja.cajole(a[b],epiviz.caja.buildChartMethodContext()).done(function(a){a&&(n[b]=a,e=!0,f+=1,f>=c.length&&d.resolve())})}(h));d.done(function(){if(e){for(var c in n)n.hasOwnProperty(c)&&
(b[c]=n[c],b._lastModifiedMethod=c);b._hasModifiedMethods=!0;b.draw();b._methodsModified.notify(new epiviz.ui.charts.VisEventArgs(b._id,a))}})}};epiviz.ui.charts.Visualization.prototype.hasModifiedMethods=function(){return this._hasModifiedMethods};epiviz.ui.charts.Visualization.prototype.lastModifiedMethod=function(){return this._lastModifiedMethod};
epiviz.ui.charts.Visualization.prototype.resetModifiedMethods=function(){if(this._hasModifiedMethods){for(var a in this._originalMethods)this._originalMethods.hasOwnProperty(a)&&(this[a]=this._originalMethods[a]);this._hasModifiedMethods=!1;this.draw();this._methodsReset.notify(new epiviz.ui.charts.VisEventArgs(this._id))}};
epiviz.ui.charts.Visualization.prototype.putMarker=function(a){if(a){var b;if(a.id()in this._markersMap){b=this._markersIndices[a.id()];var e=this._markers[b];if(e==a||e.type()==a.type()&&e.preMarkStr()==a.preMarkStr()&&e.markStr()==a.markStr())return;this._markers[b]=a}else b=this._markers.length,this._markers.push(a),this._markersIndices[a.id()]=b;this._markersMap[a.id()]=a;var c=this;this.transformData(this._lastRange,this._unalteredData).done(function(){c.draw()});this._markersModified.notify(new epiviz.ui.charts.VisEventArgs(this._id,
this._markers))}};epiviz.ui.charts.Visualization.prototype.removeMarker=function(a){if(a in this._markersMap){this._markers[this._markersIndices[a]]=null;delete this._markersMap[a];delete this._markersIndices[a];var b=this;this.transformData(this._lastRange,this._unalteredData).done(function(){b.draw()});this._markersModified.notify(new epiviz.ui.charts.VisEventArgs(this._id,this._markers))}};
epiviz.ui.charts.Visualization.prototype.getMarker=function(a){return a&&a in this._markersMap?this._markersMap[a]:null};epiviz.ui.charts.Visualization.prototype.displayType=function(){throw Error("unimplemented abstract method");};epiviz.ui.charts.Visualization.prototype.autoPropagateChanges=function(){return this._autoPropagateChanges};epiviz.ui.charts.Visualization.prototype.setAutoPropagateChanges=function(a){this._autoPropagateChanges=a};
epiviz.ui.charts.Visualization.prototype.transformData=function(a,b){var e=this._lastRange;void 0!=a&&(this._lastRange=a);void 0!=b&&(this._unalteredData=this._lastData=b);e&&a&&e.overlapsWith(a)&&e.width()==a.width()&&(this._slide=a.start()-e.start());e&&a&&e.overlapsWith(a)&&e.width()!=a.width()&&(this._zoom=e.width()/a.width());e=new epiviz.deferred.Deferred;e.resolve();return e};epiviz.ui.charts.Visualization.prototype.onHover=function(){return this._hover};
epiviz.ui.charts.Visualization.prototype.onUnhover=function(){return this._unhover};epiviz.ui.charts.Visualization.prototype.onSelect=function(){return this._select};epiviz.ui.charts.Visualization.prototype.onDeselect=function(){return this._deselect};
epiviz.ui.charts.Visualization.prototype.doHover=function(a){var b=this._container.find(".items"),e=b.find("> .hovered"),c=b.find("> .selected"),d=c.find("> .hovered"),f=function(){return a.overlapsWith(d3.select(this).data()[0])},b=b.find("> .item").filter(f);e.append(b);b=c.find("> .item").filter(f);d.append(b)};
epiviz.ui.charts.Visualization.prototype.doUnhover=function(){var a=this._container.find(".items"),b=a.find("> .hovered"),e=a.find("> .selected"),c=e.find("> .hovered");a.prepend(b.children());e.prepend(c.children())};
epiviz.ui.charts.Visualization.prototype.doSelect=function(a){var b=this._container.find(".items"),e=b.find("> .hovered"),c=b.find("> .selected"),d=c.find("> .hovered"),f=function(){return a.overlapsWith(d3.select(this).data()[0])},b=b.find("> .item").filter(f);c.append(b);b=e.find("> .item").filter(f);d.append(b)};
epiviz.ui.charts.Visualization.prototype.doDeselect=function(){var a=this._container.find(".items"),b=a.find("> .hovered"),e=a.find("> .selected"),c=e.find("> .hovered");a.prepend(e.find("> .item"));b.prepend(c.children())};epiviz.ui.charts.Visualization.prototype.onSave=function(){return this._save};epiviz.ui.charts.Visualization.prototype.onRemove=function(){return this._remove};epiviz.ui.charts.Visualization.prototype.onColorsChanged=function(){return this._colorsChanged};
epiviz.ui.charts.Visualization.prototype.onMethodsModified=function(){return this._methodsModified};epiviz.ui.charts.Visualization.prototype.onMethodsReset=function(){return this._methodsReset};epiviz.ui.charts.Visualization.prototype.onMarkersModified=function(){return this._markersModified};epiviz.ui.charts.Visualization.prototype.onCustomSettingsChanged=function(){return this._customSettingsChanged};epiviz.ui.charts.Visualization.prototype.onSizeChanged=function(){return this._sizeChanged};
epiviz.ui.charts.Visualization.prototype.onMarginsChanged=function(){return this._marginsChanged};epiviz.ui.charts.Visualization.prototype.onDataWaitStart=function(){return this._dataWaitStart};epiviz.ui.charts.Visualization.prototype.onDataWaitEnd=function(){return this._dataWaitEnd};
epiviz.ui.charts.Visualization.CustomSettings={TITLE:"title",MARGIN_LEFT:"marginLeft",MARGIN_RIGHT:"marginRight",MARGIN_TOP:"marginTop",MARGIN_BOTTOM:"marginBottom",X_MIN:"xMin",X_MAX:"xMax",Y_MIN:"yMin",Y_MAX:"yMax",COL_LABEL:"colLabel",ROW_LABEL:"rowLabel"};
epiviz.ui.charts.VisualizationType=function(a){var b=epiviz.Config.VisualizationPropertySettings;this._config=a;this._defaultSettings=epiviz.utils.mapCombine(epiviz.utils.mapCombine(a.chartSettings[this.typeName()],a.chartSettings[this.chartDisplayType()],!0),a.chartSettings["default"],!0);this._defaultWidth=this._defaultSettings[b.WIDTH];this._defaultHeight=this._defaultSettings[b.HEIGHT];this._defaultMargins=this._defaultSettings[b.MARGINS];this._defaultColors=a.colorPalettesMap[this._defaultSettings[b.COLORS]];
this._decorations=this._defaultSettings[b.DECORATIONS];this._customSettingsValues=a.chartCustomSettings[this.typeName()]||null};epiviz.ui.charts.VisualizationType.DisplayType={PLOT:"plot",TRACK:"track",DATA_STRUCTURE:"data-structure"};epiviz.ui.charts.VisualizationType.prototype.createNew=function(a,b,e){throw Error("unimplemented abstract method");};epiviz.ui.charts.VisualizationType.prototype.typeName=function(){throw Error("unimplemented abstract method");};
epiviz.ui.charts.VisualizationType.prototype.chartName=function(){throw Error("unimplemented abstract method");};epiviz.ui.charts.VisualizationType.prototype.chartHtmlAttributeName=function(){throw Error("unimplemented abstract method");};epiviz.ui.charts.VisualizationType.prototype.chartDisplayType=function(){throw Error("unimplemented abstract method");};epiviz.ui.charts.VisualizationType.prototype.measurementsFilter=function(){return function(a){return!0}};
epiviz.ui.charts.VisualizationType.prototype.isRestrictedToSameDatasourceGroup=function(){return!1};epiviz.ui.charts.VisualizationType.prototype.isRestrictedToRangeMeasurements=function(){return!1};epiviz.ui.charts.VisualizationType.prototype.isRestrictedToFeatureMeasurements=function(){return!this.isRestrictedToRangeMeasurements()};epiviz.ui.charts.VisualizationType.prototype.minSelectedMeasurements=function(){return 1};epiviz.ui.charts.VisualizationType.prototype.chartContainer=function(){return epiviz.ui.ControlManager.CHART_TYPE_CONTAINERS[this.chartDisplayType()]};
epiviz.ui.charts.VisualizationType.prototype.cssClass=function(){throw Error("unimplemented abstract method");};epiviz.ui.charts.VisualizationType.prototype.defaultWidth=function(){return this._defaultWidth};epiviz.ui.charts.VisualizationType.prototype.defaultHeight=function(){return this._defaultHeight};epiviz.ui.charts.VisualizationType.prototype.defaultMargins=function(){return this._defaultMargins};epiviz.ui.charts.VisualizationType.prototype.defaultColors=function(){return this._defaultColors};
epiviz.ui.charts.VisualizationType.prototype.decorations=function(){return this._decorations};epiviz.ui.charts.VisualizationType.prototype.customSettingsValues=function(){return this._customSettingsValues};
epiviz.ui.charts.VisualizationType.prototype.customSettingsDefs=function(){return[new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.TITLE,epiviz.ui.charts.CustomSetting.Type.STRING,"","Title"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.MARGIN_TOP,epiviz.ui.charts.CustomSetting.Type.NUMBER,this._defaultMargins.top(),"Top margin"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.MARGIN_BOTTOM,epiviz.ui.charts.CustomSetting.Type.NUMBER,
this._defaultMargins.bottom(),"Bottom margin"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.MARGIN_LEFT,epiviz.ui.charts.CustomSetting.Type.NUMBER,this._defaultMargins.left(),"Left margin"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.MARGIN_RIGHT,epiviz.ui.charts.CustomSetting.Type.NUMBER,this._defaultMargins.right(),"Right margin")]};
epiviz.ui.charts.ChartObject=function(a,b,e,c,d,f,n,h){epiviz.ui.charts.VisObject.call(this);this.id=a;this.start=b;this.end=e;this.values=c;this.seriesIndex=d;this.valueItems=f;this.measurements=n;this.cssClasses=h};epiviz.ui.charts.ChartObject.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.VisObject.prototype);epiviz.ui.charts.ChartObject.constructor=epiviz.ui.charts.ChartObject;epiviz.ui.charts.ChartObject.prototype.regionStart=function(){return this.start};
epiviz.ui.charts.ChartObject.prototype.regionEnd=function(){return this.end};epiviz.ui.charts.ChartObject.prototype.getMetadata=function(a,b,e){return this.valueItems?this.valueItems[a][b].rowItem.metadata(e):null};epiviz.ui.charts.ChartObject.prototype.getStart=function(a,b){return this.valueItems[a][b].rowItem.start()};epiviz.ui.charts.ChartObject.prototype.getEnd=function(a,b){return this.valueItems[a][b].rowItem.end()};epiviz.ui.charts.ChartObject.prototype.metadataColumns=function(){return Object.keys(this.valueItems[0][0].rowItem.rowMetadata())};
epiviz.ui.charts.ChartObject.prototype.dimensions=function(){var a=[];return this.valueItems?(a.push(this.valueItems.length),this.valueItems.length?a.push(this.valueItems[0].length):a.push(0),a):[0,0]};epiviz.ui.charts.ChartIndexObject=function(a,b,e,c,d,f,n,h){epiviz.ui.charts.VisObject.call(this);this.id=a;this.keys=b;this.keyValues=e;this.values=c;this.seriesIndex=n;this.valueItems=d;this.measurements=f;this.cssClasses=h};epiviz.ui.charts.ChartIndexObject.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.VisObject.prototype);
epiviz.ui.charts.ChartIndexObject.constructor=epiviz.ui.charts.ChartIndexObject;epiviz.ui.charts.ChartIndexObject.prototype.getMetadata=function(a,b,e){return this.valueItems?this.valueItems[a][b][e]:null};epiviz.ui.charts.ChartIndexObject.prototype.metadataColumns=function(){return this.keys};epiviz.ui.charts.ChartIndexObject.prototype.dimensions=function(){return[1,1]};
epiviz.ui.charts.Chart=function(a,b,e){epiviz.ui.charts.Visualization.call(this,a,b,e);this._nBins=100;this._globalIndexColorLabels=this._measurementColorLabels=this._binSize=null};epiviz.ui.charts.Chart.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Visualization.prototype);epiviz.ui.charts.Chart.constructor=epiviz.ui.charts.Chart;epiviz.ui.charts.Chart.prototype._initialize=function(){epiviz.ui.charts.Visualization.prototype._initialize.call(this);this._svg.classed("base-chart",!0)};
epiviz.ui.charts.Chart.prototype._addFilters=function(){var a=this._svg.append("defs"),b=a.append("filter").attr("id",this.id()+"-glow");b.append("feGaussianBlur").attr("id","gaussianBlur").attr("stdDeviation","2").attr("result","blurResult");b.append("feComposite").attr("id","composite").attr("in","SourceGraphic").attr("in2","blurResult").attr("operator","over");b=a.append("filter").attr("id",this.id()+"-contour");b.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation","1").attr("result",
"blur");b.append("feColorMatrix").attr("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 10 -1 ").attr("result","colorMatrix");b.append("feFlood").attr("result","fillColor").attr("flood-color","#800000").attr("in","blur");b.append("feComposite").attr("result","composite").attr("in","fillColor").attr("in2","colorMatrix").attr("operator","atop");b.append("feComposite").attr("in","SourceGraphic").attr("in2","composite").attr("operator","atop");a=a.append("filter").attr("id",this.id()+"-dropshadow").attr("filterUnits",
"userSpaceOnUse").attr("color-interpolation-filters","sRGB");b=a.append("feComponentTransfer").attr("in","SourceAlpha");b.append("feFuncR").attr("type","discrete").attr("tableValues","1");b.append("feFuncG").attr("type","discrete").attr("tableValues",198/255);b.append("feFuncB").attr("type","discrete").attr("tableValues","0");a.append("feGaussianBlur").attr("stdDeviation","2");a.append("feOffset").attr("dx","0").attr("dy","0").attr("result","shadow");a.append("feComposite").attr("in","SourceGraphic").attr("in2",
"shadow").attr("operator","over")};epiviz.ui.charts.Chart.prototype.draw=function(a,b){epiviz.ui.charts.Visualization.prototype.draw.call(this,a,b);a&&(this._binSize=Math.ceil((a.end()-a.start())/this._nBins));return[]};
epiviz.ui.charts.Chart.prototype.transformData=function(a,b){var e=new epiviz.deferred.Deferred,c=this;epiviz.ui.charts.Visualization.prototype.transformData.call(this,a,b).done(function(){c._lastData?c._lastData.ready(function(){var a=!1;c._lastData.measurements().every(function(b){a=b.type()!==epiviz.measurements.Measurement.Type.RANGE;return!a});if(a){var b;c._markers.every(function(a){a&&a.type()==epiviz.ui.charts.markers.VisualizationMarker.Type.GROUP_BY_MEASUREMENTS&&(b=a);return!b});if(b){var n=
epiviz.ui.charts.markers.MeasurementAggregators[c.customSettingsValues()[epiviz.ui.charts.ChartType.CustomSettings.MEASUREMENT_GROUPS_AGGREGATOR]];c._lastData=new epiviz.datatypes.MeasurementAggregatedGenomicData(c._lastData,b,n)}}var h;c._markers.every(function(a){a&&a.type()==epiviz.ui.charts.markers.VisualizationMarker.Type.FILTER&&(h=a);return!h});h&&(c._lastData=new epiviz.datatypes.ItemFilteredGenomicData(c._lastData,h));var g;c._markers.every(function(a){a&&a.type()==epiviz.ui.charts.markers.VisualizationMarker.Type.ORDER_BY_MEASUREMENTS&&
(g=a);return!g});g&&(c._lastData=new epiviz.datatypes.MeasurementOrderedGenomicData(c._lastData,g));c._lastData.ready(function(){var a=c._lastData;if(a.isReady()){var b=new epiviz.deferred.Deferred,d;c._markers.every(function(a){a&&a.type()==epiviz.ui.charts.markers.VisualizationMarker.Type.COLOR_BY_MEASUREMENTS&&(d=a);return!d});c._measurementColorLabels=null;if(d){var f=new epiviz.measurements.MeasurementHashtable;d.preMark()(a).done(function(e){var g=a.measurements();epiviz.utils.deferredFor(g.length,
function(b){var c=new epiviz.deferred.Deferred;d.mark()(g[b],a,e).done(function(a){f.put(g[b],a);c.resolve()});return c}).done(function(){c._measurementColorLabels=f;b.resolve()})})}else b.resolve();var g=new epiviz.deferred.Deferred,h;c._markers.every(function(a){a&&a.type()==epiviz.ui.charts.markers.VisualizationMarker.Type.COLOR_BY_ROW&&(h=a);return!h});c._globalIndexColorLabels=null;if(h){var n={};h.preMark()(a).done(function(b){var d=a.firstSeries();epiviz.utils.deferredFor(d.size(),function(c){var e=
new epiviz.deferred.Deferred;h.mark()(d.getRow(c),a,b).done(function(a){n[c+d.globalStartIndex()]=a;e.resolve()});return e}).done(function(){c._globalIndexColorLabels=n;g.resolve()})})}else g.resolve();b.done(function(){g.state()==epiviz.deferred.Deferred.State.RESOLVED&&(c._dataWaitEnd.notify(new epiviz.ui.charts.VisEventArgs(c.id())),e.resolve())});g.done(function(){b.state()==epiviz.deferred.Deferred.State.RESOLVED&&(c._dataWaitEnd.notify(new epiviz.ui.charts.VisEventArgs(c.id())),e.resolve())})}})}):
e.resolve()});return e};epiviz.ui.charts.Chart.prototype.properties=function(){return epiviz.ui.charts.Visualization.prototype.properties.call(this)};epiviz.ui.charts.Track=function(a,b,e){epiviz.ui.charts.Chart.call(this,a,b,e);this._highlightGroup=this._background=null};epiviz.ui.charts.Track.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Chart.prototype);epiviz.ui.charts.Track.constructor=epiviz.ui.charts.Track;
epiviz.ui.charts.Track.prototype._initialize=function(){this._properties.width="100%";epiviz.ui.charts.Chart.prototype._initialize.call(this);var a=this;this._highlightGroup=this._svg.append("g").attr("class","track-highlight");this._background=this._svg.append("rect").attr("class","chart-background").attr("x",0).attr("y",0).attr("width","100%").attr("height","100%").attr("fill","#ffffff").attr("fill-opacity","0");this._background.on("mouseover",function(){a._captureMouseHover()}).on("mousemove",
function(){a._captureMouseHover()}).on("mouseout",function(){a._unhover.notify(new epiviz.ui.charts.VisEventArgs(a.id()))})};epiviz.ui.charts.Track.prototype.draw=function(a,b,e,c){a=epiviz.ui.charts.Chart.prototype.draw.call(this,a,b);this._drawLegend();return a};epiviz.ui.charts.Track.prototype.displayType=function(){return epiviz.ui.charts.VisualizationType.DisplayType.TRACK};
epiviz.ui.charts.Track.prototype.doHover=function(a){epiviz.ui.charts.Chart.prototype.doHover.call(this,a);if(void 0!=a.start&&void 0!=a.end&&this._lastRange){this._highlightGroup.selectAll("rect").remove();this._highlightGroup.attr("transform","translate("+this.margins().left()+", 0)");var b=epiviz.ui.charts.Axis,e=d3.scale.linear().domain([this._lastRange.start(),this._lastRange.end()]).range([0,this.width()-this.margins().sumAxis(b.X)]),b=[];if(a.measurements&&a.measurements.length)for(var c=0;c<
a.valueItems[0].length;++c){var d=a.valueItems[0][c].rowItem;b.push({start:d.start(),end:d.end()})}else b.push({start:a.start,end:a.end});this._highlightGroup.selectAll("rect").data(b,function(a){return sprintf("%s-%s",a.start,a.end)}).enter().append("rect").style("fill",this.colors().get(0)).style("fill-opacity","0.1").attr("x",function(a){var b=e(a.end+1)-e(a.start),c=Math.max(5,b);return e(a.start)+.5*b-.5*c}).attr("width",function(a){return Math.max(5,e(a.end+1)-e(a.start))}).attr("y",0).attr("height",
this.height())}};epiviz.ui.charts.Track.prototype.doUnhover=function(){epiviz.ui.charts.Chart.prototype.doUnhover.call(this);this._highlightGroup.selectAll("rect").remove()};
epiviz.ui.charts.Track.prototype._captureMouseHover=function(){if(this._lastRange){this._unhover.notify(new epiviz.ui.charts.VisEventArgs(this.id()));var a=d3.scale.linear().domain([0,this.width()]).range([this._lastRange.start(),this._lastRange.end()])(d3.mouse(this._background[0][0])[0])-this._binSize/2,b=a+this._binSize,a=new epiviz.ui.charts.ChartObject(sprintf("%s-highlight",this.id()),a,b);this._hover.notify(new epiviz.ui.charts.VisEventArgs(this.id(),a))}};
epiviz.ui.charts.Track.prototype._drawLegend=function(){var a=this;this._svg.selectAll(".chart-title").remove();this._svg.selectAll(".chart-title-color ").remove();if(this._lastData&&this._lastData.isReady()){var b=this._lastData.measurements(),e=this._svg.selectAll(".chart-title").data(b).enter().append("text").attr("class","chart-title").attr("font-weight","bold").attr("fill",function(b,c){return a._measurementColorLabels?a.colors().getByKey(a._measurementColorLabels.get(b)):a.colors().get(c)}).attr("y",
a.margins().top()-5).text(function(a,b){return a.name()}),c=0,d=[];$("#"+this.id()+" .chart-title").each(function(a){d.push(c);c+=this.getBBox().width+15});e.attr("x",function(b,c){return a.margins().left()+10+d[c]});this._svg.selectAll(".chart-title-color").data(b).enter().append("circle").attr("class","chart-title-color").attr("cx",function(b,c){return a.margins().left()+4+d[c]}).attr("cy",a.margins().top()-9).attr("r",4).style("shape-rendering","auto").style("stroke-width","0").style("fill",function(b,
c){return a._measurementColorLabels?a.colors().getByKey(a._measurementColorLabels.get(b)):a.colors().get(c)})}};epiviz.ui.charts.Plot=function(a,b,e){epiviz.ui.charts.Chart.call(this,a,b,e)};epiviz.ui.charts.Plot.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Chart.prototype);epiviz.ui.charts.Plot.constructor=epiviz.ui.charts.Plot;epiviz.ui.charts.Plot.prototype.displayType=function(){return epiviz.ui.charts.VisualizationType.DisplayType.PLOT};
epiviz.ui.charts.DataStructureVisualization=function(a,b,e){epiviz.ui.charts.Visualization.call(this,a,b,e);this._datasourceGroup=e.visConfigSelection.datasourceGroup;this._dataprovider=e.visConfigSelection.dataprovider;if(!this._dataprovider){var c=this;e.visConfigSelection.measurements.foreach(function(a){if(a.dataprovider())return c._dataprovider=a.dataprovider(),!0})}var d=new epiviz.measurements.MeasurementSet;e.visConfigSelection.measurements.foreach(function(a){if(a.dataprovider())return d.add(a),
!0});e.visConfigSelection.measurements=d;this._propagateHierarchyChanges=new epiviz.events.Event;this._propagateIcicleLocationChanges=new epiviz.events.Event;this._requestHierarchy=new epiviz.events.Event};epiviz.ui.charts.DataStructureVisualization.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Visualization.prototype);epiviz.ui.charts.DataStructureVisualization.constructor=epiviz.ui.charts.DataStructureVisualization;epiviz.ui.charts.DataStructureVisualization.prototype.displayType=function(){return epiviz.ui.charts.VisualizationType.DisplayType.DATA_STRUCTURE};
epiviz.ui.charts.DataStructureVisualization.prototype.datasourceGroup=function(){return this._datasourceGroup};epiviz.ui.charts.DataStructureVisualization.prototype.dataprovider=function(){return this._dataprovider};epiviz.ui.charts.DataStructureVisualization.prototype.colorLabels=function(){for(var a=[],b=0;b<this.colors().size()&&20>b;++b)a.push("Color "+(b+1));return a};epiviz.ui.charts.DataStructureVisualization.prototype.onPropagateHierarchyChanges=function(){return this._propagateHierarchyChanges};
epiviz.ui.charts.DataStructureVisualization.prototype.onPropagateIcicleLocationChanges=function(){return this._propagateIcicleLocationChanges};epiviz.ui.charts.DataStructureVisualization.prototype.firePropagateHierarchyChanges=function(){this._propagateHierarchyChanges.notify(new epiviz.ui.charts.VisEventArgs(this.id(),new epiviz.ui.controls.VisConfigSelection(void 0,void 0,this.datasourceGroup(),this.dataprovider(),void 0,void 0,void 0,{})))};
epiviz.ui.charts.DataStructureVisualization.prototype.onRequestHierarchy=function(){return this._requestHierarchy};epiviz.ui.charts.tree={};
epiviz.ui.charts.tree.HierarchyVisualization=function(a,b,e){epiviz.ui.charts.DataStructureVisualization.call(this,a,b,e);this._selectedNodes=JSON.parse(this._customSettingsValues.nodeSel)||{};this._selectedLevels={};this._nodesOrder={};this._selectMode=!1;var c=this;this._partition=d3.layout.partition().value(function(a){return 1}).sort(function(a,b){return(c._calcNodeOrder(a)||0)-(c._calcNodeOrder(b)||0)});this._oldUiDataMap=this._rootDepth=this._oldRootDepth=this._subtreeDepth=this._oldSubtreeDepth=
this._uiData=null;this._uiDataMap={};this._rootLineageLabel=this._allLevels=this._levelsTaxonomy=this._selectedNode=this._referenceNode=null;this.selCutLevel=parseInt(this._customSettingsValues.aggLevel)||3;this._selectedLevels[this.selCutLevel]=2;this._firstRun=0};epiviz.ui.charts.tree.HierarchyVisualization.SELECTION_CLASSES={0:"none-select",1:"leaves-select",2:"node-select"};epiviz.ui.charts.tree.HierarchyVisualization.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.DataStructureVisualization.prototype);
epiviz.ui.charts.tree.HierarchyVisualization.constructor=epiviz.ui.charts.tree.HierarchyVisualization;
epiviz.ui.charts.tree.HierarchyVisualization.prototype.draw=function(a,b){epiviz.ui.charts.DataStructureVisualization.prototype.draw.call(this,a,b);var e=this;b=this._lastData;a=this._lastRange;if(null!=this._lastData.dataprovidertype&&"websocket"==this._lastData.dataprovidertype){b=this._lastData.tree;a=this._lastRange;if(b){e._selectedNodes={};e._oldUiDataMap=null;e._uiDataMap={};for(var c=Object.keys(this._lastData.nodeSelectionTypes),d=0;d<c.length;d++)1!=this._lastData.nodeSelectionTypes[c[d]]&&
(e._selectedNodes[c[d]]=this._lastData.nodeSelectionTypes[c[d]]);e._selectedLevels={};e._selectedLevels[this._lastData.selectionLevel]=2}this._lastData=b}if(b){this._oldRootDepth=this._rootDepth;this._rootDepth=b.depth;this._referenceNode=null;this._selectedNode=(c=b.children&&b.children.length?this._uiDataMap[b.children[0].id]:null)?new epiviz.ui.charts.tree.UiNode(c.id,c.name,c.children,c.parentId,c.size,c.depth,c.nchildren,c.nleaves,c.selectionType,c.order,c.globalDepth,c.taxonomy,c.x,c.dx,c.y,
c.dy,c.parent,c.start,c.end):null;this._oldSubtreeDepth=this._subtreeDepth;this._subtreeDepth=0;this._allLevels=b.rootTaxonomies;this._rootLineageLabel=b.lineageLabel;null==this._oldUiDataMap?this._oldUiDataMap=this._uiDataMap:Object.keys(e._uiDataMap).forEach(function(a){e._oldUiDataMap[a]=e._uiDataMap[a]});this._uiDataMap={};c=this._partition.nodes(b);this._uiData=[];var f=null;c.every(function(a){return a.id==b.id?(f=epiviz.ui.charts.tree.UiNode.deepCopy(a),!1):!0});var n={};epiviz.ui.charts.tree.Node.dfs(f,
function(a){e._uiData.push(a);a.taxonomy in n||(n[a.taxonomy]=a.taxonomy)});this._levelsTaxonomy=Object.keys(n);this._uiData.forEach(function(a){e._uiDataMap[a.id]=a;(!e._referenceNode||void 0==e._referenceNode.x||e._referenceNode.depth<a.depth)&&a.id in e._oldUiDataMap&&(e._referenceNode=a);e._subtreeDepth<a.depth+1&&(e._subtreeDepth=a.depth+1)});this._selectedNode||(this._selectedNode=b.children&&b.children.length?this._uiDataMap[b.children[0].id]:this._uiDataMap[b.id]);this._referenceNode||(this._referenceNode=
this._uiData[0]);null==this._oldSubtreeDepth&&(this._oldSubtreeDepth=this._subtreeDepth);null==this._oldRootDepth&&(this._oldRootDepth=this._rootDepth);0==Object.keys(e._selectedLevels).length?e._selectedLevels["3"]=2:e.selCutLevel=parseInt(Object.keys(e._selectedLevels)[0]);Object.keys(e._selectedLevels).forEach(function(a){parseInt(a)<e.selCutLevel&&(e.selCutLevel=parseInt(a))});this._uiData.forEach(function(a){null!=e._oldUiDataMap[a.id]&&(a.selectionType=e._oldUiDataMap[a.id].selectionType,e._updateSelectionAttribute(a,
a.selectionType));a.globalDepth==e.selCutLevel&&0!=a.selectionType&&e._updateSelectionAttribute(a,2)});Object.keys(e._selectedNodes).forEach(function(a){e._uiDataMap[a]&&e._updateSelectionAttribute(e._uiDataMap[a],e._selectedNodes[a])})}return this._uiData};epiviz.ui.charts.tree.HierarchyVisualization.prototype._calcNodeOrder=function(a){return a.id in this._nodesOrder?this._nodesOrder[a.id]:a.id in this._uiDataMap?this._uiDataMap[a.id].order:a.order};
epiviz.ui.charts.tree.HierarchyVisualization.prototype._getOldNode=function(a){var b=this._oldUiDataMap[a.id],e=this._uiDataMap[a.id];if(b)return b;if(!e)return a;var c=e.depth+this._rootDepth-this._oldRootDepth,b=0>c||c>=this._subtreeDepth,c=0>c?0:Math.min(1,c/this._oldSubtreeDepth);return new epiviz.ui.charts.tree.UiNode(a.id,a.name,a.children,a.parentId,a.size,a.depth,a.nchildren,a.nleaves,a.selectionType,a.order,a.globalDepth,a.taxonomy,b?e.x:e.x<=this._referenceNode.x?0:1,b?e.dx:0,c,b?0:e.y+
e.dy-c,null,a.start,a.end)};
epiviz.ui.charts.tree.HierarchyVisualization.prototype._getNewNode=function(a){var b=this._oldUiDataMap[a.id],e=this._uiDataMap[a.id];if(e)return e;if(!b)return a;var c=b.depth-this._rootDepth+this._oldRootDepth,e=0>c||c>=this._subtreeDepth,c=0>c?0:Math.min(1,c/this._subtreeDepth);return new epiviz.ui.charts.tree.UiNode(a.id,a.name,a.children,a.parentId,a.size,a.depth,a.nchildren,a.nleaves,a.selectionType,a.order,a.globalDepth,a.taxonomy,e?b.x:b.x<=this._selectedNode.x?0:1,e?b.dx:0,c,e?0:b.y+b.dy-
c,null,a.start,a.end)};
epiviz.ui.charts.tree.HierarchyVisualization.prototype._drawLegend=function(){this._svg.selectAll(".chart-title").remove();this._svg.selectAll(".chart-title-color").remove();if(this._levelsTaxonomy){var a=this,b=this._svg.selectAll(".chart-title").data(this._levelsTaxonomy);b.enter().append("text").attr("class","chart-title").attr("font-weight","bold").attr("y",this.margins().top()-5);b.attr("fill",function(b){return a.colors().getByKey(b)}).text(function(a){return a});var e=0,c=[];$("#"+this.id()+
" .chart-title").each(function(a){c.push(e);e+=this.getBBox().width+15});b.attr("x",function(b,e){return a.margins().left()+10+c[e]});this._svg.selectAll(".chart-title-color").data(this._levelsTaxonomy).enter().append("circle").attr("class","chart-title-color").attr("cx",function(b,e){return a.margins().left()+4+c[e]}).attr("cy",a.margins().top()-9).attr("r",4).style("shape-rendering","auto").style("stroke-width","0").style("fill",function(b){return a.colors().getByKey(b)})}};
epiviz.ui.charts.tree.HierarchyVisualization.prototype.levelsTaxonomy=function(){return this._levelsTaxonomy};epiviz.ui.charts.tree.HierarchyVisualization.prototype.selectMode=function(){return this._selectMode};epiviz.ui.charts.tree.HierarchyVisualization.prototype.setSelectMode=function(a){this._selectMode=a};
epiviz.ui.charts.tree.HierarchyVisualization.prototype.selectNode=function(a){function b(a){a.selectionType=e;c._changeNodeSelection(a,e);0!=a.children.length&&a.children.forEach(function(a){b(a)})}var e=(a.selectionType+1)%3;this._selectedNodes[a.id]=e;var c=this;b(a);this.autoPropagateChanges()&&this.firePropagateHierarchyChanges();return e};
epiviz.ui.charts.tree.HierarchyVisualization.prototype.selectLevel=function(a){var b=this,e=[],c=[];$.each(this._selectedNodes,function(d,f){var h=b._uiDataMap[d];void 0!=h&&h.globalDepth==a&&(e.push(d),c.push(h))});e.forEach(function(a){delete b._selectedNodes[a]});var d;if(a in this._selectedLevels)d=(this._selectedLevels[a]+1)%3,0==d&&(d=1),this._selectedLevels[a]=d;else{var f=Object.keys(b._selectedLevels)[0];b._changeLevelSelection(this._levelsTaxonomy[f],1);b._uiData.forEach(function(a){a.globalDepth==
f&&0!=a.selectionType&&(b._updateSelectionAttribute(a,1),b._uiDataMap[a.id]==a.selectionType)});for(var n in b._oldUiDataMap){var h=b._oldUiDataMap[n];h.globalDepth==f&&0!=h.selectionType&&(b._updateSelectionAttribute(h,1),1==b._oldUiDataMap[n])}this._selectedLevels={};d=2;this._selectedLevels[a]=epiviz.ui.charts.tree.NodeSelectionType.NODE}c.forEach(function(a){b._changeNodeSelection(a,d)});b._changeLevelSelection(b._levelsTaxonomy[a],d);b._uiData.forEach(function(c){c.globalDepth==a&&(c.selectionType=
b._selectedLevels[a.toString()],b._updateSelectionAttribute(c,c.selectionType),b._uiDataMap[c.id]==c.selectionType)});for(n in b._oldUiDataMap)h=b._oldUiDataMap[n],h.globalDepth==a&&(h.selectionType=b._selectedLevels[a.toString()],b._updateSelectionAttribute(h,h.selectionType),b._oldUiDataMap[n]==h.selectionType);this.autoPropagateChanges()&&this.firePropagateHierarchyChanges()};epiviz.ui.charts.tree.HierarchyVisualization.prototype.selectedNodes=function(){return this._selectedNodes};
epiviz.ui.charts.tree.HierarchyVisualization.prototype.nodesOrder=function(){return this._nodesOrder};epiviz.ui.charts.tree.HierarchyVisualization.prototype._changeNodeSelection=function(a,b){var e=epiviz.ui.charts.tree.HierarchyVisualization.SELECTION_CLASSES,c=this._svg.select("#"+this.id()+"-"+a.id),d;for(d in e)e.hasOwnProperty(d)&&c.classed(e[d],!1);c.classed(e[b],!0)};
epiviz.ui.charts.tree.HierarchyVisualization.prototype._changeLevelSelection=function(a,b){var e=epiviz.ui.charts.tree.HierarchyVisualization.SELECTION_CLASSES,c=this._svg.select("#"+this.id()+"-"+a),d;for(d in e)e.hasOwnProperty(d)&&c.classed(e[d],!1);c.classed("custom-select",!1);c.classed(e[b],!0)};
epiviz.ui.charts.tree.HierarchyVisualization.prototype.firePropagateHierarchyChanges=function(){var a=this._selectedNodes,b=this._nodesOrder,e=this._selectedLevels;this.onPropagateHierarchyChanges().notify(new epiviz.ui.charts.VisEventArgs(this.id(),new epiviz.ui.controls.VisConfigSelection(void 0,void 0,this.datasourceGroup(),this.dataprovider(),void 0,void 0,void 0,{selection:a,order:b,selectedLevels:e})))};
epiviz.ui.charts.tree.HierarchyVisualization.prototype.fireRequestHierarchy=function(){var a=null;this._lastData&&this._lastData.children&&(a=1==this._lastData.children.length?this._lastData.children[0].id:this._lastData.id);this.onRequestHierarchy().notify(new epiviz.ui.charts.VisEventArgs(this.id(),new epiviz.ui.controls.VisConfigSelection(void 0,void 0,this.datasourceGroup(),this.dataprovider(),void 0,void 0,void 0,a)))};
epiviz.ui.charts.tree.HierarchyVisualization.prototype.setAutoPropagateChanges=function(a){epiviz.ui.charts.Visualization.prototype.setAutoPropagateChanges.call(this,a);a&&this.firePropagateHierarchyChanges()};epiviz.ui.charts.tree.HierarchyVisualization.prototype._updateSelectionAttribute=function(a,b){function e(a,b){0!=a.selectionType&&(a.selectionType=b);c._changeNodeSelection(a,a.selectionType);0!=a.children.length&&a.children.forEach(function(b){e(b,a.selectionType)})}var c=this;e(a,b)};
epiviz.ui.charts.ChartType=function(a){epiviz.ui.charts.VisualizationType.call(this,a)};epiviz.ui.charts.ChartType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.VisualizationType.prototype);epiviz.ui.charts.ChartType.constructor=epiviz.ui.charts.ChartType;epiviz.ui.charts.ChartType.prototype.createNew=function(a,b,e){throw Error("unimplemented abstract method");};
epiviz.ui.charts.ChartType.prototype.customSettingsDefs=function(){var a=epiviz.ui.charts.VisualizationType.prototype.customSettingsDefs.call(this);if(this.isRestrictedToRangeMeasurements())return a;var b=Object.keys(epiviz.ui.charts.markers.MeasurementAggregators);return a.concat([new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.ChartType.CustomSettings.MEASUREMENT_GROUPS_AGGREGATOR,epiviz.ui.charts.CustomSetting.Type.CATEGORICAL,b[0],"Aggregator for measurement groups",b)])};
epiviz.ui.charts.ChartType.CustomSettings={MEASUREMENT_GROUPS_AGGREGATOR:"measurementGroupsAggregator"};epiviz.ui.charts.TrackType=function(a){epiviz.ui.charts.ChartType.call(this,a)};epiviz.ui.charts.TrackType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.ChartType.prototype);epiviz.ui.charts.TrackType.constructor=epiviz.ui.charts.TrackType;epiviz.ui.charts.TrackType.prototype.chartDisplayType=function(){return epiviz.ui.charts.VisualizationType.DisplayType.TRACK};
epiviz.ui.charts.TrackType.prototype.cssClass=function(){return"track-container ui-widget-content"};epiviz.ui.charts.PlotType=function(a){epiviz.ui.charts.ChartType.call(this,a)};epiviz.ui.charts.PlotType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.ChartType.prototype);epiviz.ui.charts.PlotType.constructor=epiviz.ui.charts.PlotType;epiviz.ui.charts.PlotType.prototype.chartDisplayType=function(){return epiviz.ui.charts.VisualizationType.DisplayType.PLOT};
epiviz.ui.charts.PlotType.prototype.cssClass=function(){return"plot-container ui-widget-content"};epiviz.ui.charts.DataStructureVisualizationType=function(a){epiviz.ui.charts.VisualizationType.call(this,a)};epiviz.ui.charts.DataStructureVisualizationType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.VisualizationType.prototype);epiviz.ui.charts.DataStructureVisualizationType.constructor=epiviz.ui.charts.DataStructureVisualizationType;
epiviz.ui.charts.DataStructureVisualizationType.prototype.chartDisplayType=function(){return epiviz.ui.charts.VisualizationType.DisplayType.DATA_STRUCTURE};epiviz.ui.charts.DataStructureVisualizationType.prototype.cssClass=function(){return"data-structure-container ui-widget-content"};epiviz.ui.charts.DataStructureVisualizationType.prototype.isRestrictedToSameDatasourceGroup=function(){return!0};epiviz.ui.charts.DataStructureVisualizationType.prototype.hasMeasurements=function(){return!1};
epiviz.ui.charts.DataStructureVisualizationType.prototype.customSettingsDefs=function(){return epiviz.ui.charts.VisualizationType.prototype.customSettingsDefs.call(this)};epiviz.ui.charts.tree.HierarchyVisualizationType=function(a){epiviz.ui.charts.DataStructureVisualizationType.call(this,a)};epiviz.ui.charts.tree.HierarchyVisualizationType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.DataStructureVisualizationType.prototype);epiviz.ui.charts.tree.HierarchyVisualizationType.constructor=epiviz.ui.charts.tree.HierarchyVisualizationType;
epiviz.ui.charts.ChartFactory=function(a){this._config=a;this._types={};for(var b=this._size=0;b<a.chartTypes.length;++b)this.register(a.chartTypes[b])};epiviz.ui.charts.ChartFactory.prototype.size=function(){return this._size};epiviz.ui.charts.ChartFactory.prototype.registerType=function(a){a.typeName()in this._types||++this._size;this._types[a.typeName()]=a};
epiviz.ui.charts.ChartFactory.prototype.unregisterType=function(a){if(!(a.typeName()in this._types))return!1;--this._size;delete this._types[a.typeName()];return!0};epiviz.ui.charts.ChartFactory.prototype.register=function(a){a=epiviz.utils.evaluateFullyQualifiedTypeName(a);if(!a)return!1;this.registerType(new a(this._config));return!0};epiviz.ui.charts.ChartFactory.prototype.unregister=function(a){return(a=epiviz.utils.evaluateFullyQualifiedTypeName(a))?this.unregisterType(new a(this._config)):!1};
epiviz.ui.charts.ChartFactory.prototype.get=function(a){return a&&a in this._types?this._types[a]:null};epiviz.ui.charts.ChartFactory.prototype.foreach=function(a){for(var b in this._types)if(this._types.hasOwnProperty(b)&&a(b,this._types[b]))break};epiviz.ui.charts.decoration={};epiviz.ui.charts.decoration.VisualizationDecoration=function(a,b,e){this._visualization=a;this._otherDecoration=b;this._config=e};
epiviz.ui.charts.decoration.VisualizationDecoration.prototype.decorate=function(){this._otherDecoration&&this._otherDecoration.decorate()};epiviz.ui.charts.decoration.VisualizationDecoration.prototype.visualization=function(){return this._visualization};epiviz.ui.charts.decoration.VisualizationDecoration.prototype.otherDecoration=function(){return this._otherDecoration};epiviz.ui.charts.decoration.VisualizationDecoration.prototype.config=function(){return this._config};
epiviz.ui.charts.decoration.ChartOptionButton=function(a,b,e){epiviz.ui.charts.decoration.VisualizationDecoration.call(this,a,b,e);this.isChartOptionButton=!0};epiviz.ui.charts.decoration.ChartOptionButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.VisualizationDecoration.prototype);epiviz.ui.charts.decoration.ChartOptionButton.constructor=epiviz.ui.charts.decoration.ChartOptionButton;
epiviz.ui.charts.decoration.ChartOptionButton.prototype.decorate=function(){epiviz.ui.charts.decoration.VisualizationDecoration.prototype.decorate.call(this);if(this.isChartOptionButton){for(var a=0,b=this.otherDecoration();b;b=b.otherDecoration())b.isChartOptionButton&&++a;var e=$(sprintf('<button style="position: absolute; top: 5px; right: %spx">%s</button>',5+30*a,this._text())).appendTo(this.visualization().container()).button(this._renderOptions()).click(this._click());this.visualization().container().mousemove(function(){e.show()}).mouseleave(function(){e.hide()})}};
epiviz.ui.charts.decoration.ChartOptionButton.prototype._click=function(){return function(){}};epiviz.ui.charts.decoration.ChartOptionButton.prototype._renderOptions=function(){return{}};epiviz.ui.charts.decoration.ChartOptionButton.prototype._text=function(){return""};epiviz.ui.charts.decoration.RemoveChartButton=function(a,b){epiviz.ui.charts.decoration.ChartOptionButton.call(this,a,b)};epiviz.ui.charts.decoration.RemoveChartButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.ChartOptionButton.prototype);
epiviz.ui.charts.decoration.RemoveChartButton.constructor=epiviz.ui.charts.decoration.RemoveChartButton;epiviz.ui.charts.decoration.RemoveChartButton.prototype._click=function(){var a=this;return function(){a.visualization().onRemove().notify(new epiviz.ui.charts.VisEventArgs(a.visualization().id()))}};epiviz.ui.charts.decoration.RemoveChartButton.prototype._renderOptions=function(){return{icons:{primary:"ui-icon ui-icon-cancel"},text:!1}};
epiviz.ui.charts.decoration.RemoveChartButton.prototype._text=function(){return"Remove"};epiviz.ui.charts.decoration.SaveChartButton=function(a,b){epiviz.ui.charts.decoration.ChartOptionButton.call(this,a,b)};epiviz.ui.charts.decoration.SaveChartButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.ChartOptionButton.prototype);epiviz.ui.charts.decoration.SaveChartButton.constructor=epiviz.ui.charts.decoration.SaveChartButton;
epiviz.ui.charts.decoration.SaveChartButton.prototype._click=function(){var a=this;return function(){a.visualization().onSave().notify(new epiviz.ui.charts.VisEventArgs(a.visualization().id()))}};epiviz.ui.charts.decoration.SaveChartButton.prototype._renderOptions=function(){return{icons:{primary:"ui-icon ui-icon-disk"},text:!1}};epiviz.ui.charts.decoration.SaveChartButton.prototype._text=function(){return"Save"};
epiviz.ui.charts.decoration.ChartColorsButton=function(a,b,e){epiviz.ui.charts.decoration.ChartOptionButton.call(this,a,b,e)};epiviz.ui.charts.decoration.ChartColorsButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.ChartOptionButton.prototype);epiviz.ui.charts.decoration.ChartColorsButton.constructor=epiviz.ui.charts.decoration.ChartColorsButton;
epiviz.ui.charts.decoration.ChartColorsButton.prototype._click=function(){var a=this;return function(){var b=a.visualization().colorLabels();(new epiviz.ui.controls.ColorPickerDialog({ok:function(b){a.visualization().setColors(b)},cancel:function(){},reset:function(){}},b,a.config().colorPalettes,a.visualization().colors())).show()}};epiviz.ui.charts.decoration.ChartColorsButton.prototype._renderOptions=function(){return{icons:{primary:"ui-icon ui-icon-colorpicker"},text:!1}};
epiviz.ui.charts.decoration.ChartColorsButton.prototype._text=function(){return"Colors"};epiviz.ui.charts.decoration.CustomSettingsButton=function(a,b){epiviz.ui.charts.decoration.ChartOptionButton.call(this,a,b)};epiviz.ui.charts.decoration.CustomSettingsButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.ChartOptionButton.prototype);epiviz.ui.charts.decoration.CustomSettingsButton.constructor=epiviz.ui.charts.decoration.CustomSettingsButton;
epiviz.ui.charts.decoration.CustomSettingsButton.prototype._click=function(){var a=this;return function(){(new epiviz.ui.controls.CustomSettingsDialog("Edit custom settings",{ok:function(b){a.visualization().setCustomSettingsValues(b)},cancel:function(){}},a.visualization().properties().customSettingsDefs,a.visualization().customSettingsValues())).show()}};epiviz.ui.charts.decoration.CustomSettingsButton.prototype._renderOptions=function(){return{icons:{primary:"ui-icon ui-icon-gear"},text:!1}};
epiviz.ui.charts.decoration.CustomSettingsButton.prototype._text=function(){return"Custom settings"};epiviz.ui.charts.decoration.ToggleTooltipButton=function(a,b){epiviz.ui.charts.decoration.VisualizationDecoration.call(this,a,b);this.isChartOptionButton=!0;this._checked=!1};epiviz.ui.charts.decoration.ToggleTooltipButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.VisualizationDecoration.prototype);epiviz.ui.charts.decoration.ToggleTooltipButton.constructor=epiviz.ui.charts.decoration.ToggleTooltipButton;
epiviz.ui.charts.decoration.ToggleTooltipButton.prototype.decorate=function(){epiviz.ui.charts.decoration.VisualizationDecoration.prototype.decorate.call(this);for(var a=0,b=this.otherDecoration();b;b=b.otherDecoration())b.isChartOptionButton&&++a;var e=this,b=sprintf("%s-tooltip-button",this.visualization().id());this.visualization().container().append(sprintf('<div id="%1$s-container" style="position: absolute; top: 5px; right: %2$spx"><input type="checkbox" id="%1$s" %3$s /><label for="%1$s" >Toggle tooltip</label></div>',
b,5+30*a,this._checked?'checked="checked"':""));var c=$("#"+b),d=$("#"+b+"-container");c.button({text:!1,icons:{primary:"ui-icon-comment"}}).click(function(){e._checked=c.is(":checked")});this.visualization().container().mousemove(function(){d.show()}).mouseleave(function(){d.hide()})};epiviz.ui.charts.decoration.ToggleTooltipButton.prototype.checked=function(){return this._checked};
epiviz.ui.charts.decoration.CodeButton=function(a,b,e){epiviz.ui.charts.decoration.ChartOptionButton.call(this,a,b,e);this.isCodeButton=!0;this._controlCreators=[];a=!0;var c;for(b=this.otherDecoration();b;b=b.otherDecoration())b.isCodeButton&&(a=!1,c=b);c&&c._addControlCreator(this._controlCreator(),this._saveHandler(),this._cancelHandler());(this.isChartOptionButton=a)&&this._addControlCreator(this._controlCreator(),this._saveHandler(),this._cancelHandler())};
epiviz.ui.charts.decoration.CodeButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.ChartOptionButton.prototype);epiviz.ui.charts.decoration.CodeButton.constructor=epiviz.ui.charts.decoration.CodeButton;
epiviz.ui.charts.decoration.CodeButton.prototype._click=function(){var a=this;return function(){(new epiviz.ui.controls.CodeDialog("Chart Code",{save:function(b){b.forEach(function(b,c){a._controlCreators[c].save(b)})},cancel:function(){a._controlCreators.forEach(function(a){a.cancel()})}},a._controlCreators.map(function(a){return a.creator}))).show()}};epiviz.ui.charts.decoration.CodeButton.prototype._renderOptions=function(){return{icons:{primary:"ui-icon ui-icon-pencil"},text:!1}};
epiviz.ui.charts.decoration.CodeButton.prototype._text=function(){return"Code"};epiviz.ui.charts.decoration.CodeButton.prototype._addControlCreator=function(a,b,e){this._controlCreators.push({creator:a,save:b,cancel:e})};epiviz.ui.charts.decoration.CodeButton.prototype._controlCreator=function(){return null};epiviz.ui.charts.decoration.CodeButton.prototype._saveHandler=function(){return null};epiviz.ui.charts.decoration.CodeButton.prototype._cancelHandler=function(){return null};
epiviz.ui.charts.decoration.EditCodeButton=function(a,b,e){epiviz.ui.charts.decoration.CodeButton.call(this,a,b,e)};epiviz.ui.charts.decoration.EditCodeButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.CodeButton.prototype);epiviz.ui.charts.decoration.EditCodeButton.constructor=epiviz.ui.charts.decoration.EditCodeButton;
epiviz.ui.charts.decoration.EditCodeButton.prototype._controlCreator=function(){var a=this;return function(b){return new epiviz.ui.controls.EditCodeControl(b,"Edit Code",null,a.visualization(),a.visualization().lastModifiedMethod(),a.visualization().hasModifiedMethods())}};epiviz.ui.charts.decoration.EditCodeButton.prototype._saveHandler=function(){var a=this;return function(b){b.hasModifiedMethods?a.visualization().setModifiedMethods(b.modifiedMethods):a.visualization().resetModifiedMethods()}};
epiviz.ui.charts.decoration.EditCodeButton.prototype._cancelHandler=function(){return function(){}};epiviz.ui.charts.decoration.MarkerCodeButton=function(a,b,e){epiviz.ui.charts.decoration.CodeButton.call(this,a,b,e)};epiviz.ui.charts.decoration.MarkerCodeButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.CodeButton.prototype);epiviz.ui.charts.decoration.MarkerCodeButton.constructor=epiviz.ui.charts.decoration.MarkerCodeButton;
epiviz.ui.charts.decoration.MarkerCodeButton.prototype._controlCreator=function(){var a=this;return function(b){var e=a.visualization().getMarker(a.markerId()),c,d;e&&(c=e.preMarkStr(),d=e.markStr());c=c||a.preMarkTemplate();d=d||a.markTemplate();return new epiviz.ui.controls.MarkerCodeControl(b,a.markerLabel(),null,a.visualization(),c,d,void 0!=e)}};
epiviz.ui.charts.decoration.MarkerCodeButton.prototype._saveHandler=function(){var a=this;return function(b){b.enabled?a.visualization().putMarker(a.createMarker(b.preMark,b.mark)):a.visualization().removeMarker(a.markerId())}};epiviz.ui.charts.decoration.MarkerCodeButton.prototype._cancelHandler=function(){return function(){}};
epiviz.ui.charts.decoration.MarkerCodeButton.prototype.createMarker=function(a,b){return new epiviz.ui.charts.markers.VisualizationMarker(this.markerType(),this.markerId(),this.markerLabel(),a,b)};epiviz.ui.charts.decoration.MarkerCodeButton.prototype.markerType=function(){throw Error("unimplemented abstract method");};epiviz.ui.charts.decoration.MarkerCodeButton.prototype.markerLabel=function(){throw Error("unimplemented abstract method");};
epiviz.ui.charts.decoration.MarkerCodeButton.prototype.markerId=function(){throw Error("unimplemented abstract method");};epiviz.ui.charts.decoration.MarkerCodeButton.prototype.preMarkTemplate=function(){throw Error("unimplemented abstract method");};epiviz.ui.charts.decoration.MarkerCodeButton.prototype.markTemplate=function(){throw Error("unimplemented abstract method");};
epiviz.ui.charts.decoration.ChartFilterCodeButton=function(a,b,e){epiviz.ui.charts.decoration.MarkerCodeButton.call(this,a,b,e)};epiviz.ui.charts.decoration.ChartFilterCodeButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.MarkerCodeButton.prototype);epiviz.ui.charts.decoration.ChartFilterCodeButton.constructor=epiviz.ui.charts.decoration.ChartFilterCodeButton;epiviz.ui.charts.decoration.ChartFilterCodeButton.prototype.markerType=function(){return epiviz.ui.charts.markers.VisualizationMarker.Type.FILTER};
epiviz.ui.charts.decoration.ChartFilterCodeButton.prototype.markerLabel=function(){return"User Filter"};epiviz.ui.charts.decoration.ChartFilterCodeButton.prototype.markerId=function(){return"user-filter"};epiviz.ui.charts.decoration.ChartFilterCodeButton.prototype.preMarkTemplate=function(){return"/**\n * This method is called once before every draw, for all data available to the visualization,\n * for initialization. Its result can be used inside the filter method.\n * @param {epiviz.datatypes.GenomicData} [data]\n * @returns {InitialVars}\n * @template InitialVars\n */\nfunction(data) {\n  // TODO: Your code here\n  return null;\n}\n"};
epiviz.ui.charts.decoration.ChartFilterCodeButton.prototype.markTemplate=function(){return"/**\n * This method is called for every data object. If it returns false, the object will not be drawn.\n * @param {epiviz.datatypes.GenomicData.ValueItem} [item]\n * @param {epiviz.datatypes.GenomicData} [data]\n * @param {InitialVars} [preMarkResult]\n * @returns {boolean}\n * @template InitialVars\n */\nfunction(item, data, preMarkResult) {\n  // TODO: Your code here\n  return true;\n}\n"};
epiviz.ui.charts.decoration.HierarchyFilterCodeButton=function(a,b,e){epiviz.ui.charts.decoration.MarkerCodeButton.call(this,a,b,e)};epiviz.ui.charts.decoration.HierarchyFilterCodeButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.MarkerCodeButton.prototype);epiviz.ui.charts.decoration.HierarchyFilterCodeButton.constructor=epiviz.ui.charts.decoration.HierarchyFilterCodeButton;epiviz.ui.charts.decoration.HierarchyFilterCodeButton.prototype.markerType=function(){return epiviz.ui.charts.markers.VisualizationMarker.Type.FILTER};
epiviz.ui.charts.decoration.HierarchyFilterCodeButton.prototype.markerLabel=function(){return"User Filter"};epiviz.ui.charts.decoration.HierarchyFilterCodeButton.prototype.markerId=function(){return"user-filter"};epiviz.ui.charts.decoration.HierarchyFilterCodeButton.prototype.preMarkTemplate=function(){return"/**\n * This method is called once before every draw, for all data available to the visualization,\n * for initialization. Its result can be used inside the filter method.\n * @param {epiviz.ui.charts.tree.Node} [root]\n * @returns {InitialVars}\n * @template InitialVars\n */\nfunction(root) {\n  // TODO: Your code here\n  return null;\n}\n"};
epiviz.ui.charts.decoration.HierarchyFilterCodeButton.prototype.markTemplate=function(){return"/**\n * This method is called for every data object. If it returns false, the object will not be drawn.\n * @param {epiviz.ui.charts.tree.Node} [node]\n * @param {epiviz.ui.charts.tree.Node} [root]\n * @param {InitialVars} [preMarkResult]\n * @returns {boolean}\n * @template InitialVars\n */\nfunction(node, root, preMarkResult) {\n  // TODO: Your code here\n  return true;\n}\n"};
epiviz.ui.charts.decoration.ChartColorByRowCodeButton=function(a,b,e){epiviz.ui.charts.decoration.MarkerCodeButton.call(this,a,b,e)};epiviz.ui.charts.decoration.ChartColorByRowCodeButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.MarkerCodeButton.prototype);epiviz.ui.charts.decoration.ChartColorByRowCodeButton.constructor=epiviz.ui.charts.decoration.ChartColorByRowCodeButton;epiviz.ui.charts.decoration.ChartColorByRowCodeButton.prototype.markerType=function(){return epiviz.ui.charts.markers.VisualizationMarker.Type.COLOR_BY_ROW};
epiviz.ui.charts.decoration.ChartColorByRowCodeButton.prototype.markerLabel=function(){return"Color By"};epiviz.ui.charts.decoration.ChartColorByRowCodeButton.prototype.markerId=function(){return"color-by"};epiviz.ui.charts.decoration.ChartColorByRowCodeButton.prototype.preMarkTemplate=function(){return"/**\n * This method is called once before every draw, for all data available to the visualization,\n * for initialization. Its result can be used inside the filter method.\n * @param {epiviz.datatypes.GenomicData} [data]\n * @returns {InitialVars}\n * @template InitialVars\n */\nfunction(data) {\n  // TODO: Your code here\n  return null;\n}\n"};
epiviz.ui.charts.decoration.ChartColorByRowCodeButton.prototype.markTemplate=function(){return"/**\n * This method is called for every data object. If it returns false, the object will not be drawn.\n * @param {epiviz.datatypes.GenomicData.RowItem} [row]\n * @param {epiviz.datatypes.GenomicData} [data]\n * @param {InitialVars} [preMarkResult]\n * @returns {string}\n * @template InitialVars\n */\nfunction(row, data, preMarkResult) {\n  // TODO: Your code here\n  return row.metadata('colLabel');\n}\n"};
epiviz.ui.charts.decoration.ChartOrderByMeasurementsCodeButton=function(a,b,e){epiviz.ui.charts.decoration.MarkerCodeButton.call(this,a,b,e)};epiviz.ui.charts.decoration.ChartOrderByMeasurementsCodeButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.MarkerCodeButton.prototype);epiviz.ui.charts.decoration.ChartOrderByMeasurementsCodeButton.constructor=epiviz.ui.charts.decoration.ChartOrderByMeasurementsCodeButton;
epiviz.ui.charts.decoration.ChartOrderByMeasurementsCodeButton.prototype.markerType=function(){return epiviz.ui.charts.markers.VisualizationMarker.Type.ORDER_BY_MEASUREMENTS};epiviz.ui.charts.decoration.ChartOrderByMeasurementsCodeButton.prototype.markerLabel=function(){return"Order By"};epiviz.ui.charts.decoration.ChartOrderByMeasurementsCodeButton.prototype.markerId=function(){return"order-by-measurements"};
epiviz.ui.charts.decoration.ChartOrderByMeasurementsCodeButton.prototype.preMarkTemplate=function(){return"/**\n * This method is called once before every draw, for all data available to the visualization,\n * for initialization. Its result can be used inside the filter method.\n * @param {epiviz.datatypes.GenomicData} [data]\n * @returns {InitialVars}\n * @template InitialVars\n */\nfunction(data) {\n  // TODO: Your code here\n  return null;\n}\n"};
epiviz.ui.charts.decoration.ChartOrderByMeasurementsCodeButton.prototype.markTemplate=function(){return"/**\n * @param {epiviz.measurements.Measurement} m\n * @param {epiviz.datatypes.GenomicData} [data]\n * @param {InitialVars} [preMarkResult]\n * @returns {string|number}\n * @template InitialVars\n */\nfunction(m, data, preMarkResult) {\n  // TODO: Your code here\n  return 0;\n}\n"};
epiviz.ui.charts.decoration.ChartColorByMeasurementsCodeButton=function(a,b,e){epiviz.ui.charts.decoration.MarkerCodeButton.call(this,a,b,e)};epiviz.ui.charts.decoration.ChartColorByMeasurementsCodeButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.MarkerCodeButton.prototype);epiviz.ui.charts.decoration.ChartColorByMeasurementsCodeButton.constructor=epiviz.ui.charts.decoration.ChartColorByMeasurementsCodeButton;
epiviz.ui.charts.decoration.ChartColorByMeasurementsCodeButton.prototype.markerType=function(){return epiviz.ui.charts.markers.VisualizationMarker.Type.COLOR_BY_MEASUREMENTS};epiviz.ui.charts.decoration.ChartColorByMeasurementsCodeButton.prototype.markerLabel=function(){return"Color by Measurements"};epiviz.ui.charts.decoration.ChartColorByMeasurementsCodeButton.prototype.markerId=function(){return"color-by-measurements"};
epiviz.ui.charts.decoration.ChartColorByMeasurementsCodeButton.prototype.preMarkTemplate=function(){return"/**\n * This method is called once before every draw, for all data available to the visualization,\n * for initialization. Its result can be used inside the filter method.\n * @param {epiviz.datatypes.GenomicData} [data]\n * @returns {InitialVars}\n * @template InitialVars\n */\nfunction(data) {\n  // TODO: Your code here\n  return null;\n}\n"};
epiviz.ui.charts.decoration.ChartColorByMeasurementsCodeButton.prototype.markTemplate=function(){return"/**\n * @param {epiviz.measurements.Measurement} m\n * @param {epiviz.datatypes.GenomicData} [data]\n * @param {InitialVars} [preMarkResult]\n * @returns {string|number}\n * @template InitialVars\n */\nfunction(m, data, preMarkResult) {\n  // TODO: Your code here\n  return 0;\n}\n"};
epiviz.ui.charts.decoration.ChartGroupByMeasurementsCodeButton=function(a,b,e){epiviz.ui.charts.decoration.MarkerCodeButton.call(this,a,b,e)};epiviz.ui.charts.decoration.ChartGroupByMeasurementsCodeButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.MarkerCodeButton.prototype);epiviz.ui.charts.decoration.ChartGroupByMeasurementsCodeButton.constructor=epiviz.ui.charts.decoration.ChartGroupByMeasurementsCodeButton;
epiviz.ui.charts.decoration.ChartGroupByMeasurementsCodeButton.prototype.markerType=function(){return epiviz.ui.charts.markers.VisualizationMarker.Type.GROUP_BY_MEASUREMENTS};epiviz.ui.charts.decoration.ChartGroupByMeasurementsCodeButton.prototype.markerLabel=function(){return"Group by"};epiviz.ui.charts.decoration.ChartGroupByMeasurementsCodeButton.prototype.markerId=function(){return"group-by-measurements"};
epiviz.ui.charts.decoration.ChartGroupByMeasurementsCodeButton.prototype.preMarkTemplate=function(){return"/**\n * This method is called once before every draw, for all data available to the visualization,\n * for initialization. Its result can be used inside the filter method.\n * @param {epiviz.datatypes.GenomicData} [data]\n * @returns {InitialVars}\n * @template InitialVars\n */\nfunction(data) {\n  // TODO: Your code here\n  return null;\n}\n"};
epiviz.ui.charts.decoration.ChartGroupByMeasurementsCodeButton.prototype.markTemplate=function(){return"/**\n * @param {epiviz.measurements.Measurement} m\n * @param {epiviz.datatypes.GenomicData} [data]\n * @param {InitialVars} [preMarkResult]\n * @returns {string}\n * @template InitialVars\n */\nfunction(m, data, preMarkResult) {\n  // TODO: Your code here\n  return 0;\n}\n"};epiviz.ui.charts.decoration.ChartResize=function(a,b){epiviz.ui.charts.decoration.VisualizationDecoration.call(this,a,b)};
epiviz.ui.charts.decoration.ChartResize.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.VisualizationDecoration.prototype);epiviz.ui.charts.decoration.ChartResize.constructor=epiviz.ui.charts.decoration.ChartResize;epiviz.ui.charts.decoration.ChartResize.prototype.decorate=function(){epiviz.ui.charts.decoration.VisualizationDecoration.prototype.decorate.call(this);var a=this;this.visualization().container().resizable({stop:function(b,e){a.visualization().updateSize()}})};
epiviz.ui.charts.decoration.ChartTooltip=function(a,b){epiviz.ui.charts.decoration.VisualizationDecoration.call(this,a,b)};epiviz.ui.charts.decoration.ChartTooltip.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.VisualizationDecoration.prototype);epiviz.ui.charts.decoration.ChartTooltip.constructor=epiviz.ui.charts.decoration.ChartTooltip;
epiviz.ui.charts.decoration.ChartTooltip.prototype.decorate=function(){epiviz.ui.charts.decoration.VisualizationDecoration.prototype.decorate.call(this);for(var a=void 0,b=this.otherDecoration();b;b=b.otherDecoration())if(b.constructor==epiviz.ui.charts.decoration.ToggleTooltipButton){a=b;break}var e=this;this.visualization().container().tooltip({items:".item",content:function(){if(!a.checked())return!1;var b=d3.select(this).data()[0];return b.valueItems[0].length>b.measurements.length+b.measurements[0].metadata().length?
e._horizontalContent(b):e._verticalContent(b)},track:!0,show:!1})};
epiviz.ui.charts.decoration.ChartTooltip.prototype._horizontalContent=function(a){for(var b=a.measurements[0].metadata(),e=sprintf("%s%s%s",void 0!=a.start&&void 0!=a.end?"<th><b>Start</b></th><th><b>End</b></th>":"",b?"<th><b>"+b.join("</b></th><th><b>")+"</b></th>":"",a.values?"<th><b>"+a.measurements.join("</b></th><th><b>")+"</b></th>":""),c="",d=0;d<a.valueItems[0].length&&10>d;++d){var f="",n=a.valueItems[0][d].rowItem,h=Globalize.format(n.start(),"n0"),g=Globalize.format(n.end(),"n0");void 0!=
h&&void 0!=g&&(f+=sprintf("<td>%s</td><td>%s</td>",h,g));n=n.rowMetadata();if(b&&n)for(h=0;h<b.length;++h)g=n[b[h]]||"",f+=sprintf("<td>%s</td>",15>=g.length?g:g.substr(0,15)+"...");if(a.values)for(n=0;n<a.measurements.length;++n)f+=sprintf("<td>%s</td>",Globalize.format(a.valueItems[n][d].value,"n3"));c+=sprintf("<tr>%s</tr>",f)}d<a.valueItems[0].length&&(c+=sprintf('<tr><td colspan="%s" style="text-align: center;">...</td></tr>',2+(b?b.length:0)+(a.values?a.measurements.length:0)));return sprintf('<table class="tooltip-table"><thead><tr>%s</tr></thead><tbody>%s</tbody></table>',
e,c)};
epiviz.ui.charts.decoration.ChartTooltip.prototype._verticalContent=function(a){var b=[],e=[0,0];if(void 0!=a.start&&void 0!=a.end){var c=["Start"],d=["End"];a.valueItems[0].every(function(a,b){c.push(Globalize.format(a.rowItem.start(),"n0"));d.push(Globalize.format(a.rowItem.end(),"n0"));return 5>b});b.push(c);b.push(d);e=[0,2]}var f=a.measurements[0].metadata(),n=[e[1],e[1]+f.length];f.forEach(function(c){var d=[c];a.valueItems[0].every(function(a,b){var e=a.rowItem.metadata(c)||"[NA]";15<e.length&&
(e=e.substr(0,15)+"...");d.push(e);return 5>b});b.push(d)});f=[n[1],n[1]];a.values&&(f=[n[1],n[1]+a.measurements.length],a.measurements.forEach(function(c,d){var e=[c.name()];a.valueItems[d].every(function(a,b){e.push(Globalize.format(a.value,"n3"));return 5>b});b.push(e)}));var h=f[1];10<h&&(e[1]=1,n[1]=Math.min(n[1],n[0]+4),h=e[1]-e[0]+n[1]-n[0]+f[1]-f[0],10<h&&(f[1]-=h-10));var h="",g;for(g=e[0];g<e[1];++g)h+="<tr><td><b>"+b[g][0]+"</b></td><td>"+b[g].slice(1).join("</td><td>")+"</td></tr>";for(g=
n[0];g<n[1];++g)h+="<tr><td><b>"+b[g][0]+"</b></td><td>"+b[g].slice(1).join("</td><td>")+"</td></tr>";for(g=f[0];g<f[1];++g)h+="<tr><td><b>"+b[g][0]+"</b></td><td>"+b[g].slice(1).join("</td><td>")+"</td></tr>";return'<table class="tooltip-table"><tbody>'+h+"</tbody></table>"};epiviz.ui.charts.decoration.ChartLoaderAnimation=function(a,b){epiviz.ui.charts.decoration.VisualizationDecoration.call(this,a,b);this._loaderTimeout=0;this._animationShowing=!1};
epiviz.ui.charts.decoration.ChartLoaderAnimation.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.VisualizationDecoration.prototype);epiviz.ui.charts.decoration.ChartLoaderAnimation.constructor=epiviz.ui.charts.decoration.ChartLoaderAnimation;
epiviz.ui.charts.decoration.ChartLoaderAnimation.prototype.decorate=function(){epiviz.ui.charts.decoration.VisualizationDecoration.prototype.decorate.call(this);var a=this;this.visualization().onDataWaitStart().addListener(new epiviz.events.EventListener(function(){a._addLoaderAnimation()}));this.visualization().onDataWaitEnd().addListener(new epiviz.events.EventListener(function(){a._removeLoaderAnimation()}));this.visualization().onSizeChanged().addListener(new epiviz.events.EventListener(function(){a._animationShowing&&
a._addLoaderAnimation()}))};
epiviz.ui.charts.decoration.ChartLoaderAnimation.prototype._addLoaderAnimation=function(){this._loaderTimeout&&clearTimeout(this._loaderTimeout);var a=function(){b._animationShowing=!0;var a=b.visualization(),c=a.container();c.find(".chart-loader").remove();c.append(sprintf('<div class="loader-icon %s" style="top: %spx; left: %spx;"></div>',"chart-loader",Math.floor(.5*a.height()),Math.floor(.5*a.width())));c.find(".chart-loader").activity({segments:8,steps:5,opacity:.3,width:4,space:0,length:10,
color:"#0b0b0b",speed:1})},b=this;this._animationShowing?a():this._loaderTimeout=setTimeout(a,500)};epiviz.ui.charts.decoration.ChartLoaderAnimation.prototype._removeLoaderAnimation=function(){this._loaderTimeout&&clearTimeout(this._loaderTimeout);this._animationShowing=!1;this.visualization().container().find(".chart-loader").remove()};
epiviz.ui.charts.ChartManager=function(a){this._config=a;this._charts={};this._chartsOrder={};this._resizeInterval=null;this._chartAdded=new epiviz.events.Event;this._chartRemoved=new epiviz.events.Event;this._chartsOrderChanged=new epiviz.events.Event;this._chartsCleared=new epiviz.events.Event;this._chartColorsChanged=new epiviz.events.Event;this._chartMethodsModified=new epiviz.events.Event;this._chartMethodsReset=new epiviz.events.Event;this._chartMarkersModified=new epiviz.events.Event;this._chartCustomSettingsChanged=
new epiviz.events.Event;this._chartSizeChanged=new epiviz.events.Event;this._chartMarginsChanged=new epiviz.events.Event;this._chartRequestHierarchy=new epiviz.events.Event;this._chartPropagateHierarchyChanges=new epiviz.events.Event;this._chartPropogateIcicleLocationChanges=new epiviz.events.Event;this._chartIcicleLocationChanges=new epiviz.events.Event;this._registerWindowResize()};
epiviz.ui.charts.ChartManager.prototype.addChart=function(a,b,e,c,d){e=e||sprintf("%s-%s-%s",a.chartDisplayType(),a.chartHtmlAttributeName(),epiviz.utils.generatePseudoGUID(5));var f=a.cssClass(),n=$("#"+a.chartContainer()),h=n.find(".accordion"),g=h.find(".vis-container");0==h.length&&(h=$('<div class="accordion"></div>').appendTo(n),n=a.chartDisplayType(),h.append(sprintf('<h3><a href="#"><b><span style="color: #025167">Views by %s</span></b></a></h3>',epiviz.ui.ControlManager.DISPLAY_TYPE_LABELS[n])),
g=$('<div class="vis-container"></div>').appendTo(h),h.multiAccordion(),h.multiAccordion("option","active","all"));g.append(sprintf('<div id="%s" class="%s"></div>',e,f));h=g.find("#"+e);n=[];if(null!=a._defaultSettings.chartMarkers||void 0!=a._defaultSettings.chartMarkers)for(f=0;f<a._defaultSettings.chartMarkers.length;f++)g=a._defaultSettings.chartMarkers[f],n.push(new epiviz.ui.charts.markers.VisualizationMarker(g.type,g.id,g.name,g.preMark,g.mark));c=c||new epiviz.ui.charts.VisualizationProperties(a.defaultWidth(),
a.defaultHeight(),a.defaultMargins(),b,a.defaultColors(),null,a.customSettingsValues(),a.customSettingsDefs(),n);c.customSettingsValues.title="";a.chartDisplayType()==epiviz.ui.charts.VisualizationType.DisplayType.DATA_STRUCTURE?c.customSettingsValues.title=b.datasourceGroup:d&&(c.customSettingsValues.title=d);b=a.createNew(e,h,c);this._charts[e]=b;this._registerChartHover(b);this._registerChartUnhover(b);this._registerChartSelect(b);this._registerChartDeselect(b);this._registerChartColorsChanged(b);
this._registerChartMethodsModified(b);this._registerChartMethodsReset(b);this._registerChartMarkersModified(b);this._registerChartCustomSettingsChanged(b);this._registerChartSizeChanged(b);this._registerChartMarginsChanged(b);this._registerChartRemove(b);this._registerChartSave(b);this._registerChartRequestHierarchy(b);this._registerChartPropagateHierarchyChanges(b);this._registerChartPropogateIcicleLocationChanges(b);this._registerChartIcicleLocationChanges(b);if(a.decorations()){d=void 0;for(f=
0;f<a.decorations().length;++f)(h=epiviz.utils.evaluateFullyQualifiedTypeName(a.decorations()[f]))&&(d=epiviz.utils.applyConstructor(h,[b,d,this._config]));d&&d.decorate()}a.chartDisplayType()in this._chartsOrder||(this._chartsOrder[a.chartDisplayType()]=[]);this._chartsOrder[a.chartDisplayType()].push(e);var m=!1;Object.keys(this._charts).forEach(function(a){-1!=a.indexOf("data-structure")&&(m=!0)});m?$("#data-source-button").hide():$("#data-source-button").show();this._chartAdded.notify(new epiviz.ui.charts.VisEventArgs(e,
{type:a,properties:c,chartsOrder:this._chartsOrder}));return e};
epiviz.ui.charts.ChartManager.prototype.removeChart=function(a){$("#"+a).remove();var b=this._charts[a];delete this._charts[a];this._chartsOrder[b.displayType()].splice(this._chartsOrder[b.displayType()].indexOf(a),1);b=$("#"+epiviz.ui.ControlManager.CHART_TYPE_CONTAINERS[b.displayType()]);0==b.find(".accordion").find(".vis-container").children().length&&b.empty();var e=!1;Object.keys(this._charts).forEach(function(a){-1!=a.indexOf("data-structure")&&(e=!0)});e?$("#data-source-button").hide():$("#data-source-button").show();
this._chartRemoved.notify(new epiviz.ui.charts.VisEventArgs(a,this._chartsOrder))};epiviz.ui.charts.ChartManager.prototype.chartsMeasurements=function(){var a={},b;for(b in this._charts)this._charts.hasOwnProperty(b)&&this._charts[b].displayType()!=epiviz.ui.charts.VisualizationType.DisplayType.DATA_STRUCTURE&&(a[b]=this._charts[b].measurements());return a};
epiviz.ui.charts.ChartManager.prototype.updateCharts=function(a,b,e){e=e||Object.keys(this._charts);for(var c=0;c<e.length;++c)if(this._charts.hasOwnProperty(e[c])){var d=this._charts[e[c]];d&&function(c){c.transformData(a,b).done(function(){c.draw()})}(d)}};
epiviz.ui.charts.ChartManager.prototype.updateDataStructureCharts=function(){for(var a=Object.keys(this._charts),b=0;b<a.length;++b)if(this._charts.hasOwnProperty(a[b])){var e=this._charts[a[b]];e&&e.displayType()==epiviz.ui.charts.VisualizationType.DisplayType.DATA_STRUCTURE&&function(a){setTimeout(function(){a.fireRequestHierarchy()},0)}(e)}};
epiviz.ui.charts.ChartManager.prototype.clear=function(){this._charts={};this._chartsOrder={};var a=epiviz.ui.ControlManager.CHART_TYPE_CONTAINERS,b;for(b in a)a.hasOwnProperty(b)&&$("#"+a[b]).empty();this._chartsCleared.notify()};epiviz.ui.charts.ChartManager.prototype.dataWaitStart=function(a,b){if(a&&this._charts[a])this._charts[a].onDataWaitStart().notify(new epiviz.ui.charts.VisEventArgs(a));else for(var e in this._charts)this._charts.hasOwnProperty(e)&&b&&b[this._charts[e]]&&this._charts[e].onDataWaitStart().notify(new epiviz.ui.charts.VisEventArgs(e))};
epiviz.ui.charts.ChartManager.prototype.onChartAdded=function(){return this._chartAdded};epiviz.ui.charts.ChartManager.prototype.onChartRemoved=function(){return this._chartRemoved};epiviz.ui.charts.ChartManager.prototype.onChartsOrderChanged=function(){return this._chartsOrderChanged};epiviz.ui.charts.ChartManager.prototype.onChartsCleared=function(){return this._chartsCleared};epiviz.ui.charts.ChartManager.prototype.onChartColorsChanged=function(){return this._chartColorsChanged};
epiviz.ui.charts.ChartManager.prototype.onChartMethodsModified=function(){return this._chartMethodsModified};epiviz.ui.charts.ChartManager.prototype.onChartMethodsReset=function(){return this._chartMethodsReset};epiviz.ui.charts.ChartManager.prototype.onChartMarkersModified=function(){return this._chartMarkersModified};epiviz.ui.charts.ChartManager.prototype.onChartCustomSettingsChanged=function(){return this._chartCustomSettingsChanged};
epiviz.ui.charts.ChartManager.prototype.onChartSizeChanged=function(){return this._chartSizeChanged};epiviz.ui.charts.ChartManager.prototype.onChartMarginsChanged=function(){return this._chartMarginsChanged};epiviz.ui.charts.ChartManager.prototype.onChartRequestHierarchy=function(){return this._chartRequestHierarchy};epiviz.ui.charts.ChartManager.prototype.onChartPropagateHierarchyChanges=function(){return this._chartPropagateHierarchyChanges};
epiviz.ui.charts.ChartManager.prototype.onChartPropogateIcicleLocationChanges=function(){return this._chartPropogateIcicleLocationChanges};epiviz.ui.charts.ChartManager.prototype.onChartIcicleLocationChanges=function(){return this._chartIcicleLocationChanges};
epiviz.ui.charts.ChartManager.prototype._registerWindowResize=function(){var a=this;$(window).resize(function(){null!==a._resizeInterval&&window.clearTimeout(a._resizeInterval);a._resizeInterval=window.setTimeout(function(){for(var b in a._charts)a._charts.hasOwnProperty(b)&&a._charts[b].updateSize();a._resizeInterval=null},500)})};
epiviz.ui.charts.ChartManager.prototype._registerChartHover=function(a){var b=this;a.onHover().addListener(new epiviz.events.EventListener(function(a){for(var c in b._charts)b._charts.hasOwnProperty(c)&&b._charts[c].doHover(a.args)}))};epiviz.ui.charts.ChartManager.prototype._registerChartUnhover=function(a){var b=this;a.onUnhover().addListener(new epiviz.events.EventListener(function(){for(var a in b._charts)b._charts.hasOwnProperty(a)&&b._charts[a].doUnhover()}))};
epiviz.ui.charts.ChartManager.prototype._registerChartSelect=function(a){var b=this;a.onSelect().addListener(new epiviz.events.EventListener(function(a){a=a.args;for(var c in b._charts)b._charts.hasOwnProperty(c)&&b._charts[c].doSelect(a)}))};epiviz.ui.charts.ChartManager.prototype._registerChartDeselect=function(a){var b=this;a.onDeselect().addListener(new epiviz.events.EventListener(function(){for(var a in b._charts)b._charts.hasOwnProperty(a)&&b._charts[a].doDeselect()}))};
epiviz.ui.charts.ChartManager.prototype._registerChartRemove=function(a){var b=this;a.onRemove().addListener(new epiviz.events.EventListener(function(a){b.removeChart(a.id)}))};
epiviz.ui.charts.ChartManager.prototype._registerChartSave=function(a){var b=this;"default"!=b._config.configType?a.onSave().addListener(new epiviz.events.EventListener(function(a){(new epiviz.ui.PrintManager(a.id,"epiviz_"+Math.floor($.now()/1E3),"pdf")).print()})):a.onSave().addListener(new epiviz.events.EventListener(function(a){(new epiviz.ui.controls.SaveSvgAsImageDialog({ok:function(){},cancel:function(){}},a.id,b._config.dataServerLocation+b._config.chartSaverLocation)).show()}))};
epiviz.ui.charts.ChartManager.prototype._registerChartColorsChanged=function(a){var b=this;a.onColorsChanged().addListener(new epiviz.events.EventListener(function(a){b._chartColorsChanged.notify(a)}))};epiviz.ui.charts.ChartManager.prototype._registerChartMethodsModified=function(a){var b=this;a.onMethodsModified().addListener(new epiviz.events.EventListener(function(a){b._chartMethodsModified.notify(a)}))};
epiviz.ui.charts.ChartManager.prototype._registerChartMethodsReset=function(a){var b=this;a.onMethodsReset().addListener(new epiviz.events.EventListener(function(a){b._chartMethodsReset.notify(a)}))};epiviz.ui.charts.ChartManager.prototype._registerChartMarkersModified=function(a){var b=this;a.onMarkersModified().addListener(new epiviz.events.EventListener(function(a){b._chartMarkersModified.notify(a)}))};
epiviz.ui.charts.ChartManager.prototype._registerChartCustomSettingsChanged=function(a){var b=this;a.onCustomSettingsChanged().addListener(new epiviz.events.EventListener(function(a){b._chartCustomSettingsChanged.notify(a)}))};epiviz.ui.charts.ChartManager.prototype._registerChartSizeChanged=function(a){var b=this;a.onSizeChanged().addListener(new epiviz.events.EventListener(function(a){b._chartSizeChanged.notify(a)}))};
epiviz.ui.charts.ChartManager.prototype._registerChartMarginsChanged=function(a){var b=this;a.onMarginsChanged().addListener(new epiviz.events.EventListener(function(a){b._chartMarginsChanged.notify(a)}))};epiviz.ui.charts.ChartManager.prototype._registerChartRequestHierarchy=function(a){var b=this;a.displayType()==epiviz.ui.charts.VisualizationType.DisplayType.DATA_STRUCTURE&&a.onRequestHierarchy().addListener(new epiviz.events.EventListener(function(a){b._chartRequestHierarchy.notify(a)}))};
epiviz.ui.charts.ChartManager.prototype._registerChartPropagateHierarchyChanges=function(a){var b=this;a.displayType()==epiviz.ui.charts.VisualizationType.DisplayType.DATA_STRUCTURE&&a.onPropagateHierarchyChanges().addListener(new epiviz.events.EventListener(function(a){b._chartPropagateHierarchyChanges.notify(a)}))};
epiviz.ui.charts.ChartManager.prototype._registerChartPropogateIcicleLocationChanges=function(a){var b=this;a.displayType()==epiviz.ui.charts.VisualizationType.DisplayType.DATA_STRUCTURE&&a.onPropagateIcicleLocationChanges().addListener(new epiviz.events.EventListener(function(a){b._chartPropogateIcicleLocationChanges.notify(a)}))};
epiviz.ui.charts.ChartManager.prototype._registerChartIcicleLocationChanges=function(a){this.onChartIcicleLocationChanges().addListener(new epiviz.events.EventListener(function(b){a.displayType()==epiviz.ui.charts.VisualizationType.DisplayType.DATA_STRUCTURE&&(a._updateLocation(b.args.start,b.args.width),a._drawAxes(a._lastRoot))}))};
epiviz.ui.charts.ChartManager.prototype.getChartSettings=function(a){a=this._charts[a];var b={};b.settings=a.customSettingsValues();b.colorMap=a.properties().colors;return b};epiviz.ui.charts.ChartManager.prototype.setChartSettings=function(a,b,e){a=this._charts[a];if(null!=b){var c=a.customSettingsValues();Object.keys(b).forEach(function(a){c[a]=b[a]});a.setCustomSettingsValues(c)}null!=e&&a.setColors(e);a.draw()};epiviz.workspaces={};epiviz.workspaces.UserManager=function(a){this._config=a};
epiviz.workspaces.UserManager.USER_STATUS=epiviz.workspaces.UserManager.USER_STATUS||{loggedIn:!1,userData:null,oauthProvider:null};epiviz.workspaces.UserManager.prototype.toggleLogin=function(){epiviz.workspaces.UserManager.USER_STATUS.loggedIn?this._logout():this._login()};epiviz.workspaces.UserManager.prototype._login=function(){var a=window.location.toString();0<a.length&&(a=encodeURIComponent(a));window.location=this._config.dataServerLocation+"login.php?location="+a};
epiviz.workspaces.UserManager.prototype._logout=function(){var a=window.location.toString();0<a.length&&(a=encodeURIComponent(a));window.location=this._config.dataServerLocation+"logout.php?logout&location="+a};
epiviz.workspaces.Workspace=function(a,b,e){this._id=a;this._name=b;this._range=e.range;this._chartsOrder={};this._chartsById={};for(var c in e.charts)if(e.charts.hasOwnProperty(c))for(this._chartsOrder[c]=[],a=0;a<e.charts[c].length;++a)this._chartsById[e.charts[c][a].id]=e.charts[c][a],this._chartsOrder[c].push(e.charts[c][a].id);this._computedMeasurements=e.computedMeasurements||new epiviz.measurements.MeasurementSet;this._changed=!1;this._contentChanged=new epiviz.events.Event};
epiviz.workspaces.Workspace.DEFAULT_WORKSPACE_NAME=epiviz.Config.DEFAULT_WORKSPACE_NAME;epiviz.workspaces.Workspace.prototype.id=function(){return this._id};epiviz.workspaces.Workspace.prototype.name=function(){return this._name};epiviz.workspaces.Workspace.prototype.range=function(){return this._range};epiviz.workspaces.Workspace.prototype.charts=function(){var a={},b;for(b in this._chartsOrder)if(this._chartsOrder.hasOwnProperty(b)){a[b]=[];for(var e=0;e<this._chartsOrder[b].length;++e)a[b].push(this._chartsById[this._chartsOrder[b][e]])}return a};
epiviz.workspaces.Workspace.prototype.chartsOrder=function(){return this._chartsOrder};epiviz.workspaces.Workspace.prototype.computedMeasurements=function(){return this._computedMeasurements};epiviz.workspaces.Workspace.prototype.chartAdded=function(a,b,e,c){this._chartsById[a]={id:a,type:b,properties:e.copy()};this._chartsOrder=c;this._setChanged()};epiviz.workspaces.Workspace.prototype.chartRemoved=function(a,b){this._chartsById[a]&&(delete this._chartsById[a],this._chartsOrder=b,this._setChanged())};
epiviz.workspaces.Workspace.prototype.chartSizeChanged=function(a,b,e){!this._chartsById[a]||this._chartsById[a].properties.width==b&&this._chartsById[a].properties.height==e||(this._chartsById[a].properties.width=b,this._chartsById[a].properties.height=e,this._setChanged())};epiviz.workspaces.Workspace.prototype.chartMarginsChanged=function(a,b){this._chartsById[a].properties.margins.equals(b)||(this._chartsById[a].properties.margins=b?b.copy():b,this._setChanged())};
epiviz.workspaces.Workspace.prototype.chartColorsChanged=function(a,b){this._chartsById[a].properties.colors.equals(b)||(this._chartsById[a].properties.colors=b,this._setChanged())};epiviz.workspaces.Workspace.prototype.chartMethodsModified=function(a,b){epiviz.utils.mapEquals(this._chartsById[a].properties.modifiedMethods,b)||(this._chartsById[a].properties.modifiedMethods=epiviz.utils.mapCombine(b,this._chartsById[a].properties.modifiedMethods),this._setChanged())};
epiviz.workspaces.Workspace.prototype.chartMethodsReset=function(a){this._chartsById[a].properties.modifiedMethods&&0!=Object.keys(this._chartsById[a].properties.modifiedMethods).length&&(this._chartsById[a].properties.modifiedMethods={},this._setChanged())};epiviz.workspaces.Workspace.prototype.chartMarkersModified=function(a,b){epiviz.utils.arraysEqual(this._chartsById[a].properties.chartMarkers,b)||(this._chartsById[a].properties.chartMarkers=b.filter(function(a){return null!=a}),this._setChanged())};
epiviz.workspaces.Workspace.prototype.chartCustomSettingsChanged=function(a,b){epiviz.utils.mapEquals(this._chartsById[a].properties.customSettingsValues,b)||(this._chartsById[a].properties.customSettingsValues=b?epiviz.utils.mapCopy(b):b,this._setChanged())};epiviz.workspaces.Workspace.prototype.locationChanged=function(a){this._range.equals(a)||(this._range=a,this._setChanged())};
epiviz.workspaces.Workspace.prototype.computedMeasurementsAdded=function(a){var b=this._computedMeasurements.size();this._computedMeasurements.addAll(a);b!=this._computedMeasurements.size()&&this._setChanged()};epiviz.workspaces.Workspace.prototype.computedMeasurementsRemoved=function(a){var b=this._computedMeasurements.size();this._computedMeasurements.removeAll(a);b!=this._computedMeasurements.size()&&this._setChanged()};
epiviz.workspaces.Workspace.prototype.chartsOrderChanged=function(a){this._chartsOrder=a;this._setChanged()};epiviz.workspaces.Workspace.prototype.changed=function(){return this._changed};epiviz.workspaces.Workspace.prototype.resetChanged=function(){this._changed=!1};epiviz.workspaces.Workspace.prototype._setChanged=function(){this._changed=!0;this._contentChanged.notify(this)};
epiviz.workspaces.Workspace.prototype.copy=function(a,b){var e=this.charts();return new epiviz.workspaces.Workspace(b||null,a,{range:this._range,computedMeasurements:new epiviz.measurements.MeasurementSet(this._computedMeasurements),charts:e})};
epiviz.workspaces.Workspace.prototype.raw=function(a){var b=new epiviz.measurements.MeasurementHashtable,e={};this._computedMeasurements.foreach(function(a){var c;a.componentMeasurements().foreach(function(a){var c=b.get(a);null===c&&(c=b.size(),b.put(a,c))});var d=a.formula().referredMeasurements,e;for(e in d)d.hasOwnProperty(e)&&(c=b.get(d[e]),null===c&&(c=b.size(),b.put(d[e],c)));c=b.get(a);null===c&&(c=b.size(),b.put(a,c))});for(var c in this._chartsOrder)if(this._chartsOrder.hasOwnProperty(c)){e[c]=
[];for(var d=0;d<this._chartsOrder[c].length;++d){var f=this._chartsById[this._chartsOrder[c][d]],n=f.properties,h=[];(function(a){n.visConfigSelection.measurements.foreach(function(c){var d=b.get(c);null===d&&(d=b.size(),b.put(c,d));a.push(d)})})(h);e[c].push({id:f.id,type:f.type.typeName(),properties:{width:n.width,height:n.height,margins:n.margins.raw(),visConfigSelection:{measurements:h,datasource:n.visConfigSelection.datasource,datasourceGroup:n.visConfigSelection.datasourceGroup,dataprovider:n.visConfigSelection.dataprovider,
annotation:n.visConfigSelection.annotation,defaultChartType:n.visConfigSelection.defaultChartType,minSelectedMeasurements:n.visConfigSelection.minSelectedMeasurements,customData:n.visConfigSelection.customData},colors:n.colors.raw(a),modifiedMethods:epiviz.utils.mapCopy(n.modifiedMethods),customSettings:n.customSettingsValues||null,chartMarkers:n.chartMarkers.map(function(a){return a.raw()})}})}}var g=Array(b.size());b.foreach(function(a,c){g[c]=a.raw(b)});return{id:this._id,name:this._name,content:{range:this._range.raw(),
measurements:g,charts:e}}};
epiviz.workspaces.Workspace.fromRawObject=function(a,b,e){var c,d=Array(a.content.measurements.length),f=new epiviz.measurements.MeasurementSet;for(c=0;c<a.content.measurements.length;++c)a.content.measurements[c].formula||(d[c]=epiviz.measurements.Measurement.fromRawObject(a.content.measurements[c]));for(c=0;c<a.content.measurements.length;++c)a.content.measurements[c].formula&&(d[c]=epiviz.measurements.Measurement.fromRawObject(a.content.measurements[c],d),f.add(d[c]));var n={},h;for(h in a.content.charts)if(a.content.charts.hasOwnProperty(h))for(n[h]=
[],c=0;c<a.content.charts[h].length;++c){var g=a.content.charts[h][c],m,p=g.properties.visConfigSelection,r=p?p.measurements:g.properties.measurements;if(r){m=new epiviz.measurements.MeasurementSet;for(var t=0;t<r.length;++t)m.add(d[r[t]])}p=p?new epiviz.ui.controls.VisConfigSelection(m,p.datasource,p.datasourceGroup,p.dataprovider,p.annotation,p.defaultChartType,p.minSelectedMeasurements,p.customData):new epiviz.ui.controls.VisConfigSelection(m);(r=b.get(g.type))&&n[h].push({id:g.id,type:r,properties:new epiviz.ui.charts.VisualizationProperties(g.properties.width,
g.properties.height,epiviz.ui.charts.Margins.fromRawObject(g.properties.margins),p,epiviz.ui.charts.ColorPalette.fromRawObject(g.properties.colors,e),g.properties.modifiedMethods,g.properties.customSettings,r.customSettingsDefs(),g.properties.chartMarkers?g.properties.chartMarkers.map(function(a){return epiviz.ui.charts.markers.VisualizationMarker.fromRawObject(a)}):[])})}return new epiviz.workspaces.Workspace(a.id,a.name,{range:epiviz.datatypes.GenomicRange.fromRawObject(a.content.range),computedMeasurements:f,
charts:n})};epiviz.workspaces.Workspace.prototype.onContentChanged=function(){return this._contentChanged};
epiviz.workspaces.WorkspaceManager=function(a,b,e,c,d){this._config=a;this._locationManager=b;this._measurementsManager=e;this._chartManager=c;this._chartFactory=d;this._workspacesByName=this._workspaces=this._unchangedActiveWorkspace=this._activeWorkspace=null;this._workspacesLoaded=new epiviz.events.Event;this._activeWorkspaceChanged=new epiviz.events.Event;this._activeWorkspaceChanging=!1;this._requestWorkspaces=new epiviz.events.Event;this._activeWorkspaceContentChanged=new epiviz.events.Event;
this._uiChartSettingsChanged=new epiviz.events.Event;var f=this;this._activeWorkspaceContentChangedListener=new epiviz.events.EventListener(function(a){f._activeWorkspaceContentChanged.notify(a)});this._registerLocationChanged();this._registerComputedMeasurementAdded();this._registerComputedMeasurementRemoved();this._registerChartAdded();this._registerChartRemoved();this._registerChartsOrderChanged();this._registerChartColorsChanged();this._registerChartMethodsModified();this._registerChartMethodsReset();
this._registerChartMarkersModified();this._registerChartSizeChanged();this._registerChartMarginsChanged();this._registerChartCustomSettingsChanged()};epiviz.workspaces.WorkspaceManager.prototype.onUiChartSettingsChanged=function(){return this._uiChartSettingsChanged};epiviz.workspaces.WorkspaceManager.prototype.activeWorkspace=function(){return this._activeWorkspace||null};epiviz.workspaces.WorkspaceManager.prototype.get=function(a){return a&&this._workspaces?this._workspaces[a]||null:null};
epiviz.workspaces.WorkspaceManager.prototype.getByName=function(a){return a&&this._workspacesByName?this._workspacesByName[a]||null:null};epiviz.workspaces.WorkspaceManager.prototype.initialize=function(){this._requestWorkspaces.notify({activeWorkspaceId:epiviz.ui.WebArgsManager.WEB_ARGS.ws||epiviz.ui.WebArgsManager.WEB_ARGS.workspace||null})};
epiviz.workspaces.WorkspaceManager.prototype.updateWorkspaces=function(a,b,e,c){if(a){this._workspaces={};this._workspacesByName={};for(var d=0;d<a.length;++d)null!==a[d].id()&&(this._workspaces[a[d].id()]=a[d],this._workspacesByName[a[d].name()]=a[d])}b||(b=a&&a.length?a[0]:epiviz.workspaces.Workspace.fromRawObject(this._config.defaultWorkspaceSettings,this._chartFactory,this._config));d=this._activeWorkspace;this._activeWorkspace=b;this._unchangedActiveWorkspace=c?c:b?b.copy(b.name(),b.id()):null;
d&&d.onContentChanged().removeListener(this._activeWorkspaceContentChangedListener);this._activeWorkspace&&this._activeWorkspace.onContentChanged().addListener(this._activeWorkspaceContentChangedListener);b=epiviz.ui.WebArgsManager.WEB_ARGS;c=void 0!=b.seqName?b.seqName:this._activeWorkspace.range().seqName();var f=null,n=null;"undefined"!=b.start&&(f=parseInt(b.start)||this._activeWorkspace.range().start());"undefined"!=b.end&&(n=parseInt(b.end)||this._activeWorkspace.range().end());this._activeWorkspace.locationChanged(epiviz.datatypes.GenomicRange.fromStartEnd(c,
f,n));this._workspacesLoaded.notify({activeWorkspace:this._activeWorkspace,workspaces:a});this._activeWorkspaceChanged.notify({oldValue:d,newValue:this._activeWorkspace,workspaceId:this._activeWorkspace.id()||e})};epiviz.workspaces.WorkspaceManager.prototype.updateWorkspace=function(a){this._workspaces[a.id()]=a;this._workspacesByName[a.name()]=a};
epiviz.workspaces.WorkspaceManager.prototype.deleteActiveWorkspace=function(){var a=this._activeWorkspace;if(a&&a.id()){delete this._workspaces[a.id()];delete this._workspacesByName[a.name()];var b=null,e;for(e in this._workspaces)if(this._workspaces.hasOwnProperty(e)){b=this._workspaces[e];break}b||(b=epiviz.workspaces.Workspace.fromRawObject(this._config.defaultWorkspaceSettings,this._chartFactory,this._config));this._unchangedActiveWorkspace=(this._activeWorkspace=b)?b.copy(b.name(),b.id()):null;
b=a.range().seqName();e=a.range().start();var c=a.range().end();this._activeWorkspace.locationChanged(epiviz.datatypes.GenomicRange.fromStartEnd(b,e,c));this._activeWorkspaceChanged.notify({oldValue:a,newValue:this._activeWorkspace,workspaceId:this._activeWorkspace.id()})}};
epiviz.workspaces.WorkspaceManager.prototype.revertActiveWorkspace=function(){if(this._unchangedActiveWorkspace){var a=this._activeWorkspace,b=a.range().seqName(),e=a.range().start(),a=a.range().end();this._activeWorkspace=this._unchangedActiveWorkspace.copy(this._unchangedActiveWorkspace.name(),this._unchangedActiveWorkspace.id());this._activeWorkspace.locationChanged(epiviz.datatypes.GenomicRange.fromStartEnd(b,e,a));this._activeWorkspaceChanged.notify({oldValue:null,newValue:this._activeWorkspace,
workspaceId:this._activeWorkspace.id()})}};epiviz.workspaces.WorkspaceManager.prototype.onWorkspacesLoaded=function(){return this._workspacesLoaded};epiviz.workspaces.WorkspaceManager.prototype.onActiveWorkspaceChanged=function(){return this._activeWorkspaceChanged};epiviz.workspaces.WorkspaceManager.prototype.startChangingActiveWorkspace=function(){this._activeWorkspaceChanging=!0};epiviz.workspaces.WorkspaceManager.prototype.endChangingActiveWorkspace=function(){this._activeWorkspaceChanging=!1};
epiviz.workspaces.WorkspaceManager.prototype.activeWorkspaceChanging=function(){return this._activeWorkspaceChanging};epiviz.workspaces.WorkspaceManager.prototype.onRequestWorkspaces=function(){return this._requestWorkspaces};epiviz.workspaces.WorkspaceManager.prototype.onActiveWorkspaceContentChanged=function(){return this._activeWorkspaceContentChanged};
epiviz.workspaces.WorkspaceManager.prototype.changeActiveWorkspace=function(a,b){if((b=b||this._workspaces[a])&&b!==this._activeWorkspace){var e=this._activeWorkspace;this._unchangedActiveWorkspace=(this._activeWorkspace=b)?this._activeWorkspace.copy(this._activeWorkspace.name(),this._activeWorkspace.id()):null;this._activeWorkspaceChanged.notify({oldValue:e,newValue:this._activeWorkspace,workspaceId:a})}};
epiviz.workspaces.WorkspaceManager.prototype._registerLocationChanged=function(){var a=this;this._locationManager.onCurrentLocationChanged().addListener(new epiviz.events.EventListener(function(b){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.locationChanged(b.newValue)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerChartAdded=function(){var a=this;this._chartManager.onChartAdded().addListener(new epiviz.events.EventListener(function(b){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.chartAdded(b.id,b.args.type,b.args.properties,b.args.chartsOrder)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerChartRemoved=function(){var a=this;this._chartManager.onChartRemoved().addListener(new epiviz.events.EventListener(function(b){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.chartRemoved(b.id,b.args)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerChartsOrderChanged=function(){var a=this;this._chartManager.onChartsOrderChanged().addListener(new epiviz.events.EventListener(function(b){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.chartsOrderChanged(b)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerChartColorsChanged=function(){var a=this;this._chartManager.onChartColorsChanged().addListener(new epiviz.events.EventListener(function(b){!a._activeWorkspaceChanging&&a._activeWorkspace&&(a._activeWorkspace.chartColorsChanged(b.id,b.args),a.onUiChartSettingsChanged().notify({chartId:b.id,colorMap:b.args}))}))};
epiviz.workspaces.WorkspaceManager.prototype._registerChartMethodsModified=function(){var a=this;this._chartManager.onChartMethodsModified().addListener(new epiviz.events.EventListener(function(b){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.chartMethodsModified(b.id,b.args)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerChartMethodsReset=function(){var a=this;this._chartManager.onChartMethodsReset().addListener(new epiviz.events.EventListener(function(b){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.chartMethodsReset(b.id)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerChartMarkersModified=function(){var a=this;this._chartManager.onChartMarkersModified().addListener(new epiviz.events.EventListener(function(b){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.chartMarkersModified(b.id,b.args)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerChartCustomSettingsChanged=function(){var a=this;this._chartManager.onChartCustomSettingsChanged().addListener(new epiviz.events.EventListener(function(b){!a._activeWorkspaceChanging&&a._activeWorkspace&&(a._activeWorkspace.chartCustomSettingsChanged(b.id,b.args),a.onUiChartSettingsChanged().notify({chartId:b.id,settings:b.args}))}))};
epiviz.workspaces.WorkspaceManager.prototype._registerChartSizeChanged=function(){var a=this;this._chartManager.onChartSizeChanged().addListener(new epiviz.events.EventListener(function(b){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.chartSizeChanged(b.id,b.args.width,b.args.height)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerChartMarginsChanged=function(){var a=this;this._chartManager.onChartMarginsChanged().addListener(new epiviz.events.EventListener(function(b){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.chartMarginsChanged(b.id,b.args)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerComputedMeasurementAdded=function(){var a=this;this._measurementsManager.onComputedMeasurementsAdded().addListener(new epiviz.events.EventListener(function(b){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.computedMeasurementsAdded(b)}))};
epiviz.workspaces.WorkspaceManager.prototype._registerComputedMeasurementRemoved=function(){var a=this;this._measurementsManager.onComputedMeasurementsRemoved().addListener(new epiviz.events.EventListener(function(b){a._activeWorkspaceChanging||a._activeWorkspace&&a._activeWorkspace.computedMeasurementsRemoved(b)}))};epiviz.localstorage={};epiviz.localstorage.LocalStorageManager=function(a){this._workspace=a;this._availStorage="undefined"===typeof Storage||null==localStorage?!1:!0};
epiviz.localstorage.LocalStorageManager.MODE={INCOGNITO_MODE:"incognito_workspace",COOKIE_MODE:"workspace"};epiviz.localstorage.LocalStorageManager.prototype.initialize=function(){};epiviz.localstorage.LocalStorageManager.prototype.getWorkspace=function(a,b){if(this._availStorage){var e=localStorage.getItem(this._workspace);return e?epiviz.workspaces.Workspace.fromRawObject(JSON.parse(e),a,b):null}};
epiviz.localstorage.LocalStorageManager.prototype.saveWorkspace=function(a,b){if(this._availStorage){var e=a.raw(b);localStorage.setItem(this._workspace,JSON.stringify(e))}};epiviz.localstorage.LocalStorageManager.prototype.clearWorkspace=function(){this._availStorage&&localStorage.removeItem(this._workspace)};epiviz.localstorage.LocalStorageManager.prototype.clearAll=function(){this._availStorage&&localStorage.clear()};
epiviz.ui.tutorials=function(){this._tutorialList=[{name:"Metaviz Overview",id:"tut_epiviz_overview",tutorial:[{target:"body",content:"<p class='intro-header'>Welcome to Metaviz Genomic Browser!<br></p><p class='intro-text'>This tutorial will walk you through the functionality available in Metaviz.</p>",position:"center"},{target:"#intro-navigation",content:"<p class='intro-text'>The navigation section of Metaviz lets you select a chromosome and explore the genome. Options are available to move left/right and zoom in/out.</p><p class='intro-text'>The settings icon allows you to control the navigation parameters.</p>",
position:"right",buttons:[AnnoButton.BackButton,AnnoButton.NextButton]},{target:"#vis-menu-button",content:'<p class="intro-text">Choose from a list of available data sources, measurements or chart types to add visualizations to the Metaviz Workspace.</p>',position:"right",buttons:[AnnoButton.BackButton,AnnoButton.NextButton]},{target:"#intro-workspace",content:'<p class="intro-header">managing workspaces.</p><p class="intro-text">If you are logged in, you will be able to save your Metaviz analysis and workspaces.You will also be able to retrieve them at a later time from your account.</p>',
position:"right",buttons:[AnnoButton.BackButton,AnnoButton.NextButton]},{target:"#login-link",content:'<p class="intro-text">Please login to save and manage Metaviz workspaces.</p>',position:"left",buttons:[AnnoButton.BackButton,AnnoButton.NextButton]},{target:"body",content:'<p class=\'intro-header\'>Thank you for using Metaviz!</p><p class="intro-text">If you would like to give us some feedback or stay informed with updates, Please visit the <a target="_blank" href="http://epiviz.github.io/">Metaviz webpage</a>.</p>',
position:"center"}]},{name:"Data Visualization and Controls",id:"tut_data_controls",tutorial:[{target:"body",content:"<p class='intro-header'>Welcome to Metaviz Genomic Browser!<br><br>Data visualization tutorial<br></p><p class='intro-text'>This tutorial will help create/add new data visualizations to the Metaviz workspace and controls available for each visualization.</p>",position:"center"},{target:"#vis-menu-button",content:'<p class="intro-text">The Data Visualizations button helps users add new charts to the workspace.</p><p>Users have the option to choose data sources and measurements to add to the workspace.</p>',
position:"right",onHide:function(a,b,e,c){$("#vis-menu-button").button().trigger("click")},showOverlay:function(){},buttons:[AnnoButton.BackButton,AnnoButton.NextButton]},{target:"#vis-menu",content:'<p class="intro-text">Choose the type of chart to add to your workspace. We choose scatter plot to continue with the tutorial</p>',position:"right",onShow:function(a,b,e){$(".anno-overlay").zIndex(0)},onHide:function(a,b,e,c){$("#plot-menu-add-scatter").trigger("click")},showOverlay:function(){},buttons:[AnnoButton.BackButton,
AnnoButton.NextButton]},{target:function(){var a=$("#wizardDialog").parent().attr("id");return $("#"+a).parent()},content:'<p class="intro-text">This window lets you choose form a list of data sources and the measurements available from each data source to add to your Epiviz workspace</p><p>We selected the first data source in the table or choose a data source from the list.</p>',showOverlay:function(){},onShow:function(a,b,e){$("#wizardDialog table tbody tr:first").trigger("click")},onHide:function(a,
b,e,c){$('.ui-button:contains("Next")').trigger("click")},position:"right",buttons:[AnnoButton.BackButton,AnnoButton.NextButton]},{target:function(){var a=$("#wizardDialog").parent().attr("id");return $("#"+a).parent()},content:'<p class="intro-text">After choosing a data source, the next tab lists all the measurements (or features) available from this data source. If you have any computed measurements for this data source, they will be added to this list.</p><p>To add a plot to the workspace, pick a few measurements and select finish on this window. </p>',
showOverlay:function(){},position:"right",onShow:function(a,b,e){$("#wizardDialog table tbody tr:eq(1)").toggleClass("DTTT_selected");$("#wizardDialog table tbody tr:eq(2)").toggleClass("DTTT_selected");$("#wisardDialog table tbdoy tr:eq(3)").toggleClass("DTTT_selected")},onHide:function(a,b,e,c){$("#wizardDialog").parent().attr("id");$('.ui-button:contains("Finish")').trigger("click")},buttons:[AnnoButton.BackButton,AnnoButton.NextButton]},{target:"#feature-view",content:'<p class="intro-text">Visualizations are added to the workspace based on the type of chart. </p><p>Brushing is implemented on all the plots. When you hover over a data point, it highlight that region in the gene on all the visualizations.</p>',
position:{top:"24em",left:"14em"},showOverlay:function(){},onShow:function(a,b,e){$(".anno-inner").zIndex(1E3);$(".anno-overlay").zIndex(1)},buttons:[AnnoButton.BackButton,AnnoButton.NextButton]},{target:function(){return $('button:contains("Remove"):first')},content:'<p class="intro-text">Removes the plot from the workspace</p>',position:"left",showOverlay:function(){},className:"anno-width-175",onShow:function(a,b,e){$('button:contains("Save"):eq(1)').css("display","block")},onHide:function(a,b,
e,c){$(b).css("display","none")},buttons:[AnnoButton.BackButton,AnnoButton.NextButton]},{target:function(){return $('button:contains("Save"):eq(1)')},content:'<p class="intro-text">Save a plot to your local machine (image, pdf)</p>',position:"left",showOverlay:function(){},className:"anno-width-175",onShow:function(a,b,e){$('button:contains("Custom settings"):first').css("display","inline-block")},onHide:function(a,b,e,c){$(b).css("display","none")},buttons:[AnnoButton.BackButton,AnnoButton.NextButton]},
{target:function(){return $('button:contains("Custom settings"):first')},content:'<p class="intro-text">Change chart display properties and aggregation methods for grouping.</p>',position:"left",showOverlay:function(){},className:"anno-width-175",onShow:function(a,b,e){$('button:contains("Code"):first').css("display","inline-block")},onHide:function(a,b,e,c){$(b).css("display","none")},buttons:[AnnoButton.BackButton,AnnoButton.NextButton]},{target:function(){return $('button:contains("Code"):first')},
content:'<p class="intro-text">Edit code to redraw the chart on the workspace.</p>',position:"left",showOverlay:function(){},className:"anno-width-175",onShow:function(a,b,e){$('button:contains("Colors"):first').css("display","inline-block")},onHide:function(a,b,e,c){$(b).css("display","none")},buttons:[AnnoButton.BackButton,AnnoButton.NextButton]},{target:function(){return $('button:contains("Colors"):first')},content:'<p class="intro-text">Choose colors for data points on the plot</p>',position:"left",
showOverlay:function(){},className:"anno-width-175",onShow:function(a,b,e){$('label:contains("Toggle tooltip"):first').css("display","block")},onHide:function(a,b,e,c){$(b).css("display","none")},buttons:[AnnoButton.BackButton,AnnoButton.NextButton]},{target:function(){return $('label:contains("Toggle tooltip"):first')},content:'<p class="intro-text">Toggle tooltips for data points</p>',position:"right",showOverlay:function(){},className:"anno-width-175",onHide:function(a,b,e,c){$(b).css("display",
"none")},buttons:[AnnoButton.BackButton,AnnoButton.NextButton]},{target:"body",content:'<p class=\'intro-header\'>Thank you for using Metaviz!</p><p class="intro-text">If you would like to give us some feedback or stay informed with updates, Please visit the <a target="_blank" href="http://epiviz.github.io/">Epiviz webpage</a>.</p>',position:"center"}]},{name:"Computed Measurements",id:"tut_comp_measurements",tutorial:[{target:"body",content:"<p class='intro-header'>Welcome to Metaviz Genomic Browser!<br>Compute Measurements Tutorial<br></p><p class='intro-text'>This tutorial will help you create new measurements (derived from existing measurements) and generate plots to add to the workspace.</p>",
position:"center"},{target:"#computed-measurements-button",content:"<p class='intro-text'>The computed measurements button helps users add new measurements to data sources</p>",position:"right",onShow:function(a,b,e){$("#computed-measurements-button").button().trigger("click")},buttons:[AnnoButton.BackButton,AnnoButton.NextButton]},{target:"#computedMeasurementsDialog",content:"<p class='intro-text'>This tab lets you choose a data source where you will create a new measurement.</p><p>We choose the first data source in the list or choose any data source.</p>",
position:{top:"20em",left:"1em"},showOverlay:function(){},onShow:function(a,b,e){$("#computedMeasurementsDialog table tbody tr td:first").trigger("click")},buttons:[AnnoButton.BackButton,AnnoButton.NextButton]},{target:"#computedMeasurementsDialog",content:"<p class='intro-text'>The measurements tab lists all available measurements from the selected data source (including previously created computed measurements).</p><p>Use the buttons next to each measurement to add to the expression window</p>",
position:{top:"20em",left:"1em"},showOverlay:function(){},onShow:function(a,b,e){$('.ui-button:contains("Next")').trigger("click")},buttons:[AnnoButton.BackButton,AnnoButton.NextButton]},{target:"#computedMeasurementsDialog",content:"<p class='intro-text'> After choosing measurements, use mathematical operators to evaluate the expression.</p><p><a target='_blank' href='https://silentmatt.com/javascript-expression-evaluator/'>supported operators</a> </p>",position:{top:"33em",left:"1em"},showOverlay:function(){},
buttons:[AnnoButton.BackButton,AnnoButton.NextButton]},{target:"#computedMeasurementsDialog",content:"<p class='intro-text'>After adding a computed measurement, use the data visualization button to plot the measurement to your workspace.</p><p>To learn how to add new plots to the workspace, please use the Metaviz data visualization tutorial.</p>",position:{top:"10em",left:"1em"},showOverlay:function(){},onHide:function(a,b,e,c){a=$("#computedMeasurementsDialog").parent().attr("id");$("#"+a).dialog("close")},
buttons:[AnnoButton.BackButton,AnnoButton.NextButton]},{target:"body",content:'<p class=\'intro-header\'>Thank you for using Metaviz!</p><p class="intro-text">If you would like to give us some feedback or stay informed with updates, Please visit the <a target="_blank" href="http://epiviz.github.io/">Metaviz webpage</a>.</p>',position:"center"}]}]};epiviz.datatypes.GenomicRange=function(a,b,e){void 0!=e&&0>e&&(e=-e,void 0!=b&&(b-=e));this._seqname=a;this._start=b;this._width=e};
epiviz.datatypes.GenomicRange.fromStartEnd=function(a,b,e){return new epiviz.datatypes.GenomicRange(a,b,void 0!=b&&void 0!=e?e-b:void 0)};epiviz.datatypes.GenomicRange.prototype.seqName=function(){return this._seqname};epiviz.datatypes.GenomicRange.prototype.start=function(){return this._start};epiviz.datatypes.GenomicRange.prototype.width=function(){return this._width};epiviz.datatypes.GenomicRange.prototype.end=function(){return void 0!=this._start&&void 0!=this._width?this._start+this._width:void 0};
epiviz.datatypes.GenomicRange.prototype.isEmpty=function(){return 0>=this._width};
epiviz.datatypes.GenomicRange.prototype.subtract=function(a){return!a||a.seqName()!=this._seqname||a.isEmpty()||a.start()>=this.end()||this._start>=a.end()?[this]:a.start()<=this._start&&a.end()>=this.end()?[]:a.start()>this._start&&a.end()<this.end()?[epiviz.datatypes.GenomicRange.fromStartEnd(this._seqname,this._start,a.start()),epiviz.datatypes.GenomicRange.fromStartEnd(this._seqname,a.end(),this.end())]:a.start()>this._start?[epiviz.datatypes.GenomicRange.fromStartEnd(this._seqname,this._start,
a.start())]:[epiviz.datatypes.GenomicRange.fromStartEnd(this._seqname,a.end(),this.end())]};epiviz.datatypes.GenomicRange.prototype.equals=function(a){return a?a==this?!0:this._seqname==a._seqname&&this._start==a._start&&this._width==a._width:!1};epiviz.datatypes.GenomicRange.prototype.overlapsWith=function(a){return a?this==a?!0:this.seqName()!=a.seqName()?!1:this.start()<a.end()&&this.end()>a.start():!1};
epiviz.datatypes.GenomicRange.prototype.raw=function(){return{seqName:this._seqname,start:this._start,width:this._width}};epiviz.datatypes.GenomicRange.fromRawObject=function(a){return new epiviz.datatypes.GenomicRange(a.seqName,a.start,a.width)};
epiviz.ui.LocationManager=function(a){this._seqInfos={};this._timeout=this._lastUnfilledRequest=this._currentLocation=null;this._navigationDelay=a.navigationDelay;this._currentLocationChanged=new epiviz.events.Event;this._seqInfosUpdated=new epiviz.events.Event;this._requestSeqInfos=new epiviz.events.Event};epiviz.ui.LocationManager.prototype.initialize=function(){this._requestSeqInfos.notify()};
epiviz.ui.LocationManager.prototype.changeCurrentLocation=function(a){if(!this._currentLocationChanged.isFiring()){this._lastUnfilledRequest=a;null!==this._timeout&&(window.clearTimeout(this._timeout),this._timeout=null);var b=this;a=function(){var a=b._lastUnfilledRequest;null!==a&&b._doChangeCurrentLocation(a)};this._navigationDelay?this._timeout=window.setTimeout(a,this._navigationDelay):a()}};
epiviz.ui.LocationManager.prototype._doChangeCurrentLocation=function(a){var b=this._currentLocation,e=a.seqName();if(!(a.seqName()in this._seqInfos)){if(!b)return;e=b.seqName()}var c=void 0,d=void 0;this._seqInfos[e]&&void 0!=this._seqInfos[e].min&&void 0!=this._seqInfos[e].max&&(c=void 0!=a.start()&&a.start()>=this._seqInfos[e].min?a.start():this._seqInfos[e].min,d=void 0!=a.width()?c+a.width():c+9999);void 0!=c&&void 0!=d&&d>this._seqInfos[e].max&&(c=Math.max(this._seqInfos[e].min,this._seqInfos[e].max-
d+c),d=this._seqInfos[e].max);this._lastUnfilledRequest=null;this._currentLocation=epiviz.datatypes.GenomicRange.fromStartEnd(e,c,d);this._currentLocationChanged.notify({oldValue:b,newValue:this._currentLocation})};epiviz.ui.LocationManager.prototype.currentLocation=function(){return this._currentLocation};epiviz.ui.LocationManager.prototype.lastUnfilledLocationChangeRequest=function(){return this._lastUnfilledRequest};
epiviz.ui.LocationManager.prototype.updateSeqInfos=function(a){this._seqInfos={};for(var b=0;b<a.length;++b)this._seqInfos[a[b].seqName]=a[b];this._seqInfosUpdated.notify(a);null!==this._lastUnfilledRequest&&(this._lastUnfilledRequest.seqName()in this._seqInfos?this._doChangeCurrentLocation(this._lastUnfilledRequest):0<a.length&&(a=new epiviz.datatypes.GenomicRange(a[0].seqName,this._lastUnfilledRequest.start(),this._lastUnfilledRequest.width()),this._doChangeCurrentLocation(a)))};
epiviz.ui.LocationManager.prototype.addSeqInfos=function(a){for(var b=0;b<a.length;++b)this._seqInfos[a[b].seqName]||(this._seqInfos[a[b].seqName]=a[b]);a=[];for(var e in this._seqInfos)this._seqInfos.hasOwnProperty(e)&&a.push(this._seqInfos[e]);this._seqInfosUpdated.notify(a)};
epiviz.ui.LocationManager.prototype.removeSeqNames=function(a){for(var b=0;b<a.length;++b)delete this._seqInfos[a[b]];a=[];for(var e in this._seqInfos)this._seqInfos.hasOwnProperty(e)&&a.push(this._seqInfos[e]);this._seqInfosUpdated.notify(a);this._currentLocation.seqName()in this._seqInfos||this.changeCurrentLocation(new epiviz.datatypes.GenomicRange(a[0].seqName,this._currentLocation.start(),this._currentLocation.width()))};epiviz.ui.LocationManager.prototype.seqInfos=function(){return this._seqInfos};
epiviz.ui.LocationManager.prototype.onCurrentLocationChanged=function(){return this._currentLocationChanged};epiviz.ui.LocationManager.prototype.onSeqInfosUpdated=function(){return this._seqInfosUpdated};epiviz.ui.LocationManager.prototype.onRequestSeqInfos=function(){return this._requestSeqInfos};
epiviz.ui.ControlManager=function(a,b,e,c,d){this._config=a;this._chartFactory=b;this._chartManager=e;this._measurementsManager=c;this._locationManager=d;this._addChart=new epiviz.events.Event;this._activeWorkspaceChanged=new epiviz.events.Event;this._saveWorkspace=new epiviz.events.Event;this._deleteActiveWorkspace=new epiviz.events.Event;this._revertActiveWorkspace=new epiviz.events.Event;this._loginLinkClicked=new epiviz.events.Event;this._searchWorkspaces=new epiviz.events.Event;this._search=
new epiviz.events.Event;this._activeWorkspaceInfo=null;this._stepRatio=a.navigationStepRatio;this._zoominRatio=a.zoominRatio;this._zoomoutRatio=a.zoomoutRatio};epiviz.ui.ControlManager.CHART_TYPE_CONTAINERS={plot:"feature-view",track:"location-view","data-structure":"data-structure-view"};epiviz.ui.ControlManager.DISPLAY_TYPE_LABELS={plot:"Feature",track:"Location","data-structure":"Data Structure"};
epiviz.ui.ControlManager.prototype.initialize=function(){this._initializeChromosomeSelector();this._initializeLocationTextbox();this._initializeNavigationButtons();this._initializeZoomButtons();this._initializeLocationSettingsDialog();this._initializeChartMenus();this._initializeComputedMeasurementsMenu();this._initializeHelpButton();this._initializeSearchBox();this._initializeWorkspaceSaving();this._initializeTutorials();this._initializeScreenshotMenu();this._initializeLoginLink();this._initializeLayout();
this._checkBrowserCompatibility();this._registerLocationChanged();this._registerSeqInfosUpdated()};epiviz.ui.ControlManager.prototype.onAddChart=function(){return this._addChart};epiviz.ui.ControlManager.prototype.onActiveWorkspaceChanged=function(){return this._activeWorkspaceChanged};epiviz.ui.ControlManager.prototype.onSaveWorkspace=function(){return this._saveWorkspace};epiviz.ui.ControlManager.prototype.onDeleteActiveWorkspace=function(){return this._deleteActiveWorkspace};
epiviz.ui.ControlManager.prototype.onRevertActiveWorkspace=function(){return this._revertActiveWorkspace};epiviz.ui.ControlManager.prototype.onLoginLinkClicked=function(){return this._loginLinkClicked};epiviz.ui.ControlManager.prototype.onSearchWorkspaces=function(){return this._searchWorkspaces};epiviz.ui.ControlManager.prototype.onSearch=function(){return this._search};
epiviz.ui.ControlManager.prototype._updateSeqNames=function(a){var b=$("#chromosome-selector");b.empty();for(var e=0;e<a.length;++e){var c=sprintf('<option value="%s"%s>%s</option>',a[e].seqName,this._locationManager.currentLocation()&&a[e].seqName==this._locationManager.currentLocation().seqName()?'selected="selected"':"",a[e].seqName);b.append(c)}b.selectmenu()};
epiviz.ui.ControlManager.prototype._updateSelectedLocation=function(a){if(a){this._locationManager.changeCurrentLocation(a);a=this._locationManager.currentLocation();$("#text-location").val(Globalize.format(a.start(),"n0")+" - "+Globalize.format(a.end(),"n0"));var b=$("#chromosome-selector");b.val(a.seqName());b.selectmenu()}};
epiviz.ui.ControlManager.prototype.updateSelectedWorkspace=function(a){var b=this,e=$("#save-workspace-text"),c=this._activeWorkspaceInfo;e.val(a.name);this._activeWorkspaceInfo=a;this._activeWorkspaceChanged.notify({oldValue:c,newValue:a,cancel:function(){e.val(c.name);b._activeWorkspaceInfo=c}})};
epiviz.ui.ControlManager.prototype._initializeChromosomeSelector=function(){var a=$("#chromosome-selector");a.selectmenu({style:"popup",width:"90",maxHeight:"100",menuWidth:"90"});var b=this;a.change(function(){var a=b._locationManager.lastUnfilledLocationChangeRequest()||b._locationManager.currentLocation(),c=$(this).val();b._updateSelectedLocation(new epiviz.datatypes.GenomicRange(c,a.start(),a.width()))})};
epiviz.ui.ControlManager.prototype._initializeLocationTextbox=function(){var a=this;$("#text-location").keypress(function(b){if(13!=b.which)return!0;try{var e=$(this).val().split("-"),c=Globalize.parseInt(e[0]),d=Globalize.parseInt(e[1]),f=a._locationManager.lastUnfilledLocationChangeRequest()||a._locationManager.currentLocation();a._updateSelectedLocation(epiviz.datatypes.GenomicRange.fromStartEnd(f.seqName(),c,d));return!0}catch(n){return!1}})};
epiviz.ui.ControlManager.prototype._initializeNavigationButtons=function(){var a=this;$("#moveright").button({icons:{primary:"ui-icon ui-icon-seek-next"},text:!1}).click(function(){var b=a._locationManager.lastUnfilledLocationChangeRequest()||a._locationManager.currentLocation(),e=b.start()+Math.round(b.width()*a._stepRatio);a._updateSelectedLocation(new epiviz.datatypes.GenomicRange(b.seqName(),e,b.width()))});$("#moveleft").button({icons:{primary:"ui-icon ui-icon-seek-prev"},text:!1}).click(function(){var b=
a._locationManager.lastUnfilledLocationChangeRequest()||a._locationManager.currentLocation(),e=b.start()-Math.round(b.width()*a._stepRatio);a._updateSelectedLocation(new epiviz.datatypes.GenomicRange(b.seqName(),e,b.width()))})};
epiviz.ui.ControlManager.prototype._initializeZoomButtons=function(){var a=this,b=$("#zoomin");b.button({icons:{primary:"ui-icon ui-icon-zoomin"},text:!1});var e=$("#zoomout");e.button({icons:{primary:"ui-icon ui-icon-zoomout"},text:!1});var c=function(b){var c=a._locationManager.lastUnfilledLocationChangeRequest()||a._locationManager.currentLocation(),e=c.start()+.5*c.width();b=Math.round(c.width()*b);e=Math.round(e-.5*b);a._updateSelectedLocation(new epiviz.datatypes.GenomicRange(c.seqName(),e,
b))};b.click(function(){c(a._zoominRatio)});e.click(function(){c(a._zoomoutRatio)})};
epiviz.ui.ControlManager.prototype._initializeLocationSettingsDialog=function(){var a=this;$("#location-settings").button({text:!1,icons:{primary:"ui-icon ui-icon-gear"}}).click(function(){$("#location-settings-dialog").dialog("open")});$("#location-settings-dialog").dialog({autoOpen:!1,resizable:!1,width:"300",buttons:{Ok:function(){a._zoominRatio=$("#zoomin-ratio-text").val();a._zoomoutRatio=$("#zoomout-ratio-text").val();a._stepRatio=$("#navigation-step-ratio-text").val();$(this).dialog("close")},
Cancel:function(){$("#zoomin-ratio-text").val(Globalize.format(a._zoominRatio,"n3"));$("#zoomout-ratio-text").val(Globalize.format(a._zoomoutRatio,"n3"));$("#navigation-step-ratio-text").val(Globalize.format(a._stepRatio,"n6"));$(this).dialog("close")}},modal:!0});$("#zoomout-ratio-text").spinner({min:1.001,max:1E3,step:.001,start:1.2,numberFormat:"n3"}).val(a._zoomoutRatio);$("#zoomin-ratio-text").spinner({min:.001,max:.999,step:.01,start:.8,numberFormat:"n3"}).val(a._zoominRatio);$("#navigation-step-ratio-text").spinner({min:1E-6,
max:1,step:1E-6,start:.2,numberFormat:"n6"}).val(a._stepRatio)};
epiviz.ui.ControlManager.prototype._initializeChartMenus=function(){var a=this,b=$("#vis-menu");$("#vis-menu-button").button({label:"Add Visualization",icons:{primary:"ui-icon ui-icon-scatterplot",secondary:"ui-icon-triangle-1-s"},iconPosition:{iconPositon:"end"}}).click(function(){var a=b.is(":visible");$(".dropdown-menu").find(">:first-child").hide();a?b.hide():b.show().position({my:"left top",at:"left bottom",of:this});return!1});$("#data-source-button").button({label:"Start Here"}).click(function(){var b=
a._measurementsManager.measurements();b.addAll(a._measurementsManager.measurements().map(function(a){return a.datasource()}));var c={},d=a._chartFactory._types["epiviz.ui.charts.tree.Icicle"];b.foreach(function(a){if(!b.dataprovider||b.dataprovider==a.dataprovider()){if(b.annotation)for(var d in b.annotation)if(b.annotation.hasOwnProperty(d)&&(!a.annotation()||a.annotation()[d]!=b.annotation[d]))return;a._description||(a._description="description not available");d=!1;void 0==a.datasourceGroup()&&
(d=!0);c[a.datasourceGroup()]&&"description not available"!=c[a.datasourceGroup()][0]||(c[a.datasourceGroup()]=[a._description,d])}});initialize(c);$("#sourcemodal").modal({closable:!1,selector:{deny:".ui.grey.button",approve:".ui.blue.submit.button"},onDeny:function(){$("#sourcemodal").modal("hide");$("form").empty();$("#newmodal").remove()},onApprove:function(){var c=$("#form").form("get value","source"),e=b.subset(function(a){return a.datasourceGroup()===c}),e=new epiviz.ui.controls.VisConfigSelection(e,
void 0,c,void 0,void 0,d.chartName(),d.minSelectedMeasurements());a._addChart.notify({type:d,visConfigSelection:e})}});$("#sourcemodal").modal("show")});var e={},c=epiviz.ui.ControlManager.DISPLAY_TYPE_LABELS;this._chartFactory.foreach(function(a,b){b.chartDisplayType()in e||(e[b.chartDisplayType()]=[]);e[b.chartDisplayType()].push(b)});for(var d in e)e.hasOwnProperty(d)&&"data-structure"!=d&&($(sprintf('<li class="ui-widget-header">%s</li>',c[d])).appendTo(b),e[d].forEach(function(c,d){var e=sprintf("%s-menu-add-%s",
c.chartDisplayType(),c.chartHtmlAttributeName());b.append(sprintf('<li><a href="javascript:void(0)" id="%s">%s</a></li>',e,c.chartName()));$("#"+e).click(function(){var d=a._measurementsManager.measurements().subset(c.measurementsFilter());d.addAll(a._measurementsManager.measurements().map(function(a){return a.datasource()}).subset(c.measurementsFilter()));var e={},h,n,t;for(t in a._chartManager._charts)a._chartManager._charts.hasOwnProperty(t)&&a._chartManager._charts[t].displayType()==epiviz.ui.charts.VisualizationType.DisplayType.DATA_STRUCTURE&&
(h=a._chartManager._charts[t],n=a._chartManager._charts[t].measurements());var l;n&&(h=h._properties.visConfigSelection,(l=h.datasourceGroup)||h.measurements.foreach(function(a){return a.datasourceGroup()?(l=a.datasourceGroup(),!0):!1}));d.foreach(function(a){if(!d.dataprovider||d.dataprovider==a.dataprovider()){if(d.annotation)for(var b in d.annotation)if(d.annotation.hasOwnProperty(b)&&(!a.annotation()||a.annotation()[b]!=d.annotation[b]))return;a._description||(a._description="description not available");
b=!1;a.datasourceGroup()==l&&(b=!0);e[a.datasourceGroup()]&&"description not available"!=e[a.datasourceGroup()][0]||(e[a.datasourceGroup()]=[a._description,b])}});h=d.subset(function(a){return a.datasourceGroup()===l});showModal(l,h.raw(),function(b,d){for(var e=new epiviz.measurements.MeasurementSet,g=0;g<b.length;g++){var h=b[g];e.add(new epiviz.measurements.Measurement(h.id,h.name,h.type,h.datasourceId,h.datasourceGroup,h.dataprovider,h.formula,h.defaultChartType,h.annotation,h.minValue,h.maxValue,
h.metadata,h.description))}var e=new epiviz.ui.controls.VisConfigSelection(e,void 0,void 0,void 0,void 0,c.chartName(),c.minSelectedMeasurements()),g=[],l;for(l in d)h=d[l],"range"==h.type?1<h.values.length&&g.push(l+" IN ["+h.values.join(", ")+"]"):1<h.values.length?g.push(l+" IN ("+h.values.join(" | ")+")"):1==h.values.length&&g.push(l+" = "+h.values[0]);g=g.join(" AND ");a._addChart.notify({type:c,visConfigSelection:e,title:g});$("#resultmodal").remove();$("#newmodal").remove()});b.hide()})}));
b.hide().menu()};epiviz.ui.ControlManager.prototype._initializeComputedMeasurementsMenu=function(){var a=this;$("#computed-measurements-button").button({text:!1,icons:{primary:"ui-icon ui-icon-calculator"}}).click(function(){(new epiviz.ui.controls.ComputedMeasurementsDialog("Computed Measurements",{add:function(b){a._measurementsManager.addMeasurement(b)},remove:function(b){a._measurementsManager.removeMeasurement(b)},close:function(){}},a._measurementsManager.measurements(),a._chartManager.chartsMeasurements())).show()})};
epiviz.ui.ControlManager.prototype._initializeHelpButton=function(){$("#help-button").button({text:!1,icons:{primary:"ui-icon ui-icon-help"}}).click(function(){window.open("http://epiviz.github.io/","_blank").focus()})};
epiviz.ui.ControlManager.prototype._initializeTutorials=function(){var a=$("#help-tutorials"),b=new epiviz.ui.tutorials,e='<div class="dropdown-menu"><ul id="tutorial-list"><li class="ui-widget-header">Tutorials</li>';0<b._tutorialList.length?b._tutorialList.forEach(function(a){e+='<li><a href="javascript:void(0);" id="'+a.id+'">'+a.name+"</a></li>"}):e+="<li>No Tutorials available</li>";e+="</ul></div>";$(sprintf(e)).insertAfter(a);var c=$("#tutorial-list");c.hide().menu();a.button({icons:{primary:"ui-icon ui-icon-info",
secondary:"ui-icon-triangle-1-s"},text:!1}).click(function(){c.is(":visible")?c.hide():c.show().position({my:"left top",at:"left bottom",of:this});return!1});0<b._tutorialList.length&&b._tutorialList.forEach(function(a){$("#"+a.id).click(function(){(new Anno(a.tutorial)).show();c.hide()})})};
epiviz.ui.ControlManager.prototype._initializeScreenshotMenu=function(){var a=this,b=$("#save-page");b.button({icons:{primary:"ui-icon ui-icon-print"},text:!1}).click(function(){var e=$("#save-workspace-text").val();a._saveWorkspace.notify({name:e,id:e==a._activeWorkspaceInfo.name?a._activeWorkspaceInfo.id:null});b.append(sprintf('<div id="loading" title="printing workspace"><p>Save/Print the existing MetaViz workspace.</p><div style="position:absolute; right:15px;"><select class="screenshot-file-format"><option value="pdf" selected="selected">PDF</option><option value="png" >PNG</option></select></div></div>'));
b.find("#loading").dialog({resizable:!1,modal:!0,title:"Print workspace as image",buttons:{Print:function(){$(this).dialog("close");var b=$(".screenshot-file-format option:selected").val(),d=Math.floor($.now()/1E3);(new epiviz.ui.PrintManager("pagemain","metaviz_"+d,b,a._activeWorkspaceInfo.id)).print();$(this).dialog("destroy").remove()},cancel:function(){$(this).dialog("destroy").remove()}}}).show()})};
epiviz.ui.ControlManager.prototype._initializeSearchBox=function(){var a=this,b=$("#search-box");b.watermark("Find a taxonomic feature");b.autocomplete({source:function(b,c){a._search.notify({searchTerm:b.term,callback:function(a){for(var b=[],e=0;e<a.length;++e)b.push({value:a[e].probe||a[e].gene,label:a[e].probe||a[e].gene,html:sprintf("<b>%s</b>, [%s]",a[e].gene,a[e].level),range:epiviz.datatypes.GenomicRange.fromStartEnd(a[e].seqName,a[e].start,a[e].end),level:a[e].level||null,node:a[e].nodeId||
null});c(b)}})},minLength:1,select:function(b,c){a._locationManager.lastUnfilledLocationChangeRequest()||a._locationManager.currentLocation();var d=c.item.range.seqName(),f=c.item.range.start(),n=c.item.range.width();a._updateSelectedLocation(new epiviz.datatypes.GenomicRange(d,f,n))},focus:function(a){a.preventDefault()},open:function(){},close:function(){}}).data("autocomplete")._renderItem=function(a,b){return $("<li></li>").data("item.autocomplete",b).append(sprintf("<a>%s</a>",b.html)).appendTo(a)}};
epiviz.ui.ControlManager.prototype._initializeWorkspaceSaving=function(){var a=this,b=$("#save-workspace-text"),e=$("#save-workspace-button"),c=$("#revert-workspace-button"),d=$("#delete-workspace-button");e.button({text:!1,icons:{primary:"ui-icon-disk"}}).click(function(){var c=null;try{var d=b.val();/[a-zA-Z0-9_\s]+/g.exec(d)==d?epiviz.workspaces.UserManager.USER_STATUS.loggedIn?a._saveWorkspace.notify({name:d,id:d==a._activeWorkspaceInfo.name?a._activeWorkspaceInfo.id:null}):(c=new epiviz.ui.controls.MessageDialog("User not logged in",
{Yes:function(){a._loginLinkClicked.notify()},No:function(){}},"You need to log in in order to save the workspace. Do you wish to log in now?",epiviz.ui.controls.MessageDialog.Icon.QUESTION),c.show()):(c=new epiviz.ui.controls.MessageDialog("Invalid workspace name",{Ok:function(){$(this).remove()}},"Invalid workspace name: "+d,epiviz.ui.controls.MessageDialog.Icon.ERROR),c.show())}catch(e){c=new epiviz.ui.controls.MessageDialog("Error",{ok:function(){$(this).remove()}},"An error occurred while trying to save workspace: "+
e.message,epiviz.ui.controls.MessageDialog.Icon.ERROR),c.show()}});d.button({text:!1,icons:{primary:"ui-icon-trash"}}).click(function(b){epiviz.workspaces.UserManager.USER_STATUS.loggedIn&&(new epiviz.ui.controls.MessageDialog("Delete active workspace",{Yes:function(){a._deleteActiveWorkspace.notify()},No:function(){}},"Are you sure you want to delete the active workspace?",epiviz.ui.controls.MessageDialog.Icon.QUESTION)).show()});c.button({text:!1,icons:{primary:"ui-icon-arrowreturnthick-1-w"}}).click(function(b){(new epiviz.ui.controls.MessageDialog("Delete active workspace",
{Yes:function(){a._revertActiveWorkspace.notify()},No:function(){}},"Are you sure you want to revert the changes on the active workspace?",epiviz.ui.controls.MessageDialog.Icon.QUESTION)).show()});b.watermark("Save Workspace Name");b.autocomplete({source:function(b,c){a._searchWorkspaces.notify({searchTerm:b.term,callback:function(a){for(var b=[],d=0;d<a.length;++d)b.push({value:a[d].id,label:a[d].name,html:sprintf("<b>%s</b> %s",a[d].name,a[d].id||"")});c(b)}})},minLength:0,select:function(c,d){c.preventDefault();
a.updateSelectedWorkspace({id:d.item.value||b.val(),name:d.item.label})},focus:function(a){a.preventDefault()},open:function(){},close:function(){}}).data("autocomplete")._renderItem=function(a,b){return $("<li></li>").data("item.autocomplete",b).append(sprintf("<a>%s</a>",b.html)).appendTo(a)};b.click(function(){b.autocomplete("search","")})};epiviz.ui.ControlManager.prototype._initializeLoginLink=function(){var a=this;$("#login-link").live({click:function(){a._loginLinkClicked.notify()}})};
epiviz.ui.ControlManager.prototype._initializeLayout=function(){$("body").layout({applyDefaultStyles:!0,east__size:390,east__minSize:390,east__initHidden:!0,north__resizable:!1,north__initHidden:!1,south__initHidden:!0,east__initClosed:!0})};
epiviz.ui.ControlManager.prototype._checkBrowserCompatibility=function(){0<epiviz.utils.getInternetExplorerVersion()&&(new epiviz.ui.controls.MessageDialog("Browser compatibility warning",{Ok:function(){}},"EpiViz works best on Google Chrome, Apple Safari or Mozilla Firefox. Please open it using one of those browsers.",epiviz.ui.controls.MessageDialog.Icon.ERROR)).show()};epiviz.ui.ControlManager.prototype._registerLocationChanged=function(){var a=this;this._locationManager.onCurrentLocationChanged().addListener(new epiviz.events.EventListener(function(b){a._updateSelectedLocation(b.newValue)}))};
epiviz.ui.ControlManager.prototype._registerSeqInfosUpdated=function(){var a=this;this._locationManager.onSeqInfosUpdated().addListener(new epiviz.events.EventListener(function(b){a._updateSeqNames(b)}))};
epiviz.ui.ControlManager.prototype.startApp=function(){$("body").append('<div id ="startScreenApp" class="ui small modal"><div class="header"><div class="ui grid"><div class="row"><div class="four wide column"><img src="img/metaviz_4_logo_medium.png" alt="Epiviz" width="100" height="21" /></div><div class="one wide column"></div><div class="eleven wide column"> UMD Metagenome Browser</div></div></div></div><div class="content m"><p> <span class="sampleCount">0</span> Samples from <span class="dataCount">0</span> datasets are available.</p><div class="ui segment"><div id="loaderScreenApp" class="ui tiny active inverted dimmer"><div class="ui text loader">Loading data sets and sample annotations..</div></div><table id="sourceLoaderList" class="ui very basic table"><thead><tr><th> Dataset</th><th> Sample Count</th></tr></thead><tbody id="listScreenApp" style="overflow:auto"></tbody></table></div></div><div class="actions"><div class="ui primary button disabled" id="okScreenApp">Start App</div></div></div>');$("#startScreenApp").modal({closable:!1});
$("#startScreenApp").modal("show");$("#okScreenApp").click(function(a){$("#startScreenApp").modal("hide");$("#data-source-button").trigger("click")})};
epiviz.ui.ControlManager.prototype.updateLoadingScreen=function(a){if("empty"!=a.dataset){var b=parseInt($("#startScreenApp").find(".sampleCount").text()),e=parseInt($("#startScreenApp").find(".dataCount").text());$("#startScreenApp").find(".sampleCount").text(b+a.sampleSize);$("#startScreenApp").find(".dataCount").text(e+1);b="<tr><td>"+a.dataset+"</td><td>"+a.sampleSize+"</td></tr>";$("#listScreenApp").append(b);a.count+1==a.size&&($("#loaderScreenApp").removeClass("active"),$("#loaderScreenApp").addClass("disabled"),
$("#okScreenApp").removeClass("disabled"))}};epiviz.ui.WebArgsManager=function(a,b){this._locationManager=a;this._workspaceManager=b;this._registerLocationChanged();this._registerActiveWorkspaceChanged()};epiviz.ui.WebArgsManager.WEB_ARGS=epiviz.ui.WebArgsManager.WEB_ARGS||{};
epiviz.ui.WebArgsManager.extractWindowLocationArgs=function(){var a={};(0<window.location.search.length?window.location.search.substr(1):"").split("&").forEach(function(b,e){if(0!=b.trim().length){var c=b.indexOf("[]");if(0!=c){var d,f;f=b.indexOf("=");0>f?(d=0>c?b:b.substr(0,c),f="true"):(d=0>c?b.substr(0,f):b.substr(0,c),f=b.substr(f+1));d=decodeURIComponent(d);f=decodeURIComponent(f);0>c?a[d]=f:(d in a||(a[d]=[]),a[d].push(f))}}});return a};
epiviz.ui.WebArgsManager.prototype._updateUrl=function(){var a="?",b=epiviz.ui.WebArgsManager.WEB_ARGS;!("ws"in b)&&"workspace"in b&&(b.ws=b.workspace,delete b.workspace);for(var e in b)if(b.hasOwnProperty(e))if(Array.isArray(b[e]))for(var c,d=0;d<b[e].length;++d)c=b[e][d],void 0==c&&(c="undefined"),a+=sprintf("%s[]=%s&",e,c);else c=b[e],void 0==c&&(c="undefined"),a+=sprintf("%s=%s&",e,c);b=epiviz.utils.getInternetExplorerVersion();if(0>b||10<=b)switch(window.location.protocol){case "http:":case "https:":history.replaceState(null,
"",a)}};epiviz.ui.WebArgsManager.prototype._registerLocationChanged=function(){var a=this;this._locationManager.onCurrentLocationChanged().addListener(new epiviz.events.EventListener(function(b){epiviz.ui.WebArgsManager.WEB_ARGS.seqName=b.newValue.seqName();epiviz.ui.WebArgsManager.WEB_ARGS.start=b.newValue.start();epiviz.ui.WebArgsManager.WEB_ARGS.end=b.newValue.end();a._updateUrl()}))};
epiviz.ui.WebArgsManager.prototype._registerActiveWorkspaceChanged=function(){var a=this;this._workspaceManager.onActiveWorkspaceChanged().addListener(new epiviz.events.EventListener(function(b){epiviz.ui.WebArgsManager.WEB_ARGS.ws=b.workspaceId||"";delete epiviz.ui.WebArgsManager.WEB_ARGS.workspace;a._updateUrl()}))};
epiviz.EpiViz=function(a,b,e,c,d,f,n,h,g,m,p){this._config=a;this._locationManager=b;this._measurementsManager=e;this._controlManager=c;this._dataManager=d;this._chartFactory=f;this._chartManager=n;this._workspaceManager=h;this._userManager=g;this._webArgsManager=m;this._cookieManager=p;this._registerRequestSeqInfos();this._registerRequestMeasurements();this._registerUiAddChart();this._registerUiSaveWorkspace();this._registerUiDeleteActiveWorkspace();this._registerUiRevertActiveWorkspace();this._registerUiLoginLinkClicked();
this._registerUiSearchWorkspaces();this._registerUiActiveWorkspaceChanged();this._registerUiSearch();this._registerChartRequestHierarchy();this._registerChartPropagateHierarchySelection();this._registerChartPropogateIcicleLocationChange();this._registerUiSettingsChanged();this._registerDataAddMeasurements();this._registerDataRemoveMeasurements();this._registerDataAddChart();this._registerDataRemoveChart();this._registerDataAddSeqInfos();this._registerDataRemoveSeqNames();this._registerDataNavigate();
this._registerDataRedraw();this._registerDataGetCurrentLocation();this._registerPrintWorkspace();this._registerLoadWorkspace();this._registerDataSetChartSettings();this._registerDataGetChartSettings();this._registerDataGetAvailableCharts();this._registerRequestWorkspaces();this._registerWorkspacesLoaded();this._registerActiveWorkspaceChanged();this._registerActiveWorkspaceContentChanged();this._registerLocationChanged();this._registerLoadingAppScreen()};epiviz.EpiViz.VERSION="4";
epiviz.EpiViz.prototype.start=function(){this._measurementsManager.initialize();"default"==this._config.configType&&this._controlManager.startApp();this._cookieManager.initialize();this._locationManager.initialize();this._controlManager.initialize();this._workspaceManager.initialize()};epiviz.EpiViz.prototype.config=function(){return this._config};
epiviz.EpiViz.prototype._addChart=function(a,b,e,c,d){e=this._chartManager.addChart(a,b,e,c,d);var f=this;if("epiviz.plugins.charts.PCAScatterPlot"==a.typeName()){var n=null;a={};a[e]=b.measurements;this._dataManager.getPCA(n,a,function(a,b){f._chartManager.updateCharts(n,b,[a])})}else"epiviz.plugins.charts.DiversityScatterPlot"==a.typeName()?(n=null,a={},a[e]=b.measurements,this._dataManager.getDiversity(n,a,function(a,b){f._chartManager.updateCharts(n,b,[a])})):a.chartDisplayType()==epiviz.ui.charts.VisualizationType.DisplayType.DATA_STRUCTURE?
(a={},a[e]=b,n=this._workspaceManager.activeWorkspace().range(),(b=this._locationManager._seqInfos[b.datasourceGroup]||this._locationManager._seqInfos.metavizr)&&(n=new epiviz.datatypes.GenomicRange(b.seqName,b.min,b.max)),this._locationManager.changeCurrentLocation(n),this._dataManager.getHierarchy(a,function(a,b){f._chartManager.updateCharts(n,b,[a])})):(n=this._workspaceManager.activeWorkspace().range(),this._chartManager.dataWaitStart(e),a={},a[e]=b.measurements,this._dataManager.getData(n,a,
function(a,b){f._chartManager.updateCharts(n,b,[a])}));return e};epiviz.EpiViz.prototype._registerRequestSeqInfos=function(){var a=this;this._locationManager.onRequestSeqInfos().addListener(new epiviz.events.EventListener(function(){a._dataManager.getSeqInfos(function(b){a._locationManager.updateSeqInfos(b)})}))};epiviz.EpiViz.prototype._registerRequestMeasurements=function(){var a=this;this._measurementsManager.onRequestMeasurements().addListener(new epiviz.events.EventListener(function(){a._dataManager.getMeasurements(function(b){a._measurementsManager.addMeasurements(b)})}))};
epiviz.EpiViz.prototype._registerRequestWorkspaces=function(){var a=this;this._workspaceManager.onRequestWorkspaces().addListener(new epiviz.events.EventListener(function(b){var e=a._cookieManager.getWorkspace(a._chartFactory,a._config);a._dataManager.getWorkspaces(function(c){for(var d=[],f=null,n=null,h=0;h<c.length;++h){var g=epiviz.workspaces.Workspace.fromRawObject(c[h],a._chartFactory,a._config);null===g.id()?f=g:(g.id()==b.activeWorkspaceId&&(e&&e.id()==b.activeWorkspaceId&&(n=g,g=e),f=g),
d.push(g))}a._workspaceManager.updateWorkspaces(d,f,b.activeWorkspaceId,n);e||a._workspaceManager.activeWorkspace().resetChanged()},"",b.activeWorkspaceId)}))};epiviz.EpiViz.prototype._registerUiAddChart=function(){var a=this;this._controlManager.onAddChart().addListener(new epiviz.events.EventListener(function(b){a._addChart(b.type,b.visConfigSelection,void 0,void 0,b.title)}))};
epiviz.EpiViz.prototype._registerUiSaveWorkspace=function(){var a=this;this._controlManager.onSaveWorkspace().addListener(new epiviz.events.EventListener(function(b){var e=a._workspaceManager.getByName(b.name),e=e?a._workspaceManager.activeWorkspace().copy(b.name,e.id()):a._workspaceManager.activeWorkspace().copy(b.name);a._dataManager.saveWorkspace(e,a._config,function(b){e=e.copy(e.name(),b);e.resetChanged();a._workspaceManager.updateWorkspace(e);a._workspaceManager.changeActiveWorkspace(b)})}))};
epiviz.EpiViz.prototype._registerUiDeleteActiveWorkspace=function(){var a=this;this._controlManager.onDeleteActiveWorkspace().addListener(new epiviz.events.EventListener(function(){a._dataManager.deleteWorkspace(a._workspaceManager.activeWorkspace());a._workspaceManager.deleteActiveWorkspace()}))};epiviz.EpiViz.prototype._registerUiRevertActiveWorkspace=function(){var a=this;this._controlManager.onRevertActiveWorkspace().addListener(new epiviz.events.EventListener(function(){a._workspaceManager.revertActiveWorkspace()}))};
epiviz.EpiViz.prototype._registerUiLoginLinkClicked=function(){var a=this;this._controlManager.onLoginLinkClicked().addListener(new epiviz.events.EventListener(function(){a._userManager.toggleLogin()}))};epiviz.EpiViz.prototype._registerUiSearchWorkspaces=function(){var a=this;this._controlManager.onSearchWorkspaces().addListener(new epiviz.events.EventListener(function(b){a._dataManager.getWorkspaces(function(a){b.callback(a)},b.searchTerm,b.searchTerm)}))};
epiviz.EpiViz.prototype._registerUiActiveWorkspaceChanged=function(){var a=this;this._controlManager.onActiveWorkspaceChanged().addListener(new epiviz.events.EventListener(function(b){var e=function(){b.newValue.id&&!a._workspaceManager.get(b.newValue.id)?a._dataManager.getWorkspaces(function(c){for(var d=null,e=0;e<c.length;++e){var n=epiviz.workspaces.Workspace.fromRawObject(c[e],a._chartFactory,a._config);if(null===n.id()){d=n;break}}d&&a._workspaceManager.changeActiveWorkspace(b.newValue.id,d)},
b.newValue.name,b.newValue.id):a._workspaceManager.changeActiveWorkspace(b.newValue.id)};epiviz.workspaces.UserManager.USER_STATUS.loggedIn&&!a._workspaceManager.activeWorkspaceChanging()&&a._workspaceManager.activeWorkspace().changed()?(new epiviz.ui.controls.MessageDialog("Discard workspace changes",{Yes:function(){e()},No:function(){b.cancel()}},"There are unsaved changes in the current workspace. Do you wish to discard them?",epiviz.ui.controls.MessageDialog.Icon.QUESTION)).show():e()}))};
epiviz.EpiViz.prototype._registerUiSearch=function(){var a=this;this._controlManager.onSearch().addListener(new epiviz.events.EventListener(function(b){var e,c;for(c in a._chartManager._charts)a._chartManager._charts.hasOwnProperty(c)&&a._chartManager._charts[c].displayType()==epiviz.ui.charts.VisualizationType.DisplayType.DATA_STRUCTURE&&(e=a._chartManager._charts[c]);null==e&&void 0==e||a._dataManager.search(function(a){b.callback(a)},b.searchTerm,e)}))};
epiviz.EpiViz.prototype._registerChartRequestHierarchy=function(){var a=this;this._chartManager.onChartRequestHierarchy().addListener(new epiviz.events.EventListener(function(b){var e={};e[b.id]=b.args;a._dataManager.getHierarchy(e,function(b,d){a._chartManager.updateCharts(void 0,d,[b])})}))};
epiviz.EpiViz.prototype._registerChartPropagateHierarchySelection=function(){var a=this;this._chartManager.onChartPropagateHierarchyChanges().addListener(new epiviz.events.EventListener(function(b){var e={};e[b.id]=b.args;a._dataManager.propagateHierarchyChanges(e,function(b,d){a._chartManager.updateCharts(void 0,d,[b])})}))};epiviz.EpiViz.prototype._registerUiSettingsChanged=function(){var a=this;this._workspaceManager.onUiChartSettingsChanged().addListener(new epiviz.events.EventListener(function(b){a._dataManager.updateChartSettings(b)}))};
epiviz.EpiViz.prototype._registerDataAddMeasurements=function(){var a=this;this._dataManager.onRequestAddMeasurements().addListener(new epiviz.events.EventListener(function(b){try{a._measurementsManager.addMeasurements(b.measurements),b.result.success=!0}catch(e){b.result.success=!1,b.result.errorMessage=e.toString()}}))};
epiviz.EpiViz.prototype._registerDataRemoveMeasurements=function(){var a=this;this._dataManager.onRequestRemoveMeasurements().addListener(new epiviz.events.EventListener(function(b){try{a._measurementsManager.removeMeasurements(b.measurements),b.result.success=!0}catch(e){b.result.success=!1,b.result.errorMessage=e.toString()}}))};
epiviz.EpiViz.prototype._registerDataAddChart=function(){var a=this;this._dataManager.onRequestAddChart().addListener(new epiviz.events.EventListener(function(b){try{var e=a._chartFactory.get(b.type),c=a._addChart(e,b.visConfigSelection);b.result.success=!0;b.result.value={id:c}}catch(d){b.result.success=!1,b.result.errorMessage=d.toString()}}))};
epiviz.EpiViz.prototype._registerDataRemoveChart=function(){var a=this;this._dataManager.onRequestRemoveChart().addListener(new epiviz.events.EventListener(function(b){try{a._chartManager.removeChart(b.id),b.result.success=!0}catch(e){b.result.success=!1,b.errorMessage=e.toString()}}))};
epiviz.EpiViz.prototype._registerPrintWorkspace=function(){this._dataManager.onRequestPrintWorkspace().addListener(new epiviz.events.EventListener(function(a){try{(new epiviz.ui.PrintManager(a.chartId,a.fileName,a.fileType)).print(),a.result.success=!0}catch(b){a.result.success=!1,a.errorMessage=b.toString()}}))};
epiviz.EpiViz.prototype._registerLoadWorkspace=function(){var a=this;this._dataManager.onRequestLoadWorkspace().addListener(new epiviz.events.EventListener(function(b){try{a._workspaceManager._requestWorkspaces.notify({activeWorkspaceId:b.workspace})}catch(e){b.result.success=!1,b.errorMessage=e.toString()}}))};
epiviz.EpiViz.prototype._registerDataSetChartSettings=function(){var a=this;this._dataManager.onRequestSetChartSettings().addListener(new epiviz.events.EventListener(function(b){try{a._chartManager.setChartSettings(b.chartId,b.settings,b.colorMap),b.result.success=!0}catch(e){b.result.success=!1,b.result.errorMessage=e.toString()}}))};
epiviz.EpiViz.prototype._registerDataGetChartSettings=function(){var a=this;this._dataManager.onRequestGetChartSettings().addListener(new epiviz.events.EventListener(function(b){try{a._chartManager.getChartSettings(b.chartId),b.result.success=!0}catch(e){b.result.success=!1,b.result.errorMessage=e.toString()}}))};
epiviz.EpiViz.prototype._registerDataGetAvailableCharts=function(){var a=this;this._dataManager.onRequestGetChartSettings().addListener(new epiviz.events.EventListener(function(b){try{b.result.value=[],a._chartFactory.foreach(function(a,d){b.result.value.push({chartName:a,customSettings:d.customSettingsDefs(),colorMap:d.defaultColors()._colors})}),b.result.success=!0}catch(e){b.result.success=!1,b.result.errorMessage=e.toString()}}))};
epiviz.EpiViz.prototype._registerDataAddSeqInfos=function(){var a=this;this._dataManager.onRequestAddSeqInfos().addListener(new epiviz.events.EventListener(function(b){try{a._locationManager.addSeqInfos(b.seqInfos),b.result.success=!0}catch(e){b.result.success=!1,b.errorMessage=e.toString()}}))};
epiviz.EpiViz.prototype._registerDataRemoveSeqNames=function(){var a=this;this._dataManager.onRequestRemoveSeqNames().addListener(new epiviz.events.EventListener(function(b){try{a._locationManager.removeSeqNames(b.seqNames),b.result.success=!0}catch(e){b.result.success=!1,b.errorMessage=e.toString()}}))};
epiviz.EpiViz.prototype._registerDataNavigate=function(){var a=this;this._dataManager.onRequestNavigate().addListener(new epiviz.events.EventListener(function(b){try{a._locationManager.changeCurrentLocation(b.range),b.result.success=!0}catch(e){b.result.success=!1,b.errorMessage=e.toString()}}))};
epiviz.EpiViz.prototype._registerDataRedraw=function(){var a=this;this._dataManager.onRequestRedraw().addListener(new epiviz.events.EventListener(function(b){try{var e=a._locationManager.currentLocation();a._locationManager.changeCurrentLocation(e);b.result.success=!0;a._chartManager.updateDataStructureCharts()}catch(c){b.result.success=!1,b.errorMessage=c.toString()}}))};
epiviz.EpiViz.prototype._registerDataGetCurrentLocation=function(){var a=this;this._dataManager.onRequestCurrentLocation().addListener(new epiviz.events.EventListener(function(b){try{var e=a._locationManager.currentLocation();b.result.value={seqName:e.seqName(),start:e.start(),end:e.end()};b.result.success=!0}catch(c){b.result.success=!1,b.errorMessage=c.toString()}}))};epiviz.EpiViz.prototype._registerWorkspacesLoaded=function(){this._workspaceManager.onWorkspacesLoaded().addListener(new epiviz.events.EventListener(function(a){}))};
epiviz.EpiViz.prototype._registerActiveWorkspaceChanged=function(){var a=this;this._workspaceManager.onActiveWorkspaceChanged().addListener(new epiviz.events.EventListener(function(b){a._workspaceManager.startChangingActiveWorkspace();a._controlManager.updateSelectedWorkspace({id:b.newValue.id(),name:b.newValue.name()});a._locationManager.changeCurrentLocation(b.newValue.range());a._measurementsManager.removeMeasurements(a._measurementsManager.computedMeasurements());a._measurementsManager.addMeasurements(b.newValue.computedMeasurements());
a._chartManager.clear();b=b.newValue.charts();for(var e in b)if(b.hasOwnProperty(e))for(var c=0;c<b[e].length;++c)a._addChart(b[e][c].type,b[e][c].properties.visConfigSelection,b[e][c].id,b[e][c].properties.copy());a._workspaceManager.endChangingActiveWorkspace()}))};epiviz.EpiViz.prototype._registerActiveWorkspaceContentChanged=function(){var a=this;this._workspaceManager.onActiveWorkspaceContentChanged().addListener(new epiviz.events.EventListener(function(b){a._cookieManager.saveWorkspace(b,a._config)}))};
epiviz.EpiViz.prototype._registerLocationChanged=function(){var a=this;this._locationManager.onCurrentLocationChanged().addListener(new epiviz.events.EventListener(function(b){a._chartManager.dataWaitStart(void 0,function(a){return a.displayType()!=epiviz.ui.charts.VisualizationType.DisplayType.DATA_STRUCTURE});var e=a._chartManager.chartsMeasurements(),c;for(c in e){var d={};d[c]=e[c];-1!=c.indexOf("pca_scatter")?(a._dataManager.getPCA(b.newValue,d,function(c,d){a._chartManager.updateCharts(b.newValue,
d,[c])}),delete e[c]):-1!=c.indexOf("diversity_scatter")&&(a._dataManager.getDiversity(b.newValue,d,function(c,d){a._chartManager.updateCharts(b.newValue,d,[c])}),delete e[c])}a._dataManager.getData(b.newValue,e,function(c,d){a._chartManager.updateCharts(b.newValue,d,[c])});a._chartManager.onChartPropogateIcicleLocationChanges().isFiring()||a._chartManager.onChartIcicleLocationChanges().notify(new epiviz.ui.charts.VisEventArgs("1",{start:b.newValue._start,width:b.newValue._width}))}))};
epiviz.EpiViz.prototype._registerChartPropogateIcicleLocationChange=function(){var a=this;a._chartManager.onChartPropogateIcicleLocationChanges().addListener(new epiviz.events.EventListener(function(b){var e=a._locationManager.currentLocation();null!=e&&a._locationManager.changeCurrentLocation(new epiviz.datatypes.GenomicRange(e.seqName(),b.start,b.width))}))};epiviz.EpiViz.prototype._registerLoadingAppScreen=function(){var a=this;a._dataManager._loadingCurrentDataSet.addListener(new epiviz.events.EventListener(function(b){a._controlManager.updateLoadingScreen(b)}))};
epiviz.ui.controls.VisConfigSelection=function(a,b,e,c,d,f,n,h){this.measurements=a;this.datasource=b;this.datasourceGroup=e;this.dataprovider=c;this.annotation=d;this.defaultChartType=f;this.minSelectedMeasurements=n||1;this.customData=h};
epiviz.ui.controls.DataTable=function(a,b,e,c,d,f){epiviz.ui.controls.Control.call(this,a);this._columns=b;this._rows=e;this._rowsArray=[];var n=this;this._rows.foreach(function(a){n._rowsArray.push(a)});this._rowParser=c;this._multiselect=d||!1;this._showColumnSelector=f||!1;this._columnSelector=this._table=null;this._selectedIndices=[];this._selectedIndicesMap={};this._lastSelection=this._deselectList=this._selectList=null};epiviz.ui.controls.DataTable.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.Control.prototype);
epiviz.ui.controls.DataTable.constructor=epiviz.ui.controls.DataTable;epiviz.ui.controls.DataTable.ColumnType={STRING:"string",NUMBER:"number",BOOLEAN:"boolean"};
epiviz.ui.controls.DataTable.prototype.initialize=function(){this._container.append('<div class="epiviz-data-table"><table style="width: 100%!important;"><thead></thead><tbody></tbody><tfoot></tfoot></table></div>');this._table=this._container.find("table");var a=this._table.find("thead"),b=this._table.find("tfoot"),e=this._table.find("tbody"),c=sprintf("<tr><th>%s</th></tr>",this._columns.join("</th><th>"));a.append(c);b.append(c);var d=this;this._rows.foreach(function(a){for(var b="",c=0;c<d._columns.length;++c)b+=
sprintf("<td>%s</td>",d._rowParser(a,d._columns[c]));e.append(sprintf("<tr>%s</tr>",b))});b=Array(this._columns.length);for(a=0;a<this._columns.length;++a)b[a]={type:"text",bRegex:!0,bSmart:!0};this._table.dataTable({bJQueryUI:!0,sDom:'<"H"lfr>Tt<"F"ip>',oTableTools:{sRowSelect:this._multiselect?"multi":"single",aButtons:["select_all"],fnPreRowSelect:function(a,b,c){return d._preRowSelect(this,a,b,c)},fnRowSelected:function(a){return d._select(this,a)},fnRowDeselected:function(a){return d._select(this,
a)}}}).columnFilter({aoColumns:b});b=-1;for(a=0;a<this._columns.length;++a)this._columns[a].isVisible&&++b,this._table.fnSetColumnVis(a,this._columns[a].isVisible),this._columns[a].defaultFilter&&(this._table.fnFilter(this._columns[a].defaultFilter,a,!0,!0),this._table.find("tfoot").find(sprintf("th:eq(%s)",b)).find("input").removeClass("search_init").val(this._columns[a].defaultFilter));this._container.find(".ui-buttonset").first().attr("style","position: absolute!important;");if(this._showColumnSelector){this._container.find(".fg-toolbar").first().append(sprintf('<div style="float: right; margin-right: 5px;"><label>Selected Columns: </label><select class="%s" multiple="multiple" style=""><option value="-1">All</option></select></div>',
"epiviz-data-table-column-selector"));this._columnSelector=this._container.find(".epiviz-data-table-column-selector");for(a=0;a<this._columns.length;++a)b=sprintf('<option value="%s"%s%s>%s</option>',a,this._columns[a].isVisible?' selected="selected"':"",this._columns[a].isFixed?' disabled="disabled"':"",this._columns[a].name),this._columnSelector.append(b);this._columnSelector.dropdownchecklist({width:"80px",firstItemChecksAll:!0,onComplete:function(a){d._selectColumns(a)}})}};
epiviz.ui.controls.DataTable.prototype.selectedIndices=function(){return this._selectedIndices||[]};epiviz.ui.controls.DataTable.prototype.selectedRows=function(){if(!this._selectedIndices)return[];for(var a=Array(this._selectedIndices.length),b=0;b<this._selectedIndices.length;++b)a[b]=this._rowsArray[this._selectedIndices[b]];return a};
epiviz.ui.controls.DataTable.prototype._preRowSelect=function(a,b,e,c){b&&(this._selectList=this._deselectList=null,b.shiftKey&&1==e.length?(this._deselectList=a.fnGetSelected(),this._lastSelection||(this._lastSelection=e[0]),this._selectList=this._getRangeOfRows(this._lastSelection,e[0])):(this._lastSelection=e[0],b.ctrlKey||b.metaKey||(this._deselectList=a.fnGetSelected(),c||(this._selectList=e))));return!0};
epiviz.ui.controls.DataTable.prototype._getRangeOfRows=function(a,b){var e=this._table.fnGetPosition(a),c=this._table.fnGetPosition(b),d=this._table.fnSettings(),e=$.inArray(e,d.aiDisplay),c=$.inArray(c,d.aiDisplay),f=[];if(0<=e&&0<=c)for(var n=Math.min(e,c);n<=Math.max(e,c);++n)f.push(d.aoData[d.aiDisplay[n]].nTr);return 0<f.length?f:null};
epiviz.ui.controls.DataTable.prototype._select=function(a,b){var e;this._deselectList&&(e=this._deselectList,this._deselectList=null,a.fnDeselect(e));this._selectList&&(e=this._selectList,!this._multiselect&&0<e.length&&(e=[e[e.length-1]]),this._selectList=null,a.fnSelect(e));e=a.fnGetSelected();var c=Array(e.length),d={},f;for(f=0;f<e.length;++f)c[f]=this._table.fnGetPosition(e[f]),d[c[f]]=!0;for(f=0;f<this._selectedIndices.length;++f)d[this._selectedIndices[f]]||(delete this._selectedIndicesMap[this._selectedIndices[f]],
this._selectedIndices.splice(f,1),--f);for(f=0;f<c.length;++f)this._selectedIndicesMap[c[f]]||(this._selectedIndicesMap[c[f]]=!0,this._selectedIndices.push(c[f]));return!0};epiviz.ui.controls.DataTable.prototype._selectColumns=function(a){var b={},e;for(e=0;e<a.options.length;++e)a.options[e].selected&&a.options[e].value&&(b[parseInt(a.options[e].value)]=!0);for(e=0;e<this._columns.length;++e)this._table.fnSetColumnVis(e,b[e]||this._columns[e].isFixed)};
epiviz.ui.controls.DataTable.Column=function(a,b,e,c,d,f){this.id=a;this.name=b;this.type=e;this.isVisible=!c;this.isFixed=d||!1;this.defaultFilter=f||""};epiviz.ui.controls.DataTable.Column.prototype.toString=function(){return this.name};epiviz.ui.controls.Wizard=function(a,b,e,c,d,f,n){epiviz.ui.controls.Dialog.call(this,a,b);this._steps=e;this._initialData=c;this._width=d;this._height=f;this._showTabs=n||!1;this._tabs=null;this._initialize()};epiviz.ui.controls.Wizard.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.Dialog.prototype);
epiviz.ui.controls.Wizard.constructor=epiviz.ui.controls.Wizard;
epiviz.ui.controls.Wizard.prototype._initialize=function(){var a=this;this._dialog=$("#"+this._id);this._dialog.append('<div id="wizardDialog" class="wizard-dialog"><div class="wizard-tabs"><ul class="wizard-tabs-title-list"></ul></div></div>');this._tabs=this._dialog.find(".wizard-tabs");for(var b=this._tabs.find(".wizard-tabs-title-list"),e=0;e<this._steps.length;++e)b.append(sprintf('<li><a href="#%s-tab-%s">%s</a></li>',this._id,e,this._steps[e].title())),this._tabs.append(sprintf('<div id="%s-tab-%s"></div>',
this._id,e));this._showTabs||(b.css("visibility","hidden"),b.css("position","absolute"));this._tabs.tabs({activate:function(b,d){a._tabActivate(d)},disabled:epiviz.utils.range(this._steps.length-1,1)});this._dialog.dialog({autoOpen:!1,resizable:!0,width:this._width||void 0,height:this._height||void 0,buttons:{Back:function(){var b=a._tabs.tabs("option","active");0!=b&&(a._tabs.tabs("option","disabled",epiviz.utils.range(a._steps.length-b,b)),a._tabs.tabs("option","active",b-1))},Next:function(){var b=
a._tabs.tabs("option","active"),d=a._steps[b].next();d.error?(new epiviz.ui.controls.MessageDialog("Error",{Ok:function(){}},d.error,epiviz.ui.controls.MessageDialog.Icon.ERROR)).show():(a._steps[b+1].initialize($(sprintf("#%s-tab-%s",a._id,b+1)),d.data),a._tabs.tabs("option","disabled",epiviz.utils.range(a._steps.length-b-2,b+2)),a._tabs.tabs("option","active",b+1))},Finish:function(){var b=a._steps[a._steps.length-1].next();b.error?(new epiviz.ui.controls.MessageDialog("Error",{Ok:function(){}},
b.error,epiviz.ui.controls.MessageDialog.Icon.ERROR)).show():(a._handlers.finish&&a._handlers.finish(b.data),$(this).dialog("close"))},Cancel:function(){a._handlers.close&&a._handlers.close();$(this).dialog("close")}},modal:!0});1<this._steps.length?(this._dialog.parent().find('button:contains("Finish")').button("disable"),this._dialog.parent().find('button:contains("Next")').button("enable")):(this._dialog.parent().find('button:contains("Finish")').button("enable"),this._dialog.parent().find('button:contains("Next")').button("disable"));
this._steps[0].initialize($(sprintf("#%s-tab-0",a._id)),this._initialData);this._dialog.css("overflow","visible")};
epiviz.ui.controls.Wizard.prototype._tabActivate=function(a){a=this._tabs.tabs("option","active");var b=this._dialog.parent().find('button:contains("Finish")'),e=this._dialog.parent().find('button:contains("Next")');a==this._steps.length-1?(e.button("disable"),b.button("enable")):(e.button("enable"),b.button("disable"));this._tabs.tabs("option","disabled",epiviz.utils.range(this._steps.length-a-1,a+1))};
epiviz.ui.controls.Wizard.prototype.show=function(){var a=this;this._dialog.dialog("open");this._dialog.dialog("option","position","center");this._dialog.dialog({close:function(b,e){$(this).remove();a._dialog=null}})};epiviz.ui.controls.Wizard.Step=function(){};epiviz.ui.controls.Wizard.Step.prototype.initialize=function(a,b){};epiviz.ui.controls.Wizard.Step.prototype.next=function(){};epiviz.ui.controls.Wizard.Step.prototype.title=function(){};
epiviz.ui.controls.DatasourceGroupWizardStep=function(){this._data=this._dataTable=null};
epiviz.ui.controls.DatasourceGroupWizardStep.prototype.initialize=function(a,b){this._data=b;a.find(".epiviz-data-table").remove();var e=[new epiviz.ui.controls.DataTable.Column("datasourceGroup","Data Source Group",epiviz.ui.controls.DataTable.ColumnType.STRING)],c={};b.measurements.foreach(function(a){if(!b.dataprovider||b.dataprovider==a.dataprovider()){if(b.annotation)for(var e in b.annotation)if(b.annotation.hasOwnProperty(e)&&(!a.annotation()||a.annotation()[e]!=b.annotation[e]))return;c[a.datasourceGroup()]=
!0}});this._dataTable=new epiviz.ui.controls.DataTable(a,e,new epiviz.utils.IterableArray(Object.keys(c)),function(a){return a});this._dataTable.initialize()};
epiviz.ui.controls.DatasourceGroupWizardStep.prototype.next=function(){var a=this._dataTable?this._dataTable.selectedRows():[];if(0==a.length)return{error:"No rows selected"};this._data.datasourceGroup=a[0];return{data:new epiviz.ui.controls.VisConfigSelection(this._data.measurements.subset(function(b){return b.datasourceGroup()==a[0]}),this._data.datasource,this._data.datasourceGroup,this._data.dataprovider,this._data.annotation?epiviz.utils.mapCopy(this._data.annotation):this._data.annotation,this._data.defaultChartType,
this._data.minSelectedMeasurements,this._data.customData)}};epiviz.ui.controls.DatasourceGroupWizardStep.prototype.title=function(){return"Select Datasource Group"};epiviz.ui.controls.MeaurementsWizardStep=function(){this._measurements=this._data=this._dataTable=null};
epiviz.ui.controls.MeaurementsWizardStep.prototype.initialize=function(a,b){this._data=b;a.find(".epiviz-data-table").remove();var e=2,c=epiviz.ui.controls.DataTable.ColumnType,d=[new epiviz.ui.controls.DataTable.Column("id","Id",c.STRING,!0),new epiviz.ui.controls.DataTable.Column("name","Name",c.STRING,!1,!0),new epiviz.ui.controls.DataTable.Column("type","Type",c.STRING,!0),new epiviz.ui.controls.DataTable.Column("datasourceId","Data Source",c.STRING,!0),new epiviz.ui.controls.DataTable.Column("datasourceGroup",
"Data Source Group",c.STRING,!0),new epiviz.ui.controls.DataTable.Column("dataprovider","Data Provider",c.STRING,!0),new epiviz.ui.controls.DataTable.Column("formulaStr","Formula",c.STRING,!0)],f=[],n={};b.measurements.foreach(function(a){a=a.annotation();if(void 0!=a)for(var b in a)!a.hasOwnProperty(b)||b in n||(f.push(b),n[b]=!0)});f.sort();d=d.concat(f.map(function(a){var b=!1;0>=e&&(b=!0);e--;return new epiviz.ui.controls.DataTable.Column("[anno] "+a,a,c.STRING,b)}));this._measurements=b.measurements.subset(function(a){if(b.datasource&&
b.datasource!=a.datasourceId()||b.datasourceGroup&&b.datasourceGroup!=a.datasourceGroup()||b.dataprovider&&b.dataprovider!=a.dataprovider())return!1;if(b.annotation)for(var c in b.annotation)if(b.annotation.hasOwnProperty(c)&&(!a.annotation()||a.annotation()[c]!=b.annotation[c]))return!1;return!0});this._dataTable=new epiviz.ui.controls.DataTable(a,d,this._measurements,function(a,b){var c=null;if(epiviz.utils.stringStartsWith(b.id,"[anno] "))c="",void 0!=a.annotation()&&(c=a.annotation()[b.name]||
"");else switch(b.id){case "annotation":c=epiviz.utils.mapJoin(a.annotation(),": ","<br />");break;default:c=a[b.id]()}return 0===c||c?c:""},!0,!0);this._dataTable.initialize()};
epiviz.ui.controls.MeaurementsWizardStep.prototype.next=function(){var a=this._dataTable?this._dataTable.selectedRows():[];if(a.length<this._data.minSelectedMeasurements)return{error:"Minimum selected rows required is "+this._data.minSelectedMeasurements};for(var b=new epiviz.measurements.MeasurementSet,e=0;e<a.length;++e)b.add(a[e]);this._data.measurements=b;return{data:this._data}};epiviz.ui.controls.MeaurementsWizardStep.prototype.title=function(){return"Select Measurements"};
epiviz.ui.controls.MessageDialog=function(a,b,e,c){epiviz.ui.controls.Dialog.call(this,a,b);this._message=e;this._icon=c||epiviz.ui.controls.MessageDialog.Icon.INFO};epiviz.ui.controls.MessageDialog.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.Dialog.prototype);epiviz.ui.controls.MessageDialog.constructor=epiviz.ui.controls.MessageDialog;epiviz.ui.controls.MessageDialog.Icon={INFO:"info",ERROR:"error",QUESTION:"question"};
epiviz.ui.controls.MessageDialog.prototype.show=function(){epiviz.ui.controls.Dialog.prototype.show.call(this);var a=epiviz.ui.controls.MessageDialog.Icon;if(!this._dialog){var b=this;this._dialog=$("#"+this._id);this._dialog.css("display","inline");this._dialog.append(sprintf('<div class="ui-state-%s ui-corner-all" style="margin: 5px; padding: 5px; height: auto;"><div class="ui-icon ui-icon-%s" style="float: left; margin-right: 5px;"></div><div class="dialog-text">%s</div></div>',this._icon==a.ERROR?
"error":"highlight",this._icon==a.ERROR?"alert":"info",this._message));var e={},c;for(c in this._handlers)this._handlers.hasOwnProperty(c)&&function(a){e[a]=function(){b._handlers[a]();$(this).dialog("close")}}(c);this._dialog.dialog({autoOpen:!1,resizable:!1,buttons:e,modal:!0});this._dialog.dialog({close:function(a,c){$(this).remove();b._dialog=null}})}this._dialog.dialog("open");this._dialog.dialog("option","position","center")};
epiviz.ui.controls.ColorPickerDialog=function(a,b,e,c){epiviz.ui.controls.Dialog.call(this,"Pick Colors",a);this._dialog=$("#"+this._id);this._dialog.append('<div class="color-picker-form" action="" style="width: 420px;"><div class="chart-picker" style="float: right;"></div></div>');var d=this._dialog.find(".color-picker-form");a="";for(var f=0;f<b.length;++f){var n=sprintf("color-%s",f);a+=sprintf('<tr><td><label>%s:&nbsp;</label></td><td><input type="text" name="%s" class="colorwell %s" value="%s" /></td></tr>',
b[f],n,n,0<=c.keyColorIndex(b[f])?c.getByKey(b[f]):c.get(f))}d.append(sprintf('<table class="color-picker-table">%s</table>',a));var h=$.farbtastic(sprintf("#%s .chart-picker",this._id)),g=$(sprintf("#%s .chart-picker",this._id)).css("opacity",.25),m;$(sprintf("#%s .colorwell",this._id)).each(function(){h.linkTo(this);$(this).css("opacity",.75)}).focus(function(){m&&$(m).css("opacity",.75).removeClass("colorwell-selected");h.linkTo(this);g.css("opacity",1);$(m=this).css("opacity",1).addClass("colorwell-selected")});
d.append('<select class="palettes-selector"></select>');var p=d.find(".palettes-selector"),r={};e&&e.forEach(function(a){p.append(sprintf('<option value="%s"%s>%s</option>',a.id(),a.id()==c.id()?' selected="selected"':"",a.name()));r[a.id()]=a});c.id()in r||(p.prepend(sprintf('<option value="%s" selected="selected">%s</option>',c.id(),c.name())),r[c.id()]=c);p.selectmenu({style:"popup",width:"200",maxHeight:"150",menuWidth:"200"});var t=function(){for(var a=d.find(".colorwell"),b=0;b<a.length;++b)h.linkTo($(a[b])),
h.setColor(c.get(b));m&&h.linkTo(m)};p.change(function(){c=r[$(this).val()];t()});var l=this;this._dialog.dialog({autoOpen:!1,resizable:!1,width:"440",buttons:{Ok:function(){var a=d.find(".colorwell"),e=!1,f=[],g;for(g=0;g<c.size();++g)f.push(c.get(g));for(g=0;g<a.length;++g){var h=a[g].value,m=c.keyColorIndex(b[g]);0>m&&(m=g);h!=f[m]&&(e=!0,f[m]=h)}e&&(c=new epiviz.ui.charts.ColorPalette(f,void 0,void 0,c.keyIndices()));l._handlers.ok(c);$(this).dialog("close")},Cancel:function(){l._handlers.cancel();
$(this).dialog("close")},Reset:function(){t();l._handlers.reset()}},modal:!0})};epiviz.ui.controls.ColorPickerDialog.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.Dialog.prototype);epiviz.ui.controls.ColorPickerDialog.constructor=epiviz.ui.controls.ColorPickerDialog;
epiviz.ui.controls.ColorPickerDialog.prototype.show=function(){epiviz.ui.controls.Dialog.prototype.show.call(this);var a=this;this._dialog&&(this._dialog.dialog("open"),this._dialog.dialog("option","position","center"),this._dialog.dialog({close:function(b,e){$(this).remove();a._dialog=null}}))};
epiviz.ui.controls.SaveSvgAsImageDialog=function(a,b,e){epiviz.ui.controls.Dialog.call(this,"Save Chart SVG as Image",a);this._dialog=$("#"+this._id);this._dialog.append('<div class="save-svg-dialog"><label class="dialog-label">Choose file format:</label><br/><br/><div style="position:absolute; right:15px;"><select class="svg-file-format"><option value="pdf" selected="selected">PDF</option><option value="ps" >PS</option><option value="png" >PNG</option><option value="svg">SVG</option><option value="eps">EPS</option></select></div>'+sprintf('<form name="%s-svg-save-form" method="POST">',
this._id)+'<div><input type="hidden" name="svg" /><input type="hidden" name="format" /><br/><br/></div></form></div>');this._chartId=b;this._chartSaverLocation=e;var c=this;this._dialog.dialog({autoOpen:!1,resizable:!1,width:"200",buttons:{Ok:function(){var a=$("#"+c._chartId).find("svg").clone();a.attr("xmlns","http://www.w3.org/2000/svg");a.attr("version","1.1");var b=c._dialog.find(".svg-file-format"),e=document.forms[sprintf("%s-svg-save-form",c._id)];e.action=c._chartSaverLocation;e.svg.value=
$("<div>").append(a).html();e.format.value=b.val();e.submit();c._handlers.ok();$(this).dialog("close")},Cancel:function(){c._handlers.cancel();$(this).dialog("close")}},modal:!0})};epiviz.ui.controls.SaveSvgAsImageDialog.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.Dialog.prototype);epiviz.ui.controls.SaveSvgAsImageDialog.constructor=epiviz.ui.controls.SaveSvgAsImageDialog;
epiviz.ui.controls.SaveSvgAsImageDialog.prototype.show=function(){epiviz.ui.controls.Dialog.prototype.show.call(this);var a=this;this._dialog&&(this._dialog.dialog("open"),this._dialog.dialog("option","position","center"),this._dialog.dialog({close:function(b,e){$(this).remove();a._dialog=null}}))};
epiviz.ui.controls.ComputedMeasurementsDialog=function(a,b,e,c){epiviz.ui.controls.Dialog.call(this,a,b);this._measurements=e;this._chartsMeasurements=c;this._measurementsList=this._maxTextBox=this._minTextBox=this._nameTextBox=this._idTextBox=this._expressionTextBox=null;this._addButtonProperties={text:!1,icons:{primary:"ui-icon ui-icon-plus"}};this._deleteButtonsProperties={text:!1,icons:{primary:"ui-icon ui-icon-trash"}};this._datasourceGroupMeasurements=this._selectedDatasourceGroup=this._tabs=
null;this._addTabs();this._addDialogContents();this._addDatasourceGroupTable(e)};epiviz.ui.controls.ComputedMeasurementsDialog.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.Dialog.prototype);epiviz.ui.controls.ComputedMeasurementsDialog.constructor=epiviz.ui.controls.ComputedMeasurementsDialog;
epiviz.ui.controls.ComputedMeasurementsDialog.prototype.show=function(){epiviz.ui.controls.Dialog.prototype.show.call(this);var a=this;this._dialog&&(this._dialog.dialog("open"),this._dialog.dialog("option","position","center"),this._dialog.dialog({close:function(b,e){$(this).remove();a._dialog=null;a._handlers.close()}}))};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._addDatasourceGroupTable=function(a){var b=this,e=$(sprintf("#datasource-group-tab-%s",this._id)),c="",d={};a.foreach(function(a){a.type()==epiviz.measurements.Measurement.Type.FEATURE&&(a.datasourceGroup()in d||(d[a.datasourceGroup()]=[]),d[a.datasourceGroup()].push(a))});for(var f in d)d.hasOwnProperty(f)&&(c+=sprintf('<tr><td class="center">%s</td></tr>',f));e.append(sprintf('<table style="border-spacing:0; border-collapse:collapse; -webkit-touch-callout: none; -webkit-user-select: none; -khtml-user-select: none; -moz-user-select: moz-none; -ms-user-select: none; user-select: none; width: 100%%;" class="computed-measurements-dialog-raw-table">%s</table>',
"<thead><tr><th>Data Source Group</th></tr></thead>"+c+"<tfoot><tr><th>Data Source Group</th></tr></tfoot>"));var n=e.find(".computed-measurements-dialog-raw-table").dataTable({bJQueryUI:!0,sDom:'<"H"lfr>Tt<"F"ip>',oTableTools:{sRowSelect:"single",aButtons:[],fnPreRowSelect:function(a,b,c){return!0},fnRowSelected:function(a){a=n.fnGetData(a[0]);b._selectedDatasourceGroup=a[0];b._datasourceGroupMeasurements=d[b._selectedDatasourceGroup]},fnRowDeselected:function(a){n.fnGetData(a[0])==b._selectedDatasourceGroup&&
(b._selectedDatasourceGroup=null,b._datasourceGroupMeasurements=null)}}});e.find(".DTTT_container").css("position","absolute")};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._addTabs=function(){var a=this;this._selectDialog().append('<div id="computedMeasurementsDialog" class="computed-measurements-dialog"><div class="computed-measurements-tabs"><ul>'+sprintf('<li><a href="#datasource-group-tab-%s">Data Source Group</a></li>',this._id)+sprintf('<li><a href="#formula-tab-%s">Expression</a></li>',this._id)+"</ul>"+sprintf('<div id="datasource-group-tab-%s"></div>',this._id)+sprintf('<div id="formula-tab-%s"></div>',
this._id)+"</div></div>");this._tabs=this._selectTabs();this._tabs.tabs({activate:function(b,e){a._tabActivate(e)}})};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._addDialogContents=function(){var a=this;this._selectDialog().dialog({autoOpen:!1,resizable:!0,width:"600",height:"550",buttons:{Back:function(){0!=a._tabs.tabs("option","active")&&a._tabs.tabs("option","active",0)},Next:function(){1!=a._tabs.tabs("option","active")&&a._tabs.tabs("option","active",1)},Add:function(){for(var b=epiviz.utils.ExpressionParser.parse(a._selectExpressionTextBox().val().trim()),e={},c=b.variables(),d=null,f=null,n=[],
h={},g=0;g<c.length;++g){var m=c[g];if(epiviz.utils.stringStartsWith(m,"{")&&epiviz.utils.stringEndsWith(m,"}")){var p=parseInt(m.substring(1,m.length-1)),m=a._datasourceGroupMeasurements[p];e[p]=m;if(null===d||d>m.minValue())d=m.minValue();if(null===f||f<m.maxValue())f=m.maxValue();if(m.metadata())for(p=0;p<m.metadata().length;++p)h[m.metadata()[p]]||(h[m.metadata()[p]]=!0,n.push(m.metadata()[p]))}}c=a._selectMinTextBox().val().trim();h=a._selectMaxTextBox().val().trim();d=c?parseFloat(c):d;f=h?
parseFloat(h):f;c=a._selectIdTextBox().val().trim()||epiviz.utils.generatePseudoGUID(5);b=new epiviz.measurements.Measurement(c,a._selectNameTextBox().val().trim()||"Unnamed ["+c+"]",epiviz.measurements.Measurement.Type.FEATURE,null,a._selectedDatasourceGroup,null,{referredMeasurements:e,expression:b},"any",null,d,f,n);e=a._datasourceGroupMeasurements.length;$(sprintf("#computed-measurement-measurements-%s",a._id)).append(sprintf('<div style="min-height: 30px; padding: 2px;"><div style="margin: 6px; float: left;">%1$s {<b>%2$s</b>}</div><div style="float: right;"><button id="delete-button-%2$s-%3$s" data-measurement="%2$s">Delete</button><button style="" id="measurement-button-%2$s-%3$s" data-measurement="%2$s">Insert %2$s</button></div></div>',
b.name(),e,a._id));$("#measurement-button-"+e+"-"+a._id).button(a._addButtonProperties).click(function(){a._addButtonClick($(this))});$("#delete-button-"+e+"-"+a._id).button(a._deleteButtonsProperties).click(function(){a._deleteButtonClick($(this))});a._datasourceGroupMeasurements.push(b);a._handlers.add(b)},Close:function(){a._handlers.close();$(this).dialog("close")}},modal:!0})};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._addButtonClick=function(a){a=a.data("measurement");var b=this._selectExpressionTextBox();b.val(b.val().trim()+" {"+a+"}")};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._deleteButtonClick=function(a){for(var b=a.data("measurement"),e=this._datasourceGroupMeasurements[b],c=0;c<this._datasourceGroupMeasurements.length;++c){var d=this._datasourceGroupMeasurements[c];if(null!=d&&d!==e&&d.isComputed()&&d.componentMeasurements().contains(e)){a=new epiviz.ui.controls.MessageDialog("Measurement cannot be deleted",{Ok:function(){}},"There are other measurements that depend on the one selected. Please delete those before deleting this.",
epiviz.ui.controls.MessageDialog.Icon.ERROR);a.show();return}}for(var f in this._chartsMeasurements)if(this._chartsMeasurements.hasOwnProperty(f)&&this._chartsMeasurements[f].contains(e)){a=new epiviz.ui.controls.MessageDialog("Measurement cannot be deleted",{Ok:function(){}},"There are charts using the selected measurement. Remove them from the workspace and then try again.",epiviz.ui.controls.MessageDialog.Icon.ERROR);a.show();return}this._datasourceGroupMeasurements[b]=null;a.parent().parent().remove();
this._handlers.remove(e)};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._tabActivate=function(a){if(0!=this._selectTabs().tabs("option","active")&&(a.newPanel.empty(),this._measurementsList=this._maxTextBox=this._minTextBox=this._expressionTextBox=this._nameTextBox=this._idTextBox=null,this._selectedDatasourceGroup)){a.newPanel.append(sprintf('<label for="computed-measurement-key-%1$s"><b>Id:</b></label> <input id="computed-measurement-key-%1$s" class="ui-widget-content ui-corner-all" style="padding: 2px;" type="text"/>&nbsp;<label for="computed-measurement-name-%1$s"><b>Name:</b></label> <input id="computed-measurement-name-%1$s" class="ui-widget-content ui-corner-all" style="padding: 2px;" type="text"/><br /><br /><div id="computed-measurement-measurements-%1$s" style="overflow: auto; max-height: 200px; border-style: solid; border-width: 1px; border-color: #999999;"></div><br/><label for="computed-measurement-min-%1$s"><b>Min:</b></label> <input id="computed-measurement-min-%1$s" class="ui-widget-content ui-corner-all" style="padding: 2px;" type="text"/>&nbsp;<label for="computed-measurement-max-%1$s"><b>Max:</b></label> <input id="computed-measurement-max-%1$s" class="ui-widget-content ui-corner-all" style="padding: 2px;" type="text"/><br/><div style="overflow: hidden; padding: 10px; padding-right: 20px; margin: 0px;"><textarea id="computed-measurement-expr-%1$s" class="ui-widget-content ui-corner-all" style="width: 100%%; height: 55px; padding: 5px; margin: 0; resize: none;"></textarea></div>',this._id));
a=this._selectMeasurementsList();for(var b="",e=0;e<this._datasourceGroupMeasurements.length;++e){var c=this._datasourceGroupMeasurements[e],d="";c.isComputed()&&(d='<button id="delete-button-%2$s-%3$s" data-measurement="%2$s">Delete %2$s</button>');b+=sprintf('<div style="min-height: 30px; padding: 2px;"><div style="margin: 6px; float: left;">%1$s {<b>%2$s</b>}</div><div style="float: right;">'+d+'<button style="" id="measurement-button-%2$s-%3$s" data-measurement="%2$s">Insert %2$s</button></div></div>',
c.name(),e,this._id)}a.append(b);for(var f=this,e=0;e<this._datasourceGroupMeasurements.length;++e)c=this._datasourceGroupMeasurements[e],c.isComputed()&&$("#delete-button-"+e+"-"+this._id).button(this._deleteButtonsProperties).click(function(){f._deleteButtonClick($(this))}),$("#measurement-button-"+e+"-"+this._id).button(this._addButtonProperties).click(function(){f._addButtonClick($(this))});this._selectIdTextBox().watermark("[auto]");this._selectNameTextBox().watermark("[auto]");this._selectMinTextBox().watermark("[auto]");
this._selectMaxTextBox().watermark("[auto]");this._selectExpressionTextBox().watermark("[expression; for example: {0} - {1}]")}};epiviz.ui.controls.ComputedMeasurementsDialog.prototype._selectDialog=function(){this._dialog||(this._dialog=$("#"+this._id));return this._dialog};epiviz.ui.controls.ComputedMeasurementsDialog.prototype._selectExpressionTextBox=function(){this._expressionTextBox||(this._expressionTextBox=$("#computed-measurement-expr-"+this._id));return this._expressionTextBox};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._selectIdTextBox=function(){this._idTextBox||(this._idTextBox=$("#computed-measurement-key-"+this._id));return this._idTextBox};epiviz.ui.controls.ComputedMeasurementsDialog.prototype._selectNameTextBox=function(){this._nameTextBox||(this._nameTextBox=$("#computed-measurement-name-"+this._id));return this._nameTextBox};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._selectMinTextBox=function(){this._minTextBox||(this._minTextBox=$("#computed-measurement-min-"+this._id));return this._minTextBox};epiviz.ui.controls.ComputedMeasurementsDialog.prototype._selectMaxTextBox=function(){this._maxTextBox||(this._maxTextBox=$("#computed-measurement-max-"+this._id));return this._maxTextBox};
epiviz.ui.controls.ComputedMeasurementsDialog.prototype._selectTabs=function(){this._tabs||(this._tabs=this._dialog.find(".computed-measurements-tabs"));return this._tabs};epiviz.ui.controls.ComputedMeasurementsDialog.prototype._selectMeasurementsList=function(){this._measurementsList||(this._measurementsList=$("#computed-measurement-measurements-"+this._id));return this._measurementsList};
epiviz.ui.controls.CustomSettingsDialog=function(a,b,e,c){epiviz.ui.controls.Dialog.call(this,a,b);this._customSettingsDefs=e;this._customSettingsValues=epiviz.utils.mapCopy(c)};epiviz.ui.controls.CustomSettingsDialog.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.Dialog.prototype);epiviz.ui.controls.CustomSettingsDialog.constructor=epiviz.ui.controls.CustomSettingsDialog;
epiviz.ui.controls.CustomSettingsDialog.prototype.show=function(){epiviz.ui.controls.Dialog.prototype.show.call(this);var a=epiviz.ui.charts.CustomSetting.Type;if(!this._dialog){var b=this;this._dialog=$("#"+this._id);this._dialog.css("display","inline");var e,c,d,f,n="";for(e=0;e<this._customSettingsDefs.length;++e){c=sprintf("%s-%s",this._id,this._customSettingsDefs[e].id);var h=sprintf('<tr><td><label for="%s">%s</label></td><td style="text-align: right;">%%s</td></tr>',c,this._customSettingsDefs[e].label);
d=null;f=this._customSettingsValues[this._customSettingsDefs[e].id];switch(this._customSettingsDefs[e].type){case a.BOOLEAN:h=sprintf(h,sprintf('<div id="%1$s"><label for="%1$s-true">On</label><input type="radio" id="%1$s-true" name="%1$s" %2$s /><label for="%1$s-false">Off</label><input type="radio" id="%1$s-false" name="%1$s" %3$s /></div>',c,f?'checked="checked"':"",f?"":'checked="checked"'));break;case a.ARRAY:h=sprintf(h,sprintf('<input id="%s" value="%s" class="ui-widget-content ui-corner-all" style="text-align: right; padding: 5px;" />',
c,f.join(",")));break;case a.NUMBER:case a.STRING:h=sprintf(h,sprintf('<input id="%s" value="%s" class="ui-widget-content ui-corner-all" style="text-align: right; padding: 5px;" />',c,f));break;case a.CATEGORICAL:case a.MEASUREMENTS_METADATA:case a.MEASUREMENTS_ANNOTATION:var g="",m=this._customSettingsDefs[e];if(m.possibleValues)for(var p=0;p<m.possibleValues.length;++p)g+=sprintf('<option value="%1$s"%2$s>%1$s</option>',m.possibleValues[p],m.possibleValues[p]==f?'selected="selected"':"");f=sprintf('<select id="%s">%s</select>',
c,g);h=sprintf(h,f)}n+=h}n=sprintf('<div style="margin: 5px; padding: 5px; height: auto;"><table style="width: 100%%;">%s</table></div>',n);this._dialog.append(n);for(e=0;e<this._customSettingsDefs.length;++e)switch(c=sprintf("%s-%s",this._id,this._customSettingsDefs[e].id),d=$("#"+c),f=this._customSettingsValues[this._customSettingsDefs[e].id],this._customSettingsDefs[e].type){case a.BOOLEAN:d.buttonset();break;case a.NUMBER:case a.ARRAY:case a.STRING:d.watermark(this._customSettingsDefs[e].label);
break;case a.CATEGORICAL:case a.MEASUREMENTS_METADATA:case a.MEASUREMENTS_ANNOTATION:d.selectmenu()}this._dialog.dialog({autoOpen:!1,resizable:!1,buttons:{Ok:function(){for(var e=0;e<b._customSettingsDefs.length;++e){c=sprintf("%s-%s",b._id,b._customSettingsDefs[e].id);d=$("#"+c);var f=null;if(d.val()==epiviz.ui.charts.CustomSetting.DEFAULT)f=b._customSettingsDefs[e].defaultValue;else{var g=null;try{switch(b._customSettingsDefs[e].type){case a.BOOLEAN:var h=$("#"+c+" :radio:checked").attr("id"),f=
"true"==h.substr(h.lastIndexOf("-")+1);break;case a.NUMBER:f=d.val()==epiviz.ui.charts.CustomSetting.DEFAULT?b._customSettingsDefs[e].defaultValue:parseFloat(d.val());if(isNaN(f)){g=new epiviz.ui.controls.MessageDialog("Invalid property value",{Ok:function(){}},sprintf('Invalid value for setting "%s" (%s)',b._customSettingsDefs[e].label,b._customSettingsDefs[e].id),epiviz.ui.controls.MessageDialog.Icon.ERROR);g.show();return}break;case a.ARRAY:f=d.val().split(/[\s,]+/g);break;case a.STRING:case a.CATEGORICAL:case a.MEASUREMENTS_METADATA:case a.MEASUREMENTS_ANNOTATION:f=
d.val()}}catch(m){g=new epiviz.ui.controls.MessageDialog("Invalid property value",{Ok:function(){}},sprintf('Invalid value for setting "%s" (%s)',b._customSettingsDefs[e].label,b._customSettingsDefs[e].id),epiviz.ui.controls.MessageDialog.Icon.ERROR);g.show();return}}b._customSettingsValues[b._customSettingsDefs[e].id]=f}b._handlers.ok(b._customSettingsValues);$(this).dialog("close")},Cancel:function(){b._handlers.cancel();$(this).dialog("close")}},modal:!0});this._dialog.dialog({close:function(a,
c){$(this).remove();b._dialog=null}})}this._dialog.dialog("open");this._dialog.dialog("option","position","center")};epiviz.ui.controls.CodeControl=function(a,b,e,c){epiviz.ui.controls.Control.call(this,a,b,e);this._targetObj=c;this._text="// TODO: Your code here\n"};epiviz.ui.controls.CodeControl.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.Control.prototype);epiviz.ui.controls.CodeControl.constructor=epiviz.ui.controls.CodeControl;epiviz.ui.controls.CodeControl.prototype.initialize=function(){};
epiviz.ui.controls.CodeControl.prototype.save=function(){};epiviz.ui.controls.CodeControl.prototype.revert=function(){};epiviz.ui.controls.CodeControl.prototype.text=function(){return this._text};epiviz.ui.controls.CodeControl.prototype.result=function(){return null};epiviz.ui.controls.EditCodeControl=function(a,b,e,c,d,f){epiviz.ui.controls.CodeControl.call(this,a,b,e,c);this._defaultMethod=d;this._editor=null;this._methodsCode={};this._selectedMethod=null;this._hasModifiedMethods=f||!1};
epiviz.ui.controls.EditCodeControl.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.CodeControl.prototype);epiviz.ui.controls.EditCodeControl.constructor=epiviz.ui.controls.EditCodeControl;
epiviz.ui.controls.EditCodeControl.prototype.initialize=function(){if(!this._editor){this._container.append('<div style="float: left; margin-right: 5px;"><select class="obj-methods"></select></div>'+sprintf('<div id="%1$s"><label for="%1$s-true">On</label><input type="radio" id="%1$s-true" name="%1$s" %2$s /><label for="%1$s-false">Off</label><input type="radio" id="%1$s-false" name="%1$s" %3$s /></div>',this.id()+"-switch",this._hasModifiedMethods?'checked="checked"':"",this._hasModifiedMethods?
"":'checked="checked"')+'<br /><div style="overflow-y: scroll; max-height: 500px;"><textarea autofocus="autofocus" class="code-edit"></textarea></div>');this._methodsSelector=this._container.find(".obj-methods");var a=this._container.find("#"+this.id()+"-switch");a.buttonset();var b=this,e=function(a){a=$("#"+b.id()+"-switch :radio:checked").attr("id");a="true"==a.substr(a.lastIndexOf("-")+1);b._editor&&b._editor.setOption("disableInput",!a);b._hasModifiedMethods=a};a.find("#"+this.id()+"-switch-true").on("change",
e);a.find("#"+this.id()+"-switch-false").on("change",e);var c=this._container.find(".code-edit"),a=[],e=this._targetObj,d;for(d in e)$.isFunction(e[d])&&a.push(d);a.sort();for(var f=0;f<a.length;++f){d=a[f];var n=0==f&&!this._defaultMethod||this._defaultMethod==d;this._methodsSelector.append(sprintf('<option value="%s"%s>%s</option>',d,n?' selected="selected"':"",d));n&&(this._text=e[d].toString(),this._selectedMethod=d)}this._methodsSelector.change(function(){b._methodsCode[b._selectedMethod]=b._editor.getValue();
var a=$(this).val(),d=b._methodsCode[a];d||(d=b._targetObj[a].toString(),b._methodsCode[a]=d);b._text=d;b._editor?b._editor.getDoc().setValue(b._text):c.val(b._text);b._selectedMethod=a});c.val(this._text);this._methodsSelector.selectmenu({style:"popup",width:"150",maxHeight:"150",menuWidth:"150"});this._editor=CodeMirror.fromTextArea(this._container.find(".code-edit")[0],{lineNumbers:!0,matchBrackets:!0,continueComments:"Enter",extraKeys:{"Ctrl-Q":"toggleComment"},autofocus:!0});this._editor.setOption("disableInput",
!this._hasModifiedMethods)}};epiviz.ui.controls.EditCodeControl.prototype.save=function(){this._methodsCode[this._selectedMethod]=this._editor.getValue();this._text=this._editor.getValue()};epiviz.ui.controls.EditCodeControl.prototype.revert=function(){this._editor&&this._editor.setOption("value",this._text)};
epiviz.ui.controls.EditCodeControl.prototype.modifiedMethods=function(){var a={},b;for(b in this._methodsCode)this._methodsCode.hasOwnProperty(b)&&this._methodsCode[b]!=this._targetObj[b].toString()&&(a[b]=this._methodsCode[b]);return a};epiviz.ui.controls.EditCodeControl.prototype.result=function(){return{hasModifiedMethods:this._hasModifiedMethods,modifiedMethods:this._hasModifiedMethods?this.modifiedMethods():{}}};
epiviz.ui.controls.MarkerCodeControl=function(a,b,e,c,d,f,n){epiviz.ui.controls.CodeControl.call(this,a,b,e,c);this._markEditor=this._editor=null;this._editorText=d;this._markText=f;this._enabled=n||!1};epiviz.ui.controls.MarkerCodeControl.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.CodeControl.prototype);epiviz.ui.controls.MarkerCodeControl.constructor=epiviz.ui.controls.MarkerCodeControl;
epiviz.ui.controls.MarkerCodeControl.prototype.initialize=function(){if(!this._editor){this._container.append(sprintf('<div id="%1$s"><label for="%1$s-true">On</label><input type="radio" id="%1$s-true" name="%1$s" %2$s /><label for="%1$s-false">Off</label><input type="radio" id="%1$s-false" name="%1$s" %3$s /></div>',this.id()+"-switch",this._enabled?'checked="checked"':"",this._enabled?"":'checked="checked"')+'<br /><div><label><b>Pre-mark Method</b></label></div><br /><div style="overflow-y: scroll; max-height: 250px;"><textarea autofocus="autofocus" class="pre-filter-code"></textarea></div><br/><div><label><b>Mark Method</b></label></div><br/><div style="overflow-y: scroll; max-height: 250px;"><textarea autofocus="autofocus" class="filter-code"></textarea></div>');
var a=this._container.find("#"+this.id()+"-switch");a.buttonset();var b=this,e=function(a){a=$("#"+b.id()+"-switch :radio:checked").attr("id");a="true"==a.substr(a.lastIndexOf("-")+1);b._editor&&b._editor.setOption("disableInput",!a);b._markEditor&&b._markEditor.setOption("disableInput",!a);b._enabled=a};a.find("#"+this.id()+"-switch-true").on("change",e);a.find("#"+this.id()+"-switch-false").on("change",e);a=this._container.find(".pre-filter-code");a.val(this._editorText);e=this._container.find(".filter-code");
e.val(this._markText);this._editor=CodeMirror.fromTextArea(a[0],{lineNumbers:!0,matchBrackets:!0,continueComments:"Enter",extraKeys:{"Ctrl-Q":"toggleComment"},autofocus:!0});this._editor.setOption("disableInput",!this._enabled);this._markEditor=CodeMirror.fromTextArea(e[0],{lineNumbers:!0,matchBrackets:!0,continueComments:"Enter",extraKeys:{"Ctrl-Q":"toggleComment"},autofocus:!0});this._markEditor.setOption("disableInput",!this._enabled)}};
epiviz.ui.controls.MarkerCodeControl.prototype.save=function(){this._editor&&(this._editorText=this._editor.getValue(),this._markText=this._markEditor.getValue())};epiviz.ui.controls.MarkerCodeControl.prototype.revert=function(){this._editor&&this._editor.setOption("value",this._editorText);this._markEditor&&this._markEditor.setOption("value",this._markText)};
epiviz.ui.controls.MarkerCodeControl.prototype.result=function(){return{enabled:this._enabled,preMark:this._enabled?this._editorText:null,mark:this._enabled?this._markText:null}};
epiviz.ui.controls.CodeDialog=function(a,b,e){epiviz.ui.controls.Dialog.call(this,a,b);this._controlCreators=e;this._dialog=$("#"+this._id);this._controls=[];var c=this;this._dialog.append('<div class="code-tabs"><ul></ul></div>');var d=this._dialog.find(".code-tabs"),f=d.find("ul");this._controlCreators.forEach(function(a,b){var e=c._id+"-code-tab-"+b;d.append(sprintf('<div id="%s"></div>',e));var m=d.find("#"+e),m=a(m);f.append(sprintf('<li><a href="#%s">%s</a></li>',e,m.title()));c._controls.push(m)});
d.tabs({activate:function(a,b){c._tabActivate(d)}});this._dialog.dialog({autoOpen:!1,resizable:!1,width:"800",buttons:{Save:function(){var a=[];c._controls.forEach(function(b){b.save();a.push(b.result())});c._handlers.save(a);$(this).dialog("close")},Cancel:function(){c._controls.forEach(function(a){a.revert()});c._handlers.cancel();$(this).dialog("close")}},modal:!0});this._dialog.dialog("option","position","center")};epiviz.ui.controls.CodeDialog.prototype=epiviz.utils.mapCopy(epiviz.ui.controls.Dialog.prototype);
epiviz.ui.controls.CodeDialog.constructor=epiviz.ui.controls.CodeDialog;epiviz.ui.controls.CodeDialog.prototype.show=function(){epiviz.ui.controls.Dialog.prototype.show.call(this);this._dialog.dialog("open");this._controls[0].initialize();this._dialog.dialog("option","position","center")};epiviz.ui.controls.CodeDialog.prototype._tabActivate=function(a){a=a.tabs("option","active");this._controls[a].initialize();this._dialog.dialog("option","position","center")};epiviz.plugins={};
epiviz.plugins.charts={};epiviz.plugins.charts.BlocksTrack=function(a,b,e){epiviz.ui.charts.Track.call(this,a,b,e);this._initialize()};epiviz.plugins.charts.BlocksTrack.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Track.prototype);epiviz.plugins.charts.BlocksTrack.constructor=epiviz.plugins.charts.BlocksTrack;epiviz.plugins.charts.BlocksTrack.prototype._initialize=function(){epiviz.ui.charts.Track.prototype._initialize.call(this);this._svg.classed("blocks-track",!0)};
epiviz.plugins.charts.BlocksTrack.prototype.draw=function(a,b,e,c){epiviz.ui.charts.Track.prototype.draw.call(this,a,b,e,c);b=this._lastData;a=this._lastRange;return b&&a&&b.isReady()?this._drawBlocks(a,b,e||0,c||1):[]};
epiviz.plugins.charts.BlocksTrack.prototype._drawBlocks=function(a,b,e,c){var d=epiviz.ui.charts.Axis,f=a.start(),n=a.end(),h=this.width(),g=this.height(),m=this.margins();this.measurements();var p=this.colors(),r=this.customSettingsValues()[epiviz.plugins.charts.BlocksTrackType.CustomSettings.MIN_BLOCK_DISTANCE],t=this.customSettingsValues()[epiviz.plugins.charts.BlocksTrackType.CustomSettings.BLOCK_COLOR_BY],l=this.customSettingsValues()[epiviz.plugins.charts.BlocksTrackType.CustomSettings.USE_COLOR_BY],
q=d3.scale.linear().domain([f,n]).range([0,h-m.sumAxis(d.X)]),w=e*(h-m.sumAxis(d.X))/(n-f);this._clearAxes();this._drawAxes(q,null,10,5);var u=this,v=[],E=0;b.foreach(function(b,c,d){d=[];for(var e=0;e<c.size();++e){var f=c.get(e);if(!(f.rowItem.start()>a.end()||f.rowItem.end()<a.start())){var g=sprintf("item data-series-%s",E);if(null!==r&&0<d.length){var h=d[d.length-1],l=q(f.rowItem.start()),m=q(h.end);if(l-m<r){h.end=Math.max(h.end,f.rowItem.end());h.valueItems[0].push(f);h.id=sprintf("b-%s-%s-%s",
E,h.start,h.end);continue}}d.push(new epiviz.ui.charts.ChartObject(sprintf("b-%s-%s-%s",E,f.rowItem.start(),f.rowItem.end()),f.rowItem.start(),f.rowItem.end(),f.rowItem.metadata(t),E,[[f]],[b],g))}}v=v.concat(d);++E});e=this._svg.select(".items");f=e.select(".selected");f=this._svg.select("#clip-"+this.id());e.empty()&&(f.empty()&&this._svg.select("defs").append("clipPath").attr("id","clip-"+this.id()).append("rect").attr("class","clip-path-rect"),e=this._svg.append("g").attr("class","items").attr("id",
this.id()+"-gene-content").attr("clip-path","url(#clip-"+this.id()+")"),f=e.append("g").attr("class","selected"),e.append("g").attr("class","hovered"),f.append("g").attr("class","hovered"));e.attr("transform","translate("+m.left()+", "+m.top()+")");this._svg.select(".clip-path-rect").attr("x",0).attr("y",0).attr("width",h-m.sumAxis(d.X)).attr("height",g-m.sumAxis(d.Y));e.selectAll(".item").remove();h=e.selectAll(".item").data(v,function(a){return a.id});h.enter().insert("rect",":first-child").attr("class",
function(a){return a.cssClasses}).style("fill",function(a){a=1<b.measurements().length?p.get(a.seriesIndex):l?p.getByKey(a.values):p.get(a.seriesIndex);return a}).attr("x",function(a){return q(a.start)/c+w}).attr("width",function(a){return c*(q(a.end+1)-q(a.start))}).on("mouseout",function(){u._unhover.notify(new epiviz.ui.charts.VisEventArgs(u.id()))}).on("mouseover",function(a){u._hover.notify(new epiviz.ui.charts.VisEventArgs(u.id(),a))}).on("click",function(a){u._deselect.notify(new epiviz.ui.charts.VisEventArgs(u.id()));
u._select.notify(new epiviz.ui.charts.VisEventArgs(u.id(),a));d3.event.stopPropagation()});h.attr("class",function(a){return a.cssClasses}).attr("height",g-m.sumAxis(d.Y)).attr("y",0).transition().duration(500).attr("x",function(a){return q(a.start)}).attr("width",function(a){return q(a.end+1)-q(a.start)});h.exit().transition().duration(500).attr("x",function(a){return q(a.start)}).remove();return v};
epiviz.plugins.charts.BlocksTrack.prototype.setColors=function(a){this.container().find(".items").remove();epiviz.ui.charts.Visualization.prototype.setColors.call(this,a)};epiviz.plugins.charts.BlocksTrackType=function(a){epiviz.ui.charts.TrackType.call(this,a)};epiviz.plugins.charts.BlocksTrackType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.TrackType.prototype);epiviz.plugins.charts.BlocksTrackType.constructor=epiviz.plugins.charts.BlocksTrackType;
epiviz.plugins.charts.BlocksTrackType.prototype.createNew=function(a,b,e){return new epiviz.plugins.charts.BlocksTrack(a,b,e)};epiviz.plugins.charts.BlocksTrackType.prototype.typeName=function(){return"epiviz.plugins.charts.BlocksTrack"};epiviz.plugins.charts.BlocksTrackType.prototype.chartName=function(){return"Blocks Track"};epiviz.plugins.charts.BlocksTrackType.prototype.chartHtmlAttributeName=function(){return"blocks"};
epiviz.plugins.charts.BlocksTrackType.prototype.isRestrictedToRangeMeasurements=function(){return!0};epiviz.plugins.charts.BlocksTrackType.prototype.measurementsFilter=function(){return function(a){return a.type()==epiviz.measurements.Measurement.Type.RANGE}};
epiviz.plugins.charts.BlocksTrackType.prototype.customSettingsDefs=function(){return epiviz.ui.charts.TrackType.prototype.customSettingsDefs.call(this).concat([new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.BlocksTrackType.CustomSettings.MIN_BLOCK_DISTANCE,epiviz.ui.charts.CustomSetting.Type.NUMBER,5,"Minimum block distance"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.BlocksTrackType.CustomSettings.USE_COLOR_BY,epiviz.ui.charts.CustomSetting.Type.BOOLEAN,!1,"Use Block Color by"),
new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.BlocksTrackType.CustomSettings.BLOCK_COLOR_BY,epiviz.ui.charts.CustomSetting.Type.MEASUREMENTS_METADATA,"colLabel","Block color by")])};epiviz.plugins.charts.BlocksTrackType.CustomSettings={MIN_BLOCK_DISTANCE:"minBlockDistance",BLOCK_COLOR_BY:"blockColorBy",USE_COLOR_BY:"useColorBy"};epiviz.plugins.charts.LineTrack=function(a,b,e){epiviz.ui.charts.Track.call(this,a,b,e);this._initialize()};epiviz.plugins.charts.LineTrack.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Track.prototype);
epiviz.plugins.charts.LineTrack.constructor=epiviz.plugins.charts.LineTrack;epiviz.plugins.charts.LineTrack.prototype._initialize=function(){epiviz.ui.charts.Track.prototype._initialize.call(this)};
epiviz.plugins.charts.LineTrack.prototype.draw=function(a,b,e,c){epiviz.ui.charts.Track.prototype.draw.call(this,a,b,e,c);b=this._lastData;a=this._lastRange;e=e||this._slide||0;c=c||this._zoom||1;this._slide=0;this._zoom=1;if(!b||!a)return[];var d=epiviz.ui.charts.CustomSetting,f=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.Y_MIN],n=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.Y_MAX];f==d.DEFAULT&&(f=null,this.measurements().foreach(function(a){null!==
a&&(null===f||a.minValue()<f)&&(f=a.minValue())}));n==d.DEFAULT&&(n=null,this.measurements().foreach(function(a){null!==a&&(null===n||a.maxValue()>n)&&(n=a.maxValue())}));null===f&&null===n&&(f=-1,n=1);null===f&&(f=n-1);null===n&&(n=f+1);var h=epiviz.ui.charts.Axis,d=d3.scale.linear().domain([a.start(),a.end()]).range([0,this.width()-this.margins().sumAxis(h.X)]),g=d3.scale.linear().domain([f,n]).range([this.height()-this.margins().sumAxis(h.Y),0]);this._clearAxes();this._drawAxes(d,g,10,5);e=e*(this.width()-
this.margins().sumAxis(h.X))/a.width();var m=this._svg.selectAll(".lines");m.empty()&&(m=this._svg.append("g").attr("class","lines").attr("transform","translate("+this.margins().left()+", "+this.margins().top()+")"));b.measurements().forEach(function(a,b){var c=m.selectAll(".line-series-index-"+b),d=m.selectAll(".point-series-index-"+b);c.empty()&&m.append("g").attr("class","line-series-index-"+b);d.empty()&&m.append("g").attr("class","point-series-index-"+b)});for(h=b.measurements().length;;++h){var p=
m.selectAll(".line-series-index-"+h),r=m.selectAll(".point-series-index-"+h);if(p.empty())break;p.remove();r.remove()}return this._drawLines(a,b,e,c,d,g)};
epiviz.plugins.charts.LineTrack.prototype._drawLines=function(a,b,e,c,d,f){var n=this.colors(),h=parseInt(this.customSettingsValues()[epiviz.plugins.charts.LineTrackType.CustomSettings.STEP]),g=this.customSettingsValues()[epiviz.plugins.charts.LineTrackType.CustomSettings.SHOW_POINTS],m=this.customSettingsValues()[epiviz.plugins.charts.LineTrackType.CustomSettings.SHOW_LINES],p=this.customSettingsValues()[epiviz.plugins.charts.LineTrackType.CustomSettings.SHOW_ERROR_BARS],r=this.customSettingsValues()[epiviz.plugins.charts.LineTrackType.CustomSettings.POINT_RADIUS],
t=this.customSettingsValues()[epiviz.plugins.charts.LineTrackType.CustomSettings.LINE_THICKNESS],l=this.customSettingsValues()[epiviz.plugins.charts.LineTrackType.CustomSettings.INTERPOLATION],q=this;c=d3.scale.linear().domain([0,this.width()-this.margins().sumAxis(epiviz.ui.charts.Axis.X)]).range([a.start(),a.end()])(e)-a.start();var w=epiviz.datatypes.GenomicRange.fromStartEnd(a.seqName(),Math.min(a.start(),a.start()+c),Math.max(a.end(),a.end()+c)),u=this._svg.select(".lines"),v=[];b.foreach(function(a,
b,c){var F=q._measurementColorLabels?n.getByKey(q._measurementColorLabels.get(a)):n.get(c),z=b.binarySearchStarts(w);if(0!=z.length){var B=Math.ceil(z.index/h)*h;z.length=Math.max(0,z.length-B+z.index);z.index=B;for(var B=epiviz.utils.range(z.length,z.index).filter(function(a){return!h||1>=h||0==(a-z.index)%h}),H=0;H<B.length;++H){var G=b.get(B[H]);v.push(new epiviz.ui.charts.ChartObject(sprintf("line_%s_%s",c,G.globalIndex),G.rowItem.start(),G.rowItem.end(),[G.value],c,[[G]],[a],sprintf("item data-series-%s",
c)))}var I=function(a){a=b.get(a);return d(a.rowItem.start())};a=function(a){a=b.get(a);return f(a.value)};m?(H=d3.svg.line().x(I).y(a).interpolate(l),G=u.select(".line-series-index-"+c).selectAll("path").data([B]),G.enter().append("path").attr("d",H).style("shape-rendering","auto").style("stroke-opacity","0.8").on("mouseover",function(){q._captureMouseHover()}).on("mousemove",function(){q._captureMouseHover()}).on("mouseout",function(){q._unhover.notify(new epiviz.ui.charts.VisEventArgs(q.id()))}),
G.attr("d",H).style("stroke",F).style("stroke-width",t).attr("transform","translate("+ +e+")").transition().duration(500).attr("transform","translate(0)")):u.select(".line-series-index-"+c).selectAll("path").remove();u.select(".point-series-index-"+c).selectAll("circle").remove();u.select(".point-series-index-"+c).selectAll(".error-bar").remove();g&&(H=u.select(".point-series-index-"+c).selectAll("circle").data(B),H.enter().append("circle").attr("class","point-series-index-"+c).attr("r",r).attr("cx",
I).attr("cy",a).attr("fill",F).attr("stroke",F).attr("transform","translate("+ +e+")").transition().duration(500).attr("transform","translate(0)"),H.on("mouseover",function(){q._captureMouseHover()}).on("mousemove",function(){q._captureMouseHover()}).on("mouseout",function(){q._unhover.notify(new epiviz.ui.charts.VisEventArgs(q.id()))}),H.exit().transition().duration(500).style("opacity",0).remove(),p&&(c=u.select(".point-series-index-"+c).selectAll(".error-bar").data(B),c.enter().append("g").attr("class",
"error-bar").each(function(a){var c;c=b.get(a);c=c.valueAnnotation?c.valueAnnotation.errMinus:null;c=void 0!=c?f(c):null;var d;d=b.get(a);d=d.valueAnnotation?d.valueAnnotation.errPlus:null;d=void 0!=d?f(d):null;null!=c&&null!=d&&(d3.select(this).append("line").attr("x1",I(a)).attr("x2",I(a)).attr("y1",c).attr("y2",d).style("stroke",F).style("shape-rendering","auto"),d3.select(this).append("line").attr("x1",I(a)-2).attr("x2",I(a)+2).attr("y1",c).attr("y2",c).style("stroke",F).style("shape-rendering",
"auto"),d3.select(this).append("line").attr("x1",I(a)-2).attr("x2",I(a)+2).attr("y1",d).attr("y2",d).style("stroke",F).style("shape-rendering","auto"))}).attr("transform","translate("+ +e+")").transition().duration(500).attr("transform","translate(0)"),c.on("mouseover",function(){q._captureMouseHover()}).on("mousemove",function(){q._captureMouseHover()}).on("mouseout",function(){q._unhover.notify(new epiviz.ui.charts.VisEventArgs(q.id()))}),c.exit().transition().duration(500).style("opacity",0).remove()))}});
absLine!=epiviz.ui.charts.CustomSetting.DEFAULT&&(u.selectAll(".abLine").remove(),u.append("svg:line").attr("class","abLine").attr("x1",0).attr("x2",q.width()-q.margins().sumAxis(epiviz.ui.charts.Axis.X)).attr("y1",f(absLine)).attr("y2",f(absLine)).style("stroke","black").style("stroke-dasharray","5, 5"));return v};epiviz.plugins.charts.LineTrackType=function(a){epiviz.ui.charts.TrackType.call(this,a)};epiviz.plugins.charts.LineTrackType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.TrackType.prototype);
epiviz.plugins.charts.LineTrackType.constructor=epiviz.plugins.charts.LineTrackType;epiviz.plugins.charts.LineTrackType.prototype.createNew=function(a,b,e){return new epiviz.plugins.charts.LineTrack(a,b,e)};epiviz.plugins.charts.LineTrackType.prototype.typeName=function(){return"epiviz.plugins.charts.LineTrack"};epiviz.plugins.charts.LineTrackType.prototype.chartName=function(){return"Line Track"};epiviz.plugins.charts.LineTrackType.prototype.chartHtmlAttributeName=function(){return"lines"};
epiviz.plugins.charts.LineTrackType.prototype.measurementsFilter=function(){return function(a){return a.type()==epiviz.measurements.Measurement.Type.FEATURE}};
epiviz.plugins.charts.LineTrackType.prototype.customSettingsDefs=function(){return epiviz.ui.charts.TrackType.prototype.customSettingsDefs.call(this).concat([new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LineTrackType.CustomSettings.STEP,epiviz.ui.charts.CustomSetting.Type.NUMBER,50,"Step"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LineTrackType.CustomSettings.SHOW_POINTS,epiviz.ui.charts.CustomSetting.Type.BOOLEAN,!1,"Show points"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LineTrackType.CustomSettings.SHOW_LINES,
epiviz.ui.charts.CustomSetting.Type.BOOLEAN,!0,"Show lines"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LineTrackType.CustomSettings.SHOW_ERROR_BARS,epiviz.ui.charts.CustomSetting.Type.BOOLEAN,!0,"Show error bars"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LineTrackType.CustomSettings.POINT_RADIUS,epiviz.ui.charts.CustomSetting.Type.NUMBER,1,"Point radius"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LineTrackType.CustomSettings.LINE_THICKNESS,epiviz.ui.charts.CustomSetting.Type.NUMBER,
1,"Line thickness"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.Y_MIN,epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,"Min Y"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.Y_MAX,epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,"Max Y"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LineTrackType.CustomSettings.INTERPOLATION,epiviz.ui.charts.CustomSetting.Type.CATEGORICAL,
"linear","Interpolation","linear step-before step-after basis basis-open basis-closed bundle cardinal cardinal-open monotone".split(" ")),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LineTrackType.CustomSettings.ABS_LINE_VAL,epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,"Draw abline")])};
epiviz.plugins.charts.LineTrackType.CustomSettings={STEP:"step",SHOW_POINTS:"showPoints",SHOW_ERROR_BARS:"showErrorBars",SHOW_LINES:"showLines",POINT_RADIUS:"pointRadius",LINE_THICKNESS:"lineThickness",INTERPOLATION:"interpolation",ABS_LINE_VAL:"abLine"};epiviz.plugins.charts.StackedLineTrack=function(a,b,e){epiviz.ui.charts.Track.call(this,a,b,e);this._initialize()};epiviz.plugins.charts.StackedLineTrack.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Track.prototype);
epiviz.plugins.charts.StackedLineTrack.constructor=epiviz.plugins.charts.StackedLineTrack;epiviz.plugins.charts.StackedLineTrack.prototype._initialize=function(){epiviz.ui.charts.Track.prototype._initialize.call(this)};
epiviz.plugins.charts.StackedLineTrack.prototype.draw=function(a,b,e,c){epiviz.ui.charts.Track.prototype.draw.call(this,a,b,e,c);b=this._lastData;a=this._lastRange;e=e||this._slide;c=c||this._zoom;this._slide=0;this._zoom=1;if(!b||!a)return[];var d=epiviz.ui.charts.Axis;e=(e||0)*(this.width()-this.margins().sumAxis(d.X))/a.width();return this._drawLines(a,b,e,c||1)};
epiviz.plugins.charts.StackedLineTrack.prototype._drawLines=function(a,b,e,c){c=epiviz.ui.charts.Axis;var d=this.colors(),f=this.customSettingsValues()[epiviz.plugins.charts.StackedLineTrackType.CustomSettings.STEP],n=this.customSettingsValues()[epiviz.plugins.charts.StackedLineTrackType.CustomSettings.INTERPOLATION],h=this.customSettingsValues()[epiviz.plugins.charts.StackedLineTrackType.CustomSettings.OFFSET],g=this,m=d3.scale.linear().domain([0,this.width()-this.margins().sumAxis(c.X)]).range([a.start(),
a.end()])(e)-a.start();epiviz.datatypes.GenomicRange.fromStartEnd(a.seqName(),Math.min(a.start(),a.start()+m),Math.max(a.end(),a.end()+m));var p=[],r=[],t=b.firstSeries().globalStartIndex(),l=b.firstSeries().globalEndIndex();b.foreach(function(a,b){var c=b.globalStartIndex(),d=b.globalEndIndex();c>t&&(t=c);d<l&&(l=d)});var t=Math.ceil(t/f)*f,l=Math.floor(l/f)*f,q;b.foreach(function(a,b,c){for(var d=epiviz.utils.range((l-t)/f).map(function(a){return a*f+t}).filter(function(a){return b.getByGlobalIndex(a)}),
e=0;e<d.length;++e){var g=b.getByGlobalIndex(d[e]);p.push(new epiviz.ui.charts.ChartObject(sprintf("line_%s_%s",c,g.globalIndex),g.rowItem.start(),g.rowItem.end(),[g.value],c,[[g]],[a],sprintf("item data-series-%s",c)))}var h=[];d.forEach(function(a){h.push({x:b.getByGlobalIndex(a).rowItem.start(),y:b.getByGlobalIndex(a).value})});r.push(h);q||(q=[],d.forEach(function(a){a=b.getByGlobalIndex(a);q.push(a.rowItem.metadata("bacteria"))}))});var w=d3.scale.linear().domain([a.start(),a.end()]).range([0,
this.width()-this.margins().sumAxis(c.X)]);this._clearAxes();this._drawAxes(w,void 0,10);a=this._svg.select(".lines");a.empty()&&(a=this._svg.append("g").attr("class","lines").attr("transform","translate("+this.margins().left()+", "+this.margins().top()+")"));b=d3.layout.stack().offset(h)(r);var u=d3.scale.linear().domain([Math.min(0,d3.min(b,function(a){return d3.min(a,function(a){return a.y0+a.y})})),d3.max(b,function(a){return d3.max(a,function(a){return a.y0+a.y})})]).range([this.height()-this.margins().sumAxis(c.Y),
0]);c=d3.svg.area().x(function(a){return w(a.x)}).y0(function(a){return u(a.y0)}).y1(function(a){return u(a.y0+a.y)}).interpolate(n);n=a.selectAll("path").data(b);n.enter().append("path").attr("d",c).style("shape-rendering","auto").style("stroke-width","0").style("fill",function(a,b){return d.get(b)}).on("mouseover",function(){g._captureMouseHover()}).on("mousemove",function(){g._captureMouseHover()}).on("mouseout",function(){g._unhover.notify(new epiviz.ui.charts.VisEventArgs(g.id()))});n.attr("d",
c).style("fill",function(a,b){return d.get(b)}).attr("transform","translate("+ +e+")").transition().duration(500).attr("transform","translate(0)");absLine!=epiviz.ui.charts.CustomSetting.DEFAULT&&(a.selectAll(".abLine").remove(),a.append("svg:line").attr("class","abLine").attr("x1",0).attr("x2",g.width()-g.margins().sumAxis(epiviz.ui.charts.Axis.X)).attr("y1",u(absLine)).attr("y2",u(absLine)).style("stroke","black").style("stroke-dasharray","5, 5"));return p};
epiviz.plugins.charts.StackedLineTrackType=function(a){epiviz.ui.charts.TrackType.call(this,a)};epiviz.plugins.charts.StackedLineTrackType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.TrackType.prototype);epiviz.plugins.charts.StackedLineTrackType.constructor=epiviz.plugins.charts.StackedLineTrackType;epiviz.plugins.charts.StackedLineTrackType.prototype.createNew=function(a,b,e){return new epiviz.plugins.charts.StackedLineTrack(a,b,e)};
epiviz.plugins.charts.StackedLineTrackType.prototype.typeName=function(){return"epiviz.plugins.charts.StackedLineTrack"};epiviz.plugins.charts.StackedLineTrackType.prototype.chartName=function(){return"Stacked Track"};epiviz.plugins.charts.StackedLineTrackType.prototype.chartHtmlAttributeName=function(){return"stacked-lines"};epiviz.plugins.charts.StackedLineTrackType.prototype.measurementsFilter=function(){return function(a){return a.type()==epiviz.measurements.Measurement.Type.FEATURE}};
epiviz.plugins.charts.StackedLineTrackType.prototype.isRestrictedToSameDatasourceGroup=function(){return!0};
epiviz.plugins.charts.StackedLineTrackType.prototype.customSettingsDefs=function(){return epiviz.ui.charts.TrackType.prototype.customSettingsDefs.call(this).concat([new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.StackedLineTrackType.CustomSettings.STEP,epiviz.ui.charts.CustomSetting.Type.NUMBER,1,"Step"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.StackedLineTrackType.CustomSettings.OFFSET,epiviz.ui.charts.CustomSetting.Type.CATEGORICAL,"zero","Offset",["zero","wiggle"]),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.StackedLineTrackType.CustomSettings.INTERPOLATION,
epiviz.ui.charts.CustomSetting.Type.CATEGORICAL,"basis","Interpolation","linear step-before step-after basis basis-open basis-closed bundle cardinal cardinal-open monotone".split(" ")),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.StackedLineTrackType.CustomSettings.ABS_LINE_VAL,epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,"Draw abline")])};
epiviz.plugins.charts.StackedLineTrackType.CustomSettings={STEP:"step",OFFSET:"offset",INTERPOLATION:"interpolation",ABS_LINE_VAL:"abLine"};
epiviz.plugins.charts.ScatterPlot=function(a,b,e){epiviz.ui.charts.Plot.call(this,a,b,e);this._legend=this._chartContent=null;this._measurementsX=[];this._measurementsY=[];var c=this;this.measurements().foreach(function(a,b){0==b%2?c._measurementsX.push(a):c._measurementsY.push(a)});this._yLabel=this._xLabel="";for(a=0;a<Math.min(this._measurementsX.length,this._measurementsY.length);++a)0<a&&(this._xLabel+=", ",this._yLabel+=", "),this._xLabel+=this._measurementsX[a].name(),this._yLabel+=this._measurementsY[a].name();
this._colorLabels=[];this._initialize()};epiviz.plugins.charts.ScatterPlot.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Plot.prototype);epiviz.plugins.charts.ScatterPlot.constructor=epiviz.plugins.charts.ScatterPlot;epiviz.plugins.charts.ScatterPlot.prototype._initialize=function(){epiviz.ui.charts.Plot.prototype._initialize.call(this);this._svg.classed("scatter-plot",!0);this._chartContent=this._svg.append("g").attr("class","chart-content");this._legend=this._svg.append("g").attr("class","chart-legend")};
epiviz.plugins.charts.ScatterPlot.prototype.draw=function(a,b){epiviz.ui.charts.Plot.prototype.draw.call(this,a,b);b=this._lastData;a=this._lastRange;if(!b||!a)return[];var e=this;if(this.customSettingsValues()[epiviz.plugins.charts.ScatterPlotType.CustomSettings.LOG_TRANSFORM])this._applyLogTransformation(b,function(b){return e._drawCircles(a,b)});else return e._drawCircles(a,b)};
epiviz.plugins.charts.ScatterPlot.prototype._drawCircles=function(a,b){var e=this,c=epiviz.ui.charts.Axis,d=Math.max(1,this.customSettingsValues()[epiviz.plugins.charts.ScatterPlotType.CustomSettings.CIRCLE_RADIUS_RATIO]*Math.min(this.width(),this.height())),f=Math.max(Math.floor(d),1),n=Math.min(this._measurementsX.length,this._measurementsY.length),h=this.customSettingsValues()[epiviz.plugins.charts.ScatterPlotType.CustomSettings.ABS_LINE_VAL],g=b.firstSeries().globalStartIndex(),m=b.firstSeries().globalEndIndex();
b.foreach(function(a,b){var c=b.globalStartIndex(),d=b.globalEndIndex();c>g&&(g=c);d<m&&(m=d)});var p=m-g,r=this.margins(),t=this.width(),l=this.height(),q=epiviz.ui.charts.CustomSetting,w=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.Y_MIN],u=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.Y_MAX],v=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.X_MIN],E=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.X_MAX];
v==q.DEFAULT&&(v=this._measurementsX[0].minValue());w==q.DEFAULT&&(w=this._measurementsY[0].minValue());E==q.DEFAULT&&(E=this._measurementsX[0].maxValue());u==q.DEFAULT&&(u=this._measurementsY[0].maxValue());var A=epiviz.measurements.Measurement.Type.isOrdered(this._measurementsX[0].type()),q=d3.scale.linear().domain([v,E]).range([0,t-r.sumAxis(c.X)]),K=d3.scale.linear().domain([w,u]).range([l-r.sumAxis(c.Y),0]);this._clearAxes(this._chartContent);this._drawAxes(q,K,5,5,this._chartContent);var F,
z,B=[];for(F=0;F<p;++F){z=F+g;var H=b.getSeries(this._measurementsX[0]).getRowByGlobalIndex(z);if(H&&(!A||void 0==a.start()||void 0==a.end()||H.start()<a.end()&&H.end()>a.start()))for(H=0;H<n;++H)B.push(H*p+F)}var H={},n=[],G=1;for(F=0;F<B.length;++F){z=B[F]%p;var I=z+g,A=Math.floor(B[F]/p);z=e._measurementsX[A];var N=e._measurementsY[A],L=b.getSeries(z).getByGlobalIndex(I),I=b.getSeries(N).getByGlobalIndex(I);if(L&&I){var x=sprintf("item data-series-%s",A),S=q(L.value),D=K(I.value),S=Math.floor(S/
f)*f,D=Math.floor(D/f)*f,J=null;H[D]&&H[D][S]?(J=H[D][S],J.id+="_"+L.globalIndex,J.start=Math.min(J.start,L.rowItem.start()),J.end=Math.max(J.end,L.rowItem.end()),J.values[0]=(J.values[0]*J.valueItems[0].length+L.value)/(J.valueItems[0].length+1),J.values[1]=(J.values[1]*J.valueItems[1].length+I.value)/(J.valueItems[1].length+1),J.valueItems[0].push(L),J.valueItems[1].push(I),J.valueItems[0].length>G&&(G=J.valueItems[0].length)):(J=new epiviz.ui.charts.ChartObject(sprintf("scatter_%s_%s",A,L.globalIndex),
L.rowItem.start(),L.rowItem.end(),[L.value,I.value],A,[[L],[I]],[z,N],x),H[D]||(H[D]={}),H[D][S]=J,n.push(J))}}f=this._chartContent.select(".items");f.empty()&&(f=this._chartContent.append("g").attr("class","items"),p=f.append("g").attr("class","selected"),f.append("g").attr("class","hovered"),p.append("g").attr("class","hovered"));p=f.selectAll("circle").data(n,function(a){return a.id});p.enter().insert("circle",":first-child").attr("id",function(a){return sprintf("%s-item-%s-%s",e.id(),a.seriesIndex,
a.valueItems[0][0].globalIndex)}).style("opacity",0).style("fill-opacity",0).attr("r",0);p.each(function(a){var b=d3.select(this),d;d=e._globalIndexColorLabels?e.colors().getByKey(e._globalIndexColorLabels[a.valueItems[0][0].globalIndex]):e.colors().get(a.seriesIndex);b.attr("cx",r.left()+(a.values[0]-v)*(t-r.sumAxis(c.X))/(E-v)).attr("cy",l-r.bottom()-(a.values[1]-w)*(l-r.sumAxis(c.Y))/(u-w)).attr("class",a.cssClasses).style("fill",d)});p.transition().duration(1E3).style("fill-opacity",function(a){return Math.max(.6,
a.valueItems[0].length/G)}).style("opacity",null).attr("r",d);p.exit().transition().duration(1E3).style("opacity",0).attr("r",0).remove();p.on("mouseover",function(a){e._hover.notify(new epiviz.ui.charts.VisEventArgs(e.id(),a))}).on("mouseout",function(){e._unhover.notify(new epiviz.ui.charts.VisEventArgs(e.id()))}).on("click",function(a){e._deselect.notify(new epiviz.ui.charts.VisEventArgs(e.id()));e._select.notify(new epiviz.ui.charts.VisEventArgs(e.id(),a));d3.event.stopPropagation()});if(this._globalIndexColorLabels){d=
{};for(H=g;H<m;++H)d[this._globalIndexColorLabels[H]]=this._globalIndexColorLabels[H];this._colorLabels=Object.keys(d);this._svg.selectAll(".chart-title").remove();this._svg.selectAll(".chart-title-color ").remove();d=this._svg.selectAll(".chart-title").data(this._colorLabels);d.enter().append("text").attr("class","chart-title").attr("font-weight","bold").attr("y",e.margins().top()-5);d.attr("fill",function(a,b){return e.colors().getByKey(a)}).text(function(a){return a});var V=0,Y=[];$("#"+this.id()+
" .chart-title").each(function(a){Y.push(V);V+=this.getBBox().width+15});d.attr("x",function(a,b){return e.margins().left()+10+Y[b]});this._svg.selectAll(".chart-title-color").data(this._colorLabels).enter().append("circle").attr("class","chart-title-color").attr("cx",function(a,b){return e.margins().left()+4+Y[b]}).attr("cy",e.margins().top()-9).attr("r",4).style("shape-rendering","auto").style("stroke-width","0").attr("fill",function(a,b){return e.colors().getByKey(a)}).style("stroke-width",0)}else{d=
Math.min(this._measurementsX.length,this._measurementsY.length);p=Array(d);for(H=0;H<d;++H)p[H]=sprintf("%s vs %s",this._measurementsX[H].name(),this._measurementsY[H].name());this._colorLabels=p}h!=epiviz.ui.charts.CustomSetting.DEFAULT&&(f.selectAll(".abLine").remove(),f.append("svg:line").attr("class","abLine").attr("x1",r.left()+(v-v)*(t-r.sumAxis(c.X))/(E-v)).attr("x2",r.left()+(E-v)*(t-r.sumAxis(c.X))/(E-v)).attr("y1",l-r.bottom()-(h-w)*(l-r.sumAxis(c.Y))/(u-w)).attr("y2",l-r.bottom()-(h-w)*
(l-r.sumAxis(c.Y))/(u-w)).style("stroke","black").style("stroke-dasharray","5, 5"));return n};epiviz.plugins.charts.ScatterPlot.prototype.colorLabels=function(){return this._colorLabels};
epiviz.plugins.charts.ScatterPlot.prototype._drawAxes=function(a,b,e,c,d,f,n,h){epiviz.ui.charts.Plot.prototype._drawAxes.call(this,a,b,e,c,d,f,n,h);this._legend.selectAll("text").remove();a=this._measurementsX;var g=this;this._legend.selectAll(".x-measurement").remove();this._legend.selectAll(".x-measurement-color").remove();b=this._legend.selectAll(".x-measurement").data(a).enter().append("text").attr("class","x-measurement").attr("font-weight","bold").attr("fill",function(a,b){return g._globalIndexColorLabels?
"#000000":g.colors().get(b)}).attr("y",this.height()-this.margins().bottom()+35).text(function(a,b){return a.name()});var m=0,p=[];$("#"+this.id()+" .x-measurement").each(function(a){p.push(m);m+=this.getBBox().width+15});b.attr("x",function(a,b){return.5*(g.width()-m)+7+p[b]});this._legend.selectAll(".x-measurement-color").data(a).enter().append("circle").attr("class","x-measurement-color").attr("cx",function(a,b){return.5*(g.width()-m)+1+p[b]}).attr("cy",this.height()-this.margins().bottom()+31).attr("r",
4).style("shape-rendering","auto").style("stroke-width","0").style("fill",function(a,b){return g._globalIndexColorLabels?"#ffffff":g.colors().get(b)});a=this._measurementsY;this._legend.selectAll(".y-measurement").remove();this._legend.selectAll(".y-measurement-color").remove();b=this._legend.selectAll(".y-measurement").data(a).enter().append("text").attr("class","y-measurement").attr("font-weight","bold").attr("fill",function(a,b){return g._globalIndexColorLabels?"#000000":g.colors().get(b)}).attr("y",
this.margins().left()-35).attr("transform","rotate(-90)").text(function(a,b){return a.name()});var r=0,t=[];$("#"+this.id()+" .y-measurement").each(function(a){t.push(r);r+=this.getBBox().width+15});b.attr("x",function(a,b){return-g.height()+.5*(g.height()-r)+12+g.margins().top()+t[b]});this._legend.selectAll(".y-measurement-color").data(a).enter().append("circle").attr("class","y-measurement-color").attr("cx",function(a,b){return-g.height()+.5*(g.height()-r)+6+g.margins().top()+t[b]}).attr("cy",
this.margins().left()-39).attr("transform","rotate(-90)").attr("r",4).style("shape-rendering","auto").style("stroke-width","0").style("fill",function(a,b){return g._globalIndexColorLabels?"#ffffff":g.colors().get(b)})};
epiviz.plugins.charts.ScatterPlot.prototype._applyLogTransformation=function(a,b){var e=new epiviz.datatypes.PartialSummarizedExperiment,c=0;a.foreach(function(a,b,d){0==c&&(d=b._container.rowData(a),e._rowData=d,c++);b=b._container.values(a);var f=[];b._values.forEach(function(a,b){f[b]=Math.log2(a+1)});a=new epiviz.datatypes.FeatureValueArray(a,b._boundaries,b._globalStartIndex,f);e.addValues(a)});var d=new epiviz.measurements.MeasurementHashtable;a.foreach(function(a){a._maxValue=Math.log2(a._maxValue+
1);a._minValue=Math.log2(a._minValue+1);var b=new epiviz.datatypes.MeasurementGenomicDataWrapper(a,e);d.put(a,b)});var f=new epiviz.datatypes.MapGenomicData(d);b(f)};epiviz.plugins.charts.ScatterPlotType=function(a){epiviz.ui.charts.PlotType.call(this,a)};epiviz.plugins.charts.ScatterPlotType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.PlotType.prototype);epiviz.plugins.charts.ScatterPlotType.constructor=epiviz.plugins.charts.ScatterPlotType;
epiviz.plugins.charts.ScatterPlotType.prototype.createNew=function(a,b,e){return new epiviz.plugins.charts.ScatterPlot(a,b,e)};epiviz.plugins.charts.ScatterPlotType.prototype.typeName=function(){return"epiviz.plugins.charts.ScatterPlot"};epiviz.plugins.charts.ScatterPlotType.prototype.chartName=function(){return"Scatter Plot"};epiviz.plugins.charts.ScatterPlotType.prototype.chartHtmlAttributeName=function(){return"scatter"};epiviz.plugins.charts.ScatterPlotType.prototype.measurementsFilter=function(){return function(a){return epiviz.measurements.Measurement.Type.hasValues(a.type())}};
epiviz.plugins.charts.ScatterPlotType.prototype.isRestrictedToSameDatasourceGroup=function(){return!0};epiviz.plugins.charts.ScatterPlotType.prototype.minSelectedMeasurements=function(){return 2};
epiviz.plugins.charts.ScatterPlotType.prototype.customSettingsDefs=function(){return epiviz.ui.charts.PlotType.prototype.customSettingsDefs.call(this).concat([new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.ScatterPlotType.CustomSettings.CIRCLE_RADIUS_RATIO,epiviz.ui.charts.CustomSetting.Type.NUMBER,.015,"Circle radius ratio"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.X_MIN,epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,
"Min X"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.X_MAX,epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,"Max X"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.Y_MIN,epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,"Min Y"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.Y_MAX,epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,
"Max Y"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.ScatterPlotType.CustomSettings.ABS_LINE_VAL,epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,"Draw abline"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.ScatterPlotType.CustomSettings.LOG_TRANSFORM,epiviz.ui.charts.CustomSetting.Type.BOOLEAN,!0,"Log Transform count data")])};
epiviz.plugins.charts.ScatterPlotType.CustomSettings={CIRCLE_RADIUS_RATIO:"circleRadiusRatio",ABS_LINE_VAL:"abLine",LOG_TRANSFORM:"logTransform"};epiviz.plugins.charts.GenesTrack=function(a,b,e){epiviz.ui.charts.Track.call(this,a,b,e);this._initialize()};epiviz.plugins.charts.GenesTrack.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Track.prototype);epiviz.plugins.charts.GenesTrack.constructor=epiviz.plugins.charts.GenesTrack;
epiviz.plugins.charts.GenesTrack.prototype._initialize=function(){epiviz.ui.charts.Track.prototype._initialize.call(this);this._svg.classed("genes-track",!0)};epiviz.plugins.charts.GenesTrack.prototype.draw=function(a,b,e,c){epiviz.ui.charts.Track.prototype.draw.call(this,a,b,e,c);b=this._lastData;a=this._lastRange;if(!b||!a)return[];e=e||this._slide;c=c||this._zoom;this._slide=0;this._zoom=1;return this._drawGenes(a,b,e||0,c||1)};
epiviz.plugins.charts.GenesTrack.prototype._drawGenes=function(a,b,e,c){var d=epiviz.ui.charts.Axis,f=a.start(),n=a.end();a=this.width();var h=this.height(),g=this.margins(),m=d3.scale.linear().domain([f,n]).range([0,a-g.sumAxis(d.X)]),p=e*(a-g.sumAxis(d.X))/(n-f);this._clearAxes();this._drawAxes(m,null,10,5);var r=this,t=b.firstSeries();b=epiviz.utils.range(t.size()).map(function(a){a=t.get(a);var b=a.rowItem,c=sprintf("item gene-%s",b.metadata("gene"));return new epiviz.ui.charts.ChartObject(b.metadata("gene"),
b.start(),b.end(),null,0,[[a]],[t.measurement()],c)});c&&(this._svg.select(".items").remove(),this._svg.select("defs").select("#clip-"+this.id()).remove());c=this._svg.select(".items");e=c.select(".selected");c.empty()&&(this._svg.select("defs").append("clipPath").attr("id","clip-"+this.id()).append("rect").attr("x",0).attr("y",0).attr("width",a-g.sumAxis(d.X)).attr("height",h-g.sumAxis(d.Y)),c=this._svg.append("g").attr("class","items").attr("transform","translate("+g.left()+", "+g.top()+")").attr("id",
this.id()+"-gene-content").attr("clip-path","url(#clip-"+this.id()+")"),e=c.append("g").attr("class","selected"),c.append("g").attr("class","hovered"),e.append("g").attr("class","hovered"));d=c.selectAll(".item").data(b,function(a){return a.id});d.enter().insert("g",":first-child").on("mouseout",function(){r._unhover.notify(new epiviz.ui.charts.VisEventArgs(r.id()))}).on("mouseover",function(a){r._hover.notify(new epiviz.ui.charts.VisEventArgs(r.id(),a))}).on("click",function(a){r._deselect.notify(new epiviz.ui.charts.VisEventArgs(r.id()));
r._select.notify(new epiviz.ui.charts.VisEventArgs(r.id(),a));d3.event.stopPropagation()}).attr("transform","translate("+p+", 0) scale(1, 1)").each(function(a){r._drawGene(this,a,m)});p&&d.each(function(a){r._translateGene(this,a,p)});d.exit().transition().duration(500).style("opacity",0).remove();return b};
epiviz.plugins.charts.GenesTrack.prototype._translateGene=function(a,b,e){a=d3.select(a);b=a.attr("transform");var c=RegExp("translate\\([\\d\\.\\-]+[\\,\\s]+[\\d\\.\\-]+\\)","g"),d=RegExp("[\\d\\.\\-]+","g"),f=b.match(c)[0],d=parseFloat(f.match(d)[0]);b=b.replace(c,"translate("+(d-e)+", 0)");a.transition().duration(500).attr("transform",b)};
epiviz.plugins.charts.GenesTrack.prototype._drawGene=function(a,b,e){var c=epiviz.ui.charts.Axis,d=this,f=b.valueItems[0][0].rowItem,n=e(b.start),h=e(b.end),g="+"==f.strand()?1:-1,m=-g*(this.height()-this.margins().sumAxis(c.Y))*.25,p=f.metadata("exon_starts").split(",").map(function(a){return parseInt(a)}),r=f.metadata("exon_ends").split(",").map(function(a){return parseInt(a)}),t=d3.range(0,p.length),l=.08*this.height(),q=.16*this.height(),w=l*Math.sqrt(3)*.5;a=d3.select(a);a.attr("class",b.cssClasses);
a.append("polygon").attr("class","gene-body").style("fill",this.colors().get(0)).attr("points",function(){var a=null,b,a=.5*(d.height()-d.margins().sumAxis(c.Y)-l)+m;b=[a,a,a+.5*l,a+l,a+l];a="+"==f.strand()?[n,h,h+w,h,n]:[h,n,n-w,n,h];return sprintf("%s,%s %s,%s %s,%s %s,%s %s,%s",a[0],b[0],a[1],b[1],a[2],b[2],a[3],b[3],a[4],b[4])});a.append("g").attr("class","exons").style("fill",this.colors().get(1)).selectAll("rect").data(t).enter().append("rect").attr("x",function(a){return e(p[a])}).attr("y",
.5*(d.height()-q-d.margins().sumAxis(c.Y))+m).attr("width",function(a){return e(r[a])-e(p[a])}).attr("height",q);a.append("text").attr("class","gene-name").attr("x",n+2).attr("y",.5*(d.height()-d.margins().sumAxis(c.Y))+m-g*(l+2)).style("dominant-baseline","central").text(b.id)};epiviz.plugins.charts.GenesTrack.prototype.colorLabels=function(){return["Genes","Exons"]};
epiviz.plugins.charts.GenesTrack.prototype._drawAxes=function(a,b,e,c,d,f,n,h){epiviz.ui.charts.Track.prototype._drawAxes.call(this,a,b,e,c,d,f,n,h);a=epiviz.ui.charts.Axis;this._svg.select(".axes").append("g").attr("class","xAxis").append("line").attr("x1",this.margins().left()).attr("x2",this.width()-this.margins().left()).attr("y1",this.margins().top()+.5*(this.height()-this.margins().sumAxis(a.Y))).attr("y2",this.margins().top()+.5*(this.height()-this.margins().sumAxis(a.Y))).style("stroke","#555555").style("shape-rendering",
"crispEdges")};epiviz.plugins.charts.GenesTrackType=function(a){epiviz.ui.charts.TrackType.call(this,a)};epiviz.plugins.charts.GenesTrackType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.TrackType.prototype);epiviz.plugins.charts.GenesTrackType.constructor=epiviz.plugins.charts.GenesTrackType;epiviz.plugins.charts.GenesTrackType.prototype.createNew=function(a,b,e){return new epiviz.plugins.charts.GenesTrack(a,b,e)};epiviz.plugins.charts.GenesTrackType.prototype.typeName=function(){return"epiviz.plugins.charts.GenesTrack"};
epiviz.plugins.charts.GenesTrackType.prototype.chartName=function(){return"Genes Track"};epiviz.plugins.charts.GenesTrackType.prototype.chartHtmlAttributeName=function(){return"genes"};epiviz.plugins.charts.GenesTrackType.prototype.isRestrictedToRangeMeasurements=function(){return!0};epiviz.plugins.charts.GenesTrackType.prototype.measurementsFilter=function(){return function(a){return a.type()==epiviz.measurements.Measurement.Type.RANGE}};
epiviz.plugins.charts.HeatmapPlot=function(a,b,e){epiviz.ui.charts.Plot.call(this,a,b,e);this._chartContent=null;this._min=this.measurements().first().minValue();this._max=this.measurements().first().maxValue();this._colorScale=epiviz.utils.colorizeBinary(this._min,this._max,"#ffffff",this.colors().getByKey("Max"));this._colorLabels=[];this._dendrogramRatio=.1;this._initialize()};epiviz.plugins.charts.HeatmapPlot.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Plot.prototype);
epiviz.plugins.charts.HeatmapPlot.constructor=epiviz.plugins.charts.HeatmapPlot;epiviz.plugins.charts.HeatmapPlot.prototype._initialize=function(){epiviz.ui.charts.Plot.prototype._initialize.call(this);this._svg.classed("heatmap-plot",!0);this._chartContent=this._svg.append("g").attr("class","chart-content")};
epiviz.plugins.charts.HeatmapPlot.prototype.draw=function(a,b){epiviz.ui.charts.Plot.prototype.draw.call(this,a,b);b=this._lastData;a=this._lastRange;if(!b||!a)return[];this.customSettingsValues();var e=this;if(this.customSettingsValues()[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.LOG_TRANSFORM])this._applyLogTransformation(b,function(b){b=e._applyClustering(a,b);return e._drawCells(a,b.data,b.columnOrder)});else{var c=e._applyClustering(a,b);return e._drawCells(a,c.data,c.columnOrder)}};
epiviz.plugins.charts.HeatmapPlot.prototype._applyClustering=function(a,b){var e=epiviz.measurements.Measurement.Type.isOrdered(this.measurements().first().type()),c=this.customSettingsValues()[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.CLUSTER],d=this.customSettingsValues()[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.SHOW_DENDROGRAM],f=epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.instance(),n=f.algorithm(this.customSettingsValues()[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.CLUSTERING_ALG]),
h=f.metric(this.customSettingsValues()[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.CLUSTERING_METRIC]),g=f.linkage(this.customSettingsValues()[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.CLUSTERING_LINKAGE]),m=this.customSettingsValues()[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.MAX_COLUMNS],p=b.firstSeries().globalStartIndex(),r=b.firstSeries().size()+p;b.foreach(function(a,b){var c=b.globalStartIndex(),d=b.globalEndIndex();c>p&&(p=c);d<r&&(r=d)});var t=r-p,f=c==epiviz.plugins.charts.HeatmapPlotType.Cluster.ROWS||
c==epiviz.plugins.charts.HeatmapPlotType.Cluster.BOTH,l=c==epiviz.plugins.charts.HeatmapPlotType.Cluster.COLS||c==epiviz.plugins.charts.HeatmapPlotType.Cluster.BOTH,c=d*this._dendrogramRatio,m=d&&l&&m>=t,q,w,u,v,E,A,K=this._svg;["dendrogram-horizontal","dendrogram-vertical"].forEach(function(a){K.select("."+a).remove()});var F=b;if(f){q=[];b.foreach(function(b,c){for(var d=[],f=0;f<t;++f){var g=c.getByGlobalIndex(f+p),h=g.rowItem;(!e||void 0==a.start()||void 0==a.end()||h.start()<a.end()&&h.end()>=
a.start())&&d.push(g.value)}q.push(d)});d=n.cluster(q,h,g);w=d.root().data();var z=[];b.foreach(function(a){z.push(a)});u=[];for(v=0;v<w.length;++v)u[v]=z[w[v]];w=new epiviz.measurements.MeasurementHashtable;for(v=0;v<u.length;++v)w.put(u[v],b.getSeries(u[v]));F=new epiviz.datatypes.MapGenomicData(w);c&&(A=this.width()*c,E=this.height()*(1-c*m)-this.margins().sumAxis(epiviz.ui.charts.Axis.Y),u=this.margins().top(),v=this.width()-A-this.margins().right(),this._drawDendrogram(d,u,v,E,A))}w=null;if(l){q=
[];b.foreach(function(b,c){for(var d=0,f=0;d<t;++d){var g=c.getByGlobalIndex(d+p),h=g.rowItem;if(!e||void 0==a.start()||void 0==a.end()||h.start()<a.end()&&h.end()>=a.start())q.length<=f&&q.push([]),q[f].push(g.value),++f}});if(0==q.length)return{data:F,columnOrder:[]};d=n.cluster(q,h,g);w=d.root().data();m&&(n=this.customSettingsValues()[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.SHOW_COLORS_FOR_ROW_LABELS]?20:0,v=this.margins().left(),u=this.height()*(1-c)-this.margins().bottom(),A=this.height()*
c,E=this.width()*(1-c*f)-this.margins().left()-this.margins().right()-n,this._drawDendrogram(d,u,v,E,A,!0))}return{data:F,columnOrder:w}};
epiviz.plugins.charts.HeatmapPlot.prototype._drawCells=function(a,b,e){var c=this,d=epiviz.ui.charts.Axis,f=this.customSettingsValues()[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.MAX_COLUMNS],n=b.firstSeries().globalStartIndex(),h=b.firstSeries().size()+n,g=[],m=epiviz.measurements.Measurement.Type.isOrdered(this.measurements().first().type());b.foreach(function(a,b){var c=b.globalStartIndex(),d=b.globalEndIndex();c>n&&(n=c);d<h&&(h=d);g.push(a)});for(var p=h-n,r=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.COL_LABEL],
t=this.customSettingsValues()[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.CLUSTER],l=t==epiviz.plugins.charts.HeatmapPlotType.Cluster.ROWS||t==epiviz.plugins.charts.HeatmapPlotType.Cluster.BOTH,t=(t==epiviz.plugins.charts.HeatmapPlotType.Cluster.COLS||t==epiviz.plugins.charts.HeatmapPlotType.Cluster.BOTH)&&f>=p,q=this.customSettingsValues()[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.SHOW_DENDROGRAM]*this._dendrogramRatio,w=this.customSettingsValues()[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.SHOW_COLORS_FOR_ROW_LABELS]?
20:0,l=this.width()*(1-q*l)-w,t=this.height()*(1-q*t),u=[],v=[],E,q=0;q<p;++q){E=q+n;var A;b.foreach(function(a,b){return A=b.getRowByGlobalIndex(E)});A&&(!m||void 0==a.start()||void 0==a.end()||A.start()<a.end()&&A.end()>=a.start())&&(u.push(E),w=A.metadata(r)||""+A.id(),v.push(w))}if(e)for(a=u,m=v,u=Array(u.length),v=Array(v.length),q=0;q<u.length;++q)u[q]=a[e[q]],v[q]=m[e[q]];var K=[],F={};b.foreach(function(a,b,c){for(var d=Math.ceil(v.length/f),e=0,g=f,h=0;h<v.length;++h)if(E=u[h],d=b.getByGlobalIndex(E)){var l=
null;0==e?(e=sprintf("item data-series-%s",c),l=new epiviz.ui.charts.ChartObject(sprintf("heatmap_%s_%s",c,E),d.rowItem.start(),d.rowItem.end(),[d.value],c,[[d]],[a],e),K.push(l),e=d=Math.ceil((v.length-h)/g),--g):(l=K[K.length-1],l.id+="_"+E,epiviz.measurements.Measurement.Type.isOrdered(b.measurement().type())&&(l.start=Math.min(l.start,d.rowItem.start()),l.end=Math.max(l.end,d.rowItem.end())),l.values[0]=(l.values[0]*l.valueItems[0].length+d.value)/(l.valueItems[0].length+1),l.valueItems[0].push(d));
0==c&&(F[E]=K.length-1);--e}});var z;this._min=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.Y_MIN];this._max=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.Y_MAX];e=epiviz.ui.charts.CustomSetting;var B=1E5,H=-1E5;b.foreach(function(a,b){var c=b._container.values(a)._values,d=Math.min.apply(null,c),c=Math.max.apply(null,c);d<B&&(B=d);c>H&&(H=c)});this._min==e.DEFAULT&&(this._min=B);this._max==e.DEFAULT&&(this._max=H);if(this._globalIndexColorLabels){e=
{};for(a=n;a<h;++a)e[this._globalIndexColorLabels[a]]=this._globalIndexColorLabels[a];this._colorLabels=Object.keys(e);z={};this._colorLabels.forEach(function(a,b){var d=c.colors().getByKey(a);z[a]=epiviz.utils.colorizeBinary(c._min,c._max,"#ffffff",d)})}else this._colorLabels=[sprintf("Max",b.firstSeries().measurement().maxValue())],this._colorScale=epiviz.utils.colorizeBinary(this._min,this._max,"#ffffff",this.colors().getByKey("Max"));var G=(e=Math.min(v.length,f))?(l-this.margins().sumAxis(d.X))/
e:0,I=(t-this.margins().sumAxis(d.Y))/b.measurements().length;b=this._chartContent.select(".items");b.empty()&&(b=this._chartContent.append("g").attr("class","items"),d=b.append("g").attr("class","selected"),b.append("g").attr("class","hovered"),d.append("g").attr("class","hovered"));b.attr("transform","translate("+this.margins().left()+", "+this.margins().top()+")");d=b.selectAll("rect").data(K,function(a){return a.id});d.enter().append("rect").attr("id",function(a){return sprintf("%s-item-%s-%s",
c.id(),a.seriesIndex,a.valueItems[0][0].globalIndex)}).attr("class",function(a){return a.cssClasses}).style("opacity",0).style("fill-opacity",0).attr("x",function(a){return G*F[a.valueItems[0][0].globalIndex]}).attr("y",function(a){return I*a.seriesIndex}).attr("width",G).attr("height",I).style("fill",function(a,b){return c._globalIndexColorLabels?z[c._globalIndexColorLabels[a.valueItems[0][0].globalIndex]](a.values[0]):c._colorScale(a.values[0])});d.transition().duration(1E3).style("fill-opacity",
null).style("opacity",null).attr("x",function(a){return G*F[a.valueItems[0][0].globalIndex]}).attr("y",function(a){return I*a.seriesIndex}).attr("width",G).attr("height",I).style("fill",function(a){return c._globalIndexColorLabels?z[c._globalIndexColorLabels[a.valueItems[0][0].globalIndex]](a.values[0]):c._colorScale(a.values[0])});d.exit().transition().duration(1E3).style("opacity",0).remove();d.on("mouseover",function(a){c._hover.notify(new epiviz.ui.charts.VisEventArgs(c.id(),a))}).on("mouseout",
function(){c._unhover.notify(new epiviz.ui.charts.VisEventArgs(c.id()))}).on("click",function(a){c._deselect.notify(new epiviz.ui.charts.VisEventArgs(c.id()));c._select.notify(new epiviz.ui.charts.VisEventArgs(c.id(),a));d3.event.stopPropagation()});this._drawLabels(b,v,u,e,g,G,I,n,l);return K};
epiviz.plugins.charts.HeatmapPlot.prototype._drawDendrogram=function(a,b,e,c,d,f){var n=f?"dendrogram-horizontal":"dendrogram-vertical",h=this._svg.append("g").attr("class",n);f?h.attr("transform","translate("+e+","+b+")scale(-1, 1)rotate(90, 0, 0)"):h.attr("transform","translate("+e+","+b+")");this._drawSubDendrogram(this._svg.select("."+n),a.root(),0,0,d,c,!1)};
epiviz.plugins.charts.HeatmapPlot.prototype._drawSubDendrogram=function(a,b,e,c,d,f,n){var h=b.children();if(0==h.length)return e+.5*f;for(var g=d3.scale.linear().domain([0,b.distance()]).range([0,d]),m=0,p,r,t=0;t<h.length;++t){var l=e+m,q=f/b.weight()*h[t].weight(),w=g(h[t].distance()),l=this._drawSubDendrogram(a,h[t],l,c,w,q,n);a.append("line").attr("x1",c+w).attr("x2",c+d).attr("y1",l).attr("y2",l).style("stroke","#555555").style("stroke-width",1).style("shape-rendering","auto");0==t&&n&&a.append("text").attr("class",
"row-text").attr("x",Math.max(c+10,c+.5*(w+d))).attr("y",l-10).style("text-anchor","middle").text(Globalize.format(b.distance(),"n2"));if(void 0==p||p>l)p=l;if(void 0==r||r<l)r=l;m+=f/b.weight()*h[t].weight()}a.append("line").attr("x1",c+d).attr("x2",c+d).attr("y1",p).attr("y2",r).style("stroke","#555555").style("stroke-width",1).style("shape-rendering","auto");return.5*(p+r)};
epiviz.plugins.charts.HeatmapPlot.prototype._drawLabels=function(a,b,e,c,d,f,n,h,g){var m=this,p=function(a){a="name"==l?a.name():(a=a.annotation())&&l in a?a[l]:"<NA>";return w[a]=a},r=a.selectAll(".col-text"),t=0;b.length>c?r.transition().duration(500).style("opacity",0).remove():(r=r.data(b,function(a,b){return a+e[b]}),r.enter().append("text").attr("class","col-text").style("opacity","0").attr("x",0).attr("y",0).attr("transform",function(a,b){return"translate("+(b*f+.5*f)+",-5)rotate(-60)"}).text(function(a){return a}),
r.transition().duration(500).attr("x",0).attr("y",0).attr("transform",function(a,b){return"translate("+(b*f+.5*f)+",-5)rotate(-60)"}).style("opacity",null).attr("fill",function(a,b){var c=b+h;return m._globalIndexColorLabels?m.colors().getByKey(m._globalIndexColorLabels[c]):"#000000"}),r.exit().transition().duration(500).style("opacity",0).remove(),$("#"+this.id()+" .col-text").each(function(a){a=this.getBBox().width;t<a&&(t=a)}));var l=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.ROW_LABEL];
b=this.customSettingsValues()[epiviz.plugins.charts.HeatmapPlotType.CustomSettings.SHOW_COLORS_FOR_ROW_LABELS];b||(a.selectAll(".row-color-label").remove(),c=a.selectAll(".row-text").data(d,function(a){return a.id()}),c.enter().append("text").attr("class","row-text").attr("x",0).attr("y",0).attr("transform",function(a,b){return"translate(-5,"+(b*n+.5*n)+")rotate(30)"}),c.text(function(a){return"name"==l?a.name():(a=a.annotation())&&l in a?a[l]:"<NA>"}),c.transition().duration(500).attr("x",0).attr("y",
0).attr("transform",function(a,b){return"translate(-5,"+(b*n+.5*n)+")rotate(30)"}),c.exit().remove());var q;if(b){a.selectAll(".row-text").remove();var w={};d.forEach(function(a){a=p(a);w[a]=a});q=Object.keys(w);a=a.selectAll(".row-color-label").data(d,function(a){return a.id()});a.enter().append("rect").attr("class","row-color-label").attr("x",g-m.margins().sumAxis(epiviz.ui.charts.Axis.X)).attr("y",.5*-n).attr("width",20).attr("height",n).attr("transform",function(a,b){return"translate(0,"+(b*n+
.5*n)+")"});a.style("fill",function(a){a=p(a);return m.colors().getByKey(a)});a.transition().duration(500).attr("x",g-m.margins().sumAxis(epiviz.ui.charts.Axis.X)).attr("y",.5*-n).attr("height",n).attr("transform",function(a,b){return"translate(0,"+(b*n+.5*n)+")"});a.exit().remove()}this._svg.selectAll(".chart-title").remove();this._svg.selectAll(".chart-title-color ").remove();g=this._svg.selectAll(".chart-title").data(["Min"].concat(this._colorLabels));g.enter().append("text").attr("class","chart-title").attr("font-weight",
"bold").attr("y",m.margins().top()-5-t);g.attr("fill",function(a,b){return 0==b?"#000000":m.colors().getByKey(a)}).text(function(a){return a});var u=0,v=[];$("#"+this.id()+" .chart-title").each(function(a){v.push(u);u+=this.getBBox().width+15});g.attr("x",function(a,b){return m.margins().left()+10+v[b]});this._svg.selectAll(".chart-title-color").data(["Min"].concat(this._colorLabels)).enter().append("circle").attr("class","chart-title-color").attr("cx",function(a,b){return m.margins().left()+4+v[b]}).attr("cy",
m.margins().top()-9-t).attr("r",4).style("shape-rendering","auto").style("stroke-width","0").attr("fill",function(a,b){return 0==b?"#ffffff":m.colors().getByKey(a)}).style("stroke-width",function(a,b){return b?0:1}).style("stroke","#000000");this._svg.selectAll(".row-legend").remove();this._svg.selectAll(".row-legend-color").remove();b&&(g=this._svg.selectAll(".row-legend").data(q),g.enter().append("text").attr("class","row-legend").attr("font-weight","bold").attr("x",-20),g.attr("fill",function(a){return m.colors().getByKey(a)}).text(function(a){return a}).attr("transform",
function(a,b){return"translate("+m.margins().left()+","+m.margins().top()+")"}),g.attr("y",function(a,b){return 10+15*b}),this._svg.selectAll(".row-legend-color").data(q).enter().append("rect").attr("class","chart-title-color").attr("x",-18).attr("y",function(a,b){return 2+15*b}).attr("width",10).attr("height",10).style("shape-rendering","auto").style("stroke-width","0").attr("fill",function(a){return m.colors().getByKey(a)}).style("stroke-width",0).attr("transform",function(a,b){return"translate("+
m.margins().left()+","+m.margins().top()+")"}),this._colorLabels=this._colorLabels.concat(q))};epiviz.plugins.charts.HeatmapPlot.prototype.colorLabels=function(){return this._colorLabels};
epiviz.plugins.charts.HeatmapPlot.prototype._applyLogTransformation=function(a,b){var e=new epiviz.datatypes.PartialSummarizedExperiment,c=0;a.foreach(function(a,b,d){0==c&&(d=b._container.rowData(a),e._rowData=d,c++);b=b._container.values(a);var f=[];void 0!=b._values?b._values.forEach(function(a,b){f[b]=Math.log2(a+1)}):f=void 0;a=new epiviz.datatypes.FeatureValueArray(a,b._boundaries,b._globalStartIndex,f);e.addValues(a)});var d=new epiviz.measurements.MeasurementHashtable;a.foreach(function(a){a._maxValue=
Math.log2(a._maxValue+1);a._minValue=Math.log2(a._minValue+1);var b=new epiviz.datatypes.MeasurementGenomicDataWrapper(a,e);d.put(a,b)});var f=new epiviz.datatypes.MapGenomicData(d);b(f)};epiviz.plugins.charts.HeatmapPlotType=function(a){epiviz.ui.charts.PlotType.call(this,a)};epiviz.plugins.charts.HeatmapPlotType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.PlotType.prototype);epiviz.plugins.charts.HeatmapPlotType.constructor=epiviz.plugins.charts.HeatmapPlotType;
epiviz.plugins.charts.HeatmapPlotType.prototype.createNew=function(a,b,e){return new epiviz.plugins.charts.HeatmapPlot(a,b,e)};epiviz.plugins.charts.HeatmapPlotType.prototype.typeName=function(){return"epiviz.plugins.charts.HeatmapPlot"};epiviz.plugins.charts.HeatmapPlotType.prototype.chartName=function(){return"Heatmap"};epiviz.plugins.charts.HeatmapPlotType.prototype.chartHtmlAttributeName=function(){return"heatmap"};epiviz.plugins.charts.HeatmapPlotType.prototype.measurementsFilter=function(){return function(a){return epiviz.measurements.Measurement.Type.hasValues(a.type())}};
epiviz.plugins.charts.HeatmapPlotType.prototype.isRestrictedToSameDatasourceGroup=function(){return!0};
epiviz.plugins.charts.HeatmapPlotType.prototype.customSettingsDefs=function(){var a=epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.instance();return epiviz.ui.charts.PlotType.prototype.customSettingsDefs.call(this).concat([new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.COL_LABEL,epiviz.ui.charts.CustomSetting.Type.MEASUREMENTS_METADATA,"colLabel","Columns labels"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.ROW_LABEL,
epiviz.ui.charts.CustomSetting.Type.MEASUREMENTS_ANNOTATION,"name","Row labels"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.HeatmapPlotType.CustomSettings.SHOW_COLORS_FOR_ROW_LABELS,epiviz.ui.charts.CustomSetting.Type.BOOLEAN,!1,"Row labels as colors"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.HeatmapPlotType.CustomSettings.MAX_COLUMNS,epiviz.ui.charts.CustomSetting.Type.NUMBER,40,"Max columns"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.Y_MIN,
epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,"Min Value"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.Y_MAX,epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,"Max Value"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.HeatmapPlotType.CustomSettings.CLUSTER,epiviz.ui.charts.CustomSetting.Type.CATEGORICAL,"rows","Cluster",Object.keys(epiviz.plugins.charts.HeatmapPlotType.Cluster).map(function(a){return epiviz.plugins.charts.HeatmapPlotType.Cluster[a]})),
new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.HeatmapPlotType.CustomSettings.CLUSTERING_ALG,epiviz.ui.charts.CustomSetting.Type.CATEGORICAL,a.algorithms()[0],"Clustering Algorithm",a.algorithms()),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.HeatmapPlotType.CustomSettings.CLUSTERING_METRIC,epiviz.ui.charts.CustomSetting.Type.CATEGORICAL,a.metrics()[0],"Clustering Metric",a.metrics()),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.HeatmapPlotType.CustomSettings.CLUSTERING_LINKAGE,
epiviz.ui.charts.CustomSetting.Type.CATEGORICAL,a.linkages()[0],"Clustering Linkage",a.linkages()),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.HeatmapPlotType.CustomSettings.SHOW_DENDROGRAM,epiviz.ui.charts.CustomSetting.Type.BOOLEAN,!0,"Show Dendrogram"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.HeatmapPlotType.CustomSettings.LOG_TRANSFORM,epiviz.ui.charts.CustomSetting.Type.BOOLEAN,!0,"Log Transform count data")])};
epiviz.plugins.charts.HeatmapPlotType.Cluster={NONE:"none",ROWS:"rows",COLS:"columns",BOTH:"both"};epiviz.plugins.charts.HeatmapPlotType.CustomSettings={MAX_COLUMNS:"maxColumns",CLUSTER:"cluster",CLUSTERING_ALG:"clusteringAlg",CLUSTERING_METRIC:"clusteringMetric",CLUSTERING_LINKAGE:"clusteringLinkage",SHOW_DENDROGRAM:"showDendrogram",SHOW_COLORS_FOR_ROW_LABELS:"showColorsForRowLabels",LOG_TRANSFORM:"logTransform"};
epiviz.plugins.charts.LinePlot=function(a,b,e){epiviz.ui.charts.Plot.call(this,a,b,e);this._initialize()};epiviz.plugins.charts.LinePlot.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Plot.prototype);epiviz.plugins.charts.LinePlot.constructor=epiviz.plugins.charts.LinePlot;epiviz.plugins.charts.LinePlot.prototype._initialize=function(){epiviz.ui.charts.Plot.prototype._initialize.call(this);this._svg.classed("line-plot",!0)};
epiviz.plugins.charts.LinePlot.prototype.draw=function(a,b,e,c){epiviz.ui.charts.Plot.prototype.draw.call(this,a,b,e,c);b=this._lastData;a=this._lastRange;if(!b||!a)return[];e=epiviz.ui.charts.CustomSetting;var d=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.Y_MIN],f=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.Y_MAX],n=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.ROW_LABEL];d==e.DEFAULT&&(d=null,b.measurements().forEach(function(a){null!==
a&&(null===d||a.minValue()<d)&&(d=a.minValue())}));f==e.DEFAULT&&(f=null,b.measurements().forEach(function(a){null!==a&&(null===f||a.maxValue()>f)&&(f=a.maxValue())}));null===d&&null===f&&(d=-1,f=1);null===d&&(d=f-1);null===f&&(f=d+1);c=epiviz.ui.charts.Axis;e=d3.scale.linear().domain([0,b.measurements().length-1]).range([0,this.width()-this.margins().sumAxis(c.X)]);c=d3.scale.linear().domain([d,f]).range([this.height()-this.margins().sumAxis(c.Y),0]);this._clearAxes();this._drawAxes(e,c,b.measurements().length,
5,void 0,void 0,void 0,void 0,void 0,void 0,b.measurements().map(function(a){return"name"==n?a.name():(a=a.annotation())&&n in a?a[n]:"<NA>"}));var h=this._svg.selectAll(".lines");if(h.empty()){var h=this._svg.append("g").attr("class","lines items"),g=h.append("g").attr("class","selected");h.append("g").attr("class","hovered");g.append("g").attr("class","hovered")}h.attr("transform","translate("+this.margins().left()+", "+this.margins().top()+")");return this._drawLines(a,b,e,c)};
epiviz.plugins.charts.LinePlot.prototype._drawLines=function(a,b,e,c){var d=this.colors(),f=this.customSettingsValues()[epiviz.plugins.charts.LinePlotType.CustomSettings.SHOW_POINTS],n=this.customSettingsValues()[epiviz.plugins.charts.LinePlotType.CustomSettings.SHOW_LINES],h=this.customSettingsValues()[epiviz.plugins.charts.LinePlotType.CustomSettings.SHOW_ERROR_BARS],g=this.customSettingsValues()[epiviz.plugins.charts.LinePlotType.CustomSettings.POINT_RADIUS],m=this.customSettingsValues()[epiviz.plugins.charts.LinePlotType.CustomSettings.LINE_THICKNESS],
p=this.customSettingsValues()[epiviz.plugins.charts.LinePlotType.CustomSettings.INTERPOLATION],r=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.COL_LABEL],t=this.customSettingsValues()[epiviz.plugins.charts.LinePlotType.CustomSettings.ABS_LINE_VAL],l=this,q=this._svg.select(".lines"),w=b.firstSeries().globalStartIndex(),u=b.firstSeries().globalEndIndex();b.foreach(function(a,b){var c=b.globalStartIndex(),d=b.globalEndIndex();c>w&&(w=c);d<u&&(u=d)});for(var v=u-w,E=epiviz.measurements.Measurement.Type.isOrdered(b.measurements()[0].type()),
A,K,F=0;F<v;++F){var z=F+w,B=b.firstSeries().getRowByGlobalIndex(z);if(!E||void 0==a.start()||void 0==a.end()||B.start()<a.end()&&B.end()>=a.start())void 0==A&&(A=z),K=z+1}w=A;u=K;v=K-A;this.width();var H=d3.svg.line().x(function(a){return e(a.x)}).y(function(a){return c(a.y)}).interpolate(p),G=function(a){return l._globalIndexColorLabels?l._globalIndexColorLabels[a.globalIndex()]:a.metadata(r)},I=function(a){return b.measurements().map(function(c,d){var e=b.getByGlobalIndex(c,a);return{x:d,y:e?e.value:
null,errMinus:e&&e.valueAnnotation?e.valueAnnotation.errMinus:null,errPlus:e&&e.valueAnnotation?e.valueAnnotation.errPlus:null}}).filter(function(a){return null!==a.y})};a=epiviz.utils.range(v,w);var N;n?(N=a.map(function(a){var c=b.firstSeries().getRowByGlobalIndex(a);return new epiviz.ui.charts.ChartObject(sprintf("line-series-%s",a),c.start(),c.end(),I(a),a,b.measurements().map(function(c,d){return[b.getByGlobalIndex(c,a)]}),b.measurements(),"")}),n=q.selectAll(".line-series").data(N,function(a){return a.id}),
n.enter().insert("g",":first-child").attr("class","line-series item").style("opacity","0").on("mouseover",function(a){l._hover.notify(new epiviz.ui.charts.VisEventArgs(l.id(),a));l._svg.selectAll("g.lines.items").selectAll(".item").style("opacity",1-.8);l._svg.selectAll("g.lines.items").selectAll("g.hovered .item").style("opacity",.8)}).on("mouseout",function(){l._unhover.notify(new epiviz.ui.charts.VisEventArgs(l.id()));l._svg.selectAll("g.lines.items").selectAll(".item").style("opacity",.7)}).each(function(a){d3.select(this).append("path").attr("class",
"bg-line").attr("d",H(a.values)).style("shape-rendering","auto").style("stroke-width",10).style("stroke","#dddddd").style("stroke-opacity","0.1");d3.select(this).append("path").attr("class","main-line").attr("d",H(a.values)).style("shape-rendering","auto")}),n.transition().duration(500).style("opacity","0.7").each(function(a){var c=d.getByKey(G(b.firstSeries().getRowByGlobalIndex(a.seriesIndex)));d3.select(this).selectAll(".bg-line").attr("d",H(a.values));d3.select(this).selectAll(".main-line").attr("d",
H(a.values)).style("stroke",c).style("stroke-width",m)}),n.exit().transition().duration(500).style("opacity","0").remove()):q.selectAll(".line-series").remove();f?(f=q.selectAll(".points").data(N,function(a){return a.id}),f.enter().append("g").attr("class","points").style("opacity","0"),f.each(function(a){d3.select(this).selectAll(".data-point").remove();var f=d3.select(this).selectAll(".data-point").data(a.values);f.enter().append("g").attr("class","data-point").each(function(f){d3.select(this).append("circle").attr("cx",
function(a){return e(a.x)}).attr("cy",function(a){return c(a.y)}).attr("r",g).style("stroke-width",2).attr("fill","none").attr("stroke",d.getByKey(G(b.firstSeries().getRowByGlobalIndex(a.seriesIndex))));d3.select(this).selectAll(".error-bar").remove();h&&void 0!=f.errMinus&&void 0!=f.errPlus&&(d3.select(this).append("line").attr("x1",e(f.x)).attr("x2",e(f.x)).attr("y1",c(f.errMinus)).attr("y2",c(f.errPlus)).style("stroke",d.getByKey(G(b.firstSeries().getRowByGlobalIndex(a.seriesIndex)))).style("stroke-width",
2).attr("class","error-bar"),d3.select(this).append("line").attr("x1",e(f.x)-4).attr("x2",e(f.x)+4).attr("y1",c(f.errMinus)).attr("y2",c(f.errMinus)).style("stroke",d.getByKey(G(b.firstSeries().getRowByGlobalIndex(a.seriesIndex)))).style("stroke-width",2).attr("class","error-bar"),d3.select(this).append("line").attr("x1",e(f.x)-4).attr("x2",e(f.x)+4).attr("y1",c(f.errPlus)).attr("y2",c(f.errPlus)).style("stroke",d.getByKey(G(b.firstSeries().getRowByGlobalIndex(a.seriesIndex)))).style("stroke-width",
2).attr("class","error-bar"))});f.exit().remove()}).transition().duration(500).style("opacity","1"),f.exit().transition().duration(500).style("opacity","0").remove()):q.selectAll(".points").remove();var L={};a.forEach(function(a){a=G(b.firstSeries().getRowByGlobalIndex(a));L[a]=a});this._svg.selectAll(".chart-title").remove();this._svg.selectAll(".chart-title-color").remove();f=this._svg.selectAll(".chart-title").data(Object.keys(L));f.enter().append("text").attr("class","chart-title").attr("font-weight",
"bold").attr("y",l.margins().top()-5);f.attr("fill",function(a){return d.getByKey(a)}).text(function(a){return a});var x=0,S=[];$("#"+this.id()+" .chart-title").each(function(a){S.push(x);x+=this.getBBox().width+15});f.attr("x",function(a,b){return l.margins().left()+10+S[b]});this._svg.selectAll(".chart-title-color").data(Object.keys(L)).enter().append("circle").attr("class","chart-title-color").attr("cx",function(a,b){return l.margins().left()+4+S[b]}).attr("cy",l.margins().top()-9).attr("r",4).style("shape-rendering",
"auto").style("stroke-width","0").style("fill",function(a){return d.getByKey(a)});t!=epiviz.ui.charts.CustomSetting.DEFAULT&&(t=JSON.parse("["+t+"]"),q.selectAll(".abLine").remove(),t.forEach(function(a){q.append("svg:line").attr("class","abLine").attr("x1",0).attr("x2",l.width()-l.margins().sumAxis(epiviz.ui.charts.Axis.X)).attr("y1",c(a)).attr("y2",c(a)).style("stroke","black").style("stroke-dasharray","5, 5")}));return N};
epiviz.plugins.charts.LinePlot.prototype.colorLabels=function(){for(var a=[],b=0;b<this.colors().size()&&20>b;++b)a.push("Color "+(b+1));return a};
epiviz.plugins.charts.LinePlot.prototype.doHover=function(a){var b=this._container.find(".items"),e=b.find("> .hovered"),c=b.find("> .selected"),d=c.find("> .hovered"),f=function(){return a.overlapsWith(d3.select(this).data()[0])},b=b.find("> .item").filter(f);e.append(b);b=c.find("> .item").filter(f);d.append(b);this._svg.selectAll(".item").style("opacity",1-.7);this._svg.selectAll(".hovered .item").style("opacity",.7)};
epiviz.plugins.charts.LinePlot.prototype.doUnhover=function(){var a=this._container.find(".items"),b=a.find("> .hovered"),e=a.find("> .selected"),c=e.find("> .hovered");a.prepend(b.children());e.prepend(c.children());this._svg.selectAll(".item").style("opacity",1);this._svg.selectAll(".hovered .item").style("opacity",1)};epiviz.plugins.charts.LinePlotType=function(a){epiviz.ui.charts.PlotType.call(this,a)};epiviz.plugins.charts.LinePlotType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.PlotType.prototype);
epiviz.plugins.charts.LinePlotType.constructor=epiviz.plugins.charts.LinePlotType;epiviz.plugins.charts.LinePlotType.prototype.createNew=function(a,b,e){return new epiviz.plugins.charts.LinePlot(a,b,e)};epiviz.plugins.charts.LinePlotType.prototype.typeName=function(){return"epiviz.plugins.charts.LinePlot"};epiviz.plugins.charts.LinePlotType.prototype.chartName=function(){return"Line Plot"};epiviz.plugins.charts.LinePlotType.prototype.chartHtmlAttributeName=function(){return"line-plot"};
epiviz.plugins.charts.LinePlotType.prototype.measurementsFilter=function(){return function(a){return a.type()==epiviz.measurements.Measurement.Type.FEATURE}};epiviz.plugins.charts.LinePlotType.prototype.isRestrictedToSameDatasourceGroup=function(){return!0};
epiviz.plugins.charts.LinePlotType.prototype.customSettingsDefs=function(){return epiviz.ui.charts.PlotType.prototype.customSettingsDefs.call(this).concat([new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.COL_LABEL,epiviz.ui.charts.CustomSetting.Type.MEASUREMENTS_METADATA,"colLabel","Columns labels"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.ROW_LABEL,epiviz.ui.charts.CustomSetting.Type.MEASUREMENTS_ANNOTATION,"name","Row labels"),
new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LinePlotType.CustomSettings.SHOW_POINTS,epiviz.ui.charts.CustomSetting.Type.BOOLEAN,!1,"Show points"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LinePlotType.CustomSettings.SHOW_LINES,epiviz.ui.charts.CustomSetting.Type.BOOLEAN,!0,"Show lines"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LinePlotType.CustomSettings.SHOW_ERROR_BARS,epiviz.ui.charts.CustomSetting.Type.BOOLEAN,!0,"Show error bars"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LinePlotType.CustomSettings.POINT_RADIUS,
epiviz.ui.charts.CustomSetting.Type.NUMBER,4,"Point radius"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LinePlotType.CustomSettings.LINE_THICKNESS,epiviz.ui.charts.CustomSetting.Type.NUMBER,3,"Line thickness"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.Y_MIN,epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,"Min Y"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.Y_MAX,epiviz.ui.charts.CustomSetting.Type.NUMBER,
epiviz.ui.charts.CustomSetting.DEFAULT,"Max Y"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LinePlotType.CustomSettings.INTERPOLATION,epiviz.ui.charts.CustomSetting.Type.CATEGORICAL,"basis","Interpolation","linear step-before step-after basis basis-open basis-closed bundle cardinal cardinal-open monotone".split(" ")),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.LinePlotType.CustomSettings.ABS_LINE_VAL,epiviz.ui.charts.CustomSetting.Type.STRING,epiviz.ui.charts.CustomSetting.DEFAULT,
"Draw abline")])};epiviz.plugins.charts.LinePlotType.CustomSettings={SHOW_POINTS:"showPoints",SHOW_ERROR_BARS:"showErrorBars",SHOW_LINES:"showLines",POINT_RADIUS:"pointRadius",LINE_THICKNESS:"lineThickness",INTERPOLATION:"interpolation",ABS_LINE_VAL:"abLine"};epiviz.plugins.charts.StackedLinePlot=function(a,b,e){epiviz.ui.charts.Plot.call(this,a,b,e);this._initialize()};epiviz.plugins.charts.StackedLinePlot.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Plot.prototype);
epiviz.plugins.charts.StackedLinePlot.constructor=epiviz.plugins.charts.StackedLinePlot;epiviz.plugins.charts.StackedLinePlot.prototype._initialize=function(){epiviz.ui.charts.Plot.prototype._initialize.call(this);this._svg.classed("stacked-line-plot",!0)};
epiviz.plugins.charts.StackedLinePlot.prototype.draw=function(a,b,e,c){epiviz.ui.charts.Plot.prototype.draw.call(this,a,b,e,c);b=this._lastData;a=this._lastRange;if(!b||!a)return[];b=this.customSettingsValues()[epiviz.plugins.charts.StackedLinePlotType.CustomSettings.ROW_GROUP_BY];var d=this,f=function(){for(var a=0;a<d._markers.length;a++)if(d._markers[a]._type==epiviz.ui.charts.markers.VisualizationMarker.Type.GROUP_BY_MEASUREMENTS){var b=d._markers[a].id();delete d._markersMap[b];delete d._markersIndices[b];
delete d._markers[a];d._markers.length--}};a=function(a){if(!a)return null;var b;if(a.id()in d._markersMap){b=d._markersIndices[a.id()];var c=d._markers[b];if(c==a||c.type()==a.type()&&c.preMarkStr()==a.preMarkStr()&&c.markStr()==a.markStr())return null;d._markers[b]=a}else f(),b=d._markers.length,d._markers.push(a),d._markersIndices[a.id()]=b;d._markersMap[a.id()]=a};this.customSettingsValues()[epiviz.plugins.charts.StackedLinePlotType.CustomSettings.USE_GROUP_BY]?(b=new epiviz.ui.charts.markers.VisualizationMarker(epiviz.ui.charts.markers.VisualizationMarker.Type.GROUP_BY_MEASUREMENTS,
null,null,"function(data){return null}","function(m, data, preMarkResult) {return m.annotation()['"+b+"'];}"),a(b)):f();(function(){d.transformData(d._lastRange,d._unalteredData).done(function(){d._drawPlot(d._lastRange,d._lastData,e,c)});d._markersModified.notify(new epiviz.ui.charts.VisEventArgs(d._id,d._markers))})()};
epiviz.plugins.charts.StackedLinePlot.prototype._drawPlot=function(a,b,e,c){var d=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.ROW_LABEL];e=this.customSettingsValues()[epiviz.plugins.charts.StackedLinePlotType.CustomSettings.INTERPOLATION];c=0==e.indexOf("step")?b.measurements().length:b.measurements().length-1;var f=epiviz.ui.charts.Axis;c=d3.scale.linear().domain([0,c]).range([0,this.width()-this.margins().sumAxis(f.X)]);this._clearAxes();this._drawAxes(c,void 0,b.measurements().length,
5,void 0,void 0,void 0,void 0,void 0,void 0,b.measurements().map(function(a){return"name"==d?a.name():(a=a.annotation())&&d in a?a[d]:"<NA>"}),void 0,0==e.indexOf("step"));e=this._svg.selectAll(".lines");e.empty()&&(e=this._svg.append("g").attr("class","lines items"),f=e.append("g").attr("class","selected"),e.append("g").attr("class","hovered"),f.append("g").attr("class","hovered"));e.attr("transform","translate("+this.margins().left()+", "+this.margins().top()+")");return this._drawLines(a,b,c)};
epiviz.plugins.charts.StackedLinePlot.prototype._drawLines=function(a,b,e){var c=epiviz.ui.charts.Axis,d=this.colors(),f=this.customSettingsValues()[epiviz.plugins.charts.StackedLinePlotType.CustomSettings.INTERPOLATION],n=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.COL_LABEL],h=this.customSettingsValues()[epiviz.plugins.charts.StackedLinePlotType.CustomSettings.OFFSET],g=this.customSettingsValues()[epiviz.plugins.charts.StackedLinePlotType.CustomSettings.SCALE_TO_PERCENT],
m=this.customSettingsValues()[epiviz.plugins.charts.StackedLinePlotType.CustomSettings.HOVER_OPACITY],p=this,r=this._svg.select(".lines"),t=b.firstSeries().globalStartIndex(),l=b.firstSeries().globalEndIndex();b.foreach(function(a,b){var c=b.globalStartIndex(),d=b.globalEndIndex();c>t&&(t=c);d<l&&(l=d)});for(var q=l-t,w=epiviz.measurements.Measurement.Type.isOrdered(this.measurements().first().type()),u,v,E=0;E<q;++E){var A=E+t,K=b.firstSeries().getRowByGlobalIndex(A);K&&(!w||void 0==a.start()||void 0==
a.end()||K.start()<a.end()&&K.end()>=a.start())&&(void 0==u&&(u=A),v=A+1)}var t=u,l=v,F=epiviz.utils.range(v-u,t);if(0==F.length)return[];var z=null;g&&(z=new epiviz.measurements.MeasurementHashtable,b.measurements().forEach(function(a){var c=F.filter(function(c){return b.getByGlobalIndex(a,c)}).map(function(c){return b.getByGlobalIndex(a,c).value}).reduce(function(a,b){return a+b});z.put(a,c)}));var B=function(a){return p._globalIndexColorLabels?p._globalIndexColorLabels[a.globalIndex()]:a.metadata(n)},
H=function(a){var c=[];"step-before"==f&&c.push({x:0,y:0});var d=b.measurements(),c=c.concat(d.map(function(d,e){var f=g?z.get(d):1,f=f||1,h=b.getByGlobalIndex(d,a);return{x:c.length+e,y:h?h.value/f:null}}));"step-after"==f&&c.push({x:c.length,y:0});return c.filter(function(a){return null!==a.y})};a=F.filter(function(a){return b.firstSeries().getRowByGlobalIndex(a)}).map(function(a){var c=b.firstSeries().getRowByGlobalIndex(a),d=b.measurements();return new epiviz.ui.charts.ChartObject(sprintf("line-series-%s",
a),c.start(),c.end(),H(a),a,d.map(function(c,d){return[b.getByGlobalIndex(c,a)]}),d,"")});var q=F.map(function(a){return H(a)}),G=d3.layout.stack().offset(h)(q),I=d3.scale.linear().domain([Math.min(0,d3.min(G,function(a){return d3.min(a,function(a){return a.y0+a.y})})),d3.max(G,function(a){return d3.max(a,function(a){return a.y0+a.y})})]).range([this.height()-this.margins().sumAxis(c.Y),0]),N=d3.svg.area().x(function(a){return e(a.x)}).y0(function(a){return I(a.y0)}).y1(function(a){return I(a.y0+
a.y)}).interpolate(f),c=r.selectAll(".line-series").data(a,function(a){return a.seriesIndex});c.enter().insert("path",":first-child").attr("class","line-series item").attr("d",function(a,b){return N(G[b])}).style("opacity","0").style("shape-rendering","auto").style("fill",function(a,c){return d.getByKey(B(b.firstSeries().getRowByGlobalIndex(a.seriesIndex)))}).on("mouseover",function(a,b){p._hover.notify(new epiviz.ui.charts.VisEventArgs(p.id(),a));r.selectAll(".item").style("opacity",1-m);r.selectAll(".hovered .item").style("opacity",
m)}).on("mouseout",function(){p._unhover.notify(new epiviz.ui.charts.VisEventArgs(p.id()))});c.transition().duration(500).style("opacity","0.7").attr("d",function(a,b){return N(G[b])}).style("fill",function(a,c){return d.getByKey(B(b.firstSeries().getRowByGlobalIndex(a.seriesIndex)))});c.exit().transition().duration(500).style("opacity","0").remove();var L={};F.forEach(function(a){b.firstSeries().getByGlobalIndex(a)&&(a=B(b.firstSeries().getRowByGlobalIndex(a)),L[a]=a)});this._svg.selectAll(".chart-title").remove();
this._svg.selectAll(".chart-title-color ").remove();c=this._svg.selectAll(".chart-title").data(Object.keys(L));c.enter().append("text").attr("class","chart-title").attr("font-weight","bold").attr("y",p.margins().top()-5);c.attr("fill",function(a){return d.getByKey(a)}).text(function(a){return a});var x=0,S=[];$("#"+this.id()+" .chart-title").each(function(a){S.push(x);x+=this.getBBox().width+15});c.attr("x",function(a,b){return p.margins().left()+10+S[b]});this._svg.selectAll(".chart-title-color").data(Object.keys(L)).enter().append("circle").attr("class",
"chart-title-color").attr("cx",function(a,b){return p.margins().left()+4+S[b]}).attr("cy",p.margins().top()-9).attr("r",4).style("shape-rendering","auto").style("stroke-width","0").attr("fill",function(a){return d.getByKey(a)});return a};epiviz.plugins.charts.StackedLinePlot.prototype.colorLabels=function(){for(var a=[],b=0;b<this.colors().size()&&20>b;++b)a.push("Color "+(b+1));return a};
epiviz.plugins.charts.StackedLinePlot.prototype.doHover=function(a){var b=this.customSettingsValues()[epiviz.plugins.charts.StackedLinePlotType.CustomSettings.HOVER_OPACITY],e=this._container.find(".items"),c=e.find("> .hovered"),d=e.find("> .selected"),f=d.find("> .hovered"),n=function(){return a.overlapsWith(d3.select(this).data()[0])},e=e.find("> .item").filter(n);c.append(e);e=d.find("> .item").filter(n);f.append(e);this._svg.selectAll(".item").style("opacity",1-b);this._svg.selectAll(".hovered .item").style("opacity",
b)};epiviz.plugins.charts.StackedLinePlot.prototype.doUnhover=function(){this.customSettingsValues();var a=this._container.find(".items"),b=a.find("> .hovered"),e=a.find("> .selected"),c=e.find("> .hovered");a.prepend(b.children());e.prepend(c.children());this._svg.selectAll(".item").style("opacity",1);this._svg.selectAll(".hovered .item").style("opacity",1)};epiviz.plugins.charts.StackedLinePlotType=function(a){epiviz.ui.charts.PlotType.call(this,a)};
epiviz.plugins.charts.StackedLinePlotType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.PlotType.prototype);epiviz.plugins.charts.StackedLinePlotType.constructor=epiviz.plugins.charts.StackedLinePlotType;epiviz.plugins.charts.StackedLinePlotType.prototype.createNew=function(a,b,e){return new epiviz.plugins.charts.StackedLinePlot(a,b,e)};epiviz.plugins.charts.StackedLinePlotType.prototype.typeName=function(){return"epiviz.plugins.charts.StackedLinePlot"};
epiviz.plugins.charts.StackedLinePlotType.prototype.chartName=function(){return"Stacked Plot"};epiviz.plugins.charts.StackedLinePlotType.prototype.chartHtmlAttributeName=function(){return"stacked-line-plot"};epiviz.plugins.charts.StackedLinePlotType.prototype.measurementsFilter=function(){return function(a){return a.type()==epiviz.measurements.Measurement.Type.FEATURE}};epiviz.plugins.charts.StackedLinePlotType.prototype.isRestrictedToSameDatasourceGroup=function(){return!0};
epiviz.plugins.charts.StackedLinePlotType.prototype.customSettingsDefs=function(){return epiviz.ui.charts.PlotType.prototype.customSettingsDefs.call(this).concat([new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.COL_LABEL,epiviz.ui.charts.CustomSetting.Type.MEASUREMENTS_METADATA,"colLabel","Color by"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.ROW_LABEL,epiviz.ui.charts.CustomSetting.Type.MEASUREMENTS_ANNOTATION,"name","Labels"),
new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.StackedLinePlotType.CustomSettings.OFFSET,epiviz.ui.charts.CustomSetting.Type.CATEGORICAL,"zero","Offset",["zero","wiggle"]),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.StackedLinePlotType.CustomSettings.INTERPOLATION,epiviz.ui.charts.CustomSetting.Type.CATEGORICAL,"step-after","Interpolation","linear step-before step-after basis basis-open basis-closed bundle cardinal cardinal-open monotone".split(" ")),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.StackedLinePlotType.CustomSettings.SCALE_TO_PERCENT,
epiviz.ui.charts.CustomSetting.Type.BOOLEAN,!0,"Scale to Percent"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.StackedLinePlotType.CustomSettings.USE_GROUP_BY,epiviz.ui.charts.CustomSetting.Type.BOOLEAN,!1,"Use Group by"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.StackedLinePlotType.CustomSettings.ROW_GROUP_BY,epiviz.ui.charts.CustomSetting.Type.MEASUREMENTS_ANNOTATION,"name","Group By"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.StackedLinePlotType.CustomSettings.HOVER_OPACITY,
epiviz.ui.charts.CustomSetting.Type.NUMBER,.6,"Hover Opacity")])};epiviz.plugins.charts.StackedLinePlotType.CustomSettings={INTERPOLATION:"interpolation",OFFSET:"offset",SCALE_TO_PERCENT:"scaleToPercent",ROW_GROUP_BY:"groupBy",USE_GROUP_BY:"useGroupBy",HOVER_OPACITY:"hoverOpacity"};
epiviz.plugins.charts.PCAScatterPlot=function(a,b,e){epiviz.ui.charts.Plot.call(this,a,b,e);this._legend=this._chartContent=null;this._measurementsX=[];this._measurementsY=[];var c=this;this.measurements().foreach(function(a,b){0==b%2?c._measurementsX.push(a):c._measurementsY.push(a)});this._yLabel=this._xLabel="";for(a=0;a<Math.min(this._measurementsX.length,this._measurementsY.length);++a)0<a&&(this._xLabel+=", ",this._yLabel+=", "),this._xLabel+=this._measurementsX[a].name(),this._yLabel+=this._measurementsY[a].name();
this._colorLabels=[];this._initialize()};epiviz.plugins.charts.PCAScatterPlot.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Plot.prototype);epiviz.plugins.charts.PCAScatterPlot.constructor=epiviz.plugins.charts.PCAScatterPlot;
epiviz.plugins.charts.PCAScatterPlot.prototype._initialize=function(){epiviz.ui.charts.Plot.prototype._initialize.call(this);this._svg.classed("scatter-plot",!0);this._chartContent=this._svg.append("g").attr("class","chart-content");this._legend=this._svg.append("g").attr("class","chart-legend")};
epiviz.plugins.charts.PCAScatterPlot.prototype.draw=function(){epiviz.ui.charts.Plot.prototype.draw.call(this,void 0,void 0);this._variance_labels=this._lastData.pca_variance_explained;this.drawScatter(this._lastRange,this._lastData.data,"sample_id","PC1","PC2")};epiviz.plugins.charts.PCAScatterPlot.prototype.drawScatter=function(a,b,e,c,d){return this._drawCircles(b,c,d,e)};
epiviz.plugins.charts.PCAScatterPlot.prototype._drawCircles=function(a,b,e,c){var d=this,f=epiviz.ui.charts.Axis,n=Math.max(1,this.customSettingsValues()[epiviz.plugins.charts.PCAScatterPlotType.CustomSettings.CIRCLE_RADIUS_RATIO]*Math.min(this.width(),this.height())),h=Math.max(Math.floor(n),1),g=this.margins(),m=this.width(),p=this.height(),r=this.customSettingsValues()[epiviz.plugins.charts.PCAScatterPlotType.CustomSettings.AB_LINE],t=epiviz.ui.charts.CustomSetting,l=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.Y_MIN],
q=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.Y_MAX],w=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.X_MIN],u=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.X_MAX],v=this.customSettingsValues()[epiviz.plugins.charts.PCAScatterPlotType.CustomSettings.COLOR_BY];w==t.DEFAULT&&(w=this._measurementsX[0].minValue());l==t.DEFAULT&&(l=this._measurementsY[0].minValue());u==t.DEFAULT&&(u=this._measurementsX[0].maxValue());
q==t.DEFAULT&&(q=this._measurementsY[0].maxValue());var E=d3.scale.linear().domain([w,u]).range([0,m-g.sumAxis(f.X)]).nice(),A=d3.scale.linear().domain([l,q]).range([p-g.sumAxis(f.Y),0]).nice();this._clearAxes(this._chartContent);this._drawAxes(E,A,15,15,this._chartContent);for(var K={},t=[],F=1,z=0;z<a.length;++z){var B=a[z][b],H=a[z][e];if(B&&H){var G=sprintf("item data-series-%s",0),I=E(B),N=A(H),I=Math.floor(I/h)*h,N=Math.floor(N/h)*h,L=null;K[N]&&K[N][I]?(L=K[N][I],L.id+="_"+a[z][c],L.values[0]=
(L.values[0]*L.valueItems[0].length+B)/(L.valueItems[0].length+1),L.values[1]=(L.values[1]*L.valueItems[1].length+H)/(L.valueItems[1].length+1),L.valueItems[0].push(a[z]),L.valueItems[1].push(a[z]),L.valueItems[0].length>F&&(F=L.valueItems[0].length)):(L=new epiviz.ui.charts.ChartIndexObject(sprintf("scatter_%s_%s_%s_%s",B,H,0,a[z][c]),[c],a[z][c],[B,H],[[a[z]],[a[z]]],[b,e],0,G),K[N]||(K[N]={}),K[N][I]=L,t.push(L))}}var x=this._chartContent.select(".items");x.empty()&&(x=this._chartContent.append("g").attr("class",
"items"),a=x.append("g").attr("class","selected"),x.append("g").attr("class","hovered"),a.append("g").attr("class","hovered"));a=x.selectAll("circle").data(t,function(a){return a.id});a.enter().insert("circle",":first-child").attr("id",function(a){return sprintf("%s-item-%s",d.id(),a.seriesIndex)}).style("opacity",0).style("fill-opacity",0).attr("r",0);a.each(function(a){var b=d3.select(this),c=d.colors().getByKey(a.valueItems[0][0][v]);null!=d._globalIndexColorLabels&&-1==d._globalIndexColorLabels.indexOf(a.valueItems[0][0][v])&&
d._globalIndexColorLabels.push(a.valueItems[0][0][v]);b.attr("cx",g.left()+(a.values[0]-w)*(m-g.sumAxis(f.X))/(u-w)).attr("cy",p-g.bottom()-(a.values[1]-l)*(p-g.sumAxis(f.Y))/(q-l)).attr("class",a.cssClasses).style("fill",c)});a.transition().duration(1E3).style("fill-opacity",function(a){return Math.max(.6,a.valueItems[0].length/F)}).style("opacity",null).attr("r",n);a.exit().transition().duration(1E3).style("opacity",0).attr("r",0).remove();a.on("click",function(a){console.log("click");d._deselect.notify(new epiviz.ui.charts.VisEventArgs(d.id()));
d._select.notify(new epiviz.ui.charts.VisEventArgs(d.id(),a));d3.event.stopPropagation()});if(this._globalIndexColorLabels){n={};for(j=firstGlobalIndex;j<lastGlobalIndex;++j)n[this._globalIndexColorLabels[j]]=this._globalIndexColorLabels[j];this._colorLabels=Object.keys(n);this._svg.selectAll(".chart-title").remove();this._svg.selectAll(".chart-title-color ").remove();n=this._svg.selectAll(".chart-title").data(this._colorLabels);n.enter().append("text").attr("class","chart-title").attr("font-weight",
"bold").attr("y",d.margins().top()-5);n.attr("fill",function(a,b){return d.colors().getByKey(a)}).text(function(a){return a});var S=0,D=[];$("#"+this.id()+" .chart-title").each(function(a){D.push(S);S+=this.getBBox().width+15});n.attr("x",function(a,b){return d.margins().left()+10+D[b]});this._svg.selectAll(".chart-title-color").data(this._colorLabels).enter().append("circle").attr("class","chart-title-color").attr("cx",function(a,b){return d.margins().left()+4+D[b]}).attr("cy",d.margins().top()-
9).attr("r",4).style("shape-rendering","auto").style("stroke-width","0").attr("fill",function(a,b){return d.colors().getByKey(a)}).style("stroke-width",0)}else{n=Math.min(this._measurementsX.length,this._measurementsY.length);a=Array(n);for(j=0;j<n;++j)a[j]=sprintf("%s vs %s",this._measurementsX[j].name(),this._measurementsY[j].name());this._colorLabels=a}this._colorLabels=[];var J=[];this.measurements().foreach(function(a,b){var c=a.annotation()[v];-1===J.indexOf(c)&&J.push(c)});this._svg.selectAll(".chart-title").remove();
this._svg.selectAll(".chart-title-color ").remove();n=this._svg.selectAll(".chart-title").data(J);n.enter().append("text").attr("class","chart-title").attr("font-weight","bold").attr("y",d.margins().top()-5);n.attr("fill",function(a,b){return d.colors().getByKey(a)}).text(function(a){return a});S=0;D=[];$("#"+this.id()+" .chart-title").each(function(a){D.push(S);S+=this.getBBox().width+15});n.attr("x",function(a,b){return d.margins().left()+10+D[b]});this._svg.selectAll(".chart-title-color").data(J).enter().append("circle").attr("class",
"chart-title-color").attr("cx",function(a,b){return d.margins().left()+4+D[b]}).attr("cy",d.margins().top()-9).attr("r",4).style("shape-rendering","auto").style("stroke-width","0").attr("fill",function(a,b){return d.colors().getByKey(a)}).style("stroke-width",0);r!=epiviz.ui.charts.CustomSetting.DEFAULT&&(r=JSON.parse("["+r+"]"),x.selectAll(".abLine").remove(),r.forEach(function(a){x.append("svg:line").attr("class","abLine").attr("x1",g.left()).attr("x2",g.left()+(m-g.sumAxis(f.X))).attr("y1",p-g.bottom()-
(a-l)*(p-g.sumAxis(f.Y))/(q-l)).attr("y2",p-g.bottom()-(a-l)*(p-g.sumAxis(f.Y))/(q-l)).style("stroke","black").style("stroke-dasharray","5, 5")}));return t};epiviz.plugins.charts.PCAScatterPlot.prototype.colorLabels=function(){return this._colorLabels};
epiviz.plugins.charts.PCAScatterPlot.prototype._drawAxes=function(a,b,e,c,d,f,n,h){epiviz.ui.charts.Plot.prototype._drawAxes.call(this,a,b,e,c,d,f,n,h);var g=this;this._legend.selectAll("text").remove();g=this;this._legend.selectAll(".x-measurement").remove();this._legend.selectAll(".x-measurement-color").remove();a=this._legend.selectAll(".x-measurement").data(["pca1"]).enter().append("text").attr("class","x-measurement").attr("font-weight","bold").attr("fill",function(a,b){return g._globalIndexColorLabels?
"#000000":g.colors().get(b)}).attr("y",this.height()-this.margins().bottom()+35).text(function(a,b){return a+" (% Variance Explained = "+g._variance_labels[0]+")"});var m=0,p=[];$("#"+this.id()+" .x-measurement").each(function(a){p.push(m);m+=this.getBBox().width+15});a.attr("x",function(a,b){return.5*(g.width()-m)+7+p[b]});this._legend.selectAll(".y-measurement").remove();this._legend.selectAll(".y-measurement-color").remove();a=this._legend.selectAll(".y-measurement").data(["pca2"]).enter().append("text").attr("class",
"y-measurement").attr("font-weight","bold").attr("fill",function(a,b){return g._globalIndexColorLabels?"#000000":g.colors().get(b)}).attr("y",this.margins().left()-35).attr("transform","rotate(-90)").text(function(a,b){return a+" (% Variance Explained = "+g._variance_labels[1]+")"});var r=0,t=[];$("#"+this.id()+" .y-measurement").each(function(a){t.push(r);r+=this.getBBox().width+15});a.attr("x",function(a,b){return-g.height()+.5*(g.height()-r)+12+g.margins().top()+t[b]})};
epiviz.plugins.charts.PCAScatterPlot.prototype.transformData=function(a,b){void 0!=a&&(this._lastRange=a);void 0!=b&&(this._unalteredData=this._lastData=b);var e=new epiviz.deferred.Deferred;e.resolve();return e};epiviz.plugins.charts.PCAScatterPlotType=function(a){epiviz.ui.charts.PlotType.call(this,a)};epiviz.plugins.charts.PCAScatterPlotType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.PlotType.prototype);epiviz.plugins.charts.PCAScatterPlotType.constructor=epiviz.plugins.charts.PCAScatterPlotType;
epiviz.plugins.charts.PCAScatterPlotType.prototype.createNew=function(a,b,e){return new epiviz.plugins.charts.PCAScatterPlot(a,b,e)};epiviz.plugins.charts.PCAScatterPlotType.prototype.typeName=function(){return"epiviz.plugins.charts.PCAScatterPlot"};epiviz.plugins.charts.PCAScatterPlotType.prototype.chartName=function(){return"PCA Scatter Plot"};epiviz.plugins.charts.PCAScatterPlotType.prototype.chartHtmlAttributeName=function(){return"pca_scatter"};
epiviz.plugins.charts.PCAScatterPlotType.prototype.measurementsFilter=function(){return function(a){return epiviz.measurements.Measurement.Type.hasValues(a.type())}};epiviz.plugins.charts.PCAScatterPlotType.prototype.isRestrictedToSameDatasourceGroup=function(){return!0};epiviz.plugins.charts.PCAScatterPlotType.prototype.minSelectedMeasurements=function(){return 2};
epiviz.plugins.charts.PCAScatterPlotType.prototype.customSettingsDefs=function(){return epiviz.ui.charts.PlotType.prototype.customSettingsDefs.call(this).concat([new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.PCAScatterPlotType.CustomSettings.CIRCLE_RADIUS_RATIO,epiviz.ui.charts.CustomSetting.Type.NUMBER,.015,"Circle radius ratio"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.X_MIN,epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,
"Min X"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.X_MAX,epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,"Max X"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.Y_MIN,epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,"Min Y"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.Y_MAX,epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,
"Max Y"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.PCAScatterPlotType.CustomSettings.COLOR_BY,epiviz.ui.charts.CustomSetting.Type.MEASUREMENTS_ANNOTATION,"name","Color By"),new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.PCAScatterPlotType.CustomSettings.AB_LINE,epiviz.ui.charts.CustomSetting.Type.STRING,epiviz.ui.charts.CustomSetting.DEFAULT,"Draw Abline")])};
epiviz.plugins.charts.PCAScatterPlotType.CustomSettings={CIRCLE_RADIUS_RATIO:"circleRadiusRatio",COLOR_BY:"colorBy",AB_LINE:"abLine"};
epiviz.plugins.charts.DiversityScatterPlot=function(a,b,e){epiviz.ui.charts.Plot.call(this,a,b,e);this._dispatch=d3.dispatch("hover","click");this._legend=this._chartContent=null;this._measurementsX=[];this._measurementsY=[];var c=this;this.measurements().foreach(function(a,b){0==b%2?c._measurementsX.push(a):c._measurementsY.push(a)});this._yLabel=this._xLabel="";for(a=0;a<Math.min(this._measurementsX.length,this._measurementsY.length);++a)0<a&&(this._xLabel+=", ",this._yLabel+=", "),this._xLabel+=
this._measurementsX[a].name(),this._yLabel+=this._measurementsY[a].name();this._colorLabels=[];this._initialize()};epiviz.plugins.charts.DiversityScatterPlot.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Plot.prototype);epiviz.plugins.charts.DiversityScatterPlot.constructor=epiviz.plugins.charts.DiversityScatterPlot;
epiviz.plugins.charts.DiversityScatterPlot.prototype._initialize=function(){epiviz.ui.charts.Plot.prototype._initialize.call(this);this._svg.classed("scatter-plot",!0);this._chartContent=this._svg.append("g").attr("class","chart-content");this._legend=this._svg.append("g").attr("class","chart-legend")};
epiviz.plugins.charts.DiversityScatterPlot.prototype.draw=function(){epiviz.ui.charts.Plot.prototype.draw.call(this,void 0,void 0);this.drawScatter(this._lastRange,this._lastData.data,"sample_id",this._xLabel,"alphaDiversity")};
epiviz.plugins.charts.DiversityScatterPlot.prototype.drawScatter=function(a,b,e,c,d){this.xTag=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.ROW_LABEL];a=this._measurementsX[0].annotation();this._measurementsX=[];a=new epiviz.measurements.Measurement(this.xTag,this.xTag,"feature","ihmp","ihmp","ihmp",null,null,a,-1,1,[]);this._measurementsX.push(a);return this._drawCircles(b,this.xTag,d,e)};
epiviz.plugins.charts.DiversityScatterPlot.prototype._drawCircles=function(a,b,e,c){function d(a){a.sort(d3.ascending);var b=d3.quantile(a,.25);a=d3.quantile(a,.75);return[b,a]}var f=this,n=epiviz.ui.charts.Axis,h=Math.max(1,this.customSettingsValues()[epiviz.plugins.charts.DiversityScatterPlotType.CustomSettings.CIRCLE_RADIUS_RATIO]*Math.min(this.width(),this.height())),g=Math.max(Math.floor(h),1),m=this.margins(),p=this.width(),r=this.height(),t=epiviz.ui.charts.CustomSetting,l=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.Y_MIN],
q=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.Y_MAX],w=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.X_MIN],u=this.customSettingsValues()[epiviz.ui.charts.Visualization.CustomSettings.X_MAX];l==t.DEFAULT&&(l=this._measurementsY[0].minValue());q==t.DEFAULT&&(q=this._measurementsY[0].maxValue());var v=[];a.forEach(function(a){v.push(a[b])});var E=[];v.forEach(function(a){-1==E.indexOf(a)&&E.push(a)});this.xTickValues=E;a.forEach(function(a){var c=
E.indexOf(a[b]);a._xVal=c+1});var A=0,K=[];E.forEach(function(a){K[A]=[];K[A][0]=A;K[A][1]=[];A++});a.forEach(function(a){var c=E.indexOf(a[b]);K[c][1].push(a[e])});w==t.DEFAULT&&(w=0);u==t.DEFAULT&&(u=E.length+1);var t=d3.scale.linear().domain([w,u]).range([0,p-m.sumAxis(n.X)]),F=d3.scale.linear().domain([l,q]).range([r-m.sumAxis(n.Y),0]);this._clearAxes(this._chartContent);xLabelsPadded=[""];E.forEach(function(a){xLabelsPadded.push(a)});this._drawAxes(t,F,xLabelsPadded.length,15,this._chartContent,
p,r,m,void 0,void 0,xLabelsPadded,void 0,void 0);for(var z={},B=[],H=1,G=0;G<a.length;++G){var I=a[G]._xVal,N=a[G][e];if(I&&N){var L=sprintf("item data-series-%s",0),x=t(I),S=F(N),x=Math.floor(x/g)*g,S=Math.floor(S/g)*g,D=null;z[S]&&z[S][x]?(D=z[S][x],D.id+="_"+a[G][c],D.values[0]=(D.values[0]*D.valueItems[0].length+I)/(D.valueItems[0].length+1),D.values[1]=(D.values[1]*D.valueItems[1].length+N)/(D.valueItems[1].length+1),D.valueItems[0].push(a[G]),D.valueItems[1].push(a[G]),D.valueItems[0].length>
H&&(H=D.valueItems[0].length)):(D=new epiviz.ui.charts.ChartIndexObject(sprintf("scatter_%s_%s_%s_%s",I,N,0,a[G][c]),[c],a[G][c],[I,N],[[a[G]],[a[G]]],["_xVal",e],0,L),z[S]||(z[S]={}),z[S][x]=D,B.push(D))}}G=this._chartContent.select(".items");G.empty()&&(G=this._chartContent.append("g").attr("class","items"),a=G.append("g").attr("class","selected"),G.append("g").attr("class","hovered"),a.append("g").attr("class","hovered"));a=G.selectAll("circle").data(B,function(a){return a.id});a.enter().insert("circle",
":first-child").attr("id",function(a){return sprintf("%s-item-%s",f.id(),a.seriesIndex)}).style("opacity",0).style("fill-opacity",0).attr("r",0);a.each(function(a){var b=d3.select(this),c=f.colors().get(a.seriesIndex);b.attr("cx",m.left()+(a.values[0]-w)*(p-m.sumAxis(n.X))/(u-w)).attr("cy",r-m.bottom()-(a.values[1]-l)*(r-m.sumAxis(n.Y))/(q-l)).attr("class",a.cssClasses).style("fill",c)});a.transition().duration(1E3).style("fill-opacity",function(a){return Math.max(.6,a.valueItems[0].length/H)}).style("opacity",
null).attr("r",h);a.exit().transition().duration(1E3).style("opacity",0).attr("r",0).remove();a.on("click",function(a){f._deselect.notify(new epiviz.ui.charts.VisEventArgs(f.id()));f._select.notify(new epiviz.ui.charts.VisEventArgs(f.id(),a));f._dispatch.click(f.id(),null);d3.event.stopPropagation()});if(this._globalIndexColorLabels){h={};for(j=firstGlobalIndex;j<lastGlobalIndex;++j)h[this._globalIndexColorLabels[j]]=this._globalIndexColorLabels[j];this._colorLabels=Object.keys(h);this._svg.selectAll(".chart-title").remove();
this._svg.selectAll(".chart-title-color ").remove();h=this._svg.selectAll(".chart-title").data(this._colorLabels);h.enter().append("text").attr("class","chart-title").attr("font-weight","bold").attr("y",f.margins().top()-5);h.attr("fill",function(a,b){return f.colors().getByKey(a)}).text(function(a){return a});var J=0,V=[];$("#"+this.id()+" .chart-title").each(function(a){V.push(J);J+=this.getBBox().width+15});h.attr("x",function(a,b){return f.margins().left()+10+V[b]});this._svg.selectAll(".chart-title-color").data(this._colorLabels).enter().append("circle").attr("class",
"chart-title-color").attr("cx",function(a,b){return f.margins().left()+4+V[b]}).attr("cy",f.margins().top()-9).attr("r",4).style("shape-rendering","auto").style("stroke-width","0").attr("fill",function(a,b){return f.colors().getByKey(a)}).style("stroke-width",0)}else{h=Math.min(this._measurementsX.length,this._measurementsY.length);a=Array(h);for(j=0;j<h;++j)a[j]=sprintf("%s vs %s",this._measurementsX[j].name(),this._measurementsY[j].name());this._colorLabels=a}h=G;h.selectAll(".iqr-range").remove();
h.selectAll(".whisker").remove();for(G=0;G<K.length;G++){a=K[G][1];c=[];c=d(a);g=1.5*(c[1]-c[0]);z=0;I=a.length-1;for(j=0;j<a.length;j++)if(a[j]<c[0]-g)z=j;else break;for(k=a.length-1;0<k;k--)if(a[k]>c[1]+g)I=k;else break;h.append("rect").attr("id","0").attr("class","iqr-range").style("opacity",1).style("fill-opacity",.2).attr("x",m.left()+(.6+K[G][0]-w)*(p-m.sumAxis(n.X))/(u-w)).attr("y",r-m.bottom()-(c[1]-l)*(r-m.sumAxis(n.Y))/(q-l)).attr("width",t(.8)).attr("height",Math.abs(F(c[1])-F(c[0]))).attr("fill",
"#1E90FF");h.append("line").style("stroke","gray").attr("class","whisker").attr("x1",m.left()+(1+K[G][0]-w)*(p-m.sumAxis(n.X))/(u-w)).attr("y1",r-m.bottom()-(c[1]-l)*(r-m.sumAxis(n.Y))/(q-l)).attr("x2",m.left()+(1+K[G][0]-w)*(p-m.sumAxis(n.X))/(u-w)).attr("y2",r-m.bottom()-(a[I]-l)*(r-m.sumAxis(n.Y))/(q-l));h.append("line").style("stroke","gray").attr("class","whisker").attr("x1",m.left()+(1+K[G][0]-w)*(p-m.sumAxis(n.X))/(u-w)).attr("y1",r-m.bottom()-(c[0]-l)*(r-m.sumAxis(n.Y))/(q-l)).attr("x2",m.left()+
(1+K[G][0]-w)*(p-m.sumAxis(n.X))/(u-w)).attr("y2",r-m.bottom()-(a[z]-l)*(r-m.sumAxis(n.Y))/(q-l));h.append("line").style("stroke","gray").attr("class","whisker").attr("x1",m.left()+(.6+K[G][0]-w)*(p-m.sumAxis(n.X))/(u-w)).attr("y1",r-m.bottom()-(a[I]-l)*(r-m.sumAxis(n.Y))/(q-l)).attr("x2",m.left()+(1.4+K[G][0]-w)*(p-m.sumAxis(n.X))/(u-w)).attr("y2",r-m.bottom()-(a[I]-l)*(r-m.sumAxis(n.Y))/(q-l));h.append("line").style("stroke","gray").attr("class","whisker").attr("x1",m.left()+(.6+K[G][0]-w)*(p-m.sumAxis(n.X))/
(u-w)).attr("y1",r-m.bottom()-(a[z]-l)*(r-m.sumAxis(n.Y))/(q-l)).attr("x2",m.left()+(1.4+K[G][0]-w)*(p-m.sumAxis(n.X))/(u-w)).attr("y2",r-m.bottom()-(a[z]-l)*(r-m.sumAxis(n.Y))/(q-l))}return B};epiviz.plugins.charts.DiversityScatterPlot.prototype.colorLabels=function(){return this._colorLabels};
epiviz.plugins.charts.DiversityScatterPlot.prototype._drawAxesOld=function(a,b,e,c,d,f,n,h){epiviz.ui.charts.Visualization.prototype._drawAxes(a,b,e,c,d,f,n,h,void 0,void 0,this.xTickValues,void 0,void 0);this._legend.selectAll("text").remove();a=this._measurementsX;var g=this;this._legend.selectAll(".x-measurement").remove();this._legend.selectAll(".x-measurement-color").remove();b=this._legend.selectAll(".x-measurement").data(a).enter().append("text").attr("class","x-measurement").attr("font-weight",
"bold").attr("fill",function(a,b){return g._globalIndexColorLabels?"#000000":g.colors().get(b)}).attr("y",this.height()-this.margins().bottom()+35).text(function(a,b){return a.name()});var m=0,p=[];$("#"+this.id()+" .x-measurement").each(function(a){p.push(m);m+=this.getBBox().width+15});b.attr("x",function(a,b){return.5*(g.width()-m)+7+p[b]});this._legend.selectAll(".x-measurement-color").data(a).enter().append("circle").attr("class","x-measurement-color").attr("cx",function(a,b){return.5*(g.width()-
m)+1+p[b]}).attr("cy",this.height()-this.margins().bottom()+31).attr("r",4).style("shape-rendering","auto").style("stroke-width","0").style("fill",function(a,b){return g._globalIndexColorLabels?"#ffffff":g.colors().get(b)});a=["alphaDiversity"];this._legend.selectAll(".y-measurement").remove();this._legend.selectAll(".y-measurement-color").remove();b=this._legend.selectAll(".y-measurement").data(a).enter().append("text").attr("class","y-measurement").attr("font-weight","bold").attr("fill",function(a,
b){return g._globalIndexColorLabels?"#000000":g.colors().get(b)}).attr("y",this.margins().left()-35).attr("transform","rotate(-90)").text(function(a,b){return a});var r=0,t=[];$("#"+this.id()+" .y-measurement").each(function(a){t.push(r);r+=this.getBBox().width+15});b.attr("x",function(a,b){return-g.height()+.5*(g.height()-r)+12+g.margins().top()+t[b]});this._legend.selectAll(".y-measurement-color").data(a).enter().append("circle").attr("class","y-measurement-color").attr("cx",function(a,b){return-g.height()+
.5*(g.height()-r)+6+g.margins().top()+t[b]}).attr("cy",this.margins().left()-39).attr("transform","rotate(-90)").attr("r",4).style("shape-rendering","auto").style("stroke-width","0").style("fill",function(a,b){return g._globalIndexColorLabels?"#ffffff":g.colors().get(b)})};epiviz.plugins.charts.DiversityScatterPlot.prototype.transformData=function(a,b){void 0!=a&&(this._lastRange=a);void 0!=b&&(this._unalteredData=this._lastData=b);var e=new epiviz.deferred.Deferred;e.resolve();return e};
epiviz.plugins.charts.DiversityScatterPlotType=function(a){epiviz.ui.charts.PlotType.call(this,a)};epiviz.plugins.charts.DiversityScatterPlotType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.PlotType.prototype);epiviz.plugins.charts.DiversityScatterPlotType.constructor=epiviz.plugins.charts.DiversityScatterPlotType;epiviz.plugins.charts.DiversityScatterPlotType.prototype.createNew=function(a,b,e){return new epiviz.plugins.charts.DiversityScatterPlot(a,b,e)};
epiviz.plugins.charts.DiversityScatterPlotType.prototype.typeName=function(){return"epiviz.plugins.charts.DiversityScatterPlot"};epiviz.plugins.charts.DiversityScatterPlotType.prototype.chartName=function(){return"Diversity Box Plot"};epiviz.plugins.charts.DiversityScatterPlotType.prototype.chartHtmlAttributeName=function(){return"diversity_scatter"};epiviz.plugins.charts.DiversityScatterPlotType.prototype.measurementsFilter=function(){return function(a){return epiviz.measurements.Measurement.Type.hasValues(a.type())}};
epiviz.plugins.charts.DiversityScatterPlotType.prototype.isRestrictedToSameDatasourceGroup=function(){return!0};epiviz.plugins.charts.DiversityScatterPlotType.prototype.minSelectedMeasurements=function(){return 2};
epiviz.plugins.charts.DiversityScatterPlotType.prototype.customSettingsDefs=function(){return epiviz.ui.charts.PlotType.prototype.customSettingsDefs.call(this).concat([new epiviz.ui.charts.CustomSetting(epiviz.plugins.charts.DiversityScatterPlotType.CustomSettings.CIRCLE_RADIUS_RATIO,epiviz.ui.charts.CustomSetting.Type.NUMBER,.015,"Circle radius ratio"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.ROW_LABEL,epiviz.ui.charts.CustomSetting.Type.MEASUREMENTS_ANNOTATION,
"name","Row labels"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.X_MIN,epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,"Min X"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.X_MAX,epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,"Max X"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.Y_MIN,epiviz.ui.charts.CustomSetting.Type.NUMBER,
epiviz.ui.charts.CustomSetting.DEFAULT,"Min Y"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.Visualization.CustomSettings.Y_MAX,epiviz.ui.charts.CustomSetting.Type.NUMBER,epiviz.ui.charts.CustomSetting.DEFAULT,"Max Y")])};epiviz.plugins.charts.DiversityScatterPlotType.CustomSettings={CIRCLE_RADIUS_RATIO:"circleRadiusRatio"};epiviz.ui.charts.tree.NodeSelectionType={NONE:0,LEAVES:1,NODE:2};
epiviz.ui.charts.tree.Node=function(a,b,e,c,d,f,n,h,g,m,p,r,t,l){epiviz.ui.charts.VisObject.call(this);this.id=a;this.name=b;this.children=e;this.parentId=c;this.size=d;this.depth=f;this.nchildren=n;this.nleaves=h;this.selectionType=g||epiviz.ui.charts.tree.NodeSelectionType.NONE;this.order=m;this.globalDepth=p;this.taxonomy=r;this.start=t;this.end=l};epiviz.ui.charts.tree.Node.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.VisObject.prototype);epiviz.ui.charts.tree.Node.constructor=epiviz.ui.charts.tree.Node;
epiviz.ui.charts.tree.Node.prototype.getMetadata=function(a,b,e){return 0!=a||0!=b||"lineage"!=e?null:this.id};epiviz.ui.charts.tree.Node.prototype.metadataColumns=function(){return["lineage"]};epiviz.ui.charts.tree.Node.prototype.dimensions=function(){return[1,1]};epiviz.ui.charts.tree.Node.prototype.metadataLooseCompare=function(){return!0};epiviz.ui.charts.tree.Node.dfs=function(a,b){a&&(b(a)||a.children&&a.children.forEach(function(a){epiviz.ui.charts.tree.Node.dfs(a,b)}))};
epiviz.ui.charts.tree.Node.bfs=function(a,b){if(a){var e=[];e.push(a);for(var c=0;c<e.length&&!b(e[c]);++c)e[c].nchildren&&e[c].children.forEach(function(a){e.push(a)})}};epiviz.ui.charts.tree.Node.filter=function(a,b){if(!b(a))return null;var e={},c;for(c in a)a.hasOwnProperty(c)&&"children"!=c&&(e[c]=a[c]);a.children&&(e.children=[],a.children.forEach(function(a){a=epiviz.ui.charts.tree.Node.filter(a,b);null!==a&&e.children.push(a)}));return e};
epiviz.ui.charts.tree.UiNode=function(a,b,e,c,d,f,n,h,g,m,p,r,t,l,q,w,u,v,E){epiviz.ui.charts.tree.Node.call(this,a,b,e,c,d,f,n,h,g,m,p,r,v,E);this.x=t;this.dx=l;this.y=q;this.dy=w;this.parent=u||null};epiviz.ui.charts.tree.UiNode.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.tree.Node.prototype);epiviz.ui.charts.tree.UiNode.constructor=epiviz.ui.charts.tree.UiNode;
epiviz.ui.charts.tree.UiNode.deepCopy=function(a){var b=new epiviz.ui.charts.tree.UiNode(a.id,a.name,[],a.parentId,a.size,a.depth,a.nchildren,a.nleaves,a.selectionType,a.order,a.globalDepth,a.taxonomy,a.x,a.dx,a.y,a.dy,null,a.start,a.end);a.children&&a.children.length&&a.children.forEach(function(a){a=epiviz.ui.charts.tree.UiNode.deepCopy(a);b.children.push(a);a.parent=b});return b};
epiviz.ui.charts.tree.Sunburst=function(a,b,e){epiviz.ui.charts.Visualization.call(this,a,b,e);this._partition=d3.layout.partition().value(function(a){return a.nleaves});this._x=d3.scale.linear().range([0,2*Math.PI]);this._y=this._radius=null;var c=this;this._arc=d3.svg.arc().startAngle(function(a){return Math.max(0,Math.min(2*Math.PI,c._x(a.x)))}).endAngle(function(a){return Math.max(0,Math.min(2*Math.PI,c._x(a.x+a.dx)))}).innerRadius(function(a){return Math.max(0,c._y(a.y))}).outerRadius(function(a){return Math.max(0,
c._y(a.y+a.dy))});this._animationDelay=750;this._oldUiDataMap=this._rootDepth=this._oldRootDepth=this._subtreeDepth=this._oldSubtreeDepth=this._uiData=null;this._uiDataMap={};this._selectedNode=this._referenceNode=null;this._initialize()};epiviz.ui.charts.tree.Sunburst.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.Visualization.prototype);epiviz.ui.charts.tree.Sunburst.constructor=epiviz.ui.charts.tree.Sunburst;
epiviz.ui.charts.tree.Sunburst.prototype._initialize=function(){epiviz.ui.charts.Visualization.prototype._initialize.call(this);this._radius=.5*Math.min(this.width(),this.height());this._y=d3.scale.pow().exponent(1.2).range([0,this._radius])};
epiviz.ui.charts.tree.Sunburst.prototype.draw=function(a){epiviz.ui.charts.Visualization.prototype.draw.call(this,a);var b=this;a?(this._oldRootDepth=this._rootDepth,this._rootDepth=a.depth,this._referenceNode=null,this._selectedNode=this._uiDataMap[a.id],this._uiData=this._partition.nodes(a),this._oldSubtreeDepth=this._subtreeDepth,this._subtreeDepth=0,this._oldUiDataMap=this._uiDataMap,this._uiDataMap={},this._uiData.forEach(function(a){b._uiDataMap[a.id]=a;b._referenceNode&&b._referenceNode.x||
!(a.id in b._oldUiDataMap)||(b._referenceNode=a);b._subtreeDepth<a.depth+1&&(b._subtreeDepth=a.depth+1)}),this._referenceNode||(this._referenceNode=this._uiData[0]),null==this._oldSubtreeDepth&&(this._oldSubtreeDepth=this._subtreeDepth),null==this._oldRootDepth&&(this._oldRootDepth=this._rootDepth)):a=this._lastData;var e=this.width(),c=this.height(),d=this._svg.select(".sunburst-canvas");d.empty()&&(d=this._svg.append("g").attr("class","sunburst-canvas").attr("transform",sprintf("translate(%s,%s) rotate(180)",
.5*e,.5*c)));if(a)return a=d.selectAll("g").data(this._uiData,function(a){return a.id}),e=a.enter().append("g").on("click",function(a){b._select.notify(new epiviz.ui.charts.VisEventArgs(b.id(),a))}),e.append("path").attr("id",function(a){return b.id()+"-"+a.id}).attr("class","node-arc").style("fill",function(a){return b.colors().getByKey((a.children&&a.children.length?a:a.parent).id)}),e.append("text").attr("class","unselectable-text node-label").append("textPath").attr("xlink:href",function(a){return"#"+
b.id()+"-"+a.id}).attr("dx","6").attr("dy",".35em").attr("startOffset",20).text(function(a){return a.name}),d.selectAll("g").selectAll("path").transition().duration(this._animationDelay).attrTween("d",function(a){return b._nodeArcTween(a)}),d.selectAll("g").selectAll("text").transition().duration(this._animationDelay).attrTween("transform",function(a){return b._nodeLabelTransformTween(a)}).each(function(a){d3.select(this.childNodes[0]).transition().duration(b._animationDelay).attrTween("startOffset",
function(a){return b._nodeLabelStartOffsetTween(a)})}),a.exit().selectAll("text").transition().duration(this._animationDelay).style("opacity",0),a.exit().transition().delay(this._animationDelay).remove(),this._uiData};
epiviz.ui.charts.tree.Sunburst.prototype._nodeTween=function(a){var b=this._oldUiDataMap[a.id],e=this._uiDataMap[a.id];if(!b&&!e)return function(b){return a};var c,d;b||(b=e.depth+this._rootDepth-this._oldRootDepth,c=0>b,d=0>b||b>=this._subtreeDepth,b=c?0:Math.min(1,b/this._oldSubtreeDepth),b={x:d?e.x:e.x<=this._referenceNode.x?0:1,dx:c?1:d?e.dx:0,y:b,dy:d?0:e.y+e.dy-b});e||(e=b.depth-this._rootDepth+this._oldRootDepth,c=0>e,d=0>e||e>=this._subtreeDepth,e=c?0:Math.min(1,e/this._subtreeDepth),e={x:d?
b.x:b.x<=this._selectedNode.x?0:1,dx:c?1:d?b.dx:0,y:e,dy:d?0:b.y+b.dy-e});var f=d3.interpolate(b.x,e.x),n=d3.interpolate(b.dx,e.dx),h=d3.interpolate(b.y,e.y),g=d3.interpolate(b.dy,e.dy);return function(a){return{x:f(a),dx:n(a),y:h(a),dy:g(a)}}};epiviz.ui.charts.tree.Sunburst.prototype._nodeArcTween=function(a){var b=this,e=this._nodeTween(a);return function(a){return b._arc(e(a))}};
epiviz.ui.charts.tree.Sunburst.prototype._nodeLabelTransformTween=function(a){var b=this,e=this._nodeTween(a);return function(a){a=e(a);var d=b._x(a.x+(1==a.dx?0:a.dx)/2),f=(b._y(a.y+a.dy)-b._y(a.y))/2,n=Math.cos(d)*f,d=Math.sin(d)*f;return"rotate("+(1==a.dx?180:0)+") translate("+-d+","+n+")"}};epiviz.ui.charts.tree.Sunburst.prototype._nodeLabelStartOffsetTween=function(a){var b=this,e=this._nodeTween(a);return function(a){a=e(a);return b._y(a.y+a.dy)*b._x(a.dx/2)}};
epiviz.ui.charts.tree.Sunburst.prototype._nodeLabelTransform=function(a){var b=1==a.dx?0:a.dx,e=this._y(a.y),c=this._y(a.y+a.dy),b=this._x(a.x+b/2),c=(c-e)/2,e=Math.cos(b)*c,b=Math.sin(b)*c;return"rotate("+(1==a.dx?180:0)+") translate("+-b+","+e+")"};epiviz.ui.charts.tree.Sunburst.prototype._nodeLabelStartOffset=function(a){return this._y(a.y+a.dy)*this._x(a.dx/2)};
epiviz.ui.charts.tree.Icicle=function(a,b,e){epiviz.ui.charts.tree.HierarchyVisualization.call(this,a,b,e);this._animationDelay=750;this._dragging=!1;this._charWidth=10;this._nodeMargin=3;this._nodeBorder=1;this._iconSize=16;this._yScale=this._xScale=null;this._rowAllLevelWidth=this._rowCtrlWidth=50;this._legendX=null;this._initialize()};epiviz.ui.charts.tree.Icicle.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.tree.HierarchyVisualization.prototype);epiviz.ui.charts.tree.Icicle.constructor=epiviz.ui.charts.tree.Icicle;
epiviz.ui.charts.tree.Icicle.prototype._initialize=function(){epiviz.ui.charts.tree.HierarchyVisualization.prototype._initialize.call(this);this._svg.classed("icicle",!0);this._legend=this._svg.append("g").attr("class","chart-legend")};
epiviz.ui.charts.tree.Icicle.prototype.draw=function(a,b){var e=epiviz.ui.charts.tree.HierarchyVisualization.prototype.draw.call(this,a,b),c=this;this.customSettingsValues();this.customSettingsValues();this.customSettingsValues();var d=this.customSettingsValues()[epiviz.ui.charts.tree.IcicleType.CustomSettings.ICICLE_ROOT];c.colors()._keyIndices={};c.colors()._nKeys=0;var f=epiviz.ui.charts.Axis;b||(b=this._lastData);c._lastRoot=b;var n=this.width(),h=this.height();this._xScale=d3.scale.linear().range([this._rowCtrlWidth,
n-this.margins().sumAxis(f.X)-this._rowAllLevelWidth]);this._yScale=d3.scale.linear().range([0,h-this.margins().sumAxis(f.Y)]);this._drawAxes(b);var g=this._svg.select(".items"),m=this._svg.select(".defs");if(g.empty()){var g=this._svg.append("g").attr("class","items"),p=g.append("g").attr("class","selected");g.append("g").attr("class","hovered");p.append("g").attr("class","hovered")}m.empty()&&(m=this._svg.select("defs").append("g").attr("class","defs"));g.attr("transform",sprintf("translate(%s,%s)",
this.margins().left(),this.margins().top()));m.attr("transform",sprintf("translate(%s,%s)",this.margins().left(),this.margins().top()));if(!b)return[];var r=function(a){a=c._getOldNode(a);return Math.max(0,c._xScale(a.x+a.dx)-c._xScale(a.x)-2*c._nodeBorder)},t=function(a){a=c._getOldNode(a);return Math.max(0,c._yScale(a.y+a.dy)-c._yScale(a.y)-2*c._nodeBorder)},l=function(a){return c._xScale(c._getOldNode(a).x)+c._nodeBorder},q=function(a){return h-c._yScale(c._getOldNode(a).y)-t(a)-c.margins().sumAxis(f.Y)+
c._nodeBorder},w=function(a){a=c._getNewNode(a);return Math.max(0,c._xScale(a.x+a.dx)-c._xScale(a.x)-2*c._nodeBorder)},u=function(a){a=c._getNewNode(a);return Math.max(0,c._yScale(a.y+a.dy)-c._yScale(a.y)-2*c._nodeBorder)},v=function(a){return c._xScale(c._getNewNode(a).x)+c._nodeBorder},E=function(a){return h-c._yScale(c._getNewNode(a).y)-u(a)-c.margins().sumAxis(f.Y)+c._nodeBorder},A=function(a,b,c){var d=null;e.forEach(function(b){var e=v(b);E(b);var f=w(b);u(b);e<=a&&a<e+f&&b.globalDepth==c&&
(d=b)});return d},K=null,F=d3.behavior.drag().origin(function(a){return{x:0,y:0}}).on("dragstart",function(a){c._svg.selectAll(".item").sort(function(b,c){return b.id!=a.id?-1:1})}).on("drag",function(a){c._dragging=!0;d3.select(this).attr("transform","translate("+d3.event.x+","+d3.event.y+")");var b=d3.mouse(c._svg[0][0]);(b=A(b[0],b[1],a.globalDepth))&&b.parentId==a.parentId&&(K=b,c._svg.selectAll(".item").classed("selected",!1).classed("dragstart",!0),c._svg.select("#"+c.id()+"-"+a.id).classed("selected",
!0).classed("dragstart",!1),c._svg.select("#"+c.id()+"-"+b.id).classed("selected",!0).classed("dragstart",!1))}).on("dragend",function(d){if(c._dragging){c._svg.selectAll(".item").classed("selected",!1).classed("dragstart",!1);d3.select(this).attr("transform",null);var e=d3.mouse(c._svg[0][0]),f=K;if(f&&f.parentId==d.parentId&&f.id!=d.id){var g=c._uiDataMap[d.parentId],h=v(f),l=w(f),m=c._calcNodeOrder(f),n=!1;e[0]>=h+.5*l&&(n=!0);var p=null,q;g.children.forEach(function(a){var b=c._calcNodeOrder(a);
if(n&&b>m&&(void 0==q||b<q)||!n&&b<m&&(void 0==q||b>q))p=a,q=b});e=p||n?!p&&n?m+1:.5*(m+q):m-1;c.nodesOrder()[d.id]=e;c.autoPropagateChanges()?c.firePropagateHierarchyChanges():setTimeout(function(){c.draw(a,b)},0)}}}),p=g.selectAll(".item").data(e,function(a){return a.id}),z=m.selectAll("clipPath").data(e,function(a){return a.id}),F=p.enter().append("g").attr("id",function(a){return c.id()+"-"+a.id}).attr("class",function(a){var b=c.selectedNodes()[a.id];void 0==b&&(b=a.selectionType||0);return"item "+
epiviz.ui.charts.tree.HierarchyVisualization.SELECTION_CLASSES[b]}).on("click",function(a){if(c._dragging)c._dragging=!1;else{if(c.selectMode()){var b=c._getNewNode(a);a.selectionType=b.selectionType=c.selectNode(b)}else c._customSettingsValues.icicleRoot=a.id,c._customSettingsChanged.notify(new epiviz.ui.charts.VisEventArgs(c._id,c._customSettingsValues)),c.onRequestHierarchy().notify(new epiviz.ui.charts.VisEventArgs(c.id(),new epiviz.ui.controls.VisConfigSelection(void 0,void 0,c.datasourceGroup(),
c.dataprovider(),void 0,void 0,void 0,a.id)));d3.event.stopPropagation()}}).on("mouseover",function(a){c._hover.notify(new epiviz.ui.charts.VisEventArgs(c.id(),a));7>w(a)/c._charWidth&&d3.select(this).append("text").attr("class","hoverText").text(function(a){return a.name}).attr("x",function(a){a=v(a);a<2*c._rowCtrlWidth&&(a+=c._rowCtrlWidth);a>n-c._rowCtrlWidth&&(a-=c._rowCtrlWidth/2);return a}).attr("y",function(a){return E(a)+u(a)/3});c.notifyAggregateNode(a)}).on("mouseout",function(){c._unhover.notify(new epiviz.ui.charts.VisEventArgs(c.id()));
d3.select(this).selectAll(".hoverText").remove()}).call(F);z.enter().append("clipPath").attr("id",function(a){return c.id()+"-clip-"+a.id}).append("rect").attr("x",function(a){return l(a)+c._nodeMargin}).attr("y",function(a){return q(a)+c._nodeMargin}).attr("width",function(a){return Math.max(0,r(a)-2*c._nodeMargin)}).attr("height",function(a){return Math.max(0,t(a)-2*c._nodeMargin)});F.append("rect").attr("x",l).attr("y",q).attr("width",r).attr("height",t);F.append("text").attr("class","unselectable-text node-label").attr("clip-path",
function(a){return"url(#"+c.id()+"-clip-"+a.id+")"}).style("visibility",function(a){return 7>w(a)/c._charWidth&&a.depth>c._levelsTaxonomy.length/2?"hidden":"visible"}).text(function(a){if(a.id==b.id)return c._rootLineageLabel;var d=r(a)/c._charWidth;return d<a.name.length-3?a.name.substring(0,d)+"...":a.name}).attr("x",function(a){return l(a)+.5*r(a)}).attr("y",function(a){return q(a)+.5*t(a)});F.append("circle").attr("class","icon-bg").attr("cx",function(a){return l(a)+c._nodeMargin+.5*c._iconSize}).attr("cy",
function(a){return q(a)+t(a)-c._nodeMargin-.5*c._iconSize}).attr("r",.5*c._iconSize+2).style("fill","#ffffff").style("opacity",0);F.append("svg:foreignObject").attr("class","icon-container").attr("clip-path",function(a){return"url(#"+c.id()+"-clip-"+a.id+")"}).attr("width",this._iconSize).attr("height",this._iconSize).attr("x",function(a){return l(a)+c._nodeMargin}).attr("y",function(a){return q(a)+t(a)-c._nodeMargin-c._iconSize}).append("xhtml:span").attr("class","unselectable-text icon").on("mouseover",
function(a){d3.select(d3.select(this).node().parentNode.parentNode).select(".icon-bg").style("opacity",.3)}).on("mouseout",function(a){d3.select(d3.select(this).node().parentNode.parentNode).select(".icon-bg").style("opacity",0)}).on("mousedown",function(a){d3.event.stopPropagation()}).on("click",function(a){var b=c._getNewNode(a);b.selectionType=a.selectionType;b.selectionType=c.selectNode(b);c._customSettingsValues.nodeSel=JSON.stringify(c._selectedNodes);a.selectionType=b.selectionType;c._customSettingsChanged.notify(new epiviz.ui.charts.VisEventArgs(c._id,
c._customSettingsValues));d3.event.stopPropagation()});m.selectAll("rect").transition().duration(this._animationDelay).attr("x",function(a){return v(a)+c._nodeMargin}).attr("y",function(a){return E(a)+c._nodeMargin}).attr("width",function(a){return Math.max(0,w(a)-2*c._nodeMargin)}).attr("height",function(a){return Math.max(0,u(a)-2*c._nodeMargin)});g.selectAll(".item").attr("class",function(a){var b=c.selectedNodes()[a.id];void 0==b&&(b=a.selectionType||0);return"item "+epiviz.ui.charts.tree.HierarchyVisualization.SELECTION_CLASSES[b]});
g.selectAll(".item").selectAll("rect").transition().duration(this._animationDelay).style("fill",function(a){return c.colors().getByKey(a.taxonomy)}).attr("x",v).attr("y",E).attr("width",w).attr("height",u);g.selectAll(".item").selectAll(".node-label").transition().duration(this._animationDelay).attr("x",function(a){return v(a)+.5*w(a)}).attr("y",function(a){return E(a)+.5*u(a)}).style("visibility",function(a){return 7>w(a)/c._charWidth&&a.depth>c._levelsTaxonomy.length/2?"hidden":"visible"}).tween("text",
function(a){var d=d3.interpolate(r(a),w(a));return function(e){a.id==b.id?this.textContent=c._rootLineageLabel:(e=Math.round(d(e)/c._charWidth),this.textContent=e<a.name.length-3?a.name.substring(0,e)+"...":a.name)}});g.selectAll(".item").selectAll(".icon-bg").transition().duration(this._animationDelay).style("visibility",function(a){return 20>w(a)?"hidden":"visible"}).attr("cx",function(a){return v(a)+c._nodeMargin+.5*c._iconSize}).attr("cy",function(a){return E(a)+u(a)-c._nodeMargin-.5*c._iconSize});
g.selectAll(".item").selectAll(".icon-container").transition().duration(this._animationDelay).style("visibility",function(a){return 20>w(a)?"hidden":"visible"}).attr("x",function(a){return v(a)+c._nodeMargin}).attr("y",function(a){return E(a)+u(a)-c._nodeMargin-c._iconSize});p.exit().selectAll(".node-label").transition().duration(this._animationDelay).attr("x",function(a){return v(a)+.5*w(a)}).attr("y",function(a){return E(a)+.5*u(a)});p.exit().selectAll(".node-label-lineage").transition().duration(this._animationDelay).attr("x",
function(a){return v(a)+.5*w(a)}).attr("y",function(a){return E(a)+.7*u(a)});p.exit().transition().delay(this._animationDelay).remove();this._drawRowControls(b);0==this._firstRun&&(this._firstRun++,c.onRequestHierarchy().notify(new epiviz.ui.charts.VisEventArgs(c.id(),new epiviz.ui.controls.VisConfigSelection(void 0,void 0,c.datasourceGroup(),c.dataprovider(),void 0,void 0,void 0,d))),this.firePropagateHierarchyChanges());return e};
epiviz.ui.charts.tree.Icicle.prototype._updateChartLocation=function(a,b){this._propagateIcicleLocationChanges.notify({start:a,width:b});this._lastRange=new epiviz.datatypes.GenomicRange("NA",a,b)};epiviz.ui.charts.tree.Icicle.prototype._updateLocation=function(a,b){this._lastRange=new epiviz.datatypes.GenomicRange("NA",a,b)};
epiviz.ui.charts.tree.Icicle.prototype._drawAxes=function(a){if(a){this._legend.selectAll("*").remove();var b=this,e=b.margins().top()-23,c=b._lastRange;if(null!=c){var d=function(){if(0==m.length||0==p.length)if(0<m.length){var a=m[0][0],c=m[m.length-1][1];b._updateChartLocation(a,c-a);b._drawAxes(b._lastRoot)}else 0<p.length&&(a=p[0][0],c=p[p.length-1][1],b._updateChartLocation(a,c-a),b._drawAxes(b._lastRoot));else c=m[m.length-1][1],a=p[0][0],b._updateChartLocation(a,c-a),b._drawAxes(b._lastRoot)},
f=c.start(),n=c.end(),h=[],g=[],m=[],p=[],r=parseInt(b.selCutLevel);a.globalDepth<=r&&a.globalDepth+b._subtreeDepth-1>=r||(r=a.globalDepth+this._subtreeDepth-1);this._uiData.forEach(function(a){if(a.globalDepth==r){if(f<=a.start||f>=a.start&&f<a.end)h.push(a.x),m.push([a.start,a.end]);if(n>=a.end||n>a.start&&n<=a.end)g.push(a.x+a.dx),p.push([a.start,a.end])}});if(0==h.length)a=this._legend.append("g").on("click",function(a){d();d3.event.stopPropagation()}),a.append("rect").attr("x",b.margins().left()+
this._rowCtrlWidth/3-1).attr("y",e).attr("rx",5).attr("ry",5).attr("height",17).attr("width",this._rowCtrlWidth/3-2).attr("fill-opacity",.3).attr("fill","gray"),a=a.append("svg:foreignObject").attr("class","icon-container").attr("x",b.margins().left()-5+this._rowCtrlWidth/3-1+.5*(this._rowCtrlWidth/3-2)).attr("y",e+17/3-4).attr("height",17).attr("width",this._rowCtrlWidth/3-2),a.append("xhtml:span").attr("class","unselectable-text fa fa-exchange").attr("fill-opacity",.5).style("color","black"),this._legend.append("svg:line").attr("x1",
b._rowCtrlWidth+b.margins().left()+5).attr("y1",e+8.5).attr("x2",b.width()-b.margins().left()-5-b._rowAllLevelWidth).attr("y2",e+8.5).attr("fill-opacity",.5).style("stroke","grey").style("stroke-width",3).attr("stroke-dasharray","10,10"),this._legend.append("polyline").style("stroke","grey").style("fill","none").style("stroke-width",2).style("stroke-linejoin","round").attr("fill-opacity",.5).attr("points",Math.round(b._rowCtrlWidth+b.margins().left()+5)-3+","+(e+8.5-7)+" "+(Math.round(b._rowCtrlWidth+
b.margins().left()+5)-3)+","+(e+8.5)+" "+(Math.round(b._rowCtrlWidth+b.margins().left()+5)-3)+","+(e+8.5+7)),this._legend.append("polyline").style("stroke","grey").style("fill","none").style("stroke-width",2).style("stroke-linejoin","round").attr("fill-opacity",.5).attr("points",Math.round(b.width()-b.margins().left()-5-b._rowAllLevelWidth)-5+","+(e+8.5-7)+" "+(Math.round(b.width()-b.margins().left()-5-b._rowAllLevelWidth)+3)+","+(e+8.5)+" "+(Math.round(b.width()-b.margins().left()-5-b._rowAllLevelWidth)-
5)+","+(e+8.5+7));else if(0==g.length)a=this._legend.append("g").on("click",function(a){d();d3.event.stopPropagation()}),a.append("rect").attr("x",b.margins().left()+this._rowCtrlWidth/3-1).attr("y",e).attr("rx",5).attr("ry",5).attr("height",17).attr("width",this._rowCtrlWidth/3-2).attr("fill-opacity",.3).attr("fill","gray"),a=a.append("svg:foreignObject").attr("class","icon-container").attr("x",b.margins().left()-5+this._rowCtrlWidth/3-1+.5*(this._rowCtrlWidth/3-2)).attr("y",e+17/3-4).attr("height",
17).attr("width",this._rowCtrlWidth/3-2),a.append("xhtml:span").attr("class","unselectable-text fa fa-exchange").attr("fill-opacity",.5).style("color","black"),this._legend.append("svg:line").attr("x1",b._rowCtrlWidth+b.margins().left()+5).attr("y1",e+8.5).attr("x2",b.width()-b.margins().left()-5-b._rowAllLevelWidth).attr("y2",e+8.5).attr("fill-opacity",.5).style("stroke","grey").style("stroke-width",3).attr("stroke-dasharray","10,10"),this._legend.append("polyline").style("stroke","grey").style("fill",
"none").style("stroke-width",2).style("stroke-linejoin","round").attr("fill-opacity",.5).attr("points",Math.round(b._rowCtrlWidth+b.margins().left()+5)+3+","+(e+8.5-7)+" "+(Math.round(b._rowCtrlWidth+b.margins().left()+5)-5)+","+(e+8.5)+" "+(Math.round(b._rowCtrlWidth+b.margins().left()+5)+3)+","+(e+8.5+7)),this._legend.append("polyline").style("stroke","grey").style("fill","none").style("stroke-width",2).style("stroke-linejoin","round").attr("fill-opacity",.5).attr("points",Math.round(b.width()-
b.margins().left()-5-b._rowAllLevelWidth)+3+","+(e+8.5-7)+" "+(Math.round(b.width()-b.margins().left()-5-b._rowAllLevelWidth)+3)+","+(e+8.5)+" "+(Math.round(b.width()-b.margins().left()-5-b._rowAllLevelWidth)+3)+","+(e+8.5+7));else{var t=function(a,c,d,e){a=b._xScale.invert(a);c=b._xScale.invert(c);var f=[],g=[],h=0,l=0;b._uiData.forEach(function(d){d.depth==b._rootDepth&&(h=d.start,l=d.end);d.depth==r&&(a>=d.x&&a<d.x+d.dx&&f.push(d.start),c>d.x&&c<=d.x+d.dx&&g.push(d.end))});d=Math.max.apply(Math,
f);e=Math.min.apply(Math,g);Number.isFinite(d)||(d=h);Number.isFinite(e)||(e=l);b._updateChartLocation(d,e-d);b._drawAxes(b._lastRoot)};a=this._legend.append("g").on("click",function(a){0!=m.length&&0!=p.length&&(a=m[0][0]-1,b._updateChartLocation(a,p[p.length-1][0]-a),b._drawAxes(b._lastRoot));d3.event.stopPropagation()});a.append("rect").attr("x",b.margins().left()).attr("y",e).attr("class","item").attr("rx",5).attr("ry",5).attr("height",17).attr("width",this._rowCtrlWidth/3-2).attr("fill-opacity",
.3).attr("fill","gray");a.append("svg:foreignObject").attr("class","icon-container").attr("x",b.margins().left()-4+.5*(this._rowCtrlWidth/3-2)).attr("y",e+17/3-4).attr("height",17).attr("width",this._rowCtrlWidth/3-2).append("xhtml:span").attr("class","unselectable-text fa fa-arrow-left").attr("fill-opacity",.5).style("color","black");a=this._legend.append("g").attr("class","ctr-select").on("click",function(a){d();d3.event.stopPropagation()});a.append("rect").attr("x",b.margins().left()+this._rowCtrlWidth/
3-1).attr("y",e).attr("rx",5).attr("ry",5).attr("height",17).attr("width",this._rowCtrlWidth/3-2).attr("fill-opacity",.3).attr("fill","gray");a=a.append("svg:foreignObject").attr("class","icon-container").attr("x",b.margins().left()-5+this._rowCtrlWidth/3-1+.5*(this._rowCtrlWidth/3-2)).attr("y",e+17/3-4).attr("height",17).attr("width",this._rowCtrlWidth/3-2);a.append("xhtml:span").attr("class","unselectable-text fa fa-exchange").attr("fill-opacity",.5).style("color","black");a=this._legend.append("g").on("click",
function(a){0!=m.length&&0!=p.length&&(a=m[0][1],b._updateChartLocation(a,p[p.length-1][1]+1-a),b._drawAxes(b._lastRoot));d3.event.stopPropagation()});a.append("rect").attr("x",b.margins().left()+2*(this._rowCtrlWidth/3-1)).attr("y",e).attr("rx",5).attr("ry",5).attr("height",17).attr("width",this._rowCtrlWidth/3-2).attr("fill-opacity",.3).attr("fill","gray");a.append("svg:foreignObject").attr("class","icon-container").attr("x",b.margins().left()-5+2*(this._rowCtrlWidth/3-1)+.5*(this._rowCtrlWidth/
3-2)).attr("y",e+17/3-4).attr("height",17).attr("width",this._rowCtrlWidth/3-2).append("xhtml:span").attr("class","unselectable-text fa fa-arrow-right").attr("fill-opacity",.5).style("color","black");a=b._xScale(Math.min.apply(Math,h))+this.margins().left()+5;var l=b._xScale(Math.max.apply(Math,g))+this.margins().left()-5-a,c=d3.behavior.drag().origin(Object).on("drag",function(a){u.attr("x",a.x=Math.max(b._rowCtrlWidth+b.margins().left(),Math.min(b.width()-b.margins().left()-l-b._rowAllLevelWidth,
d3.event.x)));v.attr("x",function(a){return a.x-4});E.attr("x",function(a){return a.x+l-4})}).on("dragend",function(a){t(a.x,a.x+l,"drag",a)}),q=d3.behavior.drag().origin(Object).on("drag",function(a){var c=Math.max(a.x+4,Math.min(b.width()-b.margins().left()-b._rowAllLevelWidth,a.x+l+d3.event.dx));l=c-a.x;E.attr("x",c-4);u.attr("width",l)}).on("dragend",function(a){t(a.x,a.x+l,"dragright",a)}),w=d3.behavior.drag().origin(Object).on("drag",function(a){var c=a.x;a.x=Math.max(b._rowCtrlWidth+b.margins().left(),
Math.min(a.x+l-4,d3.event.x));l+=c-a.x;v.attr("x",function(a){return a.x-4});u.attr("x",function(a){return a.x}).attr("width",l)}).on("dragend",function(a){t(a.x,a.x+l-5,"dragleft",a)});this._legend.data([{x:a,y:e}]);this._legend.append("line").attr("x1",b._rowCtrlWidth+b.margins().left()+5).attr("y1",e+8.5).attr("x2",b.width()-b.margins().left()-5-b._rowAllLevelWidth).attr("y2",e+8.5).attr("fill-opacity",.5).style("stroke","grey").style("stroke-width",3);this._legend.append("polyline").style("stroke",
"grey").style("fill","none").style("stroke-width",2).style("stroke-linejoin","round").attr("fill-opacity",.5).attr("points",Math.round(b._rowCtrlWidth+b.margins().left()+5)-3+","+(e+8.5-7)+" "+(Math.round(b._rowCtrlWidth+b.margins().left()+5)-3)+","+(e+8.5)+" "+(Math.round(b._rowCtrlWidth+b.margins().left()+5)-3)+","+(e+8.5+7));this._legend.append("polyline").style("stroke","grey").style("fill","none").style("stroke-width",2).style("stroke-linejoin","round").attr("fill-opacity",.5).attr("points",
Math.round(b.width()-b.margins().left()-5-b._rowAllLevelWidth)+3+","+(e+8.5-7)+" "+(Math.round(b.width()-b.margins().left()-5-b._rowAllLevelWidth)+3)+","+(e+8.5)+" "+(Math.round(b.width()-b.margins().left()-5-b._rowAllLevelWidth)+3)+","+(e+8.5+7));var u=this._legend.append("rect").attr("id","active").attr("x",function(a){return a.x}).attr("y",function(a){return a.y}).attr("height",17).attr("width",l).attr("fill-opacity",.5).attr("cursor","move").call(c),v=this._legend.append("rect").attr("x",function(a){return a.x-
4}).attr("y",function(a){return a.y+1}).attr("id","dragleft").attr("width",8).attr("height",15).attr("fill","red").attr("fill-opacity",.5).attr("cursor","ew-resize").call(w),E=this._legend.append("rect").attr("x",function(a){return a.x+l-4}).attr("y",function(a){return a.y+1}).attr("id","dragright").attr("width",8).attr("height",15).attr("fill","red").attr("fill-opacity",.5).attr("cursor","ew-resize").call(q)}}}};
epiviz.ui.charts.tree.Icicle.prototype._drawRowControls=function(a){var b=this;b.height();var e=function(a,c){return b._yScale((c+1)/m)-b._yScale(c/m)-2},c=function(a,c){return b._rowCtrlWidth-2},d=function(a,c){return b._yScale((m-c-1)/m)+1},f=function(a,b){return 1},n=function(a,b){var d=e(a,b)-3,f=c(a,b)-3;return Math.min(d,f)/2-5},h=this._svg.select(".row-ctrls");h.empty()&&(h=this._svg.append("g").attr("class","row-ctrls"));h.attr("transform",sprintf("translate(%s,%s)",this.margins().left(),
this.margins().top()));h.selectAll(".row-ctrl").remove();var g=this.levelsTaxonomy(),m=g.length,g=h.selectAll(".row-ctrl").data(g),p=g.enter().append("g").attr("id",function(a){return b.id()+"-"+a}).style("opacity",0).attr("class",function(c,d){return a.globalDepth+d>=Object.keys(b._selectedLevels)[0]?"row-ctrl "+epiviz.ui.charts.tree.HierarchyVisualization.SELECTION_CLASSES[2]:"row-ctrl "+epiviz.ui.charts.tree.HierarchyVisualization.SELECTION_CLASSES[1]});p.transition().duration(this._animationDelay).style("opacity",
1);g.exit().transition().duration(this._animationDelay).style("opacity",0).remove();p.append("path").attr("class","rowCtrlPath").style("fill",function(a){return b.colors().getByKey(a)});var r=d3.svg.line().x(function(a){return a.x}).y(function(a){return a.y}).interpolate("linear");h.selectAll(".row-ctrl").select("path.rowCtrlPath").attr("d",function(a,b){var g=e(a,b),h=c(a,b),m=f(a,b),n=d(a,b),p=[],n=n+2;p.push({x:m,y:n});p.push({x:m,y:n+g});p.push({x:m+h,y:n+g});p.push({x:m+h,y:n});p.push({x:m,y:n});
return r(p)}).attr("stroke","none");p.append("text").attr("class","rotatetext-rowCtrl").text(function(a){return a.charAt(0).toUpperCase()}).style("font-size",17).attr("text-anchor","middle").style("font-weight","bolder").attr("transform",function(a,b){var f=c(a,b)/2+1-n(a,b)*Math.cos(265),g=d(a,b)+7*e(a,b)/12-n(a,b)*Math.sin(265);return"translate("+f+","+g+") rotate(-30)"});p.append("circle").attr("class","icon-bg").style("fill","#ffffff").style("opacity",.5);h.selectAll(".icon-bg").transition().duration(this._animationDelay).attr("cx",
function(a,b){return c(a,b)/2+1}).attr("cy",function(a,b){return d(a,b)+7*e(a,b)/12}).attr("r",n);p.append("svg:foreignObject").attr("class","icon-container").attr("width",function(a,b){return 2*n(a,b)}).attr("height",function(a,b){return 2*n(a,b)}).append("xhtml:span").attr("class","unselectable-text icon large-icon");h.selectAll(".icon-container").style("visibility",function(a,b){return 2*n(a,b)+13<c(a,b)?"hidden":"visible"}).transition().duration(this._animationDelay).attr("x",function(a,b){return f(a,
b)+c(a,b)/2-n(a,b)+5}).attr("y",function(a,b){return d(a,b)+7*e(a,b)/12-n(a,b)+5});g.on("mouseover",function(a,b){d3.select(this).style("opacity",.8)}).on("mouseout",function(a){d3.select(this).style("opacity",1)}).on("mousedown",function(a){d3.select(this).style("opacity",.7)}).on("mouseup",function(a){d3.select(this).style("opacity",.8)}).on("click",function(c,d){b.selectLevel(a.globalDepth+d);b._customSettingsValues.aggLevel=a.globalDepth+d;b._customSettingsChanged.notify(new epiviz.ui.charts.VisEventArgs(b._id,
b._customSettingsValues));d3.event.stopPropagation()});b.height();var t=b._allLevels.length,e=function(a,c){return b._yScale((c+1)/t)-b._yScale(c/t)-2},c=function(a,c){return b._rowCtrlWidth-2},d=function(a,c){return b._yScale((t-c-1)/t)+1},f=function(a,b){return 1},n=function(a,b){var d=e(a,b)-3,f=c(a,b)-3;return Math.min(d,f)/2-5},h=this._svg.select(".row-ctrls-levels");h.empty()&&(h=this._svg.append("g").attr("class","row-ctrls-levels"));h.attr("transform",sprintf("translate(%s,%s)",this.width()-
this.margins().left()-this._rowAllLevelWidth,this.margins().top()));h.selectAll(".row-ctrl-level").remove();g=this._allLevels;m=g.length;g=h.selectAll(".row-ctrl-level").data(g);p=g.enter().append("g").style("opacity",0).attr("class","row-ctrl-level custom-select");p.transition().duration(this._animationDelay).style("opacity",function(a){return-1!=b.levelsTaxonomy().indexOf(a)?1:.2});g.exit().transition().duration(this._animationDelay).style("opacity",function(a){return-1!=b.levelsTaxonomy().indexOf(a)?
1:.5}).remove();p.append("rect").style("fill",function(a){return b.colors().getByKey(a)});h.selectAll(".row-ctrl-level").select("rect").attr("x",f).attr("width",c).attr("rx",5).attr("ry",5).transition().duration(this._animationDelay).attr("y",d).attr("height",e).style("fill",function(a){return b.colors().getByKey(a)});p.append("text").attr("class","rotatetext-rowCtrl").text(function(a){return a.charAt(0).toUpperCase()}).style("font-size",17).attr("text-anchor","middle").style("font-weight","bolder").attr("transform",
function(a,b){var f=c(a,b)/2+1,g=d(a,b)+2*e(a,b)/3;return"translate("+f+","+g+") "});h.selectAll(".icon-container").style("visibility",function(a,b){return 2*n(a,b)+13<c(a,b)?"hidden":"visible"}).transition().duration(this._animationDelay).attr("x",function(a,b){return f(a,b)+c(a,b)/2-n(a,b)+5}).attr("y",function(a,b){return d(a,b)+7*e(a,b)/12-n(a,b)+5})};
epiviz.ui.charts.tree.Icicle.prototype.doHover=function(a){var b=this.customSettingsValues()[epiviz.ui.charts.tree.IcicleType.CustomSettings.HOVER_OPACITY],e=this;if(!this._dragging){var c=this._svg.select(".items");c.classed("unhovered",!0);c.selectAll(".item").filter(function(b){if(b instanceof epiviz.ui.charts.tree.UiNode){var c=a.overlapsWith(b);c&&2==b.selectionType&&e.hoverHierarchy(b);return c}return!1}).classed("hovered",!0);c.selectAll(".item").sort(function(b,c){return b instanceof epiviz.ui.charts.tree.UiNode?
a.overlapsWith(b)?1:-1:-1});a instanceof epiviz.ui.charts.tree.UiNode&&this.hoverHierarchy(a);this._svg.selectAll(".item rect").style("fill-opacity",1-b);this._svg.selectAll(".item.hovered rect").style("fill-opacity",b)}};
epiviz.ui.charts.tree.Icicle.prototype.doUnhover=function(){this.customSettingsValues();this._dragging||(this._svg.select(".items").classed("unhovered",!1),this._svg.select(".items").selectAll(".item").classed("hovered",!1),this._svg.selectAll(".item.hovered rect").style("fill-opacity",1),this._svg.selectAll(".item rect").style("fill-opacity",1))};
epiviz.ui.charts.tree.Icicle.prototype.doSelect=function(a){this._svg.select(".items").selectAll(".item").filter(function(b){return a.overlapsWith(b)}).classed("selected",!0)};epiviz.ui.charts.tree.Icicle.prototype.doDeselect=function(){this._svg.select(".items").selectAll(".selected").classed("selected",!1)};
epiviz.ui.charts.tree.Icicle.prototype.hoverHierarchy=function(a){function b(a){c.selectAll(".item").filter(function(b){return b instanceof epiviz.ui.charts.tree.UiNode?a.overlapsWith(b):!1}).classed("hovered",!0);0!=a.children.length&&a.children.forEach(function(a){b(a)})}function e(a){c.selectAll(".item").filter(function(b){return b instanceof epiviz.ui.charts.tree.UiNode?a.overlapsWith(b):!1}).classed("hovered",!0);null!=a.parent&&e(a.parent)}var c=this._svg.select(".items");b(a);e(a)};
epiviz.ui.charts.tree.Icicle.prototype.notifyAggregateNode=function(a){function b(a){2==a.selectionType&&e._hover.notify(new epiviz.ui.charts.VisEventArgs(e.id(),a));null!=a.parent&&b(a.parent)}var e=this;null!=a.parent&&b(a.parent)};epiviz.ui.charts.tree.IcicleType=function(a){epiviz.ui.charts.DataStructureVisualizationType.call(this,a)};epiviz.ui.charts.tree.IcicleType.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.tree.HierarchyVisualizationType.prototype);
epiviz.ui.charts.tree.IcicleType.constructor=epiviz.ui.charts.tree.IcicleType;epiviz.ui.charts.tree.IcicleType.prototype.createNew=function(a,b,e){return new epiviz.ui.charts.tree.Icicle(a,b,e)};epiviz.ui.charts.tree.IcicleType.prototype.typeName=function(){return"epiviz.ui.charts.tree.Icicle"};epiviz.ui.charts.tree.IcicleType.prototype.chartName=function(){return"Navigation Control"};epiviz.ui.charts.tree.IcicleType.prototype.chartHtmlAttributeName=function(){return"icicle"};
epiviz.ui.charts.tree.IcicleType.prototype.customSettingsDefs=function(){return epiviz.ui.charts.DataStructureVisualizationType.prototype.customSettingsDefs.call(this).concat([new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.tree.IcicleType.CustomSettings.HOVER_OPACITY,epiviz.ui.charts.CustomSetting.Type.NUMBER,.9,"Hover Opacity"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.tree.IcicleType.CustomSettings.AGG_LEVEL,epiviz.ui.charts.CustomSetting.Type.STRING,"","Agg Level"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.tree.IcicleType.CustomSettings.NODE_SEL,
epiviz.ui.charts.CustomSetting.Type.STRING,"{}","Node Selection"),new epiviz.ui.charts.CustomSetting(epiviz.ui.charts.tree.IcicleType.CustomSettings.ICICLE_ROOT,epiviz.ui.charts.CustomSetting.Type.STRING,"","Current Root of the tree")])};epiviz.ui.charts.tree.IcicleType.CustomSettings={HOVER_OPACITY:"hoverOpacity",AGG_LEVEL:"aggLevel",NODE_SEL:"nodeSel",ICICLE_ROOT:"icicleRoot"};epiviz.ui.charts.tree.decoration={};
epiviz.ui.charts.tree.decoration.TogglePropagateSelectionButton=function(a,b){epiviz.ui.charts.decoration.VisualizationDecoration.call(this,a,b);this._checked=this.isChartOptionButton=!0};epiviz.ui.charts.tree.decoration.TogglePropagateSelectionButton.prototype=epiviz.utils.mapCopy(epiviz.ui.charts.decoration.VisualizationDecoration.prototype);epiviz.ui.charts.tree.decoration.TogglePropagateSelectionButton.constructor=epiviz.ui.charts.tree.decoration.TogglePropagateSelectionButton;
epiviz.ui.charts.tree.decoration.TogglePropagateSelectionButton.prototype.decorate=function(){epiviz.ui.charts.decoration.VisualizationDecoration.prototype.decorate.call(this);for(var a=0,b=this.otherDecoration();b;b=b.otherDecoration())b.isChartOptionButton&&++a;var e=this,b=sprintf("%s-propagate-selection-button",this.visualization().id());this.visualization().container().append(sprintf('<div id="%1$s-container" style="position: absolute; top: 5px; right: %2$spx"><input type="checkbox" id="%1$s" %3$s /><label for="%1$s" >Toggle propagate selection</label></div>',
b,5+30*a,this._checked?'checked="checked"':""));var c=$("#"+b),d=$("#"+b+"-container");c.button({text:!1,icons:{primary:"ui-icon ui-icon-refresh"}}).click(function(){e._checked=c.is(":checked");e.visualization().setAutoPropagateChanges(e._checked)});this.visualization().container().mousemove(function(){d.show()}).mouseleave(function(){d.hide()})};epiviz.ui.charts.tree.decoration.TogglePropagateSelectionButton.prototype.checked=function(){return this._checked};
epiviz.main=function(){var a=new epiviz.Config(epiviz.Config.SETTINGS),b=new epiviz.ui.LocationManager(a),e=new epiviz.measurements.MeasurementsManager,c=new epiviz.ui.charts.ChartFactory(a),d=new epiviz.ui.charts.ChartManager(a),f=new epiviz.ui.ControlManager(a,c,d,e,b),n=new epiviz.data.DataProviderFactory(a),n=new epiviz.data.DataManager(a,n),h=null;"false"==a.useCookie?(h=new epiviz.localstorage.LocalStorageManager(epiviz.localstorage.LocalStorageManager.MODE.INCOGNITO_MODE),h.clearWorkspace(),
a.defaultWorkspaceSettings.content.charts=null):h=new epiviz.localstorage.LocalStorageManager(epiviz.localstorage.LocalStorageManager.MODE.COOKIE_MODE);var g=new epiviz.workspaces.WorkspaceManager(a,b,e,d,c),m=new epiviz.workspaces.UserManager(a),p=new epiviz.ui.WebArgsManager(b,g),b=new epiviz.EpiViz(a,b,e,f,n,c,d,g,m,p,h);epiviz.ui.charts.transform.clustering.ClusteringAlgorithmFactory.initialize(a);b.start()};goog.exportSymbol("epiviz.main",epiviz.main);
(function(a,b,e,c){a.site=a.fn.site=function(d){var f=(new Date).getTime(),n=[],h=arguments[0],g="string"==typeof h,m=[].slice.call(arguments,1),p=a.isPlainObject(d)?a.extend(!0,{},a.site.settings,d):a.extend({},a.site.settings),r=p.namespace,t=p.error,l="module-"+r,q=a(e),w=this,u=q.data(l),v,E;v={initialize:function(){v.instantiate()},instantiate:function(){v.verbose("Storing instance of site",v);u=v;q.data(l,v)},normalize:function(){v.fix.console();v.fix.requestAnimationFrame()},fix:{console:function(){v.debug("Normalizing window.console");
if(console===c||console.log===c)v.verbose("Console not available, normalizing events"),v.disable.console();if("undefined"==typeof console.group||"undefined"==typeof console.groupEnd||"undefined"==typeof console.groupCollapsed)v.verbose("Console group not available, normalizing events"),b.console.group=function(){},b.console.groupEnd=function(){},b.console.groupCollapsed=function(){};"undefined"==typeof console.markTimeline&&(v.verbose("Mark timeline not available, normalizing events"),b.console.markTimeline=
function(){})},consoleClear:function(){v.debug("Disabling programmatic console clearing");b.console.clear=function(){}},requestAnimationFrame:function(){v.debug("Normalizing requestAnimationFrame");b.requestAnimationFrame===c&&(v.debug("RequestAnimationFrame not available, normalizing event"),b.requestAnimationFrame=b.requestAnimationFrame||b.mozRequestAnimationFrame||b.webkitRequestAnimationFrame||b.msRequestAnimationFrame||function(a){setTimeout(a,0)})}},moduleExists:function(b){return a.fn[b]!==
c&&a.fn[b].settings!==c},enabled:{modules:function(b){var c=[];b=b||p.modules;a.each(b,function(a,b){v.moduleExists(b)&&c.push(b)});return c}},disabled:{modules:function(b){var c=[];b=b||p.modules;a.each(b,function(a,b){v.moduleExists(b)||c.push(b)});return c}},change:{setting:function(b,d,e,f){e="string"===typeof e?"all"===e?p.modules:[e]:e||p.modules;f=f!==c?f:!0;a.each(e,function(c,e){var g=v.moduleExists(e)?a.fn[e].settings.namespace||!1:!0;v.moduleExists(e)&&(v.verbose("Changing default setting",
b,d,e),a.fn[e].settings[b]=d,f&&g&&(g=a(":data(module-"+g+")"),0<g.length&&(v.verbose("Modifying existing settings",g),g[e]("setting",b,d))))})},settings:function(b,d,e){d="string"===typeof d?[d]:d||p.modules;e=e!==c?e:!0;a.each(d,function(c,d){var f;v.moduleExists(d)&&(v.verbose("Changing default setting",b,d),a.extend(!0,a.fn[d].settings,b),e&&r&&(f=a(":data(module-"+r+")"),0<f.length&&(v.verbose("Modifying existing settings",f),f[d]("setting",b))))})}},enable:{console:function(){v.console(!0)},
debug:function(a,b){a=a||p.modules;v.debug("Enabling debug for modules",a);v.change.setting("debug",!0,a,b)},verbose:function(a,b){a=a||p.modules;v.debug("Enabling verbose debug for modules",a);v.change.setting("verbose",!0,a,b)}},disable:{console:function(){v.console(!1)},debug:function(a,b){a=a||p.modules;v.debug("Disabling debug for modules",a);v.change.setting("debug",!1,a,b)},verbose:function(a,b){a=a||p.modules;v.debug("Disabling verbose debug for modules",a);v.change.setting("verbose",!1,a,
b)}},console:function(a){a?u.cache.console===c?v.error(t.console):(v.debug("Restoring console function"),b.console=u.cache.console):(v.debug("Disabling console function"),u.cache.console=b.console,b.console={clear:function(){},error:function(){},group:function(){},groupCollapsed:function(){},groupEnd:function(){},info:function(){},log:function(){},markTimeline:function(){},warn:function(){}})},destroy:function(){v.verbose("Destroying previous site for",q);q.removeData(l)},cache:{},setting:function(b,
d){if(a.isPlainObject(b))a.extend(!0,p,b);else if(d!==c)p[b]=d;else return p[b]},internal:function(b,d){if(a.isPlainObject(b))a.extend(!0,v,b);else if(d!==c)v[b]=d;else return v[b]},debug:function(){p.debug&&(p.performance?v.performance.log(arguments):(v.debug=Function.prototype.bind.call(console.info,console,p.name+":"),v.debug.apply(console,arguments)))},verbose:function(){p.verbose&&p.debug&&(p.performance?v.performance.log(arguments):(v.verbose=Function.prototype.bind.call(console.info,console,
p.name+":"),v.verbose.apply(console,arguments)))},error:function(){v.error=Function.prototype.bind.call(console.error,console,p.name+":");v.error.apply(console,arguments)},performance:{log:function(a){var b,c;p.performance&&(b=(new Date).getTime(),c=f||b,c=b-c,f=b,n.push({Element:w,Name:a[0],Arguments:[].slice.call(a,1)||"","Execution Time":c}));clearTimeout(v.performance.timer);v.performance.timer=setTimeout(v.performance.display,500)},display:function(){var b=p.name+":",d=0;f=!1;clearTimeout(v.performance.timer);
a.each(n,function(a,b){d+=b["Execution Time"]});(console.group!==c||console.table!==c)&&0<n.length&&(console.groupCollapsed(b+(" "+d+"ms")),console.table?console.table(n):a.each(n,function(a,b){console.log(b.Name+": "+b["Execution Time"]+"ms")}),console.groupEnd());n=[]}},invoke:function(b,d,e){var f=u,g,h,l;d=d||m;e=w||e;"string"==typeof b&&f!==c&&(b=b.split(/[\. ]/),g=b.length-1,a.each(b,function(d,e){var l=d!=g?e+b[d+1].charAt(0).toUpperCase()+b[d+1].slice(1):b;if(a.isPlainObject(f[l])&&d!=g)f=
f[l];else{if(f[l]!==c)return h=f[l],!1;if(a.isPlainObject(f[e])&&d!=g)f=f[e];else return f[e]!==c?h=f[e]:v.error(t.method,b),!1}}));a.isFunction(h)?l=h.apply(e,d):h!==c&&(l=h);a.isArray(E)?E.push(l):E!==c?E=[E,l]:l!==c&&(E=l);return h}};g?(u===c&&v.initialize(),v.invoke(h)):(u!==c&&v.destroy(),v.initialize());return E!==c?E:this};a.site.settings={name:"Site",namespace:"site",error:{console:"Console cannot be restored, most likely it was overwritten outside of module",method:"The method you called is not defined."},
debug:!1,verbose:!1,performance:!0,modules:"accordion api checkbox dimmer dropdown embed form modal nag popup rating shape sidebar state sticky tab transition visit visibility".split(" "),siteNamespace:"site",namespaceStub:{cache:{},config:{},sections:{},section:{},utilities:{}}};a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,e){return!!a.data(b,e[3])}})})(jQuery,window,document);
(function(a,b,e,c){b="undefined"!=typeof b&&b.Math==Math?b:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();a.fn.form=function(b){var f=a(this),n=f.selector||"",h=(new Date).getTime(),g=[],m=arguments[0],p=arguments[1],r="string"==typeof m,t=[].slice.call(arguments,1),l;f.each(function(){var q=a(this),w=this,u=[],v=!1,E,A,K,F,z,B,H,G,I,N,L,x,S,D,J;J={initialize:function(){J.get.settings();r?(D===c&&J.instantiate(),J.invoke(m)):(D!==c&&D.invoke("destroy"),J.verbose("Initializing form validation",
q,z),J.bindEvents(),J.set.defaults(),J.instantiate())},instantiate:function(){J.verbose("Storing instance of module",J);D=J;q.data(x,J)},destroy:function(){J.verbose("Destroying previous module",D);J.removeEvents();q.removeData(x)},refresh:function(){J.verbose("Refreshing selector cache");E=q.find(G.field);A=q.find(G.group);K=q.find(G.message);q.find(G.prompt);F=q.find(G.submit);q.find(G.clear);q.find(G.reset)},submit:function(){J.verbose("Submitting form",q);q.submit()},attachEvents:function(b,c){c=
c||"submit";a(b).on("click"+S,function(a){J[c]();a.preventDefault()})},bindEvents:function(){J.verbose("Attaching form events");q.on("submit"+S,J.validate.form).on("blur"+S,G.field,J.event.field.blur).on("click"+S,G.submit,J.submit).on("click"+S,G.reset,J.reset).on("click"+S,G.clear,J.clear);if(z.keyboardShortcuts)q.on("keydown"+S,G.field,J.event.field.keydown);E.each(function(){var b=a(this),c=b.prop("type"),b=J.get.changeEvent(c,b);a(this).on(b+S,J.event.field.change)})},clear:function(){E.each(function(){var b=
a(this),c=b.parent(),d=b.closest(A),e=d.find(G.prompt),f=b.data(H.defaultValue)||"",g=c.is(G.uiCheckbox),h=c.is(G.uiDropdown);d.hasClass(I.error)&&(J.verbose("Resetting error on field",d),d.removeClass(I.error),e.remove());h?(J.verbose("Resetting dropdown value",c,f),c.dropdown("clear")):g?b.prop("checked",!1):(J.verbose("Resetting field value",b,f),b.val(""))})},reset:function(){E.each(function(){var b=a(this),d=b.parent(),e=b.closest(A),f=e.find(G.prompt),g=b.data(H.defaultValue),h=d.is(G.uiCheckbox),
l=d.is(G.uiDropdown),m=e.hasClass(I.error);g!==c&&(m&&(J.verbose("Resetting error on field",e),e.removeClass(I.error),f.remove()),l?(J.verbose("Resetting dropdown value",d,g),d.dropdown("restore defaults")):h?(J.verbose("Resetting checkbox value",d,g),b.prop("checked",g)):(J.verbose("Resetting field value",b,g),b.val(g)))})},is:{bracketedRule:function(a){return a.type&&a.type.match(z.regExp.bracket)},empty:function(a){return a&&0!==a.length?a.is('input[type="checkbox"]')?!a.is(":checked"):J.is.blank(a):
!0},blank:function(b){return""===a.trim(b.val())},valid:function(){var b=!0;J.verbose("Checking if form is valid");a.each(B,function(a,c){J.validate.field(c,a)||(b=!1)});return b}},removeEvents:function(){q.off(S);E.off(S);F.off(S);E.off(S)},event:{field:{keydown:function(b){var c=a(this),d=b.which,e=c.is(G.input),f=c.is(G.checkbox),g=0<c.closest(G.uiDropdown).length;27==d&&(J.verbose("Escape key pressed blurring field"),c.blur());b.ctrlKey||13!=d||!e||g||f||(v||(c.one("keyup"+S,J.event.field.keyup),
J.submit(),J.debug("Enter pressed on input submitting form")),v=!0)},keyup:function(){v=!1},blur:function(b){b=a(this);var c=b.closest(A),d=J.get.validation(b);c.hasClass(I.error)?(J.debug("Revalidating field",b,d),d&&J.validate.field(d)):("blur"==z.on||"change"==z.on)&&d&&J.validate.field(d)},change:function(b){var c=a(this);b=c.closest(A);var d=J.get.validation(c);if("change"==z.on||b.hasClass(I.error)&&z.revalidate)clearTimeout(J.timer),J.timer=setTimeout(function(){J.debug("Revalidating field",
c,J.get.validation(c));J.validate.field(d)},z.delay)}}},get:{ancillaryValue:function(a){return a.type&&(a.value||J.is.bracketedRule(a))?a.value!==c?a.value:a.type.match(z.regExp.bracket)[1]+"":!1},ruleName:function(a){return J.is.bracketedRule(a)?a.type.replace(a.type.match(z.regExp.bracket)[0],""):a.type},changeEvent:function(a,b){return"checkbox"==a||"radio"==a||"hidden"==a||b.is("select")?"change":J.get.inputEvent()},inputEvent:function(){return e.createElement("input").oninput!==c?"input":e.createElement("input").onpropertychange!==
c?"propertychange":"keyup"},prompt:function(a,b){var c=J.get.ruleName(a),d=J.get.ancillaryValue(a),e=a.prompt||z.prompt[c]||z.text.unspecifiedRule,f=-1!==e.search("{value}"),g=-1!==e.search("{name}"),h;if(g||f)h=J.get.field(b.identifier);f&&(e=e.replace("{value}",h.val()));g&&(f=h.closest(G.group).find("label").eq(0),h=1==f.length?f.text():h.prop("placeholder")||z.text.unspecifiedField,e=e.replace("{name}",h));e=e.replace("{identifier}",b.identifier);e=e.replace("{ruleValue}",d);a.prompt||J.verbose("Using default validation prompt for type",
e,c);return e},settings:function(){if(a.isPlainObject(b)){var e=Object.keys(b);0<e.length&&b[e[0]].identifier!==c&&b[e[0]].rules!==c?(z=a.extend(!0,{},a.fn.form.settings,p),B=a.extend({},a.fn.form.settings.defaults,b),J.error(z.error.oldSyntax,w),J.verbose("Extending settings from legacy parameters",B,z)):(b.fields&&(e=Object.keys(b.fields),("string"==typeof b.fields[e[0]]||a.isArray(b.fields[e[0]]))&&a.each(b.fields,function(c,e){"string"==typeof e&&(e=[e]);b.fields[c]={rules:[]};a.each(e,function(a,
e){b.fields[c].rules.push({type:e})})})),z=a.extend(!0,{},a.fn.form.settings,b),B=a.extend({},a.fn.form.settings.defaults,z.fields),J.verbose("Extending settings",B,z))}else z=a.fn.form.settings,B=a.fn.form.settings.defaults,J.verbose("Using default form validation",B,z);L=z.namespace;H=z.metadata;G=z.selector;I=z.className;N=z.error;x="module-"+L;S="."+L;D=q.data(x);J.refresh()},field:function(b){J.verbose("Finding field with identifier",b);return 0<E.filter("#"+b).length?E.filter("#"+b):0<E.filter('[name="'+
b+'"]').length?E.filter('[name="'+b+'"]'):0<E.filter('[name="'+b+'[]"]').length?E.filter('[name="'+b+'[]"]'):0<E.filter("[data-"+H.validate+'="'+b+'"]').length?E.filter("[data-"+H.validate+'="'+b+'"]'):a("<input/>")},fields:function(b){var c=a();a.each(b,function(a,b){c=c.add(J.get.field(b))});return c},validation:function(b){var c,d;if(!B)return!1;a.each(B,function(a,e){d=e.identifier||a;J.get.field(d)[0]==b[0]&&(e.identifier=d,c=e)});return c||!1},value:function(a){var b=[];b.push(a);return J.get.values.call(w,
b)[a]},values:function(b){var c={};(a.isArray(b)?J.get.fields(b):E).each(function(b,d){var e=a(d);e.prop("type");var f=e.prop("name"),g=e.val(),h=e.is(G.checkbox),l=e.is(G.radio),m=-1!==f.indexOf("[]"),e=h?e.is(":checked"):!1;f&&(m?(f=f.replace("[]",""),c[f]||(c[f]=[]),h?e?c[f].push(g||!0):c[f].push(!1):c[f].push(g)):l?e&&(c[f]=g):c[f]=h?e?g||!0:!1:g)});return c}},has:{field:function(a){J.verbose("Checking for existence of a field with identifier",a);"string"!==typeof a&&J.error(N.identifier,a);return 0<
E.filter("#"+a).length||0<E.filter('[name="'+a+'"]').length||0<E.filter("[data-"+H.validate+'="'+a+'"]').length?!0:!1}},add:{prompt:function(b,d){var e=J.get.field(b).closest(A),f=e.children(G.prompt),g=0!==f.length;d="string"==typeof d?[d]:d;J.verbose("Adding field error state",b);e.addClass(I.error);z.inline&&(g||(f=z.templates.prompt(d),f.appendTo(e)),f.html(d[0]),g?J.verbose("Inline errors are disabled, no inline error added",b):z.transition&&a.fn.transition!==c&&q.transition("is supported")?
(J.verbose("Displaying error with css transition",z.transition),f.transition(z.transition+" in",z.duration)):(J.verbose("Displaying error with fallback javascript animation"),f.fadeIn(z.duration)))},errors:function(a){J.debug("Adding form error messages",a);J.set.error();K.html(z.templates.error(a))}},remove:{prompt:function(b){var d=J.get.field(b).closest(A),e=d.children(G.prompt);d.removeClass(I.error);z.inline&&e.is(":visible")&&(J.verbose("Removing prompt for field",b),z.transition&&a.fn.transition!==
c&&q.transition("is supported")?e.transition(z.transition+" out",z.duration,function(){e.remove()}):e.fadeOut(z.duration,function(){e.remove()}))}},set:{success:function(){q.removeClass(I.error).addClass(I.success)},defaults:function(){E.each(function(){var b=a(this),c=0<b.filter(G.checkbox).length?b.is(":checked"):b.val();b.data(H.defaultValue,c)})},error:function(){q.removeClass(I.success).addClass(I.error)},value:function(a,b){var c={};c[a]=b;return J.set.values.call(w,c)},values:function(b){a.isEmptyObject(b)||
a.each(b,function(b,c){var d=J.get.field(b),e=d.parent(),f=a.isArray(c),g=e.is(G.uiCheckbox),h=e.is(G.uiDropdown),l=d.is(G.radio)&&g,m;0<d.length&&(f&&g?(J.verbose("Selecting multiple",c,d),e.checkbox("uncheck"),a.each(c,function(a,b){m=d.filter('[value="'+b+'"]');e=m.parent();0<m.length&&e.checkbox("check")})):l?(J.verbose("Selecting radio value",c,d),d.filter('[value="'+c+'"]').parent(G.uiCheckbox).checkbox("check")):g?(J.verbose("Setting checkbox value",c,e),!0===c?e.checkbox("check"):e.checkbox("uncheck")):
h?(J.verbose("Setting dropdown value",c,e),e.dropdown("set selected",c)):(J.verbose("Setting field value",c,d),d.val(c)))})}},validate:{form:function(a,b){var d=J.get.values();if(v)return!1;u=[];if(J.is.valid()){if(J.debug("Form has no validation errors, submitting"),J.set.success(),!0!==b)return z.onSuccess.call(w,a,d)}else if(J.debug("Form has errors"),J.set.error(),z.inline||J.add.errors(u),q.data("moduleApi")!==c&&a.stopImmediatePropagation(),!0!==b)return z.onFailure.call(w,u,d)},field:function(b,
d){var e=b.identifier||d,f=J.get.field(e),g=b.depends?J.get.field(b.depends):!1,h=!0,l=[];b.identifier||(J.debug("Using field name as identifier",e),b.identifier=e);f.prop("disabled")?(J.debug("Field is disabled. Skipping",e),h=!0):b.optional&&J.is.blank(f)?(J.debug("Field is optional and blank. Skipping",e),h=!0):b.depends&&J.is.empty(g)?(J.debug("Field depends on another value that is not present or empty. Skipping",g),h=!0):b.rules!==c&&a.each(b.rules,function(a,c){J.has.field(e)&&!J.validate.rule(b,
c)&&(J.debug("Field is invalid",e,c.type),l.push(J.get.prompt(c,b)),h=!1)});if(h)J.remove.prompt(e,l),z.onValid.call(f);else return u=u.concat(l),J.add.prompt(e,l),z.onInvalid.call(f,l),!1;return!0},rule:function(b,d){var e=J.get.field(b.identifier),f=e.val(),g=J.get.ancillaryValue(d),h=J.get.ruleName(d),l=z.rules[h];if(a.isFunction(l))return f=f===c||""===f||null===f?"":a.trim(f+""),l.call(e,f,g);J.error(N.noRule,h)}},setting:function(b,d){if(a.isPlainObject(b))a.extend(!0,z,b);else if(d!==c)z[b]=
d;else return z[b]},internal:function(b,d){if(a.isPlainObject(b))a.extend(!0,J,b);else if(d!==c)J[b]=d;else return J[b]},debug:function(){!z.silent&&z.debug&&(z.performance?J.performance.log(arguments):(J.debug=Function.prototype.bind.call(console.info,console,z.name+":"),J.debug.apply(console,arguments)))},verbose:function(){!z.silent&&z.verbose&&z.debug&&(z.performance?J.performance.log(arguments):(J.verbose=Function.prototype.bind.call(console.info,console,z.name+":"),J.verbose.apply(console,arguments)))},
error:function(){z.silent||(J.error=Function.prototype.bind.call(console.error,console,z.name+":"),J.error.apply(console,arguments))},performance:{log:function(a){var b,c;z.performance&&(b=(new Date).getTime(),c=h||b,c=b-c,h=b,g.push({Name:a[0],Arguments:[].slice.call(a,1)||"",Element:w,"Execution Time":c}));clearTimeout(J.performance.timer);J.performance.timer=setTimeout(J.performance.display,500)},display:function(){var b=z.name+":",d=0;h=!1;clearTimeout(J.performance.timer);a.each(g,function(a,
b){d+=b["Execution Time"]});b+=" "+d+"ms";n&&(b+=" '"+n+"'");1<f.length&&(b+=" ("+f.length+")");(console.group!==c||console.table!==c)&&0<g.length&&(console.groupCollapsed(b),console.table?console.table(g):a.each(g,function(a,b){console.log(b.Name+": "+b["Execution Time"]+"ms")}),console.groupEnd());g=[]}},invoke:function(b,d,e){var f=D,g,h,m;d=d||t;e=w||e;"string"==typeof b&&f!==c&&(b=b.split(/[\. ]/),g=b.length-1,a.each(b,function(d,e){var l=d!=g?e+b[d+1].charAt(0).toUpperCase()+b[d+1].slice(1):
b;if(a.isPlainObject(f[l])&&d!=g)f=f[l];else{if(f[l]!==c)return h=f[l],!1;if(a.isPlainObject(f[e])&&d!=g)f=f[e];else return f[e]!==c&&(h=f[e]),!1}}));a.isFunction(h)?m=h.apply(e,d):h!==c&&(m=h);a.isArray(l)?l.push(m):l!==c?l=[l,m]:m!==c&&(l=m);return h}};J.initialize()});return l!==c?l:this};a.fn.form.settings={name:"Form",namespace:"form",debug:!1,verbose:!1,performance:!0,fields:!1,keyboardShortcuts:!0,on:"submit",inline:!1,delay:200,revalidate:!0,transition:"scale",duration:200,onValid:function(){},
onInvalid:function(){},onSuccess:function(){return!0},onFailure:function(){return!1},metadata:{defaultValue:"default",validate:"validate"},regExp:{bracket:/\[(.*)\]/i,decimal:/^\d*(\.)\d+/,email:/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,escape:/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,flags:/^\/(.*)\/(.*)?/,integer:/^\-?\d+$/,number:/^\-?\d*(\.\d+)?$/,url:/(https?:\/\/(?:www\.|(?!www))[^\s\.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/i},text:{unspecifiedRule:"Please enter a valid value",
unspecifiedField:"This field"},prompt:{empty:"{name} must have a value",checked:"{name} must be checked",email:"{name} must be a valid e-mail",url:"{name} must be a valid url",regExp:"{name} is not formatted correctly",integer:"{name} must be an integer",decimal:"{name} must be a decimal number",number:"{name} must be set to a number",is:'{name} must be "{ruleValue}"',isExactly:'{name} must be exactly "{ruleValue}"',not:'{name} cannot be set to "{ruleValue}"',notExactly:'{name} cannot be set to exactly "{ruleValue}"',
contain:'{name} cannot contain "{ruleValue}"',containExactly:'{name} cannot contain exactly "{ruleValue}"',doesntContain:'{name} must contain  "{ruleValue}"',doesntContainExactly:'{name} must contain exactly "{ruleValue}"',minLength:"{name} must be at least {ruleValue} characters",length:"{name} must be at least {ruleValue} characters",exactLength:"{name} must be exactly {ruleValue} characters",maxLength:"{name} cannot be longer than {ruleValue} characters",match:"{name} must match {ruleValue} field",
different:"{name} must have a different value than {ruleValue} field",creditCard:"{name} must be a valid credit card number",minCount:"{name} must have at least {ruleValue} choices",exactCount:"{name} must have exactly {ruleValue} choices",maxCount:"{name} must have {ruleValue} or less choices"},selector:{checkbox:'input[type="checkbox"], input[type="radio"]',clear:".clear",field:"input, textarea, select",group:".field",input:"input",message:".error.message",prompt:".prompt.label",radio:'input[type="radio"]',
reset:'.reset:not([type="reset"])',submit:'.submit:not([type="submit"])',uiCheckbox:".ui.checkbox",uiDropdown:".ui.dropdown"},className:{error:"error",label:"ui prompt label",pressed:"down",success:"success"},error:{identifier:"You must specify a string identifier for each field",method:"The method you called is not defined.",noRule:"There is no rule matching the one you specified",oldSyntax:"Starting in 2.0 forms now only take a single settings object. Validation settings converted to new syntax automatically."},
templates:{error:function(b){var c='<ul class="list">';a.each(b,function(a,b){c+="<li>"+b+"</li>"});c+="</ul>";return a(c)},prompt:function(b){return a("<div/>").addClass("ui basic red pointing prompt label").html(b[0])}},rules:{empty:function(b){return!(b===c||""===b||a.isArray(b)&&0===b.length)},checked:function(){return 0<a(this).filter(":checked").length},email:function(b){return a.fn.form.settings.regExp.email.test(b)},url:function(b){return a.fn.form.settings.regExp.url.test(b)},regExp:function(b,
c){if(c instanceof RegExp)return b.match(c);var e=c.match(a.fn.form.settings.regExp.flags),h;e&&(c=2<=e.length?e[1]:c,h=3<=e.length?e[2]:"");return b.match(new RegExp(c,h))},integer:function(b,e){var n=a.fn.form.settings.regExp.integer,h,g,m;e&&-1===["",".."].indexOf(e)&&(-1==e.indexOf("..")?n.test(e)&&(h=g=e-0):(m=e.split("..",2),n.test(m[0])&&(h=m[0]-0),n.test(m[1])&&(g=m[1]-0)));return n.test(b)&&(h===c||b>=h)&&(g===c||b<=g)},decimal:function(b){return a.fn.form.settings.regExp.decimal.test(b)},
number:function(b){return a.fn.form.settings.regExp.number.test(b)},is:function(a,b){b="string"==typeof b?b.toLowerCase():b;a="string"==typeof a?a.toLowerCase():a;return a==b},isExactly:function(a,b){return a==b},not:function(a,b){a="string"==typeof a?a.toLowerCase():a;b="string"==typeof b?b.toLowerCase():b;return a!=b},notExactly:function(a,b){return a!=b},contains:function(b,c){c=c.replace(a.fn.form.settings.regExp.escape,"\\$&");return-1!==b.search(new RegExp(c,"i"))},containsExactly:function(b,
c){c=c.replace(a.fn.form.settings.regExp.escape,"\\$&");return-1!==b.search(new RegExp(c))},doesntContain:function(b,c){c=c.replace(a.fn.form.settings.regExp.escape,"\\$&");return-1===b.search(new RegExp(c,"i"))},doesntContainExactly:function(b,c){c=c.replace(a.fn.form.settings.regExp.escape,"\\$&");return-1===b.search(new RegExp(c))},minLength:function(a,b){return a!==c?a.length>=b:!1},length:function(a,b){return a!==c?a.length>=b:!1},exactLength:function(a,b){return a!==c?a.length==b:!1},maxLength:function(a,
b){return a!==c?a.length<=b:!1},match:function(b,e){a(this);var n;0<a('[data-validate="'+e+'"]').length?n=a('[data-validate="'+e+'"]').val():0<a("#"+e).length?n=a("#"+e).val():0<a('[name="'+e+'"]').length?n=a('[name="'+e+'"]').val():0<a('[name="'+e+'[]"]').length&&(n=a('[name="'+e+'[]"]'));return n!==c?b.toString()==n.toString():!1},different:function(b,e){a(this);var n;0<a('[data-validate="'+e+'"]').length?n=a('[data-validate="'+e+'"]').val():0<a("#"+e).length?n=a("#"+e).val():0<a('[name="'+e+'"]').length?
n=a('[name="'+e+'"]').val():0<a('[name="'+e+'[]"]').length&&(n=a('[name="'+e+'[]"]'));return n!==c?b.toString()!==n.toString():!1},creditCard:function(b,c){var e,h,g={visa:{pattern:/^4/,length:[16]},amex:{pattern:/^3[47]/,length:[15]},mastercard:{pattern:/^5[1-5]/,length:[16]},discover:{pattern:/^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/,length:[16]},unionPay:{pattern:/^(62|88)/,length:[16,17,18,19]},jcb:{pattern:/^35(2[89]|[3-8][0-9])/,length:[16]},maestro:{pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,
length:[12,13,14,15,16,17,18,19]},dinersClub:{pattern:/^(30[0-5]|^36)/,length:[14]},laser:{pattern:/^(6304|670[69]|6771)/,length:[16,17,18,19]},visaElectron:{pattern:/^(4026|417500|4508|4844|491(3|7))/,length:[16]}},m,p,r=!1;e="string"==typeof c?c.split(","):!1;var t;if("string"===typeof b&&0!==b.length){if(e&&(a.each(e,function(c,e){if(t=g[e])m=-1!==a.inArray(b.length,t.length),p=-1!==b.search(t.pattern),m&&p&&(r=!0)}),!r))return!1;e=-1!==a.inArray(b.length,g.unionPay.length);h=-1!==b.search(g.unionPay.pattern);
if(e&&h)return!0;e=b.length;h=0;for(var l=[[0,1,2,3,4,5,6,7,8,9],[0,2,4,6,8,1,3,5,7,9]],q=0;e--;)q+=l[h][parseInt(b.charAt(e),10)],h^=1;return 0===q%10&&0<q}},minCount:function(a,b){return 0==b?!0:1==b?""!==a:a.split(",").length>=b},exactCount:function(a,b){return 0==b?""===a:1==b?""!==a&&-1===a.search(","):a.split(",").length==b},maxCount:function(a,b){return 0==b?!1:1==b?-1===a.search(","):a.split(",").length<=b}}}})(jQuery,window,document);
(function(a,b,e,c){b="undefined"!=typeof b&&b.Math==Math?b:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();a.fn.accordion=function(d){var e=a(this),n=(new Date).getTime(),h=[],g=arguments[0],m="string"==typeof g,p=[].slice.call(arguments,1),r;e.each(function(){var t=a.isPlainObject(d)?a.extend(!0,{},a.fn.accordion.settings,d):a.extend({},a.fn.accordion.settings),l=t.className,q=t.namespace,w=t.selector,u=t.error,v="."+q,E="module-"+q,A=e.selector||"",K=a(this),F=K.find(w.title),
z=K.find(w.content),B=this,H=K.data(E),G,I;I={initialize:function(){I.debug("Initializing",K);I.bind.events();t.observeChanges&&I.observeChanges();I.instantiate()},instantiate:function(){H=I;K.data(E,I)},destroy:function(){I.debug("Destroying previous instance",K);K.off(v).removeData(E)},refresh:function(){F=K.find(w.title);z=K.find(w.content)},observeChanges:function(){"MutationObserver"in b&&(G=new MutationObserver(function(a){I.debug("DOM tree modified, updating selector cache");I.refresh()}),
G.observe(B,{childList:!0,subtree:!0}),I.debug("Setting up mutation observer",G))},bind:{events:function(){I.debug("Binding delegated events");K.on(t.on+v,w.trigger,I.event.click)}},event:{click:function(){I.toggle.call(this)}},toggle:function(b){b=b!==c?"number"===typeof b?F.eq(b):a(b).closest(w.title):a(this).closest(w.title);var d=b.next(z),e=d.hasClass(l.animating),f=d.hasClass(l.active),d=f&&!e,e=!f&&e;I.debug("Toggling visibility of content",b);d||e?t.collapsible?I.close.call(b):I.debug("Cannot close accordion content collapsing is disabled"):
I.open.call(b)},open:function(b){b=b!==c?"number"===typeof b?F.eq(b):a(b).closest(w.title):a(this).closest(w.title);var d=b.next(z),e=d.hasClass(l.animating);d.hasClass(l.active)||e?I.debug("Accordion already open, skipping",d):(I.debug("Opening accordion content",b),t.onOpening.call(d),t.exclusive&&I.closeOthers.call(b),b.addClass(l.active),d.stop(!0,!0).addClass(l.animating),t.animateChildren&&(a.fn.transition!==c&&K.transition("is supported")?d.children().transition({animation:"fade in",queue:!1,
useFailSafe:!0,debug:t.debug,verbose:t.verbose,duration:t.duration}):d.children().stop(!0,!0).animate({opacity:1},t.duration,I.resetOpacity)),d.slideDown(t.duration,t.easing,function(){d.removeClass(l.animating).addClass(l.active);I.reset.display.call(this);t.onOpen.call(this);t.onChange.call(this)}))},close:function(b){b=b!==c?"number"===typeof b?F.eq(b):a(b).closest(w.title):a(this).closest(w.title);var d=b.next(z),e=d.hasClass(l.animating),f=d.hasClass(l.active);!(f||!f&&e)||f&&e||(I.debug("Closing accordion content",
d),t.onClosing.call(d),b.removeClass(l.active),d.stop(!0,!0).addClass(l.animating),t.animateChildren&&(a.fn.transition!==c&&K.transition("is supported")?d.children().transition({animation:"fade out",queue:!1,useFailSafe:!0,debug:t.debug,verbose:t.verbose,duration:t.duration}):d.children().stop(!0,!0).animate({opacity:0},t.duration,I.resetOpacity)),d.slideUp(t.duration,t.easing,function(){d.removeClass(l.animating).removeClass(l.active);I.reset.display.call(this);t.onClose.call(this);t.onChange.call(this)}))},
closeOthers:function(b){b=b!==c?F.eq(b):a(this).closest(w.title);var d=b.parents(w.content).prev(w.title),e=b.closest(w.accordion),f=w.title+"."+l.active+":visible",g=w.content+"."+l.active+":visible";t.closeNested?b=e.find(f).not(d):(b=e.find(f).not(d),d=e.find(g).find(f).not(d),b=b.not(d));d=b.next(z);0<b.length&&(I.debug("Exclusive enabled, closing other content",b),b.removeClass(l.active),d.removeClass(l.animating).stop(!0,!0),t.animateChildren&&(a.fn.transition!==c&&K.transition("is supported")?
d.children().transition({animation:"fade out",useFailSafe:!0,debug:t.debug,verbose:t.verbose,duration:t.duration}):d.children().stop(!0,!0).animate({opacity:0},t.duration,I.resetOpacity)),d.slideUp(t.duration,t.easing,function(){a(this).removeClass(l.active);I.reset.display.call(this)}))},reset:{display:function(){I.verbose("Removing inline display from element",this);a(this).css("display","");""===a(this).attr("style")&&a(this).attr("style","").removeAttr("style")},opacity:function(){I.verbose("Removing inline opacity from element",
this);a(this).css("opacity","");""===a(this).attr("style")&&a(this).attr("style","").removeAttr("style")}},setting:function(b,d){I.debug("Changing setting",b,d);if(a.isPlainObject(b))a.extend(!0,t,b);else if(d!==c)a.isPlainObject(t[b])?a.extend(!0,t[b],d):t[b]=d;else return t[b]},internal:function(b,d){I.debug("Changing internal",b,d);if(d!==c)a.isPlainObject(b)?a.extend(!0,I,b):I[b]=d;else return I[b]},debug:function(){!t.silent&&t.debug&&(t.performance?I.performance.log(arguments):(I.debug=Function.prototype.bind.call(console.info,
console,t.name+":"),I.debug.apply(console,arguments)))},verbose:function(){!t.silent&&t.verbose&&t.debug&&(t.performance?I.performance.log(arguments):(I.verbose=Function.prototype.bind.call(console.info,console,t.name+":"),I.verbose.apply(console,arguments)))},error:function(){t.silent||(I.error=Function.prototype.bind.call(console.error,console,t.name+":"),I.error.apply(console,arguments))},performance:{log:function(a){var b,c;t.performance&&(b=(new Date).getTime(),c=n||b,c=b-c,n=b,h.push({Name:a[0],
Arguments:[].slice.call(a,1)||"",Element:B,"Execution Time":c}));clearTimeout(I.performance.timer);I.performance.timer=setTimeout(I.performance.display,500)},display:function(){var b=t.name+":",d=0;n=!1;clearTimeout(I.performance.timer);a.each(h,function(a,b){d+=b["Execution Time"]});b+=" "+d+"ms";A&&(b+=" '"+A+"'");(console.group!==c||console.table!==c)&&0<h.length&&(console.groupCollapsed(b),console.table?console.table(h):a.each(h,function(a,b){console.log(b.Name+": "+b["Execution Time"]+"ms")}),
console.groupEnd());h=[]}},invoke:function(b,d,e){var f=H,g,h,l;d=d||p;e=B||e;"string"==typeof b&&f!==c&&(b=b.split(/[\. ]/),g=b.length-1,a.each(b,function(d,e){var l=d!=g?e+b[d+1].charAt(0).toUpperCase()+b[d+1].slice(1):b;if(a.isPlainObject(f[l])&&d!=g)f=f[l];else{if(f[l]!==c)return h=f[l],!1;if(a.isPlainObject(f[e])&&d!=g)f=f[e];else return f[e]!==c?h=f[e]:I.error(u.method,b),!1}}));a.isFunction(h)?l=h.apply(e,d):h!==c&&(l=h);a.isArray(r)?r.push(l):r!==c?r=[r,l]:l!==c&&(r=l);return h}};m?(H===c&&
I.initialize(),I.invoke(g)):(H!==c&&H.invoke("destroy"),I.initialize())});return r!==c?r:this};a.fn.accordion.settings={name:"Accordion",namespace:"accordion",silent:!1,debug:!1,verbose:!1,performance:!0,on:"click",observeChanges:!0,exclusive:!0,collapsible:!0,closeNested:!1,animateChildren:!0,duration:350,easing:"easeOutQuad",onOpening:function(){},onOpen:function(){},onClosing:function(){},onClose:function(){},onChange:function(){},error:{method:"The method you called is not defined"},className:{active:"active",
animating:"animating"},selector:{accordion:".accordion",title:".title",trigger:".title",content:".content"}};a.extend(a.easing,{easeOutQuad:function(a,b,c,e,g){return-e*(b/=g)*(b-2)+c}})})(jQuery,window,document);
(function(a,b,e,c){b="undefined"!=typeof b&&b.Math==Math?b:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();a.fn.checkbox=function(d){var f=a(this),n=f.selector||"",h=(new Date).getTime(),g=[],m=arguments[0],p="string"==typeof m,r=[].slice.call(arguments,1),t;f.each(function(){var f=a.extend(!0,{},a.fn.checkbox.settings,d),q=f.className,w=f.namespace,u=f.selector,v=f.error,E="."+w,A="module-"+w,K=a(this),F=a(this).children(u.label),z=a(this).children(u.input),B=z[0],H=!1,G=
!1,I=K.data(A),N,L=this,x;x={initialize:function(){x.verbose("Initializing checkbox",f);x.create.label();x.bind.events();x.set.tabbable();x.hide.input();x.observeChanges();x.instantiate();x.setup()},instantiate:function(){x.verbose("Storing instance of module",x);I=x;K.data(A,x)},destroy:function(){x.verbose("Destroying module");x.unbind.events();x.show.input();K.removeData(A)},fix:{reference:function(){K.is(u.input)&&(x.debug("Behavior called on <input> adjusting invoked element"),K=K.closest(u.checkbox),
x.refresh())}},setup:function(){x.set.initialLoad();x.is.indeterminate()?(x.debug("Initial value is indeterminate"),x.indeterminate()):x.is.checked()?(x.debug("Initial value is checked"),x.check()):(x.debug("Initial value is unchecked"),x.uncheck());x.remove.initialLoad()},refresh:function(){F=K.children(u.label);z=K.children(u.input);B=z[0]},hide:{input:function(){x.verbose("Modifying <input> z-index to be unselectable");z.addClass(q.hidden)}},show:{input:function(){x.verbose("Modifying <input> z-index to be selectable");
z.removeClass(q.hidden)}},observeChanges:function(){"MutationObserver"in b&&(N=new MutationObserver(function(a){x.debug("DOM tree modified, updating selector cache");x.refresh()}),N.observe(L,{childList:!0,subtree:!0}),x.debug("Setting up mutation observer",N))},attachEvents:function(b,c){var d=a(b);c=a.isFunction(x[c])?x[c]:x.toggle;0<d.length?(x.debug("Attaching checkbox events to element",b,c),d.on("click"+E,c)):x.error(v.notFound)},event:{click:function(b){var c=a(b.target);c.is(u.input)?x.verbose("Using default check action on initialized checkbox"):
c.is(u.link)?x.debug("Clicking link inside checkbox, skipping toggle"):(x.toggle(),z.focus(),b.preventDefault())},keydown:function(a){var b=a.which;27==b?(x.verbose("Escape key pressed blurring field"),z.blur(),G=!0):a.ctrlKey||32!=b&&13!=b?G=!1:(x.verbose("Enter/space key pressed, toggling checkbox"),x.toggle(),G=!0)},keyup:function(a){G&&a.preventDefault()}},check:function(){x.should.allowCheck()&&(x.debug("Checking checkbox",z),x.set.checked(),x.should.ignoreCallbacks()||(f.onChecked.call(B),f.onChange.call(B)))},
uncheck:function(){x.should.allowUncheck()&&(x.debug("Unchecking checkbox"),x.set.unchecked(),x.should.ignoreCallbacks()||(f.onUnchecked.call(B),f.onChange.call(B)))},indeterminate:function(){x.should.allowIndeterminate()?x.debug("Checkbox is already indeterminate"):(x.debug("Making checkbox indeterminate"),x.set.indeterminate(),x.should.ignoreCallbacks()||(f.onIndeterminate.call(B),f.onChange.call(B)))},determinate:function(){x.should.allowDeterminate()?x.debug("Checkbox is already determinate"):
(x.debug("Making checkbox determinate"),x.set.determinate(),x.should.ignoreCallbacks()||(f.onDeterminate.call(B),f.onChange.call(B)))},enable:function(){x.is.enabled()?x.debug("Checkbox is already enabled"):(x.debug("Enabling checkbox"),x.set.enabled(),f.onEnable.call(B),f.onEnabled.call(B))},disable:function(){x.is.disabled()?x.debug("Checkbox is already disabled"):(x.debug("Disabling checkbox"),x.set.disabled(),f.onDisable.call(B),f.onDisabled.call(B))},get:{radios:function(){var b=x.get.name();
return a('input[name="'+b+'"]').closest(u.checkbox)},otherRadios:function(){return x.get.radios().not(K)},name:function(){return z.attr("name")}},is:{initialLoad:function(){return H},radio:function(){return z.hasClass(q.radio)||"radio"==z.attr("type")},indeterminate:function(){return z.prop("indeterminate")!==c&&z.prop("indeterminate")},checked:function(){return z.prop("checked")!==c&&z.prop("checked")},disabled:function(){return z.prop("disabled")!==c&&z.prop("disabled")},enabled:function(){return!x.is.disabled()},
determinate:function(){return!x.is.indeterminate()},unchecked:function(){return!x.is.checked()}},should:{allowCheck:function(){return x.is.determinate()&&x.is.checked()&&!x.should.forceCallbacks()?(x.debug("Should not allow check, checkbox is already checked"),!1):!1===f.beforeChecked.apply(B)?(x.debug("Should not allow check, beforeChecked cancelled"),!1):!0},allowUncheck:function(){return x.is.determinate()&&x.is.unchecked()&&!x.should.forceCallbacks()?(x.debug("Should not allow uncheck, checkbox is already unchecked"),
!1):!1===f.beforeUnchecked.apply(B)?(x.debug("Should not allow uncheck, beforeUnchecked cancelled"),!1):!0},allowIndeterminate:function(){return x.is.indeterminate()&&!x.should.forceCallbacks()?(x.debug("Should not allow indeterminate, checkbox is already indeterminate"),!1):!1===f.beforeIndeterminate.apply(B)?(x.debug("Should not allow indeterminate, beforeIndeterminate cancelled"),!1):!0},allowDeterminate:function(){return x.is.determinate()&&!x.should.forceCallbacks()?(x.debug("Should not allow determinate, checkbox is already determinate"),
!1):!1===f.beforeDeterminate.apply(B)?(x.debug("Should not allow determinate, beforeDeterminate cancelled"),!1):!0},forceCallbacks:function(){return x.is.initialLoad()&&f.fireOnInit},ignoreCallbacks:function(){return H&&!f.fireOnInit}},can:{change:function(){return!(K.hasClass(q.disabled)||K.hasClass(q.readOnly)||z.prop("disabled")||z.prop("readonly"))},uncheck:function(){return"boolean"===typeof f.uncheckable?f.uncheckable:!x.is.radio()}},set:{initialLoad:function(){H=!0},checked:function(){x.verbose("Setting class to checked");
K.removeClass(q.indeterminate).addClass(q.checked);x.is.radio()&&x.uncheckOthers();!x.is.indeterminate()&&x.is.checked()?x.debug("Input is already checked, skipping input property change"):(x.verbose("Setting state to checked",B),z.prop("indeterminate",!1).prop("checked",!0),x.trigger.change())},unchecked:function(){x.verbose("Removing checked class");K.removeClass(q.indeterminate).removeClass(q.checked);!x.is.indeterminate()&&x.is.unchecked()?x.debug("Input is already unchecked"):(x.debug("Setting state to unchecked"),
z.prop("indeterminate",!1).prop("checked",!1),x.trigger.change())},indeterminate:function(){x.verbose("Setting class to indeterminate");K.addClass(q.indeterminate);x.is.indeterminate()?x.debug("Input is already indeterminate, skipping input property change"):(x.debug("Setting state to indeterminate"),z.prop("indeterminate",!0),x.trigger.change())},determinate:function(){x.verbose("Removing indeterminate class");K.removeClass(q.indeterminate);x.is.determinate()?x.debug("Input is already determinate, skipping input property change"):
(x.debug("Setting state to determinate"),z.prop("indeterminate",!1))},disabled:function(){x.verbose("Setting class to disabled");K.addClass(q.disabled);x.is.disabled()?x.debug("Input is already disabled, skipping input property change"):(x.debug("Setting state to disabled"),z.prop("disabled","disabled"),x.trigger.change())},enabled:function(){x.verbose("Removing disabled class");K.removeClass(q.disabled);x.is.enabled()?x.debug("Input is already enabled, skipping input property change"):(x.debug("Setting state to enabled"),
z.prop("disabled",!1),x.trigger.change())},tabbable:function(){x.verbose("Adding tabindex to checkbox");z.attr("tabindex")===c&&z.attr("tabindex",0)}},remove:{initialLoad:function(){H=!1}},trigger:{change:function(){var a=e.createEvent("HTMLEvents"),b=z[0];b&&(x.verbose("Triggering native change event"),a.initEvent("change",!0,!1),b.dispatchEvent(a))}},create:{label:function(){0<z.prevAll(u.label).length?(z.prev(u.label).detach().insertAfter(z),x.debug("Moving existing label",F)):x.has.label()||(F=
a("<label>").insertAfter(z),x.debug("Creating label",F))}},has:{label:function(){return 0<F.length}},bind:{events:function(){x.verbose("Attaching checkbox events");K.on("click"+E,x.event.click).on("keydown"+E,u.input,x.event.keydown).on("keyup"+E,u.input,x.event.keyup)}},unbind:{events:function(){x.debug("Removing events");K.off(E)}},uncheckOthers:function(){var a=x.get.otherRadios();x.debug("Unchecking other radios",a);a.removeClass(q.checked)},toggle:function(){x.can.change()?x.is.indeterminate()||
x.is.unchecked()?(x.debug("Currently unchecked"),x.check()):x.is.checked()&&x.can.uncheck()&&(x.debug("Currently checked"),x.uncheck()):x.is.radio()||x.debug("Checkbox is read-only or disabled, ignoring toggle")},setting:function(b,d){x.debug("Changing setting",b,d);if(a.isPlainObject(b))a.extend(!0,f,b);else if(d!==c)a.isPlainObject(f[b])?a.extend(!0,f[b],d):f[b]=d;else return f[b]},internal:function(b,d){if(a.isPlainObject(b))a.extend(!0,x,b);else if(d!==c)x[b]=d;else return x[b]},debug:function(){!f.silent&&
f.debug&&(f.performance?x.performance.log(arguments):(x.debug=Function.prototype.bind.call(console.info,console,f.name+":"),x.debug.apply(console,arguments)))},verbose:function(){!f.silent&&f.verbose&&f.debug&&(f.performance?x.performance.log(arguments):(x.verbose=Function.prototype.bind.call(console.info,console,f.name+":"),x.verbose.apply(console,arguments)))},error:function(){f.silent||(x.error=Function.prototype.bind.call(console.error,console,f.name+":"),x.error.apply(console,arguments))},performance:{log:function(a){var b,
c;f.performance&&(b=(new Date).getTime(),c=h||b,c=b-c,h=b,g.push({Name:a[0],Arguments:[].slice.call(a,1)||"",Element:L,"Execution Time":c}));clearTimeout(x.performance.timer);x.performance.timer=setTimeout(x.performance.display,500)},display:function(){var b=f.name+":",d=0;h=!1;clearTimeout(x.performance.timer);a.each(g,function(a,b){d+=b["Execution Time"]});b+=" "+d+"ms";n&&(b+=" '"+n+"'");(console.group!==c||console.table!==c)&&0<g.length&&(console.groupCollapsed(b),console.table?console.table(g):
a.each(g,function(a,b){console.log(b.Name+": "+b["Execution Time"]+"ms")}),console.groupEnd());g=[]}},invoke:function(b,d,e){var f=I,g,h,l;d=d||r;e=L||e;"string"==typeof b&&f!==c&&(b=b.split(/[\. ]/),g=b.length-1,a.each(b,function(d,e){var l=d!=g?e+b[d+1].charAt(0).toUpperCase()+b[d+1].slice(1):b;if(a.isPlainObject(f[l])&&d!=g)f=f[l];else{if(f[l]!==c)return h=f[l],!1;if(a.isPlainObject(f[e])&&d!=g)f=f[e];else return f[e]!==c?h=f[e]:x.error(v.method,b),!1}}));a.isFunction(h)?l=h.apply(e,d):h!==c&&
(l=h);a.isArray(t)?t.push(l):t!==c?t=[t,l]:l!==c&&(t=l);return h}};p?(I===c&&x.initialize(),x.invoke(m)):(I!==c&&I.invoke("destroy"),x.initialize())});return t!==c?t:this};a.fn.checkbox.settings={name:"Checkbox",namespace:"checkbox",silent:!1,debug:!1,verbose:!0,performance:!0,uncheckable:"auto",fireOnInit:!1,onChange:function(){},beforeChecked:function(){},beforeUnchecked:function(){},beforeDeterminate:function(){},beforeIndeterminate:function(){},onChecked:function(){},onUnchecked:function(){},
onDeterminate:function(){},onIndeterminate:function(){},onEnable:function(){},onDisable:function(){},onEnabled:function(){},onDisabled:function(){},className:{checked:"checked",indeterminate:"indeterminate",disabled:"disabled",hidden:"hidden",radio:"radio",readOnly:"read-only"},error:{method:"The method you called is not defined"},selector:{checkbox:".ui.checkbox",label:"label, .box",input:'input[type="checkbox"], input[type="radio"]',link:"a[href]"}}})(jQuery,window,document);
(function(a,b,e,c){b="undefined"!=typeof b&&b.Math==Math?b:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();a.fn.dimmer=function(b){var f=a(this),n=(new Date).getTime(),h=[],g=arguments[0],m="string"==typeof g,p=[].slice.call(arguments,1),r;f.each(function(){var t=a.isPlainObject(b)?a.extend(!0,{},a.fn.dimmer.settings,b):a.extend({},a.fn.dimmer.settings),l=t.selector,q=t.namespace,w=t.className,u=t.error,v="."+q,E="module-"+q,A=f.selector||"",K="ontouchstart"in e.documentElement?
"touchstart":"click",F=a(this),z,B,H=this,G=F.data(E),I;I={preinitialize:function(){I.is.dimmer()?(B=F.parent(),z=F):(B=F,z=I.has.dimmer()?t.dimmerName?B.find(l.dimmer).filter("."+t.dimmerName):B.find(l.dimmer):I.create(),I.set.variation())},initialize:function(){I.debug("Initializing dimmer",t);I.bind.events();I.set.dimmable();I.instantiate()},instantiate:function(){I.verbose("Storing instance of module",I);G=I;F.data(E,G)},destroy:function(){I.verbose("Destroying previous module",z);I.unbind.events();
I.remove.variation();B.off(v)},bind:{events:function(){if("hover"==t.on)B.on("mouseenter"+v,I.show).on("mouseleave"+v,I.hide);else if("click"==t.on)B.on(K+v,I.toggle);I.is.page()&&(I.debug("Setting as a page dimmer",B),I.set.pageDimmer());I.is.closable()&&(I.verbose("Adding dimmer close event",z),B.on(K+v,l.dimmer,I.event.click))}},unbind:{events:function(){F.removeData(E);B.off(v)}},event:{click:function(b){I.verbose("Determining if event occured on dimmer",b);if(0===z.find(b.target).length||a(b.target).is(l.content))I.hide(),
b.stopImmediatePropagation()}},addContent:function(b){b=a(b);I.debug("Add content to dimmer",b);b.parent()[0]!==z[0]&&b.detach().appendTo(z)},create:function(){var b=a(t.template.dimmer());t.dimmerName&&(I.debug("Creating named dimmer",t.dimmerName),b.addClass(t.dimmerName));b.appendTo(B);return b},show:function(b){b=a.isFunction(b)?b:function(){};I.debug("Showing dimmer",z,t);I.is.dimmed()&&!I.is.animating()||!I.is.enabled()?I.debug("Dimmer is already shown or disabled"):(I.animate.show(b),t.onShow.call(H),
t.onChange.call(H))},hide:function(b){b=a.isFunction(b)?b:function(){};I.is.dimmed()||I.is.animating()?(I.debug("Hiding dimmer",z),I.animate.hide(b),t.onHide.call(H),t.onChange.call(H)):I.debug("Dimmer is not visible")},toggle:function(){I.verbose("Toggling dimmer visibility",z);I.is.dimmed()?I.hide():I.show()},animate:{show:function(b){b=a.isFunction(b)?b:function(){};t.useCSS&&a.fn.transition!==c&&z.transition("is supported")?("auto"!==t.opacity&&I.set.opacity(),z.transition({animation:t.transition+
" in",queue:!1,duration:I.get.duration(),useFailSafe:!0,onStart:function(){I.set.dimmed()},onComplete:function(){I.set.active();b()}})):(I.verbose("Showing dimmer animation with javascript"),I.set.dimmed(),"auto"==t.opacity&&(t.opacity=.8),z.stop().css({opacity:0,width:"100%",height:"100%"}).fadeTo(I.get.duration(),t.opacity,function(){z.removeAttr("style");I.set.active();b()}))},hide:function(b){b=a.isFunction(b)?b:function(){};t.useCSS&&a.fn.transition!==c&&z.transition("is supported")?(I.verbose("Hiding dimmer with css"),
z.transition({animation:t.transition+" out",queue:!1,duration:I.get.duration(),useFailSafe:!0,onStart:function(){I.remove.dimmed()},onComplete:function(){I.remove.active();b()}})):(I.verbose("Hiding dimmer with javascript"),I.remove.dimmed(),z.stop().fadeOut(I.get.duration(),function(){I.remove.active();z.removeAttr("style");b()}))}},get:{dimmer:function(){return z},duration:function(){return"object"==typeof t.duration?I.is.active()?t.duration.hide:t.duration.show:t.duration}},has:{dimmer:function(){return t.dimmerName?
0<F.find(l.dimmer).filter("."+t.dimmerName).length:0<F.find(l.dimmer).length}},is:{active:function(){return z.hasClass(w.active)},animating:function(){return z.is(":animated")||z.hasClass(w.animating)},closable:function(){return"auto"==t.closable?"hover"==t.on?!1:!0:t.closable},dimmer:function(){return F.hasClass(w.dimmer)},dimmable:function(){return F.hasClass(w.dimmable)},dimmed:function(){return B.hasClass(w.dimmed)},disabled:function(){return B.hasClass(w.disabled)},enabled:function(){return!I.is.disabled()},
page:function(){return B.is("body")},pageDimmer:function(){return z.hasClass(w.pageDimmer)}},can:{show:function(){return!z.hasClass(w.disabled)}},set:{opacity:function(a){var b=z.css("background-color"),c=(b=b.split(","))&&3==b.length,d=b&&4==b.length;a=0===t.opacity?0:t.opacity||a;c||d?(b[3]=a+")",b=b.join(",")):b="rgba(0, 0, 0, "+a+")";I.debug("Setting opacity to",a);z.css("background-color",b)},active:function(){z.addClass(w.active)},dimmable:function(){B.addClass(w.dimmable)},dimmed:function(){B.addClass(w.dimmed)},
pageDimmer:function(){z.addClass(w.pageDimmer)},disabled:function(){z.addClass(w.disabled)},variation:function(a){(a=a||t.variation)&&z.addClass(a)}},remove:{active:function(){z.removeClass(w.active)},dimmed:function(){B.removeClass(w.dimmed)},disabled:function(){z.removeClass(w.disabled)},variation:function(a){(a=a||t.variation)&&z.removeClass(a)}},setting:function(b,d){I.debug("Changing setting",b,d);if(a.isPlainObject(b))a.extend(!0,t,b);else if(d!==c)a.isPlainObject(t[b])?a.extend(!0,t[b],d):
t[b]=d;else return t[b]},internal:function(b,d){if(a.isPlainObject(b))a.extend(!0,I,b);else if(d!==c)I[b]=d;else return I[b]},debug:function(){!t.silent&&t.debug&&(t.performance?I.performance.log(arguments):(I.debug=Function.prototype.bind.call(console.info,console,t.name+":"),I.debug.apply(console,arguments)))},verbose:function(){!t.silent&&t.verbose&&t.debug&&(t.performance?I.performance.log(arguments):(I.verbose=Function.prototype.bind.call(console.info,console,t.name+":"),I.verbose.apply(console,
arguments)))},error:function(){t.silent||(I.error=Function.prototype.bind.call(console.error,console,t.name+":"),I.error.apply(console,arguments))},performance:{log:function(a){var b,c;t.performance&&(b=(new Date).getTime(),c=n||b,c=b-c,n=b,h.push({Name:a[0],Arguments:[].slice.call(a,1)||"",Element:H,"Execution Time":c}));clearTimeout(I.performance.timer);I.performance.timer=setTimeout(I.performance.display,500)},display:function(){var b=t.name+":",d=0;n=!1;clearTimeout(I.performance.timer);a.each(h,
function(a,b){d+=b["Execution Time"]});b+=" "+d+"ms";A&&(b+=" '"+A+"'");1<f.length&&(b+=" ("+f.length+")");(console.group!==c||console.table!==c)&&0<h.length&&(console.groupCollapsed(b),console.table?console.table(h):a.each(h,function(a,b){console.log(b.Name+": "+b["Execution Time"]+"ms")}),console.groupEnd());h=[]}},invoke:function(b,d,e){var f=G,g,h,l;d=d||p;e=H||e;"string"==typeof b&&f!==c&&(b=b.split(/[\. ]/),g=b.length-1,a.each(b,function(d,e){var l=d!=g?e+b[d+1].charAt(0).toUpperCase()+b[d+
1].slice(1):b;if(a.isPlainObject(f[l])&&d!=g)f=f[l];else{if(f[l]!==c)return h=f[l],!1;if(a.isPlainObject(f[e])&&d!=g)f=f[e];else return f[e]!==c?h=f[e]:I.error(u.method,b),!1}}));a.isFunction(h)?l=h.apply(e,d):h!==c&&(l=h);a.isArray(r)?r.push(l):r!==c?r=[r,l]:l!==c&&(r=l);return h}};I.preinitialize();m?(G===c&&I.initialize(),I.invoke(g)):(G!==c&&G.invoke("destroy"),I.initialize())});return r!==c?r:this};a.fn.dimmer.settings={name:"Dimmer",namespace:"dimmer",silent:!1,debug:!1,verbose:!1,performance:!0,
dimmerName:!1,variation:!1,closable:"auto",useCSS:!0,transition:"fade",on:!1,opacity:"auto",duration:{show:500,hide:500},onChange:function(){},onShow:function(){},onHide:function(){},error:{method:"The method you called is not defined."},className:{active:"active",animating:"animating",dimmable:"dimmable",dimmed:"dimmed",dimmer:"dimmer",disabled:"disabled",hide:"hide",pageDimmer:"page",show:"show"},selector:{dimmer:"> .ui.dimmer",content:".ui.dimmer > .content, .ui.dimmer > .content > .center"},template:{dimmer:function(){return a("<div />").attr("class",
"ui dimmer")}}}})(jQuery,window,document);
(function(a,b,e,c){b="undefined"!=typeof b&&b.Math==Math?b:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();a.fn.dropdown=function(d){var f=a(this),n=a(e),h=f.selector||"",g="ontouchstart"in e.documentElement,m=(new Date).getTime(),p=[],r=arguments[0],t="string"==typeof r,l=[].slice.call(arguments,1),q;f.each(function(w){var u=a.isPlainObject(d)?a.extend(!0,{},a.fn.dropdown.settings,d):a.extend({},a.fn.dropdown.settings),v=u.className,E=u.message,A=u.fields,K=u.keys,F=u.metadata,
z=u.namespace,B=u.regExp,H=u.selector,G=u.error,I=u.templates,N="."+z,L="module-"+z,x=a(this),S=a(u.context),D=x.find(H.text),J=x.find(H.search),V=x.find(H.sizer),Y=x.find(H.input),W=x.find(H.icon),U=0<x.prev().find(H.text).length?x.prev().find(H.text):x.prev(),M=x.children(H.menu),Q=M.find(H.item),X=!1,ea=!1,O=!1,aa=this,ia=x.data(L),ta,da,ha,Ba,y,za,pa,C;C={initialize:function(){C.debug("Initializing dropdown",u);C.is.alreadySetup()?C.setup.reference():(C.setup.layout(),C.refreshData(),C.save.defaults(),
C.restore.selected(),C.create.id(),C.bind.events(),C.observeChanges(),C.instantiate())},instantiate:function(){C.verbose("Storing instance of dropdown",C);ia=C;x.data(L,C)},destroy:function(){C.verbose("Destroying previous dropdown",x);C.remove.tabbable();x.off(N).removeData(L);M.off(N);n.off(Ba);C.disconnect.menuObserver();C.disconnect.selectObserver()},observeChanges:function(){"MutationObserver"in b&&(za=new MutationObserver(C.event.select.mutation),pa=new MutationObserver(C.event.menu.mutation),
C.debug("Setting up mutation observer",za,pa),C.observe.select(),C.observe.menu())},disconnect:{menuObserver:function(){pa&&pa.disconnect()},selectObserver:function(){za&&za.disconnect()}},observe:{select:function(){C.has.input()&&za.observe(Y[0],{childList:!0,subtree:!0})},menu:function(){C.has.menu()&&pa.observe(M[0],{childList:!0,subtree:!0})}},create:{id:function(){y=(Math.random().toString(16)+"000000000").substr(2,8);Ba="."+y;C.verbose("Creating unique id for element",y)},userChoice:function(b){var d,
e,f;b=b||C.get.userValues();if(!b)return!1;b=a.isArray(b)?b:[b];a.each(b,function(b,g){!1===C.get.item(g)&&(f=u.templates.addition(C.add.variables(E.addResult,g)),e=a("<div />").html(f).attr("data-"+F.value,g).attr("data-"+F.text,g).addClass(v.addition).addClass(v.item),u.hideAdditions&&e.addClass(v.hidden),d=d===c?e:d.add(e),C.verbose("Creating user choices for value",g,e))});return d},userLabels:function(b){if(b=C.get.userValues())C.debug("Adding user labels",b),a.each(b,function(a,b){C.verbose("Adding custom user value");
C.add.label(b,b)})},menu:function(){M=a("<div />").addClass(v.menu).appendTo(x)},sizer:function(){V=a("<span />").addClass(v.sizer).insertAfter(J)}},search:function(a){a=a!==c?a:C.get.query();C.verbose("Searching for query",a);C.has.minCharacters(a)?C.filter(a):C.hide()},select:{firstUnfiltered:function(){C.verbose("Selecting first non-filtered element");C.remove.selectedItem();Q.not(H.unselectable).not(H.addition+H.hidden).eq(0).addClass(v.selected)},nextAvailable:function(a){a=a.eq(0);var b=a.nextAll(H.item).not(H.unselectable).eq(0);
a=a.prevAll(H.item).not(H.unselectable).eq(0);0<b.length?(C.verbose("Moving selection to",b),b.addClass(v.selected)):(C.verbose("Moving selection to",a),a.addClass(v.selected))}},setup:{api:function(){var a={debug:u.debug,urlData:{value:C.get.value(),query:C.get.query()},on:!1};C.verbose("First request, initializing API");x.api(a)},layout:function(){x.is("select")&&(C.setup.select(),C.setup.returnedObject());C.has.menu()||C.create.menu();C.is.search()&&!C.has.search()&&(C.verbose("Adding search input"),
J=a("<input />").addClass(v.search).prop("autocomplete","off").insertBefore(D));C.is.multiple()&&C.is.searchSelection()&&!C.has.sizer()&&C.create.sizer();u.allowTab&&C.set.tabbable()},select:function(){var b=C.get.selectValues();C.debug("Dropdown initialized on a select",b);x.is("select")&&(Y=x);0<Y.parent(H.dropdown).length?(C.debug("UI dropdown already exists. Creating dropdown menu only"),x=Y.closest(H.dropdown),C.has.menu()||C.create.menu(),M=x.children(H.menu),C.setup.menu(b)):(C.debug("Creating entire dropdown from select"),
x=a("<div />").attr("class",Y.attr("class")).addClass(v.selection).addClass(v.dropdown).html(I.dropdown(b)).insertBefore(Y),Y.hasClass(v.multiple)&&!1===Y.prop("multiple")&&(C.error(G.missingMultiple),Y.prop("multiple",!0)),Y.is("[multiple]")&&C.set.multiple(),Y.prop("disabled")&&(C.debug("Disabling dropdown"),x.addClass(v.disabled)),Y.removeAttr("class").detach().prependTo(x));C.refresh()},menu:function(a){M.html(I.menu(a,A));Q=M.find(H.item)},reference:function(){C.debug("Dropdown behavior was called on select, replacing with closest dropdown");
x=x.parent(H.dropdown);C.refresh();C.setup.returnedObject();t&&(ia=C,C.invoke(r))},returnedObject:function(){var a=f.slice(0,w),b=f.slice(w+1);f=a.add(x).add(b)}},refresh:function(){C.refreshSelectors();C.refreshData()},refreshItems:function(){Q=M.find(H.item)},refreshSelectors:function(){C.verbose("Refreshing selector cache");D=x.find(H.text);J=x.find(H.search);Y=x.find(H.input);W=x.find(H.icon);U=0<x.prev().find(H.text).length?x.prev().find(H.text):x.prev();M=x.children(H.menu);Q=M.find(H.item)},
refreshData:function(){C.verbose("Refreshing cached metadata");Q.removeData(F.text).removeData(F.value)},clearData:function(){C.verbose("Clearing metadata");Q.removeData(F.text).removeData(F.value);x.removeData(F.defaultText).removeData(F.defaultValue).removeData(F.placeholderText)},toggle:function(){C.verbose("Toggling menu visibility");C.is.active()?C.hide():C.show()},show:function(b){b=a.isFunction(b)?b:function(){};if(C.can.show()&&!C.is.active()){C.debug("Showing dropdown");!C.has.message()||
C.has.maxSelections()||C.has.allResultsFiltered()||C.remove.message();if(C.is.allFiltered())return!0;!1!==u.onShow.call(aa)&&C.animate.show(function(){C.can.click()&&C.bind.intent();C.has.menuSearch()&&C.focusSearch();C.set.visible();b.call(aa)})}},hide:function(b){b=a.isFunction(b)?b:function(){};C.is.active()&&(C.debug("Hiding dropdown"),!1!==u.onHide.call(aa)&&C.animate.hide(function(){C.remove.visible();b.call(aa)}))},hideOthers:function(){C.verbose("Finding other dropdowns to hide");f.not(x).has(H.menu+
"."+v.visible).dropdown("hide")},hideMenu:function(){C.verbose("Hiding menu  instantaneously");C.remove.active();C.remove.visible();M.transition("hide")},hideSubMenus:function(){var a=M.children(H.item).find(H.menu);C.verbose("Hiding sub menus",a);a.transition("hide")},bind:{events:function(){g&&C.bind.touchEvents();C.bind.keyboardEvents();C.bind.inputEvents();C.bind.mouseEvents()},touchEvents:function(){C.debug("Touch device detected binding additional touch events");if(!C.is.searchSelection()&&
C.is.single())x.on("touchstart"+N,C.event.test.toggle);M.on("touchstart"+N,H.item,C.event.item.mouseenter)},keyboardEvents:function(){C.verbose("Binding keyboard events");x.on("keydown"+N,C.event.keydown);if(C.has.search())x.on(C.get.inputEvent()+N,H.search,C.event.input);if(C.is.multiple())n.on("keydown"+Ba,C.event.document.keydown)},inputEvents:function(){C.verbose("Binding input change events");x.on("change"+N,H.input,C.event.change)},mouseEvents:function(){C.verbose("Binding mouse events");if(C.is.multiple())x.on("click"+
N,H.label,C.event.label.click).on("click"+N,H.remove,C.event.remove.click);if(C.is.searchSelection()){if(x.on("mousedown"+N,C.event.mousedown).on("mouseup"+N,C.event.mouseup).on("mousedown"+N,H.menu,C.event.menu.mousedown).on("mouseup"+N,H.menu,C.event.menu.mouseup).on("click"+N,H.icon,C.event.icon.click).on("focus"+N,H.search,C.event.search.focus).on("click"+N,H.search,C.event.search.focus).on("blur"+N,H.search,C.event.search.blur).on("click"+N,H.text,C.event.text.focus),C.is.multiple())x.on("click"+
N,C.event.click)}else{if("click"==u.on)x.on("click"+N,H.icon,C.event.icon.click).on("click"+N,C.event.test.toggle);else if("hover"==u.on)x.on("mouseenter"+N,C.delay.show).on("mouseleave"+N,C.delay.hide);else x.on(u.on+N,C.toggle);x.on("mousedown"+N,C.event.mousedown).on("mouseup"+N,C.event.mouseup).on("focus"+N,C.event.focus).on("blur"+N,C.event.blur)}M.on("mouseenter"+N,H.item,C.event.item.mouseenter).on("mouseleave"+N,H.item,C.event.item.mouseleave).on("click"+N,H.item,C.event.item.click)},intent:function(){C.verbose("Binding hide intent event to document");
if(g)n.on("touchstart"+Ba,C.event.test.touch).on("touchmove"+Ba,C.event.test.touch);n.on("click"+Ba,C.event.test.hide)}},unbind:{intent:function(){C.verbose("Removing hide intent event from document");g&&n.off("touchstart"+Ba).off("touchmove"+Ba);n.off("click"+Ba)}},filter:function(a){var b=a!==c?a:C.get.query(),d=function(){C.is.multiple()&&C.filterActive();C.select.firstUnfiltered();C.has.allResultsFiltered()?u.onNoResults.call(aa,b)?u.allowAdditions?u.hideAdditions&&(C.verbose("User addition with no menu, setting empty style"),
C.set.empty(),C.hideMenu()):(C.verbose("All items filtered, showing message",b),C.add.message(E.noResults)):(C.verbose("All items filtered, hiding dropdown",b),C.hideMenu()):(C.remove.empty(),C.remove.message());u.allowAdditions&&C.add.userSuggestion(a);C.is.searchSelection()&&C.can.show()&&C.is.focusedOnSearch()&&C.show()};u.useLabels&&C.has.maxSelections()||(u.apiSettings?C.can.useAPI()?C.queryRemote(b,function(){d()}):C.error(G.noAPI):(C.filterItems(b),d()))},queryRemote:function(b,c){var d={errorDuration:!1,
cache:"local",throttle:u.throttle,urlData:{query:b},onError:function(){C.add.message(E.serverError);c()},onFailure:function(){C.add.message(E.serverError);c()},onSuccess:function(a){C.remove.message();C.setup.menu({values:a[A.remoteValues]});c()}};x.api("get request")||C.setup.api();d=a.extend(!0,{},d,u.apiSettings);x.api("setting",d).api("query")},filterItems:function(b){var d=b!==c?b:C.get.query(),e=null;b=C.escape.regExp(d);var f=new RegExp("^"+b,"igm");C.has.query()&&(e=[],C.verbose("Searching for matching values",
d),Q.each(function(){var b=a(this),c;if("both"==u.match||"text"==u.match)if(c=String(C.get.choiceText(b,!1)),-1!==c.search(f)||"exact"===u.fullTextSearch&&C.exactSearch(d,c)||!0===u.fullTextSearch&&C.fuzzySearch(d,c))return e.push(this),!0;if("both"==u.match||"value"==u.match)if(b=String(C.get.choiceValue(b,c)),-1!==b.search(f)||u.fullTextSearch&&C.fuzzySearch(d,b))return e.push(this),!0}));C.debug("Showing only matched items",d);C.remove.filteredItem();e&&Q.not(e).addClass(v.filtered)},fuzzySearch:function(a,
b){var c=b.length,d=a.length;a=a.toLowerCase();b=b.toLowerCase();if(d>c)return!1;if(d===c)return a===b;var e=0,f=0;a:for(;e<d;e++){for(var g=a.charCodeAt(e);f<c;)if(b.charCodeAt(f++)===g)continue a;return!1}return!0},exactSearch:function(a,b){a=a.toLowerCase();b=b.toLowerCase();return-1<b.indexOf(a)?!0:!1},filterActive:function(){u.useLabels&&Q.filter("."+v.active).addClass(v.filtered)},focusSearch:function(a){C.has.search()&&!C.is.focusedOnSearch()&&(a?(x.off("focus"+N,H.search),J.focus(),x.on("focus"+
N,H.search,C.event.search.focus)):J.focus())},forceSelection:function(){var a=Q.not(v.filtered).filter("."+v.selected).eq(0),b=Q.not(v.filtered).filter("."+v.active).eq(0),a=0<a.length?a:b;0<a.length?(C.debug("Forcing partial selection to selected item",a),C.event.item.click.call(a,{},!0)):(u.allowAdditions&&C.set.selected(C.get.query()),C.remove.searchTerm())},event:{change:function(){O||(C.debug("Input changed, updating selection"),C.set.selected())},focus:function(){u.showOnFocus&&!X&&C.is.hidden()&&
!da&&C.show()},blur:function(a){da=e.activeElement===this;X||da||(C.remove.activeLabel(),C.hide())},mousedown:function(){C.is.searchSelection()?ha=!0:X=!0},mouseup:function(){C.is.searchSelection()?ha=!1:X=!1},click:function(b){a(b.target).is(x)&&(C.is.focusedOnSearch()?C.show():C.focusSearch())},search:{focus:function(){X=!0;C.is.multiple()&&C.remove.activeLabel();u.showOnFocus&&C.search()},blur:function(a){da=e.activeElement===this;ha||ea||da||(u.forceSelection&&C.forceSelection(),C.hide());ha=
!1}},icon:{click:function(a){C.toggle()}},text:{focus:function(a){X=!0;C.focusSearch()}},input:function(a){(C.is.multiple()||C.is.searchSelection())&&C.set.filtered();clearTimeout(C.timer);C.timer=setTimeout(C.search,u.delay.search)},label:{click:function(b){var c=a(this),d=x.find(H.label),e=d.filter("."+v.active),f=c.nextAll("."+v.active),g=c.prevAll("."+v.active),f=0<f.length?c.nextUntil(f).add(e).add(c):c.prevUntil(g).add(e).add(c);b.shiftKey?(e.removeClass(v.active),f.addClass(v.active)):b.ctrlKey?
c.toggleClass(v.active):(e.removeClass(v.active),c.addClass(v.active));u.onLabelSelect.apply(this,d.filter("."+v.active))}},remove:{click:function(){var b=a(this).parent();b.hasClass(v.active)?C.remove.activeLabels():C.remove.activeLabels(b)}},test:{toggle:function(a){var b=C.is.multiple()?C.show:C.toggle;C.is.bubbledLabelClick(a)||C.is.bubbledIconClick(a)||C.determine.eventOnElement(a,b)&&a.preventDefault()},touch:function(a){C.determine.eventOnElement(a,function(){"touchstart"==a.type?C.timer=setTimeout(function(){C.hide()},
u.delay.touch):"touchmove"==a.type&&clearTimeout(C.timer)});a.stopPropagation()},hide:function(a){C.determine.eventInModule(a,C.hide)}},select:{mutation:function(a){C.debug("<select> modified, recreating menu");C.setup.select()}},menu:{mutation:function(b){var c=b[0];b=c.addedNodes?a(c.addedNodes[0]):a(!1);c=c.removedNodes?a(c.removedNodes[0]):a(!1);c=b.add(c);b=c.is(H.addition)||0<c.closest(H.addition).length;c=c.is(H.message)||0<c.closest(H.message).length;b||c?(C.debug("Updating item selector cache"),
C.refreshItems()):(C.debug("Menu modified, updating selector cache"),C.refresh())},mousedown:function(){ea=!0},mouseup:function(){ea=!1}},item:{mouseenter:function(b){var c=a(b.target),d=a(this),e=d.children(H.menu),f=d.siblings(H.item).children(H.menu),d=0<e.length;0<e.find(c).length||!d||(clearTimeout(C.itemTimer),C.itemTimer=setTimeout(function(){C.verbose("Showing sub-menu",e);a.each(f,function(){C.animate.hide(!1,a(this))});C.animate.show(!1,e)},u.delay.show),b.preventDefault())},mouseleave:function(b){var c=
a(this).children(H.menu);0<c.length&&(clearTimeout(C.itemTimer),C.itemTimer=setTimeout(function(){C.verbose("Hiding sub-menu",c);C.animate.hide(!1,c)},u.delay.hide))},click:function(b,c){var d=a(this),e=b?a(b.target):a(""),f=d.find(H.menu),g=C.get.choiceText(d),h=C.get.choiceValue(d,g),l=0<f.length;0<f.find(e).length||l&&!u.allowCategorySelection||(C.is.searchSelection()&&(u.allowAdditions&&C.remove.userAddition(),C.remove.searchTerm(),C.is.focusedOnSearch()||1==c||C.focusSearch(!0)),u.useLabels||
(C.remove.filteredItem(),C.set.scrollPosition(d)),C.determine.selectAction.call(this,g,h))}},document:{keydown:function(a){var b=a.which;if(C.is.inObject(b,K)){var c=x.find(H.label),d=c.filter("."+v.active);d.data(F.value);var e=c.index(d),f=0<d.length,g=1<d.length,h=0===e,e=e+1==c.length,l=C.is.searchSelection(),m=C.is.focusedOnSearch(),n=C.is.focused(),p=m&&0===C.get.caretPosition();if(!l||f||m)b==K.leftArrow?!n&&!p||f?f&&(a.shiftKey?C.verbose("Adding previous label to selection"):(C.verbose("Selecting previous label"),
c.removeClass(v.active)),h&&!g?d.addClass(v.active):d.prev(H.siblingLabel).addClass(v.active).end(),a.preventDefault()):(C.verbose("Selecting previous label"),c.last().addClass(v.active)):b==K.rightArrow?(n&&!f&&c.first().addClass(v.active),f&&(a.shiftKey?C.verbose("Adding next label to selection"):(C.verbose("Selecting next label"),c.removeClass(v.active)),e?l?m?c.removeClass(v.active):C.focusSearch():g?d.next(H.siblingLabel).addClass(v.active):d.addClass(v.active):d.next(H.siblingLabel).addClass(v.active),
a.preventDefault())):b==K.deleteKey||b==K.backspace?f?(C.verbose("Removing active labels"),e&&l&&!m&&C.focusSearch(),d.last().next(H.siblingLabel).addClass(v.active),C.remove.activeLabels(d),a.preventDefault()):p&&!f&&b==K.backspace&&(C.verbose("Removing last label on input backspace"),d=c.last().addClass(v.active),C.remove.activeLabels(d)):d.removeClass(v.active)}}},keydown:function(a){var b=a.which;if(C.is.inObject(b,K)){var c=Q.not(H.unselectable).filter("."+v.selected).eq(0),d=M.children("."+
v.active).eq(0),c=0<c.length?c:d,d=0<c.length?c.siblings(":not(."+v.filtered+")").addBack():M.children(":not(."+v.filtered+")"),e=c.children(H.menu),f=c.closest(H.menu),g=f.hasClass(v.visible)||f.hasClass(v.animating)||0<f.parent(H.menu).length,h=0<e.length,l=0<c.length,m=0<c.not(H.unselectable).length,n=b==K.delimiter&&u.allowAdditions&&C.is.multiple();u.allowAdditions&&u.hideAdditions&&(b==K.enter||n)&&m&&(C.verbose("Selecting item from keyboard shortcut",c),C.event.item.click.call(c,a),C.is.searchSelection()&&
C.remove.searchTerm());if(C.is.visible()){if(b==K.enter||n)b==K.enter&&l&&h&&!u.allowCategorySelection?(C.verbose("Pressed enter on unselectable category, opening sub menu"),b=K.rightArrow):m&&(C.verbose("Selecting item from keyboard shortcut",c),C.event.item.click.call(c,a),C.is.searchSelection()&&C.remove.searchTerm()),a.preventDefault();l&&(b==K.leftArrow&&(m=f[0]!==M[0])&&(C.verbose("Left key pressed, closing sub-menu"),C.animate.hide(!1,f),c.removeClass(v.selected),f.closest(H.item).addClass(v.selected),
a.preventDefault()),b==K.rightArrow&&h&&(C.verbose("Right key pressed, opening sub-menu"),C.animate.show(!1,e),c.removeClass(v.selected),e.find(H.item).eq(0).addClass(v.selected),a.preventDefault()));if(b==K.upArrow){e=l&&g?c.prevAll(H.item+":not("+H.unselectable+")").eq(0):Q.eq(0);if(0>d.index(e)){C.verbose("Up key pressed but reached top of current menu");a.preventDefault();return}C.verbose("Up key pressed, changing active item");c.removeClass(v.selected);e.addClass(v.selected);C.set.scrollPosition(e);
u.selectOnKeydown&&C.is.single()&&C.set.selectedItem(e);a.preventDefault()}if(b==K.downArrow){e=l&&g?e=c.nextAll(H.item+":not("+H.unselectable+")").eq(0):Q.eq(0);if(0===e.length){C.verbose("Down key pressed but reached bottom of current menu");a.preventDefault();return}C.verbose("Down key pressed, changing active item");Q.removeClass(v.selected);e.addClass(v.selected);C.set.scrollPosition(e);u.selectOnKeydown&&C.is.single()&&C.set.selectedItem(e);a.preventDefault()}b==K.pageUp&&(C.scrollPage("up"),
a.preventDefault());b==K.pageDown&&(C.scrollPage("down"),a.preventDefault());b==K.escape&&(C.verbose("Escape key pressed, closing dropdown"),C.hide())}else n&&a.preventDefault(),b!=K.downArrow||C.is.visible()||(C.verbose("Down key pressed, showing dropdown"),C.select.firstUnfiltered(),C.show(),a.preventDefault())}else C.has.search()||C.set.selectedLetter(String.fromCharCode(b))}},trigger:{change:function(){var a=e.createEvent("HTMLEvents"),b=Y[0];b&&(C.verbose("Triggering native change event"),a.initEvent("change",
!0,!1),b.dispatchEvent(a))}},determine:{selectAction:function(b,c){C.verbose("Determining action",u.action);a.isFunction(C.action[u.action])?(C.verbose("Triggering preset action",u.action,b,c),C.action[u.action].call(aa,b,c,this)):a.isFunction(u.action)?(C.verbose("Triggering user action",u.action,b,c),u.action.call(aa,b,c,this)):C.error(G.action,u.action)},eventInModule:function(b,c){var d=a(b.target),f=0<d.closest(e.documentElement).length,d=0<d.closest(x).length;c=a.isFunction(c)?c:function(){};
if(f&&!d)return C.verbose("Triggering event",c),c(),!0;C.verbose("Event occurred in dropdown, canceling callback");return!1},eventOnElement:function(b,c){var d=a(b.target),f=d.closest(H.siblingLabel),g=e.body.contains(b.target),f=0===x.find(f).length,d=0===d.closest(M).length;c=a.isFunction(c)?c:function(){};if(g&&f&&d)return C.verbose("Triggering event",c),c(),!0;C.verbose("Event occurred in dropdown menu, canceling callback");return!1}},action:{nothing:function(){},activate:function(b,d,e){d=d!==
c?d:b;C.can.activate(a(e))&&(C.set.selected(d,a(e)),C.is.multiple()&&!C.is.allFiltered()||C.hideAndClear())},select:function(b,d,e){d=d!==c?d:b;C.can.activate(a(e))&&(C.set.value(d,a(e)),C.is.multiple()&&!C.is.allFiltered()||C.hideAndClear())},combo:function(b,d,e){d=d!==c?d:b;C.set.selected(d,a(e));C.hideAndClear()},hide:function(a,b,c){C.set.value(b,a);C.hideAndClear()}},get:{id:function(){return y},defaultText:function(){return x.data(F.defaultText)},defaultValue:function(){return x.data(F.defaultValue)},
placeholderText:function(){return x.data(F.placeholderText)||""},text:function(){return D.text()},query:function(){return a.trim(J.val())},searchWidth:function(a){a=a!==c?a:J.val();V.text(a);return Math.ceil(V.width()+1)},selectionCount:function(){var b=C.get.values();return C.is.multiple()?a.isArray(b)?b.length:0:""!==C.get.value()?1:0},transition:function(a){return"auto"==u.transition?C.is.upward(a)?"slide up":"slide down":u.transition},userValues:function(){var b=C.get.values();if(!b)return!1;
b=a.isArray(b)?b:[b];return a.grep(b,function(a){return!1===C.get.item(a)})},uniqueArray:function(b){return a.grep(b,function(c,d){return a.inArray(c,b)===d})},caretPosition:function(){var a=J.get(0),b,c;if("selectionStart"in a)return a.selectionStart;if(e.selection)return a.focus(),b=e.selection.createRange(),c=b.text.length,b.moveStart("character",-a.value.length),b.text.length-c},value:function(){var b=0<Y.length?Y.val():x.data(F.value),d=a.isArray(b)&&1===b.length&&""===b[0];return b===c||d?"":
b},values:function(){var a=C.get.value();return""===a?"":!C.has.selectInput()&&C.is.multiple()?"string"==typeof a?a.split(u.delimiter):"":a},remoteValues:function(){var b=C.get.values(),c=!1;b&&("string"==typeof b&&(b=[b]),a.each(b,function(a,b){var d=C.read.remoteData(b);C.verbose("Restoring value from session data",d,b);d&&(c||(c={}),c[b]=d)}));return c},choiceText:function(b,d){d=d!==c?d:u.preserveHTML;if(b)return 0<b.find(H.menu).length&&(C.verbose("Retrieving text of element with sub-menu"),
b=b.clone(),b.find(H.menu).remove(),b.find(H.menuIcon).remove()),b.data(F.text)!==c?b.data(F.text):d?a.trim(b.html()):a.trim(b.text())},choiceValue:function(b,d){d=d||C.get.choiceText(b);return b?b.data(F.value)!==c?String(b.data(F.value)):"string"===typeof d?a.trim(d.toLowerCase()):String(d):!1},inputEvent:function(){var a=J[0];return a?a.oninput!==c?"input":a.onpropertychange!==c?"propertychange":"keyup":!1},selectValues:function(){var b={values:[]};x.find("option").each(function(){var d=a(this),
e=d.html(),f=d.attr("disabled"),d=d.attr("value")!==c?d.attr("value"):e;"auto"===u.placeholder&&""===d?b.placeholder=e:b.values.push({name:e,value:d,disabled:f})});u.placeholder&&"auto"!==u.placeholder&&(C.debug("Setting placeholder value to",u.placeholder),b.placeholder=u.placeholder);u.sortSelect?(b.values.sort(function(a,b){return a.name>b.name?1:-1}),C.debug("Retrieved and sorted values from select",b)):C.debug("Retrieved values from select",b);return b},activeItem:function(){return Q.filter("."+
v.active)},selectedItem:function(){var a=Q.not(H.unselectable).filter("."+v.selected);return 0<a.length?a:Q.eq(0)},itemWithAdditions:function(a){var b=C.get.item(a);(a=C.create.userChoice(a))&&0<a.length&&(b=0<b.length?b.add(a):a);return b},item:function(b,d){var e=!1,f,g;b=b!==c?b:C.get.values()!==c?C.get.values():C.get.text();f=g?0<b.length:b!==c&&null!==b;g=C.is.multiple()&&a.isArray(b);d=""===b||0===b?!0:d||!1;f&&Q.each(function(){var f=a(this),h=C.get.choiceText(f),l=C.get.choiceValue(f,h);if(null!==
l&&l!==c)if(g){if(-1!==a.inArray(String(l),b)||-1!==a.inArray(h,b))e=e?e.add(f):f}else if(d){if(C.verbose("Ambiguous dropdown value using strict type check",f,b),l===b||h===b)return e=f,!0}else if(String(l)==String(b)||h==b)return C.verbose("Found select item by value",l,b),e=f,!0});return e}},check:{maxSelections:function(a){if(u.maxSelections)if(a=a!==c?a:C.get.selectionCount(),a>=u.maxSelections)C.debug("Maximum selection count reached"),u.useLabels&&(Q.addClass(v.filtered),C.add.message(E.maxSelections));
else return C.verbose("No longer at maximum selection count"),C.remove.message(),C.remove.filteredItem(),C.is.searchSelection()&&C.filterItems(),!1;return!0}},restore:{defaults:function(){C.clear();C.restore.defaultText();C.restore.defaultValue()},defaultText:function(){var a=C.get.defaultText();a===C.get.placeholderText?(C.debug("Restoring default placeholder text",a),C.set.placeholderText(a)):(C.debug("Restoring default text",a),C.set.text(a))},placeholderText:function(){C.set.placeholderText()},
defaultValue:function(){var a=C.get.defaultValue();a!==c&&(C.debug("Restoring default value",a),""!==a?(C.set.value(a),C.set.selected()):(C.remove.activeItem(),C.remove.selectedItem()))},labels:function(){u.allowAdditions&&(u.useLabels||(C.error(G.labels),u.useLabels=!0),C.debug("Restoring selected values"),C.create.userLabels());C.check.maxSelections()},selected:function(){C.restore.values();C.is.multiple()?(C.debug("Restoring previously selected values and labels"),C.restore.labels()):C.debug("Restoring previously selected values")},
values:function(){C.set.initialLoad();u.apiSettings&&u.saveRemoteData&&C.get.remoteValues()?C.restore.remoteValues():C.set.selected();C.remove.initialLoad()},remoteValues:function(){var b=C.get.remoteValues();C.debug("Recreating selected from session data",b);b&&(C.is.single()?a.each(b,function(a,b){C.set.text(b)}):a.each(b,function(a,b){C.add.label(a,b)}))}},read:{remoteData:function(a){if(b.Storage===c)C.error(G.noStorage);else return a=sessionStorage.getItem(a),a!==c?a:!1}},save:{defaults:function(){C.save.defaultText();
C.save.placeholderText();C.save.defaultValue()},defaultValue:function(){var a=C.get.value();C.verbose("Saving default value as",a);x.data(F.defaultValue,a)},defaultText:function(){var a=C.get.text();C.verbose("Saving default text as",a);x.data(F.defaultText,a)},placeholderText:function(){var a;!1!==u.placeholder&&D.hasClass(v.placeholder)&&(a=C.get.text(),C.verbose("Saving placeholder text as",a),x.data(F.placeholderText,a))},remoteData:function(a,d){b.Storage===c?C.error(G.noStorage):(C.verbose("Saving remote data to session storage",
d,a),sessionStorage.setItem(d,a))}},clear:function(){C.is.multiple()&&u.useLabels?C.remove.labels():(C.remove.activeItem(),C.remove.selectedItem());C.set.placeholderText();C.clearValue()},clearValue:function(){C.set.value("")},scrollPage:function(a,b){var c=b||C.get.selectedItem(),d=c.closest(H.menu),e=d.outerHeight(),f=d.scrollTop(),g=Q.eq(0).outerHeight(),e=Math.floor(e/g);d.prop("scrollHeight");f="up"==a?f-g*e:f+g*e;g=Q.not(H.unselectable);e="up"==a?g.index(c)-e:g.index(c)+e;e=("up"==a?0<=e:e<
g.length)?g.eq(e):"up"==a?g.first():g.last();0<e.length&&(C.debug("Scrolling page",a,e),c.removeClass(v.selected),e.addClass(v.selected),u.selectOnKeydown&&C.is.single()&&C.set.selectedItem(e),d.scrollTop(f))},set:{filtered:function(){var a=C.is.multiple(),b=C.is.searchSelection(),c=a&&b,d=b?C.get.query():"",b="string"===typeof d&&0<d.length,e=C.get.searchWidth(),d=""!==d;a&&b&&(C.verbose("Adjusting input width",e,u.glyphWidth),J.css("width",e));if(b||c&&d)C.verbose("Hiding placeholder text"),D.addClass(v.filtered);
else if(!a||c&&!d)C.verbose("Showing placeholder text"),D.removeClass(v.filtered)},empty:function(){x.addClass(v.empty)},loading:function(){x.addClass(v.loading)},placeholderText:function(a){a=a||C.get.placeholderText();C.debug("Setting placeholder text",a);C.set.text(a);D.addClass(v.placeholder)},tabbable:function(){C.has.search()?(C.debug("Added tabindex to searchable dropdown"),J.val("").attr("tabindex",0),M.attr("tabindex",-1)):(C.debug("Added tabindex to dropdown"),x.attr("tabindex")===c&&(x.attr("tabindex",
0),M.attr("tabindex",-1)))},initialLoad:function(){C.verbose("Setting initial load");ta=!0},activeItem:function(a){u.allowAdditions&&0<a.filter(H.addition).length?a.addClass(v.filtered):a.addClass(v.active)},partialSearch:function(a){var b=C.get.query().length;J.val(a.substr(0,b))},scrollPosition:function(a,b){var d,e,f,g,h,l;a=a||C.get.selectedItem();d=a.closest(H.menu);e=a&&0<a.length;b=b!==c?b:!1;a&&0<d.length&&e&&(a.position(),d.addClass(v.loading),e=d.scrollTop(),g=d.offset().top,f=a.offset().top,
f=e-g+f,b||(h=d.height(),l=e+h<f+5,h=f-5<e),C.debug("Scrolling to active item",f),(b||h||l)&&d.scrollTop(f),d.removeClass(v.loading))},text:function(a){"select"!==u.action&&("combo"==u.action?(C.debug("Changing combo button text",a,U),u.preserveHTML?U.html(a):U.text(a)):(a!==C.get.placeholderText()&&D.removeClass(v.placeholder),C.debug("Changing text",a,D),D.removeClass(v.filtered),u.preserveHTML?D.html(a):D.text(a)))},selectedItem:function(a){var b=C.get.choiceValue(a),c=C.get.choiceText(a,!1);C.debug("Setting user selection to item",
a);C.remove.activeItem();C.set.partialSearch(c);C.set.activeItem(a);C.set.selected(b,a);C.set.text(c)},selectedLetter:function(b){var c=Q.filter("."+v.selected),d=!1,e;0<c.length&&C.has.firstLetter(c,b)&&(e=c.nextAll(Q).eq(0),C.has.firstLetter(e,b)&&(d=e));d||Q.each(function(){if(C.has.firstLetter(a(this),b))return d=a(this),!1});d&&(C.verbose("Scrolling to next value with letter",b),C.set.scrollPosition(d),c.removeClass(v.selected),d.addClass(v.selected),u.selectOnKeydown&&C.is.single()&&C.set.selectedItem(d))},
direction:function(a){"auto"==u.direction?C.is.onScreen(a)?C.remove.upward(a):C.set.upward(a):"upward"==u.direction&&C.set.upward(a)},upward:function(a){(a||x).addClass(v.upward)},value:function(a,b,d){var e=C.escape.value(a),f=0<Y.length;C.has.value(a);var g=C.get.values(),h=a!==c?String(a):a;if(f){if(!u.allowReselection&&h==g&&(C.verbose("Skipping value update already same value",a,g),!C.is.initialLoad()))return;C.is.single()&&C.has.selectInput()&&C.can.extendSelect()&&(C.debug("Adding user option",
a),C.add.optionValue(a));C.debug("Updating input value",e,g);O=!0;Y.val(e);!1===u.fireOnInit&&C.is.initialLoad()?C.debug("Input native change event ignored on initial load"):C.trigger.change();O=!1}else C.verbose("Storing value in metadata",e,Y),e!==g&&x.data(F.value,h);!1===u.fireOnInit&&C.is.initialLoad()?C.verbose("No callback on initial load",u.onChange):u.onChange.call(aa,a,b,d)},active:function(){x.addClass(v.active)},multiple:function(){x.addClass(v.multiple)},visible:function(){x.addClass(v.visible)},
exactly:function(a,b){C.debug("Setting selected to exact values");C.clear();C.set.selected(a,b)},selected:function(b,c){var d=C.is.multiple();if(c=u.allowAdditions?c||C.get.itemWithAdditions(b):c||C.get.item(b))C.debug("Setting selected menu item to",c),C.is.multiple()&&C.remove.searchWidth(),C.is.single()?(C.remove.activeItem(),C.remove.selectedItem()):u.useLabels&&C.remove.selectedItem(),c.each(function(){var b=a(this),e=C.get.choiceText(b),f=C.get.choiceValue(b,e),g=b.hasClass(v.filtered),h=b.hasClass(v.active),
l=b.hasClass(v.addition),m=d&&1==c.length;d?!h||l?(u.apiSettings&&u.saveRemoteData&&C.save.remoteData(e,f),u.useLabels?(C.add.value(f,e,b),C.add.label(f,e,m),C.set.activeItem(b),C.filterActive(),C.select.nextAvailable(c)):(C.add.value(f,e,b),C.set.text(C.add.variables(E.count)),C.set.activeItem(b))):g||(C.debug("Selected active value, removing label"),C.remove.selected(f)):(u.apiSettings&&u.saveRemoteData&&C.save.remoteData(e,f),C.set.text(e),C.set.value(f,e,b),b.addClass(v.active).addClass(v.selected))})}},
add:{label:function(b,c,d){var e=C.is.searchSelection()?J:D,f=C.escape.value(b),g;g=a("<a />").addClass(v.label).attr("data-value",f).html(I.label(f,c));g=u.onLabelCreate.call(g,f,c);C.has.label(b)?C.debug("Label already exists, skipping",f):(u.label.variation&&g.addClass(u.label.variation),!0===d?(C.debug("Animating in label",g),g.addClass(v.hidden).insertBefore(e).transition(u.label.transition,u.label.duration)):(C.debug("Adding selection label",g),g.insertBefore(e)))},message:function(b){var c=
M.children(H.message);b=u.templates.message(C.add.variables(b));0<c.length?c.html(b):a("<div/>").html(b).addClass(v.message).appendTo(M)},optionValue:function(b){var c=C.escape.value(b);0<Y.find('option[value="'+c+'"]').length||(C.disconnect.selectObserver(),C.is.single()&&(C.verbose("Removing previous user addition"),Y.find("option."+v.addition).remove()),a("<option/>").prop("value",c).addClass(v.addition).html(b).appendTo(Y),C.verbose("Adding user addition as an <option>",b),C.observe.select())},
userSuggestion:function(a){var b=M.children(H.addition),c=C.get.item(a),c=c&&c.not(H.addition).length,d=0<b.length;u.useLabels&&C.has.maxSelections()||(""===a||c?b.remove():(d?(b.data(F.value,a).data(F.text,a).attr("data-"+F.value,a).attr("data-"+F.text,a).removeClass(v.filtered),u.hideAdditions||(a=u.templates.addition(C.add.variables(E.addResult,a)),b.html(a)),C.verbose("Replacing user suggestion with new value",b)):(b=C.create.userChoice(a),b.prependTo(M),C.verbose("Adding item choice to menu corresponding with user choice addition",
b)),u.hideAdditions&&!C.is.allFiltered()||b.addClass(v.selected).siblings().removeClass(v.selected),C.refreshItems()))},variables:function(a,b){var c=-1!==a.search("{count}"),d=-1!==a.search("{maxCount}"),e=-1!==a.search("{term}");C.verbose("Adding templated variables to message",a);c&&(c=C.get.selectionCount(),a=a.replace("{count}",c));d&&(C.get.selectionCount(),a=a.replace("{maxCount}",u.maxSelections));e&&(d=b||C.get.query(),a=a.replace("{term}",d));return a},value:function(b,c,d){var e=C.get.values();
""===b?C.debug("Cannot select blank values from multiselect"):(a.isArray(e)?(e=e.concat([b]),e=C.get.uniqueArray(e)):e=[b],C.has.selectInput()?C.can.extendSelect()&&(C.debug("Adding value to select",b,e,Y),C.add.optionValue(b)):(e=e.join(u.delimiter),C.debug("Setting hidden input to delimited value",e,Y)),!1===u.fireOnInit&&C.is.initialLoad()?C.verbose("Skipping onadd callback on initial load",u.onAdd):u.onAdd.call(aa,b,c,d),C.set.value(e,b,c,d),C.check.maxSelections())}},remove:{active:function(){x.removeClass(v.active)},
activeLabel:function(){x.find(H.label).removeClass(v.active)},empty:function(){x.removeClass(v.empty)},loading:function(){x.removeClass(v.loading)},initialLoad:function(){ta=!1},upward:function(a){(a||x).removeClass(v.upward)},visible:function(){x.removeClass(v.visible)},activeItem:function(){Q.removeClass(v.active)},filteredItem:function(){u.useLabels&&C.has.maxSelections()||(u.useLabels&&C.is.multiple()?Q.not("."+v.active).removeClass(v.filtered):Q.removeClass(v.filtered),C.remove.empty())},optionValue:function(a){a=
C.escape.value(a);var b=Y.find('option[value="'+a+'"]');0<b.length&&b.hasClass(v.addition)&&(za&&(za.disconnect(),C.verbose("Temporarily disconnecting mutation observer")),b.remove(),C.verbose("Removing user addition as an <option>",a),za&&za.observe(Y[0],{childList:!0,subtree:!0}))},message:function(){M.children(H.message).remove()},searchWidth:function(){J.css("width","")},searchTerm:function(){C.verbose("Cleared search term");J.val("");C.set.filtered()},userAddition:function(){Q.filter(H.addition).remove()},
selected:function(b,c){c=u.allowAdditions?c||C.get.itemWithAdditions(b):c||C.get.item(b);if(!c)return!1;c.each(function(){var b=a(this),c=C.get.choiceText(b),d=C.get.choiceValue(b,c);C.is.multiple()?u.useLabels?(C.remove.value(d,c,b),C.remove.label(d)):(C.remove.value(d,c,b),0===C.get.selectionCount()?C.set.placeholderText():C.set.text(C.add.variables(E.count))):C.remove.value(d,c,b);b.removeClass(v.filtered).removeClass(v.active);u.useLabels&&b.removeClass(v.selected)})},selectedItem:function(){Q.removeClass(v.selected)},
value:function(a,b,c){var d=C.get.values();C.has.selectInput()?(C.verbose("Input is <select> removing selected option",a),d=C.remove.arrayValue(a,d),C.remove.optionValue(a)):(C.verbose("Removing from delimited values",a),d=C.remove.arrayValue(a,d),d=d.join(u.delimiter));!1===u.fireOnInit&&C.is.initialLoad()?C.verbose("No callback on initial load",u.onRemove):u.onRemove.call(aa,a,b,c);C.set.value(d,b,c);C.check.maxSelections()},arrayValue:function(b,c){a.isArray(c)||(c=[c]);c=a.grep(c,function(a){return b!=
a});C.verbose("Removed value from delimited string",b,c);return c},label:function(a,b){var c=x.find(H.label).filter('[data-value="'+a+'"]');C.verbose("Removing label",c);c.remove()},activeLabels:function(a){a=a||x.find(H.label).filter("."+v.active);C.verbose("Removing active label selections",a);C.remove.labels(a)},labels:function(b){b=b||x.find(H.label);C.verbose("Removing labels",b);b.each(function(){var b=a(this),d=b.data(F.value),e=d!==c?String(d):d,f=C.is.userValue(e);!1===u.onLabelRemove.call(b,
d)?C.debug("Label remove callback cancelled removal"):(C.remove.message(),f?(C.remove.value(e),C.remove.label(e)):C.remove.selected(e))})},tabbable:function(){C.has.search()?(C.debug("Searchable dropdown initialized"),J.removeAttr("tabindex")):(C.debug("Simple selection dropdown initialized"),x.removeAttr("tabindex"));M.removeAttr("tabindex")}},has:{menuSearch:function(){return C.has.search()&&0<J.closest(M).length},search:function(){return 0<J.length},sizer:function(){return 0<V.length},selectInput:function(){return Y.is("select")},
minCharacters:function(a){return u.minCharacters?(a=a!==c?String(a):String(C.get.query()),a.length>=u.minCharacters):!0},firstLetter:function(a,b){var c;if(!a||0===a.length||"string"!==typeof b)return!1;c=C.get.choiceText(a,!1);b=b.toLowerCase();c=String(c).charAt(0).toLowerCase();return b==c},input:function(){return 0<Y.length},items:function(){return 0<Q.length},menu:function(){return 0<M.length},message:function(){return 0!==M.children(H.message).length},label:function(a){a=C.escape.value(a);return 0<
x.find(H.label).filter('[data-value="'+a+'"]').length},maxSelections:function(){return u.maxSelections&&C.get.selectionCount()>=u.maxSelections},allResultsFiltered:function(){var a=Q.not(H.addition);return a.filter(H.unselectable).length===a.length},userSuggestion:function(){return 0<M.children(H.addition).length},query:function(){return""!==C.get.query()},value:function(b){var c=C.get.values();return(a.isArray(c)?c&&-1!==a.inArray(b,c):c==b)?!0:!1}},is:{active:function(){return x.hasClass(v.active)},
bubbledLabelClick:function(b){return a(b.target).is("select, input")&&0<x.closest("label").length},bubbledIconClick:function(b){return 0<a(b.target).closest(W).length},alreadySetup:function(){return x.is("select")&&0<x.parent(H.dropdown).length&&0===x.prev().length},animating:function(a){return a?a.transition&&a.transition("is animating"):M.transition&&M.transition("is animating")},disabled:function(){return x.hasClass(v.disabled)},focused:function(){return e.activeElement===x[0]},focusedOnSearch:function(){return e.activeElement===
J[0]},allFiltered:function(){return(C.is.multiple()||C.has.search())&&!(0==u.hideAdditions&&C.has.userSuggestion())&&!C.has.message()&&C.has.allResultsFiltered()},hidden:function(a){return!C.is.visible(a)},initialLoad:function(){return ta},onScreen:function(a){var b,c,d,e;a=a||M;b=!0;b={};a.addClass(v.loading);d=S.scrollTop();e=S.outerHeight();b=a.offset();c=a.outerHeight();b={above:d<=b.top-c,below:d+e>=b.top+c};b.below?(C.verbose("Dropdown can fit in context downward",b),b=!0):b.below||b.above?
(C.verbose("Dropdown cannot fit below, opening upward",b),b=!1):(C.verbose("Dropdown cannot fit in either direction, favoring downward",b),b=!0);a.removeClass(v.loading);return b},inObject:function(b,c){var d=!1;a.each(c,function(a,c){if(c==b)return d=!0});return d},multiple:function(){return x.hasClass(v.multiple)},single:function(){return!C.is.multiple()},selectMutation:function(b){var c=!1;a.each(b,function(b,d){if(d.target&&a(d.target).is("select"))return c=!0});return c},search:function(){return x.hasClass(v.search)},
searchSelection:function(){return C.has.search()&&1===J.parent(H.dropdown).length},selection:function(){return x.hasClass(v.selection)},userValue:function(b){return-1!==a.inArray(b,C.get.userValues())},upward:function(a){return(a||x).hasClass(v.upward)},visible:function(a){return a?a.hasClass(v.visible):M.hasClass(v.visible)}},can:{activate:function(a){return u.useLabels||!C.has.maxSelections()||C.has.maxSelections()&&a.hasClass(v.active)?!0:!1},click:function(){return g||"click"==u.on},extendSelect:function(){return u.allowAdditions||
u.apiSettings},show:function(){return!C.is.disabled()&&(C.has.items()||C.has.message())},useAPI:function(){return a.fn.api!==c}},animate:{show:function(b,d){var e=d||M,f=d?function(){}:function(){C.hideSubMenus();C.hideOthers();C.set.active()},g;b=a.isFunction(b)?b:function(){};C.verbose("Doing menu show animation",e);C.set.direction(d);g=C.get.transition(d);C.is.selection()&&C.set.scrollPosition(C.get.selectedItem(),!0);if(C.is.hidden(e)||C.is.animating(e))"none"==g?(f(),e.transition("show"),b.call(aa)):
a.fn.transition!==c&&x.transition("is supported")?e.transition({animation:g+" in",debug:u.debug,verbose:u.verbose,duration:u.duration,queue:!0,onStart:f,onComplete:function(){b.call(aa)}}):C.error(G.noTransition,g)},hide:function(b,d){var e=d||M,f=d?function(){}:function(){C.can.click()&&C.unbind.intent();C.remove.active()},g=C.get.transition(d);b=a.isFunction(b)?b:function(){};if(C.is.visible(e)||C.is.animating(e))C.verbose("Doing menu hide animation",e),"none"==g?(f(),e.transition("hide"),b.call(aa)):
a.fn.transition!==c&&x.transition("is supported")?e.transition({animation:g+" out",duration:u.duration,debug:u.debug,verbose:u.verbose,queue:!0,onStart:f,onComplete:function(){"auto"==u.direction&&C.remove.upward(d);b.call(aa)}}):C.error(G.transition)}},hideAndClear:function(){C.remove.searchTerm();C.has.maxSelections()||(C.has.search()?C.hide(function(){C.remove.filteredItem()}):C.hide())},delay:{show:function(){C.verbose("Delaying show event to ensure user intent");clearTimeout(C.timer);C.timer=
setTimeout(C.show,u.delay.show)},hide:function(){C.verbose("Delaying hide event to ensure user intent");clearTimeout(C.timer);C.timer=setTimeout(C.hide,u.delay.hide)}},escape:{value:function(b){var c=a.isArray(b),d="string"===typeof b,e=!d&&!c,d=d&&-1!==b.search(B.quote),f=[];if(!C.has.selectInput()||e||!d)return b;C.debug("Encoding quote values for use in select",b);return c?(a.each(b,function(a,b){f.push(b.replace(B.quote,"&quot;"))}),f):b.replace(B.quote,"&quot;")},regExp:function(a){a=String(a);
return a.replace(B.escape,"\\$&")}},setting:function(b,d){C.debug("Changing setting",b,d);if(a.isPlainObject(b))a.extend(!0,u,b);else if(d!==c)a.isPlainObject(u[b])?a.extend(!0,u[b],d):u[b]=d;else return u[b]},internal:function(b,d){if(a.isPlainObject(b))a.extend(!0,C,b);else if(d!==c)C[b]=d;else return C[b]},debug:function(){!u.silent&&u.debug&&(u.performance?C.performance.log(arguments):(C.debug=Function.prototype.bind.call(console.info,console,u.name+":"),C.debug.apply(console,arguments)))},verbose:function(){!u.silent&&
u.verbose&&u.debug&&(u.performance?C.performance.log(arguments):(C.verbose=Function.prototype.bind.call(console.info,console,u.name+":"),C.verbose.apply(console,arguments)))},error:function(){u.silent||(C.error=Function.prototype.bind.call(console.error,console,u.name+":"),C.error.apply(console,arguments))},performance:{log:function(a){var b,c;u.performance&&(b=(new Date).getTime(),c=m||b,c=b-c,m=b,p.push({Name:a[0],Arguments:[].slice.call(a,1)||"",Element:aa,"Execution Time":c}));clearTimeout(C.performance.timer);
C.performance.timer=setTimeout(C.performance.display,500)},display:function(){var b=u.name+":",d=0;m=!1;clearTimeout(C.performance.timer);a.each(p,function(a,b){d+=b["Execution Time"]});b+=" "+d+"ms";h&&(b+=" '"+h+"'");(console.group!==c||console.table!==c)&&0<p.length&&(console.groupCollapsed(b),console.table?console.table(p):a.each(p,function(a,b){console.log(b.Name+": "+b["Execution Time"]+"ms")}),console.groupEnd());p=[]}},invoke:function(b,d,e){var f=ia,g,h,m;d=d||l;e=aa||e;"string"==typeof b&&
f!==c&&(b=b.split(/[\. ]/),g=b.length-1,a.each(b,function(d,e){var l=d!=g?e+b[d+1].charAt(0).toUpperCase()+b[d+1].slice(1):b;if(a.isPlainObject(f[l])&&d!=g)f=f[l];else{if(f[l]!==c)return h=f[l],!1;if(a.isPlainObject(f[e])&&d!=g)f=f[e];else return f[e]!==c?h=f[e]:C.error(G.method,b),!1}}));a.isFunction(h)?m=h.apply(e,d):h!==c&&(m=h);a.isArray(q)?q.push(m):q!==c?q=[q,m]:m!==c&&(q=m);return h}};t?(ia===c&&C.initialize(),C.invoke(r)):(ia!==c&&ia.invoke("destroy"),C.initialize())});return q!==c?q:f};a.fn.dropdown.settings=
{silent:!1,debug:!1,verbose:!1,performance:!0,on:"click",action:"activate",apiSettings:!1,selectOnKeydown:!0,minCharacters:0,saveRemoteData:!0,throttle:200,context:b,direction:"auto",keepOnScreen:!0,match:"both",fullTextSearch:!1,placeholder:"auto",preserveHTML:!0,sortSelect:!1,forceSelection:!0,allowAdditions:!1,hideAdditions:!0,maxSelections:!1,useLabels:!0,delimiter:",",showOnFocus:!0,allowReselection:!1,allowTab:!0,allowCategorySelection:!1,fireOnInit:!1,transition:"auto",duration:200,glyphWidth:1.037,
label:{transition:"scale",duration:200,variation:!1},delay:{hide:300,show:200,search:20,touch:50},onChange:function(a,b,c){},onAdd:function(a,b,c){},onRemove:function(a,b,c){},onLabelSelect:function(a){},onLabelCreate:function(b,c){return a(this)},onLabelRemove:function(a){return!0},onNoResults:function(a){return!0},onShow:function(){},onHide:function(){},name:"Dropdown",namespace:"dropdown",message:{addResult:"Add <b>{term}</b>",count:"{count} selected",maxSelections:"Max {maxCount} selections",
noResults:"No results found.",serverError:"There was an error contacting the server"},error:{action:"You called a dropdown action that was not defined",alreadySetup:"Once a select has been initialized behaviors must be called on the created ui dropdown",labels:"Allowing user additions currently requires the use of labels.",missingMultiple:"<select> requires multiple property to be set to correctly preserve multiple values",method:"The method you called is not defined.",noAPI:"The API module is required to load resources remotely",
noStorage:"Saving remote data requires session storage",noTransition:"This module requires ui transitions <https://github.com/Semantic-Org/UI-Transition>"},regExp:{escape:/[-[\]{}()*+?.,\\^$|#\s]/g,quote:/"/g},metadata:{defaultText:"defaultText",defaultValue:"defaultValue",placeholderText:"placeholder",text:"text",value:"value"},fields:{remoteValues:"results",values:"values",disabled:"disabled",name:"name",value:"value",text:"text"},keys:{backspace:8,delimiter:188,deleteKey:46,enter:13,escape:27,
pageUp:33,pageDown:34,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40},selector:{addition:".addition",dropdown:".ui.dropdown",hidden:".hidden",icon:"> .dropdown.icon",input:'> input[type="hidden"], > select',item:".item",label:"> .label",remove:"> .label > .delete.icon",siblingLabel:".label",menu:".menu",message:".message",menuIcon:".dropdown.icon",search:"input.search, .menu > .search > input, .menu input.search",sizer:"> input.sizer",text:"> .text:not(.icon)",unselectable:".disabled, .filtered"},
className:{active:"active",addition:"addition",animating:"animating",disabled:"disabled",empty:"empty",dropdown:"ui dropdown",filtered:"filtered",hidden:"hidden transition",item:"item",label:"ui label",loading:"loading",menu:"menu",message:"message",multiple:"multiple",placeholder:"default",sizer:"sizer",search:"search",selected:"selected",selection:"selection",upward:"upward",visible:"visible"}};a.fn.dropdown.settings.templates={dropdown:function(b){var c=b.placeholder||!1,e="",e=e+'<i class="dropdown icon"></i>',
e=b.placeholder?e+('<div class="default text">'+c+"</div>"):e+'<div class="text"></div>',e=e+'<div class="menu">';a.each(b.values,function(a,b){e+=b.disabled?'<div class="disabled item" data-value="'+b.value+'">'+b.name+"</div>":'<div class="item" data-value="'+b.value+'">'+b.name+"</div>"});return e+="</div>"},menu:function(b,c){var e="";a.each(b[c.values]||{},function(a,b){e+='<div class="'+(b[c.disabled]?"disabled ":"")+'item" data-value="'+b[c.value]+'"'+(b[c.text]?'data-text="'+b[c.text]+'"':
"")+">";e+=b[c.name];e+="</div>"});return e},label:function(a,b){return b+'<i class="delete icon"></i>'},message:function(a){return a},addition:function(a){return a}}})(jQuery,window,document);
(function(a,b,e,c){b="undefined"!=typeof b&&b.Math==Math?b:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();a.fn.embed=function(d){var e=a(this),n=e.selector||"",h=(new Date).getTime(),g=[],m=arguments[0],p="string"==typeof m,r=[].slice.call(arguments,1),t;e.each(function(){var l=a.isPlainObject(d)?a.extend(!0,{},a.fn.embed.settings,d):a.extend({},a.fn.embed.settings),q=l.selector,w=l.className,u=l.sources,v=l.error,E=l.metadata,A=l.namespace,K=l.templates,F="."+A,z="module-"+
A;a(b);var B=a(this);B.find(q.placeholder);B.find(q.icon);var H=B.find(q.embed),G=this,I=B.data(z),N;N={initialize:function(){N.debug("Initializing embed");N.determine.autoplay();N.create();N.bind.events();N.instantiate()},instantiate:function(){N.verbose("Storing instance of module",N);I=N;B.data(z,N)},destroy:function(){N.verbose("Destroying previous instance of embed");N.reset();B.removeData(z).off(F)},refresh:function(){N.verbose("Refreshing selector cache");B.find(q.placeholder);B.find(q.icon);
H=B.find(q.embed)},bind:{events:function(){N.has.placeholder()&&(N.debug("Adding placeholder events"),B.on("click"+F,q.placeholder,N.createAndShow).on("click"+F,q.icon,N.createAndShow))}},create:function(){N.get.placeholder()?N.createPlaceholder():N.createAndShow()},createPlaceholder:function(a){var b=N.get.icon(),c=N.get.url();N.generate.embed(c);a=a||N.get.placeholder();B.html(K.placeholder(a,b));N.debug("Creating placeholder for embed",a,b)},createEmbed:function(b){N.refresh();b=b||N.get.url();
H=a("<div/>").addClass(w.embed).html(N.generate.embed(b)).appendTo(B);l.onCreate.call(G,b);N.debug("Creating embed object",H)},changeEmbed:function(a){H.html(N.generate.embed(a))},createAndShow:function(){N.createEmbed();N.show()},change:function(a,b,c){N.debug("Changing video to ",a,b,c);B.data(E.source,a).data(E.id,b);c?B.data(E.url,c):B.removeData(E.url);N.has.embed()?N.changeEmbed():N.create()},reset:function(){N.debug("Clearing embed and showing placeholder");N.remove.active();N.remove.embed();
N.showPlaceholder();l.onReset.call(G)},show:function(){N.debug("Showing embed");N.set.active();l.onDisplay.call(G)},hide:function(){N.debug("Hiding embed");N.showPlaceholder()},showPlaceholder:function(){N.debug("Showing placeholder image");N.remove.active();l.onPlaceholderDisplay.call(G)},get:{id:function(){return l.id||B.data(E.id)},placeholder:function(){return l.placeholder||B.data(E.placeholder)},icon:function(){return l.icon?l.icon:B.data(E.icon)!==c?B.data(E.icon):N.determine.icon()},source:function(a){return l.source?
l.source:B.data(E.source)!==c?B.data(E.source):N.determine.source()},type:function(){var a=N.get.source();return u[a]!==c?u[a].type:!1},url:function(){return l.url?l.url:B.data(E.url)!==c?B.data(E.url):N.determine.url()}},determine:{autoplay:function(){N.should.autoplay()&&(l.autoplay=!0)},source:function(b){var c=!1;(b=b||N.get.url())&&a.each(u,function(a,d){if(-1!==b.search(d.domain))return c=a,!1});return c},icon:function(){var a=N.get.source();return u[a]!==c?u[a].icon:!1},url:function(){var a=
l.id||B.data(E.id),b=l.source||B.data(E.source);(a=u[b]!==c?u[b].url.replace("{id}",a):!1)&&B.data(E.url,a);return a}},set:{active:function(){B.addClass(w.active)}},remove:{active:function(){B.removeClass(w.active)},embed:function(){H.empty()}},encode:{parameters:function(a){var b=[],c;for(c in a)b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&amp;")}},generate:{embed:function(a){N.debug("Generating embed html");var b=N.get.source(),c;(a=N.get.url(a))?(b=N.generate.parameters(b),
c=K.iframe(a,b)):N.error(v.noURL,B);return c},parameters:function(b,d){var e=u[b]&&u[b].parameters!==c?u[b].parameters(l):{};(d=d||l.parameters)&&(e=a.extend({},e,d));e=l.onEmbed(e);return N.encode.parameters(e)}},has:{embed:function(){return 0<H.length},placeholder:function(){return l.placeholder||B.data(E.placeholder)}},should:{autoplay:function(){return"auto"===l.autoplay?l.placeholder||B.data(E.placeholder)!==c:l.autoplay}},is:{video:function(){return"video"==N.get.type()}},setting:function(b,
d){N.debug("Changing setting",b,d);if(a.isPlainObject(b))a.extend(!0,l,b);else if(d!==c)a.isPlainObject(l[b])?a.extend(!0,l[b],d):l[b]=d;else return l[b]},internal:function(b,d){if(a.isPlainObject(b))a.extend(!0,N,b);else if(d!==c)N[b]=d;else return N[b]},debug:function(){!l.silent&&l.debug&&(l.performance?N.performance.log(arguments):(N.debug=Function.prototype.bind.call(console.info,console,l.name+":"),N.debug.apply(console,arguments)))},verbose:function(){!l.silent&&l.verbose&&l.debug&&(l.performance?
N.performance.log(arguments):(N.verbose=Function.prototype.bind.call(console.info,console,l.name+":"),N.verbose.apply(console,arguments)))},error:function(){l.silent||(N.error=Function.prototype.bind.call(console.error,console,l.name+":"),N.error.apply(console,arguments))},performance:{log:function(a){var b,c;l.performance&&(b=(new Date).getTime(),c=h||b,c=b-c,h=b,g.push({Name:a[0],Arguments:[].slice.call(a,1)||"",Element:G,"Execution Time":c}));clearTimeout(N.performance.timer);N.performance.timer=
setTimeout(N.performance.display,500)},display:function(){var b=l.name+":",d=0;h=!1;clearTimeout(N.performance.timer);a.each(g,function(a,b){d+=b["Execution Time"]});b+=" "+d+"ms";n&&(b+=" '"+n+"'");1<e.length&&(b+=" ("+e.length+")");(console.group!==c||console.table!==c)&&0<g.length&&(console.groupCollapsed(b),console.table?console.table(g):a.each(g,function(a,b){console.log(b.Name+": "+b["Execution Time"]+"ms")}),console.groupEnd());g=[]}},invoke:function(b,d,e){var f=I,g,h,l;d=d||r;e=G||e;"string"==
typeof b&&f!==c&&(b=b.split(/[\. ]/),g=b.length-1,a.each(b,function(d,e){var l=d!=g?e+b[d+1].charAt(0).toUpperCase()+b[d+1].slice(1):b;if(a.isPlainObject(f[l])&&d!=g)f=f[l];else{if(f[l]!==c)return h=f[l],!1;if(a.isPlainObject(f[e])&&d!=g)f=f[e];else return f[e]!==c?h=f[e]:N.error(v.method,b),!1}}));a.isFunction(h)?l=h.apply(e,d):h!==c&&(l=h);a.isArray(t)?t.push(l):t!==c?t=[t,l]:l!==c&&(t=l);return h}};p?(I===c&&N.initialize(),N.invoke(m)):(I!==c&&I.invoke("destroy"),N.initialize())});return t!==c?
t:this};a.fn.embed.settings={name:"Embed",namespace:"embed",silent:!1,debug:!1,verbose:!1,performance:!0,icon:!1,source:!1,url:!1,id:!1,autoplay:"auto",color:"#444444",hd:!0,brandedUI:!1,parameters:!1,onDisplay:function(){},onPlaceholderDisplay:function(){},onReset:function(){},onCreate:function(a){},onEmbed:function(a){return a},metadata:{id:"id",icon:"icon",placeholder:"placeholder",source:"source",url:"url"},error:{noURL:"No URL specified",method:"The method you called is not defined"},className:{active:"active",
embed:"embed"},selector:{embed:".embed",placeholder:".placeholder",icon:".icon"},sources:{youtube:{name:"youtube",type:"video",icon:"video play",domain:"youtube.com",url:"//www.youtube.com/embed/{id}",parameters:function(a){return{autohide:!a.brandedUI,autoplay:a.autoplay,color:a.color||c,hq:a.hd,jsapi:a.api,modestbranding:!a.brandedUI}}},vimeo:{name:"vimeo",type:"video",icon:"video play",domain:"vimeo.com",url:"//player.vimeo.com/video/{id}",parameters:function(a){return{api:a.api,autoplay:a.autoplay,
byline:a.brandedUI,color:a.color||c,portrait:a.brandedUI,title:a.brandedUI}}}},templates:{iframe:function(a,b){var c=a;b&&(c+="?"+b);return'<iframe src="'+c+'" width="100%" height="100%" frameborder="0" scrolling="no" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'},placeholder:function(a,b){var c="";b&&(c+='<i class="'+b+' icon"></i>');a&&(c+='<img class="placeholder" src="'+a+'">');return c}},api:!1,onPause:function(){},onPlay:function(){},onStop:function(){}}})(jQuery,window,
document);
(function(a,b,e,c){b="undefined"!=typeof b&&b.Math==Math?b:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();a.fn.modal=function(d){var f=a(this),n=a(b),h=a(e),g=a("body"),m=f.selector||"",p=(new Date).getTime(),r=[],t=arguments[0],l="string"==typeof t,q=[].slice.call(arguments,1),w=b.requestAnimationFrame||b.mozRequestAnimationFrame||b.webkitRequestAnimationFrame||b.msRequestAnimationFrame||function(a){setTimeout(a,0)},u;f.each(function(){var f=a.isPlainObject(d)?a.extend(!0,
{},a.fn.modal.settings,d):a.extend({},a.fn.modal.settings),E=f.selector,A=f.className,K=f.namespace,F=f.error,z="."+K,B="module-"+K,H=a(this),G=a(f.context),I=H.find(E.close),N,L,x,S,D,J=this,V=H.data(B),Y,W,U,M;M={initialize:function(){M.verbose("Initializing dimmer",G);M.create.id();M.create.dimmer();M.refreshModals();M.bind.events();f.observeChanges&&M.observeChanges();M.instantiate()},instantiate:function(){M.verbose("Storing instance of modal");V=M;H.data(B,V)},create:{dimmer:function(){var b=
a.extend(!0,{debug:f.debug,dimmerName:"modals",duration:{show:f.duration,hide:f.duration}},f.dimmerSettings);f.inverted&&(b.variation=b.variation!==c?b.variation+" inverted":"inverted");a.fn.dimmer===c?M.error(F.dimmer):(M.debug("Creating dimmer with settings",b),S=G.dimmer(b),f.detachable?(M.verbose("Modal is detachable, moving content into dimmer"),S.dimmer("add content",H)):M.set.undetached(),f.blurring&&S.addClass(A.blurring),D=S.dimmer("get dimmer"))},id:function(){W=(Math.random().toString(16)+
"000000000").substr(2,8);Y="."+W;M.verbose("Creating unique id for element",W)}},destroy:function(){M.verbose("Destroying previous modal");H.removeData(B).off(z);n.off(Y);D.off(Y);I.off(z);G.dimmer("destroy")},observeChanges:function(){"MutationObserver"in b&&(U=new MutationObserver(function(a){M.debug("DOM tree modified, refreshing");M.refresh()}),U.observe(J,{childList:!0,subtree:!0}),M.debug("Setting up mutation observer",U))},refresh:function(){M.remove.scrolling();M.cacheSizes();M.set.screenHeight();
M.set.type();M.set.position()},refreshModals:function(){L=H.siblings(E.modal);N=L.add(H)},attachEvents:function(b,c){var d=a(b);c=a.isFunction(M[c])?M[c]:M.toggle;0<d.length?(M.debug("Attaching modal events to element",b,c),d.off(z).on("click"+z,c)):M.error(F.notFound,b)},bind:{events:function(){M.verbose("Attaching events");H.on("click"+z,E.close,M.event.close).on("click"+z,E.approve,M.event.approve).on("click"+z,E.deny,M.event.deny);n.on("resize"+Y,M.event.resize)}},get:{id:function(){return(Math.random().toString(16)+
"000000000").substr(2,8)}},event:{approve:function(){!1===f.onApprove.call(J,a(this))?M.verbose("Approve callback returned false cancelling hide"):M.hide()},deny:function(){!1===f.onDeny.call(J,a(this))?M.verbose("Deny callback returned false cancelling hide"):M.hide()},close:function(){M.hide()},click:function(b){var c=0<a(b.target).closest(E.modal).length;b=a.contains(e.documentElement,b.target);!c&&b&&(M.debug("Dimmer clicked, hiding all modals"),M.is.active()&&(M.remove.clickaway(),f.allowMultiple?
M.hide():M.hideAll()))},debounce:function(a,b){clearTimeout(M.timer);M.timer=setTimeout(a,b)},keyboard:function(a){27==a.which&&(f.closable?(M.debug("Escape key pressed hiding modal"),M.hide()):M.debug("Escape key pressed, but closable is set to false"),a.preventDefault())},resize:function(){S.dimmer("is active")&&w(M.refresh)}},toggle:function(){M.is.active()||M.is.animating()?M.hide():M.show()},show:function(b){b=a.isFunction(b)?b:function(){};M.refreshModals();M.showModal(b)},hide:function(b){b=
a.isFunction(b)?b:function(){};M.refreshModals();M.hideModal(b)},showModal:function(b){b=a.isFunction(b)?b:function(){};M.is.animating()||!M.is.active()?(M.showDimmer(),M.cacheSizes(),M.set.position(),M.set.screenHeight(),M.set.type(),M.set.clickaway(),!f.allowMultiple&&M.others.active()?M.hideOthers(M.showModal):(f.onShow.call(J),f.transition&&a.fn.transition!==c&&H.transition("is supported")?(M.debug("Showing modal with css animations"),H.transition({debug:f.debug,animation:f.transition+" in",queue:f.queue,
duration:f.duration,useFailSafe:!0,onComplete:function(){f.onVisible.apply(J);f.keyboardShortcuts&&M.add.keyboardShortcuts();M.save.focus();M.set.active();f.autofocus&&M.set.autofocus();b()}})):M.error(F.noTransition))):M.debug("Modal is already visible")},hideModal:function(b,d){b=a.isFunction(b)?b:function(){};M.debug("Hiding modal");if(!1===f.onHide.call(J,a(this)))M.verbose("Hide callback returned false cancelling hide");else if(M.is.animating()||M.is.active())f.transition&&a.fn.transition!==
c&&H.transition("is supported")?(M.remove.active(),H.transition({debug:f.debug,animation:f.transition+" out",queue:f.queue,duration:f.duration,useFailSafe:!0,onStart:function(){M.others.active()||d||M.hideDimmer();f.keyboardShortcuts&&M.remove.keyboardShortcuts()},onComplete:function(){f.onHidden.call(J);M.restore.focus();b()}})):M.error(F.noTransition)},showDimmer:function(){S.dimmer("is animating")||!S.dimmer("is active")?(M.debug("Showing dimmer"),S.dimmer("show")):M.debug("Dimmer already visible")},
hideDimmer:function(){S.dimmer("is animating")||S.dimmer("is active")?S.dimmer("hide",function(){M.remove.clickaway();M.remove.screenHeight()}):M.debug("Dimmer is not visible cannot hide")},hideAll:function(b){var c=N.filter("."+A.active+", ."+A.animating);b=a.isFunction(b)?b:function(){};0<c.length&&(M.debug("Hiding all visible modals"),M.hideDimmer(),c.modal("hide modal",b))},hideOthers:function(b){var c=L.filter("."+A.active+", ."+A.animating);b=a.isFunction(b)?b:function(){};0<c.length&&(M.debug("Hiding other modals",
L),c.modal("hide modal",b,!0))},others:{active:function(){return 0<L.filter("."+A.active).length},animating:function(){return 0<L.filter("."+A.animating).length}},add:{keyboardShortcuts:function(){M.verbose("Adding keyboard shortcuts");h.on("keyup"+z,M.event.keyboard)}},save:{focus:function(){x=a(e.activeElement).blur()}},restore:{focus:function(){x&&0<x.length&&x.focus()}},remove:{active:function(){H.removeClass(A.active)},clickaway:function(){f.closable&&D.off("click"+Y)},bodyStyle:function(){""===
g.attr("style")&&(M.verbose("Removing style attribute"),g.removeAttr("style"))},screenHeight:function(){M.debug("Removing page height");g.css("height","")},keyboardShortcuts:function(){M.verbose("Removing keyboard shortcuts");h.off("keyup"+z)},scrolling:function(){S.removeClass(A.scrolling);H.removeClass(A.scrolling)}},cacheSizes:function(){var d=H.outerHeight();if(M.cache===c||0!==d)M.cache={pageHeight:a(e).outerHeight(),height:d+f.offset,contextHeight:"body"==f.context?a(b).height():S.height()};
M.debug("Caching modal and container sizes",M.cache)},can:{fit:function(){return M.cache.height+2*f.padding<M.cache.contextHeight}},is:{active:function(){return H.hasClass(A.active)},animating:function(){return H.transition("is supported")?H.transition("is animating"):H.is(":visible")},scrolling:function(){return S.hasClass(A.scrolling)},modernBrowser:function(){return!(b.ActiveXObject||"ActiveXObject"in b)}},set:{autofocus:function(){var a=H.find("[tabindex], :input").filter(":visible"),b=a.filter("[autofocus]"),
a=0<b.length?b.first():a.first();0<a.length&&a.focus()},clickaway:function(){if(f.closable)D.on("click"+Y,M.event.click)},screenHeight:function(){M.can.fit()?g.css("height",""):(M.debug("Modal is taller than page content, resizing page height"),g.css("height",M.cache.height+2*f.padding))},active:function(){H.addClass(A.active)},scrolling:function(){S.addClass(A.scrolling);H.addClass(A.scrolling)},type:function(){M.can.fit()?(M.verbose("Modal fits on screen"),M.others.active()||M.others.animating()||
M.remove.scrolling()):(M.verbose("Modal cannot fit on screen setting to scrolling"),M.set.scrolling())},position:function(){M.verbose("Centering modal on page",M.cache);M.can.fit()?H.css({top:"",marginTop:-(M.cache.height/2)}):H.css({marginTop:"",top:h.scrollTop()})},undetached:function(){S.addClass(A.undetached)}},setting:function(b,d){M.debug("Changing setting",b,d);if(a.isPlainObject(b))a.extend(!0,f,b);else if(d!==c)a.isPlainObject(f[b])?a.extend(!0,f[b],d):f[b]=d;else return f[b]},internal:function(b,
d){if(a.isPlainObject(b))a.extend(!0,M,b);else if(d!==c)M[b]=d;else return M[b]},debug:function(){!f.silent&&f.debug&&(f.performance?M.performance.log(arguments):(M.debug=Function.prototype.bind.call(console.info,console,f.name+":"),M.debug.apply(console,arguments)))},verbose:function(){!f.silent&&f.verbose&&f.debug&&(f.performance?M.performance.log(arguments):(M.verbose=Function.prototype.bind.call(console.info,console,f.name+":"),M.verbose.apply(console,arguments)))},error:function(){f.silent||
(M.error=Function.prototype.bind.call(console.error,console,f.name+":"),M.error.apply(console,arguments))},performance:{log:function(a){var b,c;f.performance&&(b=(new Date).getTime(),c=p||b,c=b-c,p=b,r.push({Name:a[0],Arguments:[].slice.call(a,1)||"",Element:J,"Execution Time":c}));clearTimeout(M.performance.timer);M.performance.timer=setTimeout(M.performance.display,500)},display:function(){var b=f.name+":",d=0;p=!1;clearTimeout(M.performance.timer);a.each(r,function(a,b){d+=b["Execution Time"]});
b+=" "+d+"ms";m&&(b+=" '"+m+"'");(console.group!==c||console.table!==c)&&0<r.length&&(console.groupCollapsed(b),console.table?console.table(r):a.each(r,function(a,b){console.log(b.Name+": "+b["Execution Time"]+"ms")}),console.groupEnd());r=[]}},invoke:function(b,d,e){var f=V,g,h,l;d=d||q;e=J||e;"string"==typeof b&&f!==c&&(b=b.split(/[\. ]/),g=b.length-1,a.each(b,function(d,e){var l=d!=g?e+b[d+1].charAt(0).toUpperCase()+b[d+1].slice(1):b;if(a.isPlainObject(f[l])&&d!=g)f=f[l];else{if(f[l]!==c)return h=
f[l],!1;if(a.isPlainObject(f[e])&&d!=g)f=f[e];else return f[e]!==c&&(h=f[e]),!1}}));a.isFunction(h)?l=h.apply(e,d):h!==c&&(l=h);a.isArray(u)?u.push(l):u!==c?u=[u,l]:l!==c&&(u=l);return h}};l?(V===c&&M.initialize(),M.invoke(t)):(V!==c&&V.invoke("destroy"),M.initialize())});return u!==c?u:this};a.fn.modal.settings={name:"Modal",namespace:"modal",silent:!1,debug:!1,verbose:!1,performance:!0,observeChanges:!1,allowMultiple:!1,detachable:!0,closable:!0,autofocus:!0,inverted:!1,blurring:!1,dimmerSettings:{closable:!1,
useCSS:!0},keyboardShortcuts:!0,context:"body",queue:!1,duration:500,offset:0,transition:"scale",padding:50,onShow:function(){},onVisible:function(){},onHide:function(){return!0},onHidden:function(){},onApprove:function(){return!0},onDeny:function(){return!0},selector:{close:"> .close",approve:".actions .positive, .actions .approve, .actions .ok",deny:".actions .negative, .actions .deny, .actions .cancel",modal:".ui.modal"},error:{dimmer:"UI Dimmer, a required component is not included in this page",
method:"The method you called is not defined.",notFound:"The element you specified could not be found"},className:{active:"active",animating:"animating",blurring:"blurring",scrolling:"scrolling",undetached:"undetached"}}})(jQuery,window,document);
(function(a,b,e,c){b="undefined"!=typeof b&&b.Math==Math?b:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();a.fn.nag=function(d){var e=a(this),n=e.selector||"",h=(new Date).getTime(),g=[],m=arguments[0],p="string"==typeof m,r=[].slice.call(arguments,1),t;e.each(function(){var e=a.isPlainObject(d)?a.extend(!0,{},a.fn.nag.settings,d):a.extend({},a.fn.nag.settings),f=e.selector,w=e.error,u=e.namespace,v="."+u,E=u+"-module",A=a(this);A.find(f.close);var K=e.context?a(e.context):
a("body"),F=this,z=A.data(E),B;B={initialize:function(){B.verbose("Initializing element");A.on("click"+v,f.close,B.dismiss).data(E,B);e.detachable&&A.parent()[0]!==K[0]&&A.detach().prependTo(K);0<e.displayTime&&setTimeout(B.hide,e.displayTime);B.show()},destroy:function(){B.verbose("Destroying instance");A.removeData(E).off(v)},show:function(){B.should.show()&&!A.is(":visible")&&(B.debug("Showing nag",e.animation.show),"fade"==e.animation.show?A.fadeIn(e.duration,e.easing):A.slideDown(e.duration,
e.easing))},hide:function(){B.debug("Showing nag",e.animation.hide);"fade"==e.animation.show?A.fadeIn(e.duration,e.easing):A.slideUp(e.duration,e.easing)},onHide:function(){B.debug("Removing nag",e.animation.hide);A.remove();if(e.onHide)e.onHide()},dismiss:function(a){e.storageMethod&&B.storage.set(e.key,e.value);B.hide();a.stopImmediatePropagation();a.preventDefault()},should:{show:function(){if(e.persist)return B.debug("Persistent nag is set, can show nag"),!0;if(B.storage.get(e.key)!=e.value.toString())return B.debug("Stored value is not set, can show nag",
B.storage.get(e.key)),!0;B.debug("Stored value is set, cannot show nag",B.storage.get(e.key));return!1}},get:{storageOptions:function(){var a={};e.expires&&(a.expires=e.expires);e.domain&&(a.domain=e.domain);e.path&&(a.path=e.path);return a}},clear:function(){B.storage.remove(e.key)},storage:{set:function(d,f){var g=B.get.storageOptions();"localstorage"==e.storageMethod&&b.localStorage!==c?(b.localStorage.setItem(d,f),B.debug("Value stored using local storage",d,f)):"sessionstorage"==e.storageMethod&&
b.sessionStorage!==c?(b.sessionStorage.setItem(d,f),B.debug("Value stored using session storage",d,f)):a.cookie!==c?(a.cookie(d,f,g),B.debug("Value stored using cookie",d,f,g)):B.error(w.noCookieStorage)},get:function(d,f){var g;"localstorage"==e.storageMethod&&b.localStorage!==c?g=b.localStorage.getItem(d):"sessionstorage"==e.storageMethod&&b.sessionStorage!==c?g=b.sessionStorage.getItem(d):a.cookie!==c?g=a.cookie(d):B.error(w.noCookieStorage);if("undefined"==g||"null"==g||g===c||null===g)g=c;return g},
remove:function(d){var f=B.get.storageOptions();"localstorage"==e.storageMethod&&b.localStorage!==c?b.localStorage.removeItem(d):"sessionstorage"==e.storageMethod&&b.sessionStorage!==c?b.sessionStorage.removeItem(d):a.cookie!==c?a.removeCookie(d,f):B.error(w.noStorage)}},setting:function(b,d){B.debug("Changing setting",b,d);if(a.isPlainObject(b))a.extend(!0,e,b);else if(d!==c)a.isPlainObject(e[b])?a.extend(!0,e[b],d):e[b]=d;else return e[b]},internal:function(b,d){if(a.isPlainObject(b))a.extend(!0,
B,b);else if(d!==c)B[b]=d;else return B[b]},debug:function(){!e.silent&&e.debug&&(e.performance?B.performance.log(arguments):(B.debug=Function.prototype.bind.call(console.info,console,e.name+":"),B.debug.apply(console,arguments)))},verbose:function(){!e.silent&&e.verbose&&e.debug&&(e.performance?B.performance.log(arguments):(B.verbose=Function.prototype.bind.call(console.info,console,e.name+":"),B.verbose.apply(console,arguments)))},error:function(){e.silent||(B.error=Function.prototype.bind.call(console.error,
console,e.name+":"),B.error.apply(console,arguments))},performance:{log:function(a){var b,c;e.performance&&(b=(new Date).getTime(),c=h||b,c=b-c,h=b,g.push({Name:a[0],Arguments:[].slice.call(a,1)||"",Element:F,"Execution Time":c}));clearTimeout(B.performance.timer);B.performance.timer=setTimeout(B.performance.display,500)},display:function(){var b=e.name+":",d=0;h=!1;clearTimeout(B.performance.timer);a.each(g,function(a,b){d+=b["Execution Time"]});b+=" "+d+"ms";n&&(b+=" '"+n+"'");(console.group!==
c||console.table!==c)&&0<g.length&&(console.groupCollapsed(b),console.table?console.table(g):a.each(g,function(a,b){console.log(b.Name+": "+b["Execution Time"]+"ms")}),console.groupEnd());g=[]}},invoke:function(b,d,e){var f=z,g,h,l;d=d||r;e=F||e;"string"==typeof b&&f!==c&&(b=b.split(/[\. ]/),g=b.length-1,a.each(b,function(d,e){var l=d!=g?e+b[d+1].charAt(0).toUpperCase()+b[d+1].slice(1):b;if(a.isPlainObject(f[l])&&d!=g)f=f[l];else{if(f[l]!==c)return h=f[l],!1;if(a.isPlainObject(f[e])&&d!=g)f=f[e];
else return f[e]!==c?h=f[e]:B.error(w.method,b),!1}}));a.isFunction(h)?l=h.apply(e,d):h!==c&&(l=h);a.isArray(t)?t.push(l):t!==c?t=[t,l]:l!==c&&(t=l);return h}};p?(z===c&&B.initialize(),B.invoke(m)):(z!==c&&z.invoke("destroy"),B.initialize())});return t!==c?t:this};a.fn.nag.settings={name:"Nag",silent:!1,debug:!1,verbose:!1,performance:!0,namespace:"Nag",persist:!1,displayTime:0,animation:{show:"slide",hide:"slide"},context:!1,detachable:!1,expires:30,domain:!1,path:"/",storageMethod:"cookie",key:"nag",
value:"dismiss",error:{noCookieStorage:"$.cookie is not included. A storage solution is required.",noStorage:"Neither $.cookie or store is defined. A storage solution is required for storing state",method:"The method you called is not defined."},className:{bottom:"bottom",fixed:"fixed"},selector:{close:".close.icon"},speed:500,easing:"easeOutQuad",onHide:function(){}};a.extend(a.easing,{easeOutQuad:function(a,b,c,e,g){return-e*(b/=g)*(b-2)+c}})})(jQuery,window,document);
(function(a,b,e,c){b="undefined"!=typeof b&&b.Math==Math?b:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();a.fn.popup=function(d){var f=a(this),n=a(e),h=a(b),g=a("body"),m=f.selector||"",p=(new Date).getTime(),r=[],t=arguments[0],l="string"==typeof t,q=[].slice.call(arguments,1),w;f.each(function(){var f=a.isPlainObject(d)?a.extend(!0,{},a.fn.popup.settings,d):a.extend({},a.fn.popup.settings),v=f.selector,E=f.className,A=f.error,K=f.metadata,F="."+f.namespace,z="module-"+
f.namespace,B=a(this),H=a(f.context),G=a(f.scrollContext),I=a(f.boundary),N=f.target?a(f.target):B,L,x,S=0,D=!1,J=!1,V=this,Y=B.data(z),W,U,M,Q;Q={initialize:function(){Q.debug("Initializing",B);Q.createID();Q.bind.events();!Q.exists()&&f.preserve&&Q.create();f.observeChanges&&Q.observeChanges();Q.instantiate()},instantiate:function(){Q.verbose("Storing instance",Q);Y=Q;B.data(z,Y)},observeChanges:function(){"MutationObserver"in b&&(W=new MutationObserver(Q.event.documentChanged),W.observe(e,{childList:!0,
subtree:!0}),Q.debug("Setting up mutation observer",W))},refresh:function(){f.popup?L=a(f.popup).eq(0):f.inline&&(L=N.nextAll(v.popup).eq(0),f.popup=L);f.popup?(L.addClass(E.loading),x=Q.get.offsetParent(),L.removeClass(E.loading),f.movePopup&&Q.has.popup()&&Q.get.offsetParent(L)[0]!==x[0]&&(Q.debug("Moving popup to the same offset parent as activating element"),L.detach().appendTo(x))):x=f.inline?Q.get.offsetParent(N):Q.has.popup()?Q.get.offsetParent(L):g;x.is("html")&&x[0]!==g[0]&&(Q.debug("Setting page as offset parent"),
x=g);Q.get.variation()&&Q.set.variation()},reposition:function(){Q.refresh();Q.set.position()},destroy:function(){Q.debug("Destroying previous module");W&&W.disconnect();L&&!f.preserve&&Q.removePopup();clearTimeout(Q.hideTimer);clearTimeout(Q.showTimer);Q.unbind.close();Q.unbind.events();B.removeData(z)},event:{start:function(b){b=a.isPlainObject(f.delay)?f.delay.show:f.delay;clearTimeout(Q.hideTimer);J||(Q.showTimer=setTimeout(Q.show,b))},end:function(){var b=a.isPlainObject(f.delay)?f.delay.hide:
f.delay;clearTimeout(Q.showTimer);Q.hideTimer=setTimeout(Q.hide,b)},touchstart:function(a){J=!0;Q.show()},resize:function(){Q.is.visible()&&Q.set.position()},documentChanged:function(b){[].forEach.call(b,function(b){b.removedNodes&&[].forEach.call(b.removedNodes,function(b){if(b==V||0<a(b).find(V).length)Q.debug("Element removed from DOM, tearing down events"),Q.destroy()})})},hideGracefully:function(b){var c=a(b.target),d=a.contains(e.documentElement,b.target),c=0<c.closest(v.popup).length;b&&!c&&
d?(Q.debug("Click occurred outside popup hiding popup"),Q.hide()):Q.debug("Click was inside popup, keeping popup open")}},create:function(){var b=Q.get.html(),c=Q.get.title(),d=Q.get.content();b||d||c?(Q.debug("Creating pop-up html"),b||(b=f.templates.popup({title:c,content:d})),L=a("<div/>").addClass(E.popup).data(K.activator,B).html(b),f.inline?(Q.verbose("Inserting popup element inline",L),L.insertAfter(B)):(Q.verbose("Appending popup element to body",L),L.appendTo(H)),Q.refresh(),Q.set.variation(),
f.hoverable&&Q.bind.popup(),f.onCreate.call(L,V)):0!==N.next(v.popup).length?(Q.verbose("Pre-existing popup found"),f.inline=!0,f.popup=N.next(v.popup).data(K.activator,B),Q.refresh(),f.hoverable&&Q.bind.popup()):f.popup?(a(f.popup).data(K.activator,B),Q.verbose("Used popup specified in settings"),Q.refresh(),f.hoverable&&Q.bind.popup()):Q.debug("No content specified skipping display",V)},createID:function(){M=(Math.random().toString(16)+"000000000").substr(2,8);U="."+M;Q.verbose("Creating unique id for element",
M)},toggle:function(){Q.debug("Toggling pop-up");Q.is.hidden()?(Q.debug("Popup is hidden, showing pop-up"),Q.unbind.close(),Q.show()):(Q.debug("Popup is visible, hiding pop-up"),Q.hide())},show:function(a){a=a||function(){};Q.debug("Showing pop-up",f.transition);!Q.is.hidden()||Q.is.active()&&Q.is.dropdown()||(Q.exists()||Q.create(),!1===f.onShow.call(L,V)?Q.debug("onShow callback returned false, cancelling popup animation"):(f.preserve||f.popup||Q.refresh(),L&&Q.set.position()&&(Q.save.conditions(),
f.exclusive&&Q.hideAll(),Q.animate.show(a))))},hide:function(a){a=a||function(){};if(Q.is.visible()||Q.is.animating())!1===f.onHide.call(L,V)?Q.debug("onHide callback returned false, cancelling popup animation"):(Q.remove.visible(),Q.unbind.close(),Q.restore.conditions(),Q.animate.hide(a))},hideAll:function(){a(v.popup).filter("."+E.visible).each(function(){a(this).data(K.activator).popup("hide")})},exists:function(){return L?f.inline||f.popup?Q.has.popup():1<=L.closest(H).length?!0:!1:!1},removePopup:function(){Q.has.popup()&&
!f.popup&&(Q.debug("Removing popup",L),L.remove(),L=c,f.onRemove.call(L,V))},save:{conditions:function(){Q.cache={title:B.attr("title")};Q.cache.title&&B.removeAttr("title");Q.verbose("Saving original attributes",Q.cache.title)}},restore:{conditions:function(){Q.cache&&Q.cache.title&&(B.attr("title",Q.cache.title),Q.verbose("Restoring original attributes",Q.cache.title));return!0}},supports:{svg:function(){return typeof SVGGraphicsElement===c}},animate:{show:function(b){b=a.isFunction(b)?b:function(){};
f.transition&&a.fn.transition!==c&&B.transition("is supported")?(Q.set.visible(),L.transition({animation:f.transition+" in",queue:!1,debug:f.debug,verbose:f.verbose,duration:f.duration,onComplete:function(){Q.bind.close();b.call(L,V);f.onVisible.call(L,V)}})):Q.error(A.noTransition)},hide:function(b){b=a.isFunction(b)?b:function(){};Q.debug("Hiding pop-up");!1===f.onHide.call(L,V)?Q.debug("onHide callback returned false, cancelling popup animation"):f.transition&&a.fn.transition!==c&&B.transition("is supported")?
L.transition({animation:f.transition+" out",queue:!1,duration:f.duration,debug:f.debug,verbose:f.verbose,onComplete:function(){Q.reset();b.call(L,V);f.onHidden.call(L,V)}}):Q.error(A.noTransition)}},change:{content:function(a){L.html(a)}},get:{html:function(){B.removeData(K.html);return B.data(K.html)||f.html},title:function(){B.removeData(K.title);return B.data(K.title)||f.title},content:function(){B.removeData(K.content);return B.data(K.content)||B.attr("title")||f.content},variation:function(){B.removeData(K.variation);
return B.data(K.variation)||f.variation},popup:function(){return L},popupOffset:function(){return L.offset()},calculations:function(){var a=N[0],c=I[0]==b,d=f.inline||f.popup&&f.movePopup?N.position():N.offset(),e=c?{top:0,left:0}:I.offset(),g={},g=c?{top:h.scrollTop(),left:h.scrollLeft()}:{top:0,left:0},g={target:{element:N[0],width:N.outerWidth(),height:N.outerHeight(),top:d.top,left:d.left,margin:{}},popup:{width:L.outerWidth(),height:L.outerHeight()},parent:{width:x.outerWidth(),height:x.outerHeight()},
screen:{top:e.top,left:e.left,scroll:{top:g.top,left:g.left},width:I.width(),height:I.height()}};f.setFluidWidth&&Q.is.fluid()&&(g.container={width:L.parent().outerWidth()},g.popup.width=g.container.width);g.target.margin.top=f.inline?parseInt(b.getComputedStyle(a).getPropertyValue("margin-top"),10):0;g.target.margin.left=f.inline?Q.is.rtl()?parseInt(b.getComputedStyle(a).getPropertyValue("margin-right"),10):parseInt(b.getComputedStyle(a).getPropertyValue("margin-left"),10):0;a=g.screen;g.boundary=
{top:a.top+a.scroll.top,bottom:a.top+a.scroll.top+a.height,left:a.left+a.scroll.left,right:a.left+a.scroll.left+a.width};return g},id:function(){return M},startEvent:function(){return"hover"==f.on?"mouseenter":"focus"==f.on?"focus":!1},scrollEvent:function(){return"scroll"},endEvent:function(){return"hover"==f.on?"mouseleave":"focus"==f.on?"blur":!1},distanceFromBoundary:function(a,b){var c={},d,e;b=b||Q.get.calculations();d=b.popup;e=b.boundary;a&&(c={top:a.top-e.top,left:a.left-e.left,right:e.right-
(a.left+d.width),bottom:e.bottom-(a.top+d.height)},Q.verbose("Distance from boundaries determined",a,c));return c},offsetParent:function(b){b=(b!==c?b[0]:B[0]).parentNode;var d=a(b);if(b)for(var e="none"===d.css("transform"),f="static"===d.css("position"),g=d.is("html");b&&!g&&f&&e;)b=b.parentNode,d=a(b),e="none"===d.css("transform"),f="static"===d.css("position"),g=d.is("html");return d&&0<d.length?d:a()},positions:function(){return{"top left":!1,"top center":!1,"top right":!1,"bottom left":!1,"bottom center":!1,
"bottom right":!1,"left center":!1,"right center":!1}},nextPosition:function(a){var b=a.split(" "),c=b[0],b=b[1],d={top:"bottom",bottom:"top",left:"right",right:"left"},e={left:"center",center:"right",right:"left"},g={"top left":"top center","top center":"top right","top right":"right center","right center":"bottom right","bottom right":"bottom center","bottom center":"bottom left","bottom left":"left center","left center":"top left"},h="top"==c||"bottom"==c,l=!1,m=!1,n=!1;D||(Q.verbose("All available positions available"),
D=Q.get.positions());Q.debug("Recording last position tried",a);D[a]=!0;"opposite"===f.prefer&&(n=[d[c],b],n=n.join(" "),l=!0===D[n],Q.debug("Trying opposite strategy",n));"adjacent"===f.prefer&&h&&(n=[c,e[b]],n=n.join(" "),m=!0===D[n],Q.debug("Trying adjacent strategy",n));if(m||l)Q.debug("Using backup position",n),n=g[a];return n}},set:{position:function(a,b){if(0===N.length||0===L.length)Q.error(A.notFound);else{var d,e,g,h,l,m;b=b||Q.get.calculations();a=a||B.data(K.position)||f.position;d=B.data(K.offset)||
f.offset;e=f.distanceAway;g=b.target;h=b.popup;l=b.parent;if(0===g.width&&0===g.height&&!Q.is.svg(g.element))return Q.debug("Popup target is hidden, no action taken"),!1;f.inline&&(Q.debug("Adding margin to calculation",g.margin),"left center"==a||"right center"==a?(d+=g.margin.top,e+=-g.margin.left):"top left"==a||"top center"==a||"top right"==a?(d+=g.margin.left,e-=g.margin.top):(d+=g.margin.left,e+=g.margin.top));Q.debug("Determining popup position from calculations",a,b);Q.is.rtl()&&(a=a.replace(/left|right/g,
function(a){return"left"==a?"right":"left"}),Q.debug("RTL: Popup position updated",a));S==f.maxSearchDepth&&"string"===typeof f.lastResort&&(a=f.lastResort);switch(a){case "top left":m={top:"auto",bottom:l.height-g.top+e,left:g.left+d,right:"auto"};break;case "top center":m={bottom:l.height-g.top+e,left:g.left+g.width/2-h.width/2+d,top:"auto",right:"auto"};break;case "top right":m={bottom:l.height-g.top+e,right:l.width-g.left-g.width-d,top:"auto",left:"auto"};break;case "left center":m={top:g.top+
g.height/2-h.height/2+d,right:l.width-g.left+e,left:"auto",bottom:"auto"};break;case "right center":m={top:g.top+g.height/2-h.height/2+d,left:g.left+g.width+e,bottom:"auto",right:"auto"};break;case "bottom left":m={top:g.top+g.height+e,left:g.left+d,bottom:"auto",right:"auto"};break;case "bottom center":m={top:g.top+g.height+e,left:g.left+g.width/2-h.width/2+d,bottom:"auto",right:"auto"};break;case "bottom right":m={top:g.top+g.height+e,right:l.width-g.left-g.width-d,left:"auto",bottom:"auto"}}m===
c&&Q.error(A.invalidPosition,a);Q.debug("Calculated popup positioning values",m);L.css(m).removeClass(E.position).addClass(a).addClass(E.loading);d=Q.get.popupOffset();d=Q.get.distanceFromBoundary(d,b);if(Q.is.offstage(d,a)){Q.debug("Position is outside viewport",a);if(S<f.maxSearchDepth)return S++,a=Q.get.nextPosition(a),Q.debug("Trying new position",a),L?Q.set.position(a,b):!1;if(f.lastResort)Q.debug("No position found, showing with last position");else return Q.debug("Popup could not find a position to display",
L),Q.error(A.cannotPlace,V),Q.remove.attempts(),Q.remove.loading(),Q.reset(),f.onUnplaceable.call(L,V),!1}Q.debug("Position is on stage",a);Q.remove.attempts();Q.remove.loading();f.setFluidWidth&&Q.is.fluid()&&Q.set.fluidWidth(b);return!0}},fluidWidth:function(a){a=a||Q.get.calculations();Q.debug("Automatically setting element width to parent width",a.parent.width);L.css("width",a.container.width)},variation:function(a){(a=a||Q.get.variation())&&Q.has.popup()&&(Q.verbose("Adding variation to popup",
a),L.addClass(a))},visible:function(){B.addClass(E.visible)}},remove:{loading:function(){L.removeClass(E.loading)},variation:function(a){if(a=a||Q.get.variation())Q.verbose("Removing variation",a),L.removeClass(a)},visible:function(){B.removeClass(E.visible)},attempts:function(){Q.verbose("Resetting all searched positions");S=0;D=!1}},bind:{events:function(){Q.debug("Binding popup events to module");if("click"==f.on)B.on("click"+F,Q.toggle);if("hover"==f.on)B.on("touchstart"+F,Q.event.touchstart);
if(Q.get.startEvent())B.on(Q.get.startEvent()+F,Q.event.start).on(Q.get.endEvent()+F,Q.event.end);f.target&&Q.debug("Target set to element",N);h.on("resize"+U,Q.event.resize)},popup:function(){Q.verbose("Allowing hover events on popup to prevent closing");if(L&&Q.has.popup())L.on("mouseenter"+F,Q.event.start).on("mouseleave"+F,Q.event.end)},close:function(){if(!0===f.hideOnScroll||"auto"==f.hideOnScroll&&"click"!=f.on)G.one(Q.get.scrollEvent()+U,Q.event.hideGracefully);"hover"==f.on&&J&&(Q.verbose("Binding popup close event to document"),
n.on("touchstart"+U,function(a){Q.verbose("Touched away from popup");Q.event.hideGracefully.call(V,a)}));"click"==f.on&&f.closable&&(Q.verbose("Binding popup close event to document"),n.on("click"+U,function(a){Q.verbose("Clicked away from popup");Q.event.hideGracefully.call(V,a)}))}},unbind:{events:function(){h.off(U);B.off(F)},close:function(){n.off(U);G.off(U)}},has:{popup:function(){return L&&0<L.length}},is:{offstage:function(b,c){var d=[];a.each(b,function(a,b){b<-f.jitter&&(Q.debug("Position exceeds allowable distance from edge",
a,b,c),d.push(a))});return 0<d.length?!0:!1},svg:function(a){return Q.supports.svg()&&a instanceof SVGGraphicsElement},active:function(){return B.hasClass(E.active)},animating:function(){return L!==c&&L.hasClass(E.animating)},fluid:function(){return L!==c&&L.hasClass(E.fluid)},visible:function(){return L!==c&&L.hasClass(E.visible)},dropdown:function(){return B.hasClass(E.dropdown)},hidden:function(){return!Q.is.visible()},rtl:function(){return"rtl"==B.css("direction")}},reset:function(){Q.remove.visible();
f.preserve?a.fn.transition!==c&&L.transition("remove transition"):Q.removePopup()},setting:function(b,d){if(a.isPlainObject(b))a.extend(!0,f,b);else if(d!==c)f[b]=d;else return f[b]},internal:function(b,d){if(a.isPlainObject(b))a.extend(!0,Q,b);else if(d!==c)Q[b]=d;else return Q[b]},debug:function(){!f.silent&&f.debug&&(f.performance?Q.performance.log(arguments):(Q.debug=Function.prototype.bind.call(console.info,console,f.name+":"),Q.debug.apply(console,arguments)))},verbose:function(){!f.silent&&
f.verbose&&f.debug&&(f.performance?Q.performance.log(arguments):(Q.verbose=Function.prototype.bind.call(console.info,console,f.name+":"),Q.verbose.apply(console,arguments)))},error:function(){f.silent||(Q.error=Function.prototype.bind.call(console.error,console,f.name+":"),Q.error.apply(console,arguments))},performance:{log:function(a){var b,c;f.performance&&(b=(new Date).getTime(),c=p||b,c=b-c,p=b,r.push({Name:a[0],Arguments:[].slice.call(a,1)||"",Element:V,"Execution Time":c}));clearTimeout(Q.performance.timer);
Q.performance.timer=setTimeout(Q.performance.display,500)},display:function(){var b=f.name+":",d=0;p=!1;clearTimeout(Q.performance.timer);a.each(r,function(a,b){d+=b["Execution Time"]});b+=" "+d+"ms";m&&(b+=" '"+m+"'");(console.group!==c||console.table!==c)&&0<r.length&&(console.groupCollapsed(b),console.table?console.table(r):a.each(r,function(a,b){console.log(b.Name+": "+b["Execution Time"]+"ms")}),console.groupEnd());r=[]}},invoke:function(b,d,e){var f=Y,g,h,l;d=d||q;e=V||e;"string"==typeof b&&
f!==c&&(b=b.split(/[\. ]/),g=b.length-1,a.each(b,function(d,e){var l=d!=g?e+b[d+1].charAt(0).toUpperCase()+b[d+1].slice(1):b;if(a.isPlainObject(f[l])&&d!=g)f=f[l];else{if(f[l]!==c)return h=f[l],!1;if(a.isPlainObject(f[e])&&d!=g)f=f[e];else return f[e]!==c&&(h=f[e]),!1}}));a.isFunction(h)?l=h.apply(e,d):h!==c&&(l=h);a.isArray(w)?w.push(l):w!==c?w=[w,l]:l!==c&&(w=l);return h}};l?(Y===c&&Q.initialize(),Q.invoke(t)):(Y!==c&&Y.invoke("destroy"),Q.initialize())});return w!==c?w:this};a.fn.popup.settings=
{name:"Popup",silent:!1,debug:!1,verbose:!1,performance:!0,namespace:"popup",observeChanges:!0,onCreate:function(){},onRemove:function(){},onShow:function(){},onVisible:function(){},onHide:function(){},onUnplaceable:function(){},onHidden:function(){},on:"hover",boundary:b,addTouchEvents:!0,position:"top left",variation:"",movePopup:!0,target:!1,popup:!1,inline:!1,preserve:!1,hoverable:!1,content:!1,html:!1,title:!1,closable:!0,hideOnScroll:"auto",exclusive:!1,context:"body",scrollContext:b,prefer:"opposite",
lastResort:!1,delay:{show:50,hide:70},setFluidWidth:!0,duration:200,transition:"scale",distanceAway:0,jitter:2,offset:0,maxSearchDepth:15,error:{invalidPosition:"The position you specified is not a valid position",cannotPlace:"Popup does not fit within the boundaries of the viewport",method:"The method you called is not defined.",noTransition:"This module requires ui transitions <https://github.com/Semantic-Org/UI-Transition>",notFound:"The target or popup you specified does not exist on the page"},
metadata:{activator:"activator",content:"content",html:"html",offset:"offset",position:"position",title:"title",variation:"variation"},className:{active:"active",animating:"animating",dropdown:"dropdown",fluid:"fluid",loading:"loading",popup:"ui popup",position:"top left center bottom right",visible:"visible"},selector:{popup:".ui.popup"},templates:{escape:function(a){var b=/[&<>"'`]/g,c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},e=function(a){return c[a]};return/[&<>"'`]/.test(a)?
a.replace(b,e):a},popup:function(b){var e="",n=a.fn.popup.settings.templates.escape;typeof b!==c&&(typeof b.title!==c&&b.title&&(b.title=n(b.title),e+='<div class="header">'+b.title+"</div>"),typeof b.content!==c&&b.content&&(b.content=n(b.content),e+='<div class="content">'+b.content+"</div>"));return e}}}})(jQuery,window,document);
(function(a,b,e,c){b="undefined"!=typeof b&&b.Math==Math?b:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"undefined"!=typeof b&&b.Math==Math||"undefined"!=typeof self&&self.Math==Math||Function("return this")();a.fn.progress=function(b){var f=a(this),n=f.selector||"",h=(new Date).getTime(),g=[],m=arguments[0],p="string"==typeof m,r=[].slice.call(arguments,1),t;f.each(function(){var f=a.isPlainObject(b)?a.extend(!0,{},a.fn.progress.settings,b):a.extend({},a.fn.progress.settings),
q=f.className,w=f.metadata,u=f.namespace,v=f.selector,E=f.error,A="."+u,K="module-"+u,F=a(this),z=a(this).find(v.bar),B=a(this).find(v.progress),H=a(this).find(v.label),G=this,I=F.data(K),N=!1,L;L={initialize:function(){L.debug("Initializing progress bar",f);L.set.duration();L.set.transitionEvent();L.read.metadata();L.read.settings();L.instantiate()},instantiate:function(){L.verbose("Storing instance of progress",L);I=L;F.data(K,L)},destroy:function(){L.verbose("Destroying previous progress for",
F);clearInterval(I.interval);L.remove.state();F.removeData(K);I=c},reset:function(){L.remove.nextValue();L.update.progress(0)},complete:function(){if(L.percent===c||100>L.percent)L.remove.progressPoll(),L.set.percent(100)},read:{metadata:function(){var a=F.data(w.percent),b=F.data(w.total),c=F.data(w.value);a&&(L.debug("Current percent value set from metadata",a),L.set.percent(a));b&&(L.debug("Total value set from metadata",b),L.set.total(b));c&&(L.debug("Current value set from metadata",c),L.set.value(c),
L.set.progress(c))},settings:function(){!1!==f.total&&(L.debug("Current total set in settings",f.total),L.set.total(f.total));!1!==f.value&&(L.debug("Current value set in settings",f.value),L.set.value(f.value),L.set.progress(L.value));!1!==f.percent&&(L.debug("Current percent set in settings",f.percent),L.set.percent(f.percent))}},bind:{transitionEnd:function(a){var b=L.get.transitionEnd();z.one(b+A,function(b){clearTimeout(L.failSafeTimer);a.call(this,b)});L.failSafeTimer=setTimeout(function(){z.triggerHandler(b)},
f.duration+f.failSafeDelay);L.verbose("Adding fail safe timer",L.timer)}},increment:function(a){var b;L.has.total()?(b=L.get.value(),a=b+(a||1)):(b=L.get.percent(),a=a||L.get.randomValue(),a=b+a,L.debug("Incrementing percentage by",b,a));a=L.get.normalizedValue(a);L.set.progress(a)},decrement:function(a){var b,c;L.get.total()?(b=L.get.value(),a=a||1,c=b-a,L.debug("Decrementing value by",a,b)):(b=L.get.percent(),a=a||L.get.randomValue(),c=b-a,L.debug("Decrementing percentage by",a,b));c=L.get.normalizedValue(c);
L.set.progress(c)},has:{progressPoll:function(){return L.progressPoll},total:function(){return!1!==L.get.total()}},get:{text:function(a){var b=L.value||0,c=L.total||0,d=N?L.get.displayPercent():L.percent||0,e=0<L.total?c-b:100-d;a=(a||"").replace("{value}",b).replace("{total}",c).replace("{left}",e).replace("{percent}",d);L.verbose("Adding variables to progress bar text",a);return a},normalizedValue:function(a){if(0>a)return L.debug("Value cannot decrement below 0"),0;if(L.has.total()){if(a>L.total)return L.debug("Value cannot increment above total",
L.total),L.total}else if(100<a)return L.debug("Value cannot increment above 100 percent"),100;return a},updateInterval:function(){return"auto"==f.updateInterval?f.duration:f.updateInterval},randomValue:function(){L.debug("Generating random increment percentage");return Math.floor(Math.random()*f.random.max+f.random.min)},numericValue:function(a){return"string"===typeof a?""!==a.replace(/[^\d.]/g,"")?+a.replace(/[^\d.]/g,""):!1:a},transitionEnd:function(){var a=e.createElement("element"),b={transition:"transitionend",
OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"},d;for(d in b)if(a.style[d]!==c)return b[d]},displayPercent:function(){var a=z.width(),b=F.width(),c=parseInt(z.css("min-width"),10),a=a>c?a/b*100:L.percent;return 0<f.precision?Math.round(10*a*f.precision)/(10*f.precision):Math.round(a)},percent:function(){return L.percent||0},value:function(){return L.nextValue||L.value||0},total:function(){return L.total||!1}},create:{progressPoll:function(){L.progressPoll=
setTimeout(function(){L.update.toNextValue();L.remove.progressPoll()},L.get.updateInterval())}},is:{complete:function(){return L.is.success()||L.is.warning()||L.is.error()},success:function(){return F.hasClass(q.success)},warning:function(){return F.hasClass(q.warning)},error:function(){return F.hasClass(q.error)},active:function(){return F.hasClass(q.active)},visible:function(){return F.is(":visible")}},remove:{progressPoll:function(){L.verbose("Removing progress poll timer");L.progressPoll&&(clearTimeout(L.progressPoll),
delete L.progressPoll)},nextValue:function(){L.verbose("Removing progress value stored for next update");delete L.nextValue},state:function(){L.verbose("Removing stored state");delete L.total;delete L.percent;delete L.value},active:function(){L.verbose("Removing active state");F.removeClass(q.active)},success:function(){L.verbose("Removing success state");F.removeClass(q.success)},warning:function(){L.verbose("Removing warning state");F.removeClass(q.warning)},error:function(){L.verbose("Removing error state");
F.removeClass(q.error)}},set:{barWidth:function(a){100<a?L.error(E.tooHigh,a):0>a?L.error(E.tooLow,a):(z.css("width",a+"%"),F.attr("data-percent",parseInt(a,10)))},duration:function(a){a=a||f.duration;a="number"==typeof a?a+"ms":a;L.verbose("Setting progress bar transition duration",a);z.css({"transition-duration":a})},percent:function(a){a="string"==typeof a?+a.replace("%",""):a;a=0<f.precision?Math.round(10*a*f.precision)/(10*f.precision):Math.round(a);L.percent=a;L.has.total()||(L.value=0<f.precision?
Math.round(a/100*L.total*10*f.precision)/(10*f.precision):Math.round(a/100*L.total*10)/10,f.limitValues&&(L.value=100<L.value?100:0>L.value?0:L.value));L.set.barWidth(a);L.set.labelInterval();L.set.labels();f.onChange.call(G,a,L.value,L.total)},labelInterval:function(){clearInterval(L.interval);L.bind.transitionEnd(function(){L.verbose("Bar finished animating, removing continuous label updates");clearInterval(L.interval);N=!1;L.set.labels()});N=!0;L.interval=setInterval(function(){a.contains(e.documentElement,
G)||(clearInterval(L.interval),N=!1);L.set.labels()},f.framerate)},labels:function(){L.verbose("Setting both bar progress and outer label text");L.set.barLabel();L.set.state()},label:function(a){if(a=a||"")a=L.get.text(a),L.verbose("Setting label to text",a),H.text(a)},state:function(a){a=a!==c?a:L.percent;100===a?!f.autoSuccess||L.is.warning()||L.is.error()||L.is.success()?(L.verbose("Reached 100% removing active state"),L.remove.active(),L.remove.progressPoll()):(L.set.success(),L.debug("Automatically triggering success at 100%")):
0<a?(L.verbose("Adjusting active progress bar label",a),L.set.active()):(L.remove.active(),L.set.label(f.text.active))},barLabel:function(a){a!==c?B.text(L.get.text(a)):"ratio"==f.label&&L.total?(L.verbose("Adding ratio to bar label"),B.text(L.get.text(f.text.ratio))):"percent"==f.label&&(L.verbose("Adding percentage to bar label"),B.text(L.get.text(f.text.percent)))},active:function(a){a=a||f.text.active;L.debug("Setting active state");f.showActivity&&!L.is.active()&&F.addClass(q.active);L.remove.warning();
L.remove.error();L.remove.success();(a=f.onLabelUpdate("active",a,L.value,L.total))&&L.set.label(a);L.bind.transitionEnd(function(){f.onActive.call(G,L.value,L.total)})},success:function(a){a=a||f.text.success||f.text.active;L.debug("Setting success state");F.addClass(q.success);L.remove.active();L.remove.warning();L.remove.error();L.complete();a=f.text.success?f.onLabelUpdate("success",a,L.value,L.total):f.onLabelUpdate("active",a,L.value,L.total);L.set.label(a);L.bind.transitionEnd(function(){f.onSuccess.call(G,
L.total)})},warning:function(a){a=a||f.text.warning;L.debug("Setting warning state");F.addClass(q.warning);L.remove.active();L.remove.success();L.remove.error();L.complete();(a=f.onLabelUpdate("warning",a,L.value,L.total))&&L.set.label(a);L.bind.transitionEnd(function(){f.onWarning.call(G,L.value,L.total)})},error:function(a){a=a||f.text.error;L.debug("Setting error state");F.addClass(q.error);L.remove.active();L.remove.success();L.remove.warning();L.complete();(a=f.onLabelUpdate("error",a,L.value,
L.total))&&L.set.label(a);L.bind.transitionEnd(function(){f.onError.call(G,L.value,L.total)})},transitionEvent:function(){L.get.transitionEnd()},total:function(a){L.total=a},value:function(a){L.value=a},progress:function(a){L.has.progressPoll()?(L.debug("Updated within interval, setting next update to use new value",a),L.set.nextValue(a)):(L.debug("First update in progress update interval, immediately updating",a),L.update.progress(a),L.create.progressPoll())},nextValue:function(a){L.nextValue=a}},
update:{toNextValue:function(){var a=L.nextValue;a&&(L.debug("Update interval complete using last updated value",a),L.update.progress(a),L.remove.nextValue())},progress:function(a){a=L.get.numericValue(a);!1===a&&L.error(E.nonNumeric,a);a=L.get.normalizedValue(a);L.has.total()?(L.set.value(a),a=a/L.total*100,L.debug("Calculating percent complete from total",a)):L.debug("Setting value to exact percentage value",a);L.set.percent(a)}},setting:function(b,d){L.debug("Changing setting",b,d);if(a.isPlainObject(b))a.extend(!0,
f,b);else if(d!==c)a.isPlainObject(f[b])?a.extend(!0,f[b],d):f[b]=d;else return f[b]},internal:function(b,d){if(a.isPlainObject(b))a.extend(!0,L,b);else if(d!==c)L[b]=d;else return L[b]},debug:function(){!f.silent&&f.debug&&(f.performance?L.performance.log(arguments):(L.debug=Function.prototype.bind.call(console.info,console,f.name+":"),L.debug.apply(console,arguments)))},verbose:function(){!f.silent&&f.verbose&&f.debug&&(f.performance?L.performance.log(arguments):(L.verbose=Function.prototype.bind.call(console.info,
console,f.name+":"),L.verbose.apply(console,arguments)))},error:function(){f.silent||(L.error=Function.prototype.bind.call(console.error,console,f.name+":"),L.error.apply(console,arguments))},performance:{log:function(a){var b,c;f.performance&&(b=(new Date).getTime(),c=h||b,c=b-c,h=b,g.push({Name:a[0],Arguments:[].slice.call(a,1)||"",Element:G,"Execution Time":c}));clearTimeout(L.performance.timer);L.performance.timer=setTimeout(L.performance.display,500)},display:function(){var b=f.name+":",d=0;
h=!1;clearTimeout(L.performance.timer);a.each(g,function(a,b){d+=b["Execution Time"]});b+=" "+d+"ms";n&&(b+=" '"+n+"'");(console.group!==c||console.table!==c)&&0<g.length&&(console.groupCollapsed(b),console.table?console.table(g):a.each(g,function(a,b){console.log(b.Name+": "+b["Execution Time"]+"ms")}),console.groupEnd());g=[]}},invoke:function(b,d,e){var f=I,g,h,l;d=d||r;e=G||e;"string"==typeof b&&f!==c&&(b=b.split(/[\. ]/),g=b.length-1,a.each(b,function(d,e){var l=d!=g?e+b[d+1].charAt(0).toUpperCase()+
b[d+1].slice(1):b;if(a.isPlainObject(f[l])&&d!=g)f=f[l];else{if(f[l]!==c)return h=f[l],!1;if(a.isPlainObject(f[e])&&d!=g)f=f[e];else return f[e]!==c?h=f[e]:L.error(E.method,b),!1}}));a.isFunction(h)?l=h.apply(e,d):h!==c&&(l=h);a.isArray(t)?t.push(l):t!==c?t=[t,l]:l!==c&&(t=l);return h}};p?(I===c&&L.initialize(),L.invoke(m)):(I!==c&&I.invoke("destroy"),L.initialize())});return t!==c?t:this};a.fn.progress.settings={name:"Progress",namespace:"progress",silent:!1,debug:!1,verbose:!1,performance:!0,random:{min:2,
max:5},duration:300,updateInterval:"auto",autoSuccess:!0,showActivity:!0,limitValues:!0,label:"percent",precision:0,framerate:1E3/30,percent:!1,total:!1,value:!1,failSafeDelay:100,onLabelUpdate:function(a,b,c,e){return b},onChange:function(a,b,c){},onSuccess:function(a){},onActive:function(a,b){},onError:function(a,b){},onWarning:function(a,b){},error:{method:"The method you called is not defined.",nonNumeric:"Progress value is non numeric",tooHigh:"Value specified is above 100%",tooLow:"Value specified is below 0%"},
regExp:{variable:/\{\$*[A-z0-9]+\}/g},metadata:{percent:"percent",total:"total",value:"value"},selector:{bar:"> .bar",label:"> .label",progress:".bar > .progress"},text:{active:!1,error:!1,success:!1,warning:!1,percent:"{percent}%",ratio:"{value} of {total}"},className:{active:"active",error:"error",success:"success",warning:"warning"}}})(jQuery,window,document);
(function(a,b,e,c){b="undefined"!=typeof b&&b.Math==Math?b:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();a.fn.rating=function(b){var e=a(this),n=e.selector||"",h=(new Date).getTime(),g=[],m=arguments[0],p="string"==typeof m,r=[].slice.call(arguments,1),t;e.each(function(){var l=a.isPlainObject(b)?a.extend(!0,{},a.fn.rating.settings,b):a.extend({},a.fn.rating.settings),q=l.namespace,w=l.className,u=l.metadata,v=l.selector,E="."+q,A="module-"+q,K=this,F=a(this).data(A),z=
a(this),B=z.find(v.icon),H,G;G={initialize:function(){G.verbose("Initializing rating module",l);0===B.length&&G.setup.layout();l.interactive?G.enable():G.disable();G.set.initialLoad();G.set.rating(G.get.initialRating());G.remove.initialLoad();G.instantiate()},instantiate:function(){G.verbose("Instantiating module",l);F=G;z.data(A,G)},destroy:function(){G.verbose("Destroying previous instance",F);G.remove.events();z.removeData(A)},refresh:function(){B=z.find(v.icon)},setup:{layout:function(){var b=
G.get.maxRating(),b=a.fn.rating.settings.templates.icon(b);G.debug("Generating icon html dynamically");z.html(b);G.refresh()}},event:{mouseenter:function(){var b=a(this);b.nextAll().removeClass(w.selected);z.addClass(w.selected);b.addClass(w.selected).prevAll().addClass(w.selected)},mouseleave:function(){z.removeClass(w.selected);B.removeClass(w.selected)},click:function(){var b=a(this),c=G.get.rating(),b=B.index(b)+1;("auto"==l.clearable?1===B.length:l.clearable)&&c==b?G.clearRating():G.set.rating(b)}},
clearRating:function(){G.debug("Clearing current rating");G.set.rating(0)},bind:{events:function(){G.verbose("Binding events");z.on("mouseenter"+E,v.icon,G.event.mouseenter).on("mouseleave"+E,v.icon,G.event.mouseleave).on("click"+E,v.icon,G.event.click)}},remove:{events:function(){G.verbose("Removing events");z.off(E)},initialLoad:function(){H=!1}},enable:function(){G.debug("Setting rating to interactive mode");G.bind.events();z.removeClass(w.disabled)},disable:function(){G.debug("Setting rating to read-only mode");
G.remove.events();z.addClass(w.disabled)},is:{initialLoad:function(){return H}},get:{initialRating:function(){return z.data(u.rating)!==c?(z.removeData(u.rating),z.data(u.rating)):l.initialRating},maxRating:function(){return z.data(u.maxRating)!==c?(z.removeData(u.maxRating),z.data(u.maxRating)):l.maxRating},rating:function(){var a=B.filter("."+w.active).length;G.verbose("Current rating retrieved",a);return a}},set:{rating:function(a){var b=B.eq(0<=a-1?a-1:0);z.removeClass(w.selected);B.removeClass(w.selected).removeClass(w.active);
0<a&&(G.verbose("Setting current rating to",a),b.prevAll().addBack().addClass(w.active));G.is.initialLoad()||l.onRate.call(K,a)},initialLoad:function(){H=!0}},setting:function(b,d){G.debug("Changing setting",b,d);if(a.isPlainObject(b))a.extend(!0,l,b);else if(d!==c)a.isPlainObject(l[b])?a.extend(!0,l[b],d):l[b]=d;else return l[b]},internal:function(b,d){if(a.isPlainObject(b))a.extend(!0,G,b);else if(d!==c)G[b]=d;else return G[b]},debug:function(){!l.silent&&l.debug&&(l.performance?G.performance.log(arguments):
(G.debug=Function.prototype.bind.call(console.info,console,l.name+":"),G.debug.apply(console,arguments)))},verbose:function(){!l.silent&&l.verbose&&l.debug&&(l.performance?G.performance.log(arguments):(G.verbose=Function.prototype.bind.call(console.info,console,l.name+":"),G.verbose.apply(console,arguments)))},error:function(){l.silent||(G.error=Function.prototype.bind.call(console.error,console,l.name+":"),G.error.apply(console,arguments))},performance:{log:function(a){var b,c;l.performance&&(b=
(new Date).getTime(),c=h||b,c=b-c,h=b,g.push({Name:a[0],Arguments:[].slice.call(a,1)||"",Element:K,"Execution Time":c}));clearTimeout(G.performance.timer);G.performance.timer=setTimeout(G.performance.display,500)},display:function(){var b=l.name+":",d=0;h=!1;clearTimeout(G.performance.timer);a.each(g,function(a,b){d+=b["Execution Time"]});b+=" "+d+"ms";n&&(b+=" '"+n+"'");1<e.length&&(b+=" ("+e.length+")");(console.group!==c||console.table!==c)&&0<g.length&&(console.groupCollapsed(b),console.table?
console.table(g):a.each(g,function(a,b){console.log(b.Name+": "+b["Execution Time"]+"ms")}),console.groupEnd());g=[]}},invoke:function(b,d,e){var f=F,g,h,l;d=d||r;e=K||e;"string"==typeof b&&f!==c&&(b=b.split(/[\. ]/),g=b.length-1,a.each(b,function(d,e){var l=d!=g?e+b[d+1].charAt(0).toUpperCase()+b[d+1].slice(1):b;if(a.isPlainObject(f[l])&&d!=g)f=f[l];else{if(f[l]!==c)return h=f[l],!1;if(a.isPlainObject(f[e])&&d!=g)f=f[e];else return f[e]!==c&&(h=f[e]),!1}}));a.isFunction(h)?l=h.apply(e,d):h!==c&&
(l=h);a.isArray(t)?t.push(l):t!==c?t=[t,l]:l!==c&&(t=l);return h}};p?(F===c&&G.initialize(),G.invoke(m)):(F!==c&&F.invoke("destroy"),G.initialize())});return t!==c?t:this};a.fn.rating.settings={name:"Rating",namespace:"rating",slent:!1,debug:!1,verbose:!1,performance:!0,initialRating:0,interactive:!0,maxRating:4,clearable:"auto",fireOnInit:!1,onRate:function(a){},error:{method:"The method you called is not defined",noMaximum:"No maximum rating specified. Cannot generate HTML automatically"},metadata:{rating:"rating",
maxRating:"maxRating"},className:{active:"active",disabled:"disabled",selected:"selected",loading:"loading"},selector:{icon:".icon"},templates:{icon:function(a){for(var b=1,c="";b<=a;)c+='<i class="icon"></i>',b++;return c}}}})(jQuery,window,document);
(function(a,b,e,c){b="undefined"!=typeof b&&b.Math==Math?b:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();a.fn.search=function(d){var f=a(this),n=f.selector||"",h=(new Date).getTime(),g=[],m=arguments[0],p="string"==typeof m,r=[].slice.call(arguments,1),t;a(this).each(function(){var l=a.isPlainObject(d)?a.extend(!0,{},a.fn.search.settings,d):a.extend({},a.fn.search.settings),q=l.className,w=l.metadata,u=l.regExp,v=l.fields,E=l.selector,A=l.error,K=l.namespace,F="."+K,z=K+
"-module",B=a(this),H=B.find(E.prompt),G=B.find(E.searchButton),I=B.find(E.results),N=B.find(E.result);B.find(E.category);var L=this,x=B.data(z),S=!1,D;D={initialize:function(){D.verbose("Initializing module");D.determine.searchFields();D.bind.events();D.set.type();D.create.results();D.instantiate()},instantiate:function(){D.verbose("Storing instance of module",D);x=D;B.data(z,D)},destroy:function(){D.verbose("Destroying instance");B.off(F).removeData(z)},refresh:function(){D.debug("Refreshing selector cache");
H=B.find(E.prompt);G=B.find(E.searchButton);B.find(E.category);I=B.find(E.results);N=B.find(E.result)},refreshResults:function(){I=B.find(E.results);N=B.find(E.result)},bind:{events:function(){D.verbose("Binding events to search");l.automatic&&(B.on(D.get.inputEvent()+F,E.prompt,D.event.input),H.attr("autocomplete","off"));B.on("focus"+F,E.prompt,D.event.focus).on("blur"+F,E.prompt,D.event.blur).on("keydown"+F,E.prompt,D.handleKeyboard).on("click"+F,E.searchButton,D.query).on("mousedown"+F,E.results,
D.event.result.mousedown).on("mouseup"+F,E.results,D.event.result.mouseup).on("click"+F,E.result,D.event.result.click)}},determine:{searchFields:function(){d&&d.searchFields!==c&&(l.searchFields=d.searchFields)}},event:{input:function(){clearTimeout(D.timer);D.timer=setTimeout(D.query,l.searchDelay)},focus:function(){D.set.focus();D.has.minimumCharacters()&&(D.query(),D.can.show()&&D.showResults())},blur:function(a){var b=function(){D.cancel.query();D.remove.focus();D.timer=setTimeout(D.hideResults,
l.hideDelay)};e.activeElement!==this&&(D.resultsClicked?(D.debug("Determining if user action caused search to close"),B.one("click.close"+F,E.results,function(a){D.is.inMessage(a)||S?H.focus():(S=!1,D.is.animating()||D.is.hidden()||b())})):(D.debug("Input blurred without user action, closing results"),b()))},result:{mousedown:function(){D.resultsClicked=!0},mouseup:function(){D.resultsClicked=!1},click:function(c){D.debug("Search result selected");var d=a(this),e=d.find(E.title).eq(0),f=d.is("a[href]")?
d:d.find("a[href]").eq(0),g=f.attr("href")||!1,h=f.attr("target")||!1;e.html();var e=0<e.length?e.text():!1,m=D.get.results(),d=d.data(w.result)||D.get.result(e,m);a.isFunction(l.onSelect)&&!1===l.onSelect.call(L,d,m)?(D.debug("Custom onSelect callback cancelled default select action"),S=!0):(D.hideResults(),e&&D.set.value(e),g&&(D.verbose("Opening search link found in result",f),"_blank"==h||c.ctrlKey?b.open(g):b.location.href=g))}}},handleKeyboard:function(a){var b=B.find(E.result),c=B.find(E.category),
d=b.filter("."+q.active),e=b.index(d),f=b.length,d=0<d.length,g=a.which;27==g&&(D.verbose("Escape key pressed, blurring search field"),D.trigger.blur());if(D.is.visible())if(13==g){if(D.verbose("Enter key pressed, selecting active result"),0<b.filter("."+q.active).length)return D.event.result.click.call(b.filter("."+q.active),a),a.preventDefault(),!1}else 38==g&&d?(D.verbose("Up key pressed, changing active result"),e=0>e-1?e:e-1,c.removeClass(q.active),b.removeClass(q.active).eq(e).addClass(q.active).closest(c).addClass(q.active),
a.preventDefault()):40==g&&(D.verbose("Down key pressed, changing active result"),e=e+1>=f?e:e+1,c.removeClass(q.active),b.removeClass(q.active).eq(e).addClass(q.active).closest(c).addClass(q.active),a.preventDefault());else 13==g&&(D.verbose("Enter key pressed, executing query"),D.query(),D.set.buttonPressed(),H.one("keyup",D.remove.buttonFocus))},setup:{api:function(b){var c={debug:l.debug,on:!1,cache:!0,action:"search",urlData:{query:b},onSuccess:function(a){D.parse.response.call(L,a,b)},onAbort:function(a){},
onFailure:function(){D.displayMessage(A.serverError)},onError:D.error};a.extend(!0,c,l.apiSettings);D.verbose("Setting up API request",c);B.api(c)}},can:{useAPI:function(){return a.fn.api!==c},show:function(){return D.is.focused()&&!D.is.visible()&&!D.is.empty()},transition:function(){return l.transition&&a.fn.transition!==c&&B.transition("is supported")}},is:{animating:function(){return I.hasClass(q.animating)},hidden:function(){return I.hasClass(q.hidden)},inMessage:function(b){if(b.target){var c=
a(b.target);return a.contains(e.documentElement,b.target)&&0<c.closest(E.message).length}},empty:function(){return""===I.html()},visible:function(){return 0<I.filter(":visible").length},focused:function(){return 0<H.filter(":focus").length}},trigger:{blur:function(){var a=e.createEvent("HTMLEvents"),b=H[0];b&&(D.verbose("Triggering native blur event"),a.initEvent("blur",!1,!1),b.dispatchEvent(a))}},get:{inputEvent:function(){var a=H[0];return a!==c&&a.oninput!==c?"input":a!==c&&a.onpropertychange!==
c?"propertychange":"keyup"},value:function(){return H.val()},results:function(){return B.data(w.results)},result:function(b,d){var e=["title","id"],f=!1;b=b!==c?b:D.get.value();d=d!==c?d:D.get.results();"category"===l.type?(D.debug("Finding result that matches",b),a.each(d,function(c,d){if(a.isArray(d.results)&&(f=D.search.object(b,d.results,e)[0]))return!1})):(D.debug("Finding result in results object",b),f=D.search.object(b,d,e)[0]);return f||!1}},select:{firstResult:function(){D.verbose("Selecting first result");
N.first().addClass(q.active)}},set:{focus:function(){B.addClass(q.focus)},loading:function(){B.addClass(q.loading)},value:function(a){D.verbose("Setting search input value",a);H.val(a)},type:function(a){"category"==l.type&&B.addClass(l.type)},buttonPressed:function(){G.addClass(q.pressed)}},remove:{loading:function(){B.removeClass(q.loading)},focus:function(){B.removeClass(q.focus)},buttonPressed:function(){G.removeClass(q.pressed)}},query:function(){var b=D.get.value(),c=D.read.cache(b);D.has.minimumCharacters()?
(c?(D.debug("Reading result from cache",b),D.save.results(c.results),D.addResults(c.html),D.inject.id(c.results)):(D.debug("Querying for",b),a.isPlainObject(l.source)||a.isArray(l.source)?D.search.local(b):D.can.useAPI()?D.search.remote(b):D.error(A.source)),l.onSearchQuery.call(L,b)):D.hideResults()},search:{local:function(a){var b=D.search.object(a,l.content),c;D.set.loading();D.save.results(b);D.debug("Returned local search results",b);c=D.generateResults({results:b});D.remove.loading();D.addResults(c);
D.inject.id(b);D.write.cache(a,{html:c,results:b})},remote:function(a){B.api("is loading")&&B.api("abort");D.setup.api(a);B.api("query")},object:function(b,d,e){var f=[],g=[],h=b.toString().replace(u.escape,"\\$&"),m=new RegExp(u.beginsWith+h,"i"),n=function(b,c){var d=-1==a.inArray(c,f),e=-1==a.inArray(c,g);d&&e&&b.push(c)};d=d||l.source;e=e!==c?e:l.searchFields;a.isArray(e)||(e=[e]);if(d===c||!1===d)return D.error(A.source),[];a.each(e,function(c,e){a.each(d,function(a,c){"string"==typeof c[e]&&
(-1!==c[e].search(m)?n(f,c):l.searchFullText&&D.fuzzySearch(b,c[e])&&n(g,c))})});return a.merge(f,g)}},fuzzySearch:function(a,b){var c=b.length,d=a.length;if("string"!==typeof a)return!1;a=a.toLowerCase();b=b.toLowerCase();if(d>c)return!1;if(d===c)return a===b;var e=0,f=0;a:for(;e<d;e++){for(var g=a.charCodeAt(e);f<c;)if(b.charCodeAt(f++)===g)continue a;return!1}return!0},parse:{response:function(a,b){var d=D.generateResults(a);D.verbose("Parsing server response",a);a!==c&&b!==c&&a[v.results]!==c&&
(D.addResults(d),D.inject.id(a[v.results]),D.write.cache(b,{html:d,results:a[v.results]}),D.save.results(a[v.results]))}},cancel:{query:function(){D.can.useAPI()&&B.api("abort")}},has:{minimumCharacters:function(){return D.get.value().length>=l.minCharacters}},clear:{cache:function(a){var b=B.data(w.cache);a?a&&b&&b[a]&&(D.debug("Removing value from cache",a),delete b[a],B.data(w.cache,b)):(D.debug("Clearing cache",a),B.removeData(w.cache))}},read:{cache:function(a){var b=B.data(w.cache);return l.cache?
(D.verbose("Checking cache for generated html for query",a),"object"==typeof b&&b[a]!==c?b[a]:!1):!1}},create:{id:function(a,b){var d=a+1,e;b!==c?(e=String.fromCharCode(97+b),d=e+d,D.verbose("Creating category result id",d)):D.verbose("Creating result id",d);return d},results:function(){0===I.length&&(I=a("<div />").addClass(q.results).appendTo(B))}},inject:{result:function(a,b,d){D.verbose("Injecting result into results");b=d!==c?I.children().eq(d).children(E.result).eq(b):I.children(E.result).eq(b);
D.verbose("Injecting results metadata",b);b.data(w.result,a)},id:function(b){D.debug("Injecting unique ids into results");var d=0,e=0;"category"===l.type?a.each(b,function(b,f){e=0;a.each(f.results,function(a,b){var g=f.results[a];g.id===c&&(g.id=D.create.id(e,d));D.inject.result(g,e,d);e++});d++}):a.each(b,function(a,d){var f=b[a];f.id===c&&(f.id=D.create.id(e));D.inject.result(f,e);e++});return b}},save:{results:function(a){D.verbose("Saving current search results to metadata",a);B.data(w.results,
a)}},write:{cache:function(a,b){var d=B.data(w.cache)!==c?B.data(w.cache):{};l.cache&&(D.verbose("Writing generated html to cache",a,b),d[a]=b,B.data(w.cache,d))}},addResults:function(b){if(a.isFunction(l.onResultsAdd)&&!1===l.onResultsAdd.call(I,b))return D.debug("onResultsAdd callback cancelled default action"),!1;b?(I.html(b),D.refreshResults(),l.selectFirstResult&&D.select.firstResult(),D.showResults()):D.hideResults()},showResults:function(){D.is.visible()||(D.can.transition()?(D.debug("Showing results with css animations"),
I.transition({animation:l.transition+" in",debug:l.debug,verbose:l.verbose,duration:l.duration,queue:!0})):(D.debug("Showing results with javascript"),I.stop().fadeIn(l.duration,l.easing)),l.onResultsOpen.call(I))},hideResults:function(){D.is.visible()&&(D.can.transition()?(D.debug("Hiding results with css animations"),I.transition({animation:l.transition+" out",debug:l.debug,verbose:l.verbose,duration:l.duration,queue:!0})):(D.debug("Hiding results with javascript"),I.stop().fadeOut(l.duration,l.easing)),
l.onResultsClose.call(I))},generateResults:function(b){D.debug("Generating html from response",b);var c=l.templates[l.type],d=a.isPlainObject(b[v.results])&&!a.isEmptyObject(b[v.results]),e=a.isArray(b[v.results])&&0<b[v.results].length,f="";d||e?(0<l.maxResults&&(d?"standard"==l.type&&D.error(A.maxResults):b[v.results]=b[v.results].slice(0,l.maxResults)),a.isFunction(c)?f=c(b,v):D.error(A.noTemplate,!1)):l.showNoResults&&(f=D.displayMessage(A.noResults,"empty"));l.onResults.call(L,b);return f},displayMessage:function(a,
b){b=b||"standard";D.debug("Displaying message",a,b);D.addResults(l.templates.message(a,b));return l.templates.message(a,b)},setting:function(b,d){if(a.isPlainObject(b))a.extend(!0,l,b);else if(d!==c)l[b]=d;else return l[b]},internal:function(b,d){if(a.isPlainObject(b))a.extend(!0,D,b);else if(d!==c)D[b]=d;else return D[b]},debug:function(){!l.silent&&l.debug&&(l.performance?D.performance.log(arguments):(D.debug=Function.prototype.bind.call(console.info,console,l.name+":"),D.debug.apply(console,arguments)))},
verbose:function(){!l.silent&&l.verbose&&l.debug&&(l.performance?D.performance.log(arguments):(D.verbose=Function.prototype.bind.call(console.info,console,l.name+":"),D.verbose.apply(console,arguments)))},error:function(){l.silent||(D.error=Function.prototype.bind.call(console.error,console,l.name+":"),D.error.apply(console,arguments))},performance:{log:function(a){var b,c;l.performance&&(b=(new Date).getTime(),c=h||b,c=b-c,h=b,g.push({Name:a[0],Arguments:[].slice.call(a,1)||"",Element:L,"Execution Time":c}));
clearTimeout(D.performance.timer);D.performance.timer=setTimeout(D.performance.display,500)},display:function(){var b=l.name+":",d=0;h=!1;clearTimeout(D.performance.timer);a.each(g,function(a,b){d+=b["Execution Time"]});b+=" "+d+"ms";n&&(b+=" '"+n+"'");1<f.length&&(b+=" ("+f.length+")");(console.group!==c||console.table!==c)&&0<g.length&&(console.groupCollapsed(b),console.table?console.table(g):a.each(g,function(a,b){console.log(b.Name+": "+b["Execution Time"]+"ms")}),console.groupEnd());g=[]}},invoke:function(b,
d,e){var f=x,g,h,l;d=d||r;e=L||e;"string"==typeof b&&f!==c&&(b=b.split(/[\. ]/),g=b.length-1,a.each(b,function(d,e){var l=d!=g?e+b[d+1].charAt(0).toUpperCase()+b[d+1].slice(1):b;if(a.isPlainObject(f[l])&&d!=g)f=f[l];else{if(f[l]!==c)return h=f[l],!1;if(a.isPlainObject(f[e])&&d!=g)f=f[e];else return f[e]!==c&&(h=f[e]),!1}}));a.isFunction(h)?l=h.apply(e,d):h!==c&&(l=h);a.isArray(t)?t.push(l):t!==c?t=[t,l]:l!==c&&(t=l);return h}};p?(x===c&&D.initialize(),D.invoke(m)):(x!==c&&x.invoke("destroy"),D.initialize())});
return t!==c?t:this};a.fn.search.settings={name:"Search",namespace:"search",silent:!1,debug:!1,verbose:!1,performance:!0,type:"standard",minCharacters:1,selectFirstResult:!1,apiSettings:!1,source:!1,searchFields:["title","description"],displayField:"",searchFullText:!0,automatic:!0,hideDelay:0,searchDelay:200,maxResults:7,cache:!0,showNoResults:!0,transition:"scale",duration:200,easing:"easeOutExpo",onSelect:!1,onResultsAdd:!1,onSearchQuery:function(a){},onResults:function(a){},onResultsOpen:function(){},
onResultsClose:function(){},className:{animating:"animating",active:"active",empty:"empty",focus:"focus",hidden:"hidden",loading:"loading",results:"results",pressed:"down"},error:{source:"Cannot search. No source used, and Semantic API module was not included",noResults:"Your search returned no results",logging:"Error in debug logging, exiting.",noEndpoint:"No search endpoint was specified",noTemplate:"A valid template name was not specified.",serverError:"There was an issue querying the server.",
maxResults:"Results must be an array to use maxResults setting",method:"The method you called is not defined."},metadata:{cache:"cache",results:"results",result:"result"},regExp:{escape:/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,beginsWith:"(?:s|^)"},fields:{categories:"results",categoryName:"name",categoryResults:"results",description:"description",image:"image",price:"price",results:"results",title:"title",url:"url",action:"action",actionText:"text",actionURL:"url"},selector:{prompt:".prompt",searchButton:".search.button",
results:".results",message:".results > .message",category:".category",result:".result",title:".title, .name"},templates:{escape:function(a){var b=/[&<>"'`]/g,c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},e=function(a){return c[a]};return/[&<>"'`]/.test(a)?a.replace(b,e):a},message:function(a,b){var e="";a!==c&&b!==c&&(e+='<div class="message '+b+'">',e=("empty"==b?e+('<div class="header">No Results</div class="header"><div class="description">'+a+'</div class="description">'):
e+(' <div class="description">'+a+"</div>"))+"</div>");return e},category:function(b,e){var n="";return b[e.categoryResults]!==c?(a.each(b[e.categoryResults],function(b,d){d[e.results]!==c&&0<d.results.length&&(n+='<div class="category">',d[e.categoryName]!==c&&(n+='<div class="name">'+d[e.categoryName]+"</div>"),a.each(d.results,function(a,b){n=b[e.url]?n+('<a class="result" href="'+b[e.url]+'">'):n+'<a class="result">';b[e.image]!==c&&(n+='<div class="image"> <img src="'+b[e.image]+'"></div>');
n+='<div class="content">';b[e.price]!==c&&(n+='<div class="price">'+b[e.price]+"</div>");b[e.title]!==c&&(n+='<div class="title">'+b[e.title]+"</div>");b[e.description]!==c&&(n+='<div class="description">'+b[e.description]+"</div>");n+="</div>";n+="</a>"}),n+="</div>")}),b[e.action]&&(n+='<a href="'+b[e.action][e.actionURL]+'" class="action">'+b[e.action][e.actionText]+"</a>"),n):!1},standard:function(b,e){var n="";return b[e.results]!==c?(a.each(b[e.results],function(a,b){n=b[e.url]?n+('<a class="result" href="'+
b[e.url]+'">'):n+'<a class="result">';b[e.image]!==c&&(n+='<div class="image"> <img src="'+b[e.image]+'"></div>');n+='<div class="content">';b[e.price]!==c&&(n+='<div class="price">'+b[e.price]+"</div>");b[e.title]!==c&&(n+='<div class="title">'+b[e.title]+"</div>");b[e.description]!==c&&(n+='<div class="description">'+b[e.description]+"</div>");n+="</div>";n+="</a>"}),b[e.action]&&(n+='<a href="'+b[e.action][e.actionURL]+'" class="action">'+b[e.action][e.actionText]+"</a>"),n):!1}}}})(jQuery,window,
document);
(function(a,b,e,c){b="undefined"!=typeof b&&b.Math==Math?b:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();a.fn.shape=function(d){var f=a(this);a("body");var n=(new Date).getTime(),h=[],g=arguments[0],m="string"==typeof g,p=[].slice.call(arguments,1),r=b.requestAnimationFrame||b.mozRequestAnimationFrame||b.webkitRequestAnimationFrame||b.msRequestAnimationFrame||function(a){setTimeout(a,0)},t;f.each(function(){var b=f.selector||"",q=a.isPlainObject(d)?a.extend(!0,{},a.fn.shape.settings,
d):a.extend({},a.fn.shape.settings),w=q.namespace,u=q.selector,v=q.error,E=q.className,A="."+w,K="module-"+w,F=a(this),z=F.find(u.sides),B=F.find(u.side),H=!1,G,I,N=this,L=F.data(K),x;x={initialize:function(){x.verbose("Initializing module for",N);x.set.defaultSide();x.instantiate()},instantiate:function(){x.verbose("Storing instance of module",x);L=x;F.data(K,L)},destroy:function(){x.verbose("Destroying previous module for",N);F.removeData(K).off(A)},refresh:function(){x.verbose("Refreshing selector cache for",
N);F=a(N);z=a(this).find(u.shape);B=a(this).find(u.side)},repaint:function(){x.verbose("Forcing repaint event");z[0]||e.createElement("div")},animate:function(a,b){x.verbose("Animating box with properties",a);b=b||function(a){x.verbose("Executing animation callback");a!==c&&a.stopPropagation();x.reset();x.set.active()};q.beforeChange.call(I[0]);x.get.transitionEvent()?(x.verbose("Starting CSS animation"),F.addClass(E.animating),z.css(a).one(x.get.transitionEvent(),b),x.set.duration(q.duration),r(function(){F.addClass(E.animating);
G.addClass(E.hidden)})):b()},queue:function(a){x.debug("Queueing animation of",a);z.one(x.get.transitionEvent(),function(){x.debug("Executing queued animation");setTimeout(function(){F.shape(a)},0)})},reset:function(){x.verbose("Animating states reset");F.removeClass(E.animating).attr("style","").removeAttr("style");z.attr("style","").removeAttr("style");B.attr("style","").removeAttr("style").removeClass(E.hidden);I.removeClass(E.animating).attr("style","").removeAttr("style")},is:{complete:function(){return B.filter("."+
E.active)[0]==I[0]},animating:function(){return F.hasClass(E.animating)}},set:{defaultSide:function(){G=F.find("."+q.className.active);I=0<G.next(u.side).length?G.next(u.side):F.find(u.side).first();H=!1;x.verbose("Active side set to",G);x.verbose("Next side set to",I)},duration:function(a){a=a||q.duration;a="number"==typeof a?a+"ms":a;x.verbose("Setting animation duration",a);(q.duration||0===q.duration)&&z.add(B).css({"-webkit-transition-duration":a,"-moz-transition-duration":a,"-ms-transition-duration":a,
"-o-transition-duration":a,"transition-duration":a})},currentStageSize:function(){var a=F.find("."+q.className.active),b=a.outerWidth(!0),a=a.outerHeight(!0);F.css({width:b,height:a})},stageSize:function(){var a=F.clone().addClass(E.loading),b=a.find("."+q.className.active),c=H?a.find(u.side).eq(H):0<b.next(u.side).length?b.next(u.side):a.find(u.side).first(),d="next"==q.width?c.outerWidth(!0):"initial"==q.width?F.width():q.width,e="next"==q.height?c.outerHeight(!0):"initial"==q.height?F.height():
q.height;b.removeClass(E.active);c.addClass(E.active);a.insertAfter(F);a.remove();"auto"!=q.width&&(F.css("width",d+q.jitter),x.verbose("Specifying width during animation",d));"auto"!=q.height&&(F.css("height",e+q.jitter),x.verbose("Specifying height during animation",e))},nextSide:function(a){H=a;I=B.filter(a);H=B.index(I);0===I.length&&(x.set.defaultSide(),x.error(v.side));x.verbose("Next side manually set to",I)},active:function(){x.verbose("Setting new side to active",I);B.removeClass(E.active);
I.addClass(E.active);q.onChange.call(I[0]);x.set.defaultSide()}},flip:{up:function(){if(!x.is.complete()||x.is.animating()||q.allowRepeats)if(x.is.animating())x.queue("flip up");else{x.debug("Flipping up",I);var a=x.get.transform.up();x.set.stageSize();x.stage.above();x.animate(a)}else x.debug("Side already visible",I)},down:function(){if(!x.is.complete()||x.is.animating()||q.allowRepeats)if(x.is.animating())x.queue("flip down");else{x.debug("Flipping down",I);var a=x.get.transform.down();x.set.stageSize();
x.stage.below();x.animate(a)}else x.debug("Side already visible",I)},left:function(){if(!x.is.complete()||x.is.animating()||q.allowRepeats)if(x.is.animating())x.queue("flip left");else{x.debug("Flipping left",I);var a=x.get.transform.left();x.set.stageSize();x.stage.left();x.animate(a)}else x.debug("Side already visible",I)},right:function(){if(!x.is.complete()||x.is.animating()||q.allowRepeats)if(x.is.animating())x.queue("flip right");else{x.debug("Flipping right",I);var a=x.get.transform.right();
x.set.stageSize();x.stage.right();x.animate(a)}else x.debug("Side already visible",I)},over:function(){!x.is.complete()||x.is.animating()||q.allowRepeats?x.is.animating()?x.queue("flip over"):(x.debug("Flipping over",I),x.set.stageSize(),x.stage.behind(),x.animate(x.get.transform.over())):x.debug("Side already visible",I)},back:function(){!x.is.complete()||x.is.animating()||q.allowRepeats?x.is.animating()?x.queue("flip back"):(x.debug("Flipping back",I),x.set.stageSize(),x.stage.behind(),x.animate(x.get.transform.back())):
x.debug("Side already visible",I)}},get:{transform:{up:function(){var a=-((G.outerHeight(!0)-I.outerHeight(!0))/2),b=-(G.outerHeight(!0)/2);return{transform:"translateY("+a+"px) translateZ("+b+"px) rotateX(-90deg)"}},down:function(){var a=-((G.outerHeight(!0)-I.outerHeight(!0))/2),b=-(G.outerHeight(!0)/2);return{transform:"translateY("+a+"px) translateZ("+b+"px) rotateX(90deg)"}},left:function(){var a=-((G.outerWidth(!0)-I.outerWidth(!0))/2),b=-(G.outerWidth(!0)/2);return{transform:"translateX("+
a+"px) translateZ("+b+"px) rotateY(90deg)"}},right:function(){var a=-((G.outerWidth(!0)-I.outerWidth(!0))/2),b=-(G.outerWidth(!0)/2);return{transform:"translateX("+a+"px) translateZ("+b+"px) rotateY(-90deg)"}},over:function(){return{transform:"translateX("+-((G.outerWidth(!0)-I.outerWidth(!0))/2)+"px) rotateY(180deg)"}},back:function(){return{transform:"translateX("+-((G.outerWidth(!0)-I.outerWidth(!0))/2)+"px) rotateY(-180deg)"}}},transitionEvent:function(){var a=e.createElement("element"),b={transition:"transitionend",
OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"},d;for(d in b)if(a.style[d]!==c)return b[d]},nextSide:function(){return 0<G.next(u.side).length?G.next(u.side):F.find(u.side).first()}},stage:{above:function(){var a={origin:(G.outerHeight(!0)-I.outerHeight(!0))/2,depth:{active:I.outerHeight(!0)/2,next:G.outerHeight(!0)/2}};x.verbose("Setting the initial animation position as above",I,a);z.css({transform:"translateZ(-"+a.depth.active+"px)"});G.css({transform:"rotateY(0deg) translateZ("+
a.depth.active+"px)"});I.addClass(E.animating).css({top:a.origin+"px",transform:"rotateX(90deg) translateZ("+a.depth.next+"px)"})},below:function(){var a={origin:(G.outerHeight(!0)-I.outerHeight(!0))/2,depth:{active:I.outerHeight(!0)/2,next:G.outerHeight(!0)/2}};x.verbose("Setting the initial animation position as below",I,a);z.css({transform:"translateZ(-"+a.depth.active+"px)"});G.css({transform:"rotateY(0deg) translateZ("+a.depth.active+"px)"});I.addClass(E.animating).css({top:a.origin+"px",transform:"rotateX(-90deg) translateZ("+
a.depth.next+"px)"})},left:function(){var a=G.outerWidth(!0),b=I.outerWidth(!0),a={origin:(a-b)/2,depth:{active:b/2,next:a/2}};x.verbose("Setting the initial animation position as left",I,a);z.css({transform:"translateZ(-"+a.depth.active+"px)"});G.css({transform:"rotateY(0deg) translateZ("+a.depth.active+"px)"});I.addClass(E.animating).css({left:a.origin+"px",transform:"rotateY(-90deg) translateZ("+a.depth.next+"px)"})},right:function(){var a=G.outerWidth(!0),b=I.outerWidth(!0),a={origin:(a-b)/2,
depth:{active:b/2,next:a/2}};x.verbose("Setting the initial animation position as left",I,a);z.css({transform:"translateZ(-"+a.depth.active+"px)"});G.css({transform:"rotateY(0deg) translateZ("+a.depth.active+"px)"});I.addClass(E.animating).css({left:a.origin+"px",transform:"rotateY(90deg) translateZ("+a.depth.next+"px)"})},behind:function(){var a=G.outerWidth(!0),b=I.outerWidth(!0),a={origin:(a-b)/2,depth:{active:b/2,next:a/2}};x.verbose("Setting the initial animation position as behind",I,a);G.css({transform:"rotateY(0deg)"});
I.addClass(E.animating).css({left:a.origin+"px",transform:"rotateY(-180deg)"})}},setting:function(b,d){x.debug("Changing setting",b,d);if(a.isPlainObject(b))a.extend(!0,q,b);else if(d!==c)a.isPlainObject(q[b])?a.extend(!0,q[b],d):q[b]=d;else return q[b]},internal:function(b,d){if(a.isPlainObject(b))a.extend(!0,x,b);else if(d!==c)x[b]=d;else return x[b]},debug:function(){!q.silent&&q.debug&&(q.performance?x.performance.log(arguments):(x.debug=Function.prototype.bind.call(console.info,console,q.name+
":"),x.debug.apply(console,arguments)))},verbose:function(){!q.silent&&q.verbose&&q.debug&&(q.performance?x.performance.log(arguments):(x.verbose=Function.prototype.bind.call(console.info,console,q.name+":"),x.verbose.apply(console,arguments)))},error:function(){q.silent||(x.error=Function.prototype.bind.call(console.error,console,q.name+":"),x.error.apply(console,arguments))},performance:{log:function(a){var b,c;q.performance&&(b=(new Date).getTime(),c=n||b,c=b-c,n=b,h.push({Name:a[0],Arguments:[].slice.call(a,
1)||"",Element:N,"Execution Time":c}));clearTimeout(x.performance.timer);x.performance.timer=setTimeout(x.performance.display,500)},display:function(){var d=q.name+":",e=0;n=!1;clearTimeout(x.performance.timer);a.each(h,function(a,b){e+=b["Execution Time"]});d+=" "+e+"ms";b&&(d+=" '"+b+"'");1<f.length&&(d+=" ("+f.length+")");(console.group!==c||console.table!==c)&&0<h.length&&(console.groupCollapsed(d),console.table?console.table(h):a.each(h,function(a,b){console.log(b.Name+": "+b["Execution Time"]+
"ms")}),console.groupEnd());h=[]}},invoke:function(b,d,e){var f=L,g,h,l;d=d||p;e=N||e;"string"==typeof b&&f!==c&&(b=b.split(/[\. ]/),g=b.length-1,a.each(b,function(d,e){var l=d!=g?e+b[d+1].charAt(0).toUpperCase()+b[d+1].slice(1):b;if(a.isPlainObject(f[l])&&d!=g)f=f[l];else{if(f[l]!==c)return h=f[l],!1;if(a.isPlainObject(f[e])&&d!=g)f=f[e];else return f[e]!==c&&(h=f[e]),!1}}));a.isFunction(h)?l=h.apply(e,d):h!==c&&(l=h);a.isArray(t)?t.push(l):t!==c?t=[t,l]:l!==c&&(t=l);return h}};m?(L===c&&x.initialize(),
x.invoke(g)):(L!==c&&L.invoke("destroy"),x.initialize())});return t!==c?t:this};a.fn.shape.settings={name:"Shape",silent:!1,debug:!1,verbose:!1,jitter:0,performance:!0,namespace:"shape",width:"initial",height:"initial",beforeChange:function(){},onChange:function(){},allowRepeats:!1,duration:!1,error:{side:"You tried to switch to a side that does not exist.",method:"The method you called is not defined"},className:{animating:"animating",hidden:"hidden",loading:"loading",active:"active"},selector:{sides:".sides",
side:".side"}}})(jQuery,window,document);
(function(a,b,e,c){b="undefined"!=typeof b&&b.Math==Math?b:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();a.fn.sidebar=function(d){var f=a(this),n=a(b),h=a(e),g=a("html"),m=a("head"),p=f.selector||"",r=(new Date).getTime(),t=[],l=arguments[0],q="string"==typeof l,w=[].slice.call(arguments,1),u=b.requestAnimationFrame||b.mozRequestAnimationFrame||b.webkitRequestAnimationFrame||b.msRequestAnimationFrame||function(a){setTimeout(a,0)},v;f.each(function(){var f=a.isPlainObject(d)?
a.extend(!0,{},a.fn.sidebar.settings,d):a.extend({},a.fn.sidebar.settings),A=f.selector,K=f.className,F=f.namespace,z=f.regExp,B=f.error,H="."+F,G="module-"+F,I=a(this),N=a(f.context),L=I.children(A.sidebar);N.children(A.fixed);var x=N.children(A.pusher),S,D=this,J=I.data(G),V,Y,W,U,M;M={initialize:function(){M.debug("Initializing sidebar",d);M.create.id();U=M.get.transitionEvent();M.is.ios()&&M.set.ios();f.delaySetup?u(M.setup.layout):M.setup.layout();u(function(){M.setup.cache()});M.instantiate()},
instantiate:function(){M.verbose("Storing instance of module",M);J=M;I.data(G,M)},create:{id:function(){Y=(Math.random().toString(16)+"000000000").substr(2,8);V="."+Y;M.verbose("Creating unique id for element",Y)}},destroy:function(){M.verbose("Destroying previous module for",I);I.off(H).removeData(G);M.is.ios()&&M.remove.ios();N.off(V);n.off(V);h.off(V)},event:{clickaway:function(a){var b=0<x.find(a.target).length||x.is(a.target);a=N.is(a.target);b&&(M.verbose("User clicked on dimmed page"),M.hide());
a&&(M.verbose("User clicked on dimmable context (scaled out page)"),M.hide())},touch:function(a){},containScroll:function(a){0>=D.scrollTop&&(D.scrollTop=1);D.scrollTop+D.offsetHeight>=D.scrollHeight&&(D.scrollTop=D.scrollHeight-D.offsetHeight-1)},scroll:function(b){0===a(b.target).closest(A.sidebar).length&&b.preventDefault()}},bind:{clickaway:function(){M.verbose("Adding clickaway events to context",N);if(f.closable)N.on("click"+V,M.event.clickaway).on("touchend"+V,M.event.clickaway)},scrollLock:function(){f.scrollLock&&
(M.debug("Disabling page scroll"),n.on("DOMMouseScroll"+V,M.event.scroll));M.verbose("Adding events to contain sidebar scroll");h.on("touchmove"+V,M.event.touch);I.on("scroll"+H,M.event.containScroll)}},unbind:{clickaway:function(){M.verbose("Removing clickaway events from context",N);N.off(V)},scrollLock:function(){M.verbose("Removing scroll lock from page");h.off(V);n.off(V);I.off("scroll"+H)}},add:{inlineCSS:function(){var b=M.cache.width||I.outerWidth(),c=M.cache.height||I.outerHeight(),d=M.is.rtl(),
e=M.get.direction(),c={left:b,right:-b,top:c,bottom:-c};d&&(M.verbose("RTL detected, flipping widths"),c.left=-b,c.right=b);d="<style>";if("left"===e||"right"===e)M.debug("Adding CSS rules for animation distance",b),d+=" .ui.visible."+e+".sidebar ~ .fixed, .ui.visible."+e+".sidebar ~ .pusher {   -webkit-transform: translate3d("+c[e]+"px, 0, 0);           transform: translate3d("+c[e]+"px, 0, 0); }";else if("top"===e||"bottom"==e)d+=" .ui.visible."+e+".sidebar ~ .fixed, .ui.visible."+e+".sidebar ~ .pusher {   -webkit-transform: translate3d(0, "+
c[e]+"px, 0);           transform: translate3d(0, "+c[e]+"px, 0); }";if(M.is.ie()){if("left"===e||"right"===e)M.debug("Adding CSS rules for animation distance",b),d+=" body.pushable > .ui.visible."+e+".sidebar ~ .pusher:after {   -webkit-transform: translate3d("+c[e]+"px, 0, 0);           transform: translate3d("+c[e]+"px, 0, 0); }";else if("top"===e||"bottom"==e)d+=" body.pushable > .ui.visible."+e+".sidebar ~ .pusher:after {   -webkit-transform: translate3d(0, "+c[e]+"px, 0);           transform: translate3d(0, "+
c[e]+"px, 0); }";d+=" body.pushable > .ui.visible.left.sidebar ~ .ui.visible.right.sidebar ~ .pusher:after, body.pushable > .ui.visible.right.sidebar ~ .ui.visible.left.sidebar ~ .pusher:after {   -webkit-transform: translate3d(0px, 0, 0);           transform: translate3d(0px, 0, 0); }"}S=a(d+"</style>").appendTo(m);M.debug("Adding sizing css to head",S)}},refresh:function(){M.verbose("Refreshing selector cache");N=a(f.context);L=N.children(A.sidebar);x=N.children(A.pusher);N.children(A.fixed);M.clear.cache()},
refreshSidebars:function(){M.verbose("Refreshing other sidebars");L=N.children(A.sidebar)},repaint:function(){M.verbose("Forcing repaint event");D.style.display="none";D.scrollTop=D.scrollTop;D.style.display=""},setup:{cache:function(){M.cache={width:I.outerWidth(),height:I.outerHeight(),rtl:"rtl"==I.css("direction")}},layout:function(){0===N.children(A.pusher).length&&(M.debug("Adding wrapper element for sidebar"),M.error(B.pusher),x=a('<div class="pusher" />'),N.children().not(A.omitted).not(L).wrapAll(x),
M.refresh());if(0===I.nextAll(A.pusher).length||I.nextAll(A.pusher)[0]!==x[0])M.debug("Moved sidebar to correct parent element"),M.error(B.movedSidebar,D),I.detach().prependTo(N),M.refresh();M.clear.cache();M.set.pushable();M.set.direction()}},attachEvents:function(b,c){var d=a(b);c=a.isFunction(M[c])?M[c]:M.toggle;0<d.length?(M.debug("Attaching sidebar events to element",b,c),d.on("click"+H,c)):M.error(B.notFound,b)},show:function(b){b=a.isFunction(b)?b:function(){};if(M.is.hidden()){M.refreshSidebars();
f.overlay&&(M.error(B.overlay),f.transition="overlay");M.refresh();if(M.othersActive())if(M.debug("Other sidebars currently visible"),f.exclusive){if("overlay"!=f.transition){M.hideOthers(M.show);return}M.hideOthers()}else f.transition="overlay";M.pushPage(function(){b.call(D);f.onShow.call(D)});f.onChange.call(D);f.onVisible.call(D)}else M.debug("Sidebar is already visible")},hide:function(b){b=a.isFunction(b)?b:function(){};if(M.is.visible()||M.is.animating())M.debug("Hiding sidebar",b),M.refreshSidebars(),
M.pullPage(function(){b.call(D);f.onHidden.call(D)}),f.onChange.call(D),f.onHide.call(D)},othersAnimating:function(){return 0<L.not(I).filter("."+K.animating).length},othersVisible:function(){return 0<L.not(I).filter("."+K.visible).length},othersActive:function(){return M.othersVisible()||M.othersAnimating()},hideOthers:function(a){var b=L.not(I).filter("."+K.visible),c=b.length,d=0;a=a||function(){};b.sidebar("hide",function(){d++;d==c&&a()})},toggle:function(){M.verbose("Determining toggled direction");
M.is.hidden()?M.show():M.hide()},pushPage:function(b){var c=M.get.transition(),d="overlay"===c||M.othersActive()?I:x,e;b=a.isFunction(b)?b:function(){};"scale down"==f.transition&&M.scrollToTop();M.set.transition(c);M.repaint();c=function(){M.set.dimmed()};e=function(a){a.target==d[0]&&(d.off(U+V,e),M.remove.animating(),M.bind.scrollLock(),b.call(D))};d.off(U+V);d.on(U+V,e);u(function(){M.bind.clickaway();M.add.inlineCSS();M.set.animating();M.set.visible()});f.dimPage&&!M.othersVisible()&&u(c)},pullPage:function(b){var c=
M.get.transition(),d="overlay"==c||M.othersActive()?I:x,e;b=a.isFunction(b)?b:function(){};M.verbose("Removing context push state",M.get.direction());M.unbind.clickaway();M.unbind.scrollLock();e=function(a){a.target==d[0]&&(d.off(U+V,e),M.remove.animating(),M.remove.transition(),M.remove.inlineCSS(),("scale down"==c||f.returnScroll&&M.is.mobile())&&M.scrollBack(),b.call(D))};d.off(U+V);d.on(U+V,e);u(function(){M.set.transition(c);M.set.animating();M.remove.visible();f.dimPage&&!M.othersVisible()&&
x.removeClass(K.dimmed)})},scrollToTop:function(){M.verbose("Scrolling to top of page to avoid animation issues");W=a(b).scrollTop();I.scrollTop(0);b.scrollTo(0,0)},scrollBack:function(){M.verbose("Scrolling back to original page position");b.scrollTo(0,W)},clear:{cache:function(){M.verbose("Clearing cached dimensions");M.cache={}}},set:{ios:function(){g.addClass(K.ios)},pushed:function(){N.addClass(K.pushed)},pushable:function(){N.addClass(K.pushable)},dimmed:function(){x.addClass(K.dimmed)},active:function(){I.addClass(K.active)},
animating:function(){I.addClass(K.animating)},transition:function(a){a=a||M.get.transition();I.addClass(a)},direction:function(a){a=a||M.get.direction();I.addClass(K[a])},visible:function(){I.addClass(K.visible)},overlay:function(){I.addClass(K.overlay)}},remove:{inlineCSS:function(){M.debug("Removing inline css styles",S);S&&0<S.length&&S.remove()},ios:function(){g.removeClass(K.ios)},pushed:function(){N.removeClass(K.pushed)},pushable:function(){N.removeClass(K.pushable)},active:function(){I.removeClass(K.active)},
animating:function(){I.removeClass(K.animating)},transition:function(a){a=a||M.get.transition();I.removeClass(a)},direction:function(a){a=a||M.get.direction();I.removeClass(K[a])},visible:function(){I.removeClass(K.visible)},overlay:function(){I.removeClass(K.overlay)}},get:{direction:function(){return I.hasClass(K.top)?K.top:I.hasClass(K.right)?K.right:I.hasClass(K.bottom)?K.bottom:K.left},transition:function(){var a=M.get.direction(),a=M.is.mobile()?"auto"==f.mobileTransition?f.defaultTransition.mobile[a]:
f.mobileTransition:"auto"==f.transition?f.defaultTransition.computer[a]:f.transition;M.verbose("Determined transition",a);return a},transitionEvent:function(){var a=e.createElement("element"),b={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"},d;for(d in b)if(a.style[d]!==c)return b[d]}},is:{ie:function(){var a="ActiveXObject"in b;return!b.ActiveXObject&&"ActiveXObject"in b||a},ios:function(){var a=navigator.userAgent,b=
a.match(z.ios),c=a.match(z.mobileChrome);return b&&!c?(M.verbose("Browser was found to be iOS",a),!0):!1},mobile:function(){var a=navigator.userAgent;if(a.match(z.mobile))return M.verbose("Browser was found to be mobile",a),!0;M.verbose("Browser is not mobile, using regular transition",a);return!1},hidden:function(){return!M.is.visible()},visible:function(){return I.hasClass(K.visible)},open:function(){return M.is.visible()},closed:function(){return M.is.hidden()},vertical:function(){return I.hasClass(K.top)},
animating:function(){return N.hasClass(K.animating)},rtl:function(){M.cache.rtl===c&&(M.cache.rtl="rtl"==I.css("direction"));return M.cache.rtl}},setting:function(b,d){M.debug("Changing setting",b,d);if(a.isPlainObject(b))a.extend(!0,f,b);else if(d!==c)a.isPlainObject(f[b])?a.extend(!0,f[b],d):f[b]=d;else return f[b]},internal:function(b,d){if(a.isPlainObject(b))a.extend(!0,M,b);else if(d!==c)M[b]=d;else return M[b]},debug:function(){!f.silent&&f.debug&&(f.performance?M.performance.log(arguments):
(M.debug=Function.prototype.bind.call(console.info,console,f.name+":"),M.debug.apply(console,arguments)))},verbose:function(){!f.silent&&f.verbose&&f.debug&&(f.performance?M.performance.log(arguments):(M.verbose=Function.prototype.bind.call(console.info,console,f.name+":"),M.verbose.apply(console,arguments)))},error:function(){f.silent||(M.error=Function.prototype.bind.call(console.error,console,f.name+":"),M.error.apply(console,arguments))},performance:{log:function(a){var b,c;f.performance&&(b=
(new Date).getTime(),c=r||b,c=b-c,r=b,t.push({Name:a[0],Arguments:[].slice.call(a,1)||"",Element:D,"Execution Time":c}));clearTimeout(M.performance.timer);M.performance.timer=setTimeout(M.performance.display,500)},display:function(){var b=f.name+":",d=0;r=!1;clearTimeout(M.performance.timer);a.each(t,function(a,b){d+=b["Execution Time"]});b+=" "+d+"ms";p&&(b+=" '"+p+"'");(console.group!==c||console.table!==c)&&0<t.length&&(console.groupCollapsed(b),console.table?console.table(t):a.each(t,function(a,
b){console.log(b.Name+": "+b["Execution Time"]+"ms")}),console.groupEnd());t=[]}},invoke:function(b,d,e){var f=J,g,h,l;d=d||w;e=D||e;"string"==typeof b&&f!==c&&(b=b.split(/[\. ]/),g=b.length-1,a.each(b,function(d,e){var l=d!=g?e+b[d+1].charAt(0).toUpperCase()+b[d+1].slice(1):b;if(a.isPlainObject(f[l])&&d!=g)f=f[l];else{if(f[l]!==c)return h=f[l],!1;if(a.isPlainObject(f[e])&&d!=g)f=f[e];else return f[e]!==c?h=f[e]:M.error(B.method,b),!1}}));a.isFunction(h)?l=h.apply(e,d):h!==c&&(l=h);a.isArray(v)?v.push(l):
v!==c?v=[v,l]:l!==c&&(v=l);return h}};q?(J===c&&M.initialize(),M.invoke(l)):(J!==c&&M.invoke("destroy"),M.initialize())});return v!==c?v:this};a.fn.sidebar.settings={name:"Sidebar",namespace:"sidebar",silent:!1,debug:!1,verbose:!1,performance:!0,transition:"auto",mobileTransition:"auto",defaultTransition:{computer:{left:"uncover",right:"uncover",top:"overlay",bottom:"overlay"},mobile:{left:"uncover",right:"uncover",top:"overlay",bottom:"overlay"}},context:"body",exclusive:!1,closable:!0,dimPage:!0,
scrollLock:!1,returnScroll:!1,delaySetup:!1,duration:500,onChange:function(){},onShow:function(){},onHide:function(){},onHidden:function(){},onVisible:function(){},className:{active:"active",animating:"animating",dimmed:"dimmed",ios:"ios",pushable:"pushable",pushed:"pushed",right:"right",top:"top",left:"left",bottom:"bottom",visible:"visible"},selector:{fixed:".fixed",omitted:"script, link, style, .ui.modal, .ui.dimmer, .ui.nag, .ui.fixed",pusher:".pusher",sidebar:".ui.sidebar"},regExp:{ios:/(iPad|iPhone|iPod)/g,
mobileChrome:/(CriOS)/g,mobile:/Mobile|iP(hone|od|ad)|Android|BlackBerry|IEMobile|Kindle|NetFront|Silk-Accelerated|(hpw|web)OS|Fennec|Minimo|Opera M(obi|ini)|Blazer|Dolfin|Dolphin|Skyfire|Zune/g},error:{method:"The method you called is not defined.",pusher:"Had to add pusher element. For optimal performance make sure body content is inside a pusher element",movedSidebar:"Had to move sidebar. For optimal performance make sure sidebar and pusher are direct children of your body tag",overlay:"The overlay setting is no longer supported, use animation: overlay",
notFound:"There were no elements that matched the specified selector"}}})(jQuery,window,document);
(function(a,b,e,c){b="undefined"!=typeof b&&b.Math==Math?b:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();a.fn.sticky=function(d){var f=a(this),n=f.selector||"",h=(new Date).getTime(),g=[],m=arguments[0],p="string"==typeof m,r=[].slice.call(arguments,1),t;f.each(function(){var f=a.isPlainObject(d)?a.extend(!0,{},a.fn.sticky.settings,d):a.extend({},a.fn.sticky.settings),q=f.className,w=f.namespace,u=f.error,v="."+w,E="module-"+w,A=a(this),K=a(b),F=a(f.scrollContext),z,B,H=
A.data(E),G=b.requestAnimationFrame||b.mozRequestAnimationFrame||b.webkitRequestAnimationFrame||b.msRequestAnimationFrame||function(a){setTimeout(a,0)},I=this,N,L,x;x={initialize:function(){x.determineContainer();x.determineContext();x.verbose("Initializing sticky",f,z);x.save.positions();x.checkErrors();x.bind.events();f.observeChanges&&x.observeChanges();x.instantiate()},instantiate:function(){x.verbose("Storing instance of module",x);H=x;A.data(E,x)},destroy:function(){x.verbose("Destroying previous instance");
x.reset();N&&N.disconnect();L&&L.disconnect();K.off("load"+v,x.event.load).off("resize"+v,x.event.resize);F.off("scrollchange"+v,x.event.scrollchange);A.removeData(E)},observeChanges:function(){"MutationObserver"in b&&(N=new MutationObserver(x.event.documentChanged),L=new MutationObserver(x.event.changed),N.observe(e,{childList:!0,subtree:!0}),L.observe(I,{childList:!0,subtree:!0}),L.observe(B[0],{childList:!0,subtree:!0}),x.debug("Setting up mutation observer",L))},determineContainer:function(){z=
f.container?a(f.container):A.offsetParent()},determineContext:function(){B=f.context?a(f.context):z;0===B.length&&x.error(u.invalidContext,f.context,A)},checkErrors:function(){x.is.hidden()&&x.error(u.visible,A);x.cache.element.height>x.cache.context.height&&(x.reset(),x.error(u.elementSize,A))},bind:{events:function(){K.on("load"+v,x.event.load).on("resize"+v,x.event.resize);F.off("scroll"+v).on("scroll"+v,x.event.scroll).on("scrollchange"+v,x.event.scrollchange)}},event:{changed:function(a){clearTimeout(x.timer);
x.timer=setTimeout(function(){x.verbose("DOM tree modified, updating sticky menu",a);x.refresh()},100)},documentChanged:function(b){[].forEach.call(b,function(b){b.removedNodes&&[].forEach.call(b.removedNodes,function(b){if(b==I||0<a(b).find(I).length)x.debug("Element removed from DOM, tearing down events"),x.destroy()})})},load:function(){x.verbose("Page contents finished loading");G(x.refresh)},resize:function(){x.verbose("Window resized");G(x.refresh)},scroll:function(){G(function(){F.triggerHandler("scrollchange"+
v,F.scrollTop())})},scrollchange:function(a,b){x.stick(b);f.onScroll.call(I)}},refresh:function(a){x.reset();f.context||x.determineContext();a&&x.determineContainer();x.save.positions();x.stick();f.onReposition.call(I)},supports:{sticky:function(){var b=a("<div/>");b.addClass(q.supported);return b.css("position").match("sticky")}},save:{lastScroll:function(a){x.lastScroll=a},elementScroll:function(a){x.elementScroll=a},positions:function(){var a=F.height(),b,c,d={top:parseInt(A.css("margin-top"),
10),bottom:parseInt(A.css("margin-bottom"),10)},e=A.offset(),f=A.outerWidth(),g=A.outerHeight(),h=B.offset(),l=B.outerHeight();z.outerHeight();x.is.standardScroll()||(x.debug("Non-standard scroll. Removing scroll offset from element offset"),b=F.scrollTop(),c=F.scrollLeft(),e.top+=b,h.top+=b,e.left+=c,h.left+=c);x.cache={fits:g<a,scrollContext:{height:a},element:{margin:d,top:e.top-d.top,left:e.left,width:f,height:g,bottom:e.top+g},context:{top:h.top,height:l,bottom:h.top+l}};x.set.containerSize();
x.set.size();x.stick();x.debug("Caching element positions",x.cache)}},get:{direction:function(a){var b="down";a=a||F.scrollTop();x.lastScroll!==c&&(x.lastScroll<a?b="down":x.lastScroll>a&&(b="up"));return b},scrollChange:function(a){a=a||F.scrollTop();return x.lastScroll?a-x.lastScroll:0},currentElementScroll:function(){return x.elementScroll?x.elementScroll:x.is.top()?Math.abs(parseInt(A.css("top"),10))||0:Math.abs(parseInt(A.css("bottom"),10))||0},elementScroll:function(a){a=a||F.scrollTop();var b=
x.cache.element,c=x.cache.scrollContext;a=x.get.scrollChange(a);b=b.height-c.height+f.offset;c=x.get.currentElementScroll();a=c+a;return c=x.cache.fits||0>a?0:a>b?b:a}},remove:{lastScroll:function(){delete x.lastScroll},elementScroll:function(a){delete x.elementScroll},offset:function(){A.css("margin-top","")}},set:{offset:function(){x.verbose("Setting offset on element",f.offset);A.css("margin-top",f.offset)},containerSize:function(){var a=z.get(0).tagName;"HTML"===a||"body"==a?x.determineContainer():
Math.abs(z.outerHeight()-x.cache.context.height)>f.jitter&&(x.debug("Context has padding, specifying exact height for container",x.cache.context.height),z.css({height:x.cache.context.height}))},minimumSize:function(){z.css("min-height",x.cache.element.height)},scroll:function(a){x.debug("Setting scroll on element",a);x.elementScroll!=a&&(x.is.top()&&A.css("bottom","").css("top",-a),x.is.bottom()&&A.css("top","").css("bottom",a))},size:function(){0!==x.cache.element.height&&0!==x.cache.element.width&&
(I.style.setProperty("width",x.cache.element.width+"px","important"),I.style.setProperty("height",x.cache.element.height+"px","important"))}},is:{standardScroll:function(){return F[0]==b},top:function(){return A.hasClass(q.top)},bottom:function(){return A.hasClass(q.bottom)},initialPosition:function(){return!x.is.fixed()&&!x.is.bound()},hidden:function(){return!A.is(":visible")},bound:function(){return A.hasClass(q.bound)},fixed:function(){return A.hasClass(q.fixed)}},stick:function(a){a=a||F.scrollTop();
var b=x.cache,c=b.fits,d=b.element,e=b.scrollContext,b=b.context,g=x.is.bottom()&&f.pushing?f.bottomOffset:f.offset;a={top:a+g,bottom:a+g+e.height};x.get.direction(a.top);e=c?0:x.get.elementScroll(a.top);c=!c;0!==d.height&&(x.is.initialPosition()?a.top>=b.bottom?(x.debug("Initial element position is bottom of container"),x.bindBottom()):a.top>d.top&&(d.height+a.top-e>=b.bottom?(x.debug("Initial element position is bottom of container"),x.bindBottom()):(x.debug("Initial element position is fixed"),
x.fixTop())):x.is.fixed()?x.is.top()?a.top<=d.top?(x.debug("Fixed element reached top of container"),x.setInitialPosition()):d.height+a.top-e>=b.bottom?(x.debug("Fixed element reached bottom of container"),x.bindBottom()):c&&(x.set.scroll(e),x.save.lastScroll(a.top),x.save.elementScroll(e)):x.is.bottom()&&(a.bottom-d.height<=d.top?(x.debug("Bottom fixed rail has reached top of container"),x.setInitialPosition()):a.bottom>=b.bottom?(x.debug("Bottom fixed rail has reached bottom of container"),x.bindBottom()):
c&&(x.set.scroll(e),x.save.lastScroll(a.top),x.save.elementScroll(e))):x.is.bottom()&&(a.top<=d.top?(x.debug("Jumped from bottom fixed to top fixed, most likely used home/end button"),x.setInitialPosition()):f.pushing?x.is.bound()&&a.bottom<=b.bottom&&(x.debug("Fixing bottom attached element to bottom of browser."),x.fixBottom()):x.is.bound()&&a.top<=b.bottom-d.height&&(x.debug("Fixing bottom attached element to top of browser."),x.fixTop())))},bindTop:function(){x.debug("Binding element to top of parent container");
x.remove.offset();A.css({left:"",top:"",marginBottom:""}).removeClass(q.fixed).removeClass(q.bottom).addClass(q.bound).addClass(q.top);f.onTop.call(I);f.onUnstick.call(I)},bindBottom:function(){x.debug("Binding element to bottom of parent container");x.remove.offset();A.css({left:"",top:""}).removeClass(q.fixed).removeClass(q.top).addClass(q.bound).addClass(q.bottom);f.onBottom.call(I);f.onUnstick.call(I)},setInitialPosition:function(){x.debug("Returning to initial position");x.unfix();x.unbind()},
fixTop:function(){x.debug("Fixing element to top of page");x.set.minimumSize();x.set.offset();A.css({left:x.cache.element.left,bottom:"",marginBottom:""}).removeClass(q.bound).removeClass(q.bottom).addClass(q.fixed).addClass(q.top);f.onStick.call(I)},fixBottom:function(){x.debug("Sticking element to bottom of page");x.set.minimumSize();x.set.offset();A.css({left:x.cache.element.left,bottom:"",marginBottom:""}).removeClass(q.bound).removeClass(q.top).addClass(q.fixed).addClass(q.bottom);f.onStick.call(I)},
unbind:function(){x.is.bound()&&(x.debug("Removing container bound position on element"),x.remove.offset(),A.removeClass(q.bound).removeClass(q.top).removeClass(q.bottom))},unfix:function(){x.is.fixed()&&(x.debug("Removing fixed position on element"),x.remove.offset(),A.removeClass(q.fixed).removeClass(q.top).removeClass(q.bottom),f.onUnstick.call(I))},reset:function(){x.debug("Resetting elements position");x.unbind();x.unfix();x.resetCSS();x.remove.offset();x.remove.lastScroll()},resetCSS:function(){A.css({width:"",
height:""});z.css({height:""})},setting:function(b,d){if(a.isPlainObject(b))a.extend(!0,f,b);else if(d!==c)f[b]=d;else return f[b]},internal:function(b,d){if(a.isPlainObject(b))a.extend(!0,x,b);else if(d!==c)x[b]=d;else return x[b]},debug:function(){!f.silent&&f.debug&&(f.performance?x.performance.log(arguments):(x.debug=Function.prototype.bind.call(console.info,console,f.name+":"),x.debug.apply(console,arguments)))},verbose:function(){!f.silent&&f.verbose&&f.debug&&(f.performance?x.performance.log(arguments):
(x.verbose=Function.prototype.bind.call(console.info,console,f.name+":"),x.verbose.apply(console,arguments)))},error:function(){f.silent||(x.error=Function.prototype.bind.call(console.error,console,f.name+":"),x.error.apply(console,arguments))},performance:{log:function(a){var b,c;f.performance&&(b=(new Date).getTime(),c=h||b,c=b-c,h=b,g.push({Name:a[0],Arguments:[].slice.call(a,1)||"",Element:I,"Execution Time":c}));clearTimeout(x.performance.timer);x.performance.timer=setTimeout(x.performance.display,
0)},display:function(){var b=f.name+":",d=0;h=!1;clearTimeout(x.performance.timer);a.each(g,function(a,b){d+=b["Execution Time"]});b+=" "+d+"ms";n&&(b+=" '"+n+"'");(console.group!==c||console.table!==c)&&0<g.length&&(console.groupCollapsed(b),console.table?console.table(g):a.each(g,function(a,b){console.log(b.Name+": "+b["Execution Time"]+"ms")}),console.groupEnd());g=[]}},invoke:function(b,d,e){var f=H,g,h,l;d=d||r;e=I||e;"string"==typeof b&&f!==c&&(b=b.split(/[\. ]/),g=b.length-1,a.each(b,function(d,
e){var l=d!=g?e+b[d+1].charAt(0).toUpperCase()+b[d+1].slice(1):b;if(a.isPlainObject(f[l])&&d!=g)f=f[l];else{if(f[l]!==c)return h=f[l],!1;if(a.isPlainObject(f[e])&&d!=g)f=f[e];else return f[e]!==c&&(h=f[e]),!1}}));a.isFunction(h)?l=h.apply(e,d):h!==c&&(l=h);a.isArray(t)?t.push(l):t!==c?t=[t,l]:l!==c&&(t=l);return h}};p?(H===c&&x.initialize(),x.invoke(m)):(H!==c&&H.invoke("destroy"),x.initialize())});return t!==c?t:this};a.fn.sticky.settings={name:"Sticky",namespace:"sticky",silent:!1,debug:!1,verbose:!0,
performance:!0,pushing:!1,context:!1,container:!1,scrollContext:b,offset:0,bottomOffset:0,jitter:5,observeChanges:!1,onReposition:function(){},onScroll:function(){},onStick:function(){},onUnstick:function(){},onTop:function(){},onBottom:function(){},error:{container:"Sticky element must be inside a relative container",visible:"Element is hidden, you must call refresh after element becomes visible. Use silent setting to surpress this warning in production.",method:"The method you called is not defined.",
invalidContext:"Context specified does not exist",elementSize:"Sticky element is larger than its container, cannot create sticky."},className:{bound:"bound",fixed:"fixed",supported:"native",top:"top",bottom:"bottom"}}})(jQuery,window,document);
(function(a,b,e,c){b="undefined"!=typeof b&&b.Math==Math?b:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();a.fn.tab=function(d){var f=a.isFunction(this)?a(b):a(this),n=f.selector||"",h=(new Date).getTime(),g=[],m=arguments[0],p="string"==typeof m,r=[].slice.call(arguments,1),t=!1,l;f.each(function(){var q=a.isPlainObject(d)?a.extend(!0,{},a.fn.tab.settings,d):a.extend({},a.fn.tab.settings),w=q.className,u=q.metadata,v=q.selector,E=q.error,A="."+q.namespace,K="module-"+q.namespace,
F=a(this),z,B,H={},G=!0,I=0,N=this,L=F.data(K),x,S,D,J;D={initialize:function(){D.debug("Initializing tab menu item",F);D.fix.callbacks();D.determineTabs();D.debug("Determining tabs",q.context,B);q.auto&&D.set.auto();D.bind.events();q.history&&!t&&(D.initializeHistory(),t=!0);D.instantiate()},instantiate:function(){D.verbose("Storing instance of module",D);L=D;F.data(K,D)},destroy:function(){D.debug("Destroying tabs",F);F.removeData(K).off(A)},bind:{events:function(){a.isWindow(N)||(D.debug("Attaching tab activation events to element",
F),F.on("click"+A,D.event.click))}},determineTabs:function(){var b;"parent"===q.context?(0<F.closest(v.ui).length?(b=F.closest(v.ui),D.verbose("Using closest UI element as parent",b)):b=F,z=b.parent(),D.verbose("Determined parent element for creating context",z)):q.context?(z=a(q.context),D.verbose("Using selector for tab context",q.context,z)):z=a("body");q.childrenOnly?(B=z.children(v.tabs),D.debug("Searching tab context children for tabs",z,B)):(B=z.find(v.tabs),D.debug("Searching tab context for tabs",
z,B))},fix:{callbacks:function(){a.isPlainObject(d)&&(d.onTabLoad||d.onTabInit)&&(d.onTabLoad&&(d.onLoad=d.onTabLoad,delete d.onTabLoad,D.error(E.legacyLoad,d.onLoad)),d.onTabInit&&(d.onFirstLoad=d.onTabInit,delete d.onTabInit,D.error(E.legacyInit,d.onFirstLoad)),q=a.extend(!0,{},a.fn.tab.settings,d))}},initializeHistory:function(){D.debug("Initializing page state");if(a.address===c)return D.error(E.state),!1;if("state"==q.historyType)if(D.debug("Using HTML5 to manage state"),!1!==q.path)a.address.history(!0).state(q.path);
else return D.error(E.path),!1;a.address.bind("change",D.event.history.change)},event:{click:function(b){var d=a(this).data(u.tab);d!==c?(q.history?(D.verbose("Updating page state",b),a.address.value(d)):(D.verbose("Changing tab",b),D.changeTab(d)),b.preventDefault()):D.debug("No tab specified")},history:{change:function(b){var d=b.pathNames.join("/")||D.get.initialPath(),e=q.templates.determineTitle(d)||!1;D.performance.display();D.debug("History change event",d,b);J=b;d!==c&&D.changeTab(d);e&&a.address.title(e)}}},
refresh:function(){x&&(D.debug("Refreshing tab",x),D.changeTab(x))},cache:{read:function(a){return a!==c?H[a]:!1},add:function(a,b){a=a||x;D.debug("Adding cached content for",a);H[a]=b},remove:function(a){a=a||x;D.debug("Removing cached content for",a);delete H[a]}},set:{auto:function(){var b="string"==typeof q.path?q.path.replace(/\/$/,"")+"/{$tab}":"/{$tab}";D.verbose("Setting up automatic tab retrieval from server",b);a.isPlainObject(q.apiSettings)?q.apiSettings.url=b:q.apiSettings={url:b}},loading:function(a){var b=
D.get.tabElement(a);b.hasClass(w.loading)||(D.verbose("Setting loading state for",b),b.addClass(w.loading).siblings(B).removeClass(w.active+" "+w.loading),0<b.length&&q.onRequest.call(b[0],a))},state:function(b){a.address.value(b)}},changeTab:function(c){var d=b.history&&b.history.pushState&&q.ignoreFirstLoad&&G,e=q.auto||a.isPlainObject(q.apiSettings),f=e&&!d?D.utilities.pathToArray(c):D.get.defaultPathArray(c);c=D.utilities.arrayToPath(f);a.each(f,function(b,g){var h=f.slice(0,b+1),l=D.utilities.arrayToPath(h),
m=D.is.tab(l),n=b+1==f.length,p=D.get.tabElement(l),r;D.verbose("Looking for tab",g);if(m){D.verbose("Tab was found",g);x=l;S=D.utilities.filterArray(f,h);n?m=!0:(h=f.slice(0,b+2),m=D.utilities.arrayToPath(h),(m=!D.is.tab(m))&&D.verbose("Tab parameters found",h));if(m&&e)return d?(D.debug("Ignoring remote content on first tab load",l),G=!1,D.cache.add(c,p.html()),D.activate.all(l),q.onFirstLoad.call(p[0],l,S,J),q.onLoad.call(p[0],l,S,J)):(D.activate.navigation(l),D.fetch.content(l,c)),!1;D.debug("Opened local tab",
l);D.activate.all(l);D.cache.read(l)||(D.cache.add(l,!0),D.debug("First time tab loaded calling tab init"),q.onFirstLoad.call(p[0],l,S,J));q.onLoad.call(p[0],l,S,J)}else if(-1==c.search("/")&&""!==c){if(r=a("#"+c+', a[name="'+c+'"]'),l=r.closest("[data-tab]").data(u.tab),p=D.get.tabElement(l),r&&0<r.length&&l)return D.debug("Anchor link used, opening parent tab",p,r),p.hasClass(w.active)||setTimeout(function(){D.scrollTo(r)},0),D.activate.all(l),D.cache.read(l)||(D.cache.add(l,!0),D.debug("First time tab loaded calling tab init"),
q.onFirstLoad.call(p[0],l,S,J)),q.onLoad.call(p[0],l,S,J),!1}else return D.error(E.missingTab,F,z,l),!1})},scrollTo:function(b){var c=b&&0<b.length?b.offset().top:!1;!1!==c&&(D.debug("Forcing scroll to an in-page link in a hidden tab",c,b),a(e).scrollTop(c))},update:{content:function(b,d,e){var f=D.get.tabElement(b),g=f[0];e=e!==c?e:q.evaluateScripts;"string"==typeof q.cacheType&&"dom"==q.cacheType.toLowerCase()&&"string"!==typeof d?f.empty().append(a(d).clone(!0)):e?(D.debug("Updating HTML and evaluating inline scripts",
b,d),f.html(d)):(D.debug("Updating HTML",b,d),g.innerHTML=d)}},fetch:{content:function(b,d){var e=D.get.tabElement(b),f={dataType:"html",encodeParameters:!1,on:"now",cache:q.alwaysRefresh,headers:{"X-Remote":!0},onSuccess:function(a){"response"==q.cacheType&&D.cache.add(d,a);D.update.content(b,a);b==x?(D.debug("Content loaded",b),D.activate.tab(b)):D.debug("Content loaded in background",b);q.onFirstLoad.call(e[0],b,S,J);q.onLoad.call(e[0],b,S,J);"string"==typeof q.cacheType&&"dom"==q.cacheType.toLowerCase()&&
0<e.children().length?setTimeout(function(){var a=e.children().clone(!0),a=a.not("script");D.cache.add(d,a)},0):D.cache.add(d,e.html())},urlData:{tab:d}},g=e.api("get request")||!1,g=g&&"pending"===g.state(),h;d=d||b;h=D.cache.read(d);q.cache&&h?(D.activate.tab(b),D.debug("Adding cached content",d),"once"==q.evaluateScripts?D.update.content(b,h,!1):D.update.content(b,h),q.onLoad.call(e[0],b,S,J)):g?(D.set.loading(b),D.debug("Content is already loading",d)):a.api!==c?(f=a.extend(!0,{},q.apiSettings,
f),D.debug("Retrieving remote content",d,f),D.set.loading(b),e.api(f)):D.error(E.api)}},activate:{all:function(a){D.activate.tab(a);D.activate.navigation(a)},tab:function(a){var b=D.get.tabElement(a),c="siblings"==q.deactivate?b.siblings(B):B.not(b),d=b.hasClass(w.active);D.verbose("Showing tab content for",b);d||(b.addClass(w.active),c.removeClass(w.active+" "+w.loading),0<b.length&&q.onVisible.call(b[0],a))},navigation:function(a){var b=D.get.navElement(a),c="siblings"==q.deactivate?b.siblings(f):
f.not(b),d=b.hasClass(w.active);D.verbose("Activating tab navigation for",b,a);d||(b.addClass(w.active),c.removeClass(w.active+" "+w.loading))}},deactivate:{all:function(){D.deactivate.navigation();D.deactivate.tabs()},navigation:function(){f.removeClass(w.active)},tabs:function(){B.removeClass(w.active+" "+w.loading)}},is:{tab:function(a){return a!==c?0<D.get.tabElement(a).length:!1}},get:{initialPath:function(){return f.eq(0).data(u.tab)||B.eq(0).data(u.tab)},path:function(){return a.address.value()},
defaultPathArray:function(a){return D.utilities.pathToArray(D.get.defaultPath(a))},defaultPath:function(a){var b=f.filter("[data-"+u.tab+'^="'+a+'/"]').eq(0).data(u.tab)||!1;if(b){D.debug("Found default tab",b);if(I<q.maxDepth)return I++,D.get.defaultPath(b);D.error(E.recursion)}else D.debug("No default tabs found for",a,B);I=0;return a},navElement:function(a){a=a||x;return f.filter("[data-"+u.tab+'="'+a+'"]')},tabElement:function(a){var b;a=a||x;b=D.utilities.pathToArray(a);b=D.utilities.last(b);
a=B.filter("[data-"+u.tab+'="'+a+'"]');b=B.filter("[data-"+u.tab+'="'+b+'"]');return 0<a.length?a:b},tab:function(){return x}},utilities:{filterArray:function(b,c){return a.grep(b,function(b){return-1==a.inArray(b,c)})},last:function(b){return a.isArray(b)?b[b.length-1]:!1},pathToArray:function(a){a===c&&(a=x);return"string"==typeof a?a.split("/"):[a]},arrayToPath:function(b){return a.isArray(b)?b.join("/"):!1}},setting:function(b,d){D.debug("Changing setting",b,d);if(a.isPlainObject(b))a.extend(!0,
q,b);else if(d!==c)a.isPlainObject(q[b])?a.extend(!0,q[b],d):q[b]=d;else return q[b]},internal:function(b,d){if(a.isPlainObject(b))a.extend(!0,D,b);else if(d!==c)D[b]=d;else return D[b]},debug:function(){!q.silent&&q.debug&&(q.performance?D.performance.log(arguments):(D.debug=Function.prototype.bind.call(console.info,console,q.name+":"),D.debug.apply(console,arguments)))},verbose:function(){!q.silent&&q.verbose&&q.debug&&(q.performance?D.performance.log(arguments):(D.verbose=Function.prototype.bind.call(console.info,
console,q.name+":"),D.verbose.apply(console,arguments)))},error:function(){q.silent||(D.error=Function.prototype.bind.call(console.error,console,q.name+":"),D.error.apply(console,arguments))},performance:{log:function(a){var b,c;q.performance&&(b=(new Date).getTime(),c=h||b,c=b-c,h=b,g.push({Name:a[0],Arguments:[].slice.call(a,1)||"",Element:N,"Execution Time":c}));clearTimeout(D.performance.timer);D.performance.timer=setTimeout(D.performance.display,500)},display:function(){var b=q.name+":",d=0;
h=!1;clearTimeout(D.performance.timer);a.each(g,function(a,b){d+=b["Execution Time"]});b+=" "+d+"ms";n&&(b+=" '"+n+"'");(console.group!==c||console.table!==c)&&0<g.length&&(console.groupCollapsed(b),console.table?console.table(g):a.each(g,function(a,b){console.log(b.Name+": "+b["Execution Time"]+"ms")}),console.groupEnd());g=[]}},invoke:function(b,d,e){var f=L,g,h,m;d=d||r;e=N||e;"string"==typeof b&&f!==c&&(b=b.split(/[\. ]/),g=b.length-1,a.each(b,function(d,e){var l=d!=g?e+b[d+1].charAt(0).toUpperCase()+
b[d+1].slice(1):b;if(a.isPlainObject(f[l])&&d!=g)f=f[l];else{if(f[l]!==c)return h=f[l],!1;if(a.isPlainObject(f[e])&&d!=g)f=f[e];else return f[e]!==c?h=f[e]:D.error(E.method,b),!1}}));a.isFunction(h)?m=h.apply(e,d):h!==c&&(m=h);a.isArray(l)?l.push(m):l!==c?l=[l,m]:m!==c&&(l=m);return h}};p?(L===c&&D.initialize(),D.invoke(m)):(L!==c&&L.invoke("destroy"),D.initialize())});return l!==c?l:this};a.tab=function(){a(b).tab.apply(this,arguments)};a.fn.tab.settings={name:"Tab",namespace:"tab",silent:!1,debug:!1,
verbose:!1,performance:!0,auto:!1,history:!1,historyType:"hash",path:!1,context:!1,childrenOnly:!1,maxDepth:25,deactivate:"siblings",alwaysRefresh:!1,cache:!0,cacheType:"response",ignoreFirstLoad:!1,apiSettings:!1,evaluateScripts:"once",onFirstLoad:function(a,b,c){},onLoad:function(a,b,c){},onVisible:function(a,b,c){},onRequest:function(a,b,c){},templates:{determineTitle:function(a){}},error:{api:"You attempted to load content without API module",method:"The method you called is not defined",missingTab:"Activated tab cannot be found. Tabs are case-sensitive.",
noContent:"The tab you specified is missing a content url.",path:"History enabled, but no path was specified",recursion:"Max recursive depth reached",legacyInit:"onTabInit has been renamed to onFirstLoad in 2.0, please adjust your code.",legacyLoad:"onTabLoad has been renamed to onLoad in 2.0. Please adjust your code",state:"History requires Asual's Address library <https://github.com/asual/jquery-address>"},metadata:{tab:"tab",loaded:"loaded",promise:"promise"},className:{loading:"loading",active:"active"},
selector:{tabs:".ui.tab",ui:".ui"}}})(jQuery,window,document);
(function(a,b,e,c){b="undefined"!=typeof b&&b.Math==Math?b:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();a.fn.transition=function(){var b=a(this),f=b.selector||"",n=(new Date).getTime(),h=[],g=arguments,m=g[0],p=[].slice.call(arguments,1),r="string"===typeof m,t;b.each(function(l){var q=a(this),w=this,u,v,E,A,K,F,z,B,H;H={initialize:function(){u=H.get.settings.apply(w,g);A=u.className;E=u.error;K=u.metadata;B="."+u.namespace;z="module-"+u.namespace;v=q.data(z)||H;F=H.get.animationEndEvent();
r&&(r=H.invoke(m));!1===r&&(H.verbose("Converted arguments into settings object",u),u.interval?H.delay(u.animate):H.animate(),H.instantiate())},instantiate:function(){H.verbose("Storing instance of module",H);v=H;q.data(z,v)},destroy:function(){H.verbose("Destroying previous module for",w);q.removeData(z)},refresh:function(){H.verbose("Refreshing display type on next animation");delete H.displayType},forceRepaint:function(){H.verbose("Forcing element repaint");var a=q.parent(),b=q.next();0===b.length?
q.detach().appendTo(a):q.detach().insertBefore(b)},repaint:function(){H.verbose("Repainting element")},delay:function(a){(a=H.get.animationDirection())||(a=H.can.transition()?H.get.direction():"static");a="auto"==u.reverse&&a==A.outward||1==u.reverse?(b.length-l)*u.interval:l*u.interval;H.debug("Delaying animation by",a);setTimeout(H.animate,a)},animate:function(a){u=a||u;if(!H.is.supported())return H.error(E.support),!1;H.debug("Preparing animation",u.animation);if(H.is.animating()){if(u.queue)return!u.allowRepeats&&
H.has.direction()&&H.is.occurring()&&!0!==H.queuing?H.debug("Animation is currently occurring, preventing queueing same animation",u.animation):H.queue(u.animation),!1;if(!u.allowRepeats&&H.is.occurring())return H.debug("Animation is already occurring, will not execute repeated animation",u.animation),!1;H.debug("New animation started, completing previous early",u.animation);v.complete()}H.can.animate()?H.set.animating(u.animation):H.error(E.noAnimation,u.animation,w)},reset:function(){H.debug("Resetting animation to beginning conditions");
H.remove.animationCallbacks();H.restore.conditions();H.remove.animating()},queue:function(a){H.debug("Queueing animation of",a);H.queuing=!0;q.one(F+".queue"+B,function(){H.queuing=!1;H.repaint();H.animate.apply(this,u)})},complete:function(a){H.debug("Animation complete",u.animation);H.remove.completeCallback();H.remove.failSafe();H.is.looping()||(H.is.outward()?(H.verbose("Animation is outward, hiding element"),H.restore.conditions(),H.hide()):H.is.inward()?(H.verbose("Animation is outward, showing element"),
H.restore.conditions(),H.show()):(H.verbose("Static animation completed"),H.restore.conditions(),u.onComplete.call(w)))},force:{visible:function(){var a=q.attr("style"),b=H.get.userStyle(),d=H.get.displayType(),b=b+"display: "+d+" !important;",e=q.css("display"),a=a===c||""===a;e!==d?(H.verbose("Overriding default display to show element",d),q.attr("style",b)):a&&q.removeAttr("style")},hidden:function(){var a=q.attr("style"),b=q.css("display"),a=a===c||""===a;"none"===b||H.is.hidden()?a&&q.removeAttr("style"):
(H.verbose("Overriding default display to hide element"),q.css("display","none"))}},has:{direction:function(b){var c=!1;b=b||u.animation;"string"===typeof b&&(b=b.split(" "),a.each(b,function(a,b){if(b===A.inward||b===A.outward)c=!0}));return c},inlineDisplay:function(){var b=q.attr("style")||"";return a.isArray(b.match(/display.*?;/,""))}},set:{animating:function(a){H.remove.completeCallback();a=a||u.animation;a=H.get.animationClass(a);H.save.animation(a);H.force.visible();H.remove.hidden();H.remove.direction();
H.start.animation(a)},duration:function(a,b){b=b||u.duration;if((b="number"==typeof b?b+"ms":b)||0===b)H.verbose("Setting animation duration",b),q.css({"animation-duration":b})},direction:function(a){a=a||H.get.direction();a==A.inward?H.set.inward():H.set.outward()},looping:function(){H.debug("Transition set to loop");q.addClass(A.looping)},hidden:function(){q.addClass(A.transition).addClass(A.hidden)},inward:function(){H.debug("Setting direction to inward");q.removeClass(A.outward).addClass(A.inward)},
outward:function(){H.debug("Setting direction to outward");q.removeClass(A.inward).addClass(A.outward)},visible:function(){q.addClass(A.transition).addClass(A.visible)}},start:{animation:function(a){a=a||H.get.animationClass();H.debug("Starting tween",a);q.addClass(a).one(F+".complete"+B,H.complete);u.useFailSafe&&H.add.failSafe();H.set.duration(u.duration);u.onStart.call(w)}},save:{animation:function(a){H.cache||(H.cache={});H.cache.animation=a},displayType:function(a){"none"!==a&&q.data(K.displayType,
a)},transitionExists:function(b,c){a.fn.transition.exists[b]=c;H.verbose("Saving existence of transition",b,c)}},restore:{conditions:function(){var a=H.get.currentAnimation();a&&(q.removeClass(a),H.verbose("Removing animation class",H.cache));H.remove.duration()}},add:{failSafe:function(){var a=H.get.duration();H.timer=setTimeout(function(){q.triggerHandler(F)},a+u.failSafeDelay);H.verbose("Adding fail safe timer",H.timer)}},remove:{animating:function(){q.removeClass(A.animating)},animationCallbacks:function(){H.remove.queueCallback();
H.remove.completeCallback()},queueCallback:function(){q.off(".queue"+B)},completeCallback:function(){q.off(".complete"+B)},display:function(){q.css("display","")},direction:function(){q.removeClass(A.inward).removeClass(A.outward)},duration:function(){q.css("animation-duration","")},failSafe:function(){H.verbose("Removing fail safe timer",H.timer);H.timer&&clearTimeout(H.timer)},hidden:function(){q.removeClass(A.hidden)},visible:function(){q.removeClass(A.visible)},looping:function(){H.debug("Transitions are no longer looping");
H.is.looping()&&(H.reset(),q.removeClass(A.looping))},transition:function(){q.removeClass(A.visible).removeClass(A.hidden)}},get:{settings:function(b,c,d){return"object"==typeof b?a.extend(!0,{},a.fn.transition.settings,b):"function"==typeof d?a.extend({},a.fn.transition.settings,{animation:b,onComplete:d,duration:c}):"string"==typeof c||"number"==typeof c?a.extend({},a.fn.transition.settings,{animation:b,duration:c}):"object"==typeof c?a.extend({},a.fn.transition.settings,c,{animation:b}):"function"==
typeof c?a.extend({},a.fn.transition.settings,{animation:b,onComplete:c}):a.extend({},a.fn.transition.settings,{animation:b})},animationClass:function(a){a=a||u.animation;var b=H.can.transition()&&!H.has.direction()?H.get.direction()+" ":"";return A.animating+" "+A.transition+" "+b+a},currentAnimation:function(){return H.cache&&H.cache.animation!==c?H.cache.animation:!1},currentDirection:function(){return H.is.inward()?A.inward:A.outward},direction:function(){return H.is.hidden()||!H.is.visible()?
A.inward:A.outward},animationDirection:function(b){var c;b=b||u.animation;"string"===typeof b&&(b=b.split(" "),a.each(b,function(a,b){b===A.inward?c=A.inward:b===A.outward&&(c=A.outward)}));return c?c:!1},duration:function(a){a=a||u.duration;!1===a&&(a=q.css("animation-duration")||0);return"string"===typeof a?-1<a.indexOf("ms")?parseFloat(a):1E3*parseFloat(a):a},displayType:function(a){a=a!==c?a:!0;if(u.displayType)return u.displayType;a&&q.data(K.displayType)===c&&H.can.transition(!0);return q.data(K.displayType)},
userStyle:function(a){a=a||q.attr("style")||"";return a.replace(/display.*?;/,"")},transitionExists:function(b){return a.fn.transition.exists[b]},animationStartEvent:function(){var a=e.createElement("div"),b={animation:"animationstart",OAnimation:"oAnimationStart",MozAnimation:"mozAnimationStart",WebkitAnimation:"webkitAnimationStart"},d;for(d in b)if(a.style[d]!==c)return b[d];return!1},animationEndEvent:function(){var a=e.createElement("div"),b={animation:"animationend",OAnimation:"oAnimationEnd",
MozAnimation:"mozAnimationEnd",WebkitAnimation:"webkitAnimationEnd"},d;for(d in b)if(a.style[d]!==c)return b[d];return!1}},can:{transition:function(b){var d=u.animation,e=H.get.transitionExists(d),f=H.get.displayType(!1),g,h,l;if(e===c||b){H.verbose("Determining whether animation exists");b=q.attr("class");g=q.prop("tagName");g=a("<"+g+" />").addClass(b).insertAfter(q);h=g.addClass(d).removeClass(A.inward).removeClass(A.outward).addClass(A.animating).addClass(A.transition).css("animationName");l=
g.addClass(A.inward).css("animationName");f||(f=g.attr("class",b).removeAttr("style").removeClass(A.hidden).removeClass(A.visible).show().css("display"),H.verbose("Determining final display state",f),H.save.displayType(f));g.remove();if(h!=l)H.debug("Direction exists for animation",d),g=!0;else if("none"!=h&&h)H.debug("Static animation found",d,f),g=!1;else{H.debug("No animation defined in css",d);return}H.save.transitionExists(d,g)}return e!==c?e:g},animate:function(){return H.can.transition()!==
c}},is:{animating:function(){return q.hasClass(A.animating)},inward:function(){return q.hasClass(A.inward)},outward:function(){return q.hasClass(A.outward)},looping:function(){return q.hasClass(A.looping)},occurring:function(a){a=a||u.animation;a="."+a.replace(" ",".");return 0<q.filter(a).length},visible:function(){return q.is(":visible")},hidden:function(){return"hidden"===q.css("visibility")},supported:function(){return!1!==F}},hide:function(){H.verbose("Hiding element");H.is.animating()&&H.reset();
w.blur();H.remove.display();H.remove.visible();H.set.hidden();H.force.hidden();u.onHide.call(w);u.onComplete.call(w)},show:function(a){H.verbose("Showing element",a);H.remove.hidden();H.set.visible();H.force.visible();u.onShow.call(w);u.onComplete.call(w)},toggle:function(){H.is.visible()?H.hide():H.show()},stop:function(){H.debug("Stopping current animation");q.triggerHandler(F)},stopAll:function(){H.debug("Stopping all animation");H.remove.queueCallback();q.triggerHandler(F)},clear:{queue:function(){H.debug("Clearing animation queue");
H.remove.queueCallback()}},enable:function(){H.verbose("Starting animation");q.removeClass(A.disabled)},disable:function(){H.debug("Stopping animation");q.addClass(A.disabled)},setting:function(b,d){H.debug("Changing setting",b,d);if(a.isPlainObject(b))a.extend(!0,u,b);else if(d!==c)a.isPlainObject(u[b])?a.extend(!0,u[b],d):u[b]=d;else return u[b]},internal:function(b,d){if(a.isPlainObject(b))a.extend(!0,H,b);else if(d!==c)H[b]=d;else return H[b]},debug:function(){!u.silent&&u.debug&&(u.performance?
H.performance.log(arguments):(H.debug=Function.prototype.bind.call(console.info,console,u.name+":"),H.debug.apply(console,arguments)))},verbose:function(){!u.silent&&u.verbose&&u.debug&&(u.performance?H.performance.log(arguments):(H.verbose=Function.prototype.bind.call(console.info,console,u.name+":"),H.verbose.apply(console,arguments)))},error:function(){u.silent||(H.error=Function.prototype.bind.call(console.error,console,u.name+":"),H.error.apply(console,arguments))},performance:{log:function(a){var b,
c;u.performance&&(b=(new Date).getTime(),c=n||b,c=b-c,n=b,h.push({Name:a[0],Arguments:[].slice.call(a,1)||"",Element:w,"Execution Time":c}));clearTimeout(H.performance.timer);H.performance.timer=setTimeout(H.performance.display,500)},display:function(){var e=u.name+":",g=0;n=!1;clearTimeout(H.performance.timer);a.each(h,function(a,b){g+=b["Execution Time"]});e+=" "+g+"ms";f&&(e+=" '"+f+"'");1<b.length&&(e+=" ("+b.length+")");(console.group!==c||console.table!==c)&&0<h.length&&(console.groupCollapsed(e),
console.table?console.table(h):a.each(h,function(a,b){console.log(b.Name+": "+b["Execution Time"]+"ms")}),console.groupEnd());h=[]}},invoke:function(b,d,e){var f=v,g,h,l;d=d||p;e=w||e;"string"==typeof b&&f!==c&&(b=b.split(/[\. ]/),g=b.length-1,a.each(b,function(d,e){var l=d!=g?e+b[d+1].charAt(0).toUpperCase()+b[d+1].slice(1):b;if(a.isPlainObject(f[l])&&d!=g)f=f[l];else{if(f[l]!==c)return h=f[l],!1;if(a.isPlainObject(f[e])&&d!=g)f=f[e];else return f[e]!==c&&(h=f[e]),!1}}));a.isFunction(h)?l=h.apply(e,
d):h!==c&&(l=h);a.isArray(t)?t.push(l):t!==c?t=[t,l]:l!==c&&(t=l);return h!==c?h:!1}};H.initialize()});return t!==c?t:this};a.fn.transition.exists={};a.fn.transition.settings={name:"Transition",silent:!1,debug:!1,verbose:!1,performance:!0,namespace:"transition",interval:0,reverse:"auto",onStart:function(){},onComplete:function(){},onShow:function(){},onHide:function(){},useFailSafe:!0,failSafeDelay:100,allowRepeats:!1,displayType:!1,animation:"fade",duration:!1,queue:!0,metadata:{displayType:"display"},
className:{animating:"animating",disabled:"disabled",hidden:"hidden",inward:"in",loading:"loading",looping:"looping",outward:"out",transition:"transition",visible:"visible"},error:{noAnimation:"Element is no longer attached to DOM. Unable to animate.  Use silent setting to surpress this warning in production.",repeated:"That animation is already occurring, cancelling repeated animation",method:"The method you called is not defined",support:"This browser does not support CSS animations"}}})(jQuery,
window,document);
(function(a,b,e,c){b="undefined"!=typeof b&&b.Math==Math?b:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();a.api=a.fn.api=function(d){var e=a.isFunction(this)?a(b):a(this),n=e.selector||"",h=(new Date).getTime(),g=[],m=arguments[0],p="string"==typeof m,r=[].slice.call(arguments,1),t;e.each(function(){var e=a.isPlainObject(d)?a.extend(!0,{},a.fn.api.settings,d):a.extend({},a.fn.api.settings),f=e.namespace,w=e.metadata,u=e.selector,v=e.error,E=e.className,A="."+f,K="module-"+
f,F=a(this),z=F.closest(u.form),B=e.stateContext?a(e.stateContext):F,H,G,I,N,L=this,x=B[0],S=F.data(K),D;D={initialize:function(){p||D.bind.events();D.instantiate()},instantiate:function(){D.verbose("Storing instance of module",D);S=D;F.data(K,S)},destroy:function(){D.verbose("Destroying previous module for",L);F.removeData(K).off(A)},bind:{events:function(){var a=D.get.event();a?(D.verbose("Attaching API events to element",a),F.on(a+A,D.event.trigger)):"now"==e.on&&(D.debug("Querying API endpoint immediately"),
D.query())}},decode:{json:function(a){if(a!==c&&"string"==typeof a)try{a=JSON.parse(a)}catch(b){}return a}},read:{cachedResponse:function(a){var d;if(b.Storage===c)D.error(v.noStorage);else return d=sessionStorage.getItem(a),D.debug("Using cached response",a,d),d=D.decode.json(d)}},write:{cachedResponse:function(d,e){e&&""===e?D.debug("Response empty, not caching",e):b.Storage===c?D.error(v.noStorage):(a.isPlainObject(e)&&(e=JSON.stringify(e)),sessionStorage.setItem(d,e),D.verbose("Storing cached response for url",
d,e))}},query:function(){if(D.is.disabled())D.debug("Element is disabled API request aborted");else{if(D.is.loading())if(e.interruptRequests)D.debug("Interrupting previous request"),D.abort();else{D.debug("Cancelling request, previous request is still pending");return}e.defaultData&&a.extend(!0,e.urlData,D.get.defaultData());e.serializeForm&&(e.data=D.add.formData(e.data));G=D.get.settings();if(!1===G)D.cancelled=!0,D.error(v.beforeSend);else if(D.cancelled=!1,(I=D.get.templatedURL())||D.is.mocked()){if((I=
D.add.urlData(I))||D.is.mocked())G.url=e.base+I,H=a.extend(!0,{},e,{type:e.method||e.type,data:void 0,url:e.base+I,beforeSend:e.beforeXHR,success:function(){},failure:function(){},complete:function(){}}),D.debug("Querying URL",H.url),D.verbose("Using AJAX settings",H),"local"===e.cache&&D.read.cachedResponse(I)?(D.debug("Response returned from local cache"),D.request=D.create.request(),D.request.resolveWith(x,[D.read.cachedResponse(I)])):e.throttle?e.throttleFirstRequest||D.timer?(D.debug("Throttling request",
e.throttle),clearTimeout(D.timer),D.timer=setTimeout(function(){D.timer&&delete D.timer;D.debug("Sending throttled request",void 0,H.method);D.send.request()},e.throttle)):(D.debug("Sending request",void 0,H.method),D.send.request(),D.timer=setTimeout(function(){},e.throttle)):(D.debug("Sending request",void 0,H.method),D.send.request())}else D.error(v.missingURL)}},should:{removeError:function(){return!0===e.hideError||"auto"===e.hideError&&!D.is.form()}},is:{disabled:function(){return 0<F.filter(u.disabled).length},
expectingJSON:function(){return"json"===e.dataType||"jsonp"===e.dataType},form:function(){return F.is("form")||B.is("form")},mocked:function(){return e.mockResponse||e.mockResponseAsync||e.response||e.responseAsync},input:function(){return F.is("input")},loading:function(){return D.request?"pending"==D.request.state():!1},abortedRequest:function(a){if(a&&a.readyState!==c&&0===a.readyState)return D.verbose("XHR request determined to be aborted"),!0;D.verbose("XHR request was not aborted");return!1},
validResponse:function(b){if(!D.is.expectingJSON()||!a.isFunction(e.successTest))return D.verbose("Response is not JSON, skipping validation",e.successTest,b),!0;D.debug("Checking JSON returned success",e.successTest,b);if(e.successTest(b))return D.debug("Response passed success test",b),!0;D.debug("Response failed success test",b);return!1}},was:{cancelled:function(){return D.cancelled||!1},succesful:function(){return D.request&&"resolved"==D.request.state()},failure:function(){return D.request&&
"rejected"==D.request.state()},complete:function(){return D.request&&("resolved"==D.request.state()||"rejected"==D.request.state())}},add:{urlData:function(b,d){var f,g;b&&(f=b.match(e.regExp.required),g=b.match(e.regExp.optional),d=d||e.urlData,f&&(D.debug("Looking for required URL variables",f),a.each(f,function(f,g){var h=-1!==g.indexOf("$")?g.substr(2,g.length-3):g.substr(1,g.length-2),m=a.isPlainObject(d)&&d[h]!==c?d[h]:F.data(h)!==c?F.data(h):B.data(h)!==c?B.data(h):d[h];if(m===c)return D.error(v.requiredParameter,
h,b),b=!1;D.verbose("Found required variable",h,m);m=e.encodeParameters?D.get.urlEncodedValue(m):m;b=b.replace(g,m)})),g&&(D.debug("Looking for optional URL variables",f),a.each(g,function(e,f){var g=-1!==f.indexOf("$")?f.substr(3,f.length-4):f.substr(2,f.length-3),h=a.isPlainObject(d)&&d[g]!==c?d[g]:F.data(g)!==c?F.data(g):B.data(g)!==c?B.data(g):d[g];h!==c?(D.verbose("Optional variable Found",g,h),b=b.replace(f,h)):(D.verbose("Optional variable not found",g),b=-1!==b.indexOf("/"+f)?b.replace("/"+
f,""):b.replace(f,""))})));return b},formData:function(b){var d=a.fn.serializeObject!==c,f=d?z.serializeObject():z.serialize();b=b||e.data;a.isPlainObject(b)?d?(D.debug("Extending existing data with form data",b,f),b=a.extend(!0,{},b,f)):(D.error(v.missingSerialize),D.debug("Cant extend data. Replacing data with form data",b,f),b=f):(D.debug("Adding form data",f),b=f);return b}},send:{request:function(){D.set.loading();D.request=D.create.request();D.is.mocked()?D.mockedXHR=D.create.mockedXHR():D.xhr=
D.create.xhr();e.onRequest.call(x,D.request,D.xhr)}},event:{trigger:function(a){D.query();"submit"!=a.type&&"click"!=a.type||a.preventDefault()},xhr:{always:function(){},done:function(b,c,d){var f=this;c=(new Date).getTime()-N;c=e.loadingDuration-c;var g=a.isFunction(e.onResponse)?D.is.expectingJSON()?e.onResponse.call(f,a.extend(!0,{},b)):e.onResponse.call(f,b):!1;c=0<c?c:0;g&&(D.debug("Modified API response in onResponse callback",e.onResponse,g,b),b=g);0<c&&D.debug("Response completed early delaying state change by",
c);setTimeout(function(){D.is.validResponse(b)?D.request.resolveWith(f,[b,d]):D.request.rejectWith(f,[d,"invalid"])},c)},fail:function(a,b,c){var d=this,f=(new Date).getTime()-N,f=e.loadingDuration-f,f=0<f?f:0;0<f&&D.debug("Response completed early delaying state change by",f);setTimeout(function(){D.is.abortedRequest(a)?D.request.rejectWith(d,[a,"aborted",c]):D.request.rejectWith(d,[a,"error",b,c])},f)}},request:{done:function(a,b){D.debug("Successful API Response",a);"local"===e.cache&&I&&(D.write.cachedResponse(I,
a),D.debug("Saving server response locally",D.cache));e.onSuccess.call(x,a,F,b)},complete:function(a,b){var c,d;D.was.succesful()?(d=a,c=b):(c=a,d=D.get.responseFromXHR(c));D.remove.loading();e.onComplete.call(x,d,F,c)},fail:function(a,b,d){var f=D.get.responseFromXHR(a),g=D.get.errorFromRequest(f,b,d);if("aborted"==b)return D.debug("XHR Aborted (Most likely caused by page navigation or CORS Policy)",b,d),e.onAbort.call(x,b,F,a),!0;"invalid"==b?D.debug("JSON did not pass success test. A server-side error has most likely occurred",
f):"error"==b&&a!==c&&(D.debug("XHR produced a server error",b,d),200!=a.status&&d!==c&&""!==d&&D.error(v.statusMessage+d,H.url),e.onError.call(x,g,F,a));e.errorDuration&&"aborted"!==b&&(D.debug("Adding error state"),D.set.error(),D.should.removeError()&&setTimeout(D.remove.error,e.errorDuration));D.debug("API Request failed",g,a);e.onFailure.call(x,f,F,a)}}},create:{request:function(){return a.Deferred().always(D.event.request.complete).done(D.event.request.done).fail(D.event.request.fail)},mockedXHR:function(){var b=
e.mockResponse||e.response,c=e.mockResponseAsync||e.responseAsync,d;d=a.Deferred().always(D.event.xhr.complete).done(D.event.xhr.done).fail(D.event.xhr.fail);b?(a.isFunction(b)?(D.debug("Using specified synchronous callback",b),c=b.call(x,G)):(D.debug("Using settings specified response",b),c=b),d.resolveWith(x,[c,!1,{responseText:c}])):a.isFunction(c)&&(b=function(a){D.debug("Async callback returned response",a);a?d.resolveWith(x,[a,!1,{responseText:a}]):d.rejectWith(x,[{responseText:a},!1,!1])},
D.debug("Using specified async response callback",c),c.call(x,G,b));return d},xhr:function(){var b;b=a.ajax(H).always(D.event.xhr.always).done(D.event.xhr.done).fail(D.event.xhr.fail);D.verbose("Created server request",b,H);return b}},set:{error:function(){D.verbose("Adding error state to element",B);B.addClass(E.error)},loading:function(){D.verbose("Adding loading state to element",B);B.addClass(E.loading);N=(new Date).getTime()}},remove:{error:function(){D.verbose("Removing error state from element",
B);B.removeClass(E.error)},loading:function(){D.verbose("Removing loading state from element",B);B.removeClass(E.loading)}},get:{responseFromXHR:function(b){return a.isPlainObject(b)?D.is.expectingJSON()?D.decode.json(b.responseText):b.responseText:!1},errorFromRequest:function(b,d,f){return a.isPlainObject(b)&&b.error!==c?b.error:e.error[d]!==c?e.error[d]:f},request:function(){return D.request||!1},xhr:function(){return D.xhr||!1},settings:function(){var b;if(b=e.beforeSend.call(x,e))b.success!==
c&&(D.debug("Legacy success callback detected",b),D.error(v.legacyParameters,b.success),b.onSuccess=b.success),b.failure!==c&&(D.debug("Legacy failure callback detected",b),D.error(v.legacyParameters,b.failure),b.onFailure=b.failure),b.complete!==c&&(D.debug("Legacy complete callback detected",b),D.error(v.legacyParameters,b.complete),b.onComplete=b.complete);b===c&&D.error(v.noReturnedValue);return!1===b?b:b!==c?a.extend(!0,{},b):a.extend(!0,{},e)},urlEncodedValue:function(a){var c=b.decodeURIComponent(a),
d=b.encodeURIComponent(a);if(c!==a)return D.debug("URL value is already encoded, avoiding double encoding",a),a;D.verbose("Encoding value using encodeURIComponent",a,d);return d},defaultData:function(){var b={};a.isWindow(L)||(D.is.input()?b.value=F.val():D.is.form()||(b.text=F.text()));return b},event:function(){return a.isWindow(L)||"now"==e.on?(D.debug("API called without element, no events attached"),!1):"auto"==e.on?F.is("input")?L.oninput!==c?"input":L.onpropertychange!==c?"propertychange":
"keyup":F.is("form")?"submit":"click":e.on},templatedURL:function(a){a=a||F.data(w.action)||e.action||!1;if(I=F.data(w.url)||e.url||!1)return D.debug("Using specified url",I),I;if(a){D.debug("Looking up url for action",a,e.api);if(e.api[a]===c&&!D.is.mocked()){D.error(v.missingAction,e.action,e.api);return}I=e.api[a]}else D.is.form()&&(I=F.attr("action")||B.attr("action")||!1,D.debug("No url or action specified, defaulting to form action",I));return I}},abort:function(){var a=D.get.xhr();a&&"resolved"!==
a.state()&&(D.debug("Cancelling API request"),a.abort())},reset:function(){D.remove.error();D.remove.loading()},setting:function(b,d){D.debug("Changing setting",b,d);if(a.isPlainObject(b))a.extend(!0,e,b);else if(d!==c)a.isPlainObject(e[b])?a.extend(!0,e[b],d):e[b]=d;else return e[b]},internal:function(b,d){if(a.isPlainObject(b))a.extend(!0,D,b);else if(d!==c)D[b]=d;else return D[b]},debug:function(){!e.silent&&e.debug&&(e.performance?D.performance.log(arguments):(D.debug=Function.prototype.bind.call(console.info,
console,e.name+":"),D.debug.apply(console,arguments)))},verbose:function(){!e.silent&&e.verbose&&e.debug&&(e.performance?D.performance.log(arguments):(D.verbose=Function.prototype.bind.call(console.info,console,e.name+":"),D.verbose.apply(console,arguments)))},error:function(){e.silent||(D.error=Function.prototype.bind.call(console.error,console,e.name+":"),D.error.apply(console,arguments))},performance:{log:function(a){var b,c;e.performance&&(b=(new Date).getTime(),c=h||b,c=b-c,h=b,g.push({Name:a[0],
Arguments:[].slice.call(a,1)||"","Execution Time":c}));clearTimeout(D.performance.timer);D.performance.timer=setTimeout(D.performance.display,500)},display:function(){var b=e.name+":",d=0;h=!1;clearTimeout(D.performance.timer);a.each(g,function(a,b){d+=b["Execution Time"]});b+=" "+d+"ms";n&&(b+=" '"+n+"'");(console.group!==c||console.table!==c)&&0<g.length&&(console.groupCollapsed(b),console.table?console.table(g):a.each(g,function(a,b){console.log(b.Name+": "+b["Execution Time"]+"ms")}),console.groupEnd());
g=[]}},invoke:function(b,d,e){var f=S,g,h,l;d=d||r;e=L||e;"string"==typeof b&&f!==c&&(b=b.split(/[\. ]/),g=b.length-1,a.each(b,function(d,e){var l=d!=g?e+b[d+1].charAt(0).toUpperCase()+b[d+1].slice(1):b;if(a.isPlainObject(f[l])&&d!=g)f=f[l];else{if(f[l]!==c)return h=f[l],!1;if(a.isPlainObject(f[e])&&d!=g)f=f[e];else return f[e]!==c?h=f[e]:D.error(v.method,b),!1}}));a.isFunction(h)?l=h.apply(e,d):h!==c&&(l=h);a.isArray(t)?t.push(l):t!==c?t=[t,l]:l!==c&&(t=l);return h}};p?(S===c&&D.initialize(),D.invoke(m)):
(S!==c&&S.invoke("destroy"),D.initialize())});return t!==c?t:this};a.api.settings={name:"API",namespace:"api",debug:!1,verbose:!1,performance:!0,api:{},cache:!0,interruptRequests:!0,on:"auto",stateContext:!1,loadingDuration:0,hideError:"auto",errorDuration:2E3,encodeParameters:!0,action:!1,url:!1,base:"",urlData:{},defaultData:!0,serializeForm:!1,throttle:0,throttleFirstRequest:!0,method:"get",data:{},dataType:"json",mockResponse:!1,mockResponseAsync:!1,response:!1,responseAsync:!1,beforeSend:function(a){return a},
beforeXHR:function(a){},onRequest:function(a,b){},onResponse:!1,onSuccess:function(a,b){},onComplete:function(a,b){},onFailure:function(a,b){},onError:function(a,b){},onAbort:function(a,b){},successTest:!1,error:{beforeSend:"The before send function has aborted the request",error:"There was an error with your request",exitConditions:"API Request Aborted. Exit conditions met",JSONParse:"JSON could not be parsed during error handling",legacyParameters:"You are using legacy API success callback names",
method:"The method you called is not defined",missingAction:"API action used but no url was defined",missingSerialize:"jquery-serialize-object is required to add form data to an existing data object",missingURL:"No URL specified for api event",noReturnedValue:"The beforeSend callback must return a settings object, beforeSend ignored.",noStorage:"Caching responses locally requires session storage",parseError:"There was an error parsing your request",requiredParameter:"Missing a required URL parameter: ",
statusMessage:"Server gave an error: ",timeout:"Your request timed out"},regExp:{required:/\{\$*[A-z0-9]+\}/g,optional:/\{\/\$*[A-z0-9]+\}/g},className:{loading:"loading",error:"error"},selector:{disabled:".disabled",form:"form"},metadata:{action:"action",url:"url"}}})(jQuery,window,document);
(function(a,b,e,c){b="undefined"!=typeof b&&b.Math==Math?b:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();a.fn.state=function(b){var e=a(this),n=e.selector||"",h=(new Date).getTime(),g=[],m=arguments[0],p="string"==typeof m,r=[].slice.call(arguments,1),t;e.each(function(){var l=a.isPlainObject(b)?a.extend(!0,{},a.fn.state.settings,b):a.extend({},a.fn.state.settings),q=l.error,w=l.metadata,u=l.className,v=l.namespace,E=l.states,A=l.text,K="."+v,F=v+"-module",z=a(this),B=this,
H=z.data(F),G;G={initialize:function(){G.verbose("Initializing module");l.automatic&&G.add.defaults();if(l.context&&""!==n)a(l.context).on(n,"mouseenter"+K,G.change.text).on(n,"mouseleave"+K,G.reset.text).on(n,"click"+K,G.toggle.state);else z.on("mouseenter"+K,G.change.text).on("mouseleave"+K,G.reset.text).on("click"+K,G.toggle.state);G.instantiate()},instantiate:function(){G.verbose("Storing instance of module",G);H=G;z.data(F,G)},destroy:function(){G.verbose("Destroying previous module",H);z.off(K).removeData(F)},
refresh:function(){G.verbose("Refreshing selector cache");z=a(B)},add:{defaults:function(){var e=b&&a.isPlainObject(b.states)?b.states:{};a.each(l.defaults,function(b,d){G.is[b]!==c&&G.is[b]()&&(G.verbose("Adding default states",b,B),a.extend(l.states,d,e))})}},is:{active:function(){return z.hasClass(u.active)},loading:function(){return z.hasClass(u.loading)},inactive:function(){return!z.hasClass(u.active)},state:function(a){return u[a]===c?!1:z.hasClass(u[a])},enabled:function(){return!z.is(l.filter.active)},
disabled:function(){return z.is(l.filter.active)},textEnabled:function(){return!z.is(l.filter.text)},button:function(){return z.is(".button:not(a, .submit)")},input:function(){return z.is("input")},progress:function(){return z.is(".ui.progress")}},allow:function(a){G.debug("Now allowing state",a);E[a]=!0},disallow:function(a){G.debug("No longer allowing",a);E[a]=!1},allows:function(a){return E[a]||!1},enable:function(){z.removeClass(u.disabled)},disable:function(){z.addClass(u.disabled)},setState:function(a){G.allows(a)&&
z.addClass(u[a])},removeState:function(a){G.allows(a)&&z.removeClass(u[a])},toggle:{state:function(){var b,d;if(G.allows("active")&&G.is.enabled()){G.refresh();if(a.fn.api!==c)if(b=z.api("get request"),d=z.api("was cancelled"))G.debug("API Request cancelled by beforesend"),l.activateTest=function(){return!1},l.deactivateTest=function(){return!1};else if(b){G.listenTo(b);return}G.change.state()}}},listenTo:function(b){G.debug("API request detected, waiting for state signal",b);b&&(A.loading&&G.update.text(A.loading),
a.when(b).then(function(){"resolved"==b.state()?(G.debug("API request succeeded"),l.activateTest=function(){return!0},l.deactivateTest=function(){return!0}):(G.debug("API request failed"),l.activateTest=function(){return!1},l.deactivateTest=function(){return!1});G.change.state()}))},change:{state:function(){G.debug("Determining state change direction");G.is.inactive()?G.activate():G.deactivate();l.sync&&G.sync();l.onChange.call(B)},text:function(){G.is.textEnabled()&&(G.is.disabled()?(G.verbose("Changing text to disabled text",
A.hover),G.update.text(A.disabled)):G.is.active()?A.hover?(G.verbose("Changing text to hover text",A.hover),G.update.text(A.hover)):A.deactivate&&(G.verbose("Changing text to deactivating text",A.deactivate),G.update.text(A.deactivate)):A.hover?(G.verbose("Changing text to hover text",A.hover),G.update.text(A.hover)):A.activate&&(G.verbose("Changing text to activating text",A.activate),G.update.text(A.activate)))}},activate:function(){l.activateTest.call(B)&&(G.debug("Setting state to active"),z.addClass(u.active),
G.update.text(A.active),l.onActivate.call(B))},deactivate:function(){l.deactivateTest.call(B)&&(G.debug("Setting state to inactive"),z.removeClass(u.active),G.update.text(A.inactive),l.onDeactivate.call(B))},sync:function(){G.verbose("Syncing other buttons to current state");G.is.active()?e.not(z).state("activate"):e.not(z).state("deactivate")},get:{text:function(){return l.selector.text?z.find(l.selector.text).text():z.html()},textFor:function(a){return A[a]||!1}},flash:{text:function(a,b,c){var d=
G.get.text();G.debug("Flashing text message",a,b);a=a||l.text.flash;b=b||l.flashDuration;c=c||function(){};G.update.text(a);setTimeout(function(){G.update.text(d);c.call(B)},b)}},reset:{text:function(){var a=A.active||z.data(w.storedText),b=A.inactive||z.data(w.storedText);G.is.textEnabled()&&(G.is.active()&&a?(G.verbose("Resetting active text",a),G.update.text(a)):b&&(G.verbose("Resetting inactive text",a),G.update.text(b)))}},update:{text:function(a){var b=G.get.text();a&&a!==b?(G.debug("Updating text",
a),l.selector.text?z.data(w.storedText,a).find(l.selector.text).text(a):z.data(w.storedText,a).html(a)):G.debug("Text is already set, ignoring update",a)}},setting:function(b,d){G.debug("Changing setting",b,d);if(a.isPlainObject(b))a.extend(!0,l,b);else if(d!==c)a.isPlainObject(l[b])?a.extend(!0,l[b],d):l[b]=d;else return l[b]},internal:function(b,d){if(a.isPlainObject(b))a.extend(!0,G,b);else if(d!==c)G[b]=d;else return G[b]},debug:function(){!l.silent&&l.debug&&(l.performance?G.performance.log(arguments):
(G.debug=Function.prototype.bind.call(console.info,console,l.name+":"),G.debug.apply(console,arguments)))},verbose:function(){!l.silent&&l.verbose&&l.debug&&(l.performance?G.performance.log(arguments):(G.verbose=Function.prototype.bind.call(console.info,console,l.name+":"),G.verbose.apply(console,arguments)))},error:function(){l.silent||(G.error=Function.prototype.bind.call(console.error,console,l.name+":"),G.error.apply(console,arguments))},performance:{log:function(a){var b,c;l.performance&&(b=
(new Date).getTime(),c=h||b,c=b-c,h=b,g.push({Name:a[0],Arguments:[].slice.call(a,1)||"",Element:B,"Execution Time":c}));clearTimeout(G.performance.timer);G.performance.timer=setTimeout(G.performance.display,500)},display:function(){var b=l.name+":",d=0;h=!1;clearTimeout(G.performance.timer);a.each(g,function(a,b){d+=b["Execution Time"]});b+=" "+d+"ms";n&&(b+=" '"+n+"'");(console.group!==c||console.table!==c)&&0<g.length&&(console.groupCollapsed(b),console.table?console.table(g):a.each(g,function(a,
b){console.log(b.Name+": "+b["Execution Time"]+"ms")}),console.groupEnd());g=[]}},invoke:function(b,d,e){var f=H,g,h,l;d=d||r;e=B||e;"string"==typeof b&&f!==c&&(b=b.split(/[\. ]/),g=b.length-1,a.each(b,function(d,e){var l=d!=g?e+b[d+1].charAt(0).toUpperCase()+b[d+1].slice(1):b;if(a.isPlainObject(f[l])&&d!=g)f=f[l];else{if(f[l]!==c)return h=f[l],!1;if(a.isPlainObject(f[e])&&d!=g)f=f[e];else return f[e]!==c?h=f[e]:G.error(q.method,b),!1}}));a.isFunction(h)?l=h.apply(e,d):h!==c&&(l=h);a.isArray(t)?t.push(l):
t!==c?t=[t,l]:l!==c&&(t=l);return h}};p?(H===c&&G.initialize(),G.invoke(m)):(H!==c&&H.invoke("destroy"),G.initialize())});return t!==c?t:this};a.fn.state.settings={name:"State",debug:!1,verbose:!1,namespace:"state",performance:!0,onActivate:function(){},onDeactivate:function(){},onChange:function(){},activateTest:function(){return!0},deactivateTest:function(){return!0},automatic:!0,sync:!1,flashDuration:1E3,filter:{text:".loading, .disabled",active:".disabled"},context:!1,error:{beforeSend:"The before send function has cancelled state change",
method:"The method you called is not defined."},metadata:{promise:"promise",storedText:"stored-text"},className:{active:"active",disabled:"disabled",error:"error",loading:"loading",success:"success",warning:"warning"},selector:{text:!1},defaults:{input:{disabled:!0,loading:!0,active:!0},button:{disabled:!0,loading:!0,active:!0},progress:{active:!0,success:!0,warning:!0,error:!0}},states:{active:!0,disabled:!0,error:!0,loading:!0,success:!0,warning:!0},text:{disabled:!1,flash:!1,hover:!1,active:!1,
inactive:!1,activate:!1,deactivate:!1}}})(jQuery,window,document);
(function(a,b,e,c){b="undefined"!=typeof b&&b.Math==Math?b:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();a.fn.visibility=function(d){var f=a(this),n=f.selector||"",h=(new Date).getTime(),g=[],m=arguments[0],p="string"==typeof m,r=[].slice.call(arguments,1),t,l=f.length,q=0;f.each(function(){var f=a.isPlainObject(d)?a.extend(!0,{},a.fn.visibility.settings,d):a.extend({},a.fn.visibility.settings),u=f.className,v=f.namespace,E=f.error,A=f.metadata,K="."+v,F="module-"+v,z=a(b),
B=a(this),H=a(f.context),G,I=B.data(F),N=b.requestAnimationFrame||b.mozRequestAnimationFrame||b.webkitRequestAnimationFrame||b.msRequestAnimationFrame||function(a){setTimeout(a,0)},L=this,x=!1,S,D,J;J={initialize:function(){J.debug("Initializing",f);J.setup.cache();J.should.trackChanges()&&("image"==f.type&&J.setup.image(),"fixed"==f.type&&J.setup.fixed(),f.observeChanges&&J.observeChanges(),J.bind.events());J.save.position();J.is.visible()||J.error(E.visible,B);f.initialCheck&&J.checkVisibility();
J.instantiate()},instantiate:function(){J.debug("Storing instance",J);B.data(F,J);I=J},destroy:function(){J.verbose("Destroying previous module");D&&D.disconnect();S&&S.disconnect();z.off("load"+K,J.event.load).off("resize"+K,J.event.resize);H.off("scroll"+K,J.event.scroll).off("scrollchange"+K,J.event.scrollchange);"fixed"==f.type&&(J.resetFixed(),J.remove.placeholder());B.off(K).removeData(F)},observeChanges:function(){"MutationObserver"in b&&(S=new MutationObserver(J.event.contextChanged),D=new MutationObserver(J.event.changed),
S.observe(e,{childList:!0,subtree:!0}),D.observe(L,{childList:!0,subtree:!0}),J.debug("Setting up mutation observer",D))},bind:{events:function(){J.verbose("Binding visibility events to scroll and resize");if(f.refreshOnLoad)z.on("load"+K,J.event.load);z.on("resize"+K,J.event.resize);H.off("scroll"+K).on("scroll"+K,J.event.scroll).on("scrollchange"+K,J.event.scrollchange)}},event:{changed:function(a){J.verbose("DOM tree modified, updating visibility calculations");J.timer=setTimeout(function(){J.verbose("DOM tree modified, updating sticky menu");
J.refresh()},100)},contextChanged:function(b){[].forEach.call(b,function(b){b.removedNodes&&[].forEach.call(b.removedNodes,function(b){if(b==L||0<a(b).find(L).length)J.debug("Element removed from DOM, tearing down events"),J.destroy()})})},resize:function(){J.debug("Window resized");f.refreshOnResize&&N(J.refresh)},load:function(){J.debug("Page finished loading");N(J.refresh)},scroll:function(){f.throttle?(clearTimeout(J.timer),J.timer=setTimeout(function(){H.triggerHandler("scrollchange"+K,[H.scrollTop()])},
f.throttle)):N(function(){H.triggerHandler("scrollchange"+K,[H.scrollTop()])})},scrollchange:function(a,b){J.checkVisibility(b)}},precache:function(b,c){b instanceof Array||(b=[b]);for(var d=b.length,f=0,g=[],h=e.createElement("img"),l=function(){f++;f>=b.length&&a.isFunction(c)&&c()};d--;)h=e.createElement("img"),h.onload=l,h.onerror=l,h.src=b[d],g.push(h)},enableCallbacks:function(){J.debug("Allowing callbacks to occur");x=!1},disableCallbacks:function(){J.debug("Disabling all callbacks temporarily");
x=!0},should:{trackChanges:function(){if(p)return J.debug("One time query, no need to bind events"),!1;J.debug("Callbacks being attached");return!0}},setup:{cache:function(){J.cache={occurred:{},screen:{},element:{}}},image:function(){var a=B.data(A.src);a&&(J.verbose("Lazy loading image",a),f.once=!0,f.observeChanges=!1,f.onOnScreen=function(){J.debug("Image on screen",L);J.precache(a,function(){J.set.image(a,function(){q++;q==l&&f.onAllLoaded.call(this);f.onLoad.call(this)})})})},fixed:function(){J.debug("Setting up fixed");
f.once=!1;f.observeChanges=!1;f.initialCheck=!0;f.refreshOnLoad=!0;d.transition||(f.transition=!1);J.create.placeholder();J.debug("Added placeholder",G);f.onTopPassed=function(){J.debug("Element passed, adding fixed position",B);J.show.placeholder();J.set.fixed();f.transition&&a.fn.transition!==c&&B.transition(f.transition,f.duration)};f.onTopPassedReverse=function(){J.debug("Element returned to position, removing fixed",B);J.hide.placeholder();J.remove.fixed()}}},create:{placeholder:function(){J.verbose("Creating fixed position placeholder");
G=B.clone(!1).css("display","none").addClass(u.placeholder).insertAfter(B)}},show:{placeholder:function(){J.verbose("Showing placeholder");G.css("display","block").css("visibility","hidden")}},hide:{placeholder:function(){J.verbose("Hiding placeholder");G.css("display","none").css("visibility","")}},set:{fixed:function(){J.verbose("Setting element to fixed position");B.addClass(u.fixed).css({position:"fixed",top:f.offset+"px",left:"auto",zIndex:f.zIndex});f.onFixed.call(L)},image:function(b,d){B.attr("src",
b);f.transition?a.fn.transition!==c?B.transition(f.transition,f.duration,d):B.fadeIn(f.duration,d):B.show()}},is:{onScreen:function(){return J.get.elementCalculations().onScreen},offScreen:function(){return J.get.elementCalculations().offScreen},visible:function(){return J.cache&&J.cache.element?!(0===J.cache.element.width&&0===J.cache.element.offset.top):!1}},refresh:function(){J.debug("Refreshing constants (width/height)");"fixed"==f.type&&J.resetFixed();J.reset();J.save.position();f.checkOnRefresh&&
J.checkVisibility();f.onRefresh.call(L)},resetFixed:function(){J.remove.fixed();J.remove.occurred()},reset:function(){J.verbose("Resetting all cached values");a.isPlainObject(J.cache)&&(J.cache.screen={},J.cache.element={})},checkVisibility:function(a){J.verbose("Checking visibility of element",J.cache.element);!x&&J.is.visible()&&(J.save.scroll(a),J.save.calculations(),J.passed(),J.passingReverse(),J.topVisibleReverse(),J.bottomVisibleReverse(),J.topPassedReverse(),J.bottomPassedReverse(),J.onScreen(),
J.offScreen(),J.passing(),J.topVisible(),J.bottomVisible(),J.topPassed(),J.bottomPassed(),f.onUpdate&&f.onUpdate.call(L,J.get.elementCalculations()))},passed:function(b,d){var e=J.get.elementCalculations();if(b&&d)f.onPassed[b]=d;else{if(b!==c)return J.get.pixelsPassed(b)>e.pixelsPassed;e.passing&&a.each(f.onPassed,function(a,b){e.bottomVisible||e.pixelsPassed>J.get.pixelsPassed(a)?J.execute(b,a):f.once||J.remove.occurred(b)})}},onScreen:function(a){var b=J.get.elementCalculations(),d=a||f.onOnScreen;
a&&(J.debug("Adding callback for onScreen",a),f.onOnScreen=a);b.onScreen?J.execute(d,"onScreen"):f.once||J.remove.occurred("onScreen");if(a!==c)return b.onOnScreen},offScreen:function(a){var b=J.get.elementCalculations(),d=a||f.onOffScreen;a&&(J.debug("Adding callback for offScreen",a),f.onOffScreen=a);b.offScreen?J.execute(d,"offScreen"):f.once||J.remove.occurred("offScreen");if(a!==c)return b.onOffScreen},passing:function(a){var b=J.get.elementCalculations(),d=a||f.onPassing;a&&(J.debug("Adding callback for passing",
a),f.onPassing=a);b.passing?J.execute(d,"passing"):f.once||J.remove.occurred("passing");if(a!==c)return b.passing},topVisible:function(a){var b=J.get.elementCalculations(),d=a||f.onTopVisible;a&&(J.debug("Adding callback for top visible",a),f.onTopVisible=a);b.topVisible?J.execute(d,"topVisible"):f.once||J.remove.occurred("topVisible");if(a===c)return b.topVisible},bottomVisible:function(a){var b=J.get.elementCalculations(),d=a||f.onBottomVisible;a&&(J.debug("Adding callback for bottom visible",a),
f.onBottomVisible=a);b.bottomVisible?J.execute(d,"bottomVisible"):f.once||J.remove.occurred("bottomVisible");if(a===c)return b.bottomVisible},topPassed:function(a){var b=J.get.elementCalculations(),d=a||f.onTopPassed;a&&(J.debug("Adding callback for top passed",a),f.onTopPassed=a);b.topPassed?J.execute(d,"topPassed"):f.once||J.remove.occurred("topPassed");if(a===c)return b.topPassed},bottomPassed:function(a){var b=J.get.elementCalculations(),d=a||f.onBottomPassed;a&&(J.debug("Adding callback for bottom passed",
a),f.onBottomPassed=a);b.bottomPassed?J.execute(d,"bottomPassed"):f.once||J.remove.occurred("bottomPassed");if(a===c)return b.bottomPassed},passingReverse:function(a){var b=J.get.elementCalculations(),d=a||f.onPassingReverse;a&&(J.debug("Adding callback for passing reverse",a),f.onPassingReverse=a);b.passing?f.once||J.remove.occurred("passingReverse"):J.get.occurred("passing")&&J.execute(d,"passingReverse");if(a!==c)return!b.passing},topVisibleReverse:function(a){var b=J.get.elementCalculations(),
d=a||f.onTopVisibleReverse;a&&(J.debug("Adding callback for top visible reverse",a),f.onTopVisibleReverse=a);b.topVisible?f.once||J.remove.occurred("topVisibleReverse"):J.get.occurred("topVisible")&&J.execute(d,"topVisibleReverse");if(a===c)return!b.topVisible},bottomVisibleReverse:function(a){var b=J.get.elementCalculations(),d=a||f.onBottomVisibleReverse;a&&(J.debug("Adding callback for bottom visible reverse",a),f.onBottomVisibleReverse=a);b.bottomVisible?f.once||J.remove.occurred("bottomVisibleReverse"):
J.get.occurred("bottomVisible")&&J.execute(d,"bottomVisibleReverse");if(a===c)return!b.bottomVisible},topPassedReverse:function(a){var b=J.get.elementCalculations(),d=a||f.onTopPassedReverse;a&&(J.debug("Adding callback for top passed reverse",a),f.onTopPassedReverse=a);b.topPassed?f.once||J.remove.occurred("topPassedReverse"):J.get.occurred("topPassed")&&J.execute(d,"topPassedReverse");if(a===c)return!b.onTopPassed},bottomPassedReverse:function(a){var b=J.get.elementCalculations(),d=a||f.onBottomPassedReverse;
a&&(J.debug("Adding callback for bottom passed reverse",a),f.onBottomPassedReverse=a);b.bottomPassed?f.once||J.remove.occurred("bottomPassedReverse"):J.get.occurred("bottomPassed")&&J.execute(d,"bottomPassedReverse");if(a===c)return!b.bottomPassed},execute:function(a,b){var c=J.get.elementCalculations(),d=J.get.screenCalculations();if(a=a||!1)f.continuous?(J.debug("Callback being called continuously",b,c),a.call(L,c,d)):J.get.occurred(b)||(J.debug("Conditions met",b,c),a.call(L,c,d));J.save.occurred(b)},
remove:{fixed:function(){J.debug("Removing fixed position");B.removeClass(u.fixed).css({position:"",top:"",left:"",zIndex:""});f.onUnfixed.call(L)},placeholder:function(){J.debug("Removing placeholder content");G&&G.remove()},occurred:function(a){if(a){var b=J.cache.occurred;b[a]!==c&&!0===b[a]&&(J.debug("Callback can now be called again",a),J.cache.occurred[a]=!1)}else J.cache.occurred={}}},save:{calculations:function(){J.verbose("Saving all calculations necessary to determine positioning");J.save.direction();
J.save.screenCalculations();J.save.elementCalculations()},occurred:function(a){!a||J.cache.occurred[a]!==c&&!0===J.cache.occurred[a]||(J.verbose("Saving callback occurred",a),J.cache.occurred[a]=!0)},scroll:function(a){a=a+f.offset||H.scrollTop()+f.offset;J.cache.scroll=a},direction:function(){var a=J.get.scroll(),b=J.get.lastScroll();J.cache.direction=a>b&&b?"down":a<b&&b?"up":"static";return J.cache.direction},elementPosition:function(){var a=J.cache.element,b=J.get.screenSize();J.verbose("Saving element position");
a.fits=a.height<b.height;a.offset=B.offset();a.width=B.outerWidth();a.height=B.outerHeight();return J.cache.element=a},elementCalculations:function(){var a=J.get.screenCalculations(),b=J.get.elementPosition();f.includeMargin?(b.margin={},b.margin.top=parseInt(B.css("margin-top"),10),b.margin.bottom=parseInt(B.css("margin-bottom"),10),b.top=b.offset.top-b.margin.top,b.bottom=b.offset.top+b.height+b.margin.bottom):(b.top=b.offset.top,b.bottom=b.offset.top+b.height);b.topVisible=a.bottom>=b.top;b.topPassed=
a.top>=b.top;b.bottomVisible=a.bottom>=b.bottom;b.bottomPassed=a.top>=b.bottom;b.pixelsPassed=0;b.percentagePassed=0;b.onScreen=b.topVisible&&!b.bottomPassed;b.passing=b.topPassed&&!b.bottomPassed;b.offScreen=!b.onScreen;b.passing&&(b.pixelsPassed=a.top-b.top,b.percentagePassed=(a.top-b.top)/b.height);J.cache.element=b;J.verbose("Updated element calculations",b);return b},screenCalculations:function(){var a=J.get.scroll();J.save.direction();J.cache.screen.top=a;J.cache.screen.bottom=a+J.cache.screen.height;
return J.cache.screen},screenSize:function(){J.verbose("Saving window position");J.cache.screen={height:H.height()}},position:function(){J.save.screenSize();J.save.elementPosition()}},get:{pixelsPassed:function(a){var b=J.get.elementCalculations();return-1<a.search("%")?b.height*(parseInt(a,10)/100):parseInt(a,10)},occurred:function(a){return J.cache.occurred!==c?J.cache.occurred[a]||!1:!1},direction:function(){J.cache.direction===c&&J.save.direction();return J.cache.direction},elementPosition:function(){J.cache.element===
c&&J.save.elementPosition();return J.cache.element},elementCalculations:function(){J.cache.element===c&&J.save.elementCalculations();return J.cache.element},screenCalculations:function(){J.cache.screen===c&&J.save.screenCalculations();return J.cache.screen},screenSize:function(){J.cache.screen===c&&J.save.screenSize();return J.cache.screen},scroll:function(){J.cache.scroll===c&&J.save.scroll();return J.cache.scroll},lastScroll:function(){return J.cache.screen===c?(J.debug("First scroll event, no last scroll could be found"),
!1):J.cache.screen.top}},setting:function(b,d){if(a.isPlainObject(b))a.extend(!0,f,b);else if(d!==c)f[b]=d;else return f[b]},internal:function(b,d){if(a.isPlainObject(b))a.extend(!0,J,b);else if(d!==c)J[b]=d;else return J[b]},debug:function(){!f.silent&&f.debug&&(f.performance?J.performance.log(arguments):(J.debug=Function.prototype.bind.call(console.info,console,f.name+":"),J.debug.apply(console,arguments)))},verbose:function(){!f.silent&&f.verbose&&f.debug&&(f.performance?J.performance.log(arguments):
(J.verbose=Function.prototype.bind.call(console.info,console,f.name+":"),J.verbose.apply(console,arguments)))},error:function(){f.silent||(J.error=Function.prototype.bind.call(console.error,console,f.name+":"),J.error.apply(console,arguments))},performance:{log:function(a){var b,c;f.performance&&(b=(new Date).getTime(),c=h||b,c=b-c,h=b,g.push({Name:a[0],Arguments:[].slice.call(a,1)||"",Element:L,"Execution Time":c}));clearTimeout(J.performance.timer);J.performance.timer=setTimeout(J.performance.display,
500)},display:function(){var b=f.name+":",d=0;h=!1;clearTimeout(J.performance.timer);a.each(g,function(a,b){d+=b["Execution Time"]});b+=" "+d+"ms";n&&(b+=" '"+n+"'");(console.group!==c||console.table!==c)&&0<g.length&&(console.groupCollapsed(b),console.table?console.table(g):a.each(g,function(a,b){console.log(b.Name+": "+b["Execution Time"]+"ms")}),console.groupEnd());g=[]}},invoke:function(b,d,e){var f=I,g,h,l;d=d||r;e=L||e;"string"==typeof b&&f!==c&&(b=b.split(/[\. ]/),g=b.length-1,a.each(b,function(d,
e){var l=d!=g?e+b[d+1].charAt(0).toUpperCase()+b[d+1].slice(1):b;if(a.isPlainObject(f[l])&&d!=g)f=f[l];else{if(f[l]!==c)return h=f[l],!1;if(a.isPlainObject(f[e])&&d!=g)f=f[e];else return f[e]!==c?h=f[e]:J.error(E.method,b),!1}}));a.isFunction(h)?l=h.apply(e,d):h!==c&&(l=h);a.isArray(t)?t.push(l):t!==c?t=[t,l]:l!==c&&(t=l);return h}};p?(I===c&&J.initialize(),I.save.scroll(),I.save.calculations(),J.invoke(m)):(I!==c&&I.invoke("destroy"),J.initialize())});return t!==c?t:this};a.fn.visibility.settings=
{name:"Visibility",namespace:"visibility",debug:!1,verbose:!1,performance:!0,observeChanges:!0,initialCheck:!0,refreshOnLoad:!0,refreshOnResize:!0,checkOnRefresh:!0,once:!0,continuous:!1,offset:0,includeMargin:!1,context:b,throttle:!1,type:!1,zIndex:"10",transition:"fade in",duration:1E3,onPassed:{},onOnScreen:!1,onOffScreen:!1,onPassing:!1,onTopVisible:!1,onBottomVisible:!1,onTopPassed:!1,onBottomPassed:!1,onPassingReverse:!1,onTopVisibleReverse:!1,onBottomVisibleReverse:!1,onTopPassedReverse:!1,
onBottomPassedReverse:!1,onLoad:function(){},onAllLoaded:function(){},onFixed:function(){},onUnfixed:function(){},onUpdate:!1,onRefresh:function(){},metadata:{src:"src"},className:{fixed:"fixed",placeholder:"placeholder"},error:{method:"The method you called is not defined.",visible:"Element is hidden, you must call refresh after element becomes visible"}}})(jQuery,window,document);
(function(a,b,e,c){a.fn.range=function(d){var f=a(this),n=arguments[0],h="string"==typeof n,g=[].slice.call(arguments,1);f.each(function(){var f=a.isPlainObject(d)?a.extend(!0,{},a.fn.range.settings,d):a.extend({},a.fn.range.settings),p=f.step,r=f.values,t="module-"+f.namespace,l=a(this),q=this,w=l.data(t),u,v,E,A,K,F,z,B,H,G;G={initialize:function(){G.sanitize();G.instantiate();a(b).resize(function(){G.instantiate()})},instantiate:function(){w=G;l.data(t,G);f.values?(a(q).html("<div class='inner'><div class='track'></div><div class='track-fill'></div><div class='thumb'></div><div class='thumb'></div></div>"),
u=a(q).children(".inner")[0],v=a(q).find(".thumb")[0],E=a(q).find(".thumb")[1],B=a(q).find(".track-fill")[0],G.determinePrecision(),F=f.values[0],z=f.values[1],f.min=f.values[0],f.max=f.values[1],G.setValuePosition(f.values[0],v),G.setValuePosition(f.values[1],E),a(v).on("mousedown",function(a,b){G.rangeMousedown(a,!1,b,v)}),a(v).on("touchstart",function(a,b){G.rangeMousedown(a,!0,b,v)}),a(E).on("mousedown",function(a,b){G.rangeMousedown(a,!1,b,E)}),a(E).on("touchstart",function(a,b){G.rangeMousedown(a,
!0,b,E)})):(a(q).html("<div class='inner'><div class='track'></div><div class='track-fill'></div><div class='thumb'></div></div>"),v=a(q).find(".thumb")[0],u=a(q).children(".inner")[0],B=a(q).find(".track-fill")[0],G.determinePrecision(),G.setValuePosition(f.start,v),a(q).find(".track, .thumb, .inner").on("mousedown",function(b){b.stopImmediatePropagation();b.preventDefault();a(this).closest(".range").trigger("mousedown",b)}),a(q).find(".track, .thumb, .inner").on("touchstart",function(b){b.stopImmediatePropagation();
b.preventDefault();a(this).closest(".range").trigger("touchstart",b)}),a(q).on("mousedown",function(a,b){G.rangeMousedown(a,!1,b,v)}),a(q).on("touchstart",function(a,b){G.rangeMousedown(a,!0,b,v)}))},sanitize:function(){"number"!=typeof f.min&&(f.min=parseInt(f.min)||0);"number"!=typeof f.max&&(f.max=parseInt(f.max)||!1);"number"!=typeof f.start&&(f.start=parseInt(f.start)||0);!r||"number"==typeof f.values[0]&&"number"==typeof f.values[1]||(f.values[0]=parseInt(f.values[0])||0,f.values[1]=parseInt(f.values[1])||
!1)},determinePrecision:function(){var a=String(f.step).split(".");H=Math.pow(10,2==a.length?a[1].length:0)},determineValue:function(a,b,c){a=Math.round((c-a)/(b-a)*(f.max-f.min)/p)*p;a=Math.round(a*H)/H;return a+f.min},determinePosition:function(b){return Math.round((b-f.min)/(f.max-f.min)*a(u).width())+a(B).position().left-10},setValue:function(b){f.input&&a(f.input).val(b);if(f.onChange&&f.values)f.onChange(F,z);else if(f.onChange)f.onChange(b)},getValue:function(a){f.values?a([F,z]):a(F)},setPosition:function(b,
c){f.values?(c===E?K=b:A=b,a(c).css({left:String(b)+"px"}),a(B).css({left:String(A+10)+"px",width:String(K+10-A)+"px"})):(a(c).css({left:String(b)+"px"}),a(B).css({width:String(b+10)+"px"}))},rangeMousedown:function(b,c,d,g){if(!a(q).hasClass("disabled")){b.preventDefault();var h=a(u).offset().left,l=h+a(u).width(),n;n=c?d.originalEvent.touches[0].pageX:"undefined"!=typeof b.pageX?b.pageX:d.pageX;var p=G.determineValue(h,l,n);n>=h&&n<=l&&(G.setPosition(n-h-10,g),g===E?z=p:F=p,G.setValue(p));var r=
function(a){a.preventDefault();n=c?a.originalEvent.touches[0].pageX:a.pageX;p=G.determineValue(h,l,n);if(n>=h&&n<=l)g===E?z=p:F=p,G.setPosition(n-h-10,g);else{var b;n<=h?(p=f.min,b=-10):n>=l&&(p=f.max,b=l-h-10);g===E?z=p:F=p;G.setPosition(b,g)}G.setValue(p)},t=function(b){c?(a(e).off("touchmove",r),a(e).off("touchend",t)):(a(e).off("mousemove",r),a(e).off("mouseup",t))};c?(a(e).on("touchmove",r),a(e).on("touchend",t)):(a(e).on("mousemove",r),a(e).on("mouseup",t))}},setValuePosition:function(a,b){var c=
G.determinePosition(a);G.setPosition(c,b);G.setValue(a,b)},invoke:function(a){switch(a){case "set value":0<g.length&&w.setValuePosition(g[0]);break;case "get value":0<g.length&&w.getValue(g[0])}}};h?(w===c&&G.initialize(),G.invoke(n)):G.initialize()});return this};a.fn.range.settings={name:"Range",namespace:"range",min:0,max:!1,step:1,start:0,values:!1,input:!1,onChange:function(a){}}})(jQuery,window,document);
(function(){function a(a,b){return a.set(b[0],b[1]),a}function b(a,b){return a.add(b),a}function e(a,b,c){switch(c.length){case 0:return a.call(b);case 1:return a.call(b,c[0]);case 2:return a.call(b,c[0],c[1]);case 3:return a.call(b,c[0],c[1],c[2])}return a.apply(b,c)}function c(a,b,c,d){for(var e=-1,f=null==a?0:a.length;++e<f;){var g=a[e];b(d,g,c(g),a)}return d}function d(a,b){for(var c=-1,d=null==a?0:a.length;++c<d&&!1!==b(a[c],c,a););return a}function f(a,b){for(var c=null==a?0:a.length;c--&&!1!==
b(a[c],c,a););return a}function n(a,b){for(var c=-1,d=null==a?0:a.length;++c<d;)if(!b(a[c],c,a))return!1;return!0}function h(a,b){for(var c=-1,d=null==a?0:a.length,e=0,f=[];++c<d;){var g=a[c];b(g,c,a)&&(f[e++]=g)}return f}function g(a,b){return!(null==a||!a.length)&&-1<v(a,b,0)}function m(a,b,c){for(var d=-1,e=null==a?0:a.length;++d<e;)if(c(b,a[d]))return!0;return!1}function p(a,b){for(var c=-1,d=null==a?0:a.length,e=Array(d);++c<d;)e[c]=b(a[c],c,a);return e}function r(a,b){for(var c=-1,d=b.length,
e=a.length;++c<d;)a[e+c]=b[c];return a}function t(a,b,c,d){var e=-1,f=null==a?0:a.length;for(d&&f&&(c=a[++e]);++e<f;)c=b(c,a[e],e,a);return c}function l(a,b,c,d){var e=null==a?0:a.length;for(d&&e&&(c=a[--e]);e--;)c=b(c,a[e],e,a);return c}function q(a,b){for(var c=-1,d=null==a?0:a.length;++c<d;)if(b(a[c],c,a))return!0;return!1}function w(a,b,c){var d;return c(a,function(a,c,e){if(b(a,c,e))return d=c,!1}),d}function u(a,b,c,d){var e=a.length;for(c+=d?1:-1;d?c--:++c<e;)if(b(a[c],c,a))return c;return-1}
function v(a,b,c){if(b===b)a:{--c;for(var d=a.length;++c<d;)if(a[c]===b){a=c;break a}a=-1}else a=u(a,A,c);return a}function E(a,b,c,d){--c;for(var e=a.length;++c<e;)if(d(a[c],b))return c;return-1}function A(a){return a!==a}function K(a,b){var c=null==a?0:a.length;return c?G(a,b)/c:ia}function F(a){return function(b){return null==b?O:b[a]}}function z(a){return function(b){return null==a?O:a[b]}}function B(a,b,c,d,e){return e(a,function(a,e,f){c=d?(d=!1,a):b(c,a,e,f)}),c}function H(a,b){var c=a.length;
for(a.sort(b);c--;)a[c]=a[c].c;return a}function G(a,b){for(var c,d=-1,e=a.length;++d<e;){var f=b(a[d]);f!==O&&(c=c===O?f:c+f)}return c}function I(a,b){for(var c=-1,d=Array(a);++c<a;)d[c]=b(c);return d}function N(a,b){return p(b,function(b){return[b,a[b]]})}function L(a){return function(b){return a(b)}}function x(a,b){return p(b,function(b){return a[b]})}function S(a,b){return a.has(b)}function D(a,b){for(var c=-1,d=a.length;++c<d&&-1<v(b,a[c],0););return c}function J(a,b){for(var c=a.length;c--&&
-1<v(b,a[c],0););return c}function V(a){return"\\"+oa[a]}function Y(a){var b=-1,c=Array(a.size);return a.forEach(function(a,d){c[++b]=[d,a]}),c}function W(a,b){return function(c){return a(b(c))}}function U(a,b){for(var c=-1,d=a.length,e=0,f=[];++c<d;){var g=a[c];g!==b&&"__lodash_placeholder__"!==g||(a[c]="__lodash_placeholder__",f[e++]=c)}return f}function M(a){var b=-1,c=Array(a.size);return a.forEach(function(a){c[++b]=a}),c}function Q(a){var b=-1,c=Array(a.size);return a.forEach(function(a){c[++b]=
[a,a]}),c}function X(a){if(na.test(a)){for(var b=Hb.lastIndex=0;Hb.test(a);)++b;a=b}else a=lb(a);return a}function ea(a){return na.test(a)?a.match(Hb)||[]:a.split("")}var O,aa=1/0,ia=NaN,ta=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],da=/\b__p\+='';/g,ha=/\b(__p\+=)''\+/g,Ba=/(__e\(.*?\)|\b__t\))\+'';/g,y=/&(?:amp|lt|gt|quot|#39);/g,za=/[&<>"']/g,pa=RegExp(y.source),C=RegExp(za.source),pb=/<%-([\s\S]+?)%>/g,Ra=
/<%([\s\S]+?)%>/g,Ka=/<%=([\s\S]+?)%>/g,Xa=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Kb=/^\w*$/,Fb=/^\./,hb=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ga=/[\\^$.*+?()[\]{}|]/g,Za=RegExp(Ga.source),ab=/^\s+|\s+$/g,Gb=/^\s+/,ib=/\s+$/,rb=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,gb=/\{\n\/\* \[wrapped with (.+)\] \*/,Wa=/,? & /,qa=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ha=/\\(\\)?/g,sb=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ta=/\w*$/,
Ya=/^[-+]0x[0-9a-f]+$/i,ra=/^0b[01]+$/i,qc=/^\[object .+?Constructor\]$/,tb=/^0o[0-7]+$/i,xb=/^(?:0|[1-9]\d*)$/,Ab=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,la=/($^)/,jb=/['\n\r\u2028\u2029\\]/g,Aa=RegExp("['\u2019]","g"),Lb=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g"),Hb=RegExp("\\ud83c[\\udffb-\\udfff](?=\\ud83c[\\udffb-\\udfff])|(?:[^\\ud800-\\udfff][\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]?|[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?)*",
"g"),Sa=RegExp("[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde]|$)|(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde](?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])|$)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?(?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['\u2019](?:d|ll|m|re|s|t|ve))?|[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?|\\d*(?:(?:1ST|2ND|3RD|(?![123])\\dTH)\\b)|\\d*(?:(?:1st|2nd|3rd|(?![123])\\dth)\\b)|\\d+|(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?)*",
"g"),na=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),Yb=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Bc="Array Buffer DataView Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Math Object Promise RegExp Set String Symbol TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap _ clearTimeout isFinite parseInt setTimeout".split(" "),ca={};ca["[object Float32Array]"]=ca["[object Float64Array]"]=
ca["[object Int8Array]"]=ca["[object Int16Array]"]=ca["[object Int32Array]"]=ca["[object Uint8Array]"]=ca["[object Uint8ClampedArray]"]=ca["[object Uint16Array]"]=ca["[object Uint32Array]"]=!0;ca["[object Arguments]"]=ca["[object Array]"]=ca["[object ArrayBuffer]"]=ca["[object Boolean]"]=ca["[object DataView]"]=ca["[object Date]"]=ca["[object Error]"]=ca["[object Function]"]=ca["[object Map]"]=ca["[object Number]"]=ca["[object Object]"]=ca["[object RegExp]"]=ca["[object Set]"]=ca["[object String]"]=
ca["[object WeakMap]"]=!1;var ba={};ba["[object Arguments]"]=ba["[object Array]"]=ba["[object ArrayBuffer]"]=ba["[object DataView]"]=ba["[object Boolean]"]=ba["[object Date]"]=ba["[object Float32Array]"]=ba["[object Float64Array]"]=ba["[object Int8Array]"]=ba["[object Int16Array]"]=ba["[object Int32Array]"]=ba["[object Map]"]=ba["[object Number]"]=ba["[object Object]"]=ba["[object RegExp]"]=ba["[object Set]"]=ba["[object String]"]=ba["[object Symbol]"]=ba["[object Uint8Array]"]=ba["[object Uint8ClampedArray]"]=
ba["[object Uint16Array]"]=ba["[object Uint32Array]"]=!0;ba["[object Error]"]=ba["[object Function]"]=ba["[object WeakMap]"]=!1;var Ca,oa={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},La=parseFloat,bb=parseInt,ja="object"==typeof global&&global&&global.Object===Object&&global,Ja="object"==typeof self&&self&&self.Object===Object&&self,ma=ja||Ja||Function("return this")(),cb="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ua=cb&&"object"==typeof module&&module&&
!module.nodeType&&module,ac=Ua&&Ua.exports===cb,rc=ac&&ja.process;a:{try{Ca=rc&&rc.binding&&rc.binding("util");break a}catch(bd){}Ca=void 0}var zd=Ca&&Ca.isArrayBuffer,sc=Ca&&Ca.isDate,ve=Ca&&Ca.isMap,mb=Ca&&Ca.isRegExp,Qb=Ca&&Ca.isSet,Qd=Ca&&Ca.isTypedArray,lb=F("length"),zc=z({"\u00c0":"A","\u00c1":"A","\u00c2":"A","\u00c3":"A","\u00c4":"A","\u00c5":"A","\u00e0":"a","\u00e1":"a","\u00e2":"a","\u00e3":"a","\u00e4":"a","\u00e5":"a","\u00c7":"C","\u00e7":"c","\u00d0":"D","\u00f0":"d","\u00c8":"E",
"\u00c9":"E","\u00ca":"E","\u00cb":"E","\u00e8":"e","\u00e9":"e","\u00ea":"e","\u00eb":"e","\u00cc":"I","\u00cd":"I","\u00ce":"I","\u00cf":"I","\u00ec":"i","\u00ed":"i","\u00ee":"i","\u00ef":"i","\u00d1":"N","\u00f1":"n","\u00d2":"O","\u00d3":"O","\u00d4":"O","\u00d5":"O","\u00d6":"O","\u00d8":"O","\u00f2":"o","\u00f3":"o","\u00f4":"o","\u00f5":"o","\u00f6":"o","\u00f8":"o","\u00d9":"U","\u00da":"U","\u00db":"U","\u00dc":"U","\u00f9":"u","\u00fa":"u","\u00fb":"u","\u00fc":"u","\u00dd":"Y","\u00fd":"y",
"\u00ff":"y","\u00c6":"Ae","\u00e6":"ae","\u00de":"Th","\u00fe":"th","\u00df":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g",
"\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n",
"\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u",
"\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),cd=z({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),gc=z({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),bc=function Ke(z){function R(a){if(wb(a)&&!Pa(a)&&!(a instanceof Fa)){if(a instanceof oa)return a;if(fb.call(a,"__wrapped__"))return Af(a)}return new oa(a)}
function ja(){}function oa(a,b){this.__wrapped__=a;this.__actions__=[];this.__chain__=!!b;this.__index__=0;this.__values__=O}function Fa(a){this.__wrapped__=a;this.__actions__=[];this.__dir__=1;this.__filtered__=!1;this.__iteratees__=[];this.__takeCount__=4294967295;this.__views__=[]}function Ca(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function Ja(a){var b=-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function Ua(a){var b=
-1,c=null==a?0:a.length;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function lb(a){var b=-1,c=null==a?0:a.length;for(this.__data__=new Ua;++b<c;)this.add(a[b])}function cb(a){this.size=(this.__data__=new Ja(a)).size}function Hb(a,b){var c,d=Pa(a),e=!d&&Jf(a),f=!d&&!e&&cf(a),g=!d&&!e&&!f&&Kf(a),e=(d=d||e||f||g)?I(a.length,ze):[],h=e.length;for(c in a)!b&&!fb.call(a,c)||d&&("length"==c||f&&("offset"==c||"parent"==c)||g&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||md(c,h))||e.push(c);
return e}function rc(a){var b=a.length;return b?a[Sf(0,b-1)]:O}function bd(a,b){return vc(Pb(a),Ad(b,0,a.length))}function qf(a){return vc(Pb(a))}function rf(a,b,c){(c===O||Nc(a[b],c))&&(c!==O||b in a)||Dc(a,b,c)}function Cc(a,b,c){var d=a[b];fb.call(a,b)&&Nc(d,c)&&(c!==O||b in a)||Dc(a,b,c)}function hc(a,b){for(var c=a.length;c--;)if(Nc(a[c][0],b))return c;return-1}function sf(a,b,c,d){return kd(a,function(a,e,f){b(d,a,c(a),f)}),d}function tf(a,b){return a&&hd(b,zb(b),a)}function Le(a,b){return a&&
hd(b,Fc(b),a)}function Dc(a,b,c){"__proto__"==b&&Hf?Hf(a,b,{configurable:!0,enumerable:!0,value:c,writable:!0}):a[b]=c}function xe(a,b){for(var c=-1,d=b.length,e=Eb(d),f=null==a;++c<d;)e[c]=f?O:Ye(a,b[c]);return e}function Ad(a,b,c){return a===a&&(c!==O&&(a=a<=c?a:c),b!==O&&(a=a>=b?a:b)),a}function Rb(a,b,c,e,f,g){var h,l=1&b,m=2&b,n=4&b;if(c&&(h=f?c(a,e,f,g):c(a)),h!==O)return h;if(!Qa(a))return a;if(e=Pa(a)){if(h=Jd(a),!l)return Pb(a,h)}else{var p=uc(a),q="[object Function]"==p||"[object GeneratorFunction]"==
p;if(cf(a))return ud(a,l);if("[object Object]"==p||"[object Arguments]"==p||q&&!f){if(h=m||q?{}:ag(a),!l)return m?Kg(a,Le(h,a)):Og(a,tf(h,a))}else{if(!ba[p])return f?a:{};h=zf(a,p,Rb,l)}}if(g||(g=new cb),f=g.get(a))return f;g.set(a,h);var m=n?m?Ag:$f:m?Fc:zb,r=e?O:m(a);return d(r||a,function(d,e){r&&(e=d,d=a[e]);Cc(h,e,Rb(d,b,c,e,a,g))}),h}function id(a){var b=zb(a);return function(c){return Rd(c,a,b)}}function Rd(a,b,c){var d=c.length;if(null==a)return!d;for(a=ob(a);d--;){var e=c[d],f=b[e],g=a[e];
if(g===O&&!(e in a)||!f(g))return!1}return!0}function ce(a,b,c){if("function"!=typeof a)throw new jc("Expected a function");return Gd(function(){a.apply(O,c)},b)}function Tc(a,b,c,d){var e=-1,f=g,h=!0,l=a.length,n=[],q=b.length;if(!l)return n;c&&(b=p(b,L(c)));d?(f=m,h=!1):200<=b.length&&(f=S,h=!1,b=new lb(b));a:for(;++e<l;){var r=a[e],t=null==c?r:c(r),r=d||0!==r?r:0;if(h&&t===t){for(var u=q;u--;)if(b[u]===t)continue a;n.push(r)}else f(b,t,d)||n.push(r)}return n}function Uf(a,b){var c=!0;return kd(a,
function(a,d,e){return c=!!b(a,d,e)}),c}function Sd(a,b,c){for(var d=-1,e=a.length;++d<e;){var f=a[d],g=b(f);if(null!=g&&(h===O?g===g&&!mc(g):c(g,h)))var h=g,l=f}return l}function ie(a,b){var c=[];return kd(a,function(a,d,e){b(a,d,e)&&c.push(a)}),c}function Cb(a,b,c,d,e){var f=-1,g=a.length;c||(c=bg);for(e||(e=[]);++f<g;){var h=a[f];0<b&&c(h)?1<b?Cb(h,b-1,c,d,e):r(e,h):d||(e[e.length]=h)}return e}function Ib(a,b){return a&&Ud(a,b,zb)}function tc(a,b){return a&&Vd(a,b,zb)}function cc(a,b){return h(b,
function(b){return Oc(a[b])})}function ic(a,b){b=yb(b,a);for(var c=0,d=b.length;null!=a&&c<d;)a=a[Lc(b[c++])];return c&&c==d?a:O}function Jc(a,b,c){return b=b(a),Pa(a)?b:r(b,c(a))}function Bb(a){if(null==a)a=a===O?"[object Undefined]":"[object Null]";else if(bf&&bf in ob(a)){var b=fb.call(a,bf),c=a[bf];try{a[bf]=O;var d=!0}catch(e){}var f=Ma.call(a);d&&(b?a[bf]=c:delete a[bf]);a=f}else a=Ma.call(a);return a}function jd(a,b){return a>b}function Me(a,b){return null!=a&&fb.call(a,b)}function Ea(a,b){return null!=
a&&b in ob(a)}function je(a,b,c){for(var d=c?m:g,e=a[0].length,f=a.length,h=f,l=Eb(f),n=1/0,q=[];h--;){var r=a[h];h&&b&&(r=p(r,L(b)));n=dc(r.length,n);l[h]=!c&&(b||120<=e&&120<=r.length)?new lb(h&&r):O}var r=a[0],t=-1,u=l[0];a:for(;++t<e&&q.length<n;){var v=r[t],w=b?b(v):v,v=c||0!==v?v:0;if(u?!u.has(w):!d(q,w,c)){for(h=f;--h;){var x=l[h];if(x?!x.has(w):!d(a[h],w,c))continue a}u&&u.push(w);q.push(v)}}return q}function Gc(a,b,c){var d={};return Ib(a,function(a,e,f){b(d,c(a),e,f)}),d}function Pc(a,b,
c){return b=yb(b,a),a=2>b.length?a:ic(a,fc(b,0,-1)),b=null==a?a:a[Lc(Vb(b))],null==b?O:e(b,a,c)}function ye(a){return wb(a)&&"[object Arguments]"==Bb(a)}function Ig(a){return wb(a)&&"[object ArrayBuffer]"==Bb(a)}function De(a){return wb(a)&&"[object Date]"==Bb(a)}function yc(a,b,c,d,e){if(a===b)b=!0;else if(null==a||null==b||!wb(a)&&!wb(b))b=a!==a&&b!==b;else a:{var f=Pa(a),g=Pa(b),h=f?"[object Array]":uc(a),l=g?"[object Array]":uc(b),h="[object Arguments]"==h?"[object Object]":h,l="[object Arguments]"==
l?"[object Object]":l,m="[object Object]"==h,g="[object Object]"==l;if((l=h==l)&&cf(a)){if(!cf(b)){b=!1;break a}f=!0;m=!1}if(l&&!m)e||(e=new cb),b=f||Kf(a)?xf(a,b,c,d,yc,e):zg(a,b,h,c,d,yc,e);else if(1&c||(f=m&&fb.call(a,"__wrapped__"),h=g&&fb.call(b,"__wrapped__"),!f&&!h))if(l)b:if(e||(e=new cb),f=1&c,h=$f(a),g=h.length,l=$f(b).length,g==l||f){for(m=g;m--;){var n=h[m];if(!(f?n in b:fb.call(b,n))){b=!1;break b}}if((l=e.get(a))&&e.get(b))b=l==b;else{l=!0;e.set(a,b);e.set(b,a);for(var p=f;++m<g;){var n=
h[m],q=a[n],r=b[n];if(d)var t=f?d(r,q,n,b,a,e):d(q,r,n,a,b,e);if(t===O?q!==r&&!yc(q,r,c,d,e):!t){l=!1;break}p||(p="constructor"==n)}l&&!p&&(c=a.constructor,d=b.constructor,c!=d&&"constructor"in a&&"constructor"in b&&!("function"==typeof c&&c instanceof c&&"function"==typeof d&&d instanceof d)&&(l=!1));e["delete"](a);e["delete"](b);b=l}}else b=!1;else b=!1;else a=f?a.value():a,b=h?b.value():b,e||(e=new cb),b=yc(a,b,c,d,e)}return b}function kg(a){return wb(a)&&"[object Map]"==uc(a)}function sd(a,b,
c,d){var e=c.length,f=e,g=!d;if(null==a)return!f;for(a=ob(a);e--;){var h=c[e];if(g&&h[2]?h[1]!==a[h[0]]:!(h[0]in a))return!1}for(;++e<f;){var h=c[e],l=h[0],m=a[l],n=h[1];if(g&&h[2]){if(m===O&&!(l in a))return!1}else{if(h=new cb,d)var p=d(m,n,l,a,b,h);if(p===O?!yc(n,m,3,d,h):!p)return!1}}return!0}function Lf(a){return!(!Qa(a)||vf&&vf in a)&&(Oc(a)?hg:qc).test(Kd(a))}function Jg(a){return wb(a)&&"[object RegExp]"==Bb(a)}function df(a){return wb(a)&&"[object Set]"==uc(a)}function mg(a){return wb(a)&&
Zd(a.length)&&!!ca[Bb(a)]}function ef(a){return"function"==typeof a?a:null==a?xc:"object"==typeof a?Pa(a)?ff(a[0],a[1]):Ee(a):Va(a)}function Ac(a){if(!Oa(a))return Rg(a);var b,c=[];for(b in ob(a))fb.call(a,b)&&"constructor"!=b&&c.push(b);return c}function de(a,b){return a<b}function Qc(a,b){var c=-1,d=$a(a)?Eb(a.length):[];return kd(a,function(a,e,f){d[++c]=b(a,e,f)}),d}function Ee(a){var b=Qe(a);return 1==b.length&&b[0][2]?nb(b[0][0],b[0][1]):function(c){return c===a||sd(c,a,b)}}function ff(a,b){return cg(a)&&
b===b&&!Qa(b)?nb(Lc(a),b):function(c){var d=Ye(c,a);return d===O&&d===b?$d(c,a):yc(b,d,3)}}function dd(a,b,c,d,e){a!==b&&Ud(b,function(f,g){if(Qa(f)){e||(e=new cb);var h=e,l=a[g],m=b[g],n=h.get(m);if(!n){var n=d?d(l,m,g+"",a,b,h):O,p=n===O;if(p){var q=Pa(m),r=!q&&cf(m),t=!q&&!r&&Kf(m),n=m;q||r||t?Pa(l)?n=l:Db(l)?n=Pb(l):r?(p=!1,n=ud(m,!0)):t?(p=!1,n=sg(m,!0)):n=[]:Nd(m)||Jf(m)?(n=l,Jf(l)?n=$c(l):(!Qa(l)||c&&Oc(l))&&(n=ag(m))):p=!1}p&&(h.set(m,n),dd(n,m,c,d,h),h["delete"](m))}rf(a,g,n)}else h=d?d(a[g],
f,g+"",a,b,e):O,h===O&&(h=f),rf(a,g,h)},Fc)}function gf(a,b){var c=a.length;if(c)return b+=0>b?c:0,md(b,c)?a[b]:O}function Fe(a,b,c){var d=-1;return b=p(b.length?b:[xc],L(xa())),a=Qc(a,function(a){return{a:p(b,function(b){return b(a)}),b:++d,c:a}}),H(a,function(a,b){var d;a:{d=-1;for(var e=a.a,f=b.a,g=e.length,h=c.length;++d<g;){var l=Ie(e[d],f[d]);if(l){d=d>=h?l:l*("desc"==c[d]?-1:1);break a}}d=a.b-b.b}return d})}function Lg(a,b){return mf(a,b,function(b,c){return $d(a,c)})}function mf(a,b,c){for(var d=
-1,e=b.length,f={};++d<e;){var g=b[d],h=ic(a,g);c(h,g)&&xd(f,yb(g,a),h)}return f}function qg(a){return function(b){return ic(b,a)}}function Ge(a,b,c,d){var e=d?E:v,f=-1,g=b.length,h=a;a===b&&(b=Pb(b));for(c&&(h=p(a,L(c)));++f<g;)for(var l=0,m=b[f],m=c?c(m):m;-1<(l=e(h,m,l,d));)h!==a&&wa.call(h,l,1),wa.call(a,l,1);return a}function Rf(a,b){for(var c=a?b.length:0,d=c-1;c--;){var e=b[c];if(c==d||e!==f){var f=e;md(e)?wa.call(a,e,1):va(a,e)}}}function Sf(a,b){return a+vg(le()*(b-a+1))}function Pd(a,b){var c=
"";if(!a||1>b||9007199254740991<b)return c;do b%2&&(c+=a),(b=vg(b/2))&&(a+=a);while(b);return c}function Da(a,b){return ig($b(a,b,xc),a+"")}function Ng(a){return rc(re(a))}function rg(a,b){var c=re(a);return vc(c,Ad(b,0,c.length))}function xd(a,b,c,d){if(!Qa(a))return a;b=yb(b,a);for(var e=-1,f=b.length,g=f-1,h=a;null!=h&&++e<f;){var l=Lc(b[e]),m=c;if(e!=g){var n=h[l],m=d?d(n,l,h):O;m===O&&(m=Qa(n)?n:md(b[e+1])?[]:{})}Cc(h,l,m);h=h[l]}return a}function kh(a){return vc(re(a))}function fc(a,b,c){var d=
-1,e=a.length;0>b&&(b=-b>e?0:e+b);c=c>e?e:c;0>c&&(c+=e);e=b>c?0:c-b>>>0;b>>>=0;for(c=Eb(e);++d<e;)c[d]=a[d+b];return c}function hf(a,b){var c;return kd(a,function(a,d,e){return c=b(a,d,e),!c}),!!c}function se(a,b,c){var d=0,e=null==a?d:a.length;if("number"==typeof b&&b===b&&2147483647>=e){for(;d<e;){var f=d+e>>>1,g=a[f];null!==g&&!mc(g)&&(c?g<=b:g<b)?d=f+1:e=f}return e}return ge(a,b,xc,c)}function ge(a,b,c,d){b=c(b);for(var e=0,f=null==a?0:a.length,g=b!==b,h=null===b,l=mc(b),m=b===O;e<f;){var n=vg((e+
f)/2),p=c(a[n]),q=p!==O,r=null===p,t=p===p,u=mc(p);(g?d||t:m?t&&(d||q):h?t&&q&&(d||!r):l?t&&q&&!r&&(d||!u):r||u?0:d?p<=b:p<b)?e=n+1:f=n}return dc(f,4294967294)}function vd(a,b){for(var c=-1,d=a.length,e=0,f=[];++c<d;){var g=a[c],h=b?b(g):g;if(!c||!Nc(h,l)){var l=h;f[e++]=0===g?0:g}}return f}function wd(a){return"number"==typeof a?a:mc(a)?ia:+a}function Nb(a){if("string"==typeof a)return a;if(Pa(a))return p(a,Nb)+"";if(mc(a))return Vc?Vc.call(a):"";var b=a+"";return"0"==b&&1/a==-aa?"-0":b}function gd(a,
b,c){var d=-1,e=g,f=a.length,h=!0,l=[],n=l;if(c)h=!1,e=m;else if(200<=f){if(e=b?null:Oe(a))return M(e);h=!1;e=S;n=new lb}else n=b?[]:l;a:for(;++d<f;){var p=a[d],q=b?b(p):p,p=c||0!==p?p:0;if(h&&q===q){for(var r=n.length;r--;)if(n[r]===q)continue a;b&&n.push(q);l.push(p)}else e(n,q,c)||(n!==l&&n.push(q),l.push(p))}return l}function va(a,b){return b=yb(b,a),a=2>b.length?a:ic(a,fc(b,0,-1)),null==a||delete a[Lc(Vb(b))]}function he(a,b,c,d){for(var e=a.length,f=d?e:-1;(d?f--:++f<e)&&b(a[f],f,a););return c?
fc(a,d?0:f,d?f+1:e):fc(a,d?f+1:0,d?e:f)}function Pf(a,b){var c=a;return c instanceof Fa&&(c=c.value()),t(b,function(a,b){return b.func.apply(b.thisArg,r([a],b.args))},c)}function Ic(a,b,c){var d=a.length;if(2>d)return d?gd(a[0]):[];for(var e=-1,f=Eb(d);++e<d;)for(var g=a[e],h=-1;++h<d;)h!=e&&(f[e]=Tc(f[e]||g,a[h],b,c));return gd(Cb(f,1),b,c)}function qb(a,b,c){for(var d=-1,e=a.length,f=b.length,g={};++d<e;)c(g,a[d],d<f?b[d]:O);return g}function fd(a){return Db(a)?a:[]}function Hc(a){return"function"==
typeof a?a:xc}function yb(a,b){return Pa(a)?a:cg(a,b)?[a]:Hg(eb(a))}function Sc(a,b,c){var d=a.length;return c=c===O?d:c,!b&&c>=d?a:fc(a,b,c)}function ud(a,b){if(b)return a.slice();var c=a.length,c=T?T(c):new a.constructor(c);return a.copy(c),c}function te(a){var b=new a.constructor(a.byteLength);return(new Vf(b)).set(new Vf(a)),b}function sg(a,b){return new a.constructor(b?te(a.buffer):a.buffer,a.byteOffset,a.length)}function Ie(a,b){if(a!==b){var c=a!==O,d=null===a,e=a===a,f=mc(a),g=b!==O,h=null===
b,l=b===b,m=mc(b);if(!h&&!m&&!f&&a>b||f&&g&&l&&!h&&!m||d&&g&&l||!c&&l||!e)return 1;if(!d&&!f&&!m&&a<b||m&&c&&e&&!d&&!f||h&&c&&e||!g&&e||!l)return-1}return 0}function Qf(a,b,c,d){var e=-1,f=a.length,g=c.length,h=-1,l=b.length,m=Ob(f-g,0),n=Eb(l+m);for(d=!d;++h<l;)n[h]=b[h];for(;++e<g;)(d||e<f)&&(n[c[e]]=a[e]);for(;m--;)n[h++]=a[e++];return n}function Mg(a,b,c,d){var e=-1,f=a.length,g=-1,h=c.length,l=-1,m=b.length,n=Ob(f-h,0),p=Eb(n+m);for(d=!d;++e<n;)p[e]=a[e];for(n=e;++l<m;)p[n+l]=b[l];for(;++g<h;)(d||
e<f)&&(p[n+c[g]]=a[e++]);return p}function Pb(a,b){var c=-1,d=a.length;for(b||(b=Eb(d));++c<d;)b[c]=a[c];return b}function hd(a,b,c,d){var e=!c;c||(c={});for(var f=-1,g=b.length;++f<g;){var h=b[f],l=d?d(c[h],a[h],h,c,a):O;l===O&&(l=a[h]);e?Dc(c,h,l):Cc(c,h,l)}return c}function Og(a,b){return hd(a,Fd(a),b)}function Kg(a,b){return hd(a,Ed(a),b)}function Je(a,b){return function(d,e){var f=Pa(d)?c:sf,g=b?b():{};return f(d,a,xa(e,2),g)}}function ue(a){return Da(function(b,c){var d=-1,e=c.length,f=1<e?
c[e-1]:O,g=2<e?c[2]:O,f=3<a.length&&"function"==typeof f?(e--,f):O;g&&Ub(c[0],c[1],g)&&(f=3>e?O:f,e=1);for(b=ob(b);++d<e;)(g=c[d])&&a(b,g,d,f);return b})}function Mb(a,b){return function(c,d){if(null==c)return c;if(!$a(c))return a(c,d);for(var e=c.length,f=b?e:-1,g=ob(c);(b?f--:++f<e)&&!1!==d(g[f],f,g););return c}}function ng(a){return function(b,c,d){var e=-1,f=ob(b);d=d(b);for(var g=d.length;g--;){var h=d[a?g:++e];if(!1===c(f[h],h,f))break}return b}}function ed(a,b,c){function d(){return(this&&
this!==ma&&this instanceof d?f:a).apply(e?c:this,arguments)}var e=1&b,f=td(a);return d}function Nf(a){return function(b){b=eb(b);var c=na.test(b)?ea(b):O,d=c?c[0]:b.charAt(0);return b=c?Sc(c,1).join(""):b.slice(1),d[a]()+b}}function ec(a){return function(b){return t(Ze(Zg(b).replace(Aa,"")),a,"")}}function td(a){return function(){var b=arguments;switch(b.length){case 0:return new a;case 1:return new a(b[0]);case 2:return new a(b[0],b[1]);case 3:return new a(b[0],b[1],b[2]);case 4:return new a(b[0],
b[1],b[2],b[3]);case 5:return new a(b[0],b[1],b[2],b[3],b[4]);case 6:return new a(b[0],b[1],b[2],b[3],b[4],b[5]);case 7:return new a(b[0],b[1],b[2],b[3],b[4],b[5],b[6])}var c=me(a.prototype),b=a.apply(c,b);return Qa(b)?b:c}}function og(a,b,c){function d(){for(var g=arguments.length,h=Eb(g),l=g,m=pe(d);l--;)h[l]=arguments[l];return l=3>g&&h[0]!==m&&h[g-1]!==m?[]:U(h,m),g-=l.length,g<c?He(a,b,kb,d.placeholder,O,h,l,O,O,c-g):e(this&&this!==ma&&this instanceof d?f:a,this,h)}var f=td(a);return d}function Of(a){return function(b,
c,d){var e=ob(b);if(!$a(b)){var f=xa(c,3);b=zb(b);c=function(a){return f(e[a],a,e)}}return c=a(b,c,d),-1<c?e[f?b[c]:c]:O}}function pg(a){return Hd(function(b){var c=b.length,d=c,e=oa.prototype.thru;for(a&&b.reverse();d--;){var f=b[d];if("function"!=typeof f)throw new jc("Expected a function");if(e&&!g&&"wrapper"==yf(f))var g=new oa([],!0)}for(d=g?d:c;++d<c;)var f=b[d],e=yf(f),h="wrapper"==e?oe(f):O,g=h&&dg(h[0])&&424==h[1]&&!h[4].length&&1==h[9]?g[yf(h[0])].apply(g,h[3]):1==f.length&&dg(f)?g[e]():
g.thru(f);return function(){var a=arguments,d=a[0];if(g&&1==a.length&&Pa(d))return g.plant(d).value();for(var e=0,a=c?b[e].apply(this,a):d;++e<c;)a=b[e].call(this,a);return a}})}function kb(a,b,c,d,e,f,g,h,l,m){function n(){for(var w=arguments.length,x=Eb(w),y=w;y--;)x[y]=arguments[y];if(t){var z,A=pe(n),y=x.length;for(z=0;y--;)x[y]===A&&++z}if(d&&(x=Qf(x,d,e,t)),f&&(x=Mg(x,f,g,t)),w-=z,t&&w<m)return A=U(x,A),He(a,b,kb,n.placeholder,c,x,A,h,l,m-w);if(A=q?c:this,y=r?A[a]:a,w=x.length,h){z=x.length;
for(var B=dc(h.length,z),C=Pb(x);B--;){var E=h[B];x[B]=md(E,z)?C[E]:O}}else u&&1<w&&x.reverse();return p&&l<w&&(x.length=l),this&&this!==ma&&this instanceof n&&(y=v||td(y)),y.apply(A,x)}var p=128&b,q=1&b,r=2&b,t=24&b,u=512&b,v=r?O:td(a);return n}function Xb(a,b){return function(c,d){return Gc(c,a,b(d))}}function ee(a,b){return function(c,d){var e;if(c===O&&d===O)return b;if(c!==O&&(e=c),d!==O){if(e===O)return d;"string"==typeof c||"string"==typeof d?(c=Nb(c),d=Nb(d)):(c=wd(c),d=wd(d));e=a(c,d)}return e}}
function jf(a){return Hd(function(b){return b=p(b,L(xa())),Da(function(c){var d=this;return a(b,function(a){return e(a,d,c)})})})}function Rc(a,b){b=b===O?" ":Nb(b);var c=b.length;return 2>c?c?Pd(b,a):b:(c=Pd(b,If(a/X(b))),na.test(b)?Sc(ea(c),0,a).join(""):c.slice(0,a))}function yd(a,b,c,d){function f(){for(var b=-1,l=arguments.length,m=-1,n=d.length,p=Eb(n+l),q=this&&this!==ma&&this instanceof f?h:a;++m<n;)p[m]=d[m];for(;l--;)p[m++]=arguments[++b];return e(q,g?c:this,p)}var g=1&b,h=td(a);return f}
function kf(a){return function(b,c,d){d&&"number"!=typeof d&&Ub(b,c,d)&&(c=d=O);b=Zc(b);c===O?(c=b,b=0):c=Zc(c);d=d===O?b<c?1:-1:Zc(d);var e=-1;c=Ob(If((c-b)/(d||1)),0);for(var f=Eb(c);c--;)f[a?c:++e]=b,b+=d;return f}}function lf(a){return function(b,c){return"string"==typeof b&&"string"==typeof c||(b=nc(b),c=nc(c)),a(b,c)}}function He(a,b,c,d,e,f,g,h,l,m){var n=8&b,p=n?g:O;g=n?O:g;var q=n?f:O;return f=n?O:f,b=(b|(n?32:64))&~(n?64:32),4&b||(b&=-4),e=[a,b,e,q,p,f,g,h,l,m],c=c.apply(O,e),dg(a)&&xg(c,
e),c.placeholder=d,Vg(c,a,b)}function sa(a){var b=oc[a];return function(a,c){if(a=nc(a),c=null==c?0:dc(Na(c),292)){var d=(eb(a)+"e").split("e"),d=b(d[0]+"e"+(+d[1]+c)),d=(eb(d)+"e").split("e");return+(d[0]+"e"+(+d[1]-c))}return b(a)}}function fe(a){return function(b){var c=uc(b);return"[object Map]"==c?Y(b):"[object Set]"==c?Q(b):N(b,a(b))}}function Tb(a,b,c,d,e,f,g,h){var l=2&b;if(!l&&"function"!=typeof a)throw new jc("Expected a function");var m=d?d.length:0;if(m||(b&=-97,d=e=O),g=g===O?g:Ob(Na(g),
0),h=h===O?h:Na(h),m-=e?e.length:0,64&b){var n=d,p=e;d=e=O}var q=l?O:oe(a);return f=[a,b,c,d,e,n,p,f,g,h],q&&(c=f[1],a=q[1],b=c|a,d=128==a&&8==c||128==a&&256==c&&f[7].length<=q[8]||384==a&&q[7].length<=q[8]&&8==c,131>b||d)&&(1&a&&(f[2]=q[2],b|=1&c?0:4),(c=q[3])&&(d=f[3],f[3]=d?Qf(d,c,q[4]):c,f[4]=d?U(f[3],"__lodash_placeholder__"):q[4]),(c=q[5])&&(d=f[5],f[5]=d?Mg(d,c,q[6]):c,f[6]=d?U(f[5],"__lodash_placeholder__"):q[6]),(c=q[7])&&(f[7]=c),128&a&&(f[8]=null==f[8]?q[8]:dc(f[8],q[8])),null==f[9]&&(f[9]=
q[9]),f[0]=q[0],f[1]=b),a=f[0],b=f[1],c=f[2],d=f[3],e=f[4],h=f[9]=f[9]===O?l?0:a.length:Ob(f[9]-m,0),!h&&24&b&&(b&=-25),Vg((q?ld:xg)(b&&1!=b?8==b||16==b?og(a,b,h):32!=b&&33!=b||e.length?kb.apply(O,f):yd(a,b,c,d):ed(a,b,c),f),a,b)}function Xc(a,b,c,d){return a===O||Nc(a,Od[c])&&!fb.call(d,c)?b:a}function Pe(a,b,c,d,e,f){return Qa(a)&&Qa(b)&&(f.set(b,a),dd(a,b,O,Pe,f),f["delete"](b)),a}function Zf(a){return Nd(a)?O:a}function xf(a,b,c,d,e,f){var g=1&c,h=a.length,l=b.length;if(h!=l&&!(g&&l>h))return!1;
if((l=f.get(a))&&f.get(b))return l==b;var l=-1,m=!0,n=2&c?new lb:O;f.set(a,b);for(f.set(b,a);++l<h;){var p=a[l],r=b[l];if(d)var t=g?d(r,p,l,b,a,f):d(p,r,l,a,b,f);if(t!==O){if(t)continue;m=!1;break}if(n){if(!q(b,function(a,b){if(!n.has(b)&&(p===a||e(p,a,c,d,f)))return n.push(b)})){m=!1;break}}else if(p!==r&&!e(p,r,c,d,f)){m=!1;break}}return f["delete"](a),f["delete"](b),m}function zg(a,b,c,d,e,f,g){switch(c){case "[object DataView]":if(a.byteLength!=b.byteLength||a.byteOffset!=b.byteOffset)break;a=
a.buffer;b=b.buffer;case "[object ArrayBuffer]":if(a.byteLength!=b.byteLength||!f(new Vf(a),new Vf(b)))break;return!0;case "[object Boolean]":case "[object Date]":case "[object Number]":return Nc(+a,+b);case "[object Error]":return a.name==b.name&&a.message==b.message;case "[object RegExp]":case "[object String]":return a==b+"";case "[object Map]":var h=Y;case "[object Set]":if(h||(h=M),a.size!=b.size&&!(1&d))break;return(c=g.get(a))?c==b:(d|=2,g.set(a,b),b=xf(h(a),h(b),d,e,f,g),g["delete"](a),b);
case "[object Symbol]":if(Td)return Td.call(a)==Td.call(b)}return!1}function Hd(a){return ig($b(a,O,Mc),a+"")}function $f(a){return Jc(a,zb,Fd)}function Ag(a){return Jc(a,Fc,Ed)}function yf(a){for(var b=a.name+"",c=vb[b],d=fb.call(vb,b)?c.length:0;d--;){var e=c[d],f=e.func;if(null==f||f==a)return e.name}return b}function pe(a){return(fb.call(R,"placeholder")?R:a).placeholder}function xa(){var a=R.iteratee||Uc,a=a===Uc?ef:a;return arguments.length?a(arguments[0],arguments[1]):a}function Xd(a,b){var c=
a.__data__,d=typeof b;return("string"==d||"number"==d||"symbol"==d||"boolean"==d?"__proto__"!==b:null===b)?c["string"==typeof b?"string":"hash"]:c.map}function Qe(a){for(var b=zb(a),c=b.length;c--;){var d=b[c],e=a[d];b[c]=[d,e,e===e&&!Qa(e)]}return b}function Id(a,b){var c=null==a?O:a[b];return Lf(c)?c:O}function Bg(a,b,c){b=yb(b,a);for(var d=-1,e=b.length,f=!1;++d<e;){var g=Lc(b[d]);if(!(f=null!=a&&c(a,g)))break;a=a[g]}return f||++d!=e?f:(e=null==a?0:a.length,!!e&&Zd(e)&&md(g,e)&&(Pa(a)||Jf(a)))}
function Jd(a){var b=a.length,c=a.constructor(b);return b&&"string"==typeof a[0]&&fb.call(a,"index")&&(c.index=a.index,c.input=a.input),c}function ag(a){return"function"!=typeof a.constructor||Oa(a)?{}:me(Z(a))}function zf(c,d,e,f){var g=c.constructor;switch(d){case "[object ArrayBuffer]":return te(c);case "[object Boolean]":case "[object Date]":return new g(+c);case "[object DataView]":return d=f?te(c.buffer):c.buffer,new c.constructor(d,c.byteOffset,c.byteLength);case "[object Float32Array]":case "[object Float64Array]":case "[object Int8Array]":case "[object Int16Array]":case "[object Int32Array]":case "[object Uint8Array]":case "[object Uint8ClampedArray]":case "[object Uint16Array]":case "[object Uint32Array]":return sg(c,
f);case "[object Map]":return d=f?e(Y(c),1):Y(c),t(d,a,new c.constructor);case "[object Number]":case "[object String]":return new g(c);case "[object RegExp]":return d=new c.constructor(c.source,Ta.exec(c)),d.lastIndex=c.lastIndex,d;case "[object Set]":return d=f?e(M(c),1):M(c),t(d,b,new c.constructor);case "[object Symbol]":return Td?ob(Td.call(c)):{}}}function bg(a){return Pa(a)||Jf(a)||!!(ub&&a&&a[ub])}function md(a,b){return b=null==b?9007199254740991:b,!!b&&("number"==typeof a||xb.test(a))&&
-1<a&&0==a%1&&a<b}function Ub(a,b,c){if(!Qa(c))return!1;var d=typeof b;return!!("number"==d?$a(c)&&md(b,c.length):"string"==d&&b in c)&&Nc(c[b],a)}function cg(a,b){if(Pa(a))return!1;var c=typeof a;return!("number"!=c&&"symbol"!=c&&"boolean"!=c&&null!=a&&!mc(a))||Kb.test(a)||!Xa.test(a)||null!=b&&a in ob(b)}function dg(a){var b=yf(a),c=R[b];return"function"==typeof c&&b in Fa.prototype&&(a===c||(b=oe(c),!!b&&a===b[0]))}function Oa(a){var b=a&&a.constructor;return a===("function"==typeof b&&b.prototype||
Od)}function nb(a,b){return function(c){return null!=c&&c[a]===b&&(b!==O||a in ob(c))}}function $b(a,b,c){return b=Ob(b===O?a.length-1:b,0),function(){for(var d=arguments,f=-1,g=Ob(d.length-b,0),h=Eb(g);++f<g;)h[f]=d[b+f];f=-1;for(g=Eb(b+1);++f<b;)g[f]=d[f];return g[b]=c(h),e(a,this,g)}}function Vg(a,b,c){var d=b+"";b=ig;var e,f=Re;return e=(e=d.match(gb))?e[1].split(Wa):[],c=f(e,c),(f=c.length)&&(e=f-1,c[e]=(1<f?"& ":"")+c[e],c=c.join(2<f?", ":" "),d=d.replace(rb,"{\n/* [wrapped with "+c+"] */\n")),
b(a,d)}function Cg(a){var b=0,c=0;return function(){var d=Tg(),e=16-(d-c);if(c=d,0<e){if(800<=++b)return arguments[0]}else b=0;return a.apply(O,arguments)}}function vc(a,b){var c=-1,d=a.length,e=d-1;for(b=b===O?d:b;++c<b;){var d=Sf(c,e),f=a[d];a[d]=a[c];a[c]=f}return a.length=b,a}function Lc(a){if("string"==typeof a||mc(a))return a;var b=a+"";return"0"==b&&1/a==-aa?"-0":b}function Kd(a){if(null!=a){try{return Ne.call(a)}catch(b){}return a+""}return""}function Re(a,b){return d(ta,function(c){var d=
"_."+c[0];b&c[1]&&!g(a,d)&&a.push(d)}),a.sort()}function Af(a){if(a instanceof Fa)return a.clone();var b=new oa(a.__wrapped__,a.__chain__);return b.__actions__=Pb(a.__actions__),b.__index__=a.__index__,b.__values__=a.__values__,b}function Se(a,b,c){var d=null==a?0:a.length;return d?(c=null==c?0:Na(c),0>c&&(c=Ob(d+c,0)),u(a,xa(b,3),c)):-1}function Ae(a,b,c){var d=null==a?0:a.length;if(!d)return-1;var e=d-1;return c!==O&&(e=Na(c),e=0>c?Ob(d+e,0):dc(e,d-1)),u(a,xa(b,3),e,!0)}function Mc(a){return(null==
a?0:a.length)?Cb(a,1):[]}function Wg(a){return a&&a.length?a[0]:O}function Vb(a){var b=null==a?0:a.length;return b?a[b-1]:O}function Bf(a,b){return a&&a.length&&b&&b.length?Ge(a,b):a}function Yc(a){return null==a?a:Ch.call(a)}function Te(a){if(!a||!a.length)return[];var b=0;return a=h(a,function(a){if(Db(a))return b=Ob(a.length,b),!0}),I(b,function(b){return p(a,F(b))})}function nd(a,b){if(!a||!a.length)return[];var c=Te(a);return null==b?c:p(c,function(a){return e(b,O,a)})}function ka(a){return a=
R(a),a.__chain__=!0,a}function Ia(a,b){return b(a)}function eg(){return this}function od(a,b){return(Pa(a)?d:kd)(a,xa(b,3))}function qe(a,b){return(Pa(a)?f:ne)(a,xa(b,3))}function Cf(a,b){return(Pa(a)?p:Qc)(a,xa(b,3))}function Yd(a,b,c){return b=c?O:b,b=a&&null==b?a.length:b,Tb(a,128,O,O,O,O,b)}function Ue(a,b){var c;if("function"!=typeof b)throw new jc("Expected a function");return a=Na(a),function(){return 0<--a&&(c=b.apply(this,arguments)),1>=a&&(b=O),c}}function Ve(a,b,c){return b=c?O:b,a=Tb(a,
8,O,O,O,O,O,b),a.placeholder=Ve.placeholder,a}function Dg(a,b,c){return b=c?O:b,a=Tb(a,16,O,O,O,O,O,b),a.placeholder=Dg.placeholder,a}function Df(a,b,c){function d(b){var c=l,e=m;return l=m=O,t=b,p=a.apply(e,c)}function e(a){var c=a-r;return a-=t,r===O||c>=b||0>c||v&&a>=n}function f(){var a=ih();if(e(a))return g(a);var c,d=Gd;c=a-t;a=b-(a-r);c=v?dc(a,n-c):a;q=d(f,c)}function g(a){return q=O,w&&l?d(a):(l=m=O,p)}function h(){var a=ih(),c=e(a);if(l=arguments,m=this,r=a,c){if(q===O)return t=a=r,q=Gd(f,
b),u?d(a):p;if(v)return q=Gd(f,b),d(r)}return q===O&&(q=Gd(f,b)),p}var l,m,n,p,q,r,t=0,u=!1,v=!1,w=!0;if("function"!=typeof a)throw new jc("Expected a function");return b=nc(b)||0,Qa(c)&&(u=!!c.leading,n=(v="maxWait"in c)?Ob(nc(c.maxWait)||0,b):n,w="trailing"in c?!!c.trailing:w),h.cancel=function(){q!==O&&Wc(q);t=0;l=r=m=q=O},h.flush=function(){return q===O?p:g(ih())},h}function wc(a,b){function c(){var d=arguments,e=b?b.apply(this,d):d[0],f=c.cache;return f.has(e)?f.get(e):(d=a.apply(this,d),c.cache=
f.set(e,d)||f,d)}if("function"!=typeof a||null!=b&&"function"!=typeof b)throw new jc("Expected a function");return c.cache=new (wc.Cache||Ua),c}function We(a){if("function"!=typeof a)throw new jc("Expected a function");return function(){var b=arguments;switch(b.length){case 0:return!a.call(this);case 1:return!a.call(this,b[0]);case 2:return!a.call(this,b[0],b[1]);case 3:return!a.call(this,b[0],b[1],b[2])}return!a.apply(this,b)}}function Nc(a,b){return a===b||a!==a&&b!==b}function $a(a){return null!=
a&&Zd(a.length)&&!Oc(a)}function Db(a){return wb(a)&&$a(a)}function Ld(a){if(!wb(a))return!1;var b=Bb(a);return"[object Error]"==b||"[object DOMException]"==b||"string"==typeof a.message&&"string"==typeof a.name&&!Nd(a)}function Oc(a){return!!Qa(a)&&(a=Bb(a),"[object Function]"==a||"[object GeneratorFunction]"==a||"[object AsyncFunction]"==a||"[object Proxy]"==a)}function Ef(a){return"number"==typeof a&&a==Na(a)}function Zd(a){return"number"==typeof a&&-1<a&&0==a%1&&9007199254740991>=a}function Qa(a){var b=
typeof a;return null!=a&&("object"==b||"function"==b)}function wb(a){return null!=a&&"object"==typeof a}function Md(a){return"number"==typeof a||wb(a)&&"[object Number]"==Bb(a)}function Nd(a){return!(!wb(a)||"[object Object]"!=Bb(a))&&(a=Z(a),null===a||(a=fb.call(a,"constructor")&&a.constructor,"function"==typeof a&&a instanceof a&&Ne.call(a)==Gg))}function Gf(a){return"string"==typeof a||!Pa(a)&&wb(a)&&"[object String]"==Bb(a)}function mc(a){return"symbol"==typeof a||wb(a)&&"[object Symbol]"==Bb(a)}
function pd(a){if(!a)return[];if($a(a))return Gf(a)?ea(a):Pb(a);if(af&&a[af]){a=a[af]();for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c}return b=uc(a),("[object Map]"==b?Y:"[object Set]"==b?M:re)(a)}function Zc(a){return a?(a=nc(a),a===aa||a===-aa?1.7976931348623157E308*(0>a?-1:1):a===a?a:0):0===a?a:0}function Na(a){a=Zc(a);var b=a%1;return a===a?b?a-b:a:0}function Yg(a){return a?Ad(Na(a),0,4294967295):0}function nc(a){if("number"==typeof a)return a;if(mc(a))return ia;if(Qa(a)&&(a="function"==
typeof a.valueOf?a.valueOf():a,a=Qa(a)?a+"":a),"string"!=typeof a)return 0===a?a:+a;a=a.replace(ab,"");var b=ra.test(a);return b||tb.test(a)?bb(a.slice(2),b?2:8):Ya.test(a)?ia:+a}function $c(a){return hd(a,Fc(a))}function eb(a){return null==a?"":Nb(a)}function Ye(a,b,c){return a=null==a?O:ic(a,b),a===O?c:a}function $d(a,b){return null!=a&&Bg(a,b,Ea)}function zb(a){return $a(a)?Hb(a):Ac(a)}function Fc(a){if($a(a))a=Hb(a,!0);else if(Qa(a)){var b,c=Oa(a),d=[];for(b in a)("constructor"!=b||!c&&fb.call(a,
b))&&d.push(b);a=d}else{if(b=[],null!=a)for(c in ob(a))b.push(c);a=b}return a}function fg(a,b){if(null==a)return{};var c=p(Ag(a),function(a){return[a]});return b=xa(b),mf(a,c,function(a,c){return b(a,c[0])})}function re(a){return null==a?[]:x(a,zb(a))}function Jb(a){return Vh(eb(a).toLowerCase())}function Zg(a){return(a=eb(a))&&a.replace(Ab,zc).replace(Lb,"")}function Ze(a,b,c){return a=eb(a),b=c?O:b,b===O?Yb.test(a)?a.match(Sa)||[]:a.match(qa)||[]:a.match(b)||[]}function P(a){return function(){return a}}
function xc(a){return a}function Uc(a){return ef("function"==typeof a?a:Rb(a,1))}function ya(a,b,c){var e=zb(b),f=cc(b,e);null!=c||Qa(b)&&(f.length||!e.length)||(c=b,b=a,a=this,f=cc(b,zb(b)));var g=!(Qa(c)&&"chain"in c&&!c.chain),h=Oc(a);return d(f,function(c){var d=b[c];a[c]=d;h&&(a.prototype[c]=function(){var b=this.__chain__;if(g||b){var c=a(this.__wrapped__);return(c.__actions__=Pb(this.__actions__)).push({func:d,args:arguments,thisArg:a}),c.__chain__=b,c}return d.apply(a,r([this.value()],arguments))})}),
a}function Zb(){}function Va(a){return cg(a)?F(Lc(a)):qg(a)}function $e(){return[]}function ad(){return!1}z=null==z?ma:bc.defaults(ma.Object(),z,bc.pick(ma,Bc));var Eb=z.Array,qd=z.Date,gg=z.Error,Be=z.Function,oc=z.Math,ob=z.Object,ua=z.RegExp,ze=z.String,jc=z.TypeError,uf=Eb.prototype,Od=ob.prototype,ke=z["__core-js_shared__"],Ne=Be.prototype.toString,fb=Od.hasOwnProperty,Fg=0,vf=function(){var a=/[^.]+$/.exec(ke&&ke.keys&&ke.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),Ma=Od.toString,Gg=
Ne.call(ob),Cd=ma._,hg=ua("^"+Ne.call(fb).replace(Ga,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Kc=ac?z.Buffer:O,kc=z.Symbol,Vf=z.Uint8Array,T=Kc?Kc.f:O,Z=W(ob.getPrototypeOf,ob),lc=ob.create,Ec=Od.propertyIsEnumerable,wa=uf.splice,ub=kc?kc.isConcatSpreadable:O,af=kc?kc.iterator:O,bf=kc?kc.toStringTag:O,Hf=function(){try{var a=Id(ob,"defineProperty");return a({},"",{}),a}catch(b){}}(),Yh=z.clearTimeout!==ma.clearTimeout&&z.clearTimeout,rh=qd&&qd.now!==ma.Date.now&&
qd.now,sh=z.setTimeout!==ma.setTimeout&&z.setTimeout,If=oc.ceil,vg=oc.floor,Qg=ob.getOwnPropertySymbols,Bh=Kc?Kc.isBuffer:O,th=z.isFinite,ah=uf.join,Rg=W(ob.keys,ob),Ob=oc.max,dc=oc.min,Tg=qd.now,Sg=z.parseInt,le=oc.random,Ch=uf.reverse,uh=Id(z,"DataView"),Wf=Id(z,"Map"),lh=Id(z,"Promise"),fa=Id(z,"Set"),Sb=Id(z,"WeakMap"),rd=Id(ob,"create"),wg=Sb&&new Sb,vb={},Dh=Kd(uh),Jh=Kd(Wf),bh=Kd(lh),Kh=Kd(fa),Eh=Kd(Sb),Ce=kc?kc.prototype:O,Td=Ce?Ce.valueOf:O,Vc=Ce?Ce.toString:O,me=function(){function a(){}
return function(b){return Qa(b)?lc?lc(b):(a.prototype=b,b=new a,a.prototype=O,b):{}}}();R.templateSettings={escape:pb,evaluate:Ra,interpolate:Ka,variable:"",imports:{_:R}};R.prototype=ja.prototype;R.prototype.constructor=R;oa.prototype=me(ja.prototype);oa.prototype.constructor=oa;Fa.prototype=me(ja.prototype);Fa.prototype.constructor=Fa;Ca.prototype.clear=function(){this.__data__=rd?rd(null):{};this.size=0};Ca.prototype["delete"]=function(a){return a=this.has(a)&&delete this.__data__[a],this.size-=
a?1:0,a};Ca.prototype.get=function(a){var b=this.__data__;return rd?(a=b[a],"__lodash_hash_undefined__"===a?O:a):fb.call(b,a)?b[a]:O};Ca.prototype.has=function(a){var b=this.__data__;return rd?b[a]!==O:fb.call(b,a)};Ca.prototype.set=function(a,b){var c=this.__data__;return this.size+=this.has(a)?0:1,c[a]=rd&&b===O?"__lodash_hash_undefined__":b,this};Ja.prototype.clear=function(){this.__data__=[];this.size=0};Ja.prototype["delete"]=function(a){var b=this.__data__;return a=hc(b,a),!(0>a)&&(a==b.length-
1?b.pop():wa.call(b,a,1),--this.size,!0)};Ja.prototype.get=function(a){var b=this.__data__;return a=hc(b,a),0>a?O:b[a][1]};Ja.prototype.has=function(a){return-1<hc(this.__data__,a)};Ja.prototype.set=function(a,b){var c=this.__data__,d=hc(c,a);return 0>d?(++this.size,c.push([a,b])):c[d][1]=b,this};Ua.prototype.clear=function(){this.size=0;this.__data__={hash:new Ca,map:new (Wf||Ja),string:new Ca}};Ua.prototype["delete"]=function(a){return a=Xd(this,a)["delete"](a),this.size-=a?1:0,a};Ua.prototype.get=
function(a){return Xd(this,a).get(a)};Ua.prototype.has=function(a){return Xd(this,a).has(a)};Ua.prototype.set=function(a,b){var c=Xd(this,a),d=c.size;return c.set(a,b),this.size+=c.size==d?0:1,this};lb.prototype.add=lb.prototype.push=function(a){return this.__data__.set(a,"__lodash_hash_undefined__"),this};lb.prototype.has=function(a){return this.__data__.has(a)};cb.prototype.clear=function(){this.__data__=new Ja;this.size=0};cb.prototype["delete"]=function(a){var b=this.__data__;return a=b["delete"](a),
this.size=b.size,a};cb.prototype.get=function(a){return this.__data__.get(a)};cb.prototype.has=function(a){return this.__data__.has(a)};cb.prototype.set=function(a,b){var c=this.__data__;if(c instanceof Ja){var d=c.__data__;if(!Wf||199>d.length)return d.push([a,b]),this.size=++c.size,this;c=this.__data__=new Ua(d)}return c.set(a,b),this.size=c.size,this};var kd=Mb(Ib),ne=Mb(tc,!0),Ud=ng(),Vd=ng(!0),ld=wg?function(a,b){return wg.set(a,b),a}:xc,Dd=Hf?function(a,b){return Hf(a,"toString",{configurable:!0,
enumerable:!1,value:P(b),writable:!0})}:xc,Wc=Yh||function(a){return ma.clearTimeout(a)},Oe=fa&&1/M(new fa([,-0]))[1]==aa?function(a){return new fa(a)}:Zb,oe=wg?function(a){return wg.get(a)}:Zb,Fd=Qg?function(a){return null==a?[]:(a=ob(a),h(Qg(a),function(b){return Ec.call(a,b)}))}:$e,Ed=Qg?function(a){for(var b=[];a;)r(b,Fd(a)),a=Z(a);return b}:$e,uc=Bb;(uh&&"[object DataView]"!=uc(new uh(new ArrayBuffer(1)))||Wf&&"[object Map]"!=uc(new Wf)||lh&&"[object Promise]"!=uc(lh.resolve())||fa&&"[object Set]"!=
uc(new fa)||Sb&&"[object WeakMap]"!=uc(new Sb))&&(uc=function(a){var b=Bb(a);if(a=(a="[object Object]"==b?a.constructor:O)?Kd(a):"")switch(a){case Dh:return"[object DataView]";case Jh:return"[object Map]";case bh:return"[object Promise]";case Kh:return"[object Set]";case Eh:return"[object WeakMap]"}return b});var ch=ke?Oc:ad,xg=Cg(ld),Gd=sh||function(a,b){return ma.setTimeout(a,b)},ig=Cg(Dd),Hg=function(a){a=wc(a,function(a){return 500===b.size&&b.clear(),a});var b=a.cache;return a}(function(a){var b=
[];return Fb.test(a)&&b.push(""),a.replace(hb,function(a,c,d,e){b.push(d?e.replace(Ha,"$1"):c||a)}),b}),dh=Da(function(a,b){return Db(a)?Tc(a,Cb(b,1,Db,!0)):[]}),eh=Da(function(a,b){var c=Vb(b);return Db(c)&&(c=O),Db(a)?Tc(a,Cb(b,1,Db,!0),xa(c,2)):[]}),Zh=Da(function(a,b){var c=Vb(b);return Db(c)&&(c=O),Db(a)?Tc(a,Cb(b,1,Db,!0),O,c):[]}),Wd=Da(function(a){var b=p(a,fd);return b.length&&b[0]===a[0]?je(b):[]}),fh=Da(function(a){var b=Vb(a),c=p(a,fd);return b===Vb(c)?b=O:c.pop(),c.length&&c[0]===a[0]?
je(c,xa(b,2)):[]}),jg=Da(function(a){var b=Vb(a),c=p(a,fd);return(b="function"==typeof b?b:O)&&c.pop(),c.length&&c[0]===a[0]?je(c,O,b):[]}),Lh=Da(Bf),Mh=Hd(function(a,b){var c=null==a?0:a.length,d=xe(a,b);return Rf(a,p(b,function(a){return md(a,c)?+a:a}).sort(Ie)),d}),Nh=Da(function(a){return gd(Cb(a,1,Db,!0))}),Oh=Da(function(a){var b=Vb(a);return Db(b)&&(b=O),gd(Cb(a,1,Db,!0),xa(b,2))}),Ph=Da(function(a){var b=Vb(a),b="function"==typeof b?b:O;return gd(Cb(a,1,Db,!0),O,b)}),gh=Da(function(a,b){return Db(a)?
Tc(a,b):[]}),Yf=Da(function(a){return Ic(h(a,Db))}),wf=Da(function(a){var b=Vb(a);return Db(b)&&(b=O),Ic(h(a,Db),xa(b,2))}),Xf=Da(function(a){var b=Vb(a),b="function"==typeof b?b:O;return Ic(h(a,Db),O,b)}),Fh=Da(Te),mh=Da(function(a){var b=a.length,b=1<b?a[b-1]:O,b="function"==typeof b?(a.pop(),b):O;return nd(a,b)}),yg=Hd(function(a){function b(c){return xe(c,a)}var c=a.length,d=c?a[0]:0,e=this.__wrapped__;return!(1<c||this.__actions__.length)&&e instanceof Fa&&md(d)?(e=e.slice(d,+d+(c?1:0)),e.__actions__.push({func:Ia,
args:[b],thisArg:O}),(new oa(e,this.__chain__)).thru(function(a){return c&&!a.length&&a.push(O),a})):this.thru(b)}),Gh=Je(function(a,b,c){fb.call(a,c)?++a[c]:Dc(a,c,1)}),hh=Of(Se),Ug=Of(Ae),Qh=Je(function(a,b,c){fb.call(a,c)?a[c].push(b):Dc(a,c,[b])}),$h=Da(function(a,b,c){var d=-1,f="function"==typeof b,g=$a(a)?Eb(a.length):[];return kd(a,function(a){g[++d]=f?e(b,a,c):Pc(a,b,c)}),g}),ai=Je(function(a,b,c){Dc(a,c,b)}),bi=Je(function(a,b,c){a[c?0:1].push(b)},function(){return[[],[]]}),ci=Da(function(a,
b){if(null==a)return[];var c=b.length;return 1<c&&Ub(a,b[0],b[1])?b=[]:2<c&&Ub(b[0],b[1],b[2])&&(b=[b[0]]),Fe(a,Cb(b,1),[])}),ih=rh||function(){return ma.Date.now()},vh=Da(function(a,b,c){var d=1;if(c.length)var e=U(c,pe(vh)),d=32|d;return Tb(a,d,b,c,e)}),wh=Da(function(a,b,c){var d=3;if(c.length)var e=U(c,pe(wh)),d=32|d;return Tb(b,d,a,c,e)}),di=Da(function(a,b){return ce(a,1,b)}),ei=Da(function(a,b,c){return ce(a,nc(b)||0,c)});wc.Cache=Ua;var Wh=Da(function(a,b){b=1==b.length&&Pa(b[0])?p(b[0],L(xa())):
p(Cb(b,1),L(xa()));var c=b.length;return Da(function(d){for(var f=-1,g=dc(d.length,c);++f<g;)d[f]=b[f].call(this,d[f]);return e(a,this,d)})}),nh=Da(function(a,b){return Tb(a,32,O,b,U(b,pe(nh)))}),oh=Da(function(a,b){return Tb(a,64,O,b,U(b,pe(oh)))}),Xh=Hd(function(a,b){return Tb(a,256,O,O,O,b)}),fi=lf(jd),gi=lf(function(a,b){return a>=b}),Jf=ye(function(){return arguments}())?ye:function(a){return wb(a)&&fb.call(a,"callee")&&!Ec.call(a,"callee")},Pa=Eb.isArray,Ff=zd?L(zd):Ig,cf=Bh||ad,ph=sc?L(sc):
De,Hh=ve?L(ve):kg,Xg=mb?L(mb):Jg,Xe=Qb?L(Qb):df,Kf=Qd?L(Qd):mg,jh=lf(de),Rh=lf(function(a,b){return a<=b}),Wb=ue(function(a,b){if(Oa(b)||$a(b))hd(b,zb(b),a);else for(var c in b)fb.call(b,c)&&Cc(a,c,b[c])}),qh=ue(function(a,b){hd(b,Fc(b),a)}),ae=ue(function(a,b,c,d){hd(b,Fc(b),a,d)}),$g=ue(function(a,b,c,d){hd(b,zb(b),a,d)}),Sh=Hd(xe),hi=Da(function(a){return a.push(O,Xc),e(ae,O,a)}),ii=Da(function(a){return a.push(O,Pe),e(Eg,O,a)}),xh=Xb(function(a,b,c){a[b]=c},P(xc)),yh=Xb(function(a,b,c){fb.call(a,
b)?a[b].push(c):a[b]=[c]},xa),Th=Da(Pc),Uh=ue(function(a,b,c){dd(a,b,c)}),Eg=ue(function(a,b,c,d){dd(a,b,c,d)}),zh=Hd(function(a,b){var c={};if(null==a)return c;var d=!1;b=p(b,function(b){return b=yb(b,a),d||(d=1<b.length),b});hd(a,Ag(a),c);d&&(c=Rb(c,7,Zf));for(var e=b.length;e--;)va(c,b[e]);return c}),ji=Hd(function(a,b){return null==a?{}:Lg(a,b)}),Ih=fe(zb),Ah=fe(Fc),ki=ec(function(a,b,c){return b=b.toLowerCase(),a+(c?Jb(b):b)}),Bd=ec(function(a,b,c){return a+(c?"-":"")+b.toLowerCase()}),mi=ec(function(a,
b,c){return a+(c?" ":"")+b.toLowerCase()}),ni=Nf("toLowerCase"),oi=ec(function(a,b,c){return a+(c?"_":"")+b.toLowerCase()}),pi=ec(function(a,b,c){return a+(c?" ":"")+Vh(b)}),qi=ec(function(a,b,c){return a+(c?" ":"")+b.toUpperCase()}),Vh=Nf("toUpperCase"),li=Da(function(a,b){try{return e(a,O,b)}catch(c){return Ld(c)?c:new gg(c)}}),ri=Hd(function(a,b){return d(b,function(b){b=Lc(b);Dc(a,b,vh(a[b],a))}),a}),wi=pg(),si=pg(!0),ti=Da(function(a,b){return function(c){return Pc(c,a,b)}}),ui=Da(function(a,
b){return function(c){return Pc(a,c,b)}}),vi=jf(p),xi=jf(n),yi=jf(q),zi=kf(),Ai=kf(!0),Bi=ee(function(a,b){return a+b},0),Ci=sa("ceil"),Di=ee(function(a,b){return a/b},1),Ei=sa("floor"),Fi=ee(function(a,b){return a*b},1),Gi=sa("round"),Hi=ee(function(a,b){return a-b},0);return R.after=function(a,b){if("function"!=typeof b)throw new jc("Expected a function");return a=Na(a),function(){if(1>--a)return b.apply(this,arguments)}},R.ary=Yd,R.assign=Wb,R.assignIn=qh,R.assignInWith=ae,R.assignWith=$g,R.at=
Sh,R.before=Ue,R.bind=vh,R.bindAll=ri,R.bindKey=wh,R.castArray=function(){if(!arguments.length)return[];var a=arguments[0];return Pa(a)?a:[a]},R.chain=ka,R.chunk=function(a,b,c){if(b=(c?Ub(a,b,c):b===O)?1:Ob(Na(b),0),c=null==a?0:a.length,!c||1>b)return[];for(var d=0,e=0,f=Eb(If(c/b));d<c;)f[e++]=fc(a,d,d+=b);return f},R.compact=function(a){for(var b=-1,c=null==a?0:a.length,d=0,e=[];++b<c;){var f=a[b];f&&(e[d++]=f)}return e},R.concat=function(){var a=arguments.length;if(!a)return[];for(var b=Eb(a-
1),c=arguments[0];a--;)b[a-1]=arguments[a];return r(Pa(c)?Pb(c):[c],Cb(b,1))},R.cond=function(a){var b=null==a?0:a.length,c=xa();return a=b?p(a,function(a){if("function"!=typeof a[1])throw new jc("Expected a function");return[c(a[0]),a[1]]}):[],Da(function(c){for(var d=-1;++d<b;){var f=a[d];if(e(f[0],this,c))return e(f[1],this,c)}})},R.conforms=function(a){return id(Rb(a,1))},R.constant=P,R.countBy=Gh,R.create=function(a,b){var c=me(a);return null==b?c:tf(c,b)},R.curry=Ve,R.curryRight=Dg,R.debounce=
Df,R.defaults=hi,R.defaultsDeep=ii,R.defer=di,R.delay=ei,R.difference=dh,R.differenceBy=eh,R.differenceWith=Zh,R.drop=function(a,b,c){var d=null==a?0:a.length;return d?(b=c||b===O?1:Na(b),fc(a,0>b?0:b,d)):[]},R.dropRight=function(a,b,c){var d=null==a?0:a.length;return d?(b=c||b===O?1:Na(b),b=d-b,fc(a,0,0>b?0:b)):[]},R.dropRightWhile=function(a,b){return a&&a.length?he(a,xa(b,3),!0,!0):[]},R.dropWhile=function(a,b){return a&&a.length?he(a,xa(b,3),!0):[]},R.fill=function(a,b,c,d){var e=null==a?0:a.length;
if(!e)return[];c&&"number"!=typeof c&&Ub(a,b,c)&&(c=0,d=e);e=a.length;c=Na(c);0>c&&(c=-c>e?0:e+c);d=d===O||d>e?e:Na(d);0>d&&(d+=e);for(d=c>d?0:Yg(d);c<d;)a[c++]=b;return a},R.filter=function(a,b){return(Pa(a)?h:ie)(a,xa(b,3))},R.flatMap=function(a,b){return Cb(Cf(a,b),1)},R.flatMapDeep=function(a,b){return Cb(Cf(a,b),aa)},R.flatMapDepth=function(a,b,c){return c=c===O?1:Na(c),Cb(Cf(a,b),c)},R.flatten=Mc,R.flattenDeep=function(a){return(null==a?0:a.length)?Cb(a,aa):[]},R.flattenDepth=function(a,b){return null!=
a&&a.length?(b=b===O?1:Na(b),Cb(a,b)):[]},R.flip=function(a){return Tb(a,512)},R.flow=wi,R.flowRight=si,R.fromPairs=function(a){for(var b=-1,c=null==a?0:a.length,d={};++b<c;){var e=a[b];d[e[0]]=e[1]}return d},R.functions=function(a){return null==a?[]:cc(a,zb(a))},R.functionsIn=function(a){return null==a?[]:cc(a,Fc(a))},R.groupBy=Qh,R.initial=function(a){return(null==a?0:a.length)?fc(a,0,-1):[]},R.intersection=Wd,R.intersectionBy=fh,R.intersectionWith=jg,R.invert=xh,R.invertBy=yh,R.invokeMap=$h,R.iteratee=
Uc,R.keyBy=ai,R.keys=zb,R.keysIn=Fc,R.map=Cf,R.mapKeys=function(a,b){var c={};return b=xa(b,3),Ib(a,function(a,d,e){Dc(c,b(a,d,e),a)}),c},R.mapValues=function(a,b){var c={};return b=xa(b,3),Ib(a,function(a,d,e){Dc(c,d,b(a,d,e))}),c},R.matches=function(a){return Ee(Rb(a,1))},R.matchesProperty=function(a,b){return ff(a,Rb(b,1))},R.memoize=wc,R.merge=Uh,R.mergeWith=Eg,R.method=ti,R.methodOf=ui,R.mixin=ya,R.negate=We,R.nthArg=function(a){return a=Na(a),Da(function(b){return gf(b,a)})},R.omit=zh,R.omitBy=
function(a,b){return fg(a,We(xa(b)))},R.once=function(a){return Ue(2,a)},R.orderBy=function(a,b,c,d){return null==a?[]:(Pa(b)||(b=null==b?[]:[b]),c=d?O:c,Pa(c)||(c=null==c?[]:[c]),Fe(a,b,c))},R.over=vi,R.overArgs=Wh,R.overEvery=xi,R.overSome=yi,R.partial=nh,R.partialRight=oh,R.partition=bi,R.pick=ji,R.pickBy=fg,R.property=Va,R.propertyOf=function(a){return function(b){return null==a?O:ic(a,b)}},R.pull=Lh,R.pullAll=Bf,R.pullAllBy=function(a,b,c){return a&&a.length&&b&&b.length?Ge(a,b,xa(c,2)):a},R.pullAllWith=
function(a,b,c){return a&&a.length&&b&&b.length?Ge(a,b,O,c):a},R.pullAt=Mh,R.range=zi,R.rangeRight=Ai,R.rearg=Xh,R.reject=function(a,b){return(Pa(a)?h:ie)(a,We(xa(b,3)))},R.remove=function(a,b){var c=[];if(!a||!a.length)return c;var d=-1,e=[],f=a.length;for(b=xa(b,3);++d<f;){var g=a[d];b(g,d,a)&&(c.push(g),e.push(d))}return Rf(a,e),c},R.rest=function(a,b){if("function"!=typeof a)throw new jc("Expected a function");return b=b===O?b:Na(b),Da(a,b)},R.reverse=Yc,R.sampleSize=function(a,b,c){return b=
(c?Ub(a,b,c):b===O)?1:Na(b),(Pa(a)?bd:rg)(a,b)},R.set=function(a,b,c){return null==a?a:xd(a,b,c)},R.setWith=function(a,b,c,d){return d="function"==typeof d?d:O,null==a?a:xd(a,b,c,d)},R.shuffle=function(a){return(Pa(a)?qf:kh)(a)},R.slice=function(a,b,c){var d=null==a?0:a.length;return d?(c&&"number"!=typeof c&&Ub(a,b,c)?(b=0,c=d):(b=null==b?0:Na(b),c=c===O?d:Na(c)),fc(a,b,c)):[]},R.sortBy=ci,R.sortedUniq=function(a){return a&&a.length?vd(a):[]},R.sortedUniqBy=function(a,b){return a&&a.length?vd(a,
xa(b,2)):[]},R.split=function(a,b,c){return c&&"number"!=typeof c&&Ub(a,b,c)&&(b=c=O),c=c===O?4294967295:c>>>0,c?(a=eb(a))&&("string"==typeof b||null!=b&&!Xg(b))&&(b=Nb(b),!b&&na.test(a))?Sc(ea(a),0,c):a.split(b,c):[]},R.spread=function(a,b){if("function"!=typeof a)throw new jc("Expected a function");return b=null==b?0:Ob(Na(b),0),Da(function(c){var d=c[b];return c=Sc(c,0,b),d&&r(c,d),e(a,this,c)})},R.tail=function(a){var b=null==a?0:a.length;return b?fc(a,1,b):[]},R.take=function(a,b,c){return a&&
a.length?(b=c||b===O?1:Na(b),fc(a,0,0>b?0:b)):[]},R.takeRight=function(a,b,c){var d=null==a?0:a.length;return d?(b=c||b===O?1:Na(b),b=d-b,fc(a,0>b?0:b,d)):[]},R.takeRightWhile=function(a,b){return a&&a.length?he(a,xa(b,3),!1,!0):[]},R.takeWhile=function(a,b){return a&&a.length?he(a,xa(b,3)):[]},R.tap=function(a,b){return b(a),a},R.throttle=function(a,b,c){var d=!0,e=!0;if("function"!=typeof a)throw new jc("Expected a function");return Qa(c)&&(d="leading"in c?!!c.leading:d,e="trailing"in c?!!c.trailing:
e),Df(a,b,{leading:d,maxWait:b,trailing:e})},R.thru=Ia,R.toArray=pd,R.toPairs=Ih,R.toPairsIn=Ah,R.toPath=function(a){return Pa(a)?p(a,Lc):mc(a)?[a]:Pb(Hg(eb(a)))},R.toPlainObject=$c,R.transform=function(a,b,c){var e=Pa(a),f=e||cf(a)||Kf(a);if(b=xa(b,4),null==c){var g=a&&a.constructor;c=f?e?new g:[]:Qa(a)&&Oc(g)?me(Z(a)):{}}return(f?d:Ib)(a,function(a,d,e){return b(c,a,d,e)}),c},R.unary=function(a){return Yd(a,1)},R.union=Nh,R.unionBy=Oh,R.unionWith=Ph,R.uniq=function(a){return a&&a.length?gd(a):[]},
R.uniqBy=function(a,b){return a&&a.length?gd(a,xa(b,2)):[]},R.uniqWith=function(a,b){return b="function"==typeof b?b:O,a&&a.length?gd(a,O,b):[]},R.unset=function(a,b){return null==a||va(a,b)},R.unzip=Te,R.unzipWith=nd,R.update=function(a,b,c){return null==a?a:xd(a,b,Hc(c)(ic(a,b)),void 0)},R.updateWith=function(a,b,c,d){return d="function"==typeof d?d:O,null!=a&&(a=xd(a,b,Hc(c)(ic(a,b)),d)),a},R.values=re,R.valuesIn=function(a){return null==a?[]:x(a,Fc(a))},R.without=gh,R.words=Ze,R.wrap=function(a,
b){return nh(Hc(b),a)},R.xor=Yf,R.xorBy=wf,R.xorWith=Xf,R.zip=Fh,R.zipObject=function(a,b){return qb(a||[],b||[],Cc)},R.zipObjectDeep=function(a,b){return qb(a||[],b||[],xd)},R.zipWith=mh,R.entries=Ih,R.entriesIn=Ah,R.extend=qh,R.extendWith=ae,ya(R,R),R.add=Bi,R.attempt=li,R.camelCase=ki,R.capitalize=Jb,R.ceil=Ci,R.clamp=function(a,b,c){return c===O&&(c=b,b=O),c!==O&&(c=nc(c),c=c===c?c:0),b!==O&&(b=nc(b),b=b===b?b:0),Ad(nc(a),b,c)},R.clone=function(a){return Rb(a,4)},R.cloneDeep=function(a){return Rb(a,
5)},R.cloneDeepWith=function(a,b){return b="function"==typeof b?b:O,Rb(a,5,b)},R.cloneWith=function(a,b){return b="function"==typeof b?b:O,Rb(a,4,b)},R.conformsTo=function(a,b){return null==b||Rd(a,b,zb(b))},R.deburr=Zg,R.defaultTo=function(a,b){return null==a||a!==a?b:a},R.divide=Di,R.endsWith=function(a,b,c){a=eb(a);b=Nb(b);var d=a.length,d=c=c===O?d:Ad(Na(c),0,d);return c-=b.length,0<=c&&a.slice(c,d)==b},R.eq=Nc,R.escape=function(a){return(a=eb(a))&&C.test(a)?a.replace(za,cd):a},R.escapeRegExp=
function(a){return(a=eb(a))&&Za.test(a)?a.replace(Ga,"\\$&"):a},R.every=function(a,b,c){var d=Pa(a)?n:Uf;return c&&Ub(a,b,c)&&(b=O),d(a,xa(b,3))},R.find=hh,R.findIndex=Se,R.findKey=function(a,b){return w(a,xa(b,3),Ib)},R.findLast=Ug,R.findLastIndex=Ae,R.findLastKey=function(a,b){return w(a,xa(b,3),tc)},R.floor=Ei,R.forEach=od,R.forEachRight=qe,R.forIn=function(a,b){return null==a?a:Ud(a,xa(b,3),Fc)},R.forInRight=function(a,b){return null==a?a:Vd(a,xa(b,3),Fc)},R.forOwn=function(a,b){return a&&Ib(a,
xa(b,3))},R.forOwnRight=function(a,b){return a&&tc(a,xa(b,3))},R.get=Ye,R.gt=fi,R.gte=gi,R.has=function(a,b){return null!=a&&Bg(a,b,Me)},R.hasIn=$d,R.head=Wg,R.identity=xc,R.includes=function(a,b,c,d){return a=$a(a)?a:re(a),c=c&&!d?Na(c):0,d=a.length,0>c&&(c=Ob(d+c,0)),Gf(a)?c<=d&&-1<a.indexOf(b,c):!!d&&-1<v(a,b,c)},R.indexOf=function(a,b,c){var d=null==a?0:a.length;return d?(c=null==c?0:Na(c),0>c&&(c=Ob(d+c,0)),v(a,b,c)):-1},R.inRange=function(a,b,c){return b=Zc(b),c===O?(c=b,b=0):c=Zc(c),a=nc(a),
a>=dc(b,c)&&a<Ob(b,c)},R.invoke=Th,R.isArguments=Jf,R.isArray=Pa,R.isArrayBuffer=Ff,R.isArrayLike=$a,R.isArrayLikeObject=Db,R.isBoolean=function(a){return!0===a||!1===a||wb(a)&&"[object Boolean]"==Bb(a)},R.isBuffer=cf,R.isDate=ph,R.isElement=function(a){return wb(a)&&1===a.nodeType&&!Nd(a)},R.isEmpty=function(a){if(null==a)return!0;if($a(a)&&(Pa(a)||"string"==typeof a||"function"==typeof a.splice||cf(a)||Kf(a)||Jf(a)))return!a.length;var b=uc(a);if("[object Map]"==b||"[object Set]"==b)return!a.size;
if(Oa(a))return!Ac(a).length;for(var c in a)if(fb.call(a,c))return!1;return!0},R.isEqual=function(a,b){return yc(a,b)},R.isEqualWith=function(a,b,c){var d=(c="function"==typeof c?c:O)?c(a,b):O;return d===O?yc(a,b,O,c):!!d},R.isError=Ld,R.isFinite=function(a){return"number"==typeof a&&th(a)},R.isFunction=Oc,R.isInteger=Ef,R.isLength=Zd,R.isMap=Hh,R.isMatch=function(a,b){return a===b||sd(a,b,Qe(b))},R.isMatchWith=function(a,b,c){return c="function"==typeof c?c:O,sd(a,b,Qe(b),c)},R.isNaN=function(a){return Md(a)&&
a!=+a},R.isNative=function(a){if(ch(a))throw new gg("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Lf(a)},R.isNil=function(a){return null==a},R.isNull=function(a){return null===a},R.isNumber=Md,R.isObject=Qa,R.isObjectLike=wb,R.isPlainObject=Nd,R.isRegExp=Xg,R.isSafeInteger=function(a){return Ef(a)&&-9007199254740991<=a&&9007199254740991>=a},R.isSet=Xe,R.isString=Gf,R.isSymbol=mc,R.isTypedArray=Kf,R.isUndefined=function(a){return a===O},R.isWeakMap=function(a){return wb(a)&&
"[object WeakMap]"==uc(a)},R.isWeakSet=function(a){return wb(a)&&"[object WeakSet]"==Bb(a)},R.join=function(a,b){return null==a?"":ah.call(a,b)},R.kebabCase=Bd,R.last=Vb,R.lastIndexOf=function(a,b,c){var d=null==a?0:a.length;if(!d)return-1;var e=d;if(c!==O&&(e=Na(c),e=0>e?Ob(d+e,0):dc(e,d-1)),b===b){for(c=e+1;c--&&a[c]!==b;);a=c}else a=u(a,A,e,!0);return a},R.lowerCase=mi,R.lowerFirst=ni,R.lt=jh,R.lte=Rh,R.max=function(a){return a&&a.length?Sd(a,xc,jd):O},R.maxBy=function(a,b){return a&&a.length?
Sd(a,xa(b,2),jd):O},R.mean=function(a){return K(a,xc)},R.meanBy=function(a,b){return K(a,xa(b,2))},R.min=function(a){return a&&a.length?Sd(a,xc,de):O},R.minBy=function(a,b){return a&&a.length?Sd(a,xa(b,2),de):O},R.stubArray=$e,R.stubFalse=ad,R.stubObject=function(){return{}},R.stubString=function(){return""},R.stubTrue=function(){return!0},R.multiply=Fi,R.nth=function(a,b){return a&&a.length?gf(a,Na(b)):O},R.noConflict=function(){return ma._===this&&(ma._=Cd),this},R.noop=Zb,R.now=ih,R.pad=function(a,
b,c){a=eb(a);var d=(b=Na(b))?X(a):0;return!b||d>=b?a:(b=(b-d)/2,Rc(vg(b),c)+a+Rc(If(b),c))},R.padEnd=function(a,b,c){a=eb(a);var d=(b=Na(b))?X(a):0;return b&&d<b?a+Rc(b-d,c):a},R.padStart=function(a,b,c){a=eb(a);var d=(b=Na(b))?X(a):0;return b&&d<b?Rc(b-d,c)+a:a},R.parseInt=function(a,b,c){return c||null==b?b=0:b&&(b=+b),Sg(eb(a).replace(Gb,""),b||0)},R.random=function(a,b,c){if(c&&"boolean"!=typeof c&&Ub(a,b,c)&&(b=c=O),c===O&&("boolean"==typeof b?(c=b,b=O):"boolean"==typeof a&&(c=a,a=O)),a===O&&
b===O?(a=0,b=1):(a=Zc(a),b===O?(b=a,a=0):b=Zc(b)),a>b){var d=a;a=b;b=d}return c||a%1||b%1?(c=le(),dc(a+c*(b-a+La("1e-"+((c+"").length-1))),b)):Sf(a,b)},R.reduce=function(a,b,c){var d=Pa(a)?t:B,e=3>arguments.length;return d(a,xa(b,4),c,e,kd)},R.reduceRight=function(a,b,c){var d=Pa(a)?l:B,e=3>arguments.length;return d(a,xa(b,4),c,e,ne)},R.repeat=function(a,b,c){return b=(c?Ub(a,b,c):b===O)?1:Na(b),Pd(eb(a),b)},R.replace=function(){var a=arguments,b=eb(a[0]);return 3>a.length?b:b.replace(a[1],a[2])},
R.result=function(a,b,c){b=yb(b,a);var d=-1,e=b.length;for(e||(e=1,a=O);++d<e;){var f=null==a?O:a[Lc(b[d])];f===O&&(d=e,f=c);a=Oc(f)?f.call(a):f}return a},R.round=Gi,R.runInContext=Ke,R.sample=function(a){return(Pa(a)?rc:Ng)(a)},R.size=function(a){if(null==a)return 0;if($a(a))return Gf(a)?X(a):a.length;var b=uc(a);return"[object Map]"==b||"[object Set]"==b?a.size:Ac(a).length},R.snakeCase=oi,R.some=function(a,b,c){var d=Pa(a)?q:hf;return c&&Ub(a,b,c)&&(b=O),d(a,xa(b,3))},R.sortedIndex=function(a,
b){return se(a,b)},R.sortedIndexBy=function(a,b,c){return ge(a,b,xa(c,2))},R.sortedIndexOf=function(a,b){var c=null==a?0:a.length;if(c){var d=se(a,b);if(d<c&&Nc(a[d],b))return d}return-1},R.sortedLastIndex=function(a,b){return se(a,b,!0)},R.sortedLastIndexBy=function(a,b,c){return ge(a,b,xa(c,2),!0)},R.sortedLastIndexOf=function(a,b){if(null==a?0:a.length){var c=se(a,b,!0)-1;if(Nc(a[c],b))return c}return-1},R.startCase=pi,R.startsWith=function(a,b,c){return a=eb(a),c=null==c?0:Ad(Na(c),0,a.length),
b=Nb(b),a.slice(c,c+b.length)==b},R.subtract=Hi,R.sum=function(a){return a&&a.length?G(a,xc):0},R.sumBy=function(a,b){return a&&a.length?G(a,xa(b,2)):0},R.template=function(a,b,c){var d=R.templateSettings;c&&Ub(a,b,c)&&(b=O);a=eb(a);b=ae({},b,d,Xc);c=ae({},b.imports,d.imports,Xc);var e,f,g=zb(c),h=x(c,g),l=0;c=b.interpolate||la;var m="__p+='";c=ua((b.escape||la).source+"|"+c.source+"|"+(c===Ka?sb:la).source+"|"+(b.evaluate||la).source+"|$","g");var n="sourceURL"in b?"//# sourceURL="+b.sourceURL+"\n":
"";if(a.replace(c,function(b,c,d,g,h,n){return d||(d=g),m+=a.slice(l,n).replace(jb,V),c&&(e=!0,m+="'+__e("+c+")+'"),h&&(f=!0,m+="';"+h+";\n__p+='"),d&&(m+="'+((__t=("+d+"))==null?'':__t)+'"),l=n+b.length,b}),m+="';",(b=b.variable)||(m="with(obj){"+m+"}"),m=(f?m.replace(da,""):m).replace(ha,"$1").replace(Ba,"$1;"),m="function("+(b||"obj")+"){"+(b?"":"obj||(obj={});")+"var __t,__p=''"+(e?",__e=_.escape":"")+(f?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+m+"return __p}",
b=li(function(){return Be(g,n+"return "+m).apply(O,h)}),b.source=m,Ld(b))throw b;return b},R.times=function(a,b){if(a=Na(a),1>a||9007199254740991<a)return[];var c=4294967295,d=dc(a,4294967295);b=xa(b);a-=4294967295;for(d=I(d,b);++c<a;)b(c);return d},R.toFinite=Zc,R.toInteger=Na,R.toLength=Yg,R.toLower=function(a){return eb(a).toLowerCase()},R.toNumber=nc,R.toSafeInteger=function(a){return a?Ad(Na(a),-9007199254740991,9007199254740991):0===a?a:0},R.toString=eb,R.toUpper=function(a){return eb(a).toUpperCase()},
R.trim=function(a,b,c){return(a=eb(a))&&(c||b===O)?a.replace(ab,""):a&&(b=Nb(b))?(a=ea(a),c=ea(b),b=D(a,c),c=J(a,c)+1,Sc(a,b,c).join("")):a},R.trimEnd=function(a,b,c){return(a=eb(a))&&(c||b===O)?a.replace(ib,""):a&&(b=Nb(b))?(a=ea(a),b=J(a,ea(b))+1,Sc(a,0,b).join("")):a},R.trimStart=function(a,b,c){return(a=eb(a))&&(c||b===O)?a.replace(Gb,""):a&&(b=Nb(b))?(a=ea(a),b=D(a,ea(b)),Sc(a,b).join("")):a},R.truncate=function(a,b){var c=30,d="...";if(Qa(b))var e="separator"in b?b.separator:e,c="length"in b?
Na(b.length):c,d="omission"in b?Nb(b.omission):d;a=eb(a);var f=a.length;if(na.test(a))var g=ea(a),f=g.length;if(c>=f)return a;if(f=c-X(d),1>f)return d;if(c=g?Sc(g,0,f).join(""):a.slice(0,f),e===O)return c+d;if(g&&(f+=c.length-f),Xg(e)){if(a.slice(f).search(e)){var h=c;e.global||(e=ua(e.source,eb(Ta.exec(e))+"g"));for(e.lastIndex=0;g=e.exec(h);)var l=g.index;c=c.slice(0,l===O?f:l)}}else a.indexOf(Nb(e),f)!=f&&(e=c.lastIndexOf(e),-1<e&&(c=c.slice(0,e)));return c+d},R.unescape=function(a){return(a=eb(a))&&
pa.test(a)?a.replace(y,gc):a},R.uniqueId=function(a){var b=++Fg;return eb(a)+b},R.upperCase=qi,R.upperFirst=Vh,R.each=od,R.eachRight=qe,R.first=Wg,ya(R,function(){var a={};return Ib(R,function(b,c){fb.call(R.prototype,c)||(a[c]=b)}),a}(),{chain:!1}),R.VERSION="4.17.4",d("bind bindKey curry curryRight partial partialRight".split(" "),function(a){R[a].placeholder=R}),d(["drop","take"],function(a,b){Fa.prototype[a]=function(c){c=c===O?1:Ob(Na(c),0);var d=this.__filtered__&&!b?new Fa(this):this.clone();
return d.__filtered__?d.__takeCount__=dc(c,d.__takeCount__):d.__views__.push({size:dc(c,4294967295),type:a+(0>d.__dir__?"Right":"")}),d};Fa.prototype[a+"Right"]=function(b){return this.reverse()[a](b).reverse()}}),d(["filter","map","takeWhile"],function(a,b){var c=b+1,d=1==c||3==c;Fa.prototype[a]=function(a){var b=this.clone();return b.__iteratees__.push({iteratee:xa(a,3),type:c}),b.__filtered__=b.__filtered__||d,b}}),d(["head","last"],function(a,b){var c="take"+(b?"Right":"");Fa.prototype[a]=function(){return this[c](1).value()[0]}}),
d(["initial","tail"],function(a,b){var c="drop"+(b?"":"Right");Fa.prototype[a]=function(){return this.__filtered__?new Fa(this):this[c](1)}}),Fa.prototype.compact=function(){return this.filter(xc)},Fa.prototype.find=function(a){return this.filter(a).head()},Fa.prototype.findLast=function(a){return this.reverse().find(a)},Fa.prototype.invokeMap=Da(function(a,b){return"function"==typeof a?new Fa(this):this.map(function(c){return Pc(c,a,b)})}),Fa.prototype.reject=function(a){return this.filter(We(xa(a)))},
Fa.prototype.slice=function(a,b){a=Na(a);var c=this;return c.__filtered__&&(0<a||0>b)?new Fa(c):(0>a?c=c.takeRight(-a):a&&(c=c.drop(a)),b!==O&&(b=Na(b),c=0>b?c.dropRight(-b):c.take(b-a)),c)},Fa.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},Fa.prototype.toArray=function(){return this.take(4294967295)},Ib(Fa.prototype,function(a,b){var c=/^(?:filter|find|map|reject)|While$/.test(b),d=/^(?:head|last)$/.test(b),e=R[d?"take"+("last"==b?"Right":""):b],f=d||/^find/.test(b);
e&&(R.prototype[b]=function(){function b(a){return a=e.apply(R,r([a],h)),d&&p?a[0]:a}var g=this.__wrapped__,h=d?[1]:arguments,l=g instanceof Fa,m=h[0],n=l||Pa(g);n&&c&&"function"==typeof m&&1!=m.length&&(l=n=!1);var p=this.__chain__,q=!!this.__actions__.length,m=f&&!p,l=l&&!q;return!f&&n?(g=l?g:new Fa(this),g=a.apply(g,h),g.__actions__.push({func:Ia,args:[b],thisArg:O}),new oa(g,p)):m&&l?a.apply(this,h):(g=this.thru(b),m?d?g.value()[0]:g.value():g)})}),d("pop push shift sort splice unshift".split(" "),
function(a){var b=uf[a],c=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",d=/^(?:pop|shift)$/.test(a);R.prototype[a]=function(){var a=arguments;if(d&&!this.__chain__){var e=this.value();return b.apply(Pa(e)?e:[],a)}return this[c](function(c){return b.apply(Pa(c)?c:[],a)})}}),Ib(Fa.prototype,function(a,b){var c=R[b];if(c){var d=c.name+"";(vb[d]||(vb[d]=[])).push({name:b,func:c})}}),vb[kb(O,2).name]=[{name:"wrapper",func:O}],Fa.prototype.clone=function(){var a=new Fa(this.__wrapped__);return a.__actions__=
Pb(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=Pb(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=Pb(this.__views__),a},Fa.prototype.reverse=function(){if(this.__filtered__){var a=new Fa(this);a.__dir__=-1;a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a},Fa.prototype.value=function(){var a,b=this.__wrapped__.value(),c=this.__dir__,d=Pa(b),e=0>c,f=d?b.length:0;a=f;for(var g=this.__views__,h=0,l=-1,m=g.length;++l<m;){var n=
g[l],p=n.size;switch(n.type){case "drop":h+=p;break;case "dropRight":a-=p;break;case "take":a=dc(a,h+p);break;case "takeRight":h=Ob(h,a-p)}}if(a={start:h,end:a},g=a.start,h=a.end,a=h-g,g=e?h:g-1,h=this.__iteratees__,l=h.length,m=0,n=dc(a,this.__takeCount__),!d||!e&&f==a&&n==a)return Pf(b,this.__actions__);d=[];a:for(;a--&&m<n;){g+=c;e=-1;for(f=b[g];++e<l;){var q=h[e],p=q.type,q=(0,q.iteratee)(f);if(2==p)f=q;else if(!q){if(1==p)continue a;break a}}d[m++]=f}return d},R.prototype.at=yg,R.prototype.chain=
function(){return ka(this)},R.prototype.commit=function(){return new oa(this.value(),this.__chain__)},R.prototype.next=function(){this.__values__===O&&(this.__values__=pd(this.value()));var a=this.__index__>=this.__values__.length;return{done:a,value:a?O:this.__values__[this.__index__++]}},R.prototype.plant=function(a){for(var b,c=this;c instanceof ja;){var d=Af(c);d.__index__=0;d.__values__=O;b?e.__wrapped__=d:b=d;var e=d,c=c.__wrapped__}return e.__wrapped__=a,b},R.prototype.reverse=function(){var a=
this.__wrapped__;return a instanceof Fa?(this.__actions__.length&&(a=new Fa(this)),a=a.reverse(),a.__actions__.push({func:Ia,args:[Yc],thisArg:O}),new oa(a,this.__chain__)):this.thru(Yc)},R.prototype.toJSON=R.prototype.valueOf=R.prototype.value=function(){return Pf(this.__wrapped__,this.__actions__)},R.prototype.first=R.prototype.head,af&&(R.prototype[af]=eg),R}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(ma._=bc,define(function(){return bc})):Ua?((Ua.exports=bc)._=bc,cb._=
bc):ma._=bc}).call(this);var current_measurements=void 0,filters={},graph,selections={},store={},measurements={},selectionCount=0,selectionType="Random",selectionAuto=!1,selectionDrag=!1,selectionDown=!1,currentSource=null;
function initialize_dropdown(a){$("#select-type").dropdown({allowTab:!1,onChange:function(b,e,c){"Auto"===e?(selectionAuto=!0,$("#sample-type").removeClass("disabled"),$("#sample-size").removeClass("disabled"),$("#sample-size-dropdown").removeClass("disabled"),$("#rightmenu .checkbox").checkbox("set disabled"),selectSamples()):(selectionAuto=!1,$("#sample-type").addClass("disabled"),$("#sample-size").addClass("disabled"),$("#sample-size-dropdown").addClass("disabled"),$("#rightmenu .checkbox").checkbox("set enabled"),
$("#rightmenu .checkbox").checkbox("set unchecked"),$($("#source-"+a).parent().children()[1]).unbind("click"),$($("#source-"+a).children()[0]).click(function(){}));selections={};b=$("#count-"+currentSource);b.attr("data-selected",0);b.html(" (Selected: "+b.attr("data-selected")+" of "+b.attr("data-total")+")");$("#leftMenuCount span.data-count").text(b.attr("data-total"))}});$("#sample-type").dropdown({allowTab:!1,onChange:function(a,e,c){selectionType=e;selectSamples()}});$("#sample-size-dropdown").dropdown({allowTab:!1,
action:"select",onHide:function(){selectSamples()}});$("#sample-size").range({start:selectionCount,min:0,max:100,step:1,value:selectionCount,onChange:function(a,e){selectionCount=a;$("#sampleSizeValue").text(a+"% samples")}})}
function selectSamples(){if(selectionAuto&&0<selectionCount){var a=$('#rightmenu .content .ui.checkbox input[type="checkbox"]').filter(function(){return"none"!=$(this).parent().parent().css("display")}).toArray(),b=Math.round(a.length*selectionCount/100);selections={};_.each(a,function(a){$(a).parent().checkbox("set unchecked")});switch(selectionType){case "Random":a=_.sampleSize(a,b);_.each(a,function(a){if((null!=a.context&&"document"!=a.context||"number"!=typeof a)&&void 0!=$(a).parent().prop("id")){var b=
$(a).parent().prop("id").split("-");$(a).parent().checkbox("set checked");b[3]=_.join(_.slice(b,3),separator="-");selections[b[1]+"-"+b[2]+"-"+b[3]]=0}});break;case "Top":_.each(_.slice(a,0,b),function(a){if((null!=a.context&&"document"!=a.context||"number"!=typeof a)&&void 0!=$(a).parent().prop("id")){var b=$(a).parent().prop("id").split("-");$(a).parent().checkbox("set checked");b[3]=_.join(_.slice(b,3),separator="-");selections[b[1]+"-"+b[2]+"-"+b[3]]=0}})}a=$("#count-"+currentSource);a.attr("data-selected",
b);a.html(" (Selected: "+a.attr("data-selected")+" of "+a.attr("data-total")+")");$("#leftMenuCount span.data-count").text(a.attr("data-total"));toggleParent(currentSource)}}
function showModal(a,b,e){current_measurements=void 0;filters={};graph;selections={};store={};measurements={};selectionCount=0;selectionType="Random";selectionDown=selectionDrag=selectionAuto=!1;currentSource=null;$("#newmodal").remove();$("#resultmodal").remove();var c='<div id ="newmodal" class="ui long modal"><div class="header">Choose measurements from: '+a+'<div id="warning-message" class="ui negative message" style="display:none;"><i class="close icon"></i><div class="header">No measurements selected</div></div></div><div class="content m"><div class="ui grid"><div id="titleRow" class="row"><div class="four wide column">Filter Samples <div id="leftMenuCount" class="ui mini circular horizontal label"> <span class="data-count">0</span> of '+
b.length+'</div></div><div class="twelve wide column">Sample selection type: <div class="ui compact selection dropdown" id="select-type"><i class="dropdown icon"></i><div class="text">Manual</div><div class="menu"><div class="item" data-value="1">Auto</div><div class="item" data-value="default">Manual</div></div></div>select: <div class="ui disabled compact selection dropdown" id="sample-type"><i class="dropdown icon"></i><span class="text">Random</span><div class="menu"><div class="item" data-value="1">Random</div><div class="item" data-value="0">Top</div></div></div><div class="ui disabled compact dropdown" id="sample-size-dropdown"><i class="dropdown icon"></i><span class="text" id="sampleSizeValue">0%: samples</span><div class="menu"><div class="item"><div class="ui range disabled inline" style="width: 75px;"id="sample-size"></div></div></div></div></div></div><div id="leftRightRow" class="row"><div class="four wide column"><div id="leftmenu" class="ui vertical scrolling accordion menu"> </div></div><div class="twelve wide column"><div id="rightmenu" class="ui vertical fluid accordion menu"></div></div></div></div></div><div class="actions"><div class="ui grey button" id="cancel">Cancel</div><div class="ui primary button" id="ok">Ok</div></div></div><div id="resultmodal" class="ui modal"><div class="content"><div class="bounds"><table id="resultTable" class="ui sortable selectable striped table"></table></div></div><div class="actions"><div class="ui grey back button" id="cancel">Cancel</div><div class="ui primary button" id="ok">Ok</div></div></div>';
currentSource=a;measurements[a]=b;measurements[a]=_.sortBy(measurements[a],[function(a){return a.id}]);$("body").append(c);initialize_dropdown(a);$("#newmodal").modal({observeChanges:!0,closable:!1,selector:{deny:".ui.grey.button",approve:".ui.primary.button"},onDeny:function(){$("#leftmenu").empty();$("#rightmenu").empty();$("#resultmodal").remove()},onApprove:function(){if(0==$("#count-"+currentSource).attr("data-selected"))return $("#warning-message").show(),!1;storeMeasurement(measurements,e)}});
$("#newmodal").modal("show");loadMeasurements(a,b)}
function initialize(a){current_measurements=void 0;filters={};graph;selections={};store={};measurements={};selectionCount=0;selectionType="Random";selectionDown=selectionDrag=selectionAuto=!1;currentSource=null;$("#sourcemodal").remove();$("#resultmodal").remove();$("body").append('<div class="ui small modal" id="sourcemodal"><div class="header">Select Data Source</div><div class="content"><form class="ui form" id="form"></form></div><div class="actions"><div class="ui grey button" id="cancel">Cancel</div><div class="ui blue submit button" id="ok">Ok</div></div></div>');document.createElement("div").className=
"grouped fields";var b=document.createElement("table");b.className="ui selectable celled table compact";var e=document.createElement("tbody"),c=document.createElement("thead"),d=document.createElement("tr"),f=document.createElement("th");f.innerHTML="Data Source ID";d.appendChild(f);f=document.createElement("th");f.innerHTML="Description";d.appendChild(f);c.appendChild(d);b.appendChild(c);b.appendChild(e);$("form").append(b);Object.keys(a).forEach(function(b){var c=document.createElement("div"),d=
document.createElement("div"),f=document.createElement("input"),p=document.createElement("label");p.innerHTML=b;d.className="ui radio checkbox";f.type="radio";f.name="source";f.value=b;a[b][1]&&(f.checked="checked");c.className="field";d.appendChild(f);d.appendChild(p);c.appendChild(d);d=document.createElement("tr");f=document.createElement("td");f.appendChild(c);d.appendChild(f);d.id=b;f=document.createElement("td");f.innerHTML=a[b][0];d.appendChild(f);e.appendChild(d);$("#"+b).click(function(){$("#"+
b).find(".ui.checkbox").checkbox("check")})});$("#form").form()}
function attachActions(a){$('#rightmenu .ui.checkbox input[type="checkbox"]').click(function(a){a=this.id.split("-");a[1]=_.join(_.slice(a,1),separator="-");if("source"===a[0]){var e=-1!==$(this).parent().prop("class").indexOf("checked"),c=$(".ui.checkbox[id$="+a[1]+"]"),d=$("#count-"+a[1]),f=parseInt(d.attr("data-selected")),n=parseInt(d.attr("data-total"));$(this).parent().toggleClass("checked");$(this).parent().removeClass("hidden");$("#rightmenu").accordion("refresh");_.each(c,function(a){var b=
a.id.split("-");b[3]=_.join(_.slice(b,3),separator="-");e?($(a).checkbox("set unchecked"),delete selections[b[1]+"-"+b[2]+"-"+b[3]]):"none"!==$(a).parent().css("display")&&($(a).checkbox("set checked"),$(a).children().removeClass("hidden"),selections[b[1]+"-"+b[2]+"-"+b[3]]=0)});e?d.attr("data-selected",0):d.attr("data-selected",n);d.html(" (Selected: "+d.attr("data-selected")+" of "+d.attr("data-total")+")");$("#leftMenuCount span.data-count").text(d.attr("data-total"))}else e=-1!==$(this).parent().prop("class").indexOf("checked"),
a=$(this).parent().prop("id").split("-"),a[3]=_.join(_.slice(a,3),separator="-"),d=$("#count-"+a[3]),f=parseInt(d.attr("data-selected")),n=parseInt(d.attr("data-total")),e?($(this).parent().checkbox("set unchecked"),delete selections[a[1]+"-"+a[2]+"-"+a[3]]):($(this).parent().checkbox("set checked"),$(this).removeClass("hidden"),selections[a[1]+"-"+a[2]+"-"+a[3]]=0),d.attr("data-selected",e?f-1:f+1),d.html(" (Selected: "+d.attr("data-selected")+" of "+d.attr("data-total")+")"),$("#leftMenuCount span.data-count").text(d.attr("data-total")),
toggleParent(a[3])})}
function toggleParent(a){var b=$("#count-"+a),e=parseInt(b.attr("data-selected")),b=parseInt(b.attr("data-total"));0<e&&e!==b?($("#source-"+a).parent().checkbox("set indeterminate"),$("#source-"+a).removeClass("hidden")):e===b&&0!==b?($("#source-"+a).parent().checkbox("set checked"),$("#source-"+a).removeClass("hidden")):0===e&&($("#source-"+a).parent().checkbox("set unchecked"),$("#source-"+a).removeClass("hidden"));$("#source-"+a).parent().unbind("click");$($("#source-"+a).children()[0]).click(function(){})}
function filter(a,b,e,c){var d,f,n={};e?(f=0===filters[b].values.length?!1:!0,"range"===filters[b].type?(f=!0,filters[b].values=a):filters[b].values.push(a)):(filters[b].values.splice(filters[b].values.indexOf(a),1),f=!0);_.forEach(filters,function(a,b){0!==a.length&&(all_empty=!1)});f||!current_measurements?(d=c,current_measurements={}):d=current_measurements;_.forEach(d,function(a,b){n[b]=[]});_.forEach(d,function(a,c){d[c].forEach(function(a){a.id=a.id.replace(/[^a-zA-Z0-9]/g,"");var d=!1;if(!all_empty||
"none"!==$("#"+a.id).css("display"))if(f)Object.keys(filters).forEach(function(b){var c=filters[b].values,e=filters[b].type;if(0!==c.length)if(null!=a.annotation&&b in a.annotation)if("range"===e){if(a.annotation[b]<c[0]||a.annotation[b]>c[1])d=!0}else-1===filters[b].values.indexOf(a.annotation[b].replace(/[^a-zA-Z0-9]/g,""))&&(d=!0);else d=!0});else if(0!==filters[b].values.length){var e=filters[b].values,h=filters[b].type;if(null!=a.annotation&&b in a.annotation)if("range"===h){if(a.annotation[b]<
e[0]||a.annotation[b]>e[1])d=!0}else-1===filters[b].values.indexOf(a.annotation[b].replace(/[^a-zA-Z0-9]/g,""))&&(d=!0);else d=!0}current_measurements=n;d?($("#"+a.id).hide(),$("#table-"+a.id).hide(),_.pull(n[c],a),e=$("#"+a.id).children(),-1!==e.attr("class").indexOf("checked")&&(h=e.attr("id").split("-"),h[3]=_.join(_.slice(h,3),separator="-"),e.checkbox("set unchecked"),$(this).parent().removeClass("hidden"),delete selections[h[1]+"-"+h[2]+"-"+h[3]])):(n[c].push(a),$("#"+a.id).show(),$("#table-"+
a.id).show())});var e=$("#count-"+c);e.attr("data-selected",_.size(selections));e.attr("data-total",n[c].length);e.html(" (Selected: "+e.attr("data-selected")+" of "+e.attr("data-total")+")");$("#leftMenuCount span.data-count").text(e.attr("data-total"));toggleParent(c);"0"===e.attr("data-total")?$("#"+c+" .content").append('<span style="padding-left: 5%">No More Measurements</span>'):0!==$("#"+c+" .content").children("span").length&&$("#"+c+" .content").children("span")[0].remove()});selectSamples()}
function getRandom(a,b){return Math.floor(Math.random()*(a-b))+b}function sortAlphaNum(a,b){var e=/[^a-zA-Z]/g,c=/[^0-9]/g,d=String(a).replace(e,""),e=String(b).replace(e,"");return d===e?(d=parseInt(String(a).replace(c,""),10),c=parseInt(String(b).replace(c,""),10),d===c?0:d>c?1:-1):d>e?1:-1}
function storeMeasurement(a,b){var e="Chart"+(_.size(store)+1),c=[];_.forEach(selections,function(b,e){var n=e.split("-");n[2]=_.join(_.slice(n,2),separator="-");c.push(a[n[2]][n[1]])});store[e]=c;$("#leftmenu").empty();$("#rightmenu").empty();$("#resultTable").empty();$("#sourcemodal").remove();b(store[e],filters)}
function resultTable(a,b,e){$("#resultTable").append();var c=document.createElement("thead"),d=document.createElement("tbody"),f=document.createElement("tr"),n=document.createElement("th"),h=document.createElement("th"),g=document.createElement("th");n.innerHTML="id";h.innerHTML="name";g.innerHTML="group";f.appendChild(n);f.appendChild(h);f.appendChild(g);c.appendChild(f);$("#resultTable").append(c);$("#resultTable").append(d);_.forEach(b,function(a,b){var c=document.createElement("tr"),e=document.createElement("td"),
f=document.createElement("td"),g=document.createElement("td");e.innerHTML=a.id;f.innerHTML=a.name;g.innerHTML=a.datasourceGroup;c.appendChild(e);c.appendChild(f);c.appendChild(g);d.append(c)});$("#resultTable").tablesort();$("#resultmodal").modal({closable:!1,selector:{deny:".ui.grey.back.button",approve:".ui.primary.button"},onDeny:function(){$("#newmodal").modal("show");$("#resultTable").empty()},onApprove:function(){store[a]=b;$("#leftmenu").empty();$("#rightmenu").empty();$("#resultTable").empty();
$("#sourcemodal").remove();e(store[a])}});$("#resultmodal").modal("show")}
function rightAccordion(a){_.forEach(a,function(a,e){var c=Object.keys(a[0].annotation),d=document.createElement("div"),f=document.createElement("a"),n=document.createElement("div"),h=document.createElement("label"),g=document.createElement("span"),m=$(g),p=document.createElement("input"),r=document.createElement("i"),t=document.createElement("div"),l=document.createElement("div"),q=document.createElement("div");d.className="item";d.id=e;f.className="title";n.className="ui checkbox";p.type="checkbox";
p.id="source-"+e;h.innerHTML=e;m.attr("id","count-"+e);m.attr("data-selected","0");m.attr("data-total",a.length);m.html(" (Selected: "+m.attr("data-selected")+" of "+m.attr("data-total")+")");h.appendChild(g);r.className="dropdown icon";t.className="content active";l.className="ui form";g=document.createElement("table");g.className="ui celled table sortable compact";var w=document.createElement("tbody"),m=document.createElement("thead"),u=document.createElement("tr"),l=document.createElement("th");
l.innerHTML="Sample ID";u.appendChild(l);_.each(c,function(a){var b=document.createElement("th");b.innerHTML=a;u.appendChild(b)});m.appendChild(u);g.appendChild(m);_.forEach(a,function(a,b){var d=document.createElement("div"),f=document.createElement("div"),g=document.createElement("input"),h=document.createElement("label"),l=document.createElement("span"),m=a.id.replace(/[^a-zA-Z0-9]/g,"");q.className="grouped fields";d.className="field";d.id=m;d.style="padding-left: 2.5%";f.className="ui checkbox";
f.id="item-"+m+"-"+b+"-"+e;g.type="checkbox";g.name="small";l.innerHTML=a.id;h.appendChild(l);d.appendChild(f);f.appendChild(g);f.appendChild(h);var n=document.createElement("tr");n.id="table-"+a.id;f=document.createElement("td");f.appendChild(d);n.appendChild(f);_.each(c,function(b){var c=document.createElement("td");c.innerHTML=a.annotation[b];n.appendChild(c)});w.appendChild(n)});d.appendChild(f);d.appendChild(t);f.appendChild(n);f.appendChild(r);n.appendChild(p);n.appendChild(h);g.appendChild(w);
t.appendChild(g);$("#rightmenu").append(d);$(n).unbind("click");$($(n).children()[0]).click(function(){})});$("#rightmenu").accordion({exclusive:!1,selector:{trigger:".title .ui.checkbox label"},verbose:!0})}
function loadMeasurements(a,b){var e,c={},d=0,f=0,n={};n[a]=b;n[a]=_.sortBy(n[a],[function(a){return a.id}]);annotations=Object.keys(n[a][f].annotation);annotations=annotations.sort(sortAlphaNum);annotations.forEach(function(a){var b=document.createElement("div"),f=document.createElement("a"),p=document.createElement("i"),r=document.createElement("div"),t=document.createElement("div"),l=document.createElement("div"),q=a.replace(/[^a-zA-Z0-9]/g,"");e=[];var w={};_.forEach(n,function(b,c){allValues=
_.chain(b).map(function(b){if(null!=b.annotation&&a in b.annotation)return b.annotation[a]}).concat(e).value();w=_.countBy(allValues);e=_.uniq(allValues).filter(function(a){return void 0!=a})});e=e.sort(sortAlphaNum);if(parseInt(e[getRandom(0,e.length-1)])&&5<e.length){filters[a]={values:[],type:"range"};var u=document.createElement("div"),v=document.createElement("div"),E=document.createElement("span"),A=document.createElement("p");document.createElement("p");u.className="field";u.width="inherit";
v.className="ui range";v.id=q+"-range";E.id=q+"-display";l.appendChild(u);u.appendChild(v);A.appendChild(E);u.appendChild(A);c[v.id]=e}else filters[a]={values:[],type:"normal"},e.forEach(function(a){var b=document.createElement("div"),c=document.createElement("div"),e=document.createElement("input"),f=document.createElement("label"),g=String(a).replace(/[^a-zA-Z0-9]/g,"");b.className="field";c.className="ui checkbox";c.id="checkbox"+d;e.type="checkbox";e.name=g;e.value=q+"-"+g;f.innerHTML=a+'<div class="ui mini circular horizontal label"> '+
w[a]+"</div>";l.appendChild(b);b.appendChild(c);c.appendChild(e);c.appendChild(f);d++});b.className="item";b.id=q;f.className="title";f.innerHTML=a;p.className="dropdown icon";r.className="active content";t.className="ui form";l.className="grouped fields";b.appendChild(f);b.appendChild(r);f.appendChild(p);r.appendChild(l);$("#leftmenu").append(b)});for(f=0;f<d;f++)$("#checkbox"+f).checkbox({onChecked:function(){filter($(this).val().split("-")[1],$(this).val().split("-")[0],!0,n)},onUnchecked:function(){filter($(this).val().split("-")[1],
$(this).val().split("-")[0],!1,n)}});$("#leftmenu").accordion({exclusive:!1});Object.keys(c).forEach(function(a){$("#"+a).range({start:c[a][0],values:[c[a][0],c[a][c[a].length-1]],step:1,onChange:function(b,c){$("#"+a.split("-")[0]+"-display").html("Min: "+b+" Max:"+c)}});$("#"+a+" .thumb").on("mousedown",function(){$("#"+a).on("mouseup",function(){$("#"+a).range("get value",function(b){filter(b,a.split("-")[0],!0,n)});$("#"+a).off("mouseup")})})});$(".active.content").each(function(a){$(".active.content")[0].className=
"content"});rightAccordion(n);attachActions(n)}
(function(a){a.tablesort=function(b,e){var c=this;this.$table=b;this.$thead=this.$table.find("thead");this.settings=a.extend({},a.tablesort.defaults,e);this.$sortCells=0<this.$thead.length?this.$thead.find("th:not(.no-sort)"):this.$table.find("th:not(.no-sort)");this.$sortCells.on("click.tablesort",function(){c.sort(a(this))});this.direction=this.$th=this.index=null};a.tablesort.prototype={sort:function(b,e){var c=new Date,d=this,f=this.$table,n=0<f.find("tbody").length?f.find("tbody"):f,h=n.find("tr").has("td, th"),
g=h.find(":nth-child("+(b.index()+1)+")").filter("td, th"),m=b.data().sortBy,p=[],r=g.map(function(c,e){return m?"function"===typeof m?m(a(b),a(e),d):m:null!=a(this).data().sortValue?a(this).data().sortValue:a(this).text()});0!==r.length&&(this.index!==b.index()?(this.direction="asc",this.index=b.index()):this.direction="asc"!==e&&"desc"!==e?"asc"===this.direction?"desc":"asc":e,e="asc"==this.direction?1:-1,d.$table.trigger("tablesort:start",[d]),d.log("Sorting by "+this.index+" "+this.direction),
d.$table.css("display"),setTimeout(function(){d.$sortCells.removeClass(d.settings.asc+" "+d.settings.desc);for(var f=0,l=r.length;f<l;f++)p.push({index:f,cell:g[f],row:h[f],value:r[f]});p.sort(function(a,b){return d.settings.compare(a.value,b.value)*e});a.each(p,function(a,b){n.append(b.row)});b.addClass(d.settings[d.direction]);d.log("Sort finished in "+((new Date).getTime()-c.getTime())+"ms");d.$table.trigger("tablesort:complete",[d]);d.$table.css("display")},2E3<r.length?200:10))},log:function(b){(a.tablesort.DEBUG||
this.settings.debug)&&console&&console.log&&console.log("[tablesort] "+b)},destroy:function(){this.$sortCells.off("click.tablesort");this.$table.data("tablesort",null);return null}};a.tablesort.DEBUG=!1;a.tablesort.defaults={debug:a.tablesort.DEBUG,asc:"sorted ascending",desc:"sorted descending",compare:function(a,e){return a>e?1:a<e?-1:0}};a.fn.tablesort=function(b){var e,c;return this.each(function(){e=a(this);(c=e.data("tablesort"))&&c.destroy();e.data("tablesort",new a.tablesort(e,b))})}})(window.Zepto||
window.jQuery);
